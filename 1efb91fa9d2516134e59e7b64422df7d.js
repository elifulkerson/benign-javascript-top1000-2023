!function e(t,r,n){function a(i,s){if(!r[i]){if(!t[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(o)return o(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[i]={exports:{}};t[i][0].call(c.exports,(function(e){return a(t[i][1][e]||e)}),c,c.exports,e,t,r,n)}return r[i].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)a(n[i]);return a}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./consts");var a=new function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.event=function(e,t){t?r.gtag("event",e,t):r.gtag("event",e)},this.userDimension=function(e){var t="guest";if(e.subscriptionType===n.USER_TYPES.FREE){var a=e.tokens,o=Array.isArray(a)&&a.some((function(e){return"is_valid"===e}));t=e.subscriptionType+"-"+(o?"valid":"notValid")}else e.subscriptionType&&(t=e.subscriptionType+"-"+e.subscriptionStatus);r.event("user_dimension",{type:t}),e.subscriptionType&&window.dataLayer.push({user_id:e.userid})},window.dataLayer=window.dataLayer||[],this.gtag=function(){window.dataLayer.push(arguments)},window.gtag=this.gtag,this.gtag("js",new Date),this.gtag("config",t,{custom_map:{dimension1:"type"}})}("UA-23590624-4");r.default=a},{"./consts":115}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=i(e("firebase/app"));e("firebase/messaging");var o=i(e("./providers/api"));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isBrowserSupport="Notification"in window&&a.default.messaging.isSupported();try{this.sentToken=window.localStorage.getItem(e.LS_TOKEN_KEY)}catch(e){this.sentToken=void 0}}return e.prototype.init=function(e){this.config=e;try{this.isBrowserSupport&&(a.default.initializeApp(e),this.isSubscribed&&!this.sentToken&&this.handleToken())}catch(e){window.Raven&&window.Raven.captureException(e)}},e.prototype.subscribe=function(){var e=this;if(!this.isBrowserSupport)throw new Error("Browser doesn't support push notifications");if(!this.config)throw new Error("You need to call init first");return a.default.messaging().requestPermission().then((function(){return e.handleToken()})).catch((function(e){throw window.Raven&&window.Raven.captureException(e),new Error(e)}))},e.prototype.handleToken=function(){var e=this;return a.default.messaging().getToken().then((function(t){if(!t)throw new Error("CurrentToken is null or undefined");e.sendTokenToServer(t)})).catch((function(t){throw e.setTokenSentToServer(!1),new Error("An error occurred while getting the token: "+t.message)}))},e.prototype.sendTokenToServer=function(e){var t=this;this.isTokenSentToServer(e)||o.default.getCsrfToken().then((function(t){return o.default.postPushSubscribe({turkey_t:t.turkey_t,token:e})})).then((function(r){r.success&&t.setTokenSentToServer(e)})).catch((function(e){window.Raven&&window.Raven.captureException(e)}))},e.prototype.isTokenSentToServer=function(e){return this.sentToken===e},e.prototype.setTokenSentToServer=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.sentToken=t;try{window.localStorage.setItem(e.LS_TOKEN_KEY,this.sentToken)}catch(e){}},n(e,[{key:"isSubscribed",get:function(){return this.isBrowserSupport&&"granted"===window.Notification.permission}},{key:"isDefault",get:function(){return this.isBrowserSupport&&"default"===window.Notification.permission}},{key:"isDenied",get:function(){return this.isBrowserSupport&&"denied"===window.Notification.permission}}]),e}();s.LS_TOKEN_KEY="sentFirebaseMessagingToken";var u=new s;r.default=u},{"./providers/api":127,"firebase/app":void 0,"firebase/messaging":void 0}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.EVENT_LEVELS=void 0;var n,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=e("slivax-client"),s=(n=i)&&n.__esModule?n:{default:n},u=e("./utils");var l=r.EVENT_LEVELS={REGULAR:"regular",ERROR:"error",DEBUG:"debug",INFO:"info"},c={autoSend:!0,interval:60,relatedPool:null,maxSize:null},d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.slivax=s.default,this.isDebug=!1,this.stateStamps={},this.states={}}return e.prototype.init=function(e){this.slivax.init(e),e.debug&&(this.isDebug=!0);try{e.userId&&this.slivax.setUid(e.userId),e.fingerprint&&this.slivax.setFingerprint(e.fingerprint),this.addPool("player",{interval:60}),this.addPool("error",{interval:60}),this.addPool("events",{interval:60})}catch(e){window.Raven&&window.Raven.captureException(e)}},e.prototype.setEnabled=function(e){this.slivax.setEnabled(e)},e.prototype.hasPool=function(e){try{return this.slivax.hasPool(e)}catch(e){return!1}},e.prototype.addPool=function(e,t){if(this.isInit){var r=a({},c,t),n=r.interval,o=r.autoSend,i=r.relatedPool,s=r.maxSize;this.slivax.addPool(e,{interval:n,maxSize:s,autoSend:o,relatedPool:i})}},e.prototype.push=function(e,t){var r=t.body,n=t.type,a=t.level;if(this.isInit&&(a!==l.DEBUG||this.isDebug))try{this.slivax.push(e,{body:r,type:n,level:a})}catch(e){}},e.prototype.pushMain=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.REGULAR;this.push("main",{type:e,body:t,level:r})},e.prototype.pushPlayer=function(e,t,r){this.push("player",{type:e,body:t,level:r})},e.prototype.pushError=function(e,t){this.push("error",{type:e,body:t,level:l.ERROR})},e.prototype.pushEvent=function(e,t){this.push("events",{type:e,body:t,level:l.REGULAR})},e.prototype.pushStateEvent=function(e,t){var r=this.stateStamps[e],n=this.states[e];this.stateStamps[e]=(0,u.getTimestamp)(),this.states[e]=t,this.pushEvent(e,{prevStamp:r,stamp:this.stateStamps[e],prevState:n,state:t})},o(e,[{key:"isInit",get:function(){return this.slivax&&this.slivax.isInit}}]),e}(),f=new d;r.default=f},{"./utils":168,"slivax-client":void 0}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.initApartmentsData=r.apartmentsFetch=r.SET_SELECT_APARTMENT_NUMBER=r.UPDATE_APARTMENT=r.FETCH_APARTMENTS=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};r.updateApartment=g,r.setFieldCamera=function(e,t){return function(r,n){var a=n().apartments.data,o=i.default.find(a,{apartment:e.split("_")[0]});if(o){var s=i.default.find(o.cameras,{camera:e});s&&(i.default.forEach(t,(function(e,t){s[t]=e})),r(g(o)))}}},r.setSelectApartmentNumber=function(e){return{type:h,payload:e}};var a=f(e("i18next")),o=f(e("bluebird")),i=f(e("lodash")),s=e("../utils/fetch"),u=e("../utils/fsa"),l=e("../selectors/auth"),c=e("../utils/normalize/apartments"),d=f(e("../SlivaxHandler"));function f(e){return e&&e.__esModule?e:{default:e}}var p=r.FETCH_APARTMENTS="FETCH_APARTMENTS",m=r.UPDATE_APARTMENT="UPDATE_APARTMENT",h=r.SET_SELECT_APARTMENT_NUMBER="SET_SELECT_APARTMENT_NUMBER",S=(0,u.createFSA)(p),v=r.apartmentsFetch=function(){return function(e,t){return(0,s.fetch)("apartments",{type:"GET",url:(0,l.getApartmentsURI)(t()),cache:!1}).then((function(t){var r=(0,c.normalizeApartments)(t);return e(S(r)),o.default.resolve(t)})).catch((function(t){return e(S(new Error(t))),o.default.reject(t)}))}},E=void 0;function g(e){return{type:m,payload:(0,c.normalizeApartment)(e)}}r.initApartmentsData=function(){return function(e,t){var r=t(),i=Math.max((0,l.getUpdateAparmentsInterval)(r),300);return clearInterval(E),E=setInterval((function(){a.default.reloadResources(),e(v())}),1e3*i),o.default.all([e(v())]).then((function(e){var t=n(e,1)[0].map((function(e){e.planSVG,e.planSVG2;return function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["planSVG","planSVG2"])}));d.default.pushMain("apartments",t)}))}}},{"../SlivaxHandler":3,"../selectors/auth":152,"../utils/fetch":166,"../utils/fsa":167,"../utils/normalize/apartments":172,bluebird:void 0,i18next:void 0,lodash:void 0}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.authInit=r.verification=r.reactivation=r.logout=r.resetPassword=r.login=r.authSetResetPasswordShowSuccessMessage=r.authSetResetPasswordIsFetching=r.authSetResetPasswordErrorMessage=r.authSetIsLoginRequestWasSend=r.authSetIsFetching=r.authSetIsBlacklistedError=r.authSetError=r.authSet=r.AUTH_SET_RESET_PASSWORD_SHOW_SUCCESS_MESSAGE=r.AUTH_SET_RESET_PASSWORD_IS_FETCHING=r.AUTH_SET_RESET_PASSWORD_ERROR_MESSAGE=r.AUTH_SET_IS_LOGIN_REQUEST_WAS_SEND=r.AUTH_SET_IS_FETCHING=r.AUTH_SET_IS_BLACKLISTED_ERROR=r.AUTH_SET_ERROR=r.AUTH_SET=void 0;var n=_(e("i18next")),a=_(e("moment")),o=e("rlc-components"),i=e("../consts"),s=e("../config"),u=e("../utils"),l=e("../utils/localStorage"),c=e("../utils/fetch"),d=_(e("../libs/fixtime")),f=_(e("../SlivaxHandler")),p=_(e("../GoogleAnalyticsHandler")),m=_(e("../PushHandler")),h=_(e("../providers/api")),S=e("../selectors/auth"),v=e("../selectors/config"),E=e("./modal"),g=e("./current"),y=e("../utils/auth");function _(e){return e&&e.__esModule?e:{default:e}}var T=r.AUTH_SET="auth/AUTH_SET",O=r.AUTH_SET_ERROR="auth/AUTH_SET_ERROR",A=r.AUTH_SET_IS_BLACKLISTED_ERROR="auth/AUTH_SET_IS_BLACKLISTED_ERROR",R=r.AUTH_SET_IS_FETCHING="auth/AUTH_SET_IS_FETCHING",b=r.AUTH_SET_IS_LOGIN_REQUEST_WAS_SEND="auth/AUTH_SET_SEND_LOGIN_REQUEST",w=r.AUTH_SET_RESET_PASSWORD_ERROR_MESSAGE="auth/AUTH_SET_RESET_PASSWORD_ERROR_MESSAGE",P=r.AUTH_SET_RESET_PASSWORD_IS_FETCHING="auth/AUTH_SET_RESET_PASSWORD_IS_FETCHING",C=r.AUTH_SET_RESET_PASSWORD_SHOW_SUCCESS_MESSAGE="auth/AUTH_SET_RESET_PASSWORD_SHOW_SUCCESS_MESSAGE",M=r.authSet=function(e){return{type:T,payload:e}},I=r.authSetError=function(e){return{type:O,payload:e}},N=r.authSetIsBlacklistedError=function(e){return{type:A,payload:e}},L=r.authSetIsFetching=function(e){return{type:R,payload:e}},D=r.authSetIsLoginRequestWasSend=function(e){return{type:b,payload:e}},U=r.authSetResetPasswordErrorMessage=function(e){return{type:w,payload:e}},x=r.authSetResetPasswordIsFetching=function(e){return{type:P,payload:e}},k=r.authSetResetPasswordShowSuccessMessage=function(e){return{type:C,payload:e}},F=(r.login=function(e){return function(t,r){if(t(D(!1)),!e.password&&!e.login)return t(I(n.default.t("errors.empty-login-and-pwd")));if(!e.login)return t(I(n.default.t("errors.empty-login")));if(!e.password)return t(I(n.default.t("errors.empty-pwd")));t(I(null)),t(N(!1)),t(L(!0)),t(D(!0));var a=r(),o=(0,S.getLoginURI)(a);return(0,c.fetch)("login",{url:o,type:"POST",data:e,retries:1,success:function(){return window.location.reload(!0)},error:function(e){t(L(!1)),"user-blacklisted"===e.error&&t(N(!0));var r=e.reason?"errors.login."+e.reason:"errors."+(e.error||"auth-failed");t(I(n.default.t(r)))}})}},r.resetPassword=function(e){return function(t,r){var a=r(),o=(0,S.getResetPasswordURI)(a);return e.login?(0,y.validateEmail)(e.login)?(t(U(void 0)),t(x(!0)),t(k(!1)),(0,c.fetch)("resetPassword",{url:o,type:"POST",data:{email:e.login},retries:1,success:function(e){t(x(!1)),e&&e.success?(t(U(void 0)),t(k(!0))):t(U(n.default.t("modals.reset_password.error")))},error:function(e){t(x(!1)),/status:\s*429/.test(e)?t(U(n.default.t("modals.reset_password.too_many_requests"))):t(U(n.default.t("modals.reset_password.error")))}})):t(U(n.default.t("modals.reset_password.bad_email"))):t(U(n.default.t("errors.empty-login")))}},r.logout=function(){return function(e,t){e(L(!0));var r=t(),n=(0,S.getLogoutURI)(r);window.location=n}},"_CALC"),B=void 0,H=function(){return function(e){return(0,u.getFingerprint)().then((function(e){var t={authg:(B=e)+(0,u.getAuthCapabilities)()},r=(0,l.getBalanced)();return r&&(t.balanced=r),(0,c.fetch)("whoami",{url:i.WHOAMI_URI,type:"GET",data:t,cache:!1})})).then((function(t){return function(e){var t="guest",r=e&&e.user&&e.user.tokens||[];r&&r.indexOf("active")>=0&&(r.indexOf("member")>=0&&(t="standard"),r.indexOf("premium")>=0&&(t="premium"));var n=window.bootstrap.access;if(""===n||["guest","standard","premium"].indexOf(n)<0||!(0,l.isLocalStorage)())return t;if(t!==n){var a=localStorage.getItem(F)||0;if(a<5)return localStorage.setItem(F,a+1),(0,u.reloadPageWithoutCache)(),t}localStorage.removeItem(F)}(t),e(M(t)),window.Raven&&window.Raven.setUserContext({id:t.user.id}),Promise.resolve(t)})).catch((function(e){return window.Raven&&window.Raven.captureException(e),Promise.reject()}))}};var j=void 0,q=function e(t,r){return function(n){clearInterval(j);var a=function(e){if(!e.user.login)return null;var t=e.config.intervals.updateAuth;return Number.isInteger(t)?Math.max(t,s.MINIMAL_UPDATE_AUTH_INTERVAL):s.DEFAULT_UPDATE_AUTH_INTERVAL}(t);a&&(j=setTimeout((function(){n(r()),n(e(t,r))}),1e3*a))}};r.reactivation=function(){return function(e,t){var r=t(),n=r.auth.user.biller_expires,o=r.auth.config.urls.reactivation,i=(0,v.getIntervals)(r).reactivationInterval;return o&&a.default.unix(n).diff((0,a.default)(),"minute")>i?(0,c.fetch)("reactivation",{type:"GET",url:o,cache:!1}).then((function(t){var r=t.success,n=t.link;return r?((0,l.setRebillReactivateWasSuccessSend)(),e((0,g.blockRebillReactivate)()),n?window.open(n,"_blank"):e((0,E.modalShowRebillWarning)())):e((0,E.modalShowRebillWarning)()),e(H())})).catch((function(){return e((0,E.modalShowRebillWarning)()),e(H())})):e((0,E.modalShowRebillWarning)())}},r.verification=function(){return function(e,t){var r=t().auth.config.urls.verification;if(r)return e((0,g.setFreeActivationState)(o.FREE_ACTIVATION_STATE.SENDING)),(0,c.fetch)("verification",{type:"POST",url:r,cache:!1}).then((function(t){t.success?(e((0,g.setFreeActivationState)(o.FREE_ACTIVATION_STATE.SUCCESS)),(0,l.setFreeActivationRequest)()):e((0,g.setFreeActivationState)(o.FREE_ACTIVATION_STATE.ERROR))})).catch((function(t){e((0,g.setFreeActivationState)(o.FREE_ACTIVATION_STATE.ERROR)),console.error(t)}))}},r.authInit=function(){return function(e){return e(H()).then((function(t){h.default.setUrls({news:t.config.urls.news,configuration:t.config.urls.configuration,pushSubscribe:t.config.urls.pushSubscribe,rsm:t.config.urls.rsm}),t.timestamp&&d.default.init(t.timestamp);try{t.config.slivax.enabled&&f.default.init({service:"site",url:t.config.slivax.url,userId:t.user.id,debug:t.config.debug,interval:1e3*Number(t.config.slivax.interval),fingerprint:B})}catch(e){console.log(e)}return m.default.init(t.config.firebase),f.default.pushMain("auth",t),p.default.userDimension(t.user),e(q(t,H))}))}}},{"../GoogleAnalyticsHandler":1,"../PushHandler":2,"../SlivaxHandler":3,"../config":114,"../consts":115,"../libs/fixtime":126,"../providers/api":127,"../selectors/auth":152,"../selectors/config":154,"../utils":168,"../utils/auth":163,"../utils/fetch":166,"../utils/localStorage":169,"./current":11,"./modal":14,i18next:void 0,moment:void 0,"rlc-components":void 0}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.loadCollectionVideos=r.COLLECTION_DATA_SET_VIDEOS=void 0;var n,a=e("../providers/api"),o=(n=a)&&n.__esModule?n:{default:n};var i=r.COLLECTION_DATA_SET_VIDEOS="COLLECTIONS_DATA_SET_VIDEOS";r.loadCollectionVideos=function(){return function(e){o.default.getCollectionVideos().then((function(t){var r;t[0]&&e((r=t[0],{type:i,payload:r}))}))}}},{"../providers/api":127}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.initSettings=r.setSettings=r.configParseQuery=r.configSetSendStartStream=r.configSetLM=r.configSetMuted=r.configSetData=r.CONFIG_SET_SEND_START_STREAM=r.CONFIG_SET_SETTINGS=r.CONFIG_SET_DATA=void 0;var n=s(e("../utils/events")),a=e("../utils/localStorage"),o=e("../consts"),i=s(e("../providers/api"));function s(e){return e&&e.__esModule?e:{default:e}}var u=r.CONFIG_SET_DATA="CONFIG_SET_DATA",l=r.CONFIG_SET_SETTINGS="CONFIG_SET_SETTINGS",c=r.CONFIG_SET_SEND_START_STREAM="CONFIG_SET_SEND_START_STREAM",d=r.configSetData=function(e){return{type:u,payload:e}},f=r.configSetMuted=function(e){return d({isMuted:e})},p=r.configSetLM=function(e){return function(t){if(e){var r=Number(e);return o.USED_LANDING_MODES.indexOf(r)<0&&(r=o.LANDING_MODES.NORMAL),n.default.init(),n.default.runFocusWaiter(),t(d({landingMode:r}))}return t(d({landingMode:null}))}},m=r.configSetSendStartStream=function(e){return{type:c,payload:e}},h=(r.configParseQuery=function(e){return function(t,r){var i=null,s=null,u=(0,a.isLocalStorage)();e.ts&&e.tc?(i=e.tc,s=e.ts,u&&(localStorage.setItem(o.LOCAL_STORAGE_KEYS.TRACK_CAMPAIGN,i),localStorage.setItem(o.LOCAL_STORAGE_KEYS.TRACK_SESSION,s))):u&&(i=localStorage.getItem(o.LOCAL_STORAGE_KEYS.TRACK_CAMPAIGN),s=localStorage.getItem(o.LOCAL_STORAGE_KEYS.TRACK_SESSION)),i&&s&&t(d({tc:i,ts:s})),Object.keys(e).forEach((function(a){switch(a){case"nosound":t(f(!0));break;case"landingmode":case"lm":var o=e[a];t(p(o));break;case"sss":void 0===r().config.sendStartStream&&t(m(!0)),n.default.siteOpen()}}))}},r.setSettings=function(e){return{type:l,payload:e}}),S=function(){return function(e){return i.default.getConfiguration().then((function(t){e(h(t))}))}};r.initSettings=function(){return function(e){return setInterval((function(){return e(S())}),6e4),e(S())}}},{"../consts":115,"../providers/api":127,"../utils/events":165,"../utils/localStorage":169}],8:[function(e,t,r){"use strict";t.exports=e("./current.guest")},{"./current.guest":9,"./current.member":10}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.toggleIsAutoFollow=r.setIsAutoFollow=r.setModeFour=void 0;var n=e("../modal");r.setModeFour=n.modalShowPremium,r.setIsAutoFollow=n.modalShowPremium,r.toggleIsAutoFollow=n.modalShowPremium},{"../modal":14}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.toggleIsAutoFollow=r.setIsAutoFollow=r.setViewModeRM=r.setModeFour=r.SET_IS_AUTO_FOLLOW=void 0;var n=e("../../selectors/auth"),a=e("../snapshots"),o=e("../modal"),i=e("../../consts"),s=e("./index"),u=r.SET_IS_AUTO_FOLLOW="SET_IS_AUTO_FOLLOW",l=(r.setModeFour=function(){return function(e,t){(0,n.getAccess)(t())===i.USER_TYPES.PREMIUM?(e((0,s.setViewMode)(i.VIEW_MODE.FOUR)),e((0,s.fillPlayers)())):e((0,o.modalShowStandard)())}},r.setViewModeRM=function(e){return function(t){t((0,s.setViewMode)(e)),t((0,s.fillPlayers)())}},r.setIsAutoFollow=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(r,a){return(0,n.getAccess)(a())!==i.USER_TYPES.PREMIUM?r((0,o.modalShowStandard)()):r({type:u,payload:{player:e,mode:t}})}});r.toggleIsAutoFollow=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.AUTO_FOLLOW_MODES.ALL;return function(r,s){var u=s(),c=u.current.player;if((0,n.getAccess)(u)===i.USER_TYPES.PREMIUM){var d=null!==e&&e>=0&&e<=3?e:c,f=u.current.isAutoFollow;f.mode!==t||f.player!==d?(r(l(d,t)),r((0,a.fetchTopcams)())):r(l(null,null))}else r((0,o.modalShowStandard)())}}},{"../../consts":115,"../../selectors/auth":152,"../modal":14,"../snapshots":21,"./index":11}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setFreeActivationState=r.blockRebillReactivate=r.setStartOnRootPathname=r.setExclude=r.getExcludedEdges=r.setPlayerErrorByPlayerNumber=r.setPlayerErrorBySessionId=r.setVideoFormat=r.setPrevPlayer=r.setNextPlayer=r.toggleFullscreen=r.setModeFullscreen=r.setModeTwoHorizontal=r.setModeTwoVertical=r.setModeSingleWide=r.setModeSingle=r.setViewMode=r.fillPlayers=r.pureSetViewMode=r.setPopular=r.setApartment=r.setCurrentPlayer=r.setPrevLevel=r.setNextLevel=r.setPrevApartment=r.setNextApartment=r.setPrevCamera=r.setNextCamera=r.setPlayers=r.setCurrentLevel=r.setIsMutedToPlayer=r.setCamera=r.setCameraToPlayer=r.setLanguage=r.SET_FREE_ACTIVATION_STATE=r.SET_IS_ACCESS_REBILL_REACTIVATE=r.SET_START_ON_ROOT_PATHNAME=r.SET_EXCLUDE_LIST=r.SET_VIDEO_FORMAT=r.SET_VIEW_MODE=r.SET_ERROR_TO_PLAYER_BY_PLAYER_NUMBER=r.SET_ERROR_TO_PLAYER_BY_SESSION_ID=r.SET_PLAYLIST_TO_PLAYER=r.SET_IS_MUTED_TO_PLAYER=r.SET_FORMAT_TO_PLAYER=r.SET_CAMERA_TO_PLAYER=r.SET_CURRENT_PLAYER=r.SET_PLAYERS=r.SET_LANGUAGE=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=e("./current.bundle");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}})})),r.setPlaylistToPlayer=function(e,t){return{type:A,payload:{player:e,playlist:t}}};var o=e("../../initHistory"),i=E(e("lodash")),s=e("../../selectors/cameras"),u=e("../../selectors/auth"),l=e("../../selectors/apartments"),c=e("../../selectors/current"),d=e("../../utils"),f=e("../../utils/localStorage"),p=e("../../utils/auth"),m=e("../modal"),h=e("../config"),S=e("../../consts"),v=E(e("../../SlivaxHandler"));function E(e){return e&&e.__esModule?e:{default:e}}var g=r.SET_LANGUAGE="SET_LANGUAGE",y=r.SET_PLAYERS="SET_PLAYERS",_=r.SET_CURRENT_PLAYER="SET_CURRENT_PLAYER",T=r.SET_CAMERA_TO_PLAYER="SET_CAMERA_TO_PLAYER",O=(r.SET_FORMAT_TO_PLAYER="SET_FORMAT_TO_PLAYER",r.SET_IS_MUTED_TO_PLAYER="SET_IS_MUTED_TO_PLAYER"),A=r.SET_PLAYLIST_TO_PLAYER="SET_PLAYLIST_TO_PLAYER",R=r.SET_ERROR_TO_PLAYER_BY_SESSION_ID="SET_ERROR_TO_PLAYER_BY_SESSION_ID",b=r.SET_ERROR_TO_PLAYER_BY_PLAYER_NUMBER="SET_ERROR_TO_PLAYER_BY_PLAYER_NUMBER",w=r.SET_VIEW_MODE="SET_VIEW_MODE",P=r.SET_VIDEO_FORMAT="SET_VIDEO_FORMAT",C=r.SET_EXCLUDE_LIST="SET_EXCLUDE_LIST",M=r.SET_START_ON_ROOT_PATHNAME="SET_START_ON_ROOT_PATHNAME",I=r.SET_IS_ACCESS_REBILL_REACTIVATE="SET_IS_ACCESS_REBILL_REACTIVATE",N=r.SET_FREE_ACTIVATION_STATE="SET_FREE_ACTIVATION_STATE",L=(r.setLanguage=function(e){return{type:g,payload:e}},function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(r,n){var a="/"+(n().current.language||"en")+"/view/"+e;a!==window.location.pathname&&(t?o.history.replace(a):o.history.push(a))}});function D(e,t){var r=t.split("_")[0],n=i.default.find(e,{apartment:r}),a=i.default.get(n,"cameras");return i.default.find(a,{camera:t})}var U=r.setCameraToPlayer=function(e,t){return function(r,a){var o=a(),s=o.apartments.data,l=void 0!==t?t:(0,c.getCurrentPlayer)(o),d=void 0;("string"==typeof e?d=D(s,e):"object"===(void 0===e?"undefined":n(e))&&(d=e),d)||(d=D(s,o.auth.params.popularCamera||i.default.get(o,"apartments.data[0].cameras[0]")||"16_1"));var f=(0,u.getAccess)(o),h=(0,p.getUserHasAccess)(f,d.access),v=o.config.landingMode;h||v||r((0,m.modalShowPremium)({reason:S.GO_TO_JOIN_REASONS.FORBIDDEN_CAMERA,camera:d.camera})),l===o.current.player&&r(L(d.camera)),r({type:T,payload:{player:l,camera:d}})}},x=r.setCamera=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(i,s){var l=s(),c=l.current.player,d=null!==t?t:c;if(r)i(d!==c?U(e,d):L(e));else{if(l.current.isAutoFollow.player===d&&i((0,a.setIsAutoFollow)()),l.config.landingMode===S.LANDING_MODES.SCENES&&i((0,h.configSetLM)(null)),l.config.isMuted&&i((0,h.configSetMuted)(!1)),o){var f=void 0,v=l.apartments.data;"string"==typeof e?f=D(v,e):"object"===(void 0===e?"undefined":n(e))&&(f=e);var E=(0,u.getAccess)(l);if(!(0,p.getUserHasAccess)(E,f.access))return void i((0,m.modalShowPremium)({reason:S.GO_TO_JOIN_REASONS.FORBIDDEN_CAMERA,camera:f.camera}))}i(L(e))}}},k=(r.setIsMutedToPlayer=function(e,t){return{type:O,payload:{player:e,isMuted:t}}},r.setCurrentLevel=function(e){return function(t,r){var n=r();if((0,c.getCurrentLevel)(n)!==e){var a=(0,s.getCameraOnLevelSelector)(n)(e);a&&t(x(a.camera))}}}),F=r.setPlayers=function(e){return{type:y,payload:e}},B=(r.setNextCamera=function(){return function(e,t){return e(x((0,s.getNextCamera)(t(),!1,void 0,!0).camera))}},r.setPrevCamera=function(){return function(e,t){return e(x((0,s.getNextCamera)(t(),!0,void 0,!0).camera))}},r.setNextApartment=function(){return function(e,t){return e(x((0,l.getCameraOnNextApartment)(t()).camera))}},r.setPrevApartment=function(){return function(e,t){return e(x((0,l.getCameraOnNextApartment)(t(),!0).camera))}},r.setNextLevel=function(){return function(e,t){return e(k((0,s.getNextLevel)(t())(!1)))}},r.setPrevLevel=function(){return function(e,t){return e(k((0,s.getNextLevel)(t())(!0)))}},r.setCurrentPlayer=function(e){return function(t,r){var n=r();if(n.current.player!==e){t({type:_,payload:e});var a=n.players[e].camera.camera;t(L(a,!0))}}}),H=(r.setApartment=function(e){return function(t,r){return t(x((0,s.getCameraForSelectApartmentSelector)(r())(e).camera))}},r.setPopular=function(){return function(e,t){var r=t(),n=r.auth.params.popularCamera||i.default.get(r,"apartments.data[0].cameras[0].camera","03_1");return e(L(n))}},r.pureSetViewMode=function(e){return{type:w,payload:{viewMode:e}}}),j=r.fillPlayers=function(){return function(e,t){var r,n,a,o=t(),u=(0,c.getViewMode)(o),l=Number(o.current.player),d=o.players[l],f=(a=d,(n=l)in(r={})?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,r);switch(u){case S.VIEW_MODE.TWO_VERTICAL:case S.VIEW_MODE.TWO_HORIZONTAL:var p=l%2==0?l+1:l-1;if(i.default.isEmpty(o.players[p].camera)){var m=(0,s.getNextCamera)(o,!1,d.camera);f[p]={camera:m}}else f[p]=o.players[p];break;case S.VIEW_MODE.FOUR:for(var h=void 0,v=0;v<4;v+=1)i.default.isEmpty(o.players[v].camera)?f[v]={camera:(0,s.getNextCamera)(o,!1,h)}:f[v]=o.players[v],h=f[v].camera}e(F(f))}},q=r.setViewMode=function(e){return function(t,r){r().config.landingMode&&t((0,h.configSetLM)(null)),t(H(e)),v.default.pushStateEvent("setViewMode",e)}},G=(r.setModeSingle=function(){return function(e){e(q(S.VIEW_MODE.SINGLE)),e(j())}},r.setModeSingleWide=function(){return function(e,t){var r=t();(0,u.checkMultiviewAccess)(r)?(e(q(S.VIEW_MODE.SINGLE_WIDE)),e(j())):(0,u.getIsFree)(r)?e((0,m.modalShowFreeActivation)()):e((0,m.modalShowPremium)())}},r.setModeTwoVertical=function(){return function(e,t){var r=t();(0,u.checkMultiviewAccess)(r)?(e(q(S.VIEW_MODE.TWO_VERTICAL)),e(j())):(0,u.getIsFree)(r)?e((0,m.modalShowFreeActivation)()):e((0,m.modalShowPremium)())}},r.setModeTwoHorizontal=function(){return function(e,t){var r=t();(0,u.checkMultiviewAccess)(r)?(e(q(S.VIEW_MODE.TWO_HORIZONTAL)),e(j())):(0,u.getIsFree)(r)?e((0,m.modalShowFreeActivation)()):e((0,m.modalShowPremium)())}},r.setModeFullscreen=function(){return function(e,t){var r=t();(0,u.checkMultiviewAccess)(r)?(e(q(S.VIEW_MODE.FULLSCREEN)),e(j())):(0,u.getIsFree)(r)?e((0,m.modalShowFreeActivation)()):e((0,m.modalShowPremium)())}});r.toggleFullscreen=function(){return function(e,t){var r=t();(0,u.checkMultiviewAccess)(r)?r.current.viewMode===S.VIEW_MODE.FULLSCREEN?(e(q(r.current.prevViewMode)),e(j())):e(G()):(0,u.getIsFree)(r)?e((0,m.modalShowFreeActivation)()):e((0,m.modalShowPremium)())}},r.setNextPlayer=function(){return function(e,t){var r=t(),n=r.players,a=r.current.player,o=Number(a)+1;if(!n[o]||!n[o].show){var s=i.default.pickBy(n,(function(e){return e.show}));o=i.default.toNumber(i.default.keys(s)[0])}e(B(o))}},r.setPrevPlayer=function(){return function(e,t){var r=t(),n=r.players,a=r.current.player,o=Number(a)-1;if(!n[o]||!n[o].show){var s=i.default.pickBy(n,(function(e){return e.show})),u=i.default.keys(s);o=i.default.toNumber(u[u.length-1])}e(B(o))}},r.setVideoFormat=function(e){return{type:P,payload:e}};r.setPlayerErrorBySessionId=function(e){var t=e.sessionId,r=e.error,n=e.errorMessage;return{type:R,payload:{sessionId:t,error:r,errorMessage:n}}},r.setPlayerErrorByPlayerNumber=function(e){var t=e.player,r=e.error,n=e.errorMessage;return{type:b,payload:{player:t,error:r,errorMessage:n}}};var Y=r.getExcludedEdges=function(e,t){var r=e||[];if((0,f.isLocalStorage)())try{r=JSON.parse(localStorage.getItem("ExE"))||r}catch(e){}var n=i.default.sortBy(r,(function(e){return e.tm})).reverse();if(void 0!==t){var a=(0,d.getTimestamp)()-60*t;n=i.default.filter(n,(function(e){return e.tm>=a}))}return n};r.setExclude=function(e){return function(t,r){var n=r(),a={name:e.replace("rtmps://","").split(".")[0],tm:(0,d.getTimestamp)()},o=Y(n.current.excludeList),s=i.default.findIndex(o,{name:a.name});if(s>-1?o[s]=a:o.push(a),(0,f.isLocalStorage)())try{localStorage.setItem("ExE",JSON.stringify(o))}catch(e){}t({type:C,payload:o})}},r.setStartOnRootPathname=function(e){return{type:M,payload:e}},r.blockRebillReactivate=function(){return{type:I,payload:!1}},r.setFreeActivationState=function(e){return{type:N,payload:e}}},{"../../SlivaxHandler":3,"../../consts":115,"../../initHistory":123,"../../selectors/apartments":151,"../../selectors/auth":152,"../../selectors/cameras":153,"../../selectors/current":155,"../../utils":168,"../../utils/auth":163,"../../utils/localStorage":169,"../config":7,"../modal":14,"./current.bundle":8,lodash:void 0}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setCurrentScene=r.SET_CURRENT_SCENE=r.SAVE_SCENES=void 0,r.selectNextScene=function(){return function(e,t){var r=t().landing,n=r.currentScene,a=r.data.scenes;if(!a||0===a.length)return null;for(var o=void 0,s=void 0,u=!1;!u;)s=a[o=Math.floor(Math.random()*a.length)],u=!n||!(s.camera===n.camera&&s.ts===n.ts);return e(i(a[o]))}},r.getLandingScenes=function(){return function(e){return(t=new Date,r=300*Math.floor(t.getTime()/3e5),fetch("//hls.static."+n.DOMAIN+"/hola/static/resources/content.json?_="+r).then((function(e){return e.json()}))).then((function(t){return e({type:a,payload:t})}));var t,r}};var n=e("../consts"),a=r.SAVE_SCENES="landing/SAVE_SCENES",o=r.SET_CURRENT_SCENE="landing/SET_CURRENT_SCENE";var i=r.setCurrentScene=function(e){return{type:o,payload:e}}},{"../consts":115}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=r.MD_SET_CAMERAS="MD_SET_CAMERAS",a=r.MD_SET_APARTMENTS="MD_SET_APARTMENTS",o=r.MD_CLEAN_DATA="MD_CLEAN_DATA",i=r.MD_SET_IS_ON="MD_SET_IS_ON",s=r.mdSetApartments=function(e){return{type:a,payload:{apartments:e}}},u=r.mdSetCameras=function(e){return{type:n,payload:{cameras:e}}},l=(r.mdCleanData=function(){return{type:o}},r.mdSetIsOn=function(e){return function(t){t({type:i,payload:{isOn:e}}),e||(t(s({})),t(u({})))}});r.toggleMdIsOn=function(){return function(e,t){return e(l(!t().md.isOn))}}},{}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.modalShowAccessError=r.modalShowReloadDialog=r.modalShowResetPassword=r.modalShowFreeActivation=r.modalShowVerotellRebill=r.modalShowRebillWarning=r.modalShowConvert=r.modalShowHotkeys=r.modalShowLogin=r.modalShowStandard=r.modalShowScene=r.modalShowPremium=r.modalClose=r.modalShowModal=r.modalSetMeta=r.modalSetType=r.modalSetShow=r.MODAL_SET_META=r.MODAL_SET_TYPE=r.MODAL_SET_SHOW=void 0;var n=e("../consts"),a=e("../selectors/auth"),o=e("./preview"),i=r.MODAL_SET_SHOW="MODAL_SET_SHOW",s=r.MODAL_SET_TYPE="MODAL_SET_TYPE",u=r.MODAL_SET_META="MODAL_SET_META",l=r.modalSetShow=function(e){return{type:i,payload:e}},c=r.modalSetType=function(e){return{type:s,payload:e}},d=r.modalSetMeta=function(e){return{type:u,payload:e}},f=r.modalShowModal=function(e,t){return function(r){r((0,o.hidePreview)()),r(c(e)),r(l(!0)),r(d(t))}},p=(r.modalClose=function(){return function(e){e(l(!1)),e(c(null)),e(d(null))}},r.modalShowPremium=function(e){return f(n.MODAL_TYPES.PREMIUM,e)}),m=(r.modalShowScene=function(e){return f(n.MODAL_TYPES.SCENE,e)},r.modalShowStandard=function(e){return f(n.MODAL_TYPES.STANDARD,e)});r.modalShowLogin=function(e){return f(n.MODAL_TYPES.LOGIN,e)},r.modalShowHotkeys=function(){return f(n.MODAL_TYPES.HOTKEY)},r.modalShowConvert=function(){return f(n.MODAL_TYPES.CONVERT)},r.modalShowRebillWarning=function(){return f(n.MODAL_TYPES.REBILL_WARNING)},r.modalShowVerotellRebill=function(){return f(n.MODAL_TYPES.VEROTEL_REBILL)},r.modalShowFreeActivation=function(){return f(n.MODAL_TYPES.FREE_ACTIVATION)},r.modalShowResetPassword=function(e){return f(n.MODAL_TYPES.RESET_PASSWORD,e)},r.modalShowReloadDialog=function(){return function(e,t){(0,a.getAuthIsFetching)(t())||e(f(n.MODAL_TYPES.RELOAD_DIALOG))}},r.modalShowAccessError=function(e){return function(t,r){(0,a.getIsStandard)(r())?t(m(e)):t(p(e))}}},{"../consts":115,"../selectors/auth":152,"./preview":20}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SET_IS_SHOW=r.SET_IS_OPEN=r.SET_CURRENT_CATEGORY=r.FETCH_NEWS_FSA=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};r.setCurrentCategory=h,r.toggleIsOpen=function(){return function(e,t){return e(function(e){return{type:f,payload:e}}(!(0,s.getIsOpen)(t())))}},r.toggleIsShow=function(){return function(e,t){var r=!(0,s.getIsShow)(t());return u.default.pushStateEvent("setShowNews",r),e({type:p,payload:r})}},r.initLoadNews=function(){return function(e){return setInterval((function(){return e(S())}),6e4),e(S())}};var a=l(e("lodash")),o=l(e("../providers/api")),i=e("../utils/fsa"),s=e("../selectors/news"),u=l(e("../SlivaxHandler"));function l(e){return e&&e.__esModule?e:{default:e}}var c=r.FETCH_NEWS_FSA="news/FETCH_NEWS_FSA",d=r.SET_CURRENT_CATEGORY="news/SET_CURRENT_CATEGORY",f=r.SET_IS_OPEN="news/SET_IS_OPEN",p=r.SET_IS_SHOW="news/SET_IS_SHOW",m=(0,i.createFSA)(c);function h(e){return{type:d,payload:e}}function S(){return function(e,t){e(m()),o.default.getNews().then((function(r){var o=t(),i=(0,s.getNews)(o),u=(0,s.getCurrentCategory)(o),l=a.default.filter(r.categories,(function(e){return a.default.findIndex(r.news,{category:e.name})>=0})),c=a.default.sortBy(l,"order"),d=a.default.map(r.news,(function(e){return n({priority:!1},e)})),f=a.default.orderBy(d,["date"],["desc"]);e(m({news:f,categories:c}));var p=function(e,t,r,n){return r&&t&&0!==t.length&&t[0].date===e[0].date?r:a.default.find(n,{name:e[0].category})}(f,i,u,l);return e(h(p))})).catch((function(t){return e(m(t))}))}}},{"../SlivaxHandler":3,"../providers/api":127,"../selectors/news":156,"../utils/fsa":167,lodash:void 0}],16:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.initAutoShowOffer=r.showConstructorOffer=r.closeOffer=r.SET_ACTIVE_OFFER_UIDS=void 0;var n=e("../selectors/auth"),a=e("../selectors/offer"),o=e("../utils/offer"),i=e("../utils/localStorage");function s(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var u=r.SET_ACTIVE_OFFER_UIDS="SET_ACTIVE_OFFER_UIDS",l=function(e){return{type:u,payload:e}},c={},d={};function f(e){var t=e.dispatch,r=e.uid,n=e.timeoutMinute,a=setTimeout((function(){t(h(r))}),6e4*n);d[r]&&clearTimeout(d[r]),d[r]=a}function p(e){var t=e.dispatch,r=e.getState,a=e.uid,i=e.timeoutMinute,u=setTimeout((function(){var e=r(),i=(e.config.settings||{}).offerBlocks,u=void 0===i?[]:i,c=(e.offer||{}).activeOfferUids,d=void 0===c?[]:c,p=u.find((function(e){return e.uid===a})),m=(0,n.getUserType)(e),h=(0,n.getIsActive)(e),S=(0,n.getIsValid)(e),v=Boolean(e.auth.config.rlcHello);if(p&&(0,o.checkAccessShowOffer)({offerBlock:p,userType:m,isActive:h,isFromAd:v,isValid:S})){t(l([].concat(s(d),[a])));var E=p.timeouts.delay_before_closing;E>0&&f({dispatch:t,uid:a,timeoutMinute:E})}}),6e4*i);c[a]&&clearTimeout(c[a]),c[a]=u}function m(e){var t=e.dispatch,r=e.getState,a=e.offerBlock,s=e.isInit,u=a.uid,l=a.auto_show,c=a.timeouts,d=c.save_display_time,f=c.save_display_time_uid,m=c.first_appearance,h=c.subsequent_appearance;if(d||(0,i.clearWasClosedOffer)(u),l){var S=r(),v=(0,n.getUserType)(S),E=(0,n.getIsActive)(S),g=(0,n.getIsValid)(S),y=Boolean(S.auth.config.rlcHello);if((0,o.checkAccessShowOffer)({offerBlock:a,userType:v,isActive:E,isFromAd:y,isValid:g})&&(s||!(h<0)))if(d){var _=(0,i.getNumberOfMinutesSinceOfferWasClosed)(u,f);if(Number.isInteger(_)){if(h<0)return;p({dispatch:t,getState:r,uid:u,timeoutMinute:h-_})}else p({dispatch:t,getState:r,uid:u,timeoutMinute:m})}else p({dispatch:t,getState:r,uid:u,timeoutMinute:s?m:h})}}var h=r.closeOffer=function(e){return function(t,r){var n=r(),o=(n.offer||{}).activeOfferUids,u=void 0===o?[]:o;if(u.includes(e)){var c=(0,a.getActiveOffers)(n);t(l([].concat(s(u.filter((function(t){return t!==e}))))));var f=c.find((function(t){return t.uid===e}));if(f){d[e]&&clearTimeout(d[e]);var p=f.uid,h=f.auto_show,S=f.timeouts,v=S.save_display_time_uid,E=S.save_display_time;h&&(E&&(0,i.setWasClosedOffer)(p,v),m({dispatch:t,getState:r,offerBlock:f,isInit:!1}))}}}};r.showConstructorOffer=function(e){return function(t,r){var a=r(),i=(a.config.settings||{}).offerBlocks,u=void 0===i?[]:i,d=(a.offer||{}).activeOfferUids,p=void 0===d?[]:d,m=u.find((function(t){return t.uid===e})),h=(0,n.getUserType)(a),S=(0,n.getIsActive)(a),v=(0,n.getIsValid)(a),E=Boolean(a.auth.config.rlcHello);if(m&&(0,o.checkAccessShowOffer)({offerBlock:m,userType:h,isActive:S,isFromAd:E,isValid:v})){t(l([].concat(s(p),[e]))),c[e]&&clearTimeout(c[e]);var g=m.timeouts.delay_before_closing;g>0&&f({dispatch:t,uid:e,timeoutMinute:g})}}},r.initAutoShowOffer=function(){return function(e,t){var r=t().config.settings.offerBlocks;Array.isArray(r)&&r.forEach((function(r){m({dispatch:e,getState:t,offerBlock:r,isInit:!0})}))}}},{"../selectors/auth":152,"../selectors/offer":157,"../utils/localStorage":169,"../utils/offer":173}],17:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.toggleIsCompactMenuMode=r.initCompactMenuMode=r.setIsCompactMenuMode=r.setIsDisableGroups=r.SET_IS_DISABLE_GROUPS=void 0;var n,a=e("redux-localstorage-saver"),o=(n=a)&&n.__esModule?n:{default:n},i=e("./panels");var s=r.SET_IS_DISABLE_GROUPS="SET_IS_DISABLE_GROUPS",u=r.setIsDisableGroups=function(e){return function(t){t((0,i.setAllApartmentGroups)(!0)),t({type:s,payload:{isDisableGroups:e}})}},l=r.setIsCompactMenuMode=function(e){return function(t){t(u(e)),t((0,i.setShowPanel)("plan",!e))}};r.initCompactMenuMode=function(e,t){return function(r){if(!(null!==o.default.getItem(s)))try{e.getBoundingClientRect().height>t.getBoundingClientRect().height&&r(l(!0))}catch(e){window.Raven&&window.Raven.captureException(e)}}},r.toggleIsCompactMenuMode=function(){return function(e,t){var r=t().options;e(l(!r.isDisableGroups))}}},{"./panels":18,"redux-localstorage-saver":void 0}],18:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.toggleAllGroupApartments=r.setAllApartmentGroups=r.toggleShowPanel=void 0,r.SET_SHOW_PANEL=o,r.setShowPanel=i;var n=e("lodash"),a=e("../consts");function o(e){return"SET_SHOW_PANEL_"+e}function i(e,t){return{type:o(e),payload:{panel:e,isShow:t}}}r.toggleShowPanel=function(e){return function(t,r){var n=r().panels[e];return t(i(e,!n))}};var s=[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(a.APARTMENT_GROUP_ORDER),[a.ALL_APARTMENTS]),u=r.setAllApartmentGroups=function(e){return function(t){return s.forEach((function(r){return t(i(r,e))}))}};r.toggleAllGroupApartments=function(){return function(e,t){var r=t(),o=r.options.isDisableGroups,i=r.panels,s=!1;if(o)s=!i[a.ALL_APARTMENTS];else{var l=a.APARTMENT_GROUP_ORDER.map((function(e){return i[e]}));s=!(0,n.every)(l)}e(u(s))}}},{"../consts":115,lodash:void 0}],19:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.initAutoShow=r.hideYearPopup=r.showYearPopup=r.hideUpgradePopup=r.showUpgradePopup=r.hideOffer=r.showOffer=r.showAgeConfirmationPopup=r.ageConfirmation=r.closePopup=r.SET_POPUP_PROPS=r.SET_AGE_CONFIRMATION_POPUP=r.SET_IS_SHOW_POPUP=void 0;var n=e("../selectors/auth"),a=e("../consts"),o=e("../selectors/popup"),i=e("../utils/localStorage"),s=e("../selectors/offer"),u=r.SET_IS_SHOW_POPUP="SET_IS_SHOW_POPUP",l=r.SET_AGE_CONFIRMATION_POPUP="SET_AGE_CONFIRMATION_POPUP",c=r.SET_POPUP_PROPS="SET_POPUP_PROPS",d=function(e){return{type:u,payload:{isShow:e}}},f=r.closePopup=function(){return function(e){e(d(!1))}},p=(r.ageConfirmation=function(){return function(e){e({type:l,payload:{ageConfirmation:!0}}),e(d(!1))}},r.showAgeConfirmationPopup=function(){return function(e,t){var r=t();(0,n.getUserType)(r)===a.USER_TYPES.GUEST&&(r.popup.ageConfirmation||e(d(!0)))}},function(e){return{type:c,payload:{isShowOffer:e}}}),m=function(e){return{type:c,payload:{isShowUpgradePopup:e}}},h=function(e){return{type:c,payload:{isShowYearPopup:e}}};function S(e){var t=e.dispatch,r=e.getState,n=e.popupKey,a=e.timeoutMinute,o=e.showPopupCallback;setTimeout((function(){var e=r(),i=e.modal.show,u=(0,s.getActiveOffers)(e);if(i||Boolean(u&&u.length)||1!==e.config.settings.popup[n].show){var l=e.config.settings.popup[n],c=l.firstAppearance,d=l.subsequentAppearance;S({dispatch:t,getState:r,popupKey:n,timeoutMinute:a>0?a:c||d||10,showPopupCallback:o})}else t(o())}),6e4*a)}function v(e){var t=e.dispatch,r=e.getState,n=e.popupKey,a=e.appearanceKey,o=e.showPopupCallback,s=r().config.settings;if(s.popup){var u=s.popup[n],l=u.uid,c=u.show,d=u.saveDisplayTime,f=u.firstAppearance,p=u.subsequentAppearance;if(1===c)if(1===d){var m=(0,i.getNumberOfMinutesSincePopupYearWasClosed)(n,l);Number.isInteger(m)?S({dispatch:t,getState:r,popupKey:n,showPopupCallback:o,timeoutMinute:p-m}):S({dispatch:t,getState:r,popupKey:n,showPopupCallback:o,timeoutMinute:f})}else S({dispatch:t,getState:r,popupKey:n,showPopupCallback:o,timeoutMinute:s.popup[n][a]})}}function E(e,t){var r=e().config.settings;if(r.popup){var n=r.popup[t].uid;(0,i.setWasClosedPopupYear)(t,n)}}var g=r.showOffer=function(){return function(e){e(f()),e(p(!0))}},y=(r.hideOffer=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t,r){t(p(!1));var o="offerTrialStandard";if(E(r,o),e){var i=r();(0,n.getUserType)(i)===a.USER_TYPES.GUEST&&v({dispatch:t,getState:r,popupKey:o,appearanceKey:"subsequentAppearance",showPopupCallback:g})}}},r.showUpgradePopup=function(){return function(e){e(f()),e(m(!0))}}),_=(r.hideUpgradePopup=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t,r){t(m(!1));var o="upgradeStandard";if(E(r,o),e){var i=r(),s=(0,n.getUserType)(i);(0,n.getIsActive)(i)&&s===a.USER_TYPES.STANDARD&&v({dispatch:t,getState:r,popupKey:o,appearanceKey:"subsequentAppearance",showPopupCallback:y})}}},r.showYearPopup=function(){return function(e){e(f()),e(h(!0))}});r.hideYearPopup=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t,r){t(h(!1));var n="offerTrialPremium";if(E(r,n),e){var a=r();(0,o.getAvailableShowPopupYear)(a)&&v({dispatch:t,getState:r,popupKey:n,appearanceKey:"subsequentAppearance",showPopupCallback:_})}}},r.initAutoShow=function(){return function(e,t){var r=t(),i=(0,n.getIsActive)(r),s=(0,n.getUserType)(r),u="firstAppearance";s===a.USER_TYPES.GUEST?v({dispatch:e,getState:t,popupKey:"offerTrialStandard",appearanceKey:u,showPopupCallback:g}):i&&s===a.USER_TYPES.STANDARD?v({dispatch:e,getState:t,popupKey:"upgradeStandard",appearanceKey:u,showPopupCallback:y}):(0,o.getAvailableShowPopupYear)(r)&&v({dispatch:e,getState:t,popupKey:"offerTrialPremium",appearanceKey:u,showPopupCallback:_})}}},{"../consts":115,"../selectors/auth":152,"../selectors/offer":157,"../selectors/popup":159,"../utils/localStorage":169}],20:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hidePreview=r.showPreview=r.toggleDisabledPreview=r.TOOLTIP_NAME=r.SET_CLASSNAME_PREVIEW=r.SET_APARTMENT_PREVIEW=r.SET_CAMERA_PREVIEW=r.SET_DISABLED_PREVIEW=r.SET_IS_SHOW_PREVIEW=void 0;var n=e("redux-tooltip"),a=e("../consts"),o=r.SET_IS_SHOW_PREVIEW="SET_IS_SHOW_PREVIEW",i=r.SET_DISABLED_PREVIEW="SET_DISABLED_PREVIEW",s=r.SET_CAMERA_PREVIEW="SET_CAMERA_PREVIEW",u=r.SET_APARTMENT_PREVIEW="SET_APARTMENT_PREVIEW",l=r.SET_CLASSNAME_PREVIEW="SET_CLASSNAME_PREVIEW",c=r.TOOLTIP_NAME="preview",d=function(e){return{type:o,payload:{isShow:e}}},f=function(e){return{type:s,payload:{camera:e}}},p=function(e){return{type:u,payload:{apartment:e}}},m=function(e){return{type:l,payload:{className:e}}},h=(r.toggleDisabledPreview=function(){return function(e,t){var r=t().preview.disabled;return r||e(d(!1)),e(function(e){return{type:i,payload:{disabled:e}}}(!r))}},null),S=null,v=null;r.showPreview=function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return function(u,l){var E=l().preview,g=E.isShow;if(!E.disabled&&t){var y={x:s?Math.max(a.PREVIEW_MARGIN,Math.min(e.pageX,document.documentElement.clientWidth-a.PREVIEW_MARGIN)):e.pageX,y:"right"===i||"left"===i?Math.max(e.pageY,(document.documentElement.scrollTop||window.scrollY)+90):e.pageY},_=i||(e.clientY<150?"bottom":"top");v={origin:y,place:_,name:c},S=clearTimeout(S),!g&&h||(h=setTimeout((function(){var e=l().preview.camera;u(n.actions.show(v)),e&&e.camera===t.camera||(u(f(t)),u(p(r))),u(m(o)),u(d(!0))}),g?0:a.PREVIEW_DELAY))}}},r.hidePreview=function(){return function(e,t){h=clearTimeout(h),e(n.actions.hide({name:c}));var r=t().preview,o=r.camera,i=r.isShow;o&&(e(f({})),e(m()),e(p({}))),i&&(S=setTimeout((function(){return e(d(!1))}),a.PREVIEW_DEBOUNCE))}}},{"../consts":115,"redux-tooltip":void 0}],21:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setCountSnapshotLines=r.toggleIsShowSnapshots=r.autoFetchTopScenes=r.fetchTopScenes=r.topScenesFSA=r.autoFetchTopCams=r.fetchTopcams=r.topCamsFSA=r.updateSnapshotOnLinesCount=r.SET_TOPSCENES_INDEX=r.SET_SNAPSHOT_ON_LINES_COUNT=r.SET_IS_SHOW_SNAPSHOT=r.SET_COUNT_SNAPSHOT_LINES=r.FETCH_SNAPSHOTS=void 0,r.setTopScenesIndex=function(e){return{type:v,payload:e}};var n,a=e("lodash"),o=(n=a)&&n.__esModule?n:{default:n},i=e("../utils/fsa"),s=e("../utils/selectors"),u=e("../utils/fetch"),l=e("../selectors/auth"),c=e("../consts"),d=e("./modal"),f=e("./current");var p=r.FETCH_SNAPSHOTS=function(e){return"FETCH_SNAPSHOTS_"+e},m=r.SET_COUNT_SNAPSHOT_LINES=function(e){return"SET_COUNT_"+e+"_LINES"},h=r.SET_IS_SHOW_SNAPSHOT=function(e){return"SET_IS_SHOW_"+e},S=r.SET_SNAPSHOT_ON_LINES_COUNT="SET_SNAPSHOT_ON_LINES_COUNT",v=r.SET_TOPSCENES_INDEX="SET_TOPSCENES_INDEX";r.updateSnapshotOnLinesCount=function(){return function(e){var t=document.documentElement.clientWidth;return e(function(){return{type:S,payload:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1}}(t>=1620?6:t>=1434||t>=1344?5:t>=1162?4:t>=888?3:t>=614?2:1))}};var E=r.topCamsFSA=(0,i.createFSA)(p(c.SNAP_TYPES.TOP_CAMS)),g=r.fetchTopcams=function(){return function(e,t){e(E());var r=t().auth.config.urls.topCamsList;return(0,u.fetch)("topcams",{url:r,type:"GET",cache:!1}).then((function(r){var n=t(),a=o.default.sortBy(r,"order"),i=n.current.isAutoFollow;if(e(E(a)),a.length>0){var u=null,l=n.current.player;if(n.config.landingMode&&n.config.landingMode!==c.LANDING_MODES.SCENES)u=o.default.head(o.default.filter(a,(0,s.predicateFilterByUserStatus)(n)));else if(null!==i.mode&&null!==i.player&&(u=o.default.head(a),l=i.player,i.mode===c.AUTO_FOLLOW_MODES.APARTMENT)){var d=n.players[l].camera.camera.split("_")[0];u=o.default.find(a,(function(e){return e.name.startsWith(d)}))}var p=((n.players[l]||{}).camera||{}).camera;u&&u.name!==p&&e((0,f.setCamera)(u.name,l,!0))}return Promise.resolve()})).catch((function(t){return Promise.resolve(e(E(new Error(t))))}))}},y=void 0,_=(r.autoFetchTopCams=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t,r){var n=r(),a=n.config.landingMode?Number(n.auth.config.intervals.landingTimeOut):Number(n.auth.config.intervals.popularTimeOut);return clearInterval(y),e&&(t(g()),y=setInterval((function(){return t(g())}),1e3*(a||20))),Promise.resolve()}},r.topScenesFSA=(0,i.createFSA)(p(c.SNAP_TYPES.TOP_SCENES))),T=r.fetchTopScenes=function(){return function(e,t){var r=(0,l.getTopScenesURI)(t());return e(_()),(0,u.fetch)("topScenes",{url:r,type:"GET",cache:!1}).then((function(t){return e(_(t)),Promise.resolve()})).catch((function(t){return window.Raven&&window.Raven.captureException(t),Promise.resolve(e(_(new Error(t))))}))}},O=void 0,A=(r.autoFetchTopScenes=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){return clearInterval(O),e&&c.UPDATE_TOP_SCENES_INTERVAL>0&&(t(T()),O=setInterval((function(){return t(T())}),1e3*c.UPDATE_TOP_SCENES_INTERVAL)),Promise.resolve()}},function(e,t){return{type:h(e),payload:t}});r.toggleIsShowSnapshots=function(e){return function(t,r){return t(A(e,!r().snapshots[e].isShow))}},r.setCountSnapshotLines=function(e,t){return function(r,n){if(!(t<0))if(0!==t){var a=n(),o=(0,l.getAccess)(a),i=c.MAX_SNAPSHOTS_LINES[e][o];if(i&&t>i){if("premium"===o)return;r((0,d.modalShowPremium)())}else r(function(e,t){return{type:m(e),payload:t}}(e,t))}else r(A(e,!1))}}},{"../consts":115,"../selectors/auth":152,"../utils/fetch":166,"../utils/fsa":167,"../utils/selectors":174,"./current":11,"./modal":14,lodash:void 0}],22:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fetchTopScenesShort=r.TOP_SCENES_SHORT_SET_DATA=void 0;var n,a=e("../providers/api"),o=(n=a)&&n.__esModule?n:{default:n};var i=r.TOP_SCENES_SHORT_SET_DATA="topScenesShort/TOP_SCENES_SHORT_SET_DATA";r.fetchTopScenesShort=function(){return function(e){o.default.getTopScenesShorts().then((function(t){e({type:i,payload:t})}))}}},{"../providers/api":127}],23:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.initWidthListener=r.SET_HEIGHT=r.SET_WIDTH=void 0,r.setWidth=i;var n=e("lodash"),a=r.SET_WIDTH="actions/window/SET_WIDTH",o=r.SET_HEIGHT="actions/window/SET_HEIGHT";function i(e){return{type:a,payload:e}}function s(e){return{type:o,payload:e}}var u=function(){return function(e){return(0,n.throttle)((function(t){return e((r=t,function(e){var t=(r.srcElement||r.currentTarget||window).innerWidth,n=(r.srcElement||r.currentTarget||window).innerHeight;e(i(t)),e(s(n))}));var r}),200)}};r.initWidthListener=function(){return function(e){e(i(window.innerWidth)),e(s(window.innerHeight)),window.addEventListener("resize",e(u()))}}},{lodash:void 0}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./utils/fetch");var a=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events=[],this.service=t.service,this.url=""}return e.prototype.init=function(e){var t=e.url,r=(t=t.replace("//","")).split("/");r.pop(r.length);var n=r.join("/");this.url="//"+n+"/stat"},e.prototype.push=function(e){var t=Object.assign({},e);t.service=this.service,this.events.push(t)},e.prototype.post=function(){(0,n.fetch)("metrics",{type:"POST",url:this.url,retries:1,data:{events:JSON.stringify(this.events)}})},e}())({interval:6e4,service:"site"});r.default=a},{"./utils/fetch":166}],25:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=h(n),o=h(e("prop-types")),i=e("react-redux"),s=h(e("classnames")),u=e("rlc-components"),l=e("../../selectors/snapshots"),c=e("../../selectors/auth"),d=e("../../selectors/current"),f=e("../../selectors/apartments"),p=e("../../actions/apartments"),m=e("../../actions/current");function h(e){return e&&e.__esModule?e:{default:e}}function S(e){var t=e.camera,r=e.currentApartment,o=e.selectApartmentNumber,i=e.apartmentNumber,l=e.apartmentImage,c=e.participants,d=e.onSelectApartmentNumber,f=e.onSetCamera,p=(0,n.useCallback)((function(){f(t);var e=document.querySelector("#playerContainer");if(e){var r=e.getBoundingClientRect(),n=r.y,a=r.height;if(n>window.innerHeight-a/2){var o=window.pageYOffset+n-10;window.scrollTo({top:o,behavior:"smooth"})}}}),[t,f]),m=(0,n.useCallback)((function(){i&&d(i)}),[i,d]),h=(0,n.useCallback)((function(){d(void 0)}),[d]),S=(0,n.useCallback)((function(){return a.default.createElement("div",{className:"Apartment-Preview-Error"},"Preview image not found")}),[]);return a.default.createElement("div",{className:(0,s.default)("Apartment",{Apartment_selected:r&&r.apartment===i,Apartment_hovered:i===o}),onMouseLeave:h,onMouseEnter:m,onClick:p},a.default.createElement("div",{className:"Apartment-Preview"},a.default.createElement(u.Label,{text:"UPDATE",color:"gradient",className:"Apartment-Label"}),a.default.createElement(u.ProgressiveImage,{src:l,loadingClassName:"loading",imgClassName:"Apartment-Image",imgAlt:"Apartment",errorHandler:S,className:"Apartment-ProgressiveImage"})),a.default.createElement("div",{className:"Apartment-Content"},a.default.createElement("div",{className:"Participants"},c.map((function(e,t){var r=e.name,n=e.avatarImage,o=e.avatarImage2;return a.default.createElement("div",{key:t,className:"Participant"},a.default.createElement("img",{className:"Participant-Avatar filter-xpro-ii",src:n,alt:"Participant "+r}),o&&a.default.createElement("img",{className:"Participant-Avatar filter-xpro-ii",src:o,alt:"Participant "+r}),a.default.createElement("span",{className:"Participant-Name"},r))})))))}S.propTypes={camera:o.default.shape(),currentApartment:o.default.shape({apartment:o.default.string}),selectApartmentNumber:o.default.string,apartmentNumber:o.default.string.isRequired,apartmentImage:o.default.string,participants:o.default.arrayOf(o.default.shape({name:o.default.string,avatarImage:o.default.string,avatarImage2:o.default.string})).isRequired,onSelectApartmentNumber:o.default.func.isRequired,onSetCamera:o.default.func.isRequired},S.defaultProps={camera:void 0,selectApartmentNumber:void 0,currentApartment:void 0,apartmentImage:void 0},r.default=(0,i.connect)((function(e,t){var r=(0,l.getTopCamByApartmentFactory)(e),n=(0,c.getTopCamsSnapURI)(e),a=r(t.apartmentNumber);return{camera:a,apartmentImage:a?n(a.camera):void 0,currentApartment:(0,d.getCurrentApartment)(e),selectApartmentNumber:(0,f.getSelectApartmentNumber)(e)}}),(function(e){return{onSetCamera:function(t){if(t)return e((0,m.setCamera)(t.camera))},onSelectApartmentNumber:function(t){return e((0,p.setSelectApartmentNumber)(t))}}}))(S)},{"../../actions/apartments":4,"../../actions/current":11,"../../selectors/apartments":151,"../../selectors/auth":152,"../../selectors/current":155,"../../selectors/snapshots":161,classnames:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0,"rlc-components":void 0}],26:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=i(e("react")),a=i(e("prop-types")),o=i(e("./Apartment"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.apartments;return n.default.createElement("div",{className:"Apartments"},t.map((function(e){return n.default.createElement(o.default,{key:e.number,apartmentNumber:e.number,participants:e.participants})})))}s.propTypes={apartments:a.default.arrayOf(a.default.shape({number:a.default.string,participants:a.default.arrayOf(a.default.shape())})).isRequired},r.default=s},{"./Apartment":25,"prop-types":void 0,react:void 0}],27:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=e("react"),o=p(a),i=e("react-redux"),s=p(e("prop-types")),u=p(e("classnames")),l=p(e("i18next")),c=p(e("./Apartments")),d=e("../../utils/localStorage"),f=e("../../selectors/apartments");function p(e){return e&&e.__esModule?e:{default:e}}var m={11:{number:"11",participants:[{name:"Shantal",avatarImage:"/static/build/de854f30/styles/img/avatars/shantal.jpg"}]},20:{number:"20",participants:[{name:"Liza",avatarImage:"/static/build/de854f30/styles/img/avatars/liza.jpg"},{name:"Ari",avatarImage:"/static/build/de854f30/styles/img/avatars/ari.jpg"}]},28:{number:"28",participants:[{name:"Azura",avatarImage:"/static/build/de854f30/styles/img/avatars/azura.jpg"},{name:"Wendy",avatarImage:"/static/build/de854f30/styles/img/avatars/wendy.jpg"}]},37:{number:"37",participants:[{name:"Gloria",avatarImage:"/static/build/de854f30/styles/img/avatars/gloria.jpg"},{name:"Ashley",avatarImage:"/static/build/de854f30/styles/img/avatars/ashley.jpg"},{name:"Dylan",avatarImage:"/static/build/de854f30/styles/img/avatars/dylan.jpg"}]},45:{number:"45",participants:[{name:"Ulyana",avatarImage:"/static/build/de854f30/styles/img/avatars/ulyana.jpg"},{name:"Harley",avatarImage:"/static/build/de854f30/styles/img/avatars/harley.jpg"}]},36:{number:"36",participants:[{name:"Cheryl and Nikolas",avatarImage:"/static/build/de854f30/styles/img/avatars/cheryl.jpg",avatarImage2:"/static/build/de854f30/styles/img/avatars/nikolas.jpg"}]},43:{number:"43",participants:[{name:"Valerya and Dio",avatarImage:"/static/build/de854f30/styles/img/avatars/valerya.jpg",avatarImage2:"/static/build/de854f30/styles/img/avatars/dio.jpg"}]},44:{number:"44",participants:[{name:"Eliska and Pepik",avatarImage:"/static/build/de854f30/styles/img/avatars/thea.jpg",avatarImage2:"/static/build/de854f30/styles/img/avatars/zeke.jpg"}]}},h=[11,20,28,37,45,36,43,44];function S(e){var t=e.apartments,r=(0,a.useState)((0,d.getIsCollapsedBigUpdate)()),i=n(r,2),s=i[0],f=i[1],p=(0,a.useMemo)((function(){var e=t.filter((function(e){return e.updated})).map((function(e){return e.apartment}));return h.filter((function(t){return e.includes(""+t)})).map((function(e){return m[e]})).filter((function(e){return e}))}),[t]),S=(0,a.useCallback)((function(e){e&&e.stopPropagation(),f(!s),(0,d.setIsCollapsedBigUpdate)(!s)}),[f,s]),v=(0,a.useCallback)((function(){s&&S()}),[S,s]);return p.length?o.default.createElement("div",{className:(0,u.default)("BigUpdate","panel",{BigUpdate_collapsed:s}),onClick:v,id:s?"big_update_collapsed":"big_update"},o.default.createElement("button",{className:"BigUpdate-Toggle",type:"button",onClick:S,id:"big_update_toggle"},s?"Show":"Hide"),o.default.createElement("div",{className:"BigUpdate-Content"},o.default.createElement("p",{className:"BigUpdate-Text",dangerouslySetInnerHTML:{__html:l.default.t("bigupdate.text")}})),!s&&o.default.createElement(c.default,{apartments:p})):null}S.propTypes={apartments:s.default.arrayOf(s.default.shape({apartment:s.default.string,updated:s.default.bool})).isRequired},r.default=(0,i.connect)((function(e){return{apartments:(0,f.getApartments)(e)}}))(S)},{"../../selectors/apartments":151,"../../utils/localStorage":169,"./Apartments":26,classnames:void 0,i18next:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0}],28:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.News=void 0;var n=p(e("react")),a=p(e("prop-types")),o=p(e("classnames")),i=p(e("../../PushHandler")),s=p(e("./NewsHead")),u=p(e("./NewsCategory")),l=p(e("./NewsCategories")),c=p(e("./NewsPosts")),d=p(e("./NewsPost")),f=e("./SubscribeButton");function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var a=r[n],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(e,t))}function v(){return i.default.isBrowserSupport&&i.default.isDefault?f.SUBSCRIBE_STATUSES.DEFAULT:f.SUBSCRIBE_STATUSES.HIDDEN}var E=r.News=function(e){function t(){var r,n;m(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return r=n=h(this,e.call.apply(e,[this].concat(o))),n.clickPostHandlers={},n.state={subscribeStatus:v()},n.onClickSubscribe=function(e){e.preventDefault(),e.stopPropagation(),n.setState({subscribeStatus:f.SUBSCRIBE_STATUSES.PENDING}),i.default.subscribe().then((function(){n.setState({subscribeStatus:f.SUBSCRIBE_STATUSES.SUBSCRIBED})})).catch((function(){n.setState({subscribeStatus:f.SUBSCRIBE_STATUSES.DENIED})}))},n.handleClickPost=function(e){var t=e.object;if(t&&"string"==typeof t){var r=n.props,a=r.setCamera,o=r.setApartment;t.indexOf("_")>=0?a(t):o(t)}},n.handleClick=function(e){if(!([e.target.tagName.toLowerCase(),e.target.parentElement.tagName.toLowerCase()].indexOf("button")>=0)){e&&e.preventDefault&&e.preventDefault();var t=n.props,r=t.isOpen,a=t.toggleIsOpen;r&&e.target!==n.head||a()}},h(n,r)}return S(t,e),t.prototype.componentDidUpdate=function(e){var t=this.props,r=t.isShow,n=t.isOpen,a=t.toggleIsOpen;!r&&e.isShow&&n&&a()},t.prototype.getClickPostHandler=function(e){var t=this,r=e.object;if(r)return Object.prototype.hasOwnProperty.call(this.clickPostHandlers,r)||(this.clickPostHandlers[r]=function(){return t.handleClickPost(e)}),this.clickPostHandlers[r]},t.prototype.render=function(){var e=this,t=this.props,r=t.isShow,a=t.categories,i=t.news,f=t.currentCategory,p=t.onClickCategory,m=t.isOpen,h=t.toggleIsOpen,S=t.headNewsPost,v=this.state.subscribeStatus;return r&&f?n.default.createElement("div",{className:(0,o.default)("News",{News_closed:!m}),onBlur:m?h:void 0,tabIndex:0},n.default.createElement(s.default,{onClickControl:h,onClick:this.handleClick,isOpen:m,lastPost:S,category:f,onRef:function(t){e.head=t},subscribeStatus:v,onClickSubscribe:this.onClickSubscribe},n.default.createElement(l.default,null,a.map((function(e){return n.default.createElement(u.default,{key:e.name,isNew:e.isNew,isActive:e.name===f.name,onClick:function(){return p(e)},name:e.name,title:e.title})})))),n.default.createElement("div",{className:"News-Body"},n.default.createElement(c.default,null,i.map((function(t){return n.default.createElement(d.default,{key:""+t.date+t.text,date:t.date,text:t.text,onClick:e.getClickPostHandler(t)})}))))):null},t}(n.default.Component);E.propTypes={isShow:a.default.bool.isRequired,isOpen:a.default.bool.isRequired,news:a.default.arrayOf(a.default.shape()),categories:a.default.arrayOf(a.default.shape()),currentCategory:a.default.shape(),headNewsPost:a.default.shape(),toggleIsOpen:a.default.func.isRequired,setCamera:a.default.func.isRequired,setApartment:a.default.func.isRequired,onClickCategory:a.default.func.isRequired},E.defaultProps={news:[],categories:[],currentCategory:null,headNewsPost:{}}},{"../../PushHandler":2,"./NewsCategories":29,"./NewsCategory":30,"./NewsHead":31,"./NewsPost":32,"./NewsPosts":33,"./SubscribeButton":34,classnames:void 0,"prop-types":void 0,react:void 0}],29:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=o(e("react")),a=o(e("prop-types"));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.children;return n.default.createElement("div",{className:"NewsCategories"},t)}i.propTypes={children:a.default.node},i.defaultProps={children:null},r.default=i},{"prop-types":void 0,react:void 0}],30:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=i(e("react")),a=i(e("prop-types")),o=i(e("classnames"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.isNew,r=e.isActive,a=e.onClick,i=e.title;return n.default.createElement("span",{className:(0,o.default)("NewsCategory",{NewsCategory_New:t,NewsCategory_Active:r}),onClick:a},i)}s.propTypes={isNew:a.default.bool,isActive:a.default.bool,title:a.default.node.isRequired,onClick:a.default.func},s.defaultProps={isNew:!1,isActive:!1,onClick:function(){}},r.default=s},{classnames:void 0,"prop-types":void 0,react:void 0}],31:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),a=c(e("react")),o=c(e("prop-types")),i=c(e("classnames")),s=c(e("./NewsPost")),u=e("./SubscribeButton"),l=c(u);function c(e){return e&&e.__esModule?e:{default:e}}function d(e){var t=e.onClick,r=e.isOpen,n=e.children,o=e.lastPost,c=e.onRef,d=e.onClickControl,f=e.category,p=e.subscribeStatus,m=e.onClickSubscribe,h=p!==u.SUBSCRIBE_STATUSES.HIDDEN;return a.default.createElement("div",{className:(0,i.default)("NewsHead",{NewsHead_closed:!r}),onClick:t,ref:c},a.default.createElement("div",{className:"NewsHead-Control",onClick:r?d:void 0},a.default.createElement("i",{className:(0,i.default)({"icon-opened":r,"icon-closed":!r})})),r&&n,!r&&o&&a.default.createElement("div",{className:"NewsHead-Post"},a.default.createElement(s.default,{category:h?null:f.title,text:o.title||o.text,date:o.date,isNarrow:!0})),a.default.createElement(l.default,{status:p,onClick:m}))}d.propTypes={onClick:o.default.func,onClickControl:o.default.func,isOpen:o.default.bool,children:o.default.node,lastPost:o.default.shape(),category:o.default.shape(),onRef:o.default.func,subscribeStatus:o.default.oneOf((0,n.values)(u.SUBSCRIBE_STATUSES)).isRequired,onClickSubscribe:o.default.func.isRequired},d.defaultProps={onClick:function(){},onClickControl:function(){},isOpen:!1,children:null,lastPost:null,category:null,onRef:function(){}},r.default=d},{"./NewsPost":32,"./SubscribeButton":34,classnames:void 0,lodash:void 0,"prop-types":void 0,react:void 0}],32:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=u(e("react")),a=u(e("prop-types")),o=u(e("classnames")),i=u(e("moment")),s=u(e("./NewsCategory"));function u(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=e.date,r=e.text,a=e.category,u=e.onClick,l=e.isNew,c=e.isNarrow,d=c?'<span class="NewsPost-TextTruncate">'+r+"</span>":r;return n.default.createElement("div",{className:(0,o.default)("NewsPost",{NewsPost_new:l,NewsPost_active:!!u,NewsPost_narrow:c}),onClick:u},t&&n.default.createElement("span",{className:"NewsPost-Date"},function(e){var t=i.default.unix(e),r=(0,i.default)(),n=(0,i.default)().subtract(1,"days");return t.isSame(r,"day")?"today":t.isSame(n,"day")?"yesterday":t.format("YYYY-MM-DD")}(t)),n.default.createElement("span",{className:"NewsPost-Text",dangerouslySetInnerHTML:{__html:d}}),a&&n.default.createElement(s.default,{title:a}))}l.propTypes={isNew:a.default.bool,isNarrow:a.default.bool,onClick:a.default.func,date:a.default.number,text:a.default.string,category:a.default.string},l.defaultProps={isNew:!1,isNarrow:!1,onClick:null,date:null,text:null,category:null},r.default=l},{"./NewsCategory":30,classnames:void 0,moment:void 0,"prop-types":void 0,react:void 0}],33:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=o(e("react")),a=o(e("prop-types"));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.children;return n.default.createElement("div",{className:"NewsPosts"},t)}i.propTypes={children:a.default.node},i.defaultProps={children:null},r.default=i},{"prop-types":void 0,react:void 0}],34:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SUBSCRIBE_STATUSES=void 0;var n=s(e("react")),a=s(e("prop-types")),o=e("lodash"),i=s(e("classnames"));function s(e){return e&&e.__esModule?e:{default:e}}var u=r.SUBSCRIBE_STATUSES={SUBSCRIBED:"subscribed",DENIED:"denied",DEFAULT:"default",HIDDEN:"hidden",PENDING:"pending"},l=[u.SUBSCRIBED,u.DENIED];function c(e){var t=e.status,r=e.onClick;if(t===u.HIDDEN)return null;var a=l.indexOf(t)>=0;return n.default.createElement("button",{type:"button",className:(0,i.default)("NewsHead-Subscribe",{"NewsHead-Subscribe_Subscribed":a,"NewsHead-Subscribe_Pending":t===u.PENDING}),title:"Subcribe to RLC News",onClick:t===u.DEFAULT?r:null,disabled:t!==u.DEFAULT},n.default.createElement("i",{className:"SubscribeIcon"}),n.default.createElement("span",null,a?"Subscribed":"Subscribe"))}c.propTypes={onClick:a.default.func.isRequired,status:a.default.oneOf((0,o.values)(u)).isRequired},r.default=c},{classnames:void 0,lodash:void 0,"prop-types":void 0,react:void 0}],35:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=i(e("react")),a=i(e("moment")),o=i(e("prop-types"));function i(e){return e&&e.__esModule?e:{default:e}}var s="HH:mm:ss",u="d[d] HH:mm";function l(e){var t=e.countdownLabel,r=e.timer,o=Math.max(86400-r,0),i=o<=86400?s:u,l=a.default.utc(1e3*o).format(i);return n.default.createElement("div",{className:"SceneCountdown"},n.default.createElement("div",{className:"SceneCountdown-Value"},l),n.default.createElement("span",{className:"SceneCountdown-Label"},t))}l.propTypes={countdownLabel:o.default.string.isRequired,timer:o.default.number},l.defaultProps={timer:void 0},r.default=l},{moment:void 0,"prop-types":void 0,react:void 0}],36:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=s(e("react")),a=s(e("prop-types")),o=e("rlc-components"),i=s(e("classnames"));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){var t=e.src,r=e.timer,a=e.onClick;return n.default.createElement("div",{className:"ScenePreview",onClick:a,role:"button"},n.default.createElement(o.Label,{text:"Replay",color:"replay",className:(0,i.default)("ScenePreview-Label")}),n.default.createElement("span",{className:"ScenePreview-Date"},r<1?"Recorded less than 1h ago":"Recorded "+r+"h ago"),n.default.createElement("img",{alt:"",src:t,className:"ScenePreview-Image"}))}u.propTypes={src:a.default.string.isRequired,onClick:a.default.func,timer:a.default.number},u.defaultProps={onClick:void 0,timer:void 0},r.default=u},{classnames:void 0,"prop-types":void 0,react:void 0,"rlc-components":void 0}],37:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=s(e("react")),a=s(e("classnames")),o=e("lodash"),i=e("../../utils");function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var a=r[n],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(e,t))}var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return r.scrollListener=function(){try{var e=document.querySelector("footer").offsetHeight,t=document.body.scrollTop+document.documentElement.scrollTop,n=0===t,a=document.body.scrollHeight-(t+document.body.offsetHeight)<e;r.setState({isScrolledTop:n,isScrolledBottom:a})}catch(e){}},r.state={isScrolledTop:!1,isScrolledBottom:!1},r.scrollListener=(0,o.throttle)(r.scrollListener,100),r}return u(t,e),t.prototype.componentDidMount=function(){this.scrollListener(),window.addEventListener("scroll",this.scrollListener),window.addEventListener("touchmove",this.scrollListener)},t.prototype.render=function(){var e=this.state,t=e.isScrolledTop,r=e.isScrolledBottom;return n.default.createElement("button",{type:"button",className:(0,a.default)("btn","btn_up",{btn_up_top:t,btn_up_bottom:r}),onClick:function(){return(0,i.scrollTo)(0,250)}})},t}(n.default.Component);r.default=l},{"../../utils":168,classnames:void 0,lodash:void 0,react:void 0}],38:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=e("react"),o=m(a),i=m(e("prop-types")),s=e("react-redux"),u=e("rlc-components"),l=e("../../selectors/offer"),c=e("../../actions/offer"),d=e("../../selectors/current"),f=e("../../selectors/auth"),p=e("../../hooks/useHandleReasonOffer");function m(e){return e&&e.__esModule?e:{default:e}}function h(e){var t=e.camera,r=e.activeOffers,i=e.className,s=e.currencySymbol,l=e.onCloseOffer,c=e.offerType,d=r.find((function(e){return e.type===c})),f=d||{},m=f.uid,h=f.type,S=f.blocks,v=f.position,E=f.color,g=(0,a.useMemo)((function(){return S&&S.map&&S.map((function(e){return e&&e.data&&e.data.value?n({},e,{data:n({},e.data,{value:e.data.value.replace("{{urrencySymbol}}",s)})}):e}))}),[S,s]),y=(0,p.useHandleReasonOffer)(t,d&&d.type),_=(0,a.useCallback)((function(){l(m)}),[l,m]);return d?o.default.createElement(u.MainOffer,{id:m,blocks:g,type:h,position:v,border:E,onClose:_,onReason:y,className:i}):null}h.propTypes={camera:i.default.string,activeOffers:i.default.arrayOf(i.default.shape()),className:i.default.string,currencySymbol:i.default.string,onCloseOffer:i.default.func.isRequired,offerType:i.default.string.isRequired},h.defaultProps={camera:void 0,activeOffers:[],className:"",currencySymbol:""},r.default=(0,s.connect)((function(e){var t=(0,d.getCurrentCamera)(e);return{currencySymbol:(0,f.getCurrency)(e),camera:t&&t.camera,activeOffers:(0,l.getActiveOffers)(e)}}),(function(e){return{onCloseOffer:function(t){return e((0,c.closeOffer)(t))}}}))(h)},{"../../actions/offer":16,"../../hooks/useHandleReasonOffer":119,"../../selectors/auth":152,"../../selectors/current":155,"../../selectors/offer":157,"prop-types":void 0,react:void 0,"react-redux":void 0,"rlc-components":void 0}],39:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=e("react"),o=d(a),i=e("react-redux"),s=d(e("prop-types")),u=d(e("classnames")),l=d(e("moment")),c=e("rlc-components");function d(e){return e&&e.__esModule?e:{default:e}}function f(e){var t=e.camera,r=void 0===t?"":t,n=e.ts,a=e.apartments.find((function(e){return e.apartment===r.slice(0,2)}))||{},i=a.cameras||[].find((function(e){return e.camera===r}))||{};return o.default.createElement("div",{className:"Snapshot"},o.default.createElement("div",{className:"NoSnapshot"},o.default.createElement("p",{className:"NoSnapshot-Label"},"Preview image not found"),o.default.createElement("p",{className:"NoSnapshot-Apartment"},a.name),o.default.createElement("p",{className:"NoSnapshot-Camera"},i.name),n?o.default.createElement("p",{className:"NoSnapshot-Time"},o.default.createElement("i",{className:"NoSnapshot-Icon"}),o.default.createElement("span",{className:"NoSnapshot-Value"},l.default.unix(n).utcOffset(60*Number(a.timezone)).format("HH:mm"))):null))}f.propTypes={camera:s.default.string.isRequired,apartments:s.default.arrayOf(s.default.shape()).isRequired,ts:s.default.number},f.defaultProps={ts:void 0};var p=(0,i.connect)((function(e){return{apartments:e.apartments.data}}))(f);function m(e){var t=e.currentCamera,r=e.camera,i=e.hoverLabel,s=e.children,l=e.src,d=e.className,f=e.onClick,m=e.callback,h=e.timerText,S=e.isTimerExpiring,v=e.loaderOnUpdate,E=e.showAddToMyCollectionButton,g=e.onClickAddToMyCollection,y=e.isNotActive,_=(0,a.useState)(!1),T=n(_,2),O=T[0],A=T[1],R=(0,a.useCallback)((function(){return A(!0)}),[A]),b=(0,a.useCallback)((function(){m&&m(),A(!1)}),[m,A]),w=(0,a.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),g&&g()}),[g]),P=(0,a.useMemo)((function(){return o.default.createElement(a.Fragment,null,E?o.default.createElement("button",{className:"add-to-mycol",type:"button",onClick:w},o.default.createElement("i",{className:"icon_mycol icon_mycol-white"}),"Add to My Collection"):null,o.default.createElement("div",{className:"SnapshotHover"},o.default.createElement("i",{className:"SnapshotHover-Icon"}),o.default.createElement("span",{className:"SnapshotHover-Label"},i)),o.default.createElement(c.Label,{text:"",color:"default",className:(0,u.default)("SnapshotLabel")}),h?o.default.createElement("span",{className:"SnapshotTimer"},h):null,s)}),[i,h,s,w]);return o.default.createElement(c.ProgressiveImage,{src:l,className:(0,u.default)(d,"Snapshot",{Snapshot_active:!y&&t&&t===r,Snapshot_expiring:S,Snapshot_nosnapshot:O}),onLoad:b,onError:R,loadingClassName:"Snapshot_loading",loaderOnUpdate:v,onClick:f,errorHandler:function(){return o.default.createElement(a.Fragment,null,P,o.default.createElement(p,{camera:r}))}},P)}m.propTypes={src:s.default.string.isRequired,callback:s.default.func,currentCamera:s.default.string,onClick:s.default.func,onClickAddToMyCollection:s.default.func,children:s.default.node,camera:s.default.string.isRequired,className:s.default.string,hoverLabel:s.default.string.isRequired,timerText:s.default.string,isTimerExpiring:s.default.bool,loaderOnUpdate:s.default.bool,showAddToMyCollectionButton:s.default.bool,isNotActive:s.default.bool},m.defaultProps={callback:void 0,onClick:void 0,onClickAddToMyCollection:void 0,children:void 0,className:void 0,currentCamera:void 0,timerText:void 0,isTimerExpiring:void 0,loaderOnUpdate:!1,showAddToMyCollectionButton:!1,isNotActive:!1},r.default=(0,i.connect)((function(e){return{apartments:e.apartments.data}}))(m)},{classnames:void 0,moment:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0,"rlc-components":void 0}],40:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=h(e("lodash")),o=e("react"),i=h(o),s=h(e("prop-types")),u=h(e("classnames")),l=h(e("react-infinite-scroller")),c=e("../../consts"),d=e("rlc-components"),f=h(e("./SnapshotsControls")),p=h(e("./SnapshotsHeader")),m=h(e("./OfferConstructorSnapshot"));function h(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var a=r[n],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(e,t))}function g(e){var t=e.snapshots,r=e.hoverLabel,n=e.timer,a=e.offerType,s=e.snapOnLine,u=e.snapshotItem,l=(0,o.useMemo)((function(){return a===d.OFFER_TYPES.SNAPSHOTS?t.filter((function(e){return e.access===c.ACCESS_LEVELS.PUBLIC})):t.slice(0,s)}),[t]),f=(0,o.useMemo)((function(){return a===d.OFFER_TYPES.SNAPSHOTS&&t.filter((function(e){return e.access!==c.ACCESS_LEVELS.PUBLIC})),t.slice(s)}),[t]);return i.default.createElement(o.Fragment,null,i.default.createElement("div",{className:"Snapshots-Grid"},l.map((function(e,t){return i.default.createElement(u,{data:e,key:t,number:t,hoverLabel:r,timer:n})}))),i.default.createElement("div",{className:"Snapshots-Grid_offer"},i.default.createElement(m.default,{className:"Snapshots-Offer",offerType:a}),f.map((function(e,t){return i.default.createElement(u,{data:e,key:t,number:t,hoverLabel:r,timer:n,isNotActive:!0})}))))}g.propTypes={snapshots:s.default.arrayOf(s.default.shape()).isRequired,hoverLabel:s.default.string.isRequired,timer:s.default.number,snapshotItem:s.default.func.isRequired,offerType:s.default.string.isRequired,snapOnLine:s.default.number.isRequired},g.defaultProps={timer:void 0};var y=function(e){function t(){var r,n;S(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return r=n=v(this,e.call.apply(e,[this].concat(o))),n.state={snapCount:0},n.onChangeSnapCount=function(){var e=n.props,t=e.linesCount,r=e.data,a=e.access,o=e.snapOnLine,i=e.setLinesCount;if(r.length){var s=Math.floor(r.length/o)*o||o,u=Math.min(s,o*t);if(u/o<t){var l=Math.floor(r.length/o);"premium"!==a&&(l-=1);var c=Math.min(Math.floor(u/o),l);return i(c),void n.setState({snapCount:c*o})}n.setState({snapCount:u})}},n.onClickClose=function(){(0,n.props.setLinesCount)(0)},n.onClickIncrement=function(){if(n.isMax){var e=n.props,t=e.access,r=e.showAccessError,a=e.snapType;if("premium"===t)return;if(null===c.MAX_SNAPSHOTS_LINES[a][t])return void r()}var o=n.props,i=o.linesCount,s=o.setLinesCount,u=o.isAutoIncrement;s(i+1),u||setTimeout((function(){window.scrollBy(0,148)}),10)},n.onClickDecrement=function(){var e=n.props,t=e.linesCount;(0,e.setLinesCount)(t-1)},n.onClickIcon=function(){var e=n.props,t=e.linesCount,r=e.isShow,a=e.toggleIsShow;0!==t&&r&&a()},v(n,r)}return E(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.linesCount,r=e.access,n=e.snapType,a=e.data,o=e.setLinesCount,i=c.MAX_SNAPSHOTS_LINES[n][r];i&&i<t&&o(i),a.length&&this.onChangeSnapCount()},t.prototype.componentDidUpdate=function(e){var t=this.props,r=t.snapOnLine,n=t.data,a=t.linesCount;r===e.snapOnLine&&n.length===e.data.length&&a===e.linesCount||this.onChangeSnapCount()},t.prototype.render=function(){var e=this.props,t=e.linesCount,r=e.className,n=e.isAutoIncrement,a=e.title,o=e.label,s=e.description,c=e.hoverLabel,d=e.timer,m=e.isShow,h=e.access,S=e.data,v=e.SnapshotItem,E=e.toggleIsShow,y=e.titleExtend,_=e.isOfferConstructor,T=e.offerType,O=e.snapOnLine,A=this.state.snapCount,R=S.slice(0,A),b=0===t||!m;return i.default.createElement("div",{className:(0,u.default)("Snapshots",{Snapshots_closed:b,Snapshots_isOffer:_},r)},i.default.createElement("div",{className:"Snapshots-Block"},i.default.createElement(p.default,{onClick:E,title:a,label:o,description:s,hoverLabel:c},y&&!b?i.default.createElement(y,null):null),_?n?i.default.createElement(l.default,{loadMore:this.onClickIncrement,hasMore:!this.isMax},i.default.createElement(g,{snapshots:R,hoverLabel:c,timer:d,snapshotItem:v,offerType:T,snapOnLine:O})):i.default.createElement(g,{snapshots:R,hoverLabel:c,timer:d,snapshotItem:v,offerType:T,snapOnLine:O}):i.default.createElement("div",{className:"Snapshots-Grid"},!b&&(n?i.default.createElement(l.default,{loadMore:this.onClickIncrement,hasMore:!this.isMax},R.map((function(e,t){return i.default.createElement(v,{data:e,key:t,number:t,hoverLabel:c,timer:d})}))):R.map((function(e,t){return i.default.createElement(v,{data:e,key:t,number:t,timer:d,hoverLabel:c})}))))),!n&&!_&&i.default.createElement(f.default,{isClosed:b,onClickDecrement:this.onClickDecrement,onClickIncrement:this.onClickIncrement,isDisabledIncrement:"premium"===h&&this.isMax}))},n(t,[{key:"isMax",get:function(){var e=this.props,t=e.snapType,r=e.linesCount,n=e.data,a=e.access,o=e.snapOnLine,i=this.state.snapCount,s=Math.floor(n.length/o)*o;return i>=s||(c.MAX_SNAPSHOTS_LINES[t][a]?r>=c.MAX_SNAPSHOTS_LINES[t][a]:"premium"!==a&&i>=s-o)}}]),t}(i.default.Component);y.propTypes={snapType:s.default.oneOf(a.default.values(c.SNAP_TYPES)).isRequired,data:s.default.arrayOf(s.default.shape()).isRequired,linesCount:s.default.number.isRequired,isShow:s.default.bool.isRequired,snapOnLine:s.default.number.isRequired,access:s.default.string.isRequired,setLinesCount:s.default.func.isRequired,toggleIsShow:s.default.func.isRequired,showAccessError:s.default.func.isRequired,className:s.default.string,title:s.default.string.isRequired,label:s.default.string.isRequired,description:s.default.string.isRequired,hoverLabel:s.default.string.isRequired,SnapshotItem:s.default.func.isRequired,isAutoIncrement:s.default.bool,isOfferConstructor:s.default.bool,titleExtend:s.default.func,timer:s.default.number,offerType:s.default.string.isRequired},y.defaultProps={className:null,isAutoIncrement:!1,isOfferConstructor:!1,titleExtend:void 0,timer:void 0},r.default=y},{"../../consts":115,"./OfferConstructorSnapshot":38,"./SnapshotsControls":41,"./SnapshotsHeader":42,classnames:void 0,lodash:void 0,"prop-types":void 0,react:void 0,"react-infinite-scroller":void 0,"rlc-components":void 0}],41:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=i(e("react")),a=i(e("prop-types")),o=i(e("classnames"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.isClosed,r=e.onClickDecrement,a=e.onClickIncrement,i=e.isDisabledIncrement;return n.default.createElement("div",{className:(0,o.default)("SnapshotsControls",{closed:t})},n.default.createElement("a",{className:"SnapshotsControls-Button SnapshotsControls-Button_minus",title:"Show less snapshots",onClick:r},""),n.default.createElement("a",{className:(0,o.default)("SnapshotsControls-Button","SnapshotsControls-Button_plus",{"SnapshotsControls-Button_disabled":i}),title:"Show more snapshots",onClick:a},"+"))}s.propTypes={isClosed:a.default.bool.isRequired,onClickDecrement:a.default.func.isRequired,onClickIncrement:a.default.func.isRequired,isDisabledIncrement:a.default.bool.isRequired},r.default=s},{classnames:void 0,"prop-types":void 0,react:void 0}],42:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=o(e("react")),a=o(e("prop-types"));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.onClick,r=e.title,a=e.label,o=e.description,i=e.children;return n.default.createElement("div",{className:"SnapshotsHeader"},n.default.createElement("div",{className:"SnapshotsTitle",onClick:t},n.default.createElement("span",{className:"SnapshotsTitle-Label"},a),n.default.createElement("span",{className:"SnapshotsTitle-Name"},r)),n.default.createElement("span",{className:"SnapshotsHeader-Description"},o),i)}i.propTypes={onClick:a.default.func.isRequired,title:a.default.string.isRequired,label:a.default.string.isRequired,description:a.default.string.isRequired,children:a.default.node},i.defaultProps={children:null},r.default=i},{"prop-types":void 0,react:void 0}],43:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=h(n),o=h(e("prop-types")),i=e("react-redux"),s=h(e("i18next")),u=h(e("moment")),l=e("../../../actions/snapshots"),c=e("../../../selectors/auth"),d=e("../../../selectors/current"),f=e("../../../selectors/snapshots"),p=e("rlc-components"),m=e("../../../consts");function h(e){return e&&e.__esModule?e:{default:e}}function S(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function v(e){e.preventDefault(),e.stopPropagation()}function E(e){var t=e.index,r=e.apartment,o=e.isActive,i=e.hasReplay,l=e.snapOnLine,c=e.setIndex,d=e.scenes,f=e.replayDepthDays,h=e.windowWidth,E=e.userType,g=Number(r.timezone),y=(0,n.useMemo)((function(){var e=Array.isArray(d)?d.map((function(e){return e.ts})):[],t=Math.min.apply(Math,S(e)),r=Math.max.apply(Math,S(e)),n=Math.ceil((r-t)/86400);if(n<=0)return 0;if(n>f)return f;var a=(0,u.default)().unix()-86400*n,o=a+86400;return d.filter((function(e){return e.ts>=a&&e.ts<=o})).length<l?n-1:n}),[d,f]);return o&&(i||E===m.USER_TYPES.STANDARD)&&Array.isArray(d)&&0!==d.length?a.default.createElement(p.DaysSelector,{timezone:g,numberOfDays:y,selectIndex:t,textToday:s.default.t("chart.datetimerange.today"),showIncrementButtons:!0,isTopScenes:!0,isMobile:h<m.MARKUP_BREAKPOINTS.DESKTOP.min,onSelectIndex:c,onClick:v}):null}E.propTypes={index:o.default.number.isRequired,apartment:o.default.shape().isRequired,isActive:o.default.bool.isRequired,hasReplay:o.default.bool.isRequired,userType:o.default.string.isRequired,snapOnLine:o.default.number.isRequired,replayDepthDays:o.default.number,windowWidth:o.default.number,setIndex:o.default.func.isRequired,scenes:o.default.arrayOf(o.default.shape())},E.defaultProps={scenes:[],replayDepthDays:10,windowWidth:0},r.default=(0,i.connect)((function(e){return{isActive:(0,c.getIsActive)(e),hasReplay:(0,c.getHasReplay)(e),userType:(0,c.getUserType)(e),apartment:(0,d.getCurrentApartment)(e),snapOnLine:e.snapshots.common.snapOnLine,scenes:(0,f.getTopScenesRawData)(e),index:(0,f.getTopScenesIndex)(e),replayDepthDays:e.config.settings.replayDepthDays,windowWidth:e.window.width}}),(function(e){return{setIndex:function(t){return e((0,l.setTopScenesIndex)(t))}}}))(E)},{"../../../actions/snapshots":21,"../../../consts":115,"../../../selectors/auth":152,"../../../selectors/current":155,"../../../selectors/snapshots":161,i18next:void 0,moment:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0,"rlc-components":void 0}],44:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=e("react"),o=h(a),i=h(e("prop-types")),s=e("react-redux"),u=e("lodash"),l=e("../../../actions/modal"),c=e("../../../selectors/current"),d=e("../../../selectors/auth"),f=e("../../../consts"),p=h(e("../Snapshot.img")),m=e("../../../hooks/useTimerText");function h(e){return e&&e.__esModule?e:{default:e}}function S(e){var t=e.data,r=e.imgURI,i=e.number,s=e.hoverLabel,u=e.userType,l=e.isActive,c=e.lang,d=e.showAccessError,h=e.userAccess,S=e.showUpgradeModal,v=e.hasReplay,E=(0,a.useState)(),g=n(E,2),y=g[0],_=g[1],T=l&&u===f.USER_TYPES.STANDARD,O=(0,m.useTimerText)({ts:t.ts,isDisabledTimer:T||v}),A=n(O,2),R=A[0],b=A[1],w=(0,a.useCallback)((function(){T?S():h===f.USER_TYPES.PREMIUM?y&&window.open(y,"_blank"):d({camera:t.stream,timestamp:t.ts})}),[T,S,h,d,t.stream,t.ts,y]),P=(0,a.useCallback)((function(){v&&y&&window.open(y+"&is_vcr_on=true","_blank")}),[v,y]),C=(0,a.useCallback)((function(){_((0,f.REPLAY_URI)(c,t.stream,t.ts))}),[_,c,t.stream,t.ts]);return o.default.createElement(p.default,{onClick:w,onClickAddToMyCollection:P,camera:t.stream,ts:t.ts,src:r(t.stream,t.ts,(i||0)%10),callback:C,timerText:R,isTimerExpiring:b,hoverLabel:s,loaderOnUpdate:!0,showAddToMyCollectionButton:v})}S.propTypes={showAccessError:i.default.func.isRequired,userAccess:i.default.oneOf((0,u.values)(f.USER_TYPES)).isRequired,lang:i.default.string.isRequired,data:i.default.shape().isRequired,imgURI:i.default.func.isRequired,number:i.default.number.isRequired,hoverLabel:i.default.string.isRequired,showUpgradeModal:i.default.func.isRequired,userType:i.default.string.isRequired,isActive:i.default.bool.isRequired,hasReplay:i.default.bool.isRequired},r.default=(0,s.connect)((function(e){return{lang:(0,c.getLanguage)(e),imgURI:(0,d.getTopScenesSnapURI)(e),userAccess:(0,d.getAccess)(e),userType:(0,d.getUserType)(e),isActive:(0,d.getIsActive)(e),hasReplay:(0,d.getHasReplay)(e)}}),(function(e){return{showAccessError:function(t){var r=t.camera,n=t.timestamp;return e((0,l.modalShowScene)({reason:f.GO_TO_JOIN_REASONS.TOPSCENES,camera:r,timestamp:n}))},showUpgradeModal:function(){return e((0,l.modalShowStandard)())}}}))(S)},{"../../../actions/modal":14,"../../../consts":115,"../../../hooks/useTimerText":120,"../../../selectors/auth":152,"../../../selectors/current":155,"../Snapshot.img":39,lodash:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0}],45:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=e("react-redux"),o=S(e("i18next")),i=e("../../../consts"),s=e("../../../actions/snapshots"),u=e("../../../actions/modal"),l=e("../../../selectors/snapshots"),c=e("../../../selectors/offer"),d=e("rlc-components"),f=S(e("../Snapshots")),p=S(e("./TopScenesItem")),m=S(e("./DateSelector")),h=e("../../../selectors/auth");function S(e){return e&&e.__esModule?e:{default:e}}r.default=(0,a.connect)((function(e){var t=(0,h.getHasReplay)(e),r=(0,h.getUserType)(e),n=(0,c.getActiveOffers)(e),a=(0,l.getTopScenesData)(e),s=t||r===i.USER_TYPES.STANDARD?o.default.t("topscenes.title.simple"):o.default.t("topscenes.title.default"),u=n.some((function(e){return e.type===d.OFFER_TYPES.TOPSCENES}))&&Array.isArray(a)&&a.length>4;return{title:s,label:o.default.t("topscenes.label"),description:o.default.t("topscenes.description"),hoverLabel:o.default.t("topscenes.hoverLabel"),className:"Snapshots_replay",titleExtend:m.default,snapType:i.SNAP_TYPES.TOP_SCENES,SnapshotItem:p.default,data:a,linesCount:u?Math.min(4,e.snapshots[i.SNAP_TYPES.TOP_SCENES].linesCount):e.snapshots[i.SNAP_TYPES.TOP_SCENES].linesCount,isShow:u||e.snapshots[i.SNAP_TYPES.TOP_SCENES].isShow,snapOnLine:e.snapshots.common.snapOnLine,access:(0,h.getAccess)(e),isAutoIncrement:!u,isOfferConstructor:u,offerType:d.OFFER_TYPES.TOPSCENES}}),(function(e){return{setLinesCount:function(t){return e((0,s.setCountSnapshotLines)(i.SNAP_TYPES.TOP_SCENES,t))},toggleIsShow:function(){return e((0,s.toggleIsShowSnapshots)(i.SNAP_TYPES.TOP_SCENES))},showAccessError:function(){return e((0,u.modalShowAccessError)())}}}),(function(e,t){return n({},e,t)}))(f.default)},{"../../../actions/modal":14,"../../../actions/snapshots":21,"../../../consts":115,"../../../selectors/auth":152,"../../../selectors/offer":157,"../../../selectors/snapshots":161,"../Snapshots":40,"./DateSelector":43,"./TopScenesItem":44,i18next:void 0,"react-redux":void 0,"rlc-components":void 0}],46:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=m(e("react")),a=e("react-redux"),o=m(e("prop-types")),i=e("lodash"),s=e("../../actions/current"),u=e("../../selectors/auth"),l=e("../../selectors/current"),c=e("../../utils"),d=e("../../utils/auth"),f=e("../../consts"),p=m(e("./Snapshot.img"));function m(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var a=r[n],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(e,t))}var E=250,g=function(e){function t(){var r,n;h(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return r=n=S(this,e.call.apply(e,[this].concat(o))),n.onClickItem=function(e){var t=n.props,r=t.onSetCamera,a=t.currentPlayer,o=t.userAccess,i=t.data;if(r(e),(0,d.getUserHasAccess)(o,i.access))try{var s=document.querySelector("#player_"+a),u=document.querySelector(".panel.player").offsetTop-8;if(window.innerWidth<f.MARKUP_BREAKPOINTS.DESKTOP.min)return void(0,c.scrollTo)(u,E);var l=s.clientHeight;if(s.getBoundingClientRect().top+.5*l<0)try{(0,c.scrollTo)(u,E)}catch(e){(0,c.scrollTo)(61,E)}}catch(e){window.Raven&&window.Raven.captureException(e)}},S(n,r)}return v(t,e),t.prototype.render=function(){var e=this,t=this.props,r=t.data,a=t.getImgURI,o=t.currentCamera,i=t.userAccess,s=t.hoverLabel,u=t.timer,l=t.isNotActive,c=function(e,t){if(t===f.USER_TYPES.PREMIUM)return"";switch(e){case f.ACCESS_LEVELS.PREMIUM:case f.ACCESS_LEVELS.PRIVATE:return t===f.USER_TYPES.GUEST?"Snapshot_members":"";case f.ACCESS_LEVELS.PUBLIC:return t===f.USER_TYPES.GUEST?"Snapshot_free":"";default:return""}}(r.access,i);return n.default.createElement(p.default,{className:c,onClick:function(){return e.onClickItem(r.name)},camera:r.name,src:a(r.name,(r.order+1)%10||0),currentCamera:o.camera,hoverLabel:s,timer:u,isNotActive:l})},t}(n.default.Component);g.propTypes={onSetCamera:o.default.func.isRequired,currentPlayer:o.default.number.isRequired,userAccess:o.default.oneOf((0,i.values)(f.USER_TYPES)).isRequired,data:o.default.shape().isRequired,getImgURI:o.default.func.isRequired,currentCamera:o.default.shape().isRequired,hoverLabel:o.default.string.isRequired,timer:o.default.number,isNotActive:o.default.bool},g.defaultProps={timer:void 0,isNotActive:!1},r.default=(0,a.connect)((function(e){return{currentCamera:(0,l.getCurrentCamera)(e),currentPlayer:(0,l.getCurrentPlayer)(e),getImgURI:(0,u.getTopCamsSnapURI)(e),userAccess:(0,u.getAccess)(e)}}),(function(e){return{onSetCamera:function(t){return e((0,s.setCamera)(t,null,!1,!0))}}}))(g)},{"../../actions/current":11,"../../consts":115,"../../selectors/auth":152,"../../selectors/current":155,"../../utils":168,"../../utils/auth":163,"./Snapshot.img":39,lodash:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0}],47:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("react-redux"),a=m(e("i18next")),o=e("../../consts"),i=e("../../actions/snapshots"),s=e("../../actions/modal"),u=e("../../selectors/auth"),l=e("../../selectors/snapshots"),c=e("rlc-components"),d=m(e("./Snapshots")),f=m(e("./Topcams.item")),p=e("../../selectors/offer");function m(e){return e&&e.__esModule?e:{default:e}}r.default=(0,n.connect)((function(e){var t=(0,p.getActiveOffers)(e),r=(0,l.getTopCamsData)(e),n=t.some((function(e){return e.type===c.OFFER_TYPES.SNAPSHOTS}))&&Array.isArray(r)&&r.length>4;return{title:a.default.t("topcams.title"),label:a.default.t("topcams.label"),description:a.default.t("topcams.description"),hoverLabel:"Get access to this camera",className:"Snapshots_live",snapType:o.SNAP_TYPES.TOP_CAMS,SnapshotItem:f.default,data:r,linesCount:n?Math.min(4,e.snapshots[o.SNAP_TYPES.TOP_CAMS].linesCount):e.snapshots[o.SNAP_TYPES.TOP_CAMS].linesCount,isShow:n||e.snapshots[o.SNAP_TYPES.TOP_CAMS].isShow,snapOnLine:e.snapshots.common.snapOnLine,access:(0,u.getAccess)(e),isOfferConstructor:n,offerType:c.OFFER_TYPES.SNAPSHOTS}}),(function(e){return{setLinesCount:function(t){return e((0,i.setCountSnapshotLines)(o.SNAP_TYPES.TOP_CAMS,t))},toggleIsShow:function(){return e((0,i.toggleIsShowSnapshots)(o.SNAP_TYPES.TOP_CAMS))},showAccessError:function(){return e((0,s.modalShowAccessError)())}}}))(d.default)},{"../../actions/modal":14,"../../actions/snapshots":21,"../../consts":115,"../../selectors/auth":152,"../../selectors/offer":157,"../../selectors/snapshots":161,"./Snapshots":40,"./Topcams.item":46,i18next:void 0,"react-redux":void 0,"rlc-components":void 0}],48:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=u(e("lodash")),a=u(e("react")),o=u(e("prop-types")),i=u(e("../tooltip")),s=e("../../consts");function u(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=e.access,r=e.userType;return t===s.ACCESS_LEVELS.PUBLIC||r===s.USER_TYPES.PREMIUM||t===s.ACCESS_LEVELS.PRIVATE&&r!==s.USER_TYPES.GUEST?null:a.default.createElement(i.default,{mode:"premium-locks",flow:"left"},a.default.createElement("i",{className:"status-icon icon-locked"}))}l.propTypes={access:o.default.oneOf(n.default.values(s.ACCESS_LEVELS)).isRequired,userType:o.default.oneOf(n.default.values(s.USER_TYPES)).isRequired},r.default=l},{"../../consts":115,"../tooltip":111,lodash:void 0,"prop-types":void 0,react:void 0}],49:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=c(e("lodash")),a=c(e("i18next")),o=c(e("react")),i=c(e("prop-types")),s=c(e("../tooltip")),u=e("../../consts"),l=c(e("./AccessIcon"));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){var t=e.camera,r=e.hideIcons,n=e.userType;return o.default.createElement("span",{className:"status-icons"},!r&&!t.audio&&o.default.createElement(s.default,{flow:"left",label:a.default.t("icon.muted.tooltip")},o.default.createElement("i",{className:"status-icon icon-muted"})),!r&&o.default.createElement(l.default,{access:t.access,userType:n}))}d.propTypes={camera:i.default.shape().isRequired,userType:i.default.oneOf(n.default.values(u.USER_TYPES)).isRequired,hideIcons:i.default.bool},d.defaultProps={hideIcons:!1},r.default=d},{"../../consts":115,"../tooltip":111,"./AccessIcon":48,i18next:void 0,lodash:void 0,"prop-types":void 0,react:void 0}],50:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=h(e("lodash")),o=h(e("react")),i=h(e("prop-types")),s=e("react-redux"),u=h(e("classnames")),l=e("../../selectors/apartments"),c=e("../../selectors/current"),d=e("../../selectors/snapshots"),f=e("../../actions/current"),p=e("../../actions/preview"),m=e("../../consts");function h(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var a=r[n],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(e,t))}var g=function(e){function t(){var r,a;S(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=a=v(this,e.call.apply(e,[this].concat(i))),a.onMouseMove=function(e,t){var r=a.props,o=r.onShowPreview,i=(0,r.getTopCamByApartment)(t.apartment),s=a.wrapper.getBoundingClientRect();o(n({},e,{pageX:s.right}),i,t)},a.onMouseLeave=function(){(0,a.props.onHidePreview)()},a.onClickApartment=function(e){var t=a.props,r=t.onHidePreview;(0,t.onSetApartment)(e),r()},v(a,r)}return E(t,e),t.prototype.render=function(){var e=this,t=this.props,r=t.current,n=t.groups,i=t.md,s=t.viewMode;return o.default.createElement("div",{className:(0,u.default)("apartments-small-wrap",{"hover-area left":s===m.VIEW_MODE.FULLSCREEN}),ref:function(t){e.wrapper=t}},o.default.createElement("div",{className:"panel menu apartments-small"},o.default.createElement("ul",{className:"list"},a.default.map(n,(function(t){return a.default.map(t.apartments,(function(t,n){return o.default.createElement("li",{key:n,onClick:function(){return e.onClickApartment(t)},onMouseMove:function(r){return e.onMouseMove(r,t)},onMouseLeave:e.onMouseLeave,className:(0,u.default)("item",{act:i[t.apartment]&&t.apartment!==r,active:t.apartment===r,maintenance:"maintenance"===t.status})},t.name)}))})))))},t}(o.default.Component);g.propTypes={viewMode:i.default.oneOf(a.default.values(m.VIEW_MODE)).isRequired,getTopCamByApartment:i.default.func.isRequired,onShowPreview:i.default.func.isRequired,onHidePreview:i.default.func.isRequired,onSetApartment:i.default.func.isRequired,current:i.default.string.isRequired,groups:i.default.arrayOf(i.default.shape()).isRequired,md:i.default.shape().isRequired},r.default=(0,s.connect)((function(e){return{groups:(0,l.getResultedApartments)(e),current:(0,c.getCurrentApartmentNum)(e),md:e.md.apartments,viewMode:(0,c.getViewMode)(e),isShowPreview:e.preview.isShow,previewCamera:e.preview.camera,getTopCamByApartment:(0,d.getTopCamByApartmentFactory)(e)}}),(function(e){return{onSetApartment:function(t){return e((0,f.setApartment)(t.apartment))},onShowPreview:function(t,r,n){return e((0,p.showPreview)(t,r,n,"no-arrow","right"))},onHidePreview:function(){return e((0,p.hidePreview)())}}}))(g)},{"../../actions/current":11,"../../actions/preview":20,"../../consts":115,"../../selectors/apartments":151,"../../selectors/current":155,"../../selectors/snapshots":161,classnames:void 0,lodash:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0}],51:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=s(e("react")),a=s(e("prop-types")),o=s(e("classnames")),i=s(e("./ApartmentsListGroupHeader"));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var a=r[n],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(e,t))}var d=function(e){function t(){var r,n;u(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return r=n=l(this,e.call.apply(e,[this].concat(o))),n.onClickTitle=function(e){var t=n.props,r=t.onClickGroup,a=t.group,o=t.isShow;e.preventDefault(),r(a.name,!o)},l(n,r)}return c(t,e),t.prototype.render=function(){var e=this.props,t=e.group,r=e.isCurrent,a=e.isShow,s=e.isDisableGroups,u=e.children,l=!s,c=!(a&&0!==t.apartments.length||s);return n.default.createElement("span",{className:(0,o.default)("apartments-group",{closed:c})},n.default.createElement(i.default,{isCurrent:r,onClick:l?this.onClickTitle:null,name:t.name,count:t.sourceCount,isClosed:!a}),n.default.createElement("ul",{className:"list"},u))},t}(n.default.Component);d.propTypes={onClickGroup:a.default.func.isRequired,group:a.default.shape().isRequired,isCurrent:a.default.bool.isRequired,isDisableGroups:a.default.bool,isShow:a.default.bool,children:a.default.node.isRequired},d.defaultProps={isDisableGroups:!1,isShow:!1},r.default=d},{"./ApartmentsListGroupHeader":52,classnames:void 0,"prop-types":void 0,react:void 0}],52:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=u(e("react")),a=u(e("prop-types")),o=u(e("classnames")),i=u(e("i18next")),s=u(e("../../tooltip"));function u(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=e.isCurrent,r=e.onClick,a=e.name,u=e.count,l=e.isClosed;return n.default.createElement("span",{className:(0,o.default)("group-header",{active:t,empty:u<=0})},n.default.createElement("span",{className:"group-title",onClick:r},n.default.createElement("span",{className:"name"},i.default.t("apartments.groups."+a)),u>0&&n.default.createElement("i",{className:(0,o.default)({"icon-opened":!l,"icon-closed":l})})),n.default.createElement("span",{className:"group-badges"},u>0&&n.default.createElement(s.default,{flow:"down"},n.default.createElement("i",{className:"group-badge"},u))))}l.propTypes={isCurrent:a.default.bool,onClick:a.default.func,name:a.default.string.isRequired,count:a.default.number.isRequired,isClosed:a.default.bool},l.defaultProps={isCurrent:!1,isClosed:!1,onClick:null},r.default=l},{"../../tooltip":111,classnames:void 0,i18next:void 0,"prop-types":void 0,react:void 0}],53:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=c(n),o=c(e("prop-types")),i=c(e("lodash")),s=c(e("i18next")),u=c(e("classnames")),l=c(e("../../tooltip"));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){var t,r,o=e.apartment,c=e.isCurrent,d=e.onClick,f=e.md,p=e.onMouseMove,m=e.onMouseLeave,h=e.onMouseEnter,S=e.disableTooltips,v=e.isBigUpdate,E=e.className,g=i.default.split(o.name," "),y=(0,n.useCallback)((function(e){h(e,o)}),[o,h]),_=(0,n.useCallback)((function(e){p(e,o)}),[o,p]);return a.default.createElement("li",{className:(0,u.default)("item",{act:f&&!c,active:c,maintenance:"maintenance"===o.status},E),onClick:function(){return d(o.apartment)},onMouseLeave:m,onMouseEnter:y,onMouseMove:_},a.default.createElement("span",{className:"apt-label"},i.default.slice(g,0,g.length-1).join(" ")),a.default.createElement("span",{className:"last-word"},g.length>1?" ":"",i.default.last(g),a.default.createElement("div",{className:"status-icons"},"maintenance"===o.status&&a.default.createElement("span",null,a.default.createElement("i",{className:"status-icon maintenance"})),o.isnew&&a.default.createElement(l.default,{label:s.default.t("apartments.status.new"),disabled:S},a.default.createElement("i",{className:"status-icon new"})),o.updated&&a.default.createElement(l.default,{label:s.default.t("apartments.status.updated"),disabled:S},v?a.default.createElement("i",{className:"status-icon updated2"}):a.default.createElement("i",{className:"status-icon updated"})),o.vacation&&a.default.createElement(l.default,{label:(t=o.vacation_till,r=""!==t?" "+s.default.t("apartments.status.till")+" "+t:"",s.default.t("apartments.status.vacation")+r),disabled:S},a.default.createElement("i",{className:"status-icon vacation"})),o.info&&o.info_text&&a.default.createElement(l.default,{label:o.info_text,disabled:S,flow:"right"},a.default.createElement("i",{className:"status-icon info"})))))}d.propTypes={apartment:o.default.shape().isRequired,onClick:o.default.func.isRequired,isCurrent:o.default.bool,md:o.default.bool,onMouseMove:o.default.func.isRequired,onMouseEnter:o.default.func.isRequired,onMouseLeave:o.default.func.isRequired,disableTooltips:o.default.bool.isRequired,isBigUpdate:o.default.bool.isRequired,className:o.default.string},d.defaultProps={isCurrent:!1,md:!1,className:void 0},r.default=d},{"../../tooltip":111,classnames:void 0,i18next:void 0,lodash:void 0,"prop-types":void 0,react:void 0}],54:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=_(e("lodash")),a=_(e("react")),o=_(e("prop-types")),i=e("react-redux"),s=_(e("classnames")),u=e("../../../selectors/snapshots"),l=e("../../../selectors/apartments"),c=e("../../../selectors/preview"),d=e("../../../selectors/current"),f=e("../../../selectors/options"),p=e("../../../actions/current"),m=e("../../../actions/panels"),h=e("../../../actions/preview"),S=_(e("../../apt.toolbar")),v=_(e("./ApartmentsListGroup")),E=_(e("./ApartmentsListItem")),g=e("../../../selectors/config"),y=e("../../../actions/apartments");function _(e){return e&&e.__esModule?e:{default:e}}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var a=r[n],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(e,t))}var R=function(e){function t(){var r,n;T(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return r=n=O(this,e.call.apply(e,[this].concat(o))),n.onMouseMove=function(e,t){var r=n.props,a=r.getTopCamByApartment,o=r.onShowPreview,i=r.onHidePreview;e.target.attributes["data-tooltip"]?i():o(e,a(t.apartment),t)},n.onMouseEnter=function(e,t){var r=n.props.onSelectApartmentNumber;t&&t.apartment&&r(t.apartment)},n.onMouseLeave=function(){var e=n.props,t=e.onHidePreview,r=e.onSelectApartmentNumber;t(),r(void 0)},n.onClickApartment=function(e){var t=n.props,r=t.onHidePreview;(0,t.onSetApartment)(e),r()},O(n,r)}return A(t,e),t.prototype.render=function(){var e=this,t=this.props,r=t.groups,o=t.current,i=t.md,u=t.onClickGroup,l=t.panels,c=t.isDisableGroups,d=t.isShowPreview,f=t.isBigUpdate,p=t.selectApartmentNumber;return 0===r.length?a.default.createElement("aside",{className:"panel menu apartments"}):a.default.createElement("aside",{className:(0,s.default)("panel","menu","apartments",{"no-groups":c})},a.default.createElement(S.default,null),n.default.map(r,(function(t){return a.default.createElement(v.default,{key:t.name,isShow:l[t.name],group:t,isCurrent:o.group===t.name,isDisableGroups:c,onClickGroup:u},n.default.map(t.apartments,(function(t){return a.default.createElement(E.default,{key:t.apartment,apartment:t,isCurrent:t.apartment===o.apartment,md:1===i[t.apartment],onMouseMove:e.onMouseMove,onClick:e.onClickApartment,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,disableTooltips:d,isBigUpdate:f,className:t.apartment===p?"hovered":void 0})})))})))},t}(a.default.Component);R.propTypes={groups:o.default.arrayOf(o.default.shape()).isRequired,current:o.default.shape().isRequired,md:o.default.shape().isRequired,onClickGroup:o.default.func.isRequired,onSetApartment:o.default.func.isRequired,onHidePreview:o.default.func.isRequired,onShowPreview:o.default.func.isRequired,getTopCamByApartment:o.default.func.isRequired,onSelectApartmentNumber:o.default.func.isRequired,panels:o.default.shape().isRequired,isShowPreview:o.default.bool.isRequired,isDisableGroups:o.default.bool,isBigUpdate:o.default.bool.isRequired,selectApartmentNumber:o.default.string},R.defaultProps={isDisableGroups:!1,selectApartmentNumber:void 0},r.default=(0,i.connect)((function(e){return{groups:(0,l.getResultedApartments)(e),current:(0,d.getCurrentApartment)(e),md:(0,l.getApartmentsMD)(e),panels:e.panels,getTopCamByApartment:(0,u.getTopCamByApartmentFactory)(e),isShowPreview:!n.default.isEmpty((0,c.getCameraPreview)(e)),isDisableGroups:(0,f.getIsDisableGroups)(e),isBigUpdate:(0,g.getIsBigUpdate)(e),selectApartmentNumber:(0,l.getSelectApartmentNumber)(e)}}),(function(e){return{onSetApartment:function(t){return e((0,p.setApartment)(t))},onClickGroup:function(t,r){return e((0,m.setShowPanel)(t,r))},onShowPreview:function(t,r,n){return e((0,h.showPreview)(t,r,n))},onHidePreview:function(){return e((0,h.hidePreview)())},onSelectApartmentNumber:function(t){return e((0,y.setSelectApartmentNumber)(t))}}}))(R)},{"../../../actions/apartments":4,"../../../actions/current":11,"../../../actions/panels":18,"../../../actions/preview":20,"../../../selectors/apartments":151,"../../../selectors/config":154,"../../../selectors/current":155,"../../../selectors/options":158,"../../../selectors/preview":160,"../../../selectors/snapshots":161,"../../apt.toolbar":56,"./ApartmentsListGroup":51,"./ApartmentsListItem":53,classnames:void 0,lodash:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0}],55:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=K(n),o=e("react-redux"),i=K(e("prop-types")),s=K(e("lodash")),u=K(e("classnames")),l=K(e("i18next")),c=e("../selectors/auth"),d=e("../selectors/current"),f=e("../consts"),p=e("../utils"),m=e("../actions/snapshots"),h=e("../actions/window"),S=K(e("../containers/Header")),v=K(e("../containers/Footer")),E=K(e("../containers/News")),g=K(e("./landing")),y=K(e("./modals")),_=K(e("./controls")),T=K(e("./ScrollButton")),O=K(e("./player")),A=K(e("./player/PlayerTopCams")),R=K(e("./apartments/apartments.list")),b=K(e("./apartments/apartments.dropdown")),w=K(e("./cameras/cameras.list")),P=K(e("./cameras/cameras.dropdown")),C=K(e("./Snapshots/Topcams")),M=K(e("./Snapshots/TopScenes")),I=K(e("./hotkeys")),N=K(e("./cameras/level.toggler")),L=K(e("./plansvg2")),D=K(e("./infobox")),U=K(e("./ws.connector")),x=K(e("./new.ws.connector")),k=K(e("./preview")),F=K(e("./cameras/bedBreakfast")),B=K(e("./popups/AgeDisclaimer")),H=K(e("./popups/Trial")),j=K(e("./popups/Upgrade")),q=K(e("./popups/Year")),G=e("../selectors/config"),Y=K(e("./offerConstructor")),W=K(e("./BigUpdate/BigUpdate")),V=K(e("../SlivaxHandler"));function K(e){return e&&e.__esModule?e:{default:e}}var X=(0,p.getIsIpadOS)();function J(e){var t=e.landingMode,r=e.players,o=e.viewMode,i=e.currentApartment,c=e.userType,d=e.isActive,p=e.isActivePromoMode,m=e.onInitWidthListener,h=e.width,G=e.onUpdateSnapshotOnLinesCount,K=e.currentCamera,J=e.startOnRootPathname,z=e.isBigUpdate,Z=e.userId,Q=(0,n.useRef)({title:document.title,description:document.querySelector('meta[name="description"]').getAttribute("content"),keywords:document.querySelector('meta[name="keywords"]').getAttribute("content")});(0,n.useEffect)((function(){m()}),[]),(0,n.useEffect)((function(){G()}),[h]),(0,n.useEffect)((function(){var e=void 0;try{e=MediaSource&&MediaSource.toString().includes("extends")}catch(t){e=!1}Z&&K&&e&&V.default.pushEvent("existRecordingPlugin",{userId:Z,camera:{access:K.access,camera:K.camera,name:K.name},datetime:(new Date).toISOString()})}),[Z,K]);var $=i&&i.name,ee=(0,n.useRef)(!0);(0,n.useEffect)((function(){if(ee.current&&J)ee.current=!1;else{var e=Q.current,t=e.title,r=e.description,n=e.keywords;K&&$&&(t=l.default.t("seo.title",{apartmentName:$.replace(/'s?/,""),cameraName:K.name.replace(/'s?/,"")}),r=l.default.t("seo.description",{apartmentName:$}),n=(n+","+$+","+K.name).replace(/\s*,\s*/g,",").toLowerCase()),document.title=t,document.querySelector('meta[name="description"]').setAttribute("content",r),document.querySelector('meta[name="keywords"]').setAttribute("content",n)}}),[K.name,$]);var te=s.default.map(r,(function(e,t){return a.default.createElement(O.default,{key:t,number:Number(t)})})),re=o===f.VIEW_MODE.SINGLE;return a.default.createElement("div",{className:(0,u.default)("App",{App_free:c===f.USER_TYPES.FREE,App_guest:c===f.USER_TYPES.GUEST,App_premium:c===f.USER_TYPES.PREMIUM,App_standard:c===f.USER_TYPES.STANDARD,App_standard_promo:p,App_combined:c===f.USER_TYPES.COMBINED,App_active:d,App_expired:c!==f.USER_TYPES.GUEST&&!d},"player-mode"+o),"data-client":X?"ipad":void 0},t&&a.default.createElement(g.default,null),a.default.createElement(y.default,null),a.default.createElement(Y.default,null),a.default.createElement(U.default,null),a.default.createElement(x.default,null),a.default.createElement(I.default,null),a.default.createElement(k.default,null),a.default.createElement(S.default,null),a.default.createElement(T.default,null),a.default.createElement("main",{className:"wrap"},a.default.createElement(R.default,null),a.default.createElement("div",{className:"content"},z&&a.default.createElement(W.default,{camera:K.camera}),a.default.createElement(D.default,null),a.default.createElement(E.default,null),a.default.createElement("div",{className:"panel player"},a.default.createElement("div",{className:"player-top"},a.default.createElement(b.default,null),a.default.createElement(_.default,null),a.default.createElement(P.default,null),a.default.createElement(A.default,null)),a.default.createElement("div",{id:"playerContainer",className:"video"},te),re&&a.default.createElement("small",{className:"caption"},"Recording, distribution or publication are strictly prohibited. Video has additional hidden watermarks with user ID"))),a.default.createElement("aside",{className:"panel menu cams"},i.isBedAndBreakfast?a.default.createElement(F.default,null):a.default.createElement("div",null,a.default.createElement(L.default,null),a.default.createElement(N.default,null),a.default.createElement(w.default,null)))),a.default.createElement("div",{className:"Snapshots-Wrap"},a.default.createElement(C.default,null),a.default.createElement(M.default,null)),a.default.createElement(H.default,null),a.default.createElement(j.default,null),a.default.createElement(q.default,null),a.default.createElement(B.default,null),a.default.createElement(v.default,null))}J.propTypes={onUpdateSnapshotOnLinesCount:i.default.func.isRequired,onInitWidthListener:i.default.func.isRequired,isActive:i.default.bool.isRequired,players:i.default.shape().isRequired,landingMode:i.default.oneOf(s.default.values(f.LANDING_MODES)),viewMode:i.default.oneOf(s.default.values(f.VIEW_MODE)).isRequired,currentApartment:i.default.shape().isRequired,width:i.default.number,userType:i.default.oneOf(Object.values(f.USER_TYPES)).isRequired,isActivePromoMode:i.default.bool,currentCamera:i.default.shape({name:i.default.string.isRequired,camera:i.default.string.isRequired,access:i.default.string.isRequired}),startOnRootPathname:i.default.bool.isRequired,isBigUpdate:i.default.bool.isRequired,userId:i.default.string.isRequired},J.defaultProps={landingMode:null,width:null,isActivePromoMode:!1,currentCamera:void 0},r.default=(0,o.connect)((function(e){return{players:(0,d.getPlayers)(e),landingMode:e.config.landingMode,viewMode:(0,d.getViewMode)(e),width:e.window.width,currentApartment:(0,d.getCurrentApartment)(e),userType:(0,c.getUserType)(e),isActive:(0,c.getIsActive)(e),isActivePromoMode:(0,G.getIsActivePromoModeForStandard)(e),currentCamera:(0,d.getCurrentCamera)(e),startOnRootPathname:e.current.startOnRootPathname,isBigUpdate:(0,G.getIsBigUpdate)(e),userId:(0,c.getUserId)(e)}}),(function(e){return{onUpdateSnapshotOnLinesCount:function(){return e((0,m.updateSnapshotOnLinesCount)())},onInitWidthListener:function(){return e((0,h.initWidthListener)())}}}))(J)},{"../SlivaxHandler":3,"../actions/snapshots":21,"../actions/window":23,"../consts":115,"../containers/Footer":116,"../containers/Header":117,"../containers/News":118,"../selectors/auth":152,"../selectors/config":154,"../selectors/current":155,"../utils":168,"./BigUpdate/BigUpdate":27,"./ScrollButton":37,"./Snapshots/TopScenes":45,"./Snapshots/Topcams":47,"./apartments/apartments.dropdown":50,"./apartments/apartments.list":54,"./cameras/bedBreakfast":57,"./cameras/cameras.dropdown":59,"./cameras/cameras.list":60,"./cameras/level.toggler":61,"./controls":62,"./hotkeys":63,"./infobox":64,"./landing":65,"./modals":70,"./new.ws.connector":78,"./offerConstructor":79,"./plansvg2":88,"./player":99,"./player/PlayerTopCams":94,"./popups/AgeDisclaimer":103,"./popups/Trial":104,"./popups/Upgrade":105,"./popups/Year":106,"./preview":110,"./ws.connector":112,classnames:void 0,i18next:void 0,lodash:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0}],56:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=c(e("react")),a=e("react-redux"),o=c(e("prop-types")),i=c(e("classnames")),s=e("../../actions/options"),u=e("../../selectors/options"),l=c(e("../tooltip"));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){var t=e.isDisableGroups,r=e.onToggleDisableGroups;return n.default.createElement("div",{className:"apt-toolbar"},n.default.createElement(l.default,{label:"Hide/show groups of apartments"},n.default.createElement("a",{className:(0,i.default)("apt-toolbar-icon","groups",{on:t}),onClick:r})))}d.propTypes={isDisableGroups:o.default.bool.isRequired,onToggleDisableGroups:o.default.func.isRequired},r.default=(0,a.connect)((function(e){return{isDisableGroups:(0,u.getIsDisableGroups)(e)}}),(function(e){return{onSetIsDisableGroups:function(t){return e((0,s.setIsDisableGroups)(t))}}}),(function(e,t){var r=e.isDisableGroups,n=t.onSetIsDisableGroups;return{isDisableGroups:r,onToggleDisableGroups:function(){return n(!r)}}}))(d)},{"../../actions/options":17,"../../selectors/options":158,"../tooltip":111,classnames:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0}],57:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=S(e("lodash")),a=S(e("react")),o=S(e("prop-types")),i=e("react-redux"),s=S(e("classnames")),u=e("../../actions/current"),l=e("../../selectors/current"),c=e("../../selectors/auth"),d=e("../../selectors/cameras"),f=e("../../utils/auth"),p=e("../../consts"),m=S(e("../preview/PreviewImage")),h=S(e("../StatusIcons"));function S(e){return e&&e.__esModule?e:{default:e}}function v(e){var t=e.currentApartment,r=e.currentCamera,n=e.cameras,o=e.md,i=e.userType,u=e.getImgURI,l=e.onClick;return n?a.default.createElement("div",{className:"bb"},n.map((function(e,n){var c=(0,f.getUserHasAccess)(i,e.access),d=u(e.camera);return a.default.createElement("div",{key:e.camera,className:(0,s.default)("bb-card",{active:e.camera===r.camera}),onClick:function(){return l(e.camera)}},a.default.createElement(m.default,{className:"bb-preview",apartment:t,camera:e,imgUri:d,userHasAccess:c}),a.default.createElement("div",{className:"bb-title list"},a.default.createElement("div",{className:(0,s.default)("item",{act:1===o[e.camera],active:e.camera===r.camera})},n+1+". "+e.name,a.default.createElement(h.default,{camera:e,userType:i}))))}))):null}v.propTypes={currentApartment:o.default.shape().isRequired,currentCamera:o.default.shape().isRequired,cameras:o.default.arrayOf(o.default.shape()).isRequired,md:o.default.shape().isRequired,userType:o.default.oneOf(n.default.values(p.USER_TYPES)).isRequired,getImgURI:o.default.func.isRequired,onClick:o.default.func.isRequired},r.default=(0,i.connect)((function(e){return{currentApartment:(0,l.getCurrentApartment)(e),currentCamera:(0,l.getCurrentCamera)(e),cameras:(0,d.getCamerasList)(e),md:e.md.cameras,userType:(0,c.getAccess)(e),getImgURI:(0,c.getTopCamsSnapURI)(e)}}),(function(e){return{onClick:function(t){return e((0,u.setCamera)(t))}}}))(v)},{"../../actions/current":11,"../../consts":115,"../../selectors/auth":152,"../../selectors/cameras":153,"../../selectors/current":155,"../../utils/auth":163,"../StatusIcons":49,"../preview/PreviewImage":108,classnames:void 0,lodash:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0}],58:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=l(e("lodash")),a=l(e("react")),o=l(e("prop-types")),i=l(e("classnames")),s=l(e("../StatusIcons")),u=e("../../consts");function l(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=e.item,r=e.isCurrent,n=e.onClick,o=e.md,u=e.apartmentStatus,l=e.userType,c=e.hideIcons,d=e.onMouseMove,f=e.onMouseLeave,p="maintenance"===t.status||"maintenance"===u;return a.default.createElement("li",{className:(0,i.default)("item",{act:o&&!r,active:r,maintenance:p}),onClick:function(){return n(t.camera,t.access)},onMouseMove:function(e){return d(e,t)},onMouseLeave:f},t.label+". "+t.name,!c&&!!t.isnew&&a.default.createElement("i",{className:"status-icon new new-cam"}),a.default.createElement(s.default,{camera:t,userType:l,hideIcons:c}))}c.propTypes={userType:o.default.oneOf(n.default.values(u.USER_TYPES)).isRequired,item:o.default.shape().isRequired,isCurrent:o.default.bool.isRequired,apartmentStatus:o.default.string,onClick:o.default.func.isRequired,md:o.default.bool.isRequired,hideIcons:o.default.bool,onMouseMove:o.default.func,onMouseLeave:o.default.func.isRequired},c.defaultProps={onMouseMove:function(){},hideIcons:!1,apartmentStatus:""},r.default=c},{"../../consts":115,"../StatusIcons":49,classnames:void 0,lodash:void 0,"prop-types":void 0,react:void 0}],59:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=v(e("lodash")),o=v(e("react")),i=v(e("prop-types")),s=e("react-redux"),u=v(e("classnames")),l=e("../../actions/current"),c=e("../../actions/preview"),d=e("../../selectors/cameras"),f=e("../../selectors/current"),p=e("../../selectors/auth"),m=e("../../consts"),h=v(e("./camera.item")),S=v(e("./level.toggler"));function v(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var a=r[n],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(e,t))}var _=function(e){function t(){var r,n;E(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return r=n=g(this,e.call.apply(e,[this].concat(o))),n.onMouseMoveCamera=function(e,t){"maintenance"!==n.props.currentApartment.status&&"maintenance"!==t.status&&n.showPreview(e,t)},n.onMouseLeaveCamera=function(){(0,n.props.onHidePreview)()},g(n,r)}return y(t,e),t.prototype.showPreview=function(e,t){var r=this.props,a=r.currentApartment,o=r.onShowPreview,i=this.wrapper.getBoundingClientRect();return o(n({},e,{pageX:i.left+10}),t,a)},t.prototype.render=function(){var e=this,t=this.props,r=t.cameras,n=t.currentCamera,a=t.onClick,i=t.md,s=t.viewMode,l=t.userType,c=t.currentApartment;return o.default.createElement("div",{className:(0,u.default)("cams-small-wrap",{"hover-area right":s===m.VIEW_MODE.FULLSCREEN}),ref:function(t){e.wrapper=t}},o.default.createElement("div",{className:"panel menu cams-small"},o.default.createElement("ul",{className:"list"},r.map((function(t,r){return o.default.createElement(h.default,{key:t.camera,item:t,number:r+1,isCurrent:t.camera===n.camera,apartmentStatus:c.status,hideIcons:!0,onClick:a,md:!!i[t.camera],onMouseMove:e.onMouseMoveCamera,onMouseLeave:e.onMouseLeaveCamera,userType:l})}))),o.default.createElement(S.default,null)))},t}(o.default.Component);_.propTypes={onShowPreview:i.default.func.isRequired,onHidePreview:i.default.func.isRequired,onClick:i.default.func.isRequired,currentApartment:i.default.shape().isRequired,cameras:i.default.arrayOf(i.default.shape()).isRequired,currentCamera:i.default.shape().isRequired,md:i.default.shape().isRequired,viewMode:i.default.oneOf(a.default.values(m.VIEW_MODE)).isRequired,userType:i.default.oneOf(a.default.values(m.USER_TYPES)).isRequired},r.default=(0,s.connect)((function(e){return{currentCamera:(0,f.getCurrentCamera)(e),currentApartment:(0,f.getCurrentApartment)(e),cameras:(0,d.getCurrentLevelCameras)(e),md:e.md.cameras,viewMode:(0,f.getViewMode)(e),userType:(0,p.getAccess)(e)}}),(function(e){return{onClick:function(t){return e((0,l.setCamera)(t))},onShowPreview:function(t,r,n){return e((0,c.showPreview)(t,r,n,"no-arrow","left"))},onHidePreview:function(){return e((0,c.hidePreview)())}}}))(_)},{"../../actions/current":11,"../../actions/preview":20,"../../consts":115,"../../selectors/auth":152,"../../selectors/cameras":153,"../../selectors/current":155,"./camera.item":58,"./level.toggler":61,classnames:void 0,lodash:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0}],60:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=m(e("lodash")),a=m(e("react")),o=m(e("prop-types")),i=e("react-redux"),s=e("../../actions/current"),u=e("../../actions/preview"),l=e("../../selectors/cameras"),c=e("../../selectors/current"),d=e("../../selectors/auth"),f=e("../../consts"),p=m(e("./camera.item"));function m(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var a=r[n],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(e,t))}var E=function(e){function t(){var r,n;h(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return r=n=S(this,e.call.apply(e,[this].concat(o))),n.onMouseMoveCamera=function(e,t){var r=n.props,a=r.currentApartment,o=r.onShowPreview,i=r.onHidePreview;!e.target.classList.contains("status-icon")||e.target.classList.contains("maintenance")?o(e,t,a):i()},n.onMouseLeaveCamera=function(){(0,n.props.onHidePreview)()},S(n,r)}return v(t,e),t.prototype.componentWillUnmount=function(){clearTimeout(this.timerChangeShowPreview)},t.prototype.render=function(){var e=this,t=this.props,r=t.cameras,o=t.currentCamera,i=t.onClick,s=t.md,u=t.userType,l=t.currentApartment;return r?a.default.createElement("div",null,a.default.createElement("ul",{className:"list"},n.default.map(n.default.groupBy(r,(function(e){return e.level||1})),(function(t){return a.default.createElement("div",{className:"level-group",key:t},t.map((function(t,r){return a.default.createElement(p.default,{key:t.camera,item:t,number:r+1,isCurrent:t.camera===o.camera,apartmentStatus:l.status,onClick:i,md:1===s[t.camera],onMouseMove:e.onMouseMoveCamera,onMouseLeave:e.onMouseLeaveCamera,userType:u})})))})))):null},t}(a.default.Component);E.propTypes={onShowPreview:o.default.func.isRequired,onHidePreview:o.default.func.isRequired,onClick:o.default.func.isRequired,currentApartment:o.default.shape().isRequired,cameras:o.default.arrayOf(o.default.shape()).isRequired,currentCamera:o.default.shape().isRequired,md:o.default.shape().isRequired,userType:o.default.oneOf(n.default.values(f.USER_TYPES)).isRequired},r.default=(0,i.connect)((function(e){return{currentCamera:(0,c.getCurrentCamera)(e),currentApartment:(0,c.getCurrentApartment)(e),cameras:(0,l.getCurrentLevelCameras)(e),md:e.md.cameras,userType:(0,d.getAccess)(e)}}),(function(e){return{onClick:function(t){return e((0,s.setCamera)(t))},onShowPreview:function(t,r,n){return e((0,u.showPreview)(t,r,n))},onHidePreview:function(){return e((0,u.hidePreview)())}}}))(E)},{"../../actions/current":11,"../../actions/preview":20,"../../consts":115,"../../selectors/auth":152,"../../selectors/cameras":153,"../../selectors/current":155,"./camera.item":58,lodash:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0}],61:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=m(e("react")),a=m(e("prop-types")),o=e("react-redux"),i=m(e("lodash")),s=m(e("classnames")),u=e("../../actions/current"),l=e("../../actions/preview"),c=e("../../selectors/current"),d=e("../../selectors/cameras"),f=e("../../selectors/snapshots"),p=m(e("../tooltip"));function m(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var a=r[n],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(e,t))}var E=function(e){function t(){var r,n;h(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return r=n=S(this,e.call.apply(e,[this].concat(o))),n.onMouseMove=function(e,t){var r=n.props,a=r.currentApartment,o=r.onShowPreview,i=r.getTopCamByLevel;"maintenance"!==a.status&&o(e,i(t),"no-arrow")},n.onMouseLeave=function(){(0,n.props.onHidePreview)()},n.onClick=function(e){var t=n.props,r=t.onHidePreview;(0,t.onSetLevel)(e),r()},S(n,r)}return v(t,e),t.prototype.render=function(){var e=this,t=this.props,r=t.currentLevel,a=t.apartmentLevels,o=t.onClickNext,u=t.onClickPrev,l=t.md;return!a||a<=1?null:n.default.createElement("div",{className:"layer-selector"},n.default.createElement(p.default,{label:"Previous group of cameras"},n.default.createElement("a",{className:"arrow left",onClick:u},"")),n.default.createElement("div",{className:"layers"},i.default.map(i.default.range(1,a+1),(function(t){return n.default.createElement("a",{key:t,className:(0,s.default)("layer",{active:t===r,act:l[t]}),onClick:function(){return e.onClick(t)},onMouseMove:function(r){return e.onMouseMove(r,t)},onMouseLeave:e.onMouseLeave},t)}))),n.default.createElement(p.default,{label:"Next group of cameras"},n.default.createElement("a",{className:"arrow right",onClick:o},"")))},t}(n.default.Component);E.propTypes={onShowPreview:a.default.func.isRequired,onHidePreview:a.default.func.isRequired,getTopCamByLevel:a.default.func.isRequired,onSetLevel:a.default.func.isRequired,onClickNext:a.default.func.isRequired,onClickPrev:a.default.func.isRequired,currentApartment:a.default.shape().isRequired,currentLevel:a.default.number.isRequired,md:a.default.shape().isRequired,apartmentLevels:a.default.number.isRequired},r.default=(0,o.connect)((function(e){return{currentLevel:(0,c.getCurrentLevel)(e),apartmentLevels:(0,c.getCurrentApartmentLevels)(e),currentApartment:(0,c.getCurrentApartment)(e),md:(0,d.getMDLevels)(e),getTopCamByLevel:(0,f.getTopCamByLevel)(e)}}),(function(e){return{onSetLevel:function(t){return e((0,u.setCurrentLevel)(t))},onClickNext:function(){return e((0,u.setNextLevel)())},onClickPrev:function(){return e((0,u.setPrevLevel)())},onShowPreview:function(t,r,n){return e((0,l.showPreview)(t,r,n))},onHidePreview:function(){return e((0,l.hidePreview)())}}}))(E)},{"../../actions/current":11,"../../actions/preview":20,"../../selectors/cameras":153,"../../selectors/current":155,"../../selectors/snapshots":161,"../tooltip":111,classnames:void 0,lodash:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0}],62:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=y(n),o=e("react-redux"),i=y(e("prop-types")),s=y(e("lodash")),u=y(e("i18next")),l=y(e("classnames")),c=e("../actions/current"),d=e("../actions/modal"),f=e("../actions/md"),p=e("../actions/news"),m=e("../selectors/auth"),h=e("../selectors/news"),S=e("../selectors/current"),v=e("../consts"),E=y(e("./tooltip")),g=e("../selectors/config");function y(e){return e&&e.__esModule?e:{default:e}}var _=function(){return a.default.createElement("div",{className:"toolbar-divider"})};function T(e){var t=e.viewMode,r=e.autoFollowMode,o=e.mdIsOn,i=e.onShowHotKeysModal,s=e.onSetModeSingle,c=e.onSetModeSingleWide,d=e.onSetModeTwoVertical,f=e.onSetModeTwoHorizontal,p=e.onSetModeFour,m=e.onSetModeFullscreen,h=e.onToggleIsAutoFollow,S=e.onToggleMdIsOn,g=e.onToggleIsShowNews,y=e.userAccess,T=e.isShowNews,O=e.language,A=e.camera,R=e.freeAllowed,b=e.isValidFree,w=t===v.VIEW_MODE.FULLSCREEN,P=y!==v.USER_TYPES.PREMIUM,C=y===v.USER_TYPES.GUEST,M=(0,n.useMemo)((function(){return R?b?null:"free":C?"standard":null}),[R,b,C]);return a.default.createElement("div",{className:(0,l.default)("toolbar-wrap",{"hover-area top":w})},a.default.createElement("div",{className:"toolbar"},a.default.createElement(E.default,{label:u.default.t("toolbar.tooltip.hotkeys"),flow:w?"down":"up"},a.default.createElement("a",{className:"toolbar-icon btn-hotkeys",onClick:i})),a.default.createElement(_,null),a.default.createElement(E.default,{label:u.default.t("toolbar.tooltip.single_mode"),flow:w?"down":"up"},a.default.createElement("a",{className:(0,l.default)("toolbar-icon","control_mode_0",{on:t===v.VIEW_MODE.SINGLE}),onClick:s})),a.default.createElement(E.default,{label:u.default.t("toolbar.tooltip.single_wide_mode"),flow:w?"down":"up",mode:M},a.default.createElement("a",{className:(0,l.default)("toolbar-icon","control_mode_1",{on:t===v.VIEW_MODE.SINGLE_WIDE}),onClick:c})),a.default.createElement(E.default,{label:u.default.t("toolbar.tooltip.two_view_mode"),flow:w?"down":"up",mode:M},a.default.createElement("a",{className:(0,l.default)("toolbar-icon","control_mode_2",{on:t===v.VIEW_MODE.TWO_VERTICAL}),onClick:d})),a.default.createElement(E.default,{label:u.default.t("toolbar.tooltip.two_view_mode_h"),flow:w?"down":"up",mode:M},a.default.createElement("a",{className:(0,l.default)("toolbar-icon","control_mode_3",{on:t===v.VIEW_MODE.TWO_HORIZONTAL}),onClick:f})),a.default.createElement(E.default,{label:u.default.t("toolbar.tooltip.four_view_mode"),flow:w?"down":"up",mode:P?"premium":null},a.default.createElement("a",{className:(0,l.default)("toolbar-icon","control_mode_4",{on:t===v.VIEW_MODE.FOUR}),onClick:p})),a.default.createElement(E.default,{label:u.default.t("toolbar.tooltip.full_window_mode"),flow:w?"down":"up",mode:M},a.default.createElement("a",{className:(0,l.default)("toolbar-icon","control_mode_5",{on:t===v.VIEW_MODE.FULLSCREEN}),onClick:m})),a.default.createElement(_,null),a.default.createElement(E.default,{label:u.default.t("toolbar.tooltip.motion_detection"),flow:w?"down":"up"},a.default.createElement("a",{className:(0,l.default)("toolbar-icon","md",{on:o}),onClick:S})),a.default.createElement(_,null),a.default.createElement(E.default,{label:u.default.t("toolbar.tooltip.auto_follow_topcam"),flow:w?"down":"up",mode:P?"premium":null},a.default.createElement("a",{className:(0,l.default)("toolbar-icon","af",{on:r===v.AUTO_FOLLOW_MODES.ALL}),onClick:function(){return h(null,v.AUTO_FOLLOW_MODES.ALL)}})),a.default.createElement(E.default,{label:u.default.t("toolbar.tooltip.auto_follow_current_apartment"),flow:w?"down":"up",mode:P?"premium":null},a.default.createElement("a",{className:(0,l.default)("toolbar-icon","af_apt",{on:r===v.AUTO_FOLLOW_MODES.APARTMENT}),onClick:function(){return h(null,v.AUTO_FOLLOW_MODES.APARTMENT)}})),a.default.createElement(_,null),a.default.createElement(E.default,{label:u.default.t("toolbar.tooltip.news"),flow:w?"down":"up"},a.default.createElement("a",{className:(0,l.default)("toolbar-icon","nws",{on:T}),onClick:g})),a.default.createElement(_,null),a.default.createElement(E.default,{label:u.default.t("toolbar.tooltip.remote"),flow:w?"down":"up",mode:P?"premium":null},a.default.createElement("a",{className:"toolbar-icon rlc-remote",href:"http://remote."+v.DOMAIN,rel:"noopener noreferrer",target:"_blank"})),a.default.createElement(E.default,{label:u.default.t("toolbar.tooltip.replay"),flow:w?"down":"up",mode:P?"premium":null},a.default.createElement("a",{className:"toolbar-icon rlc-replay",href:"https://replay."+v.DOMAIN+"/"+O+"/view/"+A+"?from=bar",rel:"noopener noreferrer",target:"_blank"})),a.default.createElement(E.default,{label:u.default.t("toolbar.tooltip.collection"),flow:w?"down":"up",mode:P?"premium":null},a.default.createElement("a",{className:"toolbar-icon rlc-collection",href:"https://collection."+v.DOMAIN+"?from=bar",rel:"noopener noreferrer",target:"_blank"}))))}T.propTypes={mdIsOn:i.default.bool.isRequired,autoFollowMode:i.default.oneOf([!1].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(s.default.values(v.AUTO_FOLLOW_MODES)))).isRequired,viewMode:i.default.oneOf(s.default.values(v.VIEW_MODE)).isRequired,userAccess:i.default.oneOf(s.default.values(v.USER_TYPES)).isRequired,isShowNews:i.default.bool.isRequired,onShowHotKeysModal:i.default.func.isRequired,onSetModeSingle:i.default.func.isRequired,onSetModeSingleWide:i.default.func.isRequired,onSetModeTwoVertical:i.default.func.isRequired,onSetModeTwoHorizontal:i.default.func.isRequired,onSetModeFour:i.default.func.isRequired,onSetModeFullscreen:i.default.func.isRequired,onToggleMdIsOn:i.default.func.isRequired,onToggleIsAutoFollow:i.default.func.isRequired,onToggleIsShowNews:i.default.func.isRequired,language:i.default.string.isRequired,camera:i.default.string.isRequired,freeAllowed:i.default.bool.isRequired,isValidFree:i.default.bool.isRequired},r.default=(0,o.connect)((function(e){return{mdIsOn:e.md.isOn,autoFollowMode:(0,S.getCurrentAutoFollowMode)(e),viewMode:(0,S.getViewMode)(e),userAccess:(0,m.getAccess)(e),isShowNews:(0,h.getIsShow)(e),language:(0,S.getLanguage)(e),camera:(0,S.getCurrentCameraNumber)(e),freeAllowed:(0,g.getFreeAllowed)(e),isValidFree:(0,m.getIsValid)(e)}}),(function(e){return{onShowHotKeysModal:function(){return e((0,d.modalShowHotkeys)())},onSetModeSingle:function(){return e((0,c.setModeSingle)())},onSetModeSingleWide:function(){return e((0,c.setModeSingleWide)())},onSetModeTwoVertical:function(){return e((0,c.setModeTwoVertical)())},onSetModeTwoHorizontal:function(){return e((0,c.setModeTwoHorizontal)())},onSetModeFour:function(){return e((0,c.setModeFour)())},onSetModeFullscreen:function(){return e((0,c.setModeFullscreen)())},onToggleMdIsOn:function(){return e((0,f.toggleMdIsOn)())},onToggleIsAutoFollow:function(t,r){return e((0,c.toggleIsAutoFollow)(t,r))},onToggleIsShowNews:function(){return e((0,p.toggleIsShow)())}}}))(T)},{"../actions/current":11,"../actions/md":13,"../actions/modal":14,"../actions/news":15,"../consts":115,"../selectors/auth":152,"../selectors/config":154,"../selectors/current":155,"../selectors/news":156,"./tooltip":111,classnames:void 0,i18next:void 0,lodash:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0}],63:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=p(e("react")),a=e("react-redux"),o=p(e("prop-types")),i=e("lodash"),s=e("../actions/current"),u=e("../actions/options"),l=e("../actions/modal"),c=e("../actions/panels"),d=e("../selectors/current"),f=e("../consts");function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var a=r[n],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(e,t))}var v=function(e){function t(){var r,n;m(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return r=n=h(this,e.call.apply(e,[this].concat(o))),n.handleHotkey=function(e){if("INPUT"!==e.target.nodeName&&"TEXTAREA"!==e.target.nodeName&&!e.ctrlKey&&!e.metaKey){var t=n.props,r=t.landingMode,a=t.viewMode,o=t.isShowModal;if(!r){var i=n.props,s=i.onShowHotkeysModal,u=i.onCloseModal,l=i.onToggleAllGroupApartments,c=i.onToggleIsAutoFollow,d=i.onToggleIsAutoFollowApartment,p=i.onSetModeSingle,m=i.onSetModeSingleWide,h=i.onSetModeTwoVertical,S=i.onSetModeTwoHorizontal,v=i.onSetModeFour,E=i.onSetModeFullscreen,g=i.onToggleFullscreen,y=i.onSetNextCamera,_=i.onSetNextApartment,T=i.onSetPrevCamera,O=i.onSetPrevApartment,A=i.onSetNextPlayer,R=i.onSetPrevPlayer,b=i.onSetNextLevel,w=i.onSetPrevLevel,P=i.onToggleIsCompactMenuMode;switch(e.key){case"1":p();break;case"2":m();break;case"3":h();break;case"4":S();break;case"5":v();break;case"6":E();break;case"Escape":a===f.VIEW_MODE.FULLSCREEN?g():o&&u();break;case"":window.player.fullscreen();break;case"f":e.altKey?window.player.fullscreen():g();break;case"g":l();break;case"h":s();break;case"A":d();break;case"a":c();break;case"c":P();break;case"k":window.player.toggle();break;case"Right":case"ArrowRight":e.shiftKey?_():e.altKey?b():y();break;case"Left":case"ArrowLeft":e.shiftKey?O():e.altKey?w():T();break;case"Tab":e.preventDefault(),e.shiftKey?R():A();break;case"Enter":e.altKey&&(e.preventDefault&&e.preventDefault(),window.player.fullscreen())}}}},h(n,r)}return S(t,e),t.prototype.componentDidMount=function(){document.addEventListener("keydown",this.handleHotkey)},t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.componentWillUnmount=function(){document.removeEventListener("keydown",this.handleHotkey)},t.prototype.render=function(){return null},t}(n.default.Component);v.propTypes={landingMode:o.default.number,viewMode:o.default.oneOf((0,i.values)(f.VIEW_MODE)).isRequired,isShowModal:o.default.bool,onShowHotkeysModal:o.default.func.isRequired,onCloseModal:o.default.func.isRequired,onToggleAllGroupApartments:o.default.func.isRequired,onToggleIsAutoFollow:o.default.func.isRequired,onToggleIsAutoFollowApartment:o.default.func.isRequired,onSetModeSingle:o.default.func.isRequired,onSetModeSingleWide:o.default.func.isRequired,onSetModeTwoVertical:o.default.func.isRequired,onSetModeTwoHorizontal:o.default.func.isRequired,onSetModeFour:o.default.func.isRequired,onSetModeFullscreen:o.default.func.isRequired,onToggleFullscreen:o.default.func.isRequired,onSetNextCamera:o.default.func.isRequired,onSetNextApartment:o.default.func.isRequired,onSetPrevCamera:o.default.func.isRequired,onSetPrevApartment:o.default.func.isRequired,onSetNextPlayer:o.default.func.isRequired,onSetPrevPlayer:o.default.func.isRequired,onSetNextLevel:o.default.func.isRequired,onSetPrevLevel:o.default.func.isRequired,onToggleIsCompactMenuMode:o.default.func.isRequired},v.defaultProps={landingMode:void 0,isShowModal:!1},r.default=(0,a.connect)((function(e){return{viewMode:(0,d.getViewMode)(e),isShowModal:e.modal.show,panels:e.panels,landingMode:e.config.landingMode}}),(function(e){return{onShowHotkeysModal:function(){return e((0,l.modalShowHotkeys)())},onCloseModal:function(){return e((0,l.modalClose)())},onToggleAllGroupApartments:function(){return e((0,c.toggleAllGroupApartments)())},onToggleIsAutoFollow:function(){return e((0,s.toggleIsAutoFollow)())},onToggleIsAutoFollowApartment:function(){return e((0,s.toggleIsAutoFollow)(null,f.AUTO_FOLLOW_MODES.APARTMENT))},onSetModeSingle:function(){return e((0,s.setModeSingle)())},onSetModeSingleWide:function(){return e((0,s.setModeSingleWide)())},onSetModeTwoVertical:function(){return e((0,s.setModeTwoVertical)())},onSetModeTwoHorizontal:function(){return e((0,s.setModeTwoHorizontal)())},onSetModeFour:function(){return e((0,s.setModeFour)())},onSetModeFullscreen:function(){return e((0,s.setModeFullscreen)())},onToggleFullscreen:function(){return e((0,s.toggleFullscreen)())},onSetNextCamera:function(){return e((0,s.setNextCamera)())},onSetNextApartment:function(){return e((0,s.setNextApartment)())},onSetPrevCamera:function(){return e((0,s.setPrevCamera)())},onSetPrevApartment:function(){return e((0,s.setPrevApartment)())},onSetNextPlayer:function(){return e((0,s.setNextPlayer)())},onSetPrevPlayer:function(){return e((0,s.setPrevPlayer)())},onSetNextLevel:function(){return e((0,s.setNextLevel)())},onSetPrevLevel:function(){return e((0,s.setPrevLevel)())},onToggleIsCompactMenuMode:function(){return e((0,u.toggleIsCompactMenuMode)())}}}))(v)},{"../actions/current":11,"../actions/modal":14,"../actions/options":17,"../actions/panels":18,"../consts":115,"../selectors/current":155,lodash:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0}],64:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=u(e("react")),a=u(e("prop-types")),o=e("react-redux"),i=u(e("i18next")),s=e("../selectors/auth");function u(e){return e&&e.__esModule?e:{default:e}}function l(e){return e.isShow?n.default.createElement("div",{className:"panel infobox"},n.default.createElement("div",{className:"message",dangerouslySetInnerHTML:{__html:i.default.t("promo.content")}})):null}l.propTypes={isShow:a.default.bool},l.defaultProps={isShow:!1},r.default=(0,o.connect)((function(e){return{isShow:(0,s.getIsShowPromo)(e)}}))(l)},{"../selectors/auth":152,i18next:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0}],65:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=d(e("react")),o=d(e("prop-types")),i=e("react-redux"),s=e("../actions/config"),u=e("../actions/landing"),l=e("../consts"),c=d(e("../utils/events"));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var a=r[n],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(e,t))}var h=function(e){function t(){var r,n;f(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return r=n=p(this,e.call.apply(e,[this].concat(o))),n.clickDocument=function(){var e=n.props;(0,e.onExit)(e.landingMode!==l.LANDING_MODES.SCENES),c.default.siteOpen(),window.removeEventListener("click",n.clickDocument)},p(n,r)}return m(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.landingMode,r=e.onEnterScenesMode;window.addEventListener("click",this.clickDocument),t===l.LANDING_MODES.SCENES&&r()},t.prototype.render=function(){return null},t}(a.default.Component);h.propTypes={onEnterScenesMode:o.default.func.isRequired,landingMode:o.default.number,onExit:o.default.func.isRequired},h.defaultProps={landingMode:null},r.default=(0,i.connect)((function(e){return{landingMode:e.config.landingMode,currentScene:e.landing.currentScene,sendStartStream:e.config.sendStartStream}}),(function(e){return{disableLM:function(){return e((0,s.configSetLM)(null))},unmute:function(){return e((0,s.configSetMuted)(!1))},initSendStartStream:function(){return e((0,s.configSetSendStartStream)(!0))},getLandingScenes:function(){return e((0,u.getLandingScenes)())},selectNextScene:function(){return e((0,u.selectNextScene)())}}}),(function(e,t){return n({},e,{onEnterScenesMode:function(){var r=e.currentScene;return t.getLandingScenes().then((function(){r||t.selectNextScene()}))},onExit:function(r){r&&t.disableLM(),t.unmute(),void 0===e.sendStartStream&&t.initSendStartStream()}})}))(h)},{"../actions/config":7,"../actions/landing":12,"../consts":115,"../utils/events":165,"prop-types":void 0,react:void 0,"react-redux":void 0}],66:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=s(e("react")),a=s(e("i18next")),o=e("../../utils"),i=s(e("./close.btn"));function s(e){return e&&e.__esModule?e:{default:e}}r.default=function(){return n.default.createElement("div",{className:"modal-container ReloadDialog"},n.default.createElement("div",{className:"modal-body"},n.default.createElement(i.default,null),n.default.createElement("h1",{className:"modal-title"},a.default.t("modals.reload_dialog.title")),n.default.createElement("p",{className:"modal-info"},a.default.t("modals.reload_dialog.body"))),n.default.createElement("div",{className:"modal-footer"},n.default.createElement("a",{className:"btn btn-grey",onClick:o.reloadPageWithoutCache},a.default.t("modals.reload_dialog.button"))))}},{"../../utils":168,"./close.btn":67,i18next:void 0,react:void 0}],67:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=s(e("react")),a=s(e("prop-types")),o=e("react-redux"),i=e("../../actions/modal");function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.onClose;return n.default.createElement("div",{className:"modal-close",onClick:t},"")};u.propTypes={onClose:a.default.func.isRequired},r.default=(0,o.connect)((function(){return{}}),(function(e){return{onClose:function(){return e((0,i.modalClose)())}}}))(u)},{"../../actions/modal":14,"prop-types":void 0,react:void 0,"react-redux":void 0}],68:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=d(e("react")),a=d(e("prop-types")),o=e("react-redux"),i=d(e("i18next")),s=e("../../actions/modal"),u=e("rlc-components"),l=e("../../selectors/auth"),c=e("../../actions/auth");function d(e){return e&&e.__esModule?e:{default:e}}function f(e){var t=e.onClickResendLink,r=e.onClose,a=e.email,o=e.freeActivationState;return n.default.createElement(u.FreeActivationModal,{translator:i.default,onClickConfirmEmail:t,onClose:r,email:a,freeActivationState:o})}f.propTypes={email:a.default.string.isRequired,freeActivationState:a.default.number.isRequired,onClickResendLink:a.default.func.isRequired,onClose:a.default.func.isRequired},r.default=(0,o.connect)((function(e){return{email:(0,l.getUserEmail)(e),freeActivationState:e.current.freeActivationState}}),(function(e){return{onClose:function(){return e((0,s.modalClose)())},onClickResendLink:function(){return e((0,c.verification)())}}}))(f)},{"../../actions/auth":5,"../../actions/modal":14,"../../selectors/auth":152,i18next:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0,"rlc-components":void 0}],69:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=i(e("react")),a=i(e("i18next")),o=i(e("./close.btn"));function i(e){return e&&e.__esModule?e:{default:e}}r.default=function(){return n.default.createElement("div",{className:"modal-container hotkeys"},n.default.createElement("div",{className:"modal-body"},n.default.createElement(o.default,null),n.default.createElement("h1",{className:"modal-title"},a.default.t("hotkeys.title")),n.default.createElement("div",{className:"hk_panel"},n.default.createElement("div",{className:"hk_group"},n.default.createElement("dl",null,n.default.createElement("dt",null,n.default.createElement("kbd",{className:"keys"},"  "),n.default.createElement("kbd",null,"")),n.default.createElement("dd",null,a.default.t("hotkeys.change-apartments-next"))),n.default.createElement("dl",null,n.default.createElement("dt",null,n.default.createElement("kbd",{className:"keys"},"  "),n.default.createElement("kbd",null,"")),n.default.createElement("dd",null,a.default.t("hotkeys.change-apartments-previous")))),n.default.createElement("div",{className:"hk_group"},n.default.createElement("dl",null,n.default.createElement("dt",null,n.default.createElement("kbd",{className:"keys"},"  ")),n.default.createElement("dd",null,a.default.t("hotkeys.change-cameras-next"))),n.default.createElement("dl",null,n.default.createElement("dt",null,n.default.createElement("kbd",{className:"keys"},"  ")),n.default.createElement("dd",null,a.default.t("hotkeys.change-cameras-previous")))),n.default.createElement("div",{className:"hk_group"},n.default.createElement("dl",null,n.default.createElement("dt",null,n.default.createElement("kbd",null,"Tab")),n.default.createElement("dd",null,a.default.t("hotkeys.change-players-next"))),n.default.createElement("dl",null,n.default.createElement("dt",null,n.default.createElement("kbd",null,"Tab"),n.default.createElement("kbd",null,"")),n.default.createElement("dd",null,a.default.t("hotkeys.change-players-previous")))),n.default.createElement("div",{className:"hk_group"},n.default.createElement("dl",null,n.default.createElement("dt",null,n.default.createElement("kbd",null,"1..6")),n.default.createElement("dd",null,a.default.t("hotkeys.toggle-mode"))),n.default.createElement("dl",null,n.default.createElement("dt",null,n.default.createElement("kbd",null,"F")),n.default.createElement("dd",null,a.default.t("hotkeys.full-screen-mode"))),n.default.createElement("dl",null,n.default.createElement("dt",null,n.default.createElement("kbd",null,"A")),n.default.createElement("dd",null,a.default.t("hotkeys.autoFollow"))),n.default.createElement("dl",null,n.default.createElement("dt",null,n.default.createElement("kbd",null,"A"),n.default.createElement("kbd",null,"")),n.default.createElement("dd",null,a.default.t("hotkeys.autoFollowApartment"))),n.default.createElement("dl",null,n.default.createElement("dt",null,n.default.createElement("kbd",null,"G")),n.default.createElement("dd",null,a.default.t("hotkeys.toggle-groups"))),n.default.createElement("dl",null,n.default.createElement("dt",null,n.default.createElement("kbd",null,"C")),n.default.createElement("dd",null,a.default.t("hotkeys.toggle-compact-menu")))),n.default.createElement("div",{className:"hk_group"},n.default.createElement("dl",null,n.default.createElement("dt",null,n.default.createElement("kbd",null,"H")),n.default.createElement("dd",null,a.default.t("hotkeys.show-help"))),n.default.createElement("dl",null,n.default.createElement("dt",null,n.default.createElement("kbd",null,"Esc")),n.default.createElement("dd",null,a.default.t("hotkeys.close-window")))))))}},{"./close.btn":67,i18next:void 0,react:void 0}],70:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=y(e("lodash")),a=y(e("react")),o=e("react-redux"),i=y(e("prop-types")),s=e("rlc-components"),u=e("../../consts"),l=e("../../actions/modal"),c=y(e("./login")),d=y(e("./reset")),f=y(e("./hotkeys")),p=y(e("./premium")),m=y(e("./scene")),h=y(e("./standard")),S=y(e("./verotelNotice")),v=y(e("./verotelRebill")),E=y(e("./freeActivation")),g=y(e("./ReloadDialog"));function y(e){return e&&e.__esModule?e:{default:e}}function _(e){var t=e.type,r=e.meta;switch(t){case u.MODAL_TYPES.PREMIUM:return a.default.createElement(p.default,{meta:r});case u.MODAL_TYPES.SCENE:return a.default.createElement(m.default,{meta:r});case u.MODAL_TYPES.STANDARD:return a.default.createElement(h.default,{meta:r});case u.MODAL_TYPES.HOTKEY:return a.default.createElement(f.default,null);case u.MODAL_TYPES.LOGIN:return a.default.createElement(c.default,{meta:r});case u.MODAL_TYPES.RESET_PASSWORD:return a.default.createElement(d.default,{meta:r});case u.MODAL_TYPES.RELOAD_DIALOG:return a.default.createElement(g.default,null);case u.MODAL_TYPES.REBILL_WARNING:return a.default.createElement(S.default,null);case u.MODAL_TYPES.VEROTEL_REBILL:return a.default.createElement(v.default,null);case u.MODAL_TYPES.FREE_ACTIVATION:return a.default.createElement(E.default,null);default:return null}}function T(e){var t=e.show,r=e.type,n=e.meta,o=e.close;return a.default.createElement(s.Overlay,{onClose:o,isTransition:!0,isOpen:t},a.default.createElement(_,{type:r,meta:n}))}_.propTypes={type:i.default.oneOf(n.default.values(u.MODAL_TYPES)),meta:i.default.oneOfType([i.default.number,i.default.string,i.default.shape()])},_.defaultProps={type:null,meta:null},T.propTypes={show:i.default.bool.isRequired,close:i.default.func.isRequired,type:i.default.oneOf(n.default.values(u.MODAL_TYPES)),meta:i.default.oneOfType([i.default.number,i.default.string,i.default.shape()])},T.defaultProps={type:null,meta:null},r.default=(0,o.connect)((function(e){return{show:e.modal.show,type:e.modal.type,meta:e.modal.meta}}),(function(e){return{close:function(){return e((0,l.modalClose)())}}}))(T)},{"../../actions/modal":14,"../../consts":115,"./ReloadDialog":66,"./freeActivation":68,"./hotkeys":69,"./login":71,"./premium":72,"./reset":73,"./scene":74,"./standard":75,"./verotelNotice":76,"./verotelRebill":77,lodash:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0,"rlc-components":void 0}],71:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=p(n),o=p(e("prop-types")),i=e("react-redux"),s=p(e("i18next")),u=e("rlc-components"),l=e("../../utils"),c=e("../../actions/auth"),d=e("../../actions/modal"),f=e("../../selectors/auth");function p(e){return e&&e.__esModule?e:{default:e}}var m=function(e){var t=e.meta,r=e.isFetching,o=e.isBlacklistedError,i=e.error,c=e.isLoginRequestWasSend,d=e.onInitLoginModal,f=e.onCleanError,p=e.onClose,m=e.onLogin,h=e.onClickReset,S=t&&t.login?t.login:"";return(0,n.useEffect)((function(){d()}),[]),a.default.createElement(u.LoginModal,{title:s.default.t("modals.login.title"),info:s.default.t("modals.login.subtitle"),translator:s.default,isFetching:r,error:i,initEmail:S,showResetButton:Boolean(i&&c&&!o),getCookie:l.getCookie,onLogin:m,onCleanError:f,onClickJoin:l.onClickJoin,onClose:p,onClickReset:h})};m.propTypes={isFetching:o.default.bool,isBlacklistedError:o.default.bool.isRequired,error:o.default.string,meta:o.default.shape({login:o.default.string}),isLoginRequestWasSend:o.default.bool.isRequired,onInitLoginModal:o.default.func.isRequired,onLogin:o.default.func.isRequired,onCleanError:o.default.func.isRequired,onClose:o.default.func.isRequired,onClickReset:o.default.func.isRequired},m.defaultProps={isFetching:!1,error:void 0,meta:void 0},r.default=(0,i.connect)((function(e){return{isFetching:(0,f.getAuthIsFetching)(e),error:(0,f.getAuthError)(e),isBlacklistedError:(0,f.getAuthIsBlacklistedError)(e),isLoginRequestWasSend:(0,f.getAuthSendLoginRequest)(e)}}),(function(e){return{onInitLoginModal:function(){return e((0,c.authSetError)(null))},onLogin:function(t,r){return e((0,c.login)({login:t,password:r}))},onCleanError:function(){return e((0,c.authSetError)(null))},onClose:function(){return e((0,d.modalClose)())},onClickReset:function(t){return e((0,d.modalShowResetPassword)({login:t}))}}}))(m)},{"../../actions/auth":5,"../../actions/modal":14,"../../selectors/auth":152,"../../utils":168,i18next:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0,"rlc-components":void 0}],72:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=h(n),o=h(e("prop-types")),i=e("react-redux"),s=h(e("i18next")),u=e("rlc-components"),l=e("../../../actions/modal"),c=e("../../../selectors/apartments"),d=e("../../../utils"),f=e("../../../selectors/config"),p=e("../../../consts"),m=e("../../../selectors/auth");function h(e){return e&&e.__esModule?e:{default:e}}function S(e){var t=e.onClose,r=e.onClickLogin,o=e.meta,i=e.imgUri,l=e.groups,c=e.apartments,f=e.topScenes,m=e.isAuthorized,h=e.freeAllowed,S=e.isFree,v=o||{},E=v.reason,g=v.camera,y=E||p.GO_TO_JOIN_REASONS.FORBIDDEN_CAMERA,_=(0,n.useMemo)((function(){var e=g&&g.slice(0,2),t=c.find((function(t){return t.apartment===e})),r=t&&t.cameras.find((function(e){return e.camera===g}));return t&&r?t.name+". "+r.name:void 0}),[g]);return a.default.createElement(u.GetMembershipModal,{translator:s.default,onClose:t,onClickLogin:r,onClickJoin:(0,d.getOnClickJoinWithReason)({reason:y,camera:g}),groups:l,snapshotUrlTemplate:p.SNAPSHOT_URL_TEMPLATE,topScenes:i?null:f,camPreviewImage:i,camPreviewTitle:_,isAuthorized:m,freeAllowed:h&&!S})}S.propTypes={groups:o.default.arrayOf(o.default.shape()).isRequired,apartments:o.default.arrayOf(o.default.shape()),topScenes:o.default.arrayOf(o.default.shape()),meta:o.default.shape({camera:o.default.string.isRequired,reason:o.default.number.isRequired}),imgUri:o.default.string,isAuthorized:o.default.bool.isRequired,freeAllowed:o.default.bool.isRequired,isFree:o.default.bool.isRequired,onClose:o.default.func.isRequired,onClickLogin:o.default.func.isRequired},S.defaultProps={apartments:[],topScenes:[],meta:null,imgUri:null},r.default=(0,i.connect)((function(e,t){var r=t&&t.meta&&t.meta.camera,n=(0,m.getTopCamsSnapURI)(e),a=r?n(r):null,o=(0,m.getUserType)(e),i=(0,f.getFreeAllowed)(e),s=(0,m.getIsFree)(e);return{groups:(0,c.getDataForFeature)(e),apartments:e.apartments.data,imgUriSelector:(0,m.getTopCamsSnapURI)(e),topScenes:e.topScenesShort.scenes,imgUri:a,freeAllowed:i,isFree:s,isAuthorized:o!==p.USER_TYPES.GUEST}}),(function(e){return{onClose:function(){return e((0,l.modalClose)())},onClickLogin:function(){return e((0,l.modalShowLogin)())}}}))(S)},{"../../../actions/modal":14,"../../../consts":115,"../../../selectors/apartments":151,"../../../selectors/auth":152,"../../../selectors/config":154,"../../../utils":168,i18next:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0,"rlc-components":void 0}],73:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=f(n),o=f(e("prop-types")),i=e("react-redux"),s=f(e("i18next")),u=e("rlc-components"),l=e("../../actions/modal"),c=e("../../actions/auth"),d=e("../../selectors/auth");function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e){var t=e.isFetching,r=e.errorMessage,o=e.showSuccessMessage,i=e.meta,l=e.onClickBack,c=e.onClose,d=e.onReset,f=e.onInitResetModal,p=i&&i.login?i.login:"";return(0,n.useEffect)((function(){f()}),[]),a.default.createElement(u.ResetPasswordModal,{translator:s.default,isFetching:t,initEmail:p,errorMessage:r,successMessage:o?s.default.t("modals.reset_password.success"):void 0,onReset:d,onClickBack:l,onClose:c})};p.propTypes={isFetching:o.default.bool,errorMessage:o.default.string,showSuccessMessage:o.default.bool.isRequired,meta:o.default.shape({login:o.default.string}),onReset:o.default.func.isRequired,onClickBack:o.default.func.isRequired,onClose:o.default.func.isRequired,onInitResetModal:o.default.func.isRequired},p.defaultProps={isFetching:!1,errorMessage:void 0,meta:void 0},r.default=(0,i.connect)((function(e){return{isFetching:(0,d.getAuthResetPasswordIsFetching)(e),errorMessage:(0,d.getAuthResetPasswordErrorMessage)(e),showSuccessMessage:(0,d.getAuthResetPasswordShowSuccessMessage)(e)}}),(function(e){return{onInitResetModal:function(){e((0,c.authSetResetPasswordErrorMessage)(void 0)),e((0,c.authSetResetPasswordShowSuccessMessage)(!1))},onReset:function(t){return e((0,c.resetPassword)({login:t}))},onClickBack:function(t){return e((0,l.modalShowLogin)({login:t}))},onClose:function(){return e((0,l.modalClose)())}}}))(p)},{"../../actions/auth":5,"../../actions/modal":14,"../../selectors/auth":152,i18next:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0,"rlc-components":void 0}],74:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=E(e("lodash")),a=E(e("react")),o=E(e("prop-types")),i=e("react-redux"),s=E(e("i18next")),u=E(e("classnames")),l=e("rlc-components"),c=e("../../../utils"),d=e("../../../actions/modal"),f=e("../../../selectors/apartments"),p=e("../../../selectors/auth"),m=e("../../../consts"),h=E(e("../close.btn")),S=E(e("../../ScenePreview")),v=E(e("../../SceneCountdown"));function E(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var a=r[n],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(e,t))}function y(e){var t=(0,c.getTimestamp)()-e;return Math.max(t,0)}var _=function(e){function t(r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,r));return n.state={diff:y((r.meta||{}).timestamp)},n}return g(t,e),t.prototype.componentDidMount=function(){this.updateDiff()},t.prototype.componentWillUnmount=function(){clearInterval(this.interval)},t.prototype.updateDiff=function(){var e=this,t=y((this.props.meta||{}).timestamp);this.setState({diff:t}),t>0&&(this.interval=setTimeout((function(){return e.updateDiff()}),1e3))},t.prototype.render=function(){var e=this.props,t=e.meta,r=e.apartments,o=e.imgURI,i=e.onClose,d=e.settings,f=t||{},p=f.reason,E=f.camera,g=f.timestamp,y=this.state.diff;if(!E)return null;var _=d.hideCameraNameInSceneModal||0,T=p||m.GO_TO_JOIN_REASONS.FORBIDDEN_CAMERA,O=n.default.find(r,(function(e){return e.apartment===E.slice(0,2)})),A=n.default.find(O.cameras,(function(e){return e.camera===E})),R=Math.floor(y/3600);return a.default.createElement("div",{className:(0,u.default)("modal-container","scene",{scene_expiring:R>=m.HOURS_EXPIRING_TOPSCENES,scene_expired:R>=24})},a.default.createElement("div",{className:"modal-body"},a.default.createElement(h.default,null),a.default.createElement("h1",{className:"modal-title"},0===_?O.name+". "+A.name:""),a.default.createElement(S.default,{src:o(E,g),timer:Math.max(R,0),onClick:R>0?(0,c.getOnClickJoinWithReason)({reason:T,camera:E}):void 0}),a.default.createElement(v.default,{countdownLabel:s.default.t("modals.scene.countdown_label"),timer:y}),R>=24?a.default.createElement("p",{className:"modal-info",dangerouslySetInnerHTML:{__html:s.default.t("modals.scene.description.expired")}}):a.default.createElement("p",{className:"modal-info",dangerouslySetInnerHTML:{__html:s.default.t("modals.scene.description.expiring")}}),R>=24?a.default.createElement(l.Button,{key:"close",fluid:!0,size:"large",color:"replay",onClick:i},a.default.createElement("span",null,s.default.t("modals.scene.action.close"))):a.default.createElement(l.Button,{key:"join",fluid:!0,size:"large",color:"replay",onClick:(0,c.getOnClickJoinWithReason)({reason:T,camera:E})},a.default.createElement("span",null,s.default.t("modals.scene.action.join")))))},t}(a.default.Component);_.propTypes={meta:o.default.oneOfType([o.default.number,o.default.string]),onClose:o.default.func.isRequired,apartments:o.default.arrayOf(o.default.shape()).isRequired,imgURI:o.default.func.isRequired,settings:o.default.shape().isRequired},_.defaultProps={meta:null},r.default=(0,i.connect)((function(e){return{data:(0,f.getDataForPremiumModal)(e),userType:(0,p.getUserType)(e),isAuth:(0,p.getIsAuth)(e),apartments:e.apartments.data,imgURI:(0,p.getTopScenesSnapURI)(e),settings:e.config.settings}}),(function(e){return{onClose:function(){return e((0,d.modalClose)())}}}))(_)},{"../../../actions/modal":14,"../../../consts":115,"../../../selectors/apartments":151,"../../../selectors/auth":152,"../../../utils":168,"../../SceneCountdown":35,"../../ScenePreview":36,"../close.btn":67,classnames:void 0,i18next:void 0,lodash:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0,"rlc-components":void 0}],75:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=p(n),o=p(e("prop-types")),i=e("react-redux"),s=p(e("i18next")),u=e("rlc-components"),l=e("../../../actions/modal"),c=e("../../../utils"),d=e("../../../consts"),f=p(e("moment"));function p(e){return e&&e.__esModule?e:{default:e}}var m=function(e){var t=e.meta,r=e.isStandardPromo,o=e.topScenes,i=e.pastDays,l=e.onClose,p=t||{},m=p.reason,h=p.camera,S=m||d.GO_TO_JOIN_REASONS.FORBIDDEN_CAMERA,v=(0,n.useMemo)((function(){return(0,f.default)().subtract(i-1,"days").format("MMM Do YYYY")}),[i]);return a.default.createElement(u.UpgradeModal,{translator:s.default,isStandardPromo:r,topScenes:o,snapshotUrlTemplate:d.SNAPSHOT_URL_TEMPLATE,startingDateFrom:v,pastDays:i,onClose:l,onClickJoin:(0,c.getOnClickJoinWithReason)({reason:S,camera:h})})};m.propTypes={meta:o.default.oneOfType([o.default.number,o.default.string]),onClose:o.default.func.isRequired,isStandardPromo:o.default.bool,topScenes:o.default.arrayOf(o.default.shape()),pastDays:o.default.number},m.defaultProps={meta:null,isStandardPromo:!1,topScenes:[],pastDays:10},r.default=(0,i.connect)((function(e){var t=e.config.settings,r=t.replayDepthDays;return{isStandardPromo:t.topScenesFullListForStandard,topScenes:e.topScenesShort.scenes,pastDays:r}}),(function(e){return{onClose:function(){return e((0,l.modalClose)())}}}))(m)},{"../../../actions/modal":14,"../../../consts":115,"../../../utils":168,i18next:void 0,moment:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0,"rlc-components":void 0}],76:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=l(e("react")),a=l(e("prop-types")),o=e("react-redux"),i=l(e("i18next")),s=e("../../actions/modal"),u=e("rlc-components");function l(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=e.onClose;return n.default.createElement(u.RebillWarningModal,{translator:i.default,onClose:t})}c.propTypes={onClose:a.default.func.isRequired},r.default=(0,o.connect)(void 0,(function(e){return{onClose:function(){return e((0,s.modalClose)())}}}))(c)},{"../../actions/modal":14,i18next:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0,"rlc-components":void 0}],77:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=p(n),o=p(e("prop-types")),i=e("react-redux"),s=p(e("i18next")),u=p(e("moment")),l=e("../../actions/modal"),c=e("rlc-components"),d=e("../../selectors/auth"),f=e("../../actions/auth");function p(e){return e&&e.__esModule?e:{default:e}}function m(e){var t=e.login,r=e.userType,o=e.billerExpires,i=e.period,l=e.currency,d=e.currencySymbol,f=e.price,p=e.priceMonth,m=e.isAccessRebillReactivate,h=e.onClose,S=e.onReactivation,v=(0,n.useMemo)((function(){return u.default.unix(o).format("DD MMMM YYYY")}),[]);return i&&l&&f&&p?a.default.createElement(c.VerotelRebillModal,{translator:s.default,email:t,subscriptionEndDate:v,userType:r,currentPrice:""+d+f+" ("+l+") every "+i+" days until cancelled (which equals to only "+d+p+" a month)",isAccessRebillReactivate:m,onClose:h,onReactivate:S}):null}m.propTypes={login:o.default.string.isRequired,userType:o.default.string.isRequired,billerExpires:o.default.number.isRequired,period:o.default.number,currency:o.default.string,currencySymbol:o.default.string,price:o.default.number,priceMonth:o.default.number,isAccessRebillReactivate:o.default.bool.isRequired,onClose:o.default.func.isRequired,onReactivation:o.default.func.isRequired},m.defaultProps={period:void 0,currency:void 0,currencySymbol:void 0,price:void 0,priceMonth:void 0},r.default=(0,i.connect)((function(e){var t=e.auth.user,r=t.biller_expires,n=t.login,a=t.rate,o=(a=void 0===a?{}:a).period,i=a.currency,s=a.price,u=a.price_month;return{userType:(0,d.getUserType)(e),login:n,billerExpires:r,period:o,currency:i,currencySymbol:(0,d.getCurrentPlanCurrencySymbol)(e),price:s,priceMonth:Math.round(100*u)/100,isAccessRebillReactivate:e.current.isAccessRebillReactivate}}),(function(e){return{onClose:function(){return e((0,l.modalClose)())},onReactivation:function(){return e((0,f.reactivation)())}}}))(m)},{"../../actions/auth":5,"../../actions/modal":14,"../../selectors/auth":152,i18next:void 0,moment:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0,"rlc-components":void 0}],78:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=O(e("lodash")),o=O(e("react")),i=O(e("prop-types")),s=e("react-redux"),u=O(e("reconnecting-websocket")),l=e("rlc-components"),c=O(e("i18next")),d=(e("../../utils/fetch"),e("../../actions/apartments")),f=e("../../actions/md"),p=e("../../actions/modal"),m=e("../../selectors/auth"),h=e("../../actions/current"),S=e("../../selectors/current"),v=e("../../selectors/apartments"),E=e("../../consts"),g=e("../../actions/popup"),y=e("../../actions/offer"),_=e("../../utils/offer"),T=e("../player/errors");function O(e){return e&&e.__esModule?e:{default:e}}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var a=r[n],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(e,t))}var R=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return r.clickListener=function(){window.removeEventListener("click",r.clickListener),r.connect()},r.connect=function(){var e=r.props,t=e.wsUrl,n=e.userType,o=e.isActive;if(!(r.socket&&r.socket.connected||!t))try{var i=function(e,t){if(!t)return"/ws/guest";switch(e){case E.USER_TYPES.GUEST:return"/ws/guest";case E.USER_TYPES.STANDARD:return"/ws/standard";case E.USER_TYPES.COMBINED:return"/ws/premium";default:return"/ws/guest"}}(n,o);r.socket=new u.default(t+i,[],{connectionTimeout:1e4}),r.socket.onopen=function(){},r.socket.onerror=function(e){e.message},r.socket.onclose=function(){},r.socket.onmessage=function(e){if(e.data){var t=void 0;try{t=JSON.parse(e.data)}catch(e){return}switch(t.route){case"apartment":return void r.handleApartment(t.action,t.data);case"camera":return void r.handleCamera(t.camera,t.data);case"cameras_group":return void a.default.forEach(t.data,(function(e){r.handleCamera(e.camera,e.data)}));case"md.state":return void r.handleMdState(t.data);case"control":return void r.handleControl(t.data);case"promo":return void r.handlePromo(t.type,t.action,t.data);case"errors":return void r.handleErrors(t.type,t.action,t.data)}switch(t.action){case"user_logout":case"user_loging":(0,r.props.showReloadDialog)()}}}}catch(e){window.Raven&&window.Raven.captureException(e)}},r.handleErrors=function(e,t,n){var a=r.props.onPlayerErrorBySessionId;"player"===e&&"limits"===t&&n&&n.session_id&&("session"===n.type?a({sessionId:n.session_id,error:T.ERRORS.DURATION_LIMIT}):"daily"===n.type?a({sessionId:n.session_id,error:T.ERRORS.DURATION_LIMIT_DAY}):"streams-limit-guest"===n.type?a({sessionId:n.session_id,error:T.ERRORS.PLAY_CUSTOM_MESSAGE,errorMessage:c.default.t("errors.streams-limit-guest")}):"streams-limit-member"===n.type&&a({sessionId:n.session_id,error:T.ERRORS.PLAY_CUSTOM_MESSAGE,errorMessage:c.default.t("errors.streams-limit")}))},r.handlePromo=function(e,t,n){var a=r.props,o=a.userType,i=a.isActive,s=a.isFromAd,u=a.isValid,c=a.offerBlocks,d=a.onShowOffer,f=a.onShowUpgradePopup,p=a.onShowYearPopup,m=a.onShowConstructorOffer;if("constructor"===e&&"show"===t){if(!Array.isArray(c))return;var h=c.find((function(e){return e.uid===n}));if(!h)return;var S=h.type,v=h.triggers.ws;if(S===l.OFFER_TYPES.PLAYER&&!v)return;(0,_.checkAccessShowOffer)({offerBlock:h,userType:o,isActive:i,isFromAd:s,isValid:u})&&m(n)}if("offer"===e&&"show"===t)switch(n){case"OfferTrialStandard":o===E.USER_TYPES.GUEST&&d();break;case"OfferTrialPremium":!i||o!==E.USER_TYPES.PREMIUM&&o!==E.USER_TYPES.COMBINED||p();break;case"UpgradeStandard":i&&o===E.USER_TYPES.STANDARD&&f()}},r.handleControl=function(e){var t=r.props,n=t.onSetCamera,a=t.onSetViewModeRM,o=t.onToggleIsAutoFollow,i=t.onSetCurrentPlayer,s=t.currentPlayer;switch(e.event){case"sendState":r.sendState();break;case"remoteSwitchCamera":n(e.param);break;case"setMode":a(e.param);break;case"TrackingMode":o(s,e.param);break;case"selectPlayerByIdn":i(e.param)}},r.handleCamera=function(e,t){(0,r.props.cameraSetField)(e,t)},r.handleApartment=function(e,t){var n=r.props.apartmentUpdate;if("update"===e)n(t)},r.handleMdState=function(e){var t=r.props,n=t.mdSetData;t.isMdOn&&n(e)},r.sendState=function(e){var t=r.props,n=t.isMdOn,a=t.viewMode,o=t.currentPlayer,i={MD:n,currents:r.currents,mode:a,player:o};void 0!==e&&(i.session=e);try{r.socket.readyState===r.socket.OPEN&&r.socket.send(JSON.stringify(i))}catch(e){console.error(e)}},r.socket=null,r.sendError=0,r}return A(t,e),t.prototype.componentDidMount=function(){this.props.landingMode?window.addEventListener("click",this.clickListener):this.connect()},t.prototype.componentDidUpdate=function(e){var t=this.props,r=t.isMdOn,n=t.isAutoFollow,o=t.camera,i=t.currentPlayer,s=t.players,u=a.default.omitBy(s,(function(e){return a.default.isEmpty(e.camera)}));e.isMdOn===r&&a.default.isEqual(e.isAutoFollow,n)&&e.camera===o&&e.currentPlayer===i&&a.default.isEqual(e.players,u)||this.sendState()},t.prototype.componentWillUnmount=function(){this.disconnect()},t.prototype.disconnect=function(){this.socket&&this.socket.readyState!==this.socket.CLOSED||this.socket.close()},t.prototype.render=function(){return null},n(t,[{key:"currents",get:function(){var e=this.props,t=e.apartments,r=e.players,n=e.currentPlayer,o=e.isAutoFollow;return a.default.map(r,(function(e,r){var i=Number(r),s=(e.camera.camera?a.default.find(t,{apartment:e.camera.camera.split("_")[0]}):{})||{};return{apartment:{_id:s._id,status:s.status,name:s.name,cameras:(s.cameras||[]).map((function(e){return{status:e.status,name:e.name,camera:e.camera,_id:e._id}}))},camera:{camera:e.camera.camera,status:e.camera.status,name:e.camera.name,_id:e.camera._id},selected:i===n,autoFollow:o.player===i&&(E.AUTO_FOLLOW_MODES.ALL===o.mode||o.mode===E.AUTO_FOLLOW_MODES.APARTMENT)}}))}}]),t}(o.default.Component);R.propTypes={apartmentUpdate:i.default.func.isRequired,cameraSetField:i.default.func.isRequired,mdSetData:i.default.func.isRequired,showReloadDialog:i.default.func.isRequired,onSetCamera:i.default.func.isRequired,onSetViewModeRM:i.default.func.isRequired,onToggleIsAutoFollow:i.default.func.isRequired,onSetCurrentPlayer:i.default.func.isRequired,viewMode:i.default.oneOf(a.default.values(E.VIEW_MODE)).isRequired,wsUrl:i.default.string,landingMode:i.default.number,isMdOn:i.default.bool.isRequired,isAutoFollow:i.default.shape().isRequired,camera:i.default.shape().isRequired,currentPlayer:i.default.number.isRequired,apartments:i.default.arrayOf(i.default.shape()).isRequired,players:i.default.shape().isRequired,userType:i.default.string.isRequired,isActive:i.default.bool.isRequired,isFromAd:i.default.bool.isRequired,isValid:i.default.bool.isRequired,offerBlocks:i.default.arrayOf(i.default.shape()).isRequired,onShowOffer:i.default.func.isRequired,onShowUpgradePopup:i.default.func.isRequired,onShowYearPopup:i.default.func.isRequired,onShowConstructorOffer:i.default.func.isRequired,onPlayerErrorBySessionId:i.default.func.isRequired},R.defaultProps={wsUrl:"",landingMode:null},r.default=(0,s.connect)((function(e){return{wsUrl:e.auth.config.urls.ws||e.config.wsUrl,landingMode:e.config.landingMode,isMdOn:e.md.isOn,isAutoFollow:(0,S.getIsAutoFollow)(e),viewMode:(0,S.getViewMode)(e),apartments:(0,v.getApartments)(e),camera:(0,S.getCurrentCamera)(e),players:(0,S.getPlayers)(e),currentPlayer:(0,S.getCurrentPlayer)(e),userType:(0,m.getUserType)(e),isActive:(0,m.getIsActive)(e),isValid:(0,m.getIsValid)(e),isFromAd:Boolean(e.auth.config.rlcHello),offerBlocks:e.config.settings.offerBlocks}}),(function(e){return{apartmentUpdate:function(t){return e((0,d.updateApartment)(t))},mdSetData:function(t){e((0,f.mdSetApartments)(t.apartments)),e((0,f.mdSetCameras)(t.cameras))},showReloadDialog:function(){return e((0,p.modalShowReloadDialog)())},onSetCamera:function(t){return e((0,h.setCamera)(t))},onSetViewModeRM:function(t){return e((0,h.setViewModeRM)(t))},onToggleIsAutoFollow:function(t,r){return e((0,h.setIsAutoFollow)(t,r?E.AUTO_FOLLOW_MODES.ALL:null))},onSetCurrentPlayer:function(t){return e((0,h.setCurrentPlayer)(t))},cameraSetField:function(t,r){return e((0,d.setFieldCamera)(t,r))},onShowOffer:function(){return e((0,g.showOffer)())},onShowUpgradePopup:function(){return e((0,g.showUpgradePopup)())},onShowYearPopup:function(){return e((0,g.showYearPopup)())},onPlayerErrorBySessionId:function(t){var r=t.sessionId,n=t.error,a=t.errorMessage;return e((0,h.setPlayerErrorBySessionId)({sessionId:r,error:n,errorMessage:a}))},onShowConstructorOffer:function(t){return e((0,y.showConstructorOffer)(t))}}}))(R)},{"../../actions/apartments":4,"../../actions/current":11,"../../actions/md":13,"../../actions/modal":14,"../../actions/offer":16,"../../actions/popup":19,"../../consts":115,"../../selectors/apartments":151,"../../selectors/auth":152,"../../selectors/current":155,"../../utils/fetch":166,"../../utils/offer":173,"../player/errors":97,i18next:void 0,lodash:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0,"reconnecting-websocket":void 0,"rlc-components":void 0}],79:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=f(n),o=f(e("prop-types")),i=e("react-redux"),s=e("rlc-components"),u=e("../selectors/offer"),l=e("../actions/offer"),c=e("../selectors/current"),d=e("../hooks/useHandleReasonOffer");function f(e){return e&&e.__esModule?e:{default:e}}function p(e){var t=e.camera,r=e.activeOffers,o=e.onCloseOffer,i=r.find((function(e){var t=e.type;return t===s.OFFER_TYPES.POPUP||t===s.OFFER_TYPES.MODAL})),u=i||{},l=u.uid,c=u.type,f=u.blocks,p=u.position,m=u.color,h=(0,d.useHandleReasonOffer)(t,i&&i.type),S=(0,n.useCallback)((function(){o(l)}),[o,l]);return i?a.default.createElement(s.MainOffer,{id:l,blocks:f,type:c,position:p,border:m,onClose:S,onReason:h}):null}p.propTypes={camera:o.default.string,activeOffers:o.default.arrayOf(o.default.shape()),onCloseOffer:o.default.func.isRequired},p.defaultProps={camera:void 0,activeOffers:[]},r.default=(0,i.connect)((function(e){var t=(0,c.getCurrentCamera)(e);return{camera:t&&t.camera,activeOffers:(0,u.getActiveOffers)(e)}}),(function(e){return{onCloseOffer:function(t){return e((0,l.closeOffer)(t))}}}))(p)},{"../actions/offer":16,"../hooks/useHandleReasonOffer":119,"../selectors/current":155,"../selectors/offer":157,"prop-types":void 0,react:void 0,"react-redux":void 0,"rlc-components":void 0}],80:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=m(e("react")),o=m(e("prop-types")),i=e("react-redux"),s=m(e("classnames")),u=m(e("lodash")),l=e("../../../selectors/auth"),c=e("../../../selectors/current"),d=e("../../../actions/current"),f=e("../../../actions/preview"),p=e("../utils");function m(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var a=r[n],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(e,t))}function E(e){var t="translate("+(e.x-10)+" "+(e.y-14)+") scale(2,2)";return a.default.createElement("path",{className:"cls-1",d:"M9.32,5.39H8.21V3.45A3.22,3.22,0,0,0,5.21,0,3.25,3.25,0,0,0,1.72,3a3.84,3.84,0,0,0,0,.48V5.38h-1A.67.67,0,0,0,0,6H0v6.28A.67.67,0,0,0,.67,13H9.32a.68.68,0,0,0,.68-.66h0V6.07a.66.66,0,0,0-.66-.68h0ZM5.45,10v1H4.56V10a1.18,1.18,0,0,1-.69-1.52,1.2,1.2,0,0,1,1.54-.68A1.17,1.17,0,0,1,6.1,9.27h0a1.35,1.35,0,0,1-.69.68ZM7,5.39H3.08V3.45a1.84,1.84,0,0,1,1.67-2h.12A1.91,1.91,0,0,1,6.92,3.18h0Z",transform:t})}E.propTypes={x:o.default.number.isRequired,y:o.default.number.isRequired};var g=function(e){function t(){var r,n;h(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return r=n=S(this,e.call.apply(e,[this].concat(o))),n.onClick=function(){(0,n.props.onSetCamera)(n.camera.camera)},n.onMouseMove=function(e){var t=n.props,r=t.apartment,a=t.camera,o=t.onShowPreview;"maintenance"!==r.status&&"maintenance"!==a.status&&o(e,n.camera,r)},n.onMouseLeave=function(){(0,n.props.onHidePreview)()},S(n,r)}return v(t,e),t.prototype.render=function(){var e=this.props,t=e.a,r=e.b,n=e.number,o=e._id,i=e.currentCamera,u=e.md,l=e.userAccess,c=this.camera;if(void 0===c)return a.default.createElement("svg",null);var d=n.length>1?14:7,f=[t,(0,p.getCoordPoint)(t,r,50,1),(0,p.getCoordPoint)(t,r,50,-1)].map((function(e){return e[0]+","+e[1]})).join(" "),m=a.default.createElement(E,{x:t[0],y:t[1]}),h="camera",S="url(#grad"+o+")",v="public"===c.access||"premium"===l||"private"===c.access&&"guest"!==l;return v?m=a.default.createElement("text",{x:t[0]-d,y:t[1]+9,fill:"#fff"},n):h=(0,s.default)(h,"lock"),v&&1===u[c.camera]&&(h=(0,s.default)(h,"motion"),S="url(#motion"+o+")"),i.camera===c.camera&&(h=(0,s.default)(h,"active"),S="url(#active"+o+")"),a.default.createElement("svg",{className:h},a.default.createElement("linearGradient",{id:"grad"+o,className:"main",gradientUnits:"userSpaceOnUse",x1:t[0],y1:t[1],x2:r[0],y2:r[1]},a.default.createElement("stop",{offset:"0%",stopColor:"#ccc",stopOpacity:"0.9"}),a.default.createElement("stop",{offset:"100%",stopColor:"#ccc",stopOpacity:"0"})),a.default.createElement("linearGradient",{id:"motion"+o,className:"motion",gradientUnits:"userSpaceOnUse",x1:t[0],y1:t[1],x2:r[0],y2:r[1]},a.default.createElement("stop",{offset:"0%",stopColor:"#51c62a",stopOpacity:"0.9"}),a.default.createElement("stop",{offset:"100%",stopColor:"#51c62a",stopOpacity:"0"})),a.default.createElement("linearGradient",{id:"active"+o,className:"active",gradientUnits:"userSpaceOnUse",x1:t[0],y1:t[1],x2:r[0],y2:r[1]},a.default.createElement("stop",{offset:"0%",stopColor:"#fcf981",stopOpacity:"0.9"}),a.default.createElement("stop",{offset:"100%",stopColor:"#fcf981",stopOpacity:"0"})),a.default.createElement("polygon",{points:f,fill:S}),a.default.createElement("g",{onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,onClick:this.onClick},a.default.createElement("circle",{cx:t[0],cy:t[1],r:20,fill:"#21a81f"}),m))},n(t,[{key:"camera",get:function(){var e=this.props,t=e.apartment,r=e.link;return this.cam&&this.cam.camera===r||(this.cam=u.default.find(t.cameras,{camera:r})),this.cam}}]),t}(a.default.Component);g.propTypes={apartment:o.default.shape().isRequired,link:o.default.string.isRequired,camera:o.default.string.isRequired,onHidePreview:o.default.func.isRequired,onShowPreview:o.default.func.isRequired,onSetCamera:o.default.func.isRequired,userAccess:o.default.string.isRequired,number:o.default.string.isRequired,a:o.default.arrayOf(o.default.number).isRequired,b:o.default.arrayOf(o.default.number).isRequired,currentCamera:o.default.shape().isRequired,md:o.default.shape(),_id:o.default.string.isRequired},g.defaultProps={md:{}},r.default=(0,i.connect)((function(e){return{apartment:(0,c.getCurrentApartment)(e),currentCamera:(0,c.getCurrentCamera)(e),userAccess:(0,l.getAccess)(e),md:e.md.cameras}}),(function(e){return{onSetCamera:function(t){return e((0,d.setCamera)(t))},onShowPreview:function(t,r,n){return e((0,f.showPreview)(t,r,n,"no-arrow","left",!1))},onHidePreview:function(){return e((0,f.hidePreview)())}}}))(g)},{"../../../actions/current":11,"../../../actions/preview":20,"../../../selectors/auth":152,"../../../selectors/current":155,"../utils":89,classnames:void 0,lodash:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0}],81:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,a=e("react"),o=(n=a)&&n.__esModule?n:{default:n},i=e("../utils");r.default=function(e){var t=e.a,r=e.b,n=e.c,a=Math.sqrt(Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2)),s=0,u=(0,i.getCoordPoint)(t,r,a,1);return u[0]==n[0]&&u[1]==n[1]&&(s=1),o.default.createElement("svg",{className:"door"},o.default.createElement("path",{d:"M"+t[0]+","+t[1]+" A"+a+","+a+" 0 0,"+s+" "+n[0]+","+n[1],stroke:"#000",strokeWidth:1,fill:"none"}),o.default.createElement("line",{x1:r[0],y1:r[1],x2:n[0],y2:n[1],strokeWidth:2,stroke:"#000"}),o.default.createElement("line",{x1:t[0],y1:t[1],x2:r[0],y2:r[1],strokeWidth:4,stroke:"#fff",className:"aperture"}))}},{"../utils":89,react:void 0}],82:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,a=e("react"),o=(n=a)&&n.__esModule?n:{default:n};r.default=function(e){var t=e.points.map((function(e){return e[0]+","+e[1]})).join(" ");return o.default.createElement("svg",{className:"filling"},o.default.createElement("polygon",{points:t}))}},{react:void 0}],83:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,a=e("react"),o=(n=a)&&n.__esModule?n:{default:n};r.default=function(e){var t=e.a,r=e.b;return o.default.createElement("svg",{className:"glass"},o.default.createElement("line",{x1:t[0],y1:t[1],x2:r[0],y2:r[1],strokeWidth:4,stroke:"#3ab5d6"}))}},{react:void 0}],84:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Filling=r.Door=r.Stairs=r.Pool=r.Glass=r.Camera=r.Wall=void 0;var n=c(e("./wall")),a=c(e("./camera")),o=c(e("./glass")),i=c(e("./pool")),s=c(e("./stairs")),u=c(e("./door")),l=c(e("./filling"));function c(e){return e&&e.__esModule?e:{default:e}}r.Wall=n.default,r.Camera=a.default,r.Glass=o.default,r.Pool=i.default,r.Stairs=s.default,r.Door=u.default,r.Filling=l.default},{"./camera":80,"./door":81,"./filling":82,"./glass":83,"./pool":85,"./stairs":86,"./wall":87}],85:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,a=e("react"),o=(n=a)&&n.__esModule?n:{default:n};r.default=function(e){var t=e.points.map((function(e){return e[0]+","+e[1]})).join(" ");return o.default.createElement("svg",{className:"pool"},o.default.createElement("polygon",{points:t,fill:"#a1e0ff"}))}},{react:void 0}],86:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,a=e("react"),o=(n=a)&&n.__esModule?n:{default:n},i=e("../utils");r.default=function(e){var t,r,n,a,s,u=e.a,l=e.b,c=e.step,d=e.r,f=[];if((u[0]!=l[0]||u[1]!=l[1])&&c>1){var p=Math.sqrt(Math.pow(l[0]-u[0],2)+Math.pow(l[1]-u[1],2)),m=(0,i.getCoordPoint)(u,l,d,1),h=(0,i.getCoordPoint)(l,u,d,-1);f.push(o.default.createElement("line",{x1:m[0],y1:m[1],x2:h[0],y2:h[1],stroke:"grey",key:"mainleft"})),m=(0,i.getCoordPoint)(u,l,d,-1),h=(0,i.getCoordPoint)(l,u,d,1),f.push(o.default.createElement("line",{x1:m[0],y1:m[1],x2:h[0],y2:h[1],stroke:"grey",key:"mainright"}));for(var S=0;S<p;S+=Number(c)){var v=(t=u[0],r=u[1],n=l[0],a=l[1],s=void 0,s=S/Math.sqrt(Math.pow(n-t,2)+Math.pow(a-r,2)),[t+(n-t)*s,r+(a-r)*s]),E=(0,i.getCoordPoint)(l,v,d,1),g=(0,i.getCoordPoint)(l,v,d,-1);f.push(o.default.createElement("line",{x1:E[0],y1:E[1],x2:g[0],y2:g[1],stroke:"grey",key:"stairs."+S}))}}return o.default.createElement("svg",{className:"stairs"},f)}},{"../utils":89,react:void 0}],87:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,a=e("react"),o=(n=a)&&n.__esModule?n:{default:n};r.default=function(e){var t=e.a,r=e.b,n=4,a="wall_inner";return 1==e.type&&(n=8,a="wall_external"),o.default.createElement("svg",{className:a},o.default.createElement("line",{x1:t[0],y1:t[1],x2:r[0],y2:r[1],strokeWidth:n,stroke:"#000"}))}},{react:void 0}],88:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=d(e("react")),a=e("react-redux"),o=d(e("prop-types")),i=e("lodash"),s=d(e("classnames")),u=e("../../selectors/current"),l=e("../../actions/panels"),c=e("./components");function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var a=r[n],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(e,t))}function h(e){switch(e){case 0:return 1;case 1:return 7;case 2:return 8;case 3:return 10;case 4:return 9;case 5:default:return 0;case 6:return 2;case 7:return-1}}var S=function(e){function t(){var r,n;f(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return r=n=p(this,e.call.apply(e,[this].concat(o))),n.onClickTitle=function(e){e.preventDefault();var t=n.props;(0,t.setShowPlan)(!t.isShow)},p(n,r)}return m(t,e),t.prototype.render=function(){var e=this.props,t=e.apartment,r=e.currentCamera,a=e.isShow,o=e.level,u=t.planSVG2[o]||[],l=(0,i.sortBy)(u,(function(e){return 3===e.type&&r.camera===e.camera?h(e.type)+1:h(e.type)})).map((function(e){return function(e){switch(e.type){case 0:return n.default.createElement(c.Wall,{a:e.a,b:e.b,type:0,key:e.id});case 1:return n.default.createElement(c.Wall,{a:e.a,b:e.b,type:1,key:e.id});case 2:return n.default.createElement(c.Glass,{a:e.a,b:e.b,key:e.id});case 3:return n.default.createElement(c.Camera,{key:e.id,a:e.a,b:e.b,number:e.number,camera:e.camera,link:e.camera,_id:e.id});case 4:return n.default.createElement(c.Door,{a:e.a,b:e.b,c:e.c,key:e.id});case 5:return n.default.createElement(c.Stairs,{key:e.id,a:e.a,b:e.b,step:e.step,r:e.r});case 6:return n.default.createElement(c.Pool,{points:e.points,key:e.id});case 7:return n.default.createElement(c.Filling,{points:e.points,key:e.id});default:return null}}(e)}));return n.default.createElement("div",{className:(0,s.default)("map",{closed:!a})},n.default.createElement("div",{className:"map-title",onClick:a?void 0:this.onClickTitle},n.default.createElement("span",{className:"title"},"Apartment plan"),n.default.createElement("i",{className:(0,s.default)({"icon-opened":a,"icon-closed":!a}),onClick:a?this.onClickTitle:void 0})),n.default.createElement("div",{className:(0,s.default)("map-plan",{closed:!a})},n.default.createElement("svg",{width:200,height:140,viewBox:"0 0 500 348"},l)))},t}(n.default.Component);S.propTypes={apartment:o.default.shape().isRequired,currentCamera:o.default.shape().isRequired,isShow:o.default.bool.isRequired,level:o.default.number.isRequired,setShowPlan:o.default.func.isRequired},r.default=(0,a.connect)((function(e){return{apartment:(0,u.getCurrentApartment)(e),currentCamera:(0,u.getCurrentCamera)(e),isShow:e.panels.plan,level:(0,u.getCurrentLevel)(e)}}),(function(e){return{setShowPlan:function(t){return e((0,l.setShowPanel)("plan",t))}}}))(S)},{"../../actions/panels":18,"../../selectors/current":155,"./components":84,classnames:void 0,lodash:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0}],89:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.getCoords=function(e){var t=e.getBoundingClientRect(),r=document.documentElement,n=document.body,a=window.pageYOffset||r.scrollTop||n.scrollTop,o=window.pageXOffset||r.scrollLeft||n.scrollLeft,i=r.clientTop||n.clientTop||0,s=r.clientLeft||n.clientLeft||0,u=t.top+a-i,l=t.left+o-s;return{top:Math.round(u),left:Math.round(l)}},r.getCoordPoint=function(e,t,r,n){var a=e[0],o=t[0],i=e[1],s=t[1],u=Math.sqrt(Math.pow(o-a,2)+Math.pow(s-i,2));return 0===u?[o,s]:[o+(s-i)*n*Math.abs(r/u),s+(o-a)*-n*Math.abs(r/u)]},r.rounding=function(e,t){return Math.round(e/t)*t}},{}],90:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={a:"100000",b:"110000",c:"100100",d:"100110",e:"100010",f:"110100",g:"110110",h:"110010",i:"010100",j:"010110",k:"101000",l:"111000",m:"101100",n:"101110",o:"101010",p:"111100",q:"111110",r:"111010",s:"011100",t:"011110",u:"101001",v:"111001",x:"101101",y:"101111",z:"101011",w:"010111",0:"001011",1:"010000",2:"011000",3:"010010",4:"010011",5:"010001",6:"011010",7:"011011",8:"011001",9:"001010"};var a=function(){function e(t,r){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getCenterX=function(e,t){return Math.floor(e/a.rowCount)*a.rowHeight+a.rowHeight/2+t},this.getCenterY=function(e,t){return e%a.rowCount*a.rowHeight+a.rowHeight/2+t},this.drawLetter=function(e,t,r){e in n&&n[e].split("").forEach((function(e,n){if("1"===e){var o=a.getCenterX(n,t),i=a.getCenterY(n,r);a.context.beginPath(),a.context.arc(o,i,a.circleR,0,2*Math.PI,!1),a.context.fill()}}))},this.refillText=function(e){a.context.globalAlpha=e,a.context.fillStyle=a.fillStyle,a.context.restore(),a.drawContent(a.lastContent,a.lastStart.x,a.lastStart.y)},this.fillText=function(e,t,r){var n=a.element,o=n.width,i=n.height;a.context.globalAlpha=a.transparency,a.context.fillStyle=a.fillStyle,a.context.restore();var s=a.getWidth(e),u=a.getHeight(),l=Math.floor(15*Math.random()-7),c=function(e,t,r,n,a){var o={},i=Math.abs(Math.sin(a*Math.PI/180))*t,s=i+Math.cos(a*Math.PI/180)*e,u=Math.cos(a*Math.PI/180)*t,l=Math.abs(Math.sin(a*Math.PI/180))*e,c=u+l;return a>=0?(o.rX=Math.round(Math.random()*(r-s))+i,o.rY=Math.round(Math.random()*(n-c))+u):(o.rX=Math.round(Math.random()*(r-s)),o.rY=Math.round(Math.random()*(n-c))+t+l),o}(s,u,o,i,l);a.lastContent=e,a.lastStart={x:t,y:r},a.context.translate(c.rX,c.rY),a.context.rotate(l*Math.PI/180),a.drawContent(e,t,r)},this.getWidth=function(e){return a.letterWidth*e.length+a.padding*(e.length-1)},this.getHeight=function(){return a.letterHeight},this.setFontSize=function(e){a.fontSize=e,a.rowHeight=Math.floor(a.fontSize/a.rowCount),a.letterHeight=a.rowHeight*a.rowCount,a.letterWidth=2*a.rowHeight,a.circleR=Math.floor(a.rowHeight/4)},this.rowCount=3,this.columnCount=2,this.padding=10,this.element=t,this.context=t.getContext("2d"),this.transparency=r.transparency,this.fillStyle=r.fillStyle,this.context.save(),this.lastContent="",this.lastStart={}}return e.prototype.drawContent=function(e,t,r){var n=this,a=r-this.letterHeight,o=t;e.split("").forEach((function(e){n.drawLetter(e,o,a),o+=n.letterWidth+n.padding}))},e}();r.default=a},{}],91:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=i(e("react")),a=i(e("prop-types")),o=i(e("./Braile"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var a=r[n],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(e,t))}function c(){return Math.round(300*Math.random()+200)}var d=function(e){function t(){var r,n;s(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return r=n=u(this,e.call.apply(e,[this].concat(o))),n.WM_COLOR="#040404",n.TRANSPARENCY=.025,n.TEMP_TRANSPARENCY=.005,n.PERIOD_WM=2e4,n.TIME_BETWEEN_WM=100,n.isShow=!0,n.clearTimeouts=function(){clearTimeout(n.redrawInt),clearTimeout(n.delayInt),clearTimeout(n.changeInt)},n.getCanvasSize=function(){if(!n.wrapper.offsetHeight)return{width:n.wrapper.offsetWidth,height:Math.floor(n.wrapper.offsetWidth/16*9)};var e=Math.min(Math.floor(n.wrapper.offsetWidth/16),Math.floor(n.wrapper.offsetHeight/9));return{width:16*e,height:9*e}},n.draw=function(){var e=n.props,t=e.uid,r=e.id,a=n.getCanvasSize(),o=a.width,i=a.height;n.canvas.width=o,n.canvas.height=i;var s=Math.round(.2*o);n.braile.setFontSize(s),n.braile.fillText(t,0,0);var u=document.querySelector("#"+r);u&&(u.style="background-color: transparent; position: relative; z-index: 4; width: 100%; height: 100%;",n.show())},n.scheduleRedraw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n.clearTimeouts(),n.redrawInt=setTimeout((function(){n.hide(),n.delayInt=setTimeout((function(){n.show(),n.increaseBrigthness(),n.changeInt=setTimeout((function(){n.draw(),n.scheduleRedraw(n.PERIOD_WM,n.TIME_BETWEEN_WM+c())}),t)}),t)}),e)},n.handleWrapperRef=function(e){n.wrapper=e},n.handleCanvasRef=function(e){n.canvas=e},u(n,r)}return l(t,e),t.prototype.componentDidMount=function(){this.canvas.width=960,this.canvas.height=540,this.braile=new o.default(this.canvas,{fillStyle:this.WM_COLOR,transparency:this.TRANSPARENCY}),this.draw(),this.scheduleRedraw()},t.prototype.componentDidUpdate=function(){var e=this.getCanvasSize(),t=e.width,r=e.height;(t>this.canvas.width||r>this.canvas.height)&&(this.draw(),this.scheduleRedraw())},t.prototype.componentWillUnmount=function(){this.clearTimeouts()},t.prototype.hide=function(){this.canvas&&(this.isShow=!1,this.canvas.style="display:none")},t.prototype.show=function(){this.canvas&&(this.isShow=!0,this.canvas.style="")},t.prototype.increaseBrigthness=function(){this.braile&&this.braile.refillText(this.TEMP_TRANSPARENCY)},t.prototype.render=function(){var e=this.props.id;return n.default.createElement("div",{id:e,ref:this.handleWrapperRef},n.default.createElement("canvas",{ref:this.handleCanvasRef}))},t}(n.default.Component);d.propTypes={uid:a.default.string.isRequired,id:a.default.string.isRequired},r.default=d},{"./Braile":90,"prop-types":void 0,react:void 0}],92:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=f(n),o=f(e("prop-types")),i=e("react-redux"),s=e("rlc-components"),u=e("../../selectors/offer"),l=e("../../actions/offer"),c=e("../../selectors/auth"),d=e("../../hooks/useHandleReasonOffer");function f(e){return e&&e.__esModule?e:{default:e}}function p(e){var t=e.imgUri,r=e.camera,o=e.activeOffers,i=e.onMute,u=e.onUnmute,l=e.onExitFullScreen,c=e.onCloseOffer,f=(0,n.useRef)(),p=o.find((function(e){return e.type===s.OFFER_TYPES.PLAYER}));(0,n.useEffect)((function(){p&&!f.current?(i(),l()):!p&&f.current&&u(),f.current=p}),[f.current,p]);var m=p||{},h=m.uid,S=m.type,v=m.blocks,E=m.position,g=m.color,y=(0,d.useHandleReasonOffer)(r,p&&p.type),_=(0,n.useCallback)((function(){c(h)}),[c,h]);return p?a.default.createElement("div",{className:"fp-message"},a.default.createElement("div",{className:"fp-message-container"},a.default.createElement(s.MainOffer,{id:h,blocks:v,type:S,position:E,border:g,onClose:_,onReason:y})),a.default.createElement(s.ProgressiveImage,{src:t,className:"fp-message-background",imgClassName:"fp-message-background-image"})):null}p.propTypes={imgUri:o.default.string,camera:o.default.string,activeOffers:o.default.arrayOf(o.default.shape()),onMute:o.default.func.isRequired,onUnmute:o.default.func.isRequired,onExitFullScreen:o.default.func.isRequired,onCloseOffer:o.default.func.isRequired},p.defaultProps={imgUri:void 0,camera:void 0,activeOffers:[]},r.default=(0,i.connect)((function(e,t){var r=t&&t.camera,n=(0,c.getTopCamsSnapURI)(e);return{imgUri:r?n(r):void 0,activeOffers:(0,u.getActiveOffers)(e)}}),(function(e){return{onCloseOffer:function(t){return e((0,l.closeOffer)(t))}}}))(p)},{"../../actions/offer":16,"../../hooks/useHandleReasonOffer":119,"../../selectors/auth":152,"../../selectors/offer":157,"prop-types":void 0,react:void 0,"react-redux":void 0,"rlc-components":void 0}],93:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=P(e("react")),a=P(e("prop-types")),o=e("react-redux"),i=P(e("lodash")),s=P(e("url")),u=e("../../actions/apartments"),l=e("../../actions/current"),c=e("../../actions/config"),d=e("../../selectors/auth"),f=e("../../selectors/current"),p=e("../../utils"),m=e("../../utils/localStorage"),h=e("../../utils/fetch"),S=P(e("../../utils/events")),v=e("../../utils/auth"),E=e("../../consts"),g=e("../../config"),y=e("../../SlivaxHandler"),_=P(y),T=P(e("../../balancerMetrics")),O=e("./errors"),A=P(O),R=P(e("./flowplayer")),b=P(e("./UnmuteBlock")),w=P(e("./OfferConstructorPlayer"));function P(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var a=r[n],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(e,t))}var M=3,I=60,N=function(e){function t(r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,r));return n.addPlayerError=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.props.player,a=r.playlist,o=r.camera;_.default.pushPlayer(e,{edge:(0,p.getEdgeFromUrl)(a),camera:o.camera,details:t},y.EVENT_LEVELS.ERROR)},n.showMessage=function(e){var t=n.props.onPlayerError;switch(t({errorMessage:void 0}),e){case E.CHUNKLIST_ERRORS.ACCESS_FORBIDDEN:(0,n.props.updateApartments)(),t({error:O.ERRORS.JOYSTICK});break;case E.CHUNKLIST_ERRORS.DURATION_LIMIT_GUEST:t({error:O.ERRORS.DURATION_LIMIT});break;case E.CHUNKLIST_ERRORS.DURATION_LIMIT_GUEST_DAY:case E.PLAYLIST_ERRORS.DURATION_LIMIT_GUEST_DAY:t({error:O.ERRORS.DURATION_LIMIT_DAY});break;case"errors.safari_flash":t({error:O.ERRORS.SAFARI_FLASH});break;case"errors.connection-failed":t({error:O.ERRORS.CONNECTION_FAILED});break;case E.CHUNKLIST_ERRORS.MAINTENANCE:case E.CHUNKLIST_ERRORS.MAINTENANCE_CAMERA:t({error:O.ERRORS.UNDER_MAINTENANCE});break;case O.ERRORS.ACCESS_FORBIDDEN:t({error:O.ERRORS.ACCESS_FORBIDDEN});break;case E.CHUNKLIST_ERRORS.COOKIE:t({error:O.ERRORS.COOKIES_DISABLED});break;case E.PLAYLIST_ERRORS.USER_BLACKLISTED:t({error:O.ERRORS.ACCESS_FORBIDDEN_CUSTOM_MESSAGE,errorMessage:e});break;case E.PLAYLIST_ERRORS.CAMERA_UNSPECIFIED:t({error:O.ERRORS.ISSUE_CUSTOM_MESSAGE,errorMessage:e});break;case E.PLAYLIST_ERRORS.FORBIDDEN:case E.PLAYLIST_ERRORS.GUEST_FORBIDDEN:t({error:O.ERRORS.ACCESS_FORBIDDEN_CUSTOM_MESSAGE,errorMessage:e});break;case E.PLAYLIST_ERRORS.CAMERA_NOT_FOUND:t({error:O.ERRORS.ISSUE_CUSTOM_MESSAGE,errorMessage:e});break;case E.PLAYLIST_ERRORS.STREAMS_LIMIT:case E.PLAYLIST_ERRORS.STREAMS_LIMIT_GUEST:t({error:O.ERRORS.PLAY_CUSTOM_MESSAGE,errorMessage:e});break;default:t({error:O.ERRORS.CUSTOM_MESSAGE,errorMessage:e})}},n.handleChunklistErrors=function(e){switch(e){case E.CHUNKLIST_ERRORS.SERVER:case E.CHUNKLIST_ERRORS.SESSION_EXPIRED:n.repeat();break;case E.CHUNKLIST_ERRORS.COOKIE:if(i.default.get(n.refs.player,"player.playing",!1)){n.repeat();break}n.showMessage(e);break;default:n.showMessage(e)}},n.onError=function(e,t){var r=n.props,a=r.isActive,o=r.player.playlist;switch(e){case E.PLAYER_ERRORS.BUFFER_TIMEOUT:n.onBufferFullTimeout();break;case E.PLAYER_ERRORS.BUFFER_TIMEOUT_WARNING:n.onBufferFullTimeoutWarning();break;case E.PLAYER_ERRORS.BUFFER_EMPTY:n.onBufferEmpty();break;case E.PLAYER_ERRORS.SAFARI_FLASH:try{var i=Number(g.UA_INFO.browser.major);"Safari"===g.UA_INFO.browser.name&&i>=10&&"mobile"!==g.UA_INFO.device.type&&n.showMessage("errors.safari_flash")}catch(e){window.Raven&&window.Raven.captureException(e)}break;case E.PLAYER_ERRORS.CHUNKLIST:n.handleChunklistErrors(t);break;default:a&&_.default.pushPlayer("error",{error:e+":"+t,playlist:o})}},n.onPlay=function(){var e=n.props,t=e.player.playlist,r=e.sendStartStream,a=e.disableSendStartStream;r&&(S.default.startStream(),a()),t!==n.bufferError.lastPlaylist&&(n.bufferError.count=0,n.bufferError.lastTime=null,n.bufferError.lastPlaylist=null)},n.onBufferEmpty=function(){var e=n.props,t=e.player,r=t.playlist,a=t.camera,o=e.number;n.addPlayerError("player.buffer_empty."+o),T.default.push({type:"buffer_empty",camera:a.camera,edge:(0,p.getEdgeFromUrl)(r)});var i=(0,p.getTimestamp)();n.bufferError.lastPlaylist&&n.bufferError.lastPlaylist.url!==r.url||n.bufferError.lastTime&&!(i-n.bufferError.lastTime<I)?n.bufferError.count=1:n.bufferError.count+=1,n.bufferError.lastTime=i,n.bufferError.lastPlaylist=r,n.bufferError.count>=M&&(n.bufferError.reactionCount+=1,n.bufferError.count=0,n.onBufferFail())},n.onBufferFail=function(){var e=n.props,t=e.player,r=t.playlist,a=t.camera,o=e.number;n.addPlayerError("player.buffer_fail."+o,n.bufferError.reactionCount),T.default.push({type:"buffer_fail",camera:a.camera,edge:(0,p.getEdgeFromUrl)(r)}),n.repeat()},n.onBufferFullTimeout=function(){var e=n.props,t=e.player,r=t.playlist,a=t.camera,o=e.number;n.addPlayerError("player.buffer_full_timeout."+o),T.default.push({type:"buffer_full_timeout",camera:a.camera,edge:(0,p.getEdgeFromUrl)(r)})},n.onBufferFullTimeoutWarning=function(){var e=n.props,t=e.player,r=t.playlist,a=t.camera,o=e.number;n.addPlayerError("player.buffer_full_timeout_warning."+o),T.default.push({type:"buffer_full_timeout_warning",camera:a.camera,edge:(0,p.getEdgeFromUrl)(r)})},n.onStop=function(){n.stopUrl&&((0,h.fetch)("stopSession",{type:"GET",url:n.stopUrl,cache:!1,timeoutOverall:12e3,timeoutItem:5e3,interval:500}),n.stopUrl=null)},n.stopPlayer=function(){n.refs.player&&n.refs.player.stop()},n.fetchPlaylist=function(){var e=n.props,t=e.player,r=e.excludeList,a=e.number,o=e.savePlaylist,u=e.onPlayerError,c=t.camera;if(c.playlist){n.onStop(),n.stopPlayer(),u({error:void 0}),!i.default.isEmpty(t.playlist)&&t.playlist.netConnectionUrl&&_.default.pushPlayer("stop",{edge:(0,p.getEdgeFromUrl)(t.playlist),time:0},y.EVENT_LEVELS.REGULAR);var d="",f="",S="";try{var v=(0,l.getExcludedEdges)(r,15),E=i.default.map(v,(function(e){return e.name})),T=(0,m.getPrior)();d=E?JSON.stringify(E):null,f=T?JSON.stringify(T):null,S=(0,m.getBalanced)()}catch(e){window.Raven&&window.Raven.captureException(e)}var O={_:(0,p.getTimestamp)()};try{("iOS"===g.UA_INFO.os.name||(0,p.getIsIpadOS)())&&(O.lt=Math.random().toString(36).substring(7))}catch(e){window.Raven&&window.Raven.captureException(e)}S&&(O.balanced=S),d&&(O.exe=d),f&&(O.prior=f),g.IS_NEW_PLAYER?O.type="lm":O.type="hls",n.fetch=(0,h.fetch)("playlist"+a,{type:"GET",url:c.playlist+s.default.format({query:O}),cache:!1,timeoutOverall:12e3,timeoutItem:5e3,interval:500,success:function(e){n.props.player.camera.camera===c.camera&&(o(e),n.stopUrl=e.stop)},error:function(e){n.showMessage("errors."+i.default.get(e,"error","connection-failed")),n.stopPlayer()},log:!0,level:y.EVENT_LEVELS.REGULAR})}},n.repeat=function(){n.fetchPlaylist()},n.onAutoplayDisabled=function(e){document.addEventListener("click",(function(){return n.onUnmute(e)}),{once:!0}),n.setState({isAutoPlayDisabled:!0})},n.onUnmute=function(e){e(),n.setState({isAutoPlayDisabled:!1})},n.onPlayerMute=function(){n.refs.player&&n.refs.player.onMute()},n.onPlayerUnmute=function(){n.refs.player&&n.refs.player.onUnmute()},n.onExitFullScreen=function(){n.refs.player&&n.refs.player.onExitFullScreen()},n.state={isAutoPlayDisabled:!1},n.stopUrl=null,n.bufferError={count:0,lastTime:null,lastPlaylist:null,reactionCount:0},n}return C(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.player,r=e.landingMode,n=e.userAccess;(0,v.getUserHasAccess)(n,t.camera.access)?this.fetchPlaylist():this.showMessage(O.ERRORS.ACCESS_FORBIDDEN),r&&(this.initRestartPlayerTimer=setInterval(this.repeat,24e4))},t.prototype.componentDidUpdate=function(e){var t=this.props,r=t.player,n=t.landingMode,a=t.userAccess,o=t.onSetModeSingle;!n&&this.initRestartPlayerTimer&&(clearInterval(this.initRestartPlayerTimer),this.initRestartPlayerTimer=void 0);var i=(0,v.getUserHasAccess)(a,r.camera.access),s=r.camera.camera!==e.player.camera.camera;if(s&&!i)return this.showMessage(O.ERRORS.ACCESS_FORBIDDEN),void this.stopPlayer();r.show&&r.camera.playlist&&s&&this.fetchPlaylist(),r.show&&!e.player.show&&this.fetchPlaylist();var u=r.error&&r.error.error,l=e.player.error&&e.player.error.error;u&&!l&&(this.onExitFullScreen(),u===O.ERRORS.DURATION_LIMIT_DAY&&o())},t.prototype.componentWillUnmount=function(){this.fetch&&i.default.isFunction(this.fetch.cancel)&&this.fetch.cancel(),this.initRestartPlayerTimer&&(clearInterval(this.initRestartPlayerTimer),this.initRestartPlayerTimer=void 0)},t.prototype.render=function(){var e=this.props,t=e.number,r=e.userType,a=e.language,o=e.player,i=e.isMuted,s=e.setIsMuted,u=e.disableAutoFollow,l=e.viewMode,c=e.autoFollow,d=e.wrapperID,f=e.onSetExclude,p=e.currentPlayerNumber,m=e.userId,h=e.width,S=e.height,v=e.playerWidth,E=e.maintenance,g=this.state.isAutoPlayDisabled;return n.default.createElement("span",null,o.error&&o.error.error?n.default.createElement(A.default,{error:o.error.error,message:o.error.errorMessage,onRepeat:this.repeat,userType:r,maintenance:E,camera:o.camera&&o.camera.camera}):n.default.createElement(w.default,{camera:o.camera&&o.camera.camera,onMute:this.onPlayerMute,onUnmute:this.onPlayerUnmute,onExitFullScreen:this.onExitFullScreen}),n.default.createElement(R.default,{ref:"player",language:a,number:t,addPlayerError:this.addPlayerError,autoFollow:c,player:o,isMuted:i,setIsMuted:s,viewMode:l,userType:r,onRepeat:this.repeat,onError:this.onError,onPlay:this.onPlay,wrapperID:d,setExclude:f,isCurrent:t===p,disableAutoFollow:u,width:h,height:S,playerWidth:v,userId:m,onAutoplayDisabled:this.onAutoplayDisabled}),g&&n.default.createElement(b.default,{onClick:this.onClickUnmute}))},t}(n.default.Component);N.propTypes={number:a.default.number.isRequired,landingMode:a.default.number,sendStartStream:a.default.bool,disableSendStartStream:a.default.func.isRequired,player:a.default.shape({camera:a.default.shape().isRequired,playlist:a.default.shape(),error:a.default.shape({error:a.default.string,errorMessage:a.default.string}),show:a.default.bool}).isRequired,currentPlayerNumber:a.default.number.isRequired,isMuted:a.default.bool,isActive:a.default.bool,viewMode:a.default.oneOf(i.default.values(E.VIEW_MODE)).isRequired,autoFollow:a.default.shape({mode:a.default.oneOf(i.default.values(E.AUTO_FOLLOW_MODES)),player:a.default.number}),userAccess:a.default.oneOf(i.default.values(E.USER_TYPES)).isRequired,userType:a.default.oneOf(i.default.values(E.USER_TYPES)).isRequired,excludeList:a.default.arrayOf(a.default.string),savePlaylist:a.default.func.isRequired,language:a.default.string.isRequired,setIsMuted:a.default.func.isRequired,disableAutoFollow:a.default.func.isRequired,wrapperID:a.default.string.isRequired,updateApartments:a.default.func.isRequired,onSetExclude:a.default.func.isRequired,userId:a.default.string.isRequired,width:a.default.number,height:a.default.number,playerWidth:a.default.number,maintenance:a.default.shape(),onPlayerError:a.default.func.isRequired,onSetModeSingle:a.default.func.isRequired},N.defaultProps={landingMode:null,sendStartStream:null,isMuted:!1,isActive:!1,autoFollow:{},excludeList:[],width:void 0,height:void 0,playerWidth:void 0,maintenance:{}},r.default=(0,o.connect)((function(e,t){return{player:e.players[t.number],currentPlayerNumber:e.current.player,autoFollow:e.current.autoFollow,excludeList:e.current.excludeList,language:e.current.language,isMuted:e.config.isMuted,landingMode:e.config.landingMode,sendStartStream:e.config.sendStartStream,viewMode:(0,f.getViewMode)(e),isActive:(0,d.getIsActive)(e),userType:(0,d.getUserType)(e),userAccess:(0,d.getAccess)(e),userId:(0,d.getUserId)(e),width:e.window.width,height:e.window.height}}),(function(e,t){return{savePlaylist:function(r){return e((0,l.setPlaylistToPlayer)(t.number,r))},onSetExclude:function(t){return e((0,l.setExclude)(t))},disableAutoFollow:function(){return e((0,l.setIsAutoFollow)(void 0))},setIsMuted:function(r){return e((0,l.setIsMutedToPlayer)(t.number,r))},disableSendStartStream:function(){return e((0,c.configSetSendStartStream)(!1))},updateApartments:function(){return e((0,u.apartmentsFetch)())},onSetModeSingle:function(){return e((0,l.setModeSingle)())},onPlayerError:function(r){var n=r.error,a=r.errorMessage;return e((0,l.setPlayerErrorByPlayerNumber)({player:t.number,error:n,errorMessage:a}))}}}))(N)},{"../../SlivaxHandler":3,"../../actions/apartments":4,"../../actions/config":7,"../../actions/current":11,"../../balancerMetrics":24,"../../config":114,"../../consts":115,"../../selectors/auth":152,"../../selectors/current":155,"../../utils":168,"../../utils/auth":163,"../../utils/events":165,"../../utils/fetch":166,"../../utils/localStorage":169,"./OfferConstructorPlayer":92,"./UnmuteBlock":96,"./errors":97,"./flowplayer":98,lodash:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0,url:void 0}],94:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=m(e("react")),a=e("react-redux"),o=m(e("prop-types")),i=e("lodash"),s=e("../../consts"),u=e("../../actions/modal"),l=e("../../selectors/auth"),c=e("../../selectors/snapshots"),d=e("../../selectors/current"),f=m(e("../Snapshots/Snapshots")),p=m(e("../Snapshots/Topcams.item"));function m(e){return e&&e.__esModule?e:{default:e}}function h(e){var t=e.snapOnLine,r=e.access,a=e.showAccessError,o=e.data;return e.viewMode!==s.VIEW_MODE.FULLSCREEN?null:n.default.createElement("div",{className:"hover-area bottom"},n.default.createElement("div",{className:"fs-snapshots-wrap"},n.default.createElement(f.default,{snapType:s.SNAP_TYPES.TOP_CAMS,SnapshotItem:p.default,data:o,linesCount:1,snapOnLine:t,access:r,showAccessError:a,isShow:!0})))}h.propTypes={data:o.default.arrayOf(o.default.shape()).isRequired,access:o.default.oneOf((0,i.values)(s.USER_TYPES)).isRequired,showAccessError:o.default.func.isRequired,snapOnLine:o.default.number.isRequired,viewMode:o.default.oneOf((0,i.values)(s.VIEW_MODE)).isRequired},r.default=(0,a.connect)((function(e){return{data:(0,c.getTopCamsData)(e),snapOnLine:e.snapshots.common.snapOnLine,access:(0,l.getAccess)(e),viewMode:(0,d.getViewMode)(e)}}),(function(e){return{showAccessError:function(){return e((0,u.modalShowPremium)())}}}))(h)},{"../../actions/modal":14,"../../consts":115,"../../selectors/auth":152,"../../selectors/current":155,"../../selectors/snapshots":161,"../Snapshots/Snapshots":40,"../Snapshots/Topcams.item":46,lodash:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0}],95:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});a(e("react"));var n=a(e("prop-types"));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){e.temperature,e.isOutside,e.isCelsius;return null}o.propTypes={temperature:n.default.number,isOutside:n.default.bool,isCelsius:n.default.bool},o.defaultProps={temperature:void 0,isOutside:!1,isCelsius:!0},r.default=o},{"prop-types":void 0,react:void 0}],96:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,a=e("react"),o=(n=a)&&n.__esModule?n:{default:n};r.default=function(){return o.default.createElement("div",{className:"unmute-block"},o.default.createElement("button",{className:"btn btn-unmute",type:"button"},o.default.createElement("i",{className:"icon-unmute"}),o.default.createElement("span",{className:"unmute-text"},"Click to unmute")))}},{react:void 0}],97:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ERRORS=void 0;var n=e("react"),a=h(n),o=h(e("prop-types")),i=h(e("i18next")),s=e("../../utils/maintenance"),u=e("../../consts"),l=e("react-redux"),c=e("../../selectors/auth"),d=e("rlc-components"),f=e("../../utils"),p=e("../../selectors/config"),m=e("../../utils/cookie");function h(e){return e&&e.__esModule?e:{default:e}}var S=function(e){var t=e.repeat,r=e.camera,o=e.imgUri,s=e.limitOffer,l=(0,n.useCallback)((0,f.getOnClickJoinWithReason)({reason:u.GO_TO_JOIN_REASONS.DURATION_LIMIT,camera:r}),[r]),c=(0,n.useCallback)((function(){(0,m.setJoinReason)({reason:u.GO_TO_JOIN_REASONS.DURATION_LIMIT,camera:r})}),[r]);return a.default.createElement("div",{className:"fp-message"},a.default.createElement("div",{className:"fp-message-container duration-limit-guest"},s&&s.blocks&&s.blocks.length?a.default.createElement(d.MainOffer,{id:s.uid,blocks:s.blocks,type:s.type,position:s.position,border:s.color,onClose:t,onReason:c}):a.default.createElement(n.Fragment,null,a.default.createElement("i",{className:"icon icon_white"}),a.default.createElement("h1",null,i.default.t("errors.duration-limit-guest.title")),a.default.createElement("a",{className:"btn btn-grey",title:i.default.t("buttons.continue-watching"),onClick:t},i.default.t("buttons.continue-watching")),a.default.createElement("a",{onClick:l,href:u.JOIN_URI,className:"btn btn-premium",title:i.default.t("buttons.buy-membership")},i.default.t("buttons.buy-membership")))),a.default.createElement(d.ProgressiveImage,{src:o,className:"fp-message-background",imgClassName:"fp-message-background-image"}))};S.propTypes={repeat:o.default.func.isRequired,camera:o.default.string.isRequired,imgUri:o.default.string,limitOffer:o.default.shape()},S.defaultProps={imgUri:void 0,limitOffer:void 0};var v=(0,l.connect)((function(e,t){var r=(0,p.getLimitOfferInPlayer)(e),n=t&&t.camera,a=(0,c.getTopCamsSnapURI)(e);return{imgUri:n?a(n):null,limitOffer:r}}))(S),E=function(e){var t=e.message;return a.default.createElement("div",{className:"fp-message"},a.default.createElement("div",{className:"fp-message-container"},a.default.createElement("h2",null,i.default.t(t))))};E.propTypes={message:o.default.string.isRequired};var g=function(e){var t=e.message;return a.default.createElement("div",{className:"fp-message"},a.default.createElement("div",{className:"fp-message-container"},a.default.createElement("i",{className:"icon connection_fail"}),a.default.createElement("h2",null,i.default.t(t))))};g.propTypes={message:o.default.string.isRequired};var y=function(e){var t=e.message;return a.default.createElement("div",{className:"fp-message"},a.default.createElement("div",{className:"fp-message-container"},a.default.createElement("i",{className:"icon"}),a.default.createElement("h2",null,i.default.t(t))))};y.propTypes={message:o.default.string.isRequired};var _=function(e){var t=e.message;return a.default.createElement("div",{className:"fp-message"},a.default.createElement("div",{className:"fp-message-container"},a.default.createElement("i",{className:"icon member_lock"}),a.default.createElement("h2",null,i.default.t(t))))};_.propTypes={message:o.default.string.isRequired};var T=function(e){var t=e.camera,r=e.imgUri,o=e.dailyLimitOffer,s=(0,n.useCallback)((0,f.getOnClickJoinWithReason)({reason:u.GO_TO_JOIN_REASONS.DURATION_LIMIT,camera:t}),[t]),l=(0,n.useCallback)((function(){(0,m.setJoinReason)({reason:u.GO_TO_JOIN_REASONS.DURATION_LIMIT,camera:t})}),[t]);return a.default.createElement("div",{className:"fp-message"},a.default.createElement("div",{className:"fp-message-container duration-limit-guest-day"},o&&o.blocks&&o.blocks.length?a.default.createElement(d.MainOffer,{id:o.uid,blocks:o.blocks,type:o.type,position:o.position,border:o.color,onReason:l}):a.default.createElement(n.Fragment,null,a.default.createElement("i",{className:"icon icon_white"}),a.default.createElement("h1",null,i.default.t("errors.duration-limit-guest-day.title")),a.default.createElement("a",{onClick:s,href:u.JOIN_URI,className:"btn btn-premium",title:i.default.t("buttons.buy-membership")},i.default.t("buttons.buy-membership")))),r?a.default.createElement(d.ProgressiveImage,{src:r,className:"fp-message-background",imgClassName:"fp-message-background-image"}):null)};T.propTypes={camera:o.default.string.isRequired,imgUri:o.default.string,dailyLimitOffer:o.default.shape()},T.defaultProps={imgUri:void 0,dailyLimitOffer:void 0};var O=(0,l.connect)((function(e,t){var r=(0,p.getDailyLimitOfferInPlayer)(e),n=t&&t.camera,a=(0,c.getTopCamsSnapURI)(e);return{dailyLimitOffer:r,imgUri:n?a(n):null}}))(T),A=function(){return a.default.createElement("div",{className:"fp-message"},a.default.createElement("div",{className:"fp-message-container safari_flash"},a.default.createElement("i",{className:"icon safari_flash"}),a.default.createElement("h1",{dangerouslySetInnerHTML:{__html:i.default.t("errors.safari_flash.title")}}),a.default.createElement("a",{href:"https://helpx.adobe.com/flash-player/kb/enabling-flash-player-safari.html",className:"btn btn-grey",title:i.default.t("buttons.go_to_adobe"),target:"_blank",rel:"noopener noreferrer"},i.default.t("buttons.go_to_adobe"))))},R=function(e){var t=e.repeat;return a.default.createElement("div",{className:"fp-message"},a.default.createElement("div",{className:"fp-message-container connection_fail"},a.default.createElement("i",{className:"icon connection_fail"}),a.default.createElement("h1",{dangerouslySetInnerHTML:{__html:i.default.t("errors.connection_fail.title")}}),a.default.createElement("a",{className:"btn btn-grey",title:i.default.t("buttons.try_again"),onClick:t},i.default.t("buttons.try_again"))))};function b(e){var t=e.userType,r=e.camera,o=e.imgUri,s=(0,n.useCallback)((0,f.getOnClickJoinWithReason)({reason:u.GO_TO_JOIN_REASONS.FORBIDDEN_CAMERA,camera:r}),[r]);return t===u.USER_TYPES.GUEST?a.default.createElement("div",{className:"fp-message fp-message_access-forbidden"},a.default.createElement("div",{className:"fp-message-container access-forbidden"},a.default.createElement("i",{className:"icon member_lock-white"}),a.default.createElement("h1",null,i.default.t("errors.access_forbidden.guest.title")),a.default.createElement("p",null,i.default.t("errors.access_forbidden.guest.body")),a.default.createElement("a",{className:"btn btn-premium",href:"https://join."+u.DOMAIN,onClick:s},i.default.t("errors.access_forbidden.guest.button"))),a.default.createElement(d.ProgressiveImage,{src:o,className:"fp-message-background",imgClassName:"fp-message-background-image"})):a.default.createElement("div",{className:"fp-message fp-message_access-forbidden"},a.default.createElement("div",{className:"fp-message-container access_forbidden"},a.default.createElement("i",{className:"icon member_lock-white"}),a.default.createElement("h1",null,i.default.t("errors.access_forbidden.standard.title")),a.default.createElement("a",{className:"btn btn-premium",href:"https://join."+u.DOMAIN,onClick:s},i.default.t("errors.access_forbidden.standard.button"))),a.default.createElement(d.ProgressiveImage,{src:o,className:"fp-message-background",imgClassName:"fp-message-background-image"}))}R.propTypes={repeat:o.default.func.isRequired},b.propTypes={userType:o.default.oneOf(Object.values(u.USER_TYPES)).isRequired,camera:o.default.string.isRequired,imgUri:o.default.string},b.defaultProps={imgUri:null};var w=(0,l.connect)((function(e,t){var r=t&&t.camera,n=(0,c.getTopCamsSnapURI)(e);return{imgUri:r?n(r):null}}))(b);function P(e){var t=e.maintenance,r=t.reason,n=t.stamp,o=t.ETA,u=t.status;return a.default.createElement("div",{className:"fp-message"},a.default.createElement("div",{className:"fp-message-container um"},a.default.createElement("i",{className:"icon under_maintenance"}),a.default.createElement("h1",null,i.default.t("apartments.status.maintenance")),a.default.createElement("p",null,a.default.createElement("strong",null,(0,s.handleMaintenanceReason)(r,"maintenance"===u)),a.default.createElement("br",null),a.default.createElement("span",{dangerouslySetInnerHTML:{__html:(0,s.handleMaintenanceEstimateTime)(n,o)}}))))}P.propTypes={maintenance:o.default.shape({reason:o.default.string,start:o.default.number,ETA:o.default.number,stamp:o.default.number,status:o.default.string}).isRequired};var C=function(){return a.default.createElement("div",{className:"fp-message"},a.default.createElement("div",{className:"fp-message-container cookies_disabled"},a.default.createElement("i",{className:"icon cookies_disabled"}),a.default.createElement("h1",{dangerouslySetInnerHTML:{__html:i.default.t("errors.cookies_disabled.title")}}),a.default.createElement("p",{dangerouslySetInnerHTML:{__html:i.default.t("errors.cookies_disabled.text")}})))};function M(e){var t=e.camera,r=e.imgUri;return a.default.createElement("div",{className:"fp-message fp-message_access-forbidden"},a.default.createElement("div",{className:"fp-message-container access-forbidden joystick"},a.default.createElement("i",{className:"icon member_lock-white"}),a.default.createElement("h1",{dangerouslySetInnerHTML:{__html:i.default.t("errors.access_forbidden.guest_joystick.title")}}),a.default.createElement("p",{dangerouslySetInnerHTML:{__html:i.default.t("errors.access_forbidden.guest_joystick.body")}}),a.default.createElement("a",{className:"btn btn-premium",href:"https://join."+u.DOMAIN,onClick:(0,f.getOnClickJoinWithReason)({reason:u.GO_TO_JOIN_REASONS.JOYSTICK,camera:t}),title:i.default.t("errors.access_forbidden.guest_joystick.button")},i.default.t("errors.access_forbidden.guest_joystick.button"))),a.default.createElement(d.ProgressiveImage,{src:r,className:"fp-message-background",imgClassName:"fp-message-background-image"}))}M.propTypes={camera:o.default.string.isRequired,imgUri:o.default.string},M.defaultProps={imgUri:null};var I=r.ERRORS={DURATION_LIMIT:"ErrorDurationLimit",DURATION_LIMIT_DAY:"ErrorDurationLimitDay",SAFARI_FLASH:"ErrorSafariFlash",CONNECTION_FAILED:"ErrorConnectionFailed",CUSTOM_MESSAGE:"ErrorCustomMessage",ACCESS_FORBIDDEN:"ErrorAccessForbidden",COOKIES_DISABLED:"ErrorCookiesDisabled",UNDER_MAINTENANCE:"ErrorUnderMaintenance",ISSUE_CUSTOM_MESSAGE:"ErrorIssueCustomMessage",ACCESS_FORBIDDEN_CUSTOM_MESSAGE:"ErrorAccessForbiddenCustomMessage",PLAY_CUSTOM_MESSAGE:"ErrorPlayCustomMessage",JOYSTICK:"ErrorJoystick"};function N(e){var t=e.error,r=e.onRepeat,n=e.message,o=e.userType,i=e.maintenance,s=e.camera;if(!t)return null;switch(t){case I.DURATION_LIMIT:return a.default.createElement(v,{repeat:r,camera:s});case I.DURATION_LIMIT_DAY:return a.default.createElement(O,{camera:s});case I.SAFARI_FLASH:return a.default.createElement(A,null);case I.CONNECTION_FAILED:return a.default.createElement(R,{repeat:r});case I.CUSTOM_MESSAGE:return a.default.createElement(E,{message:n});case I.ACCESS_FORBIDDEN:return a.default.createElement(w,{userType:o,camera:s});case I.UNDER_MAINTENANCE:return a.default.createElement(P,{maintenance:i});case I.COOKIES_DISABLED:return a.default.createElement(C,null);case I.ISSUE_CUSTOM_MESSAGE:return a.default.createElement(g,{message:n});case I.PLAY_CUSTOM_MESSAGE:return a.default.createElement(y,{message:n});case I.ACCESS_FORBIDDEN_CUSTOM_MESSAGE:return a.default.createElement(_,{message:n});case I.JOYSTICK:return a.default.createElement(M,{camera:s});default:return window.Raven&&window.Raven.captureMessage("Unknown error in player error handler",{extra:{error:t}}),null}}N.propTypes={error:o.default.string.isRequired,message:o.default.string,userType:o.default.string,maintenance:o.default.shape({}),onRepeat:o.default.func,camera:o.default.string},N.defaultProps={message:null,userType:null,maintenance:null,onRepeat:null,camera:null},r.default=N},{"../../consts":115,"../../selectors/auth":152,"../../selectors/config":154,"../../utils":168,"../../utils/cookie":164,"../../utils/maintenance":171,i18next:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0,"rlc-components":void 0}],98:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=e("lodash"),o=S(e("react")),i=S(e("prop-types")),s=S(e("i18next")),u=S(e("flowplayer")),l=e("../../consts"),c=e("../../utils"),d=e("../../SlivaxHandler"),f=S(d),p=S(e("../../balancerMetrics")),m=S(e("./BraileWrapper")),h=e("./errors");function S(e){return e&&e.__esModule?e:{default:e}}function v(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var a=r[n],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(e,t))}var _=12e4,T=1e4,O=2e4,A=30,R=10,b='<div class="waiting"><em></em><em></em><em></em></div>    <a class="unload"></a>    <p class="speed"></p>    <div class="controls">    <a class="play"></a>    <div class="timeline">        <div class="buffer"></div>        <div class="progress"></div>    </div>    <div class="timeline-tooltip fp-tooltip"></div>    <div class="volume">        <a class="mute"></a><div class="volumeslider">            <div class="volumelevel"></div>        </div>    </div>    <a class="replay" title="RLC Replay. 24-Hour Playback"></a>    <div class="right_block">        <i class="live"></i>        <a class="fullscreen"></a>    </div>     </div>    <div class="time">    <em class="elapsed">00:00</em>    <em class="remaining"></em>    <em class="duration">00:00</em>    </div>    <div class="message"><h2></h2><p></p></div>',w={replay:"go_to_replay"};function P(e){var t=e?e.getBoundingClientRect():{};return t.width>0&&t.height>0&&Number(window.getComputedStyle(e).opacity)>.5}function C(e){if(!e)return{};var t=e.getBoundingClientRect(),r=window.getComputedStyle(e);return{width:t.width,height:t.height,opacity:r.opacity,display:r.display}}var M=function(e){function t(){var r,i;E(this,t);for(var m=arguments.length,S=Array(m),y=0;y<m;y++)S[y]=arguments[y];return r=i=g(this,e.call.apply(e,[this].concat(S))),i.beforePlayTime=0,i.connectionTime=0,i.bufferTime=0,i.firstBuffered=!0,i.bufferTimeouts={warning:null,error:null},i.isReady=!1,i.isInitMute=!1,i.isPictureInPicture=!1,i.braileInterval=void 0,i.braileWrapperID="br_wrp",i.braileDisabled=!1,i.hiddenBraileComponentDisabled=!0,i.hiddenUserIdComponentDisabled=!0,i.differentUserIdsDisabled=!0,i.pictureInPictureDisabled=!0,i.braileComponent=o.default.createRef(),i.debounceResetBraileDisabledFlags=(0,a.debounce)((function(){i.hiddenBraileComponentDisabled=!1,i.hiddenUserIdComponentDisabled=!1,i.differentUserIdsDisabled=!1,i.pictureInPictureDisabled=!1}),_),i.handleLeavePictureInPicture=function(){i.isPictureInPicture=!1},i.handleEnterPictureInPicture=function(){i.isPictureInPicture=!0},i.checkBraile=function(){var e=i.props,t=e.wrapperID,r=e.userId,a=e.player.camera,o=a.access,s=a.camera,u=a.name,l=document.querySelector("#"+t+" #"+t+"_"+i.braileWrapperID),c=document.querySelector("#"+t+" .IdLabel"),d=l&&l.querySelector("canvas");l&&d&&c?c.style="":(i.stop(),i.braileDisabled||(i.braileDisabled=!0,f.default.pushEvent("braileDisabled",{userId:r,camera:{access:o,camera:s,name:u},datetime:(new Date).toISOString()}))),!i.pictureInPictureDisabled&&i.isPictureInPicture&&(i.pictureInPictureDisabled=!0,f.default.pushEvent("enterPictureInPicture",{userId:r,camera:{access:o,camera:s,name:u},datetime:(new Date).toISOString()})),i.hiddenBraileComponentDisabled||P(d)||i.braileComponent.current&&!i.braileComponent.current.isShow||(i.hiddenBraileComponentDisabled=!0,f.default.pushEvent("hiddenBraileComponent",n({userId:r,camera:{access:o,camera:s,name:u},datetime:(new Date).toISOString()},C(d)))),i.hiddenUserIdComponentDisabled||P(c)||(i.hiddenUserIdComponentDisabled=!0,f.default.pushEvent("hiddenUserIdComponent",n({userId:r,camera:{access:o,camera:s,name:u},datetime:(new Date).toISOString()},C(c)))),i.differentUserIdsDisabled||c.textContent.trim()===r||(i.differentUserIdsDisabled=!0,f.default.pushEvent("differentUserIds",{userId:r,camera:{access:o,camera:s,name:u},datetime:(new Date).toISOString(),componentUserId:c.textContent.trim()}))},i.stop=function(){i.player.stop(),i.clearTimeouts()},i.onBufferTimeoutError=function(){(0,i.props.onError)(l.PLAYER_ERRORS.BUFFER_TIMEOUT)},i.onBufferTimeoutWarning=function(){(0,i.props.onError)(l.PLAYER_ERRORS.BUFFER_TIMEOUT_WARNING)},i.startTimeouts=function(){i.clearTimeouts(),i.bufferTimeouts.warning=setTimeout(i.onBufferTimeoutWarning,T),i.bufferTimeouts.error=setTimeout(i.onBufferTimeoutError,O)},i.clearTimeouts=function(){clearTimeout(i.bufferTimeouts.warning),clearTimeout(i.bufferTimeouts.error)},i.handlePlayerError=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.code!==l.PLAYER_ERRORS.AUTOPLAY_DISABLED){var n=i.props,o=n.player.playlist,s=n.setExclude,u=n.onError,p=n.addPlayerError,m=n.onRepeat,S=Number(r.code),v=void 0;switch(p(r.type||r.message,r),S){case l.PLAYER_ERRORS.CONNECTION_PROBLEM:case l.PLAYER_ERRORS.PLAYLIST:return void(i.countReconectRejected<2?(i.countReconectRejected+=1,m()):v=h.ERRORS.CONNECTION_FAILED);case l.PLAYER_ERRORS.SAFARI_FLASH:return void u(l.PLAYER_ERRORS.SAFARI_FLASH);case l.PLAYER_ERRORS.NET_CONNECTION_FAILED:case l.PLAYER_ERRORS.TIMEOUT:case l.PLAYER_ERRORS.STRANGE_1:case l.PLAYER_ERRORS.STRANGE_2:if(f.default.pushPlayer("connection.failed."+r.code,{edge:(0,c.getEdgeFromUrl)(o),time:0},d.EVENT_LEVELS.REGULAR),i.countReconect<10)return i.countReconect+=1,s(o.netConnectionUrl),void m();v=t.conf.errors[S];break;case l.PLAYER_ERRORS.CHUNKLIST:v=(0,a.get)(r,"message","");break;case l.PLAYER_ERRORS.MEDIA_NOT_DECODED:case l.PLAYER_ERRORS.SECURITY:m();break;default:v=t.conf.errors[S]}v&&(u(S,v,t),i.stop())}else{var E=i.props.onAutoplayDisabled;E(i.onUnmute)}},i.initPlayer=function(){var e=i.props,t=e.number,r=e.userType,n=e.onRepeat,a=e.isCurrent;i.countReconectRejected=0,i.countReconect=0,f.default.pushMain("player.init."+t,{},d.EVENT_LEVELS.REGULAR);var o=r===l.USER_TYPES.GUEST?'<img class="live icon-live" src="/static/build/de854f30/styles/img/live.svg">'+b:b;i.player=(0,u.default)(i.refs.player,{poster:!1,timeOut:1e4,rtmpt:!1,bufferTime:3,embed:!1,keyboard:!1,autoplay:!0,key:"#$cad8307b5ecf1baf1d6",scrubber:!1,bgcolor:"#000000",scale:"scale",framePerSecond:a?A:R,clip:{live:!0},onBeforeResume:n,template:o,clickTriggers:w,clickToUnMute:!0,mutedAutoplay:!0}).on("ready",(function(e,r){var n=i.props.player,a=n.playlist,o=n.camera,s=i.props,u=s.player,l=s.isMuted;i.clearTimeouts(),i.bufferTime=Date.now(),i.isReady=!0,i.firstBuffered?(f.default.pushPlayer("player.buffered."+t,{time:Date.now()-i.beforePlayTime,edge:(0,c.getEdgeFromUrl)(a),camera:o.camera},d.EVENT_LEVELS.REGULAR),p.default.push({type:"buffered",duration:Date.now()-i.beforePlayTime,camera:o.camera,edge:(0,c.getEdgeFromUrl)(a)}),i.firstBuffered=!1):(f.default.pushPlayer("player.buffer_full."+t,{time:Date.now()-i.waitingTime,edge:(0,c.getEdgeFromUrl)(a),camera:o.camera},d.EVENT_LEVELS.DEBUG),p.default.push({type:"buffer_full",duration:Date.now()-i.waitingTime,camera:o.camera,edge:(0,c.getEdgeFromUrl)(a)})),(l||u.isMutedPlayer||i.isInitMute)&&r.volume(0),i.countReconectRejected=0,i.countReconect=0})).on("hls_event",(function(e,t,r){var n=i.props.player,a=n.playlist,o=n.camera;f.default.pushPlayer(r.code,{edge:(0,c.getEdgeFromUrl)(a),camera:o.camera,url:r.url},d.EVENT_LEVELS.DEBUG),r.code.indexOf("pre.media")>=0&&(i.mediaTime=Date.now()),r.code.indexOf("pre.playlist")>=0&&(i.playlistTime=Date.now()),r.code.indexOf("pre.chunklist")>=0&&(i.chunklistTime=Date.now()),r.code.indexOf("post.media")>=0&&new Date(r.date).getTime()/1e3>=Math.floor(i.mediaTime/1e3)&&p.default.push({type:"media.time",duration:Date.now()-i.mediaTime,camera:o.camera,edge:(0,c.getEdgeFromUrl)(a)}),r.code.indexOf("post.playlist")>=0&&p.default.push({type:"playlist.time",duration:Date.now()-i.playlistTime,camera:o.camera,edge:(0,c.getEdgeFromUrl)(a)}),r.code.indexOf("post.chunklist")>=0&&p.default.push({type:"chunklist.time",duration:Date.now()-i.chunklistTime,camera:o.camera,edge:(0,c.getEdgeFromUrl)(a)})})).on("hls_error",(function(e,t,r){console.log("hls_error",r),i.handlePlayerError(e,t,r)})).on("error",i.handlePlayerError).on("rejected",(function(e,t,r){var n=(0,i.props.onError)(l.PLAYER_ERRORS.MESSAGE,r);n&&i.player.trigger("info",[i.player,s.default.t(n)])})).on("pause",(function(e,r){var n=i.props,a=n.viewMode,o=n.autoFollow,s=n.disableAutoFollow;a!==l.VIEW_MODE.FULLSCREEN&&o.player===t&&s(),r.ready&&r.playing&&r.stop()})).on("volume",(function(e,t,r){i.props.isMuted||(i.volume=r)})).on("mute",(function(e,t,r,n){var a=i.props.setIsMuted;n&&a(r)})).on("buffer_empty",(function(){var e=i.props.onError;console.log("buffer_empty"),e(l.PLAYER_ERRORS.BUFFER_EMPTY)})).on("connect",(function(){var e=i.props,r=e.onPlay,n=e.player,a=n.playlist,o=n.camera;r(),i.startTimeouts(),i.connectionTime=Date.now(),i.firstBuffered=!0,f.default.pushMain("player.connect."+t,{edge:(0,c.getEdgeFromUrl)(a),camera:o.camera},d.EVENT_LEVELS.REGULAR)})).on("disconnect",(function(){var e=i.props.player,t=e.playlist,r=e.camera;f.default.pushPlayer("disconnect",{edge:(0,c.getEdgeFromUrl)(t),time:0,camera:r.camera},d.EVENT_LEVELS.ERROR),i.isDisconnected=!0,n()})).on("unpublish_notify",(function(){var e=i.props.player,r=e.playlist,a=e.camera;f.default.pushPlayer("unpublish."+t,{edge:(0,c.getEdgeFromUrl)(r),camera:a.camera},d.EVENT_LEVELS.ERROR),i.isDisconnected=!0,n()})).on("startload",(function(){i.removeBeforeClasses()})).on("go_to_replay",(function(){var e=i.props,t=e.language,r=e.player.camera;window.open("//replay."+l.DOMAIN+"/"+t+"/view/"+r.camera+"?from=player","_blank")})),n()},i.handlePlay=function(){var e=i.props,t=e.number,r=e.player,n=r.playlist,a=r.camera,o=e.wrapperID;i.player.error=!1;var s=document.querySelector("#"+o+" .flowplayer");if(s&&s.classList.remove("is-error"),"http"!==n.provider){i.player.black_poster&&i.player.poster(!1),f.default.pushMain("player.beforeplay."+t,{edge:(0,c.getEdgeFromUrl)(n),camera:a.camera},d.EVENT_LEVELS.REGULAR),i.beforePlayTime=Date.now();var u=n.guest_screen,l=v(n,["guest_screen"]);i.player.play({sources:[l],live:!0,guest_screen:u})}else i.player.poster(!0,n.url)},i.removeBeforeClasses=function(){var e=i.props.wrapperID;try{document.querySelector("#"+e+" .fp-ui").classList.remove("before_swf_load")}catch(e){}},i.onUnmute=function(){i.isReady?i.player.mute(!1):i.isInitMute=!1},i.onMute=function(){i.isReady?i.player.mute(!0):i.isInitMute=!0},i.onExitFullScreen=function(){i.player.isFullscreen&&i.player.fullscreen(!1)},g(i,r)}return y(t,e),t.prototype.componentDidMount=function(){var e=this;this.braileDisabled=!1,this.braileInterval=setInterval((function(){e.checkBraile()}),5e3),this.initPlayer(),this.debounceResetBraileDisabledFlags(),document.addEventListener("enterpictureinpicture",this.handleEnterPictureInPicture,{passive:!0}),document.addEventListener("leavepictureinpicture",this.handleLeavePictureInPicture,{passive:!0})},t.prototype.componentDidUpdate=function(e){var t=this.props,r=t.player,n=r.playlist,a=r.camera,o=t.isMuted,i=t.isCurrent,s=t.width,u=t.height,l=t.viewMode,c=t.playerWidth,d=e.player.playlist.stamp;n&&(n.stamp&&!d||n.stamp!==e.player.playlist.stamp||"http"===n.provider&&n.url!==e.player.playlist.url)&&this.handlePlay(),o!==e.isMuted&&o!==this.player.muted&&(this.player.mute(o),this.player.volume(o?0:1)),i&&(window.player=this.player),(e.width&&s!==e.width||e.height&&u!==e.height||e.playerWidth&&c!==e.playerWidth||l!==e.viewMode)&&setTimeout(this.player.trigger,100,"resize"),e.player.camera.camera!==a.camera&&this.debounceResetBraileDisabledFlags()},t.prototype.componentWillUnmount=function(){clearInterval(this.braileInterval),this.stop(),document.removeEventListener("enterpictureinpicture",this.handleEnterPictureInPicture),document.removeEventListener("leavepictureinpicture",this.handleLeavePictureInPicture)},t.prototype.render=function(){var e=this.props,t=e.userId,r=e.wrapperID;return o.default.createElement("div",{ref:"player",className:"no-time black play-button"},o.default.createElement(m.default,{ref:this.braileComponent,uid:t,id:r+"_"+this.braileWrapperID}),t&&o.default.createElement("div",{className:"IdLabel"},t))},t}(o.default.Component);M.propTypes={onAutoplayDisabled:i.default.func.isRequired,userType:i.default.oneOf((0,a.values)(l.USER_TYPES)).isRequired,userId:i.default.string.isRequired,language:i.default.string,number:i.default.number.isRequired,addPlayerError:i.default.func,player:i.default.shape({camera:i.default.shape().isRequired,playlist:i.default.shape(),isMutedPlayer:i.default.bool}).isRequired,isMuted:i.default.bool,viewMode:i.default.oneOf((0,a.values)(l.VIEW_MODE)).isRequired,autoFollow:i.default.shape({mode:i.default.oneOf((0,a.values)(l.AUTO_FOLLOW_MODES)),player:i.default.number}),setExclude:i.default.func.isRequired,isCurrent:i.default.bool.isRequired,wrapperID:i.default.string.isRequired,onRepeat:i.default.func.isRequired,onError:i.default.func.isRequired,disableAutoFollow:i.default.func.isRequired,setIsMuted:i.default.func.isRequired,onPlay:i.default.func.isRequired,height:i.default.number,width:i.default.number,playerWidth:i.default.number},M.defaultProps={language:"en",addPlayerError:function(){},isMuted:!1,autoFollow:null,height:void 0,width:void 0,playerWidth:void 0},r.default=M},{"../../SlivaxHandler":3,"../../balancerMetrics":24,"../../consts":115,"../../utils":168,"./BraileWrapper":91,"./errors":97,flowplayer:void 0,i18next:void 0,lodash:void 0,"prop-types":void 0,react:void 0}],99:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=E(e("react")),i=E(e("prop-types")),s=e("react-redux"),u=E(e("classnames")),l=E(e("lodash")),c=e("../../consts"),d=e("../../config"),f=e("../../actions/current"),p=e("../../selectors/auth"),m=e("../../selectors/apartments"),h=E(e("./Temperature")),S=E(e("./landing.scenes")),v=E(e("./PlayerComponent"));function E(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var a=r[n],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(e,t))}var T=function(e){function t(){var r,n;g(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return r=n=y(this,e.call.apply(e,[this].concat(o))),n.fullscreen=function(){var e=n.props.landingMode;try{document.body.classList.add("body-fix"),e===c.LANDING_MODES.SCENES&&d.IS_NEW_PLAYER||document.querySelector("#"+n.id+" .fp-player").classList.add("full_screen")}catch(e){window.Raven&&window.Raven.captureException(e)}},n.cancelFullscreen=function(){try{document.body.classList.remove("body-fix");var e=document.querySelector("#"+n.id+" .fp-player");e&&e.classList.remove("full_screen")}catch(e){window.Raven&&window.Raven.captureException(e)}},y(n,r)}return _(t,e),t.prototype.componentDidUpdate=function(e){var t=this.props,r=t.viewMode,n=t.currentPlayer,a=t.number;e.viewMode!==r&&n===a&&(r===c.VIEW_MODE.FULLSCREEN?this.fullscreen():r!==c.VIEW_MODE.FULLSCREEN&&e.viewMode===c.VIEW_MODE.FULLSCREEN&&this.cancelFullscreen())},t.prototype.render=function(){var e,r,n,a=this.props,i=a.viewMode,s=a.number,f=a.currentPlayer,p=a.handlerClick,m=a.autoFollow,E=a.landingMode,g=a.weather,y=a.isOutside,_=a.isCelsius,T=a.maintenance,O=l.default.includes(t.MULTI_PLAYER_VIEW_MODES,i),A=s===f;return o.default.createElement("div",{id:this.id,onClick:p,className:(0,u.default)("video-img",(e={active:O&&A,hidden:i===c.VIEW_MODE.FULLSCREEN&&!A},r="landing-mode"+E,n=E,r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e))},g&&o.default.createElement(h.default,{temperature:g.temp,isOutside:y,isCelsius:_}),m.player===s&&o.default.createElement("div",{className:(0,u.default)({"icon-auto":m.mode===c.AUTO_FOLLOW_MODES.ALL,"icon-auto_apt":m.mode===c.AUTO_FOLLOW_MODES.APARTMENT})}),E===c.LANDING_MODES.SCENES&&d.IS_NEW_PLAYER?o.default.createElement(S.default,null):o.default.createElement(v.default,{number:s,wrapperID:this.id,maintenance:T,isCurrent:A}))},a(t,[{key:"id",get:function(){return"player_"+this.props.number}}]),t}(o.default.Component);T.propTypes={landingMode:i.default.number,number:i.default.number.isRequired,currentPlayer:i.default.number.isRequired,autoFollow:i.default.shape({mode:i.default.oneOf(l.default.values(c.AUTO_FOLLOW_MODES)),player:i.default.number}),handlerClick:i.default.func.isRequired,viewMode:i.default.oneOf(l.default.values(c.VIEW_MODE)).isRequired,weather:i.default.shape(),isOutside:i.default.bool,isCelsius:i.default.bool,maintenance:i.default.shape()},T.defaultProps={landingMode:null,autoFollow:{},weather:{},isOutside:!1,isCelsius:!0,maintenance:{}},T.MULTI_PLAYER_VIEW_MODES=[c.VIEW_MODE.TWO_HORIZONTAL,c.VIEW_MODE.TWO_VERTICAL,c.VIEW_MODE.FOUR],r.default=(0,s.connect)((function(e,t){return{viewMode:e.current.viewMode,currentPlayer:e.current.player,landingMode:e.config.landingMode,autoFollow:e.current.isAutoFollow,camera:e.players[t.number].camera,apartments:e.apartments.data,number:t.number,getApartment:(0,m.getApartmentByCameraFactory)(e),geoCountry:(0,p.getGeoCountry)(e)}}),(function(e,t){return{handlerClick:function(){return e((0,f.setCurrentPlayer)(t.number))}}}),(function(e,t){var r=e.viewMode,a=e.currentPlayer,o=e.landingMode,i=e.autoFollow,s=e.number,u=e.getApartment,l=e.camera,c=e.geoCountry,d=t.handlerClick,f=u(l)||{};return{viewMode:r,currentPlayer:a,landingMode:o,autoFollow:i,number:s,handlerClick:d,weather:f.weather,maintenance:n({status:f.status},f.maintenance),isOutside:l.outside,isCelsius:"US"!==c}}))(T)},{"../../actions/current":11,"../../config":114,"../../consts":115,"../../selectors/apartments":151,"../../selectors/auth":152,"./PlayerComponent":93,"./Temperature":95,"./landing.scenes":100,classnames:void 0,lodash:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0}],100:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=p(e("react")),a=p(e("prop-types")),o=e("react-redux"),i=e("../../../actions/config"),s=e("../../../actions/landing"),u=e("../../../selectors/auth"),l=p(e("../../../utils/events")),c=e("../../../consts"),d=p(e("../videojs.player")),f=p(e("./previews"));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var a=r[n],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(e,t))}var v="//hls.static."+c.DOMAIN+"/hola/static/resources",E=function(e){function t(){var r,n;m(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return r=n=h(this,e.call.apply(e,[this].concat(o))),n.firstPlay=!0,n.state={isShowPreviews:!1},n.handlePlay=function(){n.firstPlay&&(n.firstPlay=!1,l.default.initPlayer())},n.handleStop=function(e){var t=n.props.onEnded,r=e.target.children[0];if(0!==r.currentTime)return r.duration-r.currentTime>=.3?(r.pause(),void n.setState({isShowPreviews:!0})):void t(e.target.player)},n.handleEnd=function(e){(0,n.props.onEnded)(e.target.player)},n.handleSelectScene=function(e){(0,n.props.onSelectScene)(e),n.setState({isShowPreviews:!1}),l.default.clickPlay(e)},h(n,r)}return S(t,e),t.prototype.render=function(){var e=this,t=this.props,r=t.scene,a=t.playlistBase,o=t.scenes,i=t.windowWidth,s=t.userId,u=t.isMuted,l=t.unmute,c=this.state.isShowPreviews;if(!a||!r)return null;var p=a&&r&&(v+"/"+a).replace("camera",r.camera).replace("ts",r.ts);return n.default.createElement("div",{ref:function(t){e.node=t}},c?n.default.createElement(f.default,{scenes:o,windowWidth:i,onSelectScene:this.handleSelectScene}):n.default.createElement(d.default,{player:{playlist:{src:p},camera:r.camera},onPlay:this.handlePlay,onEnded:this.handleEnd,onStop:this.handleStop,unmute:l,number:0,userId:s,isMuted:u,isTryRepeat:!1}))},t}(n.default.Component);E.propTypes={onSelectScene:a.default.func.isRequired,onEnded:a.default.func.isRequired,unmute:a.default.func,scene:a.default.shape(),playlistBase:a.default.string,scenes:a.default.shape(),windowWidth:a.default.number,userId:a.default.string.isRequired,isMuted:a.default.bool},E.defaultProps={unmute:function(){},scene:null,playlistBase:"",scenes:null,isMuted:!1,windowWidth:null},r.default=(0,o.connect)((function(e){return{scenes:e.landing.data,scene:e.landing.currentScene,playlistBase:e.landing.data.playlist,windowWidth:e.window.width,userId:(0,u.getUserId)(e),isMuted:e.config.isMuted}}),(function(e){return{onSelectScene:function(t){return e((0,s.setCurrentScene)(t))},onEnded:function(t){try{t.tech().reset()}catch(e){window.Raven&&window.Raven.captureException(e)}e((0,s.selectNextScene)())},unmute:function(){return(0,i.configSetMuted)(!1)}}}))(E)},{"../../../actions/config":7,"../../../actions/landing":12,"../../../consts":115,"../../../selectors/auth":152,"../../../utils/events":165,"../videojs.player":102,"./previews":101,"prop-types":void 0,react:void 0,"react-redux":void 0}],101:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=s(e("react")),o=s(e("prop-types")),i=e("../../../consts");function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var a=r[n],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(e,t))}var d=function(e){function t(){var r,n;u(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return r=n=l(this,e.call.apply(e,[this].concat(o))),n.onClickHandlers={},n.rowsCount=3,n.state={colsCount:3},n.updateColsCount=function(){var e=n.state.colsCount,t=n.colsCount;e!==t&&n.setState({colsCount:t})},n.getImgSrc=function(e){var t=n.props.scenes.thumbnail;return("//hls.static."+i.DOMAIN+"/hola/static/resources/"+t).replace("camera",e.camera).replace("ts",e.ts)},n.getOnClickHandler=function(e){var t=JSON.stringify(e);return n.onClickHandlers[t]||(n.onClickHandlers[t]=n.onClick.bind(n,e)),n.onClickHandlers[t]},n.onClick=function(e){(0,n.props.onSelectScene)(e)},l(n,r)}return c(t,e),t.prototype.componentDidMount=function(){this.setState({colsCount:this.colsCount})},t.prototype.componentDidUpdate=function(e){this.props.windowWidth!==e.windowWidth&&this.updateColsCount()},t.prototype.render=function(){var e=this,t=this.props.scenes.scenes,r=this.state.colsCount;if(0===t.length)return a.default.createElement("div",{className:"LandingPreviews",ref:function(t){e.wrapper=t}});var n=this.rowsCount*r,o=t.slice(0,n);return a.default.createElement("div",{className:"LandingPreviews",ref:function(t){e.wrapper=t}},a.default.createElement("div",{className:"LandingPreviews_Wrap"},o.map((function(t){return a.default.createElement("div",{role:"button",key:t.camera+":"+t.ts,className:"LandingPreviews_Thumb",onClick:e.getOnClickHandler(t)},a.default.createElement("img",{src:e.getImgSrc(t),alt:""}))}))))},n(t,[{key:"colsCount",get:function(){return Math.floor(this.wrapper.offsetWidth/241)}}]),t}(a.default.Component);d.propTypes={windowWidth:o.default.number.isRequired,scenes:o.default.shape().isRequired,onSelectScene:o.default.func.isRequired},r.default=d},{"../../../consts":115,"prop-types":void 0,react:void 0}],102:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=p(e("lodash")),i=p(e("react")),s=p(e("prop-types")),u=e("../../config"),l=e("../../consts"),c=e("../../utils"),d=e("../../SlivaxHandler"),f=p(d);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var a=r[n],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(e,t))}var v=void 0;v=u.IS_NEW_PLAYER?e("video.js"):function(){return null};var E={fluid:!0,controls:!0,autoplay:!0,nativeControlsForTouch:!1,disablepictureinpicture:!0,playsinline:!0,poster:"black",nativeTextTracks:!1,children:{controlBar:{liveDisplay:!1,seekBar:!1}},html5:{hls:{overrideNative:!0,withCredentials:!0}}},g=function(e){function t(){var r,n;m(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=n=h(this,e.call.apply(e,[this].concat(i))),n.onMute=function(){document.addEventListener("click",n.unmuteListener)},n.unmuteListener=function(){(0,n.props.unmute)(),document.removeEventListener("click",n.unmuteListener)},n.stop=function(){n.player.pause()},n.handlePlay=function(){var e=n.props,t=e.player,r=t.playlist,a=t.camera,i=e.isTryRepeat,s=e.onError;o.default.isEmpty(r)||(f.default.pushPlayer("connect",{edge:(0,c.getEdgeFromUrl)(r),time:0,camera:a},d.EVENT_LEVELS.REGULAR),n.player.src([{src:r.src,type:"application/x-mpegURL"}]),n.player.play().then((function(){try{n.playlistLoader.on&&n.playlistLoader.on("error",(function(){var e=n.chunklistError;e&&!n.player.paused()&&(s(l.PLAYER_ERRORS.CHUNKLIST,e),n.player.pause(),n.playlistLoader.pause())}))}catch(e){window.Raven&&window.Raven.captureException(e)}})).catch((function(){i&&(n.player.muted(!0),n.onMute(),n.player.play())})))},h(n,r)}return S(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.isMuted,r=e.onPlay,a=e.onInit,o=e.onError,i=e.onEnded,s=e.onStop,u=e.player.playlist;this.player=v(this.videoNode,n({},E,{muted:t}),a),u&&this.handlePlay(),this.player.on("error",o),this.player.on("play",r),this.player.on("ended",i),this.player.on("pause",s),t&&this.onMute();try{this.videoNode.oncontextmenu=function(){return!1},this.videoNode.setAttribute("disablepictureinpicture","true"),this.videoNode.setAttribute("controlsList","nodownload noremoteplayback")}catch(e){window.Raven&&window.Raven.captureException(e)}window.player=this.player},t.prototype.componentDidUpdate=function(e){var t=this.props,r=t.player.playlist,n=t.isMuted,a=e.player.playlist,o=a.stamp,i=a.src;(r.stamp&&!o||r.stamp!==o||r.src&&!i||r.src!==i)&&this.handlePlay(),n!==e.isMuted&&n!==this.player.muted()&&(this.player.muted(n),this.player.volume(n?0:1))},t.prototype.componentWillUnmount=function(){this.player&&this.player.dispose()},t.prototype.render=function(){var e=this,t=this.props,r=t.userId,n=t.isLive;return i.default.createElement("div",null,i.default.createElement("div",{"data-vjs-player":!0},i.default.createElement("video",{ref:function(t){e.videoNode=t},className:"video-js LSkin"}),r&&i.default.createElement("div",{className:"LSkin-IdLabel"},r)),n&&i.default.createElement("img",{className:"icon-live",src:"/static/build/de854f30/styles/img/live.svg",alt:"LIVE"}))},a(t,[{key:"playlistLoader",get:function(){try{return this.player.tech().hls.masterPlaylistController_.masterPlaylistLoader_}catch(e){return{}}}},{key:"chunklistError",get:function(){try{var e=this.playlistLoader.error;return JSON.parse(e.responseText).error}catch(e){return null}}}]),t}(i.default.Component);g.propTypes={player:s.default.shape().isRequired,unmute:s.default.func.isRequired,userId:s.default.string.isRequired,isMuted:s.default.bool,isLive:s.default.bool,onPlay:s.default.func,onError:s.default.func,onInit:s.default.func,onEnded:s.default.func,onStop:s.default.func,isTryRepeat:s.default.bool},g.defaultProps={isMuted:!1,isLive:!1,onPlay:function(){},onError:function(){},onInit:function(){},onStop:function(){},onEnded:function(){},isTryRepeat:!0},r.default=g},{"../../SlivaxHandler":3,"../../config":114,"../../consts":115,"../../utils":168,lodash:void 0,"prop-types":void 0,react:void 0,"video.js":void 0}],103:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=l(e("react")),a=l(e("prop-types")),o=e("react-redux"),i=l(e("i18next")),s=e("rlc-components"),u=e("../../actions/popup");function l(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=e.isShow,r=e.onClose,a=e.onClickContinue;return t?n.default.createElement(s.AgeDisclaimer,{message:i.default.t("popup.age_disclaimer.message"),titleActionContinue:i.default.t("popup.age_disclaimer.title_action_continue"),titleActionLeave:i.default.t("popup.age_disclaimer.title_action_leave"),onClickContinue:a,onClickLeave:function(){document.location.replace("https://google.com")},onClose:r}):null}c.propTypes={onClose:a.default.func.isRequired,onClickContinue:a.default.func.isRequired,isShow:a.default.bool.isRequired},r.default=(0,o.connect)((function(e){return{isShow:e.popup.isShow}}),(function(e){return{onClose:function(){e((0,u.closePopup)())},onClickContinue:function(){e((0,u.ageConfirmation)())}}}))(c)},{"../../actions/popup":19,i18next:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0,"rlc-components":void 0}],104:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=f(e("react")),a=f(e("prop-types")),o=e("react-redux"),i=f(e("i18next")),s=e("../../utils"),u=e("react-transition-group"),l=e("../../consts"),c=e("rlc-components"),d=e("../../actions/popup");function f(e){return e&&e.__esModule?e:{default:e}}var p={enter:100,exit:300};function m(e){var t=e.isShow,r=e.onHideOffer;return n.default.createElement(u.Transition,{in:t,timeout:p,mountOnEnter:!0,unmountOnExit:!0,exit:!0},(function(e){return n.default.createElement(c.TrialPopup,{label:i.default.t("popup.trial.label"),title:i.default.t("popup.trial.title"),message:i.default.t("popup.trial.message"),titleActionContinue:i.default.t("popup.trial.titleActionContinue"),onClickContinue:(0,s.getOnClickJoinWithReason)({reason:l.GO_TO_JOIN_REASONS.POPUP_OFFER}),onClose:r,classNamePopup:"animation-pop_"+e+" Popup_trial"})}))}m.propTypes={onHideOffer:a.default.func.isRequired,isShow:a.default.bool.isRequired},r.default=(0,o.connect)((function(e){return{isShow:e.popup.isShowOffer}}),(function(e){return{onHideOffer:function(){return e((0,d.hideOffer)())}}}))(m)},{"../../actions/popup":19,"../../consts":115,"../../utils":168,i18next:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0,"react-transition-group":void 0,"rlc-components":void 0}],105:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),a=m(n),o=m(e("prop-types")),i=e("react-redux"),s=e("react-transition-group"),u=e("rlc-components"),l=m(e("i18next")),c=m(e("moment")),d=e("../../utils"),f=e("../../actions/popup"),p=e("../../consts");function m(e){return e&&e.__esModule?e:{default:e}}var h={enter:100,exit:300};function S(e){var t=e.isShowUpgradePopup,r=e.replayDepthDays,o=e.onHideUpgradePopup,i=e.topScenes,f=(0,n.useMemo)((function(){return(0,c.default)().subtract(r-1,"days").format("MMM Do YYYY")}),[r]);return a.default.createElement(s.Transition,{in:t,timeout:h,mountOnEnter:!0,unmountOnExit:!0,exit:!0},(function(e){return a.default.createElement(u.UpgradePopup,{translator:l.default,titleActionJoin:"Upgrade to Premium",titleActionClose:"OK, maybe later...",snapshotUrlTemplate:p.SNAPSHOT_URL_TEMPLATE,topScenes:i,onClose:o,onClickJoin:d.onClickJoin,classNamePopup:"animation-pop_"+e,startingDateFrom:f,pastDays:""+r})}))}S.propTypes={onHideUpgradePopup:o.default.func.isRequired,isShowUpgradePopup:o.default.bool.isRequired,replayDepthDays:o.default.number,topScenes:o.default.arrayOf(o.default.shape())},S.defaultProps={replayDepthDays:10,topScenes:[]},r.default=(0,i.connect)((function(e){return{isShowUpgradePopup:e.popup.isShowUpgradePopup,replayDepthDays:e.config.settings.replayDepthDays,topScenes:e.topScenesShort.scenes}}),(function(e){return{onHideUpgradePopup:function(){return e((0,f.hideUpgradePopup)())}}}))(S)},{"../../actions/popup":19,"../../consts":115,"../../utils":168,i18next:void 0,moment:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0,"react-transition-group":void 0,"rlc-components":void 0}],106:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=f(e("react")),a=f(e("prop-types")),o=e("react-redux"),i=e("react-transition-group"),s=e("rlc-components"),u=f(e("i18next")),l=e("../../utils"),c=e("../../actions/popup"),d=e("../../selectors/auth");function f(e){return e&&e.__esModule?e:{default:e}}var p={enter:100,exit:300};function m(e){var t=e.isShowYearPopup,r=e.currentPlanPeriod,a=e.currentPlanPriceMonth,o=e.currentPlanPriceYear,c=e.currentPlanCurrencySymbol,d=e.yearPlanCurrency,f=e.onHideYearPopup;if(!(r&&a&&o&&c))return null;var m=Math.round(100*a)/100,h=Math.round(100*o)/100;return n.default.createElement(i.Transition,{in:t,timeout:p,mountOnEnter:!0,unmountOnExit:!0,exit:!0},(function(e){return n.default.createElement(s.YearPopup,{translator:u.default,currentPlanPeriod:r+" DAYS",currentPlanPriceMonth:""+c+m,currentPlanPriceYear:""+c+h,yearPlanCurrency:d,classNamePopup:"animation-pop_"+e,onClickJoin:l.onClickJoin,onClose:f})}))}m.propTypes={isShowYearPopup:a.default.bool.isRequired,currentPlanPeriod:a.default.number,currentPlanPriceMonth:a.default.number,currentPlanPriceYear:a.default.number,currentPlanCurrencySymbol:a.default.string,yearPlanCurrency:a.default.oneOf(Object.values(s.CURRENCY_TYPES)),onHideYearPopup:a.default.func.isRequired},m.defaultProps={currentPlanPeriod:void 0,currentPlanPriceMonth:void 0,currentPlanPriceYear:void 0,currentPlanCurrencySymbol:void 0,yearPlanCurrency:void 0},r.default=(0,o.connect)((function(e){var t=e.auth.user.rate;return t?{isShowYearPopup:e.popup.isShowYearPopup,currentPlanPeriod:t.period,currentPlanPriceMonth:t.price_month,currentPlanPriceYear:t.price_year,yearPlanCurrency:(0,d.getYearPlanCurrency)(e),currentPlanCurrencySymbol:(0,d.getCurrentPlanCurrencySymbol)(e)}:{isShowYearPopup:!1}}),(function(e){return{onHideYearPopup:function(){return e((0,c.hideYearPopup)())}}}))(m)},{"../../actions/popup":19,"../../selectors/auth":152,"../../utils":168,i18next:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0,"react-transition-group":void 0,"rlc-components":void 0}],107:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=o(e("react")),a=o(e("prop-types"));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.camera,r=e.apartment;return n.default.createElement("div",{className:"snapshot"},n.default.createElement("div",{className:"no_snapshot"},n.default.createElement("p",{className:"msg"},"Preview image not found"),r&&r.name&&n.default.createElement("p",{className:"title"},r.name),t&&t.name&&n.default.createElement("p",null,t.name)))}i.propTypes={camera:a.default.shape(),apartment:a.default.shape()},i.defaultProps={camera:{},apartment:{}},r.default=i},{"prop-types":void 0,react:void 0}],108:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=l(e("react")),a=l(e("prop-types")),o=l(e("classnames")),i=e("rlc-components"),s=l(e("./UnderMaintenancePreview")),u=l(e("./ErrorHandler"));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=e.apartment,r=e.camera,a=e.imgUri,l=e.userHasAccess,c=t.maintenance,d=void 0===c?{}:c,f="maintenance"===t.status,p="maintenance"===r.status,m=f||p;return n.default.createElement("div",{className:(0,o.default)("menu-snapshot",{"menu-snapshot_members":!l&&!m})},m?n.default.createElement(s.default,{isApartUnderMaintenance:f,estimateTime:d.ETA,reason:d.reason,start:d.stamp}):n.default.createElement(i.ProgressiveImage,{src:a,className:"snapshot",loadingClassName:"loading",errorHandler:function(){return n.default.createElement(u.default,{camera:r,apartment:t})}}))}c.propTypes={camera:a.default.shape(),apartment:a.default.shape(),imgUri:a.default.string,userHasAccess:a.default.bool},c.defaultProps={camera:{},apartment:{},imgUri:null,userHasAccess:!1},r.default=c},{"./ErrorHandler":107,"./UnderMaintenancePreview":109,classnames:void 0,"prop-types":void 0,react:void 0,"rlc-components":void 0}],109:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=s(e("react")),a=s(e("prop-types")),o=s(e("i18next")),i=e("../../utils/maintenance");function s(e){return e&&e.__esModule?e:{default:e}}function u(e){var t=e.estimateTime,r=e.start,a=e.reason,s=e.isApartUnderMaintenance;return n.default.createElement("div",{className:"TooltipUm"},n.default.createElement("h3",{className:"TooltipUm-Title"},o.default.t("apartments.status.maintenance")),n.default.createElement("p",{className:"TooltipUm-Description"},n.default.createElement("strong",null,(0,i.handleMaintenanceReason)(a,s)),n.default.createElement("br",null),n.default.createElement("span",{dangerouslySetInnerHTML:{__html:(0,i.handleMaintenanceEstimateTime)(r,t)}})))}u.propTypes={reason:a.default.string,estimateTime:a.default.number,start:a.default.number,isApartUnderMaintenance:a.default.bool},u.defaultProps={reason:"",estimateTime:void 0,start:void 0,isApartUnderMaintenance:!1},r.default=u},{"../../utils/maintenance":171,i18next:void 0,"prop-types":void 0,react:void 0}],110:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=p(e("react")),o=p(e("prop-types")),i=e("react-redux"),s=e("redux-tooltip"),u=p(e("classnames")),l=e("../../actions/preview"),c=e("../../selectors/auth"),d=e("../../utils/auth"),f=p(e("./PreviewImage"));function p(e){return e&&e.__esModule?e:{default:e}}function m(e){var t=e.className,r=e.imgUri,n=e.camera,o=e.userHasAccess,i=e.apartment;return a.default.createElement(s.Tooltip,{name:l.TOOLTIP_NAME,className:(0,u.default)(t,"tooltip"),auto:!1},a.default.createElement(f.default,{apartment:i,camera:n,imgUri:r,userHasAccess:o}))}m.propTypes={imgUri:o.default.string,camera:o.default.shape(),apartment:o.default.shape(),className:o.default.string,userHasAccess:o.default.bool},m.defaultProps={imgUri:null,camera:{},apartment:{},className:null,userHasAccess:!1},r.default=(0,i.connect)((function(e){return{imgUriSelector:(0,c.getTopCamsSnapURI)(e),camera:e.preview.camera,apartment:e.preview.apartment,className:e.preview.className,userType:(0,c.getAccess)(e)}}),null,(function(e){return n({},e,{imgUri:e.camera?e.imgUriSelector(e.camera.camera):null,userHasAccess:e.camera?(0,d.getUserHasAccess)(e.userType,e.camera.access):null})}))(m)},{"../../actions/preview":20,"../../selectors/auth":152,"../../utils/auth":163,"./PreviewImage":108,classnames:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0,"redux-tooltip":void 0}],111:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("react-redux"),a=e("rlc-components");r.default=(0,n.connect)((function(e){return{width:e.window.width||0}}))(a.Tooltip)},{"react-redux":void 0,"rlc-components":void 0}],112:[function(e,t,r){"use strict";t.exports=function(){return null}},{"./ws.connector.member":113}],113:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=h(e("react")),o=h(e("prop-types")),i=e("react-redux"),s=h(e("socket.io-client")),u=h(e("lodash")),l=e("../../actions/md"),c=e("../../actions/current"),d=e("../../selectors/current"),f=e("../../selectors/apartments"),p=e("../../consts"),m=h(e("../../utils/logger"));function h(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var a=r[n],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(e,t))}var v=function(e){function t(r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,r));return n.connect=function(){var e=n.props.hostUrl;n.socket&&n.socket.connected||!e||(n.socket=s.default.connect(e+"/active",{secure:"http:"!==window.location.protocol,transports:["websocket"]}),n.socket.on("connect",(function(){n.socket.emit("MD",{cookie:document.cookie}),n.logger.debug("Connect to ws")})),n.socket.on("error",(function(e){n.logger.error("error",JSON.stringify(e))})),n.socket.on("disconnect",(function(e){n.logger.debug("disconnected",e)})),n.socket.on("manage",(function(e){if("run"===e.type&&"controller"===e.element){var t=n.props,r=t.onSetCamera,a=t.onSetViewModeRM,o=t.onToggleIsAutoFollow,i=t.onSetCurrentPlayer,s=t.currentPlayer;switch(e.command.replace("dW","").replace("Cn","")){case"sendState":n.sendState(e.param);break;case"remoteSwitchCamera":r(e.param);break;case"setMode":a(e.param);break;case"TrackingMode":o(s,e.param);break;case"selectPlayerByIdn":i(e.param)}}})),n.socket.on("MD",(function(e){var t=n.props,r=t.isMdOn,a=t.onSetMDCameras,o=t.onSetMDApartments;r&&(void 0!==e.cams&&a(e.cams),void 0!==e.apartments&&o(e.apartments))})))},n.sendState=function(e){var t=n.props,r=t.isMdOn,a=t.viewMode,o=t.currentPlayer,i={MD:r,currents:n.currents,mode:a,player:o};void 0!==e&&(i.session=e),n.socket.emit("globalState",i)},n.disconnect=function(){if(!n.socket||!n.socket.disconnected){var e=n.props.onCleanMDData;n.socket.disconnect(),e()}},n.socket=null,n.logger=m.default.getLogger("WSConnector"),n}return S(t,e),t.prototype.componentDidMount=function(){try{this.connect()}catch(e){this.logger.error(e)}},t.prototype.componentDidUpdate=function(e){var t=this.props,r=t.isMdOn,n=t.isAutoFollow,a=t.camera,o=t.currentPlayer,i=t.players,s=u.default.omitBy(i,(function(e){return u.default.isEmpty(e.camera)}));e.isMdOn===r&&u.default.isEqual(e.isAutoFollow,n)&&e.camera===a&&e.currentPlayer===o&&u.default.isEqual(e.players,s)||this.sendState()},t.prototype.componentWillUnmount=function(){this.disconnect()},t.prototype.render=function(){return null},n(t,[{key:"currents",get:function(){var e=this.props,t=e.apartments,r=e.players,n=e.currentPlayer,a=e.isAutoFollow;return u.default.map(r,(function(e,r){var o=Number(r),i=(e.camera.camera?u.default.find(t,{apartment:e.camera.camera.split("_")[0]}):{})||{};return{apartment:{_id:i._id,status:i.status,name:i.name,cameras:(i.cameras||[]).map((function(e){return{status:e.status,name:e.name,camera:e.camera,_id:e._id}}))},camera:{camera:e.camera.camera,status:e.camera.status,name:e.camera.name,_id:e.camera._id},selected:o===n,autoFollow:a.player===o&&(p.AUTO_FOLLOW_MODES.ALL===a.mode||a.mode===p.AUTO_FOLLOW_MODES.APARTMENT)}}))}}]),t}(a.default.Component);v.propTypes={hostUrl:o.default.string,isMdOn:o.default.bool.isRequired,isAutoFollow:o.default.shape().isRequired,viewMode:o.default.number.isRequired,apartments:o.default.arrayOf(o.default.shape()).isRequired,camera:o.default.shape().isRequired,players:o.default.shape().isRequired,currentPlayer:o.default.number.isRequired,onSetCamera:o.default.func.isRequired,onSetViewModeRM:o.default.func.isRequired,onToggleIsAutoFollow:o.default.func.isRequired,onSetCurrentPlayer:o.default.func.isRequired,onCleanMDData:o.default.func.isRequired,onSetMDCameras:o.default.func.isRequired,onSetMDApartments:o.default.func.isRequired},v.defaultProps={hostUrl:""},r.default=(0,i.connect)((function(e){return{hostUrl:e.config.host_socketio,isMdOn:e.md.isOn,isAutoFollow:(0,d.getIsAutoFollow)(e),viewMode:(0,d.getViewMode)(e),apartments:(0,f.getApartments)(e),camera:(0,d.getCurrentCamera)(e),players:(0,d.getPlayers)(e),currentPlayer:(0,d.getCurrentPlayer)(e)}}),(function(e){return{onSetMDCameras:function(t){return e((0,l.mdSetCameras)(t))},onSetMDApartments:function(t){return e((0,l.mdSetApartments)(t))},onCleanMDData:function(){return e((0,l.mdCleanData)())},onSetCamera:function(t){return e((0,c.setCamera)(t))},onSetViewModeRM:function(t){return e((0,c.setViewModeRM)(t))},onToggleIsAutoFollow:function(t,r){return e((0,c.setIsAutoFollow)(t,r?p.AUTO_FOLLOW_MODES.ALL:null))},onSetCurrentPlayer:function(t){return e((0,c.setCurrentPlayer)(t))}}}))(v)},{"../../actions/current":11,"../../actions/md":13,"../../consts":115,"../../selectors/apartments":151,"../../selectors/current":155,"../../utils/logger":170,lodash:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0,"socket.io-client":void 0}],114:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MINIMAL_UPDATE_AUTH_INTERVAL=r.DEFAULT_UPDATE_AUTH_INTERVAL=r.UA_INFO=r.IS_NEW_PLAYER=r.SAVED_ACTIONS=r.PANELS_DEFAULT_STATUS=r.SET_IS_SHOW_SNAPSHOT=r.SET_COUNT_SNAPSHOT_LINES=void 0,r.getIsSupportedHLS=function(){if(void 0===window.viblast)return!1;if(h.indexOf(m.browser.name)>=0)return!1;try{return!(window.safari&&"[object SafariRemoteNotification]"===window.safari.pushNotification.toString()||Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0)}catch(e){return!0}};var n=c(e("lodash")),a=c(e("ua-parser-js")),o=e("./actions/panels"),i=e("./actions/options"),s=e("./actions/config"),u=e("./actions/popup"),l=e("./consts");function c(e){return e&&e.__esModule?e:{default:e}}var d=r.SET_COUNT_SNAPSHOT_LINES=function(e){return"SET_COUNT_"+e+"_LINES"},f=r.SET_IS_SHOW_SNAPSHOT=function(e){return"SET_IS_SHOW_"+e},p=(r.PANELS_DEFAULT_STATUS=n.default.fromPairs(l.PANELS.map((function(e){return[e,!0]}))),[l.SNAP_TYPES.TOP_CAMS,l.SNAP_TYPES.TOP_SCENES]),m=(r.SAVED_ACTIONS=l.STARTUP_PARAMS.isGuest?[i.SET_IS_DISABLE_GROUPS,s.CONFIG_SET_SEND_START_STREAM,u.SET_AGE_CONFIRMATION_POPUP]:[d(l.SNAP_TYPES.TOP_CAMS)].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(p.map((function(e){return f(e)}))),[(0,o.SET_SHOW_PANEL)(l.PLAN_PANEL),i.SET_IS_DISABLE_GROUPS,s.CONFIG_SET_SEND_START_STREAM]),r.IS_NEW_PLAYER=l.STARTUP_PARAMS.isGuest&&l.STARTUP_PARAMS.isHlsLM,r.UA_INFO=(new a.default).getResult()||{}),h=["IE","Puffin"];r.DEFAULT_UPDATE_AUTH_INTERVAL=60,r.MINIMAL_UPDATE_AUTH_INTERVAL=60},{"./actions/config":7,"./actions/options":17,"./actions/panels":18,"./actions/popup":19,"./consts":115,lodash:void 0,"ua-parser-js":void 0}],115:[function(e,t,r){"use strict";var n,a,o;function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0});r.VIEW_MODE={SINGLE:0,SINGLE_WIDE:1,TWO_VERTICAL:2,TWO_HORIZONTAL:3,FOUR:4,FULLSCREEN:5},r.LANGUAGES=["en","de","fr","tr"],r.MODAL_TYPES={PREMIUM:1,STANDARD:8,LOGIN:2,HOTKEY:3,CONVERT:6,RELOAD_DIALOG:7,SCENE:9,REBILL_WARNING:10,VEROTEL_REBILL:11,FREE_ACTIVATION:12,RESET_PASSWORD:13};var s=r.SNAP_TYPES={TOP_CAMS:"topCams",TOP_SCENES:"topScenes"},u=r.USER_TYPES={GUEST:"guest",STANDARD:"standard",PREMIUM:"premium",COMBINED:"combined",FREE:"free"},l=(r.SUBSCRIPTION_STATUSES={ACTIVE:"active",CANCELLED:"cancelled",EXPIRED:"expired"},r.ACCESS_LEVELS={PUBLIC:"public",PRIVATE:"private",PREMIUM:"premium"},r.VIDEO_FORMATS={P480:{classname:"p480",value:"480p"},P720:{classname:"p720",value:"720p"},P1080:{classname:"p1080",value:"1080p"}});r.AVAILABLE_FORMATS=[l.P720,l.P1080],r.AUTO_FOLLOW_MODES={ALL:0,APARTMENT:1},r.GLOBAL_LOADER_SELECTOR="loader",r.UPDATE_TOP_SCENES_INTERVAL=600;var c=r.DOMAIN=function(){try{var e=window.location.host.split(".");return e.slice(e.length-2).join(".")}catch(e){return"reallifecam.com"}}(),d=r.COLLECTION_BASE_URL="//collection."+c,f=(r.COLLECTION_VIDEOS=d+"/video/get_by_user",r.JOIN_URI="/join",r.BUY_TOKENS="https://"+c+"/reals",r.WHOAMI_URI=window.bootstrap.whoamiUrl,r.TOP_SCENES_SHORT="/content/topscenes/join",r.REPLAY_URI=function(e,t,r){return"https://replay."+c+"/"+e+"/view/"+t+"?ts="+r+"&from=scenes"},r.SNAPSHOT_URL_TEMPLATE="https://eu.static.reallifecam.com/resources/snapshots/replay/join/__stream__-__ts__.jpg",r.PREVIEW_DELAY=750,r.PREVIEW_MARGIN=140,r.PREVIEW_DEBOUNCE=1e3,r.APARTMENT_GROUPS={COUPLES:{value:"Couples"},ROOMMATES:{value:"Roommates"},GIRLS_ON_VACATION:{value:"Girls on vacation"},COUPLES_ON_VACATION:{value:"Couples on vacation"},BED_AND_BREAKFAST:{value:"Bed and breakfast"}}),p=r.APARTMENT_GROUP_ORDER=[f.COUPLES.value,f.ROOMMATES.value,f.GIRLS_ON_VACATION.value,f.COUPLES_ON_VACATION.value,f.BED_AND_BREAKFAST.value],m=r.ALL_APARTMENTS="ALL_APARTMENTS",h=r.PLAN_PANEL="plan",S=(r.PANELS=[].concat(p,[m,h]),r.SAVED_PANELS=[].concat(p,[m,h]),r.MARKUP_BREAKPOINTS={DESKTOP:{min:1e3}}),v=r.LANDING_MODES={NORMAL:4,HLS:9,SCENES:6},E=(r.USED_LANDING_MODES=[v.NORMAL,v.HLS,v.SCENES],r.STARTUP_PARAMS={isMobile:window.innerWidth<S.DESKTOP.min,isGuest:window.bootstrap.access===u.GUEST,isHlsLM:(window.location.href.indexOf("hello")>=0||window.location.href.indexOf("hola")>=0)&&window.location.href.indexOf("lm="+v.NORMAL)<0&&window.location.href.indexOf("landingmode="+v.NORMAL)<0});r.MAX_SNAPSHOTS_LINES=(i(o={},s.TOP_CAMS,(i(n={},u.GUEST,E.isMobile?18:7),i(n,u.STANDARD,E.isMobile?18:7),i(n,u.PREMIUM,E.isMobile?18:8),n)),i(o,s.TOP_SCENES,(i(a={},u.GUEST,null),i(a,u.STANDARD,null),i(a,u.PREMIUM,null),a)),o),r.PLAYER_ERRORS={NET_CONNECTION_FAILED:9,SAFARI_FLASH:10,TIMEOUT:11,CONNECTION_PROBLEM:12,STRANGE_1:13,STRANGE_2:14,BUFFER_TIMEOUT:15,BUFFER_EMPTY:101,BUFFER_TIMEOUT_WARNING:102,MEDIA_NOT_DECODED:3,CHUNKLIST:111,CHUNK:112,PLAYLIST:113,SECURITY:114,AUTOPLAY_DISABLED:"autoplay_disabled"},r.CHUNKLIST_ERRORS={SERVER:"errors.chunklist.server",SESSION_EXPIRED:"errors.chunklist.session_expired",COOKIE:"errors.chunklist.cookie",MAINTENANCE_CAMERA:"errors.maintenance_camera",MAINTENANCE:"errors.maintenance",CAMERA_NOT_FOUND:"errors.camera-not-found",DURATION_LIMIT_GUEST:"errors.duration-limit-guest",DURATION_LIMIT_GUEST_DAY:"errors.duration-limit-guest-day",ACCESS_FORBIDDEN:"errors.player.chunklist.access_forbidden"},r.PLAYLIST_ERRORS={USER_BLACKLISTED:"errors.user-blacklisted",CAMERA_UNSPECIFIED:"errors.camera-unspecified",FORBIDDEN:"errors.forbidden",GUEST_FORBIDDEN:"errors.guest-camera-forbidden",CAMERA_NOT_FOUND:"errors.camera-not-found",STREAMS_LIMIT_GUEST:"errors.streams-limit-guest",STREAMS_LIMIT:"errors.streams-limit",DURATION_LIMIT_GUEST_DAY:"errors.duration-limit-guest-day"},r.FLOWPLAYER_ENGINES={FLASH:"flash",VIBLAST:"viblast"},r.LOCAL_STORAGE_KEYS={BALANCED:"balanced",ALLOW_HLS:"allow_hls",TRACK_CAMPAIGN:"tc",TRACK_SESSION:"ts",POPUP_UID:"popup_id",POPUP_CLOSED_DATETIME:"popup_closed_datetime",OFFER_CLOSED_DATETIME_UID:"offer_closed_datetime_uid",OFFER_CLOSED_DATETIME:"offer_closed_datetime",POPUP_USER_AREA_SHOWED_DATETIME:"popup_user_area_showed_datetime",REBILL_REACTIVATE_WAS_SUCCESS_SEND_DATETIME:"rebill_reactivate_was_success_send_datetime",FREE_ACTIVATION_REQUEST:"free_activation_request",IS_COLLAPSED_BIG_UPDATE:"is_collapsed_big_update"},r.GO_TO_JOIN_REASONS={DEFAULT:1,FORBIDDEN_CAMERA:2,JOYSTICK_PAID:3,JOYSTICK_PUBLIC:4,DURATION_LIMIT:5,TOPSCENES:6,JOYSTICK:8,POPUP_OFFER:9,PLAYER_OFFER:10,MODAL_OFFER:11,SNAPSHOTS_OFFER:12,USER_BLOCK_OFFER:13,TOPSCENES_OFFER:14,BIG_UPDATE_OFFER:15},r.HOURS_EXPIRING_TOPSCENES=20,r.SERVICES=[{type:"live",title:"RLC Live",url:"https://"+c,isCurrent:!0},{type:"remote",title:"RLC Remote",url:"https://remote."+c},{type:"replay",title:"RLC Replay",url:"https://replay."+c},{type:"collection",title:"My Collection",url:"https://collection."+c}],r.POPUP_USER_AREA_SUBSEQUENT_APPEARANCE_DAYS=7,r.REBILL_REACTIVATE_PROGRESS_HOURS=6,r.FREE_ACTIVATION_PROGRESS_HOURS=2,r.BILLERS={SEGPAY:"SEGPAY",VEROTEL:"VEROTEL"}},{}],116:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,a=e("react-redux"),o=e("i18next"),i=(n=o)&&n.__esModule?n:{default:n},s=e("rlc-components"),u=e("../actions/modal"),l=e("../selectors/auth"),c=e("../utils"),d=e("../consts");r.default=(0,a.connect)((function(e){return{isMember:(0,l.getUserType)(e)!==d.USER_TYPES.GUEST,translator:i.default}}),(function(e){return{onClickLogin:function(){return e((0,u.modalShowLogin)())},onClickJoin:c.onClickJoin}}))(s.Footer)},{"../actions/modal":14,"../consts":115,"../selectors/auth":152,"../utils":168,i18next:void 0,"react-redux":void 0,"rlc-components":void 0}],117:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=e("react"),o=A(a),i=e("react-redux"),s=A(e("i18next")),u=A(e("prop-types")),l=A(e("moment")),c=e("rlc-components"),d=e("../actions/auth"),f=e("../actions/modal"),p=e("../selectors/auth"),m=e("../selectors/apartments"),h=e("../selectors/config"),S=e("../utils"),v=e("../consts"),E=e("../utils/localStorage"),g=e("../selectors/popup"),y=e("../selectors/offer"),_=e("../actions/offer"),T=e("../hooks/useHandleReasonOffer"),O=e("../selectors/current");function A(e){return e&&e.__esModule?e:{default:e}}function R(){return o.default.createElement("div",{className:"Logo"},o.default.createElement("a",{className:"Logo-Img",href:"/"},o.default.createElement("img",{src:"/static/build/de854f30/styles/img/logo.svg",alt:""})),o.default.createElement("span",{className:"Logo-Title"},s.default.t("header.slogan")))}var b=function(){window.location.href=v.BUY_TOKENS},w=function(){window.location.href=v.COLLECTION_BASE_URL},P=function(e){var t=e.activeOffer,r=e.camera;if(!t)return null;var n=t||{},a=n.uid,i=n.type,s=n.blocks,u=n.position,l=n.color,d=(0,T.useHandleReasonOffer)(r,c.OFFER_TYPES.USER_BLOCK);return o.default.createElement(c.MainOffer,{id:a,blocks:s,type:i,position:u,border:l,onReason:d})};P.propTypes={camera:u.default.string,activeOffer:u.default.shape()},P.defaultProps={camera:void 0,activeOffer:void 0};var C=function(e){var t,r=e.isActive,i=e.userType,u=e.tokens,d=e.videos,f=e.isStandardPromo,p=e.topScenes,m=e.pastDays,h=e.currency,g=e.commonData,y=e.biller,_=e.rebill,T=e.daysToExpire,O=e.isAccessRebillReactivate,A=e.showAnyPopupOrModal,C=e.isPremiumOffer,M=e.currentPlanPeriod,I=e.currentPlanPriceMonth,N=e.currentPlanPriceYear,L=e.yearPlanCurrency,D=e.currentPlanCurrencySymbol,U=e.isValidFree,x=e.freeAllowed,k=e.freeActivationState,F=e.email,B=e.camera,H=e.onClickLogin,j=e.onClickConvert,q=e.onClickLogout,G=e.onReactivation,Y=e.onShowVerotellRebillModal,W=e.activeOffer,V=e.showOffer,K=e.onCloseOffer,X=e.onClickConfirmEmail,J=e.windowWidth,z=(0,a.useMemo)((function(){return(0,l.default)().subtract(m-1,"days").format("MMM Do YYYY")}),[m]),Z=(0,a.useMemo)((function(){return 10*Math.floor(g.camsCount/10)}),[g.camsCount]),Q=(0,a.useMemo)((function(){if(A)return!1;if(!r)return!0;var e=i===v.USER_TYPES.STANDARD,t=i===v.USER_TYPES.COMBINED||i===v.USER_TYPES.PREMIUM;if(e||!_&&t){var n=(0,E.getNumberOfDaysSincePopupUserAreaWasShowed)();if(void 0===n||n>v.POPUP_USER_AREA_SUBSEQUENT_APPEARANCE_DAYS)return(0,E.setWasShowedPopupUserArea)(),!0}return i===v.USER_TYPES.FREE&&!U}),[]),$=(0,a.useState)(!1),ee=n($,2),te=ee[0],re=ee[1],ne=(0,a.useCallback)((t=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y!==v.BILLERS.VEROTEL){e.next=4;break}Y(),e.next=8;break;case 4:return re(!0),e.next=7,G();case 7:re(!1);case 8:case"end":return e.stop()}}),e,void 0)})),function(){var e=t.apply(this,arguments);return new Promise((function(t,r){return function n(a,o){try{var i=e[a](o),s=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(s).then((function(e){n("next",e)}),(function(e){n("throw",e)}));t(s)}("next")}))}),[re,G,Y]),ae=(0,a.useCallback)((function(){W&&W.uid&&K(W.uid)}),[W]),oe=Math.round(100*I)/100,ie=Math.round(100*N)/100;return o.default.createElement(c.Header,{isActive:r,userType:i,tokens:u,videos:d,rebill:_,daysToExpire:T,rebillLoading:te,rebillInProgressReactivate:!_&&!O,isStandardPromo:f,topScenes:p,pastDays:m,translator:s.default,logo:R,userArea:!0,services:v.SERVICES,snapshotUrlTemplate:v.SNAPSHOT_URL_TEMPLATE,startingDateFrom:z,showPopupWhenMount:Q,title:s.default.t("panel.get-premium.title",{aparts:g.apartments.length,cams:Z}),subtitle:s.default.t("panel.get-premium.subtitle",{currency:h}),isPremiumOffer:C,premiumOfferCurrentPlanPeriod:M+" DAYS",premiumOfferCurrentPlanPriceMonth:""+D+oe,premiumOfferCurrentPlanPriceYear:""+D+ie,premiumOfferYearPlanCurrency:L,isValidFree:U,onClickLogin:H,onClickConvert:j,onClickLogout:q,onClickBuyTokens:b,onClickMyCollection:w,onClickReactivate:ne,onClickJoin:S.onClickJoin,showForcedUserArea:Boolean(W&&V&&W.uid===V.uid),offerNode:o.default.createElement(P,{camera:B,activeOffer:V}),onCloseUserArea:ae,onClickConfirmEmail:X,freeAllowed:x,freeActivationState:k,email:F,isMobile:J?J<v.MARKUP_BREAKPOINTS.DESKTOP.min:void 0})};C.propTypes={isActive:u.default.bool.isRequired,isPremiumOffer:u.default.bool.isRequired,biller:u.default.string,currentPlanPeriod:u.default.number,currentPlanPriceMonth:u.default.number,currentPlanPriceYear:u.default.number,currentPlanCurrencySymbol:u.default.string,yearPlanCurrency:u.default.oneOf(Object.values(c.CURRENCY_TYPES)),userType:u.default.oneOf(Object.values(v.USER_TYPES)).isRequired,camera:u.default.string,tokens:u.default.number,videos:u.default.number.isRequired,isStandardPromo:u.default.bool.isRequired,pastDays:u.default.number.isRequired,topScenes:u.default.arrayOf(u.default.shape()).isRequired,currency:u.default.string.isRequired,commonData:u.default.shape({apartments:u.default.arrayOf(u.default.shape()).isRequired,camsCount:u.default.number.isRequired}).isRequired,rebill:u.default.bool.isRequired,daysToExpire:u.default.number.isRequired,isAccessRebillReactivate:u.default.bool.isRequired,showAnyPopupOrModal:u.default.bool.isRequired,isValidFree:u.default.bool.isRequired,freeActivationState:u.default.number.isRequired,freeAllowed:u.default.bool.isRequired,email:u.default.string,onClickLogin:u.default.func.isRequired,onClickConvert:u.default.func.isRequired,onClickLogout:u.default.func.isRequired,onReactivation:u.default.func.isRequired,onShowVerotellRebillModal:u.default.func.isRequired,onCloseOffer:u.default.func.isRequired,activeOffer:u.default.shape(),showOffer:u.default.shape(),onClickConfirmEmail:u.default.func.isRequired,windowWidth:u.default.number},C.defaultProps={camera:void 0,tokens:0,currentPlanPeriod:void 0,currentPlanPriceMonth:void 0,currentPlanPriceYear:void 0,currentPlanCurrencySymbol:void 0,yearPlanCurrency:void 0,activeOffer:void 0,showOffer:void 0,biller:void 0,email:void 0,windowWidth:void 0},r.default=(0,i.connect)((function(e){var t=e.config.settings,r=t.replayDepthDays,n=t.topScenesFullListForStandard,a=t.popup.offerTrialPremium.show,o=e.auth.user,i=o.biller_expires,s=o.rate,u=o.biller,d=(0,p.getIsActive)(e),f=i>0?Math.max(l.default.unix(i).diff((0,l.default)(),"days"),0):0,S=e.modal.show,v=e.popup,E=v.isShow,_=v.isShowOffer,T=v.isShowUpgradePopup,A=v.isShowYearPopup,R=v.ageConfirmation,b=S||E||_||T||A||R,w=void 0,P=void 0,C=void 0,M=void 0,I=void 0;s&&(w=s.period,P=s.price_month,C=s.price_year,M=(0,p.getYearPlanCurrency)(e),I=(0,p.getCurrentPlanCurrencySymbol)(e));var N=l.default.unix(i).diff((0,l.default)(),"seconds")>0,L=(0,p.getIsValid)(e),D=(0,p.getUserType)(e),U=(0,h.getFreeAllowed)(e),x=(0,p.getUserEmail)(e),k=(0,O.getCurrentCamera)(e);return{isActive:d,isPremiumOffer:Boolean(a&&0===i&&(0,g.getAvailableShowPopupYear)(e)),currentPlanPeriod:w,currentPlanPriceMonth:P,currentPlanPriceYear:C,yearPlanCurrency:M,currentPlanCurrencySymbol:I,userType:D,camera:k&&k.camera,tokens:e.auth.user.balance,commonData:(0,m.getDataForPremiumModal)(e),currency:(0,p.getCurrency)(e),videos:e.collection.videos,isStandardPromo:n,topScenes:e.topScenesShort.scenes,pastDays:r,biller:u,rebill:d&&0===i||!N,isAccessRebillReactivate:e.current.isAccessRebillReactivate,freeActivationState:e.current.freeActivationState,daysToExpire:f,showAnyPopupOrModal:b,reactivationPossibility:N,activeOffer:(0,y.getOfferByType)(e,c.OFFER_TYPES.USER_BLOCK),showOffer:(0,y.getShowOfferInUserArea)(e),email:x,freeAllowed:U,isValidFree:L,windowWidth:e.window.width||void 0}}),(function(e){return{onClickLogin:function(){return e((0,f.modalShowLogin)())},onClickConvert:function(){return e((0,f.modalShowConvert)())},onClickLogout:function(){return e((0,d.logout)())},onReactivation:function(){return e((0,d.reactivation)())},onShowVerotellRebillModal:function(){return e((0,f.modalShowVerotellRebill)())},onCloseOffer:function(t){return e((0,_.closeOffer)(t))},onClickConfirmEmail:function(){return e((0,d.verification)())}}}))(C)},{"../actions/auth":5,"../actions/modal":14,"../actions/offer":16,"../consts":115,"../hooks/useHandleReasonOffer":119,"../selectors/apartments":151,"../selectors/auth":152,"../selectors/config":154,"../selectors/current":155,"../selectors/offer":157,"../selectors/popup":159,"../utils":168,"../utils/localStorage":169,i18next:void 0,moment:void 0,"prop-types":void 0,react:void 0,"react-redux":void 0,"rlc-components":void 0}],118:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("react-redux"),a=e("../components/News/News"),o=e("../actions/news"),i=e("../actions/current"),s=e("../selectors/news");r.default=(0,n.connect)((function(e){return{isShow:(0,s.getIsShow)(e),isOpen:(0,s.getIsOpen)(e),news:(0,s.getCurrentNews)(e),headNewsPost:(0,s.getHeadNewsPost)(e),categories:(0,s.getCategories)(e),currentCategory:(0,s.getCurrentCategory)(e)}}),(function(e){return{onClickCategory:function(t){return e((0,o.setCurrentCategory)(t))},toggleIsOpen:function(){return e((0,o.toggleIsOpen)())},setCamera:function(t){return e((0,i.setCamera)(t))},setApartment:function(t){return e((0,i.setApartment)(t))}}}))(a.News)},{"../actions/current":11,"../actions/news":15,"../components/News/News":28,"../selectors/news":156,"react-redux":void 0}],119:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useHandleReasonOffer=function(e,t){return(0,n.useCallback)((function(){var r=(0,o.getReasonByOfferType)(t);(0,a.setJoinReason)({reason:r,camera:e})}),[e,t])};var n=e("react"),a=e("../utils/cookie"),o=e("../utils/offer")},{"../utils/cookie":164,"../utils/offer":173,react:void 0}],120:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.useTimerText=function(e){var t=e.ts;if(e.isDisabledTimer)return[void 0,!1];var r=Math.floor(((0,n.getTimestamp)()-t)/3600),o=r>=a.HOURS_EXPIRING_TOPSCENES;return[r<1?"Recorded less than 1h ago":"Recorded "+r+"h ago",o]};var n=e("../utils"),a=e("../consts")},{"../consts":115,"../utils":168}],121:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=u(e("i18next")),a=u(e("i18next-xhr-backend")),o=u(e("i18next-intervalplural-postprocessor")),i=e("./selectors/auth"),s=e("./language");function u(e){return e&&e.__esModule?e:{default:e}}r.default=function(e){return function(t,r){var u=(0,i.getLocaleURI)(r());n.default.use(a.default).use(o.default).init({lng:(0,s.getLanguage)(),fallbackLng:["en"],preload:["en"],ns:["translation"],backend:{loadPath:u}},(function(){"function"==typeof e&&e()}))}}},{"./language":124,"./selectors/auth":152,i18next:void 0,"i18next-intervalplural-postprocessor":void 0,"i18next-xhr-backend":void 0}],122:[function(e,t,r){"use strict";e("babel-polyfill"),e("core-js/es/symbol"),e("whatwg-fetch");var n=A(e("react")),a=e("react-dom"),o=e("react-redux"),i=e("redux-localstorage-saver"),s=A(e("./store")),u=A(e("./i18next.init")),l=e("./actions/auth"),c=e("./actions/snapshots"),d=e("./actions/apartments"),f=e("./actions/config"),p=e("./actions/news"),m=e("./actions/popup"),h=e("./actions/collection"),S=A(e("./components/app")),v=e("./utils"),E=e("./utils/cookie"),g=e("./consts"),y=e("./utils/localStorage"),_=e("./initHistory"),T=e("./actions/topScenesShort"),O=e("./actions/offer");function A(e){return e&&e.__esModule?e:{default:e}}var R=s.default.dispatch,b=s.default.getState;function w(){(0,a.render)(n.default.createElement(o.Provider,{store:s.default},n.default.createElement(S.default,null)),document.getElementById("rlc")),(0,v.disableGlobalLoader)(),R((0,c.autoFetchTopCams)()),R((0,c.autoFetchTopScenes)()),R((0,T.fetchTopScenesShort)())}(0,y.initBalanced)(),(0,y.initAllowHls)(),(0,E.setJoinReason)({reason:g.GO_TO_JOIN_REASONS.DEFAULT}),Promise.resolve(window.bootstrap).then((function(e){return R((0,f.configSetData)(e))})).then((function(){return R((0,l.authInit)())})).then((function(){return R((0,d.initApartmentsData)())})).then((function(){return R((0,f.initSettings)())})).then((function(){return(0,_.initHistory)(R,b)})).then((function(){return R((0,i.restore)())})).then((function(){return R((0,p.initLoadNews)())})).then((function(){return R((0,h.loadCollectionVideos)())})).then((function(){R((0,u.default)(w)),R((0,m.showAgeConfirmationPopup)()),R((0,O.initAutoShowOffer)()),R((0,m.initAutoShow)())})).catch((function(e){console.error(e)}))},{"./actions/apartments":4,"./actions/auth":5,"./actions/collection":6,"./actions/config":7,"./actions/news":15,"./actions/offer":16,"./actions/popup":19,"./actions/snapshots":21,"./actions/topScenesShort":22,"./components/app":55,"./consts":115,"./i18next.init":121,"./initHistory":123,"./store":162,"./utils":168,"./utils/cookie":164,"./utils/localStorage":169,"babel-polyfill":void 0,"core-js/es/symbol":void 0,react:void 0,"react-dom":void 0,"react-redux":void 0,"redux-localstorage-saver":void 0,"whatwg-fetch":void 0}],123:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.history=void 0,r.initHistory=function(e,t){p.listen((function(r){var n=r.location;"REPLACE"!==r.action&&m(n.pathname,{dispatch:e,getState:t})}));var r=p.location.pathname,n=a.default.parse(p.location.search,!0).query;(!r||r.length<2)&&e((0,i.setStartOnRootPathname)(!0));var f=r.split("/").filter(Boolean),h=f.length>0?f[0]:"";if(["hello","hola"].indexOf(h)>=0)!function(e){var t=e.dispatch,r=e.query,n=void 0===r?{}:r;u.default.setEnabled(!1),n.cam&&n.stamp&&(t((0,s.setCurrentScene)({camera:n.cam,ts:n.stamp})),l.default.preselectScene(n.cam,n.stamp));n.lm||n.landingmode||t((0,o.configSetLM)(d.LANDING_MODES.SCENES));t((0,o.configSetMuted)(!0)),p.push("/")}({dispatch:e,getState:t,query:n});else{u.default.setEnabled(!0);var S=(0,c.getLanguage)();e((0,i.setLanguage)(S)),m(r,{dispatch:e,getState:t})}(function(e,t){(0,t.dispatch)((0,o.configParseQuery)(e))})(n,{dispatch:e,getState:t}),p.replace({search:""})};var n=e("history"),a=f(e("url")),o=e("./actions/config"),i=e("./actions/current"),s=e("./actions/landing"),u=f(e("./SlivaxHandler")),l=f(e("./utils/events")),c=e("./language"),d=e("./consts");function f(e){return e&&e.__esModule?e:{default:e}}var p=r.history=(0,n.createBrowserHistory)();function m(e,t){var r=t.dispatch,n=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("/");return e.length<4?null:e[3]}(e);r(n?(0,i.setCameraToPlayer)(n):(0,i.setPopular)())}},{"./SlivaxHandler":3,"./actions/config":7,"./actions/current":11,"./actions/landing":12,"./consts":115,"./language":124,"./utils/events":165,history:void 0,url:void 0}],124:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getLanguageFromCache=u,r.getLanguage=function(){var e=l||function(){var e=window.location.pathname.split("/");if(e.length<4)return null;var t=e[1].toLowerCase();if(!o(t)){var r=i(t);return o(r)?r:"en"}return t}()||u()||(t=navigator?i(navigator.language):null,o(t)?t:null)||"en";var t;e!==l&&function(e){(0,n.isLocalStorage)()&&localStorage.setItem(s,e)}(l=e);return l};var n=e("./utils/localStorage"),a=e("./consts");function o(e){return!(!e||-1===a.LANGUAGES.indexOf(e.toLowerCase()))}function i(e){return e?e.indexOf("-")>0?e.slice(0,e.indexOf("-")):e.toLowerCase():null}var s="LNG_LS_ITEM";function u(){return(0,n.isLocalStorage)()?localStorage.getItem(s):null}var l=void 0},{"./consts":115,"./utils/localStorage":169}],125:[function(e,t,r){"use strict";var n,a;n=void 0,a=function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var r;if(null==this)throw new TypeError("'this' is null or undefined");var n=Object(this),a=n.length>>>0;if(0===a)return-1;var o=+t||0;if(Math.abs(o)===1/0&&(o=0),o>=a)return-1;for(r=Math.max(o>=0?o:a-Math.abs(o),0);r<a;){if(r in n&&n[r]===e)return r;r++}return-1});var e=function(e){this.options=this.extend(e,{swfContainerId:"fingerprintjs2",swfPath:"flash/compiled/FontList.swf",detectScreenOrientation:!0,sortPluginsFor:[/palemoon/i]}),this.nativeForEach=Array.prototype.forEach,this.nativeMap=Array.prototype.map};return e.prototype={extend:function(e,t){if(null==e)return t;for(var r in e)null!=e[r]&&t[r]!==e[r]&&(t[r]=e[r]);return t},log:function(e){window.console&&console.log(e)},get:function(e){var t=[];t=this.userAgentKey(t),t=this.languageKey(t),t=this.colorDepthKey(t),t=this.screenResolutionKey(t),t=this.availableScreenResolutionKey(t),t=this.timezoneOffsetKey(t),t=this.sessionStorageKey(t),t=this.localStorageKey(t),t=this.indexedDbKey(t),t=this.addBehaviorKey(t),t=this.openDatabaseKey(t),t=this.cpuClassKey(t),t=this.platformKey(t),t=this.doNotTrackKey(t),t=this.pluginsKey(t),t=this.canvasKey(t),t=this.webglKey(t),t=this.adBlockKey(t),t=this.hasLiedLanguagesKey(t),t=this.hasLiedResolutionKey(t),t=this.hasLiedOsKey(t),t=this.hasLiedBrowserKey(t),t=this.touchSupportKey(t);var r=this;this.fontsKey(t,(function(t){var n=[];r.each(t,(function(e){var t=e.value;e.value&&void 0!==e.value.join&&(t=e.value.join(";")),n.push(t)}));var a=r.x64hash128(n.join("~~~"),31);return e(a,t)}))},userAgentKey:function(e){return this.options.excludeUserAgent||e.push({key:"user_agent",value:this.getUserAgent()}),e},getUserAgent:function(){return navigator.userAgent},languageKey:function(e){return this.options.excludeLanguage||e.push({key:"language",value:navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage}),e},colorDepthKey:function(e){return this.options.excludeColorDepth||e.push({key:"color_depth",value:screen.colorDepth}),e},screenResolutionKey:function(e){return this.options.excludeScreenResolution?e:this.getScreenResolution(e)},getScreenResolution:function(e){var t;return void 0!==(t=this.options.detectScreenOrientation&&screen.height>screen.width?[screen.height,screen.width]:[screen.width,screen.height])&&e.push({key:"resolution",value:t}),e},availableScreenResolutionKey:function(e){return this.options.excludeAvailableScreenResolution?e:this.getAvailableScreenResolution(e)},getAvailableScreenResolution:function(e){var t;return screen.availWidth&&screen.availHeight&&(t=this.options.detectScreenOrientation?screen.availHeight>screen.availWidth?[screen.availHeight,screen.availWidth]:[screen.availWidth,screen.availHeight]:[screen.availHeight,screen.availWidth]),void 0!==t&&e.push({key:"available_resolution",value:t}),e},timezoneOffsetKey:function(e){return this.options.excludeTimezoneOffset||e.push({key:"timezone_offset",value:(new Date).getTimezoneOffset()}),e},sessionStorageKey:function(e){return!this.options.excludeSessionStorage&&this.hasSessionStorage()&&e.push({key:"session_storage",value:1}),e},localStorageKey:function(e){return!this.options.excludeSessionStorage&&this.hasLocalStorage()&&e.push({key:"local_storage",value:1}),e},indexedDbKey:function(e){return!this.options.excludeIndexedDB&&this.hasIndexedDB()&&e.push({key:"indexed_db",value:1}),e},addBehaviorKey:function(e){return document.body&&!this.options.excludeAddBehavior&&document.body.addBehavior&&e.push({key:"add_behavior",value:1}),e},openDatabaseKey:function(e){return!this.options.excludeOpenDatabase&&window.openDatabase&&e.push({key:"open_database",value:1}),e},cpuClassKey:function(e){return this.options.excludeCpuClass||e.push({key:"cpu_class",value:this.getNavigatorCpuClass()}),e},platformKey:function(e){return this.options.excludePlatform||e.push({key:"navigator_platform",value:this.getNavigatorPlatform()}),e},doNotTrackKey:function(e){return this.options.excludeDoNotTrack||e.push({key:"do_not_track",value:this.getDoNotTrack()}),e},canvasKey:function(e){return!this.options.excludeCanvas&&this.isCanvasSupported()&&e.push({key:"canvas",value:this.getCanvasFp()}),e},webglKey:function(e){return this.options.excludeWebGL?("undefined"==typeof NODEBUG&&this.log("Skipping WebGL fingerprinting per excludeWebGL configuration option"),e):this.isWebGlSupported()?(e.push({key:"webgl",value:this.getWebglFp()}),e):("undefined"==typeof NODEBUG&&this.log("Skipping WebGL fingerprinting because it is not supported in this browser"),e)},adBlockKey:function(e){return this.options.excludeAdBlock||e.push({key:"adblock",value:this.getAdBlock()}),e},hasLiedLanguagesKey:function(e){return this.options.excludeHasLiedLanguages||e.push({key:"has_lied_languages",value:this.getHasLiedLanguages()}),e},hasLiedResolutionKey:function(e){return this.options.excludeHasLiedResolution||e.push({key:"has_lied_resolution",value:this.getHasLiedResolution()}),e},hasLiedOsKey:function(e){return this.options.excludeHasLiedOs||e.push({key:"has_lied_os",value:this.getHasLiedOs()}),e},hasLiedBrowserKey:function(e){return this.options.excludeHasLiedBrowser||e.push({key:"has_lied_browser",value:this.getHasLiedBrowser()}),e},fontsKey:function(e,t){return this.options.excludeJsFonts?this.flashFontsKey(e,t):this.jsFontsKey(e,t)},flashFontsKey:function(e,t){return this.options.excludeFlashFonts?("undefined"==typeof NODEBUG&&this.log("Skipping flash fonts detection per excludeFlashFonts configuration option"),t(e)):this.hasSwfObjectLoaded()?this.hasMinFlashInstalled()?void 0===this.options.swfPath?("undefined"==typeof NODEBUG&&this.log("To use Flash fonts detection, you must pass a valid swfPath option, skipping Flash fonts enumeration"),t(e)):void this.loadSwfAndDetectFonts((function(r){e.push({key:"swf_fonts",value:r.join(";")}),t(e)})):("undefined"==typeof NODEBUG&&this.log("Flash is not installed, skipping Flash fonts enumeration"),t(e)):("undefined"==typeof NODEBUG&&this.log("Swfobject is not detected, Flash fonts enumeration is skipped"),t(e))},jsFontsKey:function(e,t){var r=this;return setTimeout((function(){var n=["monospace","sans-serif","serif"],a=document.getElementsByTagName("body")[0],o=document.createElement("span");o.style.fontSize="72px",o.innerHTML="mmmmmmmmmmlli";var i={},s={};for(var u in n)o.style.fontFamily=n[u],a.appendChild(o),i[n[u]]=o.offsetWidth,s[n[u]]=o.offsetHeight,a.removeChild(o);var l=function(e){var t=!1;for(var r in n){o.style.fontFamily=e+","+n[r],a.appendChild(o);var u=o.offsetWidth!==i[n[r]]||o.offsetHeight!==s[n[r]];a.removeChild(o),t=t||u}return t},c=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Garamond","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"];r.options.extendedJsFonts&&(c=c.concat(["Abadi MT Condensed Light","Academy Engraved LET","ADOBE CASLON PRO","Adobe Garamond","ADOBE GARAMOND PRO","Agency FB","Aharoni","Albertus Extra Bold","Albertus Medium","Algerian","Amazone BT","American Typewriter","American Typewriter Condensed","AmerType Md BT","Andalus","Angsana New","AngsanaUPC","Antique Olive","Aparajita","Apple Chancery","Apple Color Emoji","Apple SD Gothic Neo","Arabic Typesetting","ARCHER","ARNO PRO","Arrus BT","Aurora Cn BT","AvantGarde Bk BT","AvantGarde Md BT","AVENIR","Ayuthaya","Bandy","Bangla Sangam MN","Bank Gothic","BankGothic Md BT","Baskerville","Baskerville Old Face","Batang","BatangChe","Bauer Bodoni","Bauhaus 93","Bazooka","Bell MT","Bembo","Benguiat Bk BT","Berlin Sans FB","Berlin Sans FB Demi","Bernard MT Condensed","BernhardFashion BT","BernhardMod BT","Big Caslon","BinnerD","Blackadder ITC","BlairMdITC TT","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","Bodoni MT Poster Compressed","Bookshelf Symbol 7","Boulder","Bradley Hand","Bradley Hand ITC","Bremen Bd BT","Britannic Bold","Broadway","Browallia New","BrowalliaUPC","Brush Script MT","Californian FB","Calisto MT","Calligrapher","Candara","CaslonOpnface BT","Castellar","Centaur","Cezanne","CG Omega","CG Times","Chalkboard","Chalkboard SE","Chalkduster","Charlesworth","Charter Bd BT","Charter BT","Chaucer","ChelthmITC Bk BT","Chiller","Clarendon","Clarendon Condensed","CloisterBlack BT","Cochin","Colonna MT","Constantia","Cooper Black","Copperplate","Copperplate Gothic","Copperplate Gothic Bold","Copperplate Gothic Light","CopperplGoth Bd BT","Corbel","Cordia New","CordiaUPC","Cornerstone","Coronet","Cuckoo","Curlz MT","DaunPenh","Dauphin","David","DB LCD Temp","DELICIOUS","Denmark","DFKai-SB","Didot","DilleniaUPC","DIN","DokChampa","Dotum","DotumChe","Ebrima","Edwardian Script ITC","Elephant","English 111 Vivace BT","Engravers MT","EngraversGothic BT","Eras Bold ITC","Eras Demi ITC","Eras Light ITC","Eras Medium ITC","EucrosiaUPC","Euphemia","Euphemia UCAS","EUROSTILE","Exotc350 Bd BT","FangSong","Felix Titling","Fixedsys","FONTIN","Footlight MT Light","Forte","FrankRuehl","Fransiscan","Freefrm721 Blk BT","FreesiaUPC","Freestyle Script","French Script MT","FrnkGothITC Bk BT","Fruitger","FRUTIGER","Futura","Futura Bk BT","Futura Lt BT","Futura Md BT","Futura ZBlk BT","FuturaBlack BT","Gabriola","Galliard BT","Gautami","Geeza Pro","Geometr231 BT","Geometr231 Hv BT","Geometr231 Lt BT","GeoSlab 703 Lt BT","GeoSlab 703 XBd BT","Gigi","Gill Sans","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Gisha","Gloucester MT Extra Condensed","GOTHAM","GOTHAM BOLD","Goudy Old Style","Goudy Stout","GoudyHandtooled BT","GoudyOLSt BT","Gujarati Sangam MN","Gulim","GulimChe","Gungsuh","GungsuhChe","Gurmukhi MN","Haettenschweiler","Harlow Solid Italic","Harrington","Heather","Heiti SC","Heiti TC","HELV","Herald","High Tower Text","Hiragino Kaku Gothic ProN","Hiragino Mincho ProN","Hoefler Text","Humanst 521 Cn BT","Humanst521 BT","Humanst521 Lt BT","Imprint MT Shadow","Incised901 Bd BT","Incised901 BT","Incised901 Lt BT","INCONSOLATA","Informal Roman","Informal011 BT","INTERSTATE","IrisUPC","Iskoola Pota","JasmineUPC","Jazz LET","Jenson","Jester","Jokerman","Juice ITC","Kabel Bk BT","Kabel Ult BT","Kailasa","KaiTi","Kalinga","Kannada Sangam MN","Kartika","Kaufmann Bd BT","Kaufmann BT","Khmer UI","KodchiangUPC","Kokila","Korinna BT","Kristen ITC","Krungthep","Kunstler Script","Lao UI","Latha","Leelawadee","Letter Gothic","Levenim MT","LilyUPC","Lithograph","Lithograph Light","Long Island","Lydian BT","Magneto","Maiandra GD","Malayalam Sangam MN","Malgun Gothic","Mangal","Marigold","Marion","Marker Felt","Market","Marlett","Matisse ITC","Matura MT Script Capitals","Meiryo","Meiryo UI","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Tai Le","Microsoft Uighur","Microsoft YaHei","Microsoft Yi Baiti","MingLiU","MingLiU_HKSCS","MingLiU_HKSCS-ExtB","MingLiU-ExtB","Minion","Minion Pro","Miriam","Miriam Fixed","Mistral","Modern","Modern No. 20","Mona Lisa Solid ITC TT","Mongolian Baiti","MONO","MoolBoran","Mrs Eaves","MS LineDraw","MS Mincho","MS PMincho","MS Reference Specialty","MS UI Gothic","MT Extra","MUSEO","MV Boli","Nadeem","Narkisim","NEVIS","News Gothic","News GothicMT","NewsGoth BT","Niagara Engraved","Niagara Solid","Noteworthy","NSimSun","Nyala","OCR A Extended","Old Century","Old English Text MT","Onyx","Onyx BT","OPTIMA","Oriya Sangam MN","OSAKA","OzHandicraft BT","Palace Script MT","Papyrus","Parchment","Party LET","Pegasus","Perpetua","Perpetua Titling MT","PetitaBold","Pickwick","Plantagenet Cherokee","Playbill","PMingLiU","PMingLiU-ExtB","Poor Richard","Poster","PosterBodoni BT","PRINCETOWN LET","Pristina","PTBarnum BT","Pythagoras","Raavi","Rage Italic","Ravie","Ribbon131 Bd BT","Rockwell","Rockwell Condensed","Rockwell Extra Bold","Rod","Roman","Sakkal Majalla","Santa Fe LET","Savoye LET","Sceptre","Script","Script MT Bold","SCRIPTINA","Serifa","Serifa BT","Serifa Th BT","ShelleyVolante BT","Sherwood","Shonar Bangla","Showcard Gothic","Shruti","Signboard","SILKSCREEN","SimHei","Simplified Arabic","Simplified Arabic Fixed","SimSun","SimSun-ExtB","Sinhala Sangam MN","Sketch Rockwell","Skia","Small Fonts","Snap ITC","Snell Roundhand","Socket","Souvenir Lt BT","Staccato222 BT","Steamer","Stencil","Storybook","Styllo","Subway","Swis721 BlkEx BT","Swiss911 XCm BT","Sylfaen","Synchro LET","System","Tamil Sangam MN","Technical","Teletype","Telugu Sangam MN","Tempus Sans ITC","Terminal","Thonburi","Traditional Arabic","Trajan","TRAJAN PRO","Tristan","Tubular","Tunga","Tw Cen MT","Tw Cen MT Condensed","Tw Cen MT Condensed Extra Bold","TypoUpright BT","Unicorn","Univers","Univers CE 55 Medium","Univers Condensed","Utsaah","Vagabond","Vani","Vijaya","Viner Hand ITC","VisualUI","Vivaldi","Vladimir Script","Vrinda","Westminster","WHITNEY","Wide Latin","ZapfEllipt BT","ZapfHumnst BT","ZapfHumnst Dm BT","Zapfino","Zurich BlkEx BT","Zurich Ex BT","ZWAdobeF"]));for(var d=[],f=0,p=c.length;f<p;f++)l(c[f])&&d.push(c[f]);e.push({key:"js_fonts",value:d}),t(e)}),1)},pluginsKey:function(e){return this.options.excludePlugins||(this.isIE()?e.push({key:"ie_plugins",value:this.getIEPlugins()}):e.push({key:"regular_plugins",value:this.getRegularPlugins()})),e},getRegularPlugins:function(){for(var e=[],t=0,r=navigator.plugins.length;t<r;t++)e.push(navigator.plugins[t]);return this.pluginsShouldBeSorted()&&(e=e.sort((function(e,t){return e.name>t.name?1:e.name<t.name?-1:0}))),this.map(e,(function(e){var t=this.map(e,(function(e){return[e.type,e.suffixes].join("~")})).join(",");return[e.name,e.description,t].join("::")}),this)},getIEPlugins:function(){return window.ActiveXObject?this.map(["AcroPDF.PDF","Adodb.Stream","AgControl.AgControl","DevalVRXCtrl.DevalVRXCtrl.1","MacromediaFlashPaper.MacromediaFlashPaper","Msxml2.DOMDocument","Msxml2.XMLHTTP","PDF.PdfCtrl","QuickTime.QuickTime","QuickTimeCheckObject.QuickTimeCheck.1","RealPlayer","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","Scripting.Dictionary","SWCtl.SWCtl","Shell.UIHelper","ShockwaveFlash.ShockwaveFlash","Skype.Detection","TDCCtl.TDCCtl","WMPlayer.OCX","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1"],(function(e){try{return new ActiveXObject(e),e}catch(e){return null}})):[]},pluginsShouldBeSorted:function(){for(var e=!1,t=0,r=this.options.sortPluginsFor.length;t<r;t++){var n=this.options.sortPluginsFor[t];if(navigator.userAgent.match(n)){e=!0;break}}return e},touchSupportKey:function(e){return this.options.excludeTouchSupport||e.push({key:"touch_support",value:this.getTouchSupport()}),e},hasSessionStorage:function(){try{return!!window.sessionStorage}catch(e){return!0}},hasLocalStorage:function(){try{return!!window.localStorage}catch(e){return!0}},hasIndexedDB:function(){return!!window.indexedDB},getNavigatorCpuClass:function(){return navigator.cpuClass?navigator.cpuClass:"unknown"},getNavigatorPlatform:function(){return navigator.platform?navigator.platform:"unknown"},getDoNotTrack:function(){return navigator.doNotTrack?navigator.doNotTrack:"unknown"},getTouchSupport:function(){var e=0,t=!1;void 0!==navigator.maxTouchPoints?e=navigator.maxTouchPoints:void 0!==navigator.msMaxTouchPoints&&(e=navigator.msMaxTouchPoints);try{document.createEvent("TouchEvent"),t=!0}catch(e){}return[e,t,"ontouchstart"in window]},getCanvasFp:function(){var e=[],t=document.createElement("canvas");t.width=2e3,t.height=200,t.style.display="inline";var r=t.getContext("2d");return r.rect(0,0,10,10),r.rect(2,2,6,6),e.push("canvas winding:"+(!1===r.isPointInPath(5,5,"evenodd")?"yes":"no")),r.textBaseline="alphabetic",r.fillStyle="#f60",r.fillRect(125,1,62,20),r.fillStyle="#069",this.options.dontUseFakeFontInCanvas?r.font="11pt Arial":r.font="11pt no-real-font-123",r.fillText("Cwm fjordbank glyphs vext quiz, ",2,15),r.fillStyle="rgba(102, 204, 0, 0.7)",r.font="18pt Arial",r.fillText("Cwm fjordbank glyphs vext quiz, ",4,45),r.globalCompositeOperation="multiply",r.fillStyle="rgb(255,0,255)",r.beginPath(),r.arc(50,50,50,0,2*Math.PI,!0),r.closePath(),r.fill(),r.fillStyle="rgb(0,255,255)",r.beginPath(),r.arc(100,50,50,0,2*Math.PI,!0),r.closePath(),r.fill(),r.fillStyle="rgb(255,255,0)",r.beginPath(),r.arc(75,100,50,0,2*Math.PI,!0),r.closePath(),r.fill(),r.fillStyle="rgb(255,0,255)",r.arc(75,75,75,0,2*Math.PI,!0),r.arc(75,75,25,0,2*Math.PI,!0),r.fill("evenodd"),e.push("canvas fp:"+t.toDataURL()),e.join("~")},getWebglFp:function(){var e,t=function(t){return e.clearColor(0,0,0,1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),"["+t[0]+", "+t[1]+"]"};if(!(e=this.getWebglCanvas()))return null;var r=[],n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n);var a=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.732134444,0]);e.bufferData(e.ARRAY_BUFFER,a,e.STATIC_DRAW),n.itemSize=3,n.numItems=3;var o=e.createProgram(),i=e.createShader(e.VERTEX_SHADER);e.shaderSource(i,"attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}"),e.compileShader(i);var s=e.createShader(e.FRAGMENT_SHADER);return e.shaderSource(s,"precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}"),e.compileShader(s),e.attachShader(o,i),e.attachShader(o,s),e.linkProgram(o),e.useProgram(o),o.vertexPosAttrib=e.getAttribLocation(o,"attrVertex"),o.offsetUniform=e.getUniformLocation(o,"uniformOffset"),e.enableVertexAttribArray(o.vertexPosArray),e.vertexAttribPointer(o.vertexPosAttrib,n.itemSize,e.FLOAT,!1,0,0),e.uniform2f(o.offsetUniform,1,1),e.drawArrays(e.TRIANGLE_STRIP,0,n.numItems),null!=e.canvas&&r.push(e.canvas.toDataURL()),r.push("extensions:"+e.getSupportedExtensions().join(";")),r.push("webgl aliased line width range:"+t(e.getParameter(e.ALIASED_LINE_WIDTH_RANGE))),r.push("webgl aliased point size range:"+t(e.getParameter(e.ALIASED_POINT_SIZE_RANGE))),r.push("webgl alpha bits:"+e.getParameter(e.ALPHA_BITS)),r.push("webgl antialiasing:"+(e.getContextAttributes().antialias?"yes":"no")),r.push("webgl blue bits:"+e.getParameter(e.BLUE_BITS)),r.push("webgl depth bits:"+e.getParameter(e.DEPTH_BITS)),r.push("webgl green bits:"+e.getParameter(e.GREEN_BITS)),r.push("webgl max anisotropy:"+function(e){var t,r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic");return r?(0===(t=e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT))&&(t=2),t):null}(e)),r.push("webgl max combined texture image units:"+e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS)),r.push("webgl max cube map texture size:"+e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE)),r.push("webgl max fragment uniform vectors:"+e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS)),r.push("webgl max render buffer size:"+e.getParameter(e.MAX_RENDERBUFFER_SIZE)),r.push("webgl max texture image units:"+e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)),r.push("webgl max texture size:"+e.getParameter(e.MAX_TEXTURE_SIZE)),r.push("webgl max varying vectors:"+e.getParameter(e.MAX_VARYING_VECTORS)),r.push("webgl max vertex attribs:"+e.getParameter(e.MAX_VERTEX_ATTRIBS)),r.push("webgl max vertex texture image units:"+e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS)),r.push("webgl max vertex uniform vectors:"+e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS)),r.push("webgl max viewport dims:"+t(e.getParameter(e.MAX_VIEWPORT_DIMS))),r.push("webgl red bits:"+e.getParameter(e.RED_BITS)),r.push("webgl renderer:"+e.getParameter(e.RENDERER)),r.push("webgl shading language version:"+e.getParameter(e.SHADING_LANGUAGE_VERSION)),r.push("webgl stencil bits:"+e.getParameter(e.STENCIL_BITS)),r.push("webgl vendor:"+e.getParameter(e.VENDOR)),r.push("webgl version:"+e.getParameter(e.VERSION)),e.getShaderPrecisionFormat?(r.push("webgl vertex shader high float precision:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision),r.push("webgl vertex shader high float precision rangeMin:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).rangeMin),r.push("webgl vertex shader high float precision rangeMax:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).rangeMax),r.push("webgl vertex shader medium float precision:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision),r.push("webgl vertex shader medium float precision rangeMin:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).rangeMin),r.push("webgl vertex shader medium float precision rangeMax:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).rangeMax),r.push("webgl vertex shader low float precision:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.LOW_FLOAT).precision),r.push("webgl vertex shader low float precision rangeMin:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.LOW_FLOAT).rangeMin),r.push("webgl vertex shader low float precision rangeMax:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.LOW_FLOAT).rangeMax),r.push("webgl fragment shader high float precision:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision),r.push("webgl fragment shader high float precision rangeMin:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).rangeMin),r.push("webgl fragment shader high float precision rangeMax:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).rangeMax),r.push("webgl fragment shader medium float precision:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision),r.push("webgl fragment shader medium float precision rangeMin:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).rangeMin),r.push("webgl fragment shader medium float precision rangeMax:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).rangeMax),r.push("webgl fragment shader low float precision:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_FLOAT).precision),r.push("webgl fragment shader low float precision rangeMin:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_FLOAT).rangeMin),r.push("webgl fragment shader low float precision rangeMax:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_FLOAT).rangeMax),r.push("webgl vertex shader high int precision:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_INT).precision),r.push("webgl vertex shader high int precision rangeMin:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_INT).rangeMin),r.push("webgl vertex shader high int precision rangeMax:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_INT).rangeMax),r.push("webgl vertex shader medium int precision:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_INT).precision),r.push("webgl vertex shader medium int precision rangeMin:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_INT).rangeMin),r.push("webgl vertex shader medium int precision rangeMax:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_INT).rangeMax),r.push("webgl vertex shader low int precision:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.LOW_INT).precision),r.push("webgl vertex shader low int precision rangeMin:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.LOW_INT).rangeMin),r.push("webgl vertex shader low int precision rangeMax:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.LOW_INT).rangeMax),r.push("webgl fragment shader high int precision:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT).precision),r.push("webgl fragment shader high int precision rangeMin:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT).rangeMin),r.push("webgl fragment shader high int precision rangeMax:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT).rangeMax),r.push("webgl fragment shader medium int precision:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_INT).precision),r.push("webgl fragment shader medium int precision rangeMin:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_INT).rangeMin),r.push("webgl fragment shader medium int precision rangeMax:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_INT).rangeMax),r.push("webgl fragment shader low int precision:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_INT).precision),r.push("webgl fragment shader low int precision rangeMin:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_INT).rangeMin),r.push("webgl fragment shader low int precision rangeMax:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_INT).rangeMax),r.join("~")):("undefined"==typeof NODEBUG&&this.log("WebGL fingerprinting is incomplete, because your browser does not support getShaderPrecisionFormat"),r.join("~"))},getAdBlock:function(){var e=document.createElement("div");e.setAttribute("id","ads");try{return document.body.appendChild(e),!document.getElementById("ads")}catch(e){return!1}},getHasLiedLanguages:function(){if(void 0!==navigator.languages)try{if(navigator.languages[0].substr(0,2)!==navigator.language.substr(0,2))return!0}catch(e){return!0}return!1},getHasLiedResolution:function(){return screen.width<screen.availWidth||screen.height<screen.availHeight},getHasLiedOs:function(){var e,t=navigator.userAgent.toLowerCase(),r=navigator.oscpu,n=navigator.platform.toLowerCase();if(e=t.indexOf("windows phone")>=0?"Windows Phone":t.indexOf("win")>=0?"Windows":t.indexOf("android")>=0?"Android":t.indexOf("linux")>=0?"Linux":t.indexOf("iphone")>=0||t.indexOf("ipad")>=0?"iOS":t.indexOf("mac")>=0?"Mac":"Other",("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&"Windows Phone"!==e&&"Android"!==e&&"iOS"!==e&&"Other"!==e)return!0;if(void 0!==r){if((r=r.toLowerCase()).indexOf("win")>=0&&"Windows"!==e&&"Windows Phone"!==e)return!0;if(r.indexOf("linux")>=0&&"Linux"!==e&&"Android"!==e)return!0;if(r.indexOf("mac")>=0&&"Mac"!==e&&"iOS"!==e)return!0;if(0===r.indexOf("win")&&0===r.indexOf("linux")&&r.indexOf("mac")>=0&&"other"!==e)return!0}return n.indexOf("win")>=0&&"Windows"!==e&&"Windows Phone"!==e||(n.indexOf("linux")>=0||n.indexOf("android")>=0||n.indexOf("pike")>=0)&&"Linux"!==e&&"Android"!==e||(n.indexOf("mac")>=0||n.indexOf("ipad")>=0||n.indexOf("ipod")>=0||n.indexOf("iphone")>=0)&&"Mac"!==e&&"iOS"!==e||0===n.indexOf("win")&&0===n.indexOf("linux")&&n.indexOf("mac")>=0&&"other"!==e||void 0===navigator.plugins&&"Windows"!==e&&"Windows Phone"!==e},getHasLiedBrowser:function(){var e,t=navigator.userAgent.toLowerCase(),r=navigator.productSub;if(("Chrome"==(e=t.indexOf("firefox")>=0?"Firefox":t.indexOf("opera")>=0||t.indexOf("opr")>=0?"Opera":t.indexOf("chrome")>=0?"Chrome":t.indexOf("safari")>=0?"Safari":t.indexOf("trident")>=0?"Internet Explorer":"Other")||"Safari"===e||"Opera"===e)&&"20030107"!==r)return!0;var n,a=eval.toString().length;if(37===a&&"Safari"!==e&&"Firefox"!==e&&"Other"!==e)return!0;if(39===a&&"Internet Explorer"!==e&&"Other"!==e)return!0;if(33===a&&"Chrome"!==e&&"Opera"!==e&&"Other"!==e)return!0;try{throw"a"}catch(e){try{e.toSource(),n=!0}catch(e){n=!1}}return!(!n||"Firefox"===e||"Other"===e)},isCanvasSupported:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},isWebGlSupported:function(){if(!this.isCanvasSupported())return!1;var e,t=document.createElement("canvas");try{e=t.getContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(t){e=!1}return!!window.WebGLRenderingContext&&!!e},isIE:function(){return"Microsoft Internet Explorer"===navigator.appName||!("Netscape"!==navigator.appName||!/Trident/.test(navigator.userAgent))},hasSwfObjectLoaded:function(){return void 0!==window.swfobject},hasMinFlashInstalled:function(){return swfobject.hasFlashPlayerVersion("9.0.0")},addFlashDivNode:function(){var e=document.createElement("div");e.setAttribute("id",this.options.swfContainerId),document.body.appendChild(e)},loadSwfAndDetectFonts:function(e){var t="___fp_swf_loaded";window[t]=function(t){e(t)};var r=this.options.swfContainerId;this.addFlashDivNode();var n={onReady:t};swfobject.embedSWF(this.options.swfPath,r,"1","1","9.0.0",!1,n,{allowScriptAccess:"always",menu:"false"},{})},getWebglCanvas:function(){var e=document.createElement("canvas"),t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){}return t||(t=null),t},each:function(e,t,r){if(null!==e)if(this.nativeForEach&&e.forEach===this.nativeForEach)e.forEach(t,r);else if(e.length===+e.length){for(var n=0,a=e.length;n<a;n++)if(t.call(r,e[n],n,e)==={})return}else for(var o in e)if(e.hasOwnProperty(o)&&t.call(r,e[o],o,e)==={})return},map:function(e,t,r){var n=[];return null==e?n:this.nativeMap&&e.map===this.nativeMap?e.map(t,r):(this.each(e,(function(e,a,o){n[n.length]=t.call(r,e,a,o)})),n)},x64Add:function(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]+t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]+t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]+t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]+t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]},x64Multiply:function(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]*t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]*t[3],r[1]+=r[2]>>>16,r[2]&=65535,r[2]+=e[3]*t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]*t[3],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[2]*t[2],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[3]*t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]},x64Rotl:function(e,t){return 32==(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])},x64LeftShift:function(e,t){return 0==(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]},x64Xor:function(e,t){return[e[0]^t[0],e[1]^t[1]]},x64Fmix:function(e){return e=this.x64Xor(e,[0,e[0]>>>1]),e=this.x64Multiply(e,[4283543511,3981806797]),e=this.x64Xor(e,[0,e[0]>>>1]),e=this.x64Multiply(e,[3301882366,444984403]),e=this.x64Xor(e,[0,e[0]>>>1])},x64hash128:function(e,t){t=t||0;for(var r=(e=e||"").length%16,n=e.length-r,a=[0,t],o=[0,t],i=[0,0],s=[0,0],u=[2277735313,289559509],l=[1291169091,658871167],c=0;c<n;c+=16)i=[255&e.charCodeAt(c+4)|(255&e.charCodeAt(c+5))<<8|(255&e.charCodeAt(c+6))<<16|(255&e.charCodeAt(c+7))<<24,255&e.charCodeAt(c)|(255&e.charCodeAt(c+1))<<8|(255&e.charCodeAt(c+2))<<16|(255&e.charCodeAt(c+3))<<24],s=[255&e.charCodeAt(c+12)|(255&e.charCodeAt(c+13))<<8|(255&e.charCodeAt(c+14))<<16|(255&e.charCodeAt(c+15))<<24,255&e.charCodeAt(c+8)|(255&e.charCodeAt(c+9))<<8|(255&e.charCodeAt(c+10))<<16|(255&e.charCodeAt(c+11))<<24],i=this.x64Multiply(i,u),i=this.x64Rotl(i,31),i=this.x64Multiply(i,l),a=this.x64Xor(a,i),a=this.x64Rotl(a,27),a=this.x64Add(a,o),a=this.x64Add(this.x64Multiply(a,[0,5]),[0,1390208809]),s=this.x64Multiply(s,l),s=this.x64Rotl(s,33),s=this.x64Multiply(s,u),o=this.x64Xor(o,s),o=this.x64Rotl(o,31),o=this.x64Add(o,a),o=this.x64Add(this.x64Multiply(o,[0,5]),[0,944331445]);switch(i=[0,0],s=[0,0],r){case 15:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(c+14)],48));case 14:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(c+13)],40));case 13:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(c+12)],32));case 12:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(c+11)],24));case 11:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(c+10)],16));case 10:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(c+9)],8));case 9:s=this.x64Xor(s,[0,e.charCodeAt(c+8)]),s=this.x64Multiply(s,l),s=this.x64Rotl(s,33),s=this.x64Multiply(s,u),o=this.x64Xor(o,s);case 8:i=this.x64Xor(i,this.x64LeftShift([0,e.charCodeAt(c+7)],56));case 7:i=this.x64Xor(i,this.x64LeftShift([0,e.charCodeAt(c+6)],48));case 6:i=this.x64Xor(i,this.x64LeftShift([0,e.charCodeAt(c+5)],40));case 5:i=this.x64Xor(i,this.x64LeftShift([0,e.charCodeAt(c+4)],32));case 4:i=this.x64Xor(i,this.x64LeftShift([0,e.charCodeAt(c+3)],24));case 3:i=this.x64Xor(i,this.x64LeftShift([0,e.charCodeAt(c+2)],16));case 2:i=this.x64Xor(i,this.x64LeftShift([0,e.charCodeAt(c+1)],8));case 1:i=this.x64Xor(i,[0,e.charCodeAt(c)]),i=this.x64Multiply(i,u),i=this.x64Rotl(i,31),i=this.x64Multiply(i,l),a=this.x64Xor(a,i)}return a=this.x64Xor(a,[0,e.length]),o=this.x64Xor(o,[0,e.length]),a=this.x64Add(a,o),o=this.x64Add(o,a),a=this.x64Fmix(a),o=this.x64Fmix(o),a=this.x64Add(a,o),o=this.x64Add(o,a),("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)+("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)}},e.VERSION="1.1.0",e},void 0!==t&&t.exports?t.exports=a():"function"==typeof define&&define.amd?define(a):n.Fingerprint2=a()},{}],126:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.initFixtime=a;var n=null;function a(e){var t=e-Math.floor((new Date).getTime()/1e3);Math.abs(t)>=20&&(n=t)}function o(e){var t=Math.floor(Date.now()/1e3)+(n||0);return e?t-t%5:t}o.init=a,r.default=o},{}],127:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../utils/fetch"),a=e("../consts");var o=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.urls={},this.setUrls=function(e){var r=e.news,n=e.configuration,a=e.rsm,o=e.pushSubscribe;t.urls={news:r,configuration:n,rsm:a,pushSubscribe:o}},this.handleError=function(e){throw new Error(e)},this.getNews=function(){return(0,n.fetch)("news",{type:"GET",url:t.urls.news}).catch(t.handleError)},this.getCsrfToken=function(){return(0,n.fetch)("csrfToken",{type:"GET",url:t.urls.rsm}).catch(t.handleError)},this.postPushSubscribe=function(e){return(0,n.fetch)("pushSubscribe",{type:"POST",url:t.urls.pushSubscribe,data:e}).catch(t.handleError)},this.getTopScenesShorts=function(){return(0,n.fetch)("getTopScenesShorts",{type:"GET",url:a.TOP_SCENES_SHORT}).catch(t.handleError)},this.getConfiguration=function(){return(0,n.fetch)("configuration",{type:"GET",url:t.urls.configuration}).catch(t.handleError)},this.getCollectionVideos=function(){return(0,n.fetch)("collectionVideos",{type:"GET",url:a.COLLECTION_VIDEOS}).catch(t.handleError)}};r.default=o},{"../consts":115,"../utils/fetch":166}],128:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=e("lodash"),i=(n=o)&&n.__esModule?n:{default:n},s=e("../utils/fsa"),u=e("../actions/apartments");function l(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var c=a({},s.FSA_INITIAL_STATE,{motion:s.FSA_INITIAL_STATE,selectApartmentNumber:void 0}),d=(0,s.createFSAReducer)(u.FETCH_APARTMENTS,c,(function(e,t){var r=t.type,n=t.payload;switch(r){case u.UPDATE_APARTMENT:var o=i.default.findIndex(e.data,(function(e){return e.apartment===n.apartment}));return o<0?e:a({},e,{data:[].concat(l(e.data.slice(0,o)),[n],l(e.data.slice(o+1)))});case u.SET_SELECT_APARTMENT_NUMBER:return a({},e,{selectApartmentNumber:n});default:return e}}));r.default=d},{"../actions/apartments":4,"../utils/fsa":167,lodash:void 0}],129:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=e("../actions/auth"),o={isBlacklistedError:!1,isLoginRequestWasSend:!1,resetPasswordErrorMessage:void 0,resetPasswordIsFetching:!1,resetPasswordShowSuccessMessage:!1};r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1],r=t.type,i=t.payload;switch(r){case a.AUTH_SET:return n({},e,i);case a.AUTH_SET_ERROR:return n({},e,{error:i});case a.AUTH_SET_IS_BLACKLISTED_ERROR:return n({},e,{isBlacklistedError:Boolean(i)});case a.AUTH_SET_IS_FETCHING:return n({},e,{isFetching:i});case a.AUTH_SET_IS_LOGIN_REQUEST_WAS_SEND:return n({},e,{isLoginRequestWasSend:i});case a.AUTH_SET_RESET_PASSWORD_ERROR_MESSAGE:return n({},e,{resetPasswordErrorMessage:i});case a.AUTH_SET_RESET_PASSWORD_IS_FETCHING:return n({},e,{resetPasswordIsFetching:i});case a.AUTH_SET_RESET_PASSWORD_SHOW_SUCCESS_MESSAGE:return n({},e,{resetPasswordShowSuccessMessage:i});default:return e}}},{"../actions/auth":5}],130:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=e("../actions/collection"),o={videos:0};r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1],r=t.type,i=t.payload;return r===a.COLLECTION_DATA_SET_VIDEOS?n({},e,{videos:i}):e}},{"../actions/collection":6}],131:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=e("../actions/config"),o={settings:{}};r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1],r=t.type,i=t.payload;switch(r){case a.CONFIG_SET_DATA:return n({},e,i);case a.CONFIG_SET_SETTINGS:return n({},e,{settings:i});case a.CONFIG_SET_SEND_START_STREAM:return n({},e,{sendStartStream:i});default:return e}}},{"../actions/config":7}],132:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=e("rlc-components"),o=e("../actions/current"),i=e("../consts"),s=e("../utils/localStorage"),u={viewMode:i.VIEW_MODE.SINGLE,prevViewMode:i.VIEW_MODE.SINGLE,player:0,isAutoFollow:{mode:null,player:null},language:"en",excludeList:[],topScenesIndex:0,startOnRootPathname:!1,isAccessRebillReactivate:(0,s.getAccessRebillReactivate)(),freeActivationState:(0,s.getFreeActivationRequest)()?a.FREE_ACTIVATION_STATE.RESEND:a.FREE_ACTIVATION_STATE.SUCCESS};r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments[1],r=t.type,a=t.payload;switch(r){case o.SET_LANGUAGE:return n({},e,{language:a});case o.SET_CURRENT_PLAYER:return n({},e,{player:a});case o.SET_VIEW_MODE:return n({},e,a,{prevViewMode:e.viewMode});case o.SET_IS_AUTO_FOLLOW:return n({},e,{isAutoFollow:a});case o.SET_EXCLUDE_LIST:return n({},e,{excludeList:a});case o.SET_TOPSCENES_INDEX:return n({},e,{topScenesIndex:a});case o.SET_START_ON_ROOT_PATHNAME:return n({},e,{startOnRootPathname:a});case o.SET_IS_ACCESS_REBILL_REACTIVATE:return n({},e,{isAccessRebillReactivate:a});case o.SET_FREE_ACTIVATION_STATE:return n({},e,{freeActivationState:a});default:return e}}},{"../actions/current":11,"../consts":115,"../utils/localStorage":169,"rlc-components":void 0}],133:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("redux"),a=e("redux-tooltip"),o=O(e("./apartments")),i=O(e("./auth")),s=O(e("./current")),u=O(e("./snapshots")),l=O(e("./md")),c=O(e("./modal")),d=O(e("./config")),f=O(e("./options")),p=O(e("./panels")),m=O(e("./players")),h=O(e("./landing")),S=O(e("./news")),v=O(e("./preview")),E=O(e("./window")),g=O(e("./popup")),y=O(e("./offer")),_=O(e("./collection")),T=O(e("./topScenesShort"));function O(e){return e&&e.__esModule?e:{default:e}}r.default=(0,n.combineReducers)({apartments:o.default,auth:i.default,current:s.default,config:d.default,snapshots:u.default,preview:v.default,options:f.default,panels:p.default,players:m.default,landing:h.default,md:l.default,modal:c.default,news:S.default,tooltip:a.reducer,window:E.default,popup:g.default,offer:y.default,collection:_.default,topScenesShort:T.default})},{"./apartments":128,"./auth":129,"./collection":130,"./config":131,"./current":132,"./landing":134,"./md":135,"./modal":136,"./news":137,"./offer":138,"./options":139,"./panels":140,"./players":141,"./popup":142,"./preview":143,"./snapshots":145,"./topScenesShort":149,"./window":150,redux:void 0,"redux-tooltip":void 0}],134:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=e("../actions/landing"),o={data:{},currentScene:null};r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1],r=t.type,i=t.payload;switch(r){case a.SAVE_SCENES:return n({},e,{data:i});case a.SET_CURRENT_SCENE:return n({},e,{currentScene:i});default:return e}}},{"../actions/landing":12}],135:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=e("../actions/md"),o={apartments:{},cameras:{},isOn:!0};r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1],r=t.type,i=t.payload;switch(r){case a.MD_CLEAN_DATA:return o;case a.MD_SET_APARTMENTS:case a.MD_SET_CAMERAS:case a.MD_SET_IS_ON:return n({},e,i);default:return e}}},{"../actions/md":13}],136:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=e("../actions/modal"),o={show:!1,type:null,meta:null};r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1],r=t.type,i=t.payload;switch(r){case a.MODAL_SET_SHOW:return n({},e,{show:i});case a.MODAL_SET_TYPE:return n({},e,{type:i});case a.MODAL_SET_META:return n({},e,{meta:i});default:return e}}},{"../actions/modal":14}],137:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=e("../actions/news"),o=e("../utils/fsa"),i=n({},o.FSA_INITIAL_STATE,{currentCategory:{},isOpen:!1,isShow:!0});r.default=(0,o.createFSAReducer)(a.FETCH_NEWS_FSA,i,(function(e,t){var r=t.type,o=t.payload;switch(r){case a.SET_CURRENT_CATEGORY:return n({},e,{currentCategory:o});case a.SET_IS_OPEN:return n({},e,{isOpen:o});case a.SET_IS_SHOW:return n({},e,{isShow:o});default:return e}}))},{"../actions/news":15,"../utils/fsa":167}],138:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=e("../actions/offer"),o={activeOfferUids:[]};r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1],r=t.type,i=t.payload;return r===a.SET_ACTIVE_OFFER_UIDS?n({},e,{activeOfferUids:i}):e}},{"../actions/offer":16}],139:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=e("../actions/options"),o={isDisableGroups:!1};r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1],r=t.type,i=t.payload;return r===a.SET_IS_DISABLE_GROUPS?n({},e,i):e}},{"../actions/options":17}],140:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=e("lodash"),i=(n=o)&&n.__esModule?n:{default:n},s=e("../actions/panels"),u=e("../consts"),l=e("../config");function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=i.default.reduce(u.PANELS,(function(e,t){return a({},e,c({},t,void 0===l.PANELS_DEFAULT_STATUS[t]||l.PANELS_DEFAULT_STATUS[t]))}),{});r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments[1],r=t.type,n=t.payload;return i.default.startsWith(r,(0,s.SET_SHOW_PANEL)(""))?a({},e,c({},n.panel,n.isShow)):e}},{"../actions/panels":18,"../config":114,"../consts":115,lodash:void 0}],141:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};r.player=l;var a=e("lodash"),o=e("../actions/current");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s={camera:{},playlist:{},error:{},show:!1,isMuted:!1};function u(e){try{return new URL(e).searchParams.get("session")}catch(e){return null}}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1],r=t.type,a=t.payload;switch(r){case o.SET_IS_MUTED_TO_PLAYER:return n({},e,{isMuted:a.isMuted,show:!0});case o.SET_CAMERA_TO_PLAYER:return n({},e,{camera:a.camera,show:!0});case o.SET_PLAYERS:return n({},e,a,{show:!0});case o.SET_PLAYLIST_TO_PLAYER:return n({},e,{playlist:a.playlist,show:!0});default:return e}}var c={0:s,1:s,2:s,3:s};r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments[1],r=t.type,s=t.payload;switch(r){case o.SET_PLAYERS:return(0,a.reduce)(e,(function(e,t,a){return Number.parseInt(a,10)>3?e:s[a]?n({},e,i({},a,l(t,{type:r,payload:s[a]}))):n({},e,i({},a,n({},t,{show:!1})))}),{});case o.SET_CAMERA_TO_PLAYER:case o.SET_PLAYLIST_TO_PLAYER:case o.SET_IS_MUTED_TO_PLAYER:var d=Math.min(Number.parseInt(s.player,10),3);return n({},e,i({},d,l(e[d],{type:r,payload:s})));case o.SET_ERROR_TO_PLAYER_BY_PLAYER_NUMBER:return e[s.player]?n({},e,i({},s.player,n({},e[s.player],{error:{error:s.error,errorMessage:s.errorMessage}}))):e;case o.SET_ERROR_TO_PLAYER_BY_SESSION_ID:return(0,a.mapValues)(e,(function(e){var t=e.playlist;return t&&t.src&&u(t.src)===s.sessionId?n({},e,{error:{error:s.error,errorMessage:s.errorMessage}}):e}));default:return e}}},{"../actions/current":11,lodash:void 0}],142:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=e("../actions/popup"),o={isShow:!1,ageConfirmation:!1,isShowOffer:!1,isShowUpgradePopup:!1,isShowYearPopup:!1};r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1],r=t.type,i=t.payload;switch(r){case a.SET_IS_SHOW_POPUP:case a.SET_AGE_CONFIRMATION_POPUP:case a.SET_POPUP_PROPS:return n({},e,i);default:return e}}},{"../actions/popup":19}],143:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=e("../actions/preview"),o={disabled:!1,isShow:!1,camera:{},className:"",apartment:{}};r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1],r=t.type,i=t.payload;switch(r){case a.SET_IS_SHOW_PREVIEW:case a.SET_DISABLED_PREVIEW:case a.SET_CAMERA_PREVIEW:case a.SET_CLASSNAME_PREVIEW:case a.SET_APARTMENT_PREVIEW:return n({},e,i);default:return e}}},{"../actions/preview":20}],144:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=e("../../actions/snapshots"),o={snapOnLine:5};r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1],r=t.type,i=t.payload;return r===a.SET_SNAPSHOT_ON_LINES_COUNT?n({},e,{snapOnLine:i}):e}},{"../../actions/snapshots":21}],145:[function(e,t,r){"use strict";var n;Object.defineProperty(r,"__esModule",{value:!0});var a=e("redux"),o=e("../../consts"),i=l(e("./topscenes")),s=l(e("./topcams")),u=l(e("./common"));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.default=(0,a.combineReducers)((c(n={},o.SNAP_TYPES.TOP_CAMS,s.default),c(n,o.SNAP_TYPES.TOP_SCENES,i.default),c(n,"common",u.default),n))},{"../../consts":115,"./common":144,"./topcams":147,"./topscenes":148,redux:void 0}],146:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=e("../../actions/snapshots"),o=e("../../consts"),i=e("../../utils"),s=function(e){return{isFetching:!1,error:null,data:[],linesCount:e===o.SNAP_TYPES.TOP_CAMS?5:10,isShow:!0}};r.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n({},s(e),t.initialState||{}),o={fetchSnapshots:(0,a.FETCH_SNAPSHOTS)(e),setCountSnapshotLines:(0,a.SET_COUNT_SNAPSHOT_LINES)(e),setIsShowSnapshot:(0,a.SET_IS_SHOW_SNAPSHOT)(e)};return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,a=arguments[1],s=a.type,u=a.payload,l=a.error;switch(s){case o.fetchSnapshots:return n({},e,u?l?{error:l}:{data:u,isFetching:!1,ts:(0,i.getTimestamp)(),error:null}:{isFetching:!0,error:null});case o.setCountSnapshotLines:return n({},e,{linesCount:u});case o.setIsShowSnapshot:return n({},e,{isShow:u,linesCount:e.linesCount||1});default:return t.reducer?t.reducer(e,a):e}}}},{"../../actions/snapshots":21,"../../consts":115,"../../utils":168}],147:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,a=e("../../consts"),o=e("./reducerFactory"),i=(n=o)&&n.__esModule?n:{default:n};r.default=(0,i.default)(a.SNAP_TYPES.TOP_CAMS)},{"../../consts":115,"./reducerFactory":146}],148:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=e("../../actions/snapshots"),i=e("../../consts"),s=e("./reducerFactory"),u=(n=s)&&n.__esModule?n:{default:n};r.default=(0,u.default)(i.SNAP_TYPES.TOP_SCENES,{initialState:{index:0},reducer:function(e,t){var r=t.type,n=t.payload;return r===o.SET_TOPSCENES_INDEX?a({},e,{index:n}):e}})},{"../../actions/snapshots":21,"../../consts":115,"./reducerFactory":146}],149:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=e("../actions/topScenesShort");r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scenes:[]},t=arguments[1];return t.type===a.TOP_SCENES_SHORT_SET_DATA?n({},e,{scenes:t.payload}):e}},{"../actions/topScenesShort":22}],150:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=e("../actions/window"),o={width:null,height:null};r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1],r=t.type,i=t.payload;switch(r){case a.SET_WIDTH:return n({},e,{width:i});case a.SET_HEIGHT:return n({},e,{height:i});default:return e}}},{"../actions/window":23}],151:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSelectApartmentNumber=r.getDataForFeature=r.getDataForPremiumModal=r.getCameraOnNextApartment=r.getApartmentByCameraFactory=r.getResultedApartments=r.getGroupedApartments=r.getSortedApartments=r.getApartmentsMD=r.getMotion=r.getApartments=void 0;var n,a=e("reselect"),o=e("lodash"),i=(n=o)&&n.__esModule?n:{default:n},s=e("../consts"),u=e("../utils/selectors"),l=e("./options"),c=e("./current");var d=r.getApartments=(0,a.createSelector)([function(e){return e.apartments.data}],(function(e){return i.default.orderBy(e,"order")})),f=(r.getMotion=(0,a.createSelector)([function(e){return e.apartments.motion.data||{}}],(function(e){return e})),r.getApartmentsMD=(0,a.createSelector)([function(e){return e.md.apartments||{}}],(function(e){return e})),r.getSortedApartments=(0,a.createSelector)([d],(function(e){return i.default.orderBy(e,(function(e){return s.APARTMENT_GROUP_ORDER.indexOf(e.group)}))}))),p=r.getGroupedApartments=(0,a.createSelector)([f,l.getIsDisableGroups],(function(e,t){return i.default.groupBy(e,(function(e){return t?s.ALL_APARTMENTS:e.group}))}));r.getResultedApartments=(0,a.createSelector)([p],(function(e){var t=i.default.reduce(e,(function(e,t,r){return e.push({name:r,sourceCount:t.length,apartments:t,notActive:{}}),e}),[]);return i.default.orderBy(t,(function(e){return s.APARTMENT_GROUP_ORDER.indexOf(e.name)}))})),r.getApartmentByCameraFactory=(0,a.createSelector)([d],(function(e){return function(t){var r=t.camera;if(!t||!r||r.indexOf("_")<0)return null;var n=r.split("_")[0];return(e.filter((function(e){return e.apartment===n}))||[])[0]||{}}})),r.getCameraOnNextApartment=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments[2],n=r||(0,c.getCurrentApartmentNum)(e),a=t?i.default.reverse(f(e).slice()):f(e),o=i.default.findIndex(a,{apartment:n}),s=null,l=(0,u.predicateFilterByUserStatus)(e),d=(0,u.predicateSortByWithReverse)(!1),p=0;!s&&p<a.length;){p+=1,o=(o+=1)<a.length?o:0;var m=i.default.get(a,"["+o+"].cameras"),h=i.default.filter(m,l),S=i.default.sortBy(h,d);s=i.default.head(S)}return s||(s=(0,c.getCurrentCamera)(e)),s},r.getDataForPremiumModal=(0,a.createSelector)([f],(function(e){return{apartments:e,camsCount:i.default.sumBy(e,(function(e){return e.cameras.length}))}})),r.getDataForFeature=(0,a.createSelector)([d],(function(e){var t=[];return i.default.forEach(i.default.groupBy(e,"group"),(function(e,r){t.push({name:r,count:e.length,apartments:e})})),t})),r.getSelectApartmentNumber=function(e){return e.apartments.selectApartmentNumber}},{"../consts":115,"../utils/selectors":174,"./current":155,"./options":158,lodash:void 0,reselect:void 0}],152:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getUpdateMotionInterval=r.getUpdateAparmentsInterval=r.getTopScenesSnapURI=r.getTopCamsSnapURI=r.getAccess=r.getIsActive=r.getIsValid=r.getIsFree=r.getIsStandard=r.getIsPremium=r.getHasReplaySubscription=r.getBaseStaticUrl=void 0,r.getAuthIsFetching=function(e){return e.auth.isFetching},r.getAuthError=function(e){return e.auth.error},r.getAuthIsBlacklistedError=function(e){return e.auth.isBlacklistedError},r.getAuthSendLoginRequest=function(e){return e.auth.isLoginRequestWasSend},r.getAuthResetPasswordIsFetching=function(e){return e.auth.resetPasswordIsFetching},r.getAuthResetPasswordErrorMessage=function(e){return e.auth.resetPasswordErrorMessage},r.getAuthResetPasswordShowSuccessMessage=function(e){return e.auth.resetPasswordShowSuccessMessage},r.getLogin=c,r.getIsAuth=function(e){return!!c(e)},r.getReplaySubscription=p,r.getHasReplay=function(e){return h(e)&&m(e)},r.getUserType=function(e){var t=function(e){return e.auth.user}(e);if(!t.login)return i.USER_TYPES.GUEST;if("active"===t.subscriptionStatus)return t.subscriptionType;if(h(e))return i.USER_TYPES.COMBINED;if(S(e))return i.USER_TYPES.STANDARD;if(v(e))return i.USER_TYPES.FREE;return t.subscriptionType},r.getIsShowPromo=function(e){return 1===e.auth.params.showPromo},r.getApartmentsURI=function(e){return e.auth.config.urls.apartments},r.getTopScenesURI=function(e){return e.auth.config.urls.topScenes},r.getLocaleURI=function(e){return e.auth.config.urls.locale},r.getLoginURI=function(e){return e.auth.config.urls.login},r.getResetPasswordURI=function(e){return e.auth.config.urls.passwordReset},r.getLogoutURI=function(e){return e.auth.config.urls.logout},r.getUserId=function(e){return e.auth.user.id},r.getUserEmail=function(e){return e.auth.user.login},r.getGeoCountry=function(e){return e.auth.geo_country},r.getCurrency=function(e){if("EU"===function(e){return e.auth.geo}(e))return"";return"$"},r.getIsHlsAllowed=function(e){return e.auth.params.allowHls},r.getCurrentPlanPeriod=function(e){var t=e.auth.user.rate;return t?t.period:void 0},r.getYearPlanCurrency=function(e){if("EU"===e.auth.geo)return u.CURRENCY_TYPES.EURO;return u.CURRENCY_TYPES.DOLLAR},r.getCurrentPlanCurrencySymbol=function(e){var t=(e.auth.user||{}).rate;if(!t)return;switch(t.currency){case u.CURRENCY_TYPES.EURO:return"";case u.CURRENCY_TYPES.DOLLAR:return"$";default:return}},r.checkMultiviewAccess=function(e){return g(e)};var n=e("reselect"),a=l(e("lodash")),o=l(e("../libs/fixtime")),i=e("../consts"),s=e("../utils"),u=e("rlc-components");function l(e){return e&&e.__esModule?e:{default:e}}function c(e){return e.auth.user.login}var d=r.getBaseStaticUrl=function(e){return e.auth.config.urls.baseStatic};function f(e){if(!e)return!1;var t=(0,s.getTimestamp)();return e[e.length-1]>t}function p(e){return a.default.get(e,"auth.user.subscriptions.replay",[])}var m=r.getHasReplaySubscription=(0,n.createSelector)([p],(function(e){return f(e)})),h=r.getIsPremium=(0,n.createSelector)((function(e){return a.default.get(e,"auth.user.subscriptions.premium")}),(function(e){return f(e)})),S=r.getIsStandard=(0,n.createSelector)((function(e){return a.default.get(e,"auth.user.subscriptions.standard")}),(function(e){return f(e)})),v=r.getIsFree=(0,n.createSelector)((function(e){return a.default.get(e,"auth.user.subscriptionType")}),(function(e){return"free"===e})),E=r.getIsValid=(0,n.createSelector)((function(e){return a.default.get(e,"auth.user.tokens")}),(function(e){return Array.isArray(e)&&e.some((function(e){return"is_valid"===e}))})),g=r.getIsActive=(0,n.createSelector)([h,S,v,E],(function(e,t,r,n){return e||t||r&&n}));r.getAccess=(0,n.createSelector)([h,S],(function(e,t){return e?i.USER_TYPES.PREMIUM:t?i.USER_TYPES.STANDARD:i.USER_TYPES.GUEST})),r.getTopCamsSnapURI=(0,n.createSelector)([d,function(e){return e.auth.config.urls.snapshotsLatest},function(e){return e.snapshots[i.SNAP_TYPES.TOP_CAMS].ts}],(function(e,t,r){var n=window.location.protocol;return a.default.startsWith(t,"http")||a.default.startsWith(t,"//")?function(e){return e&&""+t+e+".jpg?ts="+(0,o.default)(!0)}:"http:"===n?function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n&&"//snapshots0"+a+"."+e+t+n+".jpg?ts="+r||null}:function(r){return r&&"//"+e+t+r+".jpg?ts="+(0,o.default)(!0)||null}})),r.getTopScenesSnapURI=(0,n.createSelector)([d,function(e){return e.auth.config.urls.snapshotsReplay}],(function(e,t){return function(r,n,o){var i=void 0;a.default.startsWith(t,"http")||a.default.startsWith(t,"//")?i=t:i="http:"===window.location.protocol?"//snapshots0"+o+"."+e+t:"//"+e+t+"&l";return i.replace("${camera}",r).replace("${ts}",n).replace("{{camera}}",r).replace("{{ts}}",n)}}));r.getUpdateAparmentsInterval=(0,n.createSelector)([function(e){return e.auth.config.intervals.updateAparments}],(function(e){return Math.max(Number(e)||0,60)})),r.getUpdateMotionInterval=(0,n.createSelector)([function(e){return e.auth.config.intervals.updateMotionState}],(function(e){return Math.max(Number(e)||0,60)}))},{"../consts":115,"../libs/fixtime":126,"../utils":168,lodash:void 0,reselect:void 0,"rlc-components":void 0}],153:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getMDLevels=r.getNextLevel=r.getCameraOnLevelSelector=r.getCameraForSelectApartmentSelector=r.getNextCamera=r.getCurrentLevelCameras=r.getCamerasListByLevelSelector=r.getCamerasList=void 0;var n,a=e("reselect"),o=e("lodash"),i=(n=o)&&n.__esModule?n:{default:n},s=e("../utils/selectors"),u=e("./preview"),l=e("./current"),c=e("./apartments");var d=function(e){return e.apartments.data},f=r.getCamerasList=(0,a.createSelector)([l.getCurrentApartment],(function(e){return i.default.sortBy(e.cameras,["level","order"])})),p=r.getCamerasListByLevelSelector=(0,a.createSelector)([f],(function(e){return function(t){return i.default.sortBy(i.default.filter(e,(function(e){return Number(i.default.get(e,"level",1))===t})),"order")}}));r.getCurrentLevelCameras=(0,a.createSelector)([l.getCurrentLevel,p],(function(e,t){return t(e)})),r.getNextCamera=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=r&&r.camera||(0,l.getCurrentCamera)(e).camera,o=d(e),u=i.default.find(o,{apartment:a.split("_")[0]});if(i.default.isEmpty(u))return{};var f=t?-1:1,p=i.default.chain(u).get("cameras").filter((0,s.predicateFilterByUserStatus)(e)).sortBy((function(e){return f*e.order})).sortBy((function(e){return f*i.default.parseInt(e.level||"1")})).value();if(0===p.length)return(0,l.getCurrentCamera)(e);for(var m=i.default.findIndex(p,{camera:a}),h=null;!h&&m+1<p.length;)m+=1,h=i.default.get(p,m);return h||n&&p[0]||(0,c.getCameraOnNextApartment)(e,t,u.apartment)},r.getCameraForSelectApartmentSelector=(0,a.createSelector)([d,s.predicateFilterByUserStatus,u.getDisabledPreview,u.getIsShowPreview,u.getCameraPreview],(function(e,t,r,n,a){return function(o){if(!r&&n&&a)return a;var s=i.default.find(e,{apartment:o}),u=i.default.sortBy(s.cameras,["level","order"]);if(!i.default.size(u))return null;var l=i.default.filter(u,t);return 0===l.length?i.default.head(u):i.default.head(l)}})),r.getCameraOnLevelSelector=(0,a.createSelector)([f,s.predicateFilterByUserStatus,u.getDisabledPreview,u.getIsShowPreview,u.getCameraPreview],(function(e,t,r,n,a){return function(o){if(!r&&n&&a)return a;var s=i.default.filter(e,(function(e){return e.level===o}));if(!i.default.size(s))return null;var u=i.default.filter(s,t);return i.default.size(u)?i.default.head(u):i.default.head(s)}})),r.getNextLevel=(0,a.createSelector)([l.getCurrentLevel,l.getCurrentApartmentLevels],(function(e,t){return function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=void 0;return r?(n=e-1)<=0&&(n=t):(n=e+1)>t&&(n=1),n}})),r.getMDLevels=(0,a.createSelector)([function(e){return e.md.cameras},f],(function(e,t){var r=i.default.groupBy(t,(function(e){return e.level||1}));return i.default.reduce(r,(function(t,r,n){var a=i.default.map(r,(function(e){return e.camera}));return i.default.forEach(a,(function(r){t[n]=t[n]||1===e[r]})),t}),{})}))},{"../utils/selectors":174,"./apartments":151,"./current":155,"./preview":160,lodash:void 0,reselect:void 0}],154:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getIsBigUpdate=r.getFreeAllowed=r.getIntervals=r.getDailyLimitOfferInPlayer=r.getLimitOfferInPlayer=void 0,r.getIsActivePromoModeForStandard=function(e){return!!(0,o.getIsActive)(e)&&((0,o.getUserType)(e)===i.USER_TYPES.STANDARD&&Boolean(e.config.settings.topScenesFullListForStandard))};var n=e("reselect"),a=e("rlc-components"),o=e("./auth"),i=e("../consts"),s=e("../utils/offer");r.getLimitOfferInPlayer=(0,n.createSelector)((function(e){return e.config.settings.offerBlocks}),o.getUserType,o.getIsActive,o.getIsValid,(function(e){return Boolean(e.auth.config.rlcHello)}),(function(e,t,r,n,o){if(Array.isArray(e))return e.find((function(e){var i=e.type;return e.triggers.limits&&i===a.OFFER_TYPES.PLAYER&&(0,s.checkAccessShowOffer)({offerBlock:e,userType:t,isActive:r,isFromAd:o,isValid:n})}))})),r.getDailyLimitOfferInPlayer=(0,n.createSelector)((function(e){return e.config.settings.offerBlocks}),o.getUserType,o.getIsActive,o.getIsValid,(function(e){return Boolean(e.auth.config.rlcHello)}),(function(e,t,r,n,o){if(Array.isArray(e))return e.find((function(e){var i=e.type;return e.triggers.daily_limits&&i===a.OFFER_TYPES.PLAYER&&(0,s.checkAccessShowOffer)({offerBlock:e,userType:t,isActive:r,isFromAd:o,isValid:n})}))})),r.getIntervals=function(e){return e.config.settings.intervals},r.getFreeAllowed=function(e){var t=e.config.settings,r=Boolean(e.auth.config.rlcHello);return!!t.freeAllowed&&r},r.getIsBigUpdate=function(e){var t=e.config.settings;return Boolean(t&&t.bigUpdateEnabled)}},{"../consts":115,"../utils/offer":173,"./auth":152,reselect:void 0,"rlc-components":void 0}],155:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getCurrentApartment=r.getPlayers=void 0,r.getViewMode=u,r.getVideoFormat=function(e){return e.current.videoFormat},r.getLanguage=function(e){return e.current.language},r.getIsAutoFollow=l,r.getCurrentPlayer=c,r.getCurrentAutoFollowMode=function(e){var t=l(e),r=c(e);if(t.player===r)return t.mode;return!1},r.getCurrentCamera=f,r.getCurrentCameraNumber=p,r.getCurrentLevel=function(e){return(f(e)||{}).level},r.getCurrentApartmentNum=m,r.getCurrentApartmentLevels=function(e){var t=h(e);return Number.parseInt(t.levels||1,10)};var n,a=e("reselect"),o=e("lodash"),i=(n=o)&&n.__esModule?n:{default:n},s=e("../consts");function u(e){return Number(e.current.viewMode)}function l(e){return e.current.isAutoFollow}function c(e){return e.current.player}var d=r.getPlayers=(0,a.createSelector)([function(e){return e.players},c,u],(function(e,t,r){switch(r){case s.VIEW_MODE.SINGLE:case s.VIEW_MODE.SINGLE_WIDE:return function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},t,e[t]);case s.VIEW_MODE.TWO_VERTICAL:case s.VIEW_MODE.TWO_HORIZONTAL:return t>1?{2:e[2],3:e[3]}:{0:e[0],1:e[1]};case s.VIEW_MODE.FULLSCREEN:case s.VIEW_MODE.FOUR:default:return e}}));function f(e){return(d(e)[c(e)]||{}).camera}function p(e){return(f(e)||{}).camera||""}function m(e){return p(e).split("_")[0]}var h=r.getCurrentApartment=(0,a.createSelector)([function(e){return e.apartments.data||[]},m],(function(e,t){return i.default.find(e,(function(e){return e.apartment===t}))||{}}))},{"../consts":115,lodash:void 0,reselect:void 0}],156:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getHeadNewsPost=r.getCurrentNews=void 0,r.getCategories=function(e){return e.news.data.categories||a},r.getNews=i,r.getIsOpen=function(e){return e.news.isOpen},r.getIsShow=function(e){return e.news.isShow},r.getCurrentCategory=u;var n=e("reselect"),a=[];var o=[];function i(e){return e.news.data.news||o}var s={};function u(e){return e.news.currentCategory||s}var l=r.getCurrentNews=(0,n.createSelector)([i,u],(function(e,t){return e.filter((function(e){return e.category===t.name}))}));r.getHeadNewsPost=(0,n.createSelector)([l],(function(e){return e.find((function(e){return e.priority}))||e[0]}))},{reselect:void 0}],157:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getShowOfferInUserArea=r.getOfferByType=r.getActiveOffers=void 0;var n=e("reselect"),a=e("rlc-components"),o=e("./auth"),i=e("../utils/offer"),s=r.getActiveOffers=(0,n.createSelector)([function(e){return e.offer.activeOfferUids},function(e){return e.config.settings&&e.config.settings.offerBlocks}],(function(e,t){return Array.isArray(t)?t.filter((function(t){var r=t.uid;return e.includes(r)})):void 0}));r.getOfferByType=function(e,t){return s(e).find((function(e){return e.type===t}))},r.getShowOfferInUserArea=(0,n.createSelector)([function(e){return e.config.settings&&e.config.settings.offerBlocks},o.getUserType,o.getIsActive,o.getIsValid,function(e){return Boolean(e.auth.config.rlcHello)}],(function(e,t,r,n,o){return Array.isArray(e)?e.find((function(e){return e.type===a.OFFER_TYPES.USER_BLOCK&&(0,i.checkAccessShowOffer)({offerBlock:e,userType:t,isActive:r,isFromAd:o,isValid:n})})):void 0}))},{"../utils/offer":173,"./auth":152,reselect:void 0,"rlc-components":void 0}],158:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getIsDisableGroups=function(e){return e.options.isDisableGroups}},{}],159:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getAvailableShowPopupYear=void 0;var n=e("reselect"),a=e("./auth"),o=e("../consts");r.getAvailableShowPopupYear=(0,n.createSelector)([a.getUserType,a.getIsActive,a.getCurrentPlanPeriod],(function(e,t,r){return t&&r<360&&(e===o.USER_TYPES.PREMIUM||e===o.USER_TYPES.COMBINED)}))},{"../consts":115,"./auth":152,reselect:void 0}],160:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getIsShowPreview=function(e){return e.preview.isShow},r.getCameraPreview=function(e){return e.preview.camera},r.getDisabledPreview=function(e){return e.preview.disabled},r.getClassNamePreview=function(e){return e.preview.className}},{}],161:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getTopCamByLevel=r.getTopCamByApartmentFactory=r.getTopScenesData=r.getTopCamsData=void 0,r.getTopScenesRawData=h,r.getSnapshotOnLineCount=S,r.getTopScenesIndex=v;var n=e("reselect"),a=f(e("lodash")),o=f(e("moment")),i=e("../consts"),s=e("../utils/auth"),u=e("./apartments"),l=e("./cameras"),c=e("./current"),d=e("./auth");function f(e){return e&&e.__esModule?e:{default:e}}var p=[];var m=[];function h(e){return e.snapshots[i.SNAP_TYPES.TOP_SCENES].data||m}function S(e){return e.snapshots.common.snapOnLine}function v(e){return e.snapshots[i.SNAP_TYPES.TOP_SCENES].index}var E=r.getTopCamsData=(0,n.createSelector)([function(e){return e.snapshots[i.SNAP_TYPES.TOP_CAMS].data||p},d.getAccess,S],(function(e,t,r){if(t!==i.USER_TYPES.GUEST)return e;var n=a.default.take(a.default.filter(e,{access:i.ACCESS_LEVELS.PUBLIC}),r),o=a.default.filter(e,(function(e){return e.access!==i.ACCESS_LEVELS.PUBLIC}));return a.default.concat(n,o)}));r.getTopScenesData=(0,n.createSelector)([h,v],(function(e,t){var r=(0,o.default)().format("X")-86400*t,n=r-86400;return a.default.filter(e,(function(e){return e.ts>=n&&e.ts<=r}))})),r.getTopCamByApartmentFactory=(0,n.createSelector)([E,u.getApartments,d.getAccess],(function(e,t,r){return function(n){var o=a.default.filter(e,(function(e){return(0,s.getUserHasAccess)(r,e.access)})),i=a.default.find(t,{apartment:n}),u=a.default.find(o,(function(e){return a.default.startsWith(e.name,n)}));if(u)return a.default.find(i.cameras,{camera:u.name});var l=a.default.find(e,(function(e){return a.default.startsWith(e.name,n)}));return l?a.default.find(i.cameras,{camera:l.name}):a.default.get(i,"cameras[0]")}})),r.getTopCamByLevel=(0,n.createSelector)([E,c.getCurrentApartment,l.getCamerasListByLevelSelector,d.getAccess],(function(e,t,r,n){return function(o){var i=r(o);if(0===i.length)return a.default.get(t,"cameras[0]",null);var u=a.default.filter(e,(function(e){return(0,s.getUserHasAccess)(n,e.access)})),l=a.default.filter(i,(function(e){return"active"===e.status})),c=a.default.map(l,(function(e){return e.camera})),d=a.default.find(u,(function(e){return c.indexOf(e.name)>=0}))||a.default.find(e,(function(e){return c.indexOf(e.name)>=0}));return d?a.default.find(l,{camera:d.name}):l[0]}}))},{"../consts":115,"../utils/auth":163,"./apartments":151,"./auth":152,"./cameras":153,"./current":155,lodash:void 0,moment:void 0,reselect:void 0}],162:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=l(e("redux-thunk")),a=e("redux"),o=e("redux-tooltip"),i=l(e("redux-localstorage-saver")),s=e("./config"),u=l(e("./reducers"));function l(e){return e&&e.__esModule?e:{default:e}}var c=a.compose,d=(0,a.createStore)(u.default,c((0,a.applyMiddleware)(n.default,o.middleware,(0,i.default)({items:s.SAVED_ACTIONS,prefix:window.bootstrap.access}))));r.default=d},{"./config":114,"./reducers":133,redux:void 0,"redux-localstorage-saver":void 0,"redux-thunk":void 0,"redux-tooltip":void 0}],163:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validateEmail=void 0,r.getUserHasAccess=function(e,t){if(e===n.USER_TYPES.PREMIUM||e===n.USER_TYPES.COMBINED)return!0;if(t===n.ACCESS_LEVELS.PRIVATE)return e===n.USER_TYPES.STANDARD;return t===n.ACCESS_LEVELS.PUBLIC};var n=e("../consts");r.validateEmail=function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}},{"../consts":115}],164:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setJoinReason=function(e){var t=e.reason,r=e.camera,n=e.timestamp;if(u.indexOf(t)>=0)l({name:s,value:!0,ttl:"120"});else if(function(e){try{var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));if(t)return t[2]}catch(e){return null}return null}(s))return;if(l({name:"reason",value:t,ttl:o}),r){var c=n||(0,a.getTimestamp)();l({name:i,value:r+"_"+c,ttl:o})}else l({name:i,ttl:0})};var n=e("../consts"),a=e("./index"),o="604800",i="radd",s="rprio",u=[n.GO_TO_JOIN_REASONS.JOYSTICK_PAID,n.GO_TO_JOIN_REASONS.JOYSTICK_PUBLIC,n.GO_TO_JOIN_REASONS.JOYSTICK];function l(e){var t=e.name,r=e.value,a=e.ttl;try{document.cookie=t+"="+r+"; max-age="+a+"; path=/; domain=."+n.DOMAIN}catch(e){window.Raven&&window.Raven.captureException(e)}}},{"../consts":115,"./index":168}],165:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=e("url"),s=(n=i)&&n.__esModule?n:{default:n},u=e("../consts"),l=e("./localStorage");function c(e,t){var r=this,n=void 0,a=e;return function(){for(var e=arguments.length,o=Array(e),i=0;i<e;i++)o[i]=arguments[i];return a&&(n=a.apply(t||r,o),a=null),n}}var d="init",f="focus",p="clickplay",m="clickout",h="siteopen",S="initplayer",v="streamstart",E="preselectscene";var g=null;function y(){var e=(new Date).getTime();return null===g&&(g=e),{stamp:e,diff:e-g}}var _=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.playsCount=0,this.tc=t,this.ts=r,this.init=c(this.init,this),this.clickOut=c(this.clickOut,this),this.focus=c(this.focus,this),this.siteOpen=c(this.siteOpen,this),this.initPlayer=c(this.initPlayer,this),this.streamStart=c(this.streamStart,this),this.preselectScene=c(this.preselectScene,this)}return e.prototype.sendEvent=function(e,t){if(this.tc&&this.ts){var r=y(),n=r.stamp,i=r.diff,s=o({event:e,ts:this.ts,tc:this.tc,stamp:n/1e3,diff:i/1e3},"object"===(void 0===t?"undefined":a(t))?t:{params:t});fetch("//lt."+u.DOMAIN+"/et/landing",{method:"PUT",body:JSON.stringify(s)}).catch((function(e){window.Raven&&window.Raven.captureException(e)}))}},e.prototype.init=function(){this.sendEvent(d)},e.prototype.focus=function(){this.sendEvent(f)},e.prototype.runFocusWaiter=function(){var e=this,t=setInterval((function(){document.hasFocus()&&(e.focus(),clearInterval(t))}),100)},e.prototype.clickPlay=function(e){this.playsCount+=1,this.sendEvent(p,{playsCount:this.playsCount,scene:e})},e.prototype.clickOut=function(){this.sendEvent(m,{playsCount:this.playsCount})},e.prototype.siteOpen=function(){this.sendEvent(h)},e.prototype.startStream=function(){this.sendEvent(v)},e.prototype.initPlayer=function(){this.sendEvent(S)},e.prototype.preselectScene=function(e,t){this.sendEvent(E,{camera:e,timestamp:t})},e}(),T=s.default.parse(window.location.href,!0),O=void 0,A=void 0;if(T.query.ts&&T.query.tc){var R=T.query;O=R.tc,A=R.ts,localStorage.setItem("tc",O),localStorage.setItem("ts",A)}else(0,l.isLocalStorage)()&&(O=localStorage.getItem("tc"),A=localStorage.getItem("ts"));r.default=new _(O,A)},{"../consts":115,"./localStorage":169,url:void 0}],166:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};r.fetch=p;var a=l(e("bluebird")),o=l(e("url")),i=e("../SlivaxHandler"),s=l(i),u=e("./index");function l(e){return e&&e.__esModule?e:{default:e}}a.default.config({warnings:!1,cancellation:!0});var c={},d=void 0,f={type:"GET",retries:3,interval:1e3,timeoutOverall:0,timeoutItem:0,cache:!0,log:!1};function p(e,t){var r=n({},f,t);return void 0!==c[e]&&(clearTimeout(d),c[e].cancel()),c[e]=new a.default((function(t,a,l){var c=Date.now();function f(t,n,o){var u=Date.now();if(n>0&&(0===r.timeoutOverall||u-c<r.timeoutOverall))d=setTimeout((function(){o(n-1)}),r.interval);else{var l=void 0;try{l=JSON.parse(t.responseText)}catch(e){l="Unknown error. (status:"+t.status+")"}console.error(l),r.log&&s.default.pushMain("error.fetch."+e+"."+c,{url:r.url,error:l,status:t.status},i.EVENT_LEVELS.ERROR),"function"==typeof r.error?r.error(l):a(l)}}!function d(p){var m=p-1,h=new XMLHttpRequest;r.cache||(void 0===r.data&&(r.data={}),"POST"!==r.type&&(r.data._=(0,u.getTimestamp)()));var S=null,v=r.url;if(void 0!==r.data)if("POST"===r.type)S=(0,u.createFormData)(r.data);else{var E=o.default.parse(v,!0);E.query=n({},E.query,r.data),v=o.default.format(E)}r.log&&s.default.pushMain("pre.fetch."+e+"."+c,{urlString:v},r.level||i.EVENT_LEVELS.DEBUG),h.open(r.type,v,!0),r.responseType&&(h.responseType=r.responseType);try{h.withCredentials=!0}catch(e){console.error(e),a(e)}h.onload=function(){if(200===this.status){var n=void 0;n=void 0!==r.responseParser&&"function"==typeof r.responseParser?r.responseParser(this):function(e){var t=e.responseText;try{t=JSON.parse(e.responseText)}catch(e){return null}return t}(this),r.log&&s.default.pushMain("post.fetch."+e+"."+c,{urlString:v},r.level||i.EVENT_LEVELS.DEBUG),void 0!==r.success&&"function"==typeof r.success?r.success(n):t(n)}else f(this,m,d)},h.onerror=function(e){f(e,m,d)},l((function(){h.abort(),a(new Error("Fetch canceled"))})),0!==r.timeoutItem&&setTimeout((function(){h.abort()}),r.timeoutItem),h.send(S)}(r.retries)})),c[e]}r.default=p},{"../SlivaxHandler":3,"./index":168,bluebird:void 0,url:void 0}],167:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FSA_INITIAL_STATE=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};r.createFSA=function(e){return function(t){return void 0===t?{type:e}:t instanceof Error?{type:e,error:!0,payload:t}:{type:e,payload:t}}},r.createFSAReducer=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,r=arguments[2];return function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,i=arguments[1],s=i.type,u=i.payload,l=i.error;return s===e?n({},o,u?l?{isFetching:!1,error:l}:{data:u,error:null,isFetching:!1}:{isFetching:!0,error:null}):(0,a.isFunction)(r)&&r(o,{type:s,payload:u,error:l})||o}};var a=e("lodash");var o=r.FSA_INITIAL_STATE={data:[],error:null,isFetching:!1}},{lodash:void 0}],168:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getTimestamp=u,r.getTimestampFloat=function(){return Date.now()/1e3},r.createFormData=function(e){var t=new FormData;return Object.keys(e).forEach((function(r){t.append(r,e[r])})),t},r.getFingerprint=function(){return new Promise((function(e,t){try{(new o.default).get(e)}catch(e){t(e)}}))},r.enableGlobalLoader=c,r.disableGlobalLoader=function(){l(!1)},r.scrollIntoView=function(e,t){var r=d(e).top/(t/15),n=setInterval((function(){d(e).top<0?window.scrollBy(0,r):clearInterval(n)}),15)},r.scrollTo=function(e,t){var r=(e-f())/(t/15),n=setInterval((function(){var t=f(),a=Math.abs(r)<Math.abs(e-t)?r:e-t;e!==f()?window.scrollBy(0,a):clearInterval(n)}),15);setTimeout((function(){return clearInterval(n)}),Math.min(4*t,1e3))},r.inWindow=function(e){if(!e)return!1;var t=window.innerHeight,r=e.clientHeight,n=e.getBoundingClientRect().top;if(t>n&&n+r>0)return!0;return!1},r.getCookie=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},r.onClickJoin=p,r.getOnClickJoinWithReason=function(e){var t=e.reason,r=e.camera,n=e.timestamp;return function(e){(0,s.setJoinReason)({reason:t,camera:r,timestamp:n}),p(e)}},r.getAuthCapabilities=function(){return void 0!==document.createElement("video").canPlayType?"o":"s"},r.getEdgeFromUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.netConnectionUrl,r=e.src;if(!t&&!r)return"";return(t||r).replace("rtmps://","").replace("https://","").split(".")[0]},r.reloadPageWithoutCache=function(){window.location=""+window.location.origin+window.location.pathname+"?_="+u()},r.preloadImages=function(e){try{document.images&&e.forEach((function(e){e&&((new Image).src=e)}))}catch(e){}},r.getIsIpadOS=function(){return"iPad"===navigator.platform||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)};var n,a=e("../libs/fingerprint2"),o=(n=a)&&n.__esModule?n:{default:n},i=e("../consts"),s=e("./cookie");function u(e){var t=Math.floor(Date.now()/1e3);return e?t-t%5:t}function l(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{var t=document.getElementById(i.GLOBAL_LOADER_SELECTOR);t&&(t.style.display=e?null:"none")}catch(e){window.Raven&&window.Raven.captureException(e)}}function c(){l(!0)}function d(e){for(var t=0,r=0,n=e;n&&!Number.isNaN(n.offsetLeft)&&!Number.isNaN(n.offsetTop);)t+=n.offsetLeft-n.scrollLeft,r+=n.offsetTop-n.scrollTop,n=n.offsetParent;return{top:r,left:t}}function f(){return window.pageYOffset||document.documentElement.scrollTop}function p(e){e&&e.preventDefault&&e.preventDefault(),c(),window.location=i.JOIN_URI}},{"../consts":115,"../libs/fingerprint2":125,"./cookie":164}],169:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isLocalStorage=l,r.getPrior=function(){var e=[];if(l())try{var t=localStorage.getItem("prior");t&&""!==t&&(e=JSON.parse(t))}catch(e){window.Raven&&window.Raven.captureException(e)}return e},r.getBalanced=function(){if(l())return c||localStorage.getItem(a.LOCAL_STORAGE_KEYS.BALANCED);return c},r.initBalanced=function(){var e=n.default.parse(window.location.href,!0);s(e.query,"reset_balanced")&&d();s(e.query,"balanced")&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&l()&&(e?localStorage.setItem(a.LOCAL_STORAGE_KEYS.BALANCED,e):d());c=e}(e.query.balanced,s(e.query,"store"))},r.getAllowHls=function(){if(l())return f||localStorage.getItem(a.LOCAL_STORAGE_KEYS.ALLOW_HLS);return f},r.initAllowHls=function(){var e=n.default.parse(window.location.href,!0);s(e.query,"reset_allow_hls")&&l()&&localStorage.removeItem(a.LOCAL_STORAGE_KEYS.ALLOW_HLS);s(e.query,"allow_hls")&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&l()&&localStorage.setItem(a.LOCAL_STORAGE_KEYS.ALLOW_HLS,e);f=e}(!0,s(e.query,"store"))},r.setWasClosedOffer=function(e,t){if(l()){localStorage.setItem(e+"."+a.LOCAL_STORAGE_KEYS.OFFER_CLOSED_DATETIME_UID,t);var r=(0,o.default)();localStorage.setItem(e+"."+a.LOCAL_STORAGE_KEYS.OFFER_CLOSED_DATETIME,r.toISOString())}},r.clearWasClosedOffer=function(e){l()&&(localStorage.removeItem(e+"."+a.LOCAL_STORAGE_KEYS.OFFER_CLOSED_DATETIME_UID),localStorage.removeItem(e+"."+a.LOCAL_STORAGE_KEYS.OFFER_CLOSED_DATETIME))},r.getNumberOfMinutesSinceOfferWasClosed=function(e,t){if(!l()||localStorage.getItem(e+"."+a.LOCAL_STORAGE_KEYS.OFFER_CLOSED_DATETIME_UID)!==t)return;var r=localStorage.getItem(e+"."+a.LOCAL_STORAGE_KEYS.OFFER_CLOSED_DATETIME),n=(0,o.default)(r);if(!r||!n.isValid())return;return(0,o.default)().diff(n,"m")},r.setWasClosedPopupYear=function(e,t){if(l()){localStorage.setItem(e+"."+a.LOCAL_STORAGE_KEYS.POPUP_UID,t);var r=(0,o.default)();localStorage.setItem(e+"."+a.LOCAL_STORAGE_KEYS.POPUP_CLOSED_DATETIME,r.toISOString())}},r.getNumberOfMinutesSincePopupYearWasClosed=function(e,t){if(!l()||localStorage.getItem(e+"."+a.LOCAL_STORAGE_KEYS.POPUP_UID)!==t)return;var r=localStorage.getItem(e+"."+a.LOCAL_STORAGE_KEYS.POPUP_CLOSED_DATETIME),n=(0,o.default)(r);if(!r||!n.isValid())return;return(0,o.default)().diff(n,"m")},r.setWasShowedPopupUserArea=function(){if(l()){var e=(0,o.default)();localStorage.setItem(a.LOCAL_STORAGE_KEYS.POPUP_USER_AREA_SHOWED_DATETIME,e.toISOString())}},r.getNumberOfDaysSincePopupUserAreaWasShowed=function(){var e=localStorage.getItem(a.LOCAL_STORAGE_KEYS.POPUP_USER_AREA_SHOWED_DATETIME),t=(0,o.default)(e);if(!e||!t.isValid())return;return(0,o.default)().diff(t,"days")},r.setRebillReactivateWasSuccessSend=function(){if(l()){var e=(0,o.default)();localStorage.setItem(a.LOCAL_STORAGE_KEYS.REBILL_REACTIVATE_WAS_SUCCESS_SEND_DATETIME,e.toISOString())}},r.getAccessRebillReactivate=function(){var e=localStorage.getItem(a.LOCAL_STORAGE_KEYS.REBILL_REACTIVATE_WAS_SUCCESS_SEND_DATETIME),t=(0,o.default)(e);if(!e||!t.isValid())return!0;return(0,o.default)().diff(t,"hours")>a.REBILL_REACTIVATE_PROGRESS_HOURS},r.setFreeActivationRequest=function(){if(l()){var e=(0,o.default)();localStorage.setItem(a.LOCAL_STORAGE_KEYS.FREE_ACTIVATION_REQUEST,e.toISOString())}},r.getFreeActivationRequest=function(){var e=localStorage.getItem(a.LOCAL_STORAGE_KEYS.FREE_ACTIVATION_REQUEST),t=(0,o.default)(e);if(!e||!t.isValid())return!0;return(0,o.default)().diff(t,"hours")>a.FREE_ACTIVATION_PROGRESS_HOURS},r.setIsCollapsedBigUpdate=function(e){l()&&localStorage.setItem(a.LOCAL_STORAGE_KEYS.IS_COLLAPSED_BIG_UPDATE,e)},r.getIsCollapsedBigUpdate=function(){return"true"===localStorage.getItem(a.LOCAL_STORAGE_KEYS.IS_COLLAPSED_BIG_UPDATE)};var n=i(e("url")),a=e("../consts"),o=i(e("moment"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var u=void 0;function l(){if(void 0!==u)return u;try{localStorage.setItem("localStorage",1),localStorage.removeItem("localStorage"),u=!0}catch(e){Storage.prototype.setItem=function(){},Storage.prototype.getItem=function(){return null},Storage.prototype.removeItem=function(){return null},console.error('Your web browser does not support storing settings locally.\n         In Safari, the most common cause of this is using "Private Browsing Mode".\n         Some settings may not save or some features may not work properly for you.'),u=!1}return u}var c=null;function d(){l()&&localStorage.removeItem(a.LOCAL_STORAGE_KEYS.BALANCED)}var f=null},{"../consts":115,moment:void 0,url:void 0}],170:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=r.LEVELS={DEBUG:"debug",INFO:"info",ERROR:"error"},a=n.ERROR,o=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.info=function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];var o;e.isLevelInfo()&&(o=console).log.apply(o,["["+r.name+"]: "].concat(n))},this.debug=function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];var o;e.isLevelDebug()&&(o=console).log.apply(o,["["+r.name+"]: "].concat(n))},this.error=function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];var o;e.isLevelError()&&(o=console).error.apply(o,["["+r.name+"]: "].concat(n));1===n.length&&n[0]instanceof Error&&window.Raven&&window.Raven.captureException(n[0])},this.name=t||"NO-NAME",e.initSlivax()}return e.getLogger=function(t){return new e(t)},e.setLevel=function(e){if(!Object.keys(n).some((function(t){return n[t]===e})))throw new Error("Logger must be initialized by one of LEVELS");this.level=e},e.isLevelDebug=function(){return e.level===n.DEBUG},e.isLevelInfo=function(){return[n.DEBUG,n.INFO].indexOf(e.level)>=0},e.isLevelError=function(){return[n.DEBUG,n.INFO,n.ERROR].indexOf(e.level)>=0},e}();o.level=a,o.initSlivax=function(){},r.default=o},{}],171:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.handleMaintenanceReason=function(e,t){var r="maintenance_reasons."+e;if(e&&n.default.exists(r))return n.default.t("maintenance_reason")+": "+n.default.t(r);if(t)return n.default.t("maintenance_reasons.default");return n.default.t("maintenance_reasons.default_camera")},r.handleMaintenanceEstimateTime=function(e,t){if(!e||!t)return n.default.t("maintenance.eta.default");var r=(0,a.default)(),o=a.default.unix(e).add(t,"minutes"),i=o.diff(r,"minutes");if(o.isBefore(r)||i<10)return n.default.t("maintenance.eta.default");var s=Math.floor(i/60),u=10*Math.floor(i%60/10);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n.default.t("maintenance.eta.time",{hours:n.default.t("maintenance.eta.hours_interval",{count:e,postProcess:"interval"}),union:n.default.t("maintenance.eta.union_interval",{count:e*t,postProcess:"interval"}),minutes:n.default.t("maintenance.eta.minutes_interval",{count:t,postProcess:"interval"})}).replace(/ {2,}/g," ").replace(/ \./g,".")}(s,u)};var n=o(e("i18next")),a=o(e("moment"));function o(e){return e&&e.__esModule?e:{default:e}}},{i18next:void 0,moment:void 0}],172:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};r.normalizeApartment=u,r.normalizeApartments=function(e){var t=i.default.sortBy(e,"order");return i.default.map(t,u)};var a,o=e("lodash"),i=(a=o)&&a.__esModule?a:{default:a},s=e("../../consts");function u(e){var t=n({},e);t.levels=t.levels||1,t.group=t.group||s.APARTMENT_GROUP_ORDER[0];var r=1,a=1;return t.cameras=i.default.sortBy(e.cameras,["level","order"]).map((function(e){var o=parseInt(e.level,10)||1;o!==r&&(r=o,a=1);var i=t.levels>1?o+"-"+a:""+a;return a+=1,n({},e,{level:o,label:i})})),t.isBedAndBreakfast=t.group&&t.group.toLowerCase()===s.APARTMENT_GROUPS.BED_AND_BREAKFAST.value.toLowerCase(),t}},{"../../consts":115,lodash:void 0}],173:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.checkAccessShowOffer=function(e){var t=e.offerBlock,r=e.userType,n=e.isActive,o=e.isFromAd,i=e.isValid,s=t.access_level,u=s.expired,l=s.guests,c=s.free,d=s.free_not_valid,f=s.member,p=s.guests_from_ad,m=t.access_type,h=m.combined,S=m.standard,v=u&&!n,E=f&&n,g=l&&r===a.USER_TYPES.GUEST&&!o,y=p&&r===a.USER_TYPES.GUEST&&o,_=c&&r===a.USER_TYPES.FREE&&i,T=d&&r===a.USER_TYPES.FREE&&!i,O=S||h,A=(!O||S)&&r===a.USER_TYPES.STANDARD,R=(!O||h)&&(r===a.USER_TYPES.COMBINED||r===a.USER_TYPES.PREMIUM);return g||y||v&&A||v&&R||E&&A||E&&R||T||_},r.getReasonByOfferType=function(e){if(e===n.OFFER_TYPES.MODAL)return a.GO_TO_JOIN_REASONS.MODAL_OFFER;if(e===n.OFFER_TYPES.POPUP)return a.GO_TO_JOIN_REASONS.POPUP_OFFER;if(e===n.OFFER_TYPES.PLAYER)return a.GO_TO_JOIN_REASONS.PLAYER_OFFER;if(e===n.OFFER_TYPES.USER_BLOCK)return a.GO_TO_JOIN_REASONS.USER_BLOCK_OFFER;if(e===n.OFFER_TYPES.TOPSCENES)return a.GO_TO_JOIN_REASONS.TOPSCENES_OFFER;if(e===n.OFFER_TYPES.SNAPSHOTS)return a.GO_TO_JOIN_REASONS.SNAPSHOTS_OFFER;return a.GO_TO_JOIN_REASONS.DEFAULT};var n=e("rlc-components"),a=e("../consts")},{"../consts":115,"rlc-components":void 0}],174:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.predicateFilterByUserStatus=function(e){var t=(0,i.getAccess)(e);if(t===s.USER_TYPES.PREMIUM)return function(){return!0};if(t===s.USER_TYPES.STANDARD)return function(e){return o.default.isArray(e.access)?o.default.includes(e.access,s.ACCESS_LEVELS.PRIVATE)||o.default.includes(e.access,s.ACCESS_LEVELS.PUBLIC):e.access===s.ACCESS_LEVELS.PRIVATE||e.access===s.ACCESS_LEVELS.PUBLIC};return function(e){return o.default.isArray(e.access)?o.default.includes(e.access,s.ACCESS_LEVELS.PUBLIC):e.access===s.ACCESS_LEVELS.PUBLIC}},r.predicateSortByWithReverse=function(e){if(e)return function(e){return-1*e.order};return function(e){return e.order}};var n,a=e("lodash"),o=(n=a)&&n.__esModule?n:{default:n},i=e("../selectors/auth"),s=e("../consts")},{"../consts":115,"../selectors/auth":152,lodash:void 0}]},{},[122]);