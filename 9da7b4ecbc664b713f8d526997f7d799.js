WH.StatusWidget.Timers=function(e,t,n){const i=this;const a=WH.StatusWidget;const o={data:{},parentElement:undefined,regionId:undefined,statusWidgets:{}};this.update=()=>{for(let e in o.data){if(o.data.hasOwnProperty(e)){r(e)}}};function l(e){let t=o.data[e];if(!t){return null}let n={active:false,duration:t.content.duration,id:t.id,imageIcon:t.content.imageIcon,remaining:null,upcoming:[],wowIcon:t.content.wowIcon};let i=WH.Time.unix();for(let e=0,a=t.content.upcoming.length;e<a;e++){let a=t.content.upcoming[e];if(a>i){n.upcoming.push(a)}else if(a+t.content.duration>i){n.active=true;n.remaining=a+t.content.duration-i;if(t.content.imageIconActive){n.imageIcon=t.content.imageIconActive}if(t.content.wowIconActive){n.wowIcon=t.content.wowIconActive}}}return n}function c(e,t,n){o.regionId=e;o.parentElement=t;o.data=n;requestAnimationFrame(i.update)}function r(e){if(o.statusWidgets[e]){o.statusWidgets[e].update();return}let t=l(e);if(!t){WH.error("No data available for timer widget.",o.regionId+", "+e,o.parentElement);return}let n=WH.qs(`#${o.regionId}-group-${t.id}`,o.parentElement);if(!n){WH.error("Could not find timer widget target.",o.regionId+", "+e+", "+t.id,t);return}if(n.offsetParent===null){return}let i=WH.ce("div",{className:"tiw-group-icon"});WH.Tooltip.simple(i,(function(){return WH.ce("span",{style:{whiteSpace:"nowrap"}},WH.ct(i.dataset.timerName)).outerHTML}),"q");WH.ae(n,i);let c=WH.ce("div",{className:"tiw-group-status"});WH.ae(n,c);let r=WH.ce("div",{className:"status-widget-info-text"});let u=function(t){let a=l(e);let c=a.wowIcon||"spell_nature_sleep";let u=WH.TERMS.inactive;let s="inactive";let d=0;let m="";if(a.active){u=WH.TERMS.active;s="active";d=a.remaining;m=WH.Time.formatDeltaWithSymbols(a.remaining)}if(a.imageIcon){i.dataset.iconType="image";i.style.backgroundImage=`url(${a.imageIcon})`}else{i.dataset.iconType="wow";i.style.backgroundImage=`url(${WH.Icon.getIconUrl(c)})`}i.dataset.timerName=u;Slider.setTitle(t,u);n.dataset.timer=c===WH.Icon.UNKNOWN_ZONE?"unknown":s;let g;if(o.data[e].content&&o.data[e].content.urgencies){o.data[e].content.urgencies.forEach((e=>{if(a.remaining<=e.time){g=e.level}}))}Slider.setValue(t,d);Slider.setValueDisplay(t,m,g);WH.ee(r);WH.st(r,WH.TERMS.next+WH.TERMS.colon_punct);let W=a.upcoming.slice(0,3);for(let e=0,t;t=W[e];e++){if(e>0){WH.ae(r,WH.ce("br"))}WH.ae(r,WH.ct(WH.Time.formatFutureTimeAndDay(new Date(t*1e3),o.regionId!=="US")))}};let s=new a(c,{maxValue:t.duration,minValue:0,remaining:true,updateFunction:u,updateInterval:10*WH.Time.MS_SEC,valueDisplay:""});let d=s.getElement("info");d.dataset.label="left";let m=WH.ce("div",{className:"status-widget-info-label"},WH.ct(WH.TERMS.localtime));WH.ae(d,m);WH.ae(d,r);o.statusWidgets[e]=s}c.apply(this,arguments)};