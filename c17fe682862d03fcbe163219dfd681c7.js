(globalThis.webpackChunkHatena_Epic=globalThis.webpackChunkHatena_Epic||[]).push([["commons"],{93358:(e,t,n)=>{"use strict";n.d(t,{k:()=>c});var o=n(27484),r=n.n(o),i=n(57942),s=n(36414),a=n(36500);const c=(e,t)=>{if(t!==(0,i.Z)("global-domain"))return;const n=(0,s.pE)(),o=(0,s._4)(),c=r()(o);let d;if(o&&c.isValid()){d=r()().diff(c,"days")}a.Z.send("visitorAttribute",{visitorAttribute:n,daysSinceRegister:d})}},65939:(e,t,n)=>{"use strict";n.d(t,{pq:()=>c,qc:()=>a});var o=n(50025);const r="ghTracker";let i;const s=e=>{let{eventCategory:t,eventLabel:n}=e;i&&i()(`${r}.send`,{hitType:"event",eventCategory:t,eventAction:"click",eventLabel:n,nonInteraction:!0,transport:"beacon"})},a=e=>{s({eventCategory:e,eventLabel:""})},c=()=>{(0,o.H)(((e,t)=>{i=e,e()("create","UA-29716941-46","auto",r,{clientId:t,storage:"none"})})),document.querySelectorAll("[data-gh-track-category]").forEach((e=>e.addEventListener("click",(t=>{const n=e.getAttribute("data-gh-track-category")||"",o=e.getAttribute("href")||"";s({eventCategory:n,eventLabel:o})}))))}},39769:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});n(65311);var o=n(98860);const r={_setup:function(){this._reloadStarImplement||(this._reloadStarImplement=o.ZP.throttle((()=>{document.dispatchEvent(new Event("hatena:star:requestreload"))}),1e3))},reloadStar:function(){this._setup(),this._reloadStarImplement()}}},59662:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});const o=e=>-1!==navigator.userAgent.indexOf(e),r=o("MSIE")||o("Trident/"),i=o("MSIE 6."),s=o("MSIE 7."),a=o("MSIE 8."),c=o("MSIE 9."),d=o("MSIE 10."),l=o("Trident/")&&o("rv:11."),u=o("Mozilla")&&!o("compatible")&&!o("WebKit"),h=!!window.opera,m=o("WebKit")&&o("Chrome/"),g=o("Chrome/"),p=o("Firefox/"),f=o("Nintendo DSi"),b=o("Nintendo Wii"),w=o("Android"),y=o("Android")&&o("Mobile"),v=o("Android")&&!o("Mobile"),E=o("iPod;")||o("iPhone;")||o("iPhone Simulator;"),Z=o("Windows Phone"),$=o("iPad"),C=o("Mobile"),S={isIE:r,isIE6:i,isIE7:s,isIE8:a,isIE9:c,isIE10:d,isIE11:l,isMozilla:u,isOpera:h,isSafari:m,isChrome:g,isFirefox:p,isDSi:f,isWii:b,isAndroid:w,isAndroidMobile:y,isAndroidTablet:v,isIPhone:E,isWindowsPhone:Z,isIPad:$,isMac:o("Mac OS"),isTouch:C&&!$,isSmartPhone:E||y||Z,isHatenaBlogNativeApp:o("HatenaBlog/"),isTablet:v||$,isObsolete:i||s||a||c||d}},24264:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(59662);const r={userAgent:function(){return o.Z.isTouch?"touch":"pc"}}},96371:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var o=n(65311),r=n.n(o),i=n(70879),s=n(57942),a=n(26410),c=n(36500),d="hatena-diary-dropdown";const l={toggle:function(e,t,n,o){n=d+(n?`-${n}`:e.replace(/\//,"-")),"object"!=typeof(o=o||{})&&(0,i.qR)(`Wrong type of options given: ${o}`);var l,u=r()(document.getElementById(n));if(o.key&&u.length&&u.attr("data-dropdown-key")!==o.key&&(u.remove(),u=r()()),u.length)l="show"in o?!!o.show:!u.is(":visible"),u[l?"fadeIn":"fadeOut"]("fast"),u.trigger(`dropdown:${l?"show":"hide"}:start`);else if("show"in o&&!1===o.show);else{if(u=r()('<div class="hatena-globalheader-window"></div>').hide().attr("id",n).appendTo(document.body),o.key&&u.attr("data-dropdown-key",o.key),o.parent){var h=document.getElementById(`${d}-${o.parent}`);r()(h).on("dropdown:hide:start",(()=>{u.fadeOut("fast")}))}o.className&&u.addClass(o.className);var m=r()('<iframe frameborder="0" width="150" height="300"></iframe>').appendTo(u),g=m[0];/^https?:/.test(e)||(e=(0,s.Z)("admin-domain")+e);var p=c.Z.createForFrame(g,e);if(p.addEventListener("close",(()=>{a.Z.hide(m)})),p.addEventListener("init",(e=>{e&&u.css(e),p.send("init",t)})),p.addEventListener("resize",(e=>{e&&u.css(e)})),p.addEventListener("reload",(e=>{location.reload(!0)})),o.callback&&o.callback(g,p),a.Z.show(u,{destroy:function(){u.remove(),p.destroy()},keepOthers:!!o.parent||!1}),t){if("left"in t||"right"in t||"top"in t){var f=u.offset();"left"in t?f.left=t.left:"right"in t&&(f.left=t.right-u.width()),"top"in t&&(f.top=t.top),u.offset(f)}"height"in t&&u.height(t.height)}}}}},41730:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var o=n(65311),r=n.n(o),i=n(26410),s=n(36500),a=n(57942),c="hatena-diary-feedback";const d={toggle:function(e){var t=document.getElementById(c);if(t)r()(t).fadeToggle("fast");else{var n=r()('<iframe frameborder="0" width="320" height="320"></iframe>').hide().attr("id",c).appendTo(document.body);t=n[0];var o=s.Z.createForFrame(t,`${e}?uri=${encodeURIComponent(location.href)}&page_id=${encodeURIComponent((0,a.Z)("page"))}`);o.addEventListener("close",(()=>{i.Z.hide(n)})),o.addEventListener("resize",(e=>{e&&n.css(e)})),i.Z.show(n,{destroy:function(){n.remove(),o.destroy()},fixScroll:!0})}}}},56769:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var o=n(86965),r=n(70879),i=n(55834),s=n(57942),a=n(65311),c=n.n(a),d=n(36500),l=n(24264),u=n(56412);const h=class{constructor(){const e=!!(0,i.fe)("gh-ng");this.globalheader=this.createGlobalHeader(),this.color=this.getColor(),this.bgColor=this.getBackgroundColor(),this.circleId=this.getCircleId(),this.pageCategory=this.getPageCategory(),this.params=this.getParams();const t=e?this.getURLNextGen():this.getURL();d.Z.listenToFrame(this.globalheader,t),d.Z.addEventListener("init",(e=>{c()((()=>{(0,r.sY)(["init",e]),u.Z.resolveInfo(e)}))}))}createGlobalHeader(){const e=document.querySelector("iframe#globalheader");if(e)return e;{const e=c()('<iframe id="globalheader" style="display: none"></iframe>');return e.appendTo(document.body),e[0]}}getColor(){return(0,o.w)(c()(this.globalheader).css("color"))||"000000"}getBackgroundColor(){let e=null,t=this.globalheader;for(;!e&&t&&t!==document.documentElement;){const n=c()(t).css("backgroundColor");e=(0,o.w)(n),t=t.parentNode}return e||(e="ffffff"),e}getDevice(){const e=(0,s.Z)("globalheader-type")||"auto";return"auto"===e?l.Z.userAgent():e}getCircleId(){return(0,s.Z)("circle-id")}getPageCategory(){return/\.hatena\.ne\.jp(:\d+)?$/.test(location.host)?"admin":(0,s.Z)("blog")?"blogs":this.circleId?"circle":"global"}showUpgradePro(){return"admin"===this.pageCategory&&(0,s.Z)("dont-recommend-pro")&&"false"===(0,s.Z)("dont-recommend-pro")&&(0,s.Z)("pro")&&"false"===(0,s.Z)("pro")}showGMOCampaignLink(){return"admin"===this.pageCategory&&(0,s.Z)("dont-recommend-pro")&&"false"===(0,s.Z)("dont-recommend-pro")}getBrand(){return(0,s.Z)("brand")}getParams(){const e={device:this.getDevice()};return this.circleId&&(e.circle_id=this.circleId),this.showGMOCampaignLink()&&(e.show_upgrade_pro="yes"),this.showGMOCampaignLink()&&(e.show_campaign="yes"),(0,s.Z)("brand")&&(e.brand=(0,s.Z)("brand")),e}getURL(){const e=(0,s.Z)("admin-domain"),t=encodeURIComponent(this.color),n=encodeURIComponent(this.bgColor),o=c().param(this.params),r=encodeURIComponent(location.href);return`${e}/-/globalheader/${t}/${n}/${this.pageCategory}?${o}#${r}`}getURLNextGen(){return`${(0,s.Z)("admin-origin")}/-/globalheader_ng?${c().param(this.params)}#${encodeURIComponent(location.href)}`}}},36843:(e,t,n)=>{"use strict";n.d(t,{Q:()=>g,v:()=>p});var o=n(55992),r=n(57942),i=n(50025),s=n(65311),a=n.n(s),c=n(36500),d=n(56412),l=n(96371),u=n(26410),h=n(10912),m=n(43302);const g=()=>{c.Z.addEventListener("resizeGlobalHeader",(e=>{"100vh"===e?document.body.classList.add("globalheader-expanded"):document.body.classList.remove("globalheader-expanded")}))},p={navigateToEditNewEntry:function(e){d.Z.infoLoaded.then((t=>{t.can_open_editor?h.Z.newEntry({openedFrom:e.openedFrom}):location.href=o.e1("/my/edit")}))},navigateToEditNewEntryWithQuote:function(){d.Z.infoLoaded.then((()=>{location.href=o.e1("/my/edit?sidebar=quote#auto_fillin")}))},navigateToEditNewEntryWithReQuote:function(){d.Z.infoLoaded.then((()=>{location.href=o.e1("/my/edit")}))},init:function(){if(window!==window.parent)return null;if(!c.Z.messenger)return null;g(),(0,i.R)(),c.Z.addEventListener("new-entry",(()=>{p.navigateToEditNewEntry({openedFrom:"globalheader-new-entry"})})),c.Z.addEventListener("new-entry-with-quote",(()=>{p.navigateToEditNewEntryWithQuote()})),c.Z.addEventListener("new-entry-with-requote",(()=>{p.navigateToEditNewEntryWithReQuote()})),c.Z.addEventListener("mymenu",(e=>{m.Z.toggle(e)})),c.Z.addEventListener("servicesmenu",(e=>{l.Z.toggle("/-/menu/services",e)})),c.Z.addEventListener("unread",(()=>{location.href=o.e1("/-/antenna")}));const e=a()('\n          <div id="notify-window" class="hatena-globalheader-window" style="display: none;">\n            <iframe style="border:none" frameBorder="0"\n              class="notify" width="250" height="300"\n              ></iframe>\n          </div>\n        '.trim());let t;c.Z.addEventListener("notify",(n=>{const o=n.BASE;if(t){if(t.is(":visible"))return void u.Z.hide(t);t.remove()}t=e.clone(),t.css({left:n.left-250+32});t.find("iframe").attr("src",`https://www${o}/notify/notices.iframe?${(new Date).getTime()}`),t.appendTo(document.body).fadeIn("fast"),u.Z.show(t,{fixScroll:!0})})),c.Z.addEventListener("blogmenu",(e=>{const t={};(0,r.Z)("blog")&&(t.blog=location.href,"entry"===(0,r.Z)("page")&&a()('article.entry:not([class~="no-entry"])').length>0&&(t.blog_permalink=1));const n=`/-/menu/blogmenu?${a().param(t)}`;l.Z.toggle(n,e,"blogmenu",{callback:(e,t)=>{t.addEventListener("request-report-abuse-info",(()=>{t.send("response-report-abuse-info",window.location.href)})),t.addEventListener("edit-this-entry",(()=>{var e=a()("article.entry").first();h.Z.editEntryInPlace(e,{openedFrom:"blogmenu-edit-this-entry"})})),t.addEventListener("new-entry",(()=>{p.navigateToEditNewEntry({openedFrom:"blogmenu-new-entry"})})),t.addEventListener("subscribe",(e=>{a()(document).trigger("subscribe",e)}))}})}))}}},75225:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var o=n(65311),r=n.n(o),i=n(56769);const s={init:function(){return function(){if("fixed"===r()("#globalheader-container").css("position")){var e=r()("#globalheader-container").height(),t=r()(document);t.on("click",'a[href^="#"]',(()=>{var n=t.scrollTop(),o=0,r=function(){t.scrollTop()!==n?window.scrollBy(0,-e):o++<10&&setTimeout(r,0)};setTimeout(r,0)}))}}(),new i.Z}}},91269:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var o,r,i,s=n(70879);class a{static load(){const e=document.querySelector("html").getAttribute("data-initial-state");if(e)try{a.__STATE__=JSON.parse(e)}catch(e){(0,s.qR)(e,"Cannot parse embedded data-initial-state")}}static get(e){return a.__STATE__[e]}static dumpAllForTest(){return a.__STATE__}}o=a,i={},(r=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(r="__STATE__"))in o?Object.defineProperty(o,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[r]=i;const c=a},37914:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var o,r,i=n(1606),s=n(57942);const a={setup:function(e){e||(e=window.location);const t=e.search.slice(1);r=(0,i.Z)(t),o=e.host},param:function(e){return this.params()[e]?this.params()[e][0]:null},params:function(){return r||this.setup(),r},domainType:function(){o||this.setup();const e=(0,s.Z)("router-type"),t=(0,s.Z)("admin-domain");if(e){if("global"===e)return this.Global;if("admin"===e)return this.Admin;if("blogs"===e)return this.Blogs}return t?t===`//${o}`?this.Admin:this.Blogs:/\.hatena\.ne\.jp(:\d+)?$/.test(o)?this.Admin:this.Blogs},Admin:"Admin",Blogs:"Blogs",Global:"Global"}},50477:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var o,r=n(65311),i=n.n(r),s=n(55992),a=s.vA("/js/external/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML");const c={load:function(e){var t=e.find('img[src*="chart.apis.google.com/chart?cht=tx&chl="]');t.length&&(o||(window.MathJax={AuthorInit:function(){MathJax.Ajax.fileRev=function(e){var t=MathJax.cdnFileVersions[e]||MathJax.cdnVersion||"",n=s.Cr();return t?`?v=${t}${n?`&${n}`:""}`:n?`?${n}`:""}}},o=i().ajax({url:a,dataType:"script",cache:!0})),o.done((()=>{MathJax.Hub.Config({tex2jax:{inlineMath:[],displayMath:[]}}),t.each((function(){var e=i()(this),t=e.attr("alt");if(t){var n=i()('<script type="math/tex">');e.replaceWith(n),MathJax.HTML.setScript(n[0],t)}})),MathJax.Hub.Queue(["Typeset",MathJax.Hub,e[0]])})))}}},26410:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var o=n(65311),r=n.n(o),i=n(98860),s=n(99349);const a={shown:[],init:function(){r()(document.body).click((e=>{i.ZP.any(this.shown,(t=>t.win[0]===e.target||r().contains(t.win[0],e.target)))||this.hideAll()})),this.init=function(){}},show:function(e,t){t||(t={}),this.init(),t.keepOthers||this.hideAll(),t.fixScroll&&s.Z.enable(),t.center&&a._setCenter(e),t.showBackground&&a._showBackground(),this.shown.push({closeExplicitly:!!t.closeExplicitly,win:e,destroy:t.destroy||function(){},fixScroll:!!t.fixScroll,showBackground:!!t.showBackground}),t.then?e.fadeIn("fast",t.then):e.fadeIn("fast")},hide:function(e){for(let t=0,n=this.shown.length;t<n;t++){const n=this.shown[t];if(n.win===e){e.fadeOut("fast",n.destroy),r()(".modal-window-background").fadeOut("fast"),n.fixScroll&&s.Z.disable();break}}},hideAll:function(){const e=[];for(let t=0,n=this.shown.length;t<n;t++)this.shown[t].closeExplicitly?e.push(this.shown[t]):this.hide(this.shown[t].win);this.shown=e},toggle:function(e,t){return e.is(":visible")?(this.hide(e),!1):(this.show(e,t),!0)},_setCenter:function(e){const t=i.ZP.throttle((()=>{if(!r()(e).is(":visible"))return void r()(window).off("resize",t);const n=(r()(window).height()-r()(e).height())/2,o=(r()(window).width()-r()(e).width())/2;r()(e).css({top:n,left:o})}),100);r()(window).on("resize",t),t()},_showBackground:function(){r()("<div>").addClass("modal-window-background").appendTo(document.body)}},c=a},56412:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var o=n(65311),r=n.n(o),i=n(37914),s=n(57942),a=n(70879),c=n(36500);let d=null;const l={Controllers:null,infoLoaded:new Promise((e=>{d=e})),resolveInfo:e=>d(e),setControllers:function(e){l.Controllers=e},loadInfo:function(){const e=decodeURIComponent(location.hash.substring(1)),t=i.Z.param("circle_id");let n;n=t?r().ajax({url:"/api/init/circle",type:"get",dataType:"json",data:{circle_id:t}}):r().ajax({url:"/api/init",type:"get",dataType:"json",data:{name:(0,s.Z)("name"),blog:e}});const o=r().Deferred();return n.done((e=>{const t=e.private;delete e.private,c.Z.send("init",e),o.resolve(e,t)})),o.promise()},device:function(){const e=(0,s.Z)("device");if(!e){const e=`device is undefined, page: ${(0,s.Z)("page")}, location: ${location.href}`;(0,a.qR)(e)}return e||"pc"},loadPage:function(){const e=i.Z.domainType()+("pc"===l.device()?"":"Touch"),t=(0,s.Z)("page");try{l.loadDomainController(e),l.loadController(e,t)}catch(e){(0,a.qR)(e,"toplevel")}},loadDomainController:function(e){if(!l.Controllers)throw new Error("Pages.Controllers not initialized");(0,a.sY)(`Controllers["${e}"]`);const t=l.Controllers[e].__domain__;t&&t.init(),(0,a.sY)(`Controllers["${e}"] done`)},loadController:function(e,t){if(!l.Controllers)throw new Error("Pages.Controllers not initialized");(0,a.sY)(`Controllers["${e}"]["${t}"]`);const n=l.Controllers[e][t];n&&n.init(),(0,a.sY)(`Controllers["${e}"]["${t}"] done`)}},u=l},99349:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var o=n(65311),r=n.n(o);let i=0,s=!1;function a(){r()(window).scrollTop()!==i&&r()(window).scrollTop(i)}const c={enable(){s||(i=r()(window).scrollTop(),r()(window).on("scroll",a),s=!0)},disable(){s&&(r()(window).off("scroll",a),s=!1)}}},55834:(e,t,n)=>{"use strict";n.d(t,{fe:()=>s});var o=n(31955);const r="epic_flag_variants",i=()=>{const e=o.Z.get(r);return e?e.replace(/\s+/,"").split(",").filter((e=>!!e)):[]},s=e=>i().includes(e)},57942:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=e=>{const t=document.documentElement;return t?t.getAttribute(`data-${e}`):null}},33671:(e,t,n)=>{"use strict";n.d(t,{d:()=>o});const o=function(e){e&&document.querySelectorAll("a[data-inherit-via]").forEach((t=>{const n=t.getAttribute("href");n&&t.setAttribute("href",r(n,e))}))},r=(e,t)=>{const n=new URL(e);return n.searchParams.set("via",t),n.toString()}},85861:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(65311),r=n.n(o);const i=()=>{window!==window.parent&&r()("form").each((e=>{const t=r()(e);if(t.attr("data-pass-through-click-jacking-validation"))return;const n=t.find("input[type=submit][name!=delete][name!=draft]"),o=t.find("input[type=submit][name=delete], input[type=submit][name=draft]"),i=e=>r()({elements:e.find(":input:not([data-ignore-click-jacking])")}).serialize();t.addClass("unedited"),n.attr("disabled","disabled"),o.attr("disabled","disabled");const s=i(t),a=setInterval((()=>{o.removeAttr("disabled"),s!==i(t)&&(clearInterval(a),t.removeClass("unedited"),n.removeAttr("disabled"))}),1500)}))}},50025:(e,t,n)=>{"use strict";n.d(t,{H:()=>c,R:()=>d});var o=n(57942),r=n(36500);const i="syncClientId",s="requestSyncClientId";let a=!1;const c=e=>{h(),r.Z.addEventListener(i,(t=>{a||(a=!0,e((()=>window.specialGACommandQueueForClientIdSync),t))})),r.Z.send(s)},d=()=>{r.Z.addEventListener(s,l)},l=()=>{u(),ga((e=>{const t=(e||ga.getAll().find((e=>!!e.get("clientId"))))?.get("clientId"),n=`${location.protocol}${(0,o.Z)("admin-domain")}`;r.Z.send(i,t,n)}))},u=()=>{window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date},h=()=>{var e,t,n,o,r,i;e=window,t=document,n="script",o="specialGACommandQueueForClientIdSync",e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,r=t.createElement(n),i=t.getElementsByTagName(n)[0],r.async=1,r.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(r,i)}},10912:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var o=n(65311),r=n.n(o),i=n(82667),s=n(78899),a=n(85183),c=n(9736);const d={editEntryInPlace:function(e,t){e&&c.O.showEditInPlace(e,{openedFrom:t.openedFrom,update:function(t){var n=r()(t.entry.trim());n.length?(e.replaceWith(n),d.initEntry(n),(0,s.d)(n.parent())):e.remove()}})},newEntry:function(e){let{openedFrom:t}=e;c.O.showEditInPlace(null,{openedFrom:t,update:function(e){const t=r()(e.entry.replace(/^\s+/,"").replace(/\s+$/,""));t.length&&(t.insertBefore("#main article.entry:first"),d.initEntry(t),(0,s.d)(t.parent()),r()("[data-remove-on-new-entry=1]").remove())}})},initEntry:function(e){(0,i.j)(e),e.attr("data-uuid")&&new a.k(e)}},l=d},568:(e,t,n)=>{"use strict";n.d(t,{C:()=>m});var o=n(65311),r=n.n(o),i=n(31955),s=n(55992),a=n(57942),c=n(20996),d=n(76804),l=n(59662),u=n(26410),h=n(36500);const m={render(e){let{entryId:t,$target:n,onUpdate:o}=e;const s=`${(0,a.Z)("admin-origin")}/${(0,a.Z)("author")}/${(0,a.Z)("blog")}/comment?${r().param({entry:t,token:i.Z.get("bk")})}`;l.Z.isHatenaBlogNativeApp?m.renderIframe(s,n,o):m.renderWindow(s,o)},renderWindow(e,t){const n=(0,d.Z)({width:400,height:240,left:Math.floor((screen.width-400)/2),top:Math.floor((screen.height-120)/2)}),o=window.open("","comment",n);if(!o)throw new Error("Failed to open commentWindow");const r=h.Z.createForWindow(o,e);r.addEventListener("close",(()=>{r.destroy(),o.close()})),r.addEventListener("update",(e=>{t(e.comment)}))},renderIframe(e,t,n){const o=r()(`\n      <div class="hatena-iframe-container" style="display: none;">\n        <div class="loading" style="display: none;">\n          <img src="${s.vA("/images/loading.gif")}" class="loading-spinner" alt="loading"/>\n          ${c.Z.text("loading")}\n        </div>\n        <iframe frameborder="0"></iframe>\n      </div>\n    `.trim()).appendTo(document.body),i=t.offset(),d=r()(window).width();let l=440;l+20>d&&(l=d-20,i.left=10);const m=235,g=(0,a.Z)("blog-comments-top-is-new");g&&(i.top-=m,i.top+=t.height()),o.css({width:l,height:m,position:"absolute"}).offset(i);const p=o.find("iframe"),f=o.find(".loading");setTimeout((()=>f.show()),250),p.load((()=>f.remove()));const b=p[0],w=h.Z.createForFrame(b,e);w.addEventListener("update",(e=>{n(e.comment)})),w.addEventListener("close",(()=>{u.Z.hide(o)})),w.addEventListener("resize",(e=>{e&&(g&&e.height!==m&&(e.top=Number(o.css("top"))+m-e.height),o.css(e))})),u.Z.show(o,{closeExplicitly:!0,destroy:()=>{p.remove(),w.destroy()}})}}},94018:(e,t,n)=>{"use strict";n.d(t,{y:()=>h});var o=n(65311),r=n.n(o),i=n(55992),s=n(57942),a=n(20996),c=n(76804),d=n(59662),l=n(26410),u=n(36500);const h={render(e){let{commentId:t,$target:n,onDelete:o}=e;const i=`${(0,s.Z)("admin-origin")}/${(0,s.Z)("author")}/${(0,s.Z)("blog")}/comment/delete?${r().param({comment:t.slice(8)})}`;d.Z.isHatenaBlogNativeApp?h.renderIframe(i,n,o):h.renderWindow(i,o)},renderWindow(e,t){const n=(0,c.Z)({width:300,height:150,left:Math.floor((screen.width-300)/2),top:Math.floor((screen.height-150)/2)}),o=window.open("","delete_comment",n);if(!o)throw new Error("Failed to open deleteCommentWindow");const i=u.Z.createForWindow(o,e),s=()=>{i.destroy(),o.close()};i.addEventListener("delete",(()=>{t()})),i.addEventListener("close",s),r()(document.body).one("focus",s)},renderIframe(e,t,n){const o=r()(`\n          <div class="hatena-iframe-container">\n            <div class="loading" style="display: none;">\n              <img src="${i.vA("/images/loading.gif")}" class="loading-spinner" alt="loading"/>\n              ${a.Z.text("loading")}\n            </div>\n            <iframe frameborder="0"></iframe>\n          </div>\n        `.trim()).appendTo(document.body);o.css({width:440,height:120,position:"absolute"}).offset(t.offset());const s=o.find("iframe"),c=o.find(".loading");setTimeout((()=>c.show()),250),s.load((()=>c.remove()));const d=u.Z.createForFrame(s[0],e);d.addEventListener("delete",(()=>{n()})),d.addEventListener("close",(()=>{l.Z.hide(o)})),l.Z.show(o,{destroy:()=>{s.remove(),d.destroy()}})}}},91367:(e,t,n)=>{"use strict";n.d(t,{k:()=>u});var o=n(65311),r=n.n(o),i=n(57942),s=n(78899),a=n(54948),c=n(568),d=n(94018),l=n(56412);class u{constructor(e){if(this.$entry=e,this.$container=e.find(".js-comment-box .js-comment"),this.$readMoreLine=this.$entry.find(".read-more-comments"),this.$readMoreButton=this.$readMoreLine.find("a"),this.$leaveCommentButton=this.$entry.find(".js-leave-comment-title"),this.entryId=this.$entry.attr("data-uuid"),this.comments=[],this.hasMore=!1,this.topIsNew=(0,i.Z)("blog-comments-top-is-new"),!this.$container.length)return;this.loadComments(3),l.Z.infoLoaded.then((e=>{this.$leaveCommentButton.toggle(!e.cookie_received||e.commentable)})),this.initEvents()}initEvents(){this.$readMoreButton.on("click",(()=>(this.expandComments(),!1))),this.$leaveCommentButton.on("click",(()=>(this.showAddCommentBox(),!1))),this.$container.on("click",".comment-delete-button",(e=>(this.showDeleteCommentBox(r()(e.currentTarget)),!1)))}expandComments(){this.loadComments(0).then((()=>{if("entry"===(0,i.Z)("page"))return;const e=sessionStorage.getItem("entriesExpandedComments"),t=e?JSON.parse(e):{};t[this.entryId]=!0,sessionStorage.setItem("entriesExpandedComments",JSON.stringify(t))})).catch((()=>{}))}async loadComments(e){return(0,a.P)(this.entryId,e,(()=>{})).then((e=>{e&&e.comments&&(this.comments=e.comments,this.hasMore=e.has_more,this.renderComments())}))}shouldExpandComments(){if("entry"===(0,i.Z)("page"))return!1;let e=!1;try{const t=sessionStorage.getItem("entriesExpandedComments");e=!!(t?JSON.parse(t):{})[this.entryId]}catch(e){}return e}renderComments(){if(0===this.comments.length)return;this.$container.find(".js-entry-comment").remove();const e=r().parseHTML(this.comments.join(""));this.$container.prepend(e),this.hasMore?this.$readMoreLine.show():(this.$readMoreLine.hide(),this.$entry.attr("data-comments-expanded","true")),(0,s.d)(this.$container)}addComment(e){this.topIsNew?this.comments.unshift(e):this.comments.push(e),this.renderComments()}removeComment(e){r()(`#${e}`).fadeOut();const t=this.comments.findIndex((t=>r().parseHTML(t)[0].id===e));-1!==t&&(this.comments.splice(t,1),this.renderComments())}showAddCommentBox(){c.C.render({entryId:this.entryId,$target:this.$leaveCommentButton,onUpdate:e=>this.addComment(e)})}showDeleteCommentBox(e){const t=e.closest("li.entry-comment").attr("id");d.y.render({commentId:t,$target:e,onDelete:()=>this.removeComment(t)})}}},85183:(e,t,n)=>{"use strict";n.d(t,{k:()=>o.k});var o=n(91367)},9736:(e,t,n)=>{"use strict";n.d(t,{O:()=>s});var o=n(65311),r=n.n(o),i=n(57942);class s{static showEditInPlace(e,t){this.$entry=e,this.opts=t;const n=this.getEditorUrl();window.location.assign(n)}static getEditorUrl(){const e={openedFrom:this.opts.openedFrom};this.$entry&&(e.entry=this.$entry.attr("data-uuid")),this.opts.title&&(e.title=this.opts.title),this.opts.body&&(e.body=this.opts.body);return`${(0,i.Z)("admin-domain")}/${(0,i.Z)("author")}/${(0,i.Z)("blog")}/edit?${r().param(e)}`}}},43302:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var o=n(65311),r=n.n(o),i=n(98860),s=n(96371),a=n(41730);const c={dropdown:null,$activeContainer:null,blogToDropdownContainer:{},toggle:function(e){const t=`/-/menu/mymenu?location=${encodeURIComponent(location.href)}`;s.Z.toggle(t,e,"mymenu",{callback:(e,t)=>{c.dropdown=e,t.addEventListener("feedback",(e=>{a.Z.toggle(e.uri)})),t.addEventListener("myblogmenu.init",(e=>{this.initMyBlogMenu(e)})),t.addEventListener("myblogmenu.open",(e=>{var t=this.blogToDropdownContainer[e.blogUri];t.show(),this.$activeContainer=t})),t.addEventListener("myblogmenu.close",(e=>{this.blogToDropdownContainer[e.blogUri].hide(),this.$activeContainer=null}))}}),this.$activeContainer&&this.$activeContainer.is(":hidden")&&this.$activeContainer.fadeIn("fast")},initMyBlogMenu:function(e){var t={top:r()(this.dropdown).offset().top+e.top,right:r()(this.dropdown).offset().left-2,height:266};const n=`/-/menu/myblogmenu?blog=${encodeURIComponent(e.blogUri)}`;s.Z.toggle(n,t,null,{callback:t=>{this.blogToDropdownContainer[e.blogUri]=r()(t).parent(),i.ZP.delay((()=>r()(t).parent().hide()))},key:e.blogUri,parent:"mymenu",className:"hatena-diary-dropdown-myblogs"})}},d=c},54948:(e,t,n)=>{"use strict";n.d(t,{P:()=>d});var o=n(70879),r=n(55992),i=n(347);const s=r.HA("/api/entry/info");let a=null,c={};async function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(c[e])try{return new Promise(((t,n)=>{c[e].resolves.push(t),c[e].rejects.push(n)}))}catch(e){return void(0,o.qR)(e,"loadEntryInfo")}a||(a=window.setTimeout((()=>{!async function(e,t,n,o){const r={e:Object.keys(e),limit:n};try{const t=(await i.ZP.get(s,{params:r})).data;Object.keys(t).forEach((n=>{e[n].resolves.forEach((e=>e(t[n])))})),o&&o()}catch(n){const o=n instanceof Error?n:new Error(String(n));e[t].rejects.forEach((e=>e(o)))}}(c,e,t,n),a=null,c={}}),0));try{return new Promise(((n,o)=>{c[e]={entryId:e,limit:t,rejects:[o],resolves:[n]}}))}catch(e){return void(0,o.qR)(e,"loadEntryInfo")}}},11229:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var o=n(93358),r=n(65939),i=n(70879),s=n(55992),a=n(57942),c=n(33671),d=n(37213),l=n(65311),u=n.n(l),h=n(59662),m=n(74350),g=n(56412);n(92901);const p={init:function(){Messenger.listenToParent(),(0,r.pq)();const e=location.hostname.match(/\.hatena\.[^:]+/)[0];var t=u()("#header"),n=u()("#header-services"),s=u()("#header-notify"),l=u()("#header-unread");const f=decodeURIComponent(location.hash.substring(1)),b=`${(0,a.Z)("admin-origin")}/go?blog=${encodeURIComponent(f)}`;var w;if(document.cookie.match(/\brk=/)?w=u().ajax({type:"get",dataType:"json",url:`https://www${e}/notify/notices.count.json`,data:{services:1},xhrFields:{withCredentials:!0}}):(w=u().Deferred()).reject(),!h.Z.isIE){const e=document.body.getAttribute("data-color");p.renderDropdown(e)}t.delegate(".header-dropdown",{keypress:e=>{13===e.which&&(u()(e.currentTarget).click(),e.preventDefault(),e.stopPropagation())},mouseup:e=>{e.currentTarget.blur()}}),t.find("a.new-entry").on("click",(()=>(Messenger.send("new-entry",{}),(0,r.qc)("new-entry"),!1))),n.find(".header-dropdown").on("click",(t=>{const n=u()(t.currentTarget);return w.done((t=>{Messenger.send("servicesmenu",{BASE:e,right:n.offset().left+n.width(),info:t,location:b})})),(0,r.qc)("services-dropdown"),!1})),s.find(".header-dropdown").on("click",(t=>{const n=u()(t.currentTarget);return Messenger.send("notify",{BASE:e,left:n.offset().left}),s.find(".notify-count").text("").hide(),(0,r.qc)("notify-dropdown"),!1})),w.done((e=>{e.count>0?s.find(".notify-count").text(e.count).show():s.find(".notify-count").text("").hide()})),w.done(m.Z),(0,a.Z)("rkm")&&(0,a.Z)("rkc")&&(0,d.D)().then((e=>{0!==e&&l.find(".unread-count").show()})),g.Z.loadInfo().done((n=>{p.initQuoteStock(n);var o=u()("#header-my");o.on("click",(()=>(Messenger.send("mymenu",{BASE:e,right:o.offset().left+o.width()}),!1))),"blogs"===t.attr("data-page-category")&&(n.is_public||u()(".js-blog-private-badge").show(),n.blog_name&&(u()("#current-blog .current-blog-title").append(document.createTextNode(n.blog_name)),u()("#current-blog .current-blog-title").attr("href",n.blog_url)),p.initBlogDropdown(e)),"admin"===t.attr("data-page-category")&&p.initAdminDropdown()})),Messenger.addEventListener("visitorAttribute",o.k),Messenger.addEventListener("inheritVia",(e=>{(0,i.sY)(["inheritVia",e]),(0,c.d)(e)})),Messenger.addEventListener("newEntryGeometry",(()=>{const e=u()("a.new-entry"),t=e.offset();Messenger.send("newEntryGeometry",{top:t.top,left:t.left,height:e.height(),width:e.width()})}))},coloringSvgHeader:function(e,t){e.onload=null;try{var n=document.body.getAttribute("data-color");u()(e).find("path").attr("fill",n)}catch(e){(0,i.qR)(e,"render logo")}t(u()(e))},renderDropdown:function(e){var t=new Image;t.crossOrigin="Anonymous",t.src=s.vA("/images/header/dropdown@2x.png"),t.onload=()=>{try{t.onload=null;var n=document.createElement("canvas");if(n.setAttribute("width",24),n.setAttribute("height",24),!n.getContext)return;var o=n.getContext("2d");if(o.drawImage(t,0,0),o.globalCompositeOperation="source-in",o.fillStyle=e,o.fillRect(0,0,24,24),!n.toDataURL)return;var r=n.toDataURL(),a=document.createElement("style");a.setAttribute("type","text/css"),a.appendChild(document.createTextNode(`\n          #header span.header-dropdown,\n          #header span.header-dropdown-custom {\n              background: url(${r}) center right no-repeat; background-size: 12px 12px;\n          }\n        `)),document.body.appendChild(a)}catch(e){(0,i.qR)(e,"render logo dropdown"),t.src=s.vA("/images/header/dropdown.gif")}}},initAdminDropdown:function(){const e=u()("#current-blog"),t=e.find(".current-blog-title");Messenger.addEventListener("showBlogInfo",(n=>{e.show(),t.text(n.blogName),n.blogIsPublic||u()(".js-blog-private-badge").show(),u()(".service-menu .edit").hide(),u()(".service-menu .admin-blog").show(),u()("#current-blog .current-blog-title").attr("href",n.blogUri),u()("#current-blog, #my-blogs").on("click",(e=>{const t=u()(e.currentTarget);return Messenger.send("blogmenuAdmin",{left:t.offset().left,blogUri:n.blogUri}),(0,r.qc)("current-blog-title-in-admin"),!1}))}))},initBlogDropdown:function(e){u()("#current-blog").show(),u()("#current-blog, #my-blogs").on("click",(t=>{const n=u()(t.currentTarget);return Messenger.send("blogmenu",{BASE:e,left:n.offset().left}),(0,r.qc)("current-blog-title-in-blogs"),!1}))},initQuoteStock:function(){Messenger.addEventListener("stockQuote",(e=>{e.uri&&e.selected_text||Messenger.send("failStockQuote",{}),u().ajax({url:"/api/quotes",data:{uri:e.uri,body:e.selected_text,rkm:(0,a.Z)("rkm"),rkc:(0,a.Z)("rkc")},cache:!1,type:"post",dataType:"json"}).done((e=>{Messenger.send("successStockQuote",{res:e})})).fail((e=>{Messenger.send("failStockQuote",{res:e})}))})),Messenger.addEventListener("quote-edit-entry",(()=>{Messenger.send("new-entry-with-quote")})),Messenger.addEventListener("requote-edit-entry",(e=>{try{localStorage.setItem("ReQuote",JSON.stringify(e.quote))}catch(e){}Messenger.send("new-entry-with-requote")}))}},f=p},9694:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=class{constructor(){this.footerToggles=document.querySelectorAll(".js-footer-box-heading"),Array.from(this.footerToggles).forEach((e=>{e.addEventListener("click",(()=>{e.parentNode.classList.toggle("is-open")}))}))}}},20996:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var o=n(39305);document.createElement("time");const r={__text_data__:o,getAvailLangs:function(){if(this._availLangs)return this._availLangs;const e=document.documentElement;let t=e?e.getAttribute("data-avail-langs"):"";return t=t?t.split(/\s+/):[],this._availLangs=t,t},setAcceptLang:function(e){const t=new i;t.set("Accept-Language",e,{domain:this.cookieDomain,expires:"+1y",path:"/"}),t.set("_hatena_set_lang",1,{domain:this.cookieDomain,expires:"+1d",path:"/"})},getTextLang:function(){const e=document.documentElement;if(!e)return"ja";return e.getAttribute("lang")||"ja"},text:function(e){const t=arguments,n=this.getTextLang();this.project;let o;try{o=this.__text_data__[n][e]}catch(e){}if(o){const e=o.value,n=o.args;if(n){let o=0;return e.replace(/%s/g,(()=>t[parseInt(n[o++],10)]))}return e}return e},textN:function(e,t){const n=arguments,o=this.getTextLang();t=t||0;this.project;let r;try{r=this.__text_data__[o][e]}catch(e){}if(r){const e=r.quanttype||"o";let o=r.value,i=r.args;if("1_o"===e?1===t&&(o=r.value_1,i=r.args_1):"01_o"===e&&(0!==t&&1!==t||(o=r.value_1,i=r.args_1)),i){let e=0;return o.replace(/%s/,(()=>n[1+parseInt(i[e++],10)]))}return o}return e},_period00:new RegExp(`\\${Number(0).toLocaleString().replace(/0/g,"")}0+$`),number:function(e){return(e+0).toLocaleString().replace(this._period00,"")},numberFormatter:new Intl.NumberFormat(void 0,{style:"decimal",useGrouping:!0}),formatNumber(e){return this.numberFormatter.format(e)},deltaDatetime:function(e){const t=function(e){let t=((new Date).getTime()-e.getTime())/1e3;const n=t<0;return n&&(t=-t),t=Math.floor(t/60),t<60?{num:t,unit:"minutes_n",future:n}:(t=Math.floor(t/60),t<24?{num:t,unit:"hours_n",future:n}:(t=Math.floor(t/24),t<365?{num:t,unit:"days_n",future:n}:(t=Math.floor(t/365),{num:t,unit:"years_n",future:n})))}(e);if(void 0!==t.num){const e=this.textN(t.unit,t.num,t.num);return t.future?this.text("datetime.later",e):this.text("datetime.ago",e)}return e.toLocaleString()},updateTimestamps:function(e){const t=/(\d+-\d+-\d+)T(\d+:\d+:\d+)(?:\.(\d+))?Z/,n=(e=e||document).getElementsByTagName("time");for(let e=0,o=n.length;e<o;e++){const o=n[e];if(o._date)continue;const r=null!==o.getAttribute("data-relative"),i=null!==o.getAttribute("data-local");if(!r&&!i)continue;const s=o.getAttribute("datetime"),a=o.getAttribute("data-epoch");if(!s&&!a)continue;let c;if(s&&s.match(t)?c=new Date(s):a&&a.match(/^\d+$/)&&(c=new Date(+a)),c){if(r)try{o.innerHTML=this.deltaDatetime(c)}catch(e){}i&&(o.innerHTML=c.toLocaleString())}}},setupTimestampUpdater:function(){this._timestampUpdaterEnabled||(this._timestampUpdaterEnabled=!0,this.updateTimestamps(),setInterval((()=>{r.updateTimestamps()}),6e4))},project:"Epic",textDataFileNameStemSuffix:"",textDataDirName:"",dataHost:location.host,cookieDomain:".hatena.ne.jp"};/\.hatena\.com$/i.test(location.hostname)&&(r.cookieDomain=".hatena.com");class i{constructor(e){this.cookies=this.parse(e)}parse(e){const t={},n=(e||document.cookie).split(/;\s*/);for(;n.length;)try{if(!n.shift().replace(/^\s*|\s*$/g,"").match(/^([^=]*)=(.*)$/))continue;let e=RegExp.$1,o=RegExp.$2;if(-1!==o.indexOf("&")){o=o.split(/&/);for(let e=0;e<o.length;e++)o[e]=decodeURIComponent(o[e])}else o=decodeURIComponent(o);e=decodeURIComponent(e),t[e]=o}catch(e){}return t}set(e,t,n){if(this.cookies[e]=t,t instanceof Array){for(let e=0;e<t.length;e++)t[e]=encodeURIComponent(t[e]);t=t.join("&")}else t=encodeURIComponent(t);let o=`${encodeURIComponent(e)}=${t}`;if(("string"==typeof(n=n||{})||n instanceof Date)&&(n={expires:n}),n.expires||(n.expires=this.defaultExpires),/^\+?(\d+)([ymdh])$/.exec(n.expires)){const e=parseInt(RegExp.$1,10),t={y:"FullYear",m:"Month",d:"Date",h:"Hours"}[RegExp.$2],o=new Date;o[`set${t}`](o[`get${t}`]()+e),n.expires=o}return n.expires&&(n.expires.toUTCString&&(n.expires=n.expires.toUTCString()),o+=`; expires=${n.expires}`),n.domain&&(o+=`; domain=${n.domain}`),n.path?o+=`; path=${n.path}`:o+="; path=/",document.cookie=o}get(e){return this.cookies[e]}has(e){return e in this.cookies&&!(e in Object.prototype)}clear(e){this.set(e,"",new Date(0)),delete this.cookies[e]}}const s=r},36500:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var o,r,i,s=n(65311),a=n.n(s),c=n(41960),d=n(70879),l=n(57942),u=n(17187);class h{constructor(e){this.window=e.window,this.key=e.key,this.eventEmitter=new u.EventEmitter,this.messageListener=e=>this.receive(e),window.addEventListener("message",this.messageListener,!1)}send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";this.window.postMessage(JSON.stringify({key:this.key,type:e,data:t}),n)}receive(e){try{const t=JSON.parse(e.data);if(t.key!==this.key)return;this.eventEmitter.emit(t.type,t.data,e.origin)}catch(e){h.ENABLE_DEBUG&&(0,d.sY)(`${e.name}: ${e.message}`)}}destroy(){window.removeEventListener("message",this.messageListener,!1)}addEventListener(e,t){t&&this.eventEmitter.on(e,t)}removeEventListener(e,t){this.eventEmitter.removeListener(e,t)}dispatchEvent(){this.eventEmitter.emit(...arguments)}static get SIGNATURE(){return"MZ"}static createKey(){return`${h.SIGNATURE+Math.floor(2821109907456*Math.random()+2821109907456).toString(36).substring(1)}@`}static createForParent(){const e=window.name;return new h({key:e,window:window.opener||window.parent})}static createForFrame(e,t){return h.createForWindow(e.contentWindow,t)}static createForWindow(e,t){const n=h.createKey();return e.name=n,e.location.replace(t),new h({key:n,window:e})}static createForCurrentWindow(){let e=window.name;return""===e&&(e=h.createKey()),new h({key:e,window})}static send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";(0,d.sY)(["send",e,t]);try{h.messenger.send(e,t,n)}catch(t){(0,d.qR)(t,`Messenger.send(${e})`)}}static addEventListener(e,t){try{h.messenger.addEventListener(e,t)}catch(t){(0,d.qR)(t,`Messenger.addEventListener(${e})`)}}static listenToParent(){h.messenger=h.createForParent(),"globalheader"!==(0,l.Z)("page")&&(a()(".close").on("click",(()=>(h.send("close",{name:window.name}),!1))),a()(window).keyup((e=>{"S-ESC"===(0,c.a)(e)&&h.send("close",{name:window.name})})))}static listenToFrame(e,t){h.messenger=h.createForFrame(e,t)}}o=h,i=null,(r=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(r="messenger"))in o?Object.defineProperty(o,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[r]=i;const m=h},46852:(e,t,n)=>{"use strict";n.d(t,{m:()=>r});var o=n(67294);const r=e=>{let{loading:t,nickname:n,hatenaId:r,authors:i}=e;return t?o.createElement(o.Fragment,null,r):i?.length?o.createElement(o.Fragment,null,i.map(((e,t)=>o.createElement(o.Fragment,{key:t},t?o.createElement("span",{className:"user-name-delimiter"},", "):null,o.createElement("span",{className:"user-name-author"},e))))):n?o.createElement(o.Fragment,null,o.createElement("span",{className:"user-name-nickname"},n)," ",o.createElement("span",{className:"user-name-paren"},"("),o.createElement("span",{className:"user-name-hatena-id"},"id:",r),o.createElement("span",{className:"user-name-paren"},")")):o.createElement(o.Fragment,null,r)}},76932:(e,t,n)=>{"use strict";n.d(t,{i:()=>s});var o=n(67294),r=n(76386),i=n(46852);const s=e=>{let{dataloader:t,hatenaID:n,authors:s}=e;const{loading:a,result:c}=(0,r.w)({dataloader:t,hatenaID:n});return o.createElement(i.m,{nickname:c?.nickname,hatenaId:n,loading:a,authors:s})}},68853:(e,t,n)=>{"use strict";n.d(t,{i:()=>a});var o=n(45933),r=n.n(o),i=n(347);const s=async e=>{const t=await i.ZP.get("https://pf-api.hatena.com/profile/profiles",{responseType:"json",params:{name:e},transformRequest:i.Fx,paramsSerializer:i.Km});return e.map((e=>t.data[e]||new Error(`hatenaID:${e} is not found`)))},a=()=>new(r())(s,{maxBatchSize:20})},76386:(e,t,n)=>{"use strict";n.d(t,{w:()=>r});var o=n(52572);const r=e=>{let{dataloader:t,hatenaID:n}=e;return(0,o.r5)((()=>t.load(n)),[t,n])}},21655:(e,t,n)=>{"use strict";n.d(t,{z:()=>s});var o=n(26464),r=n(98860),i=n(57942);class s extends o.T{constructor(e,t,n){super(e,t,n),this.initMessages()}initMessages(){window.addEventListener("storage",(e=>{if("subscription"!==e.key)return;const t=JSON.parse(e.newValue||"")[this.blog.blogUrl];t!==this.user.isSubscribing&&(!0===t&&this.subscribe(),!1===t&&this.unsubscribe())}))}openSubscribeWindow(){const e=location.href,t=encodeURIComponent(e),n=`${(0,i.Z)("admin-domain")}/${(0,i.Z)("author")}/${(0,i.Z)("blog")}/subscribe?from_url=${t}&utm_source=iframe_subscribe_button&utm_medium=button&utm_campaign=subscribe_blog`;window.open(n)}toggleState(){this.user.isSubscribing?(this.unsubscribe(),s.setSubscription(this.blog.blogUrl,!1)):(this.subscribe(),s.setSubscription(this.blog.blogUrl,!0))}static setSubscription(e,t){let n=JSON.parse(window.localStorage.getItem("subscription")||"");n=r.ZP.isObject(n)?n:{},n[e]=t,window.localStorage.setItem("subscription",JSON.stringify(n))}}},26464:(e,t,n)=>{"use strict";n.d(t,{T:()=>c});var o=n(65311),r=n.n(o),i=n(57942);class s{constructor(e){this.isSubscribing=e.isSubscribing||!1,this.isGuest=e.isGuest||!1}toggle(){this.isSubscribing=!this.isSubscribing}}class a{constructor(e){this.subscribersCount=+(e?.subscribersCount||0),this.blogUrl=e.blogUrl,this.blogName=e.blogName,this.requestUrl=e.requestUrl}requestUpdate(e){return r().ajax({type:"POST",url:this.requestUrl,data:{rkm:(0,i.Z)("rkm"),rkc:(0,i.Z)("rkc"),delete:e.isSubscribing?1:0}})}updateSubscribersCount(e){this.subscribersCount+=e.isSubscribing?1:-1}}class c{constructor(e,t,n){this.$el=e,this.user=new s(t),this.blog=new a(n),this.$subscribeBtn=this.$el.find(".js-hatena-follow-button"),this.$subscriptionCount=this.$el.find(".js-subscription-count"),this.$subscriptionCountBox=this.$el.find(".js-subscription-count-box"),this.updateViews(),this.initEvents()}initEvents(){this.$subscribeBtn.on("mouseenter",(()=>{this.$subscribeBtn.addClass("hover")})).on("mouseleave",(()=>{this.$subscribeBtn.removeClass("hover")})).on("click",(()=>{const e=this.$subscribeBtn.offset();return e.top+=this.$subscribeBtn.height(),this.openSubscribeWindow(e),!1}))}updateViews(){const e=this.user.isSubscribing;this.$subscribeBtn.addClass(e?"subscribing":"unsubscribing").removeClass(e?"unsubscribing":"subscribing"),this.$subscribeBtn.removeClass("hover"),this.updateCountBox()}updateCountBox(){this.blog.subscribersCount>=1?(this.$subscriptionCountBox.show(),this.$subscriptionCount.text(this.blog.subscribersCount)):this.$subscriptionCountBox.hide()}subscribe(){this.user.isSubscribing=!0,this.blog.subscribersCount++,this.updateViews()}unsubscribe(){this.user.isSubscribing=!1,this.blog.subscribersCount--,this.updateViews()}}},74302:(e,t,n)=>{"use strict";n.d(t,{u:()=>d});var o=n(26464),r=n(65311),i=n.n(r),s=n(57942),a=n(76804),c=n(36500);class d extends o.T{constructor(e,t,n,o,r){super(e,t,n),this.utmSource=r,this.messenger=o,this.initMessages()}initMessages(){this.messenger.addEventListener("subscription",(e=>{const t=e[this.blog.blogUrl];t!==this.user.isSubscribing&&(!0===t&&this.subscribe(),!1===t&&this.unsubscribe())}))}openSubscribeWindow(e,t){const n=location.href,o=encodeURIComponent(n),r=encodeURIComponent(this.utmSource),i=`${(0,s.Z)("admin-domain")}/${(0,s.Z)("author")}/${(0,s.Z)("blog")}/subscribe?from_url=${o}&utm_source=${r}&utm_medium=button&utm_campaign=subscribe_blog`;window.open(i)}subscribeButtonHandlerWindow(e){const t={width:300,height:150};t.left=Math.floor((screen.width-t.width)/2),t.top=Math.floor((screen.height-t.height)/2);const n=window.open("","subscribe",(0,a.Z)(t)),o=c.Z.createForWindow(n,e);o.addEventListener("done",(()=>{this.toggleState(),r()}));const r=function(){o.destroy(),n?.close()};o.addEventListener("close",r),i()(document.body).one("focus",r)}toggleState(){const e={};e[this.blog.blogUrl]=!this.user.isSubscribing,this.messenger.send("subscription",e)}}},92901:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(21655),r=n(74302);const i={Admin:o.z,Blogs:r.u}},51525:(e,t,n)=>{"use strict";n.d(t,{ne:()=>b});var o=n(69730),r=n(50663),i=n(49680),s=n(34469),a=n(68690),c=n(95659),d=n(64487),l=n(57942),u=n(36414);const h=[/execute code from a freed script/,/SecurityError.*Blocked.*/,/TypeError.*valve.*/,/.*t\[0\] is undefined.*/,/.*evaluating 'e\.offset\(\)\.left'.*/,/.*Unable to get property 'left' of undefined.*/,/.*Cannot read property 'left' of undefined.*/,/.*TypeError: e\.offset\(\.\.\.\) is undefined.*/,/'_checkRecommendVisibleMain' is undefined/,/.*_checkRecommendVisibleMain.*/,/.*undefined is not an object \(evaluating 'document\.getElementsByTagName\('video'\)\[0\]\.src'\).*/],m={admin:.001,blogs:.14,global:.002,unknown:0},g=["https://blog.hatenablog.com","https://developer.hatenastaff.com","https://soredoko.jp"],p=e=>{let{environment:t,routerType:n,location:o}=e;return()=>{if(t!==u.$w.Productrion&&t!==u.$w.Staging)return 0;if(window!==window.parent)return 0;if(n===u.MG.Blogs&&!g.includes(o.origin))return 0;const e=m[n];return t===u.$w.Staging?Math.ceil(e):e}},f=e=>{const t=[new o.I];return m[e]>0?[...t,new r.gE]:t},b=()=>{const e=(0,l.Z)("sentry-dsn");if(e){const t=(0,u.lW)(),n=(0,u.ew)(),o=(0,u.AN)(),r=(0,u.l7)(),m=window.location,g=(0,u.ND)(),b=new i.R({stackParser:s.Dt,transport:a.f,dsn:e,ignoreErrors:h,release:(0,l.Z)("version"),sampleRate:Number((0,l.Z)("sentry-sample-rate")),tracesSampler:p({environment:g,routerType:t,location:m}),environment:(0,u.ND)(),integrations:f(t),beforeSend:(e,t)=>((e,t)=>{const n=e.exception&&e.exception.values&&e.exception.values[0]?e.exception.values[0].stacktrace:null,o=n?n.frames:null;if(o&&o.length>0){const n=o[o.length-1].filename;if(n&&new RegExp(`^${t}`).test(n))return e}return null})(e,(0,l.Z)("static-domain"))});(0,c.Gd)().bindClient(b),(0,d.e)((e=>{e.setTag("epic.domain",t),e.setTag("epic.page",n),(e=>{let{scope:t,routerType:n,deviceType:o,pageId:r,blogUUID:i}=e;r!==u.Jf&&(n===u.MG.Blogs?t.setTransactionName(`${n}:${o}:${r}:${i}`):t.setTransactionName(`${n}:${o}:${r}`))})({scope:e,routerType:t,deviceType:r,pageId:n,blogUUID:o})}))}}},53736:(e,t,n)=>{"use strict";n.d(t,{X:()=>r});var o=n(36414);const r=()=>{document.querySelectorAll("a.js-embed-group-link").forEach((e=>{const t=new URL(e.href);t.searchParams.set("blog_id",(0,o.AN)()),e.href=t.toString()}))}},86965:(e,t,n)=>{"use strict";n.d(t,{w:()=>o});const o=e=>{let t,n="";if(t=e.match(/#([0-9a-f]{6})/i))n=t[1];else if(t=e.match(/#([0-9a-f])([0-9a-f])([0-9a-f])/i))n=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else if(t=e.match(/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+)\s*)?/)){n=t[4]&&0==+t[4]?"":`0${(+t[1]).toString(16)}`.slice(-2)+`0${(+t[2]).toString(16)}`.slice(-2)+`0${(+t[3]).toString(16)}`.slice(-2)}return n.toLowerCase()}},1606:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=e=>{const t={},n=e.split("&"),o=n.length;for(let e=0;e<o;e++){if(!n[e].match(/[=]/))continue;const o=n[e].split("="),r=decodeURIComponent(o[0]),i=o[1].replace(/\+/g," ");t[r]||(t[r]=[]),t[r].push(decodeURIComponent(i))}return t}},10665:(e,t,n)=>{"use strict";n.d(t,{k:()=>o});const o=(e,t)=>(e.match(/\/v\//i)&&(e=(e=e.split(/[?&]/)[0]).replace(/\/v\//i,"/embed/")),e=e.replace("youtube.googleapis.com","www.youtube.com"),"https:"!==t&&(e=e.replace(/^https:/,"")),e)},74350:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});n(65311);var o=n(98860);const r=function(e){e.need_comrule2013&&o.ZP.defer((()=>{var e=location.hostname.match(/\.hatena\.[^:]+/)[0];window.top.location.href=`http://www${e}/login?need_comrule2013=1`}))}},76804:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=e=>Object.keys(e).map((t=>`${t}=${e[t]}`)).join(",")},847:(e,t,n)=>{"use strict";n.d(t,{j:()=>l});var o=n(73380),r=n(67294),i=n(77446),s=n(70879),a=n(76932),c=n(68853);const d=i.IX(i.Z_()),l=e=>{if(!e)return;const t=e.querySelectorAll("[data-load-nickname]"),n=(0,c.i)();t.forEach((e=>{const t=e.getAttribute("data-user-name"),c=(e=>{if(!e)return[];try{return i.Qc(d,JSON.parse(e))}catch(e){return(0,s.qR)(e,"renderNicknames: input invalid data attribute"),[]}})(e.getAttribute("data-authors"));t&&(0,o.w)(r.createElement(a.i,{dataloader:n,hatenaID:t,authors:c}),e)}))}},82667:(e,t,n)=>{"use strict";n.d(t,{j:()=>s});var o=n(65311),r=n.n(o),i=n(10665);const s=e=>{const t=e.get(0).ownerDocument.location.protocol;e.find('iframe[src*="youtube.com/"],iframe[src*="youtube.googleapis.com/"]').each(((e,n)=>{const o=r()(n),s=o.attr("src"),a=(0,i.k)(s,t);s!==a&&o.attr("src",a)}))}},6220:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var o=n(65311),r=n.n(o),i=(n(21793),n(59662));const s=function(){if(!i.Z.isTouch&&r().fn.tipsy){var e={left:"e",right:"w",bottom:"n",top:"s",northwest:"nw",southwest:"sw",northeast:"ne",southeast:"se"},t=r()(document.body);for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=`.tipsy-${n}`,s=e[n];t.tipsy({gravity:s,fade:!1,opacity:1,live:o})}}}},78899:(e,t,n)=>{"use strict";n.d(t,{d:()=>a});var o=n(20996),r=n(53736),i=n(847),s=n(50477);const a=e=>{o.Z.updateTimestamps(e[0]),document.dispatchEvent(new Event("hatena:star:requestrendering")),(0,i.j)(e.get(0)),(0,r.X)(),s.Z.load(e)}},347:(e,t,n)=>{"use strict";n.d(t,{Fx:()=>c,Km:()=>a,ZP:()=>d});var o=n(9669),r=n.n(o),i=n(67301);const s=r().create();s.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const a=e=>i.Z.stringify(e,{arrayFormat:"none"}),c=(e,t)=>(delete t.common["X-Requested-With"],e),d=s},75116:()=>{window.define=void 0},34157:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var o=n(65311),r=n.n(o),i=n(98860),s=n(91269),a=n(37914),c=n(70879),d=n(56412),l=n(85861),u=n(6220),h=n(51525);let m=!1;const g=function(){r()((()=>{m||(m=!0,s.Z.load(),d.Z.loadPage(),(0,u.Z)(),(0,l.Z)())})),a.Z.domainType()===a.Z.Admin&&(window.onerror=i.ZP.once(((e,t,n,o)=>{(0,c.qR)(`${e} at ${n}:${o}`,"window.onerror",{reportToSentry:!1})}))),(0,h.ne)()}},41960:(e,t,n)=>{"use strict";n.d(t,{a:()=>i});const o={9:"TAB",27:"ESC",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12"},r={8:"BS",9:"TAB",16:"",17:"",18:"",27:"ESC",13:"RET",32:"SPC",224:""};function i(e){let t="",n=e.which;if(e.ctrlKey&&(t+="C-"),e.altKey&&(t+="M-"),e.metaKey&&(t+="W-"),0===n)e.shiftKey&&(t+="S-"),t+=o[e.keyCode];else{const o=r[n];"string"==typeof o?(e.shiftKey&&(t+="S-"),t+=o):(e.ctrlKey&&n<=26&&(n+=64),65<=n&&n<=90||97<=n&&n<=122?t+=String.fromCharCode(n)[e.shiftKey?"toUpperCase":"toLowerCase"]():(e.keyCode&&e.shiftKey&&(t+="S-"),t+=String.fromCharCode(n)))}return t}}}]);