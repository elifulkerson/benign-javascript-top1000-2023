function onArtemisLoad(callback) { if (window.Artemis) { callback(); } else { setTimeout(onArtemisLoad.bind(null, callback), 1000); } } window.artemisRequire = function(paths, callback) { if (!window.Artemis) { onArtemisLoad(resolve.bind(null, paths, callback)); } else { resolve(); } function resolve() { var requiredModules = paths.map(function(path) { return path.reduce(function(acc, cur) { acc = acc ? acc[cur] : undefined; return acc; }, Artemis) }).filter(function(x) { return x !== undefined; }); if (requiredModules && requiredModules.length> 0) { callback.apply(null, requiredModules); } } }; window.skypeArtemis = (function(source) { if (!source) { source = {}; } function deepAdd(level, settings) { for (var s in settings) { if (!level.hasOwnProperty(s)) { level[s] = settings[s]; } else if (level[s] !== null && typeof level[s] === 'object') { deepAdd(level[s], settings[s]); } } } function deepUpdate(level, settings) { for (var s in settings) { if (level[s] !== null && typeof level[s] === 'object') { deepUpdate(level[s], settings[s]); } else { level[s] = settings[s]; } } } function addSettings(settings) { if (!settings) return; if (!window["SKYPE_SETTINGS"]) { window["SKYPE_SETTINGS"] = {}; } deepAdd(window["SKYPE_SETTINGS"], settings); } function updateSettings(settings) { if (!settings) return; if (!window["SKYPE_SETTINGS"]) { window["SKYPE_SETTINGS"] = {}; } deepUpdate(window["SKYPE_SETTINGS"], settings); } function addSkypeSettings(settings) { if (!settings) return; if (!window["SKYPE_SETTINGS"]) { window["SKYPE_SETTINGS"] = {}; } if (!window["SKYPE_SETTINGS"].settings) { window["SKYPE_SETTINGS"].settings = {}; } deepAdd(window["SKYPE_SETTINGS"].settings, settings); } function updateSkypeSettings(settings) { if (!settings) return; if (!window["SKYPE_SETTINGS"]) { window["SKYPE_SETTINGS"] = {}; } if (!window["SKYPE_SETTINGS"].settings) { window["SKYPE_SETTINGS"].settings = {}; } deepUpdate(window["SKYPE_SETTINGS"].settings, settings); } source.addSettings = addSettings; source.updateSettings = updateSettings; source.addSkypeSettings = addSkypeSettings; source.updateSkypeSettings = updateSkypeSettings; return source; })(window.skypeArtemis);