"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[16987],{680406:function(e,a,t){t.d(a,{V:function(){return W}});var i=t(390239),s=t(916686),n=t(575115),r=t(235077),l=t(893109),o=t(992512),d=t(507005),c=t(412784);const m={type:"mutation",name:"clipRewardPromotionEngine",query:"mutation clipRewardPromotionEngine($input:ClipRewardPromotionEngineInput!){clipRewardPromotionEngine(input:$input){success}}",hash:"a8dc7824835bc1872e6fade3fadc9a95386447db8d8d79ef617abd5e420df4d0"};var u=t(679753),x=t(623122),h=t.n(x),w=t(156055),v=t(999301);var f=t(489621),g=t.n(f);const C=(e,a,t,i)=>g()("pa1 pr3 br2 relative z-1 ".concat(i," ").concat(e===u.J.CLIPPED||e===u.J.APPLIED||a&&e===u.J.UNCLIPPED?"":"b--navy ba"," \n    ").concat(t?"":"dib","\n    ").concat(a?"bg-near-white-blue":"bg-washed-blue"));var p=t(219424),k=t(468620),b=t(295368),j=t(227297);const y=e=>{let{baseClass:a,iconName:t,iconSize:s,iconClass:n,textClass:r,textMessage:l}=e;return(0,i.jsxs)("div",{className:a,children:[t&&(0,i.jsx)(j.J,{name:t,size:s,className:n,"aria-hidden":!0}),(0,i.jsx)("span",{className:r,children:l})]})},S=e=>{let{conditionalStr:a,ctaChildren:t,CTALinkExtras:s,eventMultiplierStr:n,fullWidth:r,href:l,item:o,restriction:d,restrictionTextStyle:c,rewardAppliedMessage:m,rewardAvailableMessage:x,rewardStateWithoutContext:h,showMultiLineRestriction:w,signIn:v}=e;const{authState:{isLoggedIn:f}}=(0,k.Eu)(),C=(0,i.jsx)(b.Z,{href:l,variant:"tertiary",size:"medium",className:g()("f6 pa0 h-auto",r?"ml-auto":"ml5"),onLinkName:"signInToClaimWalmartReward",onLinkExtras:s,style:{whiteSpace:"inherit"},onClick:e=>{e.preventDefault(),null===v||void 0===v||v()},children:t});return(0,i.jsx)("div",{children:h===u.J.APPLIED?(0,i.jsx)(y,{baseClass:"flex items-center",iconName:"MoneyCircleFill",iconSize:"small",iconClass:"navy",textClass:"f7 navy b ml1 lh-solid",textMessage:m}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:g()("flex",{"flex-column items-start":!r}),children:[(0,i.jsx)(y,{baseClass:"flex items-center",iconName:"MoneyCircleFill",iconSize:f?"small":"medium",iconClass:"navy",textClass:"f7 navy b ml1",textMessage:x}),!f&&r&&C]}),(0,i.jsx)("div",{className:g()("sans-serif f7 gray"),style:c||{marginLeft:30},id:"add-walmart-reward".concat(null===o||void 0===o?void 0:o.id),children:w?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:n}),(0,i.jsx)("div",{children:d})]}):a||""}),!f&&!r&&C]})})},L=h()((()=>t.e(4024).then(t.bind(t,829403))),{loadableGenerated:{webpack:()=>[829403]},ssr:!1}),R=e=>{let{setShowErrorModal:a,sorryTextMessage:t}=e;const s=()=>{a(!1)};return(0,i.jsx)(L,{actions:(0,i.jsx)("div",{className:"center",children:(0,i.jsx)(b.Z,{className:"mb2",onClick:s,variant:"primary",size:"medium",onLinkName:"errorModalOk",children:(0,n.m)(v,"ok")})}),isOpen:!0,onClose:s,size:"small",title:(0,n.m)(v,"rewards"),children:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"b",children:t}),(0,n.m)(v,"tryAgain")]})})};var I=t(465903),P=t(890288);const N=e=>{let{rewardStateWithoutContext:a,setRewardState:t,setRewardStateWithoutContext:s,rewardAmt:r,savedRewardsMessage:l,offer:o,secondaryText:d,onToggleCheckbox:c,onClipRewardClick:m,preventDefaultClipHandler:x,clipRewardPromotion:h,item:f,onLinkExtras:C,isDisabled:p,showDetails:k,onClickDetails:S,showMultiLineRestriction:L,eventMultiplierStr:R,restriction:N,offerId:M,selectionToken:E,usItemId:T,secondaryPrefix:D,detailsButtonADAText:A,checkBoxADAText:W,restrictionTextStyle:J,conditionalStr:z}=e;const{0:B,1:F}=(0,w.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex items-center",...a===u.J.CLIPPED&&B&&{role:"alert"},children:[a===u.J.CLIPPED?(0,i.jsx)(y,{iconName:"Check",iconSize:"medium",textClass:"f7 navy b ml1",textMessage:r?"$".concat(r.toFixed(2)," ").concat(l):l}):o&&(0,i.jsx)(P.Z,{label:o,onChange:()=>{(0,I.c)("digitalRewardsClick",Date.now().toString()),t&&t(u.J.CLIPPED),F(!0),s(u.J.CLIPPED),C&&C.pr&&(C.pr.wd="1"),m&&m(f),x||h({input:{cbOffer:"".concat(M),selectionToken:E,usItemId:T||(null===f||void 0===f?void 0:f.usItemId)}}),c&&c()},onLinkName:"addWalmartReward",onLinkExtras:C,"aria-label":W||"".concat(o," ").concat((0,n.m)(v,"walmartPlus"),", ").concat(d),className:"f7 navy b",disabled:p,checkboxProps:{"aria-describedby":"add-walmart-reward".concat(null===f||void 0===f?void 0:f.id)}}),k&&!p&&(0,i.jsx)(b.Z,{onClick:S,onLinkName:"showRewardDetails","aria-label":A||"show Reward Details",variant:"tertiary",size:"small",className:"bn pa0 no-underline ml2 h-inherit flex",disabled:p,children:(0,i.jsx)(j.J,{name:"InfoCircle",size:"small","aria-hidden":!0})})]}),(0,i.jsx)("div",{className:g()("sans-serif f7",{"light-gray":p,gray:!p}),style:J||{marginLeft:30},id:"add-walmart-reward".concat(null===f||void 0===f?void 0:f.id),children:L?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:R}),(0,i.jsx)("div",{children:N})]}):z||""}),d&&(0,i.jsxs)("div",{className:"flex items-center mt1 mb2",style:{marginLeft:30},children:[D&&(0,i.jsx)(D,{}),(0,i.jsx)("span",{className:g()("f7 b ml2",{"light-gray":p,blue:!p}),children:d})]})]})},M=e=>{let{conditionalStr:a,ctaChildren:t,CTALinkExtras:s,eventMultiplierStr:n,fullWidth:r,href:l,item:o,restriction:d,restrictionTextStyle:c,showMultiLineRestriction:m,signIn:u,unlockRewardIcon:x,unlockRewardMessage:h}=e;const w=(0,i.jsx)(b.Z,{href:l,variant:"tertiary",size:"medium",className:g()("f6 pa0 h-auto",r?"ml-auto":"ml5"),onLinkName:"signInToClaimWalmartReward",onLinkExtras:s,style:{whiteSpace:"inherit"},onClick:e=>{e.preventDefault(),null===u||void 0===u||u()},children:t});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:g()("flex",{"flex-column items-start":!r}),children:[(0,i.jsx)(y,{baseClass:"flex items-center",iconName:x,iconSize:"medium",iconClass:"navy",textClass:"f7 navy b ml1",textMessage:h}),r&&w]}),(0,i.jsx)("div",{className:g()("sans-serif f7 gray"),style:c||{marginLeft:30},id:"add-walmart-reward".concat(null===o||void 0===o?void 0:o.id),children:m?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:n}),(0,i.jsx)("div",{children:d})]}):a||""}),!r&&w]})};var E=t(803528),T=t(312759);const D=e=>{let{fullWidth:a,hideUnlockRewardIcon:t,unlockRewardIcon:s,unlockEarnRewardMessage:r,hideWalmartPlusBlueLogo:l,joinWPlusLinkExtras:o,joinWplus:d,ctaJoinWPlusChildren:c,secondaryText:m}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:g()("flex",{"flex-column items-start":!a}),children:[(0,i.jsxs)("div",{className:"flex items-center",children:[t?(0,i.jsx)(E.Z,{src:T.Xi,preload:!0,height:24,width:24,alt:(0,n.m)(v,"walmartPlus")}):s&&(0,i.jsx)(j.J,{name:s,size:"medium",className:"blue","aria-hidden":!0}),(0,i.jsx)("div",{className:"f7 navy b ml1",children:r}),!l&&a&&(0,i.jsx)(E.Z,{src:T.hE,alt:(0,n.m)(v,"walmartPlus"),preload:!1,width:54,height:18,"aria-hidden":!0,className:"ml1 mt1"})]}),(0,i.jsx)(b.Z,{variant:"tertiary",size:"medium",className:g()("f6 pa0 h-auto",a?"ml-auto":"ml5"),onLinkName:"joinWalmartPlus","aria-label":"Join Walmart +",onLinkExtras:o,onClick:d,style:{whiteSpace:"inherit"},children:c})]}),m&&(0,i.jsx)("div",{className:"f7 blue b mt1 mb2 ml5",children:m})]})},A=h()((()=>t.e(54470).then(t.bind(t,549106))),{loadableGenerated:{webpack:()=>[549106]}}),W=e=>{let{joinWplus:a,signIn:t,href:x,unlockRewardIcon:h="MoneyCircle",rewardAmt:f,unlockRewardMessage:g="".concat((0,n.m)(v,"unlockReward")),savedRewardsMessage:k="".concat((0,n.m)(v,"rewardAdded")),unlockEarnRewardMessage:b="".concat((0,n.m)(v,"earnReward",{rewardAmt:f})),rewardAppliedMessage:j=(0,n.m)(v,"rewardApplied"),rewardAvailableMessage:y=(0,n.m)(v,"rewardAvailable"),sorryTextMessage:L=(0,n.m)(v,"sorryText"),rewardSavedMessage:I=(0,n.m)(v,"rewardSaved"),hideWalmartPlusBlueLogo:P,detailsButtonADAText:E,hideUnlockRewardIcon:T,ctaChildren:W="".concat((0,n.m)(v,"signIn")),ctaJoinWPlusChildren:J="".concat((0,n.m)(v,"joinWalmartPlus")),item:z,offerId:B,selectionToken:F,offer:Z,state:U,restriction:O="",eventMultiplierStr:_="",enableCashBackRebrand:G=!1,moduleContext:H="",pageTitle:K="",onToggleCheckbox:$=o.Z,showDetails:q,onClickDetails:V,onClipRewardClick:X=o.Z,onClipRewardSuccess:Q=o.Z,onLinkExtras:Y={},usItemId:ee,joinWPlusLinkExtras:ae,fullWidth:te=!1,secondaryText:ie="",secondaryPrefix:se,isPromo:ne=!1,promoStatus:re,primaryText:le,ctaText:oe,leadingIcon:de,showDivider:ce,singleLine:me=!1,width:ue="",showRibbon:xe=!1,borderStyle:he="",handleCallback:we,isDisabled:ve,preventDefaultClipHandler:fe,showMultiLineRestriction:ge,checkBoxADAText:Ce="",restrictionTextStyle:pe,CTALinkExtras:ke,className:be}=e;const{addSnack:je}=(0,s.useSnackbar)(),{router:ye}=(0,l.t)(),{rewardState:Se,setRewardState:Le}=(0,p.Kf)(),{0:Re,1:Ie}=(0,w.useState)(Se||U);(0,w.useEffect)((()=>{Ie(Se||U)}),[Se,U]);const{0:Pe,1:Ne}=(0,w.useState)(!1),Me=(0,r.wG)(),{clipRewardPromotion:Ee,error:Te,errors:De}=(e=>{const a=(0,d.G)(),[t,{data:i,isError:s}]=(0,c.D)((e=>a(m,e)),e);return{clipRewardPromotion:t,error:Boolean(null===i||void 0===i?void 0:i.errors)||s,errors:null===i||void 0===i?void 0:i.errors}})({onSuccess:(e,a)=>{e.errors||(Q(a),je({message:I,actionButtonProps:{children:(0,n.m)(v,"viewList"),onClick:()=>{ye.push("/lists/RL/saved-rewards")}}}))}}),Ae=((e,a,t)=>{let i="",s="",r="",l="";return a?(s="".concat(t?"".concat((0,n.m)(v,"manufacturerOffer")," | "):(0,n.m)(v,"manufacturerOffer")),r="",l="".concat(t).slice("".concat(t).indexOf(" "))):(s="",r=e&&t?"".concat(e," - "):e,l="".concat(t?"".concat(t):"")),i=i.concat(s,r,l).trimStart(),i})(_,G,O);if((0,w.useEffect)((()=>{var e,a,t,i,s,n,r,l;Te&&(Me({context:H,name:"error",action:"error",payload:{er:{rn:De&&(null===(e=De[0])||void 0===e||null===(a=e.extensions)||void 0===a?void 0:a.code),ms:De&&(null===(t=De[0])||void 0===t?void 0:t.message),dt:De&&(null===(i=De[0])||void 0===i||null===(s=i.extensions)||void 0===s||null===(n=s.exception)||void 0===n?void 0:n.message),ec:De&&(null===(r=De[0])||void 0===r||null===(l=r.extensions)||void 0===l?void 0:l.status)},ta:{pt:K}}}),Ne(!0))}),[Te,Me,De,H,K]),Re===u.J.UNKNOWN)return null;const We=z?z.usItemId:"NullUsItemId";return(0,i.jsxs)(i.Fragment,{children:[!Te&&(ne?(0,i.jsx)(A,{promoStatus:re,primaryText:le,secondaryText:ie,ctaText:oe,offer:Z,leadingIcon:de,showDetails:q,showDivider:ce,onClickDetails:V,singleLine:me,fullWidth:te,width:ue,showRibbon:xe,borderStyle:he,handleCallback:we}):(0,i.jsx)("div",{className:"mt2 mb2",children:(0,i.jsxs)("div",{"data-testid":"qa-id-walmartReward-".concat(We),className:C(Re,ve,te,be),children:[(Re===u.J.UNCLIPPED||Re===u.J.CLIPPED)&&(0,i.jsx)(N,{rewardStateWithoutContext:Re,setRewardState:Le,setRewardStateWithoutContext:Ie,rewardAmt:f,savedRewardsMessage:k,offer:Z,secondaryText:ie,onToggleCheckbox:$,onClipRewardClick:X,preventDefaultClipHandler:fe,clipRewardPromotion:Ee,item:z,onLinkExtras:Y,isDisabled:ve,showDetails:q,onClickDetails:V,showMultiLineRestriction:ge,eventMultiplierStr:_,restriction:O,offerId:B,selectionToken:F,usItemId:ee,secondaryPrefix:se,detailsButtonADAText:E,checkBoxADAText:Ce,restrictionTextStyle:pe,conditionalStr:Ae}),(Re===u.J.APPLIED||Re===u.J.AVAILABLE)&&(0,i.jsx)(S,{rewardStateWithoutContext:Re,rewardAppliedMessage:j,rewardAvailableMessage:y,href:x,signIn:t,ctaChildren:W,CTALinkExtras:ke,restriction:O,restrictionTextStyle:pe,item:z,showMultiLineRestriction:ge,eventMultiplierStr:_,conditionalStr:Ae,fullWidth:te}),Re===u.J.UNLOCK&&(0,i.jsx)(M,{fullWidth:te,unlockRewardIcon:h,unlockRewardMessage:g,href:x,signIn:t,ctaChildren:W,CTALinkExtras:ke,restriction:O,restrictionTextStyle:pe,item:z,showMultiLineRestriction:ge,eventMultiplierStr:_,conditionalStr:Ae}),Re===u.J.UNLOCK_WITH_W_PLUS&&(0,i.jsx)(D,{fullWidth:te,hideUnlockRewardIcon:T,unlockRewardIcon:h,unlockEarnRewardMessage:b,hideWalmartPlusBlueLogo:P,joinWPlusLinkExtras:ae,joinWplus:a,ctaJoinWPlusChildren:J,secondaryText:ie})]})})),Pe&&(0,i.jsx)(R,{setShowErrorModal:Ne,sorryTextMessage:L})]})}}}]);