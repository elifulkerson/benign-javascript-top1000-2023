(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7070],{77078:function(e,t,a){"use strict";var l=a(11527),r=a(84875),s=a.n(r),n=a(99739),i=a(50959),o=a(94460),c=a(97735),d=a(84832),u=a(23937),m=a(10328);let h=e=>{let{width:t,height:a,alt:r,src:h,isCensored:x,displayType:p,resolution:_,className:f,containerClassName:v,threadType:w,imagesCount:y,isViewable:g,isRaw:b}=e,{t:N}=(0,n.$G)(),{isLogin:j,showLoginModal:k}=(0,o.s)(),[C,S]=(0,i.useState)(x);return(0,l.jsx)(u.ZP,{className:s()(C&&"blur-lg",f),containerClassName:v,resolution:null!=_?_:p===c.z9.THUMBNAIL?480:200,width:t,height:a,alt:r,src:h,isRaw:b,children:C?(0,l.jsxs)("div",{className:s()("absolute z-10 flex h-full w-full flex-col items-center justify-center bg-grey-5 bg-opacity-50"),children:[(0,l.jsx)(d.Z,{variant:"eye-slash",className:"!text-lg text-white"}),p===c.z9.THUMBNAIL&&(0,l.jsx)("span",{className:"mt-1 text-center text-sm text-white",children:N("sensitive_image_label")}),g&&(0,l.jsx)(m.Z,{onClick:()=>{j?S(!1):k()},className:"mt-2 w-24",size:"small",type:"nsfw",children:N("sensitive_image_button")})]}):w===c.Th.IMAGE&&y?(0,l.jsxs)("div",{className:"absolute top-1 right-1 z-10 rounded bg-black bg-opacity-40 p-1 text-xs text-white",children:["1/",y]}):w!==c.Th.VIDEO||C?null:(0,l.jsx)("div",{className:"z-1 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 transform rounded-full bg-black bg-opacity-40 p-2 text-white",children:(0,l.jsx)(d.Z,{variant:"play"})})})};t.Z=h},54194:function(e,t,a){"use strict";var l=a(11527),r=a(50959),s=a(84875),n=a.n(s),i=a(68452),o=a(59164),c=a(97735),d=a(84832),u=a(77078);a(14301),a(80463);var m=a(80041),h=a.n(m);let x=e=>{let{imageList:t,aspectRatio:a,targetUrl:s,isViewable:m,resolution:x,isRaw:p,className:_,initSlide:f,onImageClick:v}=e,[w,y]=(0,r.useState)(0),g=a?1===a.ratio_height&&1===a.ratio_width?"aspect-square":"aspect-video":"";return(0,l.jsx)("div",{className:"relative h-full w-full",children:(0,l.jsxs)(o.tq,{className:"relative",modules:[i.W_],slidesPerView:1,navigation:{prevEl:".".concat(h().arrowPrev),nextEl:".".concat(h().arrowNext)},onSlideChange:e=>{y(e.activeIndex)},initialSlide:f,children:[t.map((e,t)=>(0,l.jsx)(o.o5,{children:s?(0,l.jsx)("a",{href:s,title:s,className:"flex w-full items-center justify-center",children:(0,l.jsx)(u.Z,{className:n()(g," object-contain"),containerClassName:"h-full w-full",alt:e.url,src:e.url,isCensored:e.is_censored,displayType:c.z9.THUMBNAIL,resolution:x,isRaw:p})}):(0,l.jsx)("div",{className:_,onClick:()=>{v&&v(w)},children:(0,l.jsx)(u.Z,{className:n()(g,"w-full object-contain"),containerClassName:"w-full h-full",alt:e.url,src:e.url,isCensored:e.is_censored,displayType:c.z9.THUMBNAIL,isViewable:m,resolution:x,isRaw:p})})},"".concat(e.url,"-").concat(t))),(0,l.jsx)("div",{className:h().arrowPrev,children:(0,l.jsx)(d.Z,{className:"text-grey-5",variant:"chevron-left"})}),(0,l.jsx)("div",{className:h().arrowNext,children:(0,l.jsx)(d.Z,{className:"text-grey-5",variant:"chevron-right"})}),(0,l.jsxs)("div",{className:"absolute right-2 top-2 z-10 rounded bg-black bg-opacity-40 p-1 text-xs text-white",children:[w+1,"/",t.length]})]})})};t.Z=x},34462:function(e,t,a){"use strict";var l=a(11527),r=a(99739),s=a(66283),n=a(3646),i=a(27264),o=a(75236),c=a(23003),d=a(34510);let u=e=>{var t;let{userId:a,threadId:u,onClose:m}=e,{t:h}=(0,r.$G)(),{data:x,isLoading:p}=(0,n.T6)(u),_=e=>{(0,i.ZP)({category:i.WD.whoposted_modal,action:i.aU.profile.open,label:e}).push()};return(0,l.jsx)(d.Z,{onClose:m,children:(0,l.jsx)("div",{className:"relative w-80 flex-wrap overflow-y-auto rounded-lg bg-white px-6 py-4 shadow-lg dark:bg-grey-8 lg:w-[420px] lg:px-8 lg:py-6",children:!p||(null==x?void 0:x.data)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"mx-auto mb-5 w-full text-center text-lg font-bold",children:h("who_posted_label")}),(0,l.jsxs)("div",{className:"mb-5 flex w-full items-center justify-between pr-1 pt-2 text-sm text-secondary dark:text-secondary-night",children:[(0,l.jsx)("span",{children:h("username")}),(0,l.jsxs)("span",{children:[h("post_count_label"),"(",null==x?void 0:null===(t=x.data)||void 0===t?void 0:t.total_post,")"]})]}),(()=>{var e,t;if(null==x?void 0:null===(e=x.data)||void 0===e?void 0:e.users.length)return(0,l.jsx)("ul",{className:"m-auto max-h-80 w-full overflow-y-auto p-2 lg:max-h-96",children:null==x?void 0:null===(t=x.data)||void 0===t?void 0:t.users.map((e,t)=>{let r="".concat(e.id,"=").concat(t),n="".concat(s.gUP.replace(s.PC7.ID,e.id.toString()));return(0,l.jsxs)("li",{className:"mb-4 flex items-center",children:[(0,l.jsx)("a",{target:"_blank",rel:"noreferrer",href:n,title:e.display_name,onClick:()=>_(String(e.id)),className:"relative flex-shrink-0 flex-grow-0 overflow-hidden",children:(0,l.jsx)("img",{alt:e.display_name,src:e.avatar,className:"h-9 w-9 rounded-full"})}),(0,l.jsxs)("div",{className:"mx-2 flex flex-grow flex-wrap",children:[(0,l.jsxs)("a",{target:"_blank",rel:"noreferrer",href:n,title:e.display_name,onClick:()=>_(String(e.id)),className:"mb-1 flex w-full items-center text-primary dark:text-primary-night",children:[a===e.id&&(0,l.jsx)("span",{className:"mr-1 rounded-md bg-yellow p-1 text-xs font-bold dark:bg-yellow-night",children:h("ts_label")}),(0,l.jsx)("div",{className:"text-sm font-medium",children:e.display_name})]}),(0,l.jsx)(c.Z,{className:"w-full text-xs text-secondary dark:text-secondary-night",html:e.title||""})]}),(0,l.jsx)("div",{className:"flex w-20 justify-center text-right",children:(0,l.jsx)("a",{title:"See posts from ".concat(e.display_name),href:"".concat(s.whj.replace(s.PC7.ID,e.id.toString()),"?thread_id=").concat(u,"&count=").concat(e.total_post),className:"ml-auto mr-4 text-xs text-primary dark:text-primary-night",children:e.total_post})})]},r)})})})()]}):(0,l.jsx)(o.T,{className:"py-28"})})})};t.Z=u},80834:function(e,t,a){"use strict";var l=a(11527),r=a(99739),s=a(55718);let n=e=>{let{isChecked:t,onCheck:a}=e,{t:n}=(0,r.$G)();return(0,l.jsxs)("div",{className:"flex w-full justify-between border-b border-grey-2 bg-white py-2 px-4 dark:border-grey-6 dark:bg-black lg:py-4",children:[(0,l.jsx)("label",{className:"cursor-pointer text-sm text-secondary dark:text-secondary-night",htmlFor:"selectAllThread",children:n("moderation_select_all")}),(0,l.jsx)(s.o2,{name:"selectAllThread",checked:t,onChange:e=>a(e),className:"ml-3"})]})};t.Z=n},68603:function(e,t,a){"use strict";var l=a(11527),r=a(84875),s=a.n(r),n=a(50959),i=a(73894);let o=e=>{let{children:t,className:a,onClose:r}=e,o=(0,n.useRef)(null);return(0,i.Z)(o,r),(0,l.jsx)("div",{ref:o,className:s()("bg-white text-secondary dark:bg-grey-8 dark:text-secondary-night",a),children:t})};t.Z=o},7074:function(e,t,a){"use strict";a.d(t,{q:function(){return s}});var l=a(50959);let r=(0,l.createContext)({}),s=()=>(0,l.useContext)(r);t.Z=r},91436:function(e,t,a){"use strict";var l=a(11527),r=a(99739),s=a(66283),n=a(80238),i=a(19987),o=a(27264),c=a(10328),d=a(3431);let u=e=>{let{threadIds:t,analyticsCallback:a,actionCallback:u}=e,{t:m}=(0,r.$G)(),h=(0,n.pm)(),x=async(e,t,a)=>await (0,d.Z)({title:m("moderation_modal_title",{value:e}),okButton:(0,l.jsx)(c.Z,{className:"w-full",type:a?"danger":"primary",children:t||m("button_label_ok")}),cancelButton:(0,l.jsx)(c.Z,{className:"w-full",type:a?"alternate":"secondary",children:m("button_label_cancel")})}),p=async(e,t)=>await e.then(async()=>{u&&await u(),h(m("moderation_toast_success",{value:t}),n.m4.SUCCESS)}).catch(()=>{h(m("moderation_toast_failed",{value:t}),n.m4.ERROR)}),_=async()=>{let e=document.createElement("form");e.method="POST",e.action=s.Msg,t.forEach(t=>{if(!t)return;let a=document.createElement("input");a.type="hidden",a.name="thread_ids[]",a.value=String(t),e.appendChild(a)});let l=document.createElement("input");l.type="hidden",l.name="do",l.value="delete_thread",e.appendChild(l),document.body.appendChild(e),e.submit(),a&&a(o.aU.moderation.delete)},f=async()=>{let e=m("moderation_undelete_thread"),l=await x(e,m("moderation_undelete"),!1);l&&(await p((0,i.lw)(t),e),a&&a(o.aU.moderation.undelete))},v=async()=>{let e=m("moderation_approve_thread"),l=await x(e,m("moderation_approve"),!1);l&&(await p((0,i.LK)(t),e),a&&a(o.aU.moderation.approve))},w=async()=>{let e=m("moderation_unapprove_thread"),l=await x(e,m("moderation_unapprove"),!1);l&&(await p((0,i.Bs)(t),e),a&&a(o.aU.moderation.unapprove))},y=async()=>{let e=m("moderation_sticky_thread"),l=await x(e,m("moderation_sticky"),!1);l&&(await p((0,i.K1)(t),e),a&&a(o.aU.moderation.sticky))},g=async()=>{let e=m("moderation_unsticky_thread"),l=await x(e,m("moderation_unsticky"),!1);l&&(await p((0,i.vr)(t),e),a&&a(o.aU.moderation.unsticky))},b=async()=>{let e=m("moderation_close_thread"),l=await x(e,m("moderation_close"),!0);l&&(await p((0,i.Nm)(t),e),a&&a(o.aU.moderation.close))},N=async()=>{let e=m("moderation_open_thread"),l=await x(e,m("moderation_open"),!1);l&&(await p((0,i.E7)(t),e),a&&a(o.aU.moderation.open))};return{deleteThread:_,unDeleteThread:f,approveThread:v,unApproveThread:w,stickyThread:y,unStickyThread:g,closeThread:b,openThread:N}};t.Z=u},73894:function(e,t,a){"use strict";var l=a(50959);let r=(e,t)=>{let a=a=>{a.stopPropagation();let l=a.composedPath().includes(e.current);l||t()};(0,l.useEffect)(()=>(window.addEventListener("mousedown",a),()=>{window.removeEventListener("mousedown",a)}),[])};t.Z=r},59399:function(e,t,a){"use strict";var l=a(50959),r=a(99739),s=a(3568),n=a(80238),i=a(47639),o=a(51),c=a(19987),d=a(97735),u=a(27264),m=a(7074);let h=(e,t)=>{let{t:a}=(0,r.$G)(),h=e-t,[x,p]=(0,l.useState)(e),[_,f]=(0,l.useState)(t),v=(0,n.pm)(),{joinCommunity:w}=(0,i.Z)(),{threadDetail:y,revalidateThread:g}=(0,s.c)(),{revalidatePermission:b}=(0,o.l)((null==y?void 0:y.community.id)||""),{revalidatePost:N}=(0,m.q)(),j=async(e,t,l)=>{let r=Number(_!=e.valueOf())*e.valueOf();return f(r),p(h+r),await (0,c.Gi)(t,e).then(()=>{N&&N(),0==r?v(a("toast_vote_result_canceled"),n.m4.SUCCESS):v(a("toast_vote_result_succeed"),n.m4.SUCCESS)}).catch(e=>{switch(f(_),p(x),null==e?void 0:e.error.type){case d.Qd.VOTE_OWN_POST:v(a("toast_vote_result_own_post"),n.m4.ERROR);break;case d.Qd.JOIN_COMMUNITY_FIRST:(0,u.ZP)({category:"",action:u.aU.intent.community.join,label:u.__.give.reputation,extra:{forumID:l.id,forumName:l.name}}).push(),w(l,void 0,()=>Promise.all([g&&g(),b()]),!0);break;case d.Qd.USER_BANNED:case d.Qd.INVALID_REPUTATION_VALUE:v(a("toast_vote_result_banned"),n.m4.ERROR);break;default:v(a("toast_vote_result_failed"),n.m4.ERROR)}return Promise.reject()}),r},k=(e,t)=>e?{totalCendol:t>0?1:-1}:{totalBata:t<0?1:-1},C=(e,t)=>e?t>0?u.aU.cendol:u.aU.uncendol:t<0?u.aU.bata:u.aU.unbata,S=e=>0===_?{}:e?{totalBata:-1}:{totalCendol:-1};return{vote:x,userVote:_,voteAction:j,getLayerVoteType:k,getDataLayerActionType:C,getAdditionalLayerVoteType:S}};t.Z=h},61512:function(e,t,a){"use strict";a.d(t,{c:function(){return l}});let l=(e,t)=>{if(e.length!==t.length)return!1;e.sort(),t.sort();for(let a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}},80041:function(e){e.exports={arrowPrev:"imageSlider_arrowPrev__37qTa",arrowNext:"imageSlider_arrowNext__OLYDg"}}}]);