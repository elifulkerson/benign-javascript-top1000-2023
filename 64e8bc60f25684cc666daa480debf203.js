"use strict";(self.webpackChunk_twitter_responsive_web=self.webpackChunk_twitter_responsive_web||[]).push([["shared~loader.Typeahead~bundle.Communities~bundle.Delegate~bundle.Ocf~bundle.LoggedOutHome~bundle.Search~bund"],{999322:function _(e,t,n){n.d(t,{Z:function Z(){return l;}});var r=n(133028),o=n(459740),i=(n(202784),n(890601));var a=n(973186).Z.create({initial:{alignItems:"stretch",borderWidth:0,borderStyle:"solid",boxSizing:"border-box",display:"flex",flexDirection:"column",margin:0,padding:0,position:"relative",zIndex:0,minHeight:0,minWidth:0}});var s=["style"];var l=function l(e){var t=e.style,n=(0,o.Z)(e,s);return(0,i.Z)("form",(0,r.Z)((0,r.Z)({},n),{},{action:"#",style:[a.initial,t]}));};},136830:function _(e,t,n){n.d(t,{Z:function Z(){return C;}});var r=n(709249),o=n(887371),i=n(545754),a=n(486906),s=(n(374083),n(543450),n(818178),n(202784)),l=n(928316),c=n(325686),d=n(123162),u=n(16587),p=n(679640),h=n(319051),f=n(240159),m=n(196234),y=n(805252),v=n(973186),g=n(645184),_=n.n(g),I=n(137378),w=_().f2b3fe06,x=v.Z.create(function(e){return{hidden:{visibility:"hidden"}};});var b=function b(e){var t=e.isLoading,n=s.useState(!1),r=(0,m.Z)(n,2),o=r[0],i=r[1];return s.useEffect(function(){var e;return t?e=setTimeout(function(){return i(!0);},I.n):i(!1),function(){return clearTimeout(e);};},[t]),s.createElement(y.Z,{ariaValueText:o?w:"",indeterminate:o,style:!o&&x.hidden});};var C=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e,o){var i;return(0,r.Z)(this,n),(i=t.call(this,e))._setFocusedItemRef=function(e){i._shouldScrollToFocusedItem&&e&&((0,f.up)(i._getScrollParent(),e),i._shouldScrollToFocusedItem=!1);},i._resetScroll=function(){var e=i._getScrollParent();e&&(e.scrollTop=0);},i._getFlattenedItems=(0,u.Z)(function(e){return(0,p.Z)(e);}),i._handleItemClick=function(e,t){var n=i.props,r=n.items,o=n.onItemClick,a=i._getFlattenedItems(r).indexOf(e);e&&!t&&!i._shouldBlockInteractivity&&o(e,a),i._resetFocus();},i._getResultCount=function(){var e=i.props.items;return i._getFlattenedItems(e).length;},i._setFocusIndex=function(e,t){var n=i.props,r=n.items,o=n.onItemFocusChanged;i._shouldScrollToFocusedItem=t,i.setState({focusIndex:e}),o&&o(i._getFlattenedItems(r)[e]);},i._resetFocus=function(){i._setFocusIndex(i.props.withItemAlwaysSelected?0:-1);},i.focusNext=function(){var e=i.state.focusIndex,t=i._getResultCount();if(0!==t){var n=e+1>=t?0:e+1;i._setFocusIndex(n,!0);}},i.focusPrevious=function(){var e=i.state.focusIndex,t=i._getResultCount();if(0!==t){var n=e-1<0?t-1:e-1;i._setFocusIndex(n,!0);}},i.hasFocusedItem=function(){var e=i.state.focusIndex,t=i._getResultCount();return e>=0&&t>e;},i.selectFocusedItem=function(){var e=i.state.focusIndex,t=i.props,n=t.getItemIsDisabled,r=t.items;if(i.hasFocusedItem()){var o=i._getFlattenedItems(r)[e],a=!!n&&n(o,o.data);i._handleItemClick(o,a);}},i.state={focusIndex:e.withItemAlwaysSelected?0:-1},i;}return(0,o.Z)(n,[{key:"componentDidMount",value:function value(){this._resetFocus();}},{key:"componentWillUnmount",value:function value(){clearTimeout(this._interactivityTimeout);}},{key:"componentDidUpdate",value:function value(e){var t=this;e.items!==this.props.items&&(this._resetFocus(),this._resetScroll(),this._interactivityTimeout&&clearTimeout(this._interactivityTimeout),this._shouldBlockInteractivity=!0,this._interactivityTimeout=setTimeout(function(){t._shouldBlockInteractivity=!1;},500));}},{key:"render",value:function value(){var e=this,t=this.props,n=t.domId,r=t.isLoading,o=t.items,i=t.renderCallout,a=t.renderHeader,l=t.renderNoResultsState,d=t.selectedItems,u=t.style,p=!(!r&&!o.length),h=0,f=!!d;return p?s.createElement(c.Z,{accessibilityMultiSelectable:f,accessibilityRole:"listbox",nativeID:n,style:u},i?i():null,s.createElement(b,{isLoading:!!r}),a?a():null,o.length?o.map(function(t,n){var r=!Array.isArray(o[n-1])&&n>0,i=n<o.length-1,a=Array.isArray(t)?e._renderTypeaheadGroup(t,h,r,i):e._renderTypeaheadItem(t,h);return h+=Array.isArray(t)?t.length:1,a;}):null):l?l({style:u}):null;}},{key:"_renderTypeaheadGroup",value:function value(e,t,n,r){var o=this,i=this.props.withSectionDivider;return s.createElement(s.Fragment,{key:"typeaheadGroup-".concat(t)},i&&n?s.createElement(d.Z,{key:"typeaheadDividerTop-".concat(t)}):null,e.map(function(e,n){return o._renderTypeaheadItem(e,t+n);}),i&&r?s.createElement(d.Z,{key:"typeaheadDividerBottom-".concat(t)}):null);}},{key:"_renderTypeaheadItem",value:function value(e,t){var n=this.props,r=n.ariaDescendantId,o=n.getItemDisabledMessage,i=n.getItemIsDisabled,a=n.getUserDisplayNameLabel,l=n.query,c=n.renderAvatarDecoration,d=n.renderUserDecoration,u=n.selectedItems,p=n.source,f=n.withUserHoverCard,m=this.state.focusIndex,y=!(!u||!e.id)&&u.indexOf(e.id)>=0,v=!!u,g=m===t,_=i&&i(e,e.data),I=o&&o(e,e.data);return s.createElement(h.ZP,{disabledMessage:I,domId:g?r:void 0,getUserDisplayNameLabel:a,isDisabled:_,isFocused:g,isInMultiSelect:v,isSelected:y,item:e,key:"typeaheadItem-".concat(t,"-").concat(e.id||""),onClick:this._handleItemClick,onRef:g?this._setFocusedItemRef:void 0,query:l,renderAvatarDecoration:c,renderUserDecoration:d,source:p,withUserHoverCard:f});}},{key:"_getScrollParent",value:function value(){if(!this._scrollParent){var e=(0,f.rP)(l.findDOMNode(this));this._scrollParent=e===window?null:e;}return this._scrollParent;}}]),n;}(s.Component);},45102:function _(e,t,n){n.d(t,{Z:function Z(){return W;}});var r=n(807896),o=n(459740),i=n(709249),a=n(887371),s=n(545754),l=n(486906),c=(n(543450),n(995342),n(358188),n(739529),n(231235),n(416781),n(202784)),d=n(679640),u=n(235193),p=n(136830),h=n(506800),f=n(676275),m=n(588027),y=n(137378),v=n(452612),g=n(823803),_=n(331261),I=n(968079),w=(n(374083),n(332501),n(443430),n(136728),n(818178),n(24949)),x=n(211469),b=n(53223),C=n(923335),D=n(32941),Z=n(392160),E=n(257851),R=n(941430),S=n(286928),T=n(157659),k=[m.my.Users],F=function F(e){var t=e.communityId,n=e.filter,r=e.query,o=e.source,i=e.trustedFriendsId;return(0,E.Ol)({q:r,result_type:(n||k).join(","),src:o},{communityId:t,trustedFriendsId:i});},P=function P(e,t){var n=F(t);return(0,E.uD)(e,n);},L=function L(e,t){var n=F(t);return(0,E.YN)(e,n);},U=function U(e,t){var n=F(t);return(0,E.T5)(e,n);},N=function N(e,t){var n=F(t);return(0,E.dV)(e,n);};function H(e,t){var n=F(t);return(0,E.PG)(e,n);}var A=function A(e,t){return(t.rounded_graph_weight||0)-(e.rounded_graph_weight||0);};var M=function M(){return(0,w.P1)(L,(0,w.P1)(function(e,t){return t.query;},function(e,t){return t.filter;},R.Sc,R.sM,function(e,t,n,r){if(!e||!t||t.indexOf(m.my.Users)<0)return(0,h.o)();var o=(0,R.UA)(n,e);return(0,m.It)(o.map(function(e){return r[e];}).sort(A).slice(0,10));}),P,function(e,t){return t.injectedItems;},function(e,t){return t.query;},function(e,t){return t.getUserExactMatch;},function(e,t){return t.userLimit;},function(e,t,n,r,o,i,a){var s=(0,x.Z)(r||[],function(e){return e.type===m.El.User?e.data.id_str:void 0;}),l=t.filter(function(e){return s.indexOf(e.id)<0;}),c=e.filter(function(e){return s.indexOf(e.id)<0;}),d=(0,D.sY)(l,c).slice(0,a||10),u=n===g.ZP.LOADED,p=i&&i({query:o,hasResults:!!e.length,isLoaded:u,remoteUsers:e}),f=p?[].concat((0,I.Z)(d),[p]):d;return{users:f.length?f:(0,h.o)(),userExactMatch:p,filteredPrefetchUsers:l,filteredRemoteUsers:c};});},O=function O(){return(0,w.P1)((0,w.P1)(N,P,function(e,t){return t.query;},function(e,t){return t.maxEvents;},function(e,t){return t.filter;},function(e,t,n,r,o){var i=n&&o&&o.indexOf(m.my.Events)>=0,a=e.slice(0,r||1);return a.length&&i?a:(0,h.o)();}),(0,w.P1)(H,P,function(e,t){return t.query;},function(e,t){return t.maxLists;},function(e,t){return t.filter;},function(e,t,n,r,o){var i=n&&o&&o.indexOf(m.my.Lists)>=0,a=e.slice(0,r||5);return a.length&&i?a:(0,h.o)();}),(0,w.P1)(U,P,function(e,t){return t.query;},function(e,t){return t.maxTopics;},function(e,t){return t.getTopicExactMatch;},function(e,t,n,r,o){var i=t===g.ZP.LOADED,a=o&&o({query:n,hasResults:!!e.length,isLoaded:i}),s=e.slice(0,r||3);return a&&s.push(a),s.length?s:(0,h.o)();}),M(),function(e,t){return t.injectedItems;},function(e,t,n,r,o){var i=r.users,a=o&&o.length?o:null;return e.length||t.length||n.length||i.length?(0,b.Z)([a,e.length?e:void 0,n.length?n:void 0,i.length?i:void 0,t.length?t:void 0]):a?[a]:(0,h.o)();});};var B=(0,Z.Z)().propsFromState(function(){return{fetchStatus:P,items:O()};}).propsFromActions(function(){return{createLocalApiErrorHandler:(0,C.createLocalApiErrorHandlerWithContextFactory)("TYPEAHEAD_DROPDOWN_CONTAINER_CONTEXT"),fetchTypeaheadIfNeeded:E.o4,fetchUsersIfNeeded:T.ZP.fetchManyIfNeeded,fetchUsersPresenceIfNeeded:S.ZP.fetchManyIfNeeded,prefetchTypeaheadUsersIfNeeded:R.zP};}).withAnalytics({element:"typeahead"});var q=["analytics","communityId","contextText","createLocalApiErrorHandler","dropdownRef","fetchStatus","fetchTypeaheadIfNeeded","fetchUsersIfNeeded","fetchUsersPresenceIfNeeded","filter","getTopicExactMatch","getUserExactMatch","injectedItems","items","maxEvents","maxLists","maxTopics","onItemClick","onItemsChanged","prefetchTypeaheadUsersIfNeeded","query","shouldDeferPrefetch","topicType","trustedFriendsId","userLimit"],z=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e,r){var o;return(0,i.Z)(this,n),(o=t.call(this,e,r))._fetchUsersIfNeeded=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=o.props,n=t.fetchUsersIfNeeded,r=t.items,i=t.source;if(o.context.featureSwitches.isTrue("follow_nudge_search_enabled")&&o.context.loggedInUserId&&i===m._4.SearchBox){var a=(0,d.Z)(e).filter(function(e){return e.type===v.ZP.User;}).map(function(e){return e.id;}),s=(0,d.Z)(r).filter(function(e){return e.type===v.ZP.User;}).filter(function(e){return!a.includes(e.id);}).map(function(e){return e.id;});(null==s?void 0:s.length)&&n(s);}},o._fetchTypeaheadResultsIfNeeded=function(e){var t=o.context.featureSwitches.isTrue("c9s_community_composer_hashtag_suggestions_enabled");e.query&&e.fetchTypeaheadIfNeeded({q:e.query,src:e.source,result_type:e.filter.join(","),context_text:e.contextText,topic_type:e.topicType,context_community_id:t?e.communityId:void 0},{communityId:e.communityId,trustedFriendsId:e.trustedFriendsId})["catch"](e.createLocalApiErrorHandler({}));},o._handleItemClick=function(e,t){var n=o.props,r=n.analytics,i=n.onItemClick,a=n.query;i(e,t);var s=f.Z.forTypeaheadResult(e,t),l=s?[s]:void 0;r.scribe({action:"click",data:{search_details:{query:a},targets:l}});},o._scribeResults=function(){var e=o.props,t=e.analytics,n=e.items,r=e.query;t.scribe({action:"impression",data:{items:f.Z.forTypeaheadResults(n),search_details:{query:r}}});},o._debouncedFetchTypeaheadResultsIfNeeded=(0,u.Z)(o._fetchTypeaheadResultsIfNeeded,250),o.state={shouldShowPrefetchResults:!0},o._previouslyLoadedResults=(0,h.o)(),o;}return(0,a.Z)(n,[{key:"componentDidMount",value:function value(){var e=this.props,t=e.createLocalApiErrorHandler,n=e.prefetchTypeaheadUsersIfNeeded;this._debouncedFetchTypeaheadResultsIfNeeded(this.props),n()["catch"](t({})),this._fetchUsersIfNeeded();}},{key:"componentWillUnmount",value:function value(){clearTimeout(this._prefetchResultsTimer);}},{key:"componentDidUpdate",value:function value(e){var t=this,n=this.props,r=n.createLocalApiErrorHandler,o=n.domId,i=n.fetchUsersPresenceIfNeeded,a=n.filter,s=n.items,l=n.onItemsChanged,c=n.query,u=n.shouldDeferPrefetch,p=n.source,h=e.filter,f=e.query,m=e.source,_=this.context.loggedInUserId,I=this.context.featureSwitches.isTrue("voice_rooms_typeahead_audiospace_ring_enabled")&&_;if(null!=s&&s.length&&s!==e.items){if(this._scribeResults(),l){var w=!1,x=o?document.getElementById(o):null;x&&x.scrollHeight>x.offsetHeight&&(w=!0),l(s,w);}if(I){var b=(0,d.Z)(s).filter(function(e){return e.type===v.ZP.User;}).map(function(e){return e.id;});b&&i(b)["catch"](r({}));}this._fetchUsersIfNeeded(e.items);}e.fetchStatus===g.ZP.LOADED&&(this._previouslyLoadedResults=e.items),c===f&&a===h&&p===m||(this._debouncedFetchTypeaheadResultsIfNeeded(this.props),u&&(clearTimeout(this._prefetchResultsTimer),this.setState({shouldShowPrefetchResults:!1}),this._prefetchResultsTimer=setTimeout(function(){t.props.query&&t.props.fetchStatus!==g.ZP.LOADED&&t.setState({shouldShowPrefetchResults:!0});},y.n)));}},{key:"render",value:function value(){var e,t=this.props,n=(t.analytics,t.communityId,t.contextText,t.createLocalApiErrorHandler,t.dropdownRef),i=t.fetchStatus,a=(t.fetchTypeaheadIfNeeded,t.fetchUsersIfNeeded,t.fetchUsersPresenceIfNeeded,t.filter,t.getTopicExactMatch,t.getUserExactMatch,t.injectedItems,t.items),s=(t.maxEvents,t.maxLists,t.maxTopics,t.onItemClick,t.onItemsChanged,t.prefetchTypeaheadUsersIfNeeded,t.query),l=(t.shouldDeferPrefetch,t.topicType,t.trustedFriendsId,t.userLimit,(0,o.Z)(t,q)),d=s&&i!==g.ZP.LOADED;return e=d?this.state.shouldShowPrefetchResults&&a.length?a:this._previouslyLoadedResults:a,c.createElement(p.Z,(0,r.Z)({},l,{isLoading:!!d,items:e,onItemClick:this._handleItemClick,query:s,ref:n}));}}]),n;}(c.Component);z.contextType=_.rC,z.defaultProps={filter:[m.my.Users],injectedItems:[],maxEvents:3,maxLists:3,maxTopics:1};var V=c.forwardRef(function(e,t){return c.createElement(z,(0,r.Z)({},e,{dropdownRef:t}));});var W=B.forwardRef(V);},974383:function _(e,t,n){n.r(t),n.d(t,{TypeaheadInput:function TypeaheadInput(){return S;},"default":function _default(){return k;},styles:function styles(){return T;}});var r=n(807896),o=n(133028),i=n(709249),a=n(887371),s=n(545754),l=n(486906),c=(n(995342),n(358188),n(108532),n(202784)),d=n(325686),u=n(535030),p=n(322150),h=n(973186),f=n(786242),m=n(854044),y=n(645184),v=n.n(y),g=n(954170),_=n(999322),I=n(795254),w=n(977559),x=n(879075),b=n(588027),C=n(32941),D=n(331261),Z=n(45102),E=v().f065ba8c,R=1,S=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e,a){var s;return(0,i.Z)(this,n),(s=t.call(this,e,a))._render=function(e){var t=e.containerWidth,n=s.props,i=n.alwaysOpen,a=n.disableClearButton,l=n.forceVdlDisable,h=n.inputStyle,f=n.isCompact,m=n.isOnHomepage,y=n.placeholder,v=n.renderCustomInput,I=n.renderInSearchField,w=n.rounded,x=n.shouldAutoFocus,b=n.shouldFocusOnClear,C=n.style,D=n.testID,Z=s.state.showTypeaheadDropdown||i,R={Icon:g["default"],ariaActiveDescendant:s.state.ariaDescendantId,ariaAutocomplete:"list",ariaExpanded:Z,ariaLabel:E,ariaOwns:s._dropdownDomId,ariaRole:"combobox",autoComplete:"off",autoCorrect:!1,autoFocus:x,contentBelow:I&&I(),focusOnClear:b,isCompact:f,leftAligned:m,onBlur:s._handleInputBlur,onChange:s._handleInputChange,onClear:s._handleInputClear,onFocus:s._handleInputFocus,onLayout:s._handleInputLayoutChanged,placeholder:y,returnKeyType:"search",spellCheck:"false",styleType:l?"legacyPill":w?"pill":"selection",testID:D,value:s.state.query,withClearButton:!a&&s.state.showTypeaheadDropdown};return c.createElement(d.Z,{onLayout:s._handleLayout,ref:s._setRootContainerNode,style:[T.root,C]},c.createElement(u.Z,{onKeyDown:s._handleKeyDown,style:T.keydownInputListener},c.createElement(_.Z,{accessibilityLabel:y,accessibilityRole:"search",onSubmit:s._handleFormSubmit,style:T.wrapper},c.createElement(d.Z,{ref:s._setInputContainerNode,style:h},v?v((0,o.Z)((0,o.Z)({},R),{},{handleReturn:s._handleRichTextInputReturn})):c.createElement(p.Z,(0,r.Z)({},R,{ref:s._setInputRef}))),c.createElement(d.Z,{style:[T.typeaheadContainer,!w&&T.topBorder]},Z?s._renderDropdown(t):null))));},s._renderDropdown=function(e){var t=s.props,n=t.communityId,r=t.filter,o=t.getItemDisabledMessage,i=t.getItemIsDisabled,a=t.getTopicExactMatch,l=t.getUserDisplayNameLabel,d=t.getUserExactMatch,u=t.injectedItems,p=t.isModal,f=t.isOnHomepage,m=t.maxEvents,y=t.maxLists,v=t.maxTopics,g=t.onItemsChanged,_=t.renderAvatarDecoration,I=t.renderCallout,x=t.renderCustomDropdown,b=t.renderEmptyState,D=t.renderHeader,E=t.renderNoResultsState,R=t.renderUserDecoration,S=t.selectedItems,k=t.shouldDeferPrefetch,F=t.source,P=t.trustedFriendsId,L=t.userLimit,U=t.withFixedPositioning,N=t.withSectionDivider,H=t.withUserHoverCard,A=e>=h.Z.theme.breakpoints.medium||(0,w.ZP)(),M=s.state,O=M.dropdownOffset,B=M.query,q=p?T.modalDropdown:[T.dropdown,!A&&U&&O?[(0,C.xX)(O),{height:"calc(100vh - ".concat(O,"px)")}]:null,(A||f)&&T.wideModeDropdown,f&&T.shortModeDropdown,!A&&f&&T.shortModeDropdownMobile],z={ariaDescendantId:s.state.ariaDescendantId,domId:s._dropdownDomId,onDismiss:s._handleOnEmptyStateDismiss,onItemFocusChanged:s._handleItemFocusChanged,ref:s._handleDropdownRef,style:q},V={ariaDescendantId:s.state.ariaDescendantId,communityId:n,domId:s._dropdownDomId,filter:r,getItemDisabledMessage:o,getItemIsDisabled:i,getTopicExactMatch:a,getUserDisplayNameLabel:l,getUserExactMatch:d,injectedItems:u,maxEvents:m,maxLists:y,maxTopics:v,onItemClick:s._handleItemClick,onItemFocusChanged:s._handleItemFocusChanged,onItemsChanged:g,query:B,ref:s._handleDropdownRef,renderAvatarDecoration:_,renderCallout:I,renderHeader:D,renderNoResultsState:E,renderUserDecoration:R,selectedItems:S,shouldDeferPrefetch:k,source:F,style:q,trustedFriendsId:P,userLimit:L,withSectionDivider:N,withUserHoverCard:H};return b&&!B?b(z):x?x(V):c.createElement(Z.Z,V);},s._dismissDropdown=function(){s.setState({showTypeaheadDropdown:!1}),s.props.onDismiss&&s.props.onDismiss();},s._handleOnEmptyStateDismiss=function(){s._dismissDropdown(),s._inputRef&&s._inputRef.blur();},s._handleLayout=function(){s._updatePosition();},s._handleInputLayoutChanged=function(){s._updatePosition();},s._updatePosition=function(){if(s._inputContainerNode){var e=s._inputContainerNode.getBoundingClientRect().bottom;e!==s.state.dropdownOffset&&s.setState({dropdownOffset:e});}},s._handleDropdownRef=function(e){s._dropdownRef=e;},s._setRootContainerNode=function(e){s._rootContainerNode=e||null;},s._setInputRef=function(e){s._inputRef=e,s._activeChildRef||(s._activeChildRef=e);},s._setInputContainerNode=function(e){s._inputContainerNode=e||null,s._inputContainerNode&&s._updatePosition();},s._handleFocusChange=function(e){var t=f.Z.getCount()>0;s._rootContainerNode&&s._rootContainerNode.contains(e.target)||t||s.state.showTypeaheadDropdown&&s._dismissDropdown();},s._handleKeyDown=function(e){var t=e.key,n=e.shiftKey,r=s.props.alwaysOpen,o=s.state.showTypeaheadDropdown;if((0,C.kE)(e))if(t!==x.Dd){if(s.state.inputHasFocus)return t===x.WX?(s._focusNext(),void e.preventDefault()):t===x.kl?(s._focusPrevious(),void e.preventDefault()):t===x.nQ&&!r&&o?(s._dismissDropdown(),void e.preventDefault()):t===x.NW&&s._hasFocusedItem()?(s._selectFocusedItem(),void e.preventDefault()):void(t!==x.jF&&t!==x.Ci||!s._deleteFocusedItem()?o||s.setState({showTypeaheadDropdown:!0}):e.preventDefault());}else{var i=n&&s._navigatePrevious()||!n&&s._navigateNext();i?(s._activeChildRef=i,e.preventDefault(),i.focus()):s._dismissDropdown();}},s._handleItemFocusChanged=function(){s.setState({ariaDescendantId:(0,C.A1)()});},s._handleInputClear=function(){s.setQuery("");},s._handleInputBlur=function(){s.setState({inputHasFocus:!1}),s.props.onBlur&&s.props.onBlur();},s._handleInputFocus=function(){s._activeChildRef=s._inputRef,s.setState({inputHasFocus:!0,showTypeaheadDropdown:!0}),s._updatePosition(),s.props.onFocus&&s.props.onFocus();},s._handleRichTextInputReturn=function(e){return e.shiftKey?"not-handled":(s._hasFocusedItem()||s._handleFormSubmit(e),"handled");},s._handleInputChange=function(e){s.setQuery(e.target.value),s._updatePosition();},s._handleFormSubmit=function(e){e.preventDefault(),e.stopPropagation(),s._inputRef&&s._inputRef.blur(),s.setState({showTypeaheadDropdown:!1}),s.props.onDismiss&&s.props.onDismiss(),s.props.onSubmit&&s.props.onSubmit();},s._handleItemClick=function(e,t){var n=s.props,r=n.onDismiss,o=n.onItemClick,i=n.shouldClearOnSelect,a=n.shouldFocusOnClear,l=i?"":s.state.query;s.setState({showTypeaheadDropdown:!1}),s._inputRef&&(i&&a?s._inputRef.focus():s._inputRef.blur()),s.setQuery(l),r&&r(),o&&o(e,t);},s._hasFocusedItem=function(){return s._dropdownRef&&s._dropdownRef.hasFocusedItem();},s._deleteFocusedItem=function(){return!!(s._dropdownRef&&s._dropdownRef.deleteFocusedItem&&s._dropdownRef.hasFocusedItem()&&s._dropdownRef.deleteFocusedItem());},s._selectFocusedItem=function(){s._dropdownRef&&s._dropdownRef.selectFocusedItem();},s._focusNext=function(){s._dropdownRef&&s._dropdownRef.focusNext();},s._focusPrevious=function(){s._dropdownRef&&s._dropdownRef.focusPrevious();},s._navigateNext=function(){if(s._dropdownRef&&s._dropdownRef.navigateNext)return s._dropdownRef.navigateNext();},s._navigatePrevious=function(){if(!s.state.inputHasFocus&&s._dropdownRef&&s._dropdownRef.navigatePrevious)return s._dropdownRef.navigatePrevious()||s._inputRef;},s.state={ariaDescendantId:(0,C.A1)(),inputHasFocus:!1,query:e.initialValue,showTypeaheadDropdown:!1},s._dropdownDomId="typeaheadDropdown-".concat(R),R+=1,s;}return(0,a.Z)(n,[{key:"componentDidUpdate",value:function value(e){this.props.initialValue!==e.initialValue&&this.setQuery(this.props.initialValue);}},{key:"componentDidMount",value:function value(){window.document.addEventListener("click",this._handleFocusChange,!0);}},{key:"componentWillUnmount",value:function value(){window.document.removeEventListener("click",this._handleFocusChange,!0);}},{key:"render",value:function value(){return c.createElement(m.ZP,null,this._render);}},{key:"focus",value:function value(){this._activeChildRef&&this._activeChildRef.focus();}},{key:"setQuery",value:function value(e){this.setState({query:e}),this.props.onQueryChange&&this.props.onQueryChange(e);}}]),n;}(c.Component);S.defaultProps={disableClearButton:!1,filter:[b.my.Users,b.my.Topics],initialValue:"",withSectionDivider:!0,withUserHoverCard:!1},S.contextType=D.rC;var T=h.Z.create(function(e){return{root:{flex:1,flexDirection:"column",position:"relative",zIndex:I.R0+1},typeaheadContainer:{flex:1,position:"relative"},keydownInputListener:{flexShrink:1,width:"100%"},dropdown:{backgroundColor:e.colors.cellBackground,start:0,end:0,overflowY:"auto",overscrollBehavior:"contain",position:"absolute",top:0,WebkitOverflowScrolling:"touch"},modalDropdown:{backgroundColor:e.colors.cellBackground,flex:1,minHeight:300,position:"relative",overflowY:"auto",overscrollBehavior:"auto",WebkitOverflowScrolling:"touch"},wideModeDropdown:{borderRadius:e.borderRadii.medium,boxShadow:e.boxShadows.medium,minHeight:100,maxHeight:"calc(80vh - ".concat(e.componentDimensions.appBarHeight,")")},shortModeDropdown:{minHeight:100,maxHeight:"35vh",paddingBottom:"0"},shortModeDropdownMobile:{position:"absolute",height:"40vh",top:0},wrapper:{alignItems:"stretch",flex:1},topBorder:{borderTopColor:e.colors.gray200,borderTopStyle:"solid",borderTopWidth:e.borderWidths.small}};});var k=S;},430084:function _(e,t,n){n.d(t,{Z:function Z(){return l;}});var r=n(202784),o=n(325686),i=n(35953),a=n(744329),s=n(436934);function l(e){var t=e.image,n=e.style,l=e.supportText,d=e.title;return r.createElement(o.Z,{style:[c.root,n]},r.createElement(o.Z,{style:[c.coverContainer,c.cellThumbnail]},t?r.createElement(i.Z,{accessibilityLabel:"",aspectMode:a.Z.SQUARE,image:t}):null),r.createElement(o.Z,{style:c.bodyColumn},l?r.createElement(s.ZP,{color:"gray700",numberOfLines:1,size:"subtext2"},l):null,r.createElement(s.ZP,{numberOfLines:2,weight:"bold"},d)));}var c=n(973186).Z.create(function(e){return{root:{flexDirection:"row",flexShrink:1,flexGrow:1},bodyColumn:{justifyContent:"center",flexDirection:"column",marginEnd:e.spaces.space4,marginStart:e.spaces.space12,flexShrink:1},coverContainer:{borderRadius:e.borderRadii.large,overflow:"hidden"},cellThumbnail:{height:e.spaces.space48,width:e.spaces.space48}};});},319051:function _(e,t,n){n.d(t,{ib:function ib(){return se;},ZP:function ZP(){return oe;}});var r=n(709249),o=n(887371),i=n(545754),a=n(486906),s=(n(818178),n(326936),n(202784)),l=n(325686),c=n(174062),d=n(436934),u=n(973186),p=n(433363),h=n(507066),f=n(588027),m=n(331261),y=n(137541),v=n(523837),g=n(741266),_=n(284515),I=n(392160),w=n(192157),x=n(157659),b=function b(e,t){return t.conversationId;},C=function C(e,t){return(0,w.x)(e,b(0,t));};var D=(0,I.Z)().propsFromState(function(){return{conversationId:b,conversation:C,users:x.ZP.selectAll};}).adjustStateProps(function(e){var t=e.conversation,n=(e.conversationId,e.users),r={conversation:void 0};return null!=t&&t.data&&(r.conversation=(0,_.E5)(t.data,void 0,n)),r;});var Z=u.Z.create(function(e){return{root:{cursor:"pointer",paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical,width:"100%"},avatarColumn:{flexGrow:1,maxWidth:e.spaces.space40,minWidth:"32px"},bodyColumn:{flexGrow:7,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},disabled:{opacity:.6,backgroundColor:e.colors.gray0}};});var E=D(function(e){var t=e.conversation,n=e.isDisabled,r=e.isSelected,o=e.perspective;return t?s.createElement(y.Z,{avatarCell:s.createElement(v.Z,{conversation:t,perspective:o,size:"xLarge"}),avatarCellStyle:Z.avatarColumn,avatarSize:"xLarge",cellStyle:Z.bodyColumn,style:[Z.root,!r&&n&&Z.disabled]},s.createElement(g.Z,{conversation:t,perspective:o,withParticipantsCount:!0}),se({isSelected:r})):null;});var R=n(430084),S=n(35953),T=n(744329),k=n(3613),F=n(537800);function P(e){return s.createElement(l.Z,{style:L.container},s.createElement(l.Z,{style:L.imageContainer},s.createElement(S.Z,{accessibilityLabel:"",aspectMode:T.Z.SQUARE,image:e.image})),s.createElement(l.Z,{style:L.bodyContainer},s.createElement(k.Z,null,s.createElement(d.ZP,{numberOfLines:1,size:"body",weight:"bold"},e.name),s.createElement(d.ZP,{color:"gray700",numberOfLines:1,size:"subtext2"},e.secondaryContext)),s.createElement(l.Z,{style:L.row},s.createElement(F.Z,{style:L.facepile,userAvatarSize:"small",userAvatarUrls:e.facepileUrls,withIncreasedSpacing:!0}),s.createElement(d.ZP,{color:"gray700",numberOfLines:1,size:"subtext2"},e.primaryContext))));}var L=u.Z.create(function(e){return{bodyContainer:{flexShrink:1},container:{flexDirection:"row",paddingHorizontal:e.spaces.space16,paddingVertical:e.spaces.space12},facepile:{marginEnd:e.spaces.space4},imageContainer:{borderRadius:e.borderRadii.medium,height:e.spaces.space40,marginEnd:e.spaces.space12,overflow:"hidden",width:e.spaces.space40},row:{flexDirection:"row"}};}),U=(n(543450),n(96847)),N=n(238749),H=n(880166),A=n(210891),M=(n(374083),n(995342),n(358188),n(684870),n(753985),n(136728),n(332501),n(739529),n(231235),n(477950),n(385940),n(695793));var O=u.Z.create(function(e){return{root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16},context:{alignItems:"center",flexDirection:"row"},icon:{color:e.colors.primary,height:e.fontSizes.subtext2,paddingEnd:e.spaces.space4,width:e.fontSizes.subtext2},disabled:{backgroundColor:e.colors.gray0},searchIcon:{marginEnd:e.spaces.space12,borderWidth:0,backgroundColor:"none"},searchIconCell:{flexDirection:"row",alignItems:"center"},wrapperCellStyle:{justifyContent:"center"}};});var B=function B(e){var t=e.isDisabled,n=e.query,r=e.resultContext,o=e.showIcon,i=e.style,a=function(e,t){var n,r=(0,M.Z)(e),o=e.toLowerCase().indexOf(t.toLowerCase()),i=o+t.length;if(0===r.length){var a=[o>0?[0,o]:void 0,[i,e.length]].filter(Boolean);n=[{highlights:-1!==o?a:void 0,text:e,entityType:"text",prefix:"",indices:[0,e.length]}];}else{var s=r.flatMap(function(t,n,r){var o=t.indices,i=0===n?0:r[n-1].indices[1],a=n===r.length-1,s=[];return i!==o[0]&&s.push(e.slice(i,o[0])),s.push(e.substring(o[0],o[1])),a&&e.length!==o[1]&&s.push(e.slice(o[1])),s;}),l=0,c=s.map(function(e,t,n){l+=t>0?n[t-1].length:0;var r=e.length;return{runningTotal:l,containsQuery:-1!==o&&l+r>=o&&l<i};});n=s.map(function(e,t){var n,r,a,s=c[t],l=s.containsQuery,d=s.runningTotal,u=e.includes("#");if(l){if(l){var p=d<o?o-d:0,h=d+e.length<i?e.length:i-d;u&&(p-=1,h-=1),r=[],p>0&&r.push([0,p]),h!==e.length-1&&r.push([h,e.length]);}}else r=[[0,e.length]];return null!==(n=r)&&void 0!==n&&n.length&&(a=r),u?{highlights:a,text:"".concat(null==e?void 0:e.replace("#","")),entityType:"hashtag",prefix:"#",indices:[d,d+e.length]}:{highlights:a,text:e,entityType:"text",prefix:"",indices:[d,d+e.length]};});}return n;}(e.topic,n),c=s.createElement(d.ZP,null,a.map(function(e,t){return s.createElement(U.ZP,{key:"".concat(e.text).concat(t),part:e});})),u="xLarge",p=s.createElement(s.Fragment,null,c,r?s.createElement(l.Z,{style:O.context},r&&r.types[0]&&"followable_topic"===r.types[0].type?s.createElement(H["default"],{style:O.icon}):null,s.createElement(d.ZP,{color:"gray700"},r.display_string||" ")):null);return s.createElement(l.Z,{style:[O.root,t&&O.disabled,i]},o?function(e){var t=s.createElement(N.Z,{Icon:A["default"],color:"neutral",size:u,style:O.searchIcon});return s.createElement(y.Z,{avatarCell:t,avatarCellStyle:O.searchIconCell,avatarSize:u,cellStyle:O.wrapperCellStyle},e);}(p):p);};n(22144);var q=n(819153),z=n(645184),V=n.n(z),W=n(235210),j=n(286928),Q=function Q(e,t){return(0,j.cY)(e,t.userId);};var G=(0,I.Z)().propsFromState(function(){return{userSpace:Q};}),Y="TypeaheadUser";var K=V().ae2205d2,X=V().d960b55c,J=V().fd06b02f,$=Object.freeze({num_of_followers:W.Z.Follow,bio:W.Z.TextOnly,location:W.Z.Location,num_tweets:W.Z.NewTweets,follow_relationship:W.Z.Follow,followers_follow:W.Z.Follow,social_proof:W.Z.SocialProof,follow_relationship_mutual_follow:W.Z.FollowMutual,follow_relationship_followed:W.Z.FollowFollowed,follow_relationship_following:W.Z.FollowFollowing,highlighted_label:"HighlightedIcon"}),ee=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._handleAvatarClick=function(){e.props.userSpace||e._handleClick();},e._handleClick=function(){var t=e.props,n=t.isDisabled,r=t.item,o=t.onItemClick;o&&o(r,!!n);},e;}return(0,o.Z)(n,[{key:"render",value:function value(){var e=this.props,t=e.affiliateBadgeInfo,n=e.avatarDecoration,r=e.avatarUri,o=e.decoration,i=e.disabledMessage,a=e.displayNameLabel,l=e.isBlueVerified,c=e.isDisabled,d=e.isProtected,u=e.isVerified,p=e.name,h=e.screenName,m=e.source,y=e.userId,v=e.userSpace,g=e.verifiedType,_=e.withHoverCard,I=this.context.featureSwitches,w=this._getItemContext(),x=w.context,b=w.highlightedLabel,C=m===f._4.SearchBox,D=v&&I.isTrue("voice_rooms_typeahead_audiospace_ring_enabled")?v:void 0;return D&&(D.accessibilityLabel=J({screenName:h})),s.createElement(q.ZP,{affiliateBadgeInfo:t,avatarDecoration:n,avatarSize:"xLarge",avatarUri:r,decoration:o,disabledMessage:c?i:void 0,displayMode:"UserCompact",displayNameLabel:a,highlightedLabel:b,isBlueVerified:l,isDisabled:c,isProtected:d,isVerified:u,name:p,onAvatarClick:this._handleAvatarClick,onCellClick:this._handleClick,onScreenNameClick:this._handleClick,presenceIndicator:C?D:void 0,screenName:h,socialContext:x,testID:Y,userId:y,verifiedType:g,withBottomSocialContext:!0,withInteractiveStyling:!1,withLink:_});}},{key:"_getItemContext",value:function value(){var e=this._getResultContext();return{highlightedLabel:null==e?void 0:e.highlightedLabel,context:null!=e&&e.highlightedLabel?void 0:e||this._getSocialContext()};}},{key:"_getSocialContext",value:function value(){var e=this.props.socialContext;if(e&&e.following){var t=e.followed_by?K:X;return{contextType:W.Z.Follow,text:t};}}},{key:"_getResultContext",value:function value(){var e=this.props.resultContext;if(e&&e.display_string&&e.types){var t=e.display_string,n=e.icon_url,r=e.types,o=r.length?r[0].type:void 0,i=o&&o in $?$[o]:W.Z.TextOnly;return{contextType:i,text:t,highlightedLabel:i===$.highlighted_label&&n?{badge:{url:n},description:t}:void 0};}}}]),n;}(s.PureComponent);ee.contextType=m.rC,ee.defaultProps={withHoverCard:!1};var te=G.forwardRef(ee),ne="typeaheadResult";var re=function re(e){return e.children;};function oe(e){return s.createElement(re,{item:e.item},s.createElement(ie,e));}var ie=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._onViewRef=function(t){e._viewRef=t;var n=e.props.onRef;n&&n(t);},e._handleClick=function(){var t=e.props.item;t.type!==f.El.User&&e.props.onClick&&e.props.onClick(t,e.isDisabled);},e;}return(0,o.Z)(n,[{key:"componentDidMount",value:function value(){var e=this;this._loaded=!0,this._viewRef&&(this._rafId=window.requestAnimationFrame(function(){e._viewRef&&e._viewRef.setNativeProps({style:{opacity:1}});}));}},{key:"componentDidUpdate",value:function value(e){var t=this.props.onRef;t&&t!==e.onRef&&this._viewRef&&t(this._viewRef);}},{key:"componentWillUnmount",value:function value(){this._rafId&&window.cancelAnimationFrame(this._rafId);}},{key:"render",value:function value(){var e=this.props,t=e.domId,n=e.isDisabled,r=e.isFocused,o=e.isInMultiSelect,i=e.isSelected,a=e.style;return s.createElement(l.Z,{accessibilityChecked:!(!o||!i)||void 0,accessibilityRole:"option",accessibilitySelected:n?void 0:o&&i||!o&&!!r,nativeID:t,testID:ne},s.createElement(c.Z,{accessibilityRole:o?"checkbox":"button",disabled:n,focusable:!0,onPress:this._handleClick,style:[r&&ae.focused,ae.transitionStyles,this._loaded&&ae.loaded,a],viewRef:this._onViewRef},this._renderResult()));}},{key:"_renderResult",value:function value(){var e=this.props,t=e.disabledMessage,n=e.getUserDisplayNameLabel,r=e.isDisabled,o=e.isSelected,i=e.item,a=e.onClick,c=e.renderAvatarDecoration,u=e.renderUserDecoration,h=e.source,m=e.withUserHoverCard;switch(i.type){case f.El.DMConversation:return!!this.context.viewerUserId&&s.createElement(E,{conversationId:i.id,isDisabled:r,isSelected:o,perspective:this.context.viewerUserId});case f.El.Event:var y=i.data;return s.createElement(R.Z,{image:y.primary_image&&y.primary_image.original_info,style:ae.itemPadding,supportText:y.supporting_text,title:y.topic});case f.El.Hashtag:case f.El.Topic:var v=this.props.query,g=i.data,_=h===f._4.SearchBox;return s.createElement(B,{isDisabled:r,query:v||"",resultContext:g.result_context,showIcon:_,style:_?ae.itemPadding:void 0,topic:g.topic});case f.El.List:var I=i.data.facepile_urls,w=i.data.primary_image.original_info,x=i.data.topic,b=i.data.result_contexts[0].result_context.display_string,C=i.data.result_contexts[1].result_context.display_string;return s.createElement(P,{facepileUrls:I,image:w,name:x,primaryContext:b,secondaryContext:C});case f.El.SettingGroup:var D=i.data.text;return s.createElement(l.Z,{style:ae.navigationLink},s.createElement(d.ZP,{style:ae.content,weight:"bold"},D),s.createElement(p["default"],{style:ae.icon}));case f.El.Setting:var Z=i.data.text;return s.createElement(l.Z,{style:ae.navigationLink},s.createElement(d.ZP,{style:ae.content},Z),s.createElement(p["default"],{style:ae.icon}));case f.El.NoResult:var S=i.data.text;return s.createElement(d.ZP,{style:ae.noResult},S);case f.El.User:var T=i.data,k=null==c?void 0:c(),F=u?u({userId:T.id_str,user:T,isSelected:o}):void 0,L=n?n(i,T):void 0;return s.createElement(te,{affiliateBadgeInfo:T.highlightedLabel,avatarDecoration:k||void 0,avatarUri:T.profile_image_url_https,canDm:!!T.can_dm,canMediaTag:!!T.can_media_tag,decoration:F||void 0,disabledMessage:t,displayNameLabel:L,isBlueVerified:T.is_blue_verified,isDisabled:r,isProtected:!!T["protected"],isVerified:!!T.verified,item:i,name:T.name,onItemClick:a,resultContext:T.result_context,screenName:T.screen_name,socialContext:T.social_context,source:h,userId:T.id_str,verifiedType:T.verified_type,withHoverCard:m});default:return null;}}},{key:"isDisabled",get:function get(){return!!this.props.isDisabled;}}]),n;}(s.Component);ie.contextType=m.rC;var ae=u.Z.create(function(e){return{checkIcon:{color:e.colors.primary},navigationLink:{alignItems:"center",flexDirection:"row",flexGrow:1,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16},content:{flexGrow:1,flexShrink:1},icon:{color:e.colors.gray700,paddingStart:e.spaces.space12,flexShrink:0},noResult:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16},itemPadding:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},loaded:{opacity:1},focused:{backgroundColor:e.colors.gray0},transitionStyles:{transitionProperty:"opacity",transitionDuration:"250ms",opacity:0}};}),se=function se(e){return e.isSelected?s.createElement(h["default"],{accessibilityHidden:!0,style:ae.checkIcon}):null;};},506800:function _(e,t,n){n.d(t,{o:function o(){return _o;}});var r=n(316742),_o=(0,r.Z)([]);(0,r.Z)({});},879075:function _(e,t,n){n.d(t,{Ci:function Ci(){return d;},Dd:function Dd(){return l;},NW:function NW(){return i;},Ur:function Ur(){return s;},WX:function WX(){return r;},jF:function jF(){return c;},kl:function kl(){return o;},nQ:function nQ(){return a;}});var r="ArrowDown",o="ArrowUp",i="Enter",a="Escape",s="ESC",l="Tab",c="Delete",d="Backspace";},192157:function _(e,t,n){n.d(t,{x:function x(){return o;}});var r=n(734562),o=function o(e,t){return e[r.Yf]?e[r.Yf].conversations[t]:null;};},210891:function _(e,t,n){n.r(t),n.d(t,{"default":function _default(){return l;}});var r=n(133028),o=n(202784),i=n(890601),a=n(473569),s=function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.Z)("svg",(0,r.Z)((0,r.Z)({},e),{},{accessibilityRole:e.accessibilityLabel?e.accessibilityRole||"img":void 0,accessibilityHidden:void 0===e.accessibilityLabel,style:[a.Z.root,e.style],viewBox:"0 0 21 21",children:o.createElement("g",null,o.createElement("path",{d:"M9.094 3.095c-3.314 0-6 2.686-6 6s2.686 6 6 6c1.657 0 3.155-.67 4.243-1.757 1.087-1.088 1.757-2.586 1.757-4.243 0-3.314-2.686-6-6-6zm-9 6c0-4.971 4.029-9 9-9s9 4.029 9 9c0 1.943-.617 3.744-1.664 5.215l4.475 4.474-2.122 2.122-4.474-4.475c-1.471 1.047-3.272 1.664-5.215 1.664-4.97-.001-8.999-4.03-9-9z"}))}));};s.metadata={width:21,height:21};var l=s;}}]);

//# sourceMappingURL=shared~loader.Typeahead~bundle.Communities~bundle.Delegate~bundle.Ocf~bundle.LoggedOutHome~bundle.Search~bund.25618cfa.js.map