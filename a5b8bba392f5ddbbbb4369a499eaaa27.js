var SAUpsellTrigger;(function(n){function i(n){var t=new RegExp("^https://(www.|cn.)?(bing.com|staging-bing-int.com)");return!n||!t.test(n)?!1:!0}function h(n){var t=new RegExp("^sapphirebing://");return!n||!t.test(n)?!1:!0}function c(n){var t=new RegExp("^[a-zA-Z0-9]{7,8}_[a-zA-Z0-9]{7,8}$"),i=new RegExp("^[a-zA-Z0-9]{7,8}$");return!n||!(t.test(n)||i.test(n))?!1:!0}function r(n,t,r,u){u===void 0&&(u="default");i(n)||(Log.Log("OpalUpsell_SAUpsellTriggers","InvalidFallbackLink","".concat(u,", ").concat(n)),n=e);h(t)||(Log.Log("OpalUpsell_SAUpsellTriggers","InvalidDeeplink","".concat(u,", ").concat(t)),t=o);c(r)||(Log.Log("OpalUpsell_SAUpsellTriggers","InvalidTracker","".concat(u,", ").concat(r)),r=s);var f="https://k5nc.adj.st/".concat(t.substring(15),"&adj_t=").concat(r,"&adjust_deep_link=").concat(encodeURIComponent(t),"&adj_redirect_ios=").concat(encodeURIComponent(n),"&adj_redirect_android=").concat(encodeURIComponent(n)),l=navigator.userAgent&&navigator.userAgent.toLocaleLowerCase().indexOf("android")!==-1?"android":"ios",a=l==="android"?2e3:500;setTimeout(function(){Log.Log("OpalUpsell_SAUpsellTriggers","JumpAdjust","".concat(u,",").concat(r,",").concat(f));window.location.href=f},0);setTimeout(function(){Log.Log("OpalUpsell_SAUpsellTriggers","JumpFallback","".concat(u,",").concat(r,",").concat(n));window.location.href=n},a)}function u(n,i){var r;return i===void 0&&(i=""),i&&((r=t[n])===null||r===void 0?void 0:r.hasOwnProperty(i))||(i="default"),t[n][i]}function f(n,t,i,r){return"sapphirebing://browser?url=".concat(encodeURIComponent(n),"&network=").concat(encodeURIComponent(t),"&campaign=").concat(encodeURIComponent(i),"&adgroup=").concat(encodeURIComponent(r))}function l(n){return i(location===null||location===void 0?void 0:location.origin)?location.origin+"/search?q="+n:"https://www.bing.com/search?q="+n}function a(){var n=new RegExp(/(sapphire|edge|huawei|edg|outlook|skype)/i);return!n.test(navigator.userAgent)}function v(){var n="numberOfTimesRedirectedToSapphire",i="lastTimeRedirectedToSapphire",r=new Date,u=localStorage.getItem(i),f,e,t;if(u)if(f=new Date(u),e=r.toDateString()===f.toDateString(),e){if(t=parseInt(localStorage.getItem(n)||"0",10),t>=3)return!1;localStorage.setItem(n,(t+1).toString())}else localStorage.setItem(n,"1");else localStorage.setItem(n,"1");return localStorage.setItem(i,r.toISOString()),!0}function y(){return v()&&a()}function p(n,t,i){n===void 0&&(n="");t===void 0&&(t="");var e=u("query",t),o=i!==null&&i!==void 0?i:l(n),s=f(o,e.networkId,e.campaignId,e.adgroupId);r(o,s,e.tracker,"query")}function w(n,t){if(n===void 0&&(n=""),t===void 0&&(t=""),!n){Log.Log("OpalUpsell_SAUpsellTriggers","InvalidParameter_Link","search ".concat(n));return}var i=u("search",t),e=n,o=f(e,i.networkId,i.campaignId,i.adgroupId);r(e,o,i.tracker,"search")}var t={query:{"default":{networkId:"125czop8_12hga57x",campaignId:"13w3avcz_13ld58ji",adgroupId:"",tracker:"13w3avcz_13ld58ji"},Bing_DirectOpen_HP:{networkId:"125czop8_12hga57x",campaignId:"13g24d1z_13nu7vh1",adgroupId:"139c298d_135xw5ht",tracker:"139c298d_135xw5ht"},Bing_DirectOpen_SERP_T1:{networkId:"125czop8_12hga57x",campaignId:"13g24d1z_13nu7vh1",adgroupId:"13frk971_135dxmp6",tracker:"13frk971_135dxmp6"},Bing_DirectOpen_SERP_T2:{networkId:"125czop8_12hga57x",campaignId:"13g24d1z_13nu7vh1",adgroupId:"13pi2mfj_138mwjjk",tracker:"13pi2mfj_138mwjjk"},Bing_DirectOpen_SERP_T3:{networkId:"125czop8_12hga57x",campaignId:"13g24d1z_13nu7vh1",adgroupId:"138jmzvg_13ty271x",tracker:"138jmzvg_13ty271x"}},search:{"default":{networkId:"125czop8_12hga57x",campaignId:"13w3avcz_13ld58ji",adgroupId:"",tracker:"13w3avcz_13ld58ji"}}},e="https://www.bing.com",o="sapphirebing://home",s="13w3avcz_13ld58ji";n.shouldRedirectToSapphire=y;n.queryByApp=p;n.searchByApp=w})(SAUpsellTrigger||(SAUpsellTrigger={}))