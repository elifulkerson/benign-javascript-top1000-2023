(function(window, $, undefined){
var live1 = "";

var _ad = [];
if (_ad.length) {
live1 = AdBaha.output(_ad, 9);
}

let live2 = [{"broadcaster":"qoo60314","title":"\u3010Baldur&#039;s Gate 3\u3011\u521d\u898b \u670b\u53cb\u5e36\u98db","cover":"https:\/\/static-cdn.jtvnw.net\/previews-ttv\/live_user_45mo-1280x720.jpg","machine":"\u5176\u4ed6"},{"broadcaster":"g1208g","title":"\u67cf\u5fb7\u4e4b\u9580 3 \u2500 \u5f9e\u7d42\u7109\u5149\u8292\u65c5\u5e97\u51fa\u767c","cover":"https:\/\/static-cdn.jtvnw.net\/previews-ttv\/live_user_twboethius-1280x720.jpg","machine":"PC \u55ae\u6a5f"},{"broadcaster":"s13382560","title":"OW \u6253\u4e00\u4e0b @LaiFDtw","cover":"https:\/\/static-cdn.jtvnw.net\/previews-ttv\/live_user_laifdtw-1280x720.jpg","machine":"\u5176\u4ed6"},{"broadcaster":"tim7862","title":"\ud83e\udd0f\u958b\u52303\u9ede","cover":"https:\/\/static-cdn.jtvnw.net\/previews-ttv\/live_user_pujuwaha-1280x720.jpg","machine":"PC \u55ae\u6a5f"},{"broadcaster":"apple2507265","title":"\u3010\u539f\u795e\u3011\u555f\u52d5","cover":"https:\/\/static-cdn.jtvnw.net\/previews-ttv\/live_user_jydatoms-1280x720.jpg","machine":"PC \u7dda\u4e0a"},{"broadcaster":"ee671998","title":"\u3010\u9edf\u9edf\u3011\u4e3b\u89d2\u90fd\u5728\u6bd4\u6158\u7684 20231016\u671f","cover":"https:\/\/static-cdn.jtvnw.net\/previews-ttv\/live_user_ee671998-1280x720.jpg","machine":"PS5"},{"broadcaster":"spring51544","title":"\u3010Diablo II: Resurrected\u3011\u7b2c5\u8cfd\u5b63 (\u663c) 10\/16","cover":"https:\/\/i.ytimg.com\/vi\/iY5nIqswfR0\/maxresdefault_live.jpg","machine":"\u5176\u4ed6"},{"broadcaster":"a900114","title":"\u6210\u70ba\u5be6\u6cc1\u4e3b \u85aa\u8cc7\u6642\u9593\u4f60\u505a\u4e3b \u6c92\u4eba\u770b\u4f60\u5c31\u5403\u571f-3","cover":"https:\/\/static-cdn.jtvnw.net\/previews-ttv\/live_user_wuhantw-1280x720.jpg","machine":"PC \u7dda\u4e0a"},{"broadcaster":"amos8622","title":"\u3010\u5c0f\u5b87\u5be6\u6cc1\u3011\u5148\u5de5\u4f5c 10\/16\u3010\u5de5\u4f5c\u53f0\u3011!\u5468\u908a !akito","cover":"https:\/\/static-cdn.jtvnw.net\/previews-ttv\/live_user_amosyui-1280x720.jpg","machine":"\u5176\u4ed6"},{"broadcaster":"TomAlber","title":"\u746a\u5361\u5df4\u5361 (\u25cf-\u25cf)","cover":"https:\/\/static-cdn.jtvnw.net\/previews-ttv\/live_user_ladelfin4-1280x720.jpg","machine":"\u5176\u4ed6"},{"broadcaster":"lovekiss1250","title":"\u807d\u8aaa\u5f88\u96e3","cover":"https:\/\/static-cdn.jtvnw.net\/previews-ttv\/live_user_eijioxo-1280x720.jpg","machine":"PC \u7dda\u4e0a"},{"broadcaster":"edisonina98","title":"&lt;4D&gt;10\/16 \u8001\u4e8c\u4eba","cover":"https:\/\/static-cdn.jtvnw.net\/previews-ttv\/live_user_4dttv-1280x720.jpg","machine":"PC \u7dda\u4e0a"},{"broadcaster":"s0936751739","title":"\uff3b\u5c0f\u524e\uff3dPC \u96fb\u99ad\u53db\u5ba22077DLC \u81ea\u7531\u5e7b\u5c40 10\/16 \u7761\u6b7b\u7684\u4eba\u53eb\u4e0d\u9192","cover":"https:\/\/static-cdn.jtvnw.net\/previews-ttv\/live_user_mizuki_7777-1280x720.jpg","machine":"PS5"},{"broadcaster":"hsj4526","title":"\ud83c\udf81\u6bcf\u6708\u9001PS5 !\u62bd\u734e\ud83c\udf81\u770b\u53f0\u514d\u8cbb\u62ffMyCard\/Steam\u9ede\u6578!MY\uff5c!\u9913 \u3010\ud83c\udf4a\u8766\u611b\u6a58\u5b50\u3011","cover":"https:\/\/static-cdn.jtvnw.net\/previews-ttv\/live_user_shuteye_orange-1280x720.jpg","machine":"PS5"},{"broadcaster":"AAa890722","title":"\u3010\u5927\u4fe1\u3011\u8b49\u660e\u4e00\u4e0b\u6211\u9084\u6d3b\u8457  \u6230\u5730\u8336\u7897\u84b8 10\/16 @daxin722","cover":"https:\/\/static-cdn.jtvnw.net\/previews-ttv\/live_user_daxin722-1280x720.jpg","machine":"PC \u55ae\u6a5f"},{"broadcaster":"chinyh5751","title":"\u76f4\u64adday447 | \u6e96\u5099\u597d\u840a\u6b50\u65af\u5229\u4e0a\u7dda \u559c\u6b61\u5403\u64cd\u4f5c\u7684\u670b\u53cb\u5011\u8981\u6ce8\u610f\u4e86 | \u4eca\u665a\u805a\u9910 \u63d0\u65e9\u76f4\u64ad \u80fd\u64ad\u591a\u5c11\u662f\u591a\u5c11","cover":"https:\/\/i.ytimg.com\/vi\/2EFaBZU2tjs\/hqdefault_live.jpg","machine":"PC \u55ae\u6a5f"},{"broadcaster":"toptin","title":"\u5854\u623f\u4e2d\uff5c\u524d\u7dda The Front\uff5c\u5ba2\u88fd\u5316\u96fb\u8166 @lafa !\u96fb\u8166","cover":"https:\/\/static-cdn.jtvnw.net\/previews-ttv\/live_user_lafa-1280x720.jpg","machine":"PC \u55ae\u6a5f"},{"broadcaster":"n9417747","title":"10\/15 \u6c34\u4e00\u4e0b\u6642\u9593\u5566 !\u62bd\u734e !\u52fe\u52fe\u6d3b\u52d5 @renewed0703  [\u79cb\u6708\u6708] Day279","cover":"https:\/\/static-cdn.jtvnw.net\/previews-ttv\/live_user_renewed0703-1280x720.jpg","machine":"\u5176\u4ed6"},{"broadcaster":"liuliuwei","title":"DC\u5fb5\u6c42\u4e8c\u5275\u26a1\u8a02\u95b1\ud83c\udf80\u9818\u684c\u5e03 !dc - \u0317\u0300\u2661 \u0316\u0301-\ufe0e\ufe0e @isyourlulu \u0d12 (\u25cd\u2022\u1d17\u2022\u25cd)\u2764","cover":"https:\/\/static-cdn.jtvnw.net\/previews-ttv\/live_user_isyourlulu-1280x720.jpg","machine":"PC \u55ae\u6a5f"}];
let html1 = '', len = 0, pit = 6;

//general random
for (let i = 0; i < live2.length - 1; i++) {
let j = i+ Math.floor(Math.random() * (live2.length-i));
let temp = live2[j];
live2[j] = live2[i];
live2[i] = temp;
}

len = live2.length;

if (live1) {
html1 += '<div class="live_film liveAction">';
html1 += '  <span>'+live1.title1+'</span>';
html1 += '  <a href="'+live1.ad_link+'" target="_blank" class="a-mercy-d" data-si="'+live1.datasi+'" data-ssn="'+live1.s_sn+'"><img src="'+live1.cover+'"></a>';
html1 += '  <a href="'+live1.ad_link+'" target="_blank" class="a-mercy-d" data-si="'+live1.datasi+'" data-ssn="'+live1.s_sn+'">'+live1.title2+'</a>';
html1 += '</div>';

len = len + 1;
pit = pit - 1;
}

let livepage = 1;
live = {
LiveShowBlock: function(pagesign) {
let livedata = [], html = '';

if (len < 7) {
livedata = live2;
if (pit > livedata.length) {
pit = livedata.length;
}
} else {
let totalpage = Math.ceil(live2.length / pit);

pagesign = pagesign || 0;
livepage += pagesign;
livepage = (livepage > totalpage) ? 1 : (livepage < 1 ? totalpage : livepage);

//分頁切換button
$('#liveContainer').find('div.bh-section-more.is-right').addClass('is-show');
if (livepage > 1) {
$('#liveContainer').find('div.bh-section-more.is-left').addClass('is-show');
}

//分頁導覽
$('#liveContainer').find('div[data-pagenav="live"]').empty();
for (let p=1; p <= totalpage; p++) {
$('#liveContainer').find('div[data-pagenav="live"]').append('<div class="dot' + (livepage == p ? ' is-now' : '') + '"></div>');
}
$('#liveContainer').find('div[data-pagenav="live"]').show();

if (pagesign) {
let tmppit = pagesign > 0 ? pit : -pit;
live2 = [].concat(live2.slice(tmppit), live2.slice(0, tmppit));
}

let tmpLive = [].concat(live2);
while (livedata.length < pit) {
let tmp = tmpLive.shift();
livedata.push(tmp);
}
}
html += html1;

for (let start = 0; start < pit; start++) {
let ga4Attrs = ` data-gtm-service="home" data-gtm-page="首頁" data-gtm-area="實況大廳" data-gtm-click="點擊實況" data-gtm-var1="${livedata[start].broadcaster}"`;

html += '  <div class="liveAction">';
html += '    <a href="//home.gamer.com.tw/live.php?u='+livedata[start].broadcaster+'" class="img_content"><img' + ga4Attrs + ' src="'+livedata[start].cover+'"><div style="pointer-events:none;" class="label-type">'+livedata[start].machine+'</div></a>';
html += '    <a' + ga4Attrs + ' href="//home.gamer.com.tw/live.php?u='+livedata[start].broadcaster+'">'+livedata[start].title+'</a>';
html += '  </div>';

if (!livedata[start]) {
break;
}
}

$('#liveContainer').find('div[data-content="live"]').html(html);
}
};

window.HOME_LIVE = live;
})(window, jQuery);