!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.leFtv=e():t.leFtv=e()}(window,(function(){return function(t){var e={};function o(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=4)}([,function(t,e,o){},function(t,e,o){},function(t,e,o){},function(t,e,o){"use strict";o.r(e);o(1),o(2),o(3);const i=flash_fe_core_tool.$util.$coreMethods.getRequestPrefix();var n={getsheerID:t=>flash_fe_core_tool.$http.post(i+"/profile/v1/createSheerId?verificationId="+t,{},{},!0)};class l{constructor(t,e){this.getverify()}getverify(){const t=flash_fe_core_tool.$util.$coreMethods.getUrlParam("verificationId");null!=t&&""!=t&&n.getsheerID(t).then(t=>{if(t&&t.data)try{window._ftv_adobe_tool&&_ftv_adobe_tool.sheerIdStatus(t.data.verificationStatus),window.lmd.sheeridverified=t.data.sheerIdVerified?"YES":"NO"}catch(t){console.log("adobe track error",t)}console.log(t.data.data)})}}const a={id:"",videoId:"",autoplay:!0,popup:!1,bgImg:null,bgWrapper:".youtube-video",el:null,width:"100%",height:"100%",controls:0,loop:1,customBtnSelector:"",onPopUp:null,onClose:null,onPause:null,onPlay:null,onPlayerReady:null,onPlayerStateChange:null};var s=class{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.options=null,this.config=null,this.player=null,this.popUpEl=null,this.initOption(t,e),this.initConfig(),this.onceLoadYouTuBeAPI()}initOption(t,e){this.options=Object.assign({},a,e,t.data(),{id:t.attr("id"),el:t})}initConfig(){const{height:t,width:e,videoId:o,autoplay:i,controls:n,loop:l}=this.options;this.config={height:t,width:e,videoId:o,playerVars:{autoplay:i?1:0,controls:n,enablejsapi:1,origin:window.location.origin,playlist:o,loop:l},events:{onReady:this.onPlayerReady.bind(this),onStateChange:this.onPlayerStateChange.bind(this)}}}onYouTubeIframeAPIReady(){console.log(this.options),this.options.id&&"string"==typeof this.options.id?this.options.videoId?window.YT.ready(()=>{if(this.options.popup){const{bgImg:t,bgWrapper:e,el:o}=this.options;let i,n='<div class="popup-mask" style="display: none">\n                                <div class="popup-wrapper">\n                                    <div id="'.concat(this.options.id,'_win"></div>\n                                </div>\n                            </div>'),l=this.options.customBtnSelector,a="";t&&$(e).css("background",'center / cover no-repeat url("'.concat(t,'")')),l?(i=$(l),o.append("".concat(n))):(a='<button aria-label="Click to watch video" class="play-video">\n                                    <i class="triangle"></i>\n                                </button>',o.find("button.play-video").length>0||o.append("".concat(a).concat(n)),i=o.find("button.play-video")),i.off("click").on("click",t=>{this.popUp(t)})}else{this.player=new YT.Player(this.options.id,this.config);let t=this;$(window).on("resize",this.throttle((function(e){t.vidRescale()}),300))}}):console.error("Youtube Id Not Found!"):console.error("Please define id<String> for your youtube container!")}throttle(t,e){let o=null;return function(){var i=this,n=arguments;null==o&&(o=setTimeout((function(){t.apply(i,n),o=null}),e))}}onceLoadYouTuBeAPI(){if(window.YT)this.onYouTubeIframeAPIReady();else{let t=this,e=document.createElement("script");e.src="https://www.youtube.com/iframe_api",e.onload=function(){t.onYouTubeIframeAPIReady()};let o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(e,o)}}createPopUpPlayer(){this.popUpEl||null==this.player&&(this.player=new YT.Player(this.options.id+"_win",this.config),this.popUpEl=this.options.el.find(".popup-mask"),this.popUpEl.find(".popup-wrapper").prepend('<button class="close-win-button"></button>'),this.popUpEl.find(".close-win-button").on("click",t=>{this.close(t)}))}onPlayerReady(t){const{autoplay:e,popup:o,onPlayerReady:i}=this.options;e&&!o&&t.target.mute(),o&&this.popUpEl.show(),i&&i.bind(this,t)(),this.vidRescale()}onPlayerStateChange(t){this.options.onPlayerStateChange&&this.options.onPlayerStateChange.bind(this,t)()}play(t){this.player.playVideo(),this.options.onPlay&&this.options.onPlay.bind(this,t)()}pause(t){this.player.pauseVideo(),this.options.onPause&&this.options.onPause.bind(this,t)()}popUp(t){this.popUpEl?(this.play(t),this.popUpEl.show()):this.createPopUpPlayer(),this.options.onPopUp&&this.options.onPopUp.bind(this,t)()}stopVideo(){this.player.stopVideo()}close(t){this.pause(t),this.popUpEl.hide(),this.options.onClose&&this.options.onClose.bind(this,t)()}vidRescale(){let t=this.options.videoWidthAdd,e=this.options.videoHeightAdd,o=this.options.id;if(this.player&&null!=t&&null!=e){let l=$("#"+o).parents(".m-youtube");var i=l.parent().width()+t,n=l.parent().height()+e;i/n>16/9?(this.player.setSize(i,i/16*9),l.find(".tv .screen").css({left:"0px"})):(this.player.setSize(n/9*16,n),l.find(".tv .screen").css({left:-(l.find(".tv .screen").outerWidth()-i)/2}))}}};e.default=function(t){console.log("engine initialization"),new class{constructor(t){this.rootEl=t,this.ftv=new l(t.find("#ftv_list"),{autoPlay:!0,speed:2e3}),this.viewModel=new class{constructor(t,e){this.loadAdobeFile(),this.registEvent(),$((function(){flash_fe_core_tool.$lazyEvent.redirect(".o-bannerFlip__content")})),this.imageLoadListener(),this.bgVideo=null,this.bgMobileVideo=null,this.videotimer=null}loadAdobeFile(){try{flash_fe_core_tool.$AsyncLoadFileManagement.load("".concat(flash_fe_core_tool.$adobe.getAdobeVersionPath(ftvAdobePath))).then(t=>{$(".o-bannerFlip__content [__adobeTag]").each((function(){$(this).attr("data-name",$(this).text().replace(/(^\s*)|(\s*$)/g,""))})),"undefined"!=typeof _ftv_adobe_tool&&_ftv_adobe_tool.init()}).catch(t=>{console.log("load adobe js err",t)})}catch(t){console.log("adobe load error in component ftv",t)}}registEvent(){$(".o-bannerFlip__intro [__adobeTag]").on("click",(function(t){let e=$(this).data("name"),o=$(this).attr("href");try{_ftv_adobe_tool.Banner(e,o)}catch(t){console.log("adobe load error in method Banner in component ftv",t)}}));let t={};$("a[data-youtubeid]").on("click",(function(){let e=$(this).data("youtubeid"),o="player_"+e;if(e){if(0==$("#"+o).length){let t='<div\n                    class="youtube-video"\n                    id="'.concat(o,'"\n                    data-video-id="').concat(e,'"\n                    data-autoplay="true"\n                    data-popup="true"\n                    data-loop="1"\n                    data-controls="1"\n                    style="height:0px;overflow: hidden;"\n                    ></div>');$("body").append(t)}let n=null;null==t[this]?(n=new s($("#"+o)),t[this]=n):n=t[this];let l=3e4,a=0,r=500;var i=window.setInterval((function(){a+=r,$("#"+o).find("button.play-video").length>0?(clearInterval(i),$("#"+o).find("button.play-video").click()):a>l&&clearInterval(i)}),r)}}));let e=this;if($(window).resize((function(){e.videotimer?(clearTimeout(e.videotimer),e.videotimer=setTimeout((function(){e.loadVideo()}),2e3)):e.videotimer=setTimeout((function(){e.loadVideo()}),2e3)})),e.videotimer=setTimeout((function(){e.loadVideo()}),500),"undefined"==typeof $$isdecorate){let t=null;$(".o-bannerFlip__intro").on("click",(function(e){let o=e.target,i=["a","button"];if(null!=o)for(let t=0;t<i.length;t++)if($(o).parents(i[t]).length>0||$(i[t]).index(o)>0)return;null==t&&(t=setTimeout((function(){t=null}),50),$(".o-bannerFlip__intro .-ftvCTA").eq(0).click())}))}}loadVideo(){let t=this;$(window).width()>=750?($("#ytplayer2").length>0&&(t.bgMobileVideo&&t.bgMobileVideo.player&&t.bgMobileVideo.stopVideo(),$("#ytplayer2").hide()),$("#ytplayer").length>0&&(t.bgVideo&&t.bgVideo.player?(console.log("pc start"),t.bgVideo.play()):t.bgVideo=new s($("#ytplayer")),$("#ytplayer").show())):($("#ytplayer2").length>0&&(t.bgMobileVideo?t.bgMobileVideo.player&&t.bgMobileVideo.play():t.bgMobileVideo=new s($("#ytplayer2")),$("#ytplayer2").show()),$("#ytplayer").length>0&&(t.bgVideo&&t.bgVideo.player&&t.bgVideo.stopVideo(),$("#ytplayer").hide()))}imageLoadListener(){$(".o-bannerFlip__content img").each((function(){null==$(this).attr("alt")||$(this).attr("alt")}))}}(t,this.ftv)}init(){}}(t).init()}}]).default}));
