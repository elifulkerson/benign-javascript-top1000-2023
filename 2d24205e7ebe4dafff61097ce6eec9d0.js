(()=>{const t=(()=>{const t=t=>{window.mantis=t;let s=e(t),i=n(t),o=a(t);window.utag_data.mantis={mantis:s.join(","),iabContext:i.join(","),mantisContext:o.join(",")}},e=t=>{let e=[];for(let n in t.ratings){let a=t.ratings[n];e.push(a.customer+"-"+a.rating)}e.push("sentiment-"+t.sentiment);for(let n in t.emotion){let a=t.emotion[n];e.push(n+"-"+a.level)}return ExpressApp.Log("[Mantis] getMantis",e),e},n=t=>{let e=[];for(let n in t.categories.iab){let a=t.categories.iab[n];e.push(a.id)}return ExpressApp.Log("[Mantis] getIabContext",e),e},a=t=>{let e=[];for(let n in t.categories.mantis){let a=t.categories.mantis[n];e.push(a.label)}return ExpressApp.Log("[Mantis] getMantisContext",e),e},s=(t,e)=>{let n=document.createEvent("HTMLEvents");n.initEvent(e,!1,!0),t.dispatchEvent(n)};return{getData:(e,n)=>{fetch(n+"article/classification?filter=ratings,emotion,sentiment,categories&cacheType=public&timeout=800&canRecalculate=true&cmsID="+window.mantisCmsId).then((function(t){return t.json()})).then((function(e){e.ratings&&t(e),ExpressApp.Mantis.dataLoaded=!0,s(document.body,"mantisDataLoaded")})).catch((()=>{ExpressApp.Mantis.dataLoaded=!0}))},setData:e=>{let n=JSON.parse(e);n.ratings&&t(n),ExpressApp.Mantis.dataLoaded=!0,s(document.body,"mantisDataLoaded")},triggerEvent:s,getMantisContext:a,getIabContext:n,getMantis:e,dataLoaded:!1}})();ExpressApp=Object.assign(Object.assign({},ExpressApp),{Mantis:t})})();