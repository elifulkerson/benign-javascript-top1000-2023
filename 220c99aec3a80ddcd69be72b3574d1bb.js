"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4101],{45435:function(e,t){var n,r;(r=n||(n={})).advertisement="advertisement",r.html="html",r.realEstate="realEstate",r.recirc="recirc",r.subscribe="subscribe",t.Z=n},67984:function(e,t,n){n.d(t,{RW:function(){return i},ZP:function(){return f},vH:function(){return r}});var r,i,a,s,o,u,c=n(26042),l=n(69396),p=n(29815),d=n(67294);(s=r||(r={})).idle="idle",s.pending="pending",s.error="error",(o=i||(i={})).new="new",o.existing="existing",(u=a||(a={})).enterMessage="enterMessage",u.removeImage="removeImage",u.reset="reset",u.selectImages="selectImages",u.submit="submit",u.submitFailed="submitFailed",u.submitSuccess="submitSuccess";var g={id:null,images:[],message:"",status:r.idle},m=function(e,t){switch(t.type){case a.enterMessage:return(0,l.Z)((0,c.Z)({},e),{message:t.payload});case a.removeImage:return(0,l.Z)((0,c.Z)({},e),{images:e.images.filter(function(e){return e.src!==t.payload})});case a.reset:return(0,c.Z)({},g,t.payload);case a.selectImages:return(0,l.Z)((0,c.Z)({},e),{images:(0,p.Z)(e.images).concat((0,p.Z)(t.payload.map(function(e){var t=e.blob;return{filename:e.filename,src:t,type:i.new}})))});case a.submit:return(0,l.Z)((0,c.Z)({},e),{status:r.pending});case a.submitSuccess:return g;case a.submitFailed:return(0,l.Z)((0,c.Z)({},e),{status:r.error});default:throw Error("Invalid action sent in reply form reducer: ".concat(t.type))}};function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,d.useReducer)(m,(0,c.Z)({},g,e)),n=t[0],r=t[1];return[n,{addImages:function(e){r({type:a.selectImages,payload:e})},enterMessage:function(e){r({type:a.enterMessage,payload:e})},removeImage:function(e){r({type:a.removeImage,payload:e})},resetForm:function(){r({type:a.reset})},submitForm:function(){r({type:a.submit})},submitFormFailed:function(){r({type:a.submitFailed})},submitFormSucceeded:function(){r({type:a.submitSuccess})}}]}},68470:function(e,t,n){n.d(t,{QZ:function(){return j},TK:function(){return C},ay:function(){return b},i$:function(){return I},lk:function(){return S},r7:function(){return v}});var r=n(32521),i=n(44068),a=n(11410),s=n(35077),o=n(38475),u=n(45435),c=n(70556),l=n(45673),p=n(57470),d=n(33525),g=n(94904),m=n(34854),f=n(65933),y=n(98669);r.dt({path:r.Z_,title:r.Z_},"ChartbeatItemCodec");var h=r.dt({id:r.pk,name:r.Z_,alias:r.Z_}),Z=r.sH("TagCodec",function(){return r.dt({id:r.pk,name:r.Z_,description:r.Z_,alias:r.Z_,slug:r.Z_,relatedTags:r.IX(Z)})}),_=r.jV([r.dt({author:d.L,category:(0,m.Z)(s.F),id:p.U,itemAlias:r.Z_,patch:i.z,summary:r.Z_,title:r.Z_,type:r.i0(c.ZP.article),updated:r.Z_}),r.r$({imageThumbnail:r.Z_,additionalBylines:r.IX(d.L),titleEmail:r.Z_,titleSocial:r.Z_}),],"InContentArticleCodec"),b=(0,g.e$)(_),z=r.dt({isSpecialPin:r.O7,isTopStories:r.O7,isMostRecent:r.O7,isBreakingNews:r.O7,isExternal:r.O7,isDailyDigest:r.O7,isRobot:r.O7,isPressRelease:r.O7,isSponsoredContent:r.O7,isStaffContent:r.O7,isNewsPartnerContent:r.O7,isNeighborContent:r.O7},"ArticleFlags"),v=r.jV([p.N,r.dt({category:(0,m.Z)(s.F),type:r.i0(c.ZP.article)}),r.r$({pinnedStatus:r.Z_,additionalBylines:r.IX(d.L),titleEmail:r.Z_,titleSocial:r.Z_,topic:h,statusFlags:z}),],"ArticleCodec"),w=r.G0([r.dt({key:r.Z_,type:r.i0(u.Z.advertisement),content:(0,m.Z)(o.Q$)}),r.dt({key:r.Z_,type:r.i0(u.Z.html),content:r.Z_}),r.dt({key:r.Z_,type:r.i0(u.Z.realEstate),content:r.Z_}),r.dt({key:r.Z_,type:r.i0(u.Z.recirc)}),r.dt({key:r.Z_,type:r.i0(u.Z.subscribe),device:(0,m.Z)(l.Z)}),],"ContentBlockCodec");r.jV([p.N,r.dt({ampAlias:r.Z_,body:r.Z_,contentBlocks:r.IX(w),contentKeywords:r.IX(r.Z_),contentSource:r.Z_,enableAds:r.O7,indexArticle:r.O7,patch:a.d,relCanonicalUrl:r.Z_,shouldRenderAmpLink:r.O7,tags:r.IX(Z),topic:h,type:r.i0(c.ZP.article),category:(0,m.Z)(s.F)}),r.r$({evergreen:r.O7,isShared:r.O7,redirectUrl:r.Z_,video:r.Z_,additionalBylines:r.IX(d.L),titleEmail:r.Z_,titleSocial:r.Z_,originalContent:r.O7,statusFlags:z}),],"ArticleDetailCodec");var C=(0,g.e$)(v),I=function(e){return e.filter(C)},j=function(e){return e.filter(function(e){switch(e.type){case c.ZP.article:return C(e);case"rss":return(0,f.d$)(e);case"social":return(0,f.ij)(e);case"promotedBusinesses":return{type:e.type,items:(0,y.A3)(e.items)};default:return!1}})},S=function(e){var t=e.doesMoreContextExist,n=e.content,r=e.tag;return{doesMoreContextExist:t,content:I(n),tag:r}}},65933:function(e,t,n){n.d(t,{FI:function(){return p},d$:function(){return o},ij:function(){return c},jk:function(){return l}});var r=n(32521),i=n(28111),a=n(94904),s=r.jV([r.dt({analytics:r.dt({category:r.Z_,label:r.Z_}),author:r.dt({name:r.Z_}),created:r.Z_,id:r.G0([r.pk,r.Z_]),itemAlias:r.Z_,patch:i.j,summary:r.Z_,title:r.Z_,type:r.i0("rss")}),r.r$({imageThumbnail:r.Z_}),],"RSSCodec"),o=(0,a.e$)(s),u=r.jV([r.dt({author:r.dt({alias:r.Z_,name:r.Z_,profilePicture:r.Z_}),body:r.Z_,created:r.Z_,id:r.G0([r.pk,r.Z_]),patch:i.j,platform:r.Z_,type:r.i0("social")}),r.r$({imageThumbnail:r.Z_}),],"SocialPostCodec"),c=(0,a.e$)(u),l=function(e){return e.filter(function(e){return c(e)})},p=function(e){return e.filter(function(e){switch(e.type){case"rss":return o(e);case"social":return c(e);default:return!1}})}},64101:function(e,t,n){n.d(t,{CN:function(){return D},Lt:function(){return x},ec:function(){return R},A9:function(){return C},h9:function(){return I},qX:function(){return q},bV:function(){return M},FM:function(){return V}});var r,i,a,s=n(47568),o=n(70655),u=n(56647),c=n(96657),l=n(70556),p=n(32219),d=n(26042),g=n(67984),m=function(e){return JSON.stringify(e.map(function(e){var t=e.id,n=e.filename,r=e.src,i=e.type===g.RW.existing?{field_image_nid:t,field_image_url:r}:{filename:n,field_image_headline:n,blob:r};return(0,d.Z)({field_image_headline:"",field_image_caption:"",field_image_copyright:"",field_image_country:"",field_image_location:"",field_image_credit:"",field_image_keywords:"",field_image_persons:"",field_image_weight:0},i)}))},f=n(69711),y=n(2871),h=n(1604),Z=h.z.object({id:h.z.number(),alias:h.z.string(),name:h.z.string(),region:h.z.object({abbreviation:h.z.string()})}),_=h.z.object({thankCount:h.z.number(),spamCount:h.z.number(),offensiveCount:h.z.number(),notLocalCount:h.z.number(),disagreeCount:h.z.number(),promotionalCount:h.z.number(),unverifiedCount:h.z.number()}),b=h.z.object({type:h.z.literal("post"),id:h.z.union([h.z.number(),h.z.string()]),patch:Z.optional(),flags:_.optional(),summary:h.z.string(),body:h.z.string(),displayDate:h.z.string(),shortTitle:h.z.string(),created:h.z.string(),replyCount:h.z.number(),canReply:h.z.boolean(),totalReplies:h.z.number(),images:h.z.array(h.z.object({id:h.z.number(),url:h.z.string()})),itemAlias:h.z.string(),author:h.z.object({id:h.z.number(),rid:h.z.number(),name:h.z.string(),profilePicture:h.z.string().optional(),patch:Z}),category:h.z.object({id:h.z.number(),name:h.z.string(),label:h.z.string()}),imageThumbnail:h.z.string().optional()}),z=h.z.object({flags:_.optional(),type:h.z.literal("classified"),id:h.z.union([h.z.number(),h.z.string()]),patch:Z.optional(),title:h.z.string(),displayDate:h.z.string(),summary:h.z.string(),body:h.z.string(),promoted:h.z.number(),replyCount:h.z.number(),totalReplies:h.z.number(),repliesEnabled:h.z.boolean().optional(),itemAlias:h.z.string(),author:h.z.object({id:h.z.number(),rid:h.z.number(),name:h.z.string(),patch:Z,profilePicture:h.z.string().optional()}),created:h.z.string(),category:h.z.string(),imageThumbnail:h.z.string().optional()}),v=h.z.object({type:h.z.literal("article"),id:h.z.union([h.z.number(),h.z.string()]),patch:Z.optional(),flags:h.z.object({thankCount:h.z.number()}).optional(),created:h.z.string(),replyCount:h.z.number(),totalReplies:h.z.number(),imageThumbnail:h.z.string().optional(),summary:h.z.string(),title:h.z.string(),category:h.z.union([h.z.literal("breaking"),h.z.literal("news"),h.z.literal("sponsored"),h.z.literal("trending"),h.z.literal("ugc"),]),updated:h.z.string(),itemAlias:h.z.string(),topic:h.z.object({name:h.z.string()}),author:h.z.object({profilePicture:h.z.string().optional(),name:h.z.string()}),images:h.z.array(h.z.object({url:h.z.string()})).optional()}),w=n(30904),C=(r=(0,s.Z)(function(e){var t,n,r,i,a,s;return(0,o.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,c.Z.frontEndApi.get("/post/".concat(e,".json"))];case 1:if((t=n.sent().data).type===l.ZP.reply)return[2,(0,y.zh)(t)];return[2,(0,p.lQ)(t)];case 2:if(((i=n.sent()).response||{}).status===u.W.GONE)return[2,null];throw i;case 3:return[2]}})}),function(e){return r.apply(this,arguments)}),I=(i=(0,s.Z)(function(e){var t;return(0,o.__generator)(this,function(n){switch(n.label){case 0:return[4,c.Z.frontEndApi.get("/posts/".concat(e,".json"))];case 1:return t=n.sent().data,[2,(0,p.qr)(t)]}})}),function(e){return i.apply(this,arguments)});(0,s.Z)(function(e){var t,n,r,i,a=arguments;return(0,o.__generator)(this,function(s){switch(s.label){case 0:t=a.length>1&&void 0!==a[1]?a[1]:1,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,c.Z.frontEndApi.get("/neighbor-posts/".concat(e,".json"),{params:{page:t}})];case 2:return n=s.sent().data,[2,(0,p.PY)(n)];case 3:if((null==(i=(r=s.sent()).response)?void 0:i.status)===u.W.GONE)return[2,[]];throw r;case 4:return[2]}})});var j,S,k,A,P,O,F,E,$=h.z.discriminatedUnion("type",[b,z,v,]),T=(j=(0,s.Z)(function(e){var t,n,r=arguments;return(0,o.__generator)(this,function(n){switch(n.label){case 0:return t=r.length>1&&void 0!==r[1]?r[1]:1,[4,c.Z.frontEndApi.get("articles/bulletinboard/".concat(e),{params:{page:t,cacheBuster:"".concat(new Date().getTime())}})];case 1:return[2,n.sent()]}})}),function(e){return j.apply(this,arguments)}),N=(S=(0,s.Z)(function(e){var t,n,r,i,a=arguments;return(0,o.__generator)(this,function(i){switch(i.label){case 0:return t=a.length>1&&void 0!==a[1]?a[1]:1,n=a.length>2&&void 0!==a[2]?a[2]:60,r=a.length>3?a[3]:void 0,[4,c.Z.patchContentApi.get("neighbor-posts-page/feeds/".concat(e),{params:{page:t,limit:n,category:r}})];case 1:return[2,i.sent()]}})}),function(e){return S.apply(this,arguments)}),R=(k=(0,s.Z)(function(e){var t,n,r,i,a,s,c,l,p=arguments;return(0,o.__generator)(this,function(s){switch(s.label){case 0:t=p.length>1&&void 0!==p[1]?p[1]:1,n=p.length>2&&void 0!==p[2]?p[2]:60,r=p.length>3?p[3]:void 0,s.label=1;case 1:if(s.trys.push([1,6,,7]),i=r===(0,w.Z)(null)?"":r,"articles"!==r)return[3,3];return[4,T(e,t)];case 2:return a=s.sent(),[3,5];case 3:return[4,N(e,t,n,i)];case 4:a=s.sent(),s.label=5;case 5:return[2,a.data.map(function(e){var t=$.safeParse(e);return t.success?t.data:null}).filter(function(e){return e=!!e})];case 6:if((null==(l=(c=s.sent()).response)?void 0:l.status)===u.W.GONE)return[2,[]];throw c;case 7:return[2]}})}),function(e){return k.apply(this,arguments)}),D=(A=(0,s.Z)(function(e){var t,n,r,i,a,s;return(0,o.__generator)(this,function(o){switch(o.label){case 0:return t=e.message,n=e.patchId,r=e.images,i=e.categoryId,(a=new FormData).append("ep_message",t),a.append("patch_id",n.toString()),r.length&&a.append("images",m(r)),i&&i>0&&a.append("ep_category",i.toString()),[4,c.Z.myPatchFeApi.post("/epost",a)];case 1:return[2,{post:(s=o.sent().data).post,blockedImagesCount:s.blockedImageCount}]}})}),function(e){return A.apply(this,arguments)}),q=(P=(0,s.Z)(function(e){var t,n,r,i,a,s,u;return(0,o.__generator)(this,function(o){switch(o.label){case 0:return t=e.id,n=e.message,r=e.patchId,i=e.images,a=e.categoryId,(s=new FormData).append("nid",t.toString()),s.append("ep_message",n),s.append("patch_id",r.toString()),i.length&&s.append("images",m(i)),a&&a>0&&s.append("ep_category",a.toString()),[4,c.Z.myPatchFeApi.post("/epost",s)];case 1:return[2,{post:(u=o.sent().data).post,blockedImagesCount:u.blockedImageCount}]}})}),function(e){return P.apply(this,arguments)}),x=(O=(0,s.Z)(function(e){var t,n,r,i,a,s,u,l;return(0,o.__generator)(this,function(o){switch(o.label){case 0:return t=e.id,n=e.message,r=e.patchId,i=e.images,a=e.categoryId,(u=new FormData).append("nid",t.toString()),u.append("ep_message",n),u.append("patch_id",r.toString()),u.append("unpublish","false"),i.length&&u.append("images",m(i)),a&&a>0&&u.append("ep_category",a.toString()),[4,c.Z.myPatchFeApi.post("/epost",u)];case 1:return[2,{jwt:null==(l=o.sent().data)?void 0:null===(s=l.data)||void 0===s?void 0:s.patch_jwt}]}})}),function(e){return O.apply(this,arguments)}),M=(F=(0,s.Z)(function(e,t){var n;return(0,o.__generator)(this,function(n){switch(n.label){case 0:return[4,c.Z.myPatchApi.put("/quickpost/set-category",{nid:e.toString(),category:t})];case 1:if("Success"===n.sent().data.post_category_return)return[2,!0];throw Error("Failed to update post category")}})}),function(e,t){return F.apply(this,arguments)}),V=(E=(0,s.Z)(function(e,t){var n,r,i;return(0,o.__generator)(this,function(n){switch(n.label){case 0:return r=[-1,1].includes(t)?{item_type:l.VQ.post,nid:e.toString(),reaction:f.ZP.visibilityOverride,visibility:t}:{item_type:l.VQ.post,nid:e.toString(),reaction:f.ZP.visibilityOverride},[4,c.Z.myPatchFeApi.get("/react",{params:r})];case 1:return[2,null==(i=n.sent().data)?void 0:i.data.patch_jwt]}})}),function(e,t){return E.apply(this,arguments)})},30904:function(e,t){var n=function(e){if(!e||Array.isArray(e))return"All Updates";switch(e){case"All Updates":default:return"All Updates";case"for-sale":return"for-sale";case"jobs":return"jobs";case"announcements":return"announcements";case"question":return"question";case"gigs-services":return"gigs-services";case"news":return"news";case"housing":return"housing";case"opinion":return"opinion";case"free-stuff":return"free-stuff";case"recommendation":return"recommendation";case"lost-found":return"lost-found";case"other":return"other";case"articles":return"articles"}};t.Z=n},32219:function(e,t,n){n.d(t,{$6:function(){return Z},Hf:function(){return i},Kt:function(){return r},PY:function(){return k},e6:function(){return z},lQ:function(){return j},qr:function(){return S},uh:function(){return _}});var r,i,a,s,o=n(26042),u=n(69396),c=n(32521),l=n(70556),p=n(57470),d=n(33525),g=n(94904),m=n(34854),f=n(68470),y=n(2871),h=n(98669),Z={unpinned:-1,default:0,pinned:1},_={unpinned:"unpinned",default:"default",pinned:"pinned"};(a=r||(r={}))[a.post=0]="post",a[a.news=1]="news",a[a.question=2]="question",a[a.opinion=3]="opinion",a[a.recommendation=4]="recommendation",a[a.articles=5]="articles",(s=i||(i={})).post="post",s.news="news",s.question="question",s.opinion="opinion",s.recommendation="recommendation",s.articles="articles";var b=c.dt({id:(0,m.Z)(r),name:(0,m.Z)(i)},"PostCategoryCodec"),z=c.jV([p.N,c.dt({body:c.Z_,canReply:c.O7,category:b,displayDate:c.Z_,isIndexable:c.O7,isTrusted:c.O7,pinned:c.O7,pinStatus:c.mM(_),replies:y.L$,type:c.i0(l.ZP.post),status:c.i0(1),author:d.F}),],"PostCodec"),v=c.jV([z,c.dt({ogImageUrl:c.Z_,ogTitle:c.Z_,status:c.pk}),],"PostDetailCodec"),w=(0,g.e$)(z),C=(0,g.e$)(v),I=function(e){var t=e.replies,n=(0,u.Z)((0,o.Z)({},e),{replies:(0,y.k6)(t)});if(!w(n))throw Error("Invalid post ".concat(e.id));return n},j=function(e){var t=e.replies,n=(0,u.Z)((0,o.Z)({},e),{replies:(0,y.k6)(t)});if(!C(n))throw Error("Invalid post ".concat(e.id));return n},S=function(e){return e.reduce(function(e,t){try{var n=I(t);e.push(n)}catch(r){console.log(r)}finally{return e}},[])},k=function(e){return e.reduce(function(e,t){try{if(t.type===l.ZP.article&&(0,f.TK)(t)&&e.push(t),t.type===l.ZP.post){var n=I(t);e.push(n)}"promotedBusinesses"===t.type&&e.push({type:t.type,items:(0,h.A3)(t.items)})}catch(r){console.log(r)}finally{return e}},[])}}}]);