ExpressApp.LoginRadius={config:!1,atsLoaded:!1,authenticated:!1,atsData:"",showLoginWindow:!1,Init:function(e){ExpressApp.Log("[LR] Init"),this.showLoginWindow=!!decodeURIComponent((window.location.search.substring(1).match(new RegExp("au_route=([^&]*)"))||[])[1]||""),this.config=e;let t="https://cdn.images.express.co.uk/",i="#ff000d",n="Daily Express",a="express";window.version_us&&(t="https://cdn-images.the-express.com/",i="#08245D",n="Daily Express US",a="theexpress");let o={rootContainerId:"auth-ui",initialRoute:"/",publicationName:n,publicationID:a,origin:"auth-ui",authUiEnv:e.authUiEnv,apiKey:e.appKey,lrDomain:e.url,newsletter:!1,oneTapNewsletter:!1,newsletterPublicationId:e.newsletterPublicationId,googleOneTap:!1,googleOneTapClientID:"",googleOneTapRoutes:[""],reCaptchaKey:"6LcEdbMaAAAAAHWi9vyOYDy03KFzfWdNhsw89zD0",consentDate:e.consentDate,enableMagicLink:!1,mailingListApiBaseUrl:e.mailingListApiBaseUrl,track:(e,t,i)=>{if(ExpressApp.Log("[LR] track",t,i),i.value&&i.value.details){const e=i.value.details.position||"",t=i.value.details.provider||"",n=i.value.details.label||"";this.GaTrack(i.category,i.name,e,t,n)}},cssVariables:{"primary-color":i,"secondary-color":"lightblue","highlighted-color":"#ff000d","lowlight-color":"#000000","regwall-edging":"linear-gradient(to bottom, #f6f9f8, #f6f9f8 48%, rgba(0, 0, 0, 0) 62%) 1 5%","light-background":"#ffffff","interactive-elems":i,"regwall-logo":'url("'+t+'logo-lr-top.jpg")',logo:'url("'+t+'logo-lr-top.jpg")',"labels-font":"Arial, Helvetica, sans-serif","copy-font":"Arial, Helvetica, sans-serif"}};if("1"===e.googleOneTap&&(o.googleOneTap=!0,o.googleOneTapClientID="782519552305-35elf89fdggvpphh1pn3urmcml3ibt83.apps.googleusercontent.com",o.googleOneTapRoutes=["*"]),"1"===e.oneTapNewsletter&&(o.newsletter=!0,o.oneTapNewsletter=!0,window.TMCONFIG&&window.TMCONFIG.features&&(window.TMCONFIG.features.consentText="We use your sign-up to provide content in ways you've consented to and to improve our understanding of you. This may include adverts from us and 3rd parties based on our understanding. You can unsubscribe at any time.")),"1"===e.enableMagicLink&&(o.enableMagicLink=!0),ExpressApp.Log("[LR] AuthUI init",o),window.AuthUI.init(o),"1"===e.googleOneTap){const e=new CustomEvent("auth-ui.allowOneTap",{detail:{allow:!0},cancelable:!0});ExpressApp.Log("[LR] allowOneTapEvent"),window.dispatchEvent(e)}window.addEventListener("auth-ui.authentication",(t=>{var i,n;if(ExpressApp.Log("[LR] auth-ui.authentication",t.detail.user),t&&t.detail&&t.detail.user)this.UpdateWidget(t.detail.user),this.authenticated=t.detail.isAuthenticated,this.atsData=null===(n=null===(i=t.detail.user.Email)||void 0===i?void 0:i[0])||void 0===n?void 0:n.Value,this.UpdateAts(),"/users/login"===window.location.pathname&&(window.location.href="/");else if(this.authenticated=!1,ExpressApp.Log("[LR] showLoginWindow",this.showLoginWindow),this.showLoginWindow)document.getElementById("lr-login").dispatchEvent(new Event("click"));else if("1"===e.googleOneTap){const e=new CustomEvent("auth-ui.allowOneTap",{detail:{allow:!0},cancelable:!0}),t=window.dispatchEvent(e);ExpressApp.Log("[LR] allowOneTapEvent",t)}})),window.atsenvelopemodule?this.atsLoaded=!0:window.addEventListener("liveramp.ats.loaded",(()=>{ExpressApp.Log("[LR] liveramp.ats.loaded",!0),this.atsLoaded=!0,this.UpdateAts()})),document.getElementById("lr-login")&&document.getElementById("lr-login").addEventListener("click",(function(){document.getElementById("page")&&document.getElementById("page").classList.remove("menu-open"),window.dispatchEvent(new CustomEvent("auth-ui.authenticate",{detail:{origin:"header"}}))})),document.getElementById("lr-register")&&document.getElementById("lr-register").addEventListener("click",(function(){document.getElementById("page")&&document.getElementById("page").classList.remove("menu-open"),window.dispatchEvent(new CustomEvent("auth-ui.authenticate",{detail:{origin:"header"}}))})),document.getElementById("lr-logout")&&document.getElementById("lr-logout").addEventListener("click",(function(){window.dispatchEvent(new CustomEvent("auth-ui.logout",{detail:{origin:"header"}})),ExpressApp.LoginRadius.UpdateWidget(!1)}))},UpdateAts:function(){window.atsenvelopemodule&&this.authenticated&&this.atsLoaded&&""!==this.atsDataatsData&&(ExpressApp.Log("[LR] UpdateAts"),window.atsenvelopemodule.setAdditionalData({type:"email",id:this.atsData}))},GaTrack:function(e,t,i,n,a){if(void 0!==this.config.standalone)return!0;if(ExpressApp.Log("[LR] GaTrack"," | type: "+t," | position: "+i," | provider: "+n," | label: "+a),""!==a){let e={};e[t]={details:{label:a}},t="newsletter_subscription."+t,ExpressApp.GoogleAnalytics.TrackCustomEvent("Subscription",t,a,""),window.dataLayer.push({event:t,details:{label:a},newsletter_subscription:e})}else{ExpressApp.GoogleAnalytics.TrackCustomEvent("LoginRadius",t,n,"");let a={position:i};n&&(a.provider=n),window.dataLayer.push({event:e+"."+t,[e]:{[t]:{details:a}},details:a})}},UpdateWidget:function(e){if(ExpressApp.Log("[LR] UpdateWidget"),void 0!==this.config.standalone)return!0;const t=document.getElementById("lr-name"),i=document.getElementById("login-widget");e?(t&&(e.UserName?t.innerText=e.UserName:e.FirstName||e.LastName?t.innerText=(e.FirstName+" "+e.LastName).trim():t.innerText=e.Email[0].Value),i.classList.add("login")):(i.classList.remove("login"),t&&(t.innerText=""))}};