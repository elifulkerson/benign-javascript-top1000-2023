(window.webpackJsonp=window.webpackJsonp||[]).push([[150],{2229:function(e,t,r){"use strict";r.r(t);r(8),r(13);var n=r(11),o=r(2),c=r(3),l=r(9),d=r(10),f=r(4),v=(r(58),r(44),r(18),r(50),r(0)),h=r(860),y=r(15),m=r(61),O=r(64),x=r(51);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(f.a)(e);if(t){var o=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(d.a)(this,r)}}var j=function(e){Object(l.a)(r,e);var t=P(r);function r(e){var n;return Object(o.a)(this,r),(n=t.call(this,e)).services=["tagular"],n}return Object(c.a)(r,[{key:"defaults",get:function(){return{"@type":"core.InfinitePageScrolled.v1",isInfiniteScroll:!0}}}]),r}(r(89).a);j=Object(v.c)([Object(m.a)(x.a.Transient),Object(v.g)(0,O.a),Object(v.f)("design:paramtypes",[Object])],j);r(19),r(14),r(21),r(27),r(16),r(28);var k=r(5),w=(r(82),r(863)),$=r(955);function R(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?R(Object(source),!0).forEach((function(t){Object(k.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):R(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(f.a)(e);if(t){var o=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(d.a)(this,r)}}var T=new(r(17).a)("SeamlessTriggers"),I=function(e){Object(l.a)(r,e);var t=S(r);function r(){var e;return Object(o.a)(this,r),(e=t.apply(this,arguments)).requested=!1,e}return Object(c.a)(r,[{key:"config",get:function(){return this.$seamless.config}},{key:"requestObserverOptions",get:function(){var e,t;return _({handler:this.requestPage,data:{index:this.index}},(null===(t=null===(e=this.config)||void 0===e?void 0:e.intersectionObservers)||void 0===t?void 0:t.request)||{})}},{key:"enterObserverOptions",get:function(){var e,t;return _({handler:this.enterPage,data:{index:this.index}},(null===(t=null===(e=this.config)||void 0===e?void 0:e.intersectionObservers)||void 0===t?void 0:t.enter)||{})}},{key:"requestPage",value:function(e){var data=e.data,t=e.direction;if("down"===t&&!this.requested){T.log("requestPage",t,data);try{this.$emit("seamless-insert-page",data.index,this.$seamless.requestPage({data:data,direction:t})),this.requested=!0}catch(e){T.error(e)}}}},{key:"enterPage",value:function(e){var data=e.data,t=e.direction;T.log("enterPage",t,data),this.$emit("seamless-enter-page",{data:data,direction:t})}}]),r}(h.Vue);Object(v.c)([Object(h.Prop)({default:!1,required:!0}),Object(v.f)("design:type",Number)],I.prototype,"index",void 0);var B=I=Object(v.c)([h.Component,Object(w.a)("intersection-observer",$.a)],I),C=r(150),D=Object(C.a)(B,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"c-seamlessTriggers"},[t("div",{directives:[{name:"intersection-observer",rawName:"v-intersection-observer",value:e.requestObserverOptions,expression:"requestObserverOptions"}]}),e._v(" "),t("div",{directives:[{name:"intersection-observer",rawName:"v-intersection-observer",value:e.enterObserverOptions,expression:"enterObserverOptions"}]})])}),[],!1,null,null,null).exports,L=r(93),F=r(978);function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(f.a)(e);if(t){var o=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(d.a)(this,r)}}var M=function(e){Object(l.a)(v,e);var t,r,d,f=U(v);function v(){var e;return Object(o.a)(this,v),(e=f.apply(this,arguments)).pages=[],e.currentParentPage=null,e.listing=null,e.pageRequestPromises=[],e.loading=!1,e}return Object(c.a)(v,[{key:"getPages",value:function(){var e,t=(null===(e=this.$refs)||void 0===e?void 0:e.pages)?this.$refs.pages:[];return[this.currentParentPage].concat(Object(y.a)(t))}},{key:"getPageByIndex",value:function(e){var t;return(null===(t=this.getPages())||void 0===t?void 0:t[e])||null}},{key:"routeChange",value:function(){this.cleanup()}},{key:"beforeDestroy",value:function(){this.cleanup(),this.$nuxt.$off("pageMounted")}},{key:"beforeMount",value:function(){var e=this;this.$nuxt.$on("pageMounted",(function(t){e.currentParentPage=t,e.initializeSeamless()}))}},{key:"initializeSeamless",value:(d=Object(n.a)(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.$services.isFeatureEnabled("seamless")){e.next=3;break}return L.a.warn("Seamless is disabled"),e.abrupt("return");case 3:return this.$seamless.createSeamlessMeta(this.$meta()),e.next=6,this.$seamless.requestSeamlessListing(null===(t=this.currentParentPage)||void 0===t?void 0:t.content);case 6:if(e.t1=r=e.sent,e.t0=null===e.t1,e.t0){e.next=10;break}e.t0=void 0===r;case 10:if(!e.t0){e.next=14;break}e.t2=void 0,e.next=15;break;case 14:e.t2=r.items;case 15:this.listing=e.t2;case 16:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"enterPage",value:(r=Object(n.a)(regeneratorRuntime.mark((function e(t){var data,r,n,o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return data=t.data,r=t.direction,L.a.log("waiting for page to be requested and inserted"),e.prev=2,e.next=5,this.pageRequestPromises[data.index];case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(2),L.a.error(e.t0),e.abrupt("return");case 11:L.a.log("enterPage",data,r),n="down"===r?data.index+1:data.index,o=this.getPageByIndex(n),c="down"===r?data.index-1:data.index+1,l=this.getPageByIndex(c),L.a.log("previousPage",l),l&&l.removeAds(),this.$seamless.enterPage(o,l,{data:data,direction:r}),this.$nuxt.$emit("seamless-enter",o);case 20:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(e){return r.apply(this,arguments)})},{key:"preInsertPage",value:function(e,t){var r=this;this.loading=!0;try{this.pageRequestPromises[e]=new Promise((function(n,o){t.then((function(t){var o;if(!(null===(o=null==t?void 0:t.content)||void 0===o?void 0:o.content))throw new Error("no content found on page");r.insertPage(t.content,e,t.pageTypeConfig).then(n),r.loading=!1}))}))}catch(e){L.a.error(e),this.loading=!1}}},{key:"insertPage",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(content,t,r){var component;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.component();case 2:return component=(component=e.sent).extend({data:function(){return{content:content}},beforeCreate:function(){try{this.$options.asyncData(this.$nuxt.context,content)}catch(e){L.a.error("error calling 'asyncData' for page with slug: '".concat(content.id,"'"),e)}}}),this.$config.ads.adDisplay.delayLoad=!0,this.$nuxt.$meta().pause(),this.pages.push(component),e.next=9,this.$nextTick();case 9:try{this.$refs.pages[t]?L.a.log("inserted page: '".concat(content.pageType,"' with slug: '").concat(content.id,"'")):(this.pages.pop(),L.a.warn("could not find a reference to a page at index ".concat(t)))}catch(e){L.a.error("error getting page reference for slug: '".concat(content.id,"'"),e)}case 10:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})},{key:"trackScroll",value:function(e,t){var r,n,o,c,l;if(this.$services.isFeatureEnabled("seamless")){L.a.log("Firing Cohesion scroll event",e,null===(r=null==t?void 0:t.data)||void 0===r?void 0:r.index),this.$track(j).with({scrollDistance:e,pageIndex:null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.index}).fire();var content=null===(l=null===(c=this.getPageByIndex(null===(o=null==t?void 0:t.data)||void 0===o?void 0:o.index))||void 0===c?void 0:c.content)||void 0===l?void 0:l.content;this.$nuxt.$emit("track-scroll",e,content)}else L.a.log("Not firing scroll events, seamless is disabled")}},{key:"cleanup",value:function(){this.$config.ads.adDisplay.delayLoad=!1,this.pages=[],this.pageRequestPromises=[],this.listing=null,this.$store.commit("page/clearSeamless"),this.$nuxt.$meta().resume()}}]),v}(h.Vue);Object(v.c)([Object(h.Watch)("$route"),Object(v.f)("design:type",Function),Object(v.f)("design:paramtypes",[]),Object(v.f)("design:returntype",void 0)],M.prototype,"routeChange",null);var E=M=Object(v.c)([Object(h.Component)({components:{SeamlessTriggers:D,TrackScroll:F.a}})],M);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(f.a)(e);if(t){var o=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(d.a)(this,r)}}var z=function(e){Object(l.a)(f,e);var t,r,d=N(f);function f(){var e;return Object(o.a)(this,f),(e=d.apply(this,arguments)).pageRecords=[],e}return Object(c.a)(f,[{key:"insertPage",value:(r=Object(n.a)(regeneratorRuntime.mark((function e(content,t,r){var component,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.component();case 2:return component=(component=e.sent).extend({data:function(){return{content:content}},beforeCreate:function(){try{this.$options.asyncData(this.$nuxt.context,content)}catch(e){L.a.error("error calling 'asyncData' for page with slug: '".concat(content.id,"'"),e)}}}),this.$config.ads.adDisplay.delayLoad=!0,this.$nuxt.$meta().pause(),n=content.content,o=["dab293a4-bef1-4902-86b6-3a4565bc524d","67c4f6cc-3599-4d80-9133-a895025952b6","6ee97e07-e721-4e0b-a19f-43d9e095d528","5e79b4a1-e66d-4c79-aaf3-4b1b8bcb54df"],c="15020e90-588e-484e-a12c-7f22a574f819"===n.id||o.includes(n.id),this.pageRecords.push({component:component,isBestList:c,id:n.id}),e.next=13,this.$nextTick();case 13:try{this.$refs.pages[t]?L.a.log("inserted page: '".concat(content.pageType,"' with slug: '").concat(content.id,"'")):(this.pageRecords.pop(),L.a.warn("could not find a reference to a page at index ".concat(t)))}catch(e){L.a.error("error getting page reference for slug: '".concat(content.id,"'"),e)}case 14:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return r.apply(this,arguments)})},{key:"enterPage",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t){var data,r,n,o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return data=t.data,r=t.direction,L.a.log("waiting for page to be requested and inserted"),e.prev=2,e.next=5,this.pageRequestPromises[data.index];case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(2),L.a.error(e.t0),e.abrupt("return");case 11:L.a.log("enterPage",data,r),n="down"===r?data.index+1:data.index,o=this.getPageByIndex(n),c="down"===r?data.index-1:data.index+1,l=this.getPageByIndex(c),L.a.log("previousPage",l),l&&l.removeAds(),this.$seamless.enterPage(o,l,{data:data,direction:r}),this.$nuxt.$emit("seamless-enter",o),this.clearBestListCompareStore();case 21:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(e){return t.apply(this,arguments)})},{key:"clearBestListCompareStore",value:function(){this.$store.dispatch("bestList/updateFirstProduct",null),this.$store.dispatch("bestList/updateFirstProductCta",null),this.$store.dispatch("bestList/updateSecondProduct",null),this.$store.dispatch("bestList/updateSecondProductCta",null)}}]),f}(Object(C.a)(E,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"c-seamlessListing"},[t("TrackScroll",{attrs:{"tracking-data":{index:0}},on:{"scroll-change":e.trackScroll}},[e._t("default")],2),e._v(" "),e.listing?[t("SeamlessTriggers",{attrs:{index:0},on:{"seamless-insert-page":e.preInsertPage,"seamless-enter-page":e.enterPage}}),e._v(" "),e._l(e.pages,(function(r,n){return[t("TrackScroll",{key:r.slug,attrs:{"tracking-data":{index:n+1}},on:{"scroll-change":e.trackScroll}},[t(r,{ref:"pages",refInFor:!0,tag:"component",attrs:{"is-seamless":!0}})],1),e._v(" "),n<e.listing.length-1?t("SeamlessTriggers",{key:r.slug,attrs:{index:n+1},on:{"seamless-insert-page":e.preInsertPage,"seamless-enter-page":e.enterPage}}):e._e()]}))]:e._e(),e._v(" "),e.loading?e._t("loader"):e._e()],2)}),[],!1,null,null,null).exports),A=z=Object(v.c)([Object(h.Component)({components:{SeamlessTriggers:D,TrackScroll:F.a}})],z),J=Object(C.a)(A,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"c-seamlessListing"},[t("TrackScroll",{attrs:{"tracking-data":{index:0}},on:{"scroll-change":e.trackScroll}},[e._t("default")],2),e._v(" "),e.listing?[t("SeamlessTriggers",{attrs:{index:0},on:{"seamless-insert-page":e.preInsertPage,"seamless-enter-page":e.enterPage}}),e._v(" "),e._l(e.pageRecords,(function(r,n){return[t("TrackScroll",{key:r.id+"-scroll",attrs:{"tracking-data":{index:n+1}},on:{"scroll-change":e.trackScroll}},[t(r.component,{ref:"pages",refInFor:!0,tag:"component",attrs:{"is-seamless":!0,"is-seamless-best-list":r.isBestList}})],1),e._v(" "),n<e.listing.length-1?t("SeamlessTriggers",{key:r.id+"-triggers",attrs:{index:n+1},on:{"seamless-insert-page":e.preInsertPage,"seamless-enter-page":e.enterPage}}):e._e()]}))]:e._e(),e._v(" "),e.loading?e._t("loader"):e._e()],2)}),[],!1,null,null,null);t.default=J.exports},955:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r(11),o=r(2),c=r(3),l=(r(58),r(24)),d=r(17),f=r(865),v=new d.a("observerDirective"),h=function(){function e(){Object(o.a)(this,e),this.refreshOnUpdate=!1}var t;return Object(c.a)(e,[{key:"bind",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,d,h,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.default.nextTick();case 2:this.refreshOnUpdate="undefined"!==(null===(n=null==r?void 0:r.value)||void 0===n?void 0:n.refreshOnUpdate)&&(null===(o=null==r?void 0:r.value)||void 0===o?void 0:o.refreshOnUpdate),this.observer=new f.a({data:null===(c=null==r?void 0:r.value)||void 0===c?void 0:c.data,rootMargin:(null===(d=null==r?void 0:r.value)||void 0===d?void 0:d.rootMargin)||"0px 0px -100% 0px",el:t,threshold:(null===(h=null==r?void 0:r.value)||void 0===h?void 0:h.threshold)||0,singleIntersection:(null===(y=null==r?void 0:r.value)||void 0===y?void 0:y.singleIntersection)||!1},(function(data){var e;v.log(data);var t=null===(e=null==r?void 0:r.value)||void 0===e?void 0:e.handler;t?t(data):v.warn("No handler specified on Intersection Observer directive")}));case 4:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})},{key:"update",value:function(){this.observer&&this.refreshOnUpdate&&this.observer.refresh()}},{key:"componentUpdated",value:function(){this.observer&&this.refreshOnUpdate&&this.observer.refresh()}},{key:"unbind",value:function(){this.observer&&this.observer.destroy()}}]),e}()}}]);
//# sourceMappingURL=33a0a6e.js.map