$(document).ready(function(){$('#div-gpt-ad-1428656525414-0').addClass('advertisement-block')
$('#div-gpt-ad-1517581109520-0').addClass('advertisement-block')
$('#div-gpt-ad-1544528258762-0').addClass('advertisement-block')
$('#div-gpt-ad-1544528657150-0').addClass('advertisement-block')
$('#div-gpt-ad-1509975098522-0').addClass('advertisement-block')
$('#div-gpt-ad-1543833870671-0').addClass('advertisement-block')
App.serviceInit();$('body').on('mousedown','a',Clicks.route);$('body').on('mousedown','a[nc]',Clicks.news);$('body').on('mousedown','a[rc]',Clicks.regnews);$('body').on('mousedown','a[fc]',Clicks.favorit);$('body').on('mousedown','a[bc]',Clicks.block);$('body').on('mousedown','a[lc]',Clicks.lid);$('body').on('mousedown','li[lc]',Clicks.lid);$('body').on('mousedown','a[mc]',Clicks.market);setTimeout(function(){if('div-gpt-ad-1543833870671-0'in window&&window.innerWidth>=1280){setReload_branding();}
if('div-gpt-ad-1428656525414-0'in window||'div-gpt-ad-1517581109520-0'in window||'div-gpt-ad-1544528258762-0'in window||'div-gpt-ad-1544528657150-0'in window||'div-gpt-ad-1509975098522-0'in window){setReload_300x250();}},100)});$(window).on("scroll resize",fixSidebar);function isElementInView(element){if(element!==null){var elementBoundingBox=element.getBoundingClientRect();var elementTopY=elementBoundingBox.top+elementBoundingBox.height+20;var elementBottomY=elementBoundingBox.top-20;return elementTopY>=0&&elementBottomY<=Math.min(document.documentElement.clientHeight,window.innerHeight||0);}else{return false;}}
function checkElementViewability(){for(var i=0;i<arrForScrollRefresh.length;i++){if(isElementInView(document.getElementById(arrForScrollRefresh[i].getSlotElementId()))){googletag.pubads().refresh([arrForScrollRefresh[i]]);arrForScrollRefresh.splice(i,1);}}
if(!arrForScrollRefresh.length){$(window).off("scroll",checkElementViewability);}}
function fixSidebar(){if(is_desktop){$(".fixed-block").each(function(index){var element=$(this);var elementHeight=element.outerHeight();var windowHeight=$(window).height();var bottomPosition=$(window).scrollTop()+$(window).height();var rightLeft=$(window).width()-$('#main').width();var mainHeight=$('#feed').outerHeight()
var side=element.data('side');var offset=($(window).scrollTop()+windowHeight)-(elementHeight+$('footer').outerHeight());var elementWidth=$(this).parent().css('width')||'200px';var elementOffset=$(this).parent().offset().top||0;if(windowHeight<elementHeight&&mainHeight>elementHeight){if($(window).width()<=$('#main').outerWidth()){if((bottomPosition>elementHeight+$('footer').outerHeight()+elementOffset)&&(bottomPosition<=$('body').outerHeight())){element.css({position:'relative',width:elementWidth,top:offset-elementOffset-$(this).parent().css('padding-top').slice(0,-2)+'px'})
if(side==='left'){element.css({left:0})}else{element.css({right:0,})}}else{element.css({position:'relative',width:elementWidth,top:0})
if(side==='left'){element.css({left:0})}else{element.css({right:0})}}}else{if(bottomPosition>elementHeight+$('footer').outerHeight()+elementOffset){element.css({position:'fixed',bottom:$('footer').outerHeight(),top:'unset',width:elementWidth})
if(side==='left'){element.css({left:rightLeft / 2})}else{element.css({right:rightLeft / 2})}}else{element.css({position:'relative',bottom:0,width:'auto',top:'unset'})
if(side==='left'){element.css({left:0})}else{element.css({right:0})}}}}});}}
function setReload_branding(){var ctrack_brand,n=0;ctrack_brand=Math.round(new Date().getTime()/1000);$(window).focus(function(e){if(n==0){var ctrack_fcs_brand=Math.round(new Date().getTime()/1000);var diff_brand=ctrack_fcs_brand-ctrack_brand;if(diff_brand>120){ctrack_brand=ctrack_fcs_brand;if(brandsActiv){var body=document.querySelector('body');body.style="";body.removeChild(document.getElementById('brands'));body.removeChild(document.getElementById('takeover_Skin'));brandsActiv=false;brand_exist=false;}
setTimeout(function(){googletag.pubads().refresh([brandSlot]);},100);n++;timeoutId_brand=setTimeout(function(){return n=0;},120000);}}});}
function ellipsizeTextBox(el){var wordArray=el.text().split(' ');while(el.height()>el.parent().height()){wordArray.pop();el.text(wordArray.join(' ')+'...');}}
var portalCache=portalCache||new LocalCache('ukr.net');var App={serviceInit:function(){$.ajax({type:'GET',url:Core.base+'ajax/start.json',dataType:'json',success:function(data){Core.regionsList=data.regions;magicHash=data.hash;portalCache.del('ajax/currency.'+data.scr);portalCache.del('ajax/fuel.'+data.scr);try{News.init(data.news,data.region,data.hash);portalCache.set('newsData',{news:data.news,region:data.region});}catch(e){if(portalCache.get('newsData')){var cashData=portalCache.get('newsData');News.init(cashData.news,cashData.region,data.hash);}else{News.interval=setInterval(function(){if(ifvisible.now()){$.ajax({type:'GET',url:Core.base+'ajax/news.json',data:{_:Date.now()},dataType:'json',success:function(data){News.magicHash(data.hash);var cats=data.news;var regs=data.region;try{News.init(cats,regs,data.hash);portalCache.set('newsData',{news:data.news,region:data.region});clearInterval(News.interval);}catch(e){}}});}else{News.pauseReload=true;clearInterval(News.interval);}},60000);}};try{User.init();}catch(e){console.log('Freemain error');};try{Currency.init(data.currency);}catch(e){var cashData=portalCache.get('currencyData');if(cashData){Currency.init(cashData);}else{Currency.interval=setInterval(function(){$.ajax({type:'GET',url:Core.base+'ajax/currency.json',data:{_:Math.round(Date.now()/ 1000)},dataType:'json',success:function(preData){var id=GetCookie('scr')!==null?GetCookie('scr'):'9';var data={};data.nowTime=Currency.getNowTime();data.currency=preData.currency.currency;data.forex=preData.currency.forex;data.regions=Core.regionsList;for(var i in data.regions){if(data.regions[i].id==id){data.region=data.regions[i];}}
Currency.render(data);}});},60000)}}
try{Fuel.init(data.fuel,data.sfr);portalCache.set('fuelData',data.fuel);}catch(e){var cashData=portalCache.get('fuelData');if(cashData){Fuel.init(cashData,data.sfr);}else{Fuel.interval=setInterval(function(){$.ajax({type:'GET',url:Core.base+'ajax/fuel.json',data:{_:Math.round(Date.now()/ 1000)},dataType:'json',success:function(data){try{Fuel.init(data.fuel,data.sfr);portalCache.set('fuelData',data.fuel);clearInterval(Fuel.interval);}catch(e){}}});},60000)}}
App.synchronization();$('.wrapper').show();widget.requireSizeUpdate();var columnsInterval=setInterval(function(){Columns.check();Lazyload.scan();},1000);setTimeout(function(){clearInterval(columnsInterval);},10000);$('.right-side__block__text a').each(function(index,element){ellipsizeTextBox($(this));});$('.left-side__block__text a').each(function(index,element){ellipsizeTextBox($(this));});}});Services.langSelect();Services.feedRegions();Services.rightTabs();Services.search();Services.documentClick();Lazyload.init();$(window).scroll(function(){if($(this).scrollTop()>=500&&$(this).width()>=1200){$('#go-top').fadeIn();}else{$('#go-top').fadeOut();}});var mode=(window.opera)?((document.compatMode=="CSS1Compat")?$('html'):$('body')):$('html,body');$('#go-top').click(function(){mode.animate({scrollTop:0},300);return false;});},checkRegion:function(value){value=parseInt(value,10);return value&&value>=1&&value<=25;},synchronization:function(){portalCache.get('scr')?portalCache.get('scr'):GetCookie('scr');portalCache.get('sfr')?portalCache.get('sfr'):GetCookie('sfr');ifvisible.setIdleDuration(5);ifvisible.idle(function(){});ifvisible.wakeup(function(){Synchronization.rightTabs();Synchronization.currency();Synchronization.fuel();Synchronization.news();Synchronization.user();Synchronization.holydays();});}};var Lazyload={init:function(){var os,src;$(window).scroll(function(e){$('img.lazy').each(function(index,el){os=$(el).offset().top;if(Lazyload.check(os)){src=$(el).attr('data-src');$(el).attr('src',src).removeClass('lazy').removeAttr('data-src');}});if(adUkrNet&&document.head.createShadowRoot){$(rootLeft).find('img.lazy').each(function(index,el){os=$(el).offset().top;if(Lazyload.check(os)){src=$(el).attr('data-src');$(el).attr('src',src).removeClass('lazy').removeAttr('data-src');}});$(rootRight).find('img.lazy').each(function(index,el){os=$(el).offset().top;if(Lazyload.check(os)){src=$(el).attr('data-src');$(el).attr('src',src).removeClass('lazy').removeAttr('data-src');}});}})},check:function(os){var sh,wh,az;sh=$(window).scrollTop();wh=$(window).height();az=sh+wh;if(os<(az+100)&&os>(sh-200)){return true;}},scan:function(){var os,src;$('img.lazy').each(function(index,el){os=$(el).offset().top;if(Lazyload.check(os)){src=$(el).attr('data-src');$(el).attr('src',src).removeClass('lazy').removeAttr('data-src');}});if(adUkrNet&&document.head.createShadowRoot){$(rootLeft).find('img.lazy').each(function(index,el){os=$(el).offset().top;if(Lazyload.check(os)){src=$(el).attr('data-src');$(el).attr('src',src).removeClass('lazy').removeAttr('data-src');}});$(rootRight).find('img.lazy').each(function(index,el){os=$(el).offset().top;if(Lazyload.check(os)){src=$(el).attr('data-src');$(el).attr('src',src).removeClass('lazy').removeAttr('data-src');}});}}};var Synchronization={rightTabs:function(){portalCache.get('rightTabs')?portalCache.get('rightTabs'):portalCache.set('rightTabs','sinoptik');var id=portalCache.get('rightTabs');$('.right-tabs__nav > li[data-tab="'+id+'"]').click();},currency:function(){if(Currency.valid){var region=GetCookie('scr')!==null?GetCookie('scr'):'9';Currency.changeRegion(region);}},fuel:function(){if(Fuel.valid){var region=GetCookie('sfr')!==null?GetCookie('sfr'):'9';Fuel.reload(region);}},news:function(){if(News.pauseReload){News.reload();}},user:function(){if(User.pauseReload){User.refresh();}},holydays:function(){if(Holydays._pauseReload){Holydays.reload();}}}
function checkAttr(val,field,required,msg){if(!val[field]&&required)throw(msg||field)+" is required";if(val[field]){if(val[field].search(/^javascript:/)>-1)throw(msg||field)+" : "+val[field];if(val[field].search(/[<>"']/)>-1){var e={'&':'&amp;','"':'&quot;','\'':'&#39;','<':'&lt;','>':'&gt;'};val[field]=val[field].replace(/[&"'<>]/g,function(m){return e[m[0]]});}}}
var Services={documentClick:function(){$(document).click(function(e){if($(e.target).attr('data-show')!='show-regions'&&$(e.target).closest(".feed__regions--list").length==0){$('.feed__regions--list').hide();$(document).unbind('keyup');}});},langSelect:function(){$("#act-lang").click(function(){$(".top-bar__nav .dropdown").show();});$('.top-bar__nav .dropdown').mouseleave(function(){$(this).hide();});},feedRegions:function(){$('#feed').on('click','[data-show="show-regions"]',function(){$(this).parent().find('.feed__regions--list').show();$(document).keyup(function(e){if(e.keyCode==27){$('.feed__regions--list').hide();}});});$('#feed').on('click','[data-show="hide-regions"]',function(){$(this).closest('.feed__regions--list').hide();$(document).unbind('keyup');});$('#feed').on('click','.feed__regions--list div > a',function(){var id=$(this).attr('data-id');if(id!=GetCookie('snr'))News.changeRegion(id);});},rightTabs:function(){var cashId=portalCache.get('rightTabs')?portalCache.get('rightTabs'):'sinoptik';$('.right-tabs__nav > li').click(function(){var id=$(this).attr('data-tab');$('.right-tabs__nav > li').removeClass('current');$(this).addClass('current');$('.right-tabs__tab-body').hide();$('.right-tabs__tab-body#'+id).show();portalCache.set('rightTabs',id);Columns.check();});$('.right-tabs__nav > li[data-tab="'+cashId+'"]').click();Columns.check();},search:function(){$('#search-input').autocomplete({serviceUrl:'//clients1.google.com/s',dataType:"jsonp",paramName:"q",transformResult:function(response){return{suggestions:$.map(response[1],function(dataItem,index){if(index<=3){return{value:dataItem,data:dataItem};}})};},minChars:3,delimiter:/(,|;)\s*/,width:336,appendTo:$('.header__search'),zIndex:9999,deferRequestBy:0,params:{hl:'ru',client:'opera'},onSelect:function(data,value){}});},commercialValidate:function(data){var id='#ecbr-'+data.id;try{checkAttr(data,'hHref',false);checkAttr(data,'hImg',true);if(data.items){for(var i in data.items){var item=data.items[i];checkAttr(item,'href',true,"items["+i+"].href");checkAttr(item,'img',true,"items["+i+"].img");checkAttr(item,'name',true,"items["+i+"].name");checkAttr(item,'fullName',true,"items["+i+"].fullName");checkAttr(item,'price',false,"items["+i+"].price");}}
return true;}catch(e){window.console&&console.log("error in commercial block data: %s\n%o",e,data);$(id).attr('data-valid','0');return false;}},commercial:function(data){if(navigator.userAgent.toLowerCase().indexOf('firefox')>-1){$('body').addClass('browserFirefox');}
if(Services.commercialValidate(data)){var id=$('['+ant.c41+'="ecbr-'+data.id+'"]');var side=id.attr(ant.c40);data.side=side;if(!data.ext)data.ext=false;var html=_.template($(data.side==='left'?'#commercial-left-block-template':'#commercial-right-block-template').html());var block=html(data);id.html(block);var timer;timer=setTimeout(function(){if(!id.find('.side-mini__slider').hasClass('slick-initialized')){id.find('.slick-arrow').closest('.fake-slider-btns').remove();id.find('.side-mini__slider').slick({infinite:true,autoplay:true,autoplaySpeed:30000,pauseOnHover:false,slidesToShow:1,slidesToScroll:1,variableWidth:true,lazyLoad:'ondemand',speed:250,prevArrow:'<i class="prev-btn"></i>',nextArrow:'<i class="next-btn"></i>'});id.find('.side-mini__slider').slick('slickNext');}},30000);id.find('.slick-arrow').click(function(){clearTimeout(timer);id.find('.slick-arrow').closest('.fake-slider-btns').remove();id.find('.side-mini__slider').slick({infinite:true,autoplay:true,autoplaySpeed:30000,pauseOnHover:false,slidesToShow:1,slidesToScroll:1,variableWidth:true,lazyLoad:'ondemand',speed:250,prevArrow:'<i class="prev-btn"></i>',nextArrow:'<i class="next-btn"></i>'});if($(this).hasClass('next-btn')){id.find('.side-mini__slider').slick('slickNext');}else{id.find('.side-mini__slider').slick('slickPrev');}});setTimeout(function(){$('.right-side__block__text a').each(function(index,element){ellipsizeTextBox($(this));});$('.left-side__block__text a').each(function(index,element){ellipsizeTextBox($(this));});},1400);var timer=null;id.find('.left-side__block').hover(function(e){clearTimeout(timer);var $this=$(this);$this.find('.left-side__block__logo').addClass('show-large');$this.find('.left-side__block__logo').css('width',$this.find('.left-side__block__logo img.large-img').width()+4+'px');},function(){var $this=$(this);$this.find('.left-side__block__logo').css('width','24px');timer=setTimeout(function(){$this.find('.left-side__block__logo').removeClass('show-large');},200);});if(adUkrNet){id.find('.side-mini__slider').click(function(){id.find('a').mousedown(Clicks.route);});}
id.find('a').attr('_xc_','1');}},commercialSimple:function(id,side){id='#ecbr-'+id;html=$(id).html();$(side=='left'?rootLeft:rootRight).find(id).html(html);},commercialKinoafisha:function(data){if(Services.commercialValidate(data)){var id=$('['+ant.c41+'="ecbr-'+data.id+'"]');var html=_.template($('#commercial-kinoafisha_custom-template').html());if(adUkrNet){var block=html(data);id.html(block);id.find('i.'+ant.c19+', i.'+ant.c20+'').click(function(){var direction=$(this).attr('class');$(this).closest('.slider').find('i.'+ant.c19+', i.'+ant.c20+'').remove();id.find('.slider').slick({infinite:true,slidesToShow:1,slidesToScroll:1,variableWidth:true,lazyLoad:'ondemand',speed:250,prevArrow:'<i class="'+ant.c19+'"></i>',nextArrow:'<i class="'+ant.c20+'"></i>'});if(direction==ant.c20){id.find('.slider').slick('slickNext');}else{id.find('.slider').slick('slickPrev');}});id.find('a').mousedown(Clicks.route);}else{id.html(html(data));id.find('i.'+ant.c19+', i.'+ant.c20+'').click(function(){var direction=$(this).attr('class');$(this).closest('.slider').find('i.'+ant.c19+', i.'+ant.c20+'').remove();id.find('.slider').slick({infinite:true,slidesToShow:1,slidesToScroll:1,variableWidth:true,lazyLoad:'ondemand',speed:250,prevArrow:'<i class="'+ant.c19+'"></i>',nextArrow:'<i class="'+ant.c20+'"></i>'});if(direction==ant.c20){id.find('.slider').slick('slickNext');}else{id.find('.slider').slick('slickPrev');}});}
id.find('a').attr('_xc_','1');}},commercialEtarg:function(data){if(Services.commercialValidate(data)){var id=$('['+ant.c41+'="ecbr-'+data.id+'"]');var side=id.attr(ant.c40);data.side=side;if(!data.ext)data.ext=false;var html=_.template($('#commercial-etarg_custom-template').html());if(adUkrNet){var block=html(data);id.html(block);id.find('i.'+ant.c9+', i.'+ant.c10+'').click(function(){var direction=$(this).attr('class');$(this).closest('.slider').find('i.'+ant.c9+', i.'+ant.c10+'').remove();id.find('.slider').slick({infinite:true,slidesToShow:1,slidesToScroll:1,variableWidth:true,lazyLoad:'ondemand',speed:250,prevArrow:'<i class="'+ant.c9+'"></i>',nextArrow:'<i class="'+ant.c10+'"></i>'});if(direction==ant.c10){$(id).find('.slider').slick('slickNext');}else{$(id).find('.slider').slick('slickPrev');}});id.find('a').mousedown(Clicks.route);}else{id.html(html(data));id.find('i.'+ant.c9+', i.'+ant.c10+'').click(function(){var direction=$(this).attr('class');$(this).closest('.slider').find('i.'+ant.c9+', i.'+ant.c10+'').remove();id.find('.slider').slick({infinite:true,slidesToShow:1,slidesToScroll:1,variableWidth:true,lazyLoad:'ondemand',speed:250,prevArrow:'<i class="'+ant.c9+'"></i>',nextArrow:'<i class="'+ant.c10+'"></i>'});if(direction==ant.c10){id.find('.slider').slick('slickNext');}else{id.find('.slider').slick('slickPrev');}});}
id.find('a').attr('_xc_','1');}},detectIE:function(){var ua=window.navigator.userAgent;var msie=ua.indexOf('MSIE ');if(msie>0){return parseInt(ua.substring(msie+5,ua.indexOf('.',msie)),10);}
var trident=ua.indexOf('Trident/');if(trident>0){var rv=ua.indexOf('rv:');return parseInt(ua.substring(rv+3,ua.indexOf('.',rv)),10);}
var edge=ua.indexOf('Edge/');if(edge>0){return parseInt(ua.substring(edge+5,ua.indexOf('.',edge)),10);}
return false;},rozetta:function(){var version=Services.detectIE();var result=0;$('['+ant.c41+'^="ecbr"]').each(function(index,el){var block=$(el);if(!block.closest('.'+ant.c33).length&&!block.hasClass('temp')&&!block.find('section').hasClass('d-hide')&&!block.attr('data-valid')){if(Services.rozettaDone(block))result++}});if(result>0&&version===false){$.getScript('https://counter.ukr.net/lid/300/cnt.php?'+Math.random());Services.commercialShadow();var fb=$('.fuel-banner img').attr('src');var fbb=$('.fuel-bottom-banner img').attr('src');$('.fuel-banner img, .fuel-bottom-banner img').remove();$('.fuel-banner a').append('<img src="'+getBase64(fb,true)+'" style="display: block !important;">').attr('style','width:120px;height:77px!important;display:block;visibility: visible!important;position: static!important;left: 0!important;top: 0!important;');;$('.fuel-bottom-banner').attr('style','height: 23px!important;margin-top: 10px!important;display: block!important;visibility: visible!important;position: static!important;left: 0!important;top: 0!important;');$('.fuel-bottom-banner a').append('<img src="'+getBase64(fbb,true)+'" style="display: block !important;">').attr('style','height: auto!important;display: block!important;visibility: visible!important;position: static!important;left: 0!important;top: 0!important;');;$('.fuel-bottom-banner a img').attr('style','width:300px!important;height: 23px!important;display: block!important;visibility: visible!important;position: static!important;left: 0!important;top: 0!important;');;$('.fuel-banner a img').attr('style','width:120px;height:77px!important;display: block!important;visibility: visible!important;position: static!important;left: 0!important;top: 0!important;');}},rozettaDone:function(block){var result;if(!block.hasClass('temp')&&block.hasClass(ant.c11)){result=!(block.is(':visible')&&block.find('section').is(':visible')&&block.find('section a').is(':visible')&&block.find('section a img').is(':visible'));}else{result=!(block.is(':visible')&&block.find('section').is(':visible')&&block.find('section .'+ant.c3).is(':visible')&&(!block.find('section .'+ant.c3+' a').length||block.find('section .'+ant.c3+' a').is(':visible'))&&(block.find('section .'+ant.c3+' a').length?block.find('section .'+ant.c3+' a img').is(':visible'):block.find('section .'+ant.c3+' img').is(':visible'))&&block.find('section .slider').is(':visible')&&(block.find('section .slider').height()==128||block.find('section .slider').height()==111));if(!result){block.find('section .slider .'+ant.c6).each(function(){result=result||!$(this).is(':visible');result=result||!$(this).find('.'+ant.c7).is(':visible');result=result||!$(this).find('.'+ant.c7+' a').is(':visible');result=result||!$(this).find('.'+ant.c7+' a img, .'+ant.c7+' a div').is(':visible');result=result||!$(this).find('.'+ant.c8).is(':visible');result=result||!$(this).find('.'+ant.c8+' a').is(':visible');});}}
return result;},commercialShadow:function(){var gcd=globalCommercialData;for(var i in gcd){if(gcd[i].json){Services.commercial(gcd[i].json,gcd[i].side);}
if(gcd[i].url){ecbrStart(gcd[i].id,gcd[i].url,gcd[i].custom,gcd[i].ws);}
if(!gcd[i].json&&!gcd[i].url){Services.commercialSimple(gcd[i].id,gcd[i].side);}}}};var Currency={valid:false,interval:null,kalcShow:false,kalcVal:{grn:null,pln:null,usd:null,eur:null},init:function(data){var id=GetCookie('scr')!==null?GetCookie('scr'):'9';data.nowTime=Currency.getNowTime();data.regions=Core.regionsList;for(var i in data.regions){if(data.regions[i].id==id){data.region=data.regions[i];}}
Currency.render(data);$('#currency').on('click','.act-region',function(){if(!$('#currency .region-list').hasClass('show')){$('#currency .region-list').addClass('show');}else{$('#currency .region-list').removeClass('show');}});$('#currency').on('mouseleave','.right-tabs__currency--region-list',function(){$('#currency .region-list').removeClass('show');});$('#currency').on('click','.right-tabs__currency--region-list > a',function(){var id=$(this).attr('data-region');Currency.changeRegion(id);});},getNowTime:function(){var t=new Date();var time;var result;if(t.getMinutes()<10){time=t.getHours()+':0'+t.getMinutes()}else{time=t.getHours()+':'+t.getMinutes()}
if(Core.lang=='ru'){result='в <span>'+time+'</span>';}else{if(t.getHours()==11){result='об <span>'+time+'</span>';}else{result='о <span>'+time+'</span>';}}
return result;},changeRegion:function(id){ajaxCash({type:'GET',url:Core.base+'ajax/currency.json',cache_name:'ajax/currency.'+id,cache_ttl:21600*1000,data:{scr:id,_:Math.round(Date.now()/ 1000)},dataType:'json',success:function(preData){SetCookie('scr',preData.scr,365);var data={};data.nowTime=Currency.getNowTime();data.currency=preData.currency.currency;data.forex=preData.currency.forex;data.regions=Core.regionsList;for(var i in data.regions){if(data.regions[i].id==id){data.region=data.regions[i];}}
Currency.render(data);}},false);},render:function(data){if($('#curr-kalc').length){var value={grn:$('#curr-kalc #grn').val(),pln:$('#curr-kalc #pln').val(),usd:$('#curr-kalc #usd').val(),eur:$('#curr-kalc #eur').val(),}}else{var value={grn:'',pln:'',usd:'',eur:'',}}
data.value=value;var tamplate=_.template($('#_currency').html());$('#currency').html(tamplate(data));portalCache.set('currencyData',data);Currency.valid=true;clearInterval(Currency.interval);},kalc:{grn:function(grn,pln,usd,eur){grn=grn.value;var plnInp=$('#pln');var usdInp=$('#usd');var eurInp=$('#eur');Currency.kalcVal.grn=grn;Currency.kalcVal.pln=(isNaN(grn/pln)?'0':(grn/pln).toFixed(2));Currency.kalcVal.usd=(isNaN(grn/usd)?'0':(grn/usd).toFixed(2));Currency.kalcVal.eur=(isNaN(grn/eur)?'0':(grn/eur).toFixed(2));plnInp.val(Currency.kalcVal.pln);usdInp.val(Currency.kalcVal.usd);eurInp.val(Currency.kalcVal.eur);},pln:function(plnVal,pln,usd,eur){var grn=(plnVal.value*pln);var grnInp=$('#grn');var usdInp=$('#usd');var eurInp=$('#eur');Currency.kalcVal.grn=(isNaN(grn)?'0':grn.toFixed(2));Currency.kalcVal.pln=plnVal.value;Currency.kalcVal.usd=(isNaN(grn/usd)?'0':(grn/usd).toFixed(2));Currency.kalcVal.eur=(isNaN(grn/eur)?'0':(grn/eur).toFixed(2));grnInp.val(Currency.kalcVal.grn);usdInp.val(Currency.kalcVal.usd);eurInp.val(Currency.kalcVal.eur);},usd:function(usdVal,pln,usd,eur){var grn=(usdVal.value*usd);var grnInp=$('#grn');var plnInp=$('#pln');var eurInp=$('#eur');Currency.kalcVal.grn=(isNaN(grn)?'0':grn.toFixed(2));Currency.kalcVal.pln=(isNaN(grn/pln)?'0':(grn/pln).toFixed(2));Currency.kalcVal.usd=usdVal.value;Currency.kalcVal.eur=(isNaN(grn/eur)?'0':(grn/eur).toFixed(2));grnInp.val(Currency.kalcVal.grn);plnInp.val(Currency.kalcVal.pln);eurInp.val(Currency.kalcVal.eur);},eur:function(eurVal,pln,usd,eur){var grn=(eurVal.value*eur);var grnInp=$('#grn');var usdInp=$('#usd');var plnInp=$('#pln');Currency.kalcVal.grn=(isNaN(grn)?'0':grn.toFixed(2));Currency.kalcVal.pln=(isNaN(grn/pln)?'0':(grn/pln).toFixed(2));Currency.kalcVal.usd=(isNaN(grn/usd)?'0':(grn/usd).toFixed(2));Currency.kalcVal.eur=eurVal.value;grnInp.val(Currency.kalcVal.grn);usdInp.val(Currency.kalcVal.usd);plnInp.val(Currency.kalcVal.pln);}}};var Fuel={interval:null,valid:false,Data:{},init:function(data,nowRegion){regionsList=Core.regionsList;for(var i in regionsList){if(regionsList[i].id==nowRegion){$('#fuel .region-list .act-region').html(regionsList[i].title);}else{$('#fuel .region-list .list').append('<a id="'+regionsList[i].id+'" href="javascript:void(0)">'+regionsList[i].title+'</a>');}}
Fuel.getNowTime();Fuel.dataTransform(data);$('#fuel').on('click','.fuels li',function(){var id=$(this).attr('data-id');if(id&&Fuel.Data[id]){SetCookie('fuelId',id,365);Fuel.renderInfo(id);}});$('#fuel').on('click','.region-list .list a',function(){var id=$(this).attr('id');Fuel.reload(id);});$('#fuel').on('click','.act-region',function(){if($('#fuel .region-list .list').is(':hidden')){$('#fuel .region-list .list').show();$('#fuel .region-list').addClass('show');}else{$('#fuel .region-list .list').hide();$('#fuel .region-list').removeClass('show');}});$('#fuel').on('mouseleave','.region-list .list',function(){$(this).hide();$('#fuel .region-list').removeClass('show');});},reload:function(id){$('#fuel .region-list').removeClass('actlist').find('.list').html('').hide();$('#fuel .region-list').removeClass('show');var regionsList=Core.regionsList;for(var i in regionsList){if(regionsList[i].id==id){$('#fuel .region-list .act-region').html(regionsList[i].title);}else{$('#fuel .region-list .list').append('<a id="'+regionsList[i].id+'" href="javascript:void(0)">'+regionsList[i].title+'</a>');}}
Fuel.getNowTime();ajaxCash({type:'GET',url:Core.base+'ajax/fuel.json',cache_name:'ajax/fuel.'+id,cache_ttl:21600*1000,data:{sfr:id,_:Math.round(Date.now()/ 1000)},dataType:'json',success:function(data){SetCookie('sfr',data.sfr,365);portalCache.set('fuelData',data.fuel);Fuel.dataTransform(data.fuel);}},false);},dataTransform:function(data){for(var i in data){Fuel.Data[data[i].Id]=data[i].Stations;}
Fuel.renderList(data);},renderList:function(data){var none;var id;var fuelsBlock=$('#fuel .fuels');fuelsBlock.html('');var r=new RegExp('\\u0414\\u0422\+?');for(var i in data){var fuelname=data[i].Fuel;if(Core.lang=='ua'&&r.test(fuelname)){fuelname=fuelname.replace(r,'ДП');}
var html='<li '+(data[i].Avg==null?'':'data-id="'+data[i].Id+'"')+' id="fuel-'+data[i].Id+'" class="'+(i%2==0?'odd':'even')+(data[i].Avg==null?'_none':'')+'"><div class="name">'+fuelname+'</div><div class="price">'+(data[i].Avg==null?'&mdash;.&mdash;':data[i].Avg)+'</div></li>';fuelsBlock.append(html);if(data[i].Avg==null)none=data[i].Id;}
if(!((id=GetCookie('fuelId'))&&id!==none&&Fuel.Data&&Fuel.Data[id])){if(id){DeleteCookie('fuelId');}
for(var i in Fuel.Data){if(Fuel.Data[i]&&Fuel.Data[i].length<4){id=i;SetCookie('fuelId',id,365);break;}else{id=3;}}}
Fuel.renderInfo(id);},renderInfo:function(id){$('#fuel .prices').html('');$('#fuel .fuels li').removeClass('now');$('#fuel .fuels #fuel-'+id).addClass('now');var data=Fuel.Data[id];if(!data){$('.fuel-banner').attr('style','width:120px;height:77px!important;display:block!important;visibility: visible!important;position: absolute!important;left: auto!important;top: auto!important;right: 31px!important;bottom: 0px!important;');return;}
for(var i in data){var html='<li class="'+(i%2==0?'odd':'even')+'"><div class="price">'+data[i].Value+'</div><div class="name">'+data[i].Name+'</div></li>';$('#fuel .prices').append(html);}
Fuel.valid=true;if(data.length<2){$('.fuel-banner').attr('style','width:120px;height:77px!important;display:block!important;visibility: visible!important;position: absolute!important;left: auto!important;top: auto!important;right: 31px!important;bottom: 0px!important;');}else{$('.fuel-banner').removeAttr('style');}},getNowTime:function(){var t=new Date();var time;var timeBlock=$('#fuel .time-update');time=t.getHours()+(t.getMinutes()<10?':0':(':'))+t.getMinutes();if(Core.lang=='ru'){timeBlock.html('сегодня в <span>'+time+'</span>');}else{timeBlock.html(' ');if(t.getHours()===11){timeBlock.append('сьогодні об <span>'+time+'</span>');}else{timeBlock.append('сьогодні о <span>'+time+'</span>');}}}};function onCaptcaConfirm(e){var form=document.getElementById('user-login-form');setTimeout(function(){$('.login-block__captcha').html('').hide();$('.login-block__submit').show();User.iframeForm(form,e);},500);}
function SHA1(msg){function rotate_left(n,s){var t4=(n<<s)|(n>>>(32-s));return t4;};function lsb_hex(val){var str="";var i;var vh;var vl;for(i=0;i<=6;i+=2){vh=(val>>>(i*4+4))&0x0f;vl=(val>>>(i*4))&0x0f;str+=vh.toString(16)+vl.toString(16);}
return str;};function cvt_hex(val){var str="";var i;var v;for(i=7;i>=0;i--){v=(val>>>(i*4))&0x0f;str+=v.toString(16);}
return str;};function Utf8Encode(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c);}
else if((c>127)&&(c<2048)){utftext+=String.fromCharCode((c>>6)|192);utftext+=String.fromCharCode((c&63)|128);}
else{utftext+=String.fromCharCode((c>>12)|224);utftext+=String.fromCharCode(((c>>6)&63)|128);utftext+=String.fromCharCode((c&63)|128);}}
return utftext;};var blockstart;var i,j;var W=new Array(80);var H0=0x67452301;var H1=0xEFCDAB89;var H2=0x98BADCFE;var H3=0x10325476;var H4=0xC3D2E1F0;var A,B,C,D,E;var temp;msg=Utf8Encode(msg);var msg_len=msg.length;var word_array=new Array();for(i=0;i<msg_len-3;i+=4){j=msg.charCodeAt(i)<<24|msg.charCodeAt(i+1)<<16|msg.charCodeAt(i+2)<<8|msg.charCodeAt(i+3);word_array.push(j);}
switch(msg_len%4){case 0:i=0x080000000;break;case 1:i=msg.charCodeAt(msg_len-1)<<24|0x0800000;break;case 2:i=msg.charCodeAt(msg_len-2)<<24|msg.charCodeAt(msg_len-1)<<16|0x08000;break;case 3:i=msg.charCodeAt(msg_len-3)<<24|msg.charCodeAt(msg_len-2)<<16|msg.charCodeAt(msg_len-1)<<8|0x80;break;}
word_array.push(i);while((word_array.length%16)!=14)word_array.push(0);word_array.push(msg_len>>>29);word_array.push((msg_len<<3)&0x0ffffffff);for(blockstart=0;blockstart<word_array.length;blockstart+=16){for(i=0;i<16;i++)W[i]=word_array[blockstart+i];for(i=16;i<=79;i++)W[i]=rotate_left(W[i-3]^W[i-8]^W[i-14]^W[i-16],1);A=H0;B=H1;C=H2;D=H3;E=H4;for(i=0;i<=19;i++){temp=(rotate_left(A,5)+((B&C)|(~B&D))+E+W[i]+0x5A827999)&0x0ffffffff;E=D;D=C;C=rotate_left(B,30);B=A;A=temp;}
for(i=20;i<=39;i++){temp=(rotate_left(A,5)+(B^C^D)+E+W[i]+0x6ED9EBA1)&0x0ffffffff;E=D;D=C;C=rotate_left(B,30);B=A;A=temp;}
for(i=40;i<=59;i++){temp=(rotate_left(A,5)+((B&C)|(B&D)|(C&D))+E+W[i]+0x8F1BBCDC)&0x0ffffffff;E=D;D=C;C=rotate_left(B,30);B=A;A=temp;}
for(i=60;i<=79;i++){temp=(rotate_left(A,5)+(B^C^D)+E+W[i]+0xCA62C1D6)&0x0ffffffff;E=D;D=C;C=rotate_left(B,30);B=A;A=temp;}
H0=(H0+A)&0x0ffffffff;H1=(H1+B)&0x0ffffffff;H2=(H2+C)&0x0ffffffff;H3=(H3+D)&0x0ffffffff;H4=(H4+E)&0x0ffffffff;}
var temp=cvt_hex(H0)+cvt_hex(H1)+cvt_hex(H2)+cvt_hex(H3)+cvt_hex(H4);return temp.toLowerCase();}
String.prototype.translit=(function(){var L={'А':'A','а':'a','Б':'B','б':'b','В':'V','в':'v','Г':'G','г':'g','Д':'D','д':'d','Е':'E','е':'e','Ё':'Yo','ё':'yo','Ж':'Zh','ж':'zh','З':'Z','з':'z','И':'I','и':'i','Й':'Y','й':'y','К':'K','к':'k','Л':'L','л':'l','М':'M','м':'m','Н':'N','н':'n','О':'O','о':'o','П':'P','п':'p','Р':'R','р':'r','С':'S','с':'s','Т':'T','т':'t','У':'U','у':'u','Ф':'F','ф':'f','Х':'Kh','х':'kh','Ц':'Ts','ц':'ts','Ч':'Ch','ч':'ch','Ш':'Sh','ш':'sh','Щ':'Sch','щ':'sch','Ъ':'"','ъ':'"','Ы':'Y','ы':'y','Ь':"'",'ь':"'",'Э':'E','э':'e','Ю':'Yu','ю':'yu','Я':'Ya','я':'ya'},r='',k;for(k in L)r+=k;r=new RegExp('['+r+']','g');k=function(a){return a in L?L[a]:'';};return function(){return this.replace(r,k);};})();function transliterate(entry){var ru="йцукенгшщзхъїёфыівапролджэєячсмитьбюЙЦУКЕНГШЩЗХЪЇЁФЫІВАПРОЛДЖЭЄЯЧСМИТЬБЮ№";var en="qwertyuiop[[[[assdfghjkl;[[zxcvbnm,.QWERTYUIOP[[[[ASSDFGHJKL;[[ZXCVBNM,.#";var code="";var i=0;for(i=0;i<ru.length;i++){code=code+"entry = entry.replace(/"+ru.charAt(i)+"/g, '"+en.charAt(i)+"');\n";}
eval(code);return entry;}
function ToPlural(n,msg1,msg2,msg3){var plural=(n%10==1&&n%100!=11?0:(n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2));return(plural===0?msg1:(plural==1?msg2:(msg3?msg3:msg2)));}
var User={pauseReload:false,interval:null,time:60000,data:{},autofillInterval:null,_eset:true,privateDetect:false,frame:document.createElement("iframe"),log:function(nick,opp,stat){$.ajax({type:'GET',url:Core.base+'js/logs/mail.json',data:{l:nick,o:opp,s:stat,_:Date.now()}});},format_size:function(val,n){if(!n)n=0;if(val<1024)return val+'Б';else
if(val<1048576)return(val / 1024).toFixed(n)+' КБ';else
if(val<1073741824)return(val / 1048576).toFixed(n)+' МБ';else
return(parseFloat((val / 1073741824).toFixed(2)))+' ГБ';},wait:function(form){form.disabled=true;$(form).find('input, button').blur();window.setTimeout(function(){form.disabled=false;},3000);},email:function(){var c=GetCookie('freemail');return c?c.replace(/^.+:([^@:]+@[^@:]+):.+$/,'$1'):null;},init:function(){return false;User.frame.name="loginFrame";User.frame.id="login-frame";User.inPrivateDetect(function(){User.privateDetect=true;},function(){return;});document.body.appendChild(User.frame);if(User._eset){var skip={9:true,13:true,16:true,17:true,18:true,20:true,91:true,92:true};$('#login-block').on('keyup','.login-block__input',function(e){var code=e.keyCode||e.which;if(!skip[code]){$(this).attr('x-man',$(this).val()!=''?'1':'');}});$('#login-block').on('click','.login-block__input',function(){User.log($('.login-block .login input').val(),'forgot',null);});}
$('#login-block').on('click','.login-block__email a.l',function(){User.log(User._info.email.replace('@ukr.net',''),'mail',null);});User.refresh();},onFrameMessage:function(evt){if(evt.origin=='https://mail.ukr.net'){var data=JSON.parse(evt.data);if(data&&data.data.result==1){window.clearInterval(User.autofillInterval);User.log($('#user-login-form input[name="Login"]').val(),'login succeeded',$('#user-login-form input[name="Password"]').attr('x-man')!='1');User.onlogoned();}else{if(data.data.error=='recaptcha_required'){$('.login-block__submit, .login-block__errors').hide();$('.login-block__input').removeClass('error');$('.login-block__captcha').html('<div class="g-recaptcha" data-size="compact" data-callback="onCaptcaConfirm" data-sitekey="6Lf6yDUUAAAAAPY9DsUvkysbjQ1U9rNRJPbMFzts"></div>').show();$.getScript('https://www.google.com/recaptcha/api.js?hl='+(Core.lang=='ru'?'ru':'uk'));}else{$('.login-block__input').addClass('error');if(data.data.error)$('.login-block__errors').html(LoginErrors[data.data.error]).show();User.log($('#user-login-form input[name="Login"]').val(),'login failed',$('#user-login-form input[name="Password"]').attr('x-man')!='1');}}}},sendMessageToFrame:function(){var json="Hello Portal";User.frame.contentWindow.postMessage(json,'https://mail.ukr.net/q/auth');},refresh:function(){if(GetCookie('freemail')){var em=User.email();if(!User._info||!User._info.email||User._info.email!==em){User._info=null;User.onlogoned();}else{}}else if(User._info!==null){User.onlogouted();}},iframeForm:function(form,captcha){formSend=document.createElement("form");formSend.id="login-frame-form";formSend.method="POST";formSend.action='//mail.ukr.net/q/auth';formSend.target="loginFrame";document.body.appendChild(formSend);var inputLogin=document.createElement("input");inputLogin.setAttribute('type',"hidden");inputLogin.setAttribute('name',"Login");inputLogin.setAttribute('value',form.Login.value);formSend.appendChild(inputLogin);var inputAction=document.createElement("input");inputAction.setAttribute('type',"hidden");inputAction.setAttribute('name',"action");inputAction.setAttribute('value',"login");formSend.appendChild(inputAction);var inputPass=document.createElement("input");inputPass.setAttribute('type',"hidden");inputPass.setAttribute('name',"secret_digest");inputPass.setAttribute('value',SHA1(transliterate(form.Password.value.substring(0,16)).replace(/ /g,'')));formSend.appendChild(inputPass);var inputlevel=document.createElement("input");inputlevel.setAttribute('type',"hidden");inputlevel.setAttribute('name',"level");if(User.privateDetect){inputlevel.setAttribute('value',1);}else{inputlevel.setAttribute('value',form.level.checked?1:0);}
formSend.appendChild(inputlevel);var inputAutofill=document.createElement("input");inputAutofill.setAttribute('type',"hidden");inputAutofill.setAttribute('name',"autofill");inputAutofill.setAttribute('value',$('#user-login-form input[name="autofill"]').val());formSend.appendChild(inputAutofill);var inputAsFrame=document.createElement("input");inputAsFrame.setAttribute('type',"hidden");inputAsFrame.setAttribute('name',"as_frame");inputAsFrame.setAttribute('value',"true");formSend.appendChild(inputAsFrame);if(captcha){var inputCaptcha=document.createElement("input");inputCaptcha.setAttribute('type',"hidden");inputCaptcha.setAttribute('name',"g-recaptcha-response");inputCaptcha.setAttribute('value',captcha);formSend.appendChild(inputCaptcha);}
formSend.submit();formSend.parentNode.removeChild(formSend);},login:function(form){User.frame.addEventListener("load",User.sendMessageToFrame);window.addEventListener("message",User.onFrameMessage);if(!form.disabled){User.wait(form);portalCache.del('email');portalCache.del('edisk');User.iframeForm(form);}},onlogoned:function(){if(!User._info){User._info={};if(!User._info.email){User._info.email=User.email();SetCookie('loginhesh',SHA1(User._info.email.replace('@ukr.net','htrDrHEQBZF3V5AtAF1zIZIbxIICd4Yvt0cJPmOJDhxv1K2S3acW13odhyz4CWGauaXUPfp31qfo')));}
User.render_logoned();}},logout:function(){$.ajax({type:'GET',crossDomain:true,dataType:"JSONP",url:'https://mail.ukr.net/q/auth',data:{'action':'logout'}});User.onlogouted();},onlogouted:function(){User._info=null;portalCache.del('user');clearInterval(User.interval);User.pauseReload=true;User.render_notlogoned();},render_notlogoned:function(){userLoginData='';User._eset=false;},sessionDropped:function(){var now=Date.now();},update:function(){var now=Date.now();},clean:function(){portalCache.del('user');},update_edisk:function(now){if(!User._info.edisk){User._info.edisk={free:'-'};ajaxCash({cache_name:'edisk',cache_ttl:User.time-1000,type:'GET',crossDomain:true,url:'https://edisk.ukr.net/api.php?do=Info&rnd='+now+'&cb=?',dataType:"jsonp",success:function(data){if(data.data){User._info['edisk']=data.data;portalCache.set('user',User._info,now+User.time);User.render_refresh();}},error:function(){User._info.edisk=false;}});}},render_logoned:function(){},render_refresh:function(){userLoginData={status:'1'};$('.top-bar__username').html(User._info.email);User.data={name:User._info.email,mails:User._info.freemail['new']?User._info.freemail['new']:'-',edisk:User._info.edisk.free?User._info.edisk.free:'-'};setTimeout(function(){var html=_.template($('#logged').html());$('#login-block').html(html(User.data));},300);},detectAutofill:function(formId,fieldName,autofillName){var obj={};var timestamps={};obj.events={};obj.eventTriggered=function(eventName){return(obj.events[eventName]&&obj.events[eventName].timestamp>timestamps.prevInterval)?true:false;};function detector(){timestamps.prevInterval=timestamps.interval;timestamps.interval=new Date().getTime();if(field.value.length==0&&field.value!=value){value=field.value;autofillField.value=0;return;}
if(obj.eventTriggered('paste')||obj.eventTriggered('keypress')){value=field.value;autofillField.value=0;return;}
if((obj.eventTriggered('keyup')||obj.eventTriggered('keydown'))&&value!=field.value){value=field.value;autofillField.value=0;return;}
if(value==field.value)return;value=field.value;autofillField.value=1;return;}
var form=document.getElementById(formId);form.onsubmit=function(){detector();User.login(form);return false;};var field=form[fieldName];var autofillField=form[autofillName];var value='';timestamps.interval=new Date().getTime();User.autofillInterval=window.setInterval(detector,100);var events=['autocomplete','keydown','keyup','keypress','paste'];for(var i=0;i<events.length;i++){var eventName=events[i];if('undefined'!=typeof field['on'+eventName]){(function(eventName){var originalHandler=field['on'+eventName];field['on'+eventName]=function(){obj.events[eventName]={timestamp:new Date().getTime(),keycode:arguments[0]?(arguments[0].whitch||arguments[0].keyCode):null};if(originalHandler)return originalHandler.apply(this,arguments);};})(eventName);}}},inPrivateDetect:function(on,off){if(window.webkitRequestFileSystem){webkitRequestFileSystem(0,0,off,on);return;}
if("MozAppearance"in document.documentElement.style){var db=indexedDB.open("test");db.onerror=on;db.onsuccess=off;return;}
if(/Safari/.test(window.navigator.userAgent)&&!/chrome/i.test(window.navigator.userAgent)){try{window.openDatabase(null,null,null,null);window.localStorage.setItem('inp_test__','1');window.localStorage.removeItem('inp_test__');off();}catch(err){on();}
return}
if(!window.indexedDB&&(window.PointerEvent||window.MSPointerEvent)){on();return;}
off();}};var News={interval:null,pauseReload:false,init:function(cats,regs,mh){News.magicHash(mh);News.categorys(cats,regs);News.interval=setInterval(function(){if(ifvisible.now()){$.ajax({type:'GET',url:Core.base+'ajax/news.json',data:{_:Date.now()},dataType:'json',success:function(data){News.magicHash(data.hash);var cats=data.news;var regs=data.region;try{News.categorys(cats,regs);portalCache.set('newsData',{news:data.news,region:data.region});}catch(e){var cashData=portalCache.get('newsData');cats=cashData.news;regs=cashData.region;News.categorys(cats,regs);}}});}else{News.pauseReload=true;clearInterval(News.interval);}},60000);},magicHash:function(mh){if(mh&&magicHash&&mh!=magicHash){window.location.reload();}},reload:function(){News.pauseReload=false;clearInterval(News.interval);$.ajax({type:'GET',url:Core.base+'ajax/news.json',data:{_:Date.now()},dataType:'json',success:function(data){News.magicHash(data.hash);var cats=data.news;var regs=data.region;try{News.categorys(cats,regs);portalCache.set('newsData',{news:data.news,region:data.region});}catch(e){var cashData=portalCache.get('newsData');if(cashData){cats=cashData.news;regs=cashData.region;News.categorys(cats,regs);}}
News.interval=setInterval(function(){if(ifvisible.now()){$.ajax({type:'GET',url:Core.base+'ajax/news.json',data:{_:Date.now()},dataType:'json',success:function(data){News.magicHash(data.hash);var cats=data.news;var regs=data.region;try{News.categorys(cats,regs);portalCache.set('newsData',{news:data.news,region:data.region});}catch(e){var cashData=portalCache.get('newsData');if(cashData){cats=cashData.news;regs=cashData.region;News.categorys(cats,regs);}}}});}else{News.pauseReload=true;clearInterval(News.interval);}},60000);}});},categorys:function(cats,regs){if(!cats)throw"error";var template=_.template($('#feed-category-template').html());$('#feed').html('');var feed='';for(var i in cats){var section='';section+='<section class="feed__section'+(cats[i].id=='16'?' regions':'')+'">';if(cats[i].id=='16'){section+=News.regions(cats[i],regs);feed+=section;}else{section+=template(cats[i]);}
section+='</section>';$('#feed').append(section);}
News.updateViews(cats,regs);setTimeout(function(){Columns.check();},500);},regions:function(cat,regs){var data={};var regions=Core.regionsList;var current=GetCookie('snr')!==null?GetCookie('snr'):'9';var items=regs;var html=_.template($('#feed-regions-template').html());data.cat=cat;data.items=items;data.regions=regions;data.current=current;data.ad_baner={};for(var i in regions){if(regions[i].id==current){data.catTitle=regions[i].city+(Core.lang=='ua'?' новини':' новости');data.catSeo=regions[i].seo;data.ad_baner=regions[i].ad_baner?regions[i].ad_baner:{};}}
return html(data);},changeRegion:function(id){var html=_.template($('#feed-regions-template').html());$.ajax({type:'GET',url:Core.base+'ajax/regions.json',data:{snr:id,_:Date.now()},dataType:'json',success:function(data){var regions=Core.regionsList;data.current=id;data.regions=regions;data.items=data.region;data.cat={readMore:Core.lang=='ua'?'всі новини розділу':'все новости раздела'}
data.ad_baner={};for(var i in regions){if(regions[i].id==id){data.catTitle=regions[i].city+(Core.lang=='ua'?' новини':' новости');data.catSeo=regions[i].seo;data.ad_baner=regions[i].ad_baner?regions[i].ad_baner:{};}}
$('#feed section.regions').html(html(data));News.updateViews(null,data.region);}});},updateViews:function(cats,regs){var ids=[];if(cats){for(var i in cats){for(var n in cats[i].items){ids.push(cats[i].items[n].id);}}}
if(regs){for(var m in regs){ids.push(regs[m].id);}}
if(ids.length>0){ids.sort();for(var i=0,d=0;i<ids.length;++i){var n=ids[i];ids[i]-=d;d=n;}
$.get(Core.base+'view/main/'+ids.join(',')+'/'+Date.now()+'.html');}}};var Holydays={_interval:null,_pauseReload:false,_time:120000,_alt:'',_title:'',_values:{},_old:false,init:function(title,alt,values,old){Holydays._title=title;Holydays._alt=alt;Holydays._old=old;Holydays.set(Holydays.localize(values));portalCache.set('logo',values,Holydays._time+1);Holydays._interval=setInterval(function(){ajaxCash({cache_name:'logo',cache_ttl:Holydays._interval-1,url:Core.base+"dat/holidays.json",data:{_:Date.now()},dataType:'json',success:function(result,textStatus,jqXHR,cached){if(ifvisible.now()){if(Holydays.set(Holydays.localize(result))){Holydays.render();}}else{Holydays._pauseReload=true;clearInterval(Holydays._interval);}}},false);},Holydays._time);},reload:function(){Holydays._pauseReload=false;ajaxCash({cache_name:'logo',cache_ttl:Holydays._interval-1,url:Core.base+"dat/holidays.json",data:{_:Date.now()},dataType:'json',success:function(result,textStatus,jqXHR,cached){if(Holydays.set(Holydays.localize(result))){Holydays.render();}}},false);Holydays._interval=setInterval(function(){if(ifvisible.now()){ajaxCash({cache_name:'logo',cache_ttl:Holydays._interval-1,url:Core.base+"dat/holidays.json",data:{_:Date.now()},dataType:'json',success:function(result,textStatus,jqXHR,cached){if(Holydays.set(Holydays.localize(result))){Holydays.render();}}},false);}else{Holydays._pauseReload=true;clearInterval(Holydays._interval);}},Holydays._time);},localize:function(data){var lang=Core.Lang;return{Title:data['Title'+lang],TitleImg:data['TitleImg'+lang],Logo:data['Logo'+lang],TitleImgHeight:data['TitleImgHeight'+lang],Html:data['Html'+lang]};},set:function(h){if(h.Title!==Holydays._values.Title||h.TitleImg!==Holydays._values.TitleImg||h.Logo!==Holydays._values.Logo||h.Html!==Holydays._values.Html){Holydays._values=h;return true;}else{return false;}},render:function(){var h=Holydays._values;var html='<a href="'+Core.base+'">';if(!Holydays._old&&h.Html){html+=h.Html;}else{html+='<img width="235" height="69" alt="'+
Holydays._alt+'" src="'+h.Logo+'"/>';}
html+='</a><h1>'+Holydays._title+'</h1>';if(h.Title)html+='<div class="header__holidays">'+h.Title+'</div>';if(h.TitleImg){html+='<div class="holidays-img"><img src="'+h.TitleImg+'"/></div>';$('.header__logo').css('height','auto');$('.'+ant.c31).css('marginTop','4px');$('.'+ant.c30+' > .feed').css('marginTop',-h.TitleImgHeight+'px');}else{$('.header__logo').removeAttr('style');$('.'+ant.c31).removeAttr('style');$('.'+ant.c30+' > .feed').removeAttr('style');}
$('.header__logo').html(html);}};var Clicks={_news:function(id,cat,reg,clusterid){$.get(Core.base+'click/'+Core.type+'/'+(cat&&cat>0?cat+'/'+(reg?reg+'/':''):'')+id+(clusterid?'.'+clusterid:'')+'/'+Date.now()+'.html');var countDay=30;if(!GetCookie('category')){SetCookie('category','c_'+cat,countDay);SetCookie('categoryUpdateTime',(new Date()).getTime()+countDay*24*3600*1000,countDay);}else{var category=GetCookie('category');var newCategory='c_'+cat;var reg=new RegExp(newCategory+"(c|$)");SetCookie('category',newCategory+category.replace(reg,'$1'));}
$.ajax({type:'GET',url:'https://counter.ukr.net/news/cnt.php',data:{r:document.referrer,p:window.location.href,fr:self!=top?'y':'n',tz:(new Date()).getTimezoneOffset(),j:navigator.javaEnabled()?'y':'n',s:screen.width+'*'+screen.height,d:screen.colorDepth?screen.colorDepth:screen.pixelDepth,js:'y',cid:cat,page:0},crossDomain:true,dataType:'JSONP'});},_fav:function(id,cId){$.ajax({type:'GET',crossDomain:true,url:'https://mod.ukr.net/favorites/counter.php',data:{'id':id,'rnd':Date.now(),'q':1},dataType:"JSONP"});$.ajax({type:'GET',url:'https://counter.ukr.net/favourites/cnt.php',crossDomain:true,dataType:'JSONP'});if(cId){if(!GetCookie('fm')){SetCookie('fm','f_'+cId,30);}else{var cooka=GetCookie('fm');var newCooka='f_'+cId;var reg=new RegExp('f_'+cId+'(f|m|$)');if(!reg.test(cooka)){SetCookie('fm',cooka+newCooka,30);}else{SetCookie('fm',cooka,30);}}}},_test_meta_referer:function(){var m=window.navigator.userAgent.match(/AppleWebKit\/(\d+\.\d+)/i);Clicks._test_meta_referer=m&&m[1]&&parseFloat(m[1])>=537.36?function(){return true;}:function(){return false;};return Clicks._test_meta_referer();},_isOldIE:(navigator.userAgent.indexOf('msie')>0)?parseInt(navigator.userAgent.split('msie')[1])<8:false,_isSafari:/^((?!chrome|android).)*safari/i.test(navigator.userAgent),_isEdge:/Edge\/\d+/i.test(navigator.userAgent),route:function(){if(location.protocol==='https:'&&!Clicks._test_meta_referer()&&!this.getAttribute('_xc_')&&/^http:\/\//i.test(this.href)&&!/^(?:http[s]?:)?\/\/([^/]*?)\.ukr\.net/i.test(this.href)){this.setAttribute('_xc_',this.href);this.href='http://'+document.location.host+document.location.pathname
+'?go='+encodeURIComponent(this.href);if(location.hash&&location.hash.length>0){this.href+=location.hash;}
if(Clicks._isSafari||Clicks._isEdge){this.onclick=function(){var iframe=document.createElement('iframe');iframe.style.display='none';document.body.appendChild(iframe);var iframeDoc=iframe.contentDocument||iframe.contentWindow.document;var script=iframeDoc.createElement('script');script.type='text/javascript';script.text='window.parent = null; window.top = null;'+'window.frameElement = null; var child = window.open("'+this.href+'");'+'child.opener = null';iframeDoc.body.appendChild(script);document.body.removeChild(iframe);return false;}}}},news:function(){var a=$(this).attr('nc').split(',');Clicks._news(a[0],a[1],null,a[2]);},regnews:function(){var a=$(this).attr('rc').split(',');Clicks._news(a[0],16,a[1],a[2]);},block:function(){Clicks._fav($(this).attr('bc'));},favorit:function(){var a=/^(\d+)(?:,(.+))$/.exec($(this).attr('fc'));var cId=$(this).closest('.categories-block__container').attr('x-adriver-id');Clicks._fav(a[1],cId);if(a[2]){}},lid:function(lc){if($(this).attr('lc'))lc=$(this).attr('lc');$.ajax({type:'GET',crossDomain:true,url:'https://counter.ukr.net/lid/'+lc+'/cnt.php',data:{'rnd':Date.now()},dataType:"JSONP"});},market:function(){var a=/^(\d+)(?:,(.+))$/.exec($(this).attr('mc'));var aId=$(this).closest('.'+ant.c36).attr('id');var cId=$(this).closest('.'+ant.c36).attr('x-adriver-id');$.ajax({type:'GET',crossDomain:true,url:'https://mod.ukr.net/market/counter.php',data:{'type':2,'id':a[1],'rnd':Date.now(),'q':1},dataType:"JSONP"});if(aId){$.ajax({type:'GET',url:'https://counter.ukr.net/market/'+aId+'/cnt.php',crossDomain:true,dataType:'JSONP'});}
if(cId){if(!GetCookie('fm')){SetCookie('fm','m_'+cId,30);}else{var cooka=GetCookie('fm');var newCooka='m_'+cId;var reg=new RegExp('m_'+cId+'(f|m|$)');SetCookie('fm',(!reg.test(cooka)?cooka+newCooka:cooka),30);}}
if(a[2]){}}};var bc_a;var bc_g;GetCookie('a')?bc_a=GetCookie('a'):bc_a=0;GetCookie('g')?(GetCookie('g')==0?bc_g='m':bc_g='f'):bc_g='n';function parse_20(values){var pairs=values.split(/\./);var data={};var today=parseInt(new Date().valueOf()/ 1000);var str="";for(var i=0;i<pairs.length;i++){var pair=pairs[i].split('_');var delta_days=parseInt((today-pair[1])/ 86400);var date_type='s%d_d;s%d_w;s%d_m';if(delta_days>1)date_type='s%d_w;s%d_m';if(delta_days>7)date_type='s%d_m';data[pair[0]]=date_type;str+=date_type.replace(/%d/g,pair[0]);if(i!=pairs.length-1)str+=";";}
return str;}
var arrForScrollRefresh=[];function setReload_300x250(){var ctrack,i=0;ctrack=Math.round(new Date().getTime()/1000);$(window).focus(function(e){console.log('focus on window');var arrayOfSlots=[topSlot,topSlot2,topSlot3,topSlot4,topSlot5]
if(i==0){console.log('allow to refresh banners');var arrForRefresh=[];var ctrack_fcs=Math.round(new Date().getTime()/1000);var diff=ctrack_fcs-ctrack;console.log('diff '+diff);if(diff>120){ctrack=ctrack_fcs;arrForScrollRefresh=[];for(var j=0;j<arrayOfSlots.length;j++){if(arrayOfSlots[j]&&isElementInView(document.getElementById(arrayOfSlots[j].getSlotElementId()))){arrForRefresh.push(arrayOfSlots[j]);}else if(arrayOfSlots[j]){arrForScrollRefresh.push(arrayOfSlots[j]);}}
console.log('refresh banners:');console.log(arrForRefresh);googletag.pubads().refresh(arrForRefresh);i++;if(arrForScrollRefresh.length){console.log('set scroll on window');$(window).on("scroll",checkElementViewability);}
timeoutId=setTimeout(function(){return i=0;},120000);}}});}
function onGeoData(data){var ri,ci,ct;var skipCities={};var serveTo=[];var ctm={};for(ri=0;ri<data.g.regions.length;ri++){var cities=(data.g.regions[ri].cities);var region=(data.g.regions[ri].id);if(region)ctm[79]=region;for(ci=0;ci<cities.length;ci++){var city=(cities[ci].id);if(!skipCities[city.id])serveTo.push(city);}}
for(ct=1;ct<99;ct++){if(data.c[ct])ctm[ct]=data.c[ct];}
if(serveTo.length>0){for(var c=0;c<serveTo.length;c++){ctm[c+80]=serveTo[c];}}else{ctm[80]="noneGD";}
var slots=data.c;if(slots!=undefined&&typeof slots["20"]=="string"){ctm[20]=parse_20(slots["20"]);}
if('adriver_728x90'in window)adriver_728x90(ctm);if('adriver_300x100'in window)adriver_300x100(ctm);};var DateFormat={_dateNames:{ru:{M:["янв","фев","мар","апр","мая","июня","июля","авг","сен","окт","ноя","дек"],F:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],D:["вс","пн","вт","ср","чт","пт","сб"],l:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"]},ua:{M:["січ","лют","бер","кві","тра","чер","лип","сер","вер","жов","лис","гру"],F:["січня","лютого","березня","квітня","травня","червня","липня","серпня","вересня","жовтня","листопада","грудня"],D:["нд","пн","вв","ср","чт","пт","сб"],l:["неділя","понеділок","вівторок","середа","четвер","п'ятниця","субота"]}},dateFormat:function(date){var lang=GetCookie('news_lang');date=new Date(date?date*1000:null);var today=new Date();today.setMilliseconds(0);today.setSeconds(0);today.setMinutes(0);today.setHours(0);if(date.getTime()<today.getTime()){return date.getDate()+'&nbsp;'+DateFormat._dateNames[lang].M[date.getMonth()];}else{var m=date.getMinutes();var h=date.getHours();return(h>9?h:'0'+h)+':'+(m>9?m:'0'+m);}}};if(!jQuery.fn.reverse){jQuery.fn.reverse=[].reverse;}
var Columns={params:function(){var l_col=$('.'+ant.c31);var c_col=$('#feed');var r_col=$('.'+ant.c32);},clean:function(){Columns.clean=function(){};$('aside.left .commercial-left-block:visible').each(function(){if($(this).width()<10)$(this).remove();});$('aside.left .commercial-right-block:visible').each(function(){if($(this).width()<10)$(this).remove();});},check:function(){var c_col=$('#feed');if(!c_col.attr('_lock')){c_col.attr('_lock',"1");var l_col=$('.'+ant.c31);var r_col=$('.'+ant.c32);var c_h=c_col.offset().top+29+c_col.height();var tmp,list,l_s=true,r_s=true;tmp=l_col.offset().top+33;$('.'+ant.c31+' div['+ant.c41+'^="ecbr"] > *:first-child:visible').reverse().each(function(){var das=$(this).parent().is('[data-as]');if(c_h<(tmp+l_col.height())){if(!das){$(this).addClass('d-hide');}
l_s=false;}else{return false;}});tmp=r_col.offset().top+34;$('.'+ant.c32+' div['+ant.c41+'^="ecbr"] > *:first-child:visible').reverse().each(function(){var das=$(this).parent().is('[data-as]');if(c_h<(tmp+r_col.height())){if(!das){$(this).addClass('d-hide');}
r_s=false;}else{return false;}});c_h-=150;if(l_s){tmp=l_col.offset().top+33;$('.'+ant.c31+' div['+ant.c41+'^="ecbr"] > section:first-child:hidden').each(function(){if(c_h>=(tmp+l_col.height())){$(this).removeClass('d-hide');}else{return false;}});}
if(r_s){tmp=r_col.offset().top+34;$('.'+ant.c32+' div['+ant.c41+'^="ecbr"] > section:first-child:hidden').each(function(){if(c_h>=(tmp+r_col.height())){$(this).removeClass('d-hide');}else{return false;}});}
c_col.removeAttr('_lock');}}}
function getBase64(url,im){if(im&&url.indexOf('data:image')>-1&&url.indexOf('base64')>-1){return url;}else{var p=im?'AsI1':Math.round(Math.random()*9999999+73).toString(36);return Core.proxy+'?'+encodeURIComponent(btoa(p+':'+url.replace(/^(?:http[s]?:)?\/\//i,'')));}}
function aGo(url){return'//'+document.location.host+document.location.pathname+'?go='+encodeURIComponent(url);};function ecbrStart(id,json,custom,ws){if(adUkrNet&&json&&custom=='kinoafisha'){json=getBase64(json);$.ajax({type:'GET',crossDomain:true,dataType:'jsonp',url:json,success:function(data){data.id=id;data.ext=true;data.hCnt='';data.iCnt='';if(custom){if(custom=='kinoafisha'){Services.commercialKinoafisha(data);}else if(custom=='etarg'){Services.commercialEtarg(data);}}else{Services.commercial(data);}}});}else{$.ajax({type:'GET',crossDomain:true,dataType:'jsonp',url:json,success:function(data,textStatus,jqXHR){data.id=id;data.ext=true;data.hCnt='';data.iCnt='';if(custom){if(custom=='kinoafisha'){Services.commercialKinoafisha(data);}else if(custom=='etarg'){Services.commercialEtarg(data);}}else{Services.commercial(data);}
if(!adUkrNet&&jqXHR.status!==200){adEcbrDone++;if(adEcbrStart==adEcbrDone){setTimeout(function(){Services.rozetta();},500)}}},error:function(){if(!adUkrNet){adEcbrDone++;if(adEcbrStart==adEcbrDone){setTimeout(function(){Services.rozetta();},500)}}}});}};function collectCommercialData(id,json,url,custom,ws){globalCommercialData.push({'id':id,'json':json,'url':url,'custom':custom,'ws':ws})}
function go_search(){if($.trim($("#search-form #search-input").val())==""){alert((Core.searchlang==='ru')?'Введите пожалуйста слово для поиска!':'Введіть будь ласка слово для пошуку!');return false;}
$.ajax({type:'GET',url:'https://counter.ukr.net/lid/305/cnt.php',crossDomain:true,dataType:'JSONP'});var form=document.getElementById('search-form');var inpt=document.getElementById('search-input');var href=document.getElementById('search-href');href.target=form.target;href.href=form.action+'?q='+encodeURIComponent(form.elements['q'].value);if("click"in href){href.click();}else{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",true,true,window);href.dispatchEvent(e);}
return false;}
Fifa={fifaInterval:null,resultsInterval:null,fifaCount:0,fifa:function(){clearInterval(Fifa.fifaInterval);clearInterval(Fifa.fifaResultsInterval);Fifa.fifaCount=0;$.ajax({type:'GET',dataType:"JSON",url:Core.base+'news/main/sport/euro2020/block.'+Core.lang+'.json?_='+(new Date()).getTime(),success:function(data){var team1,team2,res,href,text;if(!data||!('status'in data)||data.status==0){$('body').removeClass('fifa-grid');$('body').removeClass('fifa-live');}else if(data.status==1){$('body').addClass('fifa-grid');$('body').removeClass('fifa-live');}else if(data.status==2){$('body').removeClass('fifa-grid');$('body').addClass('fifa-live');if(data.img.length==1){team1=data.img[0].cmd1;team2=data.img[0].cmd2;res=data.img[0].res;href=data.img[0].url;$('#uefa-live .team-left').html(team1);$('#uefa-live .team-right').html(team2);$('#uefa-live a').attr('href',href);$('#uefa-live').show();Fifa.fifaInterval=setInterval(function(){text=$('#uefa-live b').text();if(text=='Live'){$('#uefa-live b').text(res);}else{$('#uefa-live b').text('Live');}},5000)}else if(data.img.length>1){team1=data.img[Fifa.fifaCount].cmd1;team2=data.img[Fifa.fifaCount].cmd2;res=data.img[Fifa.fifaCount].res;href=data.img[Fifa.fifaCount].url;$('#uefa-live .team-left').html(team1);$('#uefa-live .team-right').html(team2);$('#uefa-live a').attr('href',href);$('body').addClass('fifa-live');setTimeout(function(){$('#uefa-live b').text(res);},5000)
Fifa.fifaCount++;Fifa.fifaInterval=setInterval(function(){if(Fifa.fifaCount>=data.img.length){Fifa.fifaCount=0;}
$('#uefa-live b').text('Live');team1=data.img[Fifa.fifaCount].cmd1;team2=data.img[Fifa.fifaCount].cmd2;res=data.img[Fifa.fifaCount].res;href=data.img[Fifa.fifaCount].url;$('#uefa-live .team-left').html(team1);$('#uefa-live .team-right').html(team2);$('#uefa-live a').attr('href',href);$('body').addClass('fifa-live');setTimeout(function(){$('#uefa-live b').text(res);},5000)
++Fifa.fifaCount;},10000);}}}});}};