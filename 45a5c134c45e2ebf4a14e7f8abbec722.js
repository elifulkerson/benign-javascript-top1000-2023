!function(){function trackNativeUpsellEvent(data){var tracker=window.ck_tracking_client||{},payload=data||{};tracker.logEvent(payload.eventType,payload.eventData)}function getNativeUpsellEvent(element){try{return JSON.parse(element.getAttribute("data-event-props"))}catch(err){return{}}}function nativeUpsellHandler(e){var nativeUpsellElement=document.querySelector(".nativeUpsell-container");if(nativeUpsellElement.classList.add("dn"),nativeUpsellElement.classList.remove("nativeUpsell-container"),trackNativeUpsellEvent(getNativeUpsellEvent(e.currentTarget)),nativeUpsellElement.querySelectorAll(".js-native-upsell-banner-close").forEach(function(element){element.removeEventListener("click",nativeUpsellHandler)}),window.location.pathname.indexOf("/reviews/credit-card/")>-1){var simulateResizeEvent=new Event("resize");window.dispatchEvent(simulateResizeEvent)}}function nativeUpsellInit(){var nativeUpsellElement=document.querySelector(".nativeUpsell-container"),nativeUpsellClickElements=nativeUpsellElement&&nativeUpsellElement.querySelectorAll(".js-native-upsell-banner-close")||[];if(nativeUpsellClickElements.length){trackNativeUpsellEvent(getNativeUpsellEvent(nativeUpsellElement)),nativeUpsellClickElements.forEach(function(element){element.addEventListener("click",nativeUpsellHandler)})}}function retry(fn,retries){return fn().catch(function(err){return retries<=0?Promise.reject(err):retry(fn,retries-1)})}function delay(ms){return new Promise(function(resolve){return setTimeout(resolve,ms)})}function isTrackingReady(){return new Promise(function(resolve,reject){window.ck_tracking_client?(nativeUpsellInit(),resolve()):reject(new Error("Tracking client not ready yet."))})}"undefined"!=typeof window&&retry(function(fn,ms){return function(){return fn().catch(function(err){return delay(ms).then(function(){return Promise.reject(err)})})}}(isTrackingReady,200),5).catch(function(err){console.log("Native Upsell Banner: tracking client not ready")})}();