(function(){var debug=false;var addListener=function(el,name,fn,useCapture){if(el.attachEvent){el.attachEvent("on"+name,fn);}else if(el.addEventListener){el.addEventListener(name,fn,!!useCapture);}else{el["on"+name]=fn}}
var ready=function(fn){if(!document.attachEvent){document.readyState!='loading'?fn():document.addEventListener('DOMContentLoaded',fn);}else{document.readyState=="complete"?fn():document.attachEvent('onreadystatechange',function(){if(document.readyState=='complete')fn();});}}
var URLEdit=function(url){if(!url)url=location.href;var getUrlParams=function(params){params=params.split("?");params=params.length>1?params[1]:params[0];params=params.split("&");if(params.length==1&&!params[0].length)return[];var ret=[];for(var i=0;i<params.length;i++){var params1=params[i];params1=params1.split("=");if(params1.length>1)params1=[decodeURIComponent(params1[0]),decodeURIComponent(params1.slice(1).join("="))];else params1=[decodeURIComponent(params1[0])];params[i]=params1;}
return params;}
var encodeParams=function(p){for(var i=0;i<p.length;i++){var p1=p[i];var p2=[encodeURIComponent(p1[0])];if(p1.length>1)p2.push(encodeURIComponent(p1[1]));p[i]=p2.join("=");}
return p.join("&");}
var parser=document.createElement('a');parser.setAttribute("href",url);this.protocol=parser.protocol.substring(0,parser.protocol.length-1);this.hostname=parser.hostname;this.port=parser.port;this.pathname=parser.pathname;if(this.pathname&&this.pathname.length&&this.pathname[0]!="/")this.pathname="/"+this.pathname;this.hash=parser.hash.substring(1);this.params=getUrlParams(parser.search);me=this;this.param=function(name,val){var found=false;for(var i=0;i<this.params.length;i++){var param1=this.params[i];if(param1[0]==name){param1[1]=val;found=true;}}
if(!found)this.params.push([name,val]);}
this.toString=function(){var ret=me.protocol+"://"+me.hostname;if(me.port&&me.port!="80"&&me.port!="443"&&me.port!="0")ret+=":"+me.port;ret+=me.pathname;if(me.params){var params1=encodeParams(me.params);if(params1.length>0)ret+="?"+params1;}
if(me.hash)ret+="#"+me.hash;return ret;}}
var LazyElements=function(args){this.elementsStart=[];this.callbacks=[];this.overscroll=0;this.needsFocus=false;var debug=false;var me=this;var skip=args&&args.skip?args.skip:0;var findPos=function(obj){var none=1000000000;if(!obj)return none;var curtop=0;if(obj.style.display=="none")return none;if(obj.offsetParent){do{if(obj.style.display=="none")return none;curtop+=obj.offsetTop;}while(obj=obj.offsetParent);}
return curtop;}
var binarySearch=function(comparator,filter){var low=0,high=this.length-1,i,comparison;while(comparator(this[i])!=0&&low<=high){i=Math.floor((low+high)/ 2);comparison=comparator(this[i]);if(comparison<0){low=i+1;continue;};if(comparison>0){high=i-1;continue;};}
var ret=[];i=low;while(i<=high&&comparator(this[i])==0){if(filter(this[i])){ret.push(i);}
i++;}
return ret;};var getScroll=function(win){if(!win)win=window;var doc=window.document;return{x:win.pageXOffset||doc.scrollLeft,y:win.pageYOffset||doc.scrollTop};};var getScreenBounds=function(){var scroll=getScroll();scroll=scroll.y||0;var min1=scroll-me.overscroll;var max1=scroll+window.innerHeight+me.overscroll;return[min1,max1];}
this.isVisible=function(el1){var visible=true;while(el1){if(el1.style.display=="none"){visible=false;break}
el1=el1.offsetParent;}
return visible;}
this.sort=function(){this.elementsStart.sort(function(el1,el2){return findPos(el1)-findPos(el2);});}
this.addElements=function(els,onlyVisible){var els1=[];for(var i=0;i<els.length;i++){var el1=els[i];if(this.isVisible(el1)){if(onlyVisible)el1.__lazyOnlyVisible=true;els1.push(el1);}}
this.elementsStart=this.elementsStart.concat(els1);this.sort();this.checkAppear();}
this.addAppearCallback=function(cb){this.callbacks.push(cb);}
this.setMininterval=function(min){this.min=min;}
this.setNeedsFocus=function(needsFocus){this.needsFocus=needsFocus;var me=this;if(needsFocus&&!me.__onFocusCB){me.__onFocusCB=addListener(document,"focus",function(){me.checkAppear();});}}
this.setOverscroll=function(overscroll){var before=this.overscroll||0;this.overscroll=overscroll;if(this.lastBounds){this.lastBounds[0]+=before;this.lastBounds[1]-=before;this.lastBounds[0]-=overscroll;this.lastBounds[1]+=overscroll;}}
this.checkAppear=function(){if(skip>0)return;if(!this.lastBounds)this.lastBounds=getScreenBounds();if(!this.min)return;var now=new Date().getTime();if(this.last&&(now-this.last)<this.min){var me=this;if(debug)console.log("timeout",this.timeout!==undefined);if(this.timeout===undefined){if(debug)console.log("aspetto",this.last+this.min-now);this.timeout=setTimeout(function(){delete me.timeout;me.checkAppear()},this.last+this.min-now);}
return;}
delete this.timeout;this.last=now;if(debug)console.log("checkAppear",new Date().toString());if(this.needsFocus&&(document.hasFocus&&!document.hasFocus()))return;var bounds=getScreenBounds();var min1=bounds[0];var max1=bounds[1];var lastBounds=this.lastBounds;this.lastBounds=[min1,max1];if(lastBounds&&!isNaN(lastBounds[0])&&lastBounds[0]<min1)min1=lastBounds[0];if(lastBounds&&!isNaN(lastBounds[1])&&lastBounds[1]>max1)max1=lastBounds[1];var elementsVisibile=[];var elementsHidden=[];this.sort();var aboveElements=binarySearch.call(this.elementsStart,function(el1){return 0;},function(el1){var pos1=findPos(el1);if(el1.__lazyOnlyVisible===true){return pos1>=min1&&pos1<=max1;}
else return pos1<=max1;});var removedEls=[];for(var i=aboveElements.length-1;i>=0;i--){var removed=this.elementsStart.splice(aboveElements[i],1)[0];removedEls.unshift(removed);}
for(var i=0;i<removedEls.length;i++){var removed=removedEls[i];for(var j=0;j<this.callbacks.length;j++){var cb=this.callbacks[j];try{cb(removed);}catch(e){};}}}
var addListener=function(el,name,fn){if(el.attachEvent){return el.attachEvent("on"+name,fn);}else if(el.addEventListener){return el.addEventListener(name,fn,0);}else{el["on"+name]=fn}}
var onScroll=function(cb,interval){var scrolled=false;if(!onScroll.callbacks){onScroll.callbacks=[];addListener(window,"scroll",function(){if(skip>0)skip--;else scrolled=true;});var last=null;var interval=interval||300;var scrollCallbacks=function(){if(scrolled&&(last==null||new Date().getTime()>(last+interval))){last=new Date().getTime();for(var i=onScroll.callbacks.length-1;i>=0;i--){var cb=onScroll.callbacks[i];try{cb();}catch(e){}}
scrolled=false;}
setTimeout(scrollCallbacks,interval);}
setTimeout(scrollCallbacks,interval);}
onScroll.callbacks.push(cb);}
this.onScroll=onScroll;this.checkOnScroll=function(interval){var me=this;onScroll(function(){me.checkAppear();},interval);}};var fillCache=function(mapping,cache){if(!cache.mappingArray){if(mapping instanceof Array){cache.mappingArray=mapping;}else{var arr=[];for(var k in mapping){if(mapping[k]instanceof Array)arr.push([k].concat(mapping[k]));else arr.push([k,mapping[k]]);}
cache.mappingArray=arr;}}
if(!cache.type){cache.type={};for(var i=0;i<cache.mappingArray.length;i++){var m1=cache.mappingArray[i];if(m1[2])cache.type[""+i]=m1[2];else cache.type[""+i]="link";}}
if(!cache.args){cache.args={};for(var i=0;i<cache.mappingArray.length;i++){var m1=cache.mappingArray[i];cache.args[""+i]=m1.slice(3);}}
if(!cache.mapping){cache.mapping={};for(var i=0;i<cache.mappingArray.length;i++){var m1=cache.mappingArray[i];var selectors=m1[1];var elements=document.querySelectorAll(selectors);if(!elements)elements=[];var args=cache.args[""+i];if(args&&args[0]&&args[0].reset){var elements1=[];var elements2=[];for(var j=0;j<elements.length;j++){var el1=elements[j];var el2=elements[(j+1)%elements.length];elements2.push(el1);if(args[0].reset(el1,el2)){elements1.push(elements2);elements2=[];}}
elements1.push(elements2);elements=elements1;}else elements=[elements];cache.mapping[""+i]=elements;}}}
var is=function(el,elements){for(var i=0;i<elements.length;i++){var res1=elements[i];if(res1===el)return(i+1);}
return 0;}
var getRefParameter=function(el,mapping,cache,type){fillCache(mapping,cache);for(var i=0;i<cache.mappingArray.length;i++){var ma1=cache.mappingArray[i];var k=ma1[0];if(type&&(!ma1[2]||ma1[2]!=type))continue;var elements1=cache.mapping[""+i];for(var j=0;j<elements1.length;j++){var elements=elements1[j];var idx=is(el,elements);if(elements&&idx){return(elements.length>1||window.refAnchors===false)?{ref:k,refIdx:""+i,idx:idx}:{ref:k,refIdx:i};}}}
return null;}
var conditionFulfilled=function(found,cache){if(!found||found.refIdx===undefined||!cache||!cache.mappingArray)return false;var arr1=cache.mappingArray[found.refIdx];if(arr1[2]=="appear")var params=arr1[3];else if(arr1[2]=="click")var params=arr1[4];else return true;if(!params||!params.condition||params.condition.constructor!==Function)return true;else{try{return params.condition();}
catch(e){return false;}}}
var checkSuffix=function(found,cache){if(!found||found.refIdx===undefined||!cache||!cache.mappingArray)return null;var arr1=cache.mappingArray[found.refIdx];if(arr1[2]=="appear")var params=arr1[3];else if(arr1[2]=="click")var params=arr1[4];else return null;if(!params||!params.suffix||params.suffix.constructor!==Function)return null;else{try{var suff=params.suffix();return suff;}
catch(e){}}
return null;}
var checkTransform=function(found,cache,el,a1){var args=cache.args[found.refIdx];var transform=null;if(args&&args[0]&&args[0].transform)transform=args[0].transform;if(args&&args[1]&&args[1].transform)transform=args[1].transform;if(transform)transform(found,cache,el,a1);}
var querySelectorScoped=function(el,selector){var id=el.id;var hadid=true;if(!id){hadid=false;id="querySelectorScoped";el.setAttribute("id",id);}
selector=selector.split(",");for(var i=0;i<selector.length;i++)selector[i]="#"+id+" "+selector[i];selector=selector.join(",");var ret=document.querySelectorAll(selector);if(!hadid)el.removeAttribute("id");return ret;}
var addRef=function(url,refP,refA,cache){if(!url||!url.match(/(https?:)?\/\//))return url;var params=null;if(cache&&refP&&cache.mappingArray&&cache.mappingArray[refP.refIdx]&&cache.mappingArray[refP.refIdx][3]){params=cache.mappingArray[refP.refIdx][3];}
if(window.refVersion===undefined){refP=refP.idx&&refP.ref+refP.idx||refP.ref;if(refA&&window.refAnchors!==false)refP+="-"+refA;var pageType=window.pageType||window.webtrekkPageConfig&&webtrekkPageConfig.pageType;var t=""
if(pageType=="dettaglio_articolo"||pageType=="dettaglio_content")t="n";else if(pageType=="dettaglio_foto")t="f";else if(pageType=="dettaglio_video")t="v";refP=t+refP;}
else refP=refP.ref;if(window.refPrefix)refP=refPrefix+refP;var pname="ref";if(params&&params.param)pname=params.param;var u=new URLEdit(url);u.param(pname,refP);return u.toString();}
var addRefParameter=function(ev){var mapping=window.refMappingZone;if(mapping&&(ev.target||ev.srcElement)){var changed=false;var el=ev.target||ev.srcElement;var href1=null;var a1=null;var anchors=[];var found=null;var foundEl=null;var cache={};while(el){var href=el.nodeName.toLowerCase()=="a"?el.getAttribute("href"):null;if(!href1&&href){a1=el;var href1=href;}
if(!found){var refP=getRefParameter(el,mapping,cache)
if(refP){anchors=querySelectorScoped(el,"a");found=refP;foundEl=el;}}
if(href1&&found)break;el=el.parentElement;}
if(found&&cache.type[found.refIdx]=="click"){var unload=cache.args[found.refIdx]&&cache.args[found.refIdx][0]&&cache.args[found.refIdx][0]=="unload"||undefined;checkTransform(found,cache,foundEl);if(window.WebTrekkUtil&&WebTrekkUtil.sendEvent)WebTrekkUtil.sendEvent(found.ref,undefined,undefined,unload);}else if(found&&href1){var a1idx=null;for(var i=0;i<anchors.length;i++)if(anchors[i]===a1){a1idx=(i+1);break;}
checkTransform(found,cache,foundEl,a1);if(found.ref){a1.setAttribute("href",addRef(href1,found,a1idx,cache));}}}}
var cache={};var checkNewElements=function(){var mapping=window.refMappingZone;if(mapping){cache={};var found=getRefParameter(document.body,mapping,cache);var appearKeys=[];for(var i=0;i<cache.mappingArray.length;i++){var refIdx=i+"";if(cache.type[refIdx]=="appear"){appearKeys.push(i);}}
var newels=[];for(var i=0;i<appearKeys.length;i++){var ak1=appearKeys[i];var elements1=cache.mapping[ak1+""];for(var j=0;j<elements1.length;j++){var elements=elements1[j];for(var k=0;k<elements.length;k++){var el1=elements[k];if(!el1.getAttribute("data-ctr-appear")&&!el1.getAttribute("data-ctr-ref")){el1.setAttribute("data-ctr-ref",cache.mappingArray[ak1][0]);newels.push(el1);}}}}
LazyElements.addElements(newels,true);}};ready(function(){addListener(document.body,"mousedown",addRefParameter,true);});LazyElements=new LazyElements({skip:1})
LazyElements.setNeedsFocus(true);LazyElements.setMininterval(5000);LazyElements.checkOnScroll(1000)
LazyElements.addAppearCallback(function(el){el.setAttribute("data-ctr-appear",true);var mapping=window.refMappingZone;if(mapping){var found=getRefParameter(el,mapping,cache,"appear");if(conditionFulfilled(found,cache)){var suff=checkSuffix(found,cache);if(suff!=null&&found.ref){found.ref+=suff;}
checkTransform(found,cache,el);var name=found.ref;if(window.WebTrekkUtil&&WebTrekkUtil.sendEvent&&name)WebTrekkUtil.sendEvent(name);}}})
addListener(window,"load",checkNewElements);window.refTracking={}
window.refTracking.checkNewElements=function(){setTimeout(checkNewElements,3000);};})();;

(function(){'use strict';if(typeof window!=='object'){return;}
if('IntersectionObserver'in window&&'IntersectionObserverEntry'in window&&'intersectionRatio'in window.IntersectionObserverEntry.prototype){if(!('isIntersecting'in window.IntersectionObserverEntry.prototype)){Object.defineProperty(window.IntersectionObserverEntry.prototype,'isIntersecting',{get:function(){return this.intersectionRatio>0;}});}
return;}
var document=window.document;var registry=[];function IntersectionObserverEntry(entry){this.time=entry.time;this.target=entry.target;this.rootBounds=entry.rootBounds;this.boundingClientRect=entry.boundingClientRect;this.intersectionRect=entry.intersectionRect||getEmptyRect();this.isIntersecting=!!entry.intersectionRect;var targetRect=this.boundingClientRect;var targetArea=targetRect.width*targetRect.height;var intersectionRect=this.intersectionRect;var intersectionArea=intersectionRect.width*intersectionRect.height;if(targetArea){this.intersectionRatio=Number((intersectionArea / targetArea).toFixed(4));}else{this.intersectionRatio=this.isIntersecting?1:0;}}
function IntersectionObserver(callback,opt_options){var options=opt_options||{};if(typeof callback!='function'){throw new Error('callback must be a function');}
if(options.root&&options.root.nodeType!=1){throw new Error('root must be an Element');}
this._checkForIntersections=throttle(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT);this._callback=callback;this._observationTargets=[];this._queuedEntries=[];this._rootMarginValues=this._parseRootMargin(options.rootMargin);this.thresholds=this._initThresholds(options.threshold);this.root=options.root||null;this.rootMargin=this._rootMarginValues.map(function(margin){return margin.value+margin.unit;}).join(' ');}
IntersectionObserver.prototype.THROTTLE_TIMEOUT=100;IntersectionObserver.prototype.POLL_INTERVAL=null;IntersectionObserver.prototype.USE_MUTATION_OBSERVER=true;IntersectionObserver.prototype.observe=function(target){var isTargetAlreadyObserved=this._observationTargets.some(function(item){return item.element==target;});if(isTargetAlreadyObserved){return;}
if(!(target&&target.nodeType==1)){throw new Error('target must be an Element');}
this._registerInstance();this._observationTargets.push({element:target,entry:null});this._monitorIntersections();this._checkForIntersections();};IntersectionObserver.prototype.unobserve=function(target){this._observationTargets=this._observationTargets.filter(function(item){return item.element!=target;});if(!this._observationTargets.length){this._unmonitorIntersections();this._unregisterInstance();}};IntersectionObserver.prototype.disconnect=function(){this._observationTargets=[];this._unmonitorIntersections();this._unregisterInstance();};IntersectionObserver.prototype.takeRecords=function(){var records=this._queuedEntries.slice();this._queuedEntries=[];return records;};IntersectionObserver.prototype._initThresholds=function(opt_threshold){var threshold=opt_threshold||[0];if(!Array.isArray(threshold))threshold=[threshold];return threshold.sort().filter(function(t,i,a){if(typeof t!='number'||isNaN(t)||t<0||t>1){throw new Error('threshold must be a number between 0 and 1 inclusively');}
return t!==a[i-1];});};IntersectionObserver.prototype._parseRootMargin=function(opt_rootMargin){var marginString=opt_rootMargin||'0px';var margins=marginString.split(/\s+/).map(function(margin){var parts=/^(-?\d*\.?\d+)(px|%)$/.exec(margin);if(!parts){throw new Error('rootMargin must be specified in pixels or percent');}
return{value:parseFloat(parts[1]),unit:parts[2]};});margins[1]=margins[1]||margins[0];margins[2]=margins[2]||margins[0];margins[3]=margins[3]||margins[1];return margins;};IntersectionObserver.prototype._monitorIntersections=function(){if(!this._monitoringIntersections){this._monitoringIntersections=true;if(this.POLL_INTERVAL){this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL);}
else{addEvent(window,'resize',this._checkForIntersections,true);addEvent(document,'scroll',this._checkForIntersections,true);if(this.USE_MUTATION_OBSERVER&&'MutationObserver'in window){this._domObserver=new MutationObserver(this._checkForIntersections);this._domObserver.observe(document,{attributes:true,childList:true,characterData:true,subtree:true});}}}};IntersectionObserver.prototype._unmonitorIntersections=function(){if(this._monitoringIntersections){this._monitoringIntersections=false;clearInterval(this._monitoringInterval);this._monitoringInterval=null;removeEvent(window,'resize',this._checkForIntersections,true);removeEvent(document,'scroll',this._checkForIntersections,true);if(this._domObserver){this._domObserver.disconnect();this._domObserver=null;}}};IntersectionObserver.prototype._checkForIntersections=function(){var rootIsInDom=this._rootIsInDom();var rootRect=rootIsInDom?this._getRootRect():getEmptyRect();this._observationTargets.forEach(function(item){var target=item.element;var targetRect=getBoundingClientRect(target);var rootContainsTarget=this._rootContainsTarget(target);var oldEntry=item.entry;var intersectionRect=rootIsInDom&&rootContainsTarget&&this._computeTargetAndRootIntersection(target,rootRect);var newEntry=item.entry=new IntersectionObserverEntry({time:now(),target:target,boundingClientRect:targetRect,rootBounds:rootRect,intersectionRect:intersectionRect});if(!oldEntry){this._queuedEntries.push(newEntry);}else if(rootIsInDom&&rootContainsTarget){if(this._hasCrossedThreshold(oldEntry,newEntry)){this._queuedEntries.push(newEntry);}}else{if(oldEntry&&oldEntry.isIntersecting){this._queuedEntries.push(newEntry);}}},this);if(this._queuedEntries.length){this._callback(this.takeRecords(),this);}};IntersectionObserver.prototype._computeTargetAndRootIntersection=function(target,rootRect){if(window.getComputedStyle(target).display=='none')return;var targetRect=getBoundingClientRect(target);var intersectionRect=targetRect;var parent=getParentNode(target);var atRoot=false;while(!atRoot){var parentRect=null;var parentComputedStyle=parent.nodeType==1?window.getComputedStyle(parent):{};if(parentComputedStyle.display=='none')return;if(parent==this.root||parent==document){atRoot=true;parentRect=rootRect;}else{if(parent!=document.body&&parent!=document.documentElement&&parentComputedStyle.overflow!='visible'){parentRect=getBoundingClientRect(parent);}}
if(parentRect){intersectionRect=computeRectIntersection(parentRect,intersectionRect);if(!intersectionRect)break;}
parent=getParentNode(parent);}
return intersectionRect;};IntersectionObserver.prototype._getRootRect=function(){var rootRect;if(this.root){rootRect=getBoundingClientRect(this.root);}else{var html=document.documentElement;var body=document.body;rootRect={top:0,left:0,right:html.clientWidth||body.clientWidth,width:html.clientWidth||body.clientWidth,bottom:html.clientHeight||body.clientHeight,height:html.clientHeight||body.clientHeight};}
return this._expandRectByRootMargin(rootRect);};IntersectionObserver.prototype._expandRectByRootMargin=function(rect){var margins=this._rootMarginValues.map(function(margin,i){return margin.unit=='px'?margin.value:margin.value*(i%2?rect.width:rect.height)/ 100;});var newRect={top:rect.top-margins[0],right:rect.right+margins[1],bottom:rect.bottom+margins[2],left:rect.left-margins[3]};newRect.width=newRect.right-newRect.left;newRect.height=newRect.bottom-newRect.top;return newRect;};IntersectionObserver.prototype._hasCrossedThreshold=function(oldEntry,newEntry){var oldRatio=oldEntry&&oldEntry.isIntersecting?oldEntry.intersectionRatio||0:-1;var newRatio=newEntry.isIntersecting?newEntry.intersectionRatio||0:-1;if(oldRatio===newRatio)return;for(var i=0;i<this.thresholds.length;i++){var threshold=this.thresholds[i];if(threshold==oldRatio||threshold==newRatio||threshold<oldRatio!==threshold<newRatio){return true;}}};IntersectionObserver.prototype._rootIsInDom=function(){return!this.root||containsDeep(document,this.root);};IntersectionObserver.prototype._rootContainsTarget=function(target){return containsDeep(this.root||document,target);};IntersectionObserver.prototype._registerInstance=function(){if(registry.indexOf(this)<0){registry.push(this);}};IntersectionObserver.prototype._unregisterInstance=function(){var index=registry.indexOf(this);if(index!=-1)registry.splice(index,1);};function now(){return window.performance&&performance.now&&performance.now();}
function throttle(fn,timeout){var timer=null;return function(){if(!timer){timer=setTimeout(function(){fn();timer=null;},timeout);}};}
function addEvent(node,event,fn,opt_useCapture){if(typeof node.addEventListener=='function'){node.addEventListener(event,fn,opt_useCapture||false);}
else if(typeof node.attachEvent=='function'){node.attachEvent('on'+event,fn);}}
function removeEvent(node,event,fn,opt_useCapture){if(typeof node.removeEventListener=='function'){node.removeEventListener(event,fn,opt_useCapture||false);}
else if(typeof node.detatchEvent=='function'){node.detatchEvent('on'+event,fn);}}
function computeRectIntersection(rect1,rect2){var top=Math.max(rect1.top,rect2.top);var bottom=Math.min(rect1.bottom,rect2.bottom);var left=Math.max(rect1.left,rect2.left);var right=Math.min(rect1.right,rect2.right);var width=right-left;var height=bottom-top;return(width>=0&&height>=0)&&{top:top,bottom:bottom,left:left,right:right,width:width,height:height};}
function getBoundingClientRect(el){var rect;try{rect=el.getBoundingClientRect();}catch(err){}
if(!rect)return getEmptyRect();if(!(rect.width&&rect.height)){rect={top:rect.top,right:rect.right,bottom:rect.bottom,left:rect.left,width:rect.right-rect.left,height:rect.bottom-rect.top};}
return rect;}
function getEmptyRect(){return{top:0,bottom:0,left:0,right:0,width:0,height:0};}
function containsDeep(parent,child){var node=child;while(node){if(node==parent)return true;node=getParentNode(node);}
return false;}
function getParentNode(node){var parent=node.parentNode;if(parent&&parent.nodeType==11&&parent.host){return parent.host;}
if(parent&&parent.assignedSlot){return parent.assignedSlot.parentNode;}
return parent;}
window.IntersectionObserver=IntersectionObserver;window.IntersectionObserverEntry=IntersectionObserverEntry;}());;
(function(){window.home=function(){utils.main();hpTracking();console.log('%c Home Library Loaded 🚀','background: #f6f6f6; color: #000; padding: 4px 6px 4px 0;');}})();var hpTracking=function(){var typeClasses=[["*","BG"],[".is-soft-news","BS"],[".is-hard-news","BH"],[".is-live-news","BL"],[".from-section, .from-sport, .block__layout-magazine","VS"],[".block__layout-opinions","BC"],[".is-postit","BI"],[".is-audio, .block__layout-audio","BP"],[".block__layout-newsletters","BN"]]
var subElement=[[".entry__media","F"],[".entry__title","T1"],[".entry__summary","T2"],[".entry__links","L"]];var mob="";if(typeof manual_articles!=='undefined'){const getCookieValue=(name)=>(document.cookie.match('(^|;)\\s*'+name+'\\s*=\\s*([^;]+)')?.pop()||'')
let segment=getCookieValue("gd-frm-abtest");segment=segment==null?"":"-"+segment;mob="-mob"+segment;}
var transform=function(data,cache,el,a1){var ref=data.ref;var idx=data.idx||1;var entry=a1.closest(".entry");var eidx=entry.getAttribute("data-sindex");var blockIndex=el.getAttribute("data-bindex");var blockId=el.getAttribute("data-bid");eidx=eidx?"-S"+parseInt(eidx):"";blockId=blockId&&(blockId!=0)?"-I"+parseInt(blockId):"";var type;if(typeClasses){for(var i=0;i<typeClasses.length;i++){if(el.matches(typeClasses[i][0])){type="-"+typeClasses[i][1];break;}}}
var subel="";if(subElement){for(var i=0;i<subElement.length;i++){var subtype=a1.closest(subElement[i][0]);if(subtype){subel=subElement[i][1]
if(subElement[i][2])
subel=subElement[i][2](a1,subel);subel="-"+subel;break;}}}
data.ref=ref+type+blockId+"-P"+idx+eidx+subel+mob;}
var transform1=function(data){var ref=data.ref;data.ref=ref+mob;}
var transform2=function(data,cache,el,a1){var ref=data.ref;var child=a1.parentNode;var parent=child.parentNode;var idx=Array.prototype.indexOf.call(parent.children,child);data.ref=ref+idx+mob;}
var args={transform:transform};var args1={transform:transform1};var args2={transform:transform2};window.refVersion=2;window.refPrefix="RH";window.refMappingZone=[["HD-L",".page-header__middle__center h1, .rep-slim-header__logo","link",args1],["HD-M",".rep-left-nav","link",args1],["HD-MS",".main-navigation__panel","link",args1],["HD-T",".hot-topics","link",args2],["HD-S",".rep-slim-header__search","link",args1],["HD-U","#account-data-container","link",args1],["HD-R",".rep-slim-header__item--premium, .rep-slim-header__top__premium","link",args1],["HD-P",".rep-slim-header__item--subscribe, .rep-slim-header__top__subscribe, .rep-slim-header__item--claim","link",args1],["HD-G",".rep-slim-header__item--smile","link",args1],["FT","#rep-page-footer","link",args1],["WD-WB",".widget-blog","link",args1],["WD-WN",".widget-network","link",args1],["WD-WM",".widget-meteo","link",args1],["WD-WO",".widget-oroscopo","link",args1],["WD-WI",".widget-iniziative-editoriali","link",args1],["WD-WP",".widget-guide-rep","link",args1],["WD-WE",".widget-guide-espresso","link",args1],["WD-WL",".box-miolibro","link",args1],["WD-WG",".widget-giochi","link",args1],["WD-WD",".widget-dizionario","link",args1],["VS-BE",".widget-partner.from-espresso","link",args1],["VS-BM",".widget-partner.from-mashable","link",args1],["VS-BU",".widget-partner.from-huffingtonpost","link",args1],["VS-BB",".widget-partner.from-businessinsider","link",args1],["PS",".block__layout-live-video","link",args1],["UO-UO",".breaking-news","link",args1],["UO",".block__layout-audio","link",args],["EX",".block[data-zona='first_page_top_super']","link",args],["LF",".block[data-zona='first_page_left_top_super']","link",args],["RT",".block[data-zona='first_page_right_top_super'], .block[data-zona='first_page_right_bottom_top_super']","link",args],["CV",".block[data-zona='first_page_mid_super']","link",args],["LM",".block[data-zona='first_page_left_top']","link",args],["RM",".block[data-zona='first_page_right_top']","link",args],["CV",".block[data-zona='first_page_mid_']","link",args],["VS",".block[data-zona='first_page_top']","link",args],["LB",".block[data-zona='first_page_left']","link",args],["RB",".block[data-zona='first_page_right'], .block[data-zona='first_page_right_bottom']","link",args],["VB",".block[data-zona='first_page_bottom']","link",args],["VB",".block[data-zona='pillar']","link",args],["PF",".block[data-zona='pre_footer']","link",args],["FRD","gdwc-recommendations","link",args]];}
var utils={main:function(){this.browserDetect();this.sidebarVideo();this.lazyHtml();if(!window.facet||window.facet!="True"){this.slimHeaderHome();this.mainNavigation();}},browserDetect:function(){document.getElementsByTagName("HTML")[0].classList.remove("no-js");var ua=window.navigator.userAgent;var isIe=ua.indexOf('Trident/');if(isIe>0){document.getElementsByTagName("HTML")[0].classList.add("is-ie");}},slimHeaderHome:function(){if(window.matchMedia("(min-width: 768px)").matches){var slim=document.querySelector('#rep-slim-header');var header=document.querySelector('.page-header');if(slim&&header){var observer=new IntersectionObserver(function(entries,observer){entries.forEach(function(entry){if(entry.intersectionRatio>0){slim.classList.remove('is-sticky');}else{slim.classList.add('is-sticky');}});});observer.observe(header);}}},lazyHtml:function(){try{var targets=document.querySelectorAll('.lazy-html');var io=new IntersectionObserver(function(entries,observer){entries.forEach(function(entry){if(entry.intersectionRatio>0){xhrLoader(entry.target);observer.unobserve(entry.target);}});},{rootMargin:"0px 0px 500px 0px"});for(i=0;i<targets.length;i++){io.observe(targets[i]);};xhrLoader=function(id){var t=id;var t_url=t.dataset.src;var xhr=new XMLHttpRequest();xhr.open("GET",t_url);xhr.onreadystatechange=function(e){if(xhr.readyState==4&&xhr.status==200){t.innerHTML=xhr.responseText;t.classList.remove('lazy-html');var allScripts=t.getElementsByTagName('script');for(var n=0;n<allScripts.length;n++){eval(allScripts[n].innerHTML);if(allScripts[n].src!=null){var script=document.createElement("script");script.src=allScripts[n].src;document.body.appendChild(script);}}
t.removeAttribute('style');}
if(xhr.readyState==4&&xhr.status==404){console.error("Errore: ",xhr.statusText);}};xhr.send();}}catch(e){}},mainNavigation:function(){try{const mainNav=document.querySelector(".main-navigation");const details=mainNav.querySelectorAll("details");const summaryClass=".main-navigation__tab";mainNav.addEventListener("click",(e)=>{if(e.target.matches(summaryClass)){details.forEach((detail)=>{if(detail!==e.target.parentNode){detail.removeAttribute("open");}});}})}catch(error){}},sidebarVideo:function(){if(window.matchMedia('(max-width: 767px)').matches){var sidebarVideo=document.querySelector('[data-tb-region="first_page_right_top_super-1"]');var hook=document.querySelector('[data-tb-region="first_page_left_top_super-3"]');if(sidebarVideo&&hook){sidebarVideo.parentNode.removeChild(sidebarVideo);hook.after(sidebarVideo);}}}};
;window.kwait=window.kwait||[];kwait.push(['call',"home_js"]);