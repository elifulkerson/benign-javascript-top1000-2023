var DFP_SLOTS=[],DFP=function(){var t=function(){googletag.cmd.push(function(){googletag.pubads().disableInitialLoad(),googletag.enableServices()})},e=function(t,e,i){var a="",n=d(t);return a=""!=e&&""!=i?a+'<div id="'+n+'" class="dfp_ad" style="display:none;" >':a+'<div id="'+n+'" class="dfp_ad" >',a+="</div>"},i=0,a=function(t,e){var a=d(e);googletag.cmd.push(function(){void 0!==t.keywords&&0!=t.keywords.length?DFP_SLOTS[i-1]=googletag.defineSlot("/"+DFP_CODE+"/"+t.ad_unit,t.ad_size,a).addService(googletag.pubads()).setTargeting("keyword",t.keywords).setTargeting("ad_pt",t.moat_type).setTargeting("ad_pos",t.moat_pos).setTargeting("site_id","GMA_Entertainment"):void 0!==t.outofpage&&!0===t.outofpage?(console.log("/"+DFP_CODE+"/"+t.ad_unit,a,t),DFP_SLOTS[i-1]=googletag.defineOutOfPageSlot("/"+DFP_CODE+"/"+t.ad_unit,a).addService(googletag.pubads()).setTargeting("ad_pt",t.moat_type).setTargeting("ad_pos",t.moat_pos).setTargeting("site_id","GMA_Entertainment"),googletag.pubads().addEventListener("slotRenderEnded",function(t){t.slot.getSlotElementId()==a&&($("#"+a).children().css({height:"100%",width:"100%"}),$("#"+a).children().children().css({position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:9999}),$("#"+a).children().children().css("z-index",9999))})):DFP_SLOTS[i-1]=googletag.defineSlot("/"+DFP_CODE+"/"+t.ad_unit,t.ad_size,a).addService(googletag.pubads()).setTargeting("ad_pt",t.moat_type).setTargeting("ad_pos",t.moat_pos).setTargeting("site_id","GMA_Entertainment"),"undefined"!=typeof MoatYieldIntelligence?(MoatYieldIntelligence.dfpAdsDisplayCallback.push(function(){googletag.display(a)}),MoatYieldIntelligence.render()):googletag.display(a),googletag.pubads().refresh([DFP_SLOTS[i-1]])}),i++},d=function(t){return"div-dfp-"+t},n=function(){var t=$(window).width();setInterval(function(){var e=$(".dfp:visible");e.length<=0||e.each(function(e,i){DFP.total=DFP.total+1;var a=$(this);if(console.info(a),void 0!==a.visible&&a.visible(!0)){a.removeClass("dfp"),a.addClass("dfped");var d=$(this).attr("dfp-ad-unit"),n=$(this).attr("dfp-ad-sizes"),s=$(this).attr("dfp-ad-keywords"),o=$(this).attr("dfp-ad-outofpage"),r=$(this).attr("dfp-type"),p=$(this).attr("dfp-pos");if(""!=d){var l,h,u=ad_sizes=JSON.parse(l=n),f=u,g=f[0],c=f[1],v=d,m=[],D=[];a.hasClass("mobile")&&a.parent().hasClass("mrec")&&(m.push(u),m.forEach(function(e,i){var d=parseInt($(".col-xs-12").css("padding-left"));h=a.width()<t?a.width()+2*d:a.width(),e.forEach(function(t,e){h<250&&(h=250),h>=t[0]&&D.push(t)})}),u=D);var P=DFP.template({ad_unit:v,ad_size:u,tag:DFP.total,height:c,width:g});a.height(c),a.width(g),a.html(P),void 0!==s&&(s=(s=s.replace("[","")).replace("]","")),DFP.publish({ad_unit:v,ad_size:u,tag:DFP.total,height:c,width:g,outofpage:void 0!==o,keywords:void 0===s?[]:s.split(","),moat_type:void 0===r?"":r,moat_pos:void 0===p?"":p},DFP.total),a.height(""),a.width(""),a.children().height(""),a.children().width("")}}})},500)},s=function(t){t.html(""),t.removeClass("dfped"),t.addClass("dfp")};return{site:"",page:"",slots:[],total:0,help:function(){console.log('DFP.init({ ad_unit: DFP.get_ad("mrect1") , ad_size: [300, 250], tag: Unique Tag });'),console.log("DFP.template( Unique Tag );"),console.log("DFP.publish( Unique Tag );")},init:function(){t()},template:function(t){return e(t.tag,t.height,t.width)},publish:function(t,e){a(t,e)},propagate:function(){t(),n()},removeAD:function(t){s(t)},sizes:{}}}();$(document).ready(function(){DFP.propagate()}); 