(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2338],{6636:function(e){var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=t},1048:function(e){!function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],s=0;s<4;s++)8*r+6*s<=8*e.length?n.push(t.charAt(i>>>6*(3-s)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(r))>>>6-2*i);return n}};e.exports=n}()},72338:function(e,t,n){"use strict";n.d(t,{ZP:function(){return d}});var r=n(73176),i=n(77474),s=n(87031),o=n(30703);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l,c,g,h=n(58101);!function(e){e[e.Paused=2]="Paused",e[e.Stopped=3]="Stopped"}(l||(l={})),function(e){e.AccountType="account_type",e.Language="language",e.Location="location",e.LoggedIn="logged_in",e.Mobile="is_mobile"}(c||(c={})),function(e){e.UserId="cuid",e.VUID="vuid",e.Other="other"}(g||(g={}));var p={inputs:null,primaryUnit:null,namespace:null,experiment:null,salt:"",availableSegments:{},segmentAllocations:{}},f="_abexps",d=function(){function e(t,n){(0,i.Z)(this,e),(0,o.Z)(this,"currentTest",null),(0,o.Z)(this,"runningTests",{}),(0,o.Z)(this,"debugMode",!1),(0,o.Z)(this,"user",void 0),(0,o.Z)(this,"tests",void 0),(0,o.Z)(this,"assignments",{}),this.user=t,this.tests=n}return(0,s.Z)(e,[{key:"getTestValueFromABLincoln",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.currentTest=null,!this.tests[e])return this.logIfDebug('ABLincoln.getTest: Test "'+e+'" not created in Modworld'),n;this.currentTest=e,this.logIfDebug('ABLincoln.getTest: Loading test "'+e+'"'),this.runningTests[e]||(this.runningTests[e]=this.createTest(e));var r=this.runningTests[e],i=this.getOverride(t);if(null!==i)return this.logIfDebug('ABLincoln.get: Override set for "'+t+'", returning "'+i+'"'),i;if(null===r.inputs)throw new Error("Must set test inputs via setInputs() before loading a parameter.");return r.experiment=this.getExperimentForTest(r.namespace),r.experiment?(this.logIfDebug("ABLincoln.get: Assigned to experiment with id "+r.experiment.id),this.userInSegment()?(r.salt=r.namespace.name+"."+r.experiment.name,"vuid"===r.namespace.input?this.getParameterByVUID(t,n):this.getTreatmentForExperiment(t,n)):(this.logIfDebug('ABLincoln.get: User not in segment, returning default "'+n+'"'),n)):(this.logIfDebug('ABLincoln.get: Not bucketed to an experiment, returning default "'+n+'"'),r.experiment=null,n)}},{key:"getTestValue",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e+t;if(!this.assignments[r])try{this.assignments[r]=this.getTestValueFromABLincoln(e,t,n)}catch(s){var i;return console.error(s.toString()),null===(i=window.newrelic)||void 0===i||i.noticeError(s,{component:"ABLincoln"}),n}return this.assignments[r]}},{key:"setInputs",value:function(e){if(null===this.currentTest)return this.logIfDebug("ABLincoln.setInputs: No test set, returning"),this;var t=this.runningTests[this.currentTest];for(var n in t.inputs=e,t.inputs)if(t.inputs.hasOwnProperty(n)){t.primaryUnit=n;break}return this.logIfDebug("ABLincoln.setInputs: Inputs set to "+JSON.stringify(e)),this.logIfDebug('ABLincoln.setInputs: Primary Unit set to "'+t.primaryUnit+'"'),this}},{key:"setDebug",value:function(e){return this.debugMode=e,console.log('ABLincoln.setDebug: Debug mode set to "'+e+'"'),this}},{key:"sendTrackingPixelRequest",value:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));var r="/ablincoln/tracking_pixel?"+t.join("&"),i="function"===typeof navigator.sendBeacon&&navigator.sendBeacon.bind(navigator);try{if(!i)throw new Error("Expected navigator.sendBeacon to be a function, instead received ".concat(typeof navigator.sendBeacon));i(r)}catch(s){console.error(s),(new Image).src=r}}},{key:"getExperimentForTest",value:function(e){if(!this.currentTest)throw new Error("No test was selected before getting the experiment for namespace: ".concat(e.name));var t=this.runningTests[this.currentTest];if(t.experiment)return this.logIfDebug("ABLincoln.getExperimentForTest: Experiment already set, returning"),t.experiment;for(var n=0;n<t.numSegments;n+=1)t.availableSegments[n]=n;this.setupExperiments(e.experiments);var r=this.randomInteger(0,t.numSegments-1,e.name+".segment",t.inputs&&t.primaryUnit?t.inputs[t.primaryUnit]:void 0),i=t.segmentAllocations[r];return e.experiments.filter((function(e){return e.id===i}))[0]}},{key:"setupExperiments",value:function(e){var t,n,i,s=[];for(n=0;n<e.length;n+=1)e[n].state===l.Stopped&&s.push(e[n]);function o(e){var t=e.split(/[^0-9]/).map((function(e){return parseInt(e,10)})),n=(0,r.Z)(t,6),i=n[0],s=n[1],o=n[2],a=n[3],u=n[4],l=n[5];return new Date(i,s-1,o,a,u,l).getTime()}for(s.sort((function(e,t){return o(t.stopped_on)-o(e.stopped_on)})),n=0;n<e.length;n+=1){for(t=o(e[n].published_on),i=s.length-1;i>=0&&o(s[i].stopped_on)<t;i-=1)this.removeExperiment(s[i]),s.splice(i,1);this.addExperiment(e[n])}for(i=s.length-1;i>=0;i-=1)this.removeExperiment(s[i])}},{key:"addExperiment",value:function(e){if(!this.currentTest)throw new Error("No test was selected before adding the experiment: ".concat(e.name));var t,n,r=this.runningTests[this.currentTest],i=e.buckets,s=e.name;if(!(Object.keys(r.availableSegments).length<i)){for(n in t=this.sample(r.availableSegments,i,r.namespace.name+".sampled_segments",s))t.hasOwnProperty(n)&&(r.segmentAllocations[t[n]]=e.id,delete r.availableSegments[t[n]]);this.logIfDebug('ABLincoln.addExperiment: Adding experiment "'+e.name+'"')}}},{key:"removeExperiment",value:function(e){if(!this.currentTest)throw new Error("No test was selected before removing the experiment: ".concat(e.name));var t=this.runningTests[this.currentTest];for(var n in t.segmentAllocations)t.segmentAllocations.hasOwnProperty(n)&&t.segmentAllocations[n]===e.id&&(t.availableSegments[n]=n,delete t.segmentAllocations[n]);this.logIfDebug('ABLincoln.removeExperiment: Removing experiment "'+e.name+'"')}},{key:"getParameterByVUID",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.currentTest)throw new Error("No test was selected before getting the parameter: ".concat(e));var r=this.runningTests[this.currentTest],i=this.cookie(f),s=i?JSON.parse(i):{};for(var o in this.tests)if(this.tests.hasOwnProperty(o))for(var a in this.tests[o].experiments)if(this.tests[o].experiments.hasOwnProperty(a)){var u=this.tests[o].experiments[a];u.state===l.Stopped&&delete s[u.id]}var c=r.experiment,g=function(e){var n=window.OnetrustActiveGroups||"";n&&-1!==n.indexOf(",C0002,")&&t.cookie(f,e,365)};if(c.state===l.Paused&&null==s[c.id])return g(i=JSON.stringify(s)),this.logIfDebug('ABLincoln.getParameterByVUID: Experiment paused and user not yet exposed, returning default "'+n+'"'),n;var h=this.getTreatmentForExperiment(e,n);return s[c.id]=h,g(i=JSON.stringify(s)),h}},{key:"getTreatmentForExperiment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.currentTest)throw new Error("No test was selected before getting the treatment for parameter: ".concat(e));var n,r=this.runningTests[this.currentTest],i=r.experiment.parameters,s=[],o=[],a=r.salt+"."+e;for(var u in i)i.hasOwnProperty(u)&&(n=i[u]).name===e&&(s.push(u),o.push(n.weight));if(0===s.length)return t;var l=this.weightedChoice(s,o,a,r.inputs);return this.logIfDebug('ABLincoln.getTreatmentForExperiment: Returning treatment "'+i[l].choice+'" (id '+i[l].id+")"),this.log("exposure",i[l]),i[l].choice}},{key:"getSegmentValue",value:function(e){switch(e){case c.AccountType:return this.user.accountType;case c.Language:return this.user.language;case c.Location:return this.user.location;case c.LoggedIn:return null==this.user.cuid?"0":"1";case c.Mobile:return this.user.isMobile}return null}},{key:"userInSegment",value:function(){var e=this.getFormattedSegmentObj();for(var t in e.exclude)if(e.exclude.hasOwnProperty(t)){var n=e.exclude[t],r=this.getSegmentValue(t);if(-1!==n.indexOf(r))return!1}for(var i in e.include)if(e.include.hasOwnProperty(i)){var s=e.include[i],o=this.getSegmentValue(i);if(-1===s.indexOf(o))return!1}return!0}},{key:"getFormattedSegmentObj",value:function(){if(!this.currentTest)throw new Error("No test was selected before getting segments");var e,t,n={include:{},exclude:{}},r=this.runningTests[this.currentTest].experiment;for(var i in r.segments)if(r.segments.hasOwnProperty(i))for(var s in null==n[t=1===(e=r.segments[i]).include?"include":"exclude"][e.type]&&(n[t][e.type]=[]),e.values)e.values.hasOwnProperty(s)&&n[t][e.type].push(e.values[s]);return n}},{key:"cookie",value:function(e,t,n,r,i,s){var o;return arguments.length>1?(n&&(o=new Date).setDate(o.getDate()+n),null==r&&(r="/"),document.cookie=e+"="+encodeURIComponent(t||"")+(null!=o?"; expires="+o.toUTCString():"")+(r?"; path="+r:"")+(i?"; domain="+i:"")+(s?"; secure":"")):decodeURIComponent((("; "+document.cookie).split("; "+e+"=")[1]||"").split(";")[0])}},{key:"getOverride",value:function(e){var t=location.search.substr(1).split("&");for(var n in t)if(t.hasOwnProperty(n)){var r=t[n].split("=");if(decodeURIComponent(r[0])==="ab_"+e)return decodeURIComponent(r[1])}return null}},{key:"getUnit",value:function(e,t){var n=e,r=[];if(n instanceof Array)r=n;else if(n instanceof Object)for(var i in n)n.hasOwnProperty(i)&&r.push(n[i]);else r.push(n);return null!=t&&r.push(t),r}},{key:"getHash",value:function(e,t,n){var r=this.getUnit(t,n).map((function(e){return e.toString()})).join("."),i=h(e+"."+r).toString().substr(0,13);return parseInt(i,16)}},{key:"getUniform",value:function(e,t,n,r,i){return e+this.getHash(n,r,i)/0xfffffffffffff*(t-e)}},{key:"randomInteger",value:function(e,t,n,r){return e+this.getHash(n,r)%(t-e+1)}},{key:"weightedChoice",value:function(e,t,n,r){for(var i=t,s=0,o=0;o<i.length;o+=1)s+=i[o],i[o]=s;for(var a=this.getUniform(0,s,n,r),u=0;u<i.length;u+=1)if(a<=i[u])return e[u]}},{key:"sample",value:function(e,t,n,r){var i,s,o,a=[];for(i in e)e.hasOwnProperty(i)&&a.push(e[i]);for(i=a.length-1;i>0;i-=1)s=this.getHash(n,r,i)%(i+1),o=a[i],a[i]=a[s],a[s]=o;return a.slice(0,t)}},{key:"log",value:function(e,t){var n,r,i,s;if(!this.currentTest)throw new Error("No test was selected before logging event: ".concat(e));var o=this.runningTests[this.currentTest],a={event:e,vuid:null!==(n=null===(r=this.user)||void 0===r?void 0:r.vuid)&&void 0!==n?n:"",cuid:null!==(i=null===(s=this.user)||void 0===s?void 0:s.cuid)&&void 0!==i?i:null};o&&o.experiment&&(a.namespace_id=o.namespace.id,a.experiment_id=o.experiment.id,a.inputs=JSON.stringify(o.inputs),a.salt=o.salt,a.name=o.experiment.name.replace(/ /g,"-")),t&&(a.param_id=t.id,a.param_name=t.name,a.param_value=t.choice,this.logIfDebug('ABLincoln.log: logging exposure to treatment "'+t.choice+'" (id '+t.id+")")),this.sendTrackingPixelRequest(a)}},{key:"createTest",value:function(e){var t,n,r=u(u({},p),{},{namespace:this.tests[e],numSegments:this.tests[e].buckets});switch(r.namespace.input){case g.VUID:var i=null===(t=this.user)||void 0===t?void 0:t.vuid;if(!i)throw new Error("".concat(e," uses VUID input and no VUID was available on the provided user. This is very strange and should never happen. Something weird happened with your ABLincoln client instantiation."));r.inputs={vuid:i},r.primaryUnit=g.VUID;break;case g.UserId:var s=null===(n=this.user)||void 0===n?void 0:n.cuid;if(!s)throw new Error("".concat(e," uses CUID input and no CUID was available on the provided user. You are likely including logged out users in a test set up for logged in users only."));r.inputs={cuid:s},r.primaryUnit=g.UserId;break;case g.Other:r.inputs=null,r.primaryUnit=null}return r}},{key:"logIfDebug",value:function(e){this.debugMode&&console.log(e)}}]),e}()},58101:function(e,t,n){var r=n(55872).Buffer;!function(){var t=n(1048),i=n(6636).utf8,s=n(6636).bin,o=function(e,n){var o=t.wordsToBytes(function(e){e.constructor==String?e=i.stringToBytes(e):"undefined"!==typeof r&&"function"==typeof r.isBuffer&&r.isBuffer(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());var n=t.bytesToWords(e),s=8*e.length,o=[],a=1732584193,u=-271733879,l=-1732584194,c=271733878,g=-1009589776;n[s>>5]|=128<<24-s%32,n[15+(s+64>>>9<<4)]=s;for(var h=0;h<n.length;h+=16){for(var p=a,f=u,d=l,m=c,v=g,y=0;y<80;y++){if(y<16)o[y]=n[h+y];else{var b=o[y-3]^o[y-8]^o[y-14]^o[y-16];o[y]=b<<1|b>>>31}var w=(a<<5|a>>>27)+g+(o[y]>>>0)+(y<20?1518500249+(u&l|~u&c):y<40?1859775393+(u^l^c):y<60?(u&l|u&c|l&c)-1894007588:(u^l^c)-899497514);g=c,c=l,l=u<<30|u>>>2,u=a,a=w}a+=p,u+=f,l+=d,c+=m,g+=v}return[a,u,l,c,g]}(e));return n&&n.asBytes?o:n&&n.asString?s.bytesToString(o):t.bytesToHex(o)};o._blocksize=16,o._digestsize=20,e.exports=o}()}}]);