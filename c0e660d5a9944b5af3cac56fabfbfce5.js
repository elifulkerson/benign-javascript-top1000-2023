var stripchar=1;var maxChar=50;var _rf=document;var UP=38,DOWN=40;var LEFT=37,RIGHT=39;var ENTER=13,TAB=9,ESC=27,BACKSPACE=8;var index=-1;var init=0;var menuopen=0;var selectedRow=null,rows=null,pbox="",nbox="",tbox="",oldtb="";var ecache=true;var services=new Array("shopping","books","realtime","realtime");var display_services=new Array("in Shopping","in Books","in News","in Images");
var services_url=new Array("https://shopping.rediff.com/product/","https://books.rediff.com/","http://realtime.rediff.com/news/","https://realtime.rediff.com/images/");var services_lnk_track=new Array;services_lnk_track["realtime"]="rt_srch";services_lnk_track["shopping"]="shopping_inhomesrch";services_lnk_track["books"]="books_inhomesrch";services_lnk_track["images"]="img_inhomesrch";var services_nsrv_track=new Array;services_nsrv_track["realtime"]="inhome";services_nsrv_track["shopping"]="HP";
services_nsrv_track["books"]="HP";services_nsrv_track["iamges"]="inhome";function nuvalidate(stringToTrim){var nuString=stringToTrim.replace(/^\s+|\s+$/g,"");if(nuString.length>0){nuString=nuString.replace(/\s+/g," ");_rf.forms["query"].MT.value=nuString;return true}else return false}function openiframe(){_rf.getElementById("socialsrch").src="http://qna.rediff.com/Main.php?do=socialsearch";return true}function resizer(ht){i=_rf.getElementById("socialsrch");i.style.height=ht+1+"px"}
function inputClear(obj,string){if(obj.value==string){obj.value="";obj.style.color="#000000";obj.style.fontWeight="bold"}}function inputReset(objId,string,flag){if(flag){if(_rf.getElementById(objId).value==""){_rf.getElementById(objId).value=string;_rf.getElementById(objId).style.color="#888888"}}else{_rf.getElementById(objId).value=string;_rf.getElementById(objId).style.color="#888888"}}_rf.onload=function(){if(_rf.getElementById&&_rf.getElementById("queryTop"))_rf.getElementById("queryTop").focus()};
var kHost="//sns.rediff.com/HomeSns/api?command=home_sns&scount="+srch_tab_sel+",6&get_categories=1&get_products=1&prefix=";var counter=0;_cnt=1E3;var Cache={stack:{},load:function(id){return typeof this.stack[id]!="undefined"?this.stack[id]:false},has:function(id){return typeof this.stack[id]!="undefined"?true:false},save:function(data,id){this.stack[id]=data},remove:function(id){if(typeof this.stack[id]!="undefined")delete this.stack[id]}};
var Suggestionr={initr:function(nid,pid,textboxid,cachee){var el=_rf.getElementById(textboxid);el.onfocus=function(){Suggestionr.initsug(nid,pid,textboxid)};el.onkeyup=function(e){Suggestionr.showsug(e)};el.onkeydown=function(e){Suggestionr.getkeys(e)};_rf.onclick=function(e){Suggestionr.destroysug()};this.initnext(nid,pid,textboxid,cachee);if(_rf.getElementById("snsSRC").value=="sugg")_rf.getElementById("snsSRC").value="web"},initnext:function(nid,pid,textboxid,cachee){ecache=cachee;var wfield=_rf.createElement("div");
wfield.setAttribute("id",nid);_rf.getElementById(pid).appendChild(wfield)},initsug:function(newbox,parentbox,textbox){_rf.getElementById(parentbox).style.display="none";pbox=parentbox;nbox=newbox;tbox=textbox;menuopen=0;init=1},destroysug:function(){try{if(init){if(_rf.getElementById(nbox))_rf.getElementById(pbox).removeChild(_rf.getElementById(nbox));menuopen=0;index=-1;selectedRow=null;rows=null;init=0}_rf.getElementById(pbox).style.display="none";_rf.getElementById(pbox).style.height=0+"px"}catch(e){}},
getlist:function(q){q=q.replace(/[^\w\d\s\-_@\.]/ig,"");if(ecache){txt=Cache.load(escape(q));if(txt==false){var a=_rf.createElement("script");a.setAttribute("id","r_sns");a.src=kHost+encodeURIComponent(q);var b=_rf.getElementById("r_sns"),d=_rf.getElementsByTagName("head")[0];if(b)d.removeChild(b);d.appendChild(a);interval=setInterval(function(){counter++},1);while(counter>_cnt){clearInterval(interval);_rf.getElementById(nbox).innerHTML="";_rf.getElementById(nbox).style.display="none";counter=0;break}}else{_rf.getElementById(nbox).style.display=
"block";_rf.getElementById(nbox).className="suggbox";_rf.getElementById(nbox).innerHTML=txt}}else{var a=_rf.createElement("script");a.setAttribute("id","r_sns");a.src=kHost+encodeURIComponent(q);var b=_rf.getElementById("r_sns"),d=_rf.getElementsByTagName("head")[0];if(b)d.removeChild(b);d.appendChild(a);interval=setInterval(function(){counter++},1);while(counter>_cnt){clearInterval(interval);_rf.getElementById(nbox).innerHTML="";counter=0;break}}return true},IsNotIE:function(){return navigator.appName==
"Netscape"},show:function(myArray){Object.size=function(obj){var size=0,key;for(key in obj)if(obj.hasOwnProperty(key))size++;return size};var txt="";var _kLoc=window.location.href;if(eval("myArray."+srch_tab_sel))var scheck=eval("myArray."+srch_tab_sel+".suggestions");else return false;var _len=scheck.length;if(_kLoc.indexOf("dirsrch")==-1)if(_len>6)_len=6;var curr_srch=_rf.getElementById(tbox).value;var re_with="<span class=normal>"+curr_srch+"</span>";var services_len=services.length;var a=0;var l=
0;_rf.getElementById("srchurl").value=services_url[srch_tab_num]+curr_srch;var shown_data=Array();for(i=0;i<_len;i++)if(scheck){var sdata=eval("myArray."+services[srch_tab_num]+".suggestions["+i+"].suggestion");sdata=sdata.replace(/'/g,"");sdata=sdata.replace(/"/g,"");shown_data.push(sdata);var surl=services_url[srch_tab_num];var scategory=eval("myArray."+services[srch_tab_num]+".suggestions["+i+"].categories");txt+="<div id='suggest_"+l+"' index='"+l+"' class='DefaultRowColor' onMouseOver='Suggestionr.over(this,\""+
sdata+'","'+surl+"?sc_cid=inhomesrch\")' onClick='Suggestionr.select(this,\""+sdata+'","'+surl+sdata+'?sc_cid=inhomesrch","'+services[srch_tab_num]+'","'+myArray.prefix+"\")' cust_url='"+surl+sdata+"' cust_data='"+sdata+"' cust_service='"+services[srch_tab_num]+"' cust_prefix='"+myArray.prefix+"'><p style='padding:0 0 0 15px;font-size:12px;'><span class=bold>"+sdata.replace(curr_srch,re_with)+"</span>";if(scategory)txt+=" in <span style='color:#b30808'>All Products</span>";txt+="</p> <span class=grey2></span></div>";
l++;var tmpcatdata="";if(scategory){var cat_len=scategory.length;for(var c=0;c<cat_len;c++){var curl=services_url[srch_tab_num]+sdata+"/cat-"+scategory[c].catid;tmpcatdata+="<div id='suggest_"+l+"' index='"+l+"'  class='DefaultRowColor' onMouseOver='Suggestionr.over(this,\""+sdata+'","'+curl+"?sc_cid=inhomesrch\")' onClick='Suggestionr.select(this,\""+sdata+'","'+curl+'?sc_cid=inhomesrch","'+services[srch_tab_num]+'","'+myArray.prefix+"\")' cust_url='"+curl+"' cust_data='"+sdata+" in "+scategory[c].displayName+
"' cust_service='"+services[srch_tab_num]+"' cust_prefix='"+sdata+"'><p style='padding:0 0 0 15px;font-size:12px;'><span class=bold>"+sdata.replace(curr_srch,re_with)+"</span> in <span style='color:#b30808'>"+scategory[c].displayName+"</span></p></div>";l++}}txt+=tmpcatdata}counter=0;if(ecache==true){myArray[0]=escape(myArray[0]);Cache.save(txt,myArray[0])}if(txt!=""){if(_rf.getElementById(nbox)){_rf.getElementById(nbox).style.display="block";_rf.getElementById(nbox).className="suggbox";_rf.getElementById(nbox).innerHTML=
txt;menuopen=1}}else if(_rf.getElementById(nbox))_rf.getElementById(nbox).style.display="none"},getkeys:function(e){if(window.event){if(!e)var e=window.event;keynum=e.keyCode}else if(e.which)keynum=e.which;if(keynum===DOWN){if(menuopen!=0){this.MoveCursorDown();if(_rf.getElementById(nbox)&&selectedRow!=null){if(_rf.getElementById("suggest_"+index)){_rf.getElementById("srchurl").value=_rf.getElementById("suggest_"+index).getAttribute("cust_url");_rf.getElementById("srchservice").value=_rf.getElementById("suggest_"+
index).getAttribute("cust_service");_rf.getElementById("srchsugtrack").value=_rf.getElementById("suggest_"+index).getAttribute("cust_prefix")}if(_rf.getElementById("suggest_"+index))var sudata=_rf.getElementById("suggest_"+index).getAttribute("cust_data");else var sudata="";if(this.IsNotIE())_rf.getElementById(tbox).value=sudata;else _rf.getElementById(tbox).value=sudata;_rf.getElementById("snsSRC").value="sugg"}else _rf.getElementById("snsSRC").value="web";return}}else if(keynum===UP){this.MoveCursorUp();
if(_rf.getElementById(nbox)&&selectedRow!=null){if(_rf.getElementById("suggest_"+index)){_rf.getElementById("srchurl").value=_rf.getElementById("suggest_"+index).getAttribute("cust_url");_rf.getElementById("srchservice").value=_rf.getElementById("suggest_"+index).getAttribute("cust_service");_rf.getElementById("srchsugtrack").value=_rf.getElementById("suggest_"+index).getAttribute("cust_prefix")}if(_rf.getElementById("suggest_"+index))var sudata=_rf.getElementById("suggest_"+index).getAttribute("cust_data");
else var sudata="";if(this.IsNotIE())_rf.getElementById(tbox).value=sudata;else _rf.getElementById(tbox).value=sudata;_rf.getElementById("snsSRC").value="sugg"}else _rf.getElementById("snsSRC").value="web";return}else if(keynum==ENTER){if(selectedRow!=null){if(_rf.getElementById("suggest_"+index)){_rf.getElementById("srchurl").value=_rf.getElementById("suggest_"+index).getAttribute("cust_url");_rf.getElementById("srchservice").value=_rf.getElementById("suggest_"+index).getAttribute("cust_service");
_rf.getElementById("srchsugtrack").value=_rf.getElementById("suggest_"+index).getAttribute("cust_prefix")}if(_rf.getElementById("suggest_"+index))var sudata=_rf.getElementById("suggest_"+index).getAttribute("cust_data");else var sudata="";if(this.IsNotIE())_rf.getElementById(tbox).value=sudata;else _rf.getElementById(tbox).value=sudata}this.destroysug();this.initsug(nbox,pbox,tbox);return false}else if(keynum===LEFT||keynum===RIGHT){if(selectedRow!=null){if(_rf.getElementById("suggest_"+index)){_rf.getElementById("srchurl").value=
_rf.getElementById("suggest_"+index).getAttribute("cust_url");_rf.getElementById("srchservice").value=_rf.getElementById("suggest_"+index).getAttribute("cust_service");_rf.getElementById("srchsugtrack").value=_rf.getElementById("suggest_"+index).getAttribute("cust_prefix")}if(_rf.getElementById("suggest_"+index))var sudata=_rf.getElementById("suggest_"+index).getAttribute("cust_data");else var sudata="";if(this.IsNotIE())_rf.getElementById(tbox).value=sudata;else _rf.getElementById(tbox).value=sudata}index=
-1;selectedRow=null;rows=null;init=1}else if(keynum===ESC){_rf.getElementById(tbox).value=oldtb;this.destroysug();this.initsug(nbox,pbox,tbox);return}else if(keynum==TAB){if(!_rf.getElementById(nbox))this.initnext(nbox,pbox,tbox,ecache);this.destroysug()}else return},showsug:function(e){if(window.event){if(!e)var e=window.event;keynum=e.keyCode}else if(e.which)keynum=e.which;if(document.getElementById("srchinputcopy"))document.getElementById("srchinputcopy").style.display="none";if(keynum===TAB||
keynum===ESC||keynum===ENTER||keynum===UP||keynum===DOWN)return;selectedRow=null;rows=null;if(!_rf.getElementById(nbox))this.initnext(nbox,pbox,tbox,ecache);if(_rf.getElementById(pbox))_rf.getElementById(pbox).style.display="block";if(_rf.getElementById(tbox).value.length>=stripchar&&_rf.getElementById(tbox).value.length<=maxChar){var q=_rf.getElementById(tbox).value;oldtb=_rf.getElementById(tbox).value;q=q.replace(/[^\w\d\s\-_@\.]/ig,"");if(q==""){_rf.getElementById(nbox).innerHTML="";_rf.getElementById(nbox).style.display=
"none";menuopen=0}else this.getlist(q)}else this.destroysug()},over:function(elem){listbox=_rf.getElementById(nbox);rows=listbox.getElementsByTagName("div");this.SetDefaultRowColor();elem.className="HighlightRow";index=elem.getAttribute("index");selectedRow=rows[index]},select:function(elem,data,surl,service,prefix){_rf.getElementById(tbox).value=data;_rf.getElementById("snsSRC").value="sugg";submitSearch(data,surl,service,prefix);this.destroysug();this.initsug(nbox,pbox,tbox)},MoveCursorUp:function(){listbox=
_rf.getElementById(nbox);menuopen=1;if(listbox==null)return;rows=listbox.getElementsByTagName("div");if(index>0){index--;this.SetDefaultRowColor();selectedRow=rows[index];if(selectedRow)selectedRow.className="HighlightRow"}else if(index==0){this.SetDefaultRowColor();index--;selectedRow=null}else if(index<0){index=rows.length-1;this.SetDefaultRowColor();selectedRow=rows[index];if(selectedRow)selectedRow.className="HighlightRow"}},MoveCursorDown:function(){selectedRow=null;listbox=_rf.getElementById(nbox);
menuopen=1;if(listbox==null)return;rows=listbox.getElementsByTagName("div");if(index<rows.length-1){index++;this.SetDefaultRowColor();selectedRow=rows[index];if(selectedRow)selectedRow.className="HighlightRow"}else if(index==rows.length-1){this.SetDefaultRowColor();index++;selectedRow=null}else if(index>rows.length-1){index=0;this.SetDefaultRowColor();selectedRow=rows[index];if(selectedRow)selectedRow.className="HighlightRow"}},SetDefaultRowColor:function(){for(i=0;i<rows.length;i++)rows[i].className=
"DefaultRowColor"}};if(!Array.prototype.indexOf)Array.prototype.indexOf=function(elt){var len=this.length;var from=Number(arguments[1])||0;from=from<0?Math.ceil(from):Math.floor(from);if(from<0)from+=len;for(;from<len;from++)if(from in this&&this[from]===elt)return from;return-1};Suggestionr.initr("sugbox","sug","srchword",true);