
if(!window.filters)window.filters={__filters:document.createElement('filters'),init:function(){if(window.filters_hooks){window.filters_hooks.forEach(element=>{let key=Object.keys(element)[0];this.add(key,element[key]);});}},add:function(name,filter){this.__filters.addEventListener(name,function(ev){filter(ev.detail);});},exec:function(name,val){var data={ret:val};let event=new CustomEvent(name,{"detail":data});this.__filters.dispatchEvent(event);return data.ret;}};window.filters.init();(function(){GediSocial={settings:{gigya:{sdk:'https://cdns.eu1.gigya.com/js/gigya.js',load:true,appId:'3_2oQ0Rw41QlhvMLmUtCqjJUkf3Vou3hkxjQGQBHWIc9REFlNZdsQ6Nhgf1lcRZARv',gateway:'https://fidm.gigya.com/jwt/',clp:'https://login.gedi.it/clp/login.php',timeout:15000,jwt:{expiration:(120*60),refreshLimit:(300*1000),refreshCheck:(120*1000),cookieName:'blaize_jwt',cookieNameSession:'blaize_session',cookieNameTracking:'blaize_tracking_id',cookieDomain:'',cookieExpires:365,cookiePath:'/',cookieSameSite:'None',cookieSecure:true,localStorageEXP:'gediaccounts_jwt_exp'},loginParams:{authFlow:'redirect',},screenSets:{login:{screenSet:'GEDI-RegistrationLogin',cid:'OLD',},profile:{screenSet:'GEDI-ProfileUpdate',},sessions_params:["authCode","gig_origin","gig_brand","gig_actions","gig_myCustomLang","gig_myCustomSessionExpiration","gig_screenSet","gig_initialApiKey","gig_startScreen"],}},recaptcha:{sdk:'https://www.google.com/recaptcha/api.js',public_key:'6LffyYQjAAAAAI6w3GQdP6SeFVugFOg8agNwlryX'},view:{default:{containerID:'account-data-container'},pw:{containerID:'account-pw-container',},render:true,},handlers:{reload:true,autologin_cb:null,autologout_cb:null}},status:{handlers:{reload:{_running:false}},gigya:{blocked:undefined,logged:false,response:null,uid:null,lastlogin:null,initialized:false,jwt:{_running:false}}}}
GediSocial.interfaces={standard:{init:function(settings={}){var me=this;if(settings&&!GediSocial.utils.isNull(settings))
GediSocial.settings=GediSocial.utils.deepExtend(GediSocial.settings,settings);me.cleanSettings();if(window.gedi&&!GediSocial.utils.isNull(window.gedi.view))
GediSocial.settings.view=GediSocial.utils.deepExtend(GediSocial.settings.view,window.gedi.view);if(window.gedi&&!GediSocial.utils.isNull(window.gedi.handlers))
GediSocial.settings.handlers=GediSocial.utils.deepExtend(GediSocial.settings.handlers,window.gedi.handlers);var onGigyaServiceReady=function(){me.initializeGigya();};var onError=function(){GediSocial.setGigyaBlocked();}
GediSocial.interface.loadGigya(onGigyaServiceReady,onError);},loadGigya:function(onGigyaServiceReady,onError){if(GediSocial.settings.gigya.load){if(!window.gigya||!window.gigya.socialize||!window.gigya.accounts){window.onGigyaServiceReady=function(serviceName){if(serviceName!='socialize')return;onGigyaServiceReady();}
var gigyaSrc=GediSocial.settings.gigya.sdk+'?apikey='+escape(GediSocial.settings.gigya.appId)+'&lang=it-IT';(function(d){var js;js=d.createElement('script');js.async=true;js.src=gigyaSrc;js.text=JSON.stringify(GediSocial.settings.gigya.conf);if(onError)
js.onerror=onError;d.getElementsByTagName('head')[0].appendChild(js);}(document));}else{window.onGigyaServiceReady('socialize');}}},loadRecaptcha:function(hide=true,onLoad=null,onError=null){if(hide){var css='.grecaptcha-badge { visibility: hidden; }',head=document.head||document.getElementsByTagName('head')[0],style=document.createElement('style');head.appendChild(style);style.type='text/css';style.appendChild(document.createTextNode(css));}
(function(d){var recaptchaSrc=GediSocial.settings.recaptcha.sdk+'?render='+GediSocial.settings.recaptcha.public_key;var js;js=d.createElement('script');js.async=true;js.src=recaptchaSrc;d.getElementsByTagName('head')[0].appendChild(js);}(document));},initializeGigya:function(){var me=this;if(GediSocial.status.gigya.blocked!==undefined)return;GediSocial.status.gigya.blocked=false;try{GediSocial.logger.log('Gigya initialized');GediSocial.utils.setOriginUrl();me.addEventHandlers()}catch(e){GediSocial.logger.error(e);}},checkAccount:function(response){var me=GediSocial.interface;GediSocial.status.gigya.response=response;if(GediSocial.utils.isApp())
me.renderAccountViewMobile(response);else
me.renderAccountViewDesktop(response);window.filters.exec("GediSocial.checkAccount.done",response);},renderAccountViewDesktop:function(response){var me=GediSocial.interface;if(me.isLogged(response)){GediSocial.status.gigya.logged=true;GediSocial.status.gigya.uid=response.UID;GediSocial.status.gigya.lastlogin=response.lastLogin;document.body.classList.add("logged");me.loadJWT();if(GediSocial.settings.view.render){me.renderAccountLogged(response);me.renderProfileLogged(false);me.checkCustomerBase(GediSocial.settings.service,response);me.checkPrivacy(response);}}else{me.deleteJWT();if(GediSocial.settings.view.render){me.renderAccountNotLogged(response);}}},renderAccountViewMobile:function(response){GediSocial.settings.gigya.jwt.expiration=8035200;var ids4test_app=new Array();ids4test_app.push("a45e43727b03449c9e9524d6d0009f2f");ids4test_app.push("628d9a82ede6430f986535f777dea99c");ids4test_app.push("d85cd97f8e1948dbbb0cbf50fc353f82");ids4test_app.push("b2981ac999e94a259f508ec680ac934b");ids4test_app.push("e1d1dfcaf87e4d179c77e6e52f6269a2");ids4test_app.push("6f97b79d93db0268c442e91ae081ad50");ids4test_app.push("cdcd8c024ae0ce6c2646b4ff68f32b2d");ids4test_app.push("5a01b374fc8840229dfe82797e83f756");ids4test_app.push("d59634dcd4ca4364b67659c4068f053c");ids4test_app.push("8768cd947c9aa7401849d49c8408e47f");ids4test_app.push("4863dab27e5b4fe78a368483939fc043");var ids4test_sfogliorep=new Array();ids4test_sfogliorep.push("960a1c8dd4aa4d1b90fcd2575751836f");ids4test_sfogliorep.push("f8281656b9174fea986a95e8c6694a3c");var me=GediSocial.interface;if(me.isLogged(response)){GediSocial.status.gigya.logged=true;GediSocial.status.gigya.uid=response.UID;GediSocial.status.gigya.lastlogin=response.lastLogin;document.body.classList.add("logged");if(!ids4test_app.includes(GediSocial.status.gigya.uid)){me.loadJWT();}
if(GediSocial.settings.view.render){me.renderProfileLogged(false);me.checkCustomerBase(GediSocial.settings.service,response);}}
if(!ids4test_app.includes(GediSocial.status.gigya.uid)&&!ids4test_sfogliorep.includes(GediSocial.status.gigya.uid)){GediSocial.interface.extendExpireCookieJWT();}},isLogged:function(response){return(response&&response.operation=='/accounts.getAccountInfo'&&((!response.errorCode&&!GediSocial.utils.isNull(response.UID))||(response.errorCode&&response.errorCode===0)))},loginDone:function(response){return(response&&response.fullEventName=='accounts.login'&&!GediSocial.utils.isNull(response.UID))},logoutDone:function(response){return(response&&response.fullEventName=='accounts.logout'&&GediSocial.utils.isNull(response.UID))},showScreenSet:function(page){page=(!GediSocial.utils.isNull(page))?page:'login';var params=GediSocial.settings.gigya.screenSets[page];gigya.accounts.showScreenSet(params);},showScreenSetProfile:function(){GediSocial.interface.renderProfileLogged(true);},hideScreenSet:function(page){page=(!GediSocial.utils.isNull(page))?page:'login';var params=GediSocial.settings.gigya.screenSets[page];gigya.accounts.hideScreenSet(params);},hideScreenSetProfile:function(){var params=GediSocial.settings.gigya.screenSets.profile;gigya.accounts.hideScreenSet(params);},checkAccountInfo:function(response){gigya.accounts.getAccountInfo({callback:GediSocial.interface.checkAccount});},onGigyaHandlers:function(response){var me=GediSocial.interface;if(me.loginDone(response)){var cbAutologin=function(){GediSocial.debugger.kibana({'action':'autologin'},response);var reload_cb=function(){if(GediSocial.settings.handlers.autologin_cb!=null&&typeof GediSocial.settings.handlers.autologin_cb==='function'){GediSocial.settings.handlers.autologin_cb();}else if(GediSocial.settings.handlers.reload==true){GediSocial.status.handlers.reload._running=true;window.location.reload();}}
if(!GediSocial.utils.isNull(GediSocial.utils.getCookie(GediSocial.settings.gigya.jwt.cookieName))){reload_cb();}else{window.filters.add("GediSocial.getJWT.done",reload_cb);}
window.filters.exec("GediSocial.login.done",response);}
GediSocial.interface.setDataLogin(response,cbAutologin);}
if(me.logoutDone(response)){GediSocial.debugger.kibana({'action':'autologout'});GediSocial.interface.deleteJWT();window.filters.exec("GediSocial.logout.done",response);if(GediSocial.settings.handlers.autologout_cb!=null&&typeof GediSocial.settings.handlers.autologout_cb==='function'){GediSocial.settings.handlers.autologout_cb();}else if(GediSocial.settings.handlers.reload==true){GediSocial.status.handlers.reload._running=true;window.location.reload();}else{GediSocial.interface.renderAccountNotLogged(response);}}},ssoLogin:function(params={}){GediSocial.utils.deepExtend(GediSocial.settings.gigya.loginParams,params);GediSocial.interface.cleanSettings();gigya.sso.login(GediSocial.settings.gigya.loginParams);},logout:function(params={}){GediSocial.debugger.kibana({'action':'logout'});let defaultParams={forceProvidersLogout:false,callback:GediSocial.interface.checkAccount};if(params&&!GediSocial.utils.isNull(params))
defaultParams=GediSocial.utils.deepExtend(defaultParams,params);gigya.accounts.logout(defaultParams);},renderAccountLogged:function(response){if(GediSocial.status.handlers.reload._running==false){if(GediSocial.settings.view.login&&!GediSocial.utils.isNull(GediSocial.settings.view.login.logged)){var element=document.getElementById(GediSocial.settings.view.login.containerID);GediSocial.settings.view.login.logged(element,response);}else{var element=document.getElementById(GediSocial.settings.view.default.containerID);let profile=response.profile.nickname?response.profile.nickname:response.profile.firstName+' '+response.profile.lastName
if(element){element.textContent='';element.innerHTML='Ciao '+profile+'! Ti sei appena loggato!<br />logout';element.onclick=function(){GediSocial.interface.logout();return false;}}else{console.log('no div container')}}}},renderAccountNotLogged:function(response){if(GediSocial.settings.view.login&&!GediSocial.utils.isNull(GediSocial.settings.view.login.notLogged)){var element=document.getElementById(GediSocial.settings.view.login.containerID);GediSocial.settings.view.login.notLogged(element);}else{var element=document.getElementById(GediSocial.settings.view.default.containerID);if(!GediSocial.utils.isNull(element)){element.innerHTML="login";element.onclick=function(){GediSocial.interface.ssoLogin();};}}},renderAccountNotLoggedPW:function(response){if(GediSocial.settings.view.pw&&!GediSocial.utils.isNull(GediSocial.settings.view.login.notLoggedPW)){var element=document.getElementById(GediSocial.settings.view.pw.containerID);GediSocial.settings.view.login.notLoggedPW(element);}else{var element=document.getElementById(GediSocial.settings.view.pw.containerID);var hPWLogin=document.createElement('h2');var aPWLogin=document.createElement('a');aPWLogin.setAttribute('class','ls-logged-profile');aPWLogin.innerHTML='Accedi';aPWLogin.onclick=function(){GediSocial.interface.ssoLogin({redirectURL:window.location.href});};aPWLogin.style.cssText+='color:#4297b5 !important; font-weight:normal !important;cursor:pointer';hPWLogin.style.cssText+='text-align:center !important; font-size:20px !important; font-weight:normal !important;';var tPWLogin=document.createTextNode("Sei già abbonato? ");hPWLogin.append(tPWLogin);hPWLogin.append(aPWLogin);element.append(hPWLogin);element.style.cssText+='margin-top: -55px !important;';}},renderProfileLogged:function(show){GediSocial.settings.gigya.screenSets.profile=GediSocial.utils.deepExtend(GediSocial.settings.gigya.screenSets.profile,GediSocial.settings.view.profile);var element=document.getElementById(GediSocial.settings.gigya.screenSets.profile.containerID);if((typeof(show)=='undefined'||show)||!GediSocial.utils.isNull(element)){var me=GediSocial.interface;me.showScreenSet('profile');}},addEventHandlers:function(){gigya.accounts.addEventHandlers({onLogin:GediSocial.interface.onGigyaHandlers,onLogout:GediSocial.interface.onGigyaHandlers});if(!GediSocial.status.gigya.initialized)
GediSocial.interface.checkAccountInfo();},loadJWT:function(callback=null,params={}){if(GediSocial.status.gigya.logged){GediSocial.interface.refreshJWT(callback,params);setInterval(function(){GediSocial.interface.refreshJWT(callback,params);},GediSocial.settings.gigya.jwt.refreshCheck);}else{GediSocial.utils.removeLocalstorage(GediSocial.settings.gigya.jwt.localStorageEXP);}},checkPrivacy:function(response){if(response&&response.data&&response.data.privacyCheck){let dataPrivacyCheck=new Date(Date.parse(response.data.privacyCheck));if(dataPrivacyCheck.getFullYear()==2000&&dataPrivacyCheck.getMonth()==0&&dataPrivacyCheck.getDate()==1){gigya.accounts.showScreenSet({screenSet:'GEDI-CUSTOM-RegistrationLogin',startScreen:'custom-privacy-screen'})}}},checkCustomerBase:function(testata,response){try{let externalData={};let exDataJson={};var update=false;var addService=true;if(response.data&&response.data.externalData){externalData=response.data.externalData;let exDataStr=externalData.replaceAll('\'','"');exDataJson=JSON.parse(exDataStr);if(exDataJson["SSOListServiceSubTS"]){if(typeof exDataJson.SSOListServiceSubTS=='string'){update=true;exDataJson.SSOListServiceSubTS=JSON.parse(exDataJson.SSOListServiceSubTS);}
let cloneExDataJson=JSON.parse(JSON.stringify(exDataJson.SSOListServiceSubTS));for(index in exDataJson.SSOListServiceSubTS){if(exDataJson.SSOListServiceSubTS[index]==null){update=true;cloneExDataJson.splice(index,1);}else if(exDataJson.SSOListServiceSubTS[index].serviceId==null){update=true;cloneExDataJson.splice(index,1);}}
if(update)
exDataJson.SSOListServiceSubTS=cloneExDataJson;let customerBase=exDataJson.SSOListServiceSubTS;for(var k in customerBase){if(testata==customerBase[k].serviceId){addService=false;update=false;break;}else{update=true;}}}
else{exDataJson.SSOListServiceSubTS=[];update=true;}}
else{exDataJson.SSOListServiceSubTS=[];update=true;}
if(update){if(addService){let dt=new Date()
let year=dt.getFullYear().toString().padStart(4,'0');let month=(dt.getMonth()+1).toString().padStart(2,'0');let day=dt.getDate().toString().padStart(2,'0');let hours=dt.getHours().toString().padStart(2,'0');let minutes=dt.getMinutes().toString().padStart(2,'0');let seconds=dt.getSeconds().toString().padStart(2,'0');let datetime=year+'-'+month+'-'+day+' '+hours+':'+minutes+':'+seconds;let custBaseElem={"serviceId":testata,"subscriptionTS":datetime};exDataJson.SSOListServiceSubTS.push(custBaseElem);}
exDataStr=JSON.stringify(exDataJson);let data={"externalData":exDataStr};let setAccountParam={callback:GediSocial.interface.setAccountInfoResponse,data}
gigya.accounts.setAccountInfo(setAccountParam);}}catch(err){console.log("Errore:"+err.message);}
return false;},setDataLogin:function(response,cb=null){try{let callback=(cb!=null)?cb:GediSocial.interface.setAccountInfoResponse;let data={"login":Date.now()};let setAccountParam={callback,data}
gigya.accounts.setAccountInfo(setAccountParam);}catch(err){console.log("Errore:"+err.message);}
return false;},setAccountInfoResponse:function(response){if(response.errorCode==0){console.log("setAccountInfoResponse OK");}
else{console.log("setAccountInfoResponse FAIL!!!");}},isDebug:function(){var field='kwdebug';var url=window.location.href;return(url.indexOf('?'+field+'=true')!=-1);},getJWTApp:function(callback,params){GediSocial.debugger.kibana({'action':'getJWTApp'});GediSocial.interface.getJWT(callback,params);},getJWT:function(callback=null,params={}){if(!GediSocial.status.gigya.jwt._running){GediSocial.status.gigya.jwt._running=true;GediSocial.utils.removeLocalstorage(GediSocial.settings.gigya.jwt.localStorageEXP);function cb(response){GediSocial.status.gigya.jwt._running=false;GediSocial.interface.saveJWT(response);window.filters.exec("GediSocial.getJWT.done",response);if(callback)callback(response);}
var parameters={"callback":cb,"fields":'profile.email, profile.lastName, profile.firstName, profile.nickname,profile.photoURL, data.selected',"expiration":GediSocial.settings.gigya.jwt.expiration};if(!GediSocial.utils.isObjectNull(params))parameters=GediSocial.utils.deepExtend(parameters,params);gigya.accounts.getJWT(parameters);}},saveJWT:function(response){if(response!=null&&!GediSocial.utils.isObjectNull(response)&&response.errorCode!=null&&response.errorCode==0&&!GediSocial.utils.isNull(response.id_token)&&typeof response.id_token!='undefined'&&response.id_token!='undefined'&&response.id_token!=null&&!GediSocial.utils.isObjectNull(jwt=GediSocial.utils.parseJwt(response.id_token))){if(typeof jwt.sub!=='string'){GediSocial.debugger.kibana({'action':'gigya.jwt_SUB_ERROR','response':response});}
var cookieName=GediSocial.settings.gigya.jwt.cookieName;var cookieDomain=(!GediSocial.utils.isNull(GediSocial.settings.gigya.jwt.cookieDomain))?GediSocial.settings.gigya.jwt.cookieDomain:null;var cookieExpires=GediSocial.settings.gigya.jwt.cookieExpires;var cookiePath=GediSocial.settings.gigya.jwt.cookiePath+';SameSite='+GediSocial.settings.gigya.jwt.cookieSameSite;var cookieSecure=GediSocial.settings.gigya.jwt.cookieSecure;GediSocial.utils.setCookie(cookieName,response.id_token,cookieExpires,cookieDomain,cookiePath,cookieSecure);GediSocial.utils.setLocalstorage(GediSocial.settings.gigya.jwt.localStorageEXP,jwt.exp);var ls_exp=GediSocial.utils.getLocalstorage(GediSocial.settings.gigya.jwt.localStorageEXP)
GediSocial.debugger.kibana({'action':'login.jwt','jwt_exp':jwt.exp,'ls_exp':ls_exp});if(!(GediSocial.settings.handlers.reload===false))
window.location.reload();}else{GediSocial.debugger.kibana({'action':'gigya.jwtERROR','response':response});}},extendExpireCookieJWT:function(){if(GediSocial.utils.isApp()&&!GediSocial.status.gigya.jwt._running){var cookieValue=GediSocial.utils.getCookie(GediSocial.settings.gigya.jwt.cookieName);if(!GediSocial.utils.isNull(cookieValue)){var jwt=GediSocial.utils.parseJwt(cookieValue);if(!GediSocial.utils.isNull(jwt)&&!GediSocial.utils.isNull(jwt.exp)){GediSocial.utils.setLocalstorage(GediSocial.settings.gigya.jwt.localStorageEXP,jwt.exp);var is_alive_jwt=Math.round((jwt.exp*1000)-Date.now());if(is_alive_jwt>0){var cookieExpires=(is_alive_jwt>86400000)?Math.round(((jwt.exp*1000)-Date.now())/(1000*60*60*24)):1;var cookieName=GediSocial.settings.gigya.jwt.cookieName;var cookieDomain=GediSocial.settings.gigya.jwt.cookieDomain;var cookiePath=GediSocial.settings.gigya.jwt.cookiePath+';SameSite='+GediSocial.settings.gigya.jwt.cookieSameSite;var cookieSecure=GediSocial.settings.gigya.jwt.cookieSecure;GediSocial.utils.setCookie(cookieName,cookieValue,cookieExpires,cookieDomain,cookiePath,cookieSecure);GediSocial.debugger.kibana({'action':'extendExpireCookieJWT','ls_exp':jwt.exp,'diff':cookieExpires});}else{GediSocial.debugger.kibana({'action':'extendExpireCookieJWT','ls_exp':jwt.exp,'diff':is_alive_jwt});}}}}},refreshJWT:function(callback=null,params={}){var ls_exp=GediSocial.utils.getLocalstorage(GediSocial.settings.gigya.jwt.localStorageEXP);var cookie_blz=GediSocial.utils.getCookie(GediSocial.settings.gigya.jwt.cookieName);if(GediSocial.utils.isNull(ls_exp)){if(!GediSocial.utils.isNull(cookie_blz)){var jwt=GediSocial.utils.parseJwt(cookie_blz);if(!GediSocial.utils.isNull(jwt)&&!GediSocial.utils.isNull(jwt.exp)){GediSocial.utils.setLocalstorage(GediSocial.settings.gigya.jwt.localStorageEXP,jwt.exp);ls_exp=jwt.exp;}}}
if(!GediSocial.utils.isNull(ls_exp)&&ls_exp!='undefined'){if(!GediSocial.utils.isNull(cookie_blz)){var diff=new Date(new Date(ls_exp*1000).getTime()-new Date().getTime());var diffTime=diff.getTime();var torefresh=diffTime<=GediSocial.settings.gigya.jwt.refreshLimit;var jwt=GediSocial.utils.parseJwt(cookie_blz);if(torefresh||(GediSocial.status.gigya.uid!=jwt.sub)){GediSocial.debugger.kibana({'action':'refreshJWT','ls_exp':ls_exp,'diff':diff.getTime(),'torefresh':torefresh});GediSocial.interface.getJWT(callback,params);}}else{GediSocial.debugger.kibana({'action':'refreshJWT','ls_exp':ls_exp});GediSocial.interface.getJWT(callback,params);}}else{if(GediSocial.status.gigya.logged){GediSocial.debugger.kibana({'action':'refreshJWT'});GediSocial.interface.getJWT(callback,params);}}
window.filters.exec("GediSocial.refreshJWT.done");},deleteJWT:function(params){if(!GediSocial.utils.isApp()){if(GediSocial.utils.issCheck()){var cookieDomain=(!GediSocial.utils.isNull(GediSocial.settings.gigya.jwt.cookieDomain))?GediSocial.settings.gigya.jwt.cookieDomain:null;var cookiePath=GediSocial.settings.gigya.jwt.cookiePath;GediSocial.utils.deleteCookie(GediSocial.settings.gigya.jwt.cookieName,-1,cookieDomain,cookiePath);GediSocial.utils.deleteCookie(GediSocial.settings.gigya.jwt.cookieNameSession,-1,'',cookiePath);GediSocial.utils.deleteCookie(GediSocial.settings.gigya.jwt.cookieNameTracking,-1,'',cookiePath);GediSocial.utils.removeLocalstorage(GediSocial.settings.gigya.jwt.localStorageEXP);}}},cleanSettings:function(){}}}
GediSocial.setGigyaBlocked=function(autologin){GediSocial.status.gigya.blocked=true;GediSocial.logger.log('Gigya blocked');}
GediSocial.getLogger=function(context){var ret={log:function(){},error:function(){}};if(window.common&&common.logging){ret=common.logging.getLogger('SOCIAL');}else if(window.console){var ret={};if(window.console.log.bind)
ret.log=window.console.log.bind(window.console,context);if(window.console.error.bind)
ret.error=window.console.error.bind(window.console,context);if(!ret.log)
ret.log=window.console.log;if(!ret.error)
ret.error=window.console.error;}
return ret;}
GediSocial.initLogging=function(){if(window.common&&common.logging)common.logging.init();GediSocial.logger=GediSocial.getLogger('SOCIAL');};GediSocial.utils={}
GediSocial.utils.isApp=function(){return(typeof window.facet!=='undefined'&&window.facet==='True');}
GediSocial.utils.isStorageAvailable=function(){try{var storage=window['localStorage'],x='__storage_test__';storage.setItem(x,x);storage.removeItem(x);return true;}
catch(e){return false;}}
GediSocial.utils.isDevice=function(){var check=false;(function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check=true;})(navigator.userAgent||navigator.vendor||window.opera);return check;}
GediSocial.utils.isNull=function(v){return!(typeof(v)!='undefined')||!v;}
GediSocial.utils.isObjectNull=function(v){return GediSocial.utils.getObjectLength(v)==0;}
GediSocial.utils.getObjectLength=function(obj){var size=0,key;for(key in obj){size++;}
return size;}
GediSocial.utils.isEmptyString=function(v){return!(!GediSocial.utils.isNull(v)&&v.trim()!='');}
GediSocial.utils.parseJwt=function(token){if(!GediSocial.utils.isNull(token)){try{var base64Url=token.split('.')[1];var base64=base64Url.replace(/-/g,'+').replace(/_/g,'/');var jsonPayload=decodeURIComponent(atob(base64).split('').map(function(c){return'%'+('00'+c.charCodeAt(0).toString(16)).slice(-2);}).join(''));return JSON.parse(jsonPayload);}catch(e){}}
return{};}
GediSocial.utils.serializeJSON=function(json,text=''){try{for(var key in json){var item=json[key];if(typeof item==="object"){if(typeof key==="string")
key=key.replace(/'/g,'"');text+='||||STARTOBJECT||'+key+':';text+=GediSocial.utils.serializeJSON(item)+':'+key+'||ENDOBJECT||';}else{if(typeof key==="string")
key=key.replace(/'/g,'"');if(typeof item==="string")
item=item.replace(/'/g,'"');if(typeof item==="function"){item='function()';}
text+='||'+key+' - '+item;}}}catch(e){}
return text;}
GediSocial.utils.issCheck=function(){var token=GediSocial.utils.getCookie(GediSocial.settings.gigya.jwt.cookieName);if(!GediSocial.utils.isNull(token)){var ret=GediSocial.utils.parseJwt(token)
if(!GediSocial.utils.isNull(ret)&&ret.iss==GediSocial.settings.gigya.gateway+GediSocial.settings.gigya.appId+'/'){return true;}}
return false;}
GediSocial.utils.setLocalstorage=function(key,value){try{localStorage.setItem(key,value);}catch(e){}}
GediSocial.utils.getLocalstorage=function(key){try{return localStorage.getItem(key);}catch(e){}
return null;}
GediSocial.utils.removeLocalstorage=function(key){try{return localStorage.removeItem(key);}catch(e){}}
GediSocial.utils.deepExtend=function(out){out=out||{};for(var i=1;i<arguments.length;i++){var obj=arguments[i];if(!obj)
continue;for(var key in obj){if(obj.hasOwnProperty(key)){if(typeof obj[key]==='object'){if(obj[key]instanceof Array==true)
out[key]=obj[key].slice(0);else
out[key]=GediSocial.utils.deepExtend(out[key],obj[key]);}else
out[key]=obj[key];}}}
return out;}
GediSocial.utils.getCookie=function(pageKey){var cookieValue=GediSocial.utils.cookie(pageKey);return cookieValue;}
GediSocial.utils.cookie=function(a,b,c){if(arguments.length>1&&String(b)!=="[object Object]"){c=GediSocial.utils.deepExtend({},c);if(b===null||b===undefined){c.expires=-1;}
if(typeof c.expires==="number"){var d=c.expires,e=(c.expires=new Date());e.setDate(e.getDate()+d);}
b=String(b);return(document.cookie=[encodeURIComponent(a),"=",c.raw?b:encodeURIComponent(b),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":"",].join(""));}
c=b||{};var f,g=c.raw?function(a){return a;}:decodeURIComponent;return(f=new RegExp("(?:^|; )"+encodeURIComponent(a)+"=([^;]*)").exec(document.cookie))?g(f[1]):null;}
GediSocial.utils.setCookie=function(name,value,days,domain,path,secure){if(!GediSocial.utils.isNull(name)&&!GediSocial.utils.isNull(value)){try{var params={};if(!GediSocial.utils.isNull(days)&&((typeof days==='number')||(typeof days.getMonth==='function')))
params.expires=days;if(!GediSocial.utils.isNull(domain))
params.domain=domain;if(!GediSocial.utils.isNull(path))
params.path=path;if(!GediSocial.utils.isNull(secure))
params.secure=secure;return GediSocial.utils.cookie(name,value,params);}catch(e){GediSocial.logger.log('ATTENZIONE! COOKIE NON SALVATO!');}}else{return false;}}
GediSocial.utils.deleteCookie=function(name,expires,domain,path){GediSocial.utils.cookie(name,'',{expires:-1,domain:domain,path:path});}
GediSocial.utils.removeURLParameters=function(url,parameters){let url_cleaned=url;for(parameter in parameters){url_cleaned=GediSocial.utils.removeURLParameter(url_cleaned,parameters[parameter]);}
return url_cleaned;}
GediSocial.utils.removeURLParameter=function(url,parameter){var urlparts=url.split('?');if(urlparts.length>=2){var prefix=encodeURIComponent(parameter)+'=';var pars=urlparts[1].split(/[&;]/g);for(var i=pars.length;i-->0;){let pars_indx=pars[i].lastIndexOf(prefix,0);if(pars_indx!==-1){pars.splice(i,1);}}
return urlparts[0]+(pars.length>0?'?'+pars.join('&'):'');}
return url;}
GediSocial.utils.getURLParameter=function(parameter){var queryString=window.location.search;var searchParams=new URLSearchParams(queryString);if(searchParams.has(parameter)===true){return searchParams.get(parameter);}
return null;}
GediSocial.utils.setOriginUrl=function(custom_params=null){if(!GediSocial.utils.isApp()){let paramsFounded=false;let params=(custom_params!=null)?custom_params:GediSocial.settings.gigya.screenSets.sessions_params;for(session_param in params){if(GediSocial.utils.getURLParameter(params[session_param])!=null){paramsFounded=true;}}
if(paramsFounded){let url=GediSocial.utils.removeURLParameters(window.location.href,params);window.history.pushState(null,"",url);}}}
GediSocial.initLogging();GediSocial.interface=GediSocial.interfaces.standard;GediSocial.debugger={settings:{kibana:{url:'https://logger.kataweb.it/',path:'genericweblogger/',prefix:'accounts_dbggr--',delimiter:'--',separator:'||'}},status:{uid:null,jwt_uid:null,jwt_exp:null,brand:null,logged:false,lastlogin:null,login:false,logout:false,onlogin:false,onlogout:false,glt:false,blaize:false},isEnabled:function(){return(!GediSocial.utils.isNull(GediSocial.settings.logger)&&GediSocial.settings.logger);},kibana:function(params,response){if(this.isEnabled()){try{this.status.brand=(!GediSocial.utils.isNull(GediSocial.settings.gigya.loginParams.context)&&!GediSocial.utils.isNull(GediSocial.settings.gigya.loginParams.context.brand))?GediSocial.settings.gigya.loginParams.context.brand:'none';this.status.brand=(!GediSocial.utils.isNull(window.kw_tlh_testataLogin))?window.kw_tlh_testataLogin:this.status.brand;this.status.uid=GediSocial.status.gigya.uid;this.status.lastlogin=GediSocial.status.gigya.lastlogin;this.status.logged=true;this.status.glt=(!GediSocial.utils.isNull(GediSocial.utils.getCookie('glt_'+GediSocial.settings.gigya.appId)));var cookie_blz=GediSocial.utils.getCookie(GediSocial.settings.gigya.jwt.cookieName);if(!GediSocial.utils.isNull(cookie_blz)){var jwt=GediSocial.utils.parseJwt(cookie_blz);this.status.blaize=true;this.status.jwt_uid=jwt.sub;this.status.jwt_exp=jwt.exp;}
if(!GediSocial.utils.isNull(response)){this.status.uid=response.UID}
var msg=this.getMessage(params);var url=this.settings.kibana.url+this.settings.kibana.path+'?'+msg;var handler=new XMLHttpRequest();handler.open("GET",url,true);handler.send(null);return true;}catch(e){console.log(e);}}},getMessage:function(params){var ret=this.settings.kibana.prefix+this.settings.kibana.delimiter
+'brand:'+this.status.brand+this.settings.kibana.delimiter;if(GediSocial.utils.isApp())
ret+='isApp:true'+this.settings.kibana.delimiter;else
ret+='isApp:false'+this.settings.kibana.delimiter;ret+='uid:'+this.status.uid+this.settings.kibana.delimiter;if(this.status.logged){ret+='lastlogin:'+this.status.lastlogin+this.settings.kibana.delimiter;}
ret+='action:'+params.action+this.settings.kibana.delimiter
+'glt:'+this.status.glt+this.settings.kibana.delimiter
+'blaize:'+this.status.blaize+this.settings.kibana.delimiter;if(params.action=='loadJWT'){ret+='ls_exp:'+params.ls_exp+this.settings.kibana.delimiter;}
if(params.action=='gigya.jwtERROR'){var json_serialized=GediSocial.utils.serializeJSON(params.response);ret+='responseGigya:'+json_serialized+this.settings.kibana.delimiter;}
if(this.status.blaize){ret+='jwt_uid:'+this.status.jwt_uid+this.settings.kibana.delimiter
+'jwt_exp:'+this.status.jwt_exp+this.settings.kibana.delimiter
+'sessione_dirty:'+(this.status.jwt_uid!=this.status.uid)+this.settings.kibana.delimiter;}
if(params.cookieExpires){ret+='cookieExpires:'+params.cookieExpires+this.settings.kibana.delimiter
+'lastlogin:'+this.status.lastlogin+this.settings.kibana.delimiter;}
if(params.ls_exp){ret+='ls_exp:'+params.ls_exp+this.settings.kibana.delimiter;if(params.diff)
ret+='diff:'+params.diff+this.settings.kibana.delimiter;if(params.torefresh)
ret+='torefresh:'+params.torefresh+this.settings.kibana.delimiter;}
ret+="isdevice:"+this.isDevice()+this.settings.kibana.delimiter;ret+="isStorageAvailable:"+GediSocial.utils.isStorageAvailable()+this.settings.kibana.delimiter;ret+="device:"+encodeURIComponent(navigator.userAgent)+this.settings.kibana.delimiter;ret+="href:"+encodeURIComponent(window.location.href);return ret;},isDevice:function(){var check=false;(function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check=true;})(navigator.userAgent||navigator.vendor||window.opera);return check;}};})();;
(function(){RenderAccounts=function(){}
RenderAccounts.APP_ID="3_1LA7c1Tgh8TOu8RyhRNltE6n6Avs4pEXj5bhyQNpnpC3KHJ60mcdJ6xOubYt6iUJ";RenderAccounts.BASEURL="https://www.repubblica.it/";RenderAccounts.BASEURL_EDICOLA="https://quotidiano.repubblica.it/";RenderAccounts.COOKIE_NAME="blaize_jwt";RenderAccounts.COOKIE_DOMAIN=".repubblica.it";RenderAccounts.SERVICE="repubblica.it";RenderAccounts.FUNNEL_MANAGER_PW="https://quotidiano.repubblica.it/edicola/manager";RenderAccounts.FUNNEL_MANAGER_ERROR_PW="https://quotidiano.repubblica.it/edicola/errorerep.jsp";RenderAccounts.FUNNEL_ZONA_PW="rep";RenderAccounts.FUNNEL_SERVICE_PW="purchase";RenderAccounts.FUNNEL_SOURCE_PW="PWS_MOB";RenderAccounts.PW_PROVIDER_URL="https://www.awin1.com/awclick.php";RenderAccounts.PW_PROVIDER_GID="361875";RenderAccounts.PW_PROVIDER_MID="15069";RenderAccounts.PW_PROVIDER_AWINAFFID="578913";RenderAccounts.PW_PROVIDER_LINKID="2626126";RenderAccounts.FUNNEL_CATALOGO="https://quotidiano.repubblica.it/edicola/catalogogenerale.jsp";RenderAccounts.FUNNEL_CATALOGO_SOURCE="PWL_snodo";RenderAccounts.FUNNEL_CATALOGO_REF="sr-pwl";RenderAccounts.FUNNEL_ORIGIN_PREFIX="RIT_";RenderAccounts.FUNNEL_TOKEN_LOGIN="repnzfree";RenderAccounts.WT_ORIGIN_URL=encodeURIComponent((window.location.host+window.location.pathname).replace(/\./g,'_'));RenderAccounts.WT_GSA_CATALOGO='PWL_snodo.paywall.campagna_pwl.'+RenderAccounts.WT_ORIGIN_URL+'.ctaaltreoff.';RenderAccounts.renderAccountLogged=function(container,response){if(!GediSocial.utils.isNull((container))){var profile='https://quotidiano.repubblica.it/edicola/profilo/profiloutente.jsp';var uName=(response.profile.nickname)?response.profile.nickname:response.profile.firstName;var socialThumb=(response.profile.photoURL)?response.profile.photoURL:'https://www.repstatic.it/cless/common/social/stable/img/repubblica/nazionale/placeholder-utente.png';if(GediSocial.utils.isNull(window.managerLoginInfo))
loggedViewSite(container,uName,socialThumb,undefined,profile);else
loggedViewQuotidiano(container,uName,socialThumb,undefined,profile);}}
var loggedViewSite=function(container,uName,socialThumb,logout,profile){container.innerHTML='';var logged=document.createElement('span');logged.setAttribute('class','header-logged-label');logged.innerHTML=uName;container.append(logged);var icon=document.createElement('img');icon.setAttribute('class','header-logged-img');icon.setAttribute('src',socialThumb);icon.setAttribute('width','20px');container.append(icon);var menu=document.createElement('span');menu.setAttribute('class','header-logged-link');var cprofile=document.createElement('a');cprofile.setAttribute('class','header-logged-profile');cprofile.href=profile;cprofile.innerHTML='PROFILO';menu.append(cprofile);var clogout=document.createElement('a');clogout.setAttribute('class','header-logged-logout');clogout.innerHTML='ESCI';if(!logout){logout=function(){GediSocial.interface.logout();};}
clogout.onclick=function(){logout();}
menu.append(clogout);container.append(menu);container.onclick=function(){container.classList.toggle("open");};}
var loggedViewQuotidiano=function(container,uName,socialThumb,logout,profile){var loggedId='ls-login-label-id';var logged=document.createElement('span');logged.setAttribute('class','ls-login-label');logged.setAttribute('id',loggedId);container.append(logged);var account=document.createElement('span');account.innerHTML=uName;logged.append(account);if(!GediSocial.utils.isNull(socialThumb)){var icon=document.createElement('img');icon.setAttribute('class','ls-logged-img');icon.setAttribute('src',socialThumb);}else{var icon=document.createElementNS('http://www.w3.org/2000/svg','svg'),useElem=document.createElementNS('http://www.w3.org/2000/svg','use');useElem.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href','#repubblica-user');icon.appendChild(useElem);}
logged.append(icon);var links=document.createElement('span');links.setAttribute('class','ls-logged-link');container.append(links);if(profile){var cprofile=document.createElement('a');cprofile.setAttribute('class','ls-logged-profile');cprofile.href=profile;var linkProfile=document.createTextNode("Profilo");cprofile.appendChild(linkProfile);links.append(cprofile);}
var clogout=document.createElement('a');clogout.setAttribute('class','ls-logged-logout');var linkLogout=document.createTextNode("Esci");clogout.appendChild(linkLogout);if(!logout){logout=function(){GediSocial.interface.logout();};}
clogout.onclick=logout;links.append(clogout);}
RenderAccounts.renderAccountNotLogged=function(container){if(!GediSocial.utils.isNull((container))){if(GediSocial.utils.isNull(window.managerLoginInfo)){RenderAccounts.renderAccountNotLoggedSite(container);if(!GediSocial.utils.isNull((cPWLogin=document.getElementById(GediSocial.settings.view.pw.containerID)))){RenderAccounts.renderAccountNotLoggedPW(cPWLogin);}}else
RenderAccounts.renderAccountNotLoggedQuotidiano(container);}}
RenderAccounts.renderAccountNotLoggedPW=function(container){var hPWLogin=document.createElement('h2');var aPWLogin=document.createElement('a');aPWLogin.setAttribute('class','ls-logged-profile');aPWLogin.innerHTML='Accedi';aPWLogin.onclick=function(){GediSocial.interface.ssoLogin({redirectURL:window.location.href});};aPWLogin.style.cssText+='cursor: pointer;text-decoration: none;color: #2772c5 !important;text-transform: uppercase;font-size: 16px;';hPWLogin.style.cssText+='text-align:center !important; font-size:21px !important; font-weight:normal !important;font-family:Helvetica, Arial, sans-serif !important;';var tPWLogin=document.createTextNode("Sei già abbonato? ");hPWLogin.append(tPWLogin);hPWLogin.append(aPWLogin);container.append(hPWLogin);container.style.cssText+='margin-top: 10px !important;margin:auto;';}
RenderAccounts.renderAccountNotLoggedSite=function(container){container.innerHTML='';let accedi=document.createElement('span');accedi.setAttribute('class','header-login-label');accedi.innerHTML="Accedi";container.append(accedi);container.onclick=function(){GediSocial.interface.ssoLogin();return false;}
var icon=document.createElementNS('http://www.w3.org/2000/svg','svg');icon.setAttribute('class','social-icon-user');useElem=document.createElementNS('http://www.w3.org/2000/svg','use');useElem.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href','#social-icon-user');icon.appendChild(useElem);container.append(icon);}
RenderAccounts.renderAccountNotLoggedQuotidiano=function(container){var menuRedazione=(window.managerLoginInfo&&(managerLoginInfo.type=="none"||managerLoginInfo.type=="user"))?true:false;var loggedId='ls-login-label-id';var logged=document.createElement('span');logged.setAttribute('class','ls-login-label');logged.setAttribute('id',loggedId);container.append(logged);var account=document.createElement('span');account.innerHTML='Accedi';logged.append(account);var icon=document.createElementNS('http://www.w3.org/2000/svg','svg'),useElem=document.createElementNS('http://www.w3.org/2000/svg','use');useElem.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href','#repubblica-user');icon.appendChild(useElem);logged.append(icon);var credazioneId='editorial-access-id';var credazione=document.createElement('div');credazione.setAttribute('class','editorial-access');credazione.setAttribute('id',credazioneId);container.append(credazione);logged.onclick=function(){var para=document.getElementById(loggedId);para.classList.toggle('is-active');document.body.classList.toggle('has-login-membership-active');var credazioneT=document.getElementById(credazioneId);if(credazioneT.style.display==="none"||credazioneT.style.display===""){credazioneT.style.display="block";}else{credazioneT.style.display="none";}}
var loginButton=document.createElement('button');loginButton.setAttribute('type','submit');loginButton.innerHTML="Vai alla login";loginButton.onclick=function(){GediSocial.interface.ssoLogin();return false;};credazione.append(loginButton);credazione.append(document.createElement('hr'));if(managerLoginInfo.type=="none"||managerLoginInfo.type=="user"&&!GediSocial.status.gigya.logged){if(managerLoginInfo.redazione){var caccessor=document.createElement('button');caccessor.setAttribute('type','submit');caccessor.innerHTML="Accesso Redazionale";caccessor.onclick=function(){document.location.href=managerLoginInfo.redazione;return false;};credazione.append(caccessor);credazione.append(document.createElement('hr'));}
if(managerLoginInfo.chiaveaccesso){GediSocial.interface.loadRecaptcha();var form=document.createElement('form');form.setAttribute('class','editorial-access_form');var ccnl=document.createElement('label');ccnl.innerHTML="Se hai ricevuto un codice inseriscilo qui:";ccnl.setAttribute('for','code-number');form.append(ccnl);var ccn=document.createElement('input');ccn.setAttribute('name','code-number');ccn.setAttribute('id','code-number');ccn.setAttribute('type','text');ccn.setAttribute('required','required');if(managerLoginInfo.phone_key){ccn.setAttribute('value',managerLoginInfo.phone_key);}
form.append(ccn);var cb=document.createElement('button');cb.innerHTML='Prosegui';cb.setAttribute('type','submit');cb.setAttribute('class','g-recaptcha');cb.setAttribute('data-action','submit');form.append(cb);form.addEventListener("submit",function(evt){evt.preventDefault();var phk=ccn.value;var redirectTo=managerLoginInfo.chiaveaccesso+encodeURIComponent(phk);try{var client=new ClientJS();fingerprint=client.getFingerprint();redirectTo+='&fingerPrint='+fingerprint;}catch(err){}
if(typeof grecaptcha==='object'){try{grecaptcha.ready(function(){grecaptcha.execute(GediSocial.settings.recaptcha.public_key,{action:'submit'}).then(function(retoken){redirectTo+='&retoken='+retoken;window.location.replace(redirectTo);return false;});});}catch(err){window.location.replace(redirectTo);return false;}}else{window.location.replace(redirectTo);return false;}});credazione.append(form);}
container.setAttribute('class','padded');}else{if(managerLoginInfo.type=="user"){var uName=(response.profile.nickname)?response.profile.nickname:response.profile.firstName;var socialThumb=response.profile.photoURL;loggedViewQuotidiano(container,uName,socialThumb,undefined,profile);}else{var logout=null;if(managerLoginInfo.logout){logout=function(){location.href=managerLoginInfo.logout;}}
if(managerLoginInfo.profile){profile=managerLoginInfo.profile;}
if(managerLoginInfo.type=="redazione"){loggedViewQuotidiano(container,"Utente redazionale","provider=site",logout);}
if(managerLoginInfo.type=="accesskey")
loggedViewQuotidiano(container,"Utente con chiave di accesso",null,logout,profile);}}}
RenderAccounts.ssoLogin=function(){GediSocial.interface.ssoLogin();}
RenderAccounts.getCommonSettings=function(){var settingsView={login:{logged:RenderAccounts.renderAccountLogged,notLogged:RenderAccounts.renderAccountNotLogged,containerID:'account-data-container'}}
var settings={gigya:{appId:RenderAccounts.APP_ID,loginParams:{context:{brand:'repubblica'}},clp:'https://login.gedi.it/clp/login.php',jwt:{cookieName:RenderAccounts.COOKIE_NAME,cookieDomain:RenderAccounts.COOKIE_DOMAIN}},view:settingsView,service:'repubblica.it',logger:true};return settings;}
RenderAccounts.init=function(page){if(typeof GediSocial==='object'){var settings=RenderAccounts.getCommonSettings();GediSocial.settings=GediSocial.utils.deepExtend(GediSocial.settings,settings);GediSocial.interface.init();}}
RenderAccounts.init();})();;
;window.kwait=window.kwait||[];kwait.push(['call',"accounts_js"]);