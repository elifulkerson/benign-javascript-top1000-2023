"undefined"==typeof window.Mozilla.Analytics&&(window.Mozilla.Analytics={}),function(){"use strict";var e=Mozilla.Analytics,t="querySelector"in document&&"querySelectorAll"in document;e.pageHasDownload=function(){return t&&null!==document.querySelector("[data-download-os]")?"true":"false"},e.pageHasVideo=function(){return!t||null===document.querySelector("video")&&null===document.querySelector('iframe[src^="https://www.youtube"]')?"false":"true"},e.getPageVersion=function(e){var t=e||document.location.pathname,a=/firefox\/(\d+(?:\.\d+)?\.\da?\d?)/.exec(t);return a?a[1]:null},e.getLatestFxVersion=function(){return document.getElementsByTagName("html")[0].getAttribute("data-latest-firefox")},e.getAMOExperiment=function(e){if(Object.prototype.hasOwnProperty.call(e,"experiment")&&Object.prototype.hasOwnProperty.call(e,"variation")){var t=decodeURIComponent(e.experiment),a=decodeURIComponent(e.variation);if(/^\d{8}_amo_.[\w/.%-]{1,50}$/.test(t)&&/^[\w/.%-]{1,50}$/.test(a))return{experiment:t,variation:a}}return null},e.updateDataLayerPush=function(e){var t=window.dataLayer=window.dataLayer||[],a=e||document.location.hostname;t.defaultPush=t.push,t.push=function(){for(var e=0;e<arguments.length;e++)if("gtm.linkClick"===arguments[e].event){var n=arguments[e]["gtm.element"],o=n.href;if(n.hostname===a){var r=o.replace(/^(?:https?:\/\/)(?:[^/])*/,""),i=r.match(/^(\/\w{2}-\w{2}\/|\/\w{2,3}\/)/);r=i?r.replace(i[0],"/"):r,arguments[e].newClickHref=r}else arguments[e].newClickHref=o;t.defaultPush(arguments[e])}else t.defaultPush(arguments[e])}}}(),function(){"use strict";var e=Mozilla.Analytics,t=Mozilla.Client,a=window.dataLayer=window.dataLayer||[];function n(){var t={event:"core-datalayer-loaded",pageHasDownload:e.pageHasDownload(),pageHasVideo:e.pageHasVideo(),pageVersion:e.getPageVersion(),releaseWindowVersion:e.getLatestFxVersion()};a.push(t)}"undefined"!=typeof Mozilla.Utils&&Mozilla.Utils.onDocumentReady((function(){if(t.isFirefoxDesktop||t.isFirefoxAndroid?t.getFirefoxDetails((function(e){a.push(e),n()})):n(),e.updateDataLayerPush(),"undefined"!=typeof window._SearchParams){var o=(new window._SearchParams).params,r=e.getAMOExperiment(o);r&&a.push({"data-ex-name":r.experiment,"data-ex-variant":r.variation})}}))}(),function(){"use strict";var e={},t=/^https:\/\/download.mozilla.org/,a=/^https:\/\/bouncer-bouncer.stage.mozaws.net/,n=/^https:\/\/dev.bouncer.nonprod.webservices.mozgcp.net/,o=/^https:\/\/itunes.apple.com/,r=/^https:\/\/apps.apple.com/,i=/^https:\/\/play.google.com/,s=/^market:\/\/play.google.com/,l=/^https:\/\/app.adjust.com/;"undefined"==typeof window.dataLayer&&(window.dataLayer=[]),e.isValidDownloadURL=function(e){return"string"==typeof e&&!!(t.test(e)||a.test(e)||n.test(e)||o.test(e)||r.test(e)||i.test(e)||s.test(e)||l.test(e))},e.getEventObject=function(e,t,a){var n=arguments.length>3&&arguments[3]!==undefined&&arguments[3],o=arguments.length>4&&arguments[4]!==undefined&&arguments[4],r={event:"product_download"};return r.product=e,r.platform=t,r.method=a,n&&(r.release_channel=n),o&&(r.download_language=o),r},e.getEventFromUrl=function(d){if("undefined"==typeof window._SearchParams)return!1;if(!e.isValidDownloadURL(d))return!1;var c;c=d.indexOf("?")>0?window._SearchParams.queryStringToObject(d.split("?")[1]):[];var u={};if(t.test(d)||a.test(d)||n.test(d)){var f=c.product,p=f.split("-"),m=p[0],w=c.os;w="osx"===w?"macos":w,w=-1!==f.indexOf("msi")?w+"-msi":w;var g=p[1];"latest"!==g&&"stub"!==g&&"msi"!==g||(g="release"),u=e.getEventObject(m,w,"site",g,c.lang)}else if(i.test(d)||s.test(d)){var v="unrecognized",h="";switch(c.id){case"org.mozilla.firefox":v="firefox",h="release";break;case"org.mozilla.fenix":v="firefox",h="nightly";break;case"org.mozilla.firefox_beta":v="firefox",h="beta";break;case"org.mozilla.focus":v="focus";break;case"org.mozilla.klar":v="klar";break;case"com.ideashower.readitlater.pro":v="pocket"}u=e.getEventObject(v,"android","store",h)}else if(r.test(d)||o.test(d)){var y="unrecognized";-1!==d.indexOf("/id989804926")?y="firefox":-1!==d.indexOf("/id1055677337")?y="focus":-1!==d.indexOf("/id1073435754")?y="klar":-1!==d.indexOf("/id309601447")&&(y="pocket"),u=e.getEventObject(y,"ios","store","release")}else l.test(d)&&(u=e.getEventObject(c.mz_pr,c.mz_pl,"adjust","release"));return u},e.handleLink=function(t){var a=t.target;if("A"!==a.nodeName&&Element.prototype.closest)a=a.closest("a");else if(!Element.prototype.closest)return!1;var n=a.href;e.sendEventFromURL(n)},e.sendEventFromURL=function(t){var a=e.getEventFromUrl(t);e.sendEvent(a)},e.sendEvent=function(e){window.dataLayer.push(e)};var d=e;"undefined"==typeof window.Mozilla&&(window.Mozilla={}),window.Mozilla.TrackProductDownload=d;for(var c=document.querySelectorAll(".ga-product-download"),u=0;u<c.length;++u)c[u].addEventListener("click",(function(e){d.handleLink(e)}),!1)}();