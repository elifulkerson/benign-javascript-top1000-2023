(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2812],{10896:function(e,i,t){"use strict";t.d(i,{Z:function(){return S}});var n=t(47568),r=t(70655),a=t(35944),o=t(67294),s=t(9229),c=t(27175),l=t(90943),u=t(94113),d=t(12944),m=t(37289),h=t(79695),Z=t(88370),f=t(48475),g=t(96657),p=t(15141),_=t(75205),b=t(64804),y=t.n(b),v=function(e){var i,t=e.handleResendToken,n=e.isNationalHomepage,r=e.isResendButtonDisabled,o=e.user;return(0,a.tZ)(a.HY,{children:(0,a.BX)("div",{className:y().VerifyEmail__Wrapper,children:[(0,a.BX)("div",{className:y().VerifyEmail__ImageInfoWrapper,children:[(0,a.BX)("div",{className:y().VerifyEmail__Info,children:[(0,a.tZ)("h2",{className:y().VerifyEmail__RequestHeading,children:"One more thing!"}),(0,a.tZ)("p",{className:y().VerifyEmail__RequestText,children:"To keep Patch local, we need you to verify your email address before you can start posting."})]}),(0,a.tZ)("div",{className:y().VerifyEmail__ImageWrapper,children:(0,a.tZ)("img",{alt:"Letter in mailbox",className:y().VerifyEmail__Image,src:"https://patch.com/img/cdn/assets/layout/mailbox-letter.png"})})]}),(0,a.BX)("p",{className:y().VerifyEmail__TroubleShoot,children:["Didn't get an email? ",(0,a.tZ)(Z.Z,{onClick:t,isDisabled:r,isNationalHomepage:n,children:"Resend"})," or ",(0,a.tZ)(f.Z,{className:"btn--link--last-step",href:"mailto:support@patch.com",children:"Get help"})]}),(0,a.tZ)("p",{children:(0,a.tZ)(f.Z,{className:y().VerifyEmail__RedirectButton,href:(null==o?void 0:null===(i=o.patch)||void 0===i?void 0:i.alias)||"/",children:"Take me home"})})]})})},S=function(e){var i,t,b=e.intent,y=void 0===b?null:b,S=e.isComposeStep,E=e.isNationalHomepage,k=e.isRegistrationStep,C=void 0!==k&&k,N=(0,c.Z)().showLoginForm,F=function(){},T=(0,s.Z)(),B=null==T?void 0:T.id,V=(0,o.useState)(!1),R=V[0],w=V[1],L=(t=(0,n.Z)(function(){var e;return(0,r.__generator)(this,function(i){switch(i.label){case 0:if(!B)return[2];i.label=1;case 1:return i.trys.push([1,3,,4]),w(!0),[4,g.Z.authUserService.generateVerificationToken({id:B,intent:y})];case 2:return i.sent(),(0,l.c$)(),(0,p.Z)({message:(0,a.tZ)("span",{children:"Success! Check your email, please"}),type:"info"}),[3,4];case 3:if((e=i.sent()).response)return(0,p.Z)({message:(0,a.BX)("span",{children:["Error: ",e.response.statusText]}),type:"danger"}),N(L),[2];return(0,p.Z)({message:(0,a.tZ)("span",{children:e.message}),type:"danger"}),w(!1),[3,4];case 4:return[2]}})}),function(){return t.apply(this,arguments)}),X=function(e){e.preventDefault(),L()};return(0,a.tZ)(a.HY,{children:E?(0,a.tZ)(v,{handleResendToken:X,isNationalHomepage:E,isResendButtonDisabled:R,user:T}):(0,a.tZ)(_.Z,{children:(0,a.BX)(u.Z,{onSubmit:F,children:[(0,a.tZ)(d.Z,{children:"One more thing!"}),(0,a.tZ)(m.Z,{children:(0,a.tZ)(h.Z,{children:(0,a.tZ)("i",{className:"fa-3x fa fa-envelope-open-text-fal text__green"})})}),(0,a.tZ)(m.Z,{children:C||void 0!==S&&S?(0,a.BX)(h.Z,{children:["To keep Patch local, we need you to verify",(0,a.tZ)("br",{}),"your email address before you can start posting."]}):(0,a.BX)(h.Z,{children:["To keep Patch local,",(0,a.tZ)("br",{}),"we now require a verified email",(0,a.tZ)("br",{}),"address before you can post.",(0,a.tZ)("br",{}),"Check the inbox for ",null==T?void 0:T.email,(0,a.tZ)("br",{}),"to verify yourself."]})}),(0,a.tZ)(m.Z,{children:(0,a.BX)(h.Z,{isSmall:!0,children:["Didn't get an email?"," ",(0,a.tZ)(Z.Z,{onClick:X,isDisabled:R,children:"Resend"})," ","/",(0,a.tZ)(f.Z,{href:"mailto:support@patch.com",children:" Help"})]})}),C&&(0,a.tZ)(h.Z,{children:(0,a.tZ)(f.Z,{href:(null==T?void 0:null===(i=T.patch)||void 0===i?void 0:i.alias)?T.patch.alias:"/",children:"Take me home"})})]})})})}},83142:function(e,i,t){"use strict";var n=t(35944),r=t(48475),a=t(72857),o=t.n(a),s=t(2807),c=t(79025),l=function(){var e=(0,s.UG)();return(0,n.tZ)(c.Z,{children:(0,n.BX)("p",{className:o().AlreadyRegisteredLink__Label,children:["Already have an account?"," ",(0,n.tZ)(r.Z,{href:"/login",onClick:e.loginNow,children:"Log in"})]})})};i.Z=l},92844:function(e,i,t){"use strict";var n=t(35944),r=function(e){var i=e.children;return(0,n.tZ)("div",{className:"auth-block",children:i})};i.Z=r},79384:function(e,i,t){"use strict";var n=t(35944),r=function(e){var i=e.onClick;return(0,n.tZ)("aside",{className:"auth-block__close",children:(0,n.tZ)("button",{className:"btn btn--link-muted auth-block__close-btn",onClick:i,type:"button",children:(0,n.tZ)("i",{className:"fa fa-times-fal"})})})};i.Z=r},75205:function(e,i,t){"use strict";var n=t(35944),r=function(e){var i=e.children;return(0,n.tZ)("div",{className:"auth-block__content",children:i})};i.Z=r},38355:function(e,i,t){"use strict";var n=t(35944),r=t(94184),a=t.n(r),o=function(e){var i=e.children,t=e.isCondensed,r=e.isModal,o=e.isNationalHomepage,s=e.isTransparent;return(0,n.tZ)("div",{className:a()(["auth-block-container",{"auth-block-container--condensed":t},{"auth-block-container--full":!r},{"auth-block-container--transparent":s},{"auth-block-container-national":o},]),children:i})};i.Z=o},62812:function(e,i,t){"use strict";t.d(i,{Z:function(){return eF}});var n,r,a=t(26042),o=t(69396),s=t(10253),c=t(35944),l=t(66257),u=t.n(l),d=t(29324),m=t(44895),h=t(79025),Z=t(58576),f=t(2802),g=t(2807),p=t(94113),_=t(64718),b=t(37289),y=t(40713),v=t(78916),S=t(67245),E=t(89663),k=t(22818),C=t(12189),N=t(67294),F=t(12944),T=function(e){var i=e.isNationalHomepage,t=e.quickRegistration,n=(0,Z.F6)().state,r=n.community,a=n.hasSubmittedSubscribeForm,o=n.noAccountExistsButEmailIsSubscribedToNewsletter,s=(0,N.useMemo)(function(){if(o)return(0,c.tZ)(c.HY,{children:"Welcome back"});var e=a&&(0,c.BX)("span",{children:["Success! ",(0,c.tZ)("br",{})]});return t?(0,c.BX)(c.HY,{children:[e,"Tell us more about yourself to join",r?" the ".concat(r.name," Patch"):" Patch"]}):i?(0,c.BX)(c.HY,{children:[(0,c.tZ)("h5",{className:"hero__form__heading hero__success__heading",children:"Success!"}),(0,c.tZ)("p",{className:"hero__subtext",children:"Now that you're subscribed to local emails, finish creating your\n          profile to get the most out of Patch. See what your neighbors are\n          saying and more."})]}):(0,c.BX)(c.HY,{children:[e,"Tell us more about yourself",(0,c.tZ)("br",{}),"to get your local news feed:"]})},[a,t,r,o,]),l=(0,N.useMemo)(function(){return o?(0,c.BX)("p",{children:["You’re signed up for Patch emails,",(0,c.tZ)("br",{}),"but you don’t have a profile yet. Please",(0,c.tZ)("br",{}),"tell us more about yourself to continue:"]}):null},[o]);return(0,c.BX)(h.Z,{children:[(0,c.tZ)(F.Z,{children:s}),l]})},B=function(){return(0,c.tZ)("hr",{className:"form__divider"})},V=t(79695),R=t(88370),w=function(e){var i=e.isHidden,t=e.onClick,n=(0,Z.F6)(),r=n.state.community,a=n.actions,o=a.setHasSubmittedSubscribeForm,s=a.changeRegistrationStep,l=(0,N.useCallback)(function(){t&&t(),o(!1),s(f.Z.subscribe)},[t,o,s]);return i?null:(0,c.BX)(h.Z,{children:[(0,c.tZ)(B,{}),(0,c.BX)(V.Z,{isSmall:!0,children:["Not in ",r.name,"?"," ",(0,c.tZ)(R.Z,{asLink:!0,onClick:l,children:"Find your community"})]})]})},L=t(48475),X=function(){return(0,c.BX)(V.Z,{isSmall:!0,children:["By creating a profile, you agree to our",(0,c.tZ)("br",{}),(0,c.tZ)(L.Z,{asLink:!0,href:"/privacy",target:"_blank",children:"Privacy Policy"})," ","and"," ",(0,c.tZ)(L.Z,{asLink:!0,href:"/terms",target:"_blank",children:"Terms of Use"})]})},H=t(83142),x=t(18262),A=function(e){var i=e.canReturnToSubscribeForm,t=e.isNationalHomepage,n=e.quickRegistration,r=(0,g.qx)(),a=(0,x.u)(e);return(0,c.BX)(p.Z,{isCondensed:!0,isNationalHomepage:t,onSubmit:a.handleSubmitForm,children:[(0,c.tZ)(T,{isNationalHomepage:t,quickRegistration:n}),(0,c.BX)("div",{className:"login--wrapper",children:[(0,c.BX)("div",{children:[(0,c.tZ)(v.Y,{error:a.getFieldFirstError("patchId"),isHidden:a.isCommunityHidden,onChange:a.resetErrors}),(0,c.tZ)(S.s,{error:a.getFieldFirstError("email"),onChange:a.resetErrors,disabled:a.isLoading}),(0,c.tZ)(E.P,{error:a.getFieldFirstError("displayName"),onChange:a.resetErrors,disabled:a.isLoading}),(0,c.tZ)(k.Z,{error:a.getFieldFirstError("password"),onChange:a.resetErrors,disabled:a.isLoading}),a.renderRecaptcha(),(0,c.tZ)(H.Z,{}),(0,c.tZ)(_.Z,{onClick:r.submit,isLoading:a.isLoading,children:"Create profile"})]}),(0,c.tZ)(y._,{onClick:r.submit,onError:a.displayErrorToast,onAuth:a.runReCaptcha,disabled:a.isLoading})]}),(0,c.BX)(b.Z,{children:[(0,c.tZ)(C.O,{onChange:a.gaSubscribeEvents.toggleSubscribeCheckbox}),(0,c.tZ)(X,{}),i&&(0,c.tZ)(w,{onClick:a.gaSubscribeEvents.findCommunity})]})]})},P=t(47568),I=t(70655),q=t(58659),D=t(96657),U=t(61607),M=t(15141),Y=t(47989),W=t(55542);(r=n||(n={})).reset="reset",r.submitForm="submitForm",r.submitFormFailed="submitFormFailed",r.submitFormSucceeded="submitFormSucceeded";var O={errorCode:null,message:null,status:q.Z.idle};function G(e,i){switch(i.type){case n.submitForm:return(0,o.Z)((0,a.Z)({},O),{status:q.Z.pending});case n.submitFormFailed:return(0,o.Z)((0,a.Z)({},O),{status:q.Z.error,errorCode:i.payload.code,message:i.payload.message});case n.submitFormSucceeded:return(0,o.Z)((0,a.Z)({},O),{status:q.Z.complete});case n.reset:return O;default:throw Error("Invalid action sent in useRegistraionForm reducer: ".concat(i.type))}}function Q(){var e=(0,s.Z)((0,W.Z)(G,O),2),i=e[0],t=e[1];return[i,{resetFormState:function(){t({type:n.reset})},submitForm:function(){t({type:n.submitForm})},submitFormFailed:function(e,i){t({type:n.submitFormFailed,payload:{code:e,message:i}})},submitFormSucceeded:function(){t({type:n.submitFormSucceeded})}}]}var J=function(e){var i,t=e.changeEmail,n=e.changeRegistrationStep,r=e.email,a=e.sendToCreateAccountWithCommunity,o=e.toSignUpViews,l=(0,s.Z)(Q(),2),u=l[0],d=l[1],m=(0,g.o7)(),h=u.status===q.Z.pending,Z=u.errorCode===Y.Z.noAccountWithEmailExists,y=function(){m.backToLogin(),n(f.Z.login)},v=function(){m.forgotPasswordToSignUp(),o()},S=function(){n(f.Z.passwordResetEmailSent)},E=function(e){d.resetFormState(),t(e.target.value)},k=(i=(0,P.Z)(function(e){var i,t,n;return(0,I.__generator)(this,function(o){switch(o.label){case 0:if(e.preventDefault(),m.submit(),h)return[2];d.submitForm(),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,D.Z.authUserService.resetPassword(r)];case 2:return o.sent(),m.success(),d.submitFormSucceeded(),S(),[3,4];case 3:if(t=(i=o.sent()).code,n=i.message,t===Y.Z.noAccountWithEmailExistsButIsSubscribedToNewsletter)return a(null==i?void 0:i.patch),[2];return n&&(0,M.Z)({message:(0,c.tZ)("span",{children:n}),type:"danger"}),d.submitFormFailed(t,n),[3,4];case 4:return[2]}})}),function(e){return i.apply(this,arguments)}),C=Z?(0,c.BX)(c.HY,{children:["Email not recognized. Please try again or",(0,c.tZ)("button",{className:"btn btn--link-error",type:"button",onClick:v,children:(0,c.tZ)("strong",{children:"sign up for a new account"})})]}):null;return(0,c.BX)(p.Z,{isCondensed:!0,onSubmit:k,children:[(0,c.BX)(F.Z,{children:["Enter your email address to",(0,c.tZ)("br",{}),"get a password reset link"]}),(0,c.tZ)(b.Z,{children:(0,c.tZ)(U.Z,{ariaLabel:"Enter your email address",autoComplete:"email",disabled:h,name:"email",placeholder:"Email address",outlined:!0,type:"email",required:!0,value:r,onChange:E,hasError:Z,errorMessage:C})}),(0,c.tZ)(_.Z,{isLoading:h,children:"Send link"}),(0,c.tZ)(b.Z,{children:(0,c.BX)(R.Z,{asLink:!0,onClick:y,children:[(0,c.tZ)("i",{className:"fa fa-chevron-left icon icon--space-right"}),(0,c.tZ)("strong",{children:"Back to login"})]})})]})},j=function(){var e=(0,Z.F6)().state.emailIsTiedToAccount;return(0,c.tZ)(h.Z,{children:(0,c.tZ)(F.Z,{children:e?"Welcome back! Log in to continue:":"Log in to get started"})})},z=function(e){var i=e.onForgotPassword,t=(0,Z.F6)().actions.changeRegistrationStep,n=(0,N.useCallback)(function(){i&&i(),t(f.Z.forgotPassword)},[i,t]);return(0,c.tZ)(b.Z,{children:(0,c.tZ)(R.Z,{asLink:!0,onClick:n,children:"Forgot your password?"})})},K=t(59062),$=t(94279),ee=t(65782),ei=t(1037),et=t(79608),en=t(34108),er=t.n(en),ea=function(){var e=(0,g.uy)();return(0,c.tZ)(h.Z,{children:(0,c.BX)("p",{className:er().LinkToRegister__Label,children:["New to Patch?"," ",(0,c.tZ)(L.Z,{href:"/register",onClick:e.signUpNow,children:"Sign up now"})]})})},eo=function(e){var i,t,n,r,l,u,d,m,h,b,v,E,C,F,T,B,V,R,w,L,X,H,x,A=e.authenticate,P=e.emailIsTiedToAccount,I=e.onCompleteForm,q=(0,et.Z)(),D=(0,g.uy)(),U=(0,$.G)(),Y=U.resetErrors,W=U.setErrors,O=U.getFieldFirstError,G=(0,Z.F6)().state,Q=G.email,J=G.password,en=(0,N.useCallback)(function(e){(0,M.Z)({message:e,type:"danger"})},[]),er=(0,N.useCallback)(function(e,i){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];D.loginSuccess(i),A(e),I(e,t)},[A,I]),eo=(0,s.Z)((r=(0,N.useRef)(),l=(0,N.useRef)(),u=(0,ei.U)(en),m=(d=(0,Z.F6)()).state,h=d.actions.reset,b=(0,N.useCallback)(function(e){h((0,o.Z)((0,a.Z)({},m),{displayName:r.current.name,socialData:r.current,socialSource:l.current,step:f.Z.oneMoreThingSocialSignUp,validationErrors:e}))},[h,m]),v=(0,N.useCallback)(function(e){er&&er(e,l.current)},[er]),E=(0,N.useCallback)(function(e){er&&er(e,l.current,!0,!0)},[er]),F=(C=(0,s.Z)((0,K.tS)(v,E,en,b),2))[0],T=C[1],V=(B=(0,s.Z)((0,ee.Z)(F,en),2))[0],R=B[1],w=(0,N.useCallback)(function(){m.community&&r.current.name?R(r.current,l.current):("function"==typeof n&&n(),h((0,o.Z)((0,a.Z)({},m),{email:r.current.email,displayName:r.current.name,socialData:r.current,socialSource:l.current,step:f.Z.oneMoreThingSocialSignUp,validationErrors:null})))},[m,h,R,n]),L=(0,N.useCallback)(function(e){(0,ei.X)(e)?w():u(e)},[u,w]),H=(X=(0,s.Z)((0,K.oF)(v,null,null,L),2))[0],x=X[1],[(0,N.useCallback)(function(e,i){r.current=e,l.current=i,H(e.token,i)},[H]),V,x||T]),3),es=eo[0],ec=eo[1],el=eo[2],eu=(0,s.Z)((0,K.Og)(er,en,W),2),ed=eu[0],em=eu[1]||el,eh=(0,N.useCallback)(function(e){e.preventDefault(),ed(Q,J)},[ed,Q,J]);return(0,N.useEffect)(function(){P&&J&&Q&&J.trim().length&&Q.trim().length&&ed(Q,J)},[P]),(0,c.BX)(p.Z,{isCondensed:!0,onSubmit:eh,children:[(0,c.tZ)(j,{}),(0,c.BX)("div",{className:"login--wrapper",children:[(0,c.BX)("div",{children:[(0,c.tZ)(S.s,{disabled:em,onChange:Y,error:O("username")}),(0,c.tZ)(k.Z,{disabled:em,onChange:Y,error:O("password")}),!q&&ec(),(0,c.tZ)(_.Z,{onClick:D.loginSubmit,isLoading:em,children:"Log in"}),(0,c.tZ)(ea,{})]}),(0,c.tZ)(y._,{disabled:em,onAuth:es,onError:en,onClick:D.loginSubmit})]}),(0,c.tZ)(z,{onForgotPassword:D.forgotPassword})]})},es=function(e){var i,t=e.changeRegistrationStep,n=e.email,r=(0,g.o7)(),a=function(){r.backToLogin(),t(f.Z.login)},o=(i=(0,P.Z)(function(e){return(0,I.__generator)(this,function(i){return e.preventDefault(),[2]})}),function(e){return i.apply(this,arguments)});return(0,c.BX)(p.Z,{onSubmit:o,children:[(0,c.tZ)(F.Z,{children:"Success! Check your email"}),(0,c.BX)(b.Z,{children:[(0,c.BX)(V.Z,{isSmall:!0,children:["An email containing a password reset link has been sent to"," ",(0,c.tZ)("em",{children:n}),"."]}),(0,c.BX)(V.Z,{isSmall:!0,children:["If you don’t receive it within 20 minutes, please check your spam folder or ",(0,c.tZ)("a",{href:"mailto:support@patch.com",children:"click here"})," for support."]})]}),(0,c.tZ)(b.Z,{children:(0,c.BX)(R.Z,{onClick:a,children:[(0,c.tZ)("i",{className:"fa fa-chevron-left icon icon--space-right"}),(0,c.tZ)("strong",{children:"Back to login"})]})})]})},ec=t(94184),el=t.n(ec),eu=t(33759),ed=t(44074),em=t(26016),eh=t(9905),eZ=function(e){var i,t=e.changeEmail,n=e.changeCommunity,r=e.changeRegistrationStep,a=e.community,o=e.email,l=e.isCondensed,u=e.isNationalHomepage,d=e.sendToLoginSinceEmailIsTiedToExistingAccount,m=e.setHasSubmittedSubscribeForm,h=e.shouldSubscribeOnAccountCreation,Z=e.subscribeModule,y=e.subscribeAnalyticsLabel,v=e.toggleShouldSubscribeOnAccountCreation,S=(0,s.Z)(Q(),2),E=S[0],k=S[1],C=(0,g.UG)(),N=E.status===q.Z.pending,T=E.errorCode===Y.Z.missingCommunity,w=l?(0,c.tZ)(c.HY,{children:u?(0,c.BX)(c.HY,{children:[(0,c.tZ)("p",{className:"hero__form__heading",children:"Get the news that matters most delivered straight to you"}),(0,c.tZ)("p",{className:"hero__subtext",children:"Receive free, real-time email updates throughout the day about what’s happening locally."})]}):(0,c.BX)(c.HY,{children:["Get the news that matters most",(0,c.tZ)("br",{}),"delivered straight to you"]})}):(0,c.BX)(c.HY,{children:["Find out what’s happening",(0,c.tZ)("br",{}),"outside your front door"]}),L=function(e){t(e.target.value)},X=function(e){T&&k.resetFormState(),n(e)},x=function(){C.toggleSubscribeCheckbox(h),v()},A=(i=(0,P.Z)(function(e){var i,t,n,s,c,l,u,g,p,_,b,v,S,E;return(0,I.__generator)(this,function(c){switch(c.label){case 0:if(e.preventDefault(),!a)return k.submitFormFailed(Y.Z.missingCommunity,"Town or ZIP code not recognized"),[2];if(!o.trim().length)return[2];if(!h)return r(f.Z.createAccount),[2];if(C.submit(y),N)return[2];k.submitForm(),c.label=1;case 1:return c.trys.push([1,4,,5]),[4,D.Z.authUserService.subscribeToNewsletter(o,a.id,Z,(0,eh.q)("utm_source"))];case 2:return i=c.sent(),[4,(0,em.K)(em.a.emailSubscribe)];case 3:return c.sent(),t=i.data,n=i.message,s=t.userfound,C.success(y),(0,M.Z)({message:n,type:"success"}),m(!0),k.submitFormSucceeded(),s?d():r(f.Z.createAccount),[3,5];case 4:if(u=(l=c.sent()||{}).message,_=(p=(null==(g=l.response)?void 0:g.data)||{}).data,b=p.message,S=(v=_||{}).ifPreviouslySubscribed,E=v.userfound,S)return(0,M.Z)({message:b||u,type:"default"}),k.submitFormSucceeded(),m(!0),E?d():r(f.Z.createAccount),[2];return(0,M.Z)({message:b||u,type:"danger"}),k.submitFormFailed(Y.Z.emailIsAlreadySubscribedToNewsletter,u),[3,5];case 5:return[2]}})}),function(e){return i.apply(this,arguments)});return(0,c.BX)(p.Z,{isCondensed:!0,isNationalHomepage:u,onSubmit:A,children:[(0,c.tZ)(F.Z,{children:w}),u&&(0,c.tZ)(V.Z,{isNationalHomepage:u,children:"Subscribe here"}),(0,c.tZ)(b.Z,{children:(0,c.tZ)(ed.Z,{searchTypes:[eu.default.community,eu.default.seedling,],hasError:T,selectedCommunity:a,isSmall:!1,onSelect:X,outlined:!0,required:!0})}),(0,c.tZ)(b.Z,{children:(0,c.tZ)(U.Z,{ariaLabel:"Enter your email address",autoComplete:"email",disabled:N,name:"email",outlined:!0,placeholder:"Email address",type:"email",required:!0,value:o,onChange:L})}),(0,c.tZ)(H.Z,{}),(0,c.tZ)(_.Z,{isLoading:N,children:"Find your community"}),!l&&(0,c.BX)(b.Z,{children:[(0,c.BX)(R.Z,{isMuted:!0,noBorder:!0,onClick:x,children:[(0,c.tZ)("i",{className:el()(["fa icon icon--space-right",h?"fa-check-square":"fa-square",])}),"Send me local news updates"]}),(0,c.tZ)(B,{})]})]})},ef=t(10896),eg=t(92844),ep=t(79384),e_=t(75205),eb=t(38355),ey=t(56199),ev=t(45351),eS=t.n(ev),eE=function(e){var i=e.children;return(0,c.tZ)("div",{className:eS().FormHeading,children:i})},ek=function(e){var i=e.hasCommunityInput,t=e.hasDisplayNameInput,n=null;return i&&t?n="Choose your home community and tell us your name":i?n="Choose your home community":t&&(n="Tell us your name"),(0,c.BX)(eE,{children:[(0,c.tZ)("div",{children:"One more thing!"}),(0,c.BX)("div",{children:[n," to finish creating your Patch profile:"]})]})},eC=t(42004),eN=function(e){var i=(0,eC.X)(e),t=(0,g.qx)(),n=i.socialSource,r=(0,N.useCallback)(function(){t.submit(n)},[t,n]);return(0,c.BX)(p.Z,{isCondensed:!0,onSubmit:i.handleSubmitForm,children:[(0,c.tZ)(ek,{hasCommunityInput:!i.isCommunityHidden,hasDisplayNameInput:!i.isNameHidden}),(0,c.tZ)(v.Y,{isHidden:i.isCommunityHidden,error:i.getFieldFirstError("patchId"),onChange:i.resetErrors,disabled:i.isLoading}),(0,c.tZ)(E.P,{isHidden:i.isNameHidden,error:i.getFieldFirstError("displayName"),onChange:i.resetErrors,disabled:i.isLoading}),i.renderRecaptcha(),(0,c.tZ)(_.Z,{isLoading:i.isLoading,onClick:r,children:"Create profile"})]})},eF=function(e){var i=e.hasSubmittedSubscribeForm,t=e.initialEmail,n=e.initialStep,r=void 0===n?f.Z.subscribe:n,l=e.isCondensed,p=void 0===l?null:l,_=e.isModal,b=void 0===_?null:_,y=e.isNationalHomepage,v=e.isTransparent,S=e.quickRegistration,E=e.onClose,k=e.onComplete,C=e.subscribeAnalyticsLabel,N=void 0===C?"signup_box":C,F=e.subscribeModule,T=void 0===F?"signup_box":F,B=e.socialData,V=void 0===B?null:B,R=e.socialSource,w=e.emailIsTiedToAccount,L=(0,m.Z)().authenticate,X=(0,g.yJ)(),H=(0,g.qx)(),x=(0,d.Z)(),P={email:void 0===t?"":t,step:r,hasSubmittedSubscribeForm:i,community:u()(null==x?void 0:x.type)?x:null,quickRegistration:S,displayName:null==V?void 0:V.name,socialData:V,socialSource:void 0===R?null:R,emailIsTiedToAccount:void 0!==w&&w},I=(0,s.Z)((0,Z.ZP)(P),3),q=I[0],D=I[1],U=I[2],M=[f.Z.login,f.Z.forgotPassword,f.Z.passwordResetEmailSent,].includes(q.step),Y=function(){var e=q.quickRegistration||q.hasSubmittedSubscribeForm?f.Z.createAccount:f.Z.subscribe;D.changeRegistrationStep(e)},W=function(){X.closeModal(M),E()},O=function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i?D.reset((0,o.Z)((0,a.Z)({},q),{step:f.Z.successSocialSignUp})):D.reset(P),k&&k(e,i)},G=function(e,i){H.createAccountSuccess(i),O(e)},Q=q.step===f.Z.successSocialSignUp;return(0,c.BX)(U.Provider,{value:{state:q,actions:D},children:[Q&&(0,c.tZ)(ey.Z,{flat:b,isEmailVerified:!0,error:null,intent:null}),!Q&&(0,c.tZ)(eb.Z,{isCondensed:p,isModal:b,isNationalHomepage:y,isTransparent:void 0===v?null:v,children:(0,c.BX)(eg.Z,{children:[(0,c.tZ)(h.Z,{children:E&&(0,c.tZ)(ep.Z,{onClick:W})}),(0,c.tZ)(e_.Z,{children:function(e){switch(e){case f.Z.createAccount:return(0,c.tZ)(A,{authenticate:L,canReturnToSubscribeForm:!!P.community,isNationalHomepage:y,onCompleteForm:G,quickRegistration:S});case f.Z.forgotPassword:return(0,c.tZ)(J,{changeEmail:D.changeEmail,changeRegistrationStep:D.changeRegistrationStep,email:q.email,sendToCreateAccountWithCommunity:D.sendToCreateAccountWithCommunity,toSignUpViews:Y});case f.Z.login:return(0,c.tZ)(eo,{authenticate:L,emailIsTiedToAccount:q.emailIsTiedToAccount,onCompleteForm:O});case f.Z.oneMoreThingSocialSignUp:return(0,c.tZ)(eN,{authenticate:L,onCompleteForm:G});case f.Z.passwordResetEmailSent:return(0,c.tZ)(es,{changeRegistrationStep:D.changeRegistrationStep,email:q.email});case f.Z.oneMoreStepMessage:return(0,c.tZ)(ef.Z,{isNationalHomepage:y,isRegistrationStep:!0});case f.Z.subscribe:default:return(0,c.tZ)(eZ,{changeCommunity:D.changeCommunity,changeEmail:D.changeEmail,changeRegistrationStep:D.changeRegistrationStep,community:q.community,email:q.email,isCondensed:p,isNationalHomepage:y,sendToLoginSinceEmailIsTiedToExistingAccount:D.sendToLoginSinceEmailIsTiedToExistingAccount,setHasSubmittedSubscribeForm:D.setHasSubmittedSubscribeForm,shouldSubscribeOnAccountCreation:q.shouldSubscribeOnAccountCreation,subscribeAnalyticsLabel:N,subscribeModule:T,toggleShouldSubscribeOnAccountCreation:D.toggleShouldSubscribeOnAccountCreation})}}(q.step)})]})})]})}},94113:function(e,i,t){"use strict";var n=t(35944),r=t(94184),a=t.n(r),o=function(e){var i=e.children,t=e.isCondensed,r=e.isNationalHomepage,o=e.onSubmit;return(0,n.tZ)("form",{className:"form",onSubmit:o,children:(0,n.tZ)("div",{className:a()(["form__inner",{"form__inner--is-condensed":void 0!==t&&t},{form__inner__national:r},]),children:i})})};i.Z=o},79695:function(e,i,t){"use strict";var n=t(35944),r=t(94184),a=t.n(r),o=function(e){var i=e.children,t=e.isError,r=e.isNationalHomepage,o=e.isSmall;return(0,n.tZ)("p",{className:a()(["paragraph",{"form__error-message":void 0!==t&&t,"paragraph--small":void 0!==o&&o,"paragraph--national":r},]),children:i})};i.Z=o},12944:function(e,i,t){"use strict";var n=t(35944),r=function(e){var i=e.children;return(0,n.tZ)("h2",{className:"form__title",children:i})};i.Z=r},64718:function(e,i,t){"use strict";var n=t(35944),r=t(94184),a=t.n(r),o=t(37289),s=function(e){var i=e.children,t=e.isLoading,r=e.isSecondaryTheme,s=e.isOutline,c=e.onClick,l=e.className,u="filled"===e.variant;return(0,n.tZ)(o.Z,{children:(0,n.BX)("button",{className:a()(["btn","btn--cta",{"btn--subscribe":void 0!==r&&r,"btn--outline-primary":void 0!==s&&s,"btn--loading":t,"btn--rounded":u,"btn--greenPrimaryBase":u},l,]),disabled:t,type:"submit",onClick:c,children:[i,t&&(0,n.tZ)("i",{className:"fa fa-spinner icon icon--space-left spin"})]})})};i.Z=s},56199:function(e,i,t){"use strict";var n=t(47568),r=t(14924),a=t(70655),o=t(35944),s=t(67294),c=t(94184),l=t.n(c),u=t(16826),d=t(58675),m=t(9229),h=t(27175),Z=t(90943),f=t(48475),g=t(94113),p=t(79695),_=t(64718),b=t(96657),y=t(15141),v=t(24182),S=t.n(v),E=function(e){var i,t=e.isEmailVerified,c=e.intent,v=e.error,E=e.flat,k=(0,s.useContext)(d.Z).URLS.MYPATCH_URL,C=(0,s.useState)(!1),N=C[0],F=C[1],T=(0,h.Z)().showLoginForm,B=(0,m.Z)(),V=(0,s.useMemo)(function(){var e;return(null==B?void 0:null===(e=B.patch)||void 0===e?void 0:e.alias)?"".concat(B.patch.alias,"/compose"):"/compose"},[B]),R=(0,u.Z)(null==B?void 0:B.patch.type);(0,s.useEffect)(function(){(0,Z.c$)()},[]);var w=(i=(0,n.Z)(function(e){var i;return(0,a.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),F(!0),[4,b.Z.authUserService.generateVerificationToken({id:null==e?void 0:e.id})];case 1:return t.sent(),setTimeout(function(){return F(!1)},6e3),(0,y.Z)({message:(0,o.tZ)("span",{children:"Check your email, please!"}),type:"success"}),[3,3];case 2:return(i=t.sent()).response&&(0,y.Z)({message:(0,o.BX)("span",{children:["Error",i.response.statusText]}),type:"danger"}),T(w),[3,3];case 3:return[2]}})}),function(e){return i.apply(this,arguments)}),L=function(e){e.preventDefault(),B&&w(B)};return(0,o.tZ)("section",{className:l()(S().EmailVerification,(0,r.Z)({},S().Flat,E)),children:(0,o.BX)("div",{className:S().EmailVerification__content,children:[(0,o.tZ)("h1",{className:S().EmailVerification__heading,children:t?"Success!":"Oops! Something went wrong."}),t&&(0,o.BX)("div",{className:S().EmailVerification__content,children:[(0,o.BX)("p",{className:S().EmailVerification__text,children:["Your email address has been verified and you are ready",(0,o.tZ)("br",{}),"to get started on Patch. Here's what you can do next:"]}),!R&&(0,o.tZ)("p",{className:S().EmailVerification__StartPosting,children:(0,o.tZ)(f.Z,{href:c||V,className:S().EmailVerification__PostLink,children:"Start posting"})}),(0,o.tZ)("p",{className:S().EmailVerification__text,children:(0,o.BX)(f.Z,{className:S().EmailVerification__link,href:"/profile/edit",children:[(0,o.tZ)("i",{className:"fa fa-search-fas icon icon--space-right text text--primary"}),"Find more communities to follow"]})}),(0,o.tZ)("p",{className:S().EmailVerification__text,children:(0,o.BX)(f.Z,{className:S().EmailVerification__link,href:"".concat(k,"/node/add/user-profile"),children:[(0,o.tZ)("i",{className:"fa fa-user-fas icon icon--space-right text text--primary"}),"Finish filling out your profile"]})})]}),!t&&(0,o.BX)("div",{className:S().EmailVerification__content,children:[(0,o.BX)("p",{className:S().EmailVerification__ResendText,children:["You may have already verified your account. Check your"," ",(0,o.tZ)(f.Z,{href:"".concat(k,"/node/add/user-profile"),className:S().EmailVerification__link,children:"Edit Profile"})," ","page to see your verification status, or try again."]}),(0,o.tZ)("p",{className:S().EmailVerification__error,children:v}),(0,o.tZ)(g.Z,{onSubmit:L,isCondensed:!0,children:(0,o.tZ)(p.Z,{children:(0,o.tZ)(_.Z,{isLoading:N,children:"Resend verification email"})})})]})]})})};i.Z=E},72857:function(e){e.exports={AlreadyRegisteredLink__Label:"styles_AlreadyRegisteredLink__Label__CJAyq"}},34108:function(e){e.exports={LinkToRegister__Label:"styles_LinkToRegister__Label__Pjgv4"}},64804:function(e){e.exports={VerifyEmail__Wrapper:"styles_VerifyEmail__Wrapper__v8RBr",VerifyEmail__ImageInfoWrapper:"styles_VerifyEmail__ImageInfoWrapper__ea2KE",VerifyEmail__Info:"styles_VerifyEmail__Info__RaDTi",VerifyEmail__RequestHeading:"styles_VerifyEmail__RequestHeading__YaR_1",VerifyEmail__RequestText:"styles_VerifyEmail__RequestText__ofrwG",VerifyEmail__ImageWrapper:"styles_VerifyEmail__ImageWrapper__1YQ_w",VerifyEmail__Image:"styles_VerifyEmail__Image__ckLZE",VerifyEmail__TroubleShoot:"styles_VerifyEmail__TroubleShoot__DgWQe",VerifyEmail__RedirectButton:"styles_VerifyEmail__RedirectButton__Ixxg4"}},24182:function(e){e.exports={EmailVerification:"styles_EmailVerification__2opuQ",Flat:"styles_Flat__L5LZg",EmailVerification__heading:"styles_EmailVerification__heading__5g9L0",EmailVerification__content:"styles_EmailVerification__content__XwJZg",EmailVerification__text:"styles_EmailVerification__text__nX1cE",EmailVerification__error:"styles_EmailVerification__error__skvtm",EmailVerification__linkLight:"styles_EmailVerification__linkLight__gRsHc",EmailVerification__link:"styles_EmailVerification__link__quGo1",EmailVerification__PostLink:"styles_EmailVerification__PostLink__k26MQ",EmailVerification__StartPosting:"styles_EmailVerification__StartPosting__mRU5i",EmailVerification__ResendText:"styles_EmailVerification__ResendText__dlcfE"}}}]);