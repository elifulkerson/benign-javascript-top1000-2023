"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[536],{91536:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var i,o,a=n(85893),r=n(67294),s=n(68341),d=n(47857),c=n(48104),l=n(77503),f=n(51068),u=n(1335);(i=o||(o={})).ApiReady="apiReady",i.Ready="ready",i.EmailCaptured="emailCapture",i.PhoneNumberCaptured="phoneCapture",i.ConversationStarted="startConversation",i.ConversationSelected="conversation:selected",i.ConversationButtonClicked="conversation:buttonClicked",i.ConversationInteracted="conversation:firstInteraction",i.ConversationPlaybookClicked="conversation:playbookClicked",i.ConversationPlaybookFired="conversation:playbookFired",i.ConversationPlaybookDismissed="conversation:playbookDismissed",i.MeetingRequested="scheduling:requestMeeting",i.MeetingBooked="scheduling:meetingBooked",i.WelcomeMessageOpened="welcomeMessage:open",i.WelcomeMessageClosed="welcomeMessage:close",i.AwayMessageOpened="awayMessage:open",i.AwayMessageClosed="awayMessage:close",i.MessageReceived="message",i.MessageSent="message:sent",i.CampaignClicked="campaign:click",i.CampaignSubmitted="campaign:submit",i.CampaignOpened="campaign:open",i.CampaignDismissed="campaign:dismiss",i.SliderClosed="sliderMessage:close",i.ChatOpened="chatOpen",i.ChatClosed="chatClose",i.SidebarOpened="sidebarOpen",i.SidebarClosed="sidebarClose",i.UserAttributesUpdated="user:attributesUpdated",i.GdprClicked="gdprClicked",i.FormDataCollected="formDataCollected",i.SetContext="setContext";let p=[o.Ready,o.ChatOpened,o.ChatClosed,o.SidebarOpened,o.SidebarClosed,o.ConversationPlaybookFired,o.MessageSent,o.MessageReceived],g=(e,t)=>{window.addEventListener(e,()=>{let e=document.getElementById("drift-iframe");if(e&&e.contentWindow){let n=t();e.contentWindow.postMessage(n,"*")}})},m=(e,t)=>{window.removeEventListener(e,()=>{let e=document.getElementById("drift-iframe");if(e&&e.contentWindow){let n=t();e.contentWindow.postMessage(n,"*")}})},w=()=>({window:{location:{hash:location.hash,href:location.href,origin:location.origin,pathname:location.pathname,port:location.port,protocol:location.protocol,search:location.search},navigator:{language:window.navigator.language,userAgent:window.navigator.userAgent},innerHeight:window.innerHeight,innerWidth:window.innerWidth},document:{title:document.title,referrer:document.referrer}});var y=()=>{let{pageId:e,slug:t}=(0,r.useContext)(d.z),{user:n}=(0,c.xJ)(),i=(0,s.bK)(),y=(0,r.useRef)(!1),[C,h]=(0,r.useState)(!1),v=(0,r.useCallback)(async()=>{let e;if(n.isNone||n.isAnonymous)return{};if("Premium"===n.type)try{e=await i.subscription.getStatus()}catch(e){(0,l.H)("Error fetching subscription info for Drift: ".concat((0,f.c)(e)),l.c.Drift,e)}let t={email:n.email,name:n.name,userType:"Premium"===n.type&&n.institutionId?"GB":n.type,...n.customFieldRole&&{userRole:n.customFieldRole},...(null==e?void 0:e.expirationDate)&&{expirationDate:null==e?void 0:e.expirationDate}};if(n.institutionId)try{let{institution:e}=await i.institution.getInstitutionUser();return{...t,companyName:e.name,companyType:e.organizationType}}catch(e){(0,l.H)("Error fetching institution info for Drift: ".concat((0,f.c)(e)),l.c.Drift,e)}return t},[n]),b=(i,a)=>{let r=function(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u.Sq[i](e,t,location.href,o.conversationId,n.institutionId,o.repId)};if(p.includes(i))switch(i){case o.Ready:r("widgetDriftReady");break;case o.ChatOpened:case o.SidebarOpened:r("widgetDriftOpen");break;case o.ChatClosed:case o.SidebarClosed:r("widgetDriftClose");break;case o.ConversationPlaybookFired:r("widgetDriftPlaybookFired");break;case o.MessageSent:r("widgetDriftMessageSent",a);break;case o.MessageReceived:r("widgetDriftMessageReceived",a);break;case o.SetContext:r("widgetDriftSetContext");break;default:return}},k=e=>{let t=document.getElementById("drift-iframe");if(!(t&&t.contentWindow)&&e.source===t.contentWindow){(0,l.H)("No iframe and content window",l.c.Drift);return}let n=e.data;if(n&&n.type)switch(n.type){case"driftIframeReady":if(t.contentWindow){b("driftSetContext",n.data);let e=w();t.contentWindow.postMessage({type:"driftSetContext",data:e},"*")}break;case"driftReady":b(o.Ready,n.data),h(!0),v().then(e=>{t.contentWindow&&t.contentWindow.postMessage({type:"driftSetUserAttributes",data:e},"*")});break;case"driftIframeResize":{let e=n.data.styles;for(let n in e)e.hasOwnProperty(n)&&t.style.setProperty(n,e[n]);break}default:b(n.type,n.data)}},D=()=>{g("resize",()=>({type:"driftUpdateContext",data:w()})),g("scroll",()=>({type:"driftParentScroll",data:{scroll:!0},target:"drift.parentScroll"})),window.addEventListener("message",k)},S=()=>{m("resize",()=>({type:"driftUpdateContext",data:w()})),m("scroll",()=>({type:"driftParentScroll",data:{scroll:!0},target:"drift.parentScroll"})),window.removeEventListener("message",k)},M=()=>{let e=document.getElementById("drift-iframe");!C&&e&&e.contentWindow&&(b("driftSetContext",{}),e.contentWindow.postMessage({type:"driftSetContext",data:w()},"*"))};return(0,r.useEffect)(()=>(y.current=!0,D(),M(),u.Sq.widgetDriftRender(e,t,location.href,void 0,n.institutionId,void 0),S),[]),(0,a.jsx)("iframe",{id:"drift-iframe",src:"https://grammarlychat.com",style:{border:"none",width:0,height:0}})},C=n(58218);let h=(e,t)=>'\n  !function() {\n    var t = window.driftt = window.drift = window.driftt || [];\n    if (!t.init) {\n      if (t.invoked) return void (window.console && console.error && console.error("Drift snippet included twice."));\n      t.invoked = !0, t.methods = [ "identify", "config", "track", "reset", "debug", "show", "ping", "page", "hide", "off", "on" ],\n      t.factory = function(e) {\n        return function() {\n          var n = Array.prototype.slice.call(arguments);\n          return n.unshift(e), t.push(n), t;\n        };\n      }, t.methods.forEach(function(e) {\n        t[e] = t.factory(e);\n      }), t.load = function(t) {\n        var e = 3e5, n = Math.ceil(new Date() / e) * e, o = document.createElement("script");\n        o.type = "text/javascript", o.async = !0, o.crossorigin = "anonymous", o.src = "https://js.driftt.com/include/" + n + "/" + t + ".js";\n        var i = document.getElementsByTagName("script")[0];\n        i.parentNode.insertBefore(o, i);\n      };\n    }\n  }();\n  drift.SNIPPET_VERSION = \''.concat(t,"';\n  drift.load('").concat(e,"');\n"),v=(e,t)=>window.drift.on(e,t);var b=()=>{let{pageId:e,slug:t}=(0,r.useContext)(d.z),{user:n}=(0,c.xJ)(),i=(0,s.bK)(),p=(0,r.useRef)(!1);(0,r.useEffect)(()=>{window.hasOwnProperty("drift")||p.current||(g(),b())},[]);let g=()=>{p.current=!0;let{id:e,version:t}=(0,C.i)().drift,n=document.createElement("script");n.innerHTML=h(e,t),n.async=!0,document.head.appendChild(n)},m=async()=>{let e;if("Premium"===n.type)try{e=await i.subscription.getStatus()}catch(e){(0,l.H)("Error fetching subscription info for Drift: ".concat((0,f.c)(e)),l.c.Drift,e)}let t={email:n.email,name:n.name,userType:"Premium"===n.type&&n.institutionId?"GB":n.type,...n.customFieldRole&&{userRole:n.customFieldRole},...(null==e?void 0:e.expirationDate)&&{expirationDate:null==e?void 0:e.expirationDate}};if(n.institutionId)try{let{institution:e}=await i.institution.getInstitutionUser();return{...t,companyName:e.name,companyType:e.organizationType}}catch(e){(0,l.H)("Error fetching institution info for Drift: ".concat((0,f.c)(e)),l.c.Drift,e)}return t},w=()=>{n.isNone||n.isAnonymous||m().then(e=>window.drift.api.setUserAttributes(e))},y=function(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u.Sq[i](e,t,location.href,o.conversationId,n.institutionId,o.repId)},b=()=>{v(o.Ready,()=>{y("widgetDriftReady"),w()}),v(o.ChatOpened,()=>y("widgetDriftOpen")),v(o.SidebarOpened,()=>y("widgetDriftOpen")),v(o.ChatClosed,()=>y("widgetDriftClose")),v(o.SidebarClosed,()=>y("widgetDriftClose")),v(o.ConversationPlaybookFired,()=>y("widgetDriftPlaybookFired")),v(o.MessageSent,e=>{let{conversationId:t}=e;return y("widgetDriftMessageSent",{conversationId:t})}),v(o.MessageReceived,e=>{let{conversationId:t,teamMember:{id:n}}=e;return y("widgetDriftMessageReceived",{conversationId:t,repId:n})})};return(0,a.jsx)(a.Fragment,{})},k=()=>{let{isSecureDriftEnabled:e}=(0,s.jp)();return e?(0,a.jsx)(y,{}):(0,a.jsx)(b,{})}}}]);