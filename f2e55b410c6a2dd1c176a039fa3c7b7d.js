(()=>{"use strict";ExpressApp.Taboola={loaded:!1,initializeIn20Seconds:null,initialized:!1,interval:null,isArticle:!1,isHomepage:!1,consentData:{noniabconsent:null,tcfv2consent:null},numOfPushedSlots:0,numOfPushedPendingSlots:0,pendingSlots:[],firstSlotsPackSize:7,mantisSlotsNum:0,Init:()=>{window._taboola=window._taboola||[],ExpressApp.Taboola.interval=setInterval((()=>{"undefined"!=typeof flagTcfLoaded&&flagTcfLoaded&&(ExpressApp.Log("[TABOOLA] tcfloaded. Loading taboola script."),clearInterval(ExpressApp.Taboola.interval),setTimeout((()=>{ExpressApp.Taboola.LoadScript(),ExpressApp.Taboola.NonConsent()}),isMobileDevice?3e3:0),setTimeout((()=>{ExpressApp.Log("[TABOOLA] Additional flush."),ExpressApp.Taboola.Flush()}),1e4))}),500),ExpressApp.Taboola.FindParagraph()},LoadScript:()=>{var o,e,a;ExpressApp.Log("[TABOOLA] Loading ..."),ExpressApp.Taboola.loaded=!0,window._taboola=window._taboola||[],window._taboola.push({article:"auto"}),o=document.createElement("script"),e=document.getElementsByTagName("script")[0],a="tb_loader_script",document.getElementById(a)||(o.async=!0,o.defer=!0,o.src="//cdn.taboola.com/libtrc/tmg-network/loader.js",o.id=a,e.parentNode.insertBefore(o,e)),ExpressApp.Taboola.loaded=!0,window.performance&&"function"==typeof window.performance.mark&&window.performance.mark("tbl_ic")},Push:(o,e=!1)=>{window._taboola=window._taboola||[],ExpressApp.Log("[TABOOLA] numOfPushedSlots:",ExpressApp.Taboola.numOfPushedSlots),"undefined"!=typeof TRC&&TRC.trcImplAvailableDispatched&&(e=!0,ExpressApp.Log("[TABOOLA] trcImplAvailableDispatched",TRC.trcImplAvailableDispatched)),++ExpressApp.Taboola.numOfPushedSlots<=ExpressApp.Taboola.firstSlotsPackSize||e?(ExpressApp.Log("[TABOOLA] Push data:",o),window._taboola.push(o)):(ExpressApp.Log("[TABOOLA] Push data to trcImplAvailable:",o),window._taboola.push({listenTo:"trcImplAvailable",handler:()=>{setTimeout((()=>{ExpressApp.Taboola.PushPending(o)}),0)}})),ExpressApp.Taboola.numOfPushedSlots%ExpressApp.Taboola.firstSlotsPackSize==0&&(ExpressApp.Log("[TABOOLA] Batch flush"),ExpressApp.Taboola.Flush())},PushPending:o=>{ExpressApp.Log("[TABOOLA] Push data from trcImplAvailable:",o),window._taboola=window._taboola||[],window._taboola.push(o),++ExpressApp.Taboola.numOfPushedPendingSlots%ExpressApp.Taboola.firstSlotsPackSize!=0&&ExpressApp.Taboola.numOfPushedPendingSlots+ExpressApp.Taboola.firstSlotsPackSize!==ExpressApp.Taboola.numOfPushedSlots||(ExpressApp.Log("[TABOOLA] Batch flush in pending"),ExpressApp.Taboola.Flush())},PushMantisPending:o=>{window._taboola=window._taboola||[],"undefined"!=typeof TRC&&TRC.trcImplAvailableDispatched?(ExpressApp.Log("[TABOOLA] trcImplAvailableDispatched",TRC.trcImplAvailableDispatched),window._taboola.push(o)):(ExpressApp.Log("[TABOOLA] Push data to trcImplAvailable:",o),window._taboola.push({listenTo:"trcImplAvailable",handler:()=>{setTimeout((()=>{ExpressApp.Taboola.PushPending(o),++ExpressApp.Taboola.mantisSlotsNum%3==0&&(ExpressApp.Taboola.Flush(),ExpressApp.Taboola.LoadScript())}),0)}}))},Flush:()=>{ExpressApp.Log("[TABOOLA] Flush data"),window._taboola=window._taboola||[],window._taboola.push({flush:!0})},FindParagraph:()=>{ExpressApp.Taboola.initialized?ExpressApp.Log("[TABOOLA] Taboola midlle widget has been initialized already."):(ExpressApp.Log("[TABOOLA] Taboola midlle widget has been initialized."),ExpressApp.Taboola.initialized=!0,document.querySelectorAll('div[data-type="article-body"] div.text-description')&&ExpressApp.Taboola.AddCode())},isMobile:()=>{const o=navigator.userAgent;return/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/.test(o)},AddCode:()=>{ExpressApp.Log("[TABOOLA] AddCode");let o=document.getElementById("taboola-ad"),e=document.querySelectorAll('div[data-type="taboola-2-2"]');o&&(o.innerHTML='<div id="taboola-mid-article-express"></div>',ExpressApp.Taboola.isMobile()?ExpressApp.Taboola.Push({mode:"thumbnails-m-amp",container:"taboola-mid-article-express",placement:"Mid Article Express",target_type:"mix"}):ExpressApp.Taboola.Push({mode:"thumbnails-mid",container:"taboola-mid-article-express",placement:"Mid Article Express",target_type:"mix"})),e.length&&e.forEach((o=>{ExpressApp.Log("[TABOOLA] taboolaAd2",o.dataset),ExpressApp.Taboola.isMobile()?ExpressApp.Taboola.Push({mode:"thumbnails-m",container:o.id,placement:"Mobile Mid Category Thumbnails - "+o.dataset.taboola,target_type:"mix"}):ExpressApp.Taboola.Push({mode:"thumbnails-mm",container:o.id,placement:"Mid Category Thumbnails - "+o.dataset.taboola,target_type:"mix"})})),ExpressApp.Log("[TABOOLA] placeholder set")},NonConsent:()=>{ExpressApp.Taboola.ShowNonConsent().then((()=>{const o=document.querySelectorAll("[data-tb-non-consent]");window.commercialData.info.shouldbypassgam=!0,window.WITHNAIL_APPLY_TABOOLA_NC_SLOT=ExpressApp.Taboola.MantisNonConsentSlot,o.forEach((o=>{ExpressApp.Log("[TABOOLA] NonConsent slot:",o);const e=document.createElement("div");e.id=o.id,e.classList.add("dNone"),o.id=o.dataset.tbNonConsent,o.style.cssText="background-color: #fff !important",document.body.insertAdjacentElement("beforeend",e);let a={publisher:"tmg-network",mode:o.dataset.tbMode,container:o.dataset.tbNonConsent,placement:o.dataset.tbPlacement,target_type:o.dataset.tbTargetType};ExpressApp.Taboola.isArticle?a.article="auto":ExpressApp.Taboola.isHomepage?a.home="auto":a.category="auto",ExpressApp.Taboola.isMobile()&&(ExpressApp.Log("[TABOOLA] Slot parent:",o.parentElement.tagName),"DIV"===o.parentElement.tagName&&(o.parentElement.style.cssText="background-color: #fff !important")),ExpressApp.Taboola.Push(a)}))}),(()=>{window.commercialData.info.shouldbypassgam=!1}))},MantisNonConsentSlot:(o,e,a,s)=>{let t={publisher:"tmg-network",mode:e,container:o,placement:a,target_type:"mix",[s]:"auto"};ExpressApp.Log("[TABOOLA] Mantis slot",t),ExpressApp.Taboola.numOfPushedSlots<=ExpressApp.Taboola.firstSlotsPackSize?ExpressApp.Taboola.Push(t):ExpressApp.Taboola.PushMantisPending(t)},ShowNonConsent:()=>new Promise(((o,e)=>{ExpressApp.Taboola.SetConsentData().then((()=>{var a,s;const t=window.utag_data.consentData,n=null===(s=null===(a=t.tcfv2consent)||void 0===a?void 0:a.purpose)||void 0===s?void 0:s.consents[1],p=ExpressApp.Taboola.isGoogleConsented(t);window.taboolaNonConsent&&(!n||!p)||ExpressApp.Ccpa.Supported()?(ExpressApp.Log("[TABOOLA] Show NON Consent Ads"),o(!0)):(ExpressApp.Log("[TABOOLA] Show Consent Ads"),e(!1))}))})),SetConsentData:()=>new Promise((o=>{const e=Cookies.get("euconsent-v2");if(e){ExpressApp.Taboola.consentData.tcfv2consent=expressCookieDecoder.decode("euconsent-v2",e);const a=window.localStorage.getItem("noniabvendorconsent");a&&(ExpressApp.Taboola.consentData.noniabconsent=expressCookieDecoder.decode("noniabvendorconsent",a)),window.utag_data.consentData=ExpressApp.Taboola.consentData,o(!0)}else window.taboolaNonConsentOnNonGdprCountries?(window.utag_data.consentData={tcfv2consent:{gdprApplies:window.taboolaNonConsent}},o(!0)):window.__tcfapi("getNonIABVendorConsents",2,((e,a)=>{ExpressApp.Log("[TABOOLA] Taboola consent",e),a&&e.gdprApplies?ExpressApp.Taboola.consentData={tcfv2consent:e}:ExpressApp.Taboola.consentData={tcfv2consent:{gdprApplies:!1,purpose:{consents:{1:!0}}}},window.utag_data.consentData=ExpressApp.Taboola.consentData,o(!0)}))})),isGoogleConsented:o=>{var e,a,s;if(ExpressApp.Log("[TABOOLA] Taboola consentData 3",o),!1===(null===(e=o.tcfv2consent)||void 0===e?void 0:e.gdprApplies))return!0;const t=null===(s=null===(a=o.tcfv2consent)||void 0===a?void 0:a.vendor)||void 0===s?void 0:s.consents;return!!(null==t?void 0:t[755])}},window.addEventListener("DOMContentLoaded",(()=>{ExpressApp.Taboola.Init()}))})();