!function(){"use strict";let e=!1;const o={adserverRequestSent:!1,aps:!1,prebid:!1},t=e=>{o.aps&&o.prebid&&!o.adserverRequestSent&&(e(),o.adserverRequestSent=!0)};var n=(n,d)=>{o.adserverRequestSent=!1,o.aps=!d.length,o.prebid=!1;const s=()=>{n.length?googletag.pubads().refresh(n):googletag.pubads().refresh()};googletag.cmd.push((()=>{(e=>new Promise((o=>{if(void 0!==window.pbjs&&"function"==typeof window.pbjs.loadPrebidAds){const t=(e=>{let o=e;return o.length||(o=window.googletag.pubads().getSlots()),o.map((e=>e.getSlotElementId()))})(e);window.pbjs.loadPrebidAds(t,(()=>o(!0)))}else o(!0)})))(n).then((()=>{o.prebid=!0,t(s)})),(o=>new Promise((t=>{o.length&&void 0!==window.apstag?((()=>{var o,t,n,d,s;if(e)return;e=!0;const i=new URL(window.location.href)||"",a=(null==i?void 0:i.hostname)||"nypost.com",l=document.querySelector('meta[name="keywords"]'),g=null!==(o=null==l?void 0:l.getAttribute("content"))&&void 0!==o?o:"",r=null!==(n=null===(t=null===window||void 0===window?void 0:window.ga4Dims)||void 0===t?void 0:t.section)&&void 0!==n?n:"",w=(null===(s=null===(d=null===window||void 0===window?void 0:window.nypScripts)||void 0===d?void 0:d.nypost_wp_vars)||void 0===s?void 0:s.postType)||"article";window.apstag.init({pubID:"3105",adServer:"googletag",videoAdServer:"DFP",bidTimeout:1500,deals:!0,signals:{ortb2:{site:{cat:["IAB1","IAB12","IAB17"],cattax:"1",domain:a,pagecat:r,sectioncat:w,keywords:g,name:a,page:i}}}})})(),window.apstag.fetchBids({slots:o,timeout:1500},(()=>{window.apstag.setDisplayBids(),t(!0)}))):t(!0)})))(d).then((()=>{o.aps=!0,t(s)}))}))},d=()=>{const{nypScripts:{nypost_wp_vars:{isMobile:e=!1}={}}={}}=window;return e?"mobile":"desktop"},s=(e=[])=>{const o=d(),{nypScripts:{ads:{aps:{[o]:t=[]}={}}={}}={}}=window,s=e.length?e.map((e=>e.getSlotElementId())):[],i=e.length?t.filter((e=>s.includes(e.slotID))):t;n(e,i)},i=e=>{var o;const{nypScripts:{nypost_wp_vars:{isRedesign:t=!1}={}}={}}=window,n=document.getElementById(e.slot.getSlotElementId());if(n&&n.setAttribute("data-nyp-ad-empty",e.isEmpty?"true":"false"),"div-gpt-ad-native"===e.slot.getSlotElementId()&&!1===e.isEmpty){let e=null;const o=n?n.closest(".ad-slot--native"):null;o&&(e=o.querySelector(".widget--newsletter-signup")),e&&(e.style.display="none"),null==n||n.classList.add("b-bottom")}if("div-gpt-ad-skin"===e.slot.getSlotElementId()&&!e.isEmpty)if(t){const e=document.querySelector("[data-ad-skin]");null!==e&&(e.dataset.adSkin="true");const o=document.querySelector('[data-module="curated-promo-module"]');null!==o&&o.remove();const t=document.querySelector(".module--promo");null!==t&&t.remove();const n=document.querySelector('[data-component="floatingShare"]');null!==n&&n.classList.add("d-none");const d=document.querySelector('[data-ad-skin="true"] .breaking-news--hidden'),s=document.querySelector('[data-component-wrapper="breaking-news"]');null!==d&&null!==s&&s.remove()}else null===(o=document.getElementById("content-wrapper"))||void 0===o||o.classList.add("background-ad-skin")};const a=d(),{nypScripts:{ads:{refresh:{enabled:l=!1,interval:g=30}={}}={},nypost_wp_vars:{isSingle:r=!1,postType:w="",shouldLazyLoad:p=!1}={}}={}}=window;window.pbjs=window.pbjs||{},window.pbjs.que=window.pbjs.que||[],window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.nypostAdRefresh=s,window.dfp_ad_slots_desktop=[],window.dfp_ad_slots_mobile=[],googletag.cmd.push((()=>{const e=(()=>{const e=d(),o=window.nypScripts.ads.slots[e]||null;if(!o)return[];const t=o.map((e=>!e.sizes||Array.isArray(e.sizes)&&!e.sizes.length?null:(window.definedSlots||(window.definedSlots=[]),window.definedSlots.includes(e.divId)||window.definedSlots.push(e.divId),window.googletag.defineSlot(e.path,e.sizes,e.divId).addService(window.googletag.pubads())))).filter((e=>null!==e));return console.log("DFP: definedSlots defined",window.definedSlots),t})();window[`dfp_ad_slots_${a}`]=e,googletag.pubads().enableSingleRequest(),(()=>{const e=d(),{nypScripts:{ads:{slots:{[e]:o=[]}={},targeting:t={}}={},nypost_wp_vars:{isSingle:n=!1,postType:s=""}={}}={}}=window;if(!o.length)return;Object.keys(t).forEach((e=>{window.googletag.pubads().setTargeting(e,t[e])}));const i=window.location.href.toString().match(/testadv=([\w\d]+)/);null!==i&&window.googletag.pubads().setTargeting("testadv",i[1].toString().replace(/testadv=/,"")),void 0!==window.pxSegmentIDs&&""!=window.pxSegmentIDs&&window.googletag.pubads().setTargeting("psg",window.pxSegmentIDs),void 0!==window.newsId&&window.googletag.pubads().setTargeting("news_id",window.newsId);const a=window.location.href.toString().match(/utm_source=([\w\d]+)/);a&&a[1]?window.googletag.pubads().setTargeting("ref",[a[1]]):document.referrer.toString().match(/nypost\.com/)?window.googletag.pubads().setTargeting("ref",["nypost"]):document.referrer.toString().match(/pagesix\.com/)?window.googletag.pubads().setTargeting("ref",["pagesix"]):document.referrer.toString().match(/decider\.com/)&&window.googletag.pubads().setTargeting("ref",["decider"]),n&&"article"===s&&(window.videojs?Object.keys(window.videojs.getPlayers()).some((e=>window.videojs.getPlayers()[e].options_.autoplay||!1))?window.googletag.pubads().setTargeting("video","autoplay"):window.googletag.pubads().setTargeting("video","no_autoplay"):window.googletag.pubads().setTargeting("video","none"));const l=Math.floor(10*Math.random()).toString();window.googletag.pubads().setTargeting("nckey_userGroup",[l])})(),(()=>{if(window.localStorage&&window.localStorage.getItem("nyp_id"))console.log("Using NYP ID for PPID"),googletag.pubads().setPublisherProvidedId(window.localStorage.getItem("nyp_id")||"");else{let e=!1;window.addEventListener("nyp-aqfer:nyp-id-ready",(o=>{!e&&o instanceof CustomEvent&&(console.log("Using NYP ID from nyp-aqfer:nyp-id-ready for PPID",o.detail.nypId||null),googletag.pubads().setPublisherProvidedId(o.detail.nypId),e=!0)}));const o=document.cookie.match(/_autid=([^;]+)/);o&&o[1]&&!e?(console.log("Using _autid cookie for PPID"),e=!0,googletag.pubads().setPublisherProvidedId(`${o[1]}${o[1]}`)):e||(console.log("No _autid cookie found for PPID, waiting for ready event"),window.addEventListener("nyp-aqfer:aut-cookie-ready",(o=>{!e&&o instanceof CustomEvent&&(console.log("Using aUT from event for PPID",o.detail.aut||null),googletag.pubads().setPublisherProvidedId(`${o.detail.aut}${o.detail.aut}`))})))}})(),r&&["article","list","video"].includes(w)&&googletag.pubads().enableVideoAds(),p?googletag.pubads().enableLazyLoad({fetchMarginPercent:-1,renderMarginPercent:50}):googletag.pubads().collapseEmptyDivs(!0),googletag.enableServices(),googletag.pubads().addEventListener("slotRenderEnded",i),googletag.pubads().addEventListener("slotOnload",(e=>(e=>{googletag.cmd.push((()=>{const o=document.querySelector(`.skeleton--${e.slot.getSlotElementId()}`);if(o){const e=o.closest(".ad__placeholder--skeleton");e&&e.classList.remove("ad__placeholder--skeleton"),o.setAttribute("class","ad__slot ad__slot--loaded")}}))})(e))),console.log("Loading Programmatic Ads with the following slots:",e),window.pbjs=window.pbjs||{},window.pbjs.que=window.pbjs.que||[],window.pbjs.que.push((()=>setTimeout((()=>{n(e,window.nypScripts.ads.aps[a]||[])}),10))),l&&g>0&&setInterval((()=>{console.log("Refreshing all ads on the page on the specified interval"),s()}),Math.max(g,1e3))}))}();