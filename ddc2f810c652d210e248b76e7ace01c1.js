/*! For license information please see mol-adverts-delayed.js.LICENSE.txt */
(()=>{var __webpack_modules__={1782:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>l});var i=n(9796);const r={},s=(e,t)=>{let n=(e.match(t)||[])[1]||"";return n=n.split(/[._]/g),{build:parseInt(n[2]||-1,10),major:parseInt(n[0]||-1,10),minor:parseInt(n[1]||-1,10)}},o=()=>{const e=navigator.userAgent;r.ua=e,r.isWindows=Boolean(e.match(/Windows Phone|iemobile|WPDesktop/i));try{r.isIPad=(Boolean(e.match(/iPad/i))||"iPad"===navigator.platform||"MacIntel"===navigator.platform&&"ontouchend"in document)&&!r.isWindows}catch(e){r.isIPad=!1}r.isIDevice=(Boolean(e.match(/(iPad|iPhone|iPod)/i))||r.isIPad)&&!r.isWindows,r.isIPhone=Boolean(e.match(/iPhone/i))&&!r.isWindows,r.isAndroid=Boolean(e.match(/Android/i))&&!r.isWindows,r.isChrome=Boolean(e.match(/Chrome/i)),r.isFirefox=Boolean(e.match(/Firefox/i)),r.isKindleSilk=Boolean(e.match(/Silk|Kindle/i)),r.isAndroidPhone=r.isAndroid&&Boolean(e.match(/Mobile/i)),r.isAndroidTablet=r.isAndroid&&!Boolean(e.match(/Mobile/i)),r.isMobile=r.isIDevice||r.isAndroid||r.isWindows,r.isAndroidStock=r.isAndroid&&!r.isChrome&&!r.isFirefox&&!r.isKindleSilk;try{r.isIDevice?(r.mobileName=e.match(/(iPad|iPhone|iPod)/i)?e.match(/(iPad|iPhone|iPod)/i)[0]:"iPad",r.mobileVersion=s(e,/OS ((?:\d+[._]?)+)/i)):r.isAndroid?(r.mobileName="Android",r.mobileVersion=s(e,/Android ((?:\d+[._]?)+)/i)):r.isWindows?(r.mobileName="Windows Phone",r.mobileVersion=s(e,/Windows Phone ((?:\d+[._]?)+)/i)):(r.mobileName=null,r.mobileVersion={build:-1,major:-1,minor:-1})}catch(e){i.logger.error("Failed to parse mobile name and version",e),r.mobileName="unknown"}},a=()=>(i.logger.warn('"getZoom" function has been deprecated as it does not provide reliable values'),screen.deviceXDPI&&screen.logicalXDPI?screen.deviceXDPI/screen.logicalXDPI:document.width?document.width/window.innerWidth:screen.width&&window.innerWidth?screen.width/window.innerWidth:Math.max(document.documentElement.clientWidth,document.body.offsetWidth,document.body.scrollWidth)/(window.innerWidth||document.documentElement.clientWidth)),d=()=>window.matchMedia?window.matchMedia("(orientation:landscape)").matches:(window.innerWidth||document.documentElement.clientWidth)>(window.innerHeight||document.documentElement.clientHeight);try{o(),r.isAndroidStock&&(i.logger.debug("Executing Android Stock browser Orientation bug fix"),window.addEventListener("orientationchange",(()=>{const e=document.querySelector("meta[name=viewport]");if(e){const t=e.getAttribute("content");e.setAttribute("content","width=10000, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0"),setTimeout((()=>{e.setAttribute("content",t)}),0)}})))}catch(e){i.logger.error("Error parsing user agent",e)}const l={deviceData:r,disableScroll:()=>{document.body.style.overflow="hidden",document.ontouchmove=e=>e.preventDefault()},enableScroll:()=>{document.body.style.overflow="auto",document.ontouchmove=()=>!0},getMobileVersion:()=>r.mobileVersion,getZoom:a,isAndroid:()=>r.isAndroid,isAndroidPhone:()=>r.isAndroidPhone,isAndroidStock:()=>r.isAndroidStock,isAndroidTablet:()=>r.isAndroidTablet,isChrome:()=>r.isChrome,isFirefox:()=>r.isFirefox,isIDevice:()=>r.isIDevice,isIPad:()=>r.isIPad,isIPhone:()=>r.isIPhone,isKindleSilk:()=>r.isKindleSilk,isLandscape:d,isMobile:()=>r.isMobile,isPortrait:()=>!d(),isWindows:()=>r.isWindows,isZoomed:()=>a()>1,onTouchEnd:e=>(setTimeout(e,400),e()),parseUserAgent:o,setupMobileClass:()=>{if(i.logger.warn('"setupMobileClass" has been deprecated and "features detection" should be prefered over "device detection"'),r.mobileName){const e=r.mobileName.toLowerCase().replace(/ /,"-");document.body.classList.add(e)}}}},1028:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AD_ATTRIBUTE:()=>d,TAGS_ATTRIBUTE:()=>l,addLoadListener:()=>u,onAdLoaded:()=>w,parse:()=>f,refreshAdvert:()=>y,refreshAdvertsWithNewTags:()=>v,requestAdvert:()=>m,requestDelayedAdvert:()=>_,reset:()=>I,stringify:()=>h});var i=n(8749),r=n(2623),s=n(5786),o=n(4653);const a=n(8235),d="data-adverts-ad",l="data-adverts-tags",c=n(636),u=n(4689),p=(0,o.x)("AdsRenderer"),h=a.stringify,f=a.parse;function g(){return s}function m(e){if(p("requestAdvert",e.pos,e),["gpt","oop"].some((t=>e.slotTypes.includes(t)))){if(e.id){const t=document.getElementById(e.id);t&&(t.setAttribute(d,a.stringify(e)),t.matches(".adHolder *")||t.classList.contains("dmg-ads-ad")||t.classList.add("adHolder"))}return g().requestAd(e)}p("unsupported slot type, bailing",e.pos,e.slotTypes)}function y(e){g().refreshAdvert(e)}function v(e,t){const n=e.map(b).filter(Boolean).map((e=>e.ad));g().refreshAdvertsWithNewTags(n,t)}function b(e){const t=document.getElementById(e);if(t){const e=t.getAttribute(d),n=t.getAttribute(l);let i,s,o;if(e)return s=a.parse(e),i=(0,r.get)(s.pos)||s,o=n?a.parse(n):null,{ad:i,tags:o,container:t}}return null}async function _(e){}function w(e){for(let t=0,n=c.length;t<n;t++)c[t](e)}const T=i.ZP.broker("AdsRenderer");function I(){c.length=0}T.on("slot ready",m),T.on("ad rendered",((e,t)=>w(t))),T.on("refresh ads",(e=>{let{ids:t,plugins:n}=e;return v(t,n)}))},4689:(e,t,n)=>{const i=n(636);e.exports=function(e){"function"==typeof e&&i.push(e)}},636:e=>{e.exports=[]},5786:(e,t,n)=>{"use strict";n.r(t),n.d(t,{name:()=>b,refreshAdvert:()=>m,refreshAdvertsWithNewTags:()=>y,requestAd:()=>g,reset:()=>v});var i=n(8749),r=n(6611),s=n(4320),o=n(4653),a=n(1871);const d=(e,t)=>new Promise(((n,i)=>{const s=(0,r.U2)("auction.maxTime",2e3),o=[];e.openStream({message:["get tags",{slot:t,timeout:s-100}],timeout:s,controlHandler:n=>{let{type:i,...r}=n;e.emit("auction event",t.pos,i,r)}}).on("data",(e=>{o.push(e)})).on("end",(()=>{e.emit("auction event",t.pos,"end"),n(o)})).on("error",(e=>i(e)))}));function l(e,t){t("formTags",e);const n=e.flat().map((e=>e?e.tags?e.tags:e:{}));return(0,a.Yb)(n.reduce(((e,t)=>({...e,...Array.isArray(t)&&t.reduce(((e,t)=>({...e,...t})),{})||t})),{}))}async function c(e,t,n){const i=await d(e,n),r=await e.invokeAll("get tags based on tags",i);return[{...l(i,t),...r.reduce(((e,t)=>({...e,...t})),{})}]}const u=i.ZP.broker("DfpServer"),p=(0,o.x)("DfpServer");let h={};u.on("destroy slot",(e=>{delete h[e]}));let f=Promise.resolve();async function g(e){if(h[e.pos])return h[e.pos];u.emit("start bidding",e.pos);let t=[];if(e.skipHeaderBiders)p("skipping header biders for",e.pos);else{p("starting auction for",e.pos);const n=(0,r.U2)("auction.maxTime",2e3),[i]=await Promise.all([c(u,p,e),(0,s.Ye)(n,[f])]);t=i,p("auction ended for",e.pos,t),u.emit("bidding ended",e.pos)}return u.emit("slot ready for ad",e,t),h[e.pos]={tags:t},{tags:t}}function m(e){u.emit("bidding ended",e.pos),u.emit("gpt refreshAdvert",e.pos)}function y(e,t){const n=[];e.forEach((async t=>{p("starting auction for",t.pos);const i=await c(u,p,t);n.push({ad:t,tags:i}),p("auction ended for",t.pos,i),u.emit("bidding ended",t.pos),n.length===e.length&&u.emit("slot ready to refresh",n)}))}function v(){h={}}u.on("set page level targeting",(e=>{p("new page level targeting:",e),f=f.then((()=>e)).then((()=>{}))}));const b="DfpServer"},6513:(e,t,n)=>{"use strict";n.r(t);var i=n(8749),r=n(1934),s=n(2623),o=n(9228),a=n(6550),d=n(6611),l=n(4653);function c(e,t){if(Array.isArray(e))e.forEach(t);else{if("object"!=typeof e||null===e)throw new Error(`dont know how to iterate on ${e}`);for(const[n,i]of Object.entries(e))t(i,n)}}const{onBodyAvailable:u}=n(3907),p=i.ZP.broker("DfpAsyncHandler"),h=(0,l.x)("dfpAsyncHandler"),f={},g={},m=["sky_right_top","sky_left_top","mpu_top","billboard","sticky_banner"],y=new Set(["mpu_puff_others","puff_ad_others","mpu_mobile_others","mpu_factbox","mpu_mobile_factbox"]);function v(e,t){if(e&&e.slots&&e.slots.length)return e.slots.forEach((function(i){const r=document.getElementById(i.slot.getSlotElementId()),s=!!r&&!r.classList.contains("watermark");var o;i.slot.addService(googletag.pubads()).setTargeting("pos",e.dfpPos||e.pos).setCollapseEmptyDiv(s,s&&function(e){const t="billboard"===e&&"home"===(n.g.PageCriteria.channel||"").slice(-4);return!m.includes(e)&&!t}(e.pos)),e.targeting&&c(e.targeting,((e,t)=>{i.slot.setTargeting(t,e)})),e.custom&&e.custom.length&&(o=i.slot,e.custom,c((function(e){Object.keys(e).forEach((function(t){o.setTargeting(t,e[t])}))}))),"number"==typeof window.orientation&&i.slot.setTargeting("orientation",MobileUtils.isLandscape()?"landscape":"portrait"),MobileUtils.isMobile()&&i.slot.setTargeting("lat",PageCriteria.latitude||"").setTargeting("lon",PageCriteria.longitude||""),h(`setting targeting for pos: ${e.pos}`,t),function(e,t){t.forEach((function(t){t&&"object"==typeof t&&Object.keys(t).forEach((function(n){e.setTargeting(n,t[n]+"")}))}))}(i.slot,t)})),e}p.on("api message","metadata",(e=>{h("metadata api call:",e);const{ico:t,...n}=e;t&&(n.referrer=t),p.emit("set page level targeting",n)})),p.on({message:"prepare to refresh ads",sync:!0},(e=>{const t=googletag.pubads().getSlots().reduce(((e,t)=>{const n=t.getTargeting("pos")[0];return e[n]=e[n]||t,e}),{});e.map((e=>({pos:e,slot:t[e]}))).forEach((e=>{let{pos:t,slot:n}=e;n?n.clearTargeting?n.clearTargeting():console.warn("-----\x3e NO slot.clearTargeting when refreshing ads",t):console.warn("-----\x3e NO SLOT to clear targeting when refreshing ads",t)}))})),p.on("slot ready for ad",((e,t)=>{!function(e,t){e.parentId=e.parentId||e.id,e.slots=e.slots||[],e.slots.forEach((function(t){t.parentId=t.parentId||t.id||e.parentId})),b((function(){!function(e){const t=(0,s.get)(e.pos)||e;t&&t.slots&&t.slots.length?e.slots=t.slots:w(e)}(e),v(e,t)})),b((function(){e.slots.forEach((t=>{p.emit("request slot",{pos:e.pos,slotType:t.type,type:e.type,parentId:t.parentId,adUnit:e.adUnit,slot:t.slot})}))}))}(e,t)}));const b=e=>googletag.cmd.push(e);p.on("set slot state",((e,t)=>{const n=g[e];n?n.molAd.state=t:f[e]=t})),p.on("request slot",(e=>{"gptSlot"===e.slotType&&(g[e.pos]=e.slot),e.slot.molAd={pos:e.pos,type:e.type,slotType:e.slotType,parentId:e.parentId,adUnit:e.adUnit,state:f[e.pos]},delete f[e.pos],p.invoke("googletag.display",e.parentId),p.emit("ad requested",e.pos)})),p.on("slot ready to refresh",(function(e){e.forEach((e=>v(e.ad,e.tags))),S(e.map((e=>e.ad)))})),p.on("destroy slot",(e=>{const t=(0,s.get)(e);t.slots&&(googletag.destroySlots(t.slots.map((e=>e.slot))),delete t.slots)}));const _={gpt:function(e){const t=(0,o.t2)(e),n=e.sizeMapping,i=e.id,r=e.adUnit,s=(0,d.U2)("dfp.networkCode");h("define slot for",e.pos,{sizes:t,sizeMapping:n,adUnit:r,id:i});const a=googletag.defineSlot("/"+s+"/"+r,t,i);if(!a)throw new C(e);e.sizeMapping&&function(e,t){const n=t.reduce(((e,t)=>{let[n,i]=t;return e.addSize(n,i)}),googletag.sizeMapping());e.defineSizeMapping(n.build())}(a,e.sizeMapping),e.slots.push({type:"gptSlot",slot:a,parentId:e.id}),p.emit("slot created",e,a)},gptOOP:function(e){const t=e.slotTypes.includes("gpt")?function(e){const t=e.parentId+"-oop";if(document.getElementById(t))return t;const n=document.getElementById(e.parentId),i=document.createElement("div");return i.id=t,n?n.parentNode.insertBefore(i,n.nextSibling):u((function(){document.body.appendChild(i)})),t}(e):e.parentId,n=(0,o.t2)(e),i=e.sizeMapping,r=e.adUnit,s=(0,d.U2)("dfp.networkCode");h("define oop slot for",e.pos,{sizes:n,sizeMapping:i,adUnit:r,id:t});const a=googletag.defineOutOfPageSlot("/"+s+"/"+r,t);if(!a)throw new C(e);e.slots.push({type:"oopGptSlot",slot:a,parentId:t})}};function w(e){return e.adUnit=e.adUnit||(0,r.Z)(e.pos),e.slots=e.slots||[],h(`${e.pos}: creating slots using slotTypes definition`),e.slotTypes.forEach((t=>{const n=_[t];n&&n(e)})),p.emit("update description",e.pos,e),e.slots.length&&v(e,[]),e}const T=e=>{let{slot:{molAd:{pos:t,parentId:n}}}=e;return n&&"string"==typeof n&&n.includes("-oop")?`${t}-oop`:t};function I(e){y.has(e)||b((function(){const t=(0,s.get)(e);t&&!t.gptSlot&&!t.oopGptSlot&&t.earlyBidding&&w(t)}))}function S(e){const t=e.map((function(e){return k(e.pos)}));p.invoke("googletag.pubads.refresh",t)}function k(e){return g[e]}p.on("slots initialized",(e=>{var t;t=e,b((function(){const e=googletag.pubads();e.set("page_url",location.hostname+location.pathname).setTargeting("article",adArticleId).setTargeting("environment",adEnvironment).setTargeting("country",PageCriteria.geo.toLowerCase()).addEventListener("slotRequested",(e=>e.slot.molAd&&p.emit("dfp slot requested",T(e),e))).addEventListener("slotRenderEnded",(e=>e.slot.molAd&&p.emit("ad rendered",T(e),e))).addEventListener("slotOnload",(e=>e.slot.molAd&&p.emit("ad loaded",e,T(e)))).addEventListener("impressionViewable",(e=>e.slot.molAd&&p.emit("ad viewable",T(e),e))).addEventListener("slotVisibilityChanged",(e=>e.slot.molAd&&p.emit("slot visibility changed",T(e),e))).addEventListener("slotResponseReceived",(e=>e.slot.molAd&&p.emit("slot response received",T(e),e))).setCentering(PageCriteria.isMobile&&!PageCriteria.isTablet),a.SP.testmode&&e.setTargeting("testmode",a.SP.testmode),p.emit("gpt initialized",googletag)})),t.forEach(I),b((function(){googletag.pubads().enableAsyncRendering(),googletag.enableServices()}))})),p.on("gpt refreshAdvert",(e=>{!function(e){const t=k(e);t&&(t.setTargeting("refresh","true"),p.invoke("googletag.pubads.refresh",[t]))}(e)})),p.on("gpt refreshAdverts",(e=>{S(e)}));class C extends Error{constructor(e){super(`Could not create a slot. googletag.defineSlot returned null. Probably because it has already been defined. Pos: ${e.pos}. ID: ${e.id}`)}}},8235:module=>{const omit=function(e,t){const n={};if(t=t||[],"object"==typeof e)for(const i in e)e.hasOwnProperty(i)&&-1===t.indexOf(i)&&(n[i]=DM.molFeMiniLodash.clone(e[i]));return n},stringify=function(e){return jsonStringify(omit(e,["slots"]))};var jsonStringify=JSON&&"function"==typeof JSON.stringify?JSON.stringify:function(e){switch(typeof e){case"string":return'"'+e.replace(/("|\\)/g,"\\$1")+'"';case"boolean":case"number":return e.toString();case"object":if("[object Array]"===Object.prototype.toString.call(e))return"["+e.map(stringify).join(",")+"]";if(e)return"{"+Object.keys(e).map((function(t){return stringify(t)+":"+stringify(e[t])})).join(",")+"}";case"undefined":case"function":return"null"}};const parse=JSON&&"function"==typeof JSON.parse?JSON.parse:function(value){return eval("data="+value)};module.exports={stringify,parse}},9622:(e,t,n)=>{const i=n(7325),r=function(e,t){this.eventsMap={},this.eventName=e,this.getDomCallback=t,this.domElement={};const n=this;DM.later("DOM_READY",(function(){a.call(n)}))};function s(e){const t=this.eventsMap[e];this.domElement[e]=this.getDomCallback(e),null!==this.domElement[e]&&this.on(this.domElement[e],this.eventName,(function(e){e.stopPropagation();const n=MobileUtils.isLandscape()?"landscape":"portrait";t.call(this,n)}))}function o(e){i.getElementById(e)?e in this.eventsMap&&s.call(this,e):delete this.eventsMap[e]}function a(){for(const e in this.eventsMap)o.call(this,e)}r.on=function(e,t,n){e.addEventListener(t,n)},r.fireEvent=document.createEvent?function(e,t){const n=e.ownerDocument.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}:function(e,t){const n=e.ownerDocument.createEventObject();n.eventType=t,e.fireEvent("on"+n.eventType,n)},r.prototype={constructor:r,registerEvent:function(e,t){this.eventsMap[e]=t,o.call(this,e)},getEvent:function(e){return this.eventsMap[e]},on:r.on,fireEvent:r.fireEvent},e.exports=r},7378:(e,t,n)=>{const i=n(9622),r=n(7325),s="data-impression-url",o="data-ted-tracking",a=new i("onImpression",(function(e){return function(e){return r.getElementById(e)}(e)}));e.exports={DATA_IMPRESSION_URL:s,onImpression:function(){a.registerEvent.apply(a,arguments)},registerImpression:function(e,t){const n=Array.prototype.filter.call(r.getAdContainer(e).getElementsByTagName("div"),(function(e){return e.getAttribute(s)}));n.length&&(function(e){const t=e.getAttribute(s);(new Image).src=t,e.getAttribute(o)&&(DM.later?DM.later("bundle",(function(){DM.pageEvents.fireEvent(DM.pageEvents.PAGE_AD_DISPLAYED,{type:"dfp-impression"})})):DM.pageEvents.fireEvent(DM.pageEvents.PAGE_AD_DISPLAYED,{type:"dfp-impression"}))}(n[0]),function(e){setTimeout((function(){!function(){a.fireEvent.apply(a,arguments)}(e,"onImpression"),e.getAttribute(o)&&(DM.later?DM.later("bundle",(function(){DM.pageEvents.fireEvent(DM.pageEvents.PAGE_AD_DISPLAYED,{type:"3rd-party-impression"})})):DM.pageEvents.fireEvent(DM.pageEvents.PAGE_AD_DISPLAYED,{type:"3rd-party-impression"}))}),0)}(n[0]),t.call(this,e))}}},6883:(e,t,n)=>{"use strict";n.d(t,{$R:()=>l,DZ:()=>i,M7:()=>c,TV:()=>d,Z$:()=>s,cl:()=>r,jj:()=>a,pj:()=>o,zu:()=>u});const i=(e,t,n)=>{const i=new Array(n.length);let r=0;for(let s=0,{length:o}=n;s<o;s++){const o=n[s];e(o)&&(i[r++]=t(o))}return i.length=r,i},r=(e,t)=>{const n=t.indexOf(e);return-1===n?t:[...t.slice(0,n),...t.slice(n+1)]},s=e=>e[e.length-1],o=e=>void 0===e?[]:Array.isArray(e)?e:[e],a=e=>{const t=new Set(e);return Array.from(t)},d=e=>{let t=e.length;const n=[...e];for(;t;){const e=Math.floor(Math.random()*t--),i=n[t];n[t]=n[e],n[e]=i}return n};function l(e,t){return e.map(((e,n)=>[e,t[n]]))}function c(e,t){const n=[...e];return n.sort(((e,n)=>e[t]-n[t])),n}function u(e,t){const n=new Set(t);return e.filter((e=>!n.has(e)))}},4320:(e,t,n)=>{"use strict";n.d(t,{Gv:()=>o,PQ:()=>p,S1:()=>s,Vs:()=>r,Ye:()=>l,gb:()=>c,yq:()=>d});class i extends Error{constructor(e){super(`Exceeded ${e}`)}}const r=e=>new Promise((t=>setTimeout(t,e))),s=e=>new Promise((t=>0===e?t(u(void 0,10)):setTimeout(t,e))),o=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i(e);throw await s(e),t},a=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i(e);throw await r(e),t},d=(e,t,n)=>Promise.race([t,a(e,n)]),l=async(e,t)=>{const n=[],i=[];return await Promise.race([r(e),Promise.all(t.map((e=>e.then((e=>n.push(e))).catch((e=>i.push(e))))))]),{errors:i,results:n}};function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;const s=Date.now(),o=a=>Promise.resolve(e()).then((e=>{if(e)return e;if(Date.now()-s<n){const e=Math.min(1e3,2**a/2);return r(t+e).then((()=>o(a+1)))}throw new i(n)}));return o(0)}const u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return new Promise((n=>{n(t?u(e,t-1):e)}))};function p(){let e,t,n=!1;return{promise:new Promise(((n,i)=>{e=i,t=n})),reject(t){n||(n=!0,e(t))},resolve(e){n||(n=!0,t(e))}}}},2186:(e,t,n)=>{"use strict";n.d(t,{JT:()=>h,Oo:()=>c,Vl:()=>l,vE:()=>d});var i=n(6883);function r(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function s(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,a(e,t,"set"),n),n}function o(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,a(e,t,"get"))}function a(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const d=e=>{if("function"==typeof Event)return new e.constructor(e.type,e);{const t=document.createEvent("Event");return t.initEvent(e.type,e.bubbles,e.cancelable),t}};function l(e,t,n){return e.on(t,n),()=>e.off(t,n)}function c(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}var u=new WeakMap,p=new WeakMap;class h{constructor(){r(this,u,{writable:!0,value:[]}),r(this,p,{writable:!0,value:[]})}on(e,t,n){return this.add(l(e,t,n))}one(e,t,n){return this.add(function(e,t,n){return e.one(t,n),()=>e.off(t,n)}(e,t,n))}onDispose(e){o(this,p).push(e)}addEventListener(e,t,n,i){return this.add(c(e,t,n,i))}add(e){return o(this,u).push(e),e}remove(e){s(this,u,(0,i.cl)(e,o(this,u)))}dispose(){try{for(const e of o(this,u))e();for(const e of o(this,p))e()}catch(e){console.error(e)}finally{s(this,u,[]),s(this,p,[])}}}},2866:(e,t,n)=>{"use strict";function i(e,t){let n,i=0,r=!1;const s=o=>{if(r){i=o,clearTimeout(n),r=!1;const a=!n;n=setTimeout(s,t),e(a)}else n=void 0};return()=>{r=!0;const e=Date.now&&Date.now()||(new Date).getTime();(!n||e-i>=t)&&s(e)}}function r(e){let t=!1;return function(){if(!t){t=!0;try{return e(...arguments)}finally{t=!1}}}}n.d(t,{Ds:()=>o,FU:()=>i,jR:()=>l,mk:()=>d,ri:()=>s,v_:()=>a,yS:()=>r});const s=e=>{let t,n=!1;return function(){return n||(n=!0,t=e(...arguments)),t}},o=(e,t)=>{let n,i;const r=function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];i=s,n&&clearTimeout(n),n=setTimeout((()=>{n=void 0,e(...i),i=void 0}),t)};return r.callNow=function(){n&&(clearTimeout(n),n=void 0);for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];e(...r||i||[]),i=void 0},r};function a(e){let t=0;return function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e(++t,...i)}}function d(e){let t=!0;return function(){if(!t)return e(...arguments);t=!1}}function l(){let{min:e=1,max:t=10}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){let n=1;for(;;)yield Math.min(t,Math.max(e,Math.round(n++**2/10)))}()}},8749:(e,t,n)=>{"use strict";n.d(t,{Jj:()=>d,Ys:()=>l,ZP:()=>p});var i=n(4320),r=n(6883),s=n(1774),o=n(8981),a=n.n(o);class d{constructor(e,t){var n,i,r,s=this;n=this,r=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return s.bus.intercept(s,e,...n)},(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(i="intercept"))in n?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,this.bus=e,this.id=t,this.options={}}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.bus.emit(this,e,...n)}on(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.bus.on(this,e,...n)}once(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.pop();let s=!1;const o=[...n,function(){s||(a.cancel(),s=!0,r(...arguments))}],a=this.on(e,...o);return a}until(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new Promise((t=>{const i=[...n,function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t(n)}];this.once(e,...i)}))}register(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.bus.register(this,e,...n)}hasSubscriber(e){return this.bus.hasSubscriber(e)}interceptOnce(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.bus.interceptOnce(this,e,...n)}invoke(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.bus.invoke(this,e,...n)}invokeAll(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.bus.invokeAll(this,e,...n)}invokeAllWithin(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return this.bus.invokeAll(this,{message:[e,...i],timeout:t})}registerStream(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.bus.registerStream(this,...t)}registerUnboundedStream(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.bus.registerUnboundedStream(this,...t)}openStream(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.bus.openStream(this,...t)}createReadObjectStream(){return this.bus.createReadObjectStream()}createTransformObjectStream(e){return this.bus.createTransformObjectStream(e)}collectStreamAsPromise(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.bus.collectStreamAsPromise(this,...t)}invokeChainMutable(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.bus.invokeChainMutable(this,...t)}}class l{constructor(){this.subscriptions=[],this.interceptors=[],this.queued=[],this.started=!1,this.dispatcher=e=>e(),this.firedMessages=new Set,this.system=this.broker("MessageBus"),this.emitImmediately=this.emitImmediately.bind(this),this.showUncaughtErrors=!0,this.globalTimeoutOverride=void 0,this.logCall=()=>{}}queuePublish(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];const{promise:o,resolve:a}=(0,i.PQ)();return this.queued.push((()=>a(e(t,...r)))),o}queueStream(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];const[o,a]=s.Ju();return this.queued.push((()=>{e(t,...i).pipe(a)})),o}broker(e){return new d(this,e)}emit(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return this.started?this.emitWithInterceptors(e,t.toString(),...i):this.queuePublish(this.emitWithInterceptors.bind(this),e,t,...i)}doesMessageMatch(e,t){let n=0;for(;n<e.length;n++)if(e[n]!==t[n])return!1;return n}emitWithInterceptors(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.callInterceptors(e,"emit",this.emitImmediately,...n)}callInterceptors(e,t,n){for(var i=this,r=arguments.length,s=new Array(r>3?r-3:0),o=3;o<r;o++)s[o-3]=arguments[o];return new Promise(((r,o)=>{try{if(this.interceptors.length){const o=this.interceptors.filter((e=>!1!==this.doesMessageMatch(e.msg,s)));let a=!1;const d=function(){const r=o.shift();for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return s=c.length>0?c:s,r?(a=!0,i.logCall(e,t,r.broker,s,!0),i.callInterceptor(r.callback,s,d,r.broker)):(a&&i.logCall(e,t,void 0,s,!0,!0),n(e,t,s))};r(d())}else r(n(e,t,s))}catch(e){o(e)}}))}callInterceptor(e,t,n,i){return e(t,n)}emitImmediately(e,t,n){return Promise.all(this.subscriptions.reduce(((i,r)=>{const s=this.doesMessageMatch(r.msg,n);return!1!==s&&i.push(this.callSubscriber(e,t,r,s,n)),i}),[]))}callSubscriber(e,t,n,i,r){const s=r.slice(i);return new Promise(((i,o)=>{const a=()=>{try{this.logCall(e,t,n.broker,r),i(n.callback.apply(n.broker,s))}catch(e){"error"===r[0]?(console.error("Exception thrown while handling error for",r,e),o(e)):(this.system.emit("error",...r,e),o(e))}};n.sync?a():this.dispatcher(a)}))}addSubscription(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t[t.length-1],o=t.splice(0,t.length-1);return this.subscribe(e,o,s,n,i,r)}on(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.addSubscription(e,n,!1)}register(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return this.addSubscription(e,[t,...i],!0)}getOptions(e){let t=e&&e.options||{};for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const s=i[0];return"object"==typeof s?t={...t,...s}:t.message=i,Array.isArray(t.message)||(t.message=[t.message]),t.timeout=this.localTimeout(t.timeout),t}getSubscriptionsInterestedIn(e){return this.subscriptions.map((t=>({subscription:t,matchCount:this.doesMessageMatch(t.msg,e.message)}))).filter((e=>!1!==e.matchCount))}callFilteredSubscription(e,t,n,i){let{message:r,map:s}=n,{matchCount:o,subscription:a}=i;const d=this.callSubscriber(e,t,a,o,r);return s&&a.expectReturn?s(d,a):d}callFilteredSubscriptions(e,t,n,i){return i.reduce(((i,r)=>{const s=this.callFilteredSubscription(e,t,n,r);return r.subscription.expectReturn&&i.push(s),i}),[])}async invoke(e,t){var n=this;const r=async function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];const o=n.getOptions(e,...r),[a,...d]=n.getSubscriptionsInterestedIn(o).filter((e=>e.subscription.expectReturn));if(!a)return Promise.reject(new u(r));d.length>0&&console.warn("Total of",d.length+1,"endpoints registered for message",r);const l=n.callInterceptors(e,"invoke",((e,t,i)=>n.callFilteredSubscription(e,t,{...o,message:i},a)),...o.message);return void 0!==o.timeout?Promise.race([l,(0,i.Gv)(o.timeout)]):l};for(var s=arguments.length,o=new Array(s>2?s-2:0),a=2;a<s;a++)o[a-2]=arguments[a];return this.started?r(e,t,...o):this.queuePublish(r.bind(this),e,t,...o)}localTimeout(e){var t;return null!==(t=this.globalTimeoutOverride)&&void 0!==t?t:e}async invokeAll(e,t){var n=this;const r=async function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];const o=n.getOptions(e,...r),a=await n.callInterceptors(e,"invokeAll",((e,t,i)=>{const r={...o,message:i},s=n.getSubscriptionsInterestedIn(r);o.controlHandler&&o.controlHandler({type:"interested endpoint",endpoints:s.reduce(((e,t)=>{let{subscription:{broker:{id:n},expectReturn:i,unbounded:r}}=t;return i&&!r?[...e,n]:e}),[])});const a=n.callFilteredSubscriptions(e,t,r,s);return o.subscriptionsCalledCallback&&o.subscriptionsCalledCallback(s),a}),...o.message);let d=a?a.filter((e=>e)):[];const l=[];d=d.map((e=>e.then((e=>{l.push(e)}),(e=>{if(o.catch)try{o.catch(e)}catch(e){n.system.emit("error",e)}else n.system.emit("error",e)}))));let c=Promise.all(d).then((e=>e.filter((e=>e))));return void 0!==o.timeout&&(c=Promise.race([c,(0,i.S1)(o.timeout)])),c.then((()=>l))};for(var s=arguments.length,o=new Array(s>2?s-2:0),a=2;a<s;a++)o[a-2]=arguments[a];return this.started?r(e,t,...o):this.queuePublish(r.bind(this),e,t,...o)}subscribe(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const a=t[0],d="object"==typeof a?(0,r.pj)(a.message):t,l="object"==typeof a&&!!a.sync;if(n&&"function"!=typeof n)throw new Error(`Callback has to be a function, but a "${typeof n}" was passed`);const c={broker:e,msg:d,callback:n,sync:l,expectReturn:i,isStream:s,unbounded:o,cancel:()=>{this.subscriptions=(0,r.cl)(c,this.subscriptions)}};return this.subscriptions.push(c),c}hasSubscriber(e){return-1!==this.subscriptions.findIndex((t=>{let{msg:[n]}=t;return n===e}))}interceptOnce(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];const s=i.pop();let o=!1;const a=[...i,function(){o||(d(),o=!0,s(...arguments))}],d=this.intercept(e,t,...a);return d}intercept(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];const o=[t,...i];let a=!1;const d=o.pop(),l={msg:o,callback:function(){if(!a)return d(...arguments)},broker:e};return this.interceptors.push(l),()=>{a=!0,this.interceptors=(0,r.cl)(l,this.interceptors)}}start(){var e=this;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(this.system.on("error",(function(){e.showUncaughtErrors&&console.error(...arguments)})),this.started=!0;this.queued.length;){var i;null===(i=this.queued.shift())||void 0===i||i()}var r,s;this.system.emit("system ready"),t&&(null===(r=n.g.DM)||void 0===r||null===(r=r.later)||void 0===r||null===(s=r.go)||void 0===s||s.call(r,"mol-adverts"))}setDispatcher(e){this.dispatcher=e}registerStream(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.addSubscription(e,n,!0,!0)}registerUnboundedStream(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.addSubscription(e,n,!0,!0,!0)}openStream(e){var t=this;const n=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];const d=t.getOptions(e,...r),l=s.KC();let c=!1,u=0;const p=()=>{c||0!=--u||(c=!0,l.push(null))};return void 0!==d.timeout&&((0,i.S1)(d.timeout).then((()=>{!c&&l.push(null),c=!0})),delete d.timeout),t.invokeAll(e,{...d,map:(e,n)=>{let{broker:i,unbounded:o}=n;return o||u++,e.then((e=>{const t=e instanceof a().Readable?e:s.nI(e?[e]:[]);t.on("data",(e=>!c&&l.push(e))),o||t.on("end",(()=>{d.controlHandler&&d.controlHandler({type:"stream done",endpoint:i.id}),p()}))}),(e=>{d.emitErrors?l.emit("error",e):t.system.emit("error",...r,e),o||p()}))},subscriptionsCalledCallback:()=>{c||0!==u||(c=!0,l.push(null))}}),l};for(var r=arguments.length,o=new Array(r>1?r-1:0),d=1;d<r;d++)o[d-1]=arguments[d];return this.started?n(e,...o):this.queueStream(n.bind(this),e,...o)}createReadObjectStream(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s.KC(e)}createTransformObjectStream(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s.U0(e)}collectStreamAsPromise(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return s.$4(this.openStream(e,...n))}invokeChainMutable(e){var t=this;const n=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const o=t.getOptions(e,...r),a=t.getSubscriptionsInterestedIn(o).filter((e=>e.subscription.expectReturn)),d=t.callInterceptors(e,"invokeChainMutable",((e,n,i)=>new Promise((s=>{const d=[...i],l=d.pop();s(a.reduce((async(i,s)=>{const a=await i,{matchCount:l,subscription:c}=s;return t.callSubscriber(e,n,c,l,[...d,a]).catch((e=>(o.onError&&o.onError(e,r),t.system.emit("error",...r,e),a)))}),Promise.resolve(l)))}))),...o.message);return void 0!==o.timeout?Promise.race([d,(0,i.Gv)(o.timeout)]):d};for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return this.started?n(e,...s):this.queuePublish(n.bind(this),e,...s)}}class c extends Error{}class u extends c{constructor(e){super("No end point registered: "+JSON.stringify(e)),this.endpoint=e}}const p=new l},2547:(e,t,n)=>{"use strict";function i(){const e=document.cookie.indexOf("x-loc=");if(-1===e)return;const t=document.cookie.indexOf(";",e);if(-1===t)return;const n=document.cookie.substring(e+6,t);return n.length>0&&"none"!==n.toLowerCase()?n:void 0}n.d(t,{K:()=>i})},1871:(e,t,n)=>{"use strict";n.d(t,{$Z:()=>m,CE:()=>o,Ev:()=>s,T$:()=>g,UI:()=>f,Yb:()=>p,_:()=>v,ar:()=>l,ei:()=>r,nr:()=>y,ns:()=>d,sE:()=>u,xb:()=>a});var i=n(6883);function r(e,t){return t.reduce(((t,n)=>(t[n]=e[n],t)),{})}function s(e,t){return Object.entries(t).reduce(((t,n)=>{let[i,r]=n;return t[i]=e[r],t}),{})}function o(e,t){const n={...e};for(const e of(0,i.pj)(t))delete n[e];return n}function a(e){for(const t in e)return!1;return!0}const d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.g;for(const n of e)void 0===t[n]&&(t[n]={}),t=t[n];return t},l=(e,t)=>n=>{if(t&&(0,i.zu)(Object.keys(n),Object.keys(e)).length)return!1;for(const t in e){const i=e[t];if("function"==typeof i&&!i(n[t]))return!1}return!0};function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){for(const n in e)if(c(e,n)&&t(e[n],n))return e[n]}function p(e){const t={};return Object.keys(e).forEach((n=>{const i=e[n];h(i)?t[n]=p(i):void 0!==i&&(t[n]=i)})),t}function h(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function f(e,t){const n={};for(const i in e)c(e,i)&&(n[i]=t(e[i],i));return n}function g(e){return e instanceof HTMLElement||e instanceof WeakMap||e instanceof Function||e instanceof Error||h(e)&&"function"==typeof e.then}function m(e){let t=0;const n="___MARK_",i={};return JSON.parse(JSON.stringify(e,(function(e,r){if(g(r)){const e=t++;return i[e]=r,`${n}${e}`}return r})),(function(e,t){return"string"==typeof t&&t.startsWith(n)?i[t.substr(8)]:t}))}function y(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function v(e){const t=new Date;return t.setMonth(t.getMonth()+e),t}},7080:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var i=n(6883);function r(e,t,n){s(e,t),t.set(e,n)}function s(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function o(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,d(e,t,"get"))}function a(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,d(e,t,"set"),n),n}function d(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var l=new WeakMap,c=new WeakMap,u=new WeakMap,p=new WeakMap,h=new WeakMap,f=new WeakSet;class g{constructor(e,t,n){var i;s(this,i=f),i.add(this),r(this,l,{writable:!0,value:!1}),r(this,c,{writable:!0,value:[]}),r(this,u,{writable:!0,value:void 0}),r(this,p,{writable:!0,value:void 0}),r(this,h,{writable:!0,value:!1}),a(this,u,n),a(this,p,e),this.state=Object.freeze(t)}deinit(){this.dispatch({type:"__DEINIT__"}),a(this,h,!1)}init(){a(this,h,!0),this.dispatch({type:"__INIT__"})}dispatch(e){if(!o(this,h))return void o(this,u).warn("Cannot dispatch actions before store has been initiated.");if(o(this,l))throw new Error("You shouldnt dispatch actions from a reducer");a(this,l,!0);const t=o(this,p).call(this,e,this.state);a(this,l,!1),t===this.state?o(this,u).call(this,e,"NO_CHANGE"):(this.state=Object.freeze(t),o(this,u).call(this,e,this.state),function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,f,m).call(this,e))}subscribe(e){return o(this,c).push(e),setTimeout((()=>e({type:"__INIT__"},this.state))),()=>{a(this,c,(0,i.cl)(e,o(this,c)))}}}function m(e){for(const t of o(this,c))t(e,this.state)}},1774:(e,t,n)=>{"use strict";n.d(t,{$4:()=>s,Ju:()=>o,KC:()=>d,TS:()=>u,U0:()=>l,UI:()=>p,c:()=>f,dE:()=>a,hX:()=>h,nI:()=>c});var i=n(8981),r=n.n(i);const s=e=>new Promise(((t,n)=>{const i=[];e.on("data",(e=>i.push(e))),e.on("end",(()=>t(i))),e.on("error",(e=>n(e)))})),o=()=>{const e=new(r().Readable)({objectMode:!0,read(){}}),t=new(r().Writable)({objectMode:!0,write(t,n,i){e.push(t),i()},final(t){e.push(null),t()}});return[e,t]},a=(e,t)=>d({start(){e.on("data",(e=>this.push(e))).on("end",(()=>{this.push(null),t()})).on("error",(e=>{console.log("------\x3e STREAM Error",e),this.destroy(e),t(e)}))}}),d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new(r().Readable)({objectMode:!0,read(){}});return e.start&&e.start.apply(t),t},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new(r().Transform)({objectMode:!0,...e})},c=e=>{let t=0;return new(r().Readable)({objectMode:!0,read(){e.length&&this.push(e[t++]),t===e.length&&this.push(null)}})},u=e=>{const t=d();let n=e.length;return n?(e.forEach((e=>{const i=e=>t.push(e),r=()=>{0==--n&&t.push(null)},s=e=>t.emit("error",e);e.on("data",i).on("end",r).on("error",s);const o=(e.off||e.removeListener).bind(e);t.on("close",(()=>{o("data",i),o("end",r),o("error",s)}))})),t):(t.push(null),t)},p=(e,t)=>d({start(){e.on("data",(e=>this.push(t(e)))).on("end",(()=>{this.push(null)})).on("error",(e=>this.destroy(e)))}}),h=(e,t)=>d({start(){e.on("data",(e=>{t(e)&&this.push(e)})).on("end",(()=>{this.push(null)})).on("error",(e=>this.destroy(e)))}}),f=(e,t)=>{const n=d(),i=e=>n.push(e);t.on("data",i);let r=!1;const s=(t.off||t.removeListener).bind(t);e.on("end",(()=>{r||(s("data",i),r=!0),n.push(null)}));const o=u([e,n]);return o.on("close",(()=>{r||(s("data",i),r=!0)})),o}},3166:(e,t,n)=>{"use strict";function i(e){const t=r(new URL(e).search.substring(1));return t?{specific:r(t.prev_scp),cust_params:r(t.cust_params)}:{}}function r(e){return e&&Object.fromEntries(e.split("&").map((e=>e.split("=").map(decodeURIComponent))))||void 0}function s(e,t){const n=e.startsWith("?"),i=e.substr(n?1:0).split("&").filter((e=>e.split("=")[0]!==t)).join("&");return i?`${n?"?":""}${i}`:""}function o(e){let t=0;if(0===e.length)return t;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}n.d(t,{Gi:()=>i,gY:()=>s,vp:()=>o})},9228:(e,t,n)=>{"use strict";n.d(t,{T3:()=>r,a6:()=>o,e$:()=>a,fb:()=>s,t2:()=>i});const i=e=>e.size||DM.molFeMiniLodash.map((e.type||"").split(","),(e=>DM.molFeMiniLodash.map(e.split("x"),Number)));function r(e,t,n){const i=e=>Array.isArray(e)&&2===e.length;if(!((r=e)&&Array.isArray(r)&&r.length&&r.every((e=>e&&i(e)&&i(e[0])&&Array.isArray(e[1])&&e[1].every(i)))))return t;var r;const s=(e=>e.sort(((e,t)=>t[0][0]-e[0][0])))([...e]),[o,a]=n,d=s.find((e=>{let[[t,n]]=e;return o>=t&&a>=n}));return d&&d[1]||t}function s(e){return t=e,Array.isArray(t)&&Array.isArray(t[0])?e.reduce(((e,t)=>{let[n,i]=e;return Array.isArray(t)?[Math.max(n,t[0]),Math.max(i,t[1])]:[n,i]}),[0,0]):e;var t}function o(e){return e.map((e=>`${e[0]}x${e[1]}`)).join("|")}function a(e,t){return t.reduce(((t,n)=>{const i=new RegExp(n.replace(/\*/g,".*"));return t.push(...Object.keys(e).filter((e=>i.exec(e)))),t}),[])}},1934:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(6611),r=n(2210);const s="/5765/dm.video/dm_video_home/preroll",o=(0,i.U2)("adUnit.excludeSponsoredCondition",!1);function a(e,t){var a;const d=n.g.dartSiteId,l=n.g.PageCriteria.sponsored&&!o?"dm_dmnative":`${n.g.adAreaSiteId}_${n.g.adAreaSiteId}${n.g.adAreaId}_${n.g.adSubareaId}${n.g.adPageType}`;if("native_"===e.slice(0,7))return`dailymail.uk/dm_native/${e}`;const{autoplay:c=!1,fbiaEmbed:u=!1,flyaway:p=!1,isMobile:h=!1,offset:f=0,original:g=!1,syndicationService:m=!1,videoAdServerUrl:y="https://pubads.g.doubleclick.net/gampad/ads?iu=%2F5765%2Fdm.video%2Fdm_video_home/preroll"}=t||{},v=(0,i.U2)("dfpAccountCode",5765),b=(0,i.U2)("videoDescription.verticalvideo.adUnit");switch(e){case"video":return(0,r.A)(n.g.adAreaId?`/${v}/dm.video/dm_video_${n.g.adAreaId}/${0===f?"preroll":"midroll"}`:function(e){try{return new URL(e).searchParams.get("iu")||s}catch(e){console.error(e)}return s}(y),{autoplay:c,fbiaEmbed:u,flyaway:p,isMobile:h,original:g,syndicationService:m});case"jwplayer":return`/${v}/dm.chromelessvideo/${(0,i.U2)("players.chromeless.dmplayer.v3.adUnitNameLevel2","dm_dmros_ros")}/${(null===(a=(0,i.U2)("players.chromeless.dmplayer.v3.adRoll",[]).find((e=>e.offset===f)))||void 0===a?void 0:a.pos)||"preroll"}`;case"verticalvideo":return b?`/${v}/${b}`:`/${v}/${n.g.adAreaSiteId}.${e}/${n.g.adAreaSiteId}_${n.g.adAreaSiteId}${n.g.adAreaId}_${n.g.adSubareaId}`;default:return`${d}/${l}/${e}`}}},6550:(e,t,n)=>{"use strict";n.d(t,{D1:()=>v,G9:()=>y,JW:()=>f,P0:()=>b,SP:()=>o,WH:()=>w,Y0:()=>I,ap:()=>s,bP:()=>h,cj:()=>m,ej:()=>d,kT:()=>p,oK:()=>_,r7:()=>T,s$:()=>g,zP:()=>u});var i=n(3166);function r(e){return window["inner"+e]||document.documentElement["client"+e]||document.body["client"+e]}function s(){let{usePixelRatio:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e&&window.devicePixelRatio||1;return{width:r("Width")*t,height:r("Height")*t}}const o=(()=>{let e={};try{e=window.location.search.substr(1).split("&").reduce(((e,t)=>{let[n,i]=t.split("=");switch(n=decodeURIComponent(n),!0){case n.startsWith("!"):e[n.substr(1)]=!1;break;case n.endsWith("[]"):n=n.substr(0,n.length-2),e[n]=!i||decodeURIComponent(i).split(",");break;case n.endsWith("[0]"):n=n.substr(0,n.length-3),e[n]=!i||decodeURIComponent(i).split(",");break;case/\[[-+]\]$/.test(n):e[n]=[...e[n]||[],...(i||"").split(",").map(decodeURIComponent)];break;default:e[n]=i?decodeURIComponent(i):"string"!=typeof i||i}return e}),{})}catch(t){console.error("ads",t),e={}}return e})(),a=/(%[0-9A-Z]{2})+/g,d=e=>{let t;const n=`; ${document.cookie}`.split(`; ${e}=`);if(n.length>1){const e=n.pop().split(";").shift();t='"'===e.charAt(0)?e.slice(1,-1):e,t=t.replace(a,decodeURIComponent)}return t},l=e=>{const t=new Date;switch(typeof e){case"undefined":return t.setMonth(t.getMonth()+1),t;case"number":return t.setDate(t.getDate()+e),t;case"string":return new Date(e);case"function":return l(e());case"object":if(e instanceof Date)return e;if(null===e)return l();default:throw new Error("Invalid expire time when setting cookie")}},c=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/",r=arguments.length>4?arguments[4]:void 0,s=`${e}=${t};expires=${l(n).toUTCString()};path=${i}`;r&&(s+=`;domain=${r}`),document.cookie=s},u=(e,t)=>{const n=`${e}Expire`,i=l(d(n)).toUTCString();c(e,t,i),c(n,i,i)},p=e=>{c(e,"","Thu, 01 Jan 1970 00:00:01 GMT")};function h(){const e=/(Windows\s*[a-zA-Z]*)\s+([^;\s)]+)/i.exec(navigator.userAgent);return e&&"windows nt"===e[1].toLowerCase()&&parseFloat(e[2])>=6.4}const f="Microsoft Internet Explorer"===navigator.appName||!(!navigator.userAgent.match(/Trident/)&&!navigator.userAgent.match(/rv:11/)),g=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),m=/(?:iPod|iPhone|iPad).*(?:OS)/i.test(navigator.userAgent),y=/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9.]+)(:?\s|$)/.test(navigator.userAgent),v=/Firefox\/([0-9.]+)(?:\s|$)/.test(navigator.userAgent),b=/Edge\/([0-9._]+)/.test(navigator.userAgent);function _(){try{if(/iP(hone|od|ad)/.test(navigator.platform)){const e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]}}catch(e){console.error(e)}return[-1,-1,-1]}function w(e){const{origin:t,pathname:r,search:s}=n.g.location,o=`${t}${r}${(0,i.gY)(s,e)}`;window.history.pushState(null,"",o)}function T(e){const t=e.getBoundingClientRect(),n=document.body,i=document.documentElement,r=window.pageYOffset||i.scrollTop||n.scrollTop,s=window.pageXOffset||i.scrollLeft||n.scrollLeft,o=i.clientTop||n.clientTop||0,a=i.clientLeft||n.clientLeft||0,d=t.top+r-o,l=t.left+s-a;return{top:Math.round(d),left:Math.round(l)}}function I(){var e,t;return null===(e=n.g.performance)||void 0===e||null===(t=e.getEntriesByType)||void 0===t||null===(t=t.call(e,"navigation"))||void 0===t?void 0:t[0]}},770:(e,t,n)=>{"use strict";n.r(t);var i,r,s=n(2866),o=n(6550),a=n(8749),d=n(4241),l=n(3741),c=n.n(l);const u=a.ZP.broker("debug-output"),p=window.PageCriteria&&window.PageCriteria.pageViewId||(0,d.kb)();localStorage.getItem("mol.ads.debug")&&localStorage.removeItem("mol.ads.debug");const h=localStorage.getItem("dmg.ads.debug.label"),f=o.SP.adsDebugRemote||o.SP["ac.adsDebugRemote"]||(null===(i=n.g.adverts)||void 0===i||null===(i=i.config)||void 0===i?void 0:i.adsDebugRemote)||h,g=o.SP.adsBugReport||o.SP["ac.adsBugReport"]||(null===(r=n.g.adverts)||void 0===r||null===(r=r.config)||void 0===r?void 0:r.adsBugReport)||h,m="boolean"!=typeof f&&f;let y=[],v=0;const b=(0,s.Ds)((()=>{u.emit("send to bidmax",{_:{topic:"debug"},type:"multi",pvid:p,label:m,eventId:v++,payload:y}),y=[]}),1e3);function _(e){const t=new Set;try{return JSON.stringify(e,((e,n)=>{if("object"==typeof n&&null!==n){if(n instanceof Error)return{type:"Error",message:n.message,stack:n.stack};if(t.has(n))return"[circular reference]";t.add(n)}return"string"==typeof n&&n.length>4048?"[string too long: "+n.length+"]":function(e){return"object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}(n)?"[DOM Node]":n}))}catch(e){return"[error serializing value: "+e.message+"]"}}const w=(e,t)=>{y.push({type:e,timestamp:(new Date).toISOString(),payload:t}),y.length>=100?b.callNow():b()},T=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];w("log",{level:e,log:n.map(_).map((e=>{if(void 0===e)return e;if(e.length>1e4)return"[object too long: "+e.length+"]";try{return JSON.parse(e)}catch(t){I.error("Error parsing",e,t)}}))}),I[e](...n)},I={log:console.log,warn:console.warn,error:console.error,info:console.info};f&&(console.log=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return T("log",...t)},console.info=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return T("info",...t)},console.warn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return T("warn",...t)},console.error=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return T("error",...t)},window.onerror=function(e,t,n,i,r){return console.error("[UNCAUGHT]",{message:e,source:t,lineno:n,colno:i,error:r}),!1},window.addEventListener("unhandledrejection",(e=>{let{reason:t}=e;console.error("[PromiseRejectionUncaught]",{reason:t})})),u.on("send remote debug",w),u.on("system ready",(()=>{const{config:e}=n.g.adverts;w("config",{config:e})})),u.once("dom ready",(()=>{n.g.PageCriteria&&w("PageCriteria",n.g.PageCriteria),n.g.pagemeta&&w("pagemeta",n.g.pagemeta),u.invoke("get page level analytics").then((e=>w("bidmax",e)))}))),g&&u.once("dom ready",(()=>{const e=document.createElement("div");e.innerHTML=c()(),document.body.appendChild(e);const t=e.querySelector("#debugRemoteButtonText"),n=t.querySelector("textarea");t.querySelector("button").addEventListener("click",(e=>{e.preventDefault(),w("bugreport",{log:[n.value]}),console.info("bugreport",n.value),n.value="",t.style.display="none"})),h&&(window.leaveRemoteDebug.style.display="block",window.leaveRemoteDebug.addEventListener("click",(e=>{e.preventDefault(),localStorage.removeItem("dmg.ads.debug.label"),location.reload()})))}))},4653:(e,t,n)=>{"use strict";n.d(t,{x:()=>d});var i=n(6550),r=n(6883);const s=function(){let e=new Set;if(i.SP.adsDebug)e=new Set(((!0===i.SP.adsDebug?"all":i.SP.adsDebug)||"").toLowerCase().split(","));else if(localStorage.getItem("dmg.ads.debug.label"))e=new Set(["all"]);else{var t;const r=i.SP["ac.adsDebug"]||(null===(t=n.g.adverts)||void 0===t||null===(t=t.config)||void 0===t?void 0:t.adsDebug);"boolean"==typeof r?e=new Set(["all"]):Array.isArray(r)&&(e=new Set(r.map((e=>e.toLowerCase()))))}return e}(),o=s.has("all"),a=()=>{};function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[`%c${e}`,l()],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=o||s.has(e.toLowerCase()),c=i?console.log.bind(console,...(0,r.pj)(t)):a;return c.debugName=e,c.label=t,c.enabled=i,c.log=u("log"),c.trace=u("trace"),c.debug=u("debug"),c.info=u("info"),c.warn=u("warn"),c.error=u("error",!0),c.table=i?function(){c("Table:"),console.table(...arguments)}:a,c.time=e=>console.time((e?[...t,e]:t).join(" / ")),c.timeEnd=e=>console.timeEnd((e?[...t,e]:t).join(" / ")),c.timeEnd=u("timeEnd"),c.extend=i=>{const[s,...o]=(0,r.pj)(t),a=n+1;return d(e,[`${s} %c${i}`,...o,l(a)],a)},c;function u(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:i)&&"function"==typeof console[e]?console[e].bind(console,...(0,r.pj)(t)):a}}function l(){return`display: inline-block; color: #fff; background: hsl(214deg 100% ${35+10*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}%); padding: 1px 4px; border-radius: 3px;`}},4241:(e,t,n)=>{"use strict";function i(e,t){return o(e,r(e,t,"get"))}function r(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function s(e,t,n){return function(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}(e,t),function(e,t){if(void 0===e)throw new TypeError("attempted to get private static field before its declaration")}(n),o(e,n)}function o(e,t){return t.get?t.get.call(e):t.value}n.d(t,{AT:()=>f,MX:()=>d,RD:()=>a,_b:()=>p,kb:()=>l});const a=2147483647;function d(e,t){const n=t-e+1+e;return Math.floor(Math.random()*n)}function l(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){return function(e){const t=16*Math.random()|0;return"x"===e?t:3&t|8}(e).toString(16)}))}function c(e,t){if(null==e)return;let n=e/(t/100);return n>99&&(n=99),n<0&&(n=0),Math.round(n)}const u=/(.*)P(\d+)(s|k|m|gb|ms|px)$/;function p(e,t){const{cap:n}=function(e){const t=e.match(u),[,n,i,r]=t||[],s=function(e,t){return{m:e=>60*e*1e3,s:e=>1e3*e,k:e=>1e3*e,gb:e=>1e9*e,ms:e=>e,px:e=>e}[t](e)}(Number(i),r);return{fieldName:n,period:i,unit:r,cap:s}}(e);return{[e]:c(t,n)}}var h=new WeakMap;class f{constructor(){var e,t,n;n={writable:!0,value:0},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e=this,t=h),t.set(e,n)}static get(e){return s(this,f,g)[e]=s(this,f,g)[e]||new f,s(this,f,g)[e]}static inc(e){return this.get(e).inc()}get value(){return i(this,h)}inc(){var e,t,n,s;return t=this,n=h,e=i(this,h),s=++e,function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(t,r(t,n,"set"),s),s}}var g={writable:!0,value:{}}},943:(e,t,n)=>{"use strict";function i(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const i=n=>String.prototype.split.call(t,n).filter(Boolean).reduce(((e,t)=>null!=e?e[t]:e),e),r=i(/[,[\]]+?/)||i(/[,[\].]+?/);return void 0===r||r===e?n:r}n.d(t,{Z:()=>i})},5965:(e,t,n)=>{"use strict";function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>r(e,t)))}function r(e,t){if(e===t)return e;const n=typeof t;if("undefined"===n)return e;const i=Array.isArray(t);if(null===t||"string"===n||"number"===n||"boolean"===n||"function"===n||!i&&"object"===n&&null!==t&&t.constructor!==Object)return t;if(null===e)return r(void 0,t);const s=typeof e,o=Array.isArray(e);if(n!==s)return o?e:"function"===s&&"object"===n?(Object.entries(t).forEach((t=>{let[n,i]=t;e[n]=i})),e):"undefined"===s?i?r([],t):"object"===n?r({},t):t:"undefined"===n?e:t;if(o){const n=e.length,i=t.length;let s;for(s=0;s<n&&s<i;s++)e[s]=r(e[s],t[s]);for(s=n;s<i;s++)e[s]=r(void 0,t[s]);return e}if(i)return[...t];const a=Object.entries(t).sort(((e,t)=>{let[n]=e,[i]=t;return n.localeCompare(i)})),d=a.length,l=Object.entries(e).sort(((e,t)=>{let[n]=e,[i]=t;return n.localeCompare(i)}));let c=0;for(const[t,n]of l){let i,s,o=-1;for(;o<0&&c<d;)[i,s]=a[c],o=i.localeCompare(t),o<0&&(e[i]=r(void 0,s),c++);0===o&&(e[t]=r(n,s),c++)}for(;c<d;){const[t,n]=a[c++];e[t]=r(void 0,n)}return e}n.d(t,{Z:()=>i})},5729:(e,t,n)=>{"use strict";function i(e,t,n){const i=Array.isArray(t)?t:t.match(/([^[.\]])+/g);i.reduce(((e,t,r)=>(void 0===e[t]&&(e[t]={}),r===i.length-1&&(e[t]=n),e[t])),e)}n.d(t,{Z:()=>i})},2807:(e,t,n)=>{"use strict";var i=n(4653),r=n(6550);(r.SP.adsDebugRemote||r.SP["ac.adsDebugRemote"]||n.g.adverts.config&&n.g.adverts.config.adsDebugRemote||localStorage.getItem("dmg.ads.debug.label"))&&n(770),(0,i.x)("bootstrap").log("loading",window.location.href)},780:(e,t,n)=>{const i=n(3275);function r(e){if(!e)throw new TypeError("Missing videoAdServerUrl");const t=function(e){const t=e.split("?");return{base_url:t[0],search:t[1]}}(e);var n;this.base_url=t.base_url,this.params={env:"vp",gdfp_req:1,impl:"s",output:"xml_vast4",unviewed_position_start:1,hl:"en",...(n=t.search,n?i.queryStringToObj(n,(function(e,t){return t&&!/(\[.+])/g.test(t)})):{}),output:"xml_vast4"}}r.encodeCustomParams=function(e){if("object"==typeof e)return Object.keys(e).forEach((t=>{const n=e[t];Array.isArray(n)?e[t]=n.join(","):e[t]=n})),encodeURIComponent(i.objToQueryString(e));throw new TypeError("encodeCustomParams only accepts an object map of key value pairs.")},r.prototype.iu=function(e){if(!/^\/[a-zA-z0-9\-_.~]+(\/[a-zA-z0-9\-_.~]+)*/.test(e))throw new TypeError("'iu' param must follow format: /network_id/directory_tree.../ad_unit");return this.params.iu=encodeURIComponent(e),this},r.prototype.sz=function(e){if(!/^[0-9]+x[0-9]+/.test(e))throw new TypeError("'sz' param must follow format like: 300x400.");return this.params.sz=e,this},r.prototype.url=function(e){return this.params.url=encodeURIComponent(i.urlParts(e).href),this},r.prototype.correlator=function(e){if("number"==typeof e&&!isNaN(e))return this.params.correlator=e,this;throw new TypeError("the passed correlator is not a number")},r.prototype.description_url=function(e){return this.params.description_url=encodeURIComponent(i.urlParts(e).href),this},r.prototype.hl=function(e){return this.params.hl=e,this},r.prototype.ciu_szs=function(e){return this.params.ciu_szs=e,this},r.prototype.scp=function(e){return this.params.scp=e,this},r.prototype.cust_params=function(e){return this.params.cust_params=r.encodeCustomParams(e),this},r.prototype.setRequestNonPersonalizedAds=function(e){return e&&(this.params.npa=1),this},r.prototype.setRestrictDataProcessing=function(e){return e&&(this.params.rdp=1),this},r.prototype.setPpid=function(e){return e&&(this.params.ppid=e),this},r.prototype.scor=function(e){if("number"==typeof e&&!isNaN(e))return this.params.scor=e,this;throw new TypeError("the passed scor is not a number")},r.prototype.addParam=function(e,t){return this.params[e]=t,this},r.prototype.build=function(){const e=this.params;return["env","gdfp_req","impl","output","unviewed_position_start","hl","url","correlator","description_url"].forEach((t=>{if(!e[t])throw new TypeError("Error building url, missing required param '"+t+"'")})),this.base_url+"?"+i.objToQueryString(this.params)},e.exports=r},690:e=>{e.exports=e=>{const t=(e=>{const{cust_params:t,domain:n,embed:i,flyaway:r,muted:s,screen:o,source:a,title:d,videoId:l,videoStarts:c}=e,u="number"==typeof e.duration?e.duration/1e3:0,p={length:u>120?120:30*Math.floor(u/30),videoWidth:o.width,videoHeight:o.height,play:c,embed:i,ttid:l,domain:n,flyaway:r,s:s?"off":"on"};d&&(p.videoTitle=d.replace(/\s/g,"_").replace(/[^_\w]/g,"")),a&&(p.video=a.replace(/\s/g,"_")),window.adEnvironment&&(p.environment=window.adEnvironment);const h=t||{};return Object.keys(h).forEach((e=>{p[e]=h[e]})),p.sz=o.width+"x"+o.height,p})({...e,cust_params:{...e.cust_params}});return{customParams:t}}},2210:(e,t,n)=>{"use strict";function i(e,t){const{autoplay:n=!1,fbiaEmbed:i=!1,flyaway:r=!1,isMobile:s=!1,original:o=!1,syndicationService:a=!1}=t;let d=e;i&&-1===d.indexOf("dm.videofb")||"fbia"===a&&-1===d.indexOf("dm.videofb")?d=d.replace(/dm\.video/g,"dm.videofb"):"gamp"===a&&-1===d.indexOf("dm.videoamp")?d=d.replace(/dm\.video/g,"dm.videoamp"):s&&o&&!n&&!r&&(d=d.replace(/dm\.video/g,"dm.video.original"));let l="";return n&&(l+="ap"),r&&(l+="fa"),l.length&&(d=d.replace(/(dm\.video)([^&]+)?/,"$1$2_"+l)),d}n.d(t,{A:()=>i})},3275:(e,t,n)=>{const i=n(5257),r=document.createElement("a"),s=document.documentMode,o={appendGeolocation:function(e){try{return o.appendKeyToURL(e,"geo",window.PageCriteria.geo)}catch(t){return e}},appendKeyToURL:function(e,t,n){let i;i=/\?/.test(e)?"&":"?",i+=t+"="+encodeURIComponent(n.toString());const r=e.split("#");return 2===r.length?r[0]+i+"#"+r[1]:r[0]+i},objToQueryString:function(e){const t=[];return i.forEach(e,((e,n)=>{t.push(n+"="+e)})),t.join("&")},queryStringToObj:function(e,t){if(t=i.isFunction(t)?t:function(){return!0},!("string"==typeof e||e instanceof String))return{};const n=(e=e.trim().replace(/^\?/,"")).split("&"),r={};return i.forEach(n,(e=>{let n,i,s;""!==e&&(i=e.split("="),n=i[0],s=i[1],t(n,s)&&(r[n]=s))})),r},urlParts:function(e){let t,n=e;return s&&(r.setAttribute("href",n),n=r.href,/(.*):(\d+)/.test(r.host)&&(t=r.host.split(":"),r.host=t[0],r.port=t[1])),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:i.isNotEmptyString(r.port)?r.port:80,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}};e.exports=o},5257:e=>{function t(e){return"function"==typeof e}const n={forEach:function e(n,i,r){let s,o;if(n)if(t(n))for(s in n)"prototype"===s||"length"===s||"name"===s||n.hasOwnProperty&&!n.hasOwnProperty(s)||i.call(r,n[s],s,n);else if(a=n,"[object Array]"===Object.prototype.toString.call(a)){const e="object"!=typeof n;for(s=0,o=n.length;s<o;s++)(e||s in n)&&i.call(r,n[s],s,n)}else if(n.forEach&&n.forEach!==e)n.forEach(i,r,n);else for(s in n)n.hasOwnProperty(s)&&i.call(r,n[s],s,n);var a;return n},isFunction:t,isNotEmptyString:function(e){return function(e){return"string"==typeof e}(e)&&0!==e.length}};e.exports=n},6017:(e,t,n)=>{"use strict";function i(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){let i,r,s,o,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return r=!(i=!0),{s:function(){a=a.call(e)},n:function(){const e=a.next();return i=e.done,e},e:function(e){r=!0,s=e},f:function(){try{i||null==a.return||a.return()}finally{if(r)throw s}}};if(Array.isArray(e)||(a=function(e,t){let i;if(e)return"string"==typeof e?n(e,t):"Map"===(i="Object"===(i=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function i(e){this.agentId=Date.now()+"_"+this.getRandom(0,1e3),window&&(window.iiq_object_array=window.iiq_object_array||[],window.iiq_object_array.push(this)),this.version=5.4,this.initRuntimeDefaults(e),this.logger=this.initLogger(),this.isDebugMode=this.isDebug()||!1,this.logger.info("========IIQ Agent version "+this.version+"========"),this.currentBrowserLowerCase=this.detectBrowser().toLowerCase(),this.intentIqConfig={partner:e?e.partner:null,refreshInMillis:e&&"number"==typeof e.refreshInMillis?e.refreshInMillis:432e5,timeoutInMillis:e&&"number"==typeof e.timeoutInMillis?e.timeoutInMillis:3e3,isAsyncServerRequest:!e||"boolean"!=typeof e.isAsyncServerRequest||e.isAsyncServerRequest,callback:e&&"function"==typeof e.callback?e.callback:null,enhanceRequests:!e||"boolean"!=typeof e.enhanceRequests||e.enhanceRequests,sourceMetaData:e&&"string"==typeof e.sourceMetaData?this.translateMetadata(e.sourceMetaData):this.translateMetadata(""),sourceMetaDataExternal:e&&!isNaN(e.sourceMetaDataExternal)?e.sourceMetaDataExternal:void 0,iiqServerAddress:e&&"string"==typeof e.iiqServerAddress?e.iiqServerAddress:"https://api.intentiq.com",iiqPixelServerAddress:e&&"string"==typeof e.iiqPixelServerAddress?e.iiqPixelServerAddress:"https://sync.intentiq.com",partnerClientId:e&&"string"==typeof e.partnerClientId?e.partnerClientId:"",partnerClientIdType:e&&"number"==typeof e.partnerClientIdType?this.verifyIdType(e.partnerClientIdType):-1,pbjs:e&&void 0!==e.pbjs?e.pbjs:null,shouldRepalcePubprovided:!e||"boolean"!=typeof e.shouldRepalcePubprovided||e.shouldRepalcePubprovided,shouldSetUidsModulesConfig:!e||"boolean"!=typeof e.shouldSetUidsModulesConfig||e.shouldSetUidsModulesConfig,shouldClearDuplicatresForRubicon:!e||"boolean"!=typeof e.shouldClearDuplicatresForRubicon||e.shouldClearDuplicatresForRubicon,manualWinReportEnabled:!(!e||"boolean"!=typeof e.manualWinReportEnabled)&&e.manualWinReportEnabled,messageSendingDelay:e&&!isNaN(e.reportDelay)?e.reportDelay:0,domainName:e&&e.domainName?e.domainName:"",shouldReplaceUnifiedId:e&&"boolean"==typeof e.shouldReplaceUnifiedId?e.shouldReplaceUnifiedId:this.unifiedIdReplacementLogic(),browserBlackList:e&&"string"==typeof e.browserBlackList?e.browserBlackList.toLowerCase():"",shouldFilerTdidFromPPuid:!(!e||"boolean"!=typeof e.shouldFilerTdidFromPPuid)&&e.shouldFilerTdidFromPPuid,reportMethod:e&&"string"==typeof e.reportMethod?this.parseReportingMethod(e.reportMethod):"GET",appendEidsNamesToReport:!(!e||"boolean"!=typeof e.appendEidsNamesToReport)&&e.appendEidsNamesToReport,siloEnabled:!(!e||"boolean"!=typeof e.siloEnabled)&&e.siloEnabled,ppuidSourceBlackList:e&&"string"==typeof e.ppuidSourceBlackList?e.ppuidSourceBlackList.toLowerCase():""},this.mandarotyVariablesInit(e),this.additionalVariablesInit(e),1!=this.intentIqConfig.siloEnabled||isNaN(this.intentIqConfig.partner)||(this.intentIqConfig.lsKeys.FIRST_PARTY_KEY=this.intentIqConfig.lsKeys.FIRST_PARTY_KEY+"_p_"+this.intentIqConfig.partner),this.checkAndPrintPrebidInitAuctionsStatus("Before object init"),this.initABTestingConfiguration(),""!==this.intentIqConfig.browserBlackList&&this.intentIqConfig.browserBlackList.includes(this.currentBrowserLowerCase)?(this.logger.info("Browser is in blacklist. Good bye."),this.isInBrowserBlacklist=!0,this.intentIqConfig.callback&&(this.intentIqConfig.callback(),this.counters.noDataCounter++,this.savePartnerDataToLocalStore())):(this.intentIqConfig.isInPassiveMode=!1,this.initPbMonitoring(),this.subscribeForPrebidEvents(),this.currentDataTTl=this.intentIqConfig.refreshInMillis,this.firstPartyData=this.loadOrCreateFirstPartyData(),this.clearDataIfInGroupBorPassiveMode(),this.getDataOrCallServerIfNeeded(!0),this.intentIqConfig.operationalMode.current!==this.intentIqConfig.operationalMode.vr&&this.pixelSync(),this.initReportingModule(),this.printConfigurationReport(),this.setTimeoutCallbackCall())}function r(e){this.constants={noteReported:"NR"},this.biddingPlatformId=e&&e.biddingPlatformId&&!isNaN(e.biddingPlatformId)?e.biddingPlatformId:1,this.partnerAuctionId=e&&e.partnerAuctionId?e.partnerAuctionId:this.constants.noteReported,this.bidderCode=e&&e.bidderCode?e.bidderCode:this.constants.noteReported,this.prebidAuctionId=e&&e.prebidAuctionId?e.prebidAuctionId:this.constants.noteReported,this.cpm=e&&e.cpm&&!isNaN(e.cpm)?e.cpm:0,this.currency=e&&e.currency?e.currency:this.constants.noteReported,this.originalCpm=e&&e.originalCpm&&!isNaN(e.originalCpm)?e.originalCpm:this.cpm,this.originalCurrency=e&&e.originalCurrency?e.originalCurrency:this.currency,this.status=e&&e.status?e.status:this.constants.noteReported,this.placementId=e&&e.placementId?e.placementId:this.constants.noteReported}return i.prototype.setTimeoutCallbackCall=function(){this.callbackTimeotID||(this.logger.info("Configuring failsafe callback"),this.callbackTimeotID=setTimeout(this.fireCallbackOnRequestTimeout.bind(null,this),this.intentIqConfig.timeoutInMillis))},i.prototype.printConfigurationReport=function(){this.logger.info("--------User configuration---------"),this.logger.debug(JSON.stringify(this.userProvidedConfig,this.replacer,2)),this.logger.info("--------Startup configuration---------"),this.logger.debug(JSON.stringify(this.intentIqConfig,this.replacer,2)),this.logger.info("--------------------------------------")},i.prototype.initReportingModule=function(){const e=this;if(0===this.intentIqConfig.messageSendingDelay)this.logger.info("Skipping registering on unload events, message delay = 0");else{this.logger.info("Initializing on unload events");try{window.onbeforeunload=function(){e.dataSentOnUnload=!0,e.messagesArray.length>0&&e.dataSender(e)}}catch(e){this.logger.error("Failed to susbscibe for onbeforeunload")}try{window.onunload=function(){!1===e.dataSentOnUnload&&e.messagesArray.length>0&&e.dataSender(e)}}catch(e){this.logger.error("Failed to susbscibe for onbeforeunload")}}},i.prototype.additionalVariablesInit=function(e){this.intentIqConfig.moduleIds={unifiedeId:null},this.intentIqConfig.operationalMode={vr:"VR",pixel:"PIXEL",dual:"DUAL",node:"NONE",current:e&&"string"==typeof e.mode?this.getOperationalMode(e.mode):"DUAL"},e&&e.intentIqData&&"undefined"!==e.intentIqData&&(this.intentIqData=e.intentIqData,this.intentIqConfig.operationalMode.current=this.intentIqConfig.operationalMode.vr,this.useLodalData=!0,this.intentIqConfig.pbmonitoring=!0),this.intentIqConfig.collisionPreventionMode={pub:"PUB",other:"OTHER",none:"NONE",current:e&&"string"==typeof e.idCollisionPreventionMode?this.parseCollisionPreventionMode(e.idCollisionPreventionMode):"NONE"},this.intentIqConfig.urlParamsNames={isInTestGroup:"abtgu",testPercentage:"abtp",testPreviousPercentage:"abtpp",testGroup:"abtg",pbPauseUntill:"pbpause",requestRtt:"rrtt",lastDataUpdateDate:"dud"},this.intentIqConfig.analytics={requestRtt:0,clientType:"",adserverDeviceType:"",terminationCause:"",profile:"",siteId:null},this.intentIqConfig.pbmonitoring={pbMonitoringEnabled:!e||"boolean"!=typeof e.pbMonitoringEnabled||!0===e.pbMonitoringEnabled,pbPauseUntill:-1},this.intentIqConfig.subscriptionFlags={bidWon:!1,bidRequested:!1,beforeBidderHttp:!1,auctionInited:!1}},i.prototype.mandarotyVariablesInit=function(e){this.intentIqConfig.lsKeys={FIRST_PARTY_KEY:"_iiq_fdata",PARTNER_DATA_KEY:"_iiq_fdata_"+this.intentIqConfig.partner,LAST_SYNC_KEY:"_iiq_sync_"+this.intentIqConfig.partner,abGroup:"_iiq_ab_group_"+this.intentIqConfig.partner,abPercentage:"_iiq_ab_percentage_"+this.intentIqConfig.partner,pbMonitoringEnabled:"_iiq_pb_monitoringenabled_"+this.intentIqConfig.partner,pbPauseUntill:"_iiq_pb_pausetill_"+this.intentIqConfig.partner,requestRtt:"_iiq_requestrtt_"+this.intentIqConfig.partner,DEBUG_KEY:"_iiq_debug_level"},this.uspDataObj=this.initUspDataObj(),this.currentUspValue=this.uspDataObj.getUspValue(),this.intentIqConfig.abTesting={groupNames:{withoutIIQ:"B",withIIQ:"A",notYetDefined:"U",none:"N"},configurationSource:{percentage:"percentage",group:"group",iiqserver:"IIQServer",disabled:"disabled",currentConfigurationSource:this.parseConfigurationSource(e.ABTestingConfigurationSource)},currentPercentage:-1,isInTestGroup:e.disableIIQInThisGroup,previousPercentage:-1,currentTestGroup:"U",previousTestGroup:"U",shouldDiscardServerConfiguration:!1,userActualPercentage:e.abPercentage},this.intentIqConfig.paramsNames={abPercentage:"abPercentage",abTestGroup:"abGroup",pbPauseUntill:"pbPauseUntil",pbMonitoringEnabled:"pbMonitoringEnabled",isInTestGroup:"isInTestGroup",enhanceRequests:"enhanceRequests",wasSubscribedForPrebid:"wasSubscribedForPrebid",hadEids:"hadEids",userActualPercentage:"userPercentage",ABTestingConfigurationSource:"ABTestingConfigurationSource",lateConfiguration:"lateConfiguration",jsverion:"jsversion",eidsNames:"eidsNames",requestRtt:"rtt",clientType:"clientType",adserverDeviceType:"AdserverDeviceType",terminationCause:"terminationCause",callCount:"callCount",manualCallCount:"mcc",pubprovidedidsFailedToregister:"ppcc",noDataCount:"noDataCount",profile:"profile",isProfileDeterministic:"pidDeterministic",siteId:"sid",hadEidsInLocalStorage:"idls",auctionStartTime:"ast",eidsReadTime:"eidt",agentId:"aid",auctionEidsLegth:"aeidln",wasServerCalled:"wsrvcll",refferer:"vrref",isInBrowserBlacklist:"inbbl",prebidVersion:"pbjsver",partnerId:"partnerId"}},i.prototype.initRuntimeDefaults=function(e){this.intentIqData={},this.isCellular=!1,this.configurationTime=Date.now(),this.partnerData={},this.wasDebugCheck=!1,this.wasServerCalled=!1,this.wasCallFromConstructor=!1,this.wasCallbackFired=!1,this.counters={callCount:0,noDataCounter:0,failCount:0},this.uspCodes={INITIAL_VALUE:"-1",ABSENCE_VALUE:"-2"},this.currentUspValue=this.uspCodes.INITIAL_VALUE,this.metadataConstant=256,this.syncRefreshMillis=36e5,this.shouldCallServer=!1,this.isPrebidConfigurationSet=!1,this.userProvidedConfig=e,this.lastDataUpdateDate=0,this.configurationTime=0,this.requestRtt=0,this.allBidsMap={},this.messagesArray=[],this.partnerAuctionIdsArray=[],this.reportingServerAddress="https://reports.intentiq.com",this.gatewayServerAddress="https://ucgfk6g6s7.execute-api.us-east-1.amazonaws.com",this.dataReportingPath="report",this.delayedSenderTimeouter=null,this.gatewayWasCalled=!1,this.localStorageEnabled=void 0,this.pubprovidedidsFailedToregister=!1,this.callbackTimeotID=null,this.eidsReceptionsTime=null,this.eidsNames=[],this.useLodalData=!1,this.auctionStartTimeData={},this.auctionEidsLength={},this.dataSentOnUnload=!1,this.hadEidsInLocalStorage,this.cookiFullBrowsersListLowercase=["chrome"],this.isInBrowserBlacklist=!1,this.replacer=function(e,t){return"pbjs"==e||"lsKeys"==e||"serverResponse"==e||"urlParamsNames"==e||"groupNames"==e?"skipped in printing":t}},i.prototype.unifiedIdReplacementLogic=function(){return this.currentBrowserLowerCase||(this.currentBrowserLowerCase=this.detectBrowser().toLowerCase()),this.cookiFullBrowsersListLowercase.includes(this.currentBrowserLowerCase)?(this.logger.info("CookieFull browser detected, setting unifyed id override logic to: FALSE"),!1):(this.logger.info("Cookieless browser detected, setting unifyed id override logic to: TRUE"),!0)},i.prototype.clearDataIfInGroupBorPassiveMode=function(){let e;this.intentIqConfig.isInPassiveMode||this.intentIqConfig.abTesting.currentTestGroup===this.intentIqConfig.abTesting.groupNames.withoutIIQ?(null!=(e=this.readData(this.intentIqConfig.lsKeys.PARTNER_DATA_KEY))&&((e=JSON.parse(e)).data={},this.storeData(this.intentIqConfig.lsKeys.PARTNER_DATA_KEY,JSON.stringify(e))),this.logger.info("Calling callback - passive mode or group B set"),this.fireCallback()):this.callbackTimeotID||(this.callbackTimeotID=setTimeout(this.fireCallbackOnRequestTimeout.bind(null,this),this.intentIqConfig.timeoutInMillis))},i.prototype.isObjectEmpty=function(e){return e&&0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype},i.prototype.parseReportingMethod=function(e){try{switch(e.toUpperCase()){case"GET":default:return"GET";case"POST":return"POST"}}catch(e){this.logger.error(e)}return"GET"},i.prototype.fireCallbackOnRequestTimeout=function(e){e.logger.info("Trying to fire callback on timeout"),e.fireCallback()},i.prototype.checkAndPrintPrebidInitAuctionsStatus=function(e){try{this.isDebug()&&(this.logger.info("Validation at stage: "+e),this.intentIqConfig.pbjs?this.intentIqConfig.pbjs.getEvent?(this.logger.info("Total amount of events is "+this.intentIqConfig.pbjs.getEvents().length),this.logger.info("Amount of auctionInit events is "+this.intentIqConfig.pbjs.getEvents().filter((function(e){return"auctionInit"===e.eventType})).length)):this.logger.info("Pbjs was defined but it has no getEvents method. Looks like we are right on time."):this.logger.error("Pbjs wasn't defined"))}catch(e){this.logger.error("Failed to report pbjs events state")}},i.prototype.extractIdentittyModulesIds=function(){try{if(this.intentIqData&&this.intentIqData.eids&&Array.isArray(this.intentIqData.eids)){let e;const n=t(this.intentIqData.eids);try{for(n.s();!(e=n.n()).done;){const t=e.value;if(t.source&&"adserver.org"===t.source&&t.uids[0].id){this.intentIqConfig.moduleIds.unifiedeId=t.uids[0].id;break}}}catch(e){n.e(e)}finally{n.f()}}}catch(e){this.logger.fatal(e)}},i.prototype.fillEidsNames=function(){try{if(this.intentIqConfig.appendEidsNamesToReport){if(this.eidsNames=[],this.intentIqData&&this.intentIqData.eids&&Array.isArray(this.intentIqData.eids)){let e;const n=t(this.intentIqData.eids);try{for(n.s();!(e=n.n()).done;){const t=e.value;this.eidsNames.push(t.source)}}catch(e){n.e(e)}finally{n.f()}}}else this.logger.info("Skipping eids names population due to configuration")}catch(e){this.logger.fatal("Failed to collect eids names")}},i.prototype.initPbMonitoring=function(){!0===this.intentIqConfig.manualWinReportEnabled?this.intentIqConfig.pbmonitoring.pbMonitoringEnabled=!1:this.userProvidedConfig&&"boolean"==typeof this.userProvidedConfig.pbMonitoringEnabled&&(this.intentIqConfig.pbmonitoring.pbMonitoringEnabled=!0===this.userProvidedConfig.pbMonitoringEnabled)},i.prototype.loadOrCreateFirstPartyData=function(){let e=this.tryParse(this.readData(this.intentIqConfig.lsKeys.FIRST_PARTY_KEY));return e&&e.pid&&(this.intentIqConfig.analytics.profile=e.pid),e&&e.pcid?e&&!e.pcidDate&&(e.pcidDate=Date.now()):e={pcid:this.generateGUID(),pcidDate:Date.now()},this.storeData(this.intentIqConfig.lsKeys.FIRST_PARTY_KEY,JSON.stringify(e)),e},i.prototype.parseConfigurationSource=function(e){return"percentage"===e||"group"===e||"IIQServer"===e||"disabled"===e?e:"disabled"},i.prototype.getOperationalMode=function(e){try{switch(e.toLowerCase()){case"bidenhancement":return"VR";case"sync":return"PIXEL";case"both":return"DUAL"}}catch(e){this.logger.error(e)}return this.intentIqConfig.operationalMode.dual},i.prototype.verifyIdType=function(e){return 0===e||1===e||3===e||4===e?e:-1},i.prototype.parseCollisionPreventionMode=function(e){try{switch(e.toLowerCase()){case"pub":return"PUB";case"other":return"OTHER";case"none":return"NONE"}}catch(e){this.logger.error(e)}return this.intentIqConfig.collisionPreventionMode.none},i.prototype.detectBrowser=function(){try{return-1!=(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))?"Opera":-1!=navigator.userAgent.indexOf("Chrome")||-1!=navigator.userAgent.indexOf("CriOS")?"Chrome":-1!=navigator.userAgent.indexOf("Safari")?"Safari":-1!=navigator.userAgent.indexOf("Firefox")?"Firefox":-1!=navigator.userAgent.indexOf("MSIE")||1==!!document.documentMode?"IE":"Unknown"}catch(e){return"Unknown"}},i.prototype.translateMetadata=function(e){try{const t=e.split(".");return((+t[0]*this.metadataConstant+ +t[1])*this.metadataConstant+ +t[2])*this.metadataConstant+ +t[3]}catch(e){return NaN}},i.prototype.getRandom=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},i.prototype.generateRandom1to99=function(){return Math.floor(99*Math.random())+1},i.prototype.isEmpty=function(e){return 0==Object.keys(e).length},i.prototype.isEmptyObjAndArray=function(t){return!t||"object"==e(t)&&this.isEmpty(t)},i.prototype.isDefined=function(e){return void 0!==e&&null!=e},i.prototype.containsEids=function(e){let t=e;try{return!!e&&(t=e.data?e.data:t).eids&&Array.isArray(t.eids)&&t.eids.length>0}catch(e){this.counters.failCount++,this.logger.fatal(e)}return!1},i.prototype.generateRandomUsIp=function(){let e=this.readData("_iiq_ip");return(!e||this.isIpCellular(e)&&!this.isCellular||!this.isIpCellular(e)&&this.isCellular)&&(e=this.generateNewRandomIp(this.isCellular),this.storeData("_iiq_ip",e)),e},i.prototype.isIpCellular=function(e){return e.startsWith("107.77.208.")},i.prototype.generateNewRandomIp=function(e){return(e=e?"107.77.208.":"98.115.221.")+Math.floor(255*Math.random())},i.prototype.tryParse=function(e){try{return JSON.parse(e)}catch(e){this.logger.error(e)}return null},i.prototype.tryParseInt=function(e){try{return parseInt(e,10)}catch(e){return this.logger.error(e),-1}},i.prototype.addLevelValue=function(e){return"string"==typeof e&&this.logger.allLevels[e=e.toUpperCase()]?e.toUpperCase():"FATAL"},i.prototype.initLogger=function(){const e=this;return{info:function(e){this.log("INFO",e)},debug:function(e){this.log("DEBUG",e)},fatal:function(e){this.log("FATAL",e)},error:function(e){this.log("ERROR",e)},trace:function(e){this.log("TRACE",e)},log:function(e,t){this.isLessThanOrEqualTo(e)&&this._print(t,e)},isLessThanOrEqualTo:function(t){return this.allLevels[e.levelValue].value>=this.allLevels[t].value},_print:function(t,n){const i=this.allLevels[n].colour,r=this.allLevels[n].secondary_color,s=e&&e.intentIqConfig&&e.intentIqConfig.partner?e.intentIqConfig.partner:e.userProvidedConfig?e.userProvidedConfig.partner:null;console.log("".concat(s," %c[").concat(n,"]%c [").concat(Date.now(),"] %c").concat(t),"color: white ; background-color:"+i+"; border-radius: 3px","border:none","color: "+r+" ; border:1px solid "+i+"; border-radius: 3px")},allLevels:{FATAL:{value:10,colour:"magenta",secondary_color:"magenta"},INFO:{value:20,colour:"green",secondary_color:"green"},ERROR:{value:30,colour:"red",secondary_color:"red"},DEBUG:{value:40,colour:"cyan",secondary_color:"grey"},TRACE:{value:50,colour:"blue",secondary_color:"blue"}}}},i.prototype.isDebug=function(){let e;return this.wasDebugCheck||(this.levelValue="FATAL",this.hasLocalStorage()&&null!==(e=this.readData("_iiq_debug_level"))&&(this.isDebugMode=!0,this.levelValue=this.addLevelValue(e)),this.wasDebugCheck=!0),this.isDebugMode},i.prototype.setInfoLevel=function(){this.storeData("_iiq_debug_level","INFO")},i.prototype.setDebugLevel=function(){this.storeData("_iiq_debug_level","DEBUG")},i.prototype.setTraceLevel=function(){this.storeData("_iiq_debug_level","TRACE")},i.prototype.hasLocalStorage=function(){if(void 0!==this.localStorageEnabled)return this.localStorageEnabled;try{return this.localStorageEnabled=!!window.localStorage,this.localStorageEnabled}catch(e){this.localStorageEnabled=!1,this.logger.info("Local storage api disabled")}return!1},i.prototype.storeData=function(e,t){try{"string"==typeof e&&e.startsWith("iiq_fdata")&&this.logger.info("IntentIQ: storing data: key="+e+" value="+t),this.isDefined(t)&&this.hasLocalStorage()&&window.localStorage.setItem(e,t)}catch(e){this.logger.error(e)}},i.prototype.readData=function(e){try{if(this.hasLocalStorage())return window.localStorage.getItem(e)}catch(e){this.logger.error(e)}return null},i.prototype.initUspDataObj=function(){const e=this;return{getUspValue:function(){const t=this.readUspData();return t&&t.uspString?t.uspString:e.uspCodes.ABSENCE_VALUE},readUspData:function(){try{return this.getDataFromWindow()}catch(t){e.logger.error(t)}try{return this.getDataFromTop()}catch(t){e.logger.error(t)}return{}},getDataFromWindow:function(){let e;if(window.__uspapi)return window.__uspapi("getUSPData",1,(function(t){return e=t})),e},getDataFromTop:function(){let e;if(window.top.__uspapi)return window.top.__uspapi("getUSPData",1,(function(t){return e=t})),e}}},i.prototype.generateGUID=function(){let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))},i.prototype.updateCountersAndSaveIfAsked=function(e,t){try{this.containsEids(e)?this.counters.callCount++:this.counters.noDataCounter++,t&&this.savePartnerDataToLocalStore()}catch(e){this.counters.failCount++,this.logger.error("Failred to update counters.")}},i.prototype.clearCounters=function(){this.counters&&(this.counters.callCount=0,this.counters.failCount=0,this.counters.noDataCounter=0,this.savePartnerDataToLocalStore())},i.prototype.fireCallback=function(){try{null===this.intentIqConfig.callback||void 0===this.intentIqConfig.callback||this.wasCallbackFired?this.logger.info("Skippping calback fire , already fired or not defined"):(this.wasCallbackFired=!0,null!==this.callbackTimeotID&&(this.logger.info("Removing callback timeout - got it first"),clearTimeout(this.callbackTimeotID)),this.logger.info("Actual callback fire."),this.intentIqConfig.callback(this.intentIqData,this.intentIqConfig.abTesting.currentTestGroup),null===this.intentIqConfig.pbjs&&this.updateCountersAndSaveIfAsked(this.intentIqData,!0))}catch(e){this.logger.fatal(e)}},i.prototype.getPubprovidedEids=function(e){void 0===e&&(e=this);try{for(var t=JSON.parse(JSON.stringify(e.getIntentIqEidsInternal(e))),n=0;n<t.length;n++)t[n].source&&e.intentIqConfig.ppuidSourceBlackList.includes(t[n].source)&&t.splice(n,1);if(0!=e.intentIqConfig.shouldFilerTdidFromPPuid)for(let e=0;e<t.length;e++)if(t[e].source&&"adserver.org"===t[e].source&&t[e].uids[0].id){t.splice(e,1);break}return t}catch(t){e.counters.failCount++,e.logger.error("Failed to get EIDS for internal call"),e.savePartnerDataToLocalStore()}return[]},i.prototype.getIntentIqData=function(){const e=this.getDataOrCallServerIfNeeded(!1);return this.updateCountersAndSaveIfAsked(e,!0),e},i.prototype.getIntentIqEidsInternal=function(e){void 0===e&&(e=this);try{if(e.intentIqConfig.isInPassiveMode||e.intentIqConfig.operationalMode.current===e.intentIqConfig.operationalMode.pixel)return[];if(e.intentIqConfig.abTesting.currentTestGroup===e.intentIqConfig.abTesting.groupNames.withoutIIQ)return[];const t=e.getDataOrCallServerIfNeeded(!0);if(t&&t.eids)return t.eids}catch(t){e.counters.failCount++,e.logger.error("Parse response eids got exception"),e.savePartnerDataToLocalStore()}return[]},i.prototype.loadPartnerData=function(){let e,t=this.tryParse(this.readData(this.intentIqConfig.lsKeys.PARTNER_DATA_KEY));return t?(this.hadEidsInLocalStorage=!1,(t.data||this.useLodalData)&&(!this.intentIqConfig.isInPassiveMode&&this.intentIqConfig.abTesting.currentTestGroup!==this.intentIqConfig.abTesting.groupNames.withoutIIQ||(t.data={}),!1===this.useLodalData?this.intentIqData=t.data:t.data=this.intentIqData,this.intentIqData&&this.intentIqData.eids&&Array.isArray(this.intentIqData.eids)&&(this.hadEidsInLocalStorage=this.intentIqData.eids.length>0),this.extractIdentittyModulesIds(),this.fillEidsNames(),this.eidsReceptionsTime=Date.now()),"number"==typeof t.callCount&&(this.counters.callCount=t.callCount),"number"==typeof t.failCount&&(this.counters.failCount=t.failCount),"number"==typeof t.noDataCounter&&(this.counters.noDataCounter=t.noDataCounter),"number"==typeof t.cttl&&(this.currentDataTTl=t.cttl,this.logger.info("Custom data TTL loaded from LS, value: "+this.currentDataTTl)),e=this.uspDataObj.getUspValue(),"string"==typeof t.uspapi_value?(this.currentUspValue=t.uspapi_value,this.logger.info("Got stored CCPA Value: "+this.currentUspValue),this.currentUspValue!==e&&(this.currentUspValue=e,this.currentDataTTl=0,t.cttl=0,this.shouldCallServer=!0,t.uspapi_value=e,this.logger.info("Reset cttl value"))):(t.uspapi_value=e,this.currentUspValue=e,this.logger.info("Read CCPA Value from uspapi: "+this.currentUspValue)),t.date&&(this.lastDataUpdateDate=t.date,this.shouldCallServer=Date.now()-t.date>this.currentDataTTl),t.ct&&(this.intentIqConfig.analytics.clientType=t.clientType),t.adserverDeviceType&&(this.intentIqConfig.analytics.adserverDeviceType=t.adserverDeviceType),t.terminationCause&&(this.intentIqConfig.analytics.terminationCause=t.terminationCause),t.pidDeterministic&&(this.intentIqConfig.analytics.pidDeterministic=t.pidDeterministic),t.siteId&&(this.intentIqConfig.analytics.siteId=t.siteId)):(t={},this.shouldCallServer=!0),t},i.prototype.getDataOrCallServerIfNeeded=function(e){try{let t;return this.intentIqConfig.operationalMode.current===this.intentIqConfig.operationalMode.pixel?{}:"number"!=typeof this.intentIqConfig.partner?(this.counters.failCount++,this.logger.error("intentIqId requires a valid partner to be defined"),{}):(this.partnerData=this.loadPartnerData(),this.wasCallFromConstructor?this.savePartnerDataToLocalStore():this.wasCallFromConstructor=!0,this.shouldCallServer&&!1===this.useLodalData?(this.wasServerCalled=!0,t=this.createRequestUrl(!1),this.makeServerRequest(t,!0)):this.isPrebidConfigurationSet||(this.isPrebidConfigurationSet=!0,this.configurePrebid()),!e||!0!==e||this.isEmptyObjAndArray(this.intentIqData)&&this.shouldCallServer||this.fireCallback(),this.intentIqData||{})}catch(e){this.counters.failCount++,this.logger.error("Exception occurred during main logic: "+e),this.savePartnerDataToLocalStore()}return{}},i.prototype.createPixelUrl=function(){var e=this.intentIqConfig.iiqPixelServerAddress+"/profiles_engine/ProfilesEngineServlet?at=20&mi=10&secure=1";return e=(e+="&dpi="+this.intentIqConfig.partner)+"&rnd="+this.getRandom(0,1e6),e=this.appendFirstPartyDataToUrl(e),e=this.addUniquenessToUrl(e),e=this.addMetaData(e),e=this.appendPartnersFirsyParty(e),e=this.appendReferrerToUrl(e),e+=this.version?"&jsver="+encodeURIComponent(this.version):"",this.appendABTestingData(e)},i.prototype.pixelSync=function(){try{let e;const t=parseInt(this.readData(this.intentIqConfig.lsKeys.LAST_SYNC_KEY));(!t||Date.now()-t>this.syncRefreshMillis)&&(e=this.createPixelUrl(),this.appendImage(e),this.storeData(this.intentIqConfig.lsKeys.LAST_SYNC_KEY,Date.now()+""))}catch(e){this.logger.error("Error adding pixel to DOM "+e)}},i.prototype.appendImage=function(e){let t;this.isDefined(e)&&((t=document.createElement("img")).src=e,t.width=1,t.height=1,this.isDefined(document.body)?document.body.appendChild(t):window.addEventListener("load",(function(){try{document.body.appendChild(t)}catch(e){this.logger.fatal(e)}})))},i.prototype.tryExtractConfiguration=function(e){this.intentIqConfig.abTesting.shouldDiscardServerConfiguration||(this.logger.info("Extracting AB testing parameter"),this.tryExtractABTestingConfiguration(e)),this.logger.info("Extracting monitoring parameter")},i.prototype.tryExtractABTestingConfiguration=function(e){let t;this.intentIqConfig.paramsNames.abPercentage in e&&(t=this.tryParseInt(e[this.intentIqConfig.paramsNames.abPercentage]),this.logger.info("abPercentage received: "+e[this.intentIqConfig.paramsNames.abPercentage]),t!==this.intentIqConfig.abTesting.currentPercentage)&&(this.logger.info("abPercentage has changed from:"+this.intentIqConfig.abTesting.currentPercentage+" to:"+e[this.intentIqConfig.paramsNames.abPercentage]),this.intentIqConfig.abTesting.previousPercentage=this.intentIqConfig.abTesting.currentPercentage,this.intentIqConfig.abTesting.currentPercentage=t,this.generateTestGroupAccordingToPercentageAndConfigure(),this.persistABTestingSettingsToLS())},i.prototype.configureABTestingForIIQServer=function(){this.intentIqConfig.abTesting.currentTestGroup=this.intentIqConfig.abTesting.groupNames.notYetDefined,this.intentIqConfig.abTesting.previousTestGroup=this.intentIqConfig.abTesting.groupNames.notYetDefined,this.intentIqConfig.abTesting.shouldDiscardServerConfiguration=!1,this.intentIqConfig.isInPassiveMode=!1},i.prototype.configureABTestingForGroupA=function(){this.intentIqConfig.abTesting.currentTestGroup=this.intentIqConfig.abTesting.groupNames.withIIQ,this.intentIqConfig.abTesting.previousTestGroup=this.intentIqConfig.abTesting.groupNames.notYetDefined,this.intentIqConfig.abTesting.currentPercentage=100,this.intentIqConfig.abTesting.shouldDiscardServerConfiguration=!0,this.intentIqConfig.isInPassiveMode=!1},i.prototype.configureABTestingForGroupB=function(){this.intentIqConfig.abTesting.currentTestGroup=this.intentIqConfig.abTesting.groupNames.withoutIIQ,this.intentIqConfig.abTesting.previousTestGroup=this.intentIqConfig.abTesting.groupNames.notYetDefined,this.intentIqConfig.abTesting.currentPercentage=0,this.intentIqConfig.abTesting.shouldDiscardServerConfiguration=!0,this.intentIqConfig.isInPassiveMode=!0},i.prototype.configureABTestingForPercentage=function(){this.intentIqConfig.abTesting.currentTestGroup=this.intentIqConfig.abTesting.groupNames.notYetDefined,this.intentIqConfig.abTesting.previousTestGroup=this.intentIqConfig.abTesting.groupNames.notYetDefined,this.intentIqConfig.abTesting.shouldDiscardServerConfiguration=!0,this.intentIqConfig.isInPassiveMode=!1},i.prototype.configurationSourceGroupInitilization=function(){this.userProvidedConfig&&"boolean"==typeof this.userProvidedConfig.disableIIQInThisGroup&&(this.intentIqConfig.abTesting.isInTestGroup=!0===this.userProvidedConfig.disableIIQInThisGroup,!0===this.userProvidedConfig.disableIIQInThisGroup)?this.configureABTestingForGroupB():this.configureABTestingForGroupA()},i.prototype.configurationSourcePercentageInitilization=function(){switch(this.userProvidedConfig&&"number"==typeof this.userProvidedConfig.abPercentage&&this.userProvidedConfig.abPercentage<101&&this.userProvidedConfig.abPercentage>-1?this.intentIqConfig.abTesting.userActualPercentage=this.userProvidedConfig.abPercentage:this.intentIqConfig.abTesting.userActualPercentage=-2,this.intentIqConfig.abTesting.userActualPercentage){case 0:this.configureABTestingForGroupB();break;case 100:case-2:this.configureABTestingForGroupA();break;default:this.configureABTestingForPercentage()}},i.prototype.abTestingAdvancedConfiguration=function(){let e;this.intentIqConfig.abTesting.currentTestGroup===this.intentIqConfig.abTesting.groupNames.notYetDefined&&(e=this.readData(this.intentIqConfig.lsKeys.abPercentage),isNaN(parseInt(e))||(this.intentIqConfig.abTesting.currentPercentage=Number(e)),null!=(e=this.readData(this.intentIqConfig.lsKeys.abGroup))&&(this.intentIqConfig.abTesting.currentTestGroup=e,this.intentIqConfig.isInPassiveMode=this.intentIqConfig.abTesting.currentTestGroup===this.intentIqConfig.abTesting.groupNames.withoutIIQ),this.intentIqConfig.abTesting.configurationSource.currentConfigurationSource===this.intentIqConfig.abTesting.configurationSource.percentage)&&this.isDefined(this.intentIqConfig.abTesting.userActualPercentage)&&this.intentIqConfig.abTesting.userActualPercentage>0&&this.intentIqConfig.abTesting.userActualPercentage<100&&this.intentIqConfig.abTesting.userActualPercentage!==this.intentIqConfig.abTesting.currentPercentage&&(this.intentIqConfig.abTesting.previousTestGroup=this.intentIqConfig.abTesting.currentTestGroup,this.intentIqConfig.abTesting.previousPercentage=this.intentIqConfig.abTesting.currentPercentage,this.intentIqConfig.abTesting.currentPercentage=this.intentIqConfig.abTesting.userActualPercentage,this.generateTestGroupAccordingToPercentageAndConfigure(),this.persistABTestingSettingsToLS())},i.prototype.initABTestingConfiguration=function(){switch(this.intentIqConfig.abTesting.configurationSource.currentConfigurationSource){case this.intentIqConfig.abTesting.configurationSource.group:this.configurationSourceGroupInitilization();break;case this.intentIqConfig.abTesting.configurationSource.percentage:this.configurationSourcePercentageInitilization();break;case this.intentIqConfig.abTesting.configurationSource.iiqserver:this.configureABTestingForIIQServer();break;case this.intentIqConfig.abTesting.configurationSource.disabled:this.configureABTestingForGroupA()}this.abTestingAdvancedConfiguration()},i.prototype.generateTestGroupAccordingToPercentageAndConfigure=function(){this.generateRandom1to99()<this.intentIqConfig.abTesting.currentPercentage?(this.intentIqConfig.abTesting.currentTestGroup=this.intentIqConfig.abTesting.groupNames.withIIQ,this.intentIqConfig.isInPassiveMode=!1):(this.intentIqConfig.abTesting.currentTestGroup=this.intentIqConfig.abTesting.groupNames.withoutIIQ,this.intentIqConfig.isInPassiveMode=!0)},i.prototype.persistABTestingSettingsToLS=function(){this.isDefined(this.intentIqConfig.abTesting.currentTestGroup)&&this.storeData(this.intentIqConfig.lsKeys.abGroup,this.intentIqConfig.abTesting.currentTestGroup),this.isDefined(this.intentIqConfig.abTesting.currentPercentage)&&this.storeData(this.intentIqConfig.lsKeys.abPercentage,this.intentIqConfig.abTesting.currentPercentage)},i.prototype.getRequest=function(e,t,n,i){const r=new XMLHttpRequest;this.intentIqConfig.isAsyncServerRequest?r.open("GET",e,!0):r.open("GET",e,!1),e.startsWith("https")&&(r.withCredentials=!0),r.timeout=t,r.onreadystatechange=function(){n&&4===r.readyState&&n(r.responseText)},r.ontimeout=function(){i&&i()},r.send()},i.prototype.makeServerRequest=function(e,t){const n=this;let i=!1;this.logger.info("Sending request"),this.requestRtt=Date.now(),!0===t&&(this.logger.info("Setting prebid config callback timeout"),this.callbackTimeotID||(this.callbackTimeotID=setTimeout(this.fireCallbackOnRequestTimeout.bind(null,this),this.intentIqConfig.timeoutInMillis))),this.clearCounters(),this.getRequest(e,9999999,(function(e){let t;n.intentIqConfig.analytics.requestRtt=Date.now()-n.requestRtt,(e=n.tryParse(e))&&(n.partnerData.date=Date.now(),"pid"in e&&(n.intentIqConfig.analytics.profile=e.pid,"ls"in e)&&!0===e.ls&&(n.firstPartyData.pid=e.pid,i=!0),"dbsaved"in e&&(n.firstPartyData.dbsaved=e.dbsaved,i=!0),"cttl"in e?(n.currentDataTTl=e.cttl,n.logger.info("Received custom TTL from server, value: "+n.currentDataTTl)):(n.currentDataTTl=n.intentIqConfig.refreshInMillis,n.logger.info("No custom TTL from server, setting customers value: "+n.currentDataTTl)),"gtwaddr"in e&&(n.gatewayServerAddress=e.gtwaddr),"tc"in e&&(n.intentIqConfig.analytics.terminationCause=e.tc,"mde"in e)&&!0===e.mde&&!1===n.gatewayWasCalled&&!0===e.mde&&35===n.intentIqConfig.analytics.terminationCause&&"Safari"===n.detectBrowser()&&(n.logger.info("VP detected, trying to resolve."),n.gatewayWasCalled=!0,t=n.createRequestUrl(!0),n.makeServerRequest(t+="&gtw=true",!0)),"ct"in e&&(n.intentIqConfig.analytics.clientType=e.ct),"adt"in e&&(n.intentIqConfig.analytics.adserverDeviceType=e.adt),"sid"in e&&(n.intentIqConfig.analytics.siteId=e.sid),"pidd"in e&&(n.intentIqConfig.analytics.isProfileDeterministic=e.pidd),n.tryExtractConfiguration(e),"ls"in e&&!0===e.ls&&(!n.intentIqConfig.isInPassiveMode&&n.intentIqConfig.abTesting.currentTestGroup!==n.intentIqConfig.abTesting.groupNames.withoutIIQ||(e.data={}),t=n.intentIqData&&n.intentIqData.eids&&Array.isArray(n.intentIqData.eids)&&n.intentIqData.eids.length>0,"lsps"in e&&!0!==e.lsps&&(!1!==e.lsps||t)||(n.partnerData.data=e.data,n.intentIqData=e.data,n.extractIdentittyModulesIds(),n.fillEidsNames(),n.eidsReceptionsTime=Date.now())),n.logger.info("Received Data: "+JSON.stringify(e))),i&&n.storeData(n.intentIqConfig.lsKeys.FIRST_PARTY_KEY,JSON.stringify(n.firstPartyData)),n.savePartnerDataToLocalStore(),n.isPrebidConfigurationSet||(n.isPrebidConfigurationSet=!0,n.configurePrebid()),n.logger.info("Response from PE parsed, firing callback"),n.fireCallback()}),(function(){n.intentIqConfig.analytics.requestRtt=-1,n.fireCallback()}))},i.prototype.savePartnerDataToLocalStore=function(){this.partnerData||(this.partnerData=this.tryParse(this.readData(this.intentIqConfig.lsKeys.PARTNER_DATA_KEY))),this.partnerData&&(this.partnerData.callCount=this.counters.callCount,this.partnerData.failCount=this.counters.failCount,this.partnerData.noDataCounter=this.counters.noDataCounter,this.partnerData.cttl=this.currentDataTTl,this.partnerData.clientType=this.intentIqConfig.analytics.clientType,this.partnerData.adserverDeviceType=this.intentIqConfig.analytics.adserverDeviceType,this.partnerData.terminationCause=this.intentIqConfig.analytics.terminationCause,this.partnerData.profile=this.intentIqConfig.analytics.profile,this.partnerData.pidDeterministic=this.intentIqConfig.analytics.pidDeterministic,this.partnerData.siteId=this.intentIqConfig.analytics.siteId,this.storeData(this.intentIqConfig.lsKeys.PARTNER_DATA_KEY,JSON.stringify(this.partnerData)))},i.prototype.createRequestUrl=function(e){return e=(!0===e?this.gatewayServerAddress:this.intentIqConfig.iiqServerAddress)+"/profiles_engine/ProfilesEngineServlet?at=39&mi=10&dpi="+this.intentIqConfig.partner+"&pt=17&dpn=1",e=(e+=this.intentIqConfig.pai?"&pai="+encodeURIComponent(this.intentIqConfig.pai):"")+(this.version?"&jsver="+encodeURIComponent(this.version):""),e=this.appendFirstPartyDataToUrl(e),e=(e+=this.appendCounters(e))+"&iiqlocalstorageenabled="+encodeURIComponent(this.hasLocalStorage()),e=this.addUniquenessToUrl(e),e=this.addMetaData(e),e+="&cttl="+encodeURIComponent(this.currentDataTTl),this.currentUspValue!==this.uspCodes.INITIAL_VALUE&&this.currentUspValue!==this.uspCodes.ABSENCE_VALUE&&(e+="&pa="+encodeURIComponent(this.currentUspValue)),e=this.appendPartnersFirsyParty(e),e=this.appendRttDate(e),e=this.appendLastDataUpdateDate(e),e=this.appendWithAnalyticsData(e),e=this.appendReferrerToUrl(e),(e+="&japbjs="+(null!==this.intentIqConfig.pbjs))+"&japs="+this.intentIqConfig.siloEnabled},i.prototype.appendCounters=function(e){return e="number"==typeof this.counters.callCount?"&jaesc="+encodeURIComponent(this.counters.callCount):"",(e+="number"==typeof this.counters.failCount?"&jafc="+encodeURIComponent(this.counters.failCount):"")+("number"==typeof this.counters.noDataCounter?"&jaensc="+encodeURIComponent(this.counters.noDataCounter):"")},i.prototype.appendLastDataUpdateDate=function(e){return isNaN(this.lastDataUpdateDate)?e:e+"&"+this.intentIqConfig.urlParamsNames.lastDataUpdateDate+"="+this.lastDataUpdateDate},i.prototype.appendRttDate=function(e){return isNaN(this.intentIqConfig.analytics.requestRtt)?e:e+"&"+this.intentIqConfig.urlParamsNames.requestRtt+"="+this.intentIqConfig.analytics.requestRtt},i.prototype.appendWithAnalyticsData=function(e){return e+"&"+this.intentIqConfig.urlParamsNames.testGroup+"="+this.intentIqConfig.abTesting.currentTestGroup},i.prototype.appendABTestingData=function(e){try{this.isDefined(this.intentIqConfig.abTesting.isInTestGroup)&&(e=e+"&"+this.intentIqConfig.urlParamsNames.isInTestGroup+"="+this.intentIqConfig.abTesting.isInTestGroup),this.isDefined(this.intentIqConfig.abTesting.currentPercentage)&&(e=e+"&"+this.intentIqConfig.urlParamsNames.testPercentage+"="+this.intentIqConfig.abTesting.currentPercentage),this.isDefined(this.intentIqConfig.abTesting.currentTestGroup)&&(e=e+"&"+this.intentIqConfig.urlParamsNames.testGroup+"="+this.intentIqConfig.abTesting.currentTestGroup)}catch(e){this.logger.error(e)}return e},i.prototype.appendPartnersFirsyParty=function(e){try{if(-1===this.intentIqConfig.partnerClientIdType)return e;""!==this.intentIqConfig.partnerClientId&&(e=(e=e+"&pcid="+this.intentIqConfig.partnerClientId)+"&idtype="+this.intentIqConfig.partnerClientIdType)}catch(e){this.logger.error(e)}return e},i.prototype.addMetaData=function(e){var t=(t=this.intentIqConfig.sourceMetaDataExternal)||this.intentIqConfig.sourceMetaData;return isNaN(t)||(e+="&fbp="+t),e},i.prototype.addUniquenessToUrl=function(e){return e+"&tsrnd="+Math.floor(1e3*Math.random())+"_"+(new Date).getTime()},i.prototype.appendFirstPartyDataToUrl=function(e){return(e=(e=(e=(e+=this.isDebug()?"&ip="+encodeURIComponent(this.generateRandomUsIp()):"")+(this.firstPartyData.pid?"&pid="+encodeURIComponent(this.firstPartyData.pid):""))+(this.firstPartyData.dbsaved?"&dbsaved="+encodeURIComponent(this.firstPartyData.dbsaved):""))+(this.firstPartyData.pcid?"&iiqidtype=2&iiqpcid="+encodeURIComponent(this.firstPartyData.pcid):""))+(this.firstPartyData.pcidDate?"&iiqpciddate="+encodeURIComponent(this.firstPartyData.pcidDate):"")},i.prototype.appendReferrerToUrl=function(e){return""!==this.getRefferer()&&(e+="&vrref="+this.getRefferer()),e},i.prototype.getRefferer=function(){return""!==this.intentIqConfig.domainName?encodeURIComponent(this.intentIqConfig.domainName):document.referrer&&""!==document.referrer?encodeURIComponent(document.referrer):""},i.prototype.updatePrebidObject=function(e,t){try{e?t?(this.logger.info("String PBJS Reconfiguration"),this.intentIqConfig.subscriptionFlags={bidWon:!1,bidRequested:!1,beforeBidderHttp:!1,auctionInited:!1},this.wasCallbackFired=!1,this.intentIqConfig.pbjs=e,this.intentIqConfig.callback=t,this.subscribeForPrebidEvents(),this.configurePrebid(),this.getDataOrCallServerIfNeeded(!0)):this.logger.error("CALLBACK not provided while trying to update pbjs objecr refference"):this.logger.fatal("PBJS not provided while trying to update pbjs objecr refference")}catch(e){this.logger.error(e)}},i.prototype.onBidWonEvent=function(e,t){try{let n;t.intentIqConfig.pbmonitoring.pbMonitoringEnabled?t.isInBrowserBlacklist?t.logger.info("Browser is in blacklist. Skipping report."):t.isObjectEmpty(e)?t.logger.info("eventData is empty"):null===(n=t.prepareDataForDelivery(e,null,t))?t.logger.info("Failed to prepare bid won data to send, "+t.intentIqConfig.partner):t.addDataToSendAndInitSender(n,t):t.logger.info("pbMonitoringEnabled is disabled ")}catch(e){t.logger.error(e)}},i.prototype.addDataToSendAndInitSender=function(e,t){try{t.messagesArray.push(e),t.logger.info("New data available to send, "+t.intentIqConfig.partner),t.startSender()}catch(e){t.logger.error(e)}},i.prototype.getDefaultDataObject=function(){return{inbbl:!1,pbjsver:"NR",bidderCode:void 0,cpm:void 0,currency:void 0,originalCpm:void 0,originalCurrency:void 0,status:void 0,prebidAuctionId:void 0,placementId:void 0,biddingPlatformId:void 0,partnerAuctionId:"BW",abPercentage:void 0,abGroup:void 0,isInTestGroup:void 0,enhanceRequests:void 0,hadEids:void 0,userPercentage:void 0,ABTestingConfigurationSource:void 0,jsversion:void 0,lateConfiguration:void 0,eidsNames:void 0,rtt:void 0,clientType:void 0,AdserverDeviceType:void 0,terminationCause:void 0,profile:void 0,sid:void 0,idls:void 0,ast:void 0,eidt:void 0,aid:void 0,aeidln:void 0,wsrvcll:void 0,vrref:void 0,pcid:void 0,partnerId:void 0}},i.prototype.fillAgentRuntimeData=function(e,t){let n;e.intentIqConfig&&e.intentIqConfig.paramsNames?(t[e.intentIqConfig.paramsNames.partnerId]=e.intentIqConfig.partner,t[e.intentIqConfig.paramsNames.isInBrowserBlacklist]=e.isInBrowserBlacklist,e.version&&(t[e.intentIqConfig.paramsNames.jsverion]=e.version),e.intentIqConfig.pbjs&&e.intentIqConfig.pbjs.version&&(t[e.intentIqConfig.paramsNames.prebidVersion]=e.intentIqConfig.pbjs.version),t[e.intentIqConfig.paramsNames.refferer]=e.getRefferer(),n=e.auctionStartTimeData[t.prebidAuctionId]||0,t[e.intentIqConfig.paramsNames.wasSubscribedForPrebid]=e.isSubscribedForPrebidEvents,t[e.intentIqConfig.paramsNames.enhanceRequests]=e.intentIqConfig.shouldSetUidsModulesConfig,t[e.intentIqConfig.paramsNames.hadEids]=!(null===e.eidsReceptionsTime||n<e.eidsReceptionsTime),void 0===e.auctionStartTimeData[t.prebidAuctionId]&&(t[e.intentIqConfig.paramsNames.hadEids]=void 0),t[e.intentIqConfig.paramsNames.auctionStartTime]=n,t[e.intentIqConfig.paramsNames.lateConfiguration]=0===n?void 0:e.configurationTime>n,e.userProvidedConfig&&(t[e.intentIqConfig.paramsNames.userActualPercentage]=e.userProvidedConfig.abPercentage,t[e.intentIqConfig.paramsNames.ABTestingConfigurationSource]=e.userProvidedConfig.ABTestingConfigurationSource),e.intentIqConfig.abTesting&&(t[e.intentIqConfig.paramsNames.abPercentage]=e.intentIqConfig.abTesting.currentPercentage,t[e.intentIqConfig.paramsNames.abTestGroup]=e.intentIqConfig.abTesting.currentTestGroup,t[e.intentIqConfig.paramsNames.isInTestGroup]=e.intentIqConfig.abTesting.currentTestGroup),0!==n&&e.configurationTime>n&&e.logger.info("Late configuration suspected. Events were missed."),t[e.intentIqConfig.paramsNames.eidsNames]=e.eidsNames,t[e.intentIqConfig.paramsNames.hadEidsInLocalStorage]=e.hadEidsInLocalStorage,t[e.intentIqConfig.paramsNames.eidsReadTime]=e.eidsReceptionsTime,t[e.intentIqConfig.paramsNames.agentId]=e.agentId,t[e.intentIqConfig.paramsNames.auctionEidsLegth]=e.auctionEidsLength[t.prebidAuctionId],t[e.intentIqConfig.paramsNames.wasServerCalled]=e.wasServerCalled,e.intentIqConfig.analytics&&(t[e.intentIqConfig.paramsNames.requestRtt]=e.intentIqConfig.analytics.requestRtt,e.intentIqConfig.analytics.requestRtt=0,e.requestRtt=0,t[e.intentIqConfig.paramsNames.clientType]=e.intentIqConfig.analytics.clientType,t[e.intentIqConfig.paramsNames.adserverDeviceType]=e.intentIqConfig.analytics.adserverDeviceType,t[e.intentIqConfig.paramsNames.terminationCause]=e.intentIqConfig.analytics.terminationCause,t[e.intentIqConfig.paramsNames.profile]=e.intentIqConfig.analytics.profile,t[e.intentIqConfig.paramsNames.siteId]=e.intentIqConfig.analytics.siteId)):e.logger.error("agent.intentIqConfig or agent.intentIqConfig.paramsNames was nor initialized on reporting"),e.hasLocalStorage()&&null!==(n=e.readData(e.intentIqConfig.lsKeys.FIRST_PARTY_KEY))&&("pcid"in(n=JSON.parse(n))&&(n=n.pcid),t.pcid=n)},i.prototype.fillPartnerReportingData=function(e,t,n){n.bidderCode=e.bidderCode,n.cpm=e.cpm,n.currency=e.currency,n.originalCpm=e.originalCpm,n.originalCurrency=e.originalCurrency,n.status=e.status,n.biddingPlatformId=e.biddingPlatformId,n.prebidAuctionId=e.prebidAuctionId,n.placementId=e.placementId,n.partnerAuctionId=e.partnerAuctionId,t.partnerAuctionIdsArray&&t.partnerAuctionIdsArray.push(n.partnerAuctionId)},i.prototype.fillPrebidEventData=function(e,t,n){e.bidderCode&&(n.bidderCode=e.bidderCode),e.cpm&&(n.cpm=e.cpm),e.currency&&(n.currency=e.currency),e.originalCpm&&(n.originalCpm=e.originalCpm),e.originalCurrency&&(n.originalCurrency=e.originalCurrency),e.status&&(n.status=e.status),e.auctionId&&(n.prebidAuctionId=e.auctionId);let i=!1;if(e.params&&Array.isArray(e.params))for(let t=0;t<e.params.length;t++)if(e.params[0].placementId){n.placementId=e.params[0].placementId,i=!0;break}!1===i&&e.adUnitCode&&(n.placementId=e.adUnitCode),n.biddingPlatformId=1,n.partnerAuctionId="BW"},i.prototype.prepareDataForDelivery=function(e,t,n){try{const i=n.getDefaultDataObject(),r=(i.prebidAuctionId=t?t.prebidAuctionId:e.auctionId,n.fillAgentRuntimeData(n,i),t?n.fillPartnerReportingData(t,n,i):n.fillPrebidEventData(e,n,i),btoa(JSON.stringify(i)));return n.logger.info("Original Data : "+JSON.stringify(i,null,4)),n.logger.info("Data conversion succeed : "+JSON.stringify(r)),r}catch(e){return n.logger.error("Failed to convert data"),n.logger.error(e),{}}},i.prototype.startSender=function(){try{this.logger.info("We have some data to send - starting delayed sender. Delay = "+this.intentIqConfig.messageSendingDelay),this.isDefined(this.delayedSenderTimeouter)&&(this.logger.info("Updating sender"),clearTimeout(this.delayedSenderTimeouter)),this.delayedSenderTimeouter=setTimeout(this.dataSender.bind(null,this),this.intentIqConfig.messageSendingDelay)}catch(e){this.logger.error(e)}},i.prototype.dataSender=function(e){try{let t,n,i,r;0==e.messagesArray.length?e.logger.info("Skipping data send , array is empty"):(t="GET"===e.intentIqConfig.reportMethod,n=JSON.stringify(e.messagesArray),i=new XMLHttpRequest,r=e.reportingServerAddress+"/"+e.dataReportingPath+"?pid="+e.intentIqConfig.partner+"&mct="+e.messagesArray.length+"&agid="+e.agentId+(e.firstPartyData&&e.firstPartyData.pid?"&iiqid="+encodeURIComponent(e.firstPartyData.pcid):"")+"&jsver="+e.version+"&vrref="+e.getRefferer()+"&paucid="+encodeURIComponent(JSON.stringify(e.partnerAuctionIdsArray))+"&pa="+encodeURIComponent(e.currentUspValue),t&&(r+="&payload="+n),r.startsWith("https")&&(i.withCredentials=!0),i.open(t?"GET":"POST",r,!0),t?i.setRequestHeader("Content-type","text/plain"):(i.setRequestHeader("Content-type","application/json"),i.setRequestHeader("Access-Control-Allow-Origin","*"),i.setRequestHeader("Access-Control-Allow-Credentials","true"),i.setRequestHeader("Access-Control-Allow-Methods","GET,HEAD,OPTIONS,POST,PUT"),i.setRequestHeader("Access-Control-Allow-Headers","Access-Control-Allow-Headers, Origin,Accept, X-Requested-With, Content-Type, Access-Control-Request-Method, Access-Control-Request-Headers")),e.messagesArray=[],e.partnerAuctionIdsArray=[],i.onreadystatechange=function(){4==i.readyState&&200==i.status&&e.processResponse(i.responseText)},e.logger.info("Trying to send data: "),t?i.send():i.send(n))}catch(t){e.logger.error(t)}},i.prototype.processResponse=function(e){try{let t;this.logger.info("Response received"+JSON.stringify(e)),this.isDefined(e)?(t=this.tryParse(e),Array.isArray(t)?0===t.length?this.logger.info("Control array is empty: "+e):(this.logger.info("Sending new cntroll param for processing: "+JSON.stringify(t[0])),this.tryExtractConfiguration(t[0])):this.logger.info("Wrong response format (not an array): "+e)):this.logger.info("Response is empty")}catch(e){this.logger.error(e)}},i.prototype.reportExternalWin=function(e){try{let t,n;this.isInBrowserBlacklist?this.logger.info("Browser is in blacklist. Skipping report."):(t=new r(e),null===(n=this.prepareDataForDelivery(null,t,this))?this.logger.info("Failed to prepare bid won data to send, "+this.intentIqConfig.partner):this.addDataToSendAndInitSender(n,this))}catch(e){this.logger.error(e)}},i.prototype.tryRegisterForBidRequested=function(e){e.intentIqConfig.pbjs.onEvent("bidRequested",(function(t){e.clearDuplictesBeforeRubicon(t,e)}))},i.prototype.clearDuplictesBeforeRubicon=function(e,n){try{if(!("rubicon"!==e.bidderCode||e.bids.length<1)&&null!=n.intentIqConfig.moduleIds.unifiedeId){let i;const r=t(e.bids);try{for(r.s();!(i=r.n()).done;){const e=i.value;if(e.userId.tdid&&Array.isArray(e.userId.pubProvidedId)){for(let t=0;t<e.userId.pubProvidedId.length;t++)if("adserver.org"===e.userId.pubProvidedId[t].source){e.userId.pubProvidedId.splice(t,1);break}if(Array.isArray(e.userIdAsEids))for(let t=0;t<e.userIdAsEids.length;t++)if("adserver.org"===e.userIdAsEids[t].source&&e.userIdAsEids[t].uids[0].id===n.intentIqConfig.moduleIds.unifiedeId){e.userIdAsEids.splice(t,1);break}}}}catch(e){r.e(e)}finally{r.f()}}}catch(e){n.logger.fatal(e)}},i.prototype.configurePrebid=function(){try{this.logger.info("Starting Prebid configuration "),this.intentIqConfig.pbjs&&this.intentIqConfig.pbjs.que?(this.logger.info("Pushing config for prebid "),this.intentIqConfig.pbjs.que.push(this.tryRegisterIds.bind(null,this))):this.logger.info("PBJS or QUE not defined")}catch(e){this.logger.error(e)}},i.prototype.subscribeForPrebidEvents=function(){try{this.logger.info("Starting Prebid subscription "),this.intentIqConfig.pbjs&&this.intentIqConfig.pbjs.que?(this.intentIqConfig.shouldClearDuplicatresForRubicon&&!this.intentIqConfig.subscriptionFlags.bidRequested&&(this.logger.info("Subscribing for bidRequested for rubicon cleanup"),this.intentIqConfig.pbjs.que.push(this.tryRegisterForBidRequested.bind(null,this)),this.intentIqConfig.subscriptionFlags.bidRequested=!0),this.intentIqConfig.pbmonitoring.pbMonitoringEnabled&&!this.intentIqConfig.subscriptionFlags.bidWon?(this.logger.info("Registering for subscription for bidWon event"),this.intentIqConfig.pbjs.que.push(this.tryRegisterForBidWon.bind(null,this)),this.intentIqConfig.subscriptionFlags.bidWon=!0):!0===this.intentIqConfig.manualWinReportEnabled&&this.logger.info("Manual won report enabled. Skipping bidwon subscription."),this.intentIqConfig.subscriptionFlags.auctionInited||(this.logger.info("Subscribing for auctionInited event"),this.intentIqConfig.pbjs.que.push(this.tryRegisterForAuctionInited.bind(null,this)),this.intentIqConfig.subscriptionFlags.auctionInited=!0)):this.logger.info("PBJS or QUE not defined")}catch(e){this.logger.error(e)}},i.prototype.tryRegisterForAuctionInited=function(e){e.intentIqConfig.pbjs.onEvent("auctionInit",(function(t){try{e.updateCountersAndSaveIfAsked(e.intentIqData,!0),e.auctionEidsLength[t.auctionId]=t.bidderRequests[0].bids[0].userId&&t.bidderRequests[0].bids[0].userId.pubProvidedId?t.bidderRequests[0].bids[0].userId.pubProvidedId.length:-1}catch(t){e.logger.fatal(t)}try{e.auctionStartTimeData[t.auctionId]=t.timestamp,e.logger.info("Auction started.")}catch(t){e.logger.fatal(t)}}))},i.prototype.tryRegisterForBidWon=function(e){e.intentIqConfig.pbjs.onEvent("bidWon",(function(t){e.onBidWonEvent(t,e)}))},i.prototype.tryRegisterIds=function(e){if(void 0!==e)try{let t={name:"pubProvidedId",params:{eidsFunction:e.getPubprovidedEids.bind(null,e)}},n=e.intentIqConfig.pbjs.getConfig("userSync.userIds");e.logger.info("Registering PubProvided callback "),n?e.intentIqConfig.shouldRepalcePubprovided?(e.logger.info("Configured to set before others pubprovided"),n.unshift(t),e.intentIqConfig.pbjs.setConfig({userSync:{userIds:n}})):n.push(t):e.intentIqConfig.pbjs.setConfig({userSync:{userIds:[t]}}),e.intentIqConfig.shouldSetUidsModulesConfig&&null!==e.intentIqConfig.moduleIds.unifiedeId?(t=e.setConfigObjectForUnifiedId(e.intentIqConfig.moduleIds.unifiedeId),(n=e.intentIqConfig.pbjs.getConfig("userSync.userIds"))&&Array.isArray(n)?((0!==n.filter((function(e){return"unifiedId"===e.name})).length||e.intentIqConfig.pbjs.getUserIds()&&e.intentIqConfig.pbjs.getUserIds().tdid)&&!e.intentIqConfig.shouldReplaceUnifiedId||(e.logger.info("Unshifting configuration for unifyedIds"),n.unshift(t)),e.intentIqConfig.pbjs.setConfig({userSync:{userIds:n}})):e.intentIqConfig.pbjs.setConfig({userSync:{userIds:[t]}}),e.intentIqConfig.pbjs.refreshUserIds()):e.intentIqConfig.pbjs.refreshUserIds()}catch(t){e.logger.error("Faild to register EIDS")}},i.prototype.setConfigObjectForUnifiedId=function(e){return{name:"unifiedId",value:{tdid:e}}},i}n.r(t),n.d(t,{loadIIQ:()=>i})},6611:(e,t,n)=>{"use strict";n.d(t,{S1:()=>f,U2:()=>p,_D:()=>g,t8:()=>h});var i=n(943),r=n(5729),s=n(6550),o=n(6883),a=n(2330),d=n(4653),l=n(5965);n.g.adverts.config=n.g.adverts.config||{};const c=(0,d.x)("config"),u={},p=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=(0,i.Z)(u,...t);return"object"==typeof r?JSON.parse(JSON.stringify(r)):r},h=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.Z)(u,...t)};function f(){!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.g.adverts.config;Object.entries(e).forEach((e=>{let[t,n]=e;try{if((0,a.j)(n)){const e=(0,a.H)(n);void 0!==e&&h(t,e)}else h(t,n)}catch(e){console.error(e)}})),n.g.adverts.config=u}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.g.adverts.config),function(){const e=JSON.parse(localStorage.getItem("mol-ads-control-panel-config")||"null");"object"==typeof e&&null!==e&&(0,l.Z)(u,e)}(),g(),function(e){if("string"!=typeof e.setPlugin)return;const t=e=>["on","true","1","enabled"].includes(e),[n,i,r]=e.setPlugin.split(",").reduce(((e,n)=>{let[i,r,s]=e;const[o,a]=n.split(":");if(void 0===a)return[i,r,s];if(o.includes("*")){const[e,n]=o.split("*");!t(a)&&""===n&&s.push(e)}else t(a)?i.add(o):r.add(o);return[i,r,s]}),[new Set([]),new Set([]),[]]),s=p("plugins.enabled",[]).filter((e=>!((e=>r.some((t=>e.includes(t)))&&!n.has(e))(e)||i.has(e)))),o=s.indexOf("debug.setPlugin")+1;s.splice(o,0,...n),h("plugins.enabled",[...new Set(s)])}(s.SP)}const g=()=>{Object.entries(s.SP).forEach((e=>{let[t,n]=e;if(t.startsWith("ac."))if(t.endsWith("[+]")){const e=t.substring(3,t.length-3);h(e,(0,o.jj)(p(e,[]).concat(n)))}else if(t.endsWith("[-]")){const e=t.substring(3,t.length-3);h(e,p(e,[]).filter((e=>!n.includes(e))))}else if(t.endsWith("{}")){const e=t.substring(3,t.length-2);h(e,(e=>{try{return JSON.parse(e)}catch(e){return c.error(e),{}}})(n))}else h(t.slice(3),(e=>""===e||"boolean"==typeof e?e:isNaN(e)?(e=>{const t="true"===e;return"false"===e||t?t:e})(e):parseFloat(e))(n))}))}},2711:(e,t,n)=>{"use strict";(0,n(6611).S1)()},2330:(e,t,n)=>{"use strict";n.d(t,{H:()=>d,j:()=>l});var i=n(6550),r=n(1871),s=n(6883),o=n(943),a=n(1782);function d(e){let{__targeting:t}=e;return((0,s.pj)(t).find(c)||{}).payload}function l(e){return"object"==typeof e&&!(null==e||!e.__targeting)}const c=(0,r.ar)({browser:u((function(e){switch(e){case"chrome":return i.G9;case"edge":return i.P0;case"ie":return i.JW;case"firefox":return i.D1;case"safari":return i.s$;default:return!1}})),cookie:u((function(e){return Object.entries(e).some((e=>{let[t,n]=e;return n.includes((0,i.ej)(t)||"")}))})),device:u((function(e){switch(e){case"tablet":return a.ZP.isIPad()||a.ZP.isAndroidTablet();case"desktop":return!a.ZP.isMobile()}})),iOSVersion:u((function(e){let{min:t,max:n}=e;const[r]=(0,i.oK)();return(void 0===t||t<=r)&&(void 0===n||n>=r)})),minInnerWindowHeight:u((function(e){return window.innerHeight>=e})),minInnerWindowWidth:u((function(e){return window.innerWidth>=e})),minDocumentWidth:u((function(e){return document.documentElement.clientWidth>=e})),pageCriteria:u(function(){const e=(0,r.ar)((0,r.UI)(window.PageCriteria||{},(e=>u(Array.isArray(e)?t=>e.includes(t):t=>t===e))),!0);return t=>e((0,r.CE)(t,"payload"))}()),timeRange:u((function(e){let{end:t,start:n}=e;const i=new Date,r=t&&p(t)<=i,s=n&&p(n)>i;return!r&&!s})),globalContext:u((function(e){let{prop:t,op:i,value:r}=e;const a=(0,o.Z)(n.g,t);switch(i){case"includes":return"string"==typeof a?a.includes(r):(0,s.pj)(a).includes(r);case"startsWith":return"string"==typeof a&&a.startsWith(r)}})),topWindow:u((function(e){return e?window.top===window:window.top!==window}))});function u(e){return t=>void 0===t||(Array.isArray(t)?t.some(e):e(t))}function p(e){const[t,n,i]=e.split(":").map(Number),r=new Date;return r.setHours(t),r.setMinutes(n),r.setSeconds(i),r}},3907:(e,t,n)=>{"use strict";n.r(t),n.d(t,{appendStyle:()=>m,closest:()=>f,contains:()=>y,createIframe:()=>I,elementReady:()=>s,getElementBottomOffset:()=>d,getElementComputedHeight:()=>w,getElementComputedWidth:()=>_,getElementScaledHeight:()=>b,getElementWidthScale:()=>T,getOffset:()=>a,getPageSize:()=>p,getParent:()=>v,getRelativeContainer:()=>c,getVisibleText:()=>S,getWindow:()=>u,insertAfter:()=>k,isElement:()=>g,loaded:()=>o,onBodyAvailable:()=>i,untilBodyAvailable:()=>r,walk:()=>h});const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;t.body?e():n.g.requestAnimationFrame((()=>{i(e,t)}))},r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return new Promise((t=>i(t,e)))},s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return new Promise(((i,r)=>{let s=!1;setTimeout((()=>{s=!0}),t);const o=()=>{const a=document.querySelector(e);a?i(a):s?r(new Error(`Element "${e}" not found after ${t}ms`)):setTimeout((()=>o()),n)};o()}))},o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return new Promise((t=>{["complete","loaded","interactive"].includes(e.readyState)?t():e.addEventListener("DOMContentLoaded",t)}))},a=e=>{let t,n,i={top:0,left:0};const r=e&&e.ownerDocument;if(r)return t=r.documentElement,e.getBoundingClientRect&&(i=e.getBoundingClientRect()),n=u(r),{top:i.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}};function d(e){return a(e).top+w(e)}const l=e=>{const t=getComputedStyle(e).getPropertyValue("position");return["relative","absolute"].includes(t)},c=e=>h(e,l,(e=>e.parentNode)),u=e=>{let t=null;return e&&(e===e.window?t=e:9===e.nodeType?t=e.defaultView||e.parentWindow:e.ownerDocument&&(t=e.ownerDocument.defaultView||e.ownerDocument.parentWindow)),t},p=()=>[document.body.scrollWidth,window.innerHeight+window.scrollMaxY,window.innerWidth,window.innerHeight],h=(e,t,n)=>{let i=e;for(;i;){if(t(i))return i;i=n(i)}},f=(e,t)=>h(e,t,(e=>{let{parentNode:t}=e;return t!==document&&t})),g=e=>e&&1===e.nodeType,m=e=>{if(!e)return;const t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:"textContent"in t?t.textContent=e:t.innerText=e,(document.body||document.head).appendChild(t)},y=(e,t)=>e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY,v=(e,t)=>h(e,(e=>e.matches(t)),(e=>e.parentNode)),b=e=>(e=>{const t=getComputedStyle(e),n=t.getPropertyValue("transform");if(n&&"none"!==n){const e=n.split("(")[1].split(")")[0].split(",");return parseFloat(e[3])}const i=t.getPropertyValue("zoom");return parseFloat(i||1)})(e)*w(e),_=e=>parseInt(getComputedStyle(e).getPropertyValue("width")),w=e=>parseInt(getComputedStyle(e).getPropertyValue("height")),T=e=>{const t=_(e);return _(document.body)/t};function I(e){let{content:t,insertMethod:n=(e=>{document.body.appendChild(e)}),width:i=0,height:r=0,log:s=(()=>{})}=e;const o=document.createElement("iframe");return o.border="0",o.style.width=`${i}px`,o.style.height=`${r}px`,o.style.border="none",s("inserting iframe"),n(o),s("writing iframe content",o),o.contentDocument.open(),o.contentDocument.domain=document.domain,o.contentDocument.write(t),o.contentDocument.close(),o}function S(e){window.getSelection().removeAllRanges();const t=document.createRange();t.selectNode(e),window.getSelection().addRange(t);const n=window.getSelection().toString().trim();return window.getSelection().removeAllRanges(),n}function k(e,t){t.parentNode.insertBefore(e,t.nextSibling)}},4666:(e,t,n)=>{"use strict";n.d(t,{H:()=>l});var i=n(4320),r=n(6550),s=n(2547),o=n(6611);const a=(0,i.gb)((()=>{var e;return null===(e=window.RTA)||void 0===e?void 0:e.ids}),300,3e3).then((e=>e.user||e.visit?{rta:{user:e.user,visit:e.visit}}:{})).catch((()=>({}))).then((e=>{var t,i;const{PageCriteria:a={},pagemeta:d={}}=window;return{account:"mol",adsFreeUser:null===(t=(i=n.g).isAdFreeEntitled)||void 0===t?void 0:t.call(i),articleId:a.articleId,channel:a.channel,configVersion:(0,o.U2)("__generated.commit.sha"),bundle:"facade",cmVersion:(0,o.U2)("__generated.rulesJs.version"),cmCluster:(0,o.U2)("__generated.rulesJs.cluster"),device:a.device,embed:!0,event_type:"bidmax",geo:a.geo,isMobile:a.isMobile,isTablet:a.isTablet,office:(0,s.K)(),pageType:a.pageType,pageViewId:a.pageViewId,referrer:document.referrer,sponsored:a.sponsored,subchannel:a.subchannel,timeAtSend:0,type_version:2,url:location.href,version:r.SP.bidmax||d.adsBundleVersion||"absent",...e}}));let d={};function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(arguments.length>1?arguments[1]:void 0)||!!(0,o.U2)("bidmax.dispatcher.useCurrentUrl");return a.then((i=>new Promise(((r,s)=>{const a=new XMLHttpRequest,l=t?`${n.g.location.origin}${n.g.location.pathname}`:(0,o.U2)("bidmax.dispatcher.url","//crta.dailymail.co.uk");a.open("POST",l,!0),a.addEventListener("abort",s),a.addEventListener("error",s),a.addEventListener("load",r),a.setRequestHeader("Content-Type","text/plain"),a.send(JSON.stringify({...i,...d,...e,timestamp:Date.now()}))})))).catch((e=>console.error(e)))}},34:(e,t,n)=>{void 0===n.g.adverts&&(n.g.adverts={}),n.g.adverts.queue=n.g.adverts.queue||[],n.g.DM=n.g.DM||{}},7249:(e,t,n)=>{"use strict";n.d(t,{fo:()=>s,s3:()=>o,uM:()=>a});const i=(0,n(4653).x)("plugin-registry"),r={};function s(e,t){i("registering plugin:",e),r[e]=t}function o(e){return r[e]}function a(){return{...r}}},5584:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DELAYED:()=>d,IMMEDIATE:()=>o,LAZY:()=>a,getEnabledRenderedSlots:()=>y,getEnabledSlots:()=>v,getLoadingSettings:()=>m,initEmergencyRules:()=>S,initSlots:()=>T,isAdEnabled:()=>f,resetSlots:()=>w,setSupportedSlots:()=>I});var i=n(6550),r=n(1871);(0,n(7249).fo)("adListLoader",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init:function(e){let{broker:t,getConfig:i,setConfig:r}=e;const o=_(i("slots.enabled",{}),b),a=Object.keys(o),d=new Set(a),f=u.filter((e=>!d.has(e))),m=a.reduce(((e,t)=>({...e,[t]:g(o[t])})),{}),y=i("slotDescription",{});l=a.filter((e=>!y[e]||!!y[e].id)),c=f,s=m,r("slots.enabled",m),t.emit("slots initialized",l),p(),t.on("system ready",(()=>{n.g.DM.later("DOM_READY",(()=>{document.write=document.writeln=e=>{try{throw new Error(e)}catch(e){n.g.DM.log("ads","Error: there was an attempt to document.write in a rendered page: ",e)}}}))})),t.on("set slots enabled",((e,t)=>{h(e,t)}))}});let s={};const o="immediate",a="lazy",d="delayed";let l=[],c=[];const u=["adx_page_skins","adx_tracking","banner_top","billboard","bvp_puff_26","bvp_puff_29","fff","fff_overlay","half_mpu_top","inread_player","inread_player_mw","inread_player_top","intro_ad","leader_bottom","leader_lower_middle","leader_middle","leader_top","leader_very_bottom","leader_wide","mpu_bottom","mpu_bottom_right","mpu_channel","mpu_comments_1","mpu_comments_2","mpu_home","mpu_middle","mpu_mobile","mpu_mobile_bottom","mpu_mobile_lower_middle","mpu_mobile_top","mpu_mobile_upper_middle","mpu_puff_10","mpu_puff_15","mpu_puff_20","mpu_puff_30","mpu_puff_45","mpu_puff_5","mpu_top","native_fff_accessorise","native_fff_overlay_accessorise","network_banner","para_top","puff_ad_3","puff_ad_6","puff_ad_9","sky_left_bottom","sky_left_top","sky_right_bottom","sky_right_top","sticky_banner","video_ad","video_carousel"],p=()=>{h(c,!1),h(l,!0)},h=function(e,t){e.forEach((e=>{const n=`molads_${e}_on`,i=`molads_${e}_off`;document.documentElement.classList.add(t?n:i),document.documentElement.classList.remove(t?i:n)}))},f=e=>{const t=e&&(e.dfpPos||e.pos);return!(window.disableAds&&!i.SP.ignoreDisableAds)&&(!t||!u.includes(t)||l.includes(t))},g=e=>{let{loadingOffset:t,loadingTrigger:i,loadingType:r=o}=e;const s={type:r||o,trigger:i,offset:isNaN(t)?0:Number(t)};return s.type===o||s.type===d||s.type===a&&s.trigger||(n.g.DM.log("ads","Unknown loading type or invalid loading trigger, falling back to immediate loading :",s),s.type=o),s},m=e=>s[e]||{type:o,trigger:void 0,offset:0},y=()=>l.slice(),v=y,b=(i.SP.setSlot&&i.SP.setSlot.split(",")||[]).reduce(((e,t)=>{const[n,i]=t.split(":").map((e=>e.trim()));return e[n]="on,true,1,enabled".includes(i||"true"),e}),{}),_=(e,t)=>!t||t&&(0,r.xb)(t)?e:Object.entries(t).reduce(((e,t)=>{let[n,i]=t;return i?e[n]={}:delete e[n],e}),e),w=()=>{l=[],c=[]},T=()=>{},I=e=>{},S=()=>{}},5069:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>init});var uuid__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3334);const showThankYouMessage=(getConfig,log)=>{try{log("Showing thank you message"),eval(getConfig("abe.thankYouMessage.js","DM.later('bundle', function(){window.top.DM.molFeAdblockerDialog.thanks()})"))}catch(e){console.error(e)}};function init(e){let{broker:t,getConfig:n,log:i}=e;const r=JSON.parse(localStorage.getItem("mol.abe.data")||"{}"),s=new Promise((e=>{t.once("ad block detection result",(s=>{let{adblocker:o}=s;o&&(void 0===r.v&&(r.i=(new Date).toISOString(),r.v=2,r.u=(0,uuid__WEBPACK_IMPORTED_MODULE_0__.Z)(),r.n=!0),r.v++,r.l=(new Date).toISOString(),localStorage.setItem("mol.abe.data",JSON.stringify(r))),r.i&&(i(o?"Ad blocker detected":"No ad blocker detected"),o||r.c&&!(r.c<r.l)||(r.c=(new Date).toISOString(),r.n=!0,i("First page load with no ad blocker, saving:",r),localStorage.setItem("mol.abe.data",JSON.stringify(r)),showThankYouMessage(n,i)),t.emit("ex ad blocker user",o,!!r.c),r.c?e({exabd:!o}):e({}))}))}));if(!r.i)return;i("ABE ran at last once, waiting for to ad blocker detection");let o={};void 0!==r.c&&(o.exabd=r.c>r.l),s.then((e=>o=e));const a=e=>({[r.n?"exabd2":"exabd"]:!!e});t.emit("set page level targeting",a(o.exabd)),t.emit("set page level targeting",s.then((e=>{let{exabd:t}=e;return a(t)}))),t.register("call for page analytics",(()=>o))}init.ccpa={enabledIfDissent:!0},init.gdpr={enabledIfDissent:!0}},2455:(e,t,n)=>{"use strict";n(7080),n(4666),n(4241),n(4871);var i=n(4653);n(2186),(0,i.x)("abe.detectAdBlocker")},4871:(e,t,n)=>{"use strict";(0,n(7249).fo)("scriptTagsMonitor",{init:function(e){let{broker:t,getConfig:n,log:r}=e;n("abe.detection.enabled",!1)?r("abd enabled, bailing"):n("__generated.modifiers.applied",[]).some((e=>e.startsWith("campaigns.rules-linteItem")))?r("takeover applied, bailing"):(r("loading"),function(e){const t=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){this.addEventListener("error",(()=>{i++})),t.apply(this,arguments)}}(),t.register("call for page-unload",(()=>(r("reporting:",{xhrErrors:i}),{stm:{xe:i}}))))},isAdsFreeSupported:!1,ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0}});let i=0},7325:(e,t,n)=>{"use strict";n.r(t),n.d(t,{appendStyles:()=>N,default:()=>V,enableSlot:()=>D,getAdContainer:()=>j,getElementById:()=>M,getElementContainerById:()=>P,getElementOrIframeById:()=>k,isEmpty:()=>A,log:()=>R,nativeLoaded:()=>O,openAd:()=>B});var i=n(1028),r=n(5584),s=n(8749);const o=n(4689),a=n(8235),d=n(7325);let l;s.ZP.broker("NativeRenderer").on("system ready",(()=>{const e=window.location.href.match(/[&?]enable_native=([^&]+)/),t=e&&e[1];if(t){const e=r.initSlots;r.initSlots=function(n){n[t]={enabled:!0,state:"on"},e.apply(r,arguments)}}l=t,o((function(e){if(!e.isEmpty){const t=e.slot,n=t&&t.molAd;"native_"===n.pos.slice(0,7)&&"_dfp"===n.pos.slice(-4)&&p(n)}}))}));const c="\f\t",u=c.length;function p(e){const t=document.getElementById(e.parentId),n=d.getAdContainer(t);let i=!1;function r(){if(!i){i=!0;try{!function(e,t,n){const i=document.createElement("div");i.innerHTML=n;const r=i.childNodes;if("none"!==t.style.display){t.style.display="none";let n,i=t;const s=t.parentNode,o=e.pos.replace(/_dfp$/,"");for(let e=r.length;e--;)n=r[e],1===n.nodeType&&"SCRIPT"!==n.nodeName&&(s.insertBefore(n,t),i=n);const a=i,d=i;switch(e.pos){case"native_fff_overlay_accessorise":s.style.display="none";case"native_fff_accessorise":document.body.classList.add("fff-has-accessorise")}d&&a.hasAttribute("data-track-module")&&DM&&DM.externalLinkTracker&&(d.setAttribute("data-track-type","cl"),DM.externalLinkTracker(a.id,"cl")),l&&window.opener&&window.opener!==window&&window.opener.postMessage&&(window.addEventListener("message",h.bind(null,i,o)),f(window.opener,"isLoaded",!0,o))}}(e,t,n.body.innerHTML)}catch(e){console.error("Error moving native article: ",e)}}}n.body&&((n.defaultView||n.parentWindow).addEventListener("load",r),setTimeout(r,2e3))}function h(e,t,n){if(n.data.slice(0,u)===c){const i="data-native-ad-field";let r;try{r=a.parse(n.data.slice(u))}catch(e){console.error("Invalid message",e)}if(r&&r.type){const s=[].slice.call(e.querySelectorAll("["+i+"]"));let o;switch(r.type){case"getValues":o=s.map((function(e){return{name:e.getAttribute(i),value:e.textContent}}));break;case"setValues":s.forEach((function(e){const t=e.getAttribute(i);t in r.values&&(e.textContent=r.values[t])}))}o&&f(n.source,r.type,o,t,n.origin)}}}function f(e,t,n,i,r){const s={type:"response",query:t,position:i,value:n};e.postMessage(c+a.stringify(s),r||"*")}o((function(e){if(!e.isEmpty){const t=e.slot,n=t&&t.molAd;"native_"===n.pos.slice(0,7)&&"_dfp"===n.pos.slice(-4)&&p(n)}}));var g=n(3907),m=n(4653);function y(e){return this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e]}class v{constructor(){this.subscriptions={}}clone(){return{emit:this.emit.bind(this),off:this.off.bind(this),on:this.on.bind(this),once:this.once.bind(this)}}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];y.call(this,e).slice().forEach((e=>e(...n)))}off(e,t){const n=y.call(this,e);if(t){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}else n.length=0}on(e,t){y.call(this,e).push(t)}once(e,t){var n=this;const i=function(){n.off(e,i),t(...arguments)};this.on(e,i)}}var b=n(2623),_=n(9228),w=n(6883);const T=(e,t)=>{let n;try{n=e.contentDocument||e.contentWindow.document}catch(e){}return n||t},I=e=>t=>{const n=t&&T(t);return n&&n.getElementById(e)},S=e=>{const t=(e||document).getElementsByTagName("iframe");return Array.prototype.filter.call(t,C)},k=e=>{const t=I(e);return E(S(),(e=>t(e)&&e))},C=e=>e.id&&"google_ads_iframe_"===e.id.slice(0,18),E=(e,t)=>{for(let n=0,i=e.length;n<i;n++)if(t(e[n]))return e[n]},A=e=>{const t=document.getElementById(e),n=["a","iframe","object","img","video"];let i=!0;if(t)for(let e=n.length;i&&e--;)i=!t.getElementsByTagName(n[e]).length;return i},P=e=>{const t=k(e),n=/\badHolder\b/;if(!t)return;let i=t;for(;i&&!n.test(i.className||"");)i=i.parentNode;return i||(i=t),i},x=(e,t)=>{R("Disabling",t);const n=document.documentElement,i="molads_"+t;if("billboard"===t){q("billboard",R.extend("watermark")),e.emit("unstick position","billboard");const{DM:t}=window;t&&t.Rotator&&t.Rotator.initMiniCarousel()}n.classList.add(`collapse-${t}`),n.classList.remove(i+"_on"),n.classList.add(i+"_off")},D=e=>{const t="molads_"+e,n=document.documentElement;n.classList.remove(t+"_off"),n.classList.add(t+"_on")},O=(e,t,n)=>{const r=E(S(),(t=>t.contentWindow.name===e.name));if(r){const e=(0,g.closest)(r,(e=>e.hasAttribute(i.AD_ATTRIBUTE)));if(e){const t=i.parse(e.getAttribute(i.AD_ATTRIBUTE)||"{}");t&&p(t)}}},R=(0,m.x)("ad-integrator"),N=e=>{const t=e.match(/<style[^>]*\sclass="?integrate"?[^>]*>[^\f]*?<\/style>/gi);for(let e=0,n=t?t.length:0;e<n;e++)(0,g.appendStyle)(t[e].slice(t[e].indexOf(">")+1,-8))},M=e=>{let t=null;const n=S(),i=I(e);for(let e=0;!t&&e<n.length;e++)t=i(n[e]);return t},L=(e,t)=>{R(`collapseAd("#${t}")`);const n=(0,b.getById)(t);if(n)return void x(e,n.pos);R.warn("collapseAd - cannot find description of slot with id:",t);const r=P(t);if(r){R("collapsing",t);const n=i.parse(r.getAttribute(i.AD_ATTRIBUTE)||"{}");n&&n.pos?x(e,n.pos):r.style.display="none"}else R.warn("collapseAd: id",t,"is unknown")};function U(e,t){for(const n of(0,_.e$)((0,b.allDescriptions)(),(0,w.pj)(t)))R(`collapseAd({ pos: "${n}" })`),x(e,n)}const j=e=>{const t=S(e)[0];return t?T(t,document):e},B=e=>{const t=P(e),n=i.parse(t.getAttribute(i.AD_ATTRIBUTE)||"{}");n&&n.pos?D(n.pos):(t.style.height="auto",t.style.display="block")};function q(e,t){const n=(0,b.get)(e);if(!n)return void t.warn("Cannot find description");const i=document.getElementById(n.id);if(!i)return void t.warn("Cannot find element");const r=(0,g.closest)(i,(e=>e.classList.contains("watermark")));r?(t("removing watermark",r),r.classList.remove("watermark")):t.warn("Couldn't find an watermarked element")}const F=e=>{let{broker:t}=e;n.g.addEventListener("message",(e=>{let{data:n}=e;if("object"==typeof n&&"string"==typeof n.func)switch(R("received message",n),n.func){case"molads.addSkinToPage":return t.emit("add skin to page",n);case"molads.addSkinLabel":return t.emit("add skin label to page");case"molads.disableSticky":return t.emit("disable sticky position",n.pos);case"molads.disableForceView":return t.emit("disable force view when viewed",n.pos)}}));const i=new v;let r=[];t.on("external subscription",(function(){return i.on(...arguments)})),n.g.adverts.getRendered=()=>r,n.g.AdIntegrator=n.g.AdIntegrator||{},n.g.adverts.collapseAd=n.g.AdIntegrator.collapseAd=L.bind(null,t),n.g.adverts.collapseAdByPos=n.g.AdIntegrator.collapseAdByPos=U.bind(null,t),n.g.AdIntegrator.disableSlot=x.bind(null,t),t.on("ad rendered",((e,t)=>{t.isEmpty||(r.push(t.slot.molAd),i.emit("rendered",t),i.emit("rendered."+e,t))})),t.on("destroy slot",(e=>{r=r.filter((t=>t.pos!==e))})),t.on("remove watermark",(e=>{q(e,R.extend("remove watermark").extend(e))})),t.on("collapseAdByPos",(e=>U(t,e)))},V=F;F.isAdsFreeSupported=!0,F.ccpa={enabledIfDissent:!0},F.gdpr={enabledIfDissent:!0},F.disableIfNoAdsServable=!0},1590:(e,t,n)=>{"use strict";n.d(t,{m:()=>r});const i=(0,n(4653).x)("mvt"),r=(e,t,n)=>{const r=(e=>e.map((e=>(i(`From scenario "${e.name}", loading config:`,e.config||{}),e.config||[]))).reduce(((e,t)=>e.concat(t)),[]).filter((e=>e)).reduce(((e,t)=>(Object.entries(t).forEach((t=>{let[n,i]=t;e[n]=i})),e)),{}))(n);Object.entries(r).forEach((e=>{let[n,i]=e;t(n,i)}))}},9366:(e,t,n)=>{"use strict";n.d(t,{s:()=>l});const i="page",r="mol.ads.mvt.tests",s=e=>{let[t,n]=e;return{...n,name:t}},o=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").match(/^(-?[0-9.]+)\s*(%?)$/);if(e){let t=parseFloat(e[1]);return"%"===e[2]&&(t/=100),t}return 0},a=function(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=`${r}.${t.name}.selected`,a=i[s],l=t.scenarios.find((e=>e.name===a)),c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=`${r}.${t.name}.probabilityDraw`,s=t.size||t.scenarios.reduce(((e,t)=>{let{size:n}=t;return e+o(String(n))}),0),a=d(Math.min(Math.max(0,o(String(s))),1));let l=Number(n[i]);return isNaN(l)&&(l=Math.random(),n[i]=l.toString()),l<a}(e,t,i);if(c){if(l)n=l;else{const r=t.scenarios.filter((e=>{let{size:t}=e;return t}));if(t.scenarios.length===r.length){const e=Math.random();let i=0;n=t.scenarios.find((t=>{let{size:n}=t;return i+=n,d(i)>e}))}else r.length&&e.warn(`Test "${t.name}" has some scenarios with size and some without, falling back to global scope size`),n=t.scenarios[Math.floor(Math.random()*t.scenarios.length)];i[s]=n.name}return n}};function d(e){return Math.round(1e4*e)/1e4}function l(e,t){if(!n.g.adsMVTResults){const r={},o={},d=Object.entries(t).map(s).filter((e=>e.scenarios)).map((e=>({...e,scenarios:Object.entries(e.scenarios).map(s)}))),l=d.reduce(((t,n)=>{const s=n.scope||i,d="page"===s?r:"session"===s?sessionStorage:localStorage,l=a(e,n,d);return l?(o[n.name]=l.name,[...t,l]):t}),[]);n.g.adsMVTResults={pageStorage:r,selectedScenarios:o,scenarios:l,tests:d}}return n.g.adsMVTResults}},7418:(e,t,n)=>{"use strict";var i=n(6611),r=n(4653);(0,n(7249).fo)("reconfigureSlotsEnabled",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},init:function(){let{getConfig:e=i.U2,setConfig:t=i.t8,log:n=(0,r.x)("reconfigureSlotsEnabled")}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=e("reconfigureSlotsEnabled",{remove:[]}).remove;if(n("slots to remove",s),s.length){const i=e("slots.enabled",{});for(const e of s)delete i[e];n("slots.enabled",i),t("slots.enabled",i)}}})},2623:(e,t,n)=>{"use strict";n.r(t),n.d(t,{allDescriptions:()=>u,get:()=>l,getById:()=>c});var i=n(6550),r=n(1934),s=n(1871);(0,n(7249).fo)("slots.descriptions",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,init:function(e){let{getConfig:t,setConfig:n,log:i}=e;const s=Object.entries(t("slotDescription",{})).reduce(((e,n)=>{let[s,o]=n;const a=t(`slotDescription.${s}.earlyBidding`,!0);return o.conditionalSizes&&(i("conditionalSizes found",s,o),function(e){var t,n;null!==(t=e.conditionalSizes)&&void 0!==t&&t.wideSkies&&null!==(n=e.conditionalSizes)&&void 0!==n&&n.sizes&&d&&(e.size=e.conditionalSizes.sizes)}(o)),{...e,[s]:["openweb","googleAdSense","amazon","widgets"].some((e=>{var t;return null==o||null===(t=o.slotTypes)||void 0===t?void 0:t.includes(e)}))?{id:s,pos:s,...o}:{type:(l=o.size,l.map((e=>{let[t,n]=e;return`${t}x${n}`})).join(",")),adUnit:(0,r.Z)(o.unit||s),pos:s,parentId:o.id,slots:[],slotTypes:["gpt"],earlyBidding:a,...o}};var l}),{});i("descriptionsFromSlotDescription",s),o={...o,...s},n("slotDescriptions.initial",o)},run:function(e){let{broker:t,getConfig:n}=e;o=n("slotDescriptions.initial"),t.on("update description",((e,n)=>{o[e]=n,t.emit("slot descriptions updated",o)})),t.emit("slot descriptions updated",o)}});let o={};const{width:a}=(0,i.ap)(),d=a>1580,l=e=>{const t=o[e];return t&&!t.pos&&(t.pos=e),t};function c(e){return(0,s.sE)(o,(t=>t.id===e))}const u=()=>o},6095:(e,t,n)=>{"use strict";n.d(t,{LK:()=>T,hd:()=>w,oP:()=>b});const i="mol.ads.cmp.tcf.cache",r="__tcfapiLocator",s=["getTCData","hasUserConsentedToAll","hasUserDissentedToAll","getPurposesByVendorMap","getConsentDegree","getValidTCData","consentedVendors","getNonRegisteredVendorsConsents","getNonRegisteredVendors","getStoredRepromptVersion"],o=location.search.match(/adsDebug=[^&]*tcfv2/)?function(){return console.info(...arguments)}:()=>{},a=[],d=window;let l=!1;function c(){const e=d.document;if(!d.frames[r])if("interactive"===e.readyState||"complete"===e.readyState){const t=e.createElement("iframe");t.style.display="none",t.name=r,e.body.appendChild(t),l&&(e.removeEventListener("readystatechange",c),l=!1)}else"function"==typeof e.addEventListener?(e.addEventListener("readystatechange",c),l=!0):setTimeout(c,5)}o("creating");const u=localStorage.getItem(i);let p={};u&&(p=JSON.parse(u));let h=0;const f={},g=(e,t)=>{const n=p.getTCData,i=h++;o("adding provisional listener:",i),f[i]={},a.push(["addEventListener",2,(e,n)=>{const r=e.listenerId;f[i]?(f[i].realListenerId=r,f[i].listenerId=r,t({...e,listenerId:i},n)):o("ignoring event coz already removed listener:",{listenerId:i,realListenerId:r})}]),n&&t({...n,listenerId:i,eventStatus:"tcloaded",cached:!0},!0)},m=(e,t)=>{const n=e[3];o("removing provisional listener:",n);const i=f[n];if(!i)return o("unknown listener:",n),void t(!1);const r=i.realListenerId;delete f[n],r&&a.push(["removeEventListener",2,e=>t(e),r]),t(!0)};function y(){let e;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(!n.length)return a;const r=n[2],d=n[0];switch(d){case"setGdprApplies":n.length>3&&2===parseInt(n[1],10)&&"boolean"==typeof n[3]&&(e=n[3],"function"==typeof r&&r("set",!0));break;case"ping":"function"==typeof r&&r({gdprApplies:e,cmpLoaded:!1,cmpStatus:"stub"});break;default:if(s.length){if("addEventListener"===d)return g(n,r);if("removeEventListener"===d)return m(n,r)}if(~s.indexOf(d)){n[3]&&o("cache method called with argument:",n[3]);const e=p[d];if(void 0!==e)return o("returning cached value for",d),void r(e,!0)}o("queueing",d),a.push(n)}}function v(e){const t=e&&e.source;if(!t||"function"!=typeof t.postMessage)return void(t&&"function"!=typeof t.postMessage&&o("Message event.source.postMessage is not a function, bailing"));const n="string"==typeof e.data;let i=e.data;if(n)try{i=JSON.parse(e.data)}catch(e){return}if("object"==typeof i&&i.__tcfapiCall){const e=i.__tcfapiCall;window.__tcfapi(e.command,e.version,((i,r)=>{const s={__tcfapiReturn:{returnValue:i,success:r,callId:e.callId}};t.postMessage(n?JSON.stringify(s):s,"*")}),e.parameter)}}function b(){n.g.adverts.tcfv2Installed||(n.g.adverts.tcfv2Installed=!0,c(),d.__tcfapi=y,d.addEventListener("message",v,!1),n.g.adverts.updateCache=_)}async function _(e,t){if(e.tcString.length){const e=s.map((e=>new Promise((r=>{n.g.__tcfapi(e,2,((n,s)=>{if(t("caching",e),s){const t=JSON.parse(localStorage.getItem(i))||{};t[e]=n,localStorage.setItem(i,JSON.stringify(t))}else t("error caching method:",e);r()}))}))));await Promise.all(e)}}const w=()=>!!localStorage.getItem(i);function T(){localStorage.removeItem(i)}},5214:(e,t,n)=>{"use strict";n.d(t,{b:()=>o});var i=n(3166),r=n(6550),s=n(4807);function o(e){var t;const n=localStorage.getItem("mol.ads.watchdog");let o;try{o=n&&JSON.parse(n)}catch(t){e("error parsing last state",t)}return{ps:o,nt:(null===(t=(0,r.Y0)())||void 0===t?void 0:t.type)||"unknown",st:s.B,u:(0,i.vp)(window.location.href)}}},4807:(e,t,n)=>{"use strict";n.d(t,{B:()=>i});const i=Date.now()},6084:(e,t,n)=>{var i=n(3293),r=[];e.exports=function(){var e=new Worker(URL.createObjectURL(new Blob(['(()=>{var e={};let t;onmessage=e=>{let{data:s}=e;if("setPattern"===s.cmd)t=new RegExp(s.pattern);else if("testMatch"===s.cmd){const{id:e,href:a}=s,n=t.test(a);postMessage({id:e,match:n})}},addEventListener("message",(function(t){var s,a=t.data,n=a.type,r=a.method,o=a.id,c=a.params;"RPC"===n&&r&&((s=e[r])?Promise.resolve().then((function(){return s.apply(e,c)})):Promise.reject("No such method")).then((function(e){postMessage({type:"RPC",id:o,result:e})})).catch((function(e){var t={message:e};e.stack&&(t.message=e.message,t.stack=e.stack,t.name=e.name),postMessage({type:"RPC",id:o,error:t})}))})),postMessage({type:"RPC",method:"ready"})})();'])),{name:"[fullhash].worker.js"});return URL.revokeObjectURL(URL.createObjectURL(new Blob(['(()=>{var e={};let t;onmessage=e=>{let{data:s}=e;if("setPattern"===s.cmd)t=new RegExp(s.pattern);else if("testMatch"===s.cmd){const{id:e,href:a}=s,n=t.test(a);postMessage({id:e,match:n})}},addEventListener("message",(function(t){var s,a=t.data,n=a.type,r=a.method,o=a.id,c=a.params;"RPC"===n&&r&&((s=e[r])?Promise.resolve().then((function(){return s.apply(e,c)})):Promise.reject("No such method")).then((function(e){postMessage({type:"RPC",id:o,result:e})})).catch((function(e){var t={message:e};e.stack&&(t.message=e.message,t.stack=e.stack,t.name=e.name),postMessage({type:"RPC",id:o,error:t})}))})),postMessage({type:"RPC",method:"ready"})})();']))),i(e,r),e}},4275:(e,t,n)=>{"use strict";const i=n(6666),r=n(9258),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=d,t.SlowBuffer=function(e){return+e!=e&&(e=0),d.alloc(+e)},t.INSPECT_MAX_BYTES=50;const o=2147483647;function a(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,d.prototype),t}function d(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}return l(e,t,n)}function l(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!d.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|g(e,t);let i=a(n);const r=i.write(e,t);return r!==n&&(i=i.slice(0,r)),i}(e,t);if(ArrayBuffer.isView(e))return function(e){if(X(e,Uint8Array)){const t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return p(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(X(e,ArrayBuffer)||e&&X(e.buffer,ArrayBuffer))return h(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(X(e,SharedArrayBuffer)||e&&X(e.buffer,SharedArrayBuffer)))return h(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return d.from(i,t,n);const r=function(e){if(d.isBuffer(e)){const t=0|f(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||K(e.length)?a(0):p(e):"Buffer"===e.type&&Array.isArray(e.data)?p(e.data):void 0}(e);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return d.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return c(e),a(e<0?0:0|f(e))}function p(e){const t=e.length<0?0:0|f(e.length),n=a(t);for(let i=0;i<t;i+=1)n[i]=255&e[i];return n}function h(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let i;return i=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(i,d.prototype),i}function f(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function g(e,t){if(d.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||X(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;let r=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Z(e).length;default:if(r)return i?-1:W(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return x(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return P(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function y(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function v(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),K(n=+n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=d.from(t,i)),d.isBuffer(t))return 0===t.length?-1:b(e,t,n,i,r);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,i,r){let s,o=1,a=e.length,d=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o=2,a/=2,d/=2,n/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(r){let i=-1;for(s=n;s<a;s++)if(l(e,s)===l(t,-1===i?0:s-i)){if(-1===i&&(i=s),s-i+1===d)return i*o}else-1!==i&&(s-=s-i),i=-1}else for(n+d>a&&(n=a-d),s=n;s>=0;s--){let n=!0;for(let i=0;i<d;i++)if(l(e,s+i)!==l(t,i)){n=!1;break}if(n)return s}return-1}function _(e,t,n,i){n=Number(n)||0;const r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;const s=t.length;let o;for(i>s/2&&(i=s/2),o=0;o<i;++o){const i=parseInt(t.substr(2*o,2),16);if(K(i))return o;e[n+o]=i}return o}function w(e,t,n,i){return G(W(t,e.length-n),e,n,i)}function T(e,t,n,i){return G(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function I(e,t,n,i){return G(Z(t),e,n,i)}function S(e,t,n,i){return G(function(e,t){let n,i,r;const s=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),i=n>>8,r=n%256,s.push(r),s.push(i);return s}(t,e.length-n),e,n,i)}function k(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);const i=[];let r=t;for(;r<n;){const t=e[r];let s=null,o=t>239?4:t>223?3:t>191?2:1;if(r+o<=n){let n,i,a,d;switch(o){case 1:t<128&&(s=t);break;case 2:n=e[r+1],128==(192&n)&&(d=(31&t)<<6|63&n,d>127&&(s=d));break;case 3:n=e[r+1],i=e[r+2],128==(192&n)&&128==(192&i)&&(d=(15&t)<<12|(63&n)<<6|63&i,d>2047&&(d<55296||d>57343)&&(s=d));break;case 4:n=e[r+1],i=e[r+2],a=e[r+3],128==(192&n)&&128==(192&i)&&128==(192&a)&&(d=(15&t)<<18|(63&n)<<12|(63&i)<<6|63&a,d>65535&&d<1114112&&(s=d))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s),r+=o}return function(e){const t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);let n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=E));return n}(i)}t.kMaxLength=o,d.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),d.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),d.poolSize=8192,d.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(e,t,n){return function(e,t,n){return c(e),e<=0?a(e):void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)}(e,t,n)},d.allocUnsafe=function(e){return u(e)},d.allocUnsafeSlow=function(e){return u(e)},d.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==d.prototype},d.compare=function(e,t){if(X(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),X(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),!d.isBuffer(e)||!d.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let r=0,s=Math.min(n,i);r<s;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},d.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return d.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const i=d.allocUnsafe(t);let r=0;for(n=0;n<e.length;++n){let t=e[n];if(X(t,Uint8Array))r+t.length>i.length?(d.isBuffer(t)||(t=d.from(t)),t.copy(i,r)):Uint8Array.prototype.set.call(i,t,r);else{if(!d.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(i,r)}r+=t.length}return i},d.byteLength=g,d.prototype._isBuffer=!0,d.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},d.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},d.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},d.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?C(this,0,e):m.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(e){if(!d.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===d.compare(this,e)},d.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},s&&(d.prototype[s]=d.prototype.inspect),d.prototype.compare=function(e,t,n,i,r){if(X(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),!d.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(this===e)return 0;let s=(r>>>=0)-(i>>>=0),o=(n>>>=0)-(t>>>=0);const a=Math.min(s,o),l=this.slice(i,r),c=e.slice(t,n);for(let e=0;e<a;++e)if(l[e]!==c[e]){s=l[e],o=c[e];break}return s<o?-1:o<s?1:0},d.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},d.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},d.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},d.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}const r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":case"latin1":case"binary":return T(this,e,t,n);case"base64":return I(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const E=4096;function A(e,t,n){let i="";n=Math.min(e.length,n);for(let r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function P(e,t,n){let i="";n=Math.min(e.length,n);for(let r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function x(e,t,n){const i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);let r="";for(let i=t;i<n;++i)r+=J[e[i]];return r}function D(e,t,n){const i=e.slice(t,n);let r="";for(let e=0;e<i.length-1;e+=2)r+=String.fromCharCode(i[e]+256*i[e+1]);return r}function O(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,i,r,s){if(!d.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<s)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function N(e,t,n,i,r){V(t,i,r,e,n,7);let s=Number(t&BigInt(4294967295));e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,n}function M(e,t,n,i,r){V(t,i,r,e,n,7);let s=Number(t&BigInt(4294967295));e[n+7]=s,s>>=8,e[n+6]=s,s>>=8,e[n+5]=s,s>>=8,e[n+4]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=o,o>>=8,e[n+2]=o,o>>=8,e[n+1]=o,o>>=8,e[n]=o,n+8}function L(e,t,n,i,r,s){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(e,t,n,i,s){return t=+t,n>>>=0,s||L(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function j(e,t,n,i,s){return t=+t,n>>>=0,s||L(e,0,n,8),r.write(e,t,n,i,52,8),n+8}d.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const i=this.subarray(e,t);return Object.setPrototypeOf(i,d.prototype),i},d.prototype.readUintLE=d.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let i=this[e],r=1,s=0;for(;++s<t&&(r*=256);)i+=this[e+s]*r;return i},d.prototype.readUintBE=d.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let i=this[e+--t],r=1;for(;t>0&&(r*=256);)i+=this[e+--t]*r;return i},d.prototype.readUint8=d.prototype.readUInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),this[e]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]|this[e+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]<<8|this[e+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},d.prototype.readBigUInt64LE=Y((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||$(e,this.length-8);const i=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,r=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(i)+(BigInt(r)<<BigInt(32))})),d.prototype.readBigUInt64BE=Y((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||$(e,this.length-8);const i=t*2**24+65536*this[++e]+256*this[++e]+this[++e],r=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(i)<<BigInt(32))+BigInt(r)})),d.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let i=this[e],r=1,s=0;for(;++s<t&&(r*=256);)i+=this[e+s]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*t)),i},d.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let i=t,r=1,s=this[e+--i];for(;i>0&&(r*=256);)s+=this[e+--i]*r;return r*=128,s>=r&&(s-=Math.pow(2,8*t)),s},d.prototype.readInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},d.prototype.readInt16LE=function(e,t){e>>>=0,t||O(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt16BE=function(e,t){e>>>=0,t||O(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},d.prototype.readInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},d.prototype.readBigInt64LE=Y((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||$(e,this.length-8);const i=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),d.prototype.readBigInt64BE=Y((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||$(e,this.length-8);const i=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),d.prototype.readFloatLE=function(e,t){return e>>>=0,t||O(e,4,this.length),r.read(this,e,!0,23,4)},d.prototype.readFloatBE=function(e,t){return e>>>=0,t||O(e,4,this.length),r.read(this,e,!1,23,4)},d.prototype.readDoubleLE=function(e,t){return e>>>=0,t||O(e,8,this.length),r.read(this,e,!0,52,8)},d.prototype.readDoubleBE=function(e,t){return e>>>=0,t||O(e,8,this.length),r.read(this,e,!1,52,8)},d.prototype.writeUintLE=d.prototype.writeUIntLE=function(e,t,n,i){e=+e,t>>>=0,n>>>=0,i||R(this,e,t,n,Math.pow(2,8*n)-1,0);let r=1,s=0;for(this[t]=255&e;++s<n&&(r*=256);)this[t+s]=e/r&255;return t+n},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(e,t,n,i){e=+e,t>>>=0,n>>>=0,i||R(this,e,t,n,Math.pow(2,8*n)-1,0);let r=n-1,s=1;for(this[t+r]=255&e;--r>=0&&(s*=256);)this[t+r]=e/s&255;return t+n},d.prototype.writeUint8=d.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,255,0),this[t]=255&e,t+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeBigUInt64LE=Y((function(e){return N(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),d.prototype.writeBigUInt64BE=Y((function(e){return M(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),d.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}let r=0,s=1,o=0;for(this[t]=255&e;++r<n&&(s*=256);)e<0&&0===o&&0!==this[t+r-1]&&(o=1),this[t+r]=(e/s>>0)-o&255;return t+n},d.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}let r=n-1,s=1,o=0;for(this[t+r]=255&e;--r>=0&&(s*=256);)e<0&&0===o&&0!==this[t+r+1]&&(o=1),this[t+r]=(e/s>>0)-o&255;return t+n},d.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},d.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},d.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeBigInt64LE=Y((function(e){return N(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),d.prototype.writeBigInt64BE=Y((function(e){return M(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),d.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},d.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},d.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},d.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},d.prototype.copy=function(e,t,n,i){if(!d.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);const r=i-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),r},d.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!d.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){const t=e.charCodeAt(0);("utf8"===i&&t<128||"latin1"===i)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let r;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(r=t;r<n;++r)this[r]=e;else{const s=d.isBuffer(e)?e:d.from(e,i),o=s.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(r=0;r<n-t;++r)this[r+t]=s[r%o]}return this};const B={};function q(e,t,n){B[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function F(e){let t="",n=e.length;const i="-"===e[0]?1:0;for(;n>=i+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function V(e,t,n,i,r,s){if(e>n||e<t){const i="bigint"==typeof t?"n":"";let r;throw r=s>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${8*(s+1)}${i}`:`>= -(2${i} ** ${8*(s+1)-1}${i}) and < 2 ** ${8*(s+1)-1}${i}`:`>= ${t}${i} and <= ${n}${i}`,new B.ERR_OUT_OF_RANGE("value",r,e)}!function(e,t,n){z(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||$(t,e.length-(n+1))}(i,r,s)}function z(e,t){if("number"!=typeof e)throw new B.ERR_INVALID_ARG_TYPE(t,"number",e)}function $(e,t,n){if(Math.floor(e)!==e)throw z(e,n),new B.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new B.ERR_BUFFER_OUT_OF_BOUNDS;throw new B.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}q("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),q("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),q("ERR_OUT_OF_RANGE",(function(e,t,n){let i=`The value of "${e}" is out of range.`,r=n;return Number.isInteger(n)&&Math.abs(n)>2**32?r=F(String(n)):"bigint"==typeof n&&(r=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(r=F(r)),r+="n"),i+=` It must be ${t}. Received ${r}`,i}),RangeError);const H=/[^+/0-9A-Za-z-_]/g;function W(e,t){let n;t=t||1/0;const i=e.length;let r=null;const s=[];for(let o=0;o<i;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===i){(t-=3)>-1&&s.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&s.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function Z(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,n,i){let r;for(r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function X(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function K(e){return e!=e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const i=16*n;for(let r=0;r<16;++r)t[i+r]=e[n]+e[r]}return t}();function Y(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}},5998:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";var _src_prebidGlobal_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(2249),_src_utils_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(7436),_src_utils_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(5446),_src_adloader_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1458),_src_adapters_bidderFactory_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(1501),_src_config_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1476),_src_mediaTypes_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1301),_src_polyfill_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(4232),criteo_direct_rsa_validate_build_verify_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4651),_src_storageManager_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4070),_src_native_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(623),_src_refererDetection_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(835),_src_utils_gpdr_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5738),GVLID=91,ADAPTER_VERSION=35,BIDDER_CODE="criteo",CDB_ENDPOINT="https://bidder.criteo.com/cdb",PROFILE_ID_INLINE=207,PROFILE_ID_PUBLISHERTAG=185,storage=(0,_src_storageManager_js__WEBPACK_IMPORTED_MODULE_1__.df)({bidderCode:BIDDER_CODE}),LOG_PREFIX="Criteo: ",FAST_BID_VERSION_PLACEHOLDER="%FAST_BID_VERSION%",FAST_BID_VERSION_CURRENT=135,FAST_BID_VERSION_LATEST="latest",FAST_BID_VERSION_NONE="none",PUBLISHER_TAG_URL_TEMPLATE="https://static.criteo.net/js/ld/publishertag.prebid"+FAST_BID_VERSION_PLACEHOLDER+".js",FAST_BID_PUBKEY_E=65537,FAST_BID_PUBKEY_N="ztQYwCE5BU7T9CDM5he6rKoabstXRmkzx54zFPZkWbK530dwtLBDeaWBMxHBUT55CYyboR/EZ4efghPi3CoNGfGWezpjko9P6p2EwGArtHEeS4slhu/SpSIFMjG6fdrpRoNuIAMhq1Z+Pr/+HOd1pThFKeGFr2/NhtAg+TXAzaU=",OPTOUT_COOKIE_NAME="cto_optout",BUNDLE_COOKIE_NAME="cto_bundle",GUID_RETENTION_TIME_HOUR=9360,OPTOUT_RETENTION_TIME_HOUR=43200,spec={code:BIDDER_CODE,gvlid:GVLID,supportedMediaTypes:[_src_mediaTypes_js__WEBPACK_IMPORTED_MODULE_2__.Mk,_src_mediaTypes_js__WEBPACK_IMPORTED_MODULE_2__.pX,_src_mediaTypes_js__WEBPACK_IMPORTED_MODULE_2__.B5],getUserSyncs:function(e,t,n,i){if(canFastBid(_src_config_js__WEBPACK_IMPORTED_MODULE_3__.vc.getConfig("criteo.fastBidVersion")))return[];var r=(0,_src_refererDetection_js__WEBPACK_IMPORTED_MODULE_4__.nH)(),s="criteoPrebidAdapter";if(e.iframeEnabled&&(0,_src_utils_gpdr_js__WEBPACK_IMPORTED_MODULE_5__.h)(n)){var o=[];o.push("origin=".concat(s)),o.push("topUrl=".concat(r.domain)),n&&(n.gdprApplies&&o.push("gdpr=".concat(1==n.gdprApplies?1:0)),n.consentString&&o.push("gdpr_consent=".concat(n.consentString))),i&&o.push("us_privacy=".concat(i));var a=Math.random().toString(),d={bundle:readFromAllStorages(BUNDLE_COOKIE_NAME),cw:storage.cookiesAreEnabled(),lsw:storage.localStorageIsEnabled(),optoutCookie:readFromAllStorages(OPTOUT_COOKIE_NAME),origin:s,requestId:a,tld:r.domain,topUrl:r.domain,version:"7.47.0".replace(/\./g,"_")};window.addEventListener("message",(function e(t){if(t.data&&"https://gum.criteo.com"==t.origin&&t.data.requestId===a){this.removeEventListener("message",e),t.stopImmediatePropagation();var n=t.data;n.optout?(deleteFromAllStorages(BUNDLE_COOKIE_NAME),saveOnAllStorages(OPTOUT_COOKIE_NAME,!0,OPTOUT_RETENTION_TIME_HOUR)):n.bundle&&saveOnAllStorages(BUNDLE_COOKIE_NAME,n.bundle,GUID_RETENTION_TIME_HOUR)}}),!0);var l=JSON.stringify(d).replace(/"/g,"%22");return[{type:"iframe",url:"https://gum.criteo.com/syncframe?".concat(o.join("&"),"#").concat(l)}]}return[]},isBidRequestValid:function(e){return!(!e||!e.params||!e.params.zoneId&&!e.params.networkId||hasVideoMediaType(e)&&!hasValidVideoMediaType(e))},buildRequests:function(e,t){var n,i,r,s;e=(0,_src_native_js__WEBPACK_IMPORTED_MODULE_6__.lY)(e);var o=t.ortb2||{};Object.assign(t,{publisherExt:null===(n=o.site)||void 0===n?void 0:n.ext,userExt:null===(i=o.user)||void 0===i?void 0:i.ext,ceh:_src_config_js__WEBPACK_IMPORTED_MODULE_3__.vc.getConfig("criteo.ceh"),coppa:_src_config_js__WEBPACK_IMPORTED_MODULE_3__.vc.getConfig("coppa")});var a=_src_config_js__WEBPACK_IMPORTED_MODULE_3__.vc.getConfig("criteo.fastBidVersion"),d=canFastBid(a);if(!publisherTagAvailable()&&d){window.Criteo=window.Criteo||{},window.Criteo.usePrebidEvents=!1,tryGetCriteoFastBid();var l=getFastBidUrl(a);setTimeout((function(){(0,_src_adloader_js__WEBPACK_IMPORTED_MODULE_7__.B)(l,BIDDER_CODE)}),t.timeout)}if(publisherTagAvailable()){var c=new Criteo.PubTag.Adapters.Prebid(PROFILE_ID_PUBLISHERTAG,ADAPTER_VERSION,e,t,"7.47.0");r=c.buildCdbUrl(),s=c.buildCdbRequest()}else{var u=buildContext(e,t);r=buildCdbUrl(u),s=buildCdbRequest(u,e,t)}if(s)return{method:"POST",url:r,data:s,bidRequests:e}},interpretResponse:function(e,t){var n=e.body||e;if(publisherTagAvailable()){var i=Criteo.PubTag.Adapters.Prebid.GetAdapter(t);if(i)return i.interpretResponse(n,t)}var r=[];return n&&n.slots&&(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_8__.kJ)(n.slots)&&n.slots.forEach((function(i){var s,o,a,d,l=(0,_src_polyfill_js__WEBPACK_IMPORTED_MODULE_9__.sE)(t.bidRequests,(function(e){return e.adUnitCode===i.impid&&(!e.params.zoneId||parseInt(e.params.zoneId)===i.zoneid)})),c=l.bidId,u={requestId:c,cpm:i.cpm,currency:i.currency,netRevenue:!0,ttl:i.ttl||60,creativeId:i.creativecode,width:i.width,height:i.height,dealId:i.deal};if(null!==(s=n.ext)&&void 0!==s&&null!==(o=s.paf)&&void 0!==o&&o.transmission&&null!==(a=i.ext)&&void 0!==a&&null!==(d=a.paf)&&void 0!==d&&d.content_id){var p={content_id:i.ext.paf.content_id,transmission:e.ext.paf.transmission};u.meta=Object.assign({},u.meta,{paf:p})}i.adomain&&(u.meta=Object.assign({},u.meta,{advertiserDomains:[i.adomain].flat()})),i.native?l.params.nativeCallback?u.ad=createNativeAd(c,i.native,l.params.nativeCallback):(u.native=createPrebidNativeAd(i.native),u.mediaType=_src_mediaTypes_js__WEBPACK_IMPORTED_MODULE_2__.B5):i.video?(u.vastUrl=i.displayurl,u.mediaType=_src_mediaTypes_js__WEBPACK_IMPORTED_MODULE_2__.pX):u.ad=i.creative,r.push(u)})),r},onTimeout:function(e){if(publisherTagAvailable()&&Array.isArray(e)){var t=[];e.forEach((function(e){-1===t.indexOf(e.auctionId)&&(t.push(e.auctionId),Criteo.PubTag.Adapters.Prebid.GetAdapter(e.auctionId).handleBidTimeout())}))}},onBidWon:function(e){publisherTagAvailable()&&e&&Criteo.PubTag.Adapters.Prebid.GetAdapter(e.auctionId).handleBidWon(e)},onSetTargeting:function(e){publisherTagAvailable()&&Criteo.PubTag.Adapters.Prebid.GetAdapter(e.auctionId).handleSetTargeting(e)}};function readFromAllStorages(e){var t=storage.getCookie(e),n=storage.getDataFromLocalStorage(e);return t||n||void 0}function saveOnAllStorages(e,t,n){var i=new Date;i.setTime(i.getTime()+60*n*60*1e3);var r="expires=".concat(i.toUTCString());storage.setCookie(e,t,r),storage.setDataInLocalStorage(e,t)}function deleteFromAllStorages(e){storage.setCookie(e,"",0),storage.removeDataFromLocalStorage(e)}function publisherTagAvailable(){return"undefined"!=typeof Criteo&&Criteo.PubTag&&Criteo.PubTag.Adapters&&Criteo.PubTag.Adapters.Prebid}function buildContext(e,t){var n,i="";t&&t.refererInfo&&(i=t.refererInfo.page);var r=(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_8__.en)(null==t||null===(n=t.refererInfo)||void 0===n?void 0:n.topmostLocation).search,s={url:i,debug:"1"===r.pbt_debug,noLog:"1"===r.pbt_nolog,amp:!1};return e.forEach((function(e){"amp"===e.params.integrationMode&&(s.amp=!0)})),s}function buildCdbUrl(e){var t=CDB_ENDPOINT;t+="?profileId="+PROFILE_ID_INLINE,t+="&av="+String(ADAPTER_VERSION),t+="&wv="+encodeURIComponent("7.47.0"),t+="&cb="+String(Math.floor(99999999999*Math.random())),storage.localStorageIsEnabled()?t+="&lsavail=1":t+="&lsavail=0",e.amp&&(t+="&im=1"),e.debug&&(t+="&debug=1"),e.noLog&&(t+="&nolog=1");var n=readFromAllStorages(BUNDLE_COOKIE_NAME);return n&&(t+="&bundle=".concat(n)),readFromAllStorages(OPTOUT_COOKIE_NAME)&&(t+="&optout=1"),t}function checkNativeSendId(e){return!(e.nativeParams&&(e.nativeParams.image&&(!0!==e.nativeParams.image.sendId||!0===e.nativeParams.image.sendTargetingKeys)||e.nativeParams.icon&&(!0!==e.nativeParams.icon.sendId||!0===e.nativeParams.icon.sendTargetingKeys)||e.nativeParams.clickUrl&&(!0!==e.nativeParams.clickUrl.sendId||!0===e.nativeParams.clickUrl.sendTargetingKeys)||e.nativeParams.displayUrl&&(!0!==e.nativeParams.displayUrl.sendId||!0===e.nativeParams.displayUrl.sendTargetingKeys)||e.nativeParams.privacyLink&&(!0!==e.nativeParams.privacyLink.sendId||!0===e.nativeParams.privacyLink.sendTargetingKeys)||e.nativeParams.privacyIcon&&(!0!==e.nativeParams.privacyIcon.sendId||!0===e.nativeParams.privacyIcon.sendTargetingKeys)))}function buildCdbRequest(e,t,n){var i,r,s,o,a,d,l,c,u,p,h,f,g={publisher:{url:e.url,ext:n.publisherExt},regs:{coppa:!0===n.coppa?1:!1===n.coppa?0:void 0,gpp:null===(i=n.ortb2)||void 0===i||null===(r=i.regs)||void 0===r?void 0:r.gpp,gpp_sid:null===(s=n.ortb2)||void 0===s||null===(o=s.regs)||void 0===o?void 0:o.gpp_sid},slots:t.map((function(e){u=e.params.networkId||u,p=e.schain||p;var t={impid:e.adUnitCode,transactionid:e.transactionId,auctionId:e.auctionId};if(e.params.zoneId&&(t.zoneid=e.params.zoneId),(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_10__.Z)(e,"ortb2Imp.ext")&&(t.ext=e.ortb2Imp.ext),e.params.ext&&(t.ext=Object.assign({},t.ext,e.params.ext)),e.params.publisherSubId&&(t.publishersubid=e.params.publisherSubId),(e.params.nativeCallback||hasNativeMediaType(e))&&(t.native=!0,checkNativeSendId(e)||(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_8__.yN)(LOG_PREFIX+"all native assets containing URL should be sent as placeholders with sendId(icon, image, clickUrl, displayUrl, privacyLink, privacyIcon)")),hasBannerMediaType(e)?t.sizes=parseSizes((0,_src_utils_js__WEBPACK_IMPORTED_MODULE_10__.Z)(e,"mediaTypes.banner.sizes"),parseSize):t.sizes=[],hasVideoMediaType(e)){var n={playersizes:parseSizes((0,_src_utils_js__WEBPACK_IMPORTED_MODULE_10__.Z)(e,"mediaTypes.video.playerSize"),parseSize),mimes:e.mediaTypes.video.mimes,protocols:e.mediaTypes.video.protocols,maxduration:e.mediaTypes.video.maxduration,api:e.mediaTypes.video.api,skip:e.mediaTypes.video.skip,placement:e.mediaTypes.video.placement,minduration:e.mediaTypes.video.minduration,playbackmethod:e.mediaTypes.video.playbackmethod,startdelay:e.mediaTypes.video.startdelay},i=e.params.video;void 0!==i&&(n.skip=n.skip||i.skip||0,n.placement=n.placement||i.placement,n.minduration=n.minduration||i.minduration,n.playbackmethod=n.playbackmethod||i.playbackmethod,n.startdelay=n.startdelay||i.startdelay||0),t.video=n}return enrichSlotWithFloors(t,e),t}))};return u&&(g.publisher.networkid=u),p&&(g.source={ext:{schain:p}}),g.user=(null===(a=n.ortb2)||void 0===a?void 0:a.user)||{},g.site=(null===(d=n.ortb2)||void 0===d?void 0:d.site)||{},n&&n.ceh&&(g.user.ceh=n.ceh),n&&n.gdprConsent&&(g.gdprConsent={},void 0!==n.gdprConsent.gdprApplies&&(g.gdprConsent.gdprApplies=!!n.gdprConsent.gdprApplies),g.gdprConsent.version=n.gdprConsent.apiVersion,void 0!==n.gdprConsent.consentString&&(g.gdprConsent.consentData=n.gdprConsent.consentString)),n&&n.uspConsent&&(g.user.uspIab=n.uspConsent),n&&null!==(l=n.ortb2)&&void 0!==l&&null!==(c=l.device)&&void 0!==c&&c.sua&&(g.user.ext=g.user.ext||{},g.user.ext.sua=(null===(h=n.ortb2)||void 0===h||null===(f=h.device)||void 0===f?void 0:f.sua)||{}),g}function parseSizes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return null==e?[]:Array.isArray(e[0])?e.map((function(e){return t(e)})):[t(e)]}function parseSize(e){return e[0]+"x"+e[1]}function hasVideoMediaType(e){return void 0!==(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_10__.Z)(e,"mediaTypes.video")}function hasBannerMediaType(e){return void 0!==(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_10__.Z)(e,"mediaTypes.banner")}function hasNativeMediaType(e){return void 0!==(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_10__.Z)(e,"mediaTypes.native")}function hasValidVideoMediaType(e){var t=!0;if(["mimes","playerSize","maxduration","protocols","api","skip","placement","playbackmethod"].forEach((function(n){void 0===(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_10__.Z)(e,"mediaTypes.video."+n)&&void 0===(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_10__.Z)(e,"params.video."+n)&&(t=!1,(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_8__.H)("Criteo Bid Adapter: mediaTypes.video."+n+" is required"))})),t){var n=e.mediaTypes.video.placement||e.params.video.placement;if("instream"==e.mediaTypes.video.context&&1===n)return!0;if("outstream"==e.mediaTypes.video.context&&1!==n)return!0}return!1}function createPrebidNativeAd(e){return{sendTargetingKeys:!1,title:e.products[0].title,body:e.products[0].description,sponsoredBy:e.advertiser.description,icon:e.advertiser.logo,image:e.products[0].image,clickUrl:e.products[0].click_url,privacyLink:e.privacy.optout_click_url,privacyIcon:e.privacy.optout_image_url,cta:e.products[0].call_to_action,price:e.products[0].price,impressionTrackers:e.impression_pixels.map((function(e){return e.url}))}}function createNativeAd(e,t,n){var i="criteo_prebid_native_slots";return window[i]=window[i]||{},window[i][e]={callback:n,payload:t},'\n<script type="text/javascript">\nfor (var i = 0; i < 10; ++i) {\n var slots = window.parent.'.concat(i,';\n  if(!slots){continue;}\n  var responseSlot = slots["').concat(e,'"];\n  responseSlot.callback(responseSlot.payload);\n  break;\n}\n<\/script>')}function pickAvailableGetFloorFunc(e){if(e.getFloor)return e.getFloor;if(e.params.bidFloor&&e.params.bidFloorCur)try{var t=parseFloat(e.params.bidFloor);return function(){return{currency:e.params.bidFloorCur,floor:t}}}catch(e){}}function enrichSlotWithFloors(e,t){try{var n,i,r,s={},o=pickAvailableGetFloorFunc(t);if(o)null!==(n=t.mediaTypes)&&void 0!==n&&n.banner&&(s.banner={},parseSizes((0,_src_utils_js__WEBPACK_IMPORTED_MODULE_10__.Z)(t,"mediaTypes.banner.sizes")).forEach((function(e){return s.banner[parseSize(e).toString()]=o.call(t,{size:e,mediaType:_src_mediaTypes_js__WEBPACK_IMPORTED_MODULE_2__.Mk})}))),null!==(i=t.mediaTypes)&&void 0!==i&&i.video&&(s.video={},parseSizes((0,_src_utils_js__WEBPACK_IMPORTED_MODULE_10__.Z)(t,"mediaTypes.video.playerSize")).forEach((function(e){return s.video[parseSize(e).toString()]=o.call(t,{size:e,mediaType:_src_mediaTypes_js__WEBPACK_IMPORTED_MODULE_2__.pX})}))),null!==(r=t.mediaTypes)&&void 0!==r&&r.native&&(s.native={},s.native["*"]=o.call(t,{size:"*",mediaType:_src_mediaTypes_js__WEBPACK_IMPORTED_MODULE_2__.B5})),Object.keys(s).length>0&&(e.ext||(e.ext={}),Object.assign(e.ext,{floors:s}))}catch(e){(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_8__.H)("Could not parse floors from Prebid: "+e)}}function canFastBid(e){return e!==FAST_BID_VERSION_NONE}function getFastBidUrl(e){var t;return e===FAST_BID_VERSION_LATEST?t="":e?(String(e).split(".")[0]<102&&(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_8__.yN)("Specifying a Fastbid version which is not supporting version selection."),t="."+e):t="."+FAST_BID_VERSION_CURRENT,PUBLISHER_TAG_URL_TEMPLATE.replace(FAST_BID_VERSION_PLACEHOLDER,t)}function tryGetCriteoFastBid(){try{var fastBidStorageKey="criteo_fast_bid",hashPrefix="// Hash: ",fastBidFromStorage=storage.getDataFromLocalStorage(fastBidStorageKey);if(null!==fastBidFromStorage){var firstLineEndPosition=fastBidFromStorage.indexOf("\n"),firstLine=fastBidFromStorage.substr(0,firstLineEndPosition).trim();if(firstLine.substr(0,hashPrefix.length)!==hashPrefix)(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_8__.yN)("No hash found in FastBid"),storage.removeDataFromLocalStorage(fastBidStorageKey);else{var publisherTagHash=firstLine.substr(hashPrefix.length),publisherTag=fastBidFromStorage.substr(firstLineEndPosition+1);(0,criteo_direct_rsa_validate_build_verify_js__WEBPACK_IMPORTED_MODULE_0__.T)(publisherTag,publisherTagHash,FAST_BID_PUBKEY_N,FAST_BID_PUBKEY_E)?((0,_src_utils_js__WEBPACK_IMPORTED_MODULE_8__.PN)("Using Criteo FastBid"),eval(publisherTag)):((0,_src_utils_js__WEBPACK_IMPORTED_MODULE_8__.yN)("Invalid Criteo FastBid found"),storage.removeDataFromLocalStorage(fastBidStorageKey))}}}catch(e){}}(0,_src_adapters_bidderFactory_js__WEBPACK_IMPORTED_MODULE_11__.dX)(spec),(0,_src_prebidGlobal_js__WEBPACK_IMPORTED_MODULE_12__.z)("criteoBidAdapter")},9034:(e,t,n)=>{"use strict";n.d(t,{Pd:()=>c,Th:()=>l,_U:()=>u});var i=n(1458),r=n(7436),s=n(5446),o=n(4232),a=(0,n(2249).R)(),d="outstream";function l(e){var t=this,n=e.url,l=e.config,c=e.id,u=e.callback,p=e.loaded,h=e.adUnitCode,f=e.renderNow;this.url=n,this.config=l,this.handlers={},this.id=c,this.renderNow=f,this.loaded=p,this.cmd=[],this.push=function(e){"function"==typeof e?t.loaded?e.call():t.cmd.push(e):(0,r.H)("Commands given to Renderer.push must be wrapped in a function")},this.callback=u||function(){t.loaded=!0,t.process()},this.render=function(){var e=this,t=arguments,l=function(){e._render?e._render.apply(e,t):(0,r.yN)("No render function was provided, please use .setRender on the renderer")};!function(e){var t=a.adUnits,n=(0,o.sE)(t,(function(t){return t.code===e}));if(!n)return!1;var i=(0,s.Z)(n,"renderer"),r=!!(i&&i.url&&i.render),d=(0,s.Z)(n,"mediaTypes.video.renderer"),l=!!(d&&d.url&&d.render);return!!(r&&!0!==i.backupOnly||l&&!0!==d.backupOnly)}(h)?f?l():(this.cmd.unshift(l),(0,i.B)(n,d,this.callback,this.documentContext)):((0,r.yN)("External Js not loaded by Renderer since renderer url and callback is already defined on adUnit ".concat(h)),l())}.bind(this)}function c(e){return!(!e||!e.url&&!e.renderNow)}function u(e,t,n){var i=null;e.config&&e.config.documentResolver&&(i=e.config.documentResolver(t,document,n)),i||(i=document),e.documentContext=i,e.render(t,e.documentContext)}l.install=function(e){return new l({url:e.url,config:e.config,id:e.id,callback:e.callback,loaded:e.loaded,adUnitCode:e.adUnitCode,renderNow:e.renderNow})},l.prototype.getConfig=function(){return this.config},l.prototype.setRender=function(e){this._render=e},l.prototype.setEventHandlers=function(e){this.handlers=e},l.prototype.handleVideoEvent=function(e){var t=e.id,n=e.eventName;"function"==typeof this.handlers[n]&&this.handlers[n](),(0,r.ji)("Prebid Renderer event for id ".concat(t," type ").concat(n))},l.prototype.process=function(){for(;this.cmd.length>0;)try{this.cmd.shift().call()}catch(e){(0,r.H)("Error processing Renderer command: ",e)}}},7539:(e,t,n)=>{"use strict";n.d(t,{UL:()=>r,XG:()=>o,_U:()=>a,ic:()=>i,y2:()=>s});var i="core",r="bidder",s="userId",o="rtd",a="analytics"},9306:(e,t,n)=>{"use strict";n.d(t,{f:()=>o});var i=n(5446),r={};function s(e,t,n){var i=function(e,t){var n=r[e]=r[e]||{bidders:{}};return t?n.bidders[t]=n.bidders[t]||{}:n}(e,n);return i[t]=(i[t]||0)+1,i[t]}var o={incrementRequestsCounter:function(e){return s(e,"requestsCounter")},incrementBidderRequestsCounter:function(e,t){return s(e,"requestsCounter",t)},incrementBidderWinsCounter:function(e,t){return s(e,"winsCounter",t)},getRequestsCounter:function(e){return(0,i.Z)(r,"".concat(e,".requestsCounter"))||0},getBidderRequestsCounter:function(e,t){return(0,i.Z)(r,"".concat(e,".bidders.").concat(t,".requestsCounter"))||0},getBidderWinsCounter:function(e,t){return(0,i.Z)(r,"".concat(e,".bidders.").concat(t,".winsCounter"))||0}}},963:(e,t,n)=>{"use strict";function i(e){var t=e;return{callBids:function(){},setBidderCode:function(e){t=e},getBidderCode:function(){return t}}}n.d(t,{Z:()=>i})},7467:(e,t,n)=>{"use strict";n.d(t,{VP:()=>F,ZP:()=>G,rp:()=>j,uV:()=>z,TJ:()=>q,nX:()=>B});var i=n(3014),r=n(1785),s=n(1909),o=n(7436),a=n(5446),d=n(9267),l=n(1476),c=n(4232),u=n(1301),p=[];function h(e,t){return e.labelAll?{labelAll:!0,labels:e.labelAll,activeLabels:t}:{labelAll:!1,labels:e.labelAny,activeLabels:t}}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.labels,n=void 0===t?[]:t,i=e.labelAll,r=void 0!==i&&i,s=e.activeLabels,l=void 0===s?[]:s,h=arguments.length>1?arguments[1]:void 0,f=arguments.length>2?arguments[2]:void 0,g=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:p).reduce((function(e,t){if("object"===(0,d.Z)(t)&&"string"==typeof t.mediaQuery&&t.mediaQuery.length>0){var n=!1;try{n=(0,o.Zy)().matchMedia(t.mediaQuery).matches}catch(e){(0,o.yN)("Unfriendly iFrame blocks sizeConfig from being correctly evaluated"),n=matchMedia(t.mediaQuery).matches}n&&(Array.isArray(t.sizesSupported)&&(e.shouldFilter=!0),["labels","sizesSupported"].forEach((function(n){return(t[n]||[]).forEach((function(t){return e[n][t]=!0}))})))}else(0,o.yN)('sizeConfig rule missing required property "mediaQuery"');return e}),{labels:{},sizesSupported:{},shouldFilter:!1});(0,o.PO)(h)||(h=f?{banner:{sizes:f}}:{});var m=(0,a.Z)(h,"banner.sizes");g.shouldFilter&&m&&((h=(0,o.I8)(h)).banner.sizes=m.filter((function(e){return g.sizesSupported[e]})));var y={active:!h.hasOwnProperty(u.Mk)||(0,a.Z)(h,"banner.sizes.length")>0&&(0===n.length||!r&&(n.some((function(e){return g.labels[e]}))||n.some((function(e){return(0,c.q9)(l,e)})))||r&&n.reduce((function(e,t){return e?g.labels[t]||(0,c.q9)(l,t):e}),!0)),mediaTypes:h};return m&&m.length!==h.banner.sizes.length&&(y.filterResults={before:m,after:h.banner.sizes}),y}l.vc.getConfig("sizeConfig",(function(e){return function(e){p=e}(e.sizeConfig)}));var g=n(623),m=n(1501),y=n(1130),v=n(3669),b=n(9306),_=n(835),w=n(5309),T=n(7064),I=n(251),S=n(2751),k=n(8507),C=n(7539);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P="client",x="server",D={},O=D.bidderRegistry={},R=D.aliasRegistry={},N=[];l.vc.getConfig("s2sConfig",(function(e){e&&e.s2sConfig&&(N=(0,o.kJ)(e.s2sConfig)?e.s2sConfig:[e.s2sConfig])}));var M={},L=(0,v.z3)("sync",(function(e){var t=e.bidderCode,n=e.auctionId,i=e.bidderRequestId,r=e.adUnits,s=e.src,d=e.metrics;return r.reduce((function(e,r){var l=r.bids.filter((function(e){return e.bidder===t}));return null==t&&0===l.length&&null!=r.s2sBid&&l.push({bidder:null}),e.push(l.reduce((function(e,t){var l=null==(t=Object.assign({},t,{ortb2Imp:(0,o.Ee)({},r.ortb2Imp,t.ortb2Imp)},(0,o.iG)(r,["nativeParams","nativeOrtbRequest","mediaType","renderer"]))).mediaTypes?r.mediaTypes:t.mediaTypes;return(0,o.FS)(l)?t=Object.assign({},t,{mediaTypes:l}):(0,o.H)("mediaTypes is not correctly configured for adunit ".concat(r.code)),e.push(Object.assign({},t,{adUnitCode:r.code,transactionId:r.transactionId,sizes:(0,a.Z)(l,"banner.sizes")||(0,a.Z)(l,"video.playerSize")||[],bidId:t.bid_id||(0,o._d)(),bidderRequestId:i,auctionId:n,src:s,metrics:d,bidRequestsCount:b.f.getRequestsCounter(r.code),bidderRequestsCount:b.f.getBidderRequestsCounter(r.code,t.bidder),bidderWinsCount:b.f.getBidderWinsCounter(r.code,t.bidder)})),e}),[])),e}),[]).reduce(o.xH,[]).filter((function(e){return""!==e}))}),"getBids"),U=(0,v.z3)("sync",(function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).getS2SBidders;if(null==t)return e;var i=(void 0===n?z:n)(t);return e.filter((function(e){return i.has(e.bidder)}))}),"filterBidsForAdUnit"),j=new w.iK,B=new w.LO,q=new w.$e,F={getCoppa:function(){return!!l.vc.getConfig("coppa")}},V=(0,v.z3)("sync",(function(e,t){return function(e,t){return e.reduce((function(e,n){var i=f(h(n,t),n.mediaTypes,n.sizes),r=i.active,s=i.mediaTypes,a=i.filterResults;return r?(a&&(0,o.PN)('Size mapping filtered adUnit "'.concat(n.code,'" banner sizes from '),a.before,"to ",a.after),n.mediaTypes=s,n.bids=n.bids.reduce((function(e,i){var r=f(h(i,t),n.mediaTypes),s=r.active,a=r.mediaTypes,d=r.filterResults;return s?(d&&((0,o.PN)('Size mapping filtered adUnit "'.concat(n.code,'" bidder "').concat(i.bidder,'" banner sizes from '),d.before,"to ",d.after),i.mediaTypes=a),e.push(i)):(0,o.PN)('Size mapping deactivated adUnit "'.concat(n.code,'" bidder "').concat(i.bidder,'"')),e}),[]),e.push(n)):(0,o.PN)('Size mapping disabled adUnit "'.concat(n.code,'"')),e}),[])}(e,t)}),"setupAdUnitMediaTypes");function z(e){(0,o.kJ)(e)||(e=[e]);var t=new Set([null]);return e.filter((function(e){return e&&e.enabled})).flatMap((function(e){return e.bidders})).forEach((function(e){return t.add(e)})),t}var $=(0,v.z3)("sync",(function(e,t){var n,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).getS2SBidders,r=(void 0===i?z:i)(t);return(0,o.pP)(e).reduce((function(e,t){return e[r.has(t)?x:P].push(t),e}),(n={},(0,s.Z)(n,P,[]),(0,s.Z)(n,x,[]),n))}),"partitionBidders");function H(e,t){var n=O[e],i=(null==n?void 0:n.getSpec)&&n.getSpec();if(i&&i[t]&&"function"==typeof i[t])return[i,i[t]]}function W(e,t,n,i){try{(0,o.PN)("Invoking ".concat(e,".").concat(t));for(var r=arguments.length,s=new Array(r>4?r-4:0),a=4;a<r;a++)s[a-4]=arguments[a];l.vc.runWithBidder(e,i.bind.apply(i,[n].concat(s)))}catch(n){(0,o.yN)("Error calling ".concat(t," of ").concat(e))}}function Z(e,t,n){var r=H(e,t);null!=r&&W.apply(void 0,[e,t].concat((0,i.Z)(r),[n]))}D.makeBidRequests=(0,v.z3)("sync",(function(e,t,n,i,r){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=arguments.length>6?arguments[6]:void 0;a=(0,S.Bf)(a),T.j8(I.FP.BEFORE_REQUEST_BIDS,e),(0,g.Fb)(e),e=V(e,r);var d=$(e,N),u=d[P],p=d[x];l.vc.getConfig("bidderSequence")===l.FD&&(u=(0,o.TV)(u));var h=(0,_.nH)(),f=[],m=s.global||{},y=s.bidder||{};function v(e){var t=Object.freeze((0,o.Ee)({},m,y[e.bidderCode]));return e.ortb2=t,e.bids.forEach((function(e){return e.ortb2=t})),e}N.forEach((function(i){if(i&&i.enabled){var r=function(e,t){var n=(0,o.I8)(e),i=!1;return n.forEach((function(e){var n=e.bids.filter((function(e){var n;return"pbsBidAdapter"===e.module&&(null===(n=e.params)||void 0===n?void 0:n.configName)===t.configName}));1===n.length?(e.s2sBid=n[0],i=!0,e.ortb2Imp=(0,o.Ee)({},e.s2sBid.ortb2Imp,e.ortb2Imp)):n.length>1&&(0,o.yN)('Multiple "module" bids for the same s2s configuration; all will be ignored',n),e.bids=U(e.bids,t).map((function(e){return e.bid_id=(0,o._d)(),e}))})),{adUnits:n=n.filter((function(e){return 0!==e.bids.length||null!=e.s2sBid})),hasModuleBids:i}}(e,i),s=r.adUnits,d=r.hasModuleBids,l=(0,o.DO)();(0===p.length&&d?[null]:p).forEach((function(e){var r=(0,o._d)(),d=a.fork(),c=v({bidderCode:e,auctionId:n,bidderRequestId:r,uniquePbsTid:l,bids:L({bidderCode:e,auctionId:n,bidderRequestId:r,adUnits:(0,o.I8)(s),src:I.os.YZ,metrics:d}),auctionStart:t,timeout:i.timeout,src:I.os.YZ,refererInfo:h,metrics:d});0!==c.bids.length&&f.push(c)})),s.forEach((function(e){var t=e.bids.filter((function(e){return(0,c.sE)(f,(function(t){return(0,c.sE)(t.bids,(function(t){return t.bidId===e.bid_id}))}))}));e.bids=t})),f.forEach((function(e){void 0===e.adUnitsS2SCopy&&(e.adUnitsS2SCopy=s.filter((function(e){return e.bids.length>0||null!=e.s2sBid})))}))}}));var b=function(e){var t=(0,o.I8)(e);return t.forEach((function(e){e.bids=U(e.bids,null)})),t.filter((function(e){return 0!==e.bids.length}))}(e);return u.forEach((function(e){var s=(0,o._d)(),d=a.fork(),l=v({bidderCode:e,auctionId:n,bidderRequestId:s,bids:L({bidderCode:e,auctionId:n,bidderRequestId:s,adUnits:(0,o.I8)(b),labels:r,src:"client",metrics:d}),auctionStart:t,timeout:i,refererInfo:h,metrics:d}),c=O[e];c||(0,o.H)("Trying to make a request for bidder that does not exist: ".concat(e)),c&&l.bids&&0!==l.bids.length&&f.push(l)})),f.forEach((function(e){j.getConsentData()&&(e.gdprConsent=j.getConsentData()),B.getConsentData()&&(e.uspConsent=B.getConsentData()),q.getConsentData()&&(e.gppConsent=q.getConsentData())})),f}),"makeBidRequests"),D.callBids=function(e,t,n,i,s,a,d){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};if(t.length){var u=t.reduce((function(e,t){return e[Number(void 0!==t.src&&t.src===I.os.YZ)].push(t),e}),[[],[]]),p=(0,r.Z)(u,2),h=p[0],f=p[1],g=[];f.forEach((function(e){for(var t=-1,n=0;n<g.length;++n)if(e.uniquePbsTid===g[n].uniquePbsTid){t=n;break}t<=-1&&g.push(e)}));var m=0;N.forEach((function(e){if(e&&g[m]&&z(e).has(g[m].bidderCode)){var t=(0,y.O)(a,s?{request:s.request.bind(null,"s2s"),done:s.done}:void 0),r=e.bidders,d=O[e.adapter],l=g[m].uniquePbsTid,u=g[m].adUnitsS2SCopy,p=f.filter((function(e){return e.uniquePbsTid===l}));if(d){var h={ad_units:u,s2sConfig:e,ortb2Fragments:c};if(h.ad_units.length){var v=p.map((function(e){return e.start=(0,o.AB)(),i.bind(e)})),b=(0,o.pP)(h.ad_units).filter((function(e){return r.includes(e)}));(0,o.ji)("CALLING S2S HEADER BIDDERS ==== ".concat(b.length>0?b.join(", "):'No bidder specified, using "ortb2Imp" definition(s) only')),p.forEach((function(e){T.j8(I.FP.BID_REQUESTED,A(A({},e),{},{tid:e.auctionId}))})),d.callBids(h,f,n,(function(){return v.forEach((function(e){return e()}))}),t)}}else(0,o.H)("missing "+e.adapter);m++}})),h.forEach((function(e){e.start=(0,o.AB)();var t=O[e.bidderCode];l.vc.runWithBidder(e.bidderCode,(function(){(0,o.ji)("CALLING BIDDER"),T.j8(I.FP.BID_REQUESTED,e)}));var r=(0,y.O)(a,s?{request:s.request.bind(null,e.bidderCode),done:s.done}:void 0),c=i.bind(e);try{l.vc.runWithBidder(e.bidderCode,o.ak.call(t.callBids,t,e,n,c,r,d,l.vc.callbackWithBidder(e.bidderCode)))}catch(t){(0,o.H)("".concat(e.bidderCode," Bid Adapter emitted an uncaught error when parsing their bidRequest"),{e:t,bidRequest:e}),c()}}))}else(0,o.yN)("callBids executed with no bidRequests.  Were they filtered by labels or sizing?")},D.videoAdapters=[],D.registerBidAdapter=function(e,t){var n,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).supportedMediaTypes,r=void 0===i?[]:i;e&&t?"function"==typeof e.callBids?(O[t]=e,w.qh.register(C.UL,t,null===(n=e.getSpec)||void 0===n?void 0:n.call(e).gvlid),(0,c.q9)(r,"video")&&D.videoAdapters.push(t),(0,c.q9)(r,"native")&&g.Sg.push(t)):(0,o.H)("Bidder adaptor error for bidder code: "+t+"bidder must implement a callBids() function"):(0,o.H)("bidAdapter or bidderCode not specified")},D.aliasBidAdapter=function(e,t,n){if(void 0===O[t]){var i=O[e];if(void 0===i){var r=[];N.forEach((function(n){if(n.bidders&&n.bidders.length){var i=n&&n.bidders;n&&(0,c.q9)(i,t)?R[t]=e:r.push(e)}})),r.forEach((function(e){(0,o.H)('bidderCode "'+e+'" is not an existing bidder.',"adapterManager.aliasBidAdapter")}))}else try{var s,a=function(e){var t=[];return(0,c.q9)(D.videoAdapters,e)&&t.push("video"),(0,c.q9)(g.Sg,e)&&t.push("native"),t}(e);if(i.constructor.prototype!=Object.prototype)(s=new i.constructor).setBidderCode(t);else{var d=i.getSpec(),l=n&&n.gvlid,u=n&&n.skipPbsAliasing;s=(0,m.PZ)(Object.assign({},d,{code:t,gvlid:l,skipPbsAliasing:u})),R[t]=e}D.registerBidAdapter(s,t,{supportedMediaTypes:a})}catch(t){(0,o.H)(e+" bidder does not currently support aliasing.","adapterManager.aliasBidAdapter")}}else(0,o.ji)('alias name "'+t+'" has been already specified.')},D.registerAnalyticsAdapter=function(e){var t=e.adapter,n=e.code,i=e.gvlid;t&&n?"function"==typeof t.enableAnalytics?(t.code=n,M[n]={adapter:t,gvlid:i},w.qh.register(C._U,n,i)):(0,o.H)('Prebid Error: Analytics adaptor error for analytics "'.concat(n,'"\n        analytics adapter must implement an enableAnalytics() function')):(0,o.H)("Prebid Error: analyticsAdapter or analyticsCode not specified")},D.enableAnalytics=function(e){(0,o.kJ)(e)||(e=[e]),(0,o.yi)(e,(function(e){var t=M[e.provider];t&&t.adapter?t.adapter.enableAnalytics(e):(0,o.H)("Prebid Error: no analytics adapter found in registry for '".concat(e.provider,"'."))}))},D.getBidAdapter=function(e){return O[e]},D.getAnalyticsAdapter=function(e){return M[e]},D.callTimedOutBidders=function(e,t,n){t=t.map((function(t){return t.params=(0,o.S0)(e,t.adUnitCode,t.bidder),t.timeout=n,t})),t=(0,o.vM)(t,"bidder"),Object.keys(t).forEach((function(e){Z(e,"onTimeout",t[e])}))},D.callBidWonBidder=function(e,t,n){t.params=(0,o.S0)(n,t.adUnitCode,t.bidder),b.f.incrementBidderWinsCounter(t.adUnitCode,t.bidder),Z(e,"onBidWon",t)},D.callSetTargetingBidder=function(e,t){Z(e,"onSetTargeting",t)},D.callBidViewableBidder=function(e,t){Z(e,"onBidViewable",t)},D.callBidderError=function(e,t,n){Z(e,"onBidderError",{error:t,bidderRequest:n})},D.callDataDeletionRequest=(0,v.z3)("sync",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var s="onDataDeletionRequest";Object.keys(O).filter((function(e){return!R.hasOwnProperty(e)})).forEach((function(e){var n=H(e,s);if(null!=n){var r=k.K.getBidsRequested().filter((function(t){return function(e){for(var t=new Set;R.hasOwnProperty(e)&&!t.has(e);)t.add(e),e=R[e];return e}(t.bidderCode)===e}));W.apply(void 0,[e,s].concat((0,i.Z)(n),[r],t))}})),Object.entries(M).forEach((function(e){var n,i=(0,r.Z)(e,2),a=i[0],d=i[1],l=null==d||null===(n=d.adapter)||void 0===n?void 0:n[s];if("function"==typeof l)try{l.apply(d.adapter,t)}catch(e){(0,o.H)("error calling ".concat(s," of ").concat(a),e)}}))}));const G=D},1501:(e,t,n)=>{"use strict";n.d(t,{BF:()=>x,JY:()=>O,PZ:()=>E,Q1:()=>D,dX:()=>C});var i=n(1785),r=n(9267),s=n(963),o=n(7467),a=n(1476),d=n(664),l=n(4826),c=n(623),u=n(7357),p=n(251),h=n(7064),f=n(4232),g=n(1130),m=n(7436),y=n(5446),v=n(1301),b=n(3669),_=n(4070),w=n(8507),T=n(8476),I=n(2751),S=(0,_.eA)("bidderFactory"),k=["cpm","ttl","creativeId","netRevenue","currency"];function C(e){var t=Array.isArray(e.supportedMediaTypes)?{supportedMediaTypes:e.supportedMediaTypes}:void 0;function n(e){var n=E(e);o.ZP.registerBidAdapter(n,e.code,t)}n(e),Array.isArray(e.aliases)&&e.aliases.forEach((function(t){var i,r,s=t;(0,m.PO)(t)&&(s=t.code,i=t.gvlid,r=t.skipPbsAliasing),o.ZP.aliasRegistry[s]=e.code,n(Object.assign({},e,{code:s,gvlid:i,skipPbsAliasing:r}))}))}function E(e){return Object.assign(new s.Z(e.code),{getSpec:function(){return Object.freeze(Object.assign({},e))},registerSyncs:t,callBids:function(i,r,s,l,c,u){if(Array.isArray(i.bids)){var f={},g=[],y=R(i).measureTime("validate",(function(){return i.bids.filter(n)}));if(0!==y.length){var v={};y.forEach((function(e){v[e.bidId]=e,e.adUnitCode||(e.adUnitCode=e.placementCode)})),A(e,y,i,l,u,{onRequest:function(e){return h.j8(p.FP.BEFORE_BIDDER_HTTP,i,e)},onResponse:function(t){c(e.code),g.push(t)},onFledgeAuctionConfigs:function(e){e.forEach((function(e){var t=v[e.bidId];t?x(t.adUnitCode,e.config):(0,m.yN)("Received fledge auction configuration for an unknown bidId",e)}))},onError:function(t,n){c(e.code),o.ZP.callBidderError(e.code,n,i),h.j8(p.FP.BIDDER_ERROR,{error:n,bidderRequest:i}),(0,m.H)("Server call for ".concat(e.code," failed: ").concat(t," ").concat(n.status,". Continuing without bids."))},onBid:function(t){var n,i,s,o,a=v[t.requestId];if(a){if(t.adapterCode=a.bidder,n=t.bidderCode,i=a.bidder,s=T.S.get(i,"allowAlternateBidderCodes")||!1,o=T.S.get(i,"allowedAlternateBidderCodes"),n&&i&&i!==n&&(o=(0,m.kJ)(o)?o.map((function(e){return e.trim().toLowerCase()})).filter((function(e){return!!e})).filter(m.tT):o,!s||(0,m.kJ)(o)&&"*"!==o[0]&&!o.includes(n)))return(0,m.yN)("".concat(t.bidderCode," is not a registered partner or known bidder of ").concat(a.bidder,", hence continuing without bid. If you wish to support this bidder, please mark allowAlternateBidderCodes as true in bidderSettings.")),void r.reject(a.adUnitCode,t,p.Gw.Dg);t.originalCpm=t.cpm,t.originalCurrency=t.currency,t.meta=t.meta||Object.assign({},t[a.bidder]);var l=Object.assign((0,d.m)(p.Q_.Q,a),t);!function(e,t){var n=(0,I.Bf)(t.metrics);n.checkpoint("addBidResponse"),f[e]=!0,n.measureTime("addBidResponse.validate",(function(){return O(e,t)}))?r(e,t):r.reject(e,t,p.Gw.UI)}(a.adUnitCode,l)}else(0,m.yN)("Bidder ".concat(e.code," made bid for unknown request ID: ").concat(t.requestId,". Ignoring.")),r.reject(null,t,p.Gw.Gp)},onCompletion:b})}else b()}function b(){s(),a.vc.runWithBidder(e.code,(function(){h.j8(p.FP.BIDDER_DONE,i),t(g,i.gdprConsent,i.uspConsent,i.gppConsent)}))}}});function t(t,n,i,r){P(e,t,n,i,r)}function n(t){return!!e.isBidRequestValid(t)||((0,m.yN)("Invalid bid sent to bidder ".concat(e.code,": ").concat(JSON.stringify(t))),!1)}}var A=(0,b.z3)("sync",(function(e,t,n,i,s,o){var a=o.onRequest,d=o.onResponse,l=o.onFledgeAuctionConfigs,c=o.onError,u=o.onBid,p=o.onCompletion,h=R(n);p=h.startTiming("total").stopBefore(p);var f=h.measureTime("buildRequests",(function(){return e.buildRequests(t,n)}));if(f&&0!==f.length){Array.isArray(f)||(f=[f]);var g=(0,m.yx)(p,f.length);f.forEach((function(t){var n=h.fork();function o(e){null!=e&&(e.metrics=n.fork().renameWith()),u(e)}var p=s((function(i,r){v();try{i=JSON.parse(i)}catch(e){}i={body:i,headers:{get:r.getResponseHeader.bind(r)}},d(i);try{i=n.measureTime("interpretResponse",(function(){return e.interpretResponse(i,t)}))}catch(t){return(0,m.H)("Bidder ".concat(e.code," failed to interpret the server's response. Continuing without bids"),null,t),void g()}var s;i&&(0,m.kJ)(i.fledgeAuctionConfigs)?(l(i.fledgeAuctionConfigs),s=i.bids):s=i,s&&((0,m.kJ)(s)?s.forEach(o):o(s)),g()})),f=s((function(e,t){v(),c(e,t),g()}));a(t);var y,v=n.startTiming("net");switch(t.method){case"GET":i("".concat(t.url).concat((y=t.data)?"?".concat("object"===(0,r.Z)(y)?(0,m.Re)(y):y):""),{success:p,error:f},void 0,Object.assign({method:"GET",withCredentials:!0},t.options));break;case"POST":i(t.url,{success:p,error:f},"string"==typeof t.data?t.data:JSON.stringify(t.data),Object.assign({method:"POST",contentType:"text/plain",withCredentials:!0},t.options));break;default:(0,m.yN)("Skipping invalid request from ".concat(e.code,". Request type ").concat(t.type," must be GET or POST")),g()}}))}else p()}),"processBidderRequests"),P=(0,b.z3)("async",(function(e,t,n,i,r){var s=a.vc.getConfig("userSync.aliasSyncEnabled");if(e.getUserSyncs&&(s||!o.ZP.aliasRegistry[e.code])){var d=a.vc.getConfig("userSync.filterSettings"),c=e.getUserSyncs({iframeEnabled:!(!d||!d.iframe&&!d.all),pixelEnabled:!(!d||!d.image&&!d.all)},t,n,i,r);c&&(Array.isArray(c)||(c=[c]),c.forEach((function(t){l.k_.registerSync(t.type,e.code,t.url)})),l.k_.bidderDone(e.code))}}),"registerSyncs"),x=(0,b.z3)("sync",(function(e,t){}),"addComponentAuction");function D(e,t){var n=o.ZP.getBidAdapter(e);if(n.getSpec().getMappingFileInfo){var i=n.getSpec().getMappingFileInfo(),r=i.localStorageKey?i.localStorageKey:n.getBidderCode(),s=S.getDataFromLocalStorage(r);if(s){try{s=JSON.parse(s)}catch(t){(0,m.H)("Failed to parse ".concat(e," mapping data stored in local storage"))}return s.mapping[t]?s.mapping[t]:null}}}function O(e,t){var n,r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,s=void 0===r?w.K.index:r;function o(e){return"Invalid bid from ".concat(t.bidderCode,". Ignoring bid: ").concat(e)}return e?t?(n=Object.keys(t),k.every((function(e){return(0,f.q9)(n,e)&&!(0,f.q9)([void 0,null],t[e])}))?"native"!==t.mediaType||(0,c.r4)(t,{index:s})?"video"!==t.mediaType||(0,u.Dn)(t,{index:s})?!("banner"===t.mediaType&&!function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,r=void 0===n?w.K.index:n;if((t.width||0===parseInt(t.width,10))&&(t.height||0===parseInt(t.height,10)))return t.width=parseInt(t.width,10),t.height=parseInt(t.height,10),!0;var s=r.getBidRequest(t),o=r.getMediaTypes(t),a=s&&s.sizes||o&&o.banner&&o.banner.sizes,d=(0,m.sF)(a);if(1===d.length){var l=d[0].split("x"),c=(0,i.Z)(l,2),u=c[0],p=c[1];return t.width=parseInt(u,10),t.height=parseInt(p,10),!0}return!1}(e,t,{index:s})&&((0,m.H)(o("Banner bids require a width and height")),1)):((0,m.H)(o("Video bid does not have required vastUrl or renderer property")),!1):((0,m.H)(o("Native bid missing some required properties.")),!1):((0,m.H)(o("Bidder ".concat(t.bidderCode," is missing required params. Check http://prebid.org/dev-docs/bidder-adapter-1.html for list of params."))),!1)):((0,m.yN)("Some adapter tried to add an undefined bid for ".concat(e,".")),!1):((0,m.yN)("No adUnitCode was supplied to addBidResponse."),!1)}function R(e){return(0,I.Bf)(e.metrics).renameWith((function(t){return["adapter.client.".concat(t),"adapters.client.".concat(e.bidderCode,".").concat(t)]}))}(0,b.v5)("checkAdUnitSetup").before((function(e,t){if(!a.vc.getConfig("adpod.brandCategoryExclusion"))return e.call(this,t);t.filter((function(e){return(0,y.Z)(e,"mediaTypes.video.context")===v.Oh})).map((function(e){return e.bids.map((function(e){return e.bidder}))})).reduce(m.xH,[]).filter(m.tT).forEach((function(e){var t=o.ZP.getBidAdapter(e);if(t.getSpec().getMappingFileInfo){var n=t.getSpec().getMappingFileInfo(),i=n.refreshInDays?n.refreshInDays:1,r=n.localStorageKey?n.localStorageKey:t.getSpec().code,s=S.getDataFromLocalStorage(r);try{(!(s=s?JSON.parse(s):void 0)||(0,m.AB)()>s.lastUpdated+24*i*60*60*1e3)&&(0,g.h)(n.url,{success:function(t){try{t=JSON.parse(t);var n={lastUpdated:(0,m.AB)(),mapping:t.mapping};S.setDataInLocalStorage(r,JSON.stringify(n))}catch(t){(0,m.H)("Failed to parse ".concat(e," bidder translation mapping file"))}},error:function(){(0,m.H)("Failed to load ".concat(e," bidder translation file"))}})}catch(t){(0,m.H)("Failed to parse ".concat(e," bidder translation mapping file"))}}})),e.call(this,t)}))},1458:(e,t,n)=>{"use strict";n.d(t,{B:()=>a});var i=n(4232),r=n(7436),s=new WeakMap,o=["debugging","adloox","criteo","outstream","adagio","spotx","browsi","brandmetrics","justtag","tncId","akamaidap","ftrackId","inskin","hadron","medianet","improvedigital","aaxBlockmeter","confiant","arcspan"];function a(e,t,n,a,d){if(t&&e){if((0,i.q9)(o,t)){a||(a=document);var l=p(a,e);if(l)return n&&"function"==typeof n&&(l.loaded?n():l.callbacks.push(n)),l.tag;var c=s.get(a)||{},u={loaded:!1,tag:null,callbacks:[]};return c[e]=u,s.set(a,c),n&&"function"==typeof n&&u.callbacks.push(n),(0,r.yN)("module ".concat(t," is loading external JavaScript")),function(t,n,i,s){i||(i=document);var o=i.createElement("script");o.type="text/javascript",o.async=!0;var a=p(i,e);return a&&(a.tag=o),o.readyState?o.onreadystatechange=function(){"loaded"!==o.readyState&&"complete"!==o.readyState||(o.onreadystatechange=null,n())}:o.onload=function(){n()},o.src=t,s&&(0,r.D9)(o,s),(0,r.jC)(o,i),o}(e,(function(){u.loaded=!0;try{for(var e=0;e<u.callbacks.length;e++)u.callbacks[e]()}catch(e){(0,r.H)("Error executing callback","adloader.js:loadExternalScript",e)}}),a,d)}(0,r.H)("".concat(t," not whitelisted for loading external JavaScript"))}else(0,r.H)("cannot load external script without url and moduleCode");function p(e,t){var n=s.get(e);return n&&n[t]?n[t]:null}}},1130:(e,t,n)=>{"use strict";n.d(t,{O:()=>d,h:()=>a});var i=n(9267),r=n(1476),s=n(7436),o=4,a=d();function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.request,a=t.done;return function(t,d,l){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{var u,p=c.method||(l?"POST":"GET"),h=document.createElement("a");h.href=t;var f="object"===(0,i.Z)(d)&&null!==d?d:{success:function(){(0,s.ji)("xhr success")},error:function(e){(0,s.H)("xhr error",null,e)}};if("function"==typeof d&&(f.success=d),(u=new window.XMLHttpRequest).onreadystatechange=function(){if(u.readyState===o){"function"==typeof a&&a(h.origin);var e=u.status;e>=200&&e<300||304===e?f.success(u.responseText,u):f.error(u.statusText,u)}},r.vc.getConfig("disableAjaxTimeout")||(u.ontimeout=function(){(0,s.H)("  xhr timeout after ",u.timeout,"ms")}),"GET"===p&&l){var g=(0,s.en)(t,c);Object.assign(g.search,l),t=(0,s.Q2)(g)}u.open(p,t,!0),r.vc.getConfig("disableAjaxTimeout")||(u.timeout=e),c.withCredentials&&(u.withCredentials=!0),(0,s.yi)(c.customHeaders,(function(e,t){u.setRequestHeader(t,e)})),c.preflight&&u.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.setRequestHeader("Content-Type",c.contentType||"text/plain"),"function"==typeof n&&n(h.origin),"POST"===p&&l?u.send(l):u.send()}catch(e){(0,s.H)("xhr construction",e),"object"===(0,i.Z)(d)&&null!==d&&d.error(e)}}}},8230:(e,t,n)=>{"use strict";n.d(t,{mv:()=>D,dg:()=>K,LX:()=>ee,vO:()=>U});var i=n(1785),r=n(9267),s=n(7436),o=n(5446),a=n(4359),d=n(623),l=n(1130),c=n(1476),u=n(8507),p=15;function h(e){var t,n,i,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,s=void 0===r?u.K.index:r,o=e.vastXml?e.vastXml:(t=e.vastUrl,i=(n=e.vastImpUrl)?"<![CDATA[".concat(n,"]]>"):"",'<VAST version="3.0">\n    <Ad>\n      <Wrapper>\n        <AdSystem>prebid.org wrapper</AdSystem>\n        <VASTAdTagURI><![CDATA['.concat(t,"]]></VASTAdTagURI>\n        <Impression>").concat(i,"</Impression>\n        <Creatives></Creatives>\n      </Wrapper>\n    </Ad>\n  </VAST>")),a=s.getAuction(e),d={type:"xml",value:o,ttlseconds:Number(e.ttl)+p};return c.vc.getConfig("cache.vasttrack")&&(d.bidder=e.bidder,d.bidid=e.requestId,d.aid=e.auctionId),null!=a&&(d.timestamp=a.getAuctionStart()),"string"==typeof e.customCacheKey&&""!==e.customCacheKey&&(d.key=e.customCacheKey),d}var f=n(9034),g=n(4826),m=n(3669),y=n(4232),v=n(7357),b=n(1301),_=n(8476),w=n(7064),T=n(7467),I=n(251),S=n(2735),k=n(2751),C=n(664),E=n(2249),A=g.k_.syncUsers,P="started",x="inProgress",D="completed";w.on(I.FP.BID_ADJUSTMENT,(function(e){!function(e){var t=function(e,t,n){var i,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.index,a=void 0===o?u.K.index:o,d=r.bs,l=void 0===d?_.S:d;n=n||a.getBidRequest(t);var c=l.get((null==t?void 0:t.bidderCode)||(null===(i=n)||void 0===i?void 0:i.bidder),"bidCpmAdjustment");if(c&&"function"==typeof c)try{return c(e,Object.assign({},t),n)}catch(e){(0,s.H)("Error during bid adjustment",e)}return e}(e.cpm,e);t>=0&&(e.cpm=t)}(e)}));var O=4,R={},N={},M=[],L=(0,E.R)();function U(e){var t=e.adUnits,n=e.adUnitCodes,d=e.callback,l=e.cbTimeout,p=e.labels,h=e.auctionId,g=e.ortb2Fragments,m=e.metrics;m=(0,k.Bf)(m);var _,E,U,F,z=t,$=p,W=n,Z=h||(0,s.DO)(),K=l,J=new Set,Y=[],Q=d,ee=[],te=[],ie=[],re=[],se=[];function oe(){return{auctionId:Z,timestamp:_,auctionEnd:E,auctionStatus:F,adUnits:z,adUnitCodes:W,labels:$,bidderRequests:ee,noBids:ie,bidsReceived:te,bidsRejected:Y,winningBids:re,timeout:K,metrics:m,seatNonBids:se}}function ae(e,n){if(n&&clearTimeout(U),void 0===E){var i=[];e&&((0,s.ji)("Auction ".concat(Z," timedOut")),r=J,(i=ee.map((function(e){return(e.bids||[]).filter((function(e){return!r.has(e.bidder)}))})).reduce(s.xH,[])).length&&w.j8(I.FP.BID_TIMEOUT,i)),F=D,E=Date.now(),m.checkpoint("auctionEnd"),m.timeBetween("requestBids","auctionEnd","requestBids.total"),m.timeBetween("callBids","auctionEnd","requestBids.callBids"),w.j8(I.FP.AUCTION_END,oe()),q(z,(function(){try{if(null!=Q){var n=W,r=te.filter(s.ak.call(s.IK,this,n)).reduce(ne,{});Q.apply(L,[r,e,Z]),Q=null}}catch(e){(0,s.H)("Error executing bidsBackHandler",null,e)}finally{i.length&&T.ZP.callTimedOutBidders(t,i,K);var o=c.vc.getConfig("userSync")||{};o.enableOverride||A(o.syncDelay)}}))}var r}function de(){c.vc.resetBidder(),(0,s.PN)("Bids Received for Auction with id: ".concat(Z),te),F=D,ae(!1,!0)}function le(e){J.add(e)}function ce(e){var t=this;e.forEach((function(e){var t;t=e,ee=ee.concat(t)}));var n={},d={bidRequests:e,run:function(){var d,h;d=ae.bind(null,!0),h=setTimeout(d,K),U=h,F=x,w.j8(I.FP.AUCTION_INIT,oe());var m=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,d=void 0===n?u.K.index:n,l=0,p=!1,h=new Set,g={},m={};function _(){l--,p&&0===l&&e()}function T(e,t,n){return g[t.requestId]=!0,function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,i=void 0===n?u.K.index:n,r=i.getBidderRequest(e),o=i.getAdUnit(e),a=r&&r.start||e.requestTimestamp;Object.assign(e,{responseTimestamp:e.responseTimestamp||(0,s.AB)(),requestTimestamp:e.requestTimestamp||a,cpm:parseFloat(e.cpm)||0,bidder:e.bidder||e.bidderCode,adUnitCode:t}),null!=(null==o?void 0:o.ttlBuffer)&&(e.ttlBuffer=o.ttlBuffer),e.timeToRespond=e.responseTimestamp-e.requestTimestamp}(t,e),l++,n(_)}function k(e,n){T(e,n,(function(e){var i=function(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,i=void 0===n?u.K.index:n;w.j8(I.FP.BID_ADJUSTMENT,e);var s=(null===(t=i.getBidRequest(e))||void 0===t?void 0:t.renderer)||i.getAdUnit(e).renderer,o=e.mediaType,d=i.getMediaTypes(e),l=d&&d[o],p=l&&l.renderer,h=null;p&&p.url&&p.render&&(!0!==p.backupOnly||!e.renderer)?h=p:s&&s.url&&s.render&&(!0!==s.backupOnly||!e.renderer)&&(h=s),h&&(e.renderer=f.Th.install({url:h.url,config:h.options}),e.renderer.setRender(h.render));var g=X(e.mediaType,d,c.vc.getConfig("mediaTypePriceGranularity")),m=(0,a.D)(e.cpm,"object"===(0,r.Z)(g)?g:c.vc.getConfig("customPriceBucket"),c.vc.getConfig("currency.granularityMultiplier"));return e.pbLg=m.low,e.pbMg=m.med,e.pbHg=m.high,e.pbAg=m.auto,e.pbDg=m.dense,e.pbCg=m.custom,e}(n);i.mediaType===b.pX?function(e,t,n){var i=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).index,r=void 0===i?u.K.index:i,a=!0,d=(0,o.Z)(r.getMediaTypes({requestId:t.originalRequestId||t.requestId,transactionId:t.transactionId}),"video"),l=d&&(0,o.Z)(d,"context"),p=d&&(0,o.Z)(d,"useCacheKey");c.vc.getConfig("cache.url")&&(p||l!==v.gZ)&&(!t.videoCacheKey||c.vc.getConfig("cache.ignoreBidderCacheKey")?(a=!1,G(e,t,n,d)):t.vastUrl||((0,s.H)("videoCacheKey specified but not required vastUrl for video bid"),a=!1)),a&&(V(e,t),n())}(t,i,e):(null!=i.native&&"object"===(0,r.Z)(i.native)&&H(i),V(t,i),e())}))}function E(e,n,r){return T(e,n,(function(e){var o,a=(0,C.m)(I.Q_.H,null===(o=n.getIdentifiers)||void 0===o?void 0:o.call(n));return Object.assign(a,Object.fromEntries(Object.entries(n).filter((function(e){var t=(0,i.Z)(e,1)[0];return!a.hasOwnProperty(t)&&!["ad","adUrl","vastXml","vastUrl","native"].includes(t)})))),a.status=I.UE.G9,a.cpm=0,n.rejectionReason=r,(0,s.yN)("Bid from ".concat(n.bidder||"unknown bidder"," was rejected: ").concat(r),n),w.j8(I.FP.BID_REJECTED,n),t.addBidRejected(n),e(),a}))}function A(){var n=t.getBidRequests(),i=c.vc.getConfig("auctionOptions");if(h.add(this),i&&!(0,s.xb)(i)){var r=i.secondaryBidders;r&&!n.every((function(e){return(0,y.q9)(r,e.bidderCode)}))&&(n=n.filter((function(e){return!(0,y.q9)(r,e.bidderCode)})))}p=n.every((function(e){return h.has(e)})),this.bids.forEach((function(e){g[e.bidId]||(t.addNoBid(e),w.j8(I.FP.NO_BID,e))})),p&&0===l&&e()}return{addBidResponse:function(){function e(e,t){var n,i,r,s=d.getBidderRequest(t);i=s&&s.bidderRequestId||"",r=j.call({dispatch:k},e,t,(function(i){return null==n&&(n=E(e,t,i)),n})),null==m[i]&&(m[i]=S.Z.resolve()),m[i]=m[i].then((function(){return S.Z.resolve(r).catch((function(){}))}))}return e.reject=E,e}(),adapterDone:function(){!function(e,n){var i=e.timeout;(null==i||i>t.getTimeout())&&(i=t.getTimeout());var r=t.getAuctionStart()+i-Date.now(),s=m[e.bidderRequestId],o=m[""];(null!=s||null!=o)&&r>0?S.Z.race([S.Z.timeout(r),S.Z.resolve(o).then((function(){return s}))]).then(n):n()}(this,A.bind(this))}}}(de,t);T.ZP.callBids(z,e,m.addBidResponse,m.adapterDone,{request:function(e,t){p(R,t),p(n,e),N[e]||(N[e]={SRA:!0,origin:t}),n[e]>1&&(N[e].SRA=!1)},done:function(e){R[e]--,M[0]&&l(M[0])&&M.shift()}},K,le,g)}};function l(e){var t=!0,n=c.vc.getConfig("maxRequestsPerOrigin")||O;return e.bidRequests.some((function(e){var i=1,r=void 0!==e.src&&e.src===I.os.YZ?"s2s":e.bidderCode;return N[r]&&(!1===N[r].SRA&&(i=Math.min(e.bids.length,n)),R[N[r].origin]+i>n&&(t=!1)),!t})),t&&e.run(),t}function p(e,t){void 0===e[t]?e[t]=1:e[t]++}l(d)||((0,s.yN)("queueing auction due to limited endpoint capacity"),M.push(d))}return w.on(I.FP.SEAT_NON_BID,(function(e){var t;e.auctionId===Z&&(t=e.seatnonbid,se=se.concat(t))})),{addBidReceived:function(e){te=te.concat(e)},addBidRejected:function(e){Y=Y.concat(e)},addNoBid:function(e){ie=ie.concat(e)},executeCallback:ae,callBids:function(){F=P,_=Date.now();var e=m.measureTime("requestBids.makeRequests",(function(){return T.ZP.makeBidRequests(z,_,Z,K,$,g,m)}));(0,s.PN)("Bids Requested for Auction with id: ".concat(Z),e),m.checkpoint("callBids"),e.length<1?((0,s.yN)("No valid bid requests returned for auction"),de()):B.call({dispatch:ce,context:this},e)},addWinningBid:function(e){re=re.concat(e),T.ZP.callBidWonBidder(e.adapterCode||e.bidder,e,t)},setBidTargeting:function(e){T.ZP.callSetTargetingBidder(e.adapterCode||e.bidder,e)},getWinningBids:function(){return re},getAuctionStart:function(){return _},getTimeout:function(){return K},getAuctionId:function(){return Z},getAuctionStatus:function(){return F},getAdUnits:function(){return z},getAdUnitCodes:function(){return W},getBidRequests:function(){return ee},getBidsReceived:function(){return te},getNoBids:function(){return ie},getNonBids:function(){return se},getFPD:function(){return g},getMetrics:function(){return m}}}var j=(0,m.z3)("sync",(function(e,t,n){this.dispatch.call(null,e,t)}),"addBidResponse"),B=(0,m.z3)("sync",(function(e){this.dispatch.call(this.context,e)}),"addBidderRequests"),q=(0,m.z3)("async",(function(e,t){t&&t()}),"bidsBackCallback");function F(e,t){t.timeToRespond>e.getTimeout()+c.vc.getConfig("timeoutBuffer")&&e.executeCallback(!0)}function V(e,t){var n,i,r;n=t,r=!0===_.S.get(n.bidderCode,"allowZeroCpmBids")?n.cpm>=0:n.cpm>0,n.bidderCode&&(r||n.dealId)&&(i=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,i=void 0===n?u.K.index:n;if(!t)return{};var r=i.getBidRequest(t),s={};return te(s,ee(t.mediaType,e),t,r),e&&_.S.getOwn(e,I.k2.xn)&&(te(s,_.S.ownSettingsFor(e),t,r),t.sendStandardTargeting=_.S.get(e,"sendStandardTargeting")),t.native&&(s=Object.assign({},s,(0,d.Ur)(t))),s}(n.bidderCode,n)),n.adserverTargeting=Object.assign(n.adserverTargeting||{},i),(0,k.Bf)(t.metrics).timeSince("addBidResponse","addBidResponse.total"),w.j8(I.FP.BID_RESPONSE,t),e.addBidReceived(t),F(e,t)}var z,$,H=function(e){var t,n,i=null===(t=u.K.index.getAdUnit(e))||void 0===t?void 0:t.nativeOrtbRequest,r=null===(n=e.native)||void 0===n?void 0:n.ortb;if(i&&r){var s=(0,d.zq)(r,i);Object.assign(e.native,s)}},W=function(e){!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.O,i={puts:e.map(h)};n(c.vc.getConfig("cache.timeout"))(c.vc.getConfig("cache.url"),function(e){return{success:function(t){var n;try{n=JSON.parse(t).responses}catch(t){return void e(t,[])}n?e(null,n):e(new Error("The cache server didn't respond with a responses property."),[])},error:function(t,n){e(new Error("Error storing video ad in the cache: ".concat(t,": ").concat(JSON.stringify(n))),[])}}}(t),JSON.stringify(i),{contentType:"text/plain",withCredentials:!0})}(e.map((function(e){return e.bidResponse})),(function(t,n){n.forEach((function(n,i){var r=e[i],o=r.auctionInstance,a=r.bidResponse,d=r.afterBidAdded;t?((0,s.yN)("Failed to save to the video cache: ".concat(t,". Video bid must be discarded.")),F(o,a)):""===n.uuid?((0,s.yN)("Supplied video cache key was already in use by Prebid Cache; caching attempt was rejected. Video bid must be discarded."),F(o,a)):(a.videoCacheKey=n.uuid,a.vastUrl||(a.vastUrl=function(e){return"".concat(c.vc.getConfig("cache.url"),"?uuid=").concat(e)}(a.videoCacheKey)),V(o,a),d())}))}))};c.vc.getConfig("cache",(function(e){z="number"==typeof e.cache.batchSize&&e.cache.batchSize>0?e.cache.batchSize:1,$="number"==typeof e.cache.batchTimeout&&e.cache.batchTimeout>0?e.cache.batchTimeout:0}));var Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:setTimeout,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W,n=[[]],i=!1,r=function(e){return e()};return function(s,o,a){var d=$>0?e:r;n[n.length-1].length>=z&&n.push([]),n[n.length-1].push({auctionInstance:s,bidResponse:o,afterBidAdded:a}),i||(i=!0,d((function(){n.forEach(t),n=[[]],i=!1}),$))}}(),G=(0,m.z3)("async",(function(e,t,n,i){Z(e,t,n)}),"callPrebidCache");function X(e,t,n){if(e&&n){if(e===b.pX){var i=(0,o.Z)(t,"".concat(b.pX,".context"),"instream");if(n["".concat(b.pX,"-").concat(i)])return n["".concat(b.pX,"-").concat(i)]}return n[e]}}var K=function(e){return function(t){var n=e||function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,n=void 0===t?u.K.index:t,i=X(e.mediaType,n.getMediaTypes(e),c.vc.getConfig("mediaTypePriceGranularity"));return"string"==typeof e.mediaType&&i?"string"==typeof i?i:"custom":c.vc.getConfig("priceGranularity")}(t);return n===I.Ql.B7?t.pbAg:n===I.Ql.uN?t.pbDg:n===I.Ql.yE?t.pbLg:n===I.Ql.M2?t.pbMg:n===I.Ql.lj?t.pbHg:n===I.Ql.qN?t.pbCg:void 0}},J=function(){return function(e){return e.meta&&e.meta.advertiserDomains&&e.meta.advertiserDomains.length>0?[e.meta.advertiserDomains].flat()[0]:""}},Y=function(){return function(e){return e.meta&&e.meta.primaryCatId?e.meta.primaryCatId:""}};function Q(e,t){return{key:e,val:"function"==typeof t?function(e,n){return t(e,n)}:function(e){return(0,s.NA)(e,t)}}}function ee(e,t){var n=I.TD,i=Object.assign({},_.S.settingsFor(null));if(i[I.k2.xn]||(i[I.k2.xn]=function(){var e=I.TD;return[Q(e.BIDDER,"bidderCode"),Q(e.AD_ID,"adId"),Q(e.PRICE_BUCKET,K()),Q(e.SIZE,"size"),Q(e.DEAL,"dealId"),Q(e.SOURCE,"source"),Q(e.FORMAT,"mediaType"),Q(e.ADOMAIN,J()),Q(e.ACAT,Y())]}()),"video"===e){var r=i[I.k2.xn].slice();if(i[I.k2.xn]=r,[n.UUID,n.CACHE_ID].forEach((function(e){void 0===(0,y.sE)(r,(function(t){return t.key===e}))&&r.push(Q(e,"videoCacheKey"))})),c.vc.getConfig("cache.url")&&(!t||!1!==_.S.get(t,"sendStandardTargeting"))){var a=(0,s.en)(c.vc.getConfig("cache.url"));void 0===(0,y.sE)(r,(function(e){return e.key===n.CACHE_HOST}))&&r.push(Q(n.CACHE_HOST,(function(e){return(0,o.Z)(e,"adserverTargeting.".concat(n.CACHE_HOST))?e.adserverTargeting[n.CACHE_HOST]:a.hostname})))}}return i}function te(e,t,n,i){var r=t[I.k2.xn];return n.size=n.getSize(),(0,s.yi)(r,(function(r){var o=r.key,a=r.val;if(e[o]&&(0,s.yN)("The key: "+o+" is being overwritten"),(0,s.LQ)(a))try{a=a(n,i)}catch(e){(0,s.H)("bidmanager","ERROR",e)}(void 0===t.suppressEmptyKeys||!0!==t.suppressEmptyKeys)&&o!==I.TD.DEAL&&o!==I.TD.ACAT||!(0,s.jH)(a)&&null!=a?e[o]=a:(0,s.PN)("suppressing empty key '"+o+"' from adserver targeting")})),e}function ne(e,t){return e[t.adUnitCode]||(e[t.adUnitCode]={bids:[]}),e[t.adUnitCode].bids.push(t),e}},8507:(e,t,n)=>{"use strict";n.d(t,{K:()=>l});var i=n(7436),r=n(8230),s=n(4232);function o(e){Object.assign(this,{getAuction:function(t){var n=t.auctionId;if(null!=n)return e().find((function(e){return e.getAuctionId()===n}))},getAdUnit:function(t){var n=t.transactionId;if(null!=n)return e().flatMap((function(e){return e.getAdUnits()})).find((function(e){return e.transactionId===n}))},getMediaTypes:function(e){var t=e.transactionId,n=e.requestId;if(null!=n){var i=this.getBidRequest({requestId:n});if(null!=i&&(null==t||i.transactionId===t))return i.mediaTypes}else if(null!=t){var r=this.getAdUnit({transactionId:t});if(null!=r)return r.mediaTypes}},getBidderRequest:function(t){var n=t.requestId,i=t.bidderRequestId;if(null!=n||null!=i){var r=e().flatMap((function(e){return e.getBidRequests()}));return null!=i&&(r=r.filter((function(e){return e.bidderRequestId===i}))),null==n?r[0]:r.find((function(e){return e.bids&&null!=e.bids.find((function(e){return e.bidId===n}))}))}},getBidRequest:function(t){var n=t.requestId;if(null!=n)return e().flatMap((function(e){return e.getBidRequests()})).flatMap((function(e){return e.bids})).find((function(e){return e&&e.bidId===n}))}})}var a=n(251),d=n(2751),l=function(){var e=[],t={addWinningBid:function(t){var n=(0,d.Bf)(t.metrics);n.checkpoint("bidWon"),n.timeBetween("auctionEnd","bidWon","render.pending"),n.timeBetween("requestBids","bidWon","render.e2e");var r=(0,s.sE)(e,(function(e){return e.getAuctionId()===t.auctionId}));r?(t.status=a.UE.fe,r.addWinningBid(t)):(0,i.yN)("Auction not found when adding winning bid")},getAllWinningBids:function(){return e.map((function(e){return e.getWinningBids()})).reduce(i.xH,[])},getBidsRequested:function(){return e.map((function(e){return e.getBidRequests()})).reduce(i.xH,[])},getNoBids:function(){return e.map((function(e){return e.getNoBids()})).reduce(i.xH,[])},getBidsReceived:function(){return e.map((function(e){if(e.getAuctionStatus()===r.mv)return e.getBidsReceived()})).reduce(i.xH,[]).filter((function(e){return e}))},getAllBidsForAdUnitCode:function(t){return e.map((function(e){return e.getBidsReceived()})).reduce(i.xH,[]).filter((function(e){return e&&e.adUnitCode===t}))},getAdUnits:function(){return e.map((function(e){return e.getAdUnits()})).reduce(i.xH,[])},getAdUnitCodes:function(){return e.map((function(e){return e.getAdUnitCodes()})).reduce(i.xH,[]).filter(i.tT)},createAuction:function(t){var n=(0,r.vO)(t);return function(t){e.push(t)}(n),n},findBidByAdId:function(t){return(0,s.sE)(e.map((function(e){return e.getBidsReceived()})).reduce(i.xH,[]),(function(e){return e.adId===t}))},getStandardBidderAdServerTargeting:function(){return(0,r.LX)()[a.k2.xn]},setStatusForBids:function(n,i){var r=t.findBidByAdId(n);if(r&&(r.status=i),r&&i===a.UE.CK){var o=(0,s.sE)(e,(function(e){return e.getAuctionId()===r.auctionId}));o&&o.setBidTargeting(r)}},getLastAuctionId:function(){return e.length&&e[e.length-1].getAuctionId()},clearAllAuctions:function(){e.length=0}};return t.index=new o((function(){return e})),t}()},8476:(e,t,n)=>{"use strict";n.d(t,{S:()=>p});var i=n(6172),r=n(1976),s=n(5446),o=n(7436),a=n(2249),d=n(251);function l(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var c=new WeakSet;function u(e){return null==e?this.defaultScope:e}var p=new(function(){function e(t,n){var r,s;(0,i.Z)(this,e),function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,s=c),s.add(r),this.getSettings=t,this.defaultScope=n}return(0,r.Z)(e,[{key:"get",value:function(e,t){var n=this.getOwn(e,t);return void 0===n&&(n=this.getOwn(null,t)),n}},{key:"getOwn",value:function(e,t){return e=l(this,c,u).call(this,e),(0,s.Z)(this.getSettings(),"".concat(e,".").concat(t))}},{key:"getScopes",value:function(){var e=this;return Object.keys(this.getSettings()).filter((function(t){return t!==e.defaultScope}))}},{key:"settingsFor",value:function(e){return(0,o.Ee)({},this.ownSettingsFor(null),this.ownSettingsFor(e))}},{key:"ownSettingsFor",value:function(e){return e=l(this,c,u).call(this,e),this.getSettings()[e]||{}}}]),e}())((function(){return(0,a.R)().bidderSettings||{}}),d.k2.zF)},664:(e,t,n)=>{"use strict";n.d(t,{m:()=>s});var i=n(7436);function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.src,r=void 0===n?"client":n,s=t.bidder,o=void 0===s?"":s,a=t.bidId,d=t.transactionId,l=t.auctionId,c=r,u=e||0;this.bidderCode=o,this.width=0,this.height=0,this.statusMessage=function(){switch(u){case 0:return"Pending";case 1:return"Bid available";case 2:return"Bid returned empty or error response";case 3:return"Bid timed out"}}(),this.adId=(0,i._d)(),this.requestId=a,this.transactionId=d,this.auctionId=l,this.mediaType="banner",this.source=c,this.getStatusCode=function(){return u},this.getSize=function(){return this.width+"x"+this.height},this.getIdentifiers=function(){return{src:this.source,bidder:this.bidderCode,bidId:this.requestId,transactionId:this.transactionId,auctionId:this.auctionId}}}function s(e,t){return new r(e,t)}},1476:(e,t,n)=>{"use strict";n.d(t,{FD:()=>h,vc:()=>y});var i=n(1909),r=n(9267),s=n(1785),o=n(4359),a=n(4232),d=n(7436),l=n(5446),c=n(251);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var p="TRUE"===(0,d.rD)(c.f).toUpperCase(),h="random",f={};f[h]=!0,f.fixed=!0;var g=h,m={LOW:"low",MEDIUM:"medium",HIGH:"high",AUTO:"auto",DENSE:"dense",CUSTOM:"custom"},y=function(){var e,t,n,c=[],h=null;function y(){function i(e){return l[e].val}function r(e,t){l[e].val=t}e={};var l={publisherDomain:{set:function(e){null!=e&&(0,d.yN)("publisherDomain is deprecated and has no effect since v7 - use pageUrl instead"),r("publisherDomain",e)}},priceGranularity:{val:m.MEDIUM,set:function(e){h(e)&&("string"==typeof e?r("priceGranularity",u(e)?e:m.MEDIUM):(0,d.PO)(e)&&(r("customPriceBucket",e),r("priceGranularity",m.CUSTOM),(0,d.ji)("Using custom price granularity")))}},customPriceBucket:{val:{},set:function(){}},mediaTypePriceGranularity:{val:{},set:function(e){null!=e&&r("mediaTypePriceGranularity",Object.keys(e).reduce((function(t,n){return h(e[n])?"string"==typeof e?t[n]=u(e[n])?e[n]:i("priceGranularity"):(0,d.PO)(e)&&(t[n]=e[n],(0,d.ji)("Using custom price granularity for ".concat(n))):(0,d.yN)("Invalid price granularity for media type: ".concat(n)),t}),{}))}},bidderSequence:{val:g,set:function(e){f[e]?r("bidderSequence",e):(0,d.yN)("Invalid order: ".concat(e,". Bidder Sequence was not set."))}},auctionOptions:{val:{},set:function(e){(function(e){if(!(0,d.PO)(e))return(0,d.yN)("Auction Options must be an object"),!1;for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t];if("secondaryBidders"!==i&&"suppressStaleRender"!==i)return(0,d.yN)("Auction Options given an incorrect param: ".concat(i)),!1;if("secondaryBidders"===i){if(!(0,d.kJ)(e[i]))return(0,d.yN)("Auction Options ".concat(i," must be of type Array")),!1;if(!e[i].every(d.d8))return(0,d.yN)("Auction Options ".concat(i," must be only string")),!1}else if("suppressStaleRender"===i&&!(0,d.jn)(e[i]))return(0,d.yN)("Auction Options ".concat(i," must be of type boolean")),!1}return!0})(e)&&r("auctionOptions",e)}}},c={debug:p,bidderTimeout:3e3,enableSendAllBids:!0,useBidCache:!1,deviceAccess:!0,timeoutBuffer:400,disableAjaxTimeout:!1,maxNestedIframes:10};function u(e){return(0,a.sE)(Object.keys(m),(function(t){return e===m[t]}))}function h(e){if(!e)return(0,d.H)("Prebid Error: no value passed to `setPriceGranularity()`"),!1;if("string"==typeof e)u(e)||(0,d.yN)("Prebid Warning: setPriceGranularity was called with invalid setting, using `medium` as default.");else if((0,d.PO)(e)&&!(0,o.t)(e))return(0,d.H)("Invalid custom price value passed to `setPriceGranularity()`"),!1;return!0}Object.defineProperties(c,Object.fromEntries(Object.entries(l).map((function(e){var t=(0,s.Z)(e,2),n=t[0],o=t[1];return[n,Object.assign({get:i.bind(null,n),set:r.bind(null,n),enumerable:!0},o)]})))),t&&P(Object.keys(t).reduce((function(e,n){return t[n]!==c[n]&&(e[n]=c[n]||{}),e}),{})),t=c,n={}}function v(){if(h&&n&&(0,d.PO)(n[h])){var e=n[h],i=new Set(Object.keys(t).concat(Object.keys(e)));return(0,a.Oc)(i).reduce((function(n,i){return void 0===e[i]?n[i]=t[i]:void 0===t[i]?n[i]=e[i]:(0,d.PO)(e[i])?n[i]=(0,d.Ee)({},t[i],e[i]):n[i]=e[i],n}),{})}return Object.assign({},t)}var b=[v,function(){var e=v();return Object.defineProperty(e,"ortb2",{get:function(){throw new Error("invalid access to 'orbt2' config - use request parameters instead")}}),e}].map((function(e){return function(){if(arguments.length<=1&&"function"!=typeof(arguments.length<=0?void 0:arguments[0])){var t=arguments.length<=0?void 0:arguments[0];return t?(0,l.Z)(e(),t):v()}return A.apply(void 0,arguments)}})),_=(0,s.Z)(b,2),w=_[0],T=_[1],I=[T,w].map((function(e){return function(){var t=e.apply(void 0,arguments);return t&&"object"===(0,r.Z)(t)&&(t=(0,d.I8)(t)),t}})),S=(0,s.Z)(I,2),k=S[0],C=S[1];function E(n){if((0,d.PO)(n)){var i=Object.keys(n),r={};i.forEach((function(i){var s=n[i];(0,d.PO)(e[i])&&(0,d.PO)(s)&&(s=Object.assign({},e[i],s));try{r[i]=t[i]=s}catch(e){(0,d.yN)("Cannot set config for property ".concat(i," : "),e)}})),P(r)}else(0,d.H)("setConfig options must be an object")}function A(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t;if("string"!=typeof e&&(r=e,e="*",n=t||{}),"function"==typeof r){var s={topic:e,callback:r};return c.push(s),n.init&&r("*"===e?T():(0,i.Z)({},e,T(e))),function(){c.splice(c.indexOf(s),1)}}(0,d.H)("listener must be a function")}function P(e){var t=Object.keys(e);c.filter((function(e){return(0,a.q9)(t,e.topic)})).forEach((function(t){t.callback((0,i.Z)({},t.topic,e[t.topic]))})),c.filter((function(e){return"*"===e.topic})).forEach((function(t){return t.callback(e)}))}function x(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{!function(e){if(!(0,d.PO)(e))throw"setBidderConfig bidder options must be an object";if(!Array.isArray(e.bidders)||!e.bidders.length)throw"setBidderConfig bidder options must contain a bidders list with at least 1 bidder";if(!(0,d.PO)(e.config))throw"setBidderConfig bidder options must contain a config object"}(e),e.bidders.forEach((function(i){n[i]||(n[i]={}),Object.keys(e.config).forEach((function(r){var s=e.config[r];if((0,d.PO)(s)){var o=t?d.Ee:Object.assign;n[i][r]=o({},n[i][r]||{},s)}else n[i][r]=s}))}))}catch(e){(0,d.H)(e)}}function D(e,t){h=e;try{return t()}finally{O()}}function O(){h=null}return y(),{getCurrentBidder:function(){return h},resetBidder:O,getConfig:T,getAnyConfig:w,readConfig:k,readAnyConfig:C,setConfig:E,mergeConfig:function(e){if((0,d.PO)(e)){var t=(0,d.Ee)(v(),e);return E(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t)),t}(0,d.H)("mergeConfig input must be an object")},setDefaults:function(n){(0,d.PO)(e)?(Object.assign(e,n),Object.assign(t,n)):(0,d.H)("defaults must be an object")},resetConfig:y,runWithBidder:D,callbackWithBidder:function(e){return function(t){return function(){if("function"==typeof t){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return D(e,d.ak.call.apply(d.ak,[t,this].concat(i)))}(0,d.yN)("config.callbackWithBidder callback is not a function")}}},setBidderConfig:x,getBidderConfig:function(){return n},mergeBidderConfig:function(e){return x(e,!0)}}}()},5309:(e,t,n)=>{"use strict";function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}n.d(t,{qh:()=>O,iK:()=>x,$e:()=>D,LO:()=>P,$P:()=>v});var s=n(9267);function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}var a=n(6172),d=n(1976),l=n(1909),c=n(266),u=n(5248),p=n(7436),h=n(2735);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=o(e);if(t){var r=o(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===(0,s.Z)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function g(e,t,n){m(e,t),t.set(e,n)}function m(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function y(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var v=Object.freeze({}),b=new WeakMap,_=new WeakMap,w=new WeakMap,T=new WeakMap,I=new WeakSet,S=function(){function e(){var t;(0,a.Z)(this,e),m(this,t=I),t.add(this),g(this,b,{writable:!0,value:void 0}),g(this,_,{writable:!0,value:void 0}),g(this,w,{writable:!0,value:void 0}),g(this,T,{writable:!0,value:void 0}),(0,l.Z)(this,"generatedTime",void 0),this.reset()}return(0,d.Z)(e,[{key:"reset",value:function(){(0,u.Z)(this,w,(0,h.P)()),(0,u.Z)(this,b,!1),(0,u.Z)(this,_,null),(0,u.Z)(this,T,!1),this.generatedTime=null}},{key:"enable",value:function(){(0,u.Z)(this,b,!0)}},{key:"enabled",get:function(){return(0,c.Z)(this,b)}},{key:"ready",get:function(){return(0,c.Z)(this,T)}},{key:"promise",get:function(){return(0,c.Z)(this,T)?h.Z.resolve((0,c.Z)(this,_)):((0,c.Z)(this,b)||y(this,I,k).call(this,null),(0,c.Z)(this,w).promise)}},{key:"setConsentData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,p.AB)();this.generatedTime=t,y(this,I,k).call(this,e)}},{key:"getConsentData",value:function(){return(0,c.Z)(this,_)}}]),e}();function k(e){(0,u.Z)(this,T,!0),(0,u.Z)(this,_,e),(0,c.Z)(this,w).resolve(e)}var C,E,A,P=function(e){r(n,e);var t=f(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"getConsentMeta",value:function(){var e=this.getConsentData();if(e&&this.generatedTime)return{usp:e,generatedAt:this.generatedTime}}}]),n}(S),x=function(e){r(n,e);var t=f(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"getConsentMeta",value:function(){var e=this.getConsentData();if(e&&e.vendorData&&this.generatedTime)return{gdprApplies:e.gdprApplies,consentStringSize:(0,p.d8)(e.vendorData.tcString)?e.vendorData.tcString.length:0,generatedAt:this.generatedTime,apiVersion:e.apiVersion}}}]),n}(S),D=function(e){r(n,e);var t=f(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"getConsentMeta",value:function(){if(this.getConsentData()&&this.generatedTime)return{generatedAt:this.generatedTime}}}]),n}(S),O=(C={},E={},A={},{register:function(e,t,n){n&&((C[t]=C[t]||{})[e]=n,E.hasOwnProperty(t)?E[t]!==n&&(E[t]=A):E[t]=n)},get:function(e){var t={modules:C[e]||{}};return E.hasOwnProperty(e)&&E[e]!==A&&(t.gvlid=E[e]),t}})},4359:(e,t,n)=>{"use strict";n.d(t,{D:()=>p,t:()=>f});var i=n(4232),r=n(7436),s=n(1476),o=2,a={buckets:[{max:5,increment:.5}]},d={buckets:[{max:20,increment:.1}]},l={buckets:[{max:20,increment:.01}]},c={buckets:[{max:3,increment:.01},{max:8,increment:.05},{max:20,increment:.5}]},u={buckets:[{max:5,increment:.05},{max:10,increment:.1},{max:20,increment:.5}]};function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=parseFloat(e);return isNaN(i)&&(i=""),{low:""===i?"":h(e,a,n),med:""===i?"":h(e,d,n),high:""===i?"":h(e,l,n),auto:""===i?"":h(e,u,n),dense:""===i?"":h(e,c,n),custom:""===i?"":h(e,t,n)}}function h(e,t,n){var a="";if(!f(t))return a;var d=t.buckets.reduce((function(e,t){return e.max>t.max?e:t}),{max:0}),l=0,c=(0,i.sE)(t.buckets,(function(t){if(e>d.max*n){var i=t.precision;void 0===i&&(i=o),a=(t.max*n).toFixed(i)}else{if(e<=t.max*n&&e>=l*n)return t.min=l,t;l=t.max}}));return c&&(a=function(e,t,n){var i=void 0!==t.precision?t.precision:o,a=t.increment*n,d=t.min*n,l=Math.floor,c=s.vc.getConfig("cpmRoundingFunction");"function"==typeof c&&(l=c);var u,p,h=Math.pow(10,i+2),f=(e*h-d*h)/(a*h);try{u=l(f)*a+d}catch(e){p=!0}return(p||"number"!=typeof u)&&((0,r.yN)("Invalid rounding function passed in config"),u=Math.floor(f)*a+d),(u=Number(u.toFixed(10))).toFixed(i)}(e,c,n)),a}function f(e){if((0,r.xb)(e)||!e.buckets||!Array.isArray(e.buckets))return!1;var t=!0;return e.buckets.forEach((function(e){e.max&&e.increment||(t=!1)})),t}},7064:(e,t,n)=>{"use strict";n.d(t,{S1:()=>p,j8:()=>f,on:()=>u,vw:()=>h});var i=n(7436),r=n(251),s=Array.prototype.slice,o=Array.prototype.push,a=i.HA(r.FP,(function(e){return e})),d=r.aI,l=[],c=function(){var e={},t={on:function(t,n,r){if(function(e){return i.r3(a,e)}(t)){var s=e[t]||{que:[]};r?(s[r]=s[r]||{que:[]},s[r].que.push(n)):s.que.push(n),e[t]=s}else i.H("Wrong event name : "+t+" Valid event names :"+a)},emit:function(t){!function(t,n){i.ji("Emitting event for: "+t);var r=n[0]||{},s=r[d[t]],a=e[t]||{que:[]},c=i.HA(a,(function(e,t){return t})),u=[];l.push({eventType:t,args:r,id:s,elapsedTime:i.bd()}),s&&i.r3(c,s)&&o.apply(u,a[s].que),o.apply(u,a.que),i.yi(u,(function(e){if(e)try{e.apply(null,n)}catch(e){i.H("Error executing handler:","events.js",e)}}))}(t,s.call(arguments,1))},off:function(t,n,r){var s=e[t];i.xb(s)||i.xb(s.que)&&i.xb(s[r])||r&&(i.xb(s[r])||i.xb(s[r].que))||(r?i.yi(s[r].que,(function(e){var t=s[r].que;e===n&&t.splice(t.indexOf(e),1)})):i.yi(s.que,(function(e){var t=s.que;e===n&&t.splice(t.indexOf(e),1)})),e[t]=s)},get:function(){return e},addEvents:function(e){a=a.concat(e)},getEvents:function(){var e=[];return i.yi(l,(function(t){var n=Object.assign({},t);e.push(n)})),e}};return t}();i.u2(c.emit.bind(c));var u=c.on,p=c.off,h=(c.get,c.getEvents),f=c.emit;c.addEvents},9797:(e,t,n)=>{"use strict";n.d(t,{S:()=>b});var i=n(1785),r=n(3669),s=n(835),o=n(1761),a=n(7436),d=n(3605),l=n(1476),c=n(2735),u=["architecture","bitness","model","platformVersion","fullVersionList"],p=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(e=window.navigator)||void 0===e?void 0:e.userAgentData,n=(0,a.xb)(t)?null:Object.freeze(f(1,t));return function(){return n}}(),h=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(e=window.navigator)||void 0===e?void 0:e.userAgentData,n={},i=new WeakMap;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;if(!i.has(e)){var r=Array.from(e);r.sort(),i.set(e,r.join("|"))}var s=i.get(e);if(!n.hasOwnProperty(s))try{n[s]=t.getHighEntropyValues(e).then((function(e){return(0,a.xb)(e)?null:Object.freeze(f(2,e))})).catch((function(){return null}))}catch(e){n[s]=c.Z.resolve(null)}return n[s]}}();function f(e,t){function n(e,t){var n={brand:e};return(0,a.d8)(t)&&!(0,a.jH)(t)&&(n.version=t.split(".")),n}var i={source:e};return t.platform&&(i.platform=n(t.platform,t.platformVersion)),(t.fullVersionList||t.brands)&&(i.browsers=(t.fullVersionList||t.brands).map((function(e){return n(e.brand,e.version)}))),t.hasOwnProperty("mobile")&&(i.mobile=t.mobile?1:0),["model","bitness","architecture"].forEach((function(e){var n=t[e];(0,a.d8)(n)&&(i[e]=n)})),i}var g=n(356);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var y={getRefererInfo:s.nH,findRootDomain:o.W,getWindowTop:a.Zy,getWindowSelf:a.e7,getHighEntropySUA:h,getLowEntropySUA:p},v=(0,g.A_)("FPD"),b=(0,r.z3)("sync",(function(e){return c.Z.all([e,(t=l.vc.getConfig("firstPartyData.uaHints"),Array.isArray(t)&&0!==t.length?y.getHighEntropySUA(t):c.Z.resolve(y.getLowEntropySUA())).catch((function(){return null}))]).then((function(e){var t=(0,i.Z)(e,2),n=t[0],r=t[1],s=y.getRefererInfo();!function(e){["app","site","device"].forEach((function(t){var n=l.vc.getConfig(t);null!=n&&(e[t]=(0,a.Ee)({},n,e[t]))}))}(n),Object.entries(T).forEach((function(e){var t=(0,i.Z)(e,2),r=t[0],o=(0,t[1])(n,s);o&&Object.keys(o).length>0&&(n[r]=(0,a.Ee)({},o,n[r]))})),r&&(0,d.N)(n,"device.sua",Object.assign({},r,n.device.sua)),n=v(n);var o,c=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}(g.Iq);try{for(c.s();!(o=c.n()).done;){var u=o.value;if((0,g.Qg)(n,u)){n[u]=(0,a.Ee)({},I(0,s),n[u]);break}}}catch(e){c.e(e)}finally{c.f()}return n}));var t}));function _(e){try{return e(y.getWindowTop())}catch(t){return e(y.getWindowSelf())}}function w(e){return(0,a.iG)(e,Object.keys(e))}var T={site:function(e,t){if(!g.Iq.filter((function(e){return"site"!==e})).some(g.Qg.bind(null,e)))return w({page:t.page,ref:t.ref})},device:function(){return _((function(e){return{w:e.innerWidth||e.document.documentElement.clientWidth||e.document.body.clientWidth,h:e.innerHeight||e.document.documentElement.clientHeight||e.document.body.clientHeight,dnt:(0,a.oV)()?1:0,ua:e.navigator.userAgent,language:e.navigator.language.split("-").shift()}}))},regs:function(){var e={};_((function(e){return e.navigator.globalPrivacyControl}))&&(0,d.N)(e,"ext.gpc",1);var t=l.vc.getConfig("coppa");return"boolean"==typeof t&&(e.coppa=t?1:0),e}};function I(e,t){var n,i,r,o=(0,s.hh)(t.page,{noLeadingWww:!0});return w({domain:o,keywords:null===(n=_((function(e){return e.document.querySelector("meta[name='keywords']")})))||void 0===n||null===(i=n.content)||void 0===i||null===(r=i.replace)||void 0===r?void 0:r.call(i,/\s/g,""),publisher:w({domain:y.findRootDomain(o)})})}},356:(e,t,n)=>{"use strict";n.d(t,{A_:()=>s,Iq:()=>r,Qg:()=>o});var i=n(7436),r=["dooh","app","site"];function s(e){return function(t){return r.reduce((function(n,r){return o(t,r)&&(null!=n?((0,i.yN)("".concat(e," specifies both '").concat(n,"' and '").concat(r,"'; dropping the latter.")),delete t[r]):n=r),n}),null),t}}function o(e,t){return null!=e[t]&&Object.keys(e[t]).length>0}},1761:(e,t,n)=>{"use strict";n.d(t,{W:()=>s});var i=n(7436),r=(0,n(4070).eA)(),s=(0,i.HP)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.host;if(!r.cookiesAreEnabled())return e;var t,n,s=e.split(".");if(2===s.length)return e;var o=-2,a="_rdc".concat(Date.now()),d="writeable";do{t=s.slice(o).join(".");var l=new Date((0,i.AB)()+1e4).toUTCString();r.setCookie(a,d,l,"Lax",t,void 0),r.getCookie(a,void 0)===d?(n=!1,r.setCookie(a,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,t,void 0)):(o+=-1,n=Math.abs(o)<=s.length)}while(n);return t}))},3669:(e,t,n)=>{"use strict";n.d(t,{Bx:()=>h,Cd:()=>l,IF:()=>f,bA:()=>p,v5:()=>c,z3:()=>a});var i=n(3014),r=n(1242),s=n.n(r),o=n(2735),a=s()({ready:s().SYNC|s().ASYNC|s().QUEUE}),d=(0,o.P)();a.ready=function(){var e=a.ready;return function(){try{return e.apply(a,arguments)}finally{d.resolve()}}}();var l=d.promise,c=a.get,u={};function p(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).postInstallAllowed,r=void 0!==n&&n;a("async",(function(n){n.forEach((function(e){return t.apply(void 0,(0,i.Z)(e))})),r&&(u[e]=t)}),e)([])}function h(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=u[e];if(r)return r.apply(void 0,n);c(e).before((function(e,t){t.push(n),e(t)}))}function f(e,t){return Object.defineProperties(t,Object.fromEntries(["before","after","getHooks","removeAll"].map((function(t){return[t,{get:function(){return e[t]}}]})))),t}},1301:(e,t,n)=>{"use strict";n.d(t,{B5:()=>i,Mk:()=>s,Oh:()=>o,pX:()=>r});var i="native",r="video",s="banner",o="adpod"},623:(e,t,n)=>{"use strict";n.d(t,{Fb:()=>P,JL:()=>L,Sg:()=>m,Ur:()=>R,e6:()=>O,eK:()=>M,lY:()=>B,r4:()=>D,xc:()=>y,zq:()=>V});var i=n(3014),r=n(1785),s=n(1909),o=n(5446),a=n(7436),d=n(4232),l=n(8507),c=n(251),u=n(1301);function p(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=[],y=Object.keys(c.FY).map((function(e){return c.FY[e]})),v={image:{ortb:{ver:"1.2",assets:[{required:1,id:1,img:{type:3,wmin:100,hmin:100}},{required:1,id:2,title:{len:140}},{required:1,id:3,data:{type:1}},{required:0,id:4,data:{type:2}},{required:0,id:5,img:{type:1,wmin:20,hmin:20}}]},image:{required:!0},title:{required:!0},sponsoredBy:{required:!0},clickUrl:{required:!0},body:{required:!1},icon:{required:!1}}},b=c.s$,_=c.oF,w=c.V1,T=c.zA,I=c.FY,S=z(w),k=z(b),C={img:1,js:2,1:"img",2:"js"},E={impression:1,"viewable-mrc50":2,"viewable-mrc100":3,"viewable-video50":4};function A(e){if(e&&e.type&&(!(!(t=e.type)||!(0,d.q9)(Object.keys(v),t))||((0,a.H)("".concat(t," nativeParam is not supported")),!1))&&(e=v[e.type]),!e||!e.ortb||x(e.ortb))return e;var t}function P(e){e.forEach((function(e){var t=e.nativeParams||(0,o.Z)(e,"mediaTypes.native");t&&(e.nativeParams=A(t)),e.nativeParams&&(e.nativeOrtbRequest=e.nativeParams.ortb||function(e){if(e||(0,a.PO)(e)){var t={ver:"1.2",assets:[]};for(var n in e)if(!T.includes(n))if(I.hasOwnProperty(n)){var i=e[n],r=0;i.required&&(0,a.jn)(i.required)&&(r=Number(i.required));var s={id:t.assets.length,required:r};if(n in w)s.data={type:b[w[n]]},i.len&&(s.data.len=i.len);else if("icon"===n||"image"===n){if(s.img={type:"icon"===n?_.ICON:_.MAIN},i.aspect_ratios)if((0,a.kJ)(i.aspect_ratios))if(i.aspect_ratios.length){var o=i.aspect_ratios[0],d=o.min_width,l=o.min_height;(0,a.U)(d)&&(0,a.U)(l)?(s.img.wmin=d,s.img.hmin=l):(0,a.H)("image.aspect_ratios min_width or min_height are invalid: ",d,l);var c=i.aspect_ratios.filter((function(e){return e.ratio_width&&e.ratio_height})).map((function(e){return"".concat(e.ratio_width,":").concat(e.ratio_height)}));c.length>0&&(s.img.ext={aspectratios:c})}else(0,a.H)("image.aspect_ratios was passed, but it's empty:",i.aspect_ratios);else(0,a.H)("image.aspect_ratios was passed, but it's not a an array:",i.aspect_ratios);i.sizes&&(2===i.sizes.length&&(0,a.U)(i.sizes[0])&&(0,a.U)(i.sizes[1])?(s.img.w=i.sizes[0],s.img.h=i.sizes[1],delete s.img.hmin,delete s.img.wmin):(0,a.H)("image.sizes was passed, but its value is not an array of integers:",i.sizes))}else"title"===n?s.title={len:i.len||140}:"ext"===n&&(s.ext=i,delete s.required);t.assets.push(s)}else(0,a.H)("Unrecognized native asset code: ".concat(n,". Asset will be ignored."));return t}(0,a.H)("Native assets object is empty or not an object: ",e)}(e.nativeParams))}))}function x(e){var t=e.assets;if(!Array.isArray(t)||0===t.length)return(0,a.H)("assets in mediaTypes.native.ortb is not an array, or it's empty. Assets: ",t),!1;var n=t.map((function(e){return e.id}));return t.length!==new Set(n).size||n.some((function(e){return e!==parseInt(e,10)}))?((0,a.H)("each asset object must have 'id' property, it must be unique and it must be an integer"),!1):e.hasOwnProperty("eventtrackers")&&!Array.isArray(e.eventtrackers)?((0,a.H)("ortb.eventtrackers is not an array. Eventtrackers: ",e.eventtrackers),!1):t.every((function(e){return function(e){if(!(0,a.PO)(e))return(0,a.H)("asset must be an object. Provided asset: ",e),!1;if(e.img){if(!(0,a.hj)(e.img.w)&&!(0,a.hj)(e.img.wmin))return(0,a.H)("for img asset there must be 'w' or 'wmin' property"),!1;if(!(0,a.hj)(e.img.h)&&!(0,a.hj)(e.img.hmin))return(0,a.H)("for img asset there must be 'h' or 'hmin' property"),!1}else if(e.title){if(!(0,a.hj)(e.title.len))return(0,a.H)("for title asset there must be 'len' property defined"),!1}else if(e.data){if(!(0,a.hj)(e.data.type))return(0,a.H)("for data asset 'type' property must be a number"),!1}else if(e.video&&!(Array.isArray(e.video.mimes)&&Array.isArray(e.video.protocols)&&(0,a.hj)(e.video.minduration)&&(0,a.hj)(e.video.maxduration)))return(0,a.H)("video asset is not properly configured"),!1;return!0}(e)}))}function D(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,i=(void 0===n?l.K.index:n).getAdUnit(e);if(!i)return!1;var r=i.nativeOrtbRequest;return function(e,t){if(!(0,o.Z)(e,"link.url"))return(0,a.H)("native response doesn't have 'link' property. Ortb response: ",e),!1;var n=t.assets.filter((function(e){return 1===e.required})).map((function(e){return e.id})),i=e.assets.map((function(e){return e.id})),r=n.every((function(e){return(0,d.q9)(i,e)}));return r||(0,a.H)("didn't receive a bid with all required assets. Required ids: ".concat(n,", but received ids in response: ").concat(i)),r}((null===(t=e.native)||void 0===t?void 0:t.ortb)||F(e.native,r),r)}function O(e,t){var n=t.native.ortb||q(t.native);return"click"===e.action?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).fetchURL,i=void 0===n?a.hq:n;if(t){var r,s=(e.assets||[]).filter((function(e){return e.link})).reduce((function(e,t){return e[t.id]=t.link,e}),{}),o=(null===(r=e.link)||void 0===r?void 0:r.clicktrackers)||[],d=s[t],l=o;d&&(l=d.clicktrackers||[]),l.forEach((function(e){return i(e)}))}else{var c;((null===(c=e.link)||void 0===c?void 0:c.clicktrackers)||[]).forEach((function(e){return i(e)}))}}(n,null==e?void 0:e.assetId):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.runMarkup,i=void 0===n?function(e){return(0,a.$8)(e)}:n,r=t.fetchURL,s=void 0===r?a.hq:r,o=(e.eventtrackers||[]).filter((function(e){return e.event===E.impression})).reduce((function(e,t){return C.hasOwnProperty(t.method)&&e[C[t.method]].push(t.url),e}),{img:[],js:[]}),d=o.img,l=o.js;e.imptrackers&&(d=d.concat(e.imptrackers)),d.forEach((function(e){return s(e)})),l=l.map((function(e){return'<script async src="'.concat(e,'"><\/script>')})),e.jstracker&&(l=l.concat([e.jstracker])),l.length&&i(l.join("\n"))}(n),e.action}function R(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,n=void 0===t?l.K.index:t,i={},r=n.getAdUnit(e);(0,o.Z)(r,"nativeParams.rendererUrl")?e.native.rendererUrl=U(r.nativeParams.rendererUrl):(0,o.Z)(r,"nativeParams.adTemplate")&&(e.native.adTemplate=U(r.nativeParams.adTemplate));var s=!1!==(0,o.Z)(r,"nativeParams.sendTargetingKeys"),a=function(e){var t={};return(0,o.Z)(e,"nativeParams.ext")&&Object.keys(e.nativeParams.ext).forEach((function(e){t[e]="hb_native_".concat(e)})),g(g({},c.FY),t)}(r),d=g(g({},e.native),e.native.ext);return delete d.ext,Object.keys(d).forEach((function(t){var n=a[t],d=U(e.native[t])||U((0,o.Z)(e,"native.ext.".concat(t)));if("adTemplate"!==t&&n&&d){var l=(0,o.Z)(r,"nativeParams.".concat(t,".sendId"));"boolean"!=typeof l&&(l=(0,o.Z)(r,"nativeParams.ext.".concat(t,".sendId"))),l&&(d="".concat(n,":").concat(e.adId));var c=(0,o.Z)(r,"nativeParams.".concat(t,".sendTargetingKeys"));"boolean"!=typeof c&&(c=(0,o.Z)(r,"nativeParams.ext.".concat(t,".sendTargetingKeys"))),("boolean"==typeof c?c:s)&&(i[n]=d)}})),i}function N(e,t,n){var i,r,s=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).index,o=void 0===s?l.K.index:s,a={message:"assetResponse",adId:e.adId},d=o.getAdUnit(t),u=t.native;return t.native.ortb?a.ortb=t.native.ortb:null!==(i=d.mediaTypes)&&void 0!==i&&null!==(r=i.native)&&void 0!==r&&r.ortb&&(a.ortb=F(t.native,d.nativeOrtbRequest)),a.assets=[],(null==n?Object.keys(u):n).forEach((function(e){if("adTemplate"===e&&u[e])a.adTemplate=U(u[e]);else if("rendererUrl"===e&&u[e])a.rendererUrl=U(u[e]);else if("ext"===e)Object.keys(u[e]).forEach((function(t){if(u[e][t]){var n=U(u[e][t]);a.assets.push({key:t,value:n})}}));else if(u[e]&&c.FY.hasOwnProperty(e)){var t=U(u[e]);a.assets.push({key:e,value:t})}})),a}function M(e,t){var n=e.assets.map((function(e){return(0,a.V9)(c.FY,e)}));return N(e,t,n)}function L(e,t){return N(e,t,null)}function U(e){return(null==e?void 0:e.url)||e}function j(e){if(x(e)){var t,n={},i=p(e.assets);try{var r=function(){var e=t.value;if(e.title){var i={required:!!e.required&&Boolean(e.required),len:e.title.len};n.title=i}else if(e.img){var r={required:!!e.required&&Boolean(e.required)};e.img.w&&e.img.h?r.sizes=[e.img.w,e.img.h]:e.img.wmin&&e.img.hmin&&(r.aspect_ratios={min_width:e.img.wmin,min_height:e.img.hmin,ratio_width:e.img.wmin,ratio_height:e.img.hmin}),e.img.type===_.MAIN?n.image=r:n.icon=r}else if(e.data){var s=Object.keys(b).find((function(t){return b[t]===e.data.type})),o=Object.keys(w).find((function(e){return w[e]===s}));n[o]={required:!!e.required&&Boolean(e.required)},e.data.len&&(n[o].len=e.data.len)}};for(i.s();!(t=i.n()).done;)r()}catch(e){i.e(e)}finally{i.f()}return n}}function B(e){if(!e||!(0,a.kJ)(e))return e;if(!e.some((function(e){var t;return null===(t=((null==e?void 0:e.mediaTypes)||{})[u.B5])||void 0===t?void 0:t.ortb})))return e;var t,n=(0,a.I8)(e),i=p(n);try{for(i.s();!(t=i.n()).done;){var r=t.value;r.mediaTypes&&r.mediaTypes[u.B5]&&r.mediaTypes[u.B5].ortb&&(r.mediaTypes[u.B5]=Object.assign((0,a.ei)(r.mediaTypes[u.B5],T),j(r.mediaTypes[u.B5].ortb)),r.nativeParams=A(r.mediaTypes[u.B5]))}}catch(e){i.e(e)}finally{i.f()}return n}function q(e){var t={link:{},eventtrackers:[]};return Object.entries(e).forEach((function(e){var n=(0,r.Z)(e,2),i=n[0],s=n[1];switch(i){case"clickUrl":t.link.url=s;break;case"clickTrackers":t.link.clicktrackers=Array.isArray(s)?s:[s];break;case"impressionTrackers":(Array.isArray(s)?s:[s]).forEach((function(e){t.eventtrackers.push({event:E.impression,method:C.img,url:e})}));break;case"javascriptTrackers":t.jstracker=Array.isArray(s)?s.join(""):s}})),t}function F(e,t){var n=g(g({},q(e)),{},{assets:[]});function i(e,i){var r=t.assets.find(e);null!=r&&(i(r=(0,a.I8)(r)),n.assets.push(r))}return Object.keys(e).filter((function(t){return!!e[t]})).forEach((function(t){var n=U(e[t]);switch(t){case"title":i((function(e){return null!=e.title}),(function(e){e.title={text:n}}));break;case"image":case"icon":var r="image"===t?_.MAIN:_.ICON;i((function(e){return null!=e.img&&e.img.type===r}),(function(e){e.img={url:n}}));break;default:t in w&&i((function(e){return null!=e.data&&e.data.type===b[w[t]]}),(function(e){e.data={value:n}}))}})),n}function V(e,t){var n={},r=(null==t?void 0:t.assets)||[];n.clickUrl=e.link.url,n.privacyLink=e.privacy;var s,o=p((null==e?void 0:e.assets)||[]);try{var a=function(){var e=s.value,t=r.find((function(t){return e.id===t.id}));e.title?n.title=e.title.text:e.img?n[t.img.type===_.MAIN?"image":"icon"]={url:e.img.url,width:e.img.w,height:e.img.h}:e.data&&(n[S[k[t.data.type]]]=e.data.value)};for(o.s();!(s=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}n.impressionTrackers=[];var d,l=[];null!=t&&t.imptrackers&&(d=n.impressionTrackers).push.apply(d,(0,i.Z)(t.imptrackers));var c,u=p((null==e?void 0:e.eventtrackers)||[]);try{for(u.s();!(c=u.n()).done;){var h=c.value;h.event===E.impression&&h.method===C.img&&n.impressionTrackers.push(h.url),h.event===E.impression&&h.method===C.js&&l.push(h.url)}}catch(e){u.e(e)}finally{u.f()}return l=l.map((function(e){return'<script async src="'.concat(e,'"><\/script>')})),null!=e&&e.jstracker&&l.push(e.jstracker),l.length&&(n.javascriptTrackers=l.join("\n")),n}function z(e){var t={};for(var n in e)t[e[n]]=n;return t}},4232:(e,t,n)=>{"use strict";function i(e,t,n){return e&&e.includes(t,n)||!1}function r(){return Array.from.apply(Array,arguments)}function s(e,t,n){return e&&e.find(t,n)}n.d(t,{Oc:()=>r,q9:()=>i,sE:()=>s})},831:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>be});var i=n(1785),r=n(1909),s=n(2249),o=n(7436),a=n(5446),d=n(3605),l=n(7064),c=n(623),u=n(251),p=n(8507),h=n(4232),f=n(9034),g=n(1476),m=u.FP,y=m.AD_RENDER_FAILED,v=m.AD_RENDER_SUCCEEDED;function b(e){var t=e.reason,n=e.message,i=e.bid,r=e.id,s={reason:t,message:n};i&&(s.bid=i),r&&(s.adId=r),(0,o.H)(n),l.j8(y,s)}function _(e){var t=e.doc,n=e.bid,i=e.id,r={doc:t};n&&(r.bid=n),i&&(r.adId=i),l.j8(v,r)}var w=u.FP.BID_WON,T=u.FP.STALE_RENDER,I=new WeakSet,S={"Prebid Request":function(e,t,n){if(null!=n){if(n.status!==u.UE.fe||((0,o.yN)("Ad id ".concat(n.adId," has been rendered before")),l.j8(T,n),!(0,a.Z)(g.vc.getConfig("auctionOptions"),"suppressStaleRender"))){try{!function(e,t){var n=e.adId,i=e.ad,r=e.adUrl,s=e.width,a=e.height,d=e.renderer,l=e.cpm,c=e.originalCpm;(0,f.Pd)(d)?(0,f._U)(d,e):n&&(C(e),t({message:"Prebid Response",ad:(0,o.ew)(i,c||l),adUrl:(0,o.ew)(r,c||l),adId:n,width:s,height:a}))}(n,e)}catch(e){return void b({reason:u.q_.EXCEPTION,message:e.message,id:t.adId,bid:n})}p.K.addWinningBid(n),l.j8(w,n)}}else b({reason:u.q_.CANNOT_FIND_AD,message:"Cannot find ad for cross-origin render request: '".concat(t.adId,"'"),id:t.adId})},"Prebid Event":function(e,t,n){if(null!=n)if(n.status===u.UE.fe)switch(t.event){case u.FP.AD_RENDER_FAILED:b({bid:n,id:t.adId,reason:t.info.reason,message:t.info.message});break;case u.FP.AD_RENDER_SUCCEEDED:_({doc:null,bid:n,id:t.adId});break;default:(0,o.H)("Received x-origin event request for unsupported event: '".concat(t.event,"' (adId: '").concat(t.adId,"')"))}else(0,o.yN)("Received x-origin event request without corresponding render request for ad '".concat(t.adId,"'"));else(0,o.H)("Cannot find ad '".concat(t.adId,"' for x-origin event request"))}};function k(e){var t=e.message?"message":"data",n={};try{n=JSON.parse(e[t])}catch(e){return}if(n&&n.adId&&n.message){var i=(0,h.sE)(p.K.getBidsReceived(),(function(e){return e.adId===n.adId}));S.hasOwnProperty(n.message)&&S[n.message](function(e){return null==e.origin&&0===e.ports.length?function(){var e="Cannot post message to a frame with null origin. Please update creatives to use MessageChannel, see https://github.com/prebid/Prebid.js/issues/7870";throw(0,o.H)(e),new Error(e)}:e.ports.length>0?function(t){e.ports[0].postMessage(JSON.stringify(t))}:function(t){e.source.postMessage(JSON.stringify(t),e.origin)}}(e),n,i)}}function C(e){var t=e.adId,n=e.adUnitCode,i=e.width,r=e.height;["div","iframe"].forEach((function(e){var s=function(e){var i=function(e,t){return(0,o.T9)()?function(e){var t=(0,h.sE)(window.googletag.pubads().getSlots(),(function(t){return(0,h.sE)(t.getTargetingKeys(),(function(n){return(0,h.q9)(t.getTargeting(n),e)}))}));return t?t.getSlotElementId():null}(e):(0,o.X4)()?function(e){var t=window.apntag.getTag(e);return t&&t.targetId}(t):t}(t,n),r=document.getElementById(i);return r&&r.querySelector(e)}(e+':not([style*="display: none"])');if(s){var a=s.style;a.width=i?i+"px":"100%",a.height=r+"px"}else(0,o.yN)("Unable to locate matching page element for adUnitCode ".concat(n,".  Can't resize it to ad's dimensions.  Please review setup."))}))}Object.assign(S,{"Prebid Native":function(e,t,n){if(null!=n)switch(I.has(n)||(I.add(n),p.K.addWinningBid(n),l.j8(w,n)),t.action){case"assetRequest":e((0,c.eK)(t,n));break;case"allAssetRequest":e((0,c.JL)(t,n));break;case"resizeNativeHeight":n.height=t.height,n.width=t.width,C(n);break;default:(0,c.e6)(t,n)}else(0,o.H)("Cannot find ad for x-origin event request: '".concat(t.adId,"'"))}});var E=n(4826),A=n(6692),P=n(3669),x=n(664),D=n(1458),O=n(2735),R="__pbjs_debugging__";function N(){return(0,s.R)().installedModules.includes("debugging")}function M(e){return new O.Z((function(t){(0,D.B)(e,"debugging",t)}))}var L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.load,n=void 0===t?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alreadyInstalled,n=void 0===t?N:t,i=e.script,r=void 0===i?M:i,a=null;return function(){return null==a&&(a=new O.Z((function(e,t){setTimeout((function(){if(n())e();else{var i="https://cdn.jsdelivr.net/npm/prebid.js@7.47.0/dist/debugging-standalone.js";(0,o.ji)('Debugging module not installed, loading it from "'.concat(i,'"...')),(0,s.R)()._installDebugging=!0,r(i).then((function(){(0,s.R)()._installDebugging({DEBUG_KEY:R,hook:P.z3,config:g.vc,createBid:x.m,logger:(0,o.qp)("DEBUG:")})})).then(e,t)}}))}))),a}}():t,i=e.hook,r=void 0===i?(0,P.v5)("requestBids"):i,a=null,d=!1;function l(e){for(var t=this,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return(a||O.Z.resolve()).then((function(){return e.apply(t,i)}))}function c(){r.getHooks({hook:l}).remove(),d=!1}return{enable:function(){d||(a=n(),r.before(l,99),d=!0)},disable:c,reset:function(){a=null,c()}}}();L.reset,g.vc.getConfig("debugging",(function(e){var t=e.debugging;null!=t&&t.enabled?L.enable():L.disable()}));var U=n(9306),j=n(4070),B=n(7467),q=n(2751),F=n(9797),V=(0,s.R)(),z=E.k_.triggerUserSyncs,$=u.FP,H=$.ADD_AD_UNITS,W=$.BID_WON,Z=$.REQUEST_BIDS,G=$.SET_TARGETING,X=$.STALE_RENDER,K=u.q_,J=K.PREVENT_WRITING_ON_MAIN_DOCUMENT,Y=K.NO_AD,Q=K.EXCEPTION,ee=K.CANNOT_FIND_AD,te=K.MISSING_DOC_OR_ADID,ne={bidWon:function(e){var t=p.K.getBidsRequested().map((function(e){return e.bids.map((function(e){return e.adUnitCode}))})).reduce(o.xH).filter(o.tT);if((0,o.r3)(t,e))return!0;(0,o.H)('The "'+e+'" placement is not defined.')}};function ie(e,t,n){e.defaultView&&e.defaultView.frameElement&&(e.defaultView.frameElement.width=t,e.defaultView.frameElement.height=n)}function re(e,t){var n=[];return(0,o.kJ)(e)&&(t?e.length===t:e.length>0)&&(e.every((function(e){return(0,o.HC)(e,2)}))?n=e:(0,o.HC)(e,2)&&n.push(e)),n}function se(e){var t=(0,o.I8)(e),n=t.mediaTypes.banner,i=re(n.sizes);return i.length>0?(n.sizes=i,t.sizes=i):((0,o.H)("Detected a mediaTypes.banner object without a proper sizes field.  Please ensure the sizes are listed like: [[300, 250], ...].  Removing invalid mediaTypes.banner object from request."),delete t.mediaTypes.banner),t}function oe(e){var t=(0,o.I8)(e),n=t.mediaTypes.video;if(n.playerSize){var i="number"==typeof n.playerSize[0]?2:1,r=re(n.playerSize,i);r.length>0?(2===i&&(0,o.PN)("Transforming video.playerSize from [640,480] to [[640,480]] so it's in the proper format."),n.playerSize=r,t.sizes=r):((0,o.H)("Detected incorrect configuration of mediaTypes.video.playerSize.  Please specify only one set of dimensions in a format like: [[640, 480]]. Removing invalid mediaTypes.video.playerSize property from request."),delete t.mediaTypes.video.playerSize)}return t}function ae(e){var t=(0,o.I8)(e),n=t.mediaTypes.native;if(n.ortb){var i=Object.keys(u.FY).filter((function(e){return u.FY[e].includes("hb_native_")})),r=Object.keys(n).filter((function(e){return i.includes(e)}));r.length>0&&((0,o.H)("when using native OpenRTB format, you cannot use legacy native properties. Deleting ".concat(r," keys from request.")),r.forEach((function(e){return delete t.mediaTypes.native[e]})))}return n.image&&n.image.sizes&&!Array.isArray(n.image.sizes)&&((0,o.H)("Please use an array of sizes for native.image.sizes field.  Removing invalid mediaTypes.native.image.sizes property from request."),delete t.mediaTypes.native.image.sizes),n.image&&n.image.aspect_ratios&&!Array.isArray(n.image.aspect_ratios)&&((0,o.H)("Please use an array of sizes for native.image.aspect_ratios field.  Removing invalid mediaTypes.native.image.aspect_ratios property from request."),delete t.mediaTypes.native.image.aspect_ratios),n.icon&&n.icon.sizes&&!Array.isArray(n.icon.sizes)&&((0,o.H)("Please use an array of sizes for native.icon.sizes field.  Removing invalid mediaTypes.native.icon.sizes property from request."),delete t.mediaTypes.native.icon.sizes),t}function de(e,t){var n=(0,a.Z)(e,"mediaTypes.".concat(t,".pos"));if(!(0,o.hj)(n)||isNaN(n)||!isFinite(n)){var i="Value of property 'pos' on ad unit ".concat(e.code," should be of type: Number");(0,o.yN)(i),l.j8(u.FP.AUCTION_DEBUG,{type:"WARNING",arguments:i}),delete e.mediaTypes[t].pos}return e}function le(e){var t=function(t){return"adUnit.code '".concat(e.code,"' ").concat(t)},n=e.mediaTypes,i=e.bids;return null==i||(0,o.kJ)(i)?null==i&&null==e.ortb2Imp?((0,o.H)(t("has no 'adUnit.bids' and no 'adUnit.ortb2Imp'. Removing adUnit from auction")),null):n&&0!==Object.keys(n).length?(null==e.ortb2Imp||null!=i&&0!==i.length||(e.bids=[{bidder:null}],(0,o.ji)(t("defines 'adUnit.ortb2Imp' with no 'adUnit.bids'; it will be seen only by S2S adapters"))),e):((0,o.H)(t("does not define a 'mediaTypes' object.  This is a required field for the auction, so this adUnit has been removed.")),null):((0,o.H)(t("defines 'adUnit.bids' that is not an array. Removing adUnit from auction")),null)}!function(){var e=null;try{e=window.sessionStorage}catch(e){}if(null!==e){var t=L,n=null;try{n=e.getItem(R)}catch(e){}null!==n&&t.enable()}}(),V.bidderSettings=V.bidderSettings||{},V.libLoaded=!0,V.version="v7.47.0",(0,o.PN)("Prebid.js v7.47.0 loaded"),V.installedModules=V.installedModules||[],V.adUnits=V.adUnits||[],V.triggerUserSyncs=z;var ce={validateAdUnit:le,validateBannerMediaType:se,validateSizes:re};Object.assign(ce,{validateNativeMediaType:ae}),Object.assign(ce,{validateVideoMediaType:oe});var ue,pe=(0,P.z3)("sync",(function(e){var t=[];return e.forEach((function(e){if(null!=(e=le(e))){var n,i,r,s=e.mediaTypes;s.banner&&(n=se(e),s.banner.hasOwnProperty("pos")&&(n=de(n,"banner"))),s.video&&(i=oe(n||e),s.video.hasOwnProperty("pos")&&(i=de(i,"video"))),s.native&&(r=ae(i||n||e));var o=Object.assign({},n,i,r);t.push(o)}})),t}),"checkAdUnitSetup");function he(e){var t=p.K[e]().filter(o.ak.call(o.IK,this,p.K.getAdUnitCodes())),n=p.K.getLastAuctionId();return t.map((function(e){return e.adUnitCode})).filter(o.tT).map((function(e){return t.filter((function(t){return t.auctionId===n&&t.adUnitCode===e}))})).filter((function(e){return e&&e[0]&&e[0].adUnitCode})).map((function(e){return(0,r.Z)({},e[0].adUnitCode,{bids:e})})).reduce((function(e,t){return Object.assign(e,t)}),{})}function fe(e,t,n){var i=t.querySelector(n);e.parentNode&&e.parentNode===i||(0,o.jC)(e,t,n)}V.getAdserverTargetingForAdUnitCodeStr=function(e){if((0,o.PN)("Invoking pbjs.getAdserverTargetingForAdUnitCodeStr",arguments),e){var t=V.getAdserverTargetingForAdUnitCode(e);return(0,o.Ob)(t)}(0,o.ji)("Need to call getAdserverTargetingForAdUnitCodeStr with adunitCode")},V.getHighestUnusedBidResponseForAdUnitCode=function(e){if(e){var t=p.K.getAllBidsForAdUnitCode(e).filter(A.TL);return t.length?t.reduce(o.ZH):{}}(0,o.ji)("Need to call getHighestUnusedBidResponseForAdUnitCode with adunitCode")},V.getAdserverTargetingForAdUnitCode=function(e){return V.getAdserverTargeting(e)[e]},V.getAdserverTargeting=function(e){return(0,o.PN)("Invoking pbjs.getAdserverTargeting",arguments),A.q0.getAllTargeting(e)},V.getConsentMetadata=function(){return(0,o.PN)("Invoking pbjs.getConsentMetadata"),{gdpr:B.rp.getConsentMeta(),usp:B.nX.getConsentMeta(),gpp:B.TJ.getConsentMeta(),coppa:!!g.vc.getConfig("coppa")}},V.getNoBids=function(){return(0,o.PN)("Invoking pbjs.getNoBids",arguments),he("getNoBids")},V.getNoBidsForAdUnitCode=function(e){return{bids:p.K.getNoBids().filter((function(t){return t.adUnitCode===e}))}},V.getBidResponses=function(){return(0,o.PN)("Invoking pbjs.getBidResponses",arguments),he("getBidsReceived")},V.getBidResponsesForAdUnitCode=function(e){return{bids:p.K.getBidsReceived().filter((function(t){return t.adUnitCode===e}))}},V.setTargetingForGPTAsync=function(e,t){if((0,o.PN)("Invoking pbjs.setTargetingForGPTAsync",arguments),(0,o.T9)()){var n=A.q0.getAllTargeting(e);A.q0.resetPresetTargeting(e,t),A.q0.setTargetingForGPT(n,t),Object.keys(n).forEach((function(e){Object.keys(n[e]).forEach((function(t){"hb_adid"===t&&p.K.setStatusForBids(n[e][t],u.UE.CK)}))})),l.j8(G,n)}else(0,o.H)("window.googletag is not defined on the page")},V.setTargetingForAst=function(e){(0,o.PN)("Invoking pbjs.setTargetingForAn",arguments),A.q0.isApntagDefined()?(A.q0.setTargetingForAst(e),l.j8(G,A.q0.getAllTargeting())):(0,o.H)("window.apntag is not defined on the page")},V.renderAd=(0,P.z3)("async",(function(e,t,n){if((0,o.PN)("Invoking pbjs.renderAd",arguments),(0,o.ji)("Calling renderAd with adId :"+t),t)try{var i=p.K.findBidByAdId(t);if(!i){var r="Error trying to write ad. Cannot find ad by given id : ".concat(t);return void b({reason:ee,message:r,id:t})}if(i.status===u.UE.fe&&((0,o.yN)("Ad id ".concat(i.adId," has been rendered before")),l.j8(X,i),(0,a.Z)(g.vc.getConfig("auctionOptions"),"suppressStaleRender")))return;if(i.ad=(0,o.ew)(i.ad,i.originalCpm||i.cpm),i.adUrl=(0,o.ew)(i.adUrl,i.originalCpm||i.cpm),n&&n.clickThrough){var s=n.clickThrough;i.ad=(0,o.x_)(i.ad,s),i.adUrl=(0,o.x_)(i.adUrl,s)}p.K.addWinningBid(i),l.j8(W,i);var d=i.height,c=i.width,h=i.ad,m=i.mediaType,y=i.adUrl,v=i.renderer,w=i.adUnitCode,T=V.adUnits.filter((function(e){return e.code===w})),I=V.videoModule;if(T.video&&I)return void I.renderBid(T.video.divId,i);if(!e){var S="Error trying to write ad Id :".concat(t," to the page. Missing document");return void b({reason:te,message:S,id:t})}var k=document.createComment("Creative ".concat(i.creativeId," served by ").concat(i.bidder," Prebid.js Header Bidding"));if((0,o.jC)(k,e,"html"),(0,f.Pd)(v))(0,f._U)(v,i,e),fe(k,e,"html"),_({doc:e,bid:i,id:t});else if(e===document&&!(0,o.yL)()||"video"===m){var C="Error trying to write ad. Ad render call ad id ".concat(t," was prevented from writing to the main document.");b({reason:J,message:C,bid:i,id:t})}else if(h)e.write(h),e.close(),ie(e,c,d),fe(k,e,"html"),(0,o.R_)(i),_({doc:e,bid:i,id:t});else if(y){var E=(0,o.$u)();E.height=d,E.width=c,E.style.display="inline",E.style.overflow="hidden",E.src=y,(0,o.jC)(E,e,"body"),ie(e,c,d),fe(k,e,"html"),(0,o.R_)(i),_({doc:e,bid:i,id:t})}else{var A="Error trying to write ad. No ad for bid response id: ".concat(t);b({reason:Y,message:A,bid:i,id:t})}}catch(e){var P="Error trying to write ad Id :".concat(t," to the page:").concat(e.message);b({reason:Q,message:P,id:t})}else{var x="Error trying to write ad Id :".concat(t," to the page. Missing adId");b({reason:te,message:x,id:t})}})),V.removeAdUnit=function(e){(0,o.PN)("Invoking pbjs.removeAdUnit",arguments),e?((0,o.kJ)(e)?e:[e]).forEach((function(e){for(var t=V.adUnits.length-1;t>=0;t--)V.adUnits[t].code===e&&V.adUnits.splice(t,1)})):V.adUnits=[]},V.requestBids=(ue=(0,P.z3)("async",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bidsBackHandler,n=e.timeout,r=e.adUnits,s=e.adUnitCodes,a=e.labels,d=e.auctionId,c=e.ttlBuffer,u=e.ortb2,p=e.metrics,f=e.defer;l.j8(Z);var m=n||g.vc.getConfig("bidderTimeout");(0,o.PN)("Invoking pbjs.requestBids",arguments),s&&s.length?r=r.filter((function(e){return(0,h.q9)(s,e.code)})):s=r&&r.map((function(e){return e.code}));var y={global:(0,o.Ee)({},g.vc.getAnyConfig("ortb2")||{},u||{}),bidder:Object.fromEntries(Object.entries(g.vc.getBidderConfig()).map((function(e){var t=(0,i.Z)(e,2);return[t[0],t[1].ortb2]})).filter((function(e){var t=(0,i.Z)(e,2);return t[0],null!=t[1]})))};return(0,F.S)(O.Z.resolve(y.global)).then((function(e){return y.global=e,ge({bidsBackHandler:t,timeout:m,adUnits:r,adUnitCodes:s,labels:a,auctionId:d,ttlBuffer:c,ortb2Fragments:y,metrics:p,defer:f})}))}),"requestBids"),(0,P.IF)(ue,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.adUnits||V.adUnits;return e.adUnits=(0,o.kJ)(t)?t.slice():[t],e.metrics=(0,q.V6)(),e.metrics.checkpoint("requestBids"),e.defer=(0,O.P)({promiseFactory:function(e){return new Promise(e)}}),ue.call(this,e),e.defer.promise})));var ge=(0,P.z3)("async",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bidsBackHandler,n=e.timeout,i=e.adUnits,r=e.ttlBuffer,s=e.adUnitCodes,a=e.labels,l=e.auctionId,c=e.ortb2Fragments,u=e.metrics,f=e.defer,m=(0,B.uV)(g.vc.getConfig("s2sConfig")||[]);function y(e,n,i){if("function"==typeof t)try{t(e,n,i)}catch(e){(0,o.H)("Error executing bidsBackHandler",null,e)}f.resolve({bids:e,timedOut:n,auctionId:i})}if((i=(0,q.Bf)(u).measureTime("requestBids.validate",(function(){return pe(i)}))).forEach((function(e){var t,n,i=Object.keys(e.mediaTypes||{banner:"banner"}),s=e.bids.map((function(e){return e.bidder})),a=B.ZP.bidderRegistry,l=s.filter((function(e){return!m.has(e)})),c=(null===(t=e.ortb2Imp)||void 0===t||null===(n=t.ext)||void 0===n?void 0:n.tid)||(0,o.DO)();e.transactionId=c,null==r||e.hasOwnProperty("ttlBuffer")||(e.ttlBuffer=r),(0,d.N)(e,"ortb2Imp.ext.tid",c),l.forEach((function(t){var n=a[t],r=n&&n.getSpec&&n.getSpec(),s=r&&r.supportedMediaTypes||["banner"];i.some((function(e){return(0,h.q9)(s,e)}))?U.f.incrementBidderRequestsCounter(e.code,t):((0,o.yN)((0,o.or)(e,t)),e.bids=e.bids.filter((function(e){return e.bidder!==t})))})),U.f.incrementRequestsCounter(e.code)})),i&&0!==i.length){var v=p.K.createAuction({adUnits:i,adUnitCodes:s,callback:y,cbTimeout:n,labels:a,auctionId:l,ortb2Fragments:c,metrics:u}),b=i.length;b>15&&(0,o.PN)("Current auction ".concat(v.getAuctionId()," contains ").concat(b," adUnits."),i),s.forEach((function(e){return A.q0.setLatestAuctionForAdUnit(e,v.getAuctionId())})),v.callBids()}else(0,o.ji)("No adUnits configured. No bids requested."),y()}),"startAuction");V.requestBids.before((function(e,t){function n(e){for(var t;t=e.shift();)t()}n(j.Ld),n(me),e.call(this,t)}),49),V.addAdUnits=function(e){(0,o.PN)("Invoking pbjs.addAdUnits",arguments),V.adUnits.push.apply(V.adUnits,(0,o.kJ)(e)?e:[e]),l.j8(H)},V.onEvent=function(e,t,n){(0,o.PN)("Invoking pbjs.onEvent",arguments),(0,o.LQ)(t)?!n||ne[e].call(null,n)?l.on(e,t,n):(0,o.H)('The id provided is not valid for event "'+e+'" and no handler was set.'):(0,o.H)('The event handler provided is not a function and was not set on event "'+e+'".')},V.offEvent=function(e,t,n){(0,o.PN)("Invoking pbjs.offEvent",arguments),n&&!ne[e].call(null,n)||l.S1(e,t,n)},V.getEvents=function(){return(0,o.PN)("Invoking pbjs.getEvents"),l.vw()},V.registerBidAdapter=function(e,t){(0,o.PN)("Invoking pbjs.registerBidAdapter",arguments);try{B.ZP.registerBidAdapter(e(),t)}catch(e){(0,o.H)("Error registering bidder adapter : "+e.message)}},V.registerAnalyticsAdapter=function(e){(0,o.PN)("Invoking pbjs.registerAnalyticsAdapter",arguments);try{B.ZP.registerAnalyticsAdapter(e)}catch(e){(0,o.H)("Error registering analytics adapter : "+e.message)}},V.createBid=function(e){return(0,o.PN)("Invoking pbjs.createBid",arguments),(0,x.m)(e)};var me=[],ye=(0,P.z3)("async",(function(e){e&&!(0,o.xb)(e)?((0,o.PN)("Invoking pbjs.enableAnalytics for: ",e),B.ZP.enableAnalytics(e)):(0,o.H)("pbjs.enableAnalytics should be called with option {}")}),"enableAnalyticsCb");function ve(e){e.forEach((function(e){if(void 0===e.called)try{e.call(),e.called=!0}catch(e){(0,o.H)("Error processing command :","prebid.js",e)}}))}V.enableAnalytics=function(e){me.push(ye.bind(this,e))},V.aliasBidder=function(e,t,n){(0,o.PN)("Invoking pbjs.aliasBidder",arguments),e&&t?B.ZP.aliasBidAdapter(e,t,n):(0,o.H)("bidderCode and alias must be passed as arguments","pbjs.aliasBidder")},V.aliasRegistry=B.ZP.aliasRegistry,g.vc.getConfig("aliasRegistry",(function(e){"private"===e.aliasRegistry&&delete V.aliasRegistry})),V.getAllWinningBids=function(){return p.K.getAllWinningBids()},V.getAllPrebidWinningBids=function(){return p.K.getBidsReceived().filter((function(e){return e.status===u.UE.CK}))},V.getHighestCpmBids=function(e){return A.q0.getWinningBids(e)},V.markWinningBidAsUsed=function(e){var t=[];e.adUnitCode&&e.adId?t=p.K.getBidsReceived().filter((function(t){return t.adId===e.adId&&t.adUnitCode===e.adUnitCode})):e.adUnitCode?t=A.q0.getWinningBids(e.adUnitCode):e.adId?t=p.K.getBidsReceived().filter((function(t){return t.adId===e.adId})):(0,o.yN)("Improper use of markWinningBidAsUsed. It needs an adUnitCode or an adId to function."),t.length>0&&(t[0].status=u.UE.fe)},V.getConfig=g.vc.getAnyConfig,V.readConfig=g.vc.readAnyConfig,V.mergeConfig=g.vc.mergeConfig,V.mergeBidderConfig=g.vc.mergeBidderConfig,V.setConfig=g.vc.setConfig,V.setBidderConfig=g.vc.setBidderConfig,V.que.push((function(){window.addEventListener("message",k,!1)})),V.cmd.push=function(e){if("function"==typeof e)try{e.call()}catch(e){(0,o.H)("Error processing command :",e.message,e.stack)}else(0,o.H)("Commands written into pbjs.cmd.push must be wrapped in a function")},V.que.push=V.cmd.push,V.processQueue=function(){P.z3.ready(),ve(V.que),ve(V.cmd)};const be=V},2249:(e,t,n)=>{"use strict";n.d(t,{R:()=>s,z:()=>o});var i=window,r=i.pbjs=i.pbjs||{};function s(){return r}function o(e){r.installedModules.push(e)}r.cmd=r.cmd||[],r.que=r.que||[],i===window&&(i._pbjsGlobals=i._pbjsGlobals||[],i._pbjsGlobals.push("pbjs"))},835:(e,t,n)=>{"use strict";n.d(t,{hh:()=>o,nH:()=>l});var i=n(1476),r=n(7436);function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if(!e)return e;if(/\w+:\/\//.exec(e))return e;var n=t.location.protocol;try{n=t.top.location.protocol}catch(e){}return/^\/\//.exec(e)?n+e:"".concat(n,"//").concat(e)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.noLeadingWww,i=void 0!==n&&n,r=t.noPort,o=void 0!==r&&r;try{e=new URL(s(e))}catch(e){return}return e=o?e.hostname:e.host,i&&e.startsWith("www.")&&(e=e.substring(4)),e}function a(e){try{var t=e.querySelector("link[rel='canonical']");if(null!==t)return t.href}catch(e){}return null}var d,l=function(e){var t,n,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return r.top!==r?e:function(){var s=a(r.document),o=r.location.href;return t===s&&o===n||(t=s,n=o,i=e()),i}}((d=window,function(){var e,t,n,l,c=[],u=function(e){try{if(!e.location.ancestorOrigins)return;return e.location.ancestorOrigins}catch(e){}}(d),p=i.vc.getConfig("maxNestedIframes"),h=!1,f=0,g=!1,m=!1,y=!1;do{var v=e,b=m,_=void 0,w=!1,T=null;m=!1,e=e?e.parent:d;try{_=e.location.href||null}catch(e){w=!0}if(w)if(b){var I=v.context;try{t=T=I.sourceUrl,y=!0,g=!0,e===d.top&&(h=!0),I.canonicalUrl&&(n=I.canonicalUrl)}catch(e){}}else{(0,r.yN)("Trying to access cross domain iframe. Continuing without referrer and location");try{var S=v.document.referrer;S&&(T=S,e===d.top&&(h=!0))}catch(e){}!T&&u&&u[f-1]&&(T=u[f-1],e===d.top&&(y=!0)),T&&!g&&(t=T)}else{if(_&&(t=T=_,g=!1,e===d.top)){h=!0;var k=a(e.document);k&&(n=k)}e.context&&e.context.sourceUrl&&(m=!0)}c.push(T),f++}while(e!==d.top&&f<p);c.reverse();try{l=d.top.document.referrer}catch(e){}var C=h||y?t:null,E=i.vc.getConfig("pageUrl")||n||null,A=i.vc.getConfig("pageUrl")||C||s(E,d);return C&&C.indexOf("?")>-1&&-1===A.indexOf("?")&&(A="".concat(A).concat(C.substring(C.indexOf("?")))),{reachedTop:h,isAmp:g,numIframes:f-1,stack:c,topmostLocation:t||null,location:C,canonicalUrl:E,page:A,domain:o(A)||null,ref:l||null,legacy:{reachedTop:h,isAmp:g,numIframes:f-1,stack:c,referer:t||null,canonicalUrl:E}}}))},4070:(e,t,n)=>{"use strict";n.d(t,{Dp:()=>a,Ld:()=>l,c$:()=>d,df:()=>p,eA:()=>h});var i=n(3669),r=n(7436),s=n(8476),o=n(7539),a="html5",d="cookie",l=[];function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.moduleName,n=e.moduleType,i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).bidderSettings,c=void 0===i?s.S:i;function p(e,i){var s;return function(e){if(n!==o.UL)return!0;var i=c.get(t,"storageAllowed");return i&&!0!==i?Array.isArray(i)?i.some((function(t){return t===e})):i===e:!!i}(i)?(u(n,t,{hasEnforcementHook:!1},(function(t){if(t&&t.hasEnforcementHook)s=e(t);else{var n={hasEnforcementHook:!1,valid:(0,r.wn)()};s=e(n)}})),s):((0,r.PN)("bidderSettings denied access to device storage for bidder '".concat(t,"'")),e({valid:!1}))}function h(e,t,n){if(!n||"function"!=typeof n)return p(e,t);l.push((function(){var i=p(e,t);n(i)}))}var f=function(e){return h((function(e){if(e&&e.valid)try{return!!window.localStorage}catch(e){(0,r.H)("Local storage api disabled")}return!1}),a,e)};return{setCookie:function(e,t,n,i,r,s){return h((function(s){if(s&&s.valid){var o=r&&""!==r?" ;domain=".concat(encodeURIComponent(r)):"",a=n&&""!==n?" ;expires=".concat(n):"",d=null!=i&&"none"==i.toLowerCase()?"; Secure":"";document.cookie="".concat(e,"=").concat(encodeURIComponent(t)).concat(a,"; path=/").concat(o).concat(i?"; SameSite=".concat(i):"").concat(d)}}),d,s)},getCookie:function(e,t){return h((function(t){if(t&&t.valid){var n=window.document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]*)\\s*(;|$)");return n?decodeURIComponent(n[2]):null}return null}),d,t)},localStorageIsEnabled:function(e){return h((function(e){if(e&&e.valid)try{return localStorage.setItem("prebid.cookieTest","1"),"1"===localStorage.getItem("prebid.cookieTest")}catch(e){}finally{try{localStorage.removeItem("prebid.cookieTest")}catch(e){}}return!1}),a,e)},cookiesAreEnabled:function(e){return h((function(e){return!(!e||!e.valid)&&(0,r.IG)()}),d,e)},setDataInLocalStorage:function(e,t,n){return h((function(n){n&&n.valid&&f()&&window.localStorage.setItem(e,t)}),a,n)},getDataFromLocalStorage:function(e,t){return h((function(t){return t&&t.valid&&f()?window.localStorage.getItem(e):null}),a,t)},removeDataFromLocalStorage:function(e,t){return h((function(t){t&&t.valid&&f()&&window.localStorage.removeItem(e)}),a,t)},hasLocalStorage:f,findSimilarCookies:function(e,t){return h((function(t){if(t&&t.valid){var n=[];if((0,r.wn)())for(var i=document.cookie.split(";");i.length;){var s=i.pop(),o=s.indexOf("=");o=o<0?s.length:o,decodeURIComponent(s.slice(0,o).replace(/^\s+/,"")).indexOf(e)>=0&&n.push(decodeURIComponent(s.slice(o+1)))}return n}}),d,t)}}}var u=(0,i.z3)("async",(function(e,t,n,i){i(n)}),"validateStorageEnforcement");function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.moduleType,n=e.moduleName,i=e.bidderCode;function r(){throw new Error("Invalid invocation for getStorageManager: must set either bidderCode, or moduleType + moduleName")}return i?((t&&t!==o.UL||n)&&r(),t=o.UL,n=i):n&&t||r(),c({moduleType:t,moduleName:n})}function h(e){return c({moduleName:e,moduleType:o.ic})}},6692:(e,t,n)=>{"use strict";n.d(t,{TL:()=>T,q0:()=>k});var i=n(1909),r=n(3014),s=n(7436),o=n(5446),a=n(1476),d=n(623),l=n(8507),c=n(1301),u=n(3669),p=n(8476),h=n(4232),f=n(251),g=[],m=1;a.vc.getConfig("ttlBuffer",(function(e){"number"==typeof e.ttlBuffer?m=e.ttlBuffer:(0,s.H)("Invalid value for ttlBuffer",e.ttlBuffer)}));var y="targetingControls.allowTargetingKeys",v="targetingControls.addTargetingKeys",b='Only one of "'.concat(y,'" or "').concat(v,'" can be set'),_=Object.keys(f.TD).map((function(e){return f.TD[e]})),w={isActualBid:function(e){return e.getStatusCode()===f.Q_.Q},isBidNotExpired:function(e){return e.responseTimestamp+1e3*(e.ttl-(e.hasOwnProperty("ttlBuffer")?e.ttlBuffer:m))>(0,s.AB)()},isUnusedBid:function(e){return e&&(e.status&&!(0,h.q9)([f.UE.fe],e.status)||!e.status)}};function T(e){return!Object.values(w).some((function(t){return!t(e)}))}var I=(0,u.z3)("sync",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(arguments.length>3&&void 0!==arguments[3]&&arguments[3])){var i=[],o=a.vc.getConfig("sendBidsControl.dealPrioritization"),d=(0,s.vM)(e,"adUnitCode");return Object.keys(d).forEach((function(e){var a=[],l=(0,s.vM)(d[e],"bidderCode");Object.keys(l).forEach((function(e){return a.push(l[e].reduce(t))})),n>0?(a=o?a.sort(S(!0)):a.sort((function(e,t){return t.cpm-e.cpm})),i.push.apply(i,(0,r.Z)(a.slice(0,n)))):i.push.apply(i,(0,r.Z)(a))})),i}return e}));function S(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n){return void 0!==t.adserverTargeting.hb_deal&&void 0===n.adserverTargeting.hb_deal?-1:void 0===t.adserverTargeting.hb_deal&&void 0!==n.adserverTargeting.hb_deal?1:e?n.cpm-t.cpm:n.adserverTargeting.hb_pb-t.adserverTargeting.hb_pb}}var k=function(e){var t={},n={};function l(e,t){return e.adserverTargeting&&t&&((0,s.kJ)(t)&&(0,h.q9)(t,e.adUnitCode)||"string"==typeof t&&e.adUnitCode===t)}function u(t){return"string"==typeof t?[t]:(0,s.kJ)(t)?t:e.getAdUnitCodes()||[]}function m(){var t=e.getBidsReceived();if(a.vc.getConfig("useBidCache")){var i=a.vc.getConfig("bidCacheFilterFunction");"function"==typeof i&&(t=t.filter((function(e){return n[e.adUnitCode]===e.auctionId||!!i(e)})))}else t=t.filter((function(e){return n[e.adUnitCode]===e.auctionId}));return t=t.filter((function(e){return(0,o.Z)(e,"video.context")!==c.Oh})).filter(T),I(t,s.K$)}function w(e,n){var s=t.getWinningBids(e,n),o=k();return s=s.map((function(e){return(0,i.Z)({},e.adUnitCode,Object.keys(e.adserverTargeting).filter((function(t){return void 0===e.sendStandardTargeting||e.sendStandardTargeting||-1===o.indexOf(t)})).reduce((function(t,n){var s=[e.adserverTargeting[n]],o=(0,i.Z)({},n.substring(0,20),s);if(n===f.TD.DEAL){var a="".concat(n,"_").concat(e.bidderCode).substring(0,20),d=(0,i.Z)({},a,s);return[].concat((0,r.Z)(t),[o,d])}return[].concat((0,r.Z)(t),[o])}),[]))})),s}function k(){return e.getStandardBidderAdServerTargeting().map((function(e){return e.key})).concat(_).filter(s.tT)}function C(e,t,n,i){return Object.keys(t.adserverTargeting).filter(E()).forEach((function(n){e.length&&e.filter(function(e){return function(n){return n.adUnitCode===t.adUnitCode&&n.adserverTargeting[e]}}(n)).forEach(function(e){return function(n){(0,s.kJ)(n.adserverTargeting[e])||(n.adserverTargeting[e]=[n.adserverTargeting[e]]),n.adserverTargeting[e]=n.adserverTargeting[e].concat(t.adserverTargeting[e]).filter(s.tT),delete t.adserverTargeting[e]}}(n))})),e.push(t),e}function E(){var e=k();return e=e.concat(d.xc),function(t){return-1===e.indexOf(t)}}function A(e){return(0,i.Z)({},e.adUnitCode,Object.keys(e.adserverTargeting).filter(E()).map((function(t){return(0,i.Z)({},t.substring(0,20),[e.adserverTargeting[t]])})))}function P(e,t){return t.map((function(t){return(0,i.Z)({},"".concat(t,"_").concat(e.bidderCode).substring(0,20),[e.adserverTargeting[t]])}))}return t.setLatestAuctionForAdUnit=function(e,t){n[e]=t},t.resetPresetTargeting=function(t,n){if((0,s.T9)()){var i=u(t),r=e.getAdUnits().filter((function(e){return(0,h.q9)(i,e.code)})),o=g.reduce((function(e,t){return e[t]=null,e}),{});window.googletag.pubads().getSlots().forEach((function(e){var t=(0,s.LQ)(n)&&n(e);r.forEach((function(n){(n.code===e.getAdUnitPath()||n.code===e.getSlotElementId()||(0,s.LQ)(t)&&t(n.code))&&e.updateTargetingFromMap(o)}))}))}},t.resetPresetTargetingAST=function(e){u(e).forEach((function(e){var t=window.apntag.getTag(e);if(t&&t.keywords){var n=Object.keys(t.keywords),i={};n.forEach((function(e){(0,h.q9)(g,e.toLowerCase())||(i[e]=t.keywords[e])})),window.apntag.modifyTag(e,{keywords:i})}}))},t.getAllTargeting=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m(),r=u(t),c=w(r,n).concat(function(e,t){return t.filter((function(t){return(0,h.q9)(e,t.adUnitCode)})).map((function(e){return Object.assign({},e)})).reduce(C,[]).map(A).filter((function(e){return e}))}(r,n)).concat(a.vc.getConfig("enableSendAllBids")?function(e,t){var n=_.concat(d.xc),r=a.vc.getConfig("sendBidsControl.bidLimit"),o=I(t,s.ZH,r),c=a.vc.getConfig("targetingControls.allowSendAllBidsTargetingKeys"),u=c?c.map((function(e){return f.TD[e]})):n;return o.map((function(t){if(l(t,e))return(0,i.Z)({},t.adUnitCode,P(t,n.filter((function(e){return void 0!==t.adserverTargeting[e]&&-1!==u.indexOf(e)}))))})).filter((function(e){return e}))}(r,n):function(e,t){if(!0===a.vc.getConfig("targetingControls.alwaysIncludeDeals")){var n=_.concat(d.xc);return I(t,s.ZH).map((function(t){if(t.dealId&&l(t,e))return(0,i.Z)({},t.adUnitCode,P(t,n.filter((function(e){return void 0!==t.adserverTargeting[e]}))))})).filter((function(e){return e}))}return[]}(r,n)).concat(function(t){function n(e){return(0,o.Z)(e,f.k2.xn)}return e.getAdUnits().filter((function(e){return(0,h.q9)(t,e.code)&&n(e)})).map((function(e){return(0,i.Z)({},e.code,function(e){var t=n(e);return Object.keys(t).map((function(e){return(0,s.d8)(t[e])&&(t[e]=t[e].split(",").map((function(e){return e.trim()}))),(0,s.kJ)(t[e])||(t[e]=[t[e]]),(0,i.Z)({},e,t[e])}))}(e))}))}(r));c.map((function(e){Object.keys(e).map((function(t){e[t].map((function(e){-1===g.indexOf(Object.keys(e)[0])&&(g=Object.keys(e).concat(g))}))}))}));var p=Object.keys(Object.assign({},f.kF,f.FY)),T=a.vc.getConfig(y),k=a.vc.getConfig(v);if(null!=k&&null!=T)throw new Error(b);T=null!=k?p.concat(k):T||p,Array.isArray(T)&&T.length>0&&(c=function(e,t){var n=Object.assign({},f.TD,f.FY),i=Object.keys(n),r={};(0,s.PN)("allowTargetingKeys - allowed keys [ ".concat(t.map((function(e){return n[e]})).join(", ")," ]")),e.map((function(e){var s=Object.keys(e)[0],o=e[s].filter((function(e){var s=Object.keys(e)[0],o=0===i.filter((function(e){return 0===s.indexOf(n[e])})).length||(0,h.sE)(t,(function(e){var t=n[e];return 0===s.indexOf(t)}));return r[s]=!o,o}));e[s]=o}));var o=Object.keys(r).filter((function(e){return r[e]}));return(0,s.PN)("allowTargetingKeys - removed keys [ ".concat(o.join(", ")," ]")),e.filter((function(e){return e[Object.keys(e)[0]].length>0}))}(c,T)),c=function(e){var t=e.map((function(e){return(0,i.Z)({},Object.keys(e)[0],e[Object.keys(e)[0]].map((function(e){return(0,i.Z)({},Object.keys(e)[0],e[Object.keys(e)[0]].join(","))})).reduce((function(e,t){return Object.assign(t,e)}),{}))})).reduce((function(e,t){var n=Object.keys(t)[0];return e[n]=Object.assign({},e[n],t[n]),e}),{});return t}(c);var E=a.vc.getConfig("targetingControls.auctionKeyMaxChars");return E&&((0,s.PN)("Detected 'targetingControls.auctionKeyMaxChars' was active for this auction; set with a limit of ".concat(E," characters.  Running checks on auction keys...")),c=function(e,t){var n=(0,s.I8)(e),i=Object.keys(n).map((function(e){return{adUnitCode:e,adserverTargeting:n[e]}})).sort(S());return i.reduce((function(e,i,r,o){var a,d=(a=i.adserverTargeting,Object.keys(a).reduce((function(e,t){return e+"".concat(t,"%3d").concat(encodeURIComponent(a[t]),"%26")}),""));r+1===o.length&&(d=d.slice(0,-3));var l=i.adUnitCode,c=d.length;return c<=t?(t-=c,(0,s.PN)("AdUnit '".concat(l,"' auction keys comprised of ").concat(c," characters.  Deducted from running threshold; new limit is ").concat(t),n[l]),e[l]=n[l]):(0,s.yN)("The following keys for adUnitCode '".concat(l,"' exceeded the current limit of the 'auctionKeyMaxChars' setting.\nThe key-set size was ").concat(c,", the current allotted amount was ").concat(t,".\n"),n[l]),r+1===o.length&&0===Object.keys(e).length&&(0,s.H)("No auction targeting keys were permitted due to the setting in setConfig(targetingControls.auctionKeyMaxChars).  Please review setup and consider adjusting."),e}),{})}(c,E)),r.forEach((function(e){c[e]||(c[e]={})})),c},a.vc.getConfig("targetingControls",(function(e){null!=(0,o.Z)(e,y)&&null!=(0,o.Z)(e,v)&&(0,s.H)(b)})),t.setTargetingForGPT=function(e,t){window.googletag.pubads().getSlots().forEach((function(n){Object.keys(e).filter(t?t(n):(0,s.zV)(n)).forEach((function(t){Object.keys(e[t]).forEach((function(n){var i=e[t][n];"string"==typeof i&&-1!==i.indexOf(",")&&(i=i.split(",")),e[t][n]=i})),(0,s.ji)("Attempting to set targeting-map for slot: ".concat(n.getSlotElementId()," with targeting-map:"),e[t]),n.updateTargetingFromMap(e[t])}))}))},t.getWinningBids=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m(),n=u(e);return t.filter((function(e){return(0,h.q9)(n,e.adUnitCode)})).filter((function(e){return!0===p.S.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0})).map((function(e){return e.adUnitCode})).filter(s.tT).map((function(e){return t.filter((function(t){return t.adUnitCode===e?t:null})).reduce(s.ZH)}))},t.setTargetingForAst=function(e){var n=t.getAllTargeting(e);try{t.resetPresetTargetingAST(e)}catch(e){(0,s.H)("unable to reset targeting for AST"+e)}Object.keys(n).forEach((function(e){return Object.keys(n[e]).forEach((function(t){if((0,s.ji)("Attempting to set targeting for targetId: ".concat(e," key: ").concat(t," value: ").concat(n[e][t])),(0,s.d8)(n[e][t])||(0,s.kJ)(n[e][t])){var i={};t.search(/pt[0-9]/)<0?i[t.toUpperCase()]=n[e][t]:i[t]=n[e][t],window.apntag.setKeywords(e,i,{overrideKeyValue:!0})}}))}))},t.isApntagDefined=function(){if(window.apntag&&(0,s.LQ)(window.apntag.setKeywords))return!0},t}(l.K)},4826:(e,t,n)=>{"use strict";n.d(t,{k_:()=>l});var i=n(1785),r=n(7436),s=n(1476),o=n(4232),a=n(4070);s.vc.setDefaults({userSync:(0,r.I8)({syncEnabled:!0,filterSettings:{image:{bidders:"*",filter:"include"}},syncsPerBidder:5,syncDelay:3e3,auctionDelay:0})});var d=(0,a.eA)("usersync"),l=function(e){var t={},n={image:[],iframe:[]},a=new Set,d={},l={image:!0,iframe:!1},c=e.config;function u(){if(c.syncEnabled&&e.browserSupportsCookies){try{l.iframe&&p(n.iframe,(function(e){var t=(0,i.Z)(e,2),s=t[0],o=t[1];(0,r.ji)("Invoking iframe user sync for bidder: ".concat(s)),(0,r.Vs)(o),function(e,t){e.image=e.image.filter((function(e){return e[0]!==t}))}(n,s)})),l.image&&p(n.image,(function(e){var t=(0,i.Z)(e,2),n=t[0],s=t[1];(0,r.ji)("Invoking image pixel user sync for bidder: ".concat(n)),(0,r.hq)(s)}))}catch(e){return(0,r.H)("Error firing user syncs",e)}n={image:[],iframe:[]}}}function p(e,t){(0,r.TV)(e).forEach(t)}return s.vc.getConfig("userSync",(function(e){if(e.userSync){var t=e.userSync.filterSettings;(0,r.PO)(t)&&(t.image||t.all||(e.userSync.filterSettings.image={bidders:"*",filter:"include"}))}c=Object.assign(c,e.userSync)})),t.registerSync=function(e,i,s){return a.has(i)?(0,r.ji)('already fired syncs for "'.concat(i,'", ignoring registerSync call')):c.syncEnabled&&(0,r.kJ)(n[e])?i?0!==c.syncsPerBidder&&Number(d[i])>=c.syncsPerBidder?(0,r.yN)('Number of user syncs exceeded for "'.concat(i,'"')):t.canBidderRegisterSync(e,i)?(n[e].push([i,s]),void(d=function(e,t){return e[t]?e[t]+=1:e[t]=1,e}(d,i))):(0,r.yN)('Bidder "'.concat(i,'" not permitted to register their "').concat(e,'" userSync pixels.')):(0,r.yN)("Bidder is required for registering sync"):(0,r.yN)('User sync type "'.concat(e,'" not supported'))},t.bidderDone=a.add.bind(a),t.syncUsers=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e)return setTimeout(u,Number(e));u()},t.triggerUserSyncs=function(){c.enableOverride&&t.syncUsers()},t.canBidderRegisterSync=function(e,t){return!c.filterSettings||!function(e,t){var n=c.filterSettings;if(function(e,t){if(e.all&&e[t])return(0,r.yN)('Detected presence of the "filterSettings.all" and "filterSettings.'.concat(t,'" in userSync config.  You cannot mix "all" with "iframe/image" configs; they are mutually exclusive.')),!1;var n=e.all?e.all:e[t],i=e.all?"all":t;if(!n)return!1;var s=n.filter,o=n.bidders;return s&&"include"!==s&&"exclude"!==s?((0,r.yN)('UserSync "filterSettings.'.concat(i,".filter\" setting '").concat(s,"' is not a valid option; use either 'include' or 'exclude'.")),!1):!!("*"===o||Array.isArray(o)&&o.length>0&&o.every((function(e){return(0,r.d8)(e)&&"*"!==e})))||((0,r.yN)('Detected an invalid setup in userSync "filterSettings.'.concat(i,".bidders\"; use either '*' (to represent all bidders) or an array of bidders.")),!1)}(n,e)){l[e]=!0;var i=n.all?n.all:n[e],s="*"===i.bidders?[t]:i.bidders,a={include:function(e,t){return!(0,o.q9)(e,t)},exclude:function(e,t){return(0,o.q9)(e,t)}};return a[i.filter||"include"](s,t)}return!l[e]}(e,t)},t}(Object.defineProperties({config:s.vc.getConfig("userSync")},{browserSupportsCookies:{get:function(){return!(0,r.fr)()&&d.cookiesAreEnabled()}}}))},7436:(e,t,n)=>{"use strict";n.d(t,{$8:()=>we,$u:()=>ie,AB:()=>ze,An:()=>B,Bq:()=>dt,CS:()=>tt,D9:()=>kt,DO:()=>j,EE:()=>O,Ee:()=>_t,FS:()=>Ke,G2:()=>ot,H:()=>Q,HA:()=>me,HC:()=>ct,HP:()=>St,I8:()=>je,IG:()=>We,IK:()=>Ue,K$:()=>Ne,LQ:()=>oe,NA:()=>Ae,NI:()=>H,Ob:()=>V,PN:()=>J,PO:()=>ce,Q2:()=>vt,R_:()=>_e,Re:()=>F,S0:()=>Je,SG:()=>Ie,T9:()=>De,TV:()=>Le,U:()=>st,V9:()=>Pe,Vs:()=>Te,W$:()=>Tt,X4:()=>Oe,XV:()=>ht,Yp:()=>mt,ZH:()=>Re,Zy:()=>Z,_R:()=>wt,_d:()=>U,aE:()=>nt,ak:()=>M,bd:()=>$e,d5:()=>ft,d8:()=>ae,dj:()=>It,e7:()=>G,ei:()=>at,en:()=>yt,ew:()=>Fe,fr:()=>qe,hj:()=>le,hl:()=>ut,hq:()=>be,iG:()=>Xe,jC:()=>ye,jH:()=>he,ji:()=>K,jn:()=>ue,kJ:()=>de,ky:()=>it,oV:()=>Ye,or:()=>rt,pP:()=>xe,qp:()=>ee,r3:()=>ge,rD:()=>re,sF:()=>z,t0:()=>q,tT:()=>ke,u2:()=>A,uh:()=>lt,vM:()=>Ge,wn:()=>He,xH:()=>Ce,x_:()=>Ve,xb:()=>pe,yL:()=>Be,yN:()=>Y,yi:()=>fe,yo:()=>pt,yx:()=>Ze,zE:()=>Ee,zV:()=>et});var i,r=n(1785),s=n(3014),o=n(1909),a=n(9267),d=n(1476),l=n(1269),c=n.n(l),u=n(4232),p=n(251),h=n(2735),f=n(2249),g="Array",m="String",y="Function",v="Number",b="Object",_="Boolean",w=Object.prototype.toString,T=Boolean(window.console),I=Boolean(T&&window.console.log),S=Boolean(T&&window.console.info),k=Boolean(T&&window.console.warn),C=Boolean(T&&window.console.error),E=(0,f.R)();function A(e){i=e}function P(){null!=i&&i.apply(void 0,arguments)}var x={checkCookieSupport:We,createTrackPixelIframeHtml:function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e?((!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(e=encodeURI(e)),t&&(t='sandbox="'.concat(t,'"')),"<iframe ".concat(t,' id="').concat(U(),'"\n      frameborder="0"\n      allowtransparency="true"\n      marginheight="0" marginwidth="0"\n      width="0" hspace="0" vspace="0" height="0"\n      style="height:0px;width:0px;display:none;"\n      scrolling="no"\n      src="').concat(e,'">\n    </iframe>')):""},getWindowSelf:G,getWindowTop:Z,getWindowLocation:X,insertUserSyncIframe:Te,insertElement:ye,isFn:oe,triggerPixel:be,logError:Q,logWarn:Y,logMessage:K,logInfo:J,parseQS:gt,formatQS:mt,deepEqual:bt},D={};function O(){return D}var R,N={},M=function(e,t){return t}.bind(null,1,N)()===N?Function.prototype.bind:function(e){var t=this,n=Array.prototype.slice.call(arguments,1);return function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}},L=(R=0,function(){return++R});function U(){return L()+Math.random().toString(16).substr(2)}function j(e){return e?(e^(window&&window.crypto&&window.crypto.getRandomValues?crypto.getRandomValues(new Uint8Array(1))[0]%16:16*Math.random())>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,j)}function B(e,t){return t&&t[e]?t[e]:""}function q(e,t,n){return n?e+t+"="+encodeURIComponent(n)+"&":e}function F(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+"="+encodeURIComponent(e[n])+"&");return t.replace(/&$/,"")}function V(e){return e&&Object.getOwnPropertyNames(e).length>0?(t=e,Object.keys(t)).map((function(t){return"".concat(t,"=").concat(encodeURIComponent(Ae(e,t)))})).join("&"):"";var t}function z(e){var t,n,i=[];if("string"==typeof e){var r=e.split(","),s=/^(\d)+x(\d)+$/i;if(r)for(var o in r)n=o,((t=r).hasOwnProperty?t.hasOwnProperty(n):void 0!==t[n]&&t.constructor.prototype[n]!==t[n])&&r[o].match(s)&&i.push(r[o])}else if("object"===(0,a.Z)(e)){var d=e.length;if(d>0)if(2===d&&"number"==typeof e[0]&&"number"==typeof e[1])i.push($(e));else for(var l=0;l<d;l++)i.push($(e[l]))}return i}function $(e){if(W(e))return e[0]+"x"+e[1]}function H(e){if(W(e))return{w:e[0],h:e[1]}}function W(e){return de(e)&&2===e.length&&!isNaN(e[0])&&!isNaN(e[1])}function Z(){return window.top}function G(){return window.self}function X(){return window.location}function K(){ne()&&I&&console.log.apply(console,te(arguments,"MESSAGE:"))}function J(){ne()&&S&&console.info.apply(console,te(arguments,"INFO:"))}function Y(){ne()&&k&&console.warn.apply(console,te(arguments,"WARNING:")),P(p.FP.AUCTION_DEBUG,{type:"WARNING",arguments})}function Q(){ne()&&C&&console.error.apply(console,te(arguments,"ERROR:")),P(p.FP.AUCTION_DEBUG,{type:"ERROR",arguments})}function ee(e){function t(t){return function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];t.apply(void 0,[e].concat(i))}}return{logError:t(Q),logWarn:t(Y),logMessage:t(K),logInfo:t(J)}}function te(e,t){e=[].slice.call(e);var n=d.vc.getCurrentBidder();return t&&e.unshift(t),n&&e.unshift(i("#aaa")),e.unshift(i("#3b88c3")),e.unshift("%cPrebid"+(n?"%c".concat(n):"")),e;function i(e){return"display: inline-block; color: #fff; background: ".concat(e,"; padding: 1px 4px; border-radius: 3px;")}}function ne(){return!!d.vc.getConfig("debug")}function ie(){var e=document.createElement("iframe");return e.id=U(),e.height=0,e.width=0,e.border="0px",e.hspace="0",e.vspace="0",e.marginWidth="0",e.marginHeight="0",e.style.border="0",e.scrolling="no",e.frameBorder="0",e.src="about:blank",e.style.display="none",e}function re(e){return gt(X().search)[e]||""}function se(e,t){return w.call(e)==="[object "+t+"]"}function oe(e){return se(e,y)}function ae(e){return se(e,m)}function de(e){return se(e,g)}function le(e){return se(e,v)}function ce(e){return se(e,b)}function ue(e){return se(e,_)}function pe(e){if(!e)return!0;if(de(e)||ae(e))return!(e.length>0);for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0}function he(e){return ae(e)&&(!e||0===e.length)}function fe(e,t){if(!pe(e)){if(oe(e.forEach))return e.forEach(t,this);var n=0,i=e.length;if(i>0)for(;n<i;n++)t(e[n],n,e);else for(n in e)hasOwnProperty.call(e,n)&&t.call(this,e[n],n)}}function ge(e,t){if(pe(e))return!1;if(oe(e.indexOf))return-1!==e.indexOf(t);for(var n=e.length;n--;)if(e[n]===t)return!0;return!1}function me(e,t){if(pe(e))return[];if(oe(e.map))return e.map(t);var n=[];return fe(e,(function(i,r){n.push(t(i,r,e))})),n}function ye(e,t,n,i){var r;t=t||document,r=n?t.getElementsByTagName(n):t.getElementsByTagName("head");try{if((r=r.length?r:t.getElementsByTagName("body")).length){r=r[0];var s=i?null:r.firstChild;return r.insertBefore(e,s)}}catch(e){}}function ve(e,t){var n=null;return new h.Z((function(i){var r=function t(){e.removeEventListener("load",t),e.removeEventListener("error",t),null!=n&&window.clearTimeout(n),i()};e.addEventListener("load",r),e.addEventListener("error",r),null!=t&&(n=window.setTimeout(r,t))}))}function be(e,t,n){var i=new Image;t&&x.isFn(t)&&ve(i,n).then(t),i.src=e}function _e(e){var t=e.source,n=e.burl;t===p.os.YZ&&n&&x.triggerPixel(n)}function we(e){if(e){var t=document.createElement("iframe");t.id=U(),t.width=0,t.height=0,t.hspace="0",t.vspace="0",t.marginWidth="0",t.marginHeight="0",t.style.display="none",t.style.height="0px",t.style.width="0px",t.scrolling="no",t.frameBorder="0",t.allowtransparency="true",x.insertElement(t,document,"body"),t.contentWindow.document.open(),t.contentWindow.document.write(e),t.contentWindow.document.close()}}function Te(e,t,n){var i=x.createTrackPixelIframeHtml(e,!1,"allow-scripts allow-same-origin"),r=document.createElement("div");r.innerHTML=i;var s=r.firstChild;t&&x.isFn(t)&&ve(s,n).then(t),x.insertElement(s,document,"html",!0)}function Ie(e){return e?'<div style="position:absolute;left:0px;top:0px;visibility:hidden;">'+'<img src="'+encodeURI(e)+'"></div>':""}function Se(e,t,n){return null==t?n:ae(t)?t:le(t)?t.toString():void x.logWarn("Unsuported type for param: "+e+" required type: String")}function ke(e,t,n){return n.indexOf(e)===t}function Ce(e,t){return e.concat(t)}function Ee(e,t){var n;if(e)return t.some((function(t){var i=(0,u.sE)(t.bids,(function(t){return["bidId","adId","bid_id"].some((function(n){return t[n]===e}))}));return i&&(n=i),i})),n}function Ae(e,t){return e[t]}function Pe(e,t){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t)return n}function xe(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.adUnits).map((function(e){return e.bids.map((function(e){return e.bidder})).reduce(Ce,[])})).reduce(Ce,[]).filter((function(e){return void 0!==e})).filter(ke)}function De(){if(window.googletag&&oe(window.googletag.pubads)&&oe(window.googletag.pubads().getSlots))return!0}function Oe(){if(window.apntag&&oe(window.apntag.getTag))return!0}var Re=Me("timeToRespond",(function(e,t){return e>t})),Ne=Me("responseTimestamp",(function(e,t){return e>t}));function Me(e,t){return function(n,i){return n.cpm===i.cpm?t(n[e],i[e])?i:n:n.cpm<i.cpm?i:n}}function Le(e){for(var t=e.length;t>0;){var n=Math.floor(Math.random()*t),i=e[--t];e[t]=e[n],e[n]=i}return e}function Ue(e,t){return(0,u.q9)(e,t&&t.adUnitCode)}function je(e){return c()(e)}function Be(){try{return x.getWindowSelf()!==x.getWindowTop()}catch(e){return!0}}function qe(){return/^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent)}function Fe(e,t){if(e)return e.replace(/\$\{AUCTION_PRICE\}/g,t)}function Ve(e,t){if(e&&t&&"string"==typeof t)return e.replace(/\${CLICKTHROUGH}/g,t)}function ze(){return(new Date).getTime()}function $e(){return window.performance&&window.performance.now&&window.performance.now()||0}function He(){return!1!==d.vc.getConfig("deviceAccess")}function We(){if(window.navigator.cookieEnabled||document.cookie.length)return!0}function Ze(e,t){if(t<1)throw new Error("numRequiredCalls must be a positive number. Got ".concat(t));var n=0;return function(){++n===t&&e.apply(this,arguments)}}function Ge(e,t){return e.reduce((function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e}),{})}function Xe(e,t){return t.filter((function(t){return e[t]})).reduce((function(t,n){return Object.assign(t,(0,o.Z)({},n,e[n]))}),{})}function Ke(e){var t=["banner","native","video"];return!!Object.keys(e).every((function(e){return(0,u.q9)(t,e)}))&&(!e.video||!e.video.context||(0,u.q9)(["instream","outstream","adpod"],e.video.context))}function Je(e,t,n){return e.filter((function(e){return e.code===t})).map((function(e){return e.bids})).reduce(Ce,[]).filter((function(e){return e.bidder===n})).map((function(e){return e.params||{}}))}function Ye(){return"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNotTrack||"yes"===navigator.doNotTrack}Me("responseTimestamp",(function(e,t){return e<t}));var Qe=function(e,t){return e.getAdUnitPath()===t||e.getSlotElementId()===t};function et(e){return function(t){return Qe(e,t)}}function tt(e){return function(t){return Qe(t,e)}}function nt(e){var t;return De()&&(t=(0,u.sE)(window.googletag.pubads().getSlots(),tt(e))),t}function it(e){var t=nt(e);return t?{gptSlot:t.getAdUnitPath(),divId:t.getSlotElementId()}:{}}function rt(e,t){var n=Object.keys(e.mediaTypes||{banner:"banner"}).join(", ");return"\n    ".concat(e.code," is a ").concat(n," ad unit\n    containing bidders that don't support ").concat(n,": ").concat(t,".\n    This bidder won't fetch demand.\n  ")}function st(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function ot(e){return e.replace(/(?:^|\.?)([A-Z])/g,(function(e,t){return"_"+t.toLowerCase()})).replace(/^_/,"")}function at(e,t){return"object"!==(0,a.Z)(e)?{}:t.reduce((function(n,i,r){if("function"==typeof i)return n;var s=i,o=i.match(/^(.+?)\sas\s(.+?)$/i);o&&(i=o[1],s=o[2]);var a=e[i];return"function"==typeof t[r+1]&&(a=t[r+1](a,n)),void 0!==a&&(n[s]=a),n}),{})}function dt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keywords",n=[];return fe(e,(function(e,i){if(de(e)){var r=[];fe(e,(function(e){((e=Se(t+"."+i,e))||""===e)&&r.push(e)})),e=r}else{if(!ae(e=Se(t+"."+i,e)))return;e=[e]}n.push({key:i,value:e})})),n}function lt(e,t){return Object.keys(e).forEach((function(n){var i,r;t[n]&&(oe(e[n])?t[n]=e[n](t[n]):t[n]=(i=e[n],r=t[n],"string"===i?r&&r.toString():"number"===i?Number(r):r),isNaN(t[n])&&delete t.key)})),t}function ct(e,t){return de(e)&&(!t||e.length===t)&&e.every((function(e){return st(e)}))}function ut(e,t){for(var n=[],i=0;i<t;i++){var r=ce(e)?je(e):e;n.push(r)}return n}function pt(e,t){for(var n=[],i=0;i<Math.ceil(e.length/t);i++){var r=i*t,s=r+t;n.push(e.slice(r,s))}return n}function ht(e){return Math.min.apply(Math,(0,s.Z)(e))}function ft(e){return Math.max.apply(Math,(0,s.Z)(e))}function gt(e){return e?e.replace(/^\?/,"").split("&").reduce((function(e,t){var n=t.split("="),i=(0,r.Z)(n,2),s=i[0],o=i[1];return/\[\]$/.test(s)?(e[s=s.replace("[]","")]=e[s]||[],e[s].push(o)):e[s]=o||"",e}),{}):{}}function mt(e){return Object.keys(e).map((function(t){return Array.isArray(e[t])?e[t].map((function(e){return"".concat(t,"[]=").concat(e)})).join("&"):"".concat(t,"=").concat(e[t])})).join("&")}function yt(e,t){var n=document.createElement("a");t&&"noDecodeWholeURL"in t&&t.noDecodeWholeURL?n.href=e:n.href=decodeURIComponent(e);var i=t&&"decodeSearchAsString"in t&&t.decodeSearchAsString;return{href:n.href,protocol:(n.protocol||"").replace(/:$/,""),hostname:n.hostname,port:+n.port,pathname:n.pathname.replace(/^(?!\/)/,"/"),search:i?n.search:x.parseQS(n.search||""),hash:(n.hash||"").replace(/^#/,""),host:n.host||window.location.host}}function vt(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?":".concat(e.port):""))+(e.pathname||"")+(e.search?"?".concat(x.formatQS(e.search||"")):"")+(e.hash?"#".concat(e.hash):"")}function bt(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).checkTypes,i=void 0!==n&&n;if(e===t)return!0;if("object"!==(0,a.Z)(e)||null===e||"object"!==(0,a.Z)(t)||null===t||i&&e.constructor!==t.constructor)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e){if(!t.hasOwnProperty(r))return!1;if(!bt(e[r],t[r],{checkTypes:i}))return!1}return!0}function _t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(!n.length)return e;var r=n.shift();if(ce(e)&&ce(r)){var a=function(t){ce(r[t])?(e[t]||Object.assign(e,(0,o.Z)({},t,{})),_t(e[t],r[t])):de(r[t])?e[t]?de(e[t])&&r[t].forEach((function(n){for(var i=1,r=0;r<e[t].length;r++)if(bt(e[t][r],n)){i=0;break}i&&e[t].push(n)})):Object.assign(e,(0,o.Z)({},t,(0,s.Z)(r[t]))):Object.assign(e,(0,o.Z)({},t,r[t]))};for(var d in r)a(d)}return _t.apply(void 0,[e].concat(n))}function wt(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=function(e,t){if(oe(Math.imul))return Math.imul(e,t);var n=(4194303&e)*(t|=0);return 4290772992&e&&(n+=(4290772992&e)*t|0),0|n},r=3735928559^n,s=1103547991^n,o=0;o<e.length;o++)r=i(r^(t=e.charCodeAt(o)),2654435761),s=i(s^t,1597334677);return r=i(r^r>>>16,2246822507)^i(s^s>>>13,3266489909),(4294967296*(2097151&(s=i(s^s>>>16,2246822507)^i(r^r>>>13,3266489909)))+(r>>>0)).toString()}function Tt(e){return e?e.defaultView:null}function It(e){try{return JSON.parse(e)}catch(e){}}function St(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=new Map,i=function(){var i=t.apply(this,arguments);return n.has(i)||n.set(i,e.apply(this,arguments)),n.get(i)};return i.clear=n.clear.bind(n),i}function kt(e,t){for(var n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n])}},5738:(e,t,n)=>{"use strict";n.d(t,{h:()=>r});var i=n(5446);function r(e){return null==e||!e.gdprApplies||!0===(0,i.Z)(e,"vendorData.purpose.consents.1")}},2751:(e,t,n)=>{"use strict";n.d(t,{A:()=>_,Bf:()=>g,V6:()=>y,g3:()=>b});var i=n(1785),r=n(1476);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var o="performanceMetrics",a=window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return Date.now()},d=new WeakMap;function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.now,n=void 0===t?a:t,i=e.mkNode,r=void 0===i?p:i,s=e.mkTimer,o=void 0===s?u:s,l=e.mkRenamer,c=void 0===l?function(e){return e}:l,h=e.nodes,f=void 0===h?d:h;return function(){return function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return{forEach:function(t){t(e)}}};i=c(i);var s=("timestamps",function(e){return t.dfWalk({visit:function(t,n){var i=n.timestamps;if(i.hasOwnProperty(e))return i[e]}})});function a(e,n){var r=i(e);t.dfWalk({follow:function(e,t){return t.propagate&&(!e||!e.stopPropagation)},visit:function(e,t){r.forEach((function(i){null==e?t.metrics[i]=n:(t.groups.hasOwnProperty(i)||(t.groups[i]=[]),t.groups[i].push(n))}))}})}function d(e){return o(n,(function(t){return a(e,t)}))}function l(){var e={};return t.dfWalk({visit:function(t,n){e=Object.assign({},!t||t.includeGroups?n.groups:null,n.metrics,e)}}),e}var u={startTiming:d,measureTime:function(e,t){return d(e).stopAfter(t)()},measureHookTime:function(e,t,n){var i=d(e);return n(function(e){var t=i.stopBefore(e);return t.bail=e.bail&&i.stopBefore(e.bail),t.stopTiming=i,t.untimed=e,t}(t))},checkpoint:function(e){t.timestamps[e]=n()},timeSince:function(e,t){var i=s(e),r=null!=i?n()-i:null;return null!=t&&a(t,r),r},timeBetween:function(e,t,n){var i=s(e),r=s(t),o=null!=i&&null!=r?r-i:null;return null!=n&&a(n,o),o},setMetric:a,getMetrics:l,fork:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=n.propagate,o=void 0===s||s,a=n.stopPropagation,d=void 0!==a&&a,l=n.includeGroups;return e(r([[t,{propagate:o,stopPropagation:d,includeGroups:void 0!==l&&l}]]),i)},join:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.propagate,r=void 0===i||i,s=n.stopPropagation,o=void 0!==s&&s,a=n.includeGroups,d=void 0!==a&&a,l=f.get(e);null!=l&&l.addParent(t,{propagate:r,stopPropagation:o,includeGroups:d})},newMetrics:function(){return e(t.newSibling(),i)},renameWith:function(n){return e(t,n)},toJSON:function(){return l()}};return f.set(u,t),u}(r([]))}}function c(e,t,n){return function(){t&&t();try{return e.apply(this,arguments)}finally{n&&n()}}}function u(e,t){var n=e(),i=!1;function r(){i||(t(e()-n),i=!0)}return r.stopBefore=function(e){return c(e,r)},r.stopAfter=function(e){return c(e,null,r)},r}function p(e){return{metrics:{},timestamps:{},groups:{},addParent:function(t,n){e.push([t,n])},newSibling:function(){return p(e.slice())},dfWalk:function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.visit,o=n.follow,a=void 0===o?function(){return!0}:o,d=n.visited,l=void 0===d?new Set:d,c=n.inEdge;if(!l.has(this)){if(l.add(this),null!=(t=r(c,this)))return t;var u,p=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,d=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){d=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(d)throw o}}}}(e);try{for(p.s();!(u=p.n()).done;){var h=(0,i.Z)(u.value,2),f=h[0],g=h[1];if(a(c,g)&&null!=(t=f.dfWalk({visit:r,follow:a,visited:l,inEdge:g})))return t}}catch(e){p.e(e)}finally{p.f()}}}}}var h=function(){var e=function(){},t=function(){return{}},n={forEach:e},i=function(){return null};i.stopBefore=function(e){return e},i.stopAfter=function(e){return e};var r=Object.defineProperties({dfWalk:e,newSibling:function(){return r},addParent:e},Object.fromEntries(["metrics","timestamps","groups"].map((function(e){return[e,{get:t}]}))));return l({now:function(){return 0},mkNode:function(){return r},mkRenamer:function(){return function(){return n}},mkTimer:function(){return i},nodes:{get:e,set:e}})()}(),f=!0;function g(e){return f&&e||h}r.vc.getConfig(o,(function(e){f=!!e[o]}));var m,y=(m=l(),function(){return f?m():h});function v(e,t){return function(n,i){return function(r){for(var s=arguments.length,o=new Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];var d=this;return g(t.apply(d,o)).measureHookTime(e+n,r,(function(e){return i.call.apply(i,[d,e].concat(o))}))}}}var b=v("requestBids.",(function(e){return e.metrics})),_=v("addBidResponse.",(function(e,t){return t.metrics}))},2735:(e,t,n)=>{"use strict";n.d(t,{P:()=>m,Z:()=>f});var i=n(1785),r=n(6172),s=n(1976),o=n(266),a=n(5248);function d(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function l(e,t,n){return function(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}(e,t),n}var c=0,u=1,p=new WeakMap,h=new WeakMap,f=function(){function e(t){if((0,r.Z)(this,e),d(this,p,{writable:!0,value:void 0}),d(this,h,{writable:!0,value:void 0}),"function"!=typeof t)throw new Error("resolver not a function");var n=[],s=[],o=[c,u].map((function(e){return function(t){if(e===c&&"function"==typeof(null==t?void 0:t.then))t.then(f,g);else if(!n.length)for(n.push(e,t);s.length;)s.shift()()}})),l=(0,i.Z)(o,2),f=l[0],g=l[1];try{t(f,g)}catch(e){g(e)}(0,a.Z)(this,p,n),(0,a.Z)(this,h,s)}return(0,s.Z)(e,[{key:"then",value:function(e,t){var n=this,r=(0,o.Z)(this,p);return new this.constructor((function(s,a){var d=function(){var n=r[1],o=r[0]===c?[e,s]:[t,a],d=(0,i.Z)(o,2),l=d[0],u=d[1];if("function"==typeof l){try{n=l(n)}catch(e){return void a(e)}u=s}u(n)};r.length?d():(0,o.Z)(n,h).push(d)}))}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"finally",value:function(e){var t,n=this;return this.then((function(n){return t=n,e()}),(function(i){return t=n.constructor.reject(i),e()})).then((function(){return t}))}}],[{key:"timeout",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new e((function(e){0===t?e():setTimeout(e,t)}))}},{key:"race",value:function(t){var n=this;return new this((function(i,r){l(n,e,g).call(n,t,(function(e,t){return e?i(t):r(t)}))}))}},{key:"all",value:function(t){var n=this;return new this((function(i,r){var s=[];l(n,e,g).call(n,t,(function(e,t,n){return e?s[n]=t:r(t)}),(function(){return i(s)}))}))}},{key:"allSettled",value:function(t){var n=this;return new this((function(i){var r=[];l(n,e,g).call(n,t,(function(e,t,n){return r[n]=e?{status:"fulfilled",value:t}:{status:"rejected",reason:t}}),(function(){return i(r)}))}))}},{key:"resolve",value:function(e){return new this((function(t){return t(e)}))}},{key:"reject",value:function(e){return new this((function(t,n){return n(e)}))}}]),e}();function g(e,t,n){var i=this,r=e.length;function s(){t.apply(this,arguments),--r<=0&&n&&n()}0===e.length&&n?n():e.forEach((function(e,t){return i.resolve(e).then((function(e){return s(!0,e,t)}),(function(e){return s(!1,e,t)}))}))}function m(){var e,t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).promiseFactory;function i(e){return function(t){return e(t)}}return{promise:(void 0===n?function(e){return new f(e)}:n)((function(n,i){e=n,t=i})),resolve:i(e),reject:i(t)}}},7357:(e,t,n)=>{"use strict";n.d(t,{Dn:()=>c,LD:()=>l,gZ:()=>d});var i=n(5446),r=n(7436),s=n(1476),o=n(3669),a=n(8507),d="outstream",l="instream";function c(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,n=void 0===t?a.K.index:t,r=(0,i.Z)(n.getMediaTypes(e),"video"),s=r&&(0,i.Z)(r,"context"),o=r&&(0,i.Z)(r,"useCacheKey"),d=n.getAdUnit(e);return u(e,d,r,s,o)}var u=(0,o.z3)("sync",(function(e,t,n,i,o){return n&&(o||i!==d)?s.vc.getConfig("cache.url")||!e.vastXml||e.vastUrl?!(!e.vastUrl&&!e.vastXml):((0,r.H)('\n        This bid contains only vastXml and will not work when a prebid cache url is not specified.\n        Try enabling prebid cache with pbjs.setConfig({ cache: {url: "..."} });\n      '),!1):!(i===d&&!o&&!(e.renderer||t&&t.renderer||n.renderer))}),"checkVideoBidSetup")},5695:(e,t,n)=>{var i=n(6856);e.exports=function(e){var t,n="",r=e||{};return function(e,r,s,o,a,d,l,c){n=n+'<div class="branded-content"><div class="branded-content__title">'+i.escape(null==(t=l)?"":t)+'</div><div class="branded-content__player vjs-video-container vjs-responsive"><video class="video-js vjs-default-skin"'+i.attr("id",a,!0,!0)+i.attr("controls",!0,!0,!0)+' preload="false"'+i.attr("width",c,!0,!0)+i.attr("height",o,!0,!0)+i.attr("data-opts",r,!0,!0)+"><source"+i.attr("src",d,!0,!0)+' type="video/mp4"></video></div><div class="branded-content__description"><a'+i.attr("href",e,!0,!0)+' rel="nofollow" target="_blank">'+i.escape(null==(t=s)?"":t)+"</a></div></div>"}.call(this,"click"in r?r.click:"undefined"!=typeof click?click:void 0,"dataOpts"in r?r.dataOpts:"undefined"!=typeof dataOpts?dataOpts:void 0,"description"in r?r.description:"undefined"!=typeof description?description:void 0,"height"in r?r.height:"undefined"!=typeof height?height:void 0,"id"in r?r.id:"undefined"!=typeof id?id:void 0,"src"in r?r.src:"undefined"!=typeof src?src:void 0,"title"in r?r.title:"undefined"!=typeof title?title:void 0,"width"in r?r.width:"undefined"!=typeof width?width:void 0),n}},4799:(e,t,n)=>{var i=n(6856);e.exports=function(e){var t="",n=e||{};return function(e,n,r,s,o){t=t+'<div class="branded-content"><div class="branded-content__player vjs-video-container vjs-responsive"><video class="video-js vjs-default-skin"'+i.attr("id",r,!0,!0)+i.attr("controls",!0,!0,!0)+' preload="false"'+i.attr("width",o,!0,!0)+i.attr("height",n,!0,!0)+i.attr("data-opts",e,!0,!0)+"><source"+i.attr("src",s,!0,!0)+' type="video/mp4"></video></div></div>'}.call(this,"dataOpts"in n?n.dataOpts:"undefined"!=typeof dataOpts?dataOpts:void 0,"height"in n?n.height:"undefined"!=typeof height?height:void 0,"id"in n?n.id:"undefined"!=typeof id?id:void 0,"src"in n?n.src:"undefined"!=typeof src?src:void 0,"width"in n?n.width:"undefined"!=typeof width?width:void 0),t}},3741:(e,t,n)=>{n(6856),e.exports=function(e){return""+'<div style="position:fixed; z-index:999999; top:20px; left:20px; display: flex; flex-direction: column; "><div style="display: flex; flex-direction: row; gap: 10px;"><button id="debugRemoteButton" style="background-color:red; color:white; border:1px solid darkred; padding:10px;" onclick="debugRemoteButtonText.style.display = (debugRemoteButtonText.style.display === \'none\' ? \'flex\' : \'none\')">Mark as buggy</button><button id="leaveRemoteDebug" style="background-color:green; color:white; border:1px solid darkgreen; padding:10px; display: none">Leave debug mode</button></div><div id="debugRemoteButtonText" style="display:none; flex-direction: column; gap: 10px; align-items: flex-end; background-color: #ffebeb; padding: 15px; align-items: flex-end;"><textarea style="display:block; width:100%" placeholder="Description"></textarea><button style="background-color:red; color:white; display:block; border:1px solid darkred; padding:10px;">Confirm</button></div></div>'}},2280:(e,t,n)=>{n(6856),e.exports=function(e){return""+'<div id="enterDebugRemoteContainer" style="margin:0 auto; position:fixed; left: 0; top: 0; width: 100%;height: 100%;z-index: 2147483647; display: flex; align-items: center; justify-content: center;"><div style="left: 0;top: 0;position: fixed;width: 100%;height: 100%;background-color: white;opacity: 0.8;z-index: -1;"></div><div style="border: 1px solid black; padding: 10px; background-color: white; display: flex; flex-direction: column; gap: 10px; padding: 15px;"><span style="font-size: 2em">Enter Ads debug mode</span><textarea id="debugRemoteLabel" style="font-size: 3em; display:block; width:100%" placeholder="Label" rows="1" onkeydown="if (event.key === \'Escape\') {closeDebugRemoteButton.click()}"></textarea><div style="font-size: 2em; display: flex; flex-direction: row; gap: 10px; align-items: flex-end; gap: 5px; justify-content: flex-end;"><button id="closeDebugRemoteButton" style="padding:10px;" onclick="window.enterDebugRemoteContainer.style.display = \'none\'">Cancel</button><button id="enterDebugRemoteButton" style="background-color:green; color:white; padding:10px;">Confirm</button></div></div></div>'}},7072:(e,t,n)=>{var i=n(6856);e.exports=function(e){var t="",n=e||{};return function(e,n){t=t+'<video class="video-js"'+i.attr("controls",!0,!0,!0)+i.attr("disablePictureInPicture",!0,!0,!0)+' height="250"'+i.attr("id",n,!0,!0)+i.attr("poster",e,!0,!0)+' preload="auto" width="445"><p class="vjs-no-js">To view this video please enable JavaScript, \nand consider upgrading to a web browser that <a href="https://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a></p></video><div id="mpu_player_wrapper"><div class="adHolder" id="mpu_player"></div></div>'}.call(this,"poster"in n?n.poster:"undefined"!=typeof poster?poster:void 0,"videoId"in n?n.videoId:"undefined"!=typeof videoId?videoId:void 0),t}},8061:(e,t,n)=>{var i=n(6856);e.exports=function(e){var t="",n=e||{};return function(e,n,r,s){t=t+"<script>window.dataLayer = window.dataLayer || []\nwindow.dataLayer.push({\n  'gtm.start': new Date().getTime(),\n  event: 'gtm.js'\n})\nconst analytics = window['$$mm-analytics'] = window['$$mm-analytics'] || {}\nif (typeof analytics.firstEmbed === 'undefined') {\n  analytics.firstEmbed = Date.now()\n}\n<\/script><script"+i.attr("src",r,!0,!0)+'><\/script><iframe height="0" width="0"'+i.attr("src",n,!0,!0)+"></iframe><script"+(i.attr("async",!0,!0,!0)+i.attr("src",e,!0,!0))+"><\/script><script"+(i.attr("async",!0,!0,!0)+i.attr("src",s,!0,!0))+"><\/script>"}.call(this,"configScript"in n?n.configScript:"undefined"!=typeof configScript?configScript:void 0,"googleTagManagerIframeScript"in n?n.googleTagManagerIframeScript:"undefined"!=typeof googleTagManagerIframeScript?googleTagManagerIframeScript:void 0,"googleTagManagerScript"in n?n.googleTagManagerScript:"undefined"!=typeof googleTagManagerScript?googleTagManagerScript:void 0,"injectorScript"in n?n.injectorScript:"undefined"!=typeof injectorScript?injectorScript:void 0),t}},3293:e=>{e.exports=function(e,t){var n=0,i={};e.addEventListener("message",(function(t){var n=t.data;if("RPC"===n.type)if(n.id){var r=i[n.id];r&&(delete i[n.id],n.error?r[1](Object.assign(Error(n.error.message),n.error)):r[0](n.result))}else{var s=document.createEvent("Event");s.initEvent(n.method,!1,!1),s.data=n.params,e.dispatchEvent(s)}})),t.forEach((function(t){e[t]=function(){var r=arguments;return new Promise((function(s,o){var a=++n;i[a]=[s,o],e.postMessage({type:"RPC",id:a,method:t,params:[].slice.call(r)})}))}}))}},9475:function(e,t){var n,i,r;!function(s,o){"use strict";i=[],void 0===(r="function"==typeof(n=function(){return function(){var e,t=navigator,n=t.connection||t.mozConnection||t.webkitConnection||{downlinkMax:1/0};if(!("downlinkMax"in n))if("bandwidth"in n)n.downlinkMax=8*n.bandwidth;else{switch(n.type){case"none":e=0;break;case"2g":e=.134;break;case"bluetooth":case"cellular":e=2;break;case"3g":e=8.95;break;case"4g":e=100;break;case"ethernet":e=550;break;case"wifi":e=600;break;default:e=1/0}n.downlinkMax=e}return n.downlinkMax}})?n.apply(t,i):n)||(e.exports=r)}()},3595:(e,t,n)=>{"use strict";var i=n(1667);e.exports=function(e,t){return void 0===t&&(t=!1),function(n,r,s){if(n)e(n);else if(r.statusCode>=400&&r.statusCode<=599){var o=s;if(t)if(i.TextDecoder){var a=(void 0===(d=r.headers&&r.headers["content-type"])&&(d=""),d.toLowerCase().split(";").reduce((function(e,t){var n=t.split("="),i=n[0],r=n[1];return"charset"===i.trim()?r.trim():e}),"utf-8"));try{o=new TextDecoder(a).decode(s)}catch(e){}}else o=String.fromCharCode.apply(null,new Uint8Array(s));e({cause:o})}else e(null,s);var d}}},1731:(e,t,n)=>{"use strict";var i=n(1667),r=n(3737),s=n(8495);d.httpHandler=n(3595);var o=function(e){var t={};return e?(e.trim().split("\n").forEach((function(e){var n=e.indexOf(":"),i=e.slice(0,n).trim().toLowerCase(),r=e.slice(n+1).trim();void 0===t[i]?t[i]=r:Array.isArray(t[i])?t[i].push(r):t[i]=[t[i],r]})),t):t};function a(e,t,n){var i=e;return s(t)?(n=t,"string"==typeof e&&(i={uri:e})):i=r({},t,{uri:e}),i.callback=n,i}function d(e,t,n){return l(t=a(e,t,n))}function l(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,n=function(n,i,r){t||(t=!0,e.callback(n,i,r))};function i(){var e=void 0;if(e=c.response?c.response:c.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}(c),y)try{e=JSON.parse(e)}catch(e){}return e}function r(e){return clearTimeout(u),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,v)}function s(){if(!l){var t;clearTimeout(u),t=e.useXDR&&void 0===c.status?200:1223===c.status?204:c.status;var r=v,s=null;return 0!==t?(r={body:i(),statusCode:t,method:h,headers:{},url:p,rawRequest:c},c.getAllResponseHeaders&&(r.headers=o(c.getAllResponseHeaders()))):s=new Error("Internal XMLHttpRequest Error"),n(s,r,r.body)}}var a,l,c=e.xhr||null;c||(c=e.cors||e.useXDR?new d.XDomainRequest:new d.XMLHttpRequest);var u,p=c.url=e.uri||e.url,h=c.method=e.method||"GET",f=e.body||e.data,g=c.headers=e.headers||{},m=!!e.sync,y=!1,v={body:void 0,headers:{},statusCode:0,method:h,url:p,rawRequest:c};if("json"in e&&!1!==e.json&&(y=!0,g.accept||g.Accept||(g.Accept="application/json"),"GET"!==h&&"HEAD"!==h&&(g["content-type"]||g["Content-Type"]||(g["Content-Type"]="application/json"),f=JSON.stringify(!0===e.json?f:e.json))),c.onreadystatechange=function(){4===c.readyState&&setTimeout(s,0)},c.onload=s,c.onerror=r,c.onprogress=function(){},c.onabort=function(){l=!0},c.ontimeout=r,c.open(h,p,!m,e.username,e.password),m||(c.withCredentials=!!e.withCredentials),!m&&e.timeout>0&&(u=setTimeout((function(){if(!l){l=!0,c.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",r(e)}}),e.timeout)),c.setRequestHeader)for(a in g)g.hasOwnProperty(a)&&c.setRequestHeader(a,g[a]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(c.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(c),c.send(f||null),c}e.exports=d,e.exports.default=d,d.XMLHttpRequest=i.XMLHttpRequest||function(){},d.XDomainRequest="withCredentials"in new d.XMLHttpRequest?d.XMLHttpRequest:i.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],(function(e){d["delete"===e?"del":e]=function(t,n,i){return(n=a(t,n,i)).method=e.toUpperCase(),l(n)}}))},3540:(e,t)=>{"use strict";function n(e,t){return void 0===t&&(t=Object),t&&"function"==typeof t.freeze?t.freeze(e):e}var i=n({HTML:"text/html",isHTML:function(e){return e===i.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),r=n({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(e){return e===r.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});t.assign=function(e,t){if(null===e||"object"!=typeof e)throw new TypeError("target is not an object");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},t.find=function(e,t,n){if(void 0===n&&(n=Array.prototype),e&&"function"==typeof n.find)return n.find.call(e,t);for(var i=0;i<e.length;i++)if(Object.prototype.hasOwnProperty.call(e,i)){var r=e[i];if(t.call(void 0,r,i,e))return r}},t.freeze=n,t.MIME_TYPE=i,t.NAMESPACE=r},2030:(e,t,n)=>{var i=n(3540),r=n(3516),s=n(9248),o=n(3284),a=r.DOMImplementation,d=i.NAMESPACE,l=o.ParseError,c=o.XMLReader;function u(e){return e.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function p(e){this.options=e||{locator:{}}}function h(){this.cdata=!1}function f(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function g(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function m(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function y(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}p.prototype.parseFromString=function(e,t){var n=this.options,i=new c,r=n.domBuilder||new h,o=n.errorHandler,a=n.locator,l=n.xmlns||{},p=/\/x?html?$/.test(t),f=p?s.HTML_ENTITIES:s.XML_ENTITIES;a&&r.setDocumentLocator(a),i.errorHandler=function(e,t,n){if(!e){if(t instanceof h)return t;e=t}var i={},r=e instanceof Function;function s(t){var s=e[t];!s&&r&&(s=2==e.length?function(n){e(t,n)}:e),i[t]=s&&function(e){s("[xmldom "+t+"]\t"+e+g(n))}||function(){}}return n=n||{},s("warning"),s("error"),s("fatalError"),i}(o,r,a),i.domBuilder=n.domBuilder||r,p&&(l[""]=d.HTML),l.xml=l.xml||d.XML;var m=n.normalizeLineEndings||u;return e&&"string"==typeof e?i.parse(m(e),l,f):i.errorHandler.error("invalid doc source"),r.doc},h.prototype={startDocument:function(){this.doc=(new a).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,i){var r=this.doc,s=r.createElementNS(e,n||t),o=i.length;y(this,s),this.currentElement=s,this.locator&&f(this.locator,s);for(var a=0;a<o;a++){e=i.getURI(a);var d=i.getValue(a),l=(n=i.getQName(a),r.createAttributeNS(e,n));this.locator&&f(i.getLocator(a),l),l.value=l.nodeValue=d,s.setAttributeNode(l)}},endElement:function(e,t,n){var i=this.currentElement;i.tagName,this.currentElement=i.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&f(this.locator,n),y(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=m.apply(this,arguments)){if(this.cdata)var i=this.doc.createCDATASection(e);else i=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(e)&&this.doc.appendChild(i),this.locator&&f(this.locator,i)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=m.apply(this,arguments);var i=this.doc.createComment(e);this.locator&&f(this.locator,i),y(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var i=this.doc.implementation;if(i&&i.createDocumentType){var r=i.createDocumentType(e,t,n);this.locator&&f(this.locator,r),y(this,r),this.doc.doctype=r}},warning:function(e){console.warn("[xmldom warning]\t"+e,g(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,g(this.locator))},fatalError:function(e){throw new l(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){h.prototype[e]=function(){return null}})),t.DOMParser=p},3516:(e,t,n)=>{var i=n(3540),r=i.find,s=i.NAMESPACE;function o(e){return""!==e}function a(e,t){return e.hasOwnProperty(t)||(e[t]=!0),e}function d(e){if(!e)return[];var t=function(e){return e?e.split(/[\t\n\f\r ]+/).filter(o):[]}(e);return Object.keys(t.reduce(a,{}))}function l(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function c(e,t){var n=e.prototype;if(!(n instanceof t)){function i(){}i.prototype=t.prototype,l(n,i=new i),e.prototype=n=i}n.constructor!=e&&("function"!=typeof e&&console.error("unknown Class:"+e),n.constructor=e)}var u={},p=u.ELEMENT_NODE=1,h=u.ATTRIBUTE_NODE=2,f=u.TEXT_NODE=3,g=u.CDATA_SECTION_NODE=4,m=u.ENTITY_REFERENCE_NODE=5,y=u.ENTITY_NODE=6,v=u.PROCESSING_INSTRUCTION_NODE=7,b=u.COMMENT_NODE=8,_=u.DOCUMENT_NODE=9,w=u.DOCUMENT_TYPE_NODE=10,T=u.DOCUMENT_FRAGMENT_NODE=11,I=u.NOTATION_NODE=12,S={},k={},C=(S.INDEX_SIZE_ERR=(k[1]="Index size error",1),S.DOMSTRING_SIZE_ERR=(k[2]="DOMString size error",2),S.HIERARCHY_REQUEST_ERR=(k[3]="Hierarchy request error",3)),E=(S.WRONG_DOCUMENT_ERR=(k[4]="Wrong document",4),S.INVALID_CHARACTER_ERR=(k[5]="Invalid character",5),S.NO_DATA_ALLOWED_ERR=(k[6]="No data allowed",6),S.NO_MODIFICATION_ALLOWED_ERR=(k[7]="No modification allowed",7),S.NOT_FOUND_ERR=(k[8]="Not found",8)),A=(S.NOT_SUPPORTED_ERR=(k[9]="Not supported",9),S.INUSE_ATTRIBUTE_ERR=(k[10]="Attribute in use",10));function P(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,k[e]),this.message=k[e],Error.captureStackTrace&&Error.captureStackTrace(this,P);return n.code=e,t&&(this.message=this.message+": "+t),n}function x(){}function D(e,t){this._node=e,this._refresh=t,O(this)}function O(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!==t){var n=e._refresh(e._node);if(ve(e,"length",n.length),!e.$$length||n.length<e.$$length)for(var i=n.length;i in e;i++)Object.prototype.hasOwnProperty.call(e,i)&&delete e[i];l(n,e),e._inc=t}}function R(){}function N(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function M(e,t,n,i){if(i?t[N(t,i)]=n:t[t.length++]=n,e){n.ownerElement=e;var r=e.ownerDocument;r&&(i&&V(r,e,i),function(e,t,n){e&&e._inc++,n.namespaceURI===s.XMLNS&&(t._nsMap[n.prefix?n.localName:""]=n.value)}(r,e,n))}}function L(e,t,n){var i=N(t,n);if(!(i>=0))throw new P(E,new Error(e.tagName+"@"+n));for(var r=t.length-1;i<r;)t[i]=t[++i];if(t.length=r,e){var s=e.ownerDocument;s&&(V(s,e,n),n.ownerElement=null)}}function U(){}function j(){}function B(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function q(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(q(e,t))return!0}while(e=e.nextSibling)}function F(){this.ownerDocument=this}function V(e,t,n,i){e&&e._inc++,n.namespaceURI===s.XMLNS&&delete t._nsMap[n.prefix?n.localName:""]}function z(e,t,n){if(e&&e._inc){e._inc++;var i=t.childNodes;if(n)i[i.length++]=n;else{for(var r=t.firstChild,s=0;r;)i[s++]=r,r=r.nextSibling;i.length=s,delete i[i.length]}}}function $(e,t){var n=t.previousSibling,i=t.nextSibling;return n?n.nextSibling=i:e.firstChild=i,i?i.previousSibling=n:e.lastChild=n,t.parentNode=null,t.previousSibling=null,t.nextSibling=null,z(e.ownerDocument,e),t}function H(e){return e&&e.nodeType===j.DOCUMENT_TYPE_NODE}function W(e){return e&&e.nodeType===j.ELEMENT_NODE}function Z(e){return e&&e.nodeType===j.TEXT_NODE}function G(e,t){var n=e.childNodes||[];if(r(n,W)||H(t))return!1;var i=r(n,H);return!(t&&i&&n.indexOf(i)>n.indexOf(t))}function X(e,t){var n=e.childNodes||[];if(r(n,(function(e){return W(e)&&e!==t})))return!1;var i=r(n,H);return!(t&&i&&n.indexOf(i)>n.indexOf(t))}function K(e,t,n){var i=e.childNodes||[],s=t.childNodes||[];if(t.nodeType===j.DOCUMENT_FRAGMENT_NODE){var o=s.filter(W);if(o.length>1||r(s,Z))throw new P(C,"More than one element or text in fragment");if(1===o.length&&!G(e,n))throw new P(C,"Element in fragment can not be inserted before doctype")}if(W(t)&&!G(e,n))throw new P(C,"Only one element can be added and only after doctype");if(H(t)){if(r(i,H))throw new P(C,"Only one doctype is allowed");var a=r(i,W);if(n&&i.indexOf(a)<i.indexOf(n))throw new P(C,"Doctype can only be inserted before an element");if(!n&&a)throw new P(C,"Doctype can not be appended since element is present")}}function J(e,t,n){var i=e.childNodes||[],s=t.childNodes||[];if(t.nodeType===j.DOCUMENT_FRAGMENT_NODE){var o=s.filter(W);if(o.length>1||r(s,Z))throw new P(C,"More than one element or text in fragment");if(1===o.length&&!X(e,n))throw new P(C,"Element in fragment can not be inserted before doctype")}if(W(t)&&!X(e,n))throw new P(C,"Only one element can be added and only after doctype");if(H(t)){if(r(i,(function(e){return H(e)&&e!==n})))throw new P(C,"Only one doctype is allowed");var a=r(i,W);if(n&&i.indexOf(a)<i.indexOf(n))throw new P(C,"Doctype can only be inserted before an element")}}function Y(e,t,n,i){(function(e,t,n){if(!function(e){return e&&(e.nodeType===j.DOCUMENT_NODE||e.nodeType===j.DOCUMENT_FRAGMENT_NODE||e.nodeType===j.ELEMENT_NODE)}(e))throw new P(C,"Unexpected parent node type "+e.nodeType);if(n&&n.parentNode!==e)throw new P(E,"child not in parent");if(!function(e){return e&&(W(e)||Z(e)||H(e)||e.nodeType===j.DOCUMENT_FRAGMENT_NODE||e.nodeType===j.COMMENT_NODE||e.nodeType===j.PROCESSING_INSTRUCTION_NODE)}(t)||H(t)&&e.nodeType!==j.DOCUMENT_NODE)throw new P(C,"Unexpected node type "+t.nodeType+" for parent node type "+e.nodeType)})(e,t,n),e.nodeType===j.DOCUMENT_NODE&&(i||K)(e,t,n);var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===T){var s=t.firstChild;if(null==s)return t;var o=t.lastChild}else s=o=t;var a=n?n.previousSibling:e.lastChild;s.previousSibling=a,o.nextSibling=n,a?a.nextSibling=s:e.firstChild=s,null==n?e.lastChild=o:n.previousSibling=o;do{s.parentNode=e}while(s!==o&&(s=s.nextSibling));return z(e.ownerDocument||e,e),t.nodeType==T&&(t.firstChild=t.lastChild=null),t}function Q(){this._nsMap={}}function ee(){}function te(){}function ne(){}function ie(){}function re(){}function se(){}function oe(){}function ae(){}function de(){}function le(){}function ce(){}function ue(){}function pe(e,t){var n=[],i=9==this.nodeType&&this.documentElement||this,r=i.prefix,s=i.namespaceURI;if(s&&null==r&&null==(r=i.lookupPrefix(s)))var o=[{namespace:s,prefix:null}];return ge(this,n,e,t,o),n.join("")}function he(e,t,n){var i=e.prefix||"",r=e.namespaceURI;if(!r)return!1;if("xml"===i&&r===s.XML||r===s.XMLNS)return!1;for(var o=n.length;o--;){var a=n[o];if(a.prefix===i)return a.namespace!==r}return!0}function fe(e,t,n){e.push(" ",t,'="',n.replace(/[<>&"\t\n\r]/g,B),'"')}function ge(e,t,n,i,r){if(r||(r=[]),i){if(!(e=i(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case p:var o=e.attributes,a=o.length,d=e.firstChild,l=e.tagName,c=l;if(!(n=s.isHTML(e.namespaceURI)||n)&&!e.prefix&&e.namespaceURI){for(var u,y=0;y<o.length;y++)if("xmlns"===o.item(y).name){u=o.item(y).value;break}if(!u)for(var I=r.length-1;I>=0;I--)if(""===(S=r[I]).prefix&&S.namespace===e.namespaceURI){u=S.namespace;break}if(u!==e.namespaceURI)for(I=r.length-1;I>=0;I--){var S;if((S=r[I]).namespace===e.namespaceURI){S.prefix&&(c=S.prefix+":"+l);break}}}t.push("<",c);for(var k=0;k<a;k++)"xmlns"==(C=o.item(k)).prefix?r.push({prefix:C.localName,namespace:C.value}):"xmlns"==C.nodeName&&r.push({prefix:"",namespace:C.value});for(k=0;k<a;k++){var C,E,A;he(C=o.item(k),0,r)&&(fe(t,(E=C.prefix||"")?"xmlns:"+E:"xmlns",A=C.namespaceURI),r.push({prefix:E,namespace:A})),ge(C,t,n,i,r)}if(l===c&&he(e,0,r)&&(fe(t,(E=e.prefix||"")?"xmlns:"+E:"xmlns",A=e.namespaceURI),r.push({prefix:E,namespace:A})),d||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(t.push(">"),n&&/^script$/i.test(l))for(;d;)d.data?t.push(d.data):ge(d,t,n,i,r.slice()),d=d.nextSibling;else for(;d;)ge(d,t,n,i,r.slice()),d=d.nextSibling;t.push("</",c,">")}else t.push("/>");return;case _:case T:for(d=e.firstChild;d;)ge(d,t,n,i,r.slice()),d=d.nextSibling;return;case h:return fe(t,e.name,e.value);case f:return t.push(e.data.replace(/[<&>]/g,B));case g:return t.push("<![CDATA[",e.data,"]]>");case b:return t.push("\x3c!--",e.data,"--\x3e");case w:var P=e.publicId,x=e.systemId;if(t.push("<!DOCTYPE ",e.name),P)t.push(" PUBLIC ",P),x&&"."!=x&&t.push(" ",x),t.push(">");else if(x&&"."!=x)t.push(" SYSTEM ",x,">");else{var D=e.internalSubset;D&&t.push(" [",D,"]"),t.push(">")}return;case v:return t.push("<?",e.target," ",e.data,"?>");case m:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function me(e,t,n){var i;switch(t.nodeType){case p:(i=t.cloneNode(!1)).ownerDocument=e;case T:break;case h:n=!0}if(i||(i=t.cloneNode(!1)),i.ownerDocument=e,i.parentNode=null,n)for(var r=t.firstChild;r;)i.appendChild(me(e,r,n)),r=r.nextSibling;return i}function ye(e,t,n){var i=new t.constructor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var s=t[r];"object"!=typeof s&&s!=i[r]&&(i[r]=s)}switch(t.childNodes&&(i.childNodes=new x),i.ownerDocument=e,i.nodeType){case p:var o=t.attributes,a=i.attributes=new R,d=o.length;a._ownerElement=i;for(var l=0;l<d;l++)i.setAttributeNode(ye(e,o.item(l),!0));break;case h:n=!0}if(n)for(var c=t.firstChild;c;)i.appendChild(ye(e,c,n)),c=c.nextSibling;return i}function ve(e,t,n){e[t]=n}S.INVALID_STATE_ERR=(k[11]="Invalid state",11),S.SYNTAX_ERR=(k[12]="Syntax error",12),S.INVALID_MODIFICATION_ERR=(k[13]="Invalid modification",13),S.NAMESPACE_ERR=(k[14]="Invalid namespace",14),S.INVALID_ACCESS_ERR=(k[15]="Invalid access",15),P.prototype=Error.prototype,l(S,P),x.prototype={length:0,item:function(e){return e>=0&&e<this.length?this[e]:null},toString:function(e,t){for(var n=[],i=0;i<this.length;i++)ge(this[i],n,e,t);return n.join("")},filter:function(e){return Array.prototype.filter.call(this,e)},indexOf:function(e){return Array.prototype.indexOf.call(this,e)}},D.prototype.item=function(e){return O(this),this[e]||null},c(D,x),R.prototype={length:0,item:x.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new P(A);var n=this.getNamedItem(e.nodeName);return M(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new P(A);return t=this.getNamedItemNS(e.namespaceURI,e.localName),M(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return L(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return L(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var i=this[n];if(i.localName==t&&i.namespaceURI==e)return i}return null}},U.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,n){var i=new F;if(i.implementation=this,i.childNodes=new x,i.doctype=n||null,n&&i.appendChild(n),t){var r=i.createElementNS(e,t);i.appendChild(r)}return i},createDocumentType:function(e,t,n){var i=new se;return i.name=e,i.nodeName=e,i.publicId=t||"",i.systemId=n||"",i}},j.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return Y(this,e,t)},replaceChild:function(e,t){Y(this,e,t,J),t&&this.removeChild(t)},removeChild:function(e){return $(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return ye(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==f&&e.nodeType==f?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)&&n[i]===e)return i;t=t.nodeType==h?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&Object.prototype.hasOwnProperty.call(n,e))return n[e];t=t.nodeType==h?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},l(u,j),l(u,j.prototype),F.prototype={nodeName:"#document",nodeType:_,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==T){for(var n=e.firstChild;n;){var i=n.nextSibling;this.insertBefore(n,t),n=i}return e}return Y(this,e,t),e.ownerDocument=this,null===this.documentElement&&e.nodeType===p&&(this.documentElement=e),e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),$(this,e)},replaceChild:function(e,t){Y(this,e,t,J),e.ownerDocument=this,t&&this.removeChild(t),W(e)&&(this.documentElement=e)},importNode:function(e,t){return me(this,e,t)},getElementById:function(e){var t=null;return q(this.documentElement,(function(n){if(n.nodeType==p&&n.getAttribute("id")==e)return t=n,!0})),t},getElementsByClassName:function(e){var t=d(e);return new D(this,(function(n){var i=[];return t.length>0&&q(n.documentElement,(function(r){if(r!==n&&r.nodeType===p){var s=r.getAttribute("class");if(s){var o=e===s;if(!o){var a=d(s);o=t.every((l=a,function(e){return l&&-1!==l.indexOf(e)}))}o&&i.push(r)}}var l})),i}))},createElement:function(e){var t=new Q;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new x,(t.attributes=new R)._ownerElement=t,t},createDocumentFragment:function(){var e=new le;return e.ownerDocument=this,e.childNodes=new x,e},createTextNode:function(e){var t=new ne;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new ie;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new re;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new ce;return n.ownerDocument=this,n.tagName=n.nodeName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new ee;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new de;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new Q,i=t.split(":"),r=n.attributes=new R;return n.childNodes=new x,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=t,r._ownerElement=n,n},createAttributeNS:function(e,t){var n=new ee,i=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=t,n}},c(F,j),Q.prototype={nodeType:p,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===T?this.insertBefore(e,null):function(e,t){return t.parentNode&&t.parentNode.removeChild(t),t.parentNode=e,t.previousSibling=e.lastChild,t.nextSibling=null,t.previousSibling?t.previousSibling.nextSibling=t:e.firstChild=t,e.lastChild=t,z(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var i=this.ownerDocument.createAttributeNS(e,t);i.value=i.nodeValue=""+n,this.setAttributeNode(i)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new D(this,(function(t){var n=[];return q(t,(function(i){i===t||i.nodeType!=p||"*"!==e&&i.tagName!=e||n.push(i)})),n}))},getElementsByTagNameNS:function(e,t){return new D(this,(function(n){var i=[];return q(n,(function(r){r===n||r.nodeType!==p||"*"!==e&&r.namespaceURI!==e||"*"!==t&&r.localName!=t||i.push(r)})),i}))}},F.prototype.getElementsByTagName=Q.prototype.getElementsByTagName,F.prototype.getElementsByTagNameNS=Q.prototype.getElementsByTagNameNS,c(Q,j),ee.prototype.nodeType=h,c(ee,j),te.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(k[C])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},c(te,j),ne.prototype={nodeName:"#text",nodeType:f,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var i=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}},c(ne,te),ie.prototype={nodeName:"#comment",nodeType:b},c(ie,te),re.prototype={nodeName:"#cdata-section",nodeType:g},c(re,te),se.prototype.nodeType=w,c(se,j),oe.prototype.nodeType=I,c(oe,j),ae.prototype.nodeType=y,c(ae,j),de.prototype.nodeType=m,c(de,j),le.prototype.nodeName="#document-fragment",le.prototype.nodeType=T,c(le,j),ce.prototype.nodeType=v,c(ce,j),ue.prototype.serializeToString=function(e,t,n){return pe.call(e,t,n)},j.prototype.toString=pe;try{if(Object.defineProperty){function be(e){switch(e.nodeType){case p:case T:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(be(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}Object.defineProperty(D.prototype,"length",{get:function(){return O(this),this.$$length}}),Object.defineProperty(j.prototype,"textContent",{get:function(){return be(this)},set:function(e){switch(this.nodeType){case p:case T:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),ve=function(e,t,n){e["$$"+t]=n}}}catch(_e){}t.DocumentType=se,t.DOMException=P,t.DOMImplementation=U,t.Element=Q,t.Node=j,t.NodeList=x,t.XMLSerializer=ue},9248:(e,t,n)=>{"use strict";var i=n(3540).freeze;t.XML_ENTITIES=i({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=i({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:"\n",nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"\t",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),t.entityMap=t.HTML_ENTITIES},6683:(e,t,n)=>{var i=n(3516);i.DOMImplementation,i.XMLSerializer,t.DOMParser=n(2030).DOMParser},3284:(e,t,n)=>{var i=n(3540).NAMESPACE,r=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,s=new RegExp("[\\-\\.0-9"+r.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),o=new RegExp("^"+r.source+s.source+"*(?::"+r.source+s.source+"*)?$");function a(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,a)}function d(){}function l(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function c(e,t,n,r,s,o){function a(e,t,i){n.attributeNames.hasOwnProperty(e)&&o.fatalError("Attribute "+e+" redefined"),n.addValue(e,t.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,s),i)}for(var d,l=++t,c=0;;){var u=e.charAt(l);switch(u){case"=":if(1===c)d=e.slice(t,l),c=3;else{if(2!==c)throw new Error("attribute equal must after attrName");c=3}break;case"'":case'"':if(3===c||1===c){if(1===c&&(o.warning('attribute value must after "="'),d=e.slice(t,l)),t=l+1,!((l=e.indexOf(u,t))>0))throw new Error("attribute value no end '"+u+"' match");a(d,p=e.slice(t,l),t-1),c=5}else{if(4!=c)throw new Error('attribute value must after "="');a(d,p=e.slice(t,l),t),o.warning('attribute "'+d+'" missed start quot('+u+")!!"),t=l+1,c=5}break;case"/":switch(c){case 0:n.setTagName(e.slice(t,l));case 5:case 6:case 7:c=7,n.closed=!0;case 4:case 1:break;case 2:n.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return o.error("unexpected end of input"),0==c&&n.setTagName(e.slice(t,l)),l;case">":switch(c){case 0:n.setTagName(e.slice(t,l));case 5:case 6:case 7:break;case 4:case 1:"/"===(p=e.slice(t,l)).slice(-1)&&(n.closed=!0,p=p.slice(0,-1));case 2:2===c&&(p=d),4==c?(o.warning('attribute "'+p+'" missed quot(")!'),a(d,p,t)):(i.isHTML(r[""])&&p.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+p+'" missed value!! "'+p+'" instead!!'),a(p,p,t));break;case 3:throw new Error("attribute value missed!!")}return l;case"":u=" ";default:if(u<=" ")switch(c){case 0:n.setTagName(e.slice(t,l)),c=6;break;case 1:d=e.slice(t,l),c=2;break;case 4:var p=e.slice(t,l);o.warning('attribute "'+p+'" missed quot(")!!'),a(d,p,t);case 5:c=6}else switch(c){case 2:n.tagName,i.isHTML(r[""])&&d.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+d+'" missed value!! "'+d+'" instead2!!'),a(d,d,t),t=l,c=1;break;case 5:o.warning('attribute space is required"'+d+'"!!');case 6:c=1,t=l;break;case 3:c=4,t=l;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}l++}}function u(e,t,n){for(var r=e.tagName,s=null,o=e.length;o--;){var a=e[o],d=a.qName,l=a.value;if((h=d.indexOf(":"))>0)var c=a.prefix=d.slice(0,h),u=d.slice(h+1),p="xmlns"===c&&u;else u=d,c=null,p="xmlns"===d&&"";a.localName=u,!1!==p&&(null==s&&(s={},f(n,n={})),n[p]=s[p]=l,a.uri=i.XMLNS,t.startPrefixMapping(p,l))}for(o=e.length;o--;)(c=(a=e[o]).prefix)&&("xml"===c&&(a.uri=i.XML),"xmlns"!==c&&(a.uri=n[c||""]));var h;(h=r.indexOf(":"))>0?(c=e.prefix=r.slice(0,h),u=e.localName=r.slice(h+1)):(c=null,u=e.localName=r);var g=e.uri=n[c||""];if(t.startElement(g,u,r,e),!e.closed)return e.currentNSMap=n,e.localNSMap=s,!0;if(t.endElement(g,u,r),s)for(c in s)Object.prototype.hasOwnProperty.call(s,c)&&t.endPrefixMapping(c)}function p(e,t,n,i,r){if(/^(?:script|textarea)$/i.test(n)){var s=e.indexOf("</"+n+">",t),o=e.substring(t+1,s);if(/[&<]/.test(o))return/^script$/i.test(n)?(r.characters(o,0,o.length),s):(o=o.replace(/&#?\w+;/g,i),r.characters(o,0,o.length),s)}return t+1}function h(e,t,n,i){var r=i[n];return null==r&&((r=e.lastIndexOf("</"+n+">"))<t&&(r=e.lastIndexOf("</"+n)),i[n]=r),r<t}function f(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function g(e,t,n,i){if("-"===e.charAt(t+2))return"-"===e.charAt(t+3)?(r=e.indexOf("--\x3e",t+4))>t?(n.comment(e,t+4,r-t-4),r+3):(i.error("Unclosed comment"),-1):-1;if("CDATA["==e.substr(t+3,6)){var r=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,r-t-9),n.endCDATA(),r+3}var s=function(e,t){var n,i=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(r.lastIndex=t,r.exec(e);n=r.exec(e);)if(i.push(n),n[1])return i}(e,t),o=s.length;if(o>1&&/!doctype/i.test(s[0][0])){var a=s[1][0],d=!1,l=!1;o>3&&(/^public$/i.test(s[2][0])?(d=s[3][0],l=o>4&&s[4][0]):/^system$/i.test(s[2][0])&&(l=s[3][0]));var c=s[o-1];return n.startDTD(a,d,l),n.endDTD(),c.index+c[0].length}return-1}function m(e,t,n){var i=e.indexOf("?>",t);if(i){var r=e.substring(t,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return r?(r[0].length,n.processingInstruction(r[1],r[2]),i+2):-1}return-1}function y(){this.attributeNames={}}a.prototype=new Error,a.prototype.name=a.name,d.prototype={parse:function(e,t,n){var r=this.domBuilder;r.startDocument(),f(t,t={}),function(e,t,n,r,s){function o(e){var t=e.slice(1,-1);return Object.hasOwnProperty.call(n,t)?n[t]:"#"===t.charAt(0)?function(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(s.error("entity not found:"+e),e)}function d(t){if(t>S){var n=e.substring(S,t).replace(/&#?\w+;/g,o);w&&f(S),r.characters(n,0,t-S),S=t}}function f(t,n){for(;t>=b&&(n=_.exec(e));)v=n.index,b=v+n[0].length,w.lineNumber++;w.columnNumber=t-v+1}for(var v=0,b=0,_=/.*(?:\r\n?|\n)|.*$/g,w=r.locator,T=[{currentNSMap:t}],I={},S=0;;){try{var k=e.indexOf("<",S);if(k<0){if(!e.substr(S).match(/^\s*$/)){var C=r.doc,E=C.createTextNode(e.substr(S));C.appendChild(E),r.currentElement=E}return}switch(k>S&&d(k),e.charAt(k+1)){case"/":var A=e.indexOf(">",k+3),P=e.substring(k+2,A).replace(/[ \t\n\r]+$/g,""),x=T.pop();A<0?(P=e.substring(k+2).replace(/[\s<].*/,""),s.error("end tag name: "+P+" is not complete:"+x.tagName),A=k+1+P.length):P.match(/\s</)&&(P=P.replace(/[\s<].*/,""),s.error("end tag name: "+P+" maybe not complete"),A=k+1+P.length);var D=x.localNSMap,O=x.tagName==P;if(O||x.tagName&&x.tagName.toLowerCase()==P.toLowerCase()){if(r.endElement(x.uri,x.localName,P),D)for(var R in D)Object.prototype.hasOwnProperty.call(D,R)&&r.endPrefixMapping(R);O||s.fatalError("end tag name: "+P+" is not match the current start tagName:"+x.tagName)}else T.push(x);A++;break;case"?":w&&f(k),A=m(e,k,r);break;case"!":w&&f(k),A=g(e,k,r,s);break;default:w&&f(k);var N=new y,M=T[T.length-1].currentNSMap,L=(A=c(e,k,N,M,o,s),N.length);if(!N.closed&&h(e,A,N.tagName,I)&&(N.closed=!0,n.nbsp||s.warning("unclosed xml attribute")),w&&L){for(var U=l(w,{}),j=0;j<L;j++){var B=N[j];f(B.offset),B.locator=l(w,{})}r.locator=U,u(N,r,M)&&T.push(N),r.locator=w}else u(N,r,M)&&T.push(N);i.isHTML(N.uri)&&!N.closed?A=p(e,A,N.tagName,o,r):A++}}catch(e){if(e instanceof a)throw e;s.error("element parse error: "+e),A=-1}A>S?S=A:d(Math.max(k,S)+1)}}(e,t,n,r,this.errorHandler),r.endDocument()}},y.prototype={setTagName:function(e){if(!o.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,n){if(!o.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},t.XMLReader=d,t.ParseError=a},6666:(e,t)=>{"use strict";t.byteLength=function(e){var t=a(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function(e){var t,n,s=a(e),o=s[0],d=s[1],l=new r(function(e,t,n){return 3*(t+n)/4-n}(0,o,d)),c=0,u=d>0?o-4:o;for(n=0;n<u;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;return 2===d&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,l[c++]=255&t),1===d&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t),l},t.fromByteArray=function(e){for(var t,i=e.length,r=i%3,s=[],o=16383,a=0,l=i-r;a<l;a+=o)s.push(d(e,a,a+o>l?l:a+o));return 1===r?(t=e[i-1],s.push(n[t>>2]+n[t<<4&63]+"==")):2===r&&(t=(e[i-2]<<8)+e[i-1],s.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),s.join("")};for(var n=[],i=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)n[o]=s[o],i[s.charCodeAt(o)]=o;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function d(e,t,i){for(var r,s,o=[],a=t;a<i;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(n[(s=r)>>18&63]+n[s>>12&63]+n[s>>6&63]+n[63&s]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},9945:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){null!==e&&this.fromHexString(e)}return e.prototype.toHexString=function(){if(this.s<0)return"-"+this.negate().toHexString();var e,t=!1,n="",i=this.t,r=this.DB-i*this.DB%4;if(i-- >0)for(r<this.DB&&(e=this[i]>>r)>0&&(t=!0,n=u(e));i>=0;)r<4?(e=(this[i]&(1<<r)-1)<<4-r,e|=this[--i]>>(r+=this.DB-4)):(e=this[i]>>(r-=4)&15,r<=0&&(r+=this.DB,--i)),e>0&&(t=!0),t&&(n+=u(e));return t?n:"0"},e.prototype.fromHexString=function(t){if(null!==t){this.t=0,this.s=0;for(var n=t.length,i=!1,r=0;--n>=0;){var s=l(t,n);s<0?"-"==t.charAt(n)&&(i=!0):(i=!1,0==r?this[this.t++]=s:r+4>this.DB?(this[this.t-1]|=(s&(1<<this.DB-r)-1)<<r,this[this.t++]=s>>this.DB-r):this[this.t-1]|=s<<r,(r+=4)>=this.DB&&(r-=this.DB))}this.clamp(),i&&e.ZERO.subTo(this,this)}},e.prototype.negate=function(){var t=r();return e.ZERO.subTo(this,t),t},e.prototype.abs=function(){return this.s<0?this.negate():this},e.prototype.mod=function(t){var n=r();return this.abs().divRemTo(t,null,n),this.s<0&&n.compareTo(e.ZERO)>0&&t.subTo(n,n),n},e.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},e.prototype.lShiftTo=function(e,t){for(var n=e%this.DB,i=this.DB-n,r=(1<<i)-1,s=Math.floor(e/this.DB),o=this.s<<n&this.DM,a=this.t-1;a>=0;--a)t[a+s+1]=this[a]>>i|o,o=(this[a]&r)<<n;for(a=s-1;a>=0;--a)t[a]=0;t[s]=o,t.t=this.t+s+1,t.s=this.s,t.clamp()},e.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},e.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},e.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var i=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,i,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},e.prototype.multiplyTo=function(t,n){var i=this.abs(),r=t.abs(),s=i.t;for(n.t=s+r.t;--s>=0;)n[s]=0;for(s=0;s<r.t;++s)n[s+i.t]=i.am(0,r[s],n,s,0,i.t);n.s=0,n.clamp(),this.s!=t.s&&e.ZERO.subTo(n,n)},e.prototype.divRemTo=function(t,n,i){var o=t.abs();if(!(o.t<=0)){var a=this.abs();if(a.t<o.t)return null!=n&&n.fromHexString("0"),void(null!=i&&this.copyTo(i));null==i&&(i=r());var d=r(),l=this.s,c=t.s,u=this.DB-s(o[o.t-1]);u>0?(o.lShiftTo(u,d),a.lShiftTo(u,i)):(o.copyTo(d),a.copyTo(i));var p=d.t,h=d[p-1];if(0!=h){var f=h*(1<<this.F1)+(p>1?d[p-2]>>this.F2:0),g=this.FV/f,m=(1<<this.F1)/f,y=1<<this.F2,v=i.t,b=v-p,_=null==n?r():n;for(d.dlShiftTo(b,_),i.compareTo(_)>=0&&(i[i.t++]=1,i.subTo(_,i)),e.ONE.dlShiftTo(p,_),_.subTo(d,d);d.t<p;)d[d.t++]=0;for(;--b>=0;){var w=i[--v]==h?this.DM:Math.floor(i[v]*g+(i[v-1]+y)*m);if((i[v]+=d.am(0,w,i,b,0,p))<w)for(d.dlShiftTo(b,_),i.subTo(_,i);i[v]<--w;)i.subTo(_,i)}null!=n&&(i.drShiftTo(p,n),l!=c&&e.ZERO.subTo(n,n)),i.t=p,i.clamp(),u>0&&i.rShiftTo(u,i),l<0&&e.ZERO.subTo(i,i)}}},e.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var i=e%this.DB,r=this.DB-i,s=(1<<i)-1;t[0]=this[n]>>i;for(var o=n+1;o<this.t;++o)t[o-n-1]|=(this[o]&s)<<r,t[o-n]=this[o]>>i;i>0&&(t[this.t-n-1]|=(this.s&s)<<r),t.t=this.t-n,t.clamp()}},e.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},e.prototype.subTo=function(e,t){for(var n=0,i=0,r=Math.min(e.t,this.t);n<r;)i+=this[n]-e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i-=e[n],t[n++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=i<0?-1:0,i<-1?t[n++]=this.DV+i:i>0&&(t[n++]=i),t.t=n,t.clamp()},e.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},e.prototype.modPowInt=function(e,t){var n;return n=e<256||t.isEven()?new p(t):new h(t),this.exp(e,n)},e.prototype.exp=function(t,n){if(t>4294967295||t<1)return e.ONE;var i=r(),o=r(),a=n.convert(this),d=s(t)-1;for(a.copyTo(i);--d>=0;)if(n.sqrTo(i,o),(t&1<<d)>0)n.mulTo(o,a,i);else{var l=i;i=o,o=l}return n.revert(i)},e.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},e.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},e.prototype.am1=function(e,t,n,i,r,s){for(;--s>=0;){var o=t*this[e++]+n[i]+r;r=Math.floor(o/67108864),n[i++]=67108863&o}return r},e.prototype.am2=function(e,t,n,i,r,s){for(var o=32767&t,a=t>>15;--s>=0;){var d=32767&this[e],l=this[e++]>>15,c=a*d+l*o;r=((d=o*d+((32767&c)<<15)+n[i]+(1073741823&r))>>>30)+(c>>>15)+a*l+(r>>>30),n[i++]=1073741823&d}return r},e.prototype.am3=function(e,t,n,i,r,s){for(var o=16383&t,a=t>>14;--s>=0;){var d=16383&this[e],l=this[e++]>>14,c=a*d+l*o;r=((d=o*d+((16383&c)<<14)+n[i]+r)>>28)+(c>>14)+a*l,n[i++]=268435455&d}return r},e}();function r(){return new i(null)}function s(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}t.BigInteger=i,t.nbi=r,t.nbits=s;var o,a,d=[];for(o="0".charCodeAt(0),a=0;a<=9;++a)d[o++]=a;for(o="a".charCodeAt(0),a=10;a<36;++a)d[o++]=a;for(o="A".charCodeAt(0),a=10;a<36;++a)d[o++]=a;function l(e,t){var n=d[e.charCodeAt(t)];return null==n?-1:n}t.intAt=l;var c="0123456789abcdefghijklmnopqrstuvwxyz";function u(e){return c.charAt(e)}t.int2char=u,t.b64toHex=function(e){var t,n="",i=0,r=0;for(t=0;t<e.length&&"="!=e.charAt(t);++t){var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(t));s<0||(0==i?(n+=u(s>>2),r=3&s,i=1):1==i?(n+=u(r<<2|s>>4),r=15&s,i=2):2==i?(n+=u(r),n+=u(s>>2),r=3&s,i=3):(n+=u(r<<2|s>>4),n+=u(15&s),i=0))}return 1==i&&(n+=u(r<<2)),n},t.removeExtraSymbols=function(e){return e.replace(/^1f+00/,"").replace("3031300d060960864801650304020105000420","")};var p=function(){function e(e){this.m=e}return e.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},e.prototype.revert=function(e){return e},e.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},e.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},e.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},e}(),h=function(){function e(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}return e.prototype.convert=function(e){var t=r();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(i.ZERO)>0&&this.m.subTo(t,t),t},e.prototype.revert=function(e){var t=r();return e.copyTo(t),this.reduce(t),t},e.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],i=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,i,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},e.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},e.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},e}();function f(e){var t=r();return t.fromHexString(e.toString()),t}t.nbv=f,i.ZERO=f(0),i.ONE=f(1),"Microsoft Internet Explorer"==navigator.appName?(i.prototype.am=i.prototype.am2,n=30):"Netscape"!=navigator.appName?(i.prototype.am=i.prototype.am1,n=26):(i.prototype.am=i.prototype.am3,n=28),i.prototype.DB=n,i.prototype.DM=(1<<n)-1,i.prototype.DV=1<<n,i.prototype.FV=Math.pow(2,52),i.prototype.F1=52-n,i.prototype.F2=2*n-52},2529:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.hash=function(t){t=e.utf8Encode(t||"");for(var n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],i=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],r=(t+=String.fromCharCode(128)).length/4+2,s=Math.ceil(r/16),o=new Array(s),a=0;a<s;a++){o[a]=new Array(16);for(var d=0;d<16;d++)o[a][d]=t.charCodeAt(64*a+4*d)<<24|t.charCodeAt(64*a+4*d+1)<<16|t.charCodeAt(64*a+4*d+2)<<8|t.charCodeAt(64*a+4*d+3)<<0}var l=8*(t.length-1)/Math.pow(2,32),c=8*(t.length-1)>>>0;for(o[s-1][14]=Math.floor(l),o[s-1][15]=c,a=0;a<s;a++){for(var u=new Array(64),p=0;p<16;p++)u[p]=o[a][p];for(p=16;p<64;p++)u[p]=e.q1(u[p-2])+u[p-7]+e.q0(u[p-15])+u[p-16]>>>0;var h=i[0],f=i[1],g=i[2],m=i[3],y=i[4],v=i[5],b=i[6],_=i[7];for(p=0;p<64;p++){var w=_+e.z1(y)+e.Ch(y,v,b)+n[p]+u[p],T=e.z0(h)+e.Maj(h,f,g);_=b,b=v,v=y,y=m+w>>>0,m=g,g=f,f=h,h=w+T>>>0}i[0]=i[0]+h>>>0,i[1]=i[1]+f>>>0,i[2]=i[2]+g>>>0,i[3]=i[3]+m>>>0,i[4]=i[4]+y>>>0,i[5]=i[5]+v>>>0,i[6]=i[6]+b>>>0,i[7]=i[7]+_>>>0}var I=new Array(i.length);for(_=0;_<i.length;_++)I[_]=("00000000"+i[_].toString(16)).slice(-8);return I.join("")},e.utf8Encode=function(e){try{return(new TextEncoder).encode(e).reduce((function(e,t){return e+String.fromCharCode(t)}),"")}catch(t){return unescape(encodeURIComponent(e))}},e.ROTR=function(e,t){return t>>>e|t<<32-e},e.z0=function(t){return e.ROTR(2,t)^e.ROTR(13,t)^e.ROTR(22,t)},e.z1=function(t){return e.ROTR(6,t)^e.ROTR(11,t)^e.ROTR(25,t)},e.q0=function(t){return e.ROTR(7,t)^e.ROTR(18,t)^t>>>3},e.q1=function(t){return e.ROTR(17,t)^e.ROTR(19,t)^t>>>10},e.Ch=function(e,t,n){return e&t^~e&n},e.Maj=function(e,t,n){return e&t^e&n^t&n},e}();t.Sha256=n},4651:(e,t,n)=>{"use strict";var i=n(9945),r=n(2529);t.T=function(e,t,n,s){var o=new i.BigInteger(i.b64toHex(t)),a=new i.BigInteger(i.b64toHex(n)),d=o.modPowInt(s,a);return i.removeExtraSymbols(d.toHexString())===r.Sha256.hash(e)}},5446:(e,t,n)=>{"use strict";function i(e,t,n,i,r){for(t=t.split?t.split("."):t,i=0;i<t.length;i++)e=e?e[t[i]]:r;return e===r?n:e}n.d(t,{Z:()=>i})},3346:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,i){function r(n){e.removeListener(t,s),i(n)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}g(e,t,s,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,r)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function d(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function l(e,t,n,i){var r,s,o,l;if(a(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]),void 0===o)o=s[t]=n,++e._eventsCount;else if("function"==typeof o?o=s[t]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),(r=d(e))>0&&o.length>r&&!o.warned){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=o.length,l=c,console&&console.warn&&console.warn(l)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=c.bind(i);return r.listener=n,i.wrapFn=r,r}function p(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):f(r,r.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function g(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(s){i.once&&e.removeEventListener(t,r),n(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return d(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,s=this._events;if(void 0!==s)r=r&&void 0===s.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var d=s[e];if(void 0===d)return!1;if("function"==typeof d)i(d,this,t);else{var l=d.length,c=f(d,l);for(n=0;n<l;++n)i(c[n],this,t)}return!0},s.prototype.addListener=function(e,t){return l(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return l(this,e,t,!0)},s.prototype.once=function(e,t){return a(t),this.on(e,u(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,u(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,i,r,s,o;if(a(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){o=n[s].listener,r=s;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,s=Object.keys(n);for(i=0;i<s.length;++i)"removeListener"!==(r=s[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},s.prototype.listeners=function(e){return p(this,e,!0)},s.prototype.rawListeners=function(e){return p(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},s.prototype.listenerCount=h,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},1242:e=>{a.SYNC=1,a.ASYNC=2,a.QUEUE=4;var t="fun-hooks",n=Object.freeze({useProxy:!0,ready:0}),i=new WeakMap,r="2,1,0"===[1].reduce((function(e,t,n){return[e,t,n]}),2).toString()?Array.prototype.reduce:function(e,t){var n,i=Object(this),r=i.length>>>0,s=0;if(t)n=t;else{for(;s<r&&!(s in i);)s++;n=i[s++]}for(;s<r;)s in i&&(n=e(n,i[s],s,i)),s++;return n};function s(e,t){return Array.prototype.slice.call(e,t)}var o=Object.assign||function(e){return r.call(s(arguments,1),(function(e,t){return t&&Object.keys(t).forEach((function(n){e[n]=t[n]})),e}),e)};function a(e){var d,l={},c=[];function u(e,t){return"function"==typeof e?g.call(null,"sync",e,t):"string"==typeof e&&"function"==typeof t?g.apply(null,arguments):"object"==typeof e?p.apply(null,arguments):void 0}function p(e,t,n){var i=!0;void 0===t&&(t=Object.getOwnPropertyNames(e),i=!1);var r={},s=["constructor"];do{(t=t.filter((function(t){return!("function"!=typeof e[t]||-1!==s.indexOf(t)||t.match(/^_/))}))).forEach((function(t){var i=t.split(":"),s=i[0],o=i[1]||"sync";if(!r[s]){var a=e[s];r[s]=e[s]=g(o,a,n?[n,s]:void 0)}})),e=Object.getPrototypeOf(e)}while(i&&e);return r}function h(e){var n=Array.isArray(e)?e:e.split(".");return r.call(n,(function(i,r,s){var o=i[r],a=!1;return o||(s===n.length-1?(d||c.push((function(){a||console.warn(t+": referenced '"+e+"' but it was never created")})),i[r]=f((function(e){i[r]=e,a=!0}))):i[r]={})}),l)}function f(e){var t=[],n=[],r=function(){},s={before:function(e,n){return d.call(this,t,"before",e,n)},after:function(e,t){return d.call(this,n,"after",e,t)},getHooks:function(e){var i=t.concat(n);"object"==typeof e&&(i=i.filter((function(t){return Object.keys(e).every((function(n){return t[n]===e[n]}))})));try{o(i,{remove:function(){return i.forEach((function(e){e.remove()})),this}})}catch(e){console.error("error adding `remove` to array, did you modify Array.prototype?")}return i},removeAll:function(){return this.getHooks().remove()}},a={install:function(i,s,o){this.type=i,r=o,o(t,n),e&&e(s)}};return i.set(s.after,a),s;function d(e,i,s,o){var a={hook:s,type:i,priority:o||10,remove:function(){var i=e.indexOf(a);-1!==i&&(e.splice(i,1),r(t,n))}};return e.push(a),e.sort((function(e,t){return t.priority-e.priority})),r(t,n),this}}function g(n,r,l){var u=r.after&&i.get(r.after);if(u){if(u.type!==n)throw t+": recreated hookable with different type";return r}var p,g,m=l?h(l):f(),y={get:function(e,t){return m[t]||Reflect.get.apply(Reflect,arguments)}};return d||c.push(v),e.useProxy&&"function"==typeof Proxy&&Proxy.revocable?g=new Proxy(r,y):(g=function(){return y.apply?y.apply(r,this,s(arguments)):r.apply(this,arguments)},o(g,m)),i.get(g.after).install(n,g,(function(e,t){var i,r=[];function o(e){r.push(e.hook)}e.length||t.length?(e.forEach(o),i=r.push(void 0)-1,t.forEach(o),p=function(e,t,o){var a,d=0,l="async"===n&&"function"==typeof o[o.length-1]&&o.pop();function c(e){"sync"===n?a=e:l&&l.apply(null,arguments)}function u(e){if(r[d]){var i=s(arguments);return u.bail=c,i.unshift(u),r[d++].apply(t,i)}"sync"===n?a=e:l&&l.apply(null,arguments)}return r[i]=function(){var i=s(arguments,1);"async"===n&&l&&(delete u.bail,i.push(u));var r=e.apply(t,i);"sync"===n&&u(r)},u.apply(null,o),a}):p=void 0,v()})),g;function v(){!d&&("sync"!==n||e.ready&a.SYNC)&&("async"!==n||e.ready&a.ASYNC)?"sync"!==n&&e.ready&a.QUEUE?y.apply=function(){var e=arguments;c.push((function(){g.apply(e[1],e[2])}))}:y.apply=function(){throw t+": hooked function not ready"}:y.apply=p}}return(e=o({},n,e)).ready?u.ready=function(){d=!0,function(e){for(var t;t=e.shift();)t()}(c)}:d=!0,u.get=h,u}e.exports=a},1709:(e,t,n)=>{var i,r=void 0!==n.g?n.g:"undefined"!=typeof window?window:{},s=n(4760);"undefined"!=typeof document?i=document:(i=r["__GLOBAL_DOCUMENT_CACHE@4"])||(i=r["__GLOBAL_DOCUMENT_CACHE@4"]=s),e.exports=i},1667:(e,t,n)=>{var i;i="undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},e.exports=i},9258:(e,t)=>{t.read=function(e,t,n,i,r){var s,o,a=8*r-i-1,d=(1<<a)-1,l=d>>1,c=-7,u=n?r-1:0,p=n?-1:1,h=e[t+u];for(u+=p,s=h&(1<<-c)-1,h>>=-c,c+=a;c>0;s=256*s+e[t+u],u+=p,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=i;c>0;o=256*o+e[t+u],u+=p,c-=8);if(0===s)s=1-l;else{if(s===d)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,i),s-=l}return(h?-1:1)*o*Math.pow(2,s-i)},t.write=function(e,t,n,i,r,s){var o,a,d,l=8*s-r-1,c=(1<<l)-1,u=c>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,h=i?0:s-1,f=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-o))<1&&(o--,d*=2),(t+=o+u>=1?p/d:p*Math.pow(2,1-u))*d>=2&&(o++,d/=2),o+u>=c?(a=0,o=c):o+u>=1?(a=(t*d-1)*Math.pow(2,r),o+=u):(a=t*Math.pow(2,u-1)*Math.pow(2,r),o=0));r>=8;e[n+h]=255&a,h+=f,a/=256,r-=8);for(o=o<<r|a,l+=r;l>0;e[n+h]=255&o,h+=f,o/=256,l-=8);e[n+h-f]|=128*g}},3730:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},8495:e=>{e.exports=function(e){if(!e)return!1;var n=t.call(e);return"[object Function]"===n||"function"==typeof e&&"[object RegExp]"!==n||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var t=Object.prototype.toString},1269:e=>{e.exports=function e(t){var n=Array.isArray(t)?[]:{};for(var i in t){var r=t[i];n[i]=r&&"object"==typeof r?e(r):r}return n}},390:(e,t)=>{function n(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return o[e];var n,s=String(e);return(n=i[s.toLowerCase()])?n:(n=r[s.toLowerCase()])||(1===s.length?s.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"==typeof e){var n=e.which||e.keyCode||e.charCode;if(null==n)return!1;if("string"==typeof t){var s;if(s=i[t.toLowerCase()])return s===n;if(s=r[t.toLowerCase()])return s===n}else if("number"==typeof t)return t===n;return!1}};var i=(t=e.exports=n).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=t.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(s=97;s<123;s++)i[String.fromCharCode(s)]=s-32;for(var s=48;s<58;s++)i[s-48]=s;for(s=1;s<13;s++)i["f"+s]=s+111;for(s=0;s<10;s++)i["numpad "+s]=s+96;var o=t.names=t.title={};for(s in i)o[i[s]]=s;for(var a in r)i[a]=r[a]},4399:function(e){!function(t){var n,i={},r={16:!1,18:!1,17:!1,91:!1},s="all",o={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,command:91},a={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},d=function(e){return a[e]||e.toUpperCase().charCodeAt(0)},l=[];for(n=1;n<20;n++)a["f"+n]=111+n;function c(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function u(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var p={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function h(e){for(n in r)r[n]=e[p[n]]}function f(e,t,n){var r,s;r=m(e),void 0===n&&(n=t,t="all");for(var o=0;o<r.length;o++)s=[],(e=r[o].split("+")).length>1&&(s=y(e),e=[e[e.length-1]]),e=e[0],(e=d(e))in i||(i[e]=[]),i[e].push({shortcut:r[o],scope:t,method:n,key:r[o],mods:s})}for(n in o)f[n]=!1;function g(){return s||"all"}function m(e){var t;return""==(t=(e=e.replace(/\s/g,"")).split(","))[t.length-1]&&(t[t.length-2]+=","),t}function y(e){for(var t=e.slice(0,e.length-1),n=0;n<t.length;n++)t[n]=o[t[n]];return t}function v(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,(function(){n(window.event)}))}v(document,"keydown",(function(e){!function(e){var t,n,s,a,d,u;if(t=e.keyCode,-1==c(l,t)&&l.push(t),93!=t&&224!=t||(t=91),t in r)for(s in r[t]=!0,o)o[s]==t&&(f[s]=!0);else if(h(e),f.filter.call(this,e)&&t in i)for(u=g(),a=0;a<i[t].length;a++)if((n=i[t][a]).scope==u||"all"==n.scope){for(s in d=n.mods.length>0,r)(!r[s]&&c(n.mods,+s)>-1||r[s]&&-1==c(n.mods,+s))&&(d=!1);(0!=n.mods.length||r[16]||r[18]||r[17]||r[91])&&!d||!1===n.method(e,n)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}(e)})),v(document,"keyup",(function(e){var t,n=e.keyCode,i=c(l,n);if(i>=0&&l.splice(i,1),93!=n&&224!=n||(n=91),n in r)for(t in r[n]=!1,o)o[t]==n&&(f[t]=!1)})),v(window,"focus",(function(){for(n in r)r[n]=!1;for(n in o)f[n]=!1}));var b=t.key;t.key=f,t.key.setScope=function(e){s=e||"all"},t.key.getScope=g,t.key.deleteScope=function(e){var t,n,r;for(t in i)for(n=i[t],r=0;r<n.length;)n[r].scope===e?n.splice(r,1):r++},t.key.filter=function(e){var t=(e.target||e.srcElement).tagName;return!("INPUT"==t||"SELECT"==t||"TEXTAREA"==t)},t.key.isPressed=function(e){return"string"==typeof e&&(e=d(e)),-1!=c(l,e)},t.key.getPressedKeyCodes=function(){return l.slice(0)},t.key.noConflict=function(){var e=t.key;return t.key=b,e},t.key.unbind=function(e,t){var n,r,s,o,a,l=[];for(n=m(e),o=0;o<n.length;o++){if((r=n[o].split("+")).length>1&&(l=y(r),e=r[r.length-1]),e=d(e),void 0===t&&(t=g()),!i[e])return;for(s=0;s<i[e].length;s++)(a=i[e][s]).scope===t&&u(a.mods,l)&&(i[e][s]={})}},e.exports=f}(this)},9288:(e,t,n)=>{var i,r="__lodash_hash_undefined__",s=1/0,o="[object Function]",a="[object GeneratorFunction]",d="[object Symbol]",l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/,u=/^\./,p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,h=/\\(\\)?/g,f=/^\[object .+?Constructor\]$/,g="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,m="object"==typeof self&&self&&self.Object===Object&&self,y=g||m||Function("return this")(),v=Array.prototype,b=Function.prototype,_=Object.prototype,w=y["__core-js_shared__"],T=(i=/[^.]+$/.exec(w&&w.keys&&w.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",I=b.toString,S=_.hasOwnProperty,k=_.toString,C=RegExp("^"+I.call(S).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),E=y.Symbol,A=v.splice,P=j(y,"Map"),x=j(Object,"create"),D=E?E.prototype:void 0,O=D?D.toString:void 0;function R(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function N(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function M(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function L(e,t){for(var n,i,r=e.length;r--;)if((n=e[r][0])===(i=t)||n!=n&&i!=i)return r;return-1}function U(e,t){var n,i,r=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function j(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!z(e)||T&&T in e)return!1;var t=function(e){var t=z(e)?k.call(e):"";return t==o||t==a}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?C:f;return t.test(function(e){if(null!=e){try{return I.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}R.prototype.clear=function(){this.__data__=x?x(null):{}},R.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},R.prototype.get=function(e){var t=this.__data__;if(x){var n=t[e];return n===r?void 0:n}return S.call(t,e)?t[e]:void 0},R.prototype.has=function(e){var t=this.__data__;return x?void 0!==t[e]:S.call(t,e)},R.prototype.set=function(e,t){return this.__data__[e]=x&&void 0===t?r:t,this},N.prototype.clear=function(){this.__data__=[]},N.prototype.delete=function(e){var t=this.__data__,n=L(t,e);return!(n<0||(n==t.length-1?t.pop():A.call(t,n,1),0))},N.prototype.get=function(e){var t=this.__data__,n=L(t,e);return n<0?void 0:t[n][1]},N.prototype.has=function(e){return L(this.__data__,e)>-1},N.prototype.set=function(e,t){var n=this.__data__,i=L(n,e);return i<0?n.push([e,t]):n[i][1]=t,this},M.prototype.clear=function(){this.__data__={hash:new R,map:new(P||N),string:new R}},M.prototype.delete=function(e){return U(this,e).delete(e)},M.prototype.get=function(e){return U(this,e).get(e)},M.prototype.has=function(e){return U(this,e).has(e)},M.prototype.set=function(e,t){return U(this,e).set(e,t),this};var B=F((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if($(e))return O?O.call(e):"";var t=e+"";return"0"==t&&1/e==-s?"-0":t}(t);var n=[];return u.test(e)&&n.push(""),e.replace(p,(function(e,t,i,r){n.push(i?r.replace(h,"$1"):t||e)})),n}));function q(e){if("string"==typeof e||$(e))return e;var t=e+"";return"0"==t&&1/e==-s?"-0":t}function F(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=e.apply(this,i);return n.cache=s.set(r,o),o};return n.cache=new(F.Cache||M),n}F.Cache=M;var V=Array.isArray;function z(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function $(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&k.call(e)==d}e.exports=function(e,t,n){var i=null==e?void 0:function(e,t){var n;t=function(e,t){if(V(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!$(e))||c.test(e)||!l.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:V(n=t)?n:B(n);for(var i=0,r=t.length;null!=e&&i<r;)e=e[q(t[i++])];return i&&i==r?e:void 0}(e,t);return void 0===i?n:i}},7019:(e,t,n)=>{var i="__lodash_hash_undefined__",r="[object Function]",s="[object GeneratorFunction]",o=/^\[object .+?Constructor\]$/,a="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,d="object"==typeof self&&self&&self.Object===Object&&self,l=a||d||Function("return this")();function c(e,t){return!(!e||!e.length)&&function(e,t,n){if(t!=t)return function(e,t,n,i){for(var r=e.length,s=-1;++s<r;)if(t(e[s],s,e))return s;return-1}(e,p);for(var i=-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}(e,t)>-1}function u(e,t){for(var n=-1,i=e?e.length:0,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function p(e){return e!=e}function h(e,t){return e.has(t)}var f,g=Array.prototype,m=Function.prototype,y=Object.prototype,v=l["__core-js_shared__"],b=(f=/[^.]+$/.exec(v&&v.keys&&v.keys.IE_PROTO||""))?"Symbol(src)_1."+f:"",_=m.toString,w=y.hasOwnProperty,T=y.toString,I=RegExp("^"+_.call(w).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),S=g.splice,k=Math.max,C=Math.min,E=L(l,"Map"),A=L(Object,"create");function P(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function x(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function D(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function O(e){var t=-1,n=e?e.length:0;for(this.__data__=new D;++t<n;)this.add(e[t])}function R(e,t){for(var n,i,r=e.length;r--;)if((n=e[r][0])===(i=t)||n!=n&&i!=i)return r;return-1}function N(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!q(e)}(e)}(e)?e:[]}function M(e,t){var n,i,r=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function L(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!F(e)||b&&b in e)return!1;var t=q(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?I:o;return t.test(function(e){if(null!=e){try{return _.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}P.prototype.clear=function(){this.__data__=A?A(null):{}},P.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},P.prototype.get=function(e){var t=this.__data__;if(A){var n=t[e];return n===i?void 0:n}return w.call(t,e)?t[e]:void 0},P.prototype.has=function(e){var t=this.__data__;return A?void 0!==t[e]:w.call(t,e)},P.prototype.set=function(e,t){return this.__data__[e]=A&&void 0===t?i:t,this},x.prototype.clear=function(){this.__data__=[]},x.prototype.delete=function(e){var t=this.__data__,n=R(t,e);return!(n<0||(n==t.length-1?t.pop():S.call(t,n,1),0))},x.prototype.get=function(e){var t=this.__data__,n=R(t,e);return n<0?void 0:t[n][1]},x.prototype.has=function(e){return R(this.__data__,e)>-1},x.prototype.set=function(e,t){var n=this.__data__,i=R(n,e);return i<0?n.push([e,t]):n[i][1]=t,this},D.prototype.clear=function(){this.__data__={hash:new P,map:new(E||x),string:new P}},D.prototype.delete=function(e){return M(this,e).delete(e)},D.prototype.get=function(e){return M(this,e).get(e)},D.prototype.has=function(e){return M(this,e).has(e)},D.prototype.set=function(e,t){return M(this,e).set(e,t),this},O.prototype.add=O.prototype.push=function(e){return this.__data__.set(e,i),this},O.prototype.has=function(e){return this.__data__.has(e)};var U,j,B=(U=function(e){var t=u(e,N);return t.length&&t[0]===e[0]?function(e,t,n){for(var i=c,r=e[0].length,s=e.length,o=s,a=Array(s),d=1/0,l=[];o--;){var u=e[o];d=C(u.length,d),a[o]=r>=120&&u.length>=120?new O(o&&u):void 0}u=e[0];var p=-1,f=a[0];e:for(;++p<r&&l.length<d;){var g=u[p],m=g;if(g=0!==g?g:0,!(f?h(f,m):i(l,m,n))){for(o=s;--o;){var y=a[o];if(!(y?h(y,m):i(e[o],m,n)))continue e}f&&f.push(m),l.push(g)}}return l}(t):[]},j=k(void 0===j?U.length-1:j,0),function(){for(var e=arguments,t=-1,n=k(e.length-j,0),i=Array(n);++t<n;)i[t]=e[j+t];t=-1;for(var r=Array(j+1);++t<j;)r[t]=e[t];return r[j]=i,function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(U,this,r)});function q(e){var t=F(e)?T.call(e):"";return t==r||t==s}function F(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=B},8909:(e,t,n)=>{var i,r="__lodash_hash_undefined__",s="[object Function]",o="[object GeneratorFunction]",a=/^\[object .+?Constructor\]$/,d="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,l="object"==typeof self&&self&&self.Object===Object&&self,c=d||l||Function("return this")(),u=Array.prototype,p=Function.prototype,h=Object.prototype,f=c["__core-js_shared__"],g=(i=/[^.]+$/.exec(f&&f.keys&&f.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",m=p.toString,y=h.hasOwnProperty,v=h.toString,b=RegExp("^"+m.call(y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_=u.splice,w=A(c,"Map"),T=A(Object,"create");function I(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function S(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function k(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function C(e,t){for(var n,i,r=e.length;r--;)if((n=e[r][0])===(i=t)||n!=n&&i!=i)return r;return-1}function E(e,t){var n,i,r=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function A(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!x(e)||g&&g in e)return!1;var t=function(e){var t=x(e)?v.call(e):"";return t==s||t==o}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?b:a;return t.test(function(e){if(null!=e){try{return m.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}function P(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=e.apply(this,i);return n.cache=s.set(r,o),o};return n.cache=new(P.Cache||k),n}function x(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}I.prototype.clear=function(){this.__data__=T?T(null):{}},I.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},I.prototype.get=function(e){var t=this.__data__;if(T){var n=t[e];return n===r?void 0:n}return y.call(t,e)?t[e]:void 0},I.prototype.has=function(e){var t=this.__data__;return T?void 0!==t[e]:y.call(t,e)},I.prototype.set=function(e,t){return this.__data__[e]=T&&void 0===t?r:t,this},S.prototype.clear=function(){this.__data__=[]},S.prototype.delete=function(e){var t=this.__data__,n=C(t,e);return!(n<0||(n==t.length-1?t.pop():_.call(t,n,1),0))},S.prototype.get=function(e){var t=this.__data__,n=C(t,e);return n<0?void 0:t[n][1]},S.prototype.has=function(e){return C(this.__data__,e)>-1},S.prototype.set=function(e,t){var n=this.__data__,i=C(n,e);return i<0?n.push([e,t]):n[i][1]=t,this},k.prototype.clear=function(){this.__data__={hash:new I,map:new(w||S),string:new I}},k.prototype.delete=function(e){return E(this,e).delete(e)},k.prototype.get=function(e){return E(this,e).get(e)},k.prototype.has=function(e){return E(this,e).has(e)},k.prototype.set=function(e,t){return E(this,e).set(e,t),this},P.Cache=k,e.exports=P},6247:(e,t,n)=>{e=n.nmd(e);var i="__lodash_hash_undefined__",r=9007199254740991,s="[object Arguments]",o="[object AsyncFunction]",a="[object Function]",d="[object GeneratorFunction]",l="[object Null]",c="[object Object]",u="[object Proxy]",p="[object Undefined]",h=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,g={};g["[object Float32Array]"]=g["[object Float64Array]"]=g["[object Int8Array]"]=g["[object Int16Array]"]=g["[object Int32Array]"]=g["[object Uint8Array]"]=g["[object Uint8ClampedArray]"]=g["[object Uint16Array]"]=g["[object Uint32Array]"]=!0,g[s]=g["[object Array]"]=g["[object ArrayBuffer]"]=g["[object Boolean]"]=g["[object DataView]"]=g["[object Date]"]=g["[object Error]"]=g[a]=g["[object Map]"]=g["[object Number]"]=g[c]=g["[object RegExp]"]=g["[object Set]"]=g["[object String]"]=g["[object WeakMap]"]=!1;var m,y,v,b="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,_="object"==typeof self&&self&&self.Object===Object&&self,w=b||_||Function("return this")(),T=t&&!t.nodeType&&t,I=T&&e&&!e.nodeType&&e,S=I&&I.exports===T,k=S&&b.process,C=function(){try{return I&&I.require&&I.require("util").types||k&&k.binding&&k.binding("util")}catch(e){}}(),E=C&&C.isTypedArray,A=Array.prototype,P=Function.prototype,x=Object.prototype,D=w["__core-js_shared__"],O=P.toString,R=x.hasOwnProperty,N=(m=/[^.]+$/.exec(D&&D.keys&&D.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"",M=x.toString,L=O.call(Object),U=RegExp("^"+O.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),j=S?w.Buffer:void 0,B=w.Symbol,q=w.Uint8Array,F=(j&&j.allocUnsafe,y=Object.getPrototypeOf,v=Object,function(e){return y(v(e))}),V=Object.create,z=x.propertyIsEnumerable,$=A.splice,H=B?B.toStringTag:void 0,W=function(){try{var e=pe(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Z=j?j.isBuffer:void 0,G=Math.max,X=Date.now,K=pe(w,"Map"),J=pe(Object,"create"),Y=function(){function e(){}return function(t){if(!Se(t))return{};if(V)return V(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Q(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function ee(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function te(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function ne(e){var t=this.__data__=new ee(e);this.size=t.size}function ie(e,t,n){(void 0!==n&&!ye(e[t],n)||void 0===n&&!(t in e))&&oe(e,t,n)}function re(e,t,n){var i=e[t];R.call(e,t)&&ye(i,n)&&(void 0!==n||t in e)||oe(e,t,n)}function se(e,t){for(var n=e.length;n--;)if(ye(e[n][0],t))return n;return-1}function oe(e,t,n){"__proto__"==t&&W?W(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}Q.prototype.clear=function(){this.__data__=J?J(null):{},this.size=0},Q.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Q.prototype.get=function(e){var t=this.__data__;if(J){var n=t[e];return n===i?void 0:n}return R.call(t,e)?t[e]:void 0},Q.prototype.has=function(e){var t=this.__data__;return J?void 0!==t[e]:R.call(t,e)},Q.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=J&&void 0===t?i:t,this},ee.prototype.clear=function(){this.__data__=[],this.size=0},ee.prototype.delete=function(e){var t=this.__data__,n=se(t,e);return!(n<0||(n==t.length-1?t.pop():$.call(t,n,1),--this.size,0))},ee.prototype.get=function(e){var t=this.__data__,n=se(t,e);return n<0?void 0:t[n][1]},ee.prototype.has=function(e){return se(this.__data__,e)>-1},ee.prototype.set=function(e,t){var n=this.__data__,i=se(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},te.prototype.clear=function(){this.size=0,this.__data__={hash:new Q,map:new(K||ee),string:new Q}},te.prototype.delete=function(e){var t=ue(this,e).delete(e);return this.size-=t?1:0,t},te.prototype.get=function(e){return ue(this,e).get(e)},te.prototype.has=function(e){return ue(this,e).has(e)},te.prototype.set=function(e,t){var n=ue(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},ne.prototype.clear=function(){this.__data__=new ee,this.size=0},ne.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ne.prototype.get=function(e){return this.__data__.get(e)},ne.prototype.has=function(e){return this.__data__.has(e)},ne.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ee){var i=n.__data__;if(!K||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new te(i)}return n.set(e,t),this.size=n.size,this};function ae(e){return null==e?void 0===e?p:l:H&&H in Object(e)?function(e){var t=R.call(e,H),n=e[H];try{e[H]=void 0;var i=!0}catch(e){}var r=M.call(e);return i&&(t?e[H]=n:delete e[H]),r}(e):function(e){return M.call(e)}(e)}function de(e){return ke(e)&&ae(e)==s}function le(e,t,n,i,r){e!==t&&function(e,t,n){for(var i=-1,r=Object(e),s=n(e),o=s.length;o--;){var a=s[++i];if(!1===t(r[a],a,r))break}}(t,(function(s,o){if(r||(r=new ne),Se(s))!function(e,t,n,i,r,s,o){var a=ge(e,n),d=ge(t,n),l=o.get(d);if(l)ie(e,n,l);else{var u,p,h,f,g,m=s?s(a,d,n+"",e,t,o):void 0,y=void 0===m;if(y){var v=be(d),b=!v&&we(d),_=!v&&!b&&Ce(d);m=d,v||b||_?be(a)?m=a:ke(g=a)&&_e(g)?m=function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}(a):b?(y=!1,m=function(e,t){return e.slice()}(d)):_?(y=!1,f=new(h=(u=d).buffer).constructor(h.byteLength),new q(f).set(new q(h)),p=f,m=new u.constructor(p,u.byteOffset,u.length)):m=[]:function(e){if(!ke(e)||ae(e)!=c)return!1;var t=F(e);if(null===t)return!0;var n=R.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&O.call(n)==L}(d)||ve(d)?(m=a,ve(a)?m=function(e){return function(e,t,n,i){var r=!n;n||(n={});for(var s=-1,o=t.length;++s<o;){var a=t[s],d=void 0;void 0===d&&(d=e[a]),r?oe(n,a,d):re(n,a,d)}return n}(e,Ee(e))}(a):Se(a)&&!Te(a)||(m=function(e){return"function"!=typeof e.constructor||fe(e)?{}:Y(F(e))}(d))):y=!1}y&&(o.set(d,m),r(m,d,i,s,o),o.delete(d)),ie(e,n,m)}}(e,t,o,n,le,i,r);else{var a=i?i(ge(e,o),s,o+"",e,t,r):void 0;void 0===a&&(a=s),ie(e,o,a)}}),Ee)}var ce=W?function(e,t){return W(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:xe;function ue(e,t){var n,i,r=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function pe(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Se(e)||function(e){return!!N&&N in e}(e))&&(Te(e)?U:h).test(function(e){if(null!=e){try{return O.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}function he(e,t){var n=typeof e;return!!(t=null==t?r:t)&&("number"==n||"symbol"!=n&&f.test(e))&&e>-1&&e%1==0&&e<t}function fe(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||x)}function ge(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var me=function(e){var t=0,n=0;return function(){var i=X(),r=16-(i-n);if(n=i,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(ce);function ye(e,t){return e===t||e!=e&&t!=t}var ve=de(function(){return arguments}())?de:function(e){return ke(e)&&R.call(e,"callee")&&!z.call(e,"callee")},be=Array.isArray;function _e(e){return null!=e&&Ie(e.length)&&!Te(e)}var we=Z||function(){return!1};function Te(e){if(!Se(e))return!1;var t=ae(e);return t==a||t==d||t==o||t==u}function Ie(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function Se(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ke(e){return null!=e&&"object"==typeof e}var Ce=E?function(e){return function(t){return e(t)}}(E):function(e){return ke(e)&&Ie(e.length)&&!!g[ae(e)]};function Ee(e){return _e(e)?function(e,t){var n=be(e),i=!n&&ve(e),r=!n&&!i&&we(e),s=!n&&!i&&!r&&Ce(e),o=n||i||r||s,a=o?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],d=a.length;for(var l in e)!t&&!R.call(e,l)||o&&("length"==l||r&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||he(l,d))||a.push(l);return a}(e,!0):function(e){if(!Se(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=fe(e),n=[];for(var i in e)("constructor"!=i||!t&&R.call(e,i))&&n.push(i);return n}(e)}var Ae,Pe=(Ae=function(e,t,n){le(e,t,n)},function(e,t){return me(function(e,t,n){return t=G(void 0===t?e.length-1:t,0),function(){for(var i=arguments,r=-1,s=G(i.length-t,0),o=Array(s);++r<s;)o[r]=i[t+r];r=-1;for(var a=Array(t+1);++r<t;)a[r]=i[r];return a[t]=n(o),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,a)}}(e,t,xe),e+"")}((function(e,t){var n=-1,i=t.length,r=i>1?t[i-1]:void 0,s=i>2?t[2]:void 0;for(r=Ae.length>3&&"function"==typeof r?(i--,r):void 0,s&&function(e,t,n){if(!Se(n))return!1;var i=typeof t;return!!("number"==i?_e(n)&&he(t,n.length):"string"==i&&t in n)&&ye(n[t],e)}(t[0],t[1],s)&&(r=i<3?void 0:r,i=1),e=Object(e);++n<i;){var o=t[n];o&&Ae(e,o,n)}return e})));function xe(e){return e}e.exports=Pe},8622:(e,t,n)=>{var i,r="__lodash_hash_undefined__",s=1/0,o=9007199254740991,a="[object Function]",d="[object GeneratorFunction]",l="[object Symbol]",c=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/,p=/^\./,h=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/\\(\\)?/g,g=/^\[object .+?Constructor\]$/,m=/^(?:0|[1-9]\d*)$/,y="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,v="object"==typeof self&&self&&self.Object===Object&&self,b=y||v||Function("return this")(),_=Array.prototype,w=Function.prototype,T=Object.prototype,I=b["__core-js_shared__"],S=(i=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",k=w.toString,C=T.hasOwnProperty,E=T.toString,A=RegExp("^"+k.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),P=b.Symbol,x=_.splice,D=F(b,"Map"),O=F(Object,"create"),R=P?P.prototype:void 0,N=R?R.toString:void 0;function M(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function L(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function U(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function j(e,t,n){var i=e[t];C.call(e,t)&&W(i,n)&&(void 0!==n||t in e)||(e[t]=n)}function B(e,t){for(var n=e.length;n--;)if(W(e[n][0],t))return n;return-1}function q(e,t){var n,i,r=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function F(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!G(e)||S&&S in e)return!1;var t=function(e){var t=G(e)?E.call(e):"";return t==a||t==d}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?A:g;return t.test(function(e){if(null!=e){try{return k.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}function V(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||m.test(e))&&e>-1&&e%1==0&&e<t}M.prototype.clear=function(){this.__data__=O?O(null):{}},M.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},M.prototype.get=function(e){var t=this.__data__;if(O){var n=t[e];return n===r?void 0:n}return C.call(t,e)?t[e]:void 0},M.prototype.has=function(e){var t=this.__data__;return O?void 0!==t[e]:C.call(t,e)},M.prototype.set=function(e,t){return this.__data__[e]=O&&void 0===t?r:t,this},L.prototype.clear=function(){this.__data__=[]},L.prototype.delete=function(e){var t=this.__data__,n=B(t,e);return!(n<0||(n==t.length-1?t.pop():x.call(t,n,1),0))},L.prototype.get=function(e){var t=this.__data__,n=B(t,e);return n<0?void 0:t[n][1]},L.prototype.has=function(e){return B(this.__data__,e)>-1},L.prototype.set=function(e,t){var n=this.__data__,i=B(n,e);return i<0?n.push([e,t]):n[i][1]=t,this},U.prototype.clear=function(){this.__data__={hash:new M,map:new(D||L),string:new M}},U.prototype.delete=function(e){return q(this,e).delete(e)},U.prototype.get=function(e){return q(this,e).get(e)},U.prototype.has=function(e){return q(this,e).has(e)},U.prototype.set=function(e,t){return q(this,e).set(e,t),this};var z=H((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(X(e))return N?N.call(e):"";var t=e+"";return"0"==t&&1/e==-s?"-0":t}(t);var n=[];return p.test(e)&&n.push(""),e.replace(h,(function(e,t,i,r){n.push(i?r.replace(f,"$1"):t||e)})),n}));function $(e){if("string"==typeof e||X(e))return e;var t=e+"";return"0"==t&&1/e==-s?"-0":t}function H(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=e.apply(this,i);return n.cache=s.set(r,o),o};return n.cache=new(H.Cache||U),n}function W(e,t){return e===t||e!=e&&t!=t}H.Cache=U;var Z=Array.isArray;function G(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function X(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&E.call(e)==l}e.exports=function(e,t,n){return null==e?e:function(e,t,n,i){if(!G(e))return e;t=function(e,t){if(Z(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!X(e))||u.test(e)||!c.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:function(e){return Z(e)?e:z(e)}(t);for(var r=-1,s=t.length,o=s-1,a=e;null!=a&&++r<s;){var d=$(t[r]),l=n;if(r!=o){var p=a[d];void 0===(l=i?i(p,d,a):void 0)&&(l=G(p)?p:V(t[r+1])?[]:{})}j(a,d,l),a=a[d]}return e}(e,t,n)}},8515:(e,t,n)=>{var i=n(3310).getUint64;e.exports=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},r=12;0===n.version?(n.earliestPresentationTime=t.getUint32(r),n.firstOffset=t.getUint32(r+4),r+=8):(n.earliestPresentationTime=i(e.subarray(r)),n.firstOffset=i(e.subarray(r+8)),r+=16),r+=2;var s=t.getUint16(r);for(r+=2;s>0;r+=12,s--)n.references.push({referenceType:(128&e[r])>>>7,referencedSize:2147483647&t.getUint32(r),subsegmentDuration:t.getUint32(r+4),startsWithSap:!!(128&e[r+8]),sapType:(112&e[r+8])>>>4,sapDeltaTime:268435455&t.getUint32(r+8)});return n}},3211:e=>{var t,n,i,r,s,o,a,d=9e4;t=function(e){return e*d},n=function(e,t){return e*t},i=function(e){return e/d},r=function(e,t){return e/t},s=function(e,n){return t(r(e,n))},o=function(e,t){return n(i(e),t)},a=function(e,t,n){return i(n?e:e-t)},e.exports={ONE_SECOND_IN_TS:d,secondsToVideoTs:t,secondsToAudioTs:n,videoTsToSeconds:i,audioTsToSeconds:r,audioTsToVideoTs:s,videoTsToAudioTs:o,metadataTsToSeconds:a}},3310:e=>{var t=Math.pow(2,32);e.exports={getUint64:function(e){var n,i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.getBigUint64?(n=i.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(n):n:i.getUint32(0)*t+i.getUint32(4)},MAX_UINT32:t}},2695:e=>{var t,n,i=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var a,d=[],l=!1,c=-1;function u(){l&&a&&(l=!1,a.length?d=a.concat(d):c=-1,d.length&&p())}function p(){if(!l){var e=o(u);l=!0;for(var t=d.length;t;){for(a=d,d=[];++c<t;)a&&a[c].run();c=-1,t=d.length}a=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function f(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new h(e,t)),1!==d.length||l||o(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=f,i.addListener=f,i.once=f,i.off=f,i.removeListener=f,i.removeAllListeners=f,i.emit=f,i.prependListener=f,i.prependOnceListener=f,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},6856:(e,t,n)=>{"use strict";var i=Object.prototype.hasOwnProperty;function r(e,t){return Array.isArray(e)?function(e,t){for(var n,i="",s="",o=Array.isArray(t),a=0;a<e.length;a++)(n=r(e[a]))&&(o&&t[a]&&(n=d(n)),i=i+s+n,s=" ");return i}(e,t):e&&"object"==typeof e?function(e){var t="",n="";for(var r in e)r&&e[r]&&i.call(e,r)&&(t=t+n+r,n=" ");return t}(e):e||""}function s(e){if(!e)return"";if("object"==typeof e){var t="";for(var n in e)i.call(e,n)&&(t=t+n+":"+e[n]+";");return t}return e+""}function o(e,t,n,i){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(i?e:e+'="'+e+'"');var r=typeof t;return"object"!==r&&"function"!==r||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||-1===t.indexOf('"'))?(n&&(t=d(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}t.merge=function e(t,n){if(1===arguments.length){for(var i=t[0],r=1;r<t.length;r++)i=e(i,t[r]);return i}for(var o in n)if("class"===o){var a=t[o]||[];t[o]=(Array.isArray(a)?a:[a]).concat(n[o]||[])}else if("style"===o){a=(a=s(t[o]))&&";"!==a[a.length-1]?a+";":a;var d=s(n[o]);d=d&&";"!==d[d.length-1]?d+";":d,t[o]=a+d}else t[o]=n[o];return t},t.classes=r,t.style=s,t.attr=o,t.attrs=function(e,t){var n="";for(var a in e)if(i.call(e,a)){var d=e[a];if("class"===a){n=o(a,d=r(d),!1,t)+n;continue}"style"===a&&(d=s(d)),n+=o(a,d,!1,t)}return n};var a=/["&<>]/;function d(e){var t=""+e,n=a.exec(t);if(!n)return e;var i,r,s,o="";for(i=n.index,r=0;i<t.length;i++){switch(t.charCodeAt(i)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}r!==i&&(o+=t.substring(r,i)),r=i+1,o+=s}return r!==i?o+t.substring(r,i):o}t.escape=d,t.rethrow=function e(t,i,r,s){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&i||s))throw t.message+=" on line "+r,t;var o,a,d,l;try{s=s||n(7044).readFileSync(i,{encoding:"utf8"}),o=3,a=s.split("\n"),d=Math.max(r-o,0),l=Math.min(a.length,r+o)}catch(n){return t.message+=" - could not read from "+i+" ("+n.message+")",void e(t,null,r)}o=a.slice(d,l).map((function(e,t){var n=t+d+1;return(n==r?"  > ":"    ")+n+"| "+e})).join("\n"),t.path=i;try{t.message=(i||"Pug")+":"+r+"\n"+o+"\n\n"+t.message}catch(e){}throw t}},553:e=>{"use strict";var t={};function n(e,n,i){i||(i=Error);var r=function(e){var t,i;function r(t,i,r){return e.call(this,function(e,t,i){return"string"==typeof n?n:n(e,t,i)}(t,i,r))||this}return i=e,(t=r).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i,r}(i);r.prototype.name=i.name,r.prototype.code=e,t[e]=r}function i(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}n("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(e,t,n){var r,s,o,a,d;if("string"==typeof t&&(s="not ",t.substr(0,4)===s)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-9,n)===t}(e," argument"))o="The ".concat(e," ").concat(r," ").concat(i(t,"type"));else{var l=("number"!=typeof d&&(d=0),d+1>(a=e).length||-1===a.indexOf(".",d)?"argument":"property");o='The "'.concat(e,'" ').concat(l," ").concat(r," ").concat(i(t,"type"))}return o+". Received type ".concat(typeof n)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},673:(e,t,n)=>{"use strict";var i=n(2695),r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=c;var s=n(5006),o=n(8719);n(3730)(c,s);for(var a=r(o.prototype),d=0;d<a.length;d++){var l=a[d];c.prototype[l]||(c.prototype[l]=o.prototype[l])}function c(e){if(!(this instanceof c))return new c(e);s.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||i.nextTick(p,this)}function p(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},4343:(e,t,n)=>{"use strict";e.exports=r;var i=n(8597);function r(e){if(!(this instanceof r))return new r(e);i.call(this,e)}n(3730)(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},5006:(e,t,n)=>{"use strict";var i,r=n(2695);e.exports=k,k.ReadableState=S,n(3346).EventEmitter;var s,o=function(e,t){return e.listeners(t).length},a=n(8208),d=n(4275).Buffer,l=n.g.Uint8Array||function(){},c=n(6029);s=c&&c.debuglog?c.debuglog("stream"):function(){};var u,p,h,f=n(4506),g=n(3390),m=n(1111).getHighWaterMark,y=n(553).q,v=y.ERR_INVALID_ARG_TYPE,b=y.ERR_STREAM_PUSH_AFTER_EOF,_=y.ERR_METHOD_NOT_IMPLEMENTED,w=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(3730)(k,a);var T=g.errorOrDestroy,I=["error","close","destroy","pause","resume"];function S(e,t,r){i=i||n(673),e=e||{},"boolean"!=typeof r&&(r=t instanceof i),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=m(this,e,"readableHighWaterMark",r),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(u||(u=n(7361).s),this.decoder=new u(e.encoding),this.encoding=e.encoding)}function k(e){if(i=i||n(673),!(this instanceof k))return new k(e);var t=this instanceof i;this._readableState=new S(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function C(e,t,n,i,r){s("readableAddChunk",t);var o,a=e._readableState;if(null===t)a.reading=!1,function(e,t){if(s("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?x(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,D(e)))}}(e,a);else if(r||(o=function(e,t){var n,i;return i=t,d.isBuffer(i)||i instanceof l||"string"==typeof t||void 0===t||e.objectMode||(n=new v("chunk",["string","Buffer","Uint8Array"],t)),n}(a,t)),o)T(e,o);else if(a.objectMode||t&&t.length>0)if("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===d.prototype||(t=function(e){return d.from(e)}(t)),i)a.endEmitted?T(e,new w):E(e,a,t,!0);else if(a.ended)T(e,new b);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?E(e,a,t,!1):O(e,a)):E(e,a,t,!1)}else i||(a.reading=!1,O(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function E(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&x(e)),O(e,t)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),k.prototype.destroy=g.destroy,k.prototype._undestroy=g.undestroy,k.prototype._destroy=function(e,t){t(e)},k.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=d.from(e,t),t=""),n=!0),C(this,e,t,!1,n)},k.prototype.unshift=function(e){return C(this,e,null,!0,!1)},k.prototype.isPaused=function(){return!1===this._readableState.flowing},k.prototype.setEncoding=function(e){u||(u=n(7361).s);var t=new u(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,r="";null!==i;)r+=t.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var A=1073741824;function P(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=A?e=A:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function x(e){var t=e._readableState;s("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(s("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(D,e))}function D(e){var t=e._readableState;s("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,U(e)}function O(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(R,e,t))}function R(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(s("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function N(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function M(e){s("readable nexttick read 0"),e.read(0)}function L(e,t){s("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),U(e),t.flowing&&!t.reading&&e.read(0)}function U(e){var t=e._readableState;for(s("flow",t.flowing);t.flowing&&null!==e.read(););}function j(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function B(e){var t=e._readableState;s("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(q,t,e))}function q(e,t){if(s("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function F(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}k.prototype.read=function(e){s("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return s("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?B(this):x(this),null;if(0===(e=P(e,t))&&t.ended)return 0===t.length&&B(this),null;var i,r=t.needReadable;return s("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&s("length less than watermark",r=!0),t.ended||t.reading?s("reading or ended",r=!1):r&&(s("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=P(n,t))),null===(i=e>0?j(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&B(this)),null!==i&&this.emit("data",i),i},k.prototype._read=function(e){T(this,new _("_read()"))},k.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,s("pipe count=%d opts=%j",i.pipesCount,t);var a=t&&!1===t.end||e===r.stdout||e===r.stderr?g:d;function d(){s("onend"),e.end()}i.endEmitted?r.nextTick(a):n.once("end",a),e.on("unpipe",(function t(r,o){s("onunpipe"),r===n&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,s("cleanup"),e.removeListener("close",h),e.removeListener("finish",f),e.removeListener("drain",l),e.removeListener("error",p),e.removeListener("unpipe",t),n.removeListener("end",d),n.removeListener("end",g),n.removeListener("data",u),c=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}));var l=function(e){return function(){var t=e._readableState;s("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,U(e))}}(n);e.on("drain",l);var c=!1;function u(t){s("ondata");var r=e.write(t);s("dest.write",r),!1===r&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==F(i.pipes,e))&&!c&&(s("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function p(t){s("onerror",t),g(),e.removeListener("error",p),0===o(e,"error")&&T(e,t)}function h(){e.removeListener("finish",f),g()}function f(){s("onfinish"),e.removeListener("close",h),g()}function g(){s("unpipe"),n.unpipe(e)}return n.on("data",u),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",p),e.once("close",h),e.once("finish",f),e.emit("pipe",n),i.flowing||(s("pipe resume"),n.resume()),e},k.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var i=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<r;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=F(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},k.prototype.on=function(e,t){var n=a.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,s("on readable",i.length,i.reading),i.length?x(this):i.reading||r.nextTick(M,this))),n},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(e,t){var n=a.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(N,this),n},k.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(N,this),t},k.prototype.resume=function(){var e=this._readableState;return e.flowing||(s("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(L,e,t))}(this,e)),e.paused=!1,this},k.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},k.prototype.wrap=function(e){var t=this,n=this._readableState,i=!1;for(var r in e.on("end",(function(){if(s("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(r){s("wrapped data"),n.decoder&&(r=n.decoder.write(r)),n.objectMode&&null==r||(n.objectMode||r&&r.length)&&(t.push(r)||(i=!0,e.pause()))})),e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));for(var o=0;o<I.length;o++)e.on(I[o],this.emit.bind(this,I[o]));return this._read=function(t){s("wrapped _read",t),i&&(i=!1,e.resume())},this},"function"==typeof Symbol&&(k.prototype[Symbol.asyncIterator]=function(){return void 0===p&&(p=n(8187)),p(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),k._fromList=j,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(k.from=function(e,t){return void 0===h&&(h=n(3733)),h(k,e,t)})},8597:(e,t,n)=>{"use strict";e.exports=c;var i=n(553).q,r=i.ERR_METHOD_NOT_IMPLEMENTED,s=i.ERR_MULTIPLE_CALLBACK,o=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=i.ERR_TRANSFORM_WITH_LENGTH_0,d=n(673);function l(e,t){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(null===i)return this.emit("error",new s);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),i(e);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function c(e){if(!(this instanceof c))return new c(e);d.call(this,e),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",u)}function u(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?p(this,null,null):this._flush((function(t,n){p(e,t,n)}))}function p(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new o;return e.push(null)}n(3730)(c,d),c.prototype.push=function(e,t){return this._transformState.needTransform=!1,d.prototype.push.call(this,e,t)},c.prototype._transform=function(e,t,n){n(new r("_transform()"))},c.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},c.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},c.prototype._destroy=function(e,t){d.prototype._destroy.call(this,e,(function(e){t(e)}))}},8719:(e,t,n)=>{"use strict";var i,r=n(2695);function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var i=e.entry;for(e.entry=null;i;){var r=i.callback;t.pendingcb--,r(undefined),i=i.next}t.corkedRequestsFree.next=e}(t,e)}}e.exports=k,k.WritableState=S;var o,a={deprecate:n(72)},d=n(8208),l=n(4275).Buffer,c=n.g.Uint8Array||function(){},u=n(3390),p=n(1111).getHighWaterMark,h=n(553).q,f=h.ERR_INVALID_ARG_TYPE,g=h.ERR_METHOD_NOT_IMPLEMENTED,m=h.ERR_MULTIPLE_CALLBACK,y=h.ERR_STREAM_CANNOT_PIPE,v=h.ERR_STREAM_DESTROYED,b=h.ERR_STREAM_NULL_VALUES,_=h.ERR_STREAM_WRITE_AFTER_END,w=h.ERR_UNKNOWN_ENCODING,T=u.errorOrDestroy;function I(){}function S(e,t,o){i=i||n(673),e=e||{},"boolean"!=typeof o&&(o=t instanceof i),this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=p(this,e,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,s=n.writecb;if("function"!=typeof s)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,s){--t.pendingcb,n?(r.nextTick(s,i),r.nextTick(D,e,t),e._writableState.errorEmitted=!0,T(e,i)):(s(i),e._writableState.errorEmitted=!0,T(e,i),D(e,t))}(e,n,i,t,s);else{var o=P(n)||e.destroyed;o||n.corked||n.bufferProcessing||!n.bufferedRequest||A(e,n),i?r.nextTick(E,e,n,o,s):E(e,n,o,s)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function k(e){var t=this instanceof(i=i||n(673));if(!t&&!o.call(k,this))return new k(e);this._writableState=new S(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),d.call(this)}function C(e,t,n,i,r,s,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new v("write")):n?e._writev(r,t.onwrite):e._write(r,s,t.onwrite),t.sync=!1}function E(e,t,n,i){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),D(e,t)}function A(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,r=new Array(i),o=t.corkedRequestsFree;o.entry=n;for(var a=0,d=!0;n;)r[a]=n,n.isBuf||(d=!1),n=n.next,a+=1;r.allBuffers=d,C(e,t,!0,t.length,r,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,u=n.callback;if(C(e,t,!1,t.objectMode?1:l.length,l,c,u),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function P(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function x(e,t){e._final((function(n){t.pendingcb--,n&&T(e,n),t.prefinished=!0,e.emit("prefinish"),D(e,t)}))}function D(e,t){var n=P(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(x,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}n(3730)(k,d),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(k,Symbol.hasInstance,{value:function(e){return!!o.call(this,e)||this===k&&e&&e._writableState instanceof S}})):o=function(e){return e instanceof this},k.prototype.pipe=function(){T(this,new y)},k.prototype.write=function(e,t,n){var i,s=this._writableState,o=!1,a=!s.objectMode&&(i=e,l.isBuffer(i)||i instanceof c);return a&&!l.isBuffer(e)&&(e=function(e){return l.from(e)}(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof n&&(n=I),s.ending?function(e,t){var n=new _;T(e,n),r.nextTick(t,n)}(this,n):(a||function(e,t,n,i){var s;return null===n?s=new b:"string"==typeof n||t.objectMode||(s=new f("chunk",["string","Buffer"],n)),!s||(T(e,s),r.nextTick(i,s),!1)}(this,s,e,n))&&(s.pendingcb++,o=function(e,t,n,i,r,s){if(!n){var o=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=l.from(t,n)),t}(t,i,r);i!==o&&(n=!0,r="buffer",i=o)}var a=t.objectMode?1:i.length;t.length+=a;var d=t.length<t.highWaterMark;if(d||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:s,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else C(e,t,!1,a,i,r,s);return d}(this,s,a,e,t,n)),o},k.prototype.cork=function(){this._writableState.corked++},k.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||A(this,e))},k.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(k.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),k.prototype._write=function(e,t,n){n(new g("_write()"))},k.prototype._writev=null,k.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,D(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(k.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),k.prototype.destroy=u.destroy,k.prototype._undestroy=u.undestroy,k.prototype._destroy=function(e,t){t(e)}},8187:(e,t,n)=>{"use strict";var i,r=n(2695);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(2426),a=Symbol("lastResolve"),d=Symbol("lastReject"),l=Symbol("error"),c=Symbol("ended"),u=Symbol("lastPromise"),p=Symbol("handlePromise"),h=Symbol("stream");function f(e,t){return{value:e,done:t}}function g(e){var t=e[a];if(null!==t){var n=e[h].read();null!==n&&(e[u]=null,e[a]=null,e[d]=null,t(f(n,!1)))}}function m(e){r.nextTick(g,e)}var y=Object.getPrototypeOf((function(){})),v=Object.setPrototypeOf((s(i={get stream(){return this[h]},next:function(){var e=this,t=this[l];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(f(void 0,!0));if(this[h].destroyed)return new Promise((function(t,n){r.nextTick((function(){e[l]?n(e[l]):t(f(void 0,!0))}))}));var n,i=this[u];if(i)n=new Promise(function(e,t){return function(n,i){e.then((function(){t[c]?n(f(void 0,!0)):t[p](n,i)}),i)}}(i,this));else{var s=this[h].read();if(null!==s)return Promise.resolve(f(s,!1));n=new Promise(this[p])}return this[u]=n,n}},Symbol.asyncIterator,(function(){return this})),s(i,"return",(function(){var e=this;return new Promise((function(t,n){e[h].destroy(null,(function(e){e?n(e):t(f(void 0,!0))}))}))})),i),y);e.exports=function(e){var t,n=Object.create(v,(s(t={},h,{value:e,writable:!0}),s(t,a,{value:null,writable:!0}),s(t,d,{value:null,writable:!0}),s(t,l,{value:null,writable:!0}),s(t,c,{value:e._readableState.endEmitted,writable:!0}),s(t,p,{value:function(e,t){var i=n[h].read();i?(n[u]=null,n[a]=null,n[d]=null,e(f(i,!1))):(n[a]=e,n[d]=t)},writable:!0}),t));return n[u]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[d];return null!==t&&(n[u]=null,n[a]=null,n[d]=null,t(e)),void(n[l]=e)}var i=n[a];null!==i&&(n[u]=null,n[a]=null,n[d]=null,i(f(void 0,!0))),n[c]=!0})),e.on("readable",m.bind(null,n)),n}},4506:(e,t,n)=>{"use strict";function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=n(4275).Buffer,a=n(462).inspect,d=a&&a.custom||"inspect";function l(e,t,n){o.prototype.copy.call(e,t,n)}e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n;return t=e,n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return o.alloc(0);for(var t=o.allocUnsafe(e>>>0),n=this.head,i=0;n;)l(n.data,t,i),i+=n.data.length,n=n.next;return t}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,i=t.data;for(e-=i.length;t=t.next;){var r=t.data,s=e>r.length?r.length:e;if(s===r.length?i+=r:i+=r.slice(0,e),0==(e-=s)){s===r.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=r.slice(s));break}++n}return this.length-=n,i}},{key:"_getBuffer",value:function(e){var t=o.allocUnsafe(e),n=this.head,i=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var r=n.data,s=e>r.length?r.length:e;if(r.copy(t,t.length-e,0,s),0==(e-=s)){s===r.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=r.slice(s));break}++i}return this.length-=i,t}},{key:d,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],n&&s(t.prototype,n),e}()},3390:(e,t,n)=>{"use strict";var i=n(2695);function r(e,t){o(e,t),s(e)}function s(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function o(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,a=this._readableState&&this._readableState.destroyed,d=this._writableState&&this._writableState.destroyed;return a||d?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,i.nextTick(o,this,e)):i.nextTick(o,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?n._writableState?n._writableState.errorEmitted?i.nextTick(s,n):(n._writableState.errorEmitted=!0,i.nextTick(r,n,e)):i.nextTick(r,n,e):t?(i.nextTick(s,n),t(e)):i.nextTick(s,n)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,i=e._writableState;n&&n.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}}},2426:(e,t,n)=>{"use strict";var i=n(553).q.ERR_STREAM_PREMATURE_CLOSE;function r(){}e.exports=function e(t,n,s){if("function"==typeof n)return e(t,null,n);n||(n={}),s=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.apply(this,i)}}}(s||r);var o=n.readable||!1!==n.readable&&t.readable,a=n.writable||!1!==n.writable&&t.writable,d=function(){t.writable||c()},l=t._writableState&&t._writableState.finished,c=function(){a=!1,l=!0,o||s.call(t)},u=t._readableState&&t._readableState.endEmitted,p=function(){o=!1,u=!0,a||s.call(t)},h=function(e){s.call(t,e)},f=function(){var e;return o&&!u?(t._readableState&&t._readableState.ended||(e=new i),s.call(t,e)):a&&!l?(t._writableState&&t._writableState.ended||(e=new i),s.call(t,e)):void 0},g=function(){t.req.on("finish",c)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",c),t.on("abort",f),t.req?g():t.on("request",g)):a&&!t._writableState&&(t.on("end",d),t.on("close",d)),t.on("end",p),t.on("finish",c),!1!==n.error&&t.on("error",h),t.on("close",f),function(){t.removeListener("complete",c),t.removeListener("abort",f),t.removeListener("request",g),t.req&&t.req.removeListener("finish",c),t.removeListener("end",d),t.removeListener("close",d),t.removeListener("finish",c),t.removeListener("end",p),t.removeListener("error",h),t.removeListener("close",f)}}},3733:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},2970:(e,t,n)=>{"use strict";var i,r=n(553).q,s=r.ERR_MISSING_ARGS,o=r.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function d(e){e()}function l(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var c,u=function(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new s("streams");var p=t.map((function(e,r){var s=r<t.length-1;return function(e,t,r,s){s=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(s);var a=!1;e.on("close",(function(){a=!0})),void 0===i&&(i=n(2426)),i(e,{readable:t,writable:r},(function(e){if(e)return s(e);a=!0,s()}));var d=!1;return function(t){if(!a&&!d)return d=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void s(t||new o("pipe"))}}(e,s,r>0,(function(e){c||(c=e),e&&p.forEach(d),s||(p.forEach(d),u(c))}))}));return t.reduce(l)}},1111:(e,t,n)=>{"use strict";var i=n(553).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,r){var s=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,r,n);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new i(r?n:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}}},8208:(e,t,n)=>{e.exports=n(3346).EventEmitter},9685:(e,t,n)=>{var i=n(4275),r=i.Buffer;function s(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=i:(s(i,t),t.Buffer=o),o.prototype=Object.create(r.prototype),s(r,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},5891:e=>{e.exports=function(e,t){var n,i=null;try{n=JSON.parse(e,t)}catch(e){i=e}return[i,n]}},8981:(e,t,n)=>{e.exports=r;var i=n(3346).EventEmitter;function r(){i.call(this)}n(3730)(r,i),r.Readable=n(5006),r.Writable=n(8719),r.Duplex=n(673),r.Transform=n(8597),r.PassThrough=n(4343),r.finished=n(2426),r.pipeline=n(2970),r.Stream=r,r.prototype.pipe=function(e,t){var n=this;function r(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function s(){n.readable&&n.resume&&n.resume()}n.on("data",r),e.on("drain",s),e._isStdio||t&&!1===t.end||(n.on("end",a),n.on("close",d));var o=!1;function a(){o||(o=!0,e.end())}function d(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(c(),0===i.listenerCount(this,"error"))throw e}function c(){n.removeListener("data",r),e.removeListener("drain",s),n.removeListener("end",a),n.removeListener("close",d),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),e.removeListener("close",c)}return n.on("error",l),e.on("error",l),n.on("end",c),n.on("close",c),e.on("close",c),e.emit("pipe",n),e}},7361:(e,t,n)=>{"use strict";var i=n(9685).Buffer,r=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(i.isEncoding===r||!r(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=d,this.end=l,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=c,this.end=u,t=3;break;default:return this.write=p,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function d(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function c(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function u(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.s=s,s.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},s.prototype.text=function(e,t){var n=function(e,t,n){var i=t.length-1;if(i<n)return 0;var r=o(t[i]);return r>=0?(r>0&&(e.lastNeed=r-1),r):--i<n||-2===r?0:(r=o(t[i]))>=0?(r>0&&(e.lastNeed=r-2),r):--i<n||-2===r?0:(r=o(t[i]))>=0?(r>0&&(2===r?r=0:e.lastNeed=r-3),r):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},4316:function(e){var t,n,i,r,s;t=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,n=/^(?=([^\/?#]*))\1([^]*)$/,i=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var r=s.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var o=s.parseURL(t);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return i.alwaysNormalize?(o.path=s.normalizePath(o.path),s.buildURLFromParts(o)):t;var a=s.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var d=n.exec(a.path);a.netLoc=d[1],a.path=d[2]}a.netLoc&&!a.path&&(a.path="/");var l={scheme:a.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(l.netLoc=a.netLoc,"/"!==o.path[0]))if(o.path){var c=a.path,u=c.substring(0,c.lastIndexOf("/")+1)+o.path;l.path=s.normalizePath(u)}else l.path=a.path,o.params||(l.params=a.params,o.query||(l.query=a.query));return null===l.path&&(l.path=i.alwaysNormalize?s.normalizePath(o.path):o.path),s.buildURLFromParts(l)},parseURL:function(e){var n=t.exec(e);return n?{scheme:n[1]||"",netLoc:n[2]||"",path:n[3]||"",params:n[4]||"",query:n[5]||"",fragment:n[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(r,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s},72:(e,t,n)=>{function i(e){try{if(!n.g.localStorage)return!1}catch(e){return!1}var t=n.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(i("noDeprecation"))return e;var n=!1;return function(){if(!n){if(i("throwDeprecation"))throw new Error(t);i("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}},4067:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)}},4745:(e,t,n)=>{"use strict";let i;n.d(t,{Z:()=>s});const r=new Uint8Array(16);function s(){if(!i&&(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(r)}},26:(e,t,n)=>{"use strict";n.d(t,{S:()=>r});const i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function r(e,t=0){return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}},3334:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(4067),r=n(4745),s=n(26);const o=function(e,t,n){if(i.Z.randomUUID&&!t&&!e)return i.Z.randomUUID();const o=(e=e||{}).random||(e.rng||r.Z)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=o[e];return t}return(0,s.S)(o)}},7189:(e,t,n)=>{var i=n(1667),r=e.exports={WebVTT:n(7063),VTTCue:n(6067),VTTRegion:n(1048)};i.vttjs=r,i.WebVTT=r.WebVTT;var s=r.VTTCue,o=r.VTTRegion,a=i.VTTCue,d=i.VTTRegion;r.shim=function(){i.VTTCue=s,i.VTTRegion=o},r.restore=function(){i.VTTCue=a,i.VTTRegion=d},i.VTTCue||r.shim()},7063:(e,t,n)=>{var i=n(1709),r=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function s(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function o(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+(0|i)/1e3}var n=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function a(){this.values=r(null)}function d(e,t,n,i){var r=i?e.split(i):[e];for(var s in r)if("string"==typeof r[s]){var o=r[s].split(n);2===o.length&&t(o[0].trim(),o[1].trim())}}function l(e,t,n){var i=e;function r(){var t=o(e);if(null===t)throw new s(s.Errors.BadTimeStamp,"Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function l(){e=e.replace(/^\s+/,"")}if(l(),t.startTime=r(),l(),"--\x3e"!==e.substr(0,3))throw new s(s.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.substr(3),l(),t.endTime=r(),l(),function(e,t){var i=new a;d(e,(function(e,t){switch(e){case"region":for(var r=n.length-1;r>=0;r--)if(n[r].id===t){i.set(e,n[r].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var s=t.split(","),o=s[0];i.integer(e,o),i.percent(e,o)&&i.set("snapToLines",!1),i.alt(e,o,["auto"]),2===s.length&&i.alt("lineAlign",s[1],["start","center","end"]);break;case"position":s=t.split(","),i.percent(e,s[0]),2===s.length&&i.alt("positionAlign",s[1],["start","center","end"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start","center","end","left","right"])}}),/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");try{t.line=i.get("line","auto")}catch(e){}t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100);try{t.align=i.get("align","center")}catch(e){t.align=i.get("align","middle")}try{t.position=i.get("position","auto")}catch(e){t.position=i.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=i.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(e,t)}s.prototype=r(Error.prototype),s.prototype.constructor=s,s.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},a.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var c=i.createElement&&i.createElement("textarea"),u={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},p={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},h={v:"title",lang:"lang"},f={rt:"ruby"};function g(e,t){function n(){if(!t)return null;var e,n=t.match(/^([^<]*)(<[^>]*>?)?/);return e=n[1]?n[1]:n[2],t=t.substr(e.length),e}function i(e,t){return!f[t.localName]||f[t.localName]===e.localName}function r(t,n){var i=u[t];if(!i)return null;var r=e.document.createElement(i),s=h[t];return s&&n&&(r[s]=n.trim()),r}for(var s,a,d=e.document.createElement("div"),l=d,g=[];null!==(s=n());)if("<"!==s[0])l.appendChild(e.document.createTextNode((a=s,c.innerHTML=a,a=c.textContent,c.textContent="",a)));else{if("/"===s[1]){g.length&&g[g.length-1]===s.substr(2).replace(">","")&&(g.pop(),l=l.parentNode);continue}var m,y=o(s.substr(1,s.length-2));if(y){m=e.document.createProcessingInstruction("timestamp",y),l.appendChild(m);continue}var v=s.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!v)continue;if(!(m=r(v[1],v[3])))continue;if(!i(l,m))continue;if(v[2]){var b=v[2].split(".");b.forEach((function(e){var t=/^bg_/.test(e),n=t?e.slice(3):e;if(p.hasOwnProperty(n)){var i=t?"background-color":"color",r=p[n];m.style[i]=r}})),m.className=b.join(" ")}g.push(v[1]),l.appendChild(m),l=m}return d}var m=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function y(e){for(var t=0;t<m.length;t++){var n=m[t];if(e>=n[0]&&e<=n[1])return!0}return!1}function v(e){var t=[],n="";if(!e||!e.childNodes)return"ltr";function i(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function r(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var s=n.match(/^.*(\n|\r)/);return s?(e.length=0,s[0]):n}return"ruby"===t.tagName?r(e):t.childNodes?(i(e,t),r(e)):void 0}for(i(t,e);n=r(t);)for(var s=0;s<n.length;s++)if(y(n.charCodeAt(s)))return"rtl";return"ltr"}function b(){}function _(e,t,n){b.call(this),this.cue=t,this.cueDiv=g(e,t.text);var i={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=e.document.createElement("div"),i={direction:v(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case"start":case"line-left":r=t.position;break;case"center":r=t.position-t.size/2;break;case"end":case"line-right":r=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function w(e){var t,n,i,r;if(e.div){n=e.div.offsetHeight,i=e.div.offsetWidth,r=e.div.offsetTop;var s=(s=e.div.childNodes)&&(s=s[0])&&s.getClientRects&&s.getClientRects();e=e.div.getBoundingClientRect(),t=s?Math.max(s[0]&&s[0].height||0,e.height/s.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||n,this.bottom=e.bottom||r+(e.height||n),this.width=e.width||i,this.lineHeight=void 0!==t?t:e.lineHeight}function T(e,t,n,i){var r=new w(t),s=t.cue,o=function(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,i=0,r=0;r<n.length&&n[r]!==t;r++)"showing"===n[r].mode&&i++;return-1*++i}(s),a=[];if(s.snapToLines){var d;switch(s.vertical){case"":a=["+y","-y"],d="height";break;case"rl":a=["+x","-x"],d="width";break;case"lr":a=["-x","+x"],d="width"}var l=r.lineHeight,c=l*Math.round(o),u=n[d]+l,p=a[0];Math.abs(c)>u&&(c=c<0?-1:1,c*=Math.ceil(u/l)*l),o<0&&(c+=""===s.vertical?n.height:n.width,a=a.reverse()),r.move(p,c)}else{var h=r.lineHeight/n.height*100;switch(s.lineAlign){case"center":o-=h/2;break;case"end":o-=h}switch(s.vertical){case"":t.applyStyles({top:t.formatStyle(o,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(o,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(o,"%")})}a=["+y","-x","+x","-y"],r=new w(t)}var f=function(e,t){for(var r,s=new w(e),o=1,a=0;a<t.length;a++){for(;e.overlapsOppositeAxis(n,t[a])||e.within(n)&&e.overlapsAny(i);)e.move(t[a]);if(e.within(n))return e;var d=e.intersectPercentage(n);o>d&&(r=new w(e),o=d),e=new w(s)}return r||s}(r,a);t.move(f.toCSSCompatValues(n))}function I(){}b.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},b.prototype.formatStyle=function(e,t){return 0===e?0:e+t},_.prototype=r(b.prototype),_.prototype.constructor=_,w.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},w.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},w.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},w.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},w.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},w.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},w.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},w.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,i=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||i,height:e.height||t,bottom:e.bottom||i+(e.height||t),width:e.width||n}},I.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},I.convertCueToDOMTree=function(e,t){return e&&t?g(e,t):null},I.processCues=function(e,t,n){if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var i=e.document.createElement("div");if(i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin="1.5%",n.appendChild(i),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var r=[],s=w.getSimpleBoxPosition(i),o={font:Math.round(.05*s.height*100)/100+"px sans-serif"};!function(){for(var n,a,d=0;d<t.length;d++)a=t[d],n=new _(e,a,o),i.appendChild(n.div),T(0,n,s,r),a.displayState=n.div,r.push(w.getSimpleBoxPosition(n))}()}else for(var a=0;a<t.length;a++)i.appendChild(t[a].displayState)},I.Parser=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]},I.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof s))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t,n=this;function i(){for(var e=n.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var i=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),i}e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{var r;if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var c=(r=i()).match(/^WEBVTT([ \t].*)?$/);if(!c||!c[0])throw new s(s.Errors.BadSignature);n.state="HEADER"}for(var u=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(u?u=!1:r=i(),n.state){case"HEADER":/:/.test(r)?(t=r).match(/X-TIMESTAMP-MAP/)?d(t,(function(e,t){"X-TIMESTAMP-MAP"===e&&function(e){var t=new a;d(e,(function(e,n){switch(e){case"MPEGT":t.integer(e+"S",n);break;case"LOCA":t.set(e+"L",o(n))}}),/[^\d]:/,/,/),n.ontimestampmap&&n.ontimestampmap({MPEGTS:t.get("MPEGTS"),LOCAL:t.get("LOCAL")})}(t)}),/=/):d(t,(function(e,t){"Region"===e&&function(e){var t=new a;if(d(e,(function(e,n){switch(e){case"id":t.set(e,n);break;case"width":t.percent(e,n);break;case"lines":t.integer(e,n);break;case"regionanchor":case"viewportanchor":var i=n.split(",");if(2!==i.length)break;var r=new a;if(r.percent("x",i[0]),r.percent("y",i[1]),!r.has("x")||!r.has("y"))break;t.set(e+"X",r.get("x")),t.set(e+"Y",r.get("y"));break;case"scroll":t.alt(e,n,["up"])}}),/=/,/\s/),t.has("id")){var i=new(n.vttjs.VTTRegion||n.window.VTTRegion);i.width=t.get("width",100),i.lines=t.get("lines",3),i.regionAnchorX=t.get("regionanchorX",0),i.regionAnchorY=t.get("regionanchorY",100),i.viewportAnchorX=t.get("viewportanchorX",0),i.viewportAnchorY=t.get("viewportanchorY",100),i.scroll=t.get("scroll",""),n.onregion&&n.onregion(i),n.regionList.push({id:t.get("id"),region:i})}}(t)}),/:/):r||(n.state="ID");continue;case"NOTE":r||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){n.state="NOTE";break}if(!r)continue;n.cue=new(n.vttjs.VTTCue||n.window.VTTCue)(0,0,"");try{n.cue.align="center"}catch(e){n.cue.align="middle"}if(n.state="CUE",-1===r.indexOf("--\x3e")){n.cue.id=r;continue}case"CUE":try{l(r,n.cue,n.regionList)}catch(e){n.reportOrThrowError(e),n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var p=-1!==r.indexOf("--\x3e");if(!r||p&&(u=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=r.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":r||(n.state="ID");continue}}}catch(e){n.reportOrThrowError(e),"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new s(s.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}},e.exports=I},6067:e=>{var t={"":1,lr:1,rl:1},n={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function i(e){return"string"==typeof e&&!!n[e.toLowerCase()]&&e.toLowerCase()}function r(e,n,r){this.hasBeenReset=!1;var s="",o=!1,a=e,d=n,l=r,c=null,u="",p=!0,h="auto",f="start",g="auto",m="auto",y=100,v="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return s},set:function(e){s=""+e}},pauseOnExit:{enumerable:!0,get:function(){return o},set:function(e){o=!!e}},startTime:{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");a=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");d=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return l},set:function(e){l=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return c},set:function(e){c=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(e){var n=function(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===n)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");u=n,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return p},set:function(e){p=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return h},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("Line: an invalid number or illegal string was specified.");h=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return f},set:function(e){var t=i(e);t?(f=t,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return g},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");g=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return m},set:function(e){var t=i(e);t?(m=t,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return y},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");y=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return v},set:function(e){var t=i(e);if(!t)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");v=t,this.hasBeenReset=!0}}}),this.displayState=void 0}r.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.exports=r},1048:e=>{var t={"":!0,up:!0};function n(e){return"number"==typeof e&&e>=0&&e<=100}e.exports=function(){var e=100,i=3,r=0,s=100,o=0,a=100,d="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!n(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return i},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");i=e}},regionAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!n(e))throw new Error("RegionAnchorX must be between 0 and 100.");s=e}},regionAnchorX:{enumerable:!0,get:function(){return r},set:function(e){if(!n(e))throw new Error("RegionAnchorY must be between 0 and 100.");r=e}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!n(e))throw new Error("ViewportAnchorY must be between 0 and 100.");a=e}},viewportAnchorX:{enumerable:!0,get:function(){return o},set:function(e){if(!n(e))throw new Error("ViewportAnchorX must be between 0 and 100.");o=e}},scroll:{enumerable:!0,get:function(){return d},set:function(e){var n=function(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);!1===n?console.warn("Scroll: an invalid or illegal string was specified."):d=n}}})}},924:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Zl});var i=n(831),r=n(1909),s=n(2249),o=n(1501),a=n(1476),d=n(5446),l=n(7436),c=n(1301);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h="33across",f=["33across_mgni"],g="USD",m=/^[a-zA-Z0-9_-]{22}$/,y={SIAB:"siab",INVIEW:"inview",INSTREAM:"instream"},v=["mimes","minduration","maxduration","placement","protocols","startdelay","skip","skipafter","minbitrate","maxbitrate","delivery","playbackmethod","api","linearity"],b={uniqueSiteIds:[]};function _(e){return"".concat(e.params.siteId,":").concat(e.params.productId)}function w(e){return"".concat(e.bidId)}function T(e){var t,n=e.bidRequests,i=e.gdprConsent,r=void 0===i?{}:i,s=e.uspConsent,o=e.pageUrl,a=e.referer,u=e.ttxSettings,h={},f=n[0],g=f.params,m=g.siteId,b=g.test;return h.imp=[],n.forEach((function(e){var t,n,i;h.imp.push((t=e,n=(0,d.Z)(t,"ortb2Imp.ext.gpid"),i={id:t.bidId,ext:p({ttx:{prod:(0,d.Z)(t,"params.productId")}},n?{gpid:n}:{})},(0,d.Z)(t,"mediaTypes.banner")&&(i.banner=p({},function(e){var t,n,i=(0,d.Z)(e,"mediaTypes.banner",{}),r=(n=e.adUnitCode,document.getElementById(n)||document.getElementById(function(e){if((0,l.T9)())for(var t=googletag.pubads().getSlots(),n=(0,l.CS)(e),i=0;i<t.length;i++)if(n(t[i])){var r=t[i].getSlotElementId();return(0,l.PN)("[33Across Adapter] Map ad unit path to HTML element id: '".concat(e,"' -> ").concat(r)),r}return(0,l.yN)("[33Across Adapter] Unable to locate element for ad unit code: '".concat(e,"'")),null}(n))),s=function(e){return(0,l.kJ)(e)&&2===e.length&&!(0,l.kJ)(e[0])?[S(e)]:e.map(S)}(i.sizes);t="function"==typeof e.getFloor?s.map((function(t){var n,i=E(e,t,c.Mk);return i&&(n={ext:{ttx:{bidfloors:[i]}}}),Object.assign({},t,n)})):s;var o,a=function(e){return e.reduce((function(e,t){return t.h*t.w<e.h*e.w?t:e}))}(s),u=(o=function(e){return!function(){try{return(0,l.e7)()!==(0,l.Zy)()}catch(e){return!0}}()&&null!==e}(r)?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.w,r=n.h;return"visible"===t.document.visibilityState?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.w,i=t.h,r=e.getBoundingClientRect(),s=r.width,o=r.height,a=r.left,d=r.top,l=r.right,c=r.bottom;return(0===s||0===o)&&n&&i&&(s=n,o=i,l=a+n,c=d+i),{width:s,height:o,left:a,top:d,right:l,bottom:c}}(e,{w:n.w,h:n.h}),r=function(e){for(var t={left:e[0].left,right:e[0].right,top:e[0].top,bottom:e[0].bottom},n=1;n<e.length;++n){if(t.left=Math.max(t.left,e[n].left),t.right=Math.min(t.right,e[n].right),t.left>=t.right)return null;if(t.top=Math.max(t.top,e[n].top),t.bottom=Math.min(t.bottom,e[n].bottom),t.top>=t.bottom)return null}return t.width=t.right-t.left,t.height=t.bottom-t.top,t}([{left:0,top:0,right:t.innerWidth,bottom:t.innerHeight},i]);return null!==r?r.width*r.height/(i.width*i.height)*100:0}(e,t,{w:i,h:r}):0}(r,(0,l.Zy)(),a):"nm",{ttx:{viewability:{amount:isNaN(o)?o:Math.round(o)}}});return{format:t,ext:u}}(t))),(0,d.Z)(t,"mediaTypes.video")&&(i.video=function(e){var t=(0,d.Z)(e,"mediaTypes.video",{}),n=(0,d.Z)(e,"params.video",{}),i=p(p({},t),n),r={},s=S(i.playerSize[0]),o=s.w,a=s.h;r.w=o,r.h=a,v.forEach((function(e){i.hasOwnProperty(e)&&(r[e]=i[e])}));var l=C(e);if(r.placement=r.placement||2,l===y.INSTREAM&&(r.startdelay=r.startdelay||0,r.placement=1),"function"==typeof e.getFloor){var u=E(e,{w:r.w,h:r.h},c.pX);u&&Object.assign(r,{ext:{ttx:{bidfloors:[u]}}})}return r}(t)),i))})),h.site={id:m},h.device=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,l.e7)(),i={ext:{ttx:p(p({},A()),{},{pxr:n.devicePixelRatio,vp:(e=function(){var e=(0,l.e7)();try{for(;e.parent!==e&&e.parent.document;)e=e.parent}catch(e){}return e}().document.documentElement,{w:e.clientWidth,h:e.clientHeight}),ah:n.screen.availHeight,mtp:n.navigator.maxTouchPoints})}};return t.sua&&(i.sua=(0,l.ei)(t.sua,["browsers","platform","model"])),i}(null===(t=f.ortb2)||void 0===t?void 0:t.device),o&&(h.site.page=o),a&&(h.site.ref=a),h.id=f.auctionId,r.consentString&&(h.user=I(h.user,{consent:r.consentString})),Array.isArray(f.userIdAsEids)&&f.userIdAsEids.length>0&&(h.user=I(h.user,{eids:f.userIdAsEids})),h.regs=I(h.regs,{gdpr:Number(r.gdprApplies)}),s&&(h.regs=I(h.regs,{us_privacy:s})),h.ext={ttx:{prebidStartedAt:Date.now(),caller:[{name:"prebidjs",version:"7.47.0"}]}},f.schain&&(h.source=I(h.source,{schain:f.schain})),1===b&&(h.test=1),{method:"POST",url:u&&u.url||"".concat("https://ssc.33across.com/api/v1/hb","?guid=").concat(m),data:JSON.stringify(h),options:{contentType:"text/plain",withCredentials:!0}}}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return(0,l.Ee)({},e,{ext:t})}function S(e){return{w:parseInt(e[0],10),h:parseInt(e[1],10)}}function k(e){return(0,l.Ee)({},e,{params:{productId:C(e)}})}function C(e){var t=e.params,n=e.mediaTypes,i=n.banner,r=n.video;return r&&!i&&"instream"===r.context?y.INSTREAM:t.productId===y.INVIEW?t.productId:y.SIAB}function E(e,t,n){var i=e.getFloor({currency:g,mediaType:n,size:[t.w,t.h]});if(!isNaN(i.floor)&&i.currency===g)return i.floor}function A(){var e=(0,l.e7)(),t=e.innerWidth,n=e.innerHeight,i=e.screen,r=[Math.max(i.width,i.height),Math.min(i.width,i.height)],s=r[0],o=r[1];return n>t?{w:o,h:s}:{w:s,h:o}}var P={NON_MEASURABLE:"nm",code:h,aliases:f,supportedMediaTypes:[c.Mk,c.pX],gvlid:58,isBidRequestValid:function(e){return function(e){return!(e.bidder!==h&&!f.includes(e.bidder)||!e.params)&&!!function(e){return null!==((0,d.Z)(e,"params.siteId","")||"").trim().match(m)}(e)}(e)&&function(e){var t=(0,d.Z)(e,"mediaTypes.banner");return void 0===t||!!Array.isArray(t.sizes)}(e)&&function(e){var t=(0,d.Z)(e,"mediaTypes.video"),n=(0,d.Z)(e,"params.video",{});if(void 0===t)return!0;if(!Array.isArray(t.playerSize))return!1;if(!t.context)return!1;var i=p(p({},t),n);return!(!Array.isArray(i.mimes)||0===i.mimes.length)&&(!(!Array.isArray(i.protocols)||0===i.protocols.length)&&((void 0===i.placement||"number"==typeof i.placement)&&("instream"!==t.context||void 0===i.startdelay||"number"==typeof i.startdelay)))}(e)},buildRequests:function(e,t){var n=function(e,t){var n,i,r=Object.assign({},a.vc.getConfig("ttxSettings")),s=Object.assign({consentString:void 0,gdprApplies:!1},t&&t.gdprConsent),o=t&&t.uspConsent,d=null==t||null===(n=t.refererInfo)||void 0===n?void 0:n.page,c=null==t||null===(i=t.refererInfo)||void 0===i?void 0:i.ref;return b.uniqueSiteIds=e.map((function(e){return e.params.siteId})).filter(l.tT),{ttxSettings:r,gdprConsent:s,uspConsent:o,pageUrl:d,referer:c}}(e,t),i=n.ttxSettings,r=n.gdprConsent,s=n.uspConsent,o=n.pageUrl,d=n.referer,c=function(e,t){return function(e,t){var n={};return e.forEach((function(e){var i=t(e);n[i]=n[i]||[],n[i].push(e)})),n}(t.map(k),!0===(e&&e.enableSRAMode)?_:w)}(i,e),u=[];for(var p in c)u.push(T({bidRequests:c[p],gdprConsent:r,uspConsent:s,pageUrl:o,referer:d,ttxSettings:i}));return u},interpretResponse:function(e,t){var n=e.body,i=n.seatbid,r=n.cur,s=void 0===r?"USD":r;return(0,l.kJ)(i)?i.filter((function(e){return(0,l.kJ)(e.bid)&&e.bid.length>0})).reduce((function(e,t){return e.concat(t.bid.map((function(e){return function(e,t){var n=e.adomain&&e.adomain.length,i={requestId:e.impid,bidderCode:h,cpm:e.price,width:e.w,height:e.h,ad:e.adm,ttl:e.ttl||60,creativeId:e.crid,mediaType:(0,d.Z)(e,"ext.ttx.mediaType",c.Mk),currency:t,netRevenue:!0};return n&&(i.meta={advertiserDomains:e.adomain}),i.mediaType===c.pX&&("xml"===(0,d.Z)(e,"ext.ttx.vastType","xml")?i.vastXml=i.ad:i.vastUrl=i.ad),i}(e,s)})))}),[]):[]},getUserSyncs:function(e,t,n,i){var r=e.iframeEnabled?b.uniqueSiteIds.map((function(e){return function(e){var t=e.siteId,n=void 0===t?"zzz000000000003zzz":t,i=e.gdprConsent,r=void 0===i?{}:i,s=e.uspConsent,o=a.vc.getConfig("ttxSettings"),d=o&&o.syncUrl||"https://ssc-cms.33across.com/ps/?m=xch&rt=html&ru=deb",l=r.consentString,c=r.gdprApplies,u={type:"iframe",url:"".concat(d,"&id=").concat(n,"&gdpr_consent=").concat(encodeURIComponent(l),"&us_privacy=").concat(encodeURIComponent(s))};return"boolean"==typeof c&&(u.url+="&gdpr=".concat(Number(c))),u}({gdprConsent:n,uspConsent:i,siteId:e})})):[];return b.uniqueSiteIds=[],r}};(0,o.dX)(P),(0,s.z)("33acrossBidAdapter");var x=n(1130),D=n(3669),O=n(7467),R="33acrossId",N={name:R,gvlid:58,decode:function(e){return(0,r.Z)({},R,{envelope:e})},getId:function(e,t){var n=e.params,i=void 0===n?{}:n;if("string"==typeof i.pid){var r=i.pid,s=i.apiUrl,o=void 0===s?"https://lexicon.33across.com/v1/envelope":s;return{callback:function(e){(0,x.O)(1e4)(o,{success:function(t){var n;try{n=function(e){if(e.succeeded){if(e.data.envelope)return e.data.envelope;(0,l.ji)("".concat(R,": No envelope was received"))}else"Cookied User"==e.error?(0,l.ji)("".concat(R,": Unsuccessful response").concat(" ",e.error)):(0,l.H)("".concat(R,": Unsuccessful response").concat(" ",e.error))}(JSON.parse(t))}catch(e){(0,l.H)("".concat(R,": ID reading error:"),e)}e(n)},error:function(t){(0,l.H)("".concat(R,": ID error response"),t),e()}},function(e,t){var n=O.nX.getConsentData(),i=Boolean(null==t?void 0:t.gdprApplies),r={pid:e,gdpr:Number(i),src:"pbjs",ver:"7.47.0"};return n&&(r.us_privacy=n),i&&(r.gdpr_consent=t.consentString||""),r}(r,t),{method:"GET",withCredentials:!0})}}}(0,l.H)("".concat(R,": Submodule requires a partner ID to be defined"))}};(0,D.Bx)("userId",N),(0,s.z)("33acrossIdSystem");var M=n(3014),L=n(1785),U=n(9267),j=n(3605),B=n(9034),q=a.vc.getConfig,F={code:"adf",aliases:[{code:"adformOpenRTB",gvlid:50},{code:"adform",gvlid:50}],gvlid:50,supportedMediaTypes:[c.B5,c.Mk,c.pX],isBidRequestValid:function(e){var t=e.params||{},n=t.mid,i=t.inv,r=t.mname;return!!(n||i&&r)},buildRequests:function(e,t){var n,i,r=t.ortb2||{},s=r.user;"object"===(0,U.Z)(q("app"))?(n=q("app")||{},r.app&&(0,l.Ee)(n,r.app)):(i=q("site")||{},r.site&&(0,l.Ee)(i,r.site),i.page||(i.page=t.refererInfo.page));var o=q("device")||{};o.w=o.w||window.innerWidth,o.h=o.h||window.innerHeight,o.ua=o.ua||navigator.userAgent;var c=V(e,"params.adxDomain")||"adx.adform.net",u=V(e,"params.pt")||V(e,"params.priceType")||"net",p=t.auctionId,h=V(e,"params.test"),f=q("currency.adServerCurrency"),g=f&&[f],m=V(e,"userIdAsEids"),y=V(e,"schain"),v=e.map((function(e,t){e.netRevenue=u;var n=e.getFloor?e.getFloor({currency:f||"USD"}):{},i=n.floor,r=n.currency,s=e.params,o={id:t+1,tagid:s.mid,bidfloor:i,bidfloorcur:r,ext:{bidder:{inv:s.inv,mname:s.mname}}};if(e.nativeOrtbRequest&&e.nativeOrtbRequest.assets){for(var a=e.nativeOrtbRequest.assets,c=[],p=0;p<a.length;p++){var h=(0,l.I8)(a[p]),g=h.img;if(g){var m=g.ext&&g.ext.aspectratios;if(m){var y=parseInt(m[0].split(":")[0],10),v=parseInt(m[0].split(":")[1],10);g.wmin=g.wmin||0,g.hmin=v*g.wmin/y|0}}c.push(h)}o.native={request:{assets:c}}}var b=(0,d.Z)(e,"mediaTypes.banner");if(b&&b.sizes){var _=(0,l.sF)(b.sizes).map((function(e){var t=e.split("x"),n=(0,L.Z)(t,2),i=n[0],r=n[1];return{w:parseInt(i,10),h:parseInt(r,10)}}));o.banner={format:_}}var w=(0,d.Z)(e,"mediaTypes.video");return w&&(o.video=w),o})),b={id:t.auctionId,site:i,app:n,user:s,device:o,source:{tid:p,fd:1},ext:{pt:u},cur:g,imp:v};return h&&(b.is_debug=!!h,b.test=1),a.vc.getConfig("coppa")&&(0,j.N)(b,"regs.coppa",1),void 0!==(0,d.Z)(t,"gdprConsent.gdprApplies")&&((0,j.N)(b,"user.ext.consent",t.gdprConsent.consentString),(0,j.N)(b,"regs.ext.gdpr",1&t.gdprConsent.gdprApplies)),t.uspConsent&&(0,j.N)(b,"regs.ext.us_privacy",t.uspConsent),m&&(0,j.N)(b,"user.ext.eids",m),y&&(0,j.N)(b,"source.ext.schain",y),{method:"POST",url:"https://"+c+"/adx/openrtb",data:JSON.stringify(b),bids:e}},interpretResponse:function(e,t){var n=t.bids;if(e.body){var i,r,s=e.body,o=s.seatbid,a=s.cur,l=(i=o.map((function(e){return e.bid})),(r=[]).concat.apply(r,(0,M.Z)(i))).reduce((function(e,t){return e[t.impid-1]=t,e}),[]);return n.map((function(e,t){var n=l[t];if(n){var i=(0,d.Z)(n,"ext.prebid.type"),r={requestId:e.bidId,cpm:n.price,creativeId:n.crid,ttl:360,netRevenue:"net"===e.netRevenue,currency:a,mediaType:i,width:n.w,height:n.h,dealId:n.dealid,meta:{mediaType:i,advertiserDomains:n.adomain}};return n.native?r.native={ortb:n.native}:r[i===c.pX?"vastXml":"ad"]=n.adm,e.renderer||i!==c.pX||"outstream"!==(0,d.Z)(e,"mediaTypes.video.context")||(r.renderer=B.Th.install({id:e.bidId,url:"https://s2.adform.net/banners/scripts/video/outstream/render.js",adUnitCode:e.adUnitCode}),r.renderer.setRender(z)),r}})).filter(Boolean)}}};function V(e,t){for(var n,i=0;i<e.length;i++)if(n=(0,d.Z)(e[i],t))return n}function z(e){e.renderer.push((function(){window.Adform.renderOutstream(e)}))}(0,o.dX)(F),(0,s.z)("adfBidAdapter");var $=n(4232),H=n(623),W="USD",Z={image:{required:!0},title:{required:!0},sponsoredBy:{required:!0},clickUrl:{required:!0},body:{required:!1},icon:{required:!1},cta:{required:!1}},G={code:"adyoulike",gvlid:259,supportedMediaTypes:[c.Mk,c.B5,c.pX],aliases:["ayl"],isBidRequestValid:function(e){var t=Q(Y(e)),n=t.width>0&&t.height>0;return e.params&&e.params.placement&&(n||e.mediaTypes&&e.mediaTypes.native)},buildRequests:function(e,t){e=(0,H.lY)(e);var n=!1,i={Version:"1.0",Bids:e.reduce((function(e,t){var i,r=(i=t,(0,d.Z)(i,"mediaTypes.banner")?c.Mk:(0,d.Z)(i,"mediaTypes.video")?c.pX:(0,d.Z)(i,"mediaTypes.native")?c.B5:void 0),s=Y(t),o=Q(s);if(e[t.bidId]={},e[t.bidId].PlacementID=t.params.placement,e[t.bidId].TransactionID=t.transactionId,e[t.bidId].Width=o.width,e[t.bidId].Height=o.height,e[t.bidId].AvailableSizes=s.join(","),"function"==typeof t.getFloor&&(e[t.bidId].Pricing=function(e,t,n){var i=e.getFloor({currency:W,mediaType:n,size:[t.width,t.height]});if(!isNaN(i.floor)&&i.currency===W)return i.floor}(t,o,r)),t.schain&&(e[t.bidId].SChain=t.schain),r===c.B5){var a=t.mediaTypes.native;"image"===a.type&&(a=Object.assign({},Z,a)),a.clickUrl={required:!0},e[t.bidId].Native=a}if(r===c.pX){n=!0,e[t.bidId].Video=t.mediaTypes.video;var l=t.mediaTypes.video.playerSize;Array.isArray(l)&&!Array.isArray(l[0])&&(e[t.bidId].Video.playerSize=[l])}return e}),{}),PageRefreshed:X()};t.gdprConsent&&(i.gdprConsent={consentString:t.gdprConsent.consentString,consentRequired:"boolean"==typeof t.gdprConsent.gdprApplies?t.gdprConsent.gdprApplies:null}),t.uspConsent&&(i.uspConsent=t.uspConsent),t.ortb2&&(i.ortb2=t.ortb2),(0,d.Z)(t,"userIdAsEids")&&(i.userId=t.userIdAsEids),i.pbjs_version="7.47.0";var r=JSON.stringify(i);return{method:"POST",url:K(e,t,n),data:r,options:{withCredentials:!0}}},interpretResponse:function(e,t){var n=[],i={};try{i=JSON.parse(t.data).Bids}catch(e){}return e.body.forEach((function(e){var t=function(e,t){if(e&&(e.Ad||e.Native||e.Vast)){var n=t&&t[e.BidID];n&&(e.Width&&"0"!==e.Width||(e.Width=n.Width),e.Height&&"0"!==e.Height||(e.Height=n.Height));var i={requestId:e.BidID,ttl:3600,creativeId:e.CreativeID,cpm:e.Price,netRevenue:!0,currency:W,meta:e.Meta||{advertiserDomains:[]}},r=e.Vast;return r?(i.width=e.Width,i.height=e.Height,i.vastXml=window.atob(r),i.mediaType="video"):n.Native?(i.native=function(e,t){if("object"===(0,U.Z)(e.Native))return e.Native;var n={},i={},r={};if("string"==typeof e.Ad){i=JSON.parse(e.Ad.match(/\/\*PREBID\*\/(.*)\/\*PREBID\*\//)[1]),r=i.Content.Preview.Text;var s=i.TrackingPrefix+"/pixel?event_kind=IMPRESSION&attempt="+i.Attempt,o=i.TrackingPrefix+"/pixel?event_kind=INSERTION&attempt="+i.Attempt;i.Campaign&&(s+="&campaign="+i.Campaign,o+="&campaign="+i.Campaign),n.clickUrl=i.TrackingPrefix+"/ar?event_kind=CLICK&attempt="+i.Attempt+"&campaign="+i.Campaign+"&url="+encodeURIComponent(i.Content.Landing.Url),i.OnEvents?(n.clickTrackers=ne(i.OnEvents.CLICK),n.impressionTrackers=ne(i.OnEvents.IMPRESSION),n.javascriptTrackers=ne(i.OnEvents.IMPRESSION,!0)):n.impressionTrackers=[],n.impressionTrackers.push(s,o)}return Object.keys(t).map((function(s,o){switch(s){case"title":n[s]=r.TITLE;break;case"body":n[s]=r.DESCRIPTION;break;case"cta":n[s]=r.CALLTOACTION;break;case"sponsoredBy":n[s]=i.Content.Preview.Sponsor.Name;break;case"image":var a=t.image.sizes||[];a.length||(a[0]=e.Width||300,a[1]=e.Height||250);var l=te(i,(0,d.Z)(i,"Content.Preview.Thumbnail.Image"),a[0],a[1]);l&&(n[s]={url:l,width:a[0],height:a[1]});break;case"icon":var c=t.icon.sizes||[];c.length||(c[0]=50,c[1]=50);var u=te(i,(0,d.Z)(i,"Content.Preview.Sponsor.Logo.Resource"),c[0],c[1]);u&&(n[s]={url:u,width:c[0],height:c[1]});break;case"privacyIcon":n[s]=te(i,(0,d.Z)(i,"Content.Preview.Credit.Logo.Resource"),25,25);break;case"privacyLink":n[s]=(0,d.Z)(i,"Content.Preview.Credit.Url")}})),n}(e,n.Native),i.mediaType="native"):(i.width=e.Width,i.height=e.Height,i.ad=e.Ad),i}}(e,i);t&&n.push(t)})),n}};function X(){try{if(performance&&performance.navigation)return performance.navigation.type===performance.navigation.TYPE_RELOAD}catch(e){}return!1}function K(e,t,n){var i=function(e){var t=(0,$.sE)(e,(function(e){return e.params.DC}));return t?"-"+t.params.DC:""}(e),r=n?"/hb-api/prebid-video/v1":"/hb-api/prebid/v1";return(0,l.Q2)({protocol:"https",host:"".concat("hb-api").concat(i,".omnitagjs.com"),pathname:r,search:J(t)})}function J(e){var t,n={};if(e){var i,r=e.refererInfo;r&&(r.location&&(n.RefererUrl=encodeURIComponent(r.location),r.reachedTop||(n.SafeFrame=!0)),n.PageUrl=encodeURIComponent(r.topmostLocation),n.PageReferrer=encodeURIComponent(r.location));var s=null===(i=e.ortb2)||void 0===i?void 0:i.site;s&&(n.PageUrl=encodeURIComponent(s.page||(null==r?void 0:r.topmostLocation)),n.PageReferrer=encodeURIComponent(s.ref||(null==r?void 0:r.location)))}var o=null==e||null===(t=e.refererInfo)||void 0===t?void 0:t.canonicalUrl;return o&&(n.CanonicalUrl=encodeURIComponent(o)),n}function Y(e){var t=e.sizes||[];return e.mediaTypes&&e.mediaTypes.banner&&(t=e.mediaTypes.banner.sizes||[]),e.params&&Array.isArray(e.params.size)&&(t=e.params.size,Array.isArray(t[0])||(t=[t])),(0,l.sF)(t)}function Q(e){var t={},n=e[0];if("string"!=typeof n)return t;var i=n.toUpperCase().split("X"),r=parseInt(i[0],10);r&&(t.width=r);var s=parseInt(i[1],10);return s&&(t.height=s),t}function ee(e){return e?"https://blobs.omnitagjs.com/blobs/"+e.substr(16,2)+"/"+e.substr(16)+"/"+e:""}function te(e,t,n,i){var r="";if(t&&t.Kind)switch(t.Kind){case"INTERNAL":r=ee(t.Data.Internal.BlobReference.Uid);break;case"EXTERNAL":var s=e.DynamicPrefix,o=t.Data.External.Url;if((o=(o=o.replace(/\[height\]/i,""+i)).replace(/\[width\]/i,""+n)).indexOf(s)>=0){var a=/.*url=([^&]*)/gm.exec(o);(r=a?a[1]:"")||(r=ee(/.*key=([^&]*)/gm.exec(o)[1]))}else r=o}return r}function ne(e,t){var n=[];return e?(e.map((function(e,i){(t&&"JAVASCRIPT_URL"===e.Kind||!t&&"PIXEL_URL"===e.Kind)&&n.push(e.Url)})),n):n}(0,o.dX)(G),(0,s.z)("adyoulikeBidAdapter");var ie=n(8507),re=n(7357),se=n(4070),oe=n(8476),ae=n(5738),de="appnexus",le=["id","minduration","maxduration","skippable","playback_method","frameworks","context","skipoffset"],ce=["minduration","maxduration","skip","skipafter","playbackmethod","api","startdelay"],ue=["age","externalUid","external_uid","segments","gender","dnt","language"],pe=["geo","device_id"],he=["enabled","dongle","member_id","debug_timeout"],fe={apn_debug_dongle:"dongle",apn_debug_member_id:"member_id",apn_debug_timeout:"debug_timeout"},ge={playback_method:{unknown:0,auto_play_sound_on:1,auto_play_sound_off:2,click_to_play:3,mouse_over:4,auto_play_sound_unknown:5},context:{unknown:0,pre_roll:1,mid_roll:2,post_roll:3,outstream:4,"in-banner":5}},me={body:"description",body2:"desc2",cta:"ctatext",image:{serverName:"main_image",requiredParams:{required:!0}},icon:{serverName:"icon",requiredParams:{required:!0}},sponsoredBy:"sponsored_by",privacyLink:"privacy_link",salePrice:"saleprice",displayUrl:"displayurl"},ye=/\/\/cdn\.adnxs\.com\/v|\/\/cdn\.adnxs\-simple\.com\/v/,ve=(0,se.df)({bidderCode:de}),be={code:de,gvlid:32,aliases:[{code:"appnexusAst",gvlid:32},{code:"emxdigital",gvlid:183},{code:"pagescience",gvlid:32},{code:"defymedia",gvlid:32},{code:"gourmetads",gvlid:32},{code:"matomy",gvlid:32},{code:"featureforward",gvlid:32},{code:"oftmedia",gvlid:32},{code:"adasta",gvlid:32},{code:"beintoo",gvlid:618}],supportedMediaTypes:[c.Mk,c.pX,c.B5],isBidRequestValid:function(e){return!!(e.params.placementId||e.params.placement_id||e.params.member&&(e.params.invCode||e.params.inv_code))},buildRequests:function(e,t){var n,i,r=(e=(0,H.lY)(e)).map(Te),s=(0,$.sE)(e,Se),o={};!0===a.vc.getConfig("coppa")&&(o={coppa:!0}),s&&Object.keys(s.params.user).filter((function(e){return(0,$.q9)(ue,e)})).forEach((function(e){var t=(0,l.G2)(e);if("segments"===e&&(0,l.kJ)(s.params.user[e])){var n=[];s.params.user[e].forEach((function(e){(0,l.hj)(e)?n.push({id:e}):(0,l.PO)(e)&&n.push(e)})),o[t]=n}else"segments"!==e&&(o[t]=s.params.user[e])}));var c,u=(0,$.sE)(e,Ce);u&&u.params&&u.params.app&&(c={},Object.keys(u.params.app).filter((function(e){return(0,$.q9)(pe,e)})).forEach((function(e){return c[e]=u.params.app[e]})));var p,h=(0,$.sE)(e,Ee);h&&h.params&&u.params.app&&u.params.app.id&&(p={appid:h.params.app.id});var f={},g={},m=ve.getCookie("apn_prebid_debug")||null;if(m)try{f=JSON.parse(m)}catch(e){(0,l.H)("AppNexus Debug Auction Cookie Error:\n\n"+e)}else{Object.keys(fe).forEach((function(e){var t=(0,l.rD)(e);(0,l.d8)(t)&&""!==t&&(f[fe[e]]=t,f.enabled=!0)})),f=(0,l.uh)({member_id:"number",debug_timeout:"number"},f);var y=(0,$.sE)(e,Ae);y&&y.debug&&(f=y.debug)}f&&f.enabled&&Object.keys(f).filter((function(e){return(0,$.q9)(he,e)})).forEach((function(e){g[e]=f[e]}));var v=(0,$.sE)(e,ke),b=v?parseInt(v.params.member,10):0,_=e[0].schain,w=(0,$.sE)(e,xe),T={tags:(0,M.Z)(r),user:o,sdk:{source:"pbjs",version:"7.47.0"},schain:_};w&&(T.iab_support={omidpn:"Appnexus",omidpv:"7.47.0"}),b>0&&(T.member_id=b),u&&(T.device=c),h&&(T.app=p);var I,S,k=(0,l.I8)(t&&t.ortb2),C=(I=k,S=[],["site.keywords","site.content.keywords","user.keywords","app.keywords","app.content.keywords"].forEach((function(e){var t=(0,d.Z)(I,e);(0,l.d8)(t)&&S.push(t)})),S).map((function(e){return Me(e)})),E=(0,l.I8)(a.vc.getConfig("appnexusAuctionKeywords"))||{};Object.keys(E).forEach((function(e){((0,l.d8)(E[e])||(0,l.hj)(E[e]))&&(E[e]=[E[e]])}));var A=l.Ee.apply(void 0,[{},E].concat((0,M.Z)(C))),P=(0,l.Bq)(A);if(P.length>0&&(P.forEach(we),T.keywords=P),a.vc.getConfig("adpod.brandCategoryExclusion")&&(T.brand_category_uniqueness=!0),g.enabled&&(T.debug=g,(0,l.PN)("AppNexus Debug Auction Settings:\n\n"+JSON.stringify(g,null,4))),t&&t.gdprConsent&&(T.gdpr_consent={consent_string:t.gdprConsent.consentString,consent_required:t.gdprConsent.gdprApplies},t.gdprConsent.addtlConsent&&-1!==t.gdprConsent.addtlConsent.indexOf("~"))){var x=t.gdprConsent.addtlConsent,D=x.substring(x.indexOf("~")+1);T.gdpr_consent.addtl_consent=D.split(".").map((function(e){return parseInt(e,10)}))}if(t&&t.uspConsent&&(T.us_privacy=t.uspConsent),null!=t&&t.gppConsent?T.privacy={gpp:t.gppConsent.gppString,gpp_sid:t.gppConsent.applicableSections}:null!=t&&null!==(n=t.ortb2)&&void 0!==n&&null!==(i=n.regs)&&void 0!==i&&i.gpp&&(T.privacy={gpp:t.ortb2.regs.gpp,gpp_sid:t.ortb2.regs.gpp_sid}),t&&t.refererInfo){var O={rd_ref:encodeURIComponent(t.refererInfo.topmostLocation),rd_top:t.refererInfo.reachedTop,rd_ifs:t.refererInfo.numIframes,rd_stk:t.refererInfo.stack.map((function(e){return encodeURIComponent(e)})).join(",")},R=t.refererInfo.canonicalUrl;(0,l.d8)(R)&&""!==R&&(O.rd_can=R),T.referrer_detection=O}if((0,$.sE)(e,Pe)&&e.filter(Pe).forEach((function(e){var t=function(e,t){var n=t.mediaTypes.video,i=n.durationRangeSec,r=n.requireExactDuration,s=function(e){var t=e.adPodDurationSec,n=e.durationRangeSec,i=e.requireExactDuration,r=(0,l.XV)(n),s=Math.floor(t/r);return i?Math.max(s,n.length):s}(t.mediaTypes.video),o=(0,l.d5)(i),a=e.filter((function(e){return e.uuid===t.bidId})),d=l.hl.apply(void 0,(0,M.Z)(a).concat([s]));if(r){var c=Math.ceil(s/i.length),u=(0,l.yo)(d,c);i.forEach((function(e,t){u[t].map((function(t){De(t,"minduration",e),De(t,"maxduration",e)}))}))}else d.map((function(e){return De(e,"maxduration",o)}));return d}(r,e),n=T.tags.filter((function(t){return t.uuid!==e.bidId}));T.tags=[].concat((0,M.Z)(n),(0,M.Z)(t))})),e[0].userId){var N=[];e[0].userIdAsEids.forEach((function(e){!e||!e.uids||e.uids.length<1||e.uids.forEach((function(t){var n={source:e.source,id:t.id};"adserver.org"==e.source?n.rti_partner="TDID":"uidapi.com"==e.source&&(n.rti_partner="UID2"),N.push(n)}))})),N.length&&(T.eids=N)}r[0].publisher_id&&(T.publisher_id=r[0].publisher_id);var L=function(e,t){var n=[],i={withCredentials:!0},r="https://ib.adnxs.com/ut/v3/prebid";if((0,ae.h)(null==t?void 0:t.gdprConsent)||(r="https://ib.adnxs-simple.com/ut/v3/prebid"),"TRUE"!==(0,l.rD)("apn_test").toUpperCase()&&!0!==a.vc.getConfig("apn_test")||(i.customHeaders={"X-Is-Test":1}),e.tags.length>15){var s=(0,l.I8)(e);(0,l.yo)(e.tags,15).forEach((function(e){s.tags=e;var o=JSON.stringify(s);n.push({method:"POST",url:r,data:o,bidderRequest:t,options:i})}))}else{var o=JSON.stringify(e);n={method:"POST",url:r,data:o,bidderRequest:t,options:i}}return n}(T,t);return L},interpretResponse:function(e,t){var n=this,i=t.bidderRequest;e=e.body;var r=[];if(!e||e.error){var s="in response for ".concat(i.bidderCode," adapter");return e&&e.error&&(s+=": ".concat(e.error)),(0,l.H)(s),r}if(e.tags&&e.tags.forEach((function(e){var t,s=(t=e)&&t.ads&&t.ads.length&&(0,$.sE)(t.ads,(function(e){return e.rtb}));if(s&&(!0===oe.S.get(i.bidderCode,"allowZeroCpmBids")?s.cpm>=0:s.cpm>0)&&(0,$.q9)(n.supportedMediaTypes,s.ad_type)){var a=function(e,t,n){var i=(0,l.zE)(e.uuid,[n]),r=(0,l._d)(),s={adId:r,requestId:e.uuid,cpm:t.cpm,creativeId:t.creative_id,dealId:t.deal_id,currency:"USD",netRevenue:!0,ttl:300,adUnitCode:i.adUnitCode,appnexus:{buyerMemberId:t.buyer_member_id,dealPriority:t.deal_priority,dealCode:t.deal_code}};if(t.adomain&&(s.meta=Object.assign({},s.meta,{advertiserDomains:[t.adomain]})),t.advertiser_id&&(s.meta=Object.assign({},s.meta,{advertiserId:t.advertiser_id})),t.buyer_member_id&&(s.meta=Object.assign({},s.meta,{dchain:function(e){return{ver:"1.0",complete:0,nodes:[{bsid:e.buyer_member_id.toString()}]}}(t)})),t.brand_id&&(s.meta=Object.assign({},s.meta,{brandId:t.brand_id})),t.rtb.video)switch(Object.assign(s,{width:t.rtb.video.player_width,height:t.rtb.video.player_height,vastImpUrl:t.notify_url,ttl:3600}),(0,d.Z)(i,"mediaTypes.video.context")){case c.Oh:var a=(0,o.Q1)(i.bidder,t.brand_category_id);s.meta=Object.assign({},s.meta,{primaryCatId:a});var u=t.deal_priority;s.video={context:c.Oh,durationSeconds:Math.floor(t.rtb.video.duration_ms/1e3),dealTier:u},s.vastUrl=t.rtb.video.asset_url;break;case re.gZ:if(s.adResponse=e,s.adResponse.ad=s.adResponse.ads[0],s.adResponse.ad.video=s.adResponse.ad.rtb.video,s.vastXml=t.rtb.video.content,t.renderer_url){var p=(0,$.sE)(n.bids,(function(t){return t.bidId===e.uuid})),h=(0,d.Z)(p,"mediaTypes.video.renderer.options");h||(h=(0,d.Z)(p,"renderer.options")),s.renderer=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=B.Th.install({id:t.renderer_id,url:t.renderer_url,config:n,loaded:!1,adUnitCode:e});try{i.setRender(Oe)}catch(e){(0,l.yN)("Prebid Error calling setRender on renderer",e)}return i.setEventHandlers({impression:function(){return(0,l.ji)("AppNexus outstream video impression event")},loaded:function(){return(0,l.ji)("AppNexus outstream video loaded event")},ended:function(){(0,l.ji)("AppNexus outstream renderer video event"),document.querySelector("#".concat(e)).style.display="none"}}),i}(s.adUnitCode,t,h)}break;case re.LD:s.vastUrl=t.notify_url+"&redir="+encodeURIComponent(t.rtb.video.asset_url)}else if(t.rtb[c.B5]){var f,g=t.rtb[c.B5];if(function(e){if(!e||""===e)return!1;var t=e.match(ye),n=null!=t&&t.length>=1,i=e.match("trk.js"),r=null!=i&&i.length>=1;return e.startsWith("<script")&&r&&n}(t.viewability.config)){var m="pbjs_adid="+r+";pbjs_auc="+i.adUnitCode;f=t.viewability.config.replace("dom_id=%native_dom_id%",m)}var y=g.javascript_trackers;null==y?y=f:(0,l.d8)(y)?y=[y,f]:y.push(f),s[c.B5]={title:g.title,body:g.desc,body2:g.desc2,cta:g.ctatext,rating:g.rating,sponsoredBy:g.sponsored,privacyLink:g.privacy_link,address:g.address,downloads:g.downloads,likes:g.likes,phone:g.phone,price:g.price,salePrice:g.saleprice,clickUrl:g.link.url,displayUrl:g.displayurl,clickTrackers:g.link.click_trackers,impressionTrackers:g.impression_trackers,video:g.video,javascriptTrackers:y},g.main_img&&(s.native.image={url:g.main_img.url,height:g.main_img.height,width:g.main_img.width}),g.icon&&(s.native.icon={url:g.icon.url,height:g.icon.height,width:g.icon.width})}else{Object.assign(s,{width:t.rtb.banner.width,height:t.rtb.banner.height,ad:t.rtb.banner.content});try{if(t.rtb.trackers)for(var v=0;v<t.rtb.trackers[0].impression_urls.length;v++){var b=t.rtb.trackers[0].impression_urls[v],_=(0,l.SG)(b);s.ad+=_}}catch(e){(0,l.H)("Error appending tracking pixel",e)}}return s}(e,s,i);a.mediaType=function(e){var t=e.ad_type;return t===c.pX?c.pX:t===c.B5?c.B5:c.Mk}(s),r.push(a)}})),e.debug&&e.debug.debug_info){var a="AppNexus Debug Auction for Prebid\n\n"+e.debug.debug_info;a=a.replace(/(<td>|<th>)/gm,"\t").replace(/(<\/td>|<\/th>)/gm,"\n").replace(/^<br>/gm,"").replace(/(<br>\n|<br>)/gm,"\n").replace(/<h1>(.*)<\/h1>/gm,"\n\n===== $1 =====\n\n").replace(/<h[2-6]>(.*)<\/h[2-6]>/gm,"\n\n*** $1 ***\n\n").replace(/(<([^>]+)>)/gim,""),(0,l.ji)("https://console.appnexus.com/docs/understanding-the-debug-auction"),(0,l.ji)(a)}return r},getMappingFileInfo:function(){return{url:"https://acdn.adnxs-simple.com/prebid/appnexus-mapping/mappings.json",refreshInDays:2}},getUserSyncs:function(e,t,n,i,r){if(e.iframeEnabled&&(0,ae.h)(n)&&function(e){return!e||!Array.isArray(e.applicableSections)||e.applicableSections.every((function(e){return"number"==typeof e&&e<=5}))}(r))return[{type:"iframe",url:"https://acdn.adnxs.com/dmp/async_usersync.html"}]},transformBidParams:function(e,t,n,i){var r=l.Bq;if(!0===t){var s=null,o=a.vc.getConfig("s2sConfig");(0,l.PO)(o)?s=(0,d.Z)(o,"endpoint.p1Consent"):(0,l.kJ)(o)&&o.forEach((function(e){(0,$.q9)(e.bidders,n.bids[0].bidder)&&(s=(0,d.Z)(e,"endpoint.p1Consent"))})),s&&s.match("/openrtb2/prebid")&&(r=Ne)}return e=(0,l.uh)({member:"string",invCode:"string",placementId:"number",keywords:r,publisherId:"number"},e),t&&(_e(e.keywords)&&e.keywords.forEach(we),Object.keys(e).forEach((function(t){var n=(0,l.G2)(t);n!==t&&(e[n]=e[t],delete e[t])})),e.use_pmt_rule="boolean"==typeof e.use_payment_rule&&e.use_payment_rule,e.use_payment_rule&&delete e.use_payment_rule),e}};function _e(e){return!!((0,l.kJ)(e)&&e.length>0)}function we(e){_e(e.value)&&""===e.value[0]&&delete e.value}function Te(e){var t={};Object.keys(e.params).forEach((function(t){var n=(0,l.G2)(t);n!==t&&(e.params[n]=e.params[t],delete e.params[t])})),t.sizes=Ie(e.sizes),t.primary_size=t.sizes[0],t.ad_types=[],t.uuid=e.bidId,e.params.placement_id?t.id=parseInt(e.params.placement_id,10):t.code=e.params.inv_code,t.allow_smaller_sizes=e.params.allow_smaller_sizes||!1,t.use_pmt_rule="boolean"==typeof e.params.use_payment_rule?e.params.use_payment_rule:"boolean"==typeof e.params.use_pmt_rule&&e.params.use_pmt_rule,t.prebid=!0,t.disable_psa=!0;var n=function(e){if(!(0,l.LQ)(e.getFloor))return e.params.reserve?e.params.reserve:null;var t=e.getFloor({currency:"USD",mediaType:"*",size:"*"});return(0,l.PO)(t)&&!isNaN(t.floor)&&"USD"===t.currency?t.floor:null}(e);if(n&&(t.reserve=n),e.params.position)t.position={above:1,below:2}[e.params.position]||0;else{var i=(0,d.Z)(e,"mediaTypes.banner.pos")||(0,d.Z)(e,"mediaTypes.video.pos");0!==i&&1!==i&&3!==i||(t.position=3===i?2:i)}e.params.traffic_source_code&&(t.traffic_source_code=e.params.traffic_source_code),e.params.private_sizes&&(t.private_sizes=Ie(e.params.private_sizes)),e.params.supply_type&&(t.supply_type=e.params.supply_type),e.params.pub_click&&(t.pubclick=e.params.pub_click),e.params.ext_inv_code&&(t.ext_inv_code=e.params.ext_inv_code),e.params.publisher_id&&(t.publisher_id=parseInt(e.params.publisher_id,10)),e.params.external_imp_id&&(t.external_imp_id=e.params.external_imp_id);var r=(0,d.Z)(e,"ortb2Imp.ext.data.keywords");if((0,l.d8)(r)&&""!==r||!(0,l.xb)(e.params.keywords)){var s=Me(r),o=(0,l.PO)(e.params.keywords)?(0,l.I8)(e.params.keywords):{};Object.keys(o).forEach((function(e){((0,l.d8)(o[e])||(0,l.hj)(o[e]))&&(o[e]=[o[e]])}));var a=(0,l.Ee)({},o,s),u=(0,l.Bq)(a);u.length>0&&(u.forEach(we),t.keywords=u)}var p,h,f=(0,d.Z)(e,"ortb2Imp.ext.data.pbadslot");if(f&&(t.gpid=f),(e.mediaType===c.B5||(0,d.Z)(e,"mediaTypes.".concat(c.B5)))&&(t.ad_types.push(c.B5),0===t.sizes.length&&(t.sizes=Ie([1,1])),e.nativeParams)){var g=(p=e.nativeParams,h={},Object.keys(p).forEach((function(e){var t=me[e]&&me[e].serverName||me[e]||e,n=me[e]&&me[e].requiredParams;if(h[t]=Object.assign({},n,p[e]),(t===me.image.serverName||t===me.icon.serverName)&&h[t].sizes){var i=h[t].sizes;((0,l.HC)(i)||(0,l.kJ)(i)&&i.length>0&&i.every((function(e){return(0,l.HC)(e)})))&&(h[t].sizes=Ie(h[t].sizes))}t===me.privacyLink&&(h.privacy_supported=!0)})),h);t[c.B5]={layouts:[g]}}var m=(0,d.Z)(e,"mediaTypes.".concat(c.pX)),y=(0,d.Z)(e,"mediaTypes.video.context");t.hb_source=m&&"adpod"===y?7:1,(e.mediaType===c.pX||m)&&t.ad_types.push(c.pX),(e.mediaType===c.pX||m&&"outstream"!==y)&&(t.require_asset_url=!0),e.params.video&&(t.video={},Object.keys(e.params.video).filter((function(e){return(0,$.q9)(le,e)})).forEach((function(n){switch(n){case"context":case"playback_method":var i=e.params.video[n];i=(0,l.kJ)(i)?i[0]:i,t.video[n]=ge[n][i];break;case"frameworks":break;default:t.video[n]=e.params.video[n]}})),e.params.video.frameworks&&(0,l.kJ)(e.params.video.frameworks)&&(t.video_frameworks=e.params.video.frameworks)),m&&(t.video=t.video||{},Object.keys(m).filter((function(e){return(0,$.q9)(ce,e)})).forEach((function(e){switch(e){case"minduration":case"maxduration":"number"!=typeof t.video[e]&&(t.video[e]=m[e]);break;case"skip":"boolean"!=typeof t.video.skippable&&(t.video.skippable=1===m[e]);break;case"skipafter":"number"!=typeof t.video.skipoffset&&(t.video.skippoffset=m[e]);break;case"playbackmethod":if("number"!=typeof t.video.playback_method){var n=m[e];(n=(0,l.kJ)(n)?n[0]:n)>=1&&n<=4&&(t.video.playback_method=n)}break;case"api":if(!t.video_frameworks&&(0,l.kJ)(m[e])){var i=m[e].map((function(e){var t=4===e?5:5===e?4:e;if(t>=1&&t<=5)return t})).filter((function(e){return e}));t.video_frameworks=i}break;case"startdelay":case"placement":var r="context";if("number"!=typeof t.video[r]){var s=m.placement,o=m.startdelay,a=function(e){if(e)return 2===e?"in-banner":e>2?"outstream":void 0}(s)||function(e){if(e)return 0===e?"pre_roll":-1===e?"mid_roll":-2===e?"post_roll":void 0}(o);t.video[r]=ge[r][a]}}}))),e.renderer&&(t.video=Object.assign({},t.video,{custom_renderer_present:!0})),e.params.frameworks&&(0,l.kJ)(e.params.frameworks)&&(t.banner_frameworks=e.params.frameworks);var v=(0,$.sE)(ie.K.getAdUnits(),(function(t){return e.transactionId===t.transactionId}));return v&&v.mediaTypes&&v.mediaTypes.banner&&t.ad_types.push(c.Mk),0===t.ad_types.length&&delete t.ad_types,t}function Ie(e){var t=[],n={};if((0,l.kJ)(e)&&2===e.length&&!(0,l.kJ)(e[0]))n.width=parseInt(e[0],10),n.height=parseInt(e[1],10),t.push(n);else if("object"===(0,U.Z)(e))for(var i=0;i<e.length;i++){var r=e[i];(n={}).width=parseInt(r[0],10),n.height=parseInt(r[1],10),t.push(n)}return t}function Se(e){return!!e.params.user}function ke(e){return!!parseInt(e.params.member,10)}function Ce(e){if(e.params)return!!e.params.app}function Ee(e){return e.params&&e.params.app?!!e.params.app.id:!!e.params.app}function Ae(e){return!!e.debug}function Pe(e){return e.mediaTypes&&e.mediaTypes.video&&e.mediaTypes.video.context===c.Oh}function xe(e){var t=!1,n=e.params,i=e.params.video;return n.frameworks&&(0,l.kJ)(n.frameworks)&&(t=(0,$.q9)(e.params.frameworks,6)),!t&&i&&i.frameworks&&(0,l.kJ)(i.frameworks)&&(t=(0,$.q9)(e.params.video.frameworks,6)),t}function De(e,t,n){(0,l.xb)(e.video)&&(e.video={}),e.video[t]=n}function Oe(e,t){!function(e){try{var t=document.getElementById(e).querySelectorAll("div[id^='google_ads']");t[0]&&t[0].style.setProperty("display","none")}catch(e){}}(e.adUnitCode),function(e){try{var t=document.getElementById(e).querySelectorAll("script[id^='sas_script']");t[0].nextSibling&&"iframe"===t[0].nextSibling.localName&&t[0].nextSibling.style.setProperty("display","none")}catch(e){}}(e.adUnitCode),e.renderer.push((function(){((0,l.W$)(t)||window).ANOutstreamVideo.renderAd({tagId:e.adResponse.tag_id,sizes:[e.getSize().split("x")],targetId:e.adUnitCode,uuid:e.adResponse.uuid,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},Re.bind(null,e))}))}function Re(e,t,n){e.renderer.handleVideoEvent({id:t,eventName:n})}function Ne(e){var t="";return Object.keys(e).forEach((function(n){(0,l.d8)(e[n])?""!==e[n]?t+="".concat(n,"=").concat(e[n],","):t+="".concat(n,","):(0,l.kJ)(e[n])&&(""===e[n][0]?t+="".concat(n,","):e[n].forEach((function(e){t+="".concat(n,"=").concat(e,",")})))})),t=t.substring(0,t.length-1)}function Me(e){var t={};return(0,l.d8)(e)&&""!==e&&e.split(/\s*(?:,)\s*/).forEach((function(e){if(-1!==e.indexOf("=")){var n=e.split("="),i=n[0],r=n[1];t.hasOwnProperty(i)?t[i].push(r):t[i]=[r]}else t.hasOwnProperty(e)||(t[e]=[""])})),t}(0,o.dX)(be),(0,s.z)("appnexusBidAdapter");var Le,Ue,je,Be,qe,Fe,Ve,ze=n(2751),$e=["request","imp","bidResponse","response"],He=["default","pbs"],We=$e[0],Ze=$e[1],Ge=$e[2],Xe=$e[3],Ke=He[0],Je=He[1],Ye=new Set($e),Qe=(Le={},{registerOrtbProcessor:function(e){var t=e.type,n=e.name,i=e.fn,r=e.priority,s=void 0===r?0:r,o=e.dialects,a=void 0===o?[Ke]:o;if(!Ye.has(t))throw new Error("ORTB processor type must be one of: ".concat($e.join(", ")));a.forEach((function(e){Le.hasOwnProperty(e)||(Le[e]={}),Le[e].hasOwnProperty(t)||(Le[e][t]={}),Le[e][t][n]={priority:s,fn:i}}))},getProcessors:function(e){return Le[e]||{}}}),et=Qe.registerOrtbProcessor,tt=Qe.getProcessors,nt=n(9797),it=2,rt=!1,st={iab:function(e){var t=e.onSuccess,n=e.onError,i=e.onEvent;function s(e,r){(0,l.PN)("Received a response from CMP",e),r?(i(e),!1!==e.gdprApplies&&"tcloaded"!==e.eventStatus&&"useractioncomplete"!==e.eventStatus||dt(e,{onSuccess:t,onError:n})):n("CMP unable to register callback function.  Please check CMP setup.")}var o={},a=function(){for(var e,t,n=window;;){try{if("function"==typeof n.__tcfapi){t=n.__tcfapi,e=n;break}}catch(e){}try{if(n.frames.__tcfapiLocator){e=n;break}}catch(e){}if(n===window.top)break;n=n.parent}return{cmpFrame:e,cmpFunction:t}}(),d=a.cmpFrame,c=a.cmpFunction;if(!d)return n("TCF2 CMP not found.");"function"==typeof c?((0,l.PN)("Detected CMP API is directly accessible, calling it now..."),c("addEventListener",it,s)):((0,l.PN)("Detected CMP is outside the current iframe where Prebid.js is located, calling it now..."),function(e,t,n){var i="__tcfapi",s="".concat(i,"Call");window[i]=function(e,n,i,a){var d=Math.random()+"",l=(0,r.Z)({},s,{command:e,version:n,parameter:a,callId:d});o[d]=i,t.postMessage(l,"*")},window.addEventListener("message",(function(e){var t="".concat(i,"Return"),n="string"==typeof e.data&&(0,$.q9)(e.data,t)?JSON.parse(e.data):e.data;if(n[t]&&n[t].callId){var r=n[t];o.hasOwnProperty(r.callId)&&o[r.callId](r.returnValue,r.success)}}),!1),window[i]("addEventListener",it,n)}(0,d,s))},static:function(e){var t=e.onSuccess,n=e.onError;dt(qe,{onSuccess:t,onError:n})}};function ot(e){var t,n,i=!1,r=null,s=!1;function o(e){null!=r&&clearTimeout(r),i||null==e||(0===e?t():r=setTimeout(t,e))}function a(t,n,r){if(o(null),i=!0,O.rp.setConsentData(t),"function"==typeof e){for(var s=arguments.length,a=new Array(s>3?s-3:0),d=3;d<s;d++)a[d-3]=arguments[d];e.apply(void 0,[n,r].concat(a))}}if((0,$.q9)(Object.keys(st),Ue)){var d={onSuccess:function(e){return a(e,!1)},onError:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];a.apply(void 0,[null,!0,e].concat(n))},onEvent:function(e){n=e,s||(s=!0,null!=Fe&&o(Fe))}};t=function(){var e=function(e){a(e,!1,"".concat(s?"Timeout waiting for user action on CMP":"CMP did not load",", continuing auction..."))};dt(n,{onSuccess:e,onError:function(){return e(lt(void 0))}})},st[Ue](d),null!=Fe&&s||o(je)}else a(null,!1,"CMP framework (".concat(Ue,") is not a supported framework.  Aborting consentManagement module and resuming auction."))}var at=(0,ze.g3)("gdpr",(function(e,t){var n;n=function(n,i){if(i){var r=l.yN;n&&(r=l.H,i="".concat(i," Canceling auction as per consentManagement config."));for(var s=arguments.length,o=new Array(s>2?s-2:0),a=2;a<s;a++)o[a-2]=arguments[a];r.apply(void 0,[i].concat(o))}n?(e.stopTiming(),"function"==typeof t.bidsBackHandler?t.bidsBackHandler():(0,l.H)("Error executing bidsBackHandler")):e.call(this,t)},Ve?((0,l.PN)("User consent information already known.  Pulling internally stored information..."),n(!1)):ot(n)}));function dt(e,t){var n=t.onSuccess,i=t.onError;!function(){var t=e&&"boolean"==typeof e.gdprApplies?e.gdprApplies:Be,n=e&&e.tcString;return!("boolean"==typeof t&&(!0!==t||n&&(0,l.d8)(n)))}()?n(lt(e)):i("CMP returned unexpected value during lookup process.",e)}function lt(e){return Ve={consentString:e?e.tcString:void 0,vendorData:e||void 0,gdprApplies:e&&"boolean"==typeof e.gdprApplies?e.gdprApplies:Be},e&&e.addtlConsent&&(0,l.d8)(e.addtlConsent)&&(Ve.addtlConsent=e.addtlConsent),Ve.apiVersion=it,Ve}a.vc.getConfig("consentManagement",(function(e){return function(e){var t;(e=e&&(e.gdpr||e.usp||e.gpp?e.gdpr:e))&&"object"===(0,U.Z)(e)?((0,l.d8)(e.cmpApi)?Ue=e.cmpApi:(Ue="iab",(0,l.PN)("consentManagement config did not specify cmp.  Using system default setting (".concat("iab",")."))),(0,l.hj)(e.timeout)?je=e.timeout:(je=1e4,(0,l.PN)("consentManagement config did not specify timeout.  Using system default setting (".concat(1e4,")."))),Fe=(0,l.hj)(e.actionTimeout)?e.actionTimeout:null,Be=!0===e.defaultGdprScope,(0,l.PN)("consentManagement module has been activated..."),"static"===Ue&&((0,l.PO)(e.consentData)?(null!=(null===(t=qe=e.consentData)||void 0===t?void 0:t.getTCData)&&(qe=qe.getTCData),je=0):(0,l.H)("consentManagement config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")),rt||(0,s.R)().requestBids.before(at,50),rt=!0,O.rp.enable(),ot()):(0,l.yN)("consentManagement (gdpr) config not defined, exiting consent manager")}(e.consentManagement)})),nt.S.before((function(e,t){return e(t.then((function(e){var t=O.rp.getConsentData();return t&&("boolean"==typeof t.gdprApplies&&(0,j.N)(e,"regs.ext.gdpr",t.gdprApplies?1:0),(0,j.N)(e,"user.ext.consent",t.consentString)),e})))})),et({type:We,name:"gdprAddtlConsent",fn:function(e,t){var n,i=null===(n=t.gdprConsent)||void 0===n?void 0:n.addtlConsent;i&&"string"==typeof i&&(0,j.N)(e,"user.ext.ConsentedProvidersSettings.consented_providers",i)}}),(0,s.z)("consentManagement");var ct,ut,pt="iab",ht=pt,ft=50,gt=!1,mt={iab:function(e){var t,n=e.onSuccess,i=e.onError,r=(t={},{consentDataCallback:function(e,r){r&&e.uspString&&(t.usPrivacy=e.uspString),t.usPrivacy?bt(t,{onSuccess:n,onError:i}):i("Unable to get USP consent string.")}}),s={},o=function(){for(var e,t,n=window;;){try{if("function"==typeof n.__uspapi){t=n.__uspapi,e=n;break}}catch(e){}try{if(n.frames.__uspapiLocator){e=n;break}}catch(e){}if(n===window.top)break;n=n.parent}return{uspapiFrame:e,uspapiFunction:t}}(),a=o.uspapiFrame,d=o.uspapiFunction;if(!a)return i("USP CMP not found.");function c(e,t){try{e("registerDeletion",t,O.ZP.callDataDeletionRequest)}catch(e){(0,l.H)("Error invoking CMP `registerDeletion`:",e)}}(0,l.LQ)(d)?((0,l.PN)("Detected USP CMP is directly accessible, calling it now..."),d("getUSPData",1,r.consentDataCallback),c(d,1)):((0,l.PN)("Detected USP CMP is outside the current iframe where Prebid.js is located, calling it now..."),p("getUSPData",a,r.consentDataCallback),c(p,a));var u=!1;function p(e,t,n){var i,r,o;u||(window.addEventListener("message",(function(e){var t=e&&e.data&&e.data.__uspapiReturn;t&&t.callId&&s.hasOwnProperty(t.callId)&&(s[t.callId](t.returnValue,t.success),delete s[t.callId])}),!1),u=!0),i=n,o={__uspapiCall:{command:e,version:1,callId:r=Math.random()+""}},s[r]=i,t.postMessage(o,"*")}},static:function(e){var t=e.onSuccess,n=e.onError;bt(ct,{onSuccess:t,onError:n})}};function yt(e){var t=null,n=!1;function i(i,r){if(null!=t&&clearTimeout(t),n=!0,O.nX.setConsentData(i),null!=e){for(var s=arguments.length,o=new Array(s>2?s-2:0),a=2;a<s;a++)o[a-2]=arguments[a];e.apply(void 0,[r].concat(o))}}if(mt[ht]){var r={onSuccess:i,onError:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.apply(void 0,[null,"".concat(e," Resuming auction without consent data as per consentManagement config.")].concat(n))}};mt[ht](r),n||(0===ft?bt(void 0,r):t=setTimeout(r.onError.bind(null,"USPAPI workflow exceeded timeout threshold."),ft))}else i(null,"USP framework (".concat(ht,") is not a supported framework. Aborting consentManagement module and resuming auction."))}var vt=(0,ze.g3)("usp",(function(e,t){var n=this;gt||_t(),yt((function(i){if(null!=i){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];l.yN.apply(void 0,[i].concat(s))}e.call(n,t)}))}));function bt(e,t){var n=t.onSuccess,i=t.onError;e&&e.usPrivacy?(function(e){e&&e.usPrivacy&&(ut=e.usPrivacy)}(e),n(ut)):i("USPAPI returned unexpected value during lookup process.",e)}function _t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];gt||((0,l.PN)("USPAPI consentManagement module has been activated".concat(e?"":" using default values (api: '".concat(ht,"', timeout: ").concat(ft,"ms)"))),gt=!0,O.nX.enable()),yt()}a.vc.getConfig("consentManagement",(function(e){return function(e){(e=e&&e.usp)&&"object"===(0,U.Z)(e)||(0,l.yN)("consentManagement.usp config not defined, using defaults"),e&&(0,l.d8)(e.cmpApi)?ht=e.cmpApi:(ht=pt,(0,l.PN)("consentManagement.usp config did not specify cmpApi. Using system default setting (".concat(pt,")."))),e&&(0,l.hj)(e.timeout)?ft=e.timeout:(ft=50,(0,l.PN)("consentManagement.usp config did not specify timeout. Using system default setting (".concat(50,")."))),"static"===ht&&((0,l.PO)(e.consentData)&&(0,l.PO)(e.consentData.getUSPData)?(e.consentData.getUSPData.uspString&&(ct={usPrivacy:e.consentData.getUSPData.uspString}),ft=0):(0,l.H)("consentManagement config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")),_t(!0)}(e.consentManagement)})),(0,D.v5)("requestBids").before(vt,50),nt.S.before((function(e,t){return e(t.then((function(e){var t=O.nX.getConsentData();return t&&(0,j.N)(e,"regs.ext.us_privacy",t),e})))})),(0,s.z)("consentManagementUsp"),n(5998);var wt,Tt=n(251),It=n(2735),St=4,kt=[],Ct={},Et=!1,At=!0,Pt="USD",xt=!1,Dt={},Ot={},Rt=function(){var e;function t(){e=(0,It.P)()}return t(),{done:function(){return e.resolve()},reset:t,promise:function(){return e.promise}}}();function Nt(e){wt?((0,l.yN)(e),(0,l.yN)("Currency failed loading rates, falling back to currency.defaultRates")):(0,l.H)(e)}a.vc.getConfig("currency",(function(e){return function(e){var t="https://cdn.jsdelivr.net/gh/prebid/currency-file@1/latest.json?date=$$TODAY$$";if("object"===(0,U.Z)(e.rates)&&(Dt.conversions=e.rates,Et=!0,At=!1),"object"===(0,U.Z)(e.defaultRates)&&(wt=e.defaultRates,Dt.conversions=wt,Et=!0),"string"==typeof e.adServerCurrency){(0,l.PN)("enabling currency support",arguments),Pt=e.adServerCurrency,e.conversionRateFile&&((0,l.PN)("currency using override conversionRateFile:",e.conversionRateFile),t=e.conversionRateFile);var n=t.indexOf("$$TODAY$$");if(-1!==n){var i=new Date,r="".concat(i.getMonth()+1),o="".concat(i.getDate());r.length<2&&(r="0".concat(r)),o.length<2&&(o="0".concat(o));var a="".concat(i.getFullYear()).concat(r).concat(o);t="".concat(t.substring(0,n)).concat(a).concat(t.substring(n+9,t.length))}!function(e){Ct={},xt=!0,(0,l.PN)("Installing addBidResponse decorator for currency module",arguments),(0,s.R)().convertCurrency=function(e,t,n){return parseFloat(e)*Ut(t,n)},(0,D.v5)("addBidResponse").before(Mt,100),At?(At=!1,(0,x.h)(e,{success:function(e){try{Dt=JSON.parse(e),(0,l.PN)("currencyRates set to "+JSON.stringify(Dt)),Ct={},Et=!0,Lt(),Rt.done()}catch(t){Nt("Failed to parse currencyRates response: "+e)}},error:function(){Nt.apply(void 0,arguments),Rt.done()}})):Rt.done()}(t)}else(0,l.PN)("disabling currency support"),function(){(0,l.PN)("Uninstalling addBidResponse decorator for currency module",arguments),(0,D.v5)("addBidResponse").getHooks({hook:Mt}).remove(),delete(0,s.R)().convertCurrency,Pt="USD",Ct={},xt=!1,Et=!1,At=!0,Dt={},Ot={}}();"object"===(0,U.Z)(e.bidderCurrencyDefault)&&(Ot=e.bidderCurrencyDefault)}(e.currency)}));var Mt=(0,ze.A)("currency",(function(e,t,n,i){if(!n)return e.call(this,t,n,i);var r=n.bidderCode||n.bidder;if(Ot[r]){var s=Ot[r];n.currency&&s!==n.currency?(0,l.yN)("Currency default '".concat(r,": ").concat(s,"' ignored. adapter specified '").concat(n.currency,"'")):n.currency=s}if(n.currency||((0,l.yN)('Currency not specified on bid.  Defaulted to "USD"'),n.currency="USD"),n.getCpmInNewCurrency=function(e){return(parseFloat(this.cpm)*Ut(this.currency,e)).toFixed(3)},n.currency===Pt)return e.call(this,t,n,i);kt.push(function(e,t,n){return function(){var i=n[1];if(void 0!==i&&"currency"in i&&"cpm"in i){var r=i.currency;try{var s=Ut(r);1!==s&&(i.cpm=(parseFloat(i.cpm)*s).toFixed(4),i.currency=Pt)}catch(e){(0,l.yN)("Returning NO_BID, getCurrencyConversion threw error: ",e),n[1]=n[2](Tt.Gw.Xx)}}return e.apply(t,n)}}(e,this,[t,n,i])),!xt||Et?Lt():e.untimed.bail(Rt.promise())}));function Lt(){for(;kt.length>0;)kt.shift()()}function Ut(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pt,i=null,r="".concat(e,"->").concat(n);if(r in Ct)i=Ct[r],(0,l.ji)("Using conversionCache value "+i+" for "+r);else if(!1===xt){if("USD"!==e)throw new Error("Prebid currency support has not been enabled and fromCurrency is not USD");i=1}else if(e===n)i=1;else if(e in Dt.conversions){if(!(n in(t=Dt.conversions[e])))throw new Error("Specified adServerCurrency in config '"+n+"' not found in the currency rates file");i=t[n],(0,l.PN)("getCurrencyConversion using direct "+e+" to "+n+" conversionRate "+i)}else if(n in Dt.conversions){if(!(e in(t=Dt.conversions[n])))throw new Error("Specified fromCurrency '"+e+"' not found in the currency rates file");i=jt(1/t[e],St),(0,l.PN)("getCurrencyConversion using reciprocal "+e+" to "+n+" conversionRate "+i)}else{var s=Object.keys(Dt.conversions)[0];if(!(e in Dt.conversions[s]))throw new Error("Specified fromCurrency '"+e+"' not found in the currency rates file");var o=1/Dt.conversions[s][e];if(!(n in Dt.conversions[s]))throw new Error("Specified adServerCurrency in config '"+n+"' not found in the currency rates file");i=jt(o*Dt.conversions[s][n],St),(0,l.PN)("getCurrencyConversion using intermediate "+e+" thru "+s+" to "+n+" conversionRate "+i)}return r in Ct||((0,l.ji)("Adding conversionCache value "+i+" for "+r),Ct[r]=i),i}function jt(e,t){for(var n=1,i=0;i<t;i++)n+="0";return Math.round(e*n)/n}et({type:We,name:"currency",fn:function(e,t,n){xt&&(e.cur=e.cur||[n.currency||Pt])}}),(0,s.z)("currency");var Bt="fledgeForGpt",qt=!1;function Ft(e,t,n){var i=n.seller,r=(0,l.aE)(t);r&&r.setConfig?(r.setConfig({componentAuction:[{configKey:i,auctionConfig:n}]}),(0,l.PN)(Bt,"register component auction config for: ".concat(t," x ").concat(i,": ").concat(r.getAdUnitPath()),n)):(0,l.yN)(Bt,"unable to register component auction config for: ".concat(t," x ").concat(i,".")),e(t,n)}function Vt(){return"runAdAuction"in navigator&&"joinAdInterestGroup"in navigator}function zt(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}a.vc.getConfig("fledgeForGpt",(function(e){var t;(t=e.fledgeForGpt)&&!0===t.enabled?(qt||((0,D.v5)("addComponentAuction").before(Ft),qt=!0),(0,l.PN)("".concat(Bt," enabled (browser ").concat(Vt()?"supports":"does NOT support"," fledge)"),t)):(qt&&((0,D.v5)("addComponentAuction").getHooks({hook:Ft}).remove(),qt=!1),(0,l.PN)("".concat(Bt," disabled"),t))})),(0,D.v5)("makeBidRequests").after((function(e,t){Vt()&&t.forEach((function(e){e.fledgeEnabled=a.vc.runWithBidder(e.bidderCode,(function(){return a.vc.getConfig("fledgeEnabled")}))})),e(t)})),et({type:Ze,name:"impExtAe",fn:function(e,t,n){var i;n.bidderRequest.fledgeEnabled||null===(i=e.ext)||void 0===i||delete i.ae}}),et({type:Xe,name:"extPrebidFledge",fn:function(e,t,n){var i,r,s;((null===(i=t.ext)||void 0===i||null===(r=i.prebid)||void 0===r||null===(s=r.fledge)||void 0===s?void 0:s.auctionconfigs)||[]).forEach((function(e){var t,i,r=n.impContext[e.impid];null!=r&&null!==(t=r.imp)&&void 0!==t&&null!==(i=t.ext)&&void 0!==i&&i.ae?(r.fledgeConfigs=r.fledgeConfigs||[],r.fledgeConfigs.push(e)):(0,l.yN)("Received fledge auction configuration for an impression that was not in the request or did not ask for it",e,null==r?void 0:r.imp)}))},dialects:[Je]}),et({type:Xe,name:"fledgeAuctionConfigs",priority:-1,fn:function(e,t,n){var i=Object.values(n.impContext).flatMap((function(e){return(e.fledgeConfigs||[]).map((function(t){return{bidId:e.bidRequest.bidId,config:t.config}}))}));i.length>0&&(e.fledgeAuctionConfigs=i)},dialects:[Je]}),(0,s.z)("fledgeForGpt");var $t=["mind","maxd","size","playerSize","protocols","durationRangeSec"];function Ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zt="grid",Gt="https://grid.bidswitch.net/hbjson",Xt="tmguid",Kt=(0,se.df)({bidderCode:Zt}),Jt="Bid from response has no auid parameter - ",Yt="Bid from response has no adm parameter - ",Qt="Array of bid objects is empty",en="Seatbid array from response has empty item",tn="Response is empty",nn="Response has empty seatbid array",rn="Seatbid from response has no array of bid objects - ",sn={trustx:{endpoint:"https://grid.bidswitch.net/hbjson?sp=trustx",syncurl:"https://x.bidswitch.net/sync?ssp=themediagrid",bidResponseExternal:{netRevenue:!1}},gridNM:{defaultParams:{multiRequest:!0}}},on=!1,an={code:Zt,gvlid:686,aliases:["playwire","adlivetech","gridNM",{code:"trustx",skipPbsAliasing:!0}],supportedMediaTypes:[c.Mk,c.pX],isBidRequestValid:function(e){return e&&Boolean(e.params.uid||e.params.secid)},buildRequests:function(e,t){if(!e.length)return null;var n=null,i=null,r=null,s=null,o=null,u=null,p=null,h=!1,f=t||{},g=f.bidderRequestId,m=f.auctionId,y=f.gdprConsent,v=f.uspConsent,b=f.timeout,_=f.refererInfo,w=f.gppConsent,T=_?encodeURIComponent(_.page):"",I=b,S=[],k={},C=[],E={},A=[],P=[],x=[];e.forEach((function(e){var t={bid:e,savedPrebidBid:null};if(e.params.withCriteo&&cn.isBidRequestValid(e)&&(E[e.bidId]=t,A.push(e)),e.params.uid||e.params.secid){g||(g=e.bidderRequestId),m||(m=e.auctionId),r||(r=e.schain),s||(s=e.userIdAsEids),p||(p=sn[e.bidder]&&sn[e.bidder].endpoint);var o=e.params,a=e.mediaTypes,d=e.bidId,u=e.adUnitCode,f=e.rtd,y=e.ortb2Imp,v=Wt(Wt({},(sn[e.bidder]||{}).defaultParams),o),b=v.secid,_=v.pubid,w=v.source,D=v.uid,O=v.keywords,R=v.forceBidder,N=v.multiRequest,M=v.content,j=v.video,B=function(e,t){var n=e.video?"video":"banner",i=t.params.bidFloor||t.params.floorcpm||0;if("function"==typeof t.getFloor){var r=t.getFloor({currency:"USD",mediaType:n,size:t.sizes.map((function(e){var t=(0,L.Z)(e,2);return{w:t[0],h:t[1]}}))});"object"!==(0,U.Z)(r)||"USD"!==r.currency||isNaN(parseFloat(r.floor))||(i=Math.max(i,parseFloat(r.floor)))}return i}(a||{},e),q=f&&f.jwplayer&&f.jwplayer.targeting;q&&!i&&q.content&&(i=q.content);var F={id:d.toString(),tagid:(b||D).toString(),ext:{divid:u.toString()}};if(y&&(y.instl&&(F.instl=y.instl),y.ext&&(y.ext.data&&(F.ext.data=y.ext.data,F.ext.data.adserver&&F.ext.data.adserver.adslot?F.ext.gpid=F.ext.data.adserver.adslot.toString():y.ext.data.pbadslot&&(F.ext.gpid=y.ext.data.pbadslot.toString())),y.ext.gpid&&(F.ext.gpid=y.ext.gpid.toString()))),(0,l.xb)(O)||(n||(n=O),F.ext.bidder={keywords:O}),B&&(F.bidfloor=B),!a||a[c.Mk]){var V=function(e,t){var n=t.sizes||e.sizes;if(n&&n.length){var i=n.map((function(e){return(0,l.NI)(e)})),r=(0,l.NI)(n[0]);return i.length&&(r.format=i),r}}(e,a?a[c.Mk]:{});V&&(F.banner=V)}if(a&&a[c.pX]){var z=function(e,t,n){var i=Wt(Wt({},t),e),r=i.mind,s=i.maxd,o=i.size,a=i.playerSize,d=i.protocols,c=i.durationRangeSec,u=void 0===c?[]:c,p=zt(i,$t);if(o&&(0,l.d8)(o)){var h=o.split("x");2===h.length&&parseInt(h[0])&&parseInt(h[1])&&(p.w=parseInt(h[0]),p.h=parseInt(h[1]))}if(!p.w||!p.h){var f=((a||n||[]).toString().match(/^\d+,\d+/)||[])[0],g=f&&f.split(",").map((function(e){return parseInt(e)}));g&&2===g.length&&Object.assign(p,(0,l.NI)(g))}if(p.w&&p.h){var m=r||u[0]||p.minduration,y=s||u[1]||p.maxduration;return m&&(p.minduration=m),y&&(p.maxduration=y),d&&d.length&&(p.protocols=d),p}}(j,a[c.pX],e.sizes);z&&(F.video=z)}if(F.banner||F.video)if(N){var $={tid:e.auctionId&&e.auctionId.toString(),ext:{wrapper:"Prebid_js",wrapper_version:"7.47.0"}};e.schain&&($.ext.schain=e.schain);var H={id:e.bidderRequestId&&e.bidderRequestId.toString(),site:{page:T},tmax:I,source:$,imp:[F]};_&&(H.site.publisher={id:_});var W=M||q&&q.content;W&&(H.site.content=W),C.push(H),P.push(w),x.push(t)}else k[d]=t,S.push(F);!h&&R&&sn[R]&&(h=R)}})),(h=a.vc.getConfig("forceBidderName")||h)&&sn[h]&&(p=sn[h].endpoint,this.forceBidderName=h);var D={tid:m&&m.toString(),ext:{wrapper:"Prebid_js",wrapper_version:"7.47.0"}};r&&(D.ext.schain=r);var O=S.length||!C.length?{id:g&&g.toString(),site:{page:T},tmax:I,source:D,imp:S}:null;i&&(O.site.content=i),[].concat(C,[O]).forEach((function(e){if(e){o=null;var i=(0,d.Z)(t,"ortb2.user.data");i&&i.length&&(o={data:(0,M.Z)(i)}),y&&y.consentString&&(u={consent:y.consentString});var r=(0,d.Z)(t,"ortb2.user.ext.device");r&&((u=u||{}).device=Wt({},r)),s&&s.length&&((u=u||{}).eids=(0,M.Z)(s)),u&&Object.keys(u).length&&((o=o||{}).ext=u);var c=Kt.getDataFromLocalStorage(Xt)||function(){if(a.vc.getConfig("localStorageWriteAllowed")){var e=(0,l.DO)().replace(/-/g,"");return Kt.setDataInLocalStorage(Xt,e),e}return null}();c&&((o=o||{}).id=c.toString()),o&&(e.user=o);var p=(0,d.Z)(t,"ortb2.user.keywords")||null,h=(0,d.Z)(t,"ortb2.site.keywords")||null;p&&((n=n||{}).user=n.user||{},n.user.ortb2=[{name:"keywords",keywords:p.split(",")}]),h&&((n=n||{}).site=n.site||{},n.site.ortb2=[{name:"keywords",keywords:h.split(",")}]),n&&(n=function(e){var t={};return Object.keys(e).forEach((function(n){var i=e[n];if(i)if("site"===n||"user"===n){var r={};Object.keys(i).forEach((function(e){if(Array.isArray(i[e])){var t=[];i[e].forEach((function(e){if("object"===(0,U.Z)(e)&&e.name){var n={name:e.name,segments:[]};Object.keys(e).forEach((function(t){Array.isArray(e[t])&&e[t].forEach((function(e){e&&("string"==typeof e?n.segments.push({name:t,value:e}):"segments"===t&&"string"==typeof e.name&&"string"==typeof e.value&&n.segments.push(e))}))})),n.segments.length&&t.push(n)}})),t.length&&(r[e]=t)}})),t[n]=r}else t[n]=i})),Object.keys(t).length&&t}(n))&&(e.ext={keywords:n}),y&&y.gdprApplies&&(e.regs={ext:{gdpr:y.gdprApplies?1:0}});var f=(0,d.Z)(t,"ortb2.regs")||{};if(w||null!=f&&f.gpp){var g,m,b,_={gpp:null!==(g=null==w?void 0:w.gppString)&&void 0!==g?g:null==f?void 0:f.gpp,gpp_sid:null!==(m=null==w?void 0:w.applicableSections)&&void 0!==m?m:null==f?void 0:f.gpp_sid};e.regs=(0,l.Ee)(null!==(b=null==e?void 0:e.regs)&&void 0!==b?b:{},_)}v&&(e.regs||(e.regs={ext:{}}),e.regs.ext||(e.regs.ext={}),e.regs.ext.us_privacy=v),!0===a.vc.getConfig("coppa")&&(e.regs||(e.regs={}),e.regs.coppa=1);var T=(0,d.Z)(t,"ortb2.site");if(T){var I=[].concat((0,M.Z)(T.cat||[]),(0,M.Z)(T.pagecat||[])).filter((function(e){return e&&"string"==typeof e}));I.length&&(e.site.cat=I);var S=(0,d.Z)(T,"content.genre");S&&"string"==typeof S&&(e.site.content=Wt(Wt({},e.site.content),{},{genre:S}));var k=(0,d.Z)(T,"content.data");if(k&&k.length){var C=e.site.content||{};e.site.content=(0,l.Ee)(C,{data:k})}var E=(0,d.Z)(T,"content.id");E&&(e.site.content=Wt(Wt({},e.site.content),{},{id:E}))}}}));var R=A.length&&cn.buildRequests(A,t);return R&&(R.criteoBidsMap=E),[].concat((0,M.Z)(C.map((function(e,t){var n,i=(p||Gt).replace(/[?&]sp=([^?&=]+)/,(function(e,t){return t&&(n=t),""})),r=P[t]||n;return{method:"POST",url:i+(i.indexOf("?")>-1?"&":"?")+"no_mapping=1"+(r?"&sp=".concat(r):""),data:JSON.stringify(e),bidObject:x[t]}}))),(0,M.Z)(O?[{method:"POST",url:p||Gt,data:JSON.stringify(O),bidsMap:k}]:[]),(0,M.Z)(R?[R]:[]))},interpretResponse:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:B.Th;if(t.criteoBidsMap&&t.bidRequests)return cn.interpretResponse(e,t).filter((function(e){var n=(t.criteoBidsMap[e.requestId]||{}).savedPrebidBid;return dn(e.cpm,n&&n.cpm)}));e=e&&e.body;var i,r=[];e?e.seatbid&&!e.seatbid.length&&(i=nn):i=tn;var s=this.forceBidderName||this.code;return!i&&e.seatbid&&e.seatbid.forEach((function(e){!function(e,t,n,i,r){if(e){var s;if(e.auid||(s=Jt+JSON.stringify(e)),s||e.adm||e.nurl){var o=t.bidsMap?t.bidsMap[e.impid]:t.bidObject,a=o||{},d=a.bid,u=a.savedPrebidBid;if(d&&dn(e.price,u&&u.cpm)){var p={requestId:d.bidId,cpm:e.price,width:e.w,height:e.h,creativeId:e.auid,currency:"USD",netRevenue:!0,ttl:360,meta:{advertiserDomains:e.adomain?e.adomain:[]},dealId:e.dealid};o.savedPrebidBid=p,e.ext&&e.ext.bidder&&e.ext.bidder.grid&&e.ext.bidder.grid.demandSource&&(p.adserverTargeting={hb_ds:e.ext.bidder.grid.demandSource},p.meta.demandSource=e.ext.bidder.grid.demandSource),"video"===e.content_type?(e.adm?(p.vastXml=e.adm,p.adResponse={content:p.vastXml}):e.nurl&&(p.vastUrl=e.nurl),p.mediaType=c.pX,d.renderer||d.mediaTypes&&d.mediaTypes.video&&"outstream"!==d.mediaTypes.video.context||(p.renderer=function(e,t,n){var i=n.install({id:t.id,url:t.url,loaded:!1});try{i.setRender(ln)}catch(e){(0,l.yN)("Prebid Error calling setRender on renderer",e)}return i}(0,{id:d.bidId,url:"https://acdn.adnxs.com/video/outstream/ANOutstreamVideo.js"},i))):(p.ad=e.adm,p.mediaType=c.Mk);var h=sn[r]&&sn[r].bidResponseExternal||{};n.push((0,l.Ee)(p,h))}}else s=Yt+JSON.stringify(e);s&&(0,l.H)(s)}}(function(e){return e?e.bid?e.bid[0]||(0,l.H)(Qt):(0,l.H)(rn+JSON.stringify(e)):(0,l.H)(en),e&&e.bid&&e.bid[0]}(e),t,r,n,s)})),i&&(0,l.H)(i),r},getUserSyncs:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[0],r=t[2],s=t[3];if(!on&&i.pixelEnabled){var o="";r&&("boolean"==typeof r.gdprApplies&&(o+="&gdpr=".concat(Number(r.gdprApplies))),"string"==typeof r.consentString&&(o+="&gdpr_consent=".concat(r.consentString))),s&&(o+="&us_privacy=".concat(s));var a=this.forceBidderName||this.code,d=sn[a]&&sn[a].syncurl||"https://x.bidswitch.net/sync?ssp=themediagrid";return on=!0,{type:"image",url:d+o}}}};function dn(e,t){return!(0,l.hj)(t)||e>t||e===t&&Math.random()>.5}function ln(e){e.renderer.push((function(){window.ANOutstreamVideo.renderAd({targetId:e.adUnitCode,adResponse:e.adResponse})}))}var cn={isBidRequestValid:function(e){return!(!e||!e.params||!e.params.zoneId&&!e.params.networkId||fn(e)&&!function(e){var t=!0;if(["mimes","playerSize","maxduration","protocols","api","skip","placement","playbackmethod"].forEach((function(n){void 0===(0,d.Z)(e,"mediaTypes.video."+n)&&void 0===(0,d.Z)(e,"params.video."+n)&&(t=!1,(0,l.H)("TheMediaGrid Bid Adapter (withCriteo mode): mediaTypes.video."+n+" is required"))})),t){var n=e.mediaTypes.video.placement||e.params.video.placement;if("instream"===e.mediaTypes.video.context&&1===n)return!0;if("outstream"===e.mediaTypes.video.context&&1!==n)return!0}return!1}(e))},buildRequests:function(e,t){var n,i,r,s,o=t.ortb2||{};Object.assign(t,{publisherExt:null===(n=o.site)||void 0===n?void 0:n.ext,userExt:null===(i=o.user)||void 0===i?void 0:i.ext,ceh:a.vc.getConfig("criteo.ceh"),coppa:a.vc.getConfig("coppa")});var u=function(e,t){var n,i="";t&&t.refererInfo&&(i=t.refererInfo.page);var r=(0,l.en)(null==t||null===(n=t.refererInfo)||void 0===n?void 0:n.topmostLocation).search,s={url:i,debug:"1"===r.pbt_debug,noLog:"1"===r.pbt_nolog,amp:!1};return e.forEach((function(e){"amp"===e.params.integrationMode&&(s.amp=!0)})),s}(e,t);if(r=function(e){var t="https://bidder.criteo.com/cdb";t+="?profileId=207",t+="&av="+String(34),t+="&wv="+encodeURIComponent("7.47.0"),t+="&cb="+String(Math.floor(99999999999*Math.random())),Kt.localStorageIsEnabled()?t+="&lsavail=1":t+="&lsavail=0",e.amp&&(t+="&im=1"),e.debug&&(t+="&debug=1"),e.noLog&&(t+="&nolog=1");var n=un("cto_bundle");n&&(t+="&bundle=".concat(n)),un("cto_optout")&&(t+="&optout=1");var i=un("cto_sid");i&&(t+="&sid=".concat(i));var r=un("cto_idcpy");return r&&(t+="&idcpy=".concat(r)),t}(u),s=function(e,t,n){var i,r,s={publisher:{url:e.url,ext:n.publisherExt},regs:{coppa:!0===n.coppa?1:!1===n.coppa?0:void 0},slots:t.map((function(e){i=e.params.networkId||i,r=e.schain||r;var t={impid:e.adUnitCode,transactionid:e.transactionId,auctionId:e.auctionId};if(e.params.zoneId&&(t.zoneid=e.params.zoneId),(0,d.Z)(e,"ortb2Imp.ext")&&(t.ext=e.ortb2Imp.ext),e.params.ext&&(t.ext=Object.assign({},t.ext,e.params.ext)),e.params.publisherSubId&&(t.publishersubid=e.params.publisherSubId),function(e){return void 0!==(0,d.Z)(e,"mediaTypes.banner")}(e)?t.sizes=pn((0,d.Z)(e,"mediaTypes.banner.sizes"),hn):t.sizes=[],fn(e)){var n={playersizes:pn((0,d.Z)(e,"mediaTypes.video.playerSize"),hn),mimes:e.mediaTypes.video.mimes,protocols:e.mediaTypes.video.protocols,maxduration:e.mediaTypes.video.maxduration,api:e.mediaTypes.video.api,skip:e.mediaTypes.video.skip,placement:e.mediaTypes.video.placement,minduration:e.mediaTypes.video.minduration,playbackmethod:e.mediaTypes.video.playbackmethod,startdelay:e.mediaTypes.video.startdelay},s=e.params.video;void 0!==s&&(n.skip=n.skip||s.skip||0,n.placement=n.placement||s.placement,n.minduration=n.minduration||s.minduration,n.playbackmethod=n.playbackmethod||s.playbackmethod,n.startdelay=n.startdelay||s.startdelay||0),t.video=n}return function(e,t){try{var n,i,r={};if(t.getFloor)null!==(n=t.mediaTypes)&&void 0!==n&&n.banner&&(r.banner={},pn((0,d.Z)(t,"mediaTypes.banner.sizes")).forEach((function(e){return r.banner[hn(e).toString()]=t.getFloor({size:e,mediaType:c.Mk})}))),null!==(i=t.mediaTypes)&&void 0!==i&&i.video&&(r.video={},pn((0,d.Z)(t,"mediaTypes.video.playerSize")).forEach((function(e){return r.video[hn(e).toString()]=t.getFloor({size:e,mediaType:c.pX})}))),Object.keys(r).length>0&&(e.ext||(e.ext={}),Object.assign(e.ext,{floors:r}))}catch(e){(0,l.H)("Could not parse floors from Prebid: "+e)}}(t,e),t}))};return i&&(s.publisher.networkid=i),r&&(s.source={ext:{schain:r}}),s.user={ext:n.userExt},n&&n.ceh&&(s.user.ceh=n.ceh),n&&n.gdprConsent&&(s.gdprConsent={},void 0!==n.gdprConsent.gdprApplies&&(s.gdprConsent.gdprApplies=!!n.gdprConsent.gdprApplies),s.gdprConsent.version=n.gdprConsent.apiVersion,void 0!==n.gdprConsent.consentString&&(s.gdprConsent.consentData=n.gdprConsent.consentString)),n&&n.uspConsent&&(s.user.uspIab=n.uspConsent),s}(u,e,t),s)return{method:"POST",url:r,data:s,bidRequests:e}},interpretResponse:function(e,t){var n=e.body||e,i=[];return n&&n.slots&&(0,l.kJ)(n.slots)&&n.slots.forEach((function(r){var s,o,a,d,l={requestId:(0,$.sE)(t.bidRequests,(function(e){return e.adUnitCode===r.impid&&(!e.params.zoneId||parseInt(e.params.zoneId)===r.zoneid)})).bidId,cpm:r.cpm,currency:r.currency,netRevenue:!0,ttl:r.ttl||60,creativeId:r.creativecode,width:r.width,height:r.height,dealId:r.dealCode};if(null!==(s=n.ext)&&void 0!==s&&null!==(o=s.paf)&&void 0!==o&&o.transmission&&null!==(a=r.ext)&&void 0!==a&&null!==(d=a.paf)&&void 0!==d&&d.content_id){var u={content_id:r.ext.paf.content_id,transmission:e.ext.paf.transmission};l.meta=Object.assign({},l.meta,{paf:u})}r.adomain&&(l.meta=Object.assign({},l.meta,{advertiserDomains:r.adomain})),r.video?(l.vastUrl=r.displayurl,l.mediaType=c.pX):l.ad=r.creative,i.push(l)})),i}};function un(e){var t=Kt.getCookie(e),n=Kt.getDataFromLocalStorage(e);return t||n||void 0}function pn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return void 0===e?[]:Array.isArray(e[0])?e.map((function(e){return t(e)})):[t(e)]}function hn(e){return e[0]+"x"+e[1]}function fn(e){return void 0!==(0,d.Z)(e,"mediaTypes.video")}(0,o.dX)(an),(0,s.z)("gridBidAdapter");var gn=n(6172),mn=n(1976),yn=n(835),vn=n(7539);function bn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bn(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wn(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Tn(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var In=30,Sn="id5id",kn="".concat(Sn,"_privacy"),Cn="html5",En="User ID - ID5 submodule: ",An=["pbjs-id5id","id5id.1st","id5id"],Pn=(0,se.df)({moduleType:vn.y2,moduleName:"id5Id"}),xn={name:"id5Id",gvlid:131,decode:function(e,t){var n=0;if(e&&"string"==typeof e.universal_uid){var i={id5id:{uid:e.universal_uid,ext:{linkType:n=e.link_type||n}}};switch((0,d.Z)(e,"ab_testing.result")){case"control":(0,l.PN)(En+"A/B Testing - user is in the Control Group: ID5 ID is NOT exposed"),(0,j.N)(i,"id5id.ext.abTestingControlGroup",!0);break;case"error":(0,l.H)(En+"A/B Testing ERROR! controlGroupPct must be a number >= 0 and <= 1");break;case"normal":(0,l.PN)(En+"A/B Testing - user is NOT in the Control Group"),(0,j.N)(i,"id5id.ext.abTestingControlGroup",!1)}return(0,l.PN)(En+"Decoded ID",i),i}},getId:function(e,t,n){if(Vn(e)){if(Zn(t))return{callback:function(i){new Ln(e,t,n,O.nX.getConsentData()).execute().then((function(e){i(e)})).catch((function(e){(0,l.H)(En+"getId fetch encountered an error",e),i()}))}};(0,l.PN)(En+"Skipping ID5 local storage write because no consent given.")}},extendId:function(e,t,n){return Vn(e),Zn(t)?(Hn(e&&e.params&&e.params.partner||0),(0,l.PN)(En+"using cached ID",n),n):((0,l.PN)(En+"No consent given for ID5 local storage writing, skipping nb increment."),n)}},Dn=new WeakSet,On=new WeakSet,Rn=new WeakSet,Nn=new WeakSet,Mn=new WeakSet,Ln=function(){function e(t,n,i,r){(0,gn.Z)(this,e),wn(this,Mn),wn(this,Nn),wn(this,Rn),wn(this,On),wn(this,Dn),this.submoduleConfig=t,this.gdprConsentData=n,this.cacheIdObj=i,this.usPrivacyData=r}return(0,mn.Z)(e,[{key:"execute",value:function(){var e=this;return Tn(this,On,jn).call(this,this.submoduleConfig).then((function(t){return Tn(e,Rn,Bn).call(e,t.extensionsCall).then((function(n){return Tn(e,Nn,qn).call(e,t.fetchCall,n)}))})).then((function(t){try{$n(e.submoduleConfig.params.partner,0),t.privacy&&Wn(kn,JSON.stringify(t.privacy),In)}catch(e){(0,l.H)(En+e)}return t}))}}]),e}();function Un(e,t,n){return new Promise((function(i,r){(0,x.h)(e,{success:function(e){i(e)},error:function(e){r(e)}},t,n)}))}function jn(e){var t=e.params.configUrl||"https://id5-sync.com/api/config/prebid";return Tn(this,Dn,Un).call(this,t,JSON.stringify(e),{method:"POST"}).then((function(e){var t=JSON.parse(e);return(0,l.PN)(En+"config response received from the server",t),t}))}function Bn(e){if(void 0===e)return Promise.resolve(void 0);var t=e.url,n=e.method||"GET",i="GET"===n?void 0:JSON.stringify(e.body||{});return Tn(this,Dn,Un).call(this,t,i,{method:n}).then((function(e){var t=JSON.parse(e);return(0,l.PN)(En+"extensions response received from the server",t),t}))}function qn(e,t){var n=e.url,i=e.overrides||{},r=_n(_n(_n({},Tn(this,Mn,Fn).call(this)),i),{},{extensions:t});return Tn(this,Dn,Un).call(this,n,JSON.stringify(r),{method:"POST",withCredentials:!0}).then((function(e){var t=JSON.parse(e);return(0,l.PN)(En+"fetch response received from the server",t),t}))}function Fn(){var e,t=this.submoduleConfig.params,n=this.gdprConsentData&&"boolean"==typeof this.gdprConsentData.gdprApplies&&this.gdprConsentData.gdprApplies?1:0,i=(0,yn.nH)(),r=this.cacheIdObj&&this.cacheIdObj.signature?this.cacheIdObj.signature:(An.forEach((function(t){Pn.getCookie(t)&&(e=(0,l.dj)(Pn.getCookie(t))||e)})),e&&e.signature||""),s=Hn(t.partner),o={partner:t.partner,gdpr:n,nbPage:s,o:"pbjs",tml:i.topmostLocation,ref:i.ref,cu:i.canonicalUrl,top:i.reachedTop?1:0,u:i.stack[0]||window.location.href,v:"7.47.0",storage:this.submoduleConfig.storage,localStorage:Pn.localStorageIsEnabled()?1:0};!n||void 0===this.gdprConsentData.consentString||(0,l.xb)(this.gdprConsentData.consentString)||(0,l.jH)(this.gdprConsentData.consentString)||(o.gdpr_consent=this.gdprConsentData.consentString),void 0===this.usPrivacyData||(0,l.xb)(this.usPrivacyData)||(0,l.jH)(this.usPrivacyData)||(o.us_privacy=this.usPrivacyData),void 0===r||(0,l.jH)(r)||(o.s=r),void 0===t.pd||(0,l.jH)(t.pd)||(o.pd=t.pd),void 0===t.provider||(0,l.jH)(t.provider)||(o.provider=t.provider);var a=t.abTesting||{enabled:!1};return a.enabled&&(o.ab_testing={enabled:!0,control_group_pct:a.controlGroupPct}),o}function Vn(e){return e&&e.params&&e.params.partner&&"number"==typeof e.params.partner?e.storage&&e.storage.type&&e.storage.name?(e.storage.type!==Cn&&(0,l.yN)(En+"storage type recommended to be '".concat(Cn,"'. In a future release this may become a strict requirement")),e.storage.name!==Sn&&(0,l.yN)(En+"storage name recommended to be '".concat(Sn,"'. In a future release this may become a strict requirement")),!0):((0,l.H)(En+"storage required to be set"),!1):((0,l.H)(En+"partner required to be defined as a number"),!1)}function zn(e){return"".concat(Sn,"_").concat(e,"_nb")}function $n(e,t){Wn(zn(e),t,In)}function Hn(e){var t=function(e){var t,n,i=(t=zn(e),""===(n=Pn.getDataFromLocalStorage("".concat(t,"_exp")))||n&&new Date(n).getTime()-Date.now()>0?Pn.getDataFromLocalStorage(t):(Pn.removeDataFromLocalStorage(t),null));return i?parseInt(i):0}(e)+1;return $n(e,t),t}function Wn(e,t,n){Pn.setDataInLocalStorage("".concat(e,"_exp"),function(e){return new Date(Date.now()+864e5*e).toUTCString()}(n)),Pn.setDataInLocalStorage("".concat(e),t)}function Zn(e){var t=e&&"boolean"==typeof e.gdprApplies&&e.gdprApplies,n=(0,d.Z)(e,"vendorData.purpose.consents.1"),i=(0,d.Z)(e,"vendorData.vendor.consents.".concat(131..toString()));return!!(!t||n&&i)}(0,D.Bx)("userId",xn),(0,s.z)("id5IdSystem");var Gn=new WeakMap;function Xn(e){return(e=(0,l.sF)(e)).map((function(e){var t=e.split("x"),n=(0,L.Z)(t,2),i=n[0],r=n[1];return{w:parseInt(i,10),h:parseInt(r,10)}}))}var Kn,Jn=new Set(["pos","placement","plcmt","api","mimes","protocols","playbackmethod","minduration","maxduration","w","h","startdelay","placement","linearity","skip","skipmin","skipafter","minbitrate","maxbitrate","delivery","playbackend"]),Yn={instream:1},Qn={1:c.Mk,2:c.pX,4:c.B5},ei=n(356),ti=(Kn={},(0,r.Z)(Kn,We,{fpd:{priority:99,fn:function(e,t){(0,l.Ee)(e,t.ortb2)}},onlyOneClient:{priority:-99,fn:(0,ei.A_)("ORTB request")},props:{fn:function(e,t){var n;Object.assign(e,{id:e.id||t.auctionId,test:e.test||0});var i=parseInt(t.timeout,10);isNaN(i)||(e.tmax=i),(0,j.N)(e,"source.tid",(null===(n=e.source)||void 0===n?void 0:n.tid)||t.auctionId)}}}),(0,r.Z)(Kn,Ze,{fpd:{priority:99,fn:function(e,t){(0,l.Ee)(e,t.ortb2Imp)}},id:{fn:function(e,t){e.id=t.bidId}},banner:{fn:function(e,t,n){if(!n.mediaType||n.mediaType===c.Mk){var i=(0,d.Z)(t,"mediaTypes.banner");if(i){var r={topframe:!0===(0,l.yL)()?0:1};i.sizes&&(r.format=Xn(i.sizes)),i.hasOwnProperty("pos")&&(r.pos=i.pos),e.banner=(0,l.Ee)(r,e.banner)}}}},pbadslot:{fn:function(e){var t,n,i,r,s=null===(t=e.ext)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.pbadslot;s&&"string"==typeof s||null===(i=e.ext)||void 0===i||null===(r=i.data)||void 0===r||delete r.pbadslot}}}),(0,r.Z)(Kn,Ge,{mediaType:{priority:99,fn:function(e,t,n){if(!e.mediaType){var i=n.mediaType;if(!i&&!Qn.hasOwnProperty(t.mtype))throw new Error("Cannot determine mediaType for response");e.mediaType=i||Qn[t.mtype]}}},banner:{fn:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).createPixel,t=void 0===e?function(e){return(0,l.SG)(decodeURIComponent(e))}:e;return function(e,n){e.mediaType===c.Mk&&(n.adm&&n.nurl?(e.ad=n.adm,e.ad+=t(n.nurl)):n.adm?e.ad=n.adm:n.nurl&&(e.adUrl=n.nurl))}}()},props:{fn:function(e,t,n){var i;Object.entries({requestId:null===(i=n.bidRequest)||void 0===i?void 0:i.bidId,seatBidId:t.id,cpm:t.price,currency:n.ortbResponse.cur||n.currency,width:t.w,height:t.h,dealId:t.dealid,creative_id:t.crid,creativeId:t.crid,burl:t.burl,ttl:t.exp||n.ttl,netRevenue:n.netRevenue}).filter((function(e){var t=(0,L.Z)(e,2);return t[0],void 0!==t[1]})).forEach((function(t){var n=(0,L.Z)(t,2),i=n[0],r=n[1];return e[i]=r})),e.meta||(e.meta={}),t.adomain&&(e.meta.advertiserDomains=t.adomain)}}}),Kn);function ni(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.shift(),r=t.length>1?ni.apply(void 0,t):t[0];return Object.fromEntries($e.map((function(e){return[e,Object.assign({},i[e],r[e])]})))}function ii(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=void 0===t?{}:t,i=e.processors,r=void 0===i?ri:i,s=e.overrides,o=void 0===s?{}:s,a=e.imp,d=e.request,c=e.bidResponse,u=e.response,p=new WeakMap;function h(e,t,n,i){var s;return function(){return null==s&&(s=function(){var s=n.bind(this,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Gn.has(e)){var n=Object.entries(e);n.sort((function(e,t){return(e=e[1].priority||0)===(t=t[1].priority||0)?0:e>t?-1:1})),Gn.set(e,n.map((function(e){var t=(0,L.Z)(e,2);return[t[0],t[1].fn]})))}var i=Gn.get(e).filter((function(e){var n=(0,L.Z)(e,1)[0];return!t.hasOwnProperty(n)||t[n]})).map((function(e){var n=(0,L.Z)(e,2),i=n[0],r=n[1];return t.hasOwnProperty(i)?t[i].bind(this,r):r}));return function(){var e=this,t=Array.from(arguments);i.forEach((function(n){n.apply(e,t)}))}}(r()[e]||{},o[e]||{}));return t&&(s=t.bind(this,s)),function(){try{return s.apply(this,arguments)}catch(e){i.call.apply(i,[this,e].concat(Array.prototype.slice.call(arguments)))}}}()),s.apply(this,arguments)}}var f=h(Ze,a,(function(e,t,n){var i={};return e(i,t,n),i}),(function(e,t,n){(0,l.H)("Error while converting bidRequest to ORTB imp; request skipped.",{error:e,bidRequest:t,context:n})})),g=h(We,d,(function(e,t,n,i){var r={imp:t};return e(r,n,i),r}),(function(e,t,n,i){throw(0,l.H)("Error while converting to ORTB request",{error:e,imps:t,bidderRequest:n,context:i}),e})),m=h(Ge,c,(function(e,t,n){var i={};return e(i,t,n),i}),(function(e,t,n){(0,l.H)("Error while converting ORTB seatbid.bid to bidResponse; bid skipped.",{error:e,bid:t,context:n})})),y=h(Xe,u,(function(e,t,n,i){var r={bids:t};return e(r,n,i),r}),(function(e,t,n,i){throw(0,l.H)("Error while converting from ORTB response",{error:e,bidResponses:t,ortbResponse:n,context:i}),e}));return{toORTB:function(e){var t=e.bidderRequest,i=e.bidRequests,r=e.context,s=void 0===r?{}:r;i=i||t.bids;var o={req:Object.assign({bidRequests:i},n,s),imp:{}};o.req.impContext=o.imp;var a=i.map((function(e){var i=Object.assign({bidderRequest:t,reqContext:o.req},n,s),r=f(e,i);if(null!=r){if(r.hasOwnProperty("id"))return Object.assign(i,{bidRequest:e,imp:r}),o.imp[r.id]=i,r;(0,l.H)("Converted ORTB imp does not specify an id, ignoring bid request",e,r)}})).filter(Boolean),d=g(a,t,o.req);return o.req.bidderRequest=t,null!=d&&p.set(d,o),d},fromORTB:function(e){var t=e.request,n=e.response,i=p.get(t);if(null==i)throw new Error("ortbRequest passed to `fromORTB` must be the same object returned by `toORTB`");function r(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign(e,{ortbRequest:t},n,e)}var s=Object.fromEntries((t.imp||[]).map((function(e){return[e.id,e]}))),o=(n.seatbid||[]).flatMap((function(e){return(e.bid||[]).map((function(t){if(s.hasOwnProperty(t.impid)&&i.imp.hasOwnProperty(t.impid))return m(t,r(i.imp[t.impid],{imp:s[t.impid],seatbid:e,ortbResponse:n}));(0,l.H)("ORTB response seatbid[].bid[].impid does not match any imp in request; ignoring bid",t)}))})).filter(Boolean);return y(o,n,r(i.req))}}}ti[Ze].native={fn:function(e,t,n){if(!n.mediaType||n.mediaType===c.B5){var i,r=t.nativeOrtbRequest;r&&(null!==(i=(r=Object.assign({},n.nativeRequest,r)).assets)&&void 0!==i&&i.length?e.native=(0,l.Ee)({},{request:JSON.stringify(r),ver:r.ver},e.native):(0,l.yN)("mediaTypes.native is set, but no assets were specified. Native request skipped.",t))}}},ti[Ge].native={fn:function(e,t){if(e.mediaType===c.B5){var n;if(n="string"==typeof t.adm?JSON.parse(t.adm):t.adm,!(0,l.PO)(n)||!Array.isArray(n.assets))throw new Error("ORTB native response contained no assets");e.native={ortb:n}}}},ti[Ze].video={fn:function(e,t,n){if(!n.mediaType||n.mediaType===c.pX){var i=(0,d.Z)(t,"mediaTypes.video");if(!(0,l.xb)(i)){var r=Object.fromEntries(Object.entries(i).filter((function(e){var t=(0,L.Z)(e,1)[0];return Jn.has(t)})));if(i.playerSize){var s=Xn(i.playerSize);s.length>1&&(0,l.yN)("video request specifies more than one playerSize; all but the first will be ignored"),Object.assign(r,s[0])}var o=Yn[i.context];null!=o&&(r.placement=o),e.video=(0,l.Ee)(r,e.video)}}}},ti[Ge].video={fn:function(e,t,n){if(e.mediaType===c.pX){if((0,d.Z)(n.imp,"video.w")&&(0,d.Z)(n.imp,"video.h")){var i=[n.imp.video.w,n.imp.video.h];e.playerWidth=i[0],e.playerHeight=i[1]}t.adm&&(e.vastXml=t.adm),t.nurl&&(e.vastUrl=t.nurl)}}};var ri=(0,l.HP)((function(){return ni(ti,tt(Ke))})),si=n(1458);function oi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ai(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oi(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var di="improvedigital",li={DEFAULT_MIMES:["video/mp4"],PLACEMENT_TYPE:{INSTREAM:1,OUTSTREAM:3}},ci={code:di,gvlid:253,aliases:["id"],supportedMediaTypes:[c.Mk,c.B5,c.pX],syncStore:{extendMode:!1,placementId:null},isBidRequestValid:function(e){return!!(e&&e.params&&(e.params.placementId||e.params.placementKey&&e.params.publisherId))},buildRequests:function(e,t){return this.syncStore.placementId=this.syncStore.placementId||e[0].params.placementId,pi.buildServerRequests(e,t)},interpretResponse:function(e,t){var n=t.ortbRequest;return ui.fromORTB({request:n,response:e.body}).bids},getUserSyncs:function(e,t,n,i){if(!0===a.vc.getConfig("coppa")||!(0,ae.h)(n))return[];var r=[];if(!this.syncStore.extendMode&&e.pixelEnabled||!e.iframeEnabled)e.pixelEnabled&&t.forEach((function(e){(0,d.Z)(e,"body.ext.".concat(di,".sync"),[]).forEach((function(e){r.some((function(t){return t.url===e}))||r.push({type:"image",url:e})}))}));else{var s=n||{},o=s.gdprApplies,l=s.consentString,c=new Set;this.syncStore.extendMode&&t&&t.forEach((function(e){var t,n;null!=e&&null!==(t=e.body)&&void 0!==t&&null!==(n=t.ext)&&void 0!==n&&n.responsetimemillis&&Object.keys(e.body.ext.responsetimemillis).forEach((function(e){return c.add(e)}))})),r.push({type:"iframe",url:"https://hb.360yield.com/prebid-universal-creative/load-cookie.html"+"?placement_id=".concat(this.syncStore.placementId)+(this.syncStore.extendMode?"&pbs=1":"")+("boolean"==typeof o?"&gdpr=".concat(Number(o)):"")+(l?"&gdpr_consent=".concat(l):"")+(i?"&us_privacy=".concat(encodeURIComponent(i)):"")+(c.size?"&bidders=".concat((0,M.Z)(c).join(",")):"")})}return r}};(0,o.dX)(ci);var ui=ii({context:{ttl:300,nativeRequest:{eventtrackers:[{event:1,methods:[1,2]}]}},imp:function(e,t,n){var i=e(t,n);i.secure=Number("https:"===window.location.protocol),!i.bidfloor&&t.params.bidFloor&&(i.bidfloor=t.params.bidFloor,i.bidfloorcur=(0,l.An)("bidFloorCur",t.params).toUpperCase()||"USD");var r=n.extendMode?"ext.prebid.bidder.improvedigital":"ext.bidder",s=t.params.placementId;return s?((0,j.N)(i,"".concat(r,".placementId"),s),n.extendMode&&(0,j.N)(i,"ext.prebid.storedrequest.id",""+s)):((0,j.N)(i,"".concat(r,".publisherId"),(0,l.An)("publisherId",t.params)),(0,j.N)(i,"".concat(r,".placementKey"),(0,l.An)("placementKey",t.params))),(0,j.N)(i,"".concat(r,".keyValues"),(0,l.An)("keyValues",t.params)||void 0),i},request:function(e,t,n,i){var r=e(t,n,i);return(0,l.Ee)(r,{id:(0,l._d)(),source:{tid:i.bidRequests[0].transactionId},ext:{improvedigital:{sdk:{name:"pbjs",version:"7.47.0"}}}}),r},bidResponse:function(e,t,n){if(t.adm&&t.price&&!t.hasOwnProperty("errorCode")){var i,r=n.bidRequest;n.mediaType=1===(i=Object.keys(r.mediaTypes)).length?i[0]:-1!==t.adm.search(/^(<\?xml|<vast)/i)?c.pX:"{"===t.adm[0]?c.B5:c.Mk;var s=e(t,n),o=(0,d.Z)(t,"ext.".concat(di),{});return Object.assign(s,{dealId:"string"==typeof o.buying_type&&"rtb"!==o.buying_type?o.line_item_id:void 0,netRevenue:o.is_net||!1}),s.mediaType===c.pX&&pi.isOutstreamVideo(r)&&Object.assign(s,{adResponse:{content:s.vastXml},renderer:hi.createRenderer(r)}),fi.forwardBid({bidRequest:r,bid:s}),s}},overrides:{imp:{banner:function(e,t,n,i){if(n.mediaTypes[c.Mk]){if(!0!==a.vc.getConfig("improvedigital.usePrebidSizes")){var s=Object.assign({},n.mediaTypes[c.Mk],{sizes:null});n=ai(ai({},n),{},{mediaTypes:(0,r.Z)({},c.Mk,s)})}e(t,n,i)}},video:function(e,t,n,i){var s;if(n.mediaTypes[c.pX]){var o=Object.assign({mimes:li.DEFAULT_MIMES},n.mediaTypes[c.pX],null===(s=n.params)||void 0===s?void 0:s.video);e(t,ai(ai({},n),{},{mediaTypes:(0,r.Z)({},c.pX,o)}),i),(0,j.N)(t,"ext.is_rewarded_inventory",1===o.rewarded||1===(0,d.Z)(o,"ext.rewarded")||void 0),!t.video.placement&&pi.isOutstreamVideo(n)&&(t.video.placement=li.PLACEMENT_TYPE.OUTSTREAM)}}},request:{gdprAddtlConsent:function(e,t,n){var i,r=null==n||null===(i=n.gdprConsent)||void 0===i?void 0:i.addtlConsent;if(r)if(ci.syncStore.extendMode)e(t,n);else if(r&&-1!==r.indexOf("~")){var s=r.substring(r.indexOf("~")+1);s&&(0,j.N)(t,"user.ext.consented_providers_settings.consented_providers",s.split(".").map((function(e){return parseInt(e,10)})))}}}}}),pi={buildServerRequests:function(e,t){var n=this,i=!0===a.vc.getConfig("improvedigital.extend"),r=[],s=!0===a.vc.getConfig("improvedigital.singleRequest"),o=[],d=[];function l(e,n){if(e)return"https://pbs.360yield.com/openrtb2/auction";var i=[];return i.push((0,ae.h)(null==t?void 0:t.gdprConsent)?"https://ad.360yield.com":"https://ad.360yield-basic.com"),n&&i.push(n),i.push("pb"),i.join("/")}function c(e,n,i){var r=ui.toORTB({bidRequests:e,bidderRequest:t,context:{extendMode:i}});return{method:"POST",url:l(i,n),data:JSON.stringify(r),ortbRequest:r,bidderRequest:t}}var u=null;return e.map((function(e){var t=e.params.publisherId,a=n.isExtendModeEnabled(i,e.params);if(s){if(u){if(t&&u!==t)throw new Error("All Improve Digital placements in a single call must have the same publisherId. Please check your 'params.publisherId' or turn off the single request mode.")}else u=t;a?o.push(e):d.push(e)}else r.push(c([e],t,a))})),s?(o.length&&r.push(c(o,u,!0)),d.length&&r.push(c(d,u,!1)),r):r},isExtendModeEnabled:function(e,t){var n="boolean"==typeof t.extend?t.extend:e;return n&&!ci.syncStore.extendMode&&(ci.syncStore.extendMode=!0),n},isOutstreamVideo:function(e){return"outstream"===(0,d.Z)(e,"mediaTypes.video.context")}},hi={RENDERER_URL:"https://acdn.adnxs.com/video/outstream/ANOutstreamVideo.js",createRenderer:function(e){var t=B.Th.install({id:e.adUnitCode,url:this.RENDERER_URL,config:(0,d.Z)(e,"renderer.options"),adUnitCode:e.adUnitCode});try{t.setRender(this.render)}catch(e){(0,l.yN)("Prebid Error calling setRender on renderer",e)}return t},render:function(e){e.renderer.push((function(){window.ANOutstreamVideo.renderAd({sizes:[e.width,e.height],targetId:e.adUnitCode,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},hi.handleRendererEvents.bind(null,e))}))},handleRendererEvents:function(e,t,n){e.renderer.handleVideoEvent({id:t,eventName:n})}},fi={RENDERER_URL:"https://cdn.360yield.com/razr/tag.js",forwardBid:function(e){var t=e.bidRequest,n=e.bid;if(n.mediaType===c.Mk){var i={prebid:{bidRequest:t,bid:n}},r=JSON.stringify(i).replace(/<\/script>/gi,"\\x3C/script>"),s="<script>window.__razr_config = ".concat(r,";<\/script>");n.ad=n.ad.replace(/<body[^>]*>/,(function(e){return e+s})),this.installListener()}},installListener:function(){this._listenerInstalled||(window.addEventListener("message",(function(e){var t,n,i=null===(t=e.data)||void 0===t||null===(n=t.razr)||void 0===n?void 0:n.load;if(i){e.source&&(i.source=e.source,i.id&&e.source.postMessage({razr:{id:i.id}},"*"));var r=window.razr=window.razr||{};r.q=r.q||[],r.q.push(i),r.loaded||(0,si.B)(fi.RENDERER_URL,di)}})),this._listenerInstalled=!0)}};(0,s.z)("improvedigitalBidAdapter");var gi=n(7064);function mi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function yi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function vi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yi(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bi="ix",_i="roundel",wi=[c.Mk,c.pX,c.B5],Ti=[144,144],Ii={JPY:1},Si={PBJS:"p",IX:"x"},ki={BID_SIZE_INVALID_FORMAT:1,BID_SIZE_NOT_INCLUDED:2,PROPERTY_NOT_INCLUDED:3,SITE_ID_INVALID_VALUE:4,BID_FLOOR_INVALID_FORMAT:5,IX_FPD_EXCEEDS_MAX_SIZE:6,EXCEEDS_MAX_SIZE:7,PB_FPD_EXCEEDS_MAX_SIZE:8,VIDEO_DURATION_INVALID:9},Ci={SITE:["id","name","domain","cat","sectioncat","pagecat","page","ref","search","mobile","privacypolicy","publisher","content","keywords","ext"],USER:["id","buyeruid","yob","gender","keywords","customdata","geo","data","ext"]},Ei={"liveramp.com":"idl","netid.de":"NETID","neustar.biz":"fabrickId","zeotap.com":"zeotapIdPlus","uidapi.com":"UID2","adserver.org":"TDID","id5-sync.com":"","crwdcntrl.net":"","epsilon.com":"","audigent.com":"","pubcid.org":"","trustpid.com":"","intimatemerger.com":""},Ai=["britepoolid","lipbid","criteoId","merkleId","parrableId","connectid","tapadId","quantcastId","pubProvidedId"],Pi=["mimes","minduration","maxduration"],xi=["mimes","minduration","maxduration","protocols","protocol","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype","ext","playerSize","w","h"],Di="ixdiag",Oi="".concat(bi,"_features"),Ri=!1,Ni=(0,se.df)({bidderCode:bi}),Mi={REQUESTED_FEATURE_TOGGLES:[],featureToggles:{},isFeatureEnabled:function(e){return(0,d.Z)(this.featureToggles,"features.".concat(e,".activated"),!1)},getFeatureToggles:function(){if(Ni.localStorageIsEnabled()){var e=(0,l.dj)(Ni.getDataFromLocalStorage(Oi));(0,d.Z)(e,"expiry")&&e.expiry>=(new Date).getTime()?this.featureToggles=e:this.clearFeatureToggles()}},setFeatureToggles:function(e){var t=e.body,n=new Date,i=(0,d.Z)(t,"ext.features");i&&(this.featureToggles={expiry:n.setHours(n.getHours()+1),features:i},Ni.localStorageIsEnabled()&&Ni.setDataInLocalStorage(Oi,JSON.stringify(this.featureToggles)))},clearFeatureToggles:function(){this.featureToggles={},Ni.localStorageIsEnabled()&&Ni.removeDataFromLocalStorage(Oi)}},Li=0,Ui="",ji="";function Bi(e){var t=qi(e,c.pX),n=(0,d.Z)(e,"mediaTypes.video"),i=(0,d.Z)(e,"params.video");if(Hi(n,i).length)return{};for(var r in t.video=i?(0,l.I8)(e.params.video):{},t.ext.tid=(0,d.Z)(e,"ortb2Imp.ext.tid"),Ji(t,e),n)-1===xi.indexOf(r)||t.video.hasOwnProperty(r)||(t.video[r]=n[r]);if(t.video.minduration>t.video.maxduration)return(0,l.H)("IX Bid Adapter: video minduration [".concat(t.video.minduration,"] cannot be greater than video maxduration [").concat(t.video.maxduration,"]"),{bidder:bi,code:ki.VIDEO_DURATION_INVALID}),{};var s=i&&i.context||n&&n.context;if(s&&!t.video.hasOwnProperty("placement")&&(s===re.LD?t.video.placement=1:s===re.gZ?(0,d.Z)(i,"playerConfig.floatOnScroll")?t.video.placement=5:t.video.placement=4:(0,l.yN)("IX Bid Adapter: Video context '".concat(s,"' is not supported"))),!t.video.w||!t.video.h){var o=Wi((0,d.Z)(t,"video.playerSize"))||Wi((0,d.Z)(e,"params.size"));if(!o)return(0,l.yN)("IX Bid Adapter: Video size is missing in [mediaTypes.video]"),{};t.video.w=o[0],t.video.h=o[1]}return Fi(e,t,c.pX),t}function qi(e,t){var n={};if(n.id=e.bidId,n.ext={},(0,d.Z)(e,"params.".concat(t,".siteId"))&&!isNaN(Number(e.params[t].siteId)))switch(t){case c.Mk:n.ext.siteID=e.params.banner.siteId.toString();break;case c.pX:n.ext.siteID=e.params.video.siteId.toString();break;case c.B5:n.ext.siteID=e.params.native.siteId.toString()}else n.ext.siteID=e.params.siteId.toString();return!e.params.hasOwnProperty("id")||"string"!=typeof e.params.id&&"number"!=typeof e.params.id||(n.ext.sid=String(e.params.id)),n}function Fi(e,t,n){var i=null,r=null;if(e.params.bidFloor&&e.params.bidFloorCur&&(i={floor:e.params.bidFloor,currency:e.params.bidFloorCur}),(0,l.LQ)(e.getFloor)){var s="*",o="*";if(n&&(0,l.r3)(wi,n)){var a=t[n];s=n,o=[a.w,a.h]}try{r=e.getFloor({mediaType:s,size:o})}catch(e){(0,l.yN)("priceFloors module call getFloor failed, error : ",e)}}r?(t.bidfloor=r.floor,t.bidfloorcur=r.currency,t.ext.fl=Si.PBJS):i&&(t.bidfloor=i.floor,t.bidfloorcur=i.currency,t.ext.fl=Si.IX)}function Vi(e,t,n){var i={},r=!(!(0,d.Z)(e,"exp")||!(0,l.U)(e.exp)),s=(0,d.Z)(e,"dealid")||(0,d.Z)(e,"ext.dealid");Ii.hasOwnProperty(t)?i.cpm=e.price/Ii[t]:i.cpm=e.price/100,i.requestId=e.impid,s&&(i.dealId=s),i.netRevenue=!0,i.currency=t,i.creativeId=e.hasOwnProperty("crid")?e.crid:"-",2!=e.mtype||(!e.ext||e.ext.vasturl)&&e.ext?e.ext&&e.ext.vasturl&&(i.vastUrl=e.ext.vasturl):i.vastXml=e.adm;var o=null;if("string"==typeof e.adm&&"{"===e.adm[0]&&"}"===e.adm[e.adm.length-1])try{o=JSON.parse(e.adm)}catch(e){(0,l.yN)("adm looks like JSON but failed to parse: ",e)}return e.ext&&e.ext.vasturl||2==e.mtype?(i.width=n.video.w,i.height=n.video.h,i.mediaType=c.pX,i.mediaTypes=n.mediaTypes,i.ttl=r?e.exp:3600):o&&o.native?(i.native={ortb:o.native},i.width=e.w?e.w:1,i.height=e.h?e.h:1,i.mediaType=c.B5,i.ttl=r?e.exp:3600):(i.ad=e.adm,i.width=e.w,i.height=e.h,i.mediaType=c.Mk,i.ttl=r?e.exp:300),i.meta={},i.meta.networkId=(0,d.Z)(e,"ext.dspid"),i.meta.brandId=(0,d.Z)(e,"ext.advbrandid"),i.meta.brandName=(0,d.Z)(e,"ext.advbrand"),e.adomain&&e.adomain.length>0&&(i.meta.advertiserDomains=e.adomain),i}function zi(e){return Array.isArray(e)&&2===e.length&&(0,l.U)(e[0])&&(0,l.U)(e[1])}function $i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(zi(e))return e[0]===t[0]&&e[1]===t[1];for(var n=0;n<e.length;n++)if(e[n][0]===t[0]&&e[n][1]===t[1])return!0;return!1}function Hi(e,t){var n=[];e||(0,l.yN)("IX Bid Adapter: mediaTypes.video is the preferred location for video params in ad unit");for(var i=0,r=Pi;i<r.length;i++){var s=r[i],o=e&&e.hasOwnProperty(s),a=t&&t.hasOwnProperty(s);o||a||n.push("IX Bid Adapter: ".concat(s," is not included in either the adunit or params level"))}var d=e&&e.hasOwnProperty("protocol"),c=e&&e.hasOwnProperty("protocols"),u=t&&t.hasOwnProperty("protocol"),p=t&&t.hasOwnProperty("protocols");return d||c||u||p||n.push("IX Bid Adapter: protocol/protcols is not included in either the adunit or params level"),n}function Wi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return zi(e)?e:!!zi(e[0])&&e[0]}function Zi(e,t,n){if(e)return vi(vi({},(0,$.sE)(n,(function(t){return t.bidId===e}))),(0,$.sE)(t,(function(t){return t.id===e})))}function Gi(e,t,n,i){var r="https://htlb.casalemedia.com/openrtb/pbjs",s=function(e){var t=[],n={};if((0,l.kJ)(e)){var i,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return mi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mi(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}(e);try{for(r.s();!(i=r.n()).done;){var s=i.value;Ei.hasOwnProperty(s.source)&&(0,d.Z)(s,"uids.0")&&(n[s.source]=!0,""!=Ei[s.source]&&(s.uids[0].ext={rtiPartner:Ei[s.source]}),delete s.uids[0].atype,t.push(s))}}catch(e){r.e(e)}finally{r.f()}}return{toSend:t,seenSources:n}}((0,d.Z)(e,"0.userIdAsEids")),o=s.toSend;if(window.headertag&&"function"==typeof window.headertag.getIdentityInfo&&function(e,t){var n=window.headertag.getIdentityInfo();if(n&&"object"===(0,U.Z)(n))for(var i in n)if(n.hasOwnProperty(i)){var r=n[i];!r.responsePending&&r.data&&"object"===(0,U.Z)(r.data)&&Object.keys(r.data).length&&!t.seenSources[r.data.source]&&e.push(r.data)}}(o,s),t&&t.bidderCode===_i&&!s.seenSources["liveramp.com"])return[];var c=[],u=function(e){var t={};return t.id=e[0].bidderRequestId.toString(),t.site={},t.ext={},t.ext.source="prebid",t.ext.ixdiag={},t.ext.ixdiag.ls=Ni.localStorageIsEnabled(),t.imp=[],t.at=1,t}(e);u=function(e,t){return t.length>0&&(e.ext.features={},t.forEach((function(t){e.ext.features[t]={activated:Mi.isFeatureEnabled(t)}}))),e}(u,Mi.REQUESTED_FEATURE_TOGGLES);var p=function(e){for(var t=e.map((function(e){return e.transactionId})).filter((function(e,t,n){return n.indexOf(e)===t})),n={mfu:0,bu:0,iu:0,nu:0,ou:0,allu:0,ren:!1,version:"7.47.0",userIds:Qi(e[0]),url:window.location.href.split("?")[0]},i=function(i){s=e.filter((function(e){return e.transactionId===t[i]}))[0],(0,d.Z)(s,"mediaTypes")&&(Object.keys(s.mediaTypes).length>1&&n.mfu++,(0,d.Z)(s,"mediaTypes.native")&&n.nu++,(0,d.Z)(s,"mediaTypes.banner")&&n.bu++,"outstream"===(0,d.Z)(s,"mediaTypes.video.context")&&(n.ou++,dr(s)&&(n.ren=!0)),"instream"===(0,d.Z)(s,"mediaTypes.video.context")&&n.iu++,n.allu++)},r=0;r<t.length;r++){var s;i(r)}return n}(e);for(var h in p)u.ext.ixdiag[h]=p[h];u=function(e,t,n,i,r){var s=(0,d.Z)(t,"timeout");s&&(e.ext.ixdiag.tmax=s),a.vc.getConfig("userSync")&&(e.ext.ixdiag.syncsPerBidder=a.vc.getConfig("userSync").syncsPerBidder);var o=function(){if(Ni.localStorageIsEnabled()){var e,t={};try{e=JSON.parse(Ni.getDataFromLocalStorage(Di)||"{}")}catch(e){return(0,l.H)("ix can not read ixdiag from localStorage."),null}return Object.keys(e).forEach((function(n){Object.keys(e[n]).forEach((function(i){"number"==typeof e[n][i]&&(t[i]=t[i]?t[i]+e[n][i]:e[n][i])}))})),t}}();return(0,l.xb)(o)||(e.ext.ixdiag.err=o),e.ext.ixdiag.imps=Object.keys(n).length,e.source={tid:i[0].auctionId},i[0].schain&&(e.source.ext={},e.source.ext.schain=i[0].schain),r.length>0&&(e.user={},e.user.eids=r),document.referrer&&""!==document.referrer&&(e.site.ref=document.referrer),e}(u,t,n,e,o),u=function(e,t){if(t){t.gdprConsent&&((Ui=t.gdprConsent).hasOwnProperty("gdprApplies")&&(e.regs={ext:{gdpr:Ui.gdprApplies?1:0}}),Ui.hasOwnProperty("consentString")&&(e.user=e.user||{},e.user.ext={consent:Ui.consentString||""},Ui.hasOwnProperty("addtlConsent")&&Ui.addtlConsent&&(e.user.ext.consented_providers_settings={addtl_consent:Ui.addtlConsent}))),t.uspConsent&&((0,j.N)(e,"regs.ext.us_privacy",t.uspConsent),ji=t.uspConsent);var n=(0,d.Z)(t,"refererInfo.page");n&&(e.site.page=n),t.gppConsent&&((0,j.N)(e,"regs.gpp",t.gppConsent.gppString),(0,j.N)(e,"regs.gpp_sid",t.gppConsent.applicableSections))}return a.vc.getConfig("coppa")&&(0,j.N)(e,"regs.coppa",1),e}(u,t);var f={};!function(e,t,n,i,r,s){Li=e[0].params.siteId,s.s=Li;var o=t&&t.bidderCode||"ix",d=a.vc.getConfig(o);if(d&&"object"===(0,U.Z)(d.firstPartyData)){var l=d.firstPartyData,c="?";for(var u in l)l.hasOwnProperty(u)&&(c+="".concat(encodeURIComponent(u),"=").concat(encodeURIComponent(l[u]),"&"));c=c.slice(0,-1),"page"in n.site?n.site.page+=c:n.site.page=c}}(e,t,u,0,0,f);for(var g=Object.keys(n),m=!1,y=0;y<g.length&&!(c.length>=4);y++){u=Xi(n,g,u,y);var v=(0,d.Z)(t,"ortb2")||{},b=vi({},v.site||v.context),_=vi({},v.user);if(!(0,l.xb)(v)&&!m){u=Ki(t,u,v,b,_);var w=(0,l.I8)(u);w.site=(0,l.Ee)({},w.site,b),w.user=(0,l.Ee)({},w.user,_),u.site=(0,l.Ee)({},u.site,b),u.user=(0,l.Ee)({},u.user,_),m=!0}u=Yi(n,u,g,y),y===g.length-1&&(c.push({method:"POST",url:r+"?s="+Li,data:(0,l.I8)(u),option:{contentType:"text/plain"},validBidRequests:e}),u.imp=[],m=!1)}return c}function Xi(e,t,n,i){var r=e[t[i]],s=r.missingImps,o=void 0===s?[]:s,a=r.ixImps,d={ixImps:void 0===a?[]:a,missingBannerImpressions:o},u=Object.keys(d).map((function(e){return d[e]})).filter((function(e){return Array.isArray(e)})).reduce((function(e,t){return e.concat.apply(e,(0,M.Z)(t))}),[]),p=e[t[i]].gpid,h=e[t[i]].dfp_ad_unit_code,f=e[t[i]].tid,g=e[t[i]].sid;if(u.length&&c.Mk in u[0]){for(var m=u[0],y={id:m.id,banner:{topframe:m.banner.topframe,format:u.map((function(e){var t=e.banner;return{w:t.w,h:t.h,ext:e.ext}}))}},v=0;v<y.banner.format.length;v++)null!=y.banner.format[v].ext&&null!=y.banner.format[v].ext.sid&&delete y.banner.format[v].ext.sid,"bidfloor"in u[v]&&(y.banner.format[v].ext.bidfloor=u[v].bidfloor);var b=e[t[i]].pos;(0,l.U)(b)&&(y.banner.pos=b),(h||p||f||g)&&(y.ext={},y.ext.dfp_ad_unit_code=h,y.ext.gpid=p,y.ext.tid=f,y.ext.sid=g),"bidfloor"in u[0]&&(y.bidfloor=u[0].bidfloor),"bidfloorcur"in u[0]&&(y.bidfloorcur=u[0].bidfloorcur);var _=e[t[i]].adUnitFPD;_&&(y.ext.data=_),n.imp.push(y)}else{var w;u.forEach((function(e){return(0,j.N)(e,"ext.gpid",p)})),(w=n.imp).push.apply(w,(0,M.Z)(u))}return n}function Ki(e,t,n,i,r){if(t.ext.ixdiag.fpd=!0,Object.keys(i).forEach((function(e){-1===Ci.SITE.indexOf(e)&&delete i[e]})),Object.keys(r).forEach((function(e){-1===Ci.USER.indexOf(e)&&delete r[e]})),n.device){var s=vi({},n.device.sua);(0,l.xb)(s)||(0,j.N)(t,"device.sua",s)}return n.hasOwnProperty("regs")&&!e.gppConsent&&(n.regs.hasOwnProperty("gpp")&&"string"==typeof n.regs.gpp&&(0,j.N)(t,"regs.gpp",n.regs.gpp),n.regs.hasOwnProperty("gpp_sid")&&Array.isArray(n.regs.gpp_sid)&&(0,j.N)(t,"regs.gpp_sid",n.regs.gpp_sid)),t}function Ji(e,t){var n=(0,d.Z)(t,"ortb2Imp.ext.data");n&&(0,j.N)(e,"ext.data",n)}function Yi(e,t,n,i,r,s){var o=e[n[i]].pbadslot,a=e[n[i]].tagId,d=e[n[i]].adUnitCode,l=e[n[i]].divId;return(o||a||d||l)&&(t.ext.ixdiag.pbadslot=o,t.ext.ixdiag.tagid=a,t.ext.ixdiag.adunitcode=d,t.ext.ixdiag.divId=l),t}function Qi(e){var t=e.userId||{};return Ai.filter((function(e){return t[e]}))}function er(e,t){if(t)for(var n=0;n<e.length;n++){var i=e[n];if(t[0]===i[0]&&t[1]===i[1]){e.splice(n,1);break}}}function tr(e,t){var n=function(e){var t=qi(e,c.B5),n=e.nativeOrtbRequest;return n.eventtrackers=[{event:1,methods:[1,2]}],n.privacy=1,t.native={request:JSON.stringify(n),ver:"1.2"},t.ext.tid=(0,d.Z)(e,"ortb2Imp.ext.tid"),Ji(t,e),Fi(e,t,c.B5),t}(e);if(0!=Object.keys(n).length){t[e.transactionId]={},t[e.transactionId].ixImps=[],t[e.transactionId].ixImps.push(n),t[e.transactionId].gpid=(0,d.Z)(e,"ortb2Imp.ext.gpid"),t[e.transactionId].dfp_ad_unit_code=(0,d.Z)(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.transactionId].pbadslot=(0,d.Z)(e,"ortb2Imp.ext.data.pbadslot"),t[e.transactionId].tagId=(0,d.Z)(e,"params.tagId");var i=e.adUnitCode,r=document.getElementById(i)?i:(0,l.ky)(i).divId;t[e.transactionId].adUnitCode=i,t[e.transactionId].divId=r}}function nr(e,t){var n=Bi(e);if(0!=Object.keys(n).length){t[e.transactionId]={},t[e.transactionId].ixImps=[],t[e.transactionId].ixImps.push(n),t[e.transactionId].gpid=(0,d.Z)(e,"ortb2Imp.ext.gpid"),t[e.transactionId].dfp_ad_unit_code=(0,d.Z)(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.transactionId].pbadslot=(0,d.Z)(e,"ortb2Imp.ext.data.pbadslot"),t[e.transactionId].tagId=(0,d.Z)(e,"params.tagId");var i=e.adUnitCode,r=document.getElementById(i)?i:(0,l.ky)(i).divId;t[e.transactionId].adUnitCode=i,t[e.transactionId].divId=r}}function ir(e,t,n){var i=function(e){var t=qi(e,c.Mk);t.banner={};var n=(0,d.Z)(e,"params.size");return n&&(t.banner.w=n[0],t.banner.h=n[1]),t.banner.topframe=(0,l.yL)()?0:1,Fi(e,t,c.Mk),t}(e),r=$i((0,d.Z)(e,"mediaTypes.banner.sizes"),(0,d.Z)(e,"params.size"));n.hasOwnProperty(e.transactionId)||(n[e.transactionId]={}),n[e.transactionId].gpid=(0,d.Z)(e,"ortb2Imp.ext.gpid"),n[e.transactionId].dfp_ad_unit_code=(0,d.Z)(e,"ortb2Imp.ext.data.adserver.adslot"),n[e.transactionId].tid=(0,d.Z)(e,"ortb2Imp.ext.tid"),n[e.transactionId].pbadslot=(0,d.Z)(e,"ortb2Imp.ext.data.pbadslot"),n[e.transactionId].tagId=(0,d.Z)(e,"params.tagId"),n[e.transactionId].pos=(0,d.Z)(e,"mediaTypes.banner.pos");var s=(0,d.Z)(e,"ortb2Imp.ext.data");s&&(n[e.transactionId].adUnitFPD=s);var o=(0,d.Z)(e,"params.id");!o||"string"!=typeof o&&"number"!=typeof o||(n[e.transactionId].sid=String(o));var a=e.adUnitCode,u=document.getElementById(a)?a:(0,l.ky)(a).divId;n[e.transactionId].adUnitCode=a,n[e.transactionId].divId=u,r&&(n[e.transactionId].hasOwnProperty("ixImps")||(n[e.transactionId].ixImps=[]),n[e.transactionId].ixImps.push(i)),function(e,t,n){var i=e.transactionId;if(t.hasOwnProperty(i)){var r=[];t[i].hasOwnProperty("missingSizes")&&(r=t[i].missingSizes),er(r,e.params.size),t[i].missingSizes=r}else if((0,d.Z)(e,"mediaTypes.banner.sizes")){var s=(0,l.I8)(e.mediaTypes.banner.sizes);er(s,e.params.size);var o={missingSizes:s,impression:n};t[i]=o}}(e,t,i)}function rr(e,t,n){var i=(0,l.I8)(t);return i.banner.w=n[0],i.banner.h=n[1],Fi(e,i,c.Mk),i}function sr(e){"ERROR"===e.type&&e.arguments&&e.arguments[1]&&e.arguments[1].bidder===bi&&function(e){if(Ni.localStorageIsEnabled()){var t;try{t=JSON.parse(Ni.getDataFromLocalStorage(Di)||"{}")}catch(e){(0,l.yN)("ix can not read ixdiag from localStorage.")}var n=new Date;if(Object.keys(t).map((function(e){var i=new Date(e);i.setDate(i.getDate()+7)-n<0&&delete t[e]})),"ERROR"===e.type&&e.arguments&&e.arguments[1]&&e.arguments[1].bidder===bi){var i=n.toISOString().slice(0,10),r=e.arguments[1].code;r&&(t[i]=t[i]||{},Number(t[i][r])||(t[i][r]=0),t[i][r]++)}Ni.setDataInLocalStorage(Di,JSON.stringify(t))}}(e)}function or(e){e.renderer.push((function(){var t=e.adUnitCode,n=document.getElementById(t)?t:(0,l.ky)(t).divId;n?window.createIXPlayer(n,e):(0,l.yN)("IX Bid Adapter: adUnitCode: ".concat(n," not found on page."))}))}function ar(e,t){var n=B.Th.install({id:e,url:t,loaded:!1});try{n.setRender(or)}catch(e){return(0,l.yN)("Prebid Error calling setRender on renderer",e),null}return t?n:((0,l.yN)("Outstream renderer URL not found"),null)}function dr(e){if("outstream"!==(0,d.Z)(e,"mediaTypes.video.context"))return!1;var t=(0,d.Z)(e,"mediaTypes.video.renderer");return t||(t=(0,d.Z)(e,"renderer")),!("object"===(0,U.Z)(t)&&t.url&&t.render)||t.backupOnly}var lr={code:bi,gvlid:10,aliases:[{code:_i,gvlid:10,skipPbsAliasing:!1}],supportedMediaTypes:wi,isBidRequestValid:function(e){Ri||(gi.on(Tt.FP.AUCTION_DEBUG,sr),gi.on(Tt.FP.AD_RENDER_FAILED,sr),Ri=!0);var t,n,i=(0,d.Z)(e,"params.video"),r=(0,d.Z)(e,"params.size"),s=(0,d.Z)(e,"mediaTypes.banner.sizes"),o=(0,d.Z)(e,"mediaTypes.video"),a=(0,d.Z)(e,"mediaTypes.video.playerSize"),c=e.params.hasOwnProperty("bidFloor"),u=e.params.hasOwnProperty("bidFloorCur");if(e.hasOwnProperty("mediaType")&&!(0,l.r3)(wi,e.mediaType))return(0,l.yN)("IX Bid Adapter: media type is not supported."),!1;if((0,d.Z)(e,"mediaTypes.banner")&&!s)return!1;if(r){var p=Wi(r);if(!p)return(0,l.H)("IX Bid Adapter: size has invalid format.",{bidder:bi,code:ki.BID_SIZE_INVALID_FORMAT}),!1;if(!$i(e.sizes,p)&&!$i(a,p)&&!$i(s,p))return(0,l.H)("IX Bid Adapter: bid size is not included in ad unit sizes or player size.",{bidder:bi,code:ki.BID_SIZE_NOT_INCLUDED}),!1}if("string"!=typeof e.params.siteId&&"number"!=typeof e.params.siteId)return(0,l.H)("IX Bid Adapter: siteId must be string or number type.",{bidder:bi,code:ki.SITE_ID_INVALID_VALUE}),!1;if("string"!=typeof e.params.siteId&&isNaN(Number(e.params.siteId)))return(0,l.H)("IX Bid Adapter: siteId must valid value",{bidder:bi,code:ki.SITE_ID_INVALID_VALUE}),!1;if((c||u)&&!(c&&u&&(t=e.params.bidFloor,n=e.params.bidFloorCur,Boolean("number"==typeof t&&"string"==typeof n&&n.match(/^[A-Z]{3}$/)))))return(0,l.H)("IX Bid Adapter: bidFloor / bidFloorCur parameter has invalid format.",{bidder:bi,code:ki.BID_FLOOR_INVALID_FORMAT}),!1;if(o&&i){var h=Bi(e).video,f=Hi(o,i);if((0,d.Z)(e,"mediaTypes.video.context")===re.gZ&&dr(e)&&h){var g=[(0,d.Z)(h,"w"),(0,d.Z)(h,"h")];if(!(g[0]>=Ti[0]&&g[1]>=Ti[1]))return(0,l.H)("IX Bid Adapter: ".concat(g," is an invalid size for IX outstream renderer")),!1}if(f.length)return f.forEach((function(e){(0,l.H)(e,{bidder:bi,code:ki.PROPERTY_NOT_INCLUDED})})),!1}return function(e){return void 0===(0,d.Z)(e,"mediaTypes.native")||e.nativeOrtbRequest&&Array.isArray(e.nativeOrtbRequest.assets)&&e.nativeOrtbRequest.assets.length>0}(e)},buildRequests:function(e,t){var n=[],i={},r={},s={},o={};for(var a in Mi.getFeatureToggles(),e.forEach((function(e){var t=Object.keys((0,d.Z)(e,"mediaTypes",{}));for(var n in t)switch(t[n]){case c.Mk:ir(e,o,i);break;case c.pX:nr(e,r);break;case c.B5:tr(e,s);break;default:(0,l.yN)("IX Bid Adapter: ad unit mediaTypes ".concat(n," is not supported"))}})),o)if(o.hasOwnProperty(a)){var u=o[a].missingSizes;i.hasOwnProperty(a)||(i[a]={}),i[a].hasOwnProperty("missingImps")||(i[a].missingImps=[],i[a].missingCount=0);for(var p=o[a].impression,h=0;h<u.length;h++){var f=rr(e[0],p,u[h]);i[a].missingImps.push(f),i[a].missingCount++}}return Object.keys(i).length>0&&n.push.apply(n,(0,M.Z)(Gi(e,t,i))),Object.keys(r).length>0&&n.push.apply(n,(0,M.Z)(Gi(e,t,r))),Object.keys(s).length>0&&n.push.apply(n,(0,M.Z)(Gi(e,t,s))),n},interpretResponse:function(e,t){var n=[],i=null;if(!e.hasOwnProperty("body")||!e.body.hasOwnProperty("seatbid"))return Mi.setFeatureToggles(e),n;for(var r=e.body,s=r.seatbid,o=0;o<s.length;o++)if(s[o].hasOwnProperty("bid")){for(var a=s[o].bid,u=t.data,p=0;p<a.length;p++){var h=Zi(a[p].impid,u.imp,t.validBidRequests);if((i=Vi(a[p],r.cur,h)).mediaType===c.pX&&dr(h)){var f=(0,d.Z)(r,"ext.videoplayerurl");if(i.renderer=ar(a[p].bidId,f),!i.renderer)continue}n.push(i)}if((0,d.Z)(u,"ext.ixdiag.err")&&Ni.localStorageIsEnabled())try{Ni.removeDataFromLocalStorage(Di)}catch(e){(0,l.H)("ix can not clear ixdiag from localStorage.")}}return Mi.setFeatureToggles(e),n},transformBidParams:function(e,t){return(0,l.uh)({siteID:"number"},e)},getUserSyncs:function(e,t){var n=[],i=null;if(t.length>0&&(i=(0,d.Z)(t[0],"body.ext.publishersyncsperbidderoverride")),void 0!==i&&0==i)return[];if(e.iframeEnabled)n.push({type:"iframe",url:"https://js-sec.indexww.com/um/ixmatch.html"});else{var r=null;a.vc.getConfig("userSync")&&(r=a.vc.getConfig("userSync").syncsPerBidder),0===r&&(r=i),r=i&&(0===r||r)?i>r?r:i:1;for(var s=0;s<r;s++)n.push({type:"image",url:cr(r,s)})}return n}};function cr(e,t){var n="",i="0";return Ui&&Ui.hasOwnProperty("gdprApplies")&&(i=Ui.gdprApplies?"1":"0"),Ui&&Ui.hasOwnProperty("consentString")&&(n=Ui.consentString||""),"https://dsum.casalemedia.com/pbusermatch?origin=prebid&site_id="+Li.toString()+"&p="+e.toString()+"&i="+t.toString()+"&gdpr="+i+"&gdpr_consent="+n+"&us_privacy="+(ji||"")}(0,o.dX)(lr),(0,s.z)("ixBidAdapter");var ur={code:"justpremium",gvlid:62,time:6e4,isBidRequestValid:function(e){return!!(e&&e.params&&e.params.zone)},buildRequests:function(e,t){var n,i,r=(n={},i={},e.forEach((function(e){var t=e.params,r=t.zone;if(1!==n[r]){var s=t.allow||t.formats||[],o=t.exclude||[];if(0===s.length&&0===o.length)return n[t.zone]=1;n[r]=n[r]||[[],{}],n[r][0]=function(e){for(var t=e.concat(),n=0;n<t.length;++n)for(var i=n+1;i<t.length;++i)t[n]===t[i]&&t.splice(i--,1);return t}(n[r][0].concat(s)),o.forEach((function(e){n[r][1][e]?n[r][1][e]++:n[r][1][e]=1})),i[r]=i[r]||0,o.length&&i[r]++}})),Object.keys(i).forEach((function(e){if(1!==n[e]){var t=[];Object.keys(n[e][1]).forEach((function(r){n[e][1][r]===i[e]&&t.push(r)})),n[e][1]=t}})),Object.keys(n).forEach((function(e){1!==n[e]&&n[e][1].length&&(n[e][0].forEach((function(t){var i=n[e][1].indexOf(t);i>-1&&n[e][1].splice(i,1)})),n[e][0].length=0),1===n[e]||n[e][0].length||n[e][1].length||(n[e]=1)})),n),s=function(){var e;try{e=window.top}catch(t){e=window}return{screenWidth:e.screen.width,screenHeight:e.screen.height,innerWidth:e.innerWidth,innerHeight:e.innerHeight}}(),o=function(){if(!window.top)return null;var e,t=new URLSearchParams(window.top.location.search);return function(e){return 0===Object.keys(e).length?null:e}((e={ggAdbuyid:t.get("gg_adbuyid"),ggDealid:t.get("gg_dealid"),ggEadbuyid:t.get("gg_eadbuyid")},Object.fromEntries(Object.entries(e).filter((function(e){var t=(0,L.Z)(e,2);return t[0],null!=t[1]})))))}(),a={zone:e.map((function(e){return parseInt(e.params.zone)})).filter((function(e,t,n){return n.indexOf(e)===t})),referer:t.refererInfo.page,sw:s.screenWidth,sh:s.screenHeight,ww:s.innerWidth,wh:s.innerHeight,c:r,id:e[0].params.zone,sizes:{},ggExt:o};e.forEach((function(e){var t=e.params.zone,n=a.sizes;n[t]=n[t]||[],n[t].push.apply(n[t],e.mediaTypes&&e.mediaTypes.banner&&e.mediaTypes.banner.sizes)})),(0,d.Z)(e[0],"userId.pubcid")?a.pubcid=(0,d.Z)(e[0],"userId.pubcid"):(0,d.Z)(e[0],"crumbs.pubcid")&&(a.pubcid=(0,d.Z)(e[0],"crumbs.pubcid")),a.uids=e[0].userId,t&&t.gdprConsent&&(a.gdpr_consent={consent_string:t.gdprConsent.consentString,consent_required:"boolean"!=typeof t.gdprConsent.gdprApplies||t.gdprConsent.gdprApplies}),t&&t.uspConsent&&(a.us_privacy=t.uspConsent),a.version={prebid:"7.47.0",jp_adapter:"1.8.3"},e[0].schain&&(a.schain=e[0].schain);var l=JSON.stringify(a);return{method:"POST",url:"https://pre.ads.justpremium.com/v/2.0/t/xhr?i="+ +new Date,data:l,bids:e}},interpretResponse:function(e,t){var n=e.body,i=[];return t.bids.forEach((function(e){var t=function(e,t){var n=e.zone;if(t[n])for(var i=t[n].length;i--;)if(pr(e,t[n][i]))return t[n].splice(i,1).pop();return!1}(e.params,n.bid);if(t){var r=e.mediaTypes&&e.mediaTypes.banner&&e.mediaTypes.banner.sizes&&e.mediaTypes.banner.sizes.length&&e.mediaTypes.banner.sizes[0]||[],s={requestId:e.bidId,creativeId:t.id,width:r[0]||t.width,height:r[1]||t.height,ad:t.adm,cpm:t.price,netRevenue:!0,currency:t.currency||"USD",ttl:t.ttl||ur.time,format:t.format,meta:{advertiserDomains:t.adomain&&t.adomain.length>0?t.adomain:[]}};t.ext&&t.ext.pg&&(s.adserverTargeting={hb_deal_justpremium:"jp_pg"}),i.push(s)}})),i},getUserSyncs:function(e,t,n,i){var r="https://pre.ads.justpremium.com/v/1.0/t/sync?_c=a"+Math.random().toString(36).substring(7)+Date.now(),s=[];if(n&&"boolean"==typeof n.gdprApplies&&n.gdprApplies&&n.consentString&&(r=r+"&consentString="+encodeURIComponent(n.consentString)),i&&(r=r+"&usPrivacy="+encodeURIComponent(i)),e.iframeEnabled&&s.push({type:"iframe",url:r}),e.pixelEnabled&&0!==t.length){var o=t.map((function(e){var t;return null==e||null===(t=e.body)||void 0===t?void 0:t.pxs})).reduce((function(e,t){return e.concat(t)}),[]).filter((function(e){return void 0!==e}));s=[].concat((0,M.Z)(s),(0,M.Z)(o))}return s}};function pr(e,t){var n=t.format;return e.allow&&e.allow.length?e.allow.indexOf(n)>-1:!e.exclude||!e.exclude.length||e.exclude.indexOf(n)<0}(0,o.dX)(ur),(0,s.z)("justpremiumBidAdapter");var hr,fr,gr,mr=Object.freeze({CODE:"kargo",HOST:"krk2.kargo.com",REQUEST_METHOD:"POST",REQUEST_ENDPOINT:"/api/v1/prebid",TIMEOUT_ENDPOINT:"/api/v1/event/timeout",GVLID:972,SUPPORTED_MEDIA_TYPES:[c.Mk,c.pX]}),yr=(0,se.df)({bidderCode:mr.CODE}),vr=Object.freeze({KEY:"currency",US_DOLLAR:"USD"}),br=Object.freeze({SOCIAL_CANVAS:"params.socialCanvas",SUA:"ortb2.device.sua",TDID_ADAPTER:"userId.tdid"}),_r=Object.freeze({BROWSERS:"browsers",MOBILE:"mobile",MODEL:"model",PLATFORM:"platform",SOURCE:"source"}),wr=[_r.BROWSERS,_r.MOBILE,_r.MODEL,_r.SOURCE,_r.PLATFORM],Tr=Object.freeze({KEY:"krg_crb",SYNC_URL:"https://crb.kargo.com/api/v1/initsyncrnd/{UUID}?seed={SEED}&idx={INDEX}&gdpr={GDPR}&gdpr_consent={GDPR_CONSENT}&us_privacy={US_PRIVACY}&gpp={GPP_STRING}&gpp_sid={GPP_SID}",SYNC_COUNT:5,PAGE_VIEW_ID:"pageViewId",PAGE_VIEW_TIMESTAMP:"pageViewTimestamp",PAGE_VIEW_URL:"pageViewUrl"});function Ir(){try{var e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=-177&e[6]|64,e[8]=-65&e[8]|128;var t=Array.prototype.map.call(new Uint8Array(e),(function(e){return("00"+e.toString(16)).slice(-2)})).join("");return t.slice(0,8)+"-"+t.slice(8,12)+"-"+t.slice(12,16)+"-"+t.slice(16,20)+"-"+t.slice(20)}catch(e){return""}}function Sr(){return hr||(hr=Ir()),hr}function kr(e){try{return yr.getDataFromLocalStorage(e)}catch(e){return null}}function Cr(e,t,n,i,r){var s=Er._getCrb(),o={crbIDs:s.syncIds||{}};e&&(o.tdID=e),!e&&s.tdID&&(o.tdID=s.tdID),t&&(o.usp=t);try{n&&(o.gdpr={consent:n.consentString||"",applies:!!n.gdprApplies})}catch(e){}if(null!=s.lexId&&(o.kargoID=s.lexId),null!=s.clientId&&(o.clientID=s.clientId),null!=s.optOut&&(o.optOut=s.optOut),null!=i&&(o.sharedIDEids=i),r){var a={};r&&r.consentString&&(a.gppString=r.consentString),r&&r.applicableSections&&(a.applicableSections=r.applicableSections),(0,l.xb)(a)||(o.gpp=a)}return o}var Er={gvlid:mr.GVLID,code:mr.CODE,isBidRequestValid:function(e){return!(!e||!e.params||!e.params.placementId)},buildRequests:function(e,t){var n=a.vc.getConfig(vr.KEY),i=n&&n.adServerCurrency?n.adServerCurrency:null,r=[];(0,l.yi)(e,(function(e){r.push(function(e){var t={id:e.bidId,tid:e.transactionId,pid:e.params.placementId,code:e.adUnitCode};null!=e.floorData&&e.floorData.floorMin>0&&(t.floor=e.floorData.floorMin),e.bidRequestsCount>0&&(t.bidRequestCount=e.bidRequestsCount),e.bidderRequestsCount>0&&(t.bidderRequestCount=e.bidderRequestsCount),e.bidderWinsCount>0&&(t.bidderWinCount=e.bidderWinsCount);var n=function(e){if(null!=e.ortb2Imp){if(null!=e.ortb2Imp.gpid&&""!=e.ortb2Imp.gpid)return e.ortb2Imp.gpid;if(null!=e.ortb2Imp.ext&&null!=e.ortb2Imp.ext.data){if(null!=e.ortb2Imp.ext.data.pbAdSlot&&""!=e.ortb2Imp.ext.data.pbAdSlot)return e.ortb2Imp.ext.data.pbAdSlot;if(null!=e.ortb2Imp.ext.data.adServer&&null!=e.ortb2Imp.ext.data.adServer.adSlot&&""!=e.ortb2Imp.ext.data.adServer.adSlot)return e.ortb2Imp.ext.data.adServer.adSlot}}return null!=e.adUnitCode&&""!=e.adUnitCode?e.adUnitCode:""}(e);return null!=n&&""!=n&&(t.fpd={gpid:n}),null!=e.mediaTypes&&(null!=e.mediaTypes.banner&&(t.banner=e.mediaTypes.banner),null!=e.mediaTypes.video&&(t.video=e.mediaTypes.video),null!=e.mediaTypes.native&&(t.native=e.mediaTypes.native)),t}(e))}));var s=e[0],o=(0,d.Z)(s,br.TDID_ADAPTER),c=function(e){var t;return{pageURL:null==e||null===(t=e.refererInfo)||void 0===t?void 0:t.page,rawCRB:yr.getCookie(Tr.KEY),rawCRBLocalStorage:kr(Tr.KEY)}}(t),u=Object.assign({},{pbv:"7.47.0",aid:s.auctionId,sid:Sr(),url:c.pageURL,timeout:t.timeout,ts:(new Date).getTime(),device:{size:[window.screen.width,window.screen.height]},imp:r,user:Cr(o,t.uspConsent,t.gdprConsent,s.userIdAsEids,t.gppConsent)}),p=fr===window.location.pathname?++gr:(fr=window.location.pathname,gr=0);null!=p&&(u.requestCount=p),null!=i&&i!=vr.US_DOLLAR&&(u.cur=i),null!=c.rawCRB&&(u.rawCRB=c.rawCRB),null!=c.rawCRBLocalStorage&&(u.rawCRBLocalStorage=c.rawCRBLocalStorage);var h=(0,d.Z)(s,br.SOCIAL_CANVAS);null!=h&&(u.socan=h);var f=(0,d.Z)(s,br.SUA);if(f){var g=[];wr.forEach((function(e){var t=f[e];if(t&&("string"!=typeof t||""!==t.trim()))switch(e){case _r.MOBILE&&t<1:case _r.SOURCE&&t<1:break;default:g.push(e)}})),u.device.sua=(0,l.ei)(f,g)}var m=null!=kr(Tr.PAGE_VIEW_ID),y=null!=kr(Tr.PAGE_VIEW_TIMESTAMP),v=null!=kr(Tr.PAGE_VIEW_URL),b={};return m&&(b.id=kr(Tr.PAGE_VIEW_ID)),y&&(b.timestamp=Number(kr(Tr.PAGE_VIEW_TIMESTAMP))),v&&(b.url=kr(Tr.PAGE_VIEW_URL)),(0,l.xb)(b)||(u.page=b),Object.assign({},t,{method:mr.REQUEST_METHOD,url:"https://".concat(mr.HOST).concat(mr.REQUEST_ENDPOINT),data:u,currency:i})},interpretResponse:function(e,t){var n=e.body,i=[];return(0,l.xb)(n)||"object"!==(0,U.Z)(n)||Object.entries(n).forEach((function(e){var n=(0,L.Z)(e,2),r=n[0],s=n[1],o={mediaType:s.mediaType&&mr.SUPPORTED_MEDIA_TYPES.includes(s.mediaType)?s.mediaType:c.Mk};s.metadata&&s.metadata.landingPageDomain&&(o.clickUrl=s.metadata.landingPageDomain[0],o.advertiserDomains=s.metadata.landingPageDomain);var a={requestId:r,cpm:Number(s.cpm),width:s.width,height:s.height,ttl:300,creativeId:s.id,dealId:s.targetingCustom,netRevenue:!0,currency:s.currency||t.currency,mediaType:o.mediaType,meta:o};o.mediaType==c.pX?s.admUrl?a.vastUrl=s.admUrl:a.vastXml=s.adm:a.ad=s.adm,i.push(a)})),i},getUserSyncs:function(e,t,n,i,r){var s=[],o=Ir(),a=Er._getCrb().clientId,d=n&&n.gdprApplies?1:0,l=n&&n.consentString?n.consentString:"",c=r&&r.consentString?r.consentString:"",u=r&&r.applicableSections&&Array.isArray(r.applicableSections)?r.applicableSections.join(","):"";if("string"==typeof i&&4==i.length&&1==i[0]&&"Y"==i[2])return s;if(e.iframeEnabled&&o&&a)for(var p=0;p<Tr.SYNC_COUNT;p++)s.push({type:"iframe",url:Tr.SYNC_URL.replace("{UUID}",a).replace("{SEED}",o).replace("{INDEX}",p).replace("{GDPR}",d).replace("{GDPR_CONSENT}",l).replace("{US_PRIVACY}",i||"").replace("{GPP_STRING}",c).replace("{GPP_SID}",u)});return s},supportedMediaTypes:mr.SUPPORTED_MEDIA_TYPES,onTimeout:function(e){null!=e&&e.forEach((function(e){!function(e,t){var n={aid:e,ato:t};try{var i=(0,l.Q2)({protocol:"https",hostname:mr.HOST,pathname:mr.TIMEOUT_ENDPOINT,search:n});(0,l.hq)(i)}catch(e){}}(e.auctionId,e.timeout)}))},_getCrb:function(){var e=function(){try{return JSON.parse(atob(kr(Tr.KEY)))}catch(e){return{}}}();return Object.keys(e).length?e:function(){try{var e=JSON.parse(yr.getCookie(Tr.KEY));if(e&&e.v){var t=JSON.parse(atob(e.v));if(t)return t}return{}}catch(e){return{}}}()},_getSessionId:Sr};(0,o.dX)(Er),(0,s.z)("kargoBidAdapter");var Ar,Pr={ajax:x.h},xr=Object.values(Tt.FP).filter((function(e){return e!==Tt.FP.AUCTION_DEBUG})),Dr=n(6692),Or=(Ar={},(0,r.Z)(Ar,Tt.FP.AUCTION_INIT,Nr),(0,r.Z)(Ar,Tt.FP.AUCTION_END,Nr),(0,r.Z)(Ar,Tt.FP.BID_REQUESTED,(function(e){return{bidderCode:e.bidderCode,time:e.start,bids:e.bids.map((function(e){return{transactionId:e.transactionId,adUnitCode:e.adUnitCode,bidId:e.bidId,startTime:e.startTime,sizes:(0,l.sF)(e.sizes).toString(),params:e.params}}))}})),(0,r.Z)(Ar,Tt.FP.BID_TIMEOUT,(function(e){return e.map((function(e){return e.bidder})).filter(l.tT)})),(0,r.Z)(Ar,Tt.FP.BID_RESPONSE,(function(e){return{bidderCode:e.bidder,transactionId:e.transactionId,adUnitCode:e.adUnitCode,statusMessage:e.statusMessage,mediaType:e.mediaType,renderedSize:e.size,cpm:e.cpm,currency:e.currency,netRevenue:e.netRevenue,timeToRespond:e.timeToRespond,bidId:e.bidId,requestId:e.requestId,creativeId:e.creativeId}})),(0,r.Z)(Ar,Tt.FP.BID_WON,(function(e){return{adId:e.adId,bidderCode:e.bidder,adUnitCode:e.adUnitCode,statusMessage:e.statusMessage,mediaType:e.mediaType,renderedSize:e.size,cpm:e.cpm,currency:e.currency,netRevenue:e.netRevenue,timeToRespond:e.timeToRespond,bidId:e.requestId,dealId:e.dealId,status:e.status,creativeId:e.creativeId}})),(0,r.Z)(Ar,Tt.FP.NO_BID,(function(e){return{bidderCode:e.bidder,transactionId:e.transactionId,adUnitCode:e.adUnitCode,bidId:e.bidId}})),Ar);var Rr=Object.assign(function(e){var t,n,i,r,s,o=e.url,a=e.analyticsType,d=e.global,c=e.handler,u=[],p=!1,h=(r=!1,s=function(){if(!r){r=!0;try{for(var e=0,t=0;u.length>0;){e++;var i=u.length;if(u.shift()(),u.length>=i?t++:t=0,t>=10)return(0,l.H)("Detected probable infinite loop, discarding events",u),void(u.length=0)}(0,l.ji)("".concat(n," analytics: processed ").concat(e," events"))}finally{r=!1}}},function(){null!=i&&(clearTimeout(i),i=null),i=setTimeout(s,100)});return Object.defineProperties({track:function(e){var t=e.eventType,n=e.args;"bundle"===this.getAdapterType()&&window[d](c,t,n),"endpoint"===this.getAdapterType()&&f.apply(void 0,arguments)},enqueue:g,enableAnalytics:m,disableAnalytics:function(){Object.entries(t||{}).forEach((function(e){var t=(0,L.Z)(e,2),n=t[0],i=t[1];gi.S1(n,i)})),this.enableAnalytics=this._oldEnable?this._oldEnable:m,p=!1},getAdapterType:function(){return a},getGlobal:function(){return d},getHandler:function(){return c},getUrl:function(){return o}},{enabled:{get:function(){return p}}});function f(e){var t=e.eventType,n=e.args,i=e.callback;Pr.ajax(o,i,JSON.stringify({eventType:t,args:n}))}function g(e){var t=this,n=e.eventType,i=e.args;u.push((function(){t.track({eventType:n,args:i})})),h()}function m(e){var i=this;n=null==e?void 0:e.provider;var r,s,o,a,c,u=this;if("object"!==(0,U.Z)(e)||"object"!==(0,U.Z)(e.options)||void 0===e.options.sampling||Math.random()<parseFloat(e.options.sampling)){var h=(s=(r=e||{}).includeEvents,o=void 0===s?xr:s,a=r.excludeEvents,c=void 0===a?[]:a,new Set(Object.values(Tt.FP).filter((function(e){return o.includes(e)})).filter((function(e){return!c.includes(e)}))));gi.vw().forEach((function(e){if(e&&h.has(e.eventType)){var t=e.eventType,n=e.args;g.call(u,{eventType:t,args:n})}})),t=Object.fromEntries(Array.from(h).map((function(t){var n=t===Tt.FP.AUCTION_INIT?function(n){n.config="object"===(0,U.Z)(e)&&e.options||{},i.enqueue({eventType:t,args:n})}:function(e){return i.enqueue({eventType:t,args:e})};return gi.on(t,n),[t,n]})))}else(0,l.ji)('Analytics adapter for "'.concat(d,'" disabled by sampling'));this._oldEnable=this.enableAnalytics,this.enableAnalytics=function(){return(0,l.ji)('Analytics adapter for "'.concat(d,'" already enabled, unnecessary call to `enableAnalytics`.'))},p=!0}}({analyticsType:"endpoint"}),{track:function(e){var t,n,i=e.eventType,r=e.args;if(Tt.FP.AUCTION_INIT===i&&Rr.context.aggregatedEvents.splice(0),Or[i]&&Rr.context.aggregatedEvents.push({eventType:i,data:Or[i](r)}),i===Tt.FP.AUCTION_END){if(!Rr.context.aggregatedEvents.filter((function(e){return e.eventType===Tt.FP.BID_WON}))[0]&&Dr.q0.getWinningBids()[0]){var s=Or[Tt.FP.BID_WON](Dr.q0.getWinningBids()[0]);Rr.context.aggregatedEvents.push({eventType:Tt.FP.BID_WON,data:s})}!function(e){var t=e.host,n=e.method,i=e.payload,r={protocol:"https",hostname:void 0===t?"tracker.konduit.me":t,pathname:e.path};"GET"===n&&(r.search=i);var s,o,a=((s=r).protocol||"http")+"://"+(s.host||s.hostname+(s.port?":".concat(s.port):""))+(s.pathname||"")+(s.search?"?".concat((o=s.search||"",Object.keys(o).map((function(e){return Array.isArray(o[e])?o[e].map((function(t){return"".concat(e,"[]=").concat(t)})).join("&"):"".concat(e,"=").concat(o[e])})).join("&"))):"")+(s.hash?"#".concat(s.hash):"");(0,x.h)(a,void 0,"POST"===n?JSON.stringify(i):null,{contentType:"application/json",method:n,withCredentials:!0})}({method:"POST",path:"/analytics-initial-event",payload:(t=a.vc.getConfig("konduit.konduitId"),n=window.screen,{konduitId:t,prebidVersion:"7.47.0",konduitPrebidModuleVersion:"1.0.0",environment:{screen:{width:n.width,height:n.height},language:navigator.language},events:Rr.context.aggregatedEvents})})}}});function Nr(e){return{auctionId:e.auctionId,timestamp:e.timestamp,auctionEnd:e.auctionEnd,auctionStatus:e.auctionStatus,adUnitCodes:e.adUnitCodes,labels:e.labels,timeout:e.timeout}}Rr.originEnableAnalytics=Rr.enableAnalytics,Rr.enableAnalytics=function(e){a.vc.getConfig("konduit.konduitId")?(Rr.context={aggregatedEvents:[]},Rr.originEnableAnalytics(e)):(0,l.H)("A konduitId in config is required to use konduitAnalyticsAdapter")},O.ZP.registerAnalyticsAdapter({adapter:Rr,code:"konduit"}),(0,s.z)("konduitAnalyticsAdapter");var Mr=(0,s.R)(),Lr=n(4359),Ur=n(8230),jr="Konduit",Br="enableSendAllBids",qr="A konduitId param is required to be in configs",Fr="No bids received in the auction";function Vr(e){return(e=[].slice.call(e)).unshift("".concat(jr,": ")),e}function zr(){l.H.apply(void 0,(0,M.Z)(Vr(arguments)))}function $r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}!function(e,t){Mr.adServers=Mr.adServers||{},Mr.adServers[e]=Mr.adServers[e]||{},Object.keys(t).forEach((function(n){Mr.adServers[e][n]?(0,l.yN)("Attempting to add an already registered function property ".concat(n," for AdServer ").concat(e,".")):Mr.adServers[e][n]=t[n]}))}("konduit",{processBids:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=a.vc.getConfig("konduit.konduitId");if(e=e||{},!t)return zr(qr),e.callback&&e.callback(new Error(qr),[]),null;var n=e.bids||ie.K.getBidsReceived(),i=e.bid||Dr.q0.getWinningBids(e.adUnitCode,n)[0],r=[];if(a.vc.getConfig(Br)?r.push.apply(r,(0,M.Z)(n)):i&&r.push(i),!r.length)return zr(Fr),e.callback&&e.callback(new Error(Fr),[]),null;var s=a.vc.getConfig("priceGranularity"),o=[];r.forEach((function(e){!function(e,t,n){e.kCpm=e.cpm,e.adserverTargeting||(e.adserverTargeting={});var i=(0,Ur.dg)(n)(e);a.vc.getConfig(Br)&&(e.adserverTargeting["k_cpm_".concat(e.bidderCode)]=i),t.bidderCode===e.bidderCode&&t.creativeId===e.creativeId&&(e.adserverTargeting.k_cpm=i)}(e,i,s),o.push(function(e){return{auctionId:e.auctionId,vastUrl:e.vastUrl,bidderCode:e.bidderCode,creativeId:e.creativeId,adUnitCode:e.adUnitCode,cpm:e.cpm,currency:e.currency}}(e))})),function(e){var t=e.host,n=e.protocol,i=e.method,r=void 0===i?"GET":i,s=e.payload,o=e.callbacks,a=e.timeout,d={protocol:void 0===n?"https":n,hostname:void 0===t?"p.konduit.me":t,pathname:e.path};"GET"===r&&(d.search=s);var l,c,u=((l=d).protocol||"http")+"://"+(l.host||l.hostname+(l.port?":".concat(l.port):""))+(l.pathname||"")+(l.search?"?".concat((c=l.search||"",Object.keys(c).map((function(e){return Array.isArray(c[e])?c[e].map((function(t){return"".concat(e,"[]=").concat(t)})).join("&"):"".concat(e,"=").concat(c[e])})).join("&"))):"")+(l.hash?"#".concat(l.hash):"");(0,x.O)(a)(u,o,"POST"===r?JSON.stringify(s):null,{contentType:"application/json",method:r,withCredentials:!0})}({method:"POST",path:"/api/bidsProcessor",timeout:e.timeout||1e3,payload:{clientId:t,konduitPrebidModuleVersion:"1.0.0",enableSendAllBids:a.vc.getConfig(Br),bids:o,bidResponsesCount:ie.K.getBidsReceived().length},callbacks:{success:function(n){var o=null;!function(){l.PN.apply(void 0,(0,M.Z)(Vr(arguments)))}("Bids processed successfully ",n);try{var d=JSON.parse(n),c=d.kCpmData,u=d.cacheData;if((0,l.xb)(u))throw new Error("A bid was not cached");i.adserverTargeting.konduit_id=t,i.adserverTargeting.k_id=t,r.forEach((function(e){var t="".concat(e.bidderCode,":").concat(e.creativeId);!function(e,t,n,i){if((0,l.hj)(e)){t.kCpm=e;var r=(0,Lr.D)(e,a.vc.getConfig("customPriceBucket"),a.vc.getConfig("currency.granularityMultiplier")),s=r.custom||r[i]||r.med;a.vc.getConfig(Br)&&(t.adserverTargeting["k_cpm_".concat(t.bidderCode)]=s),n.bidderCode===t.bidderCode&&n.creativeId===t.creativeId&&(t.adserverTargeting.k_cpm=s)}}(c[t],e,i,s),function(e,t,n){(0,l.d8)(e)&&(t.konduitCacheKey=e,a.vc.getConfig(Br)&&(t.adserverTargeting["k_cache_key_".concat(t.bidderCode)]=e),n.bidderCode===t.bidderCode&&n.creativeId===t.creativeId&&(t.adserverTargeting.k_cache_key=e,t.adserverTargeting.konduit_cache_key=e))}(u[t],e,i)}))}catch(e){o=e,zr("Error parsing JSON response for bidsProcessor data: ",e)}e.callback&&e.callback(o,r)},error:function(t){zr("Bids were not processed successfully ",t),e.callback&&e.callback((0,l.d8)(t)?new Error(t):t,r)}}})}}),(0,s.z)("konduitWrapper");var Hr=[c.Mk,c.pX],Wr="6.0.0",Zr="USD",Gr="https://hb.minutemedia-prebid.com/",Xr="iframe",Kr="pixel",Jr={code:"minutemedia",gvlid:918,version:Wr,supportedMediaTypes:Hr,isBidRequestValid:function(e){return e.params?!!e.params.org||((0,l.yN)("org is a mandatory param for MinuteMedia adapter"),!1):((0,l.yN)("no params have been set to MinuteMedia adapter"),!1)},buildRequests:function(e,t){var n={},i=e[0],r=i.params.testMode;return n.params=function(e,t){var n,i=window.location.hostname,r=a.vc.getConfig("userSync")||{},s=r.syncEnabled,o=r.filterSettings,c=t.bidderCode,u=e.params,p=t.timeout,h={wrapper_type:"prebidjs",wrapper_vendor:"pbjs",wrapper_version:"7.47.0",adapter_version:Wr,auction_start:(0,l.AB)(),publisher_id:u.org,publisher_name:i,site_domain:i,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,device_type:(n=navigator.userAgent,/ipad|android 3.0|xoom|sch-i800|playbook|tablet|kindle/i.test(n.toLowerCase())?"5":/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(n.toLowerCase())?"4":/smart[-_\s]?tv|hbbtv|appletv|googletv|hdmi|netcast|viera|nettv|roku|\bdtv\b|sonydtv|inettvbrowser|\btv\b/i.test(n.toLowerCase())?"3":"1"),ua:navigator.userAgent,session_id:(0,l.An)("auctionId",e),tmax:p},f=(0,l.An)("userId",e);f&&(h.userIds=JSON.stringify(f));var g=t.ortb2||{};if(g.site&&(h.site_metadata=JSON.stringify(g.site)),g.user&&(h.user_metadata=JSON.stringify(g.user)),s){var m=function(e,t){var n="image";return e&&["all","iframe"].some((function(n){return es(e[n],t)}))?Xr:e&&e[n]&&!es(e[n],t)?void 0:Kr}(o,c);m&&(h.cs_method=m)}return t.uspConsent&&(h.us_privacy=t.uspConsent),t&&t.gdprConsent&&t.gdprConsent.gdprApplies&&(h.gdpr=t.gdprConsent.gdprApplies,h.gdpr_consent=t.gdprConsent.consentString),u.ifa&&(h.ifa=u.ifa),e.schain&&(h.schain=function(e){if((0,l.xb)(e))return"";var t="".concat(e.ver,",").concat(e.complete);return e.nodes.forEach((function(e){t+="!",t+="".concat(Qr(e.asi),","),t+="".concat(Qr(e.sid),","),t+="".concat(e.hp?encodeURIComponent(e.hp):"",","),t+="".concat(Qr(e.rid),","),t+="".concat(Qr(e.name),","),t+="".concat(Qr(e.domain))})),t}(e.schain)),t&&t.refererInfo&&(h.referrer=(0,d.Z)(t,"refererInfo.ref"),h.page_url=(0,d.Z)(t,"refererInfo.page")||window.location.href),h}(i,t),n.bids=function(e,t){var n=[];return e.length&&e.forEach((function(e){n.push(function(e,t){var n=e.params,i=function(e){return e.mediaTypes&&e.mediaTypes.banner}(e)?c.Mk:c.pX,r=function(e,t){var n=[];return(0,d.Z)(e,"mediaTypes.".concat(t,".sizes"))?n=e.mediaTypes[t].sizes:Array.isArray(e.sizes)&&e.sizes.length>0&&(n=e.sizes),n}(e,i);isNaN(n.floorPrice)&&(n.floorPrice=0);var s={mediaType:i,adUnitCode:(0,l.An)("adUnitCode",e),sizes:r,floorPrice:Math.max(Yr(e,i),n.floorPrice),bidId:(0,l.An)("bidId",e),loop:(0,l.An)("bidderRequestsCount",e),bidderRequestId:(0,l.An)("bidderRequestId",e),transactionId:(0,l.An)("transactionId",e)},o=(0,d.Z)(e,"mediaTypes.".concat(i,".pos"));o&&(s.pos=o);var a=(0,d.Z)(e,"ortb2Imp.ext.gpid");a&&(s.gpid=a);var u=n.placementId||(0,d.Z)(e,"mediaTypes.".concat(i,".name"));if(u&&(s.placementId=u),i===c.pX){var p,h=(0,d.Z)(e,"mediaTypes.video.playbackmethod");Array.isArray(h)&&(0,l.U)(h[0])?p=h[0]:(0,l.U)(h)&&(p=h),p&&(s.playbackMethod=p);var f=(0,d.Z)(e,"mediaTypes.video.placement");f&&(s.placement=f);var g=(0,d.Z)(e,"mediaTypes.video.minduration");g&&(s.minDuration=g);var m=(0,d.Z)(e,"mediaTypes.video.maxduration");m&&(s.maxDuration=m);var y=(0,d.Z)(e,"mediaTypes.video.skip");y&&(s.skip=y);var v=(0,d.Z)(e,"mediaTypes.video.linearity");v&&(s.linearity=v)}return s}(e))})),n}(e),{method:"POST",url:ts(r),data:n}},interpretResponse:function(e){var t=e.body,n=[];return t.bids&&t.bids.forEach((function(e){var t={requestId:e.requestId,cpm:e.cpm,currency:e.currency||Zr,width:e.width,height:e.height,ttl:e.ttl||360,creativeId:e.requestId,netRevenue:e.netRevenue||!0,nurl:e.nurl,mediaType:e.mediaType,meta:{mediaType:e.mediaType}};e.mediaType===c.pX?t.vastXml=e.vastXml:e.mediaType===c.Mk&&(t.ad=e.ad),e.adomain&&e.adomain.length&&(t.meta.advertiserDomains=e.adomain),n.push(t)})),n},getUserSyncs:function(e,t){var n,i=[],r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}(t);try{for(r.s();!(n=r.n()).done;){var s=n.value;if(e.iframeEnabled&&s.body.params.userSyncURL&&i.push({type:"iframe",url:s.body.params.userSyncURL}),e.pixelEnabled&&(0,l.kJ)(s.body.params.userSyncPixels)){var o=s.body.params.userSyncPixels.map((function(e){return{type:"image",url:e}}));i.push.apply(i,(0,M.Z)(o))}}}catch(e){r.e(e)}finally{r.f()}return i},onBidWon:function(e){null!=e&&((0,l.PN)("onBidWon:",e),e.hasOwnProperty("nurl")&&e.nurl.length>0&&(0,l.hq)(e.nurl))}};function Yr(e,t){if(!(0,l.LQ)(e.getFloor))return 0;var n=e.getFloor({currency:Zr,mediaType:t,size:"*"});return n.currency===Zr&&n.floor?n.floor:0}function Qr(e){return(0,l.xb)(e)?"":encodeURIComponent(e)}function es(e,t){if(!e)return!1;var n="include"===e.filter,i=(0,l.kJ)(e.bidders)?e.bidders:[t];return n&&(0,l.r3)(i,t)}function ts(e){return e?Gr+"hb-multi-mm-test":Gr+"hb-mm-multi"}function ns(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function is(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ns(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ns(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(0,o.dX)(Jr),(0,s.z)("minutemediaBidAdapter");var rs={code:"openx",supportedMediaTypes:[c.Mk,c.pX],isBidRequestValid:function(e){var t=e.params.delDomain||e.params.platform;return d.Z(e,"mediaTypes.banner")&&t?!!e.params.unit||d.Z(e,"mediaTypes.banner.sizes.length")>0:!(!e.params.unit||!t)},buildRequests:function(e,t){var n=e.filter((function(e){return as(e)})),i=e.filter((function(e){return function(e){return d.Z(e,"mediaTypes.banner")||!as(e)}(e)})),r=i.length?[os(i,t,c.Mk)]:[];return n.forEach((function(e){r.push(os([e],t,c.pX))})),r},interpretResponse:function(e,t){return e.body||(e.body={nbr:0}),ss.fromORTB({request:t.data,response:e.body})},getUserSyncs:function(e,t,n,i){if(e.iframeEnabled||e.pixelEnabled){var r=e.iframeEnabled?"iframe":"image",s=[],o="https://u.openx.net/w/1.0/pd";if(n&&(s.push("gdpr="+(n.gdprApplies?1:0)),s.push("gdpr_consent="+encodeURIComponent(n.consentString||""))),i&&s.push("us_privacy="+encodeURIComponent(i)),t.length>0&&t[0].body&&t[0].body.ext){var a=t[0].body.ext;a.delDomain?o="https://".concat(a.delDomain,"/w/1.0/pd"):a.platform&&s.push("ph="+a.platform)}else s.push("ph=2d1251ae-7f3a-47cf-bd2a-2f288854a0ba");return[{type:r,url:"".concat(o).concat(s.length>0?"?"+s.join("&"):"")}]}},transformBidParams:function(e,t){return l.uh({unit:"string",customFloor:"number"},e)}};(0,o.dX)(rs);var ss=ii({context:{netRevenue:!0,ttl:300},imp:function(e,t,n){var i=e(t,n);return(0,l.Ee)(i,{tagid:t.params.unit,ext:{divid:t.adUnitCode}}),t.params.customParams&&j.N(i,"ext.customParams",t.params.customParams),t.params.customFloor&&!i.bidfloor&&(i.bidfloor=t.params.customFloor),i},request:function(e,t,n,i){var r=e(t,n,i);(0,l.Ee)(r,{at:1,ext:{bc:"".concat("hb_pb_ortb","_").concat("2.0")}});var s=i.bidRequests[0];return s.params.coppa&&j.N(r,"regs.coppa",1),s.params.doNotTrack&&j.N(r,"device.dnt",1),s.params.platform&&j.N(r,"ext.platform",s.params.platform),s.params.delDomain&&j.N(r,"ext.delDomain",s.params.delDomain),s.params.response_template_name&&j.N(r,"ext.response_template_name",s.params.response_template_name),s.params.test&&(r.test=1),r},bidResponse:function(e,t,n){var i=e(t,n);t.ext&&(i.meta.networkId=t.ext.dsp_id,i.meta.advertiserId=t.ext.buyer_id,i.meta.brandId=t.ext.brand_id);var r=n.ortbResponse;return r.ext&&r.ext.paf&&(i.meta.paf=Object.assign({},r.ext.paf),i.meta.paf.content_id=d.Z(t,"ext.paf.content_id")),i},response:function(e,t,n,i){var r=i.ortbRequest;r.ext&&(r.ext.delDomain&&j.N(n,"ext.delDomain",r.ext.delDomain),r.ext.platform&&j.N(n,"ext.platform",r.ext.platform));var s=e(t,n,i),o=d.Z(n,"ext.fledge_auction_configs");return o?(o=Object.entries(o).map((function(e){var t=(0,L.Z)(e,2),n=t[0],i=t[1];return{bidId:n,config:Object.assign({auctionSignals:{}},i)}})),{bids:s.bids,fledgeAuctionConfigs:o}):s.bids},overrides:{imp:{bidfloor:function(e,t,n,i){var r={};e(r,n,is(is({},i),{},{currency:"USD"})),"USD"===r.bidfloorcur&&Object.assign(t,r)},video:function(e,t,n,i){var s,o=n.mediaTypes[c.pX];o&&(o=Object.assign({},o,n.params.video),n=is(is({},n),{},{mediaTypes:(0,r.Z)({},c.pX,o)})),e(t,n,i),t.video&&"outstream"===(null===(s=o)||void 0===s?void 0:s.context)&&(t.video.placement=t.video.placement||4)}}}});function os(e,t,n){return{method:"POST",url:a.vc.getConfig("openxOrtbUrl")||"https://rtb.openx.net/openrtbb/prebidjs",data:ss.toORTB({bidRequests:e,bidderRequest:t,context:{mediaType:n}})}}function as(e){return d.Z(e,"mediaTypes.video")}(0,s.z)("openxBidAdapter");var ds="https://elb.the-ozone-project.com",ls="/openrtb2/auction",cs="/static/load-cookie.html",us="https://test.ozpr.net",ps="2.8.0",hs={gvlid:524,aliases:[{code:"lmc",gvlid:524}],version:ps,code:"ozone",supportedMediaTypes:[c.pX,c.Mk],cookieSyncBag:{publisherId:null,siteId:null,userIdObject:{}},propertyBag:{pageId:null,buildRequestsStart:0,buildRequestsEnd:0,endpointOverride:null},whitelabel_defaults:{logId:"OZONE",bidder:"ozone",keyPrefix:"oz",auctionUrl:ds+ls,cookieSyncUrl:ds+cs,rendererUrl:"https://prebid.the-ozone-project.com/ozone-renderer.js"},loadWhitelabelData:function(e){if(!this.propertyBag.whitelabel){this.propertyBag.whitelabel=JSON.parse(JSON.stringify(this.whitelabel_defaults));var t=e.bidder||"ozone";this.propertyBag.whitelabel.logId=t.toUpperCase(),this.propertyBag.whitelabel.bidder=t;var n=a.vc.getConfig(t)||{};(0,l.PN)("got bidderConfig: ",JSON.parse(JSON.stringify(n))),n.kvpPrefix&&(this.propertyBag.whitelabel.keyPrefix=n.kvpPrefix);var i=this.getGetParametersAsObject();n.endpointOverride&&(n.endpointOverride.origin&&(this.propertyBag.endpointOverride=n.endpointOverride.origin,this.propertyBag.whitelabel.auctionUrl=n.endpointOverride.origin+ls,this.propertyBag.whitelabel.cookieSyncUrl=n.endpointOverride.origin+cs),i.hasOwnProperty("renderer")?i.renderer.match("%3A%2F%2F")?this.propertyBag.whitelabel.rendererUrl=decodeURIComponent(i.renderer):this.propertyBag.whitelabel.rendererUrl=i.renderer:n.endpointOverride.rendererUrl&&(this.propertyBag.whitelabel.rendererUrl=n.endpointOverride.rendererUrl),n.endpointOverride.cookieSyncUrl&&(this.propertyBag.whitelabel.cookieSyncUrl=n.endpointOverride.cookieSyncUrl),n.endpointOverride.auctionUrl&&(this.propertyBag.endpointOverride=n.endpointOverride.auctionUrl,this.propertyBag.whitelabel.auctionUrl=n.endpointOverride.auctionUrl));try{i.hasOwnProperty("auction")&&"dev"===i.auction&&((0,l.PN)("GET: auction=dev"),this.propertyBag.whitelabel.auctionUrl=us+ls),i.hasOwnProperty("cookiesync")&&"dev"===i.cookiesync&&((0,l.PN)("GET: cookiesync=dev"),this.propertyBag.whitelabel.cookieSyncUrl=us+cs)}catch(e){}(0,l.PN)("set propertyBag.whitelabel to",this.propertyBag.whitelabel)}},getAuctionUrl:function(){return this.propertyBag.whitelabel.auctionUrl},getCookieSyncUrl:function(){return this.propertyBag.whitelabel.cookieSyncUrl},getRendererUrl:function(){return this.propertyBag.whitelabel.rendererUrl},isBidRequestValid:function(e){this.loadWhitelabelData(e),(0,l.PN)("isBidRequestValid : ",a.vc.getConfig(),e);var t=e.adUnitCode,n="VALIDATION FAILED : missing {param} : siteId, placementId and publisherId are REQUIRED";if(!e.params.hasOwnProperty("placementId"))return(0,l.H)(n.replace("{param}","placementId"),t),!1;if(!this.isValidPlacementId(e.params.placementId))return(0,l.H)("VALIDATION FAILED : placementId must be exactly 10 numeric characters",t),!1;if(!e.params.hasOwnProperty("publisherId"))return(0,l.H)(n.replace("{param}","publisherId"),t),!1;if(!e.params.publisherId.toString().match(/^[a-zA-Z0-9\-]{12}$/))return(0,l.H)("VALIDATION FAILED : publisherId must be exactly 12 alphanumeric characters including hyphens",t),!1;if(!e.params.hasOwnProperty("siteId"))return(0,l.H)(n.replace("{param}","siteId"),t),!1;if(!e.params.siteId.toString().match(/^[0-9]{10}$/))return(0,l.H)("VALIDATION FAILED : siteId must be exactly 10 numeric characters",t),!1;if(e.params.hasOwnProperty("customParams"))return(0,l.H)("VALIDATION FAILED : customParams should be renamed to customData",t),!1;if(e.params.hasOwnProperty("customData")){if(!Array.isArray(e.params.customData))return(0,l.H)("VALIDATION FAILED : customData is not an Array",t),!1;if(e.params.customData.length<1)return(0,l.H)("VALIDATION FAILED : customData is an array but does not contain any elements",t),!1;if(!e.params.customData[0].hasOwnProperty("targeting"))return(0,l.H)('VALIDATION FAILED : customData[0] does not contain "targeting"',t),!1;if("object"!=(0,U.Z)(e.params.customData[0].targeting))return(0,l.H)("VALIDATION FAILED : customData[0] targeting is not an object",t),!1}if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(c.pX)){if(!e.mediaTypes[c.pX].hasOwnProperty("context"))return(0,l.H)("No video context key/value in bid. Rejecting bid: ",e),!1;if("instream"!==e.mediaTypes[c.pX].context&&"outstream"!==e.mediaTypes[c.pX].context)return(0,l.H)("video.context is invalid. Only instream/outstream video is supported. Rejecting bid: ",e),!1}return!0},isValidPlacementId:function(e){return e.toString().match(/^[0-9]{10}$/)},buildRequests:function(e,t){var n=this;this.loadWhitelabelData(e[0]),this.propertyBag.buildRequestsStart=(new Date).getTime();var i=this.propertyBag.whitelabel.bidder,r=this.propertyBag.whitelabel.keyPrefix;if((0,l.PN)("buildRequests time: ".concat(this.propertyBag.buildRequestsStart," v ").concat(ps," validBidRequests"),JSON.parse(JSON.stringify(e)),"bidderRequest",JSON.parse(JSON.stringify(t))),this.blockTheRequest())return[];var s={publisherId:"",siteId:""};e.length>0&&(this.cookieSyncBag.userIdObject=Object.assign(this.cookieSyncBag.userIdObject,this.findAllUserIds(e[0])),this.cookieSyncBag.siteId=(0,d.Z)(e[0],"params.siteId"),this.cookieSyncBag.publisherId=(0,d.Z)(e[0],"params.publisherId"),s=e[0].params),(0,l.PN)("cookie sync bag",this.cookieSyncBag);var o=this.getWhitelabelConfigItem("ozone.singleRequest");o=!1!==o,(0,l.PN)("config ".concat(i,".singleRequest : "),o);var u={};(0,l.PN)("going to get ortb2 from bidder request...");var p=(0,d.Z)(t,"ortb2",null);(0,l.PN)("got fpd: ",p),p&&(0,d.Z)(p,"user")&&((0,l.PN)("added FPD user object"),u.user=p.user);var h=this.getGetParametersAsObject(),f=r+"testmode",g=h[f]||null;u.device={w:window.innerWidth,h:window.innerHeight};var m=this.getPlacementIdOverrideFromGetParam(),y=null,v=e.map((function(e){var t={},r=m||n.getPlacementId(e);t.id=e.bidId,t.tagid=r;var s=(0,l.en)((0,yn.nH)().page);t.secure="https"===s.protocol?1:0;var o,a,u=[];if(e.hasOwnProperty("mediaTypes")){if(e.mediaTypes.hasOwnProperty(c.Mk)&&(u=e.mediaTypes[c.Mk].sizes,(0,l.PN)("setting banner size from the mediaTypes.banner element for bidId "+t.id+": ",u)),e.mediaTypes.hasOwnProperty(c.pX)){if((0,l.PN)("openrtb 2.5 compliant video"),"object"==(0,U.Z)(e.mediaTypes[c.pX])){var h=(0,d.Z)(e,"params.video",{});t.video=n.unpackVideoConfigIntoIABformat(e.mediaTypes[c.pX],h),t.video=n.addVideoDefaults(t.video,e.mediaTypes[c.pX],h)}var v=(o=t.video,(a=_s(o))?a[0]&&"object"===(0,U.Z)(a[0])&&((0,l.PN)("getWidthAndHeightFromVideoObject found nested array inside playerSize.",a[0]),"number"!=typeof(a=a[0])[0]&&"string"!=typeof a[0])?((0,l.PN)("getWidthAndHeightFromVideoObject found non-number/string type inside the INNER array in playerSize. This is totally wrong - cannot continue.",a[0]),null):2!==a.length?((0,l.PN)("getWidthAndHeightFromVideoObject found playerSize with length of "+a.length+". This is totally wrong - cannot continue."),null):{w:a[0],h:a[1]}:null);(0,l.PN)("setting video object from the mediaTypes.video element: "+t.id+":",t.video,"wh=",v),v&&"object"===(0,U.Z)(v)?(t.video.w=v.w,t.video.h=v.h,function(e){var t=_s(e);return t?t.length<1?null:t[0]&&"object"===(0,U.Z)(t[0]):null}(t.video)?((0,l.PN)("setting obj.video.format to be an array of objects"),t.video.ext.format=[v]):((0,l.PN)("setting obj.video.format to be an object"),t.video.ext.format=v)):(0,l.yN)("cannot set w, h & format values for video; the config is not right")}e.mediaTypes.hasOwnProperty(c.B5)&&(t.native=e.mediaTypes[c.B5],(0,l.PN)("setting native object from the mediaTypes.native element: "+t.id+":",t.native)),e.hasOwnProperty("getFloor")?((0,l.PN)("This bidRequest object has property: getFloor"),t.floor=n.getFloorObjectForAuction(e),(0,l.PN)("obj.floor is : ",t.floor)):(0,l.PN)("This bidRequest object DOES NOT have property: getFloor")}else e.hasOwnProperty("sizes")?((0,l.PN)("no mediaTypes detected - will use the sizes array in the config root"),u=e.sizes):(0,l.PN)("no mediaTypes detected, no sizes array in the config root either. Cannot set sizes for banner type");if(u.length>0&&(t.banner={topframe:1,w:u[0][0]||0,h:u[0][1]||0,format:u.map((function(e){return{w:e[0],h:e[1]}}))}),t.placementId=r,(0,j.N)(t,"ext.prebid",{storedrequest:{id:r}}),t.ext[i]={},t.ext[i].adUnitCode=e.adUnitCode,t.ext[i].transactionId=e.transactionId,e.params.hasOwnProperty("customData")&&(t.ext[i].customData=e.params.customData),(0,l.PN)("obj.ext.".concat(i," is "),t.ext[i]),null!=g)if((0,l.PN)("setting isTestMode to ",g),t.ext[i].hasOwnProperty("customData"))for(var b=0;b<t.ext[i].customData.length;b++)t.ext[i].customData[b].targeting[f]=g;else t.ext[i].customData=[{settings:{},targeting:{}}],t.ext[i].customData[0].targeting[f]=g;return p&&(0,d.Z)(p,"site")&&((0,l.PN)("adding fpd.site"),(0,d.Z)(t,"ext."+i+".customData.0.targeting",!1)?t.ext[i].customData[0].targeting=Object.assign(t.ext[i].customData[0].targeting,p.site):(0,j.N)(t,"ext."+i+".customData.0.targeting",p.site)),!y&&(0,d.Z)(e,"schain")&&(y=e.schain),t})),b={};if(b[i]={},b[i][r+"_pb_v"]=ps,b[i][r+"_rw"]=m?1:0,e.length>0){var _=this.cookieSyncBag.userIdObject;_.hasOwnProperty("pubcid")&&(b[i].pubcid=_.pubcid)}b[i].pv=this.getPageId();var w=this.getWhitelabelConfigItem("ozone.oz_omp_floor");(0,l.PN)("".concat(r,"_omp_floor dollar value = "),w),"number"==typeof w?b[i][r+"_omp_floor"]=w:void 0!==w&&(0,l.H)("".concat(r,"_omp_floor is invalid - IF SET then this must be a number, representing dollar value eg. ").concat(r,"_omp_floor: 1.55. You have it set as a ")+(0,U.Z)(w));var T=this.getWhitelabelConfigItem("ozone.oz_whitelist_adserver_keys"),I=(0,l.kJ)(T)&&T.length>0;b[i][r+"_kvp_rw"]=I?1:0,"ozone"!==i&&((0,l.PN)("setting aliases object"),b.prebid={aliases:{ozone:i}}),h.hasOwnProperty("ozf")&&(b[i].ozf="true"===h.ozf||"1"===h.ozf?1:0),h.hasOwnProperty("ozpf")&&(b[i].ozpf="true"===h.ozpf||"1"===h.ozpf?1:0),h.hasOwnProperty("ozrp")&&h.ozrp.match(/^[0-3]$/)&&(b[i].ozrp=parseInt(h.ozrp)),h.hasOwnProperty("ozip")&&h.ozip.match(/^\d+$/)&&(b[i].ozip=parseInt(h.ozip)),null!=this.propertyBag.endpointOverride&&(b[i].origin=this.propertyBag.endpointOverride);var S=(0,d.Z)(e,"0.userIdAsEids",[]);if(u.site={publisher:{id:s.publisherId},page:(0,yn.nH)().page,id:s.siteId},u.test=a.vc.getConfig("debug")?1:0,t&&t.gdprConsent){(0,l.PN)("ADDING GDPR info");var k=(0,d.Z)(t,"gdprConsent.apiVersion",1);u.regs={ext:{gdpr:t.gdprConsent.gdprApplies?1:0,apiVersion:k}},(0,d.Z)(u,"regs.ext.gdpr")?(0,j.N)(u,"user.ext.consent",t.gdprConsent.consentString):(0,l.PN)("**** Strange CMP info: bidderRequest.gdprConsent exists BUT bidderRequest.gdprConsent.gdprApplies is false. See bidderRequest logged above. ****")}else(0,l.PN)("WILL NOT ADD GDPR info; no bidderRequest.gdprConsent object");if(t&&t.uspConsent?((0,l.PN)("ADDING USP consent info"),(0,j.N)(u,"regs.ext.us_privacy",t.uspConsent)):(0,l.PN)("WILL NOT ADD USP consent info; no bidderRequest.uspConsent."),y&&((0,l.PN)("schain found"),(0,j.N)(u,"source.ext.schain",y)),!0===a.vc.getConfig("coppa")&&(0,j.N)(u,"regs.coppa",1),o){(0,l.PN)("buildRequests starting to generate response for a single request"),u.id=t.auctionId,u.auctionId=t.auctionId,u.imp=v,u.ext=b,(0,j.N)(u,"source.tid",t.auctionId),(0,j.N)(u,"user.ext.eids",S);var C={method:"POST",url:this.getAuctionUrl(),data:JSON.stringify(u),bidderRequest:t};return(0,l.PN)("buildRequests request data for single = ",JSON.parse(JSON.stringify(u))),this.propertyBag.buildRequestsEnd=(new Date).getTime(),(0,l.PN)("buildRequests going to return for single at time ".concat(this.propertyBag.buildRequestsEnd," (took ").concat(this.propertyBag.buildRequestsEnd-this.propertyBag.buildRequestsStart,"ms): "),C),C}var E=v.map((function(e){(0,l.PN)("buildRequests starting to generate non-single response, working on imp : ",e);var r=Object.assign({},u);return e.ext[i].pageAuctionId=t.auctionId,r.id=e.ext[i].transactionId,r.auctionId=e.ext[i].transactionId,r.imp=[e],r.ext=b,(0,j.N)(r,"source.tid",e.ext[i].transactionId),(0,j.N)(r,"user.ext.eids",S),(0,l.PN)("buildRequests RequestSingle (for non-single) = ",r),{method:"POST",url:n.getAuctionUrl(),data:JSON.stringify(r),bidderRequest:t}}));return this.propertyBag.buildRequestsEnd=(new Date).getTime(),(0,l.PN)("buildRequests going to return for non-single at time ".concat(this.propertyBag.buildRequestsEnd," (took ").concat(this.propertyBag.buildRequestsEnd-this.propertyBag.buildRequestsStart,"ms): "),E),E},getFloorObjectForAuction:function(e){var t={banner:(0,d.Z)(e,"mediaTypes.banner.sizes",null),video:(0,d.Z)(e,"mediaTypes.video.playerSize",null),native:(0,d.Z)(e,"mediaTypes.native.image.sizes",null)};(0,l.PN)("getFloorObjectForAuction mediaTypesSizes : ",t);var n={};return t.banner&&(n.banner=e.getFloor({mediaType:"banner",currency:"USD",size:t.banner})),t.video&&(n.video=e.getFloor({mediaType:"video",currency:"USD",size:t.video})),t.native&&(n.native=e.getFloor({mediaType:"native",currency:"USD",size:t.native})),(0,l.PN)("getFloorObjectForAuction returning : ",JSON.parse(JSON.stringify(n))),n},interpretResponse:function(e,t){var n=this;t&&t.bidderRequest&&t.bidderRequest.bids&&this.loadWhitelabelData(t.bidderRequest.bids[0]);var i=(new Date).getTime(),r=this.propertyBag.whitelabel.bidder,s=this.propertyBag.whitelabel.keyPrefix;if((0,l.PN)("interpretResponse time: ".concat(i," . Time between buildRequests done and interpretResponse start was ").concat(i-this.propertyBag.buildRequestsEnd,"ms")),(0,l.PN)("serverResponse, request",JSON.parse(JSON.stringify(e)),JSON.parse(JSON.stringify(t))),!(e=e.body||{}).hasOwnProperty("seatbid"))return[];if("object"!==(0,U.Z)(e.seatbid))return[];var o=[],a=this.getWhitelabelConfigItem("ozone.enhancedAdserverTargeting");(0,l.PN)("enhancedAdserverTargeting",a),void 0===a&&(a=!0),(0,l.PN)("enhancedAdserverTargeting",a),e.seatbid=function(e){(0,l.PN)("injectAdIdsIntoAllBidResponses",e);for(var t=0;t<e.length;t++)for(var n=e[t],i=0;i<n.bid.length;i++)n.bid[i].adId="".concat(n.bid[i].impid,"-").concat(t,"-").concat(hs.propertyBag.whitelabel.keyPrefix,"-").concat(i);return e}(e.seatbid),e.seatbid=this.removeSingleBidderMultipleBids(e.seatbid);for(var u=this.getWhitelabelConfigItem("ozone.oz_omp_floor"),p="number"==typeof u,h=this.getWhitelabelConfigItem("ozone.oz_whitelist_adserver_keys"),f=(0,l.kJ)(h)&&h.length>0,g=0;g<e.seatbid.length;g++)for(var m=e.seatbid[g],y=function(i){var y=n.getBidRequestForBidId(m.bid[i].impid,t.bidderRequest.bids);(0,l.PN)("seatbid:".concat(g,", bid:").concat(i," Going to set default w h for seatbid/bidRequest"),m.bid[i],y);var v=gs(y),b=v.defaultWidth,_=v.defaultHeight,w=bs(m.bid[i],b,_);w.meta={advertiserDomains:w.adomain||[]};var T=null,I=!1,S=(0,d.Z)(w,"ext.prebid.type");(0,l.PN)("this bid type is : ".concat(S),i);var k={};if(S===c.pX)if(I=!0,n.setBidMediaTypeIfNotExist(w,c.pX),"outstream"===(T=n.getVideoContextForBidId(w.bidId,t.bidderRequest.bids)))(0,l.PN)("going to set thisBid.mediaType = VIDEO & attach a renderer to OUTSTREAM video : ",i),w.renderer=ws(w.bidId);else if((0,l.PN)("bid is not an outstream video, will set thisBid.mediaType = VIDEO and thisBid.vastUrl and not attach a renderer: ",i),w.vastUrl="https://".concat((0,d.Z)(w,"ext.prebid.targeting.hb_cache_host","missing_host")).concat((0,d.Z)(w,"ext.prebid.targeting.hb_cache_path","missing_path"),"?id=").concat((0,d.Z)(w,"ext.prebid.targeting.hb_cache_id","missing_id")),k.hb_cache_host=(0,d.Z)(w,"ext.prebid.targeting.hb_cache_host","no-host"),k.hb_cache_path=(0,d.Z)(w,"ext.prebid.targeting.hb_cache_path","no-path"),w.hasOwnProperty("videoCacheKey"))(0,l.PN)("videoCacheKey already exists on the bid object, will not add it");else{var C=(0,d.Z)(w,"ext.prebid.targeting.hb_uuid","no_hb_uuid");(0,l.PN)("Adding videoCacheKey: ".concat(C)),w.videoCacheKey=C}else n.setBidMediaTypeIfNotExist(w,c.Mk);if(a){var E=ys(w.bidId,e.seatbid);(0,l.PN)("Going to iterate allBidsForThisBidId",E),Object.keys(E).forEach((function(e,t,n){(0,l.PN)("adding adserverTargeting for ".concat(e," for bidId ").concat(w.bidId)),k[s+"_"+e]=e,k[s+"_"+e+"_crid"]=String(E[e].crid),k[s+"_"+e+"_adv"]=String(E[e].adomain),k[s+"_"+e+"_adId"]=String(E[e].adId),k[s+"_"+e+"_pb_r"]=vs(E[e].price,E[e].ext.prebid.type),E[e].hasOwnProperty("dealid")&&(k[s+"_"+e+"_dealid"]=String(E[e].dealid)),p&&(k[s+"_"+e+"_omp"]=E[e].price>=u?"1":"0"),I&&(k[s+"_"+e+"_vid"]=T);var i=(0,d.Z)(E[e],"ext.bidder.".concat(r,".floor"),null);null!=i&&(k[s+"_"+e+"_flr"]=i);var o=(0,d.Z)(E[e],"ext.bidder.".concat(r,".ruleId"),null);null!=o&&(k[s+"_"+e+"_rid"]=o),e.match(/^ozappnexus/)&&(k[s+"_"+e+"_sid"]=String(E[e].cid))}))}else f?(0,l.yN)("You have set a whitelist of adserver keys but this will be ignored because ".concat(r,".enhancedAdserverTargeting is set to false. No per-bid keys will be sent to adserver.")):(0,l.PN)("".concat(r,".enhancedAdserverTargeting is set to false, so no per-bid keys will be sent to adserver."));var A=ms(w.bidId,e.seatbid),P=A.seat,x=A.bid;k[s+"_auc_id"]=String(t.bidderRequest.auctionId),k[s+"_winner"]=String(P),k[s+"_bid"]="true",k[s+"_cache_id"]=(0,d.Z)(w,"ext.prebid.targeting.hb_cache_id","no-id"),k[s+"_uuid"]=(0,d.Z)(w,"ext.prebid.targeting.hb_uuid","no-id"),a&&(k[s+"_imp_id"]=String(x.impid),k[s+"_pb_v"]=ps,k[s+"_pb"]=x.price,k[s+"_pb_r"]=vs(x.price,S),k[s+"_adId"]=String(x.adId),k[s+"_size"]="".concat(x.width,"x").concat(x.height)),f&&((0,l.PN)("Going to filter out adserver targeting keys not in the whitelist: ",h),Object.keys(k).forEach((function(e){-1===h.indexOf(e)&&delete k[e]}))),w.adserverTargeting=k,o.push(w)},v=0;v<m.bid.length;v++)y(v);var b=(new Date).getTime();return(0,l.PN)("interpretResponse going to return at time ".concat(b," (took ").concat(b-i,"ms) Time from buildRequests Start -> interpretRequests End = ").concat(b-this.propertyBag.buildRequestsStart,"ms")),(0,l.PN)("interpretResponse arrAllBids (serialised): ",JSON.parse(JSON.stringify(o))),o},setBidMediaTypeIfNotExist:function(e,t){e.hasOwnProperty("mediaType")?(0,l.PN)("found value for thisBid.mediaType: ".concat(e.mediaType)):((0,l.PN)("setting thisBid.mediaType = ".concat(t)),e.mediaType=t)},getWhitelabelConfigItem:function(e){if("ozone"===this.propertyBag.whitelabel.bidder)return a.vc.getConfig(e);var t=e.replace("ozone",this.propertyBag.whitelabel.bidder);return t=t.replace("oz_",this.propertyBag.whitelabel.keyPrefix+"_"),a.vc.getConfig(t)},removeSingleBidderMultipleBids:function(e){for(var t=[],n=0;n<e.length;n++){for(var i=e[n],r={seat:i.seat,bid:[]},s=[],o=0;o<i.bid.length;o++){var a=i.bid[o];if(!(0,l.r3)(s,a.impid)){s.push(a.impid);for(var d=o+1;d<i.bid.length;d++)i.bid[d].impid===a.impid&&i.bid[d].price>a.price&&(a=i.bid[d]);r.bid.push(a)}}t.push(r)}return t},getUserSyncs:function(e,t,n,i){if((0,l.PN)("getUserSyncs optionsType",e,"serverResponse",t,"gdprConsent",n,"usPrivacy",i,"cookieSyncBag",this.cookieSyncBag),!t||0===t.length)return[];if(e.iframeEnabled){var r=[];for(var s in a.vc.getConfig("debug")&&r.push("pbjs_debug=true"),r.push("gdpr="+((0,d.Z)(n,"gdprApplies",!1)?"1":"0")),r.push("gdpr_consent="+(0,d.Z)(n,"consentString","")),r.push("usp_consent="+(i||"")),this.cookieSyncBag.userIdObject)r.push(s+"="+this.cookieSyncBag.userIdObject[s]);r.push("publisherId="+this.cookieSyncBag.publisherId),r.push("siteId="+this.cookieSyncBag.siteId),r.push("cb="+Date.now()),r.push("bidder="+this.propertyBag.whitelabel.bidder);var o=r.join("&");return o.length>0&&(o="?"+o),(0,l.PN)("getUserSyncs going to return cookie sync url : "+this.getCookieSyncUrl()+o),[{type:"iframe",url:this.getCookieSyncUrl()+o}]}},getBidRequestForBidId:function(e,t){for(var n=0;n<t.length;n++)if(t[n].bidId===e)return t[n];return null},getVideoContextForBidId:function(e,t){var n=this.getBidRequestForBidId(e,t);return null!=n?(0,d.Z)(n,"mediaTypes.video.context","unknown"):null},findAllUserIds:function(e){var t={},n=["pubcid","tdid","idl_env","criteoId","lotamePanoramaId","fabrickId"];if(e.hasOwnProperty("userId")){for(var i in n){var r=n[i];e.userId.hasOwnProperty(r)&&("string"==typeof e.userId[r]?t[r]=e.userId[r]:"object"==(0,U.Z)(e.userId[r])?((0,l.H)("WARNING: findAllUserIds had to use first key in user object to get value for bid.userId key: ".concat(r,". Prebid adapter should be updated.")),t[r]=e.userId[r][Object.keys(e.userId[r])[0]]):(0,l.H)("failed to get string key value for userId : ".concat(r)))}var s=(0,d.Z)(e.userId,"lipb.lipbid");s&&(t.lipb={lipbid:s});var o=(0,d.Z)(e.userId,"id5id.uid");o&&(t.id5id=o);var a=(0,d.Z)(e.userId,"parrableId.eid");a&&(t.parrableId=a);var c=(0,d.Z)(e.userId,"sharedid.id");c&&(t.sharedid=c)}if(!t.hasOwnProperty("pubcid")){var u=(0,d.Z)(e,"crumbs.pubcid");u&&(t.pubcid=u)}return t},getPlacementId:function(e){return e.params.placementId.toString()},getPlacementIdOverrideFromGetParam:function(){var e=this.propertyBag.whitelabel.keyPrefix,t=this.getGetParametersAsObject();if(t.hasOwnProperty(e+"storedrequest")){if(this.isValidPlacementId(t[e+"storedrequest"]))return(0,l.PN)("using GET ".concat(e,"storedrequest ")+t[e+"storedrequest"]+" to replace placementId"),t[e+"storedrequest"];(0,l.H)("GET ".concat(e,"storedrequest FAILED VALIDATION - will not use it"))}return null},getGetParametersAsObject:function(){var e=(0,l.en)((0,yn.nH)().page);return(0,l.PN)("getGetParametersAsObject found:",e.search),e.search},blockTheRequest:function(){var e=this.getWhitelabelConfigItem("ozone.oz_request");return"boolean"==typeof e&&!e&&((0,l.yN)("Will not allow auction : ".concat(this.propertyBag.whitelabel.keyPrefix,"_request is set to false")),!0)},getPageId:function(){if(null==this.propertyBag.pageId){for(var e="",t=20;t>0;t--)e+="0123456789abcdefghijklmnopqrstuvwxyz"[Math.floor(36*Math.random())];this.propertyBag.pageId=(new Date).getTime()+"_"+e}return this.propertyBag.pageId},unpackVideoConfigIntoIABformat:function(e,t){var n={ext:{}};return n=this._unpackVideoConfigIntoIABformat(n,e),this._unpackVideoConfigIntoIABformat(n,t)},_unpackVideoConfigIntoIABformat:function(e,t){var n=["mimes","minduration","maxduration","protocols","w","h","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype"],i=function(i){s=!1,n.forEach((function(n){n===i&&(e[i]=t[i],s=!0)})),s||(e.ext[i]=t[i])};for(var r in t){var s;i(r)}return t.hasOwnProperty("ext")&&"object"===(0,U.Z)(t.ext)&&(t.hasOwnProperty("ext")?e.ext=(0,l.Ee)(e.ext,t.ext):e.ext=t.ext),e},addVideoDefaults:function(e,t,n){return e=this._addVideoDefaults(e,t,!1),this._addVideoDefaults(e,n,!0)},_addVideoDefaults:function(e,t,n){var i=(0,d.Z)(t,"context");"outstream"===i?e.placement=3:"instream"===i&&(e.placement=1);var r=(0,d.Z)(t,"skippable",null);return null==r?n&&!e.hasOwnProperty("skip")&&(e.skip=r?1:0):e.skip=r?1:0,e},getLoggableBidObject:function(e){var t={ad:e.ad,adId:e.adId,adUnitCode:e.adUnitCode,adm:e.adm,adomain:e.adomain,adserverTargeting:e.adserverTargeting,auctionId:e.auctionId,bidId:e.bidId,bidder:e.bidder,bidderCode:e.bidderCode,cpm:e.cpm,creativeId:e.creativeId,crid:e.crid,currency:e.currency,h:e.h,w:e.w,impid:e.impid,mediaType:e.mediaType,params:e.params,price:e.price,transactionId:e.transactionId,ttl:e.ttl};return e.hasOwnProperty("floorData")&&(t.floorData=e.floorData),t}};function fs(e){return Array.isArray(e)&&Array.isArray(e[0])?e[0]:e}function gs(e){if(!e)return(0,l.PN)("defaultSize received empty bid obj! going to return fixed default size"),{defaultHeight:250,defaultWidth:300};var t=e.sizes,n={};return n.defaultWidth=fs(t)[0],n.defaultHeight=fs(t)[1],n}function ms(e,t){for(var n=null,i=null,r=0;r<t.length;r++)for(var s=t[r].bid,o=t[r].seat,a=0;a<s.length;a++)if(s[a].impid===e&&(null==n||n.price<s[a].price)){n=s[a],i=o;break}return{seat:i,bid:n}}function ys(e,t){for(var n={},i=0;i<t.length;i++)for(var r=t[i].bid,s=t[i].seat,o=0;o<r.length;o++)r[o].impid===e&&(n.hasOwnProperty(s)?n[s].price<r[o].price&&(n[s]=r[o]):n[s]=r[o]);return n}function vs(e,t){var n=a.vc.getConfig("mediaTypePriceGranularity.".concat(t)),i=a.vc.getConfig("customPriceBucket"),r=a.vc.getConfig("priceGranularity"),s=function(e,t,n,i){return"object"===(0,U.Z)(t)?t:"custom"===n?i:""}(0,n,r,i),o=function(e,t,n){return"string"==typeof t?t:"object"===(0,U.Z)(t)?"custom":"string"==typeof n?n:"auto"}(0,n,r);(0,l.PN)("getRoundedBid. price:",e,"mediaType:",t,"configkey:",o,"configObject:",s,"mediaTypeGranularity:",n,"strBuckets:",r);var d=(0,Lr.D)(e,s,a.vc.getConfig("currency.granularityMultiplier"));(0,l.PN)("priceStringsObj",d);var c={medium:"med",custom:"custom",high:"high",low:"low",dense:"dense"};if(c.hasOwnProperty(o)){var u=c[o];return(0,l.PN)("getRoundedBid: looking for priceStringsKey:",u),d[u]}return d.auto}function bs(e,t,n){return e.cpm=e.price,e.bidId=e.impid,e.requestId=e.impid,e.width=e.w||t,e.height=e.h||n,e.ad=e.adm,e.netRevenue=!0,e.creativeId=e.crid,e.currency="USD",e.ttl=300,e}function _s(e){(0,l.PN)("getPlayerSizeFromObject received object",e);var t=(0,d.Z)(e,"playerSize");return t||(t=(0,d.Z)(e,"ext.playerSize")),t?"object"!==(0,U.Z)(t)?((0,l.H)("getPlayerSizeFromObject FAILED: playerSize is not an object/array",e),null):t:((0,l.H)("getPlayerSizeFromObject FAILED: no playerSize in video object or ext",e),null)}function ws(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=window.ozoneVideo;(0,l.PN)("newRenderer going to set loaded to ".concat(n?"true":"false"));var i=B.Th.install({url:hs.getRendererUrl(),config:t,loaded:n,adUnitCode:e});try{i.setRender(Ts)}catch(e){(0,l.H)("Prebid Error when calling setRender on renderer",i,e)}return(0,l.PN)("returning renderer object"),i}function Ts(e){(0,l.PN)("outstreamRender called. Going to push the call to window.ozoneVideo.outstreamRender(bid) bid = (first static, then reference)"),(0,l.PN)(JSON.parse(JSON.stringify(hs.getLoggableBidObject(e)))),e.renderer.push((function(){(0,l.PN)("Going to execute window.ozoneVideo.outstreamRender"),window.ozoneVideo.outstreamRender(e)}))}(0,o.dX)(hs),(0,l.PN)("*BidAdapter ".concat(ps," was loaded")),(0,s.z)("ozoneBidAdapter");var Is="permutive",Ss=(0,l.qp)("[PermutiveRTD]"),ks="p_standard",Cs="permutive",Es="p_standard_aud",As=(0,se.df)({moduleType:vn.XG,moduleName:Is});function Ps(e){return(0,l.PO)(e)?{params:e}:{}}var xs={};function Ds(e){var t=function(){try{return Ps(window.permutive.addons.prebid.getPermutiveRtdConfig())}catch(e){return null}}()||xs;return(0,l.Ee)({waitForIt:!1,params:{maxSegs:500,acBidders:[],overwrites:{}}},t,e)}function Os(e,t,n){var i=e&&e.adUnits||(0,s.R)().adUnits,r={deepSetValue:j.N,deepAccess:d.Z,isFn:l.LQ,mergeDeep:l.Ee},o={appnexusAst:"appnexus"};i&&i.forEach((function(e){e.bids.forEach((function(e){var i=e.bidder;void 0!==o[i]&&(i=o[i]);var s=function(e,t){var n=(0,d.Z)(e,"params.acBidders")||[];return(0,$.q9)(n,t)}(t,i),a=function(e,t){var n=(0,d.Z)(e,"params.overwrites.".concat(t));return n&&(0,l.LQ)(n)?n:null}(t,i),c=function(e){var t={ozone:function(e,t,n){if(function(e,t){return t&&e.ac&&e.ac.length||e.ssp&&e.ssp.cohorts&&e.ssp.cohorts.length}(t,n)){var i=function(e,t){var n,i,r,s=t&&null!==(n=e.ac)&&void 0!==n?n:[],o=null!==(i=null==e||null===(r=e.ssp)||void 0===r?void 0:r.cohorts)&&void 0!==i?i:[];return(0,M.Z)(new Set([].concat((0,M.Z)(s),(0,M.Z)(o))))}(t,n);(0,j.N)(e,"params.customData.0.targeting.p_standard",i)}return e}};return t[e]||function(e){return e}}(i);a?a(e,n,s,r,c):c&&c(e,n,s)}))}))}function Rs(e){try{e()}catch(e){(0,l.H)(e)}}function Ns(e,t){try{return JSON.parse(As.getDataFromLocalStorage(e))||t}catch(e){return t}}var Ms="_unknown_",Ls={iab:function(e,t){return{name:e.name,ext:{segtax:t.segtax},segment:(e.segment||[]).map((function(e){return{id:(n=e.id,i=t.iabIds,i[n]||Ms)};var n,i})).filter((function(e){return e.id!==Ms}))}}};function Us(e,t){var n=function(e){var t=Ns("_psegs",[]).map(Number).filter((function(e){return e>=1e6})).map(String),n=Ns("_ppam",[]),i=Ns("_pcrprs",[]),r={ac:[].concat((0,M.Z)(i),(0,M.Z)(n),(0,M.Z)(t)),ix:Ns("_pindexs",[]),rubicon:Ns("_prubicons",[]),appnexus:Ns("_papns",[]),gam:Ns("_pdfps",[]),ssp:Ns("_pssps",{cohorts:[],ssps:[]})};for(var s in r)"ssp"===s?r[s].cohorts&&Array.isArray(r[s].cohorts)&&(r[s].cohorts=r[s].cohorts.slice(0,e)):r[s]=r[s].slice(0,e);return r}((0,d.Z)(t,"params.maxSegs"));Rs((function(){Os(e,t,n)})),Rs((function(){var i;!function(e,t,n){var i,s,o,a,c=(0,d.Z)(t,"params.acBidders"),u=(0,d.Z)(t,"params.maxSegs"),p=(0,d.Z)(t,"params.transformations")||[],h=null!==(i=null==n||null===(s=n.ssp)||void 0===s?void 0:s.ssps)&&void 0!==i?i:[],f=null!==(o=null==n||null===(a=n.ssp)||void 0===a?void 0:a.cohorts)&&void 0!==o?o:[];new Set([].concat((0,M.Z)(c),(0,M.Z)(h))).forEach((function(t){var i={ortb2:e[t]||{}},s=[];c.indexOf(t)>-1&&(s=n.ac),h.indexOf(t)>-1&&(s=(0,M.Z)(new Set([].concat((0,M.Z)(s),(0,M.Z)(f)))).slice(0,u));var o=function(e,t,n,i,s,o){var a;Ss.logInfo("Current ortb2 config",{bidder:e,config:t});var c=(0,d.Z)(o,e)||[],u={name:"permutive.com",segment:n.map((function(e){return{id:e}}))},p=s.filter((function(e){var t=e.id;return Ls.hasOwnProperty(t)})).map((function(e){var t=e.id,n=e.config;return Ls[t](u,n)})),h={name:Cs,segment:c.map((function(e){return{id:e}}))},f=(0,l.Ee)({},t),g=((0,d.Z)(f,"ortb2.user.data")||[]).filter((function(e){return e.name!==u.name&&e.name!==h.name})).concat(u,p,h);Ss.logInfo("Updating ortb2.user.data",{bidder:e,user_data:g}),(0,j.N)(f,"ortb2.user.data",g);var m=(0,d.Z)(f,"ortb2.user.keywords"),y=(a={},(0,r.Z)(a,ks,n),(0,r.Z)(a,Es,i),(0,r.Z)(a,Cs,c),a),v=Object.entries(y).flatMap((function(e){var t=(0,L.Z)(e,2),n=t[0];return t[1].map((function(e){return"".concat(n,"=").concat(e)}))})),b=[m].concat((0,M.Z)(v)).filter(Boolean).join(",");return Ss.logInfo("Updating ortb2.user.keywords",{bidder:e,keywords:b}),(0,j.N)(f,"ortb2.user.keywords",b),n.length>0&&((0,j.N)(f,"ortb2.user.ext.data.".concat(ks),n),Ss.logInfo('Extending ortb2.user.ext.data with "'.concat(ks,'"'),n)),c.length>0&&((0,j.N)(f,"ortb2.user.ext.data.".concat(Cs),c.map(String)),Ss.logInfo('Extending ortb2.user.ext.data with "'.concat(Cs,'"'),c)),Ss.logInfo("Updated ortb2 config",{bidder:e,config:f}),f}(t,i,s,f,p,n);e[t]=o.ortb2}))}(null===(i=e.ortb2Fragments)||void 0===i?void 0:i.bidder,t,n)}))}var js=!1,Bs={name:Is,getBidRequestData:function(e,t,n){var i=function(){Ss.logInfo("Request data updated"),t()},r=Ds(n);Us(e,r),Rs((function(){if(js||!r.waitForIt||void 0===window.permutive||"function"!=typeof window.permutive.ready)return i();window.permutive.ready((function(){Ss.logInfo("SDK is realtime, updating cohorts"),js=!0,Us(e,Ds(n)),i()}),"realtime"),Ss.logInfo("Registered cohort update when SDK is realtime")}))},init:function(e,t){var n;return n=(0,l.dj)(As.getDataFromLocalStorage("permutive-prebid-rtd")),xs=Ps(n),!0}};(0,D.Bx)("realTimeData",Bs),(0,s.z)("permutiveRtdProvider");var qs,Fs,Vs=n(963),zs={appnexus:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://prebid.adnxs.com/pbs/v1/openrtb2/auction",noP1Consent:"https://prebid.adnxs-simple.com/pbs/v1/openrtb2/auction"},syncEndpoint:{p1Consent:"https://prebid.adnxs.com/pbs/v1/cookie_sync",noP1Consent:"https://prebid.adnxs-simple.com/pbs/v1/cookie_sync"},timeout:1e3},appnexuspsp:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://ib.adnxs.com/openrtb2/prebid",noP1Consent:"https://ib.adnxs-simple.com/openrtb2/prebid"},timeout:1e3},rubicon:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://prebid-server.rubiconproject.com/openrtb2/auction",noP1Consent:"https://prebid-server.rubiconproject.com/openrtb2/auction"},syncEndpoint:{p1Consent:"https://prebid-server.rubiconproject.com/cookie_sync",noP1Consent:"https://prebid-server.rubiconproject.com/cookie_sync"},timeout:500},openx:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://prebid.openx.net/openrtb2/auction",noP1Consent:"https://prebid.openx.net/openrtb2/auction"},syncEndpoint:{p1Consent:"https://prebid.openx.net/cookie_sync",noP1Consent:"https://prebid.openx.net/cookie_sync"},timeout:1e3}},$s=n(664),Hs=(qs={},(0,r.Z)(qs,c.Mk,"banner"),(0,r.Z)(qs,c.B5,"native"),(0,r.Z)(qs,c.pX,"video"),qs);function Ws(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i.adUnit,s=i.bidderRequests,o=i.index,a=void 0===o?ie.K.index:o,d=i.bidderRegistry,l=void 0===d?O.ZP.bidderRegistry:d,c=t.params,u=l[t.bidder];u&&u.getSpec().transformBidParams&&(r=r||a.getAdUnit(t),s=s||[n.bidderRequest],c=u.getSpec().transformBidParams(c,!0,r,s)),c&&(0,j.N)(e,"ext.prebid.bidder.".concat(t.bidder),c)}var Zs,Gs=(Fs={},(0,r.Z)(Fs,We,{extPrebid:{fn:function(e,t){var n;(0,j.N)(e,"ext.prebid",(0,l.Ee)({auctiontimestamp:t.auctionStart,targeting:{includewinners:!0,includebidderkeys:!1}},null===(n=e.ext)||void 0===n?void 0:n.prebid)),a.vc.getConfig("debug")&&(e.ext.prebid.debug=!0)}},extPrebidChannel:{fn:function(e){var t,n;(0,j.N)(e,"ext.prebid.channel",Object.assign({name:"pbjs",version:(0,s.R)().version},null===(t=e.ext)||void 0===t||null===(n=t.prebid)||void 0===n?void 0:n.channel))}},extPrebidAliases:{fn:function(e,t,n){var i=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).am,r=void 0===i?O.ZP:i;if(r.aliasRegistry[t.bidderCode]){var s=r.bidderRegistry[t.bidderCode];s&&s.getSpec().skipPbsAliasing||(0,j.N)(e,"ext.prebid.aliases.".concat(t.bidderCode),r.aliasRegistry[t.bidderCode])}}}}),(0,r.Z)(Fs,Ze,{params:{fn:Ws},adUnitCode:{fn:function(e,t){var n=t.adUnitCode;n&&(0,j.N)(e,"ext.prebid.adunitcode",n)}}}),(0,r.Z)(Fs,Ge,{mediaType:{fn:function(e,t,n){var i,r,s=n.mediaType;s||(s=Qn.hasOwnProperty(t.mtype)?Qn[t.mtype]:null===(i=t.ext)||void 0===i||null===(r=i.prebid)||void 0===r?void 0:r.type,Hs.hasOwnProperty(s)||(s=c.Mk)),e.mediaType=s},priority:99},videoCache:{fn:function(e,t){if(e.mediaType===c.pX){var n=(0,d.Z)(t,"ext.prebid.cache.vastXml")||{},i=n.cacheId,r=n.url;if(!i||!r){var s=(0,d.Z)(t,"ext.prebid.targeting")||{},o=s.hb_uuid,a=s.hb_cache_host,l=s.hb_cache_path;o&&a&&l&&(i=o,r="https://".concat(a).concat(l,"?uuid=").concat(o))}i&&r&&Object.assign(e,{videoCacheKey:i,vastUrl:r})}},priority:-10},bidderCode:{fn:function(e,t,n){var i;e.bidderCode=n.seatbid.seat,e.adapterCode=(0,d.Z)(t,"ext.prebid.meta.adaptercode")||(null===(i=n.bidRequest)||void 0===i?void 0:i.bidder)||e.bidderCode}},pbsBidId:{fn:function(e,t){var n=(0,d.Z)(t,"ext.prebid.bidid");(0,l.d8)(n)&&(e.pbsBidId=n)}},adserverTargeting:{fn:function(e,t){var n=(0,d.Z)(t,"ext.prebid.targeting");(0,l.PO)(n)&&(e.adserverTargeting=n)}},extPrebidMeta:{fn:function(e,t){e.meta=(0,l.Ee)({},(0,d.Z)(t,"ext.prebid.meta"),e.meta)}},pbsWurl:{fn:function(e,t){var n=(0,d.Z)(t,"ext.prebid.events.win");(0,l.d8)(n)&&(e.pbsWurl=n)}}}),(0,r.Z)(Fs,Xe,{serverSideStats:{fn:function(e,t,n){Object.entries({errors:"serverErrors",responsetimemillis:"serverResponseTimeMs"}).forEach((function(e){var i=(0,L.Z)(e,2),r=i[0],s=i[1],o=(0,d.Z)(t,"ext.".concat(r,".").concat(n.bidderRequest.bidderCode));o&&(n.bidderRequest[s]=o,n.bidRequests.forEach((function(e){return e[s]=o})))}))}}}),Fs),Xs=(0,l.HP)((function(){return ni(ri(),Gs,tt(Je))}));function Ks(e,t,n){if(t===n)return e;var i=e;if("function"==typeof(0,s.R)().convertCurrency)try{i=(0,s.R)().convertCurrency(e,t,n)}catch(e){}return i}function Js(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ys(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ys(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,s=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw s}}}}function Ys(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Qs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function eo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qs(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var to,no,io=new Set(["bidderCode","bidderRequestId","uniquePbsTid","bids","timeout"]),ro=ii({processors:Xs,context:{netRevenue:!0},imp:function(e,t,n){Object.assign(n,t.pbsData);var i=e(t,n);if((t.bids||[]).forEach((function(e){e.ortb2Imp&&Object.keys(e.ortb2Imp).length>0&&(0,j.N)(i,"ext.prebid.imp.".concat(e.bidder),e.ortb2Imp)})),Object.values(Hs).some((function(e){return i[e]})))return i.secure=n.s2sBidRequest.s2sConfig.secure,i},request:function(e,t,n,i){if(t.length){var r=i.s2sBidRequest,s=i.requestedBidders,o=i.eidPermissions,a=e(t,n,i);return a.tmax=r.s2sConfig.timeout,(0,j.N)(a,"source.tid",n.auctionId),[a.app,a.dooh,a.site].forEach((function(e){var t;!e||null!==(t=e.publisher)&&void 0!==t&&t.id||(0,j.N)(e,"publisher.id",r.s2sConfig.accountId)})),(0,l.kJ)(o)&&o.length>0&&(s&&(0,l.kJ)(s)&&(o=o.map((function(e){return eo(eo({},e),{},{bidders:e.bidders.filter((function(e){return s.includes(e)}))})}))),(0,j.N)(a,"ext.prebid.data.eidpermissions",o)),a}(0,l.H)("Request to Prebid Server rejected due to invalid media type(s) in adUnit.")},bidResponse:function(e,t,n){var i,r,s=n.actualBidRequests.get(n.seatbid.seat);null==s&&(s=n.actualBidRequests.get(null)),s&&Object.assign(n,{bidRequest:s,bidderRequest:n.actualBidderRequests.find((function(e){return e.bidderCode===s.bidder}))});var o=e(t,n);o.requestBidder=null===(i=s)||void 0===i?void 0:i.bidder,null!==(r=o.native)&&void 0!==r&&r.ortb&&(o.adm=o.native.ortb),o.requestTimestamp=n.requestTimestamp;var a=0!==t.price?Tt.Q_.Q:Tt.Q_.H;return{bid:Object.assign((0,$s.m)(a,{src:Tt.os.YZ,bidId:s?s.bidId||s.bid_Id:null,transactionId:n.adUnit.transactionId,auctionId:n.bidderRequest.auctionId}),o),adUnit:n.adUnit.code}},overrides:(Zs={},(0,r.Z)(Zs,Ze,{id:function(e,t,n,i){t.id=i.impId},params:function(e,t,n,i){var r,s=i.s2sBidRequest.s2sConfig.adapterOptions,o=Js(i.actualBidRequests.values());try{for(o.s();!(r=o.n()).done;){var a=r.value;Ws(t,a,i,i),s&&s[a.bidder]&&Object.assign(t.ext.prebid.bidder[a.bidder],s[a.bidder])}}catch(e){o.e(e)}finally{o.f()}},bidfloor:function(e,t,n,i){var r,s,o=Js(i.actualBidRequests.values());try{for(o.s();!(s=o.n()).done;){var a=s.value,d={};if(e(d,a,i),null==d.bidfloorcur||null==d.bidfloor){r=null;break}if(null==r)r=d;else{var l=Ks(d.bidfloor,d.bidfloorcur,r.bidfloorcur);null!=l&&l<r.bidfloor&&(r=d)}}}catch(e){o.e(e)}finally{o.f()}null!=r&&Object.assign(t,r)}}),(0,r.Z)(Zs,We,{fpd:function(e,t,n,i){var r,s,o;(0,l.Ee)(t,null===(r=i.s2sBidRequest.ortb2Fragments)||void 0===r?void 0:r.global),i.s2sBidRequest.s2sConfig.extPrebid&&"object"===(0,U.Z)(i.s2sBidRequest.s2sConfig.extPrebid)&&(0,j.N)(t,"ext.prebid",(0,l.Ee)((null===(o=t.ext)||void 0===o?void 0:o.prebid)||{},i.s2sBidRequest.s2sConfig.extPrebid));var a=Object.entries((null===(s=i.s2sBidRequest.ortb2Fragments)||void 0===s?void 0:s.bidder)||{}).map((function(e){var t=(0,L.Z)(e,2);return{bidders:[t[0]],config:{ortb2:t[1]}}}));a.length&&(0,j.N)(t,"ext.prebid.bidderconfig",a)},extPrebidAliases:function(e,t,n,i){i.actualBidderRequests.forEach((function(n){return e(t,n,i)}))},sourceExtSchain:function(e,t,n,i){var r,s=(0,d.Z)(t,"ext.prebid.schains")||[],o=new Set(s.flatMap((function(e){return e.bidders})));s=Object.values(s.concat(i.actualBidderRequests.filter((function(e){return!o.has(e.bidderCode)})).map((function(e){return{bidders:[e.bidderCode],schain:(0,d.Z)(e,"bids.0.schain")}}))).filter((function(e){var t=e.bidders,n=e.schain;return(null==t?void 0:t.length)>0&&n})).reduce((function(e,t){var n=t.bidders,i=t.schain,s=JSON.stringify(i);return e.hasOwnProperty(s)||(e[s]={bidders:new Set,schain:i}),n.forEach((function(t){return e[s].bidders.add(t)})),(null==r||e[s].bidders.size>r.bidders.size)&&(r=e[s]),e}),{})).map((function(e){var t=e.bidders,n=e.schain;return{bidders:Array.from(t),schain:n}})),null!=r&&(0,j.N)(t,"source.ext.schain",r.schain),s.length&&(0,j.N)(t,"ext.prebid.schains",s)}}),(0,r.Z)(Zs,Xe,{serverSideStats:function(e,t,n,i){i.actualBidderRequests.forEach((function(r){return e(t,n,eo(eo({},i),{},{bidderRequest:r,bidRequests:r.bids}))}))},fledgeAuctionConfigs:function(e,t,n,i){var r=Object.values(i.impContext).flatMap((function(e){return(e.fledgeConfigs||[]).map((function(t){return{adUnitCode:e.adUnit.code,config:t.config}}))}));r.length>0&&(t.fledgeAuctionConfigs=r)}}),Zs)}),so=a.vc.getConfig,oo=Tt.os.YZ,ao=0,lo={bidders:Object.freeze([]),timeout:1e3,syncTimeout:1e3,maxBids:1,adapter:"prebidServer",allowUnknownBidderCodes:!1,adapterOptions:{},syncUrlModifier:{},ortbNative:{context:1,plcmttype:1,eventtrackers:[{event:1,methods:[1]}]}};function co(e,t){if(0!==e.length){var n=e.shift();n.no_cookie?function(e,t,n,i,r){r.syncUrlModifier&&"function"==typeof r.syncUrlModifier[n]&&(t=r.syncUrlModifier[n](e,t,n)),function(e,t,n,i,r){t?"image"===e||"redirect"===e?((0,l.ji)('Invoking image pixel user sync for bidder: "'.concat(n,'"')),(0,l.hq)(t,i,r)):"iframe"===e?((0,l.ji)('Invoking iframe user sync for bidder: "'.concat(n,'"')),(0,l.Vs)(t,i,r)):((0,l.H)('User sync type "'.concat(e,'" not supported for bidder: "').concat(n,'"')),i()):((0,l.H)('No sync url for bidder "'.concat(n,'": ').concat(t)),i())}(e,t,n,i,r.syncTimeout)}(n.usersync.type,n.usersync.url,n.bidder,l.ak.call(co,null,e,t),t):co(e,t)}}a.vc.setDefaults({s2sConfig:lo}),so("s2sConfig",(function(e){return function(e){if(e){var t=Array.isArray(e)?e:[e],n=[];return t.every((function(t,i,r){!function(e){["endpoint","syncEndpoint"].forEach((function(t){if((0,l.d8)(e[t])){var n=e[t];e[t]={p1Consent:n,noP1Consent:n}}!(0,l.PO)(e[t])||e[t].p1Consent&&e[t].noP1Consent||["p1Consent","noP1Consent"].forEach((function(n){e[t][n]||(0,l.yN)("s2sConfig.".concat(t,".").concat(n," not defined.  PBS request will be skipped in some P1 scenarios."))}))}))}(e);var s=function(e){if(e.defaultVendor){var t=e.defaultVendor,n=Object.keys(e);if(!zs[t])return(0,l.H)("Incorrect or unavailable prebid server default vendor option: "+t),!1;Object.keys(zs[t]).forEach((function(i){lo[i]!==e[i]&&(0,$.q9)(n,i)||(e[i]=zs[t][i])}))}return e.enabled="boolean"==typeof e.enabled&&e.enabled}(t);if(!1!==s){var o=function(e){var t=Object.keys(e);if(["accountId","endpoint"].filter((function(e){return!(0,$.q9)(t,e)&&((0,l.H)(e+" missing in server to server config"),!0)})).length>0)return!1}(t);if(!1!==o)return Array.isArray(t.bidders)&&(r[i].bidders=t.bidders.filter((function(e){return-1===n.indexOf(e)&&(n.push(e),!0)}))),!0}return(0,l.yN)("prebidServer: s2s config is disabled"),!1}))?to=t:void 0}}(e.s2sConfig)}));var uo={};function po(e){var t,n,i=function(e,t){if([e,t].every(l.d8))return uo["".concat(e).concat(t)]}(e.auctionId,e.adId);(0,l.d8)(i)&&((0,l.ji)('Invoking image pixel for wurl on BID_WIN: "'.concat(i,'"')),(0,l.hq)(i),[t=e.auctionId,n=e.adId].every(l.d8)&&(uo["".concat(t).concat(n)]=void 0))}function ho(e,t){return(0,ae.h)(t)?e.p1Consent:e.noP1Consent}function fo(e){var t,n,i;return Array.isArray(e)&&e.length>0&&(t=e[0].gdprConsent,n=e[0].uspConsent,i=e[0].gppConsent),{gdprConsent:t,uspConsent:n,gppConsent:i}}var go=(0,D.z3)("sync",(function(e,t,n,i){var r=i.onResponse,s=i.onError,o=i.onBid,d=i.onFledge,c=fo(t).gdprConsent,u=(0,l.I8)(e.ad_units),p=u.map((function(e){return e.bids.map((function(e){return e.bidder})).filter(l.tT)})).reduce(l.xH,[]).filter(l.tT),h=e.metrics.measureTime("buildRequests",(function(){return function(e,t,n,i,r){var s=(0,l.AB)(),o=new Set,d=[];n.forEach((function(e){var n=new Map;e.bids.forEach((function(i){null!=i.mediaTypes&&(0,l.yN)("Prebid Server adapter does not (yet) support bidder-specific mediaTypes for the same adUnit. Size mapping configuration will be ignored for adUnit: ".concat(e.code,", bidder: ").concat(i.bidder)),n.set(i.bidder,(0,l.zE)(i.bid_id,t))}));for(var i=e.code,r=1;o.has(i);)r++,i="".concat(e.code,"-").concat(r);o.add(i),d.push(eo(eo(eo({},e),{},{adUnitCode:e.code},(0,l.iG)(n.values().next().value||{},["userId","userIdAsEids","schain"])),{},{pbsData:{impId:i,actualBidRequests:n,adUnit:e}}))}));var c=eo(eo({},Object.fromEntries(Object.entries(t[0]).filter((function(e){var t=(0,L.Z)(e,1)[0];return!io.has(t)})))),{},{fledgeEnabled:t.some((function(e){return e.fledgeEnabled}))});return ro.toORTB({bidderRequest:c,bidRequests:d,context:{currency:a.vc.getConfig("currency.adServerCurrency")||"USD",ttl:e.s2sConfig.defaultTtl||60,requestTimestamp:s,s2sBidRequest:e,requestedBidders:i,actualBidderRequests:t,eidPermissions:r,nativeRequest:e.s2sConfig.ortbNative}})}(e,t,u,p,no)})),f=h&&JSON.stringify(h);(0,l.PN)("BidRequest: "+f);var g=ho(e.s2sConfig.endpoint,c);if(h&&f&&g){var m=e.metrics.startTiming("net");n(g,{success:function(t){var n;m();try{n=JSON.parse(t);var i=e.metrics.measureTime("interpretResponse",(function(){return function(e,t){return ro.fromORTB({response:e,request:t})}(n,h)})),s=i.bids,a=i.fledgeAuctionConfigs;s.forEach(o),a&&a.forEach(d)}catch(e){(0,l.H)(e)}!n||n.status&&(0,$.q9)(n.status,"Error")?((0,l.H)("error parsing response: ",n?n.status:"not valid JSON"),r(!1,p)):r(!0,p,n)},error:function(){m(),s.apply(this,arguments)}},f,{contentType:"text/plain",withCredentials:!0})}else(0,l.H)("PBS request not made.  Check endpoints.")}),"processPBSRequest");function mo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function yo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mo(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(0,l.EE)().setEidPermissions=function(e){no=e},O.ZP.registerBidAdapter(new function(){var e=new Vs.Z("prebidServer");return e.callBids=function(e,t,n,i,r){var s=e.metrics=(0,ze.Bf)((0,d.Z)(t,"0.metrics")).newMetrics().renameWith((function(t){return["adapter.s2s.".concat(t),"adapters.s2s.".concat(e.s2sConfig.defaultVendor,".").concat(t)]}));i=s.startTiming("total").stopBefore(i),t.forEach((function(e){return(0,ze.Bf)(e.metrics).join(s,{continuePropagation:!1})}));var c=fo(t),u=c.gdprConsent,p=c.uspConsent,h=c.gppConsent;Array.isArray(to)&&(e.s2sConfig&&e.s2sConfig.syncEndpoint&&ho(e.s2sConfig.syncEndpoint,u)&&function(e,t,n,i,r){if(to.length!==ao){ao++;var s={},o=so("userSync.filterSettings");if(o){var a=o.all,d=o.iframe||a,c=o.image||a;d&&(s=Object.assign({iframe:d},s)),c&&(s=Object.assign({image:c},s))}var u={uuid:(0,l.DO)(),bidders:e,account:r.accountId,filterSettings:s},p=r.userSyncLimit;(0,l.hj)(p)&&p>0&&(u.limit=p),t&&(u.gdpr=t.gdprApplies?1:0,!1!==t.gdprApplies&&(u.gdpr_consent=t.consentString)),n&&(u.us_privacy=n),i&&(u.gpp_sid=i.applicableSections,u.gpp=i.gppString),"boolean"==typeof r.coopSync&&(u.coopSync=r.coopSync);var h=JSON.stringify(u);(0,x.h)(ho(r.syncEndpoint,t),(function(e){try{co((e=JSON.parse(e)).bidder_status,r)}catch(e){(0,l.H)(e)}}),h,{contentType:"text/plain",withCredentials:!0})}}(e.s2sConfig.bidders.map((function(e){return O.ZP.aliasRegistry[e]||e})).filter((function(e,t,n){return n.indexOf(e)===t})),u,p,h,e.s2sConfig),go(e,t,r,{onResponse:function(n,r,s){var o,d;n&&t.forEach((function(e){return gi.j8(Tt.FP.BIDDER_DONE,e)})),function(e,t){var n,i;return(null==e||null===(n=e.extPrebid)||void 0===n?void 0:n.returnallbidstatus)&&(null==t||null===(i=t.ext)||void 0===i?void 0:i.seatnonbid)}(e.s2sConfig,s)&&(o=s.ext.seatnonbid,d=t[0].auctionId,gi.j8(Tt.FP.SEAT_NON_BID,{seatnonbid:o,auctionId:d})),i(),function(e,t,n,i){e.forEach((function(e){var r=O.ZP.getBidAdapter(e);r&&r.registerSyncs&&a.vc.runWithBidder(e,l.ak.call(r.registerSyncs,r,[],t,n,i))}))}(r,u,p,h)},onError:i,onBid:function(t){var i,r,s,a=t.adUnit,d=t.bid,c=d.metrics=e.metrics.fork().renameWith();c.checkpoint("addBidResponse"),null!=d.requestId&&null!=d.requestBidder||e.s2sConfig.allowUnknownBidderCodes?c.measureTime("addBidResponse.validate",(function(){return(0,o.JY)(a,d)}))?(n(a,d),d.pbsWurl&&(i=d.auctionId,r=d.adId,s=d.pbsWurl,[i,r].every(l.d8)&&(uo["".concat(i).concat(r)]=s))):n.reject(a,d,Tt.Gw.UI):((0,l.yN)("PBS adapter received bid from unknown bidder (".concat(d.bidder,"), but 's2sConfig.allowUnknownBidderCodes' is not set. Ignoring bid.")),n.reject(a,d,Tt.Gw.Dg))},onFledge:function(e){var t=e.adUnitCode,n=e.config;(0,o.BF)(t,n)}}))},gi.on(Tt.FP.BID_WON,po),Object.assign(this,{callBids:e.callBids,setBidderCode:e.setBidderCode,type:oo})},"prebidServer"),(0,s.z)("prebidServerBidAdapter");var vo="pubmatic",bo="PubMatic: ",_o="USD",wo=void 0,To="https://pubmatic.bbvms.com/r/".concat("$RENDERER",".js"),Io="Video.Placement param missing",So={kadpageurl:"",gender:"",yob:"",lat:"",lon:"",wiid:"",profId:"",verId:""},ko={NUMBER:"number",STRING:"string",BOOLEAN:"boolean",ARRAY:"array",OBJECT:"object"},Co={mimes:ko.ARRAY,minduration:ko.NUMBER,maxduration:ko.NUMBER,startdelay:ko.NUMBER,playbackmethod:ko.ARRAY,api:ko.ARRAY,protocols:ko.ARRAY,w:ko.NUMBER,h:ko.NUMBER,battr:ko.ARRAY,linearity:ko.NUMBER,placement:ko.NUMBER,minbitrate:ko.NUMBER,maxbitrate:ko.NUMBER,skip:ko.NUMBER},Eo={ICON:1,IMAGE:3},Ao={1:"PMP",5:"PREF",6:"PMPG"},Po={bootstrapPlayer:function(e){var t={code:e.adUnitCode};if(e.vastXml?t.vastXml=e.vastXml:e.vastUrl&&(t.vastUrl=e.vastUrl),e.vastXml||e.vastUrl){for(var n,i=Po.getRendererId("pubmatic",e.rendererCode),r=document.getElementById(e.adUnitCode),s=0;s<window.bluebillywig.renderers.length;s++)if(window.bluebillywig.renderers[s]._id===i){n=window.bluebillywig.renderers[s];break}n?n.bootstrap(t,r):(0,l.yN)("".concat(bo,": Couldn't find a renderer with ").concat(i))}else(0,l.yN)("".concat(bo,": No vastXml or vastUrl on bid, bailing..."))},newRenderer:function(e,t){var n=To.replace("$RENDERER",e),i=B.Th.install({url:n,loaded:!1,adUnitCode:t});try{i.setRender(Po.outstreamRender)}catch(e){(0,l.yN)("".concat(bo,": Error tying to setRender on renderer"),e)}return i},outstreamRender:function(e){e.renderer.push((function(){Po.bootstrapPlayer(e)}))},getRendererId:function(e,t){return"".concat(e,"-").concat(t)}},xo=[c.Mk,c.pX,c.B5],Do=0,Oo=!1,Ro=["pubmatic"],No=["all"];function Mo(e,t){if(!(0,l.d8)(t))return t&&(0,l.yN)(bo+"Ignoring param key: "+e+", expects string-value, found "+(0,U.Z)(t)),wo;switch(e){case"pmzoneid":return t.split(",").slice(0,50).map((function(e){return e.trim()})).join();case"kadfloor":case"lat":case"lon":return parseFloat(t)||wo;case"yob":return parseInt(t)||wo;default:return t}}function Lo(e,t,n){var i,r="Ignoring param key: "+e+", expects "+n+", found "+(0,U.Z)(t);switch(n){case ko.BOOLEAN:i=l.jn;break;case ko.NUMBER:i=l.hj;break;case ko.STRING:i=l.d8;break;case ko.ARRAY:i=l.kJ}return i(t)?t:((0,l.yN)(bo+r),wo)}var Uo={desc:"desc",desc2:"desc2",body:"desc",body2:"desc2",sponsoredBy:"sponsored",cta:"ctatext",rating:"rating",address:"address",downloads:"downloads",likes:"likes",phone:"phone",price:"price",salePrice:"saleprice",displayUrl:"displayurl",saleprice:"saleprice",displayurl:"displayurl"},jo=Tt.oF,Bo=Tt.zA,qo=Tt.FY,Fo=Tt.s$,Vo=Object.values(Uo);function zo(e){var t;if(e.ortb){e=e.ortb,t=yo(yo({ver:"1.2"},e),{},{assets:[]});var n=e.assets,i=function(e){return e.title||e.img||e.data||e.video};if(n.length<1||!n.some((function(e){return i(e)})))return(0,l.yN)("".concat(bo,": Native assets object is empty or contains some invalid object")),Oo=!0,t;n.forEach((function(e){var n=e;n.img&&(n.img.type==Eo.IMAGE?(n.w=n.w||n.width||(n.sizes?n.sizes[0]:wo),n.h=n.h||n.height||(n.sizes?n.sizes[1]:wo),n.wmin=n.wmin||n.minimumWidth||(n.minsizes?n.minsizes[0]:wo),n.hmin=n.hmin||n.minimumHeight||(n.minsizes?n.minsizes[1]:wo)):n.img.type==Eo.ICON&&(n.w=n.w||n.width||(n.sizes?n.sizes[0]:wo),n.h=n.h||n.height||(n.sizes?n.sizes[1]:wo))),n&&void 0!==n.id&&i(n)&&t.assets.push(n)}))}else t=function(e){if(!e&&!(0,l.PO)(e))return(0,l.yN)("".concat(bo,": Native assets object is empty or not an object: ").concat(e)),void(Oo=!0);var t={ver:"1.2",assets:[]};for(var n in e)if(!Bo.includes(n))if(qo.hasOwnProperty(n)||Vo.includes(n)){var i=e[n],r=0;i.required&&(0,l.jn)(i.required)&&(r=Number(i.required));var s={id:t.assets.length,required:r};if(n in Uo)s.data={type:Fo[Uo[n]]},(i.len||i.length)&&(s.data.len=i.len||i.length),i.ext&&(s.data.ext=i.ext);else if("icon"===n||"image"===n){if(s.img={type:"icon"===n?jo.ICON:jo.MAIN},i.aspect_ratios)if((0,l.kJ)(i.aspect_ratios))if(i.aspect_ratios.length){var o=i.aspect_ratios[0],a=o.min_width,d=o.min_height;(0,l.U)(a)&&(0,l.U)(d)?(s.img.wmin=a,s.img.hmin=d):(0,l.yN)("".concat(bo,": image.aspect_ratios min_width or min_height are invalid: ").concat(a,", ").concat(d));var c=i.aspect_ratios.filter((function(e){return e.ratio_width&&e.ratio_height})).map((function(e){return"".concat(e.ratio_width,":").concat(e.ratio_height)}));c.length>0&&(s.img.ext={aspectratios:c})}else(0,l.yN)("".concat(bo,": image.aspect_ratios was passed, but it's empty: ").concat(i.aspect_ratios));else(0,l.yN)("".concat(bo,": image.aspect_ratios was passed, but it's not a an array: ").concat(i.aspect_ratios));s.img.w=i.w||i.width,s.img.h=i.h||i.height,s.img.wmin=i.wmin||i.minimumWidth||(i.minsizes?i.minsizes[0]:wo),s.img.hmin=i.hmin||i.minimumHeight||(i.minsizes?i.minsizes[1]:wo),i.sizes&&(2===i.sizes.length&&(0,l.U)(i.sizes[0])&&(0,l.U)(i.sizes[1])?((0,l.PN)("".concat(bo,": if asset.sizes exist, by OpenRTB spec we should remove wmin and hmin")),s.img.w=i.sizes[0],s.img.h=i.sizes[1],delete s.img.hmin,delete s.img.wmin):(0,l.yN)("".concat(bo,": image.sizes was passed, but its value is not an array of integers: ").concat(i.sizes))),i.ext&&(s.img.ext=i.ext),i.mimes&&(s.img.mimes=i.mimes)}else"title"===n?(s.title={len:i.len||i.length||140},i.ext&&(s.title.ext=i.ext)):"ext"===n&&(s.ext=i,delete s.required);t.assets.push(s)}else(0,l.yN)("".concat(bo,": Unrecognized native asset code: ").concat(n,". Asset will be ignored."));return t.assets.length<1?((0,l.yN)("".concat(bo,": Could not find any valid asset")),void(Oo=!0)):t}(e);return t}function $o(e){var t,n=e.mediaTypes.banner.sizes,i=[];if(n!==wo&&(0,l.kJ)(n)){if(t={},e.params.width||e.params.height)t.w=e.params.width,t.h=e.params.height;else{if(0===n.length)return t=wo,(0,l.yN)(bo+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t;t.w=parseInt(n[0][0],10),t.h=parseInt(n[0][1],10),n=n.splice(1,n.length-1)}n.length>0&&(i=[],n.forEach((function(e){e.length>1&&i.push({w:e[0],h:e[1]})})),i.length>0&&(t.format=i)),t.pos=0,t.topframe=(0,l.yL)()?0:1}else(0,l.yN)(bo+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t=wo;return t}function Ho(e){var t,n=(0,l.Ee)((0,d.Z)(e.mediaTypes,"video"),e.params.video);if(n!==wo){for(var i in t={},function(e,t){(0,d.Z)(e,"placement")||(0,l.yN)(Io+" for "+t)}(n,e.adUnitCode),Co)n.hasOwnProperty(i)&&(t[i]=Lo(i,n[i],Co[i]));(0,l.kJ)(e.mediaTypes.video.playerSize[0])?(t.w=parseInt(e.mediaTypes.video.playerSize[0][0],10),t.h=parseInt(e.mediaTypes.video.playerSize[0][1],10)):(0,l.hj)(e.mediaTypes.video.playerSize[0])&&(t.w=parseInt(e.mediaTypes.video.playerSize[0],10),t.h=parseInt(e.mediaTypes.video.playerSize[1],10))}else t=wo,(0,l.yN)(bo+"Error: Video config params missing for adunit: "+e.params.adUnit+" with mediaType set as video. Ignoring video impression in the adunit.");return t}function Wo(e,t){(t=t.filter((function(e){return"string"==typeof e||((0,l.yN)(bo+"acat: Each category should be a string, ignoring category: "+e),!1)})).map((function(e){return e.trim()})).filter((function(e,t,n){return n.indexOf(e)===t}))).length>0&&((0,l.yN)(bo+"acat: Selected: ",t),e.ext.acat=t)}function Zo(e){return!0===(0,l.kJ)(e)&&e.length>0}var Go={code:vo,gvlid:76,supportedMediaTypes:[c.Mk,c.pX,c.B5],isBidRequestValid:function(e){if(e&&e.params){if(!(0,l.d8)(e.params.publisherId))return(0,l.yN)(bo+"Error: publisherId is mandatory and cannot be numeric (wrap it in quotes in your config). Call to OpenBid will not be sent for ad unit: "+JSON.stringify(e)),!1;if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(c.pX)){var t=(0,d.Z)(e.mediaTypes,"video.mimes"),n=(0,d.Z)(e,"params.video.mimes");if(!1===Zo(t)&&!1===Zo(n))return(0,l.yN)(bo+"Error: For video ads, bid.mediaTypes.video.mimes OR bid.params.video.mimes should be present and must be a non-empty array. Call to OpenBid will not be sent for ad unit:"+JSON.stringify(e)),!1;if(!e.mediaTypes[c.pX].hasOwnProperty("context"))return(0,l.H)("".concat(bo,": no context specified in bid. Rejecting bid: "),e),!1;if("outstream"===e.mediaTypes[c.pX].context&&!(0,l.d8)(e.params.outstreamAU)&&!e.hasOwnProperty("renderer")&&!e.mediaTypes[c.pX].hasOwnProperty("renderer"))return e.mediaTypes.hasOwnProperty(c.Mk)||e.mediaTypes.hasOwnProperty(c.B5)?(delete e.mediaTypes[c.pX],(0,l.yN)("".concat(bo,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting mediatype Video of bid: '),e),!0):((0,l.H)("".concat(bo,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting bid: '),e),!1)}return!0}return!1},buildRequests:function(e,t){var n,i,r,s,o,u;t&&t.refererInfo&&(u=t.refererInfo);var p,h=function(e){return{pageURL:(null==e?void 0:e.page)||window.location.href,refURL:(null==e?void 0:e.ref)||window.document.referrer}}(u),f=function(e){return{id:""+(new Date).getTime(),at:1,cur:[_o],imp:[],site:{page:e.pageURL,ref:e.refURL,publisher:{}},device:{ua:navigator.userAgent,js:1,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,language:navigator.language},user:{},ext:{}}}(h),g="",m=[],y=[],v=[];if(e.forEach((function(e){if((p=(0,l.I8)(e)).params.adSlot=p.params.adSlot||"",function(e){var t;e.params.adUnit="",e.params.adUnitIndex="0",e.params.width=0,e.params.height=0,e.params.adSlot=(t=e.params.adSlot,(0,l.d8)(t)?t.replace(/^\s+/g,"").replace(/\s+$/g,""):(t&&(0,l.yN)(vo+": adSlot must be a string. Ignoring adSlot"),""));var n=e.params.adSlot,i=n.split(":");if(n=i[0],2==i.length&&(e.params.adUnitIndex=i[1]),i=n.split("@"),e.params.adUnit=i[0],i.length>1){if(2!=(i=i[1].split("x")).length)return void(0,l.yN)(bo+"AdSlot Error: adSlot not in required format");e.params.width=parseInt(i[0],10),e.params.height=parseInt(i[1],10)}else if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(c.Mk)&&e.mediaTypes.banner.hasOwnProperty("sizes")){for(var r=0,s=[];r<e.mediaTypes.banner.sizes.length;r++)2===e.mediaTypes.banner.sizes[r].length&&s.push(e.mediaTypes.banner.sizes[r]);e.mediaTypes.banner.sizes=s,e.mediaTypes.banner.sizes.length>=1&&(e.params.width=e.mediaTypes.banner.sizes[0][0],e.params.height=e.mediaTypes.banner.sizes[0][1],e.mediaTypes.banner.sizes=e.mediaTypes.banner.sizes.splice(1,e.mediaTypes.banner.sizes.length-1))}}(p),p.mediaTypes&&p.mediaTypes.hasOwnProperty("video")||p.params.hasOwnProperty("video"));else if(!(p.hasOwnProperty("mediaTypes")&&p.mediaTypes.hasOwnProperty(c.B5)||0!==p.params.width||0!==p.params.height))return void(0,l.yN)(bo+"Skipping the non-standard adslot: ",p.params.adSlot,JSON.stringify(p));h.pubId=h.pubId||p.params.publisherId,(h=function(e,t){var n,i,r;for(n in t.kadpageurl||(t.kadpageurl=t.pageURL),So)So.hasOwnProperty(n)&&(i=e[n])&&(r=So[n],"object"===(0,U.Z)(r)&&(i=r.f(i,t)),(0,l.d8)(i)?t[n]=i:(0,l.yN)(bo+"Ignoring param : "+n+" with value : "+So[n]+", expects string-value, found "+(0,U.Z)(i)));return t}(p.params,h)).transactionId=p.transactionId,""===g?g=p.params.currency||wo:p.params.hasOwnProperty("currency")&&g!==p.params.currency&&(0,l.yN)(bo+"Currency specifier ignored. Only one currency permitted."),p.params.currency=g,p.params.hasOwnProperty("dctr")&&(0,l.d8)(p.params.dctr)&&m.push(p.params.dctr),p.params.hasOwnProperty("bcat")&&(0,l.kJ)(p.params.bcat)&&(y=y.concat(p.params.bcat)),p.params.hasOwnProperty("acat")&&(0,l.kJ)(p.params.acat)&&(v=v.concat(p.params.acat));var t=function(e){var t,n,i={},r={},s=e.hasOwnProperty("sizes")?e.sizes:[],o="",u=[];if(function(e,t){t.params.deals&&((0,l.kJ)(t.params.deals)?t.params.deals.forEach((function(t){(0,l.d8)(t)&&t.length>3?(e.pmp||(e.pmp={private_auction:0,deals:[]}),e.pmp.deals.push({id:t})):(0,l.yN)(bo+"Error: deal-id present in array bid.params.deals should be a strings with more than 3 charaters length, deal-id ignored: "+t)})):(0,l.yN)(bo+"Error: bid.params.deals should be an array of strings."))}(i={id:e.bidId,tagid:e.params.adUnit||void 0,bidfloor:Mo("kadfloor",e.params.kadfloor),secure:1,ext:{pmZoneId:Mo("pmzoneid",e.params.pmzoneid)},bidfloorcur:e.params.currency?Mo("currency",e.params.currency):_o},e),function(e,t){var n,i="";if(t.params.dctr)if(i=t.params.dctr,(0,l.d8)(i)&&i.length>0){var r=i.split("|");i="",r.forEach((function(e){i+=e.length>0?e.trim()+"|":""})),n=i.length,"|"===i.substring(n,n-1)&&(i=i.substring(0,n-1)),e.ext.key_val=i.trim()}else(0,l.yN)(bo+"Ignoring param : dctr with value : "+i+", expects string-value, found empty or non-string value")}(i,e),function(e,t){var n=t.rtd&&t.rtd.jwplayer&&t.rtd.jwplayer.targeting||void 0,i="";if(void 0!==n&&""!==n&&n.hasOwnProperty("segments")){var r,s=n.segments.length;i+="jw-id="+n.content.id;for(var o=0;o<s;o++)i+="|jw-"+n.segments[o]+"=1";(r=e.ext)&&void 0===r.key_val?r.key_val=i:r.key_val+="|"+i}}(i,e),e.hasOwnProperty("mediaTypes"))for(o in e.mediaTypes)switch(o){case c.Mk:(t=$o(e))!==wo&&(i.banner=t);break;case c.B5:r.request=JSON.stringify(zo(e.nativeParams)),Oo?((0,l.yN)(bo+"Error: Error in Native adunit "+e.params.adUnit+". Ignoring the adunit. Refer to http://prebid.org/dev-docs/show-native-ads.html for more details."),Oo=!1):i.native=r;break;case c.pX:(n=Ho(e))!==wo&&(i.video=n)}else t={pos:0,w:e.params.width,h:e.params.height,topframe:(0,l.yL)()?0:1},(0,l.kJ)(s)&&s.length>1&&((s=s.splice(1,s.length-1)).forEach((function(e){u.push({w:e[0],h:e[1]})})),t.format=u),i.banner=t;return function(e,t){var n=yo({},(0,d.Z)(t,"ortb2Imp.ext.data"));Object.keys(n).forEach((function(t){"pbadslot"===t?"string"==typeof n[t]&&n[t]&&(0,j.N)(e,"ext.data.pbadslot",n[t]):"adserver"===t?["name","adslot"].forEach((function(t){var i=(0,d.Z)(n,"adserver.".concat(t));"string"==typeof i&&i&&((0,j.N)(e,"ext.data.adserver.".concat(t.toLowerCase()),i),"adslot"===t&&(0,j.N)(e,"ext.dfp_ad_unit_code",i))})):(0,j.N)(e,"ext.data.".concat(t),n[t])}))}(i,e),function(e,t){var n=-1;"function"!=typeof t.getFloor||a.vc.getConfig("pubmatic.disableFloors")||[c.Mk,c.pX,c.B5].forEach((function(i){if(e.hasOwnProperty(i)){var r=[];"banner"===i&&(e[i].w&&e[i].h&&r.push([e[i].w,e[i].h]),(0,l.kJ)(e[i].format)&&e[i].format.forEach((function(e){return r.push([e.w,e.h])}))),0===r.length&&r.push("*"),r.forEach((function(r){var s=t.getFloor({currency:e.bidfloorcur,mediaType:i,size:r});if((0,l.PN)(bo,"floor from floor module returned for mediatype:",i," and size:",r," is: currency",s.currency,"floor",s.floor),"object"===(0,U.Z)(s)&&s.currency===e.bidfloorcur&&!isNaN(parseInt(s.floor))){var o=parseFloat(s.floor);(0,l.PN)(bo,"floor from floor module:",o,"previous floor value",n,"Min:",Math.min(o,n)),n=-1===n?o:Math.min(o,n),(0,l.PN)(bo,"new floor value:",n)}}))}})),e.bidfloor&&((0,l.PN)(bo,"floor from floor module:",n,"impObj.bidfloor",e.bidfloor,"Max:",Math.max(n,e.bidfloor)),n=Math.max(n,e.bidfloor)),e.bidfloor=!isNaN(n)&&n>0?n:wo,(0,l.PN)(bo,"new impObj.bidfloor value:",e.bidfloor)}(i,e),i.hasOwnProperty(c.Mk)||i.hasOwnProperty(c.B5)||i.hasOwnProperty(c.pX)?i:wo}(p);t&&f.imp.push(t)})),0!=f.imp.length){f.site.publisher.id=h.pubId.trim(),Do=h.pubId.trim(),f.ext.wrapper={},f.ext.wrapper.profile=parseInt(h.profId)||wo,f.ext.wrapper.version=parseInt(h.verId)||wo,f.ext.wrapper.wiid=h.wiid||t.auctionId,f.ext.wrapper.wv="prebid_prebid_7.47.0",f.ext.wrapper.transactionId=h.transactionId,f.ext.wrapper.wp="pbjs";var b,_,w=t?oe.S.get(t.bidderCode,"allowAlternateBidderCodes"):void 0;if(void 0!==w){if(f.ext.marketplace={},t&&1==w){var T=oe.S.get(t.bidderCode,"allowedAlternateBidderCodes");(0,l.kJ)(T)?(T=T.map((function(e){return e.trim().toLowerCase()})).filter((function(e){return!!e})).filter(l.tT),Ro=T.includes("*")?No:[].concat((0,M.Z)(Ro),(0,M.Z)(T))):Ro=No}f.ext.marketplace.allowedbidders=Ro.filter(l.tT)}f.user.gender=h.gender?h.gender.trim():wo,f.user.geo={},f.user.geo.lat=Mo("lat",h.lat),f.user.geo.lon=Mo("lon",h.lon),f.user.yob=Mo("yob",h.yob),f.device.geo=f.user.geo,f.site.page=h.kadpageurl.trim()||f.site.page.trim(),f.site.domain=(b=f.site.page,(_=document.createElement("a")).href=b,_.hostname),"object"===(0,U.Z)(a.vc.getConfig("content"))&&(f.site.content=a.vc.getConfig("content")),"object"===(0,U.Z)(a.vc.getConfig("device"))&&(f.device=Object.assign(f.device,a.vc.getConfig("device"))),f.device.language=f.device.language&&f.device.language.split("-")[0],(0,j.N)(f,"source.tid",h.transactionId),-1!==window.location.href.indexOf("pubmaticTest=true")&&(f.test=1),e[0].schain&&(0,j.N)(f,"source.ext.schain",e[0].schain),t&&t.gdprConsent&&((0,j.N)(f,"user.ext.consent",t.gdprConsent.consentString),(0,j.N)(f,"regs.ext.gdpr",t.gdprConsent.gdprApplies?1:0)),t&&t.uspConsent&&(0,j.N)(f,"regs.ext.us_privacy",t.uspConsent),!0===a.vc.getConfig("coppa")&&(0,j.N)(f,"regs.coppa",1),function(e,t){var n=(0,d.Z)(t,"0.userIdAsEids");(0,l.kJ)(n)&&n.length>0&&(0,j.N)(e,"user.eids",n)}(f,e);var I,S,k,C,E=t&&t.ortb2||{};if(E.site){var A=f.site,P=A.page,x=A.domain,D=A.ref;(0,l.Ee)(f,{site:E.site}),f.site.page=P,f.site.domain=x,f.site.ref=D}if(E.user&&(0,l.Ee)(f,{user:E.user}),E.bcat&&(y=y.concat(E.bcat)),null!==(n=E.device)&&void 0!==n&&n.sua&&(f.device.sua=null===(I=E.device)||void 0===I?void 0:I.sua),null!==(i=E.ext)&&void 0!==i&&null!==(r=i.prebid)&&void 0!==r&&null!==(s=r.bidderparams)&&void 0!==s&&null!==(o=s[t.bidderCode])&&void 0!==o&&o.acat){var O=E.ext.prebid.bidderparams[t.bidderCode].acat;Wo(f,O)}else v.length&&Wo(f,v);return function(e,t){(t=t.filter((function(e){return"string"==typeof e||((0,l.yN)(bo+"bcat: Each category should be a string, ignoring category: "+e),!1)})).map((function(e){return e.trim()})).filter((function(e,t,n){if(e.length>3)return n.indexOf(e)===t;(0,l.yN)(bo+"bcat: Each category should have a value of a length of more than 3 characters, ignoring category: "+e)}))).length>0&&((0,l.yN)(bo+"bcat: Selected: ",t),e.bcat=t)}(f,y),null!=t&&t.timeout?f.tmax=t.timeout:f.tmax=null===(S=window)||void 0===S||null===(k=S.PWT)||void 0===k||null===(C=k.versionDetails)||void 0===C?void 0:C.timeout,f.ext.epoch=(new Date).getTime(),"object"===(0,U.Z)(a.vc.getConfig("app"))&&(f.app=a.vc.getConfig("app"),f.app.publisher=f.site.publisher,f.app.ext=f.site.ext||wo,"object"!==(0,U.Z)(f.app.content)&&(f.app.content=f.site.content||wo),delete f.site),{method:"POST",url:"https://hbopenbid.pubmatic.com/translator?source=prebid-client",data:JSON.stringify(f),bidderRequest:t}}},interpretResponse:function(e,t){var n=[],i=_o,r=JSON.parse(t.data),s=r.site&&r.site.ref?r.site.ref:"";try{e.body&&e.body.seatbid&&(0,l.kJ)(e.body.seatbid)&&(i=e.body.cur||i,e.body.seatbid.forEach((function(e){e.bid&&(0,l.kJ)(e.bid)&&e.bid.forEach((function(o){var a={requestId:o.impid,cpm:parseFloat((o.price||0).toFixed(2)),width:o.w,height:o.h,creativeId:o.crid||o.id,dealId:o.dealid,currency:i,netRevenue:!0,ttl:300,referrer:s,ad:o.adm,pm_seat:e.seat||null,pm_dspid:o.ext&&o.ext.dspid?o.ext.dspid:null,partnerImpId:o.id||""};r.imp&&r.imp.length>0&&r.imp.forEach((function(e){if(o.impid===e.id)switch(function(e,t){if(e.ext&&null!=e.ext.bidtype)t.mediaType=xo[e.ext.bidtype];else{(0,l.PN)(bo+"bid.ext.bidtype does not exist, checking alternatively for mediaType");var n=e.adm,i="",r=new RegExp(/VAST\s+version/);if(n.indexOf('span class="PubAPIAd"')>=0)t.mediaType=c.Mk;else if(r.test(n))t.mediaType=c.pX;else try{(i=JSON.parse(n.replace(/\\/g,"")))&&i.native&&(t.mediaType=c.B5)}catch(e){(0,l.yN)(bo+"Error: Cannot parse native reponse for ad response: "+n)}}}(o,a),a.mediaType){case c.Mk:break;case c.pX:a.width=o.hasOwnProperty("w")?o.w:e.video.w,a.height=o.hasOwnProperty("h")?o.h:e.video.h,a.vastXml=o.adm,function(e,t){var n,i,r;if(t.bidderRequest&&t.bidderRequest.bids){for(var s=0;s<t.bidderRequest.bids.length;s++)t.bidderRequest.bids[s].bidId===e.requestId&&(n=t.bidderRequest.bids[s].params,i=t.bidderRequest.bids[s].mediaTypes[c.pX].context,r=t.bidderRequest.bids[s].adUnitCode);i&&"outstream"===i&&n&&n.outstreamAU&&r&&(e.rendererCode=n.outstreamAU,e.renderer=Po.newRenderer(e.rendererCode,r))}}(a,t),function(e,t,n){var i,r,s;if(null!=t&&null!==(i=t.ext)&&void 0!==i&&i.prebiddealpriority){var o=(0,l.zE)(e.requestId,[n.bidderRequest]),a=(0,d.Z)(o,"mediaTypes.video");if((null==a?void 0:a.context)==c.Oh){var u=(null==t||null===(r=t.ext)||void 0===r||null===(s=r.video)||void 0===s?void 0:s.duration)||(null==a?void 0:a.maxduration);e.video={context:c.Oh,durationSeconds:u,dealTier:t.ext.prebiddealpriority}}}}(a,o,t);break;case c.B5:!function(e,t){if(e.hasOwnProperty("adm")){var n="";try{n=JSON.parse(e.adm.replace(/\\/g,""))}catch(e){return void(0,l.yN)(bo+"Error: Cannot parse native reponse for ad response: "+t.adm)}t.native={ortb:yo({},n.native)},t.mediaType=c.B5,t.width||(t.width=0),t.height||(t.height=0)}}(o,a)}})),o.ext&&o.ext.deal_channel&&(a.dealChannel=Ao[o.ext.deal_channel]||null),function(e,t,n){e.meta={},t.ext&&t.ext.dspid&&(e.meta.networkId=t.ext.dspid,e.meta.demandSource=t.ext.dspid),t.ext&&t.ext.dchain&&(e.meta.dchain=t.ext.dchain);var i=n||t.ext&&t.ext.advid;i&&(e.meta.advertiserId=i,e.meta.agencyId=i,e.meta.buyerId=i),t.adomain&&Zo(t.adomain)&&(e.meta.advertiserDomains=t.adomain,e.meta.clickUrl=t.adomain[0],e.meta.brandId=t.adomain[0]),t.cat&&Zo(t.cat)&&(e.meta.secondaryCatIds=t.cat,e.meta.primaryCatId=t.cat[0])}(a,o,e.seat),e.ext&&e.ext.buyid&&(a.adserverTargeting={hb_buyid_pubmatic:e.ext.buyid}),o.ext&&o.ext.marketplace&&(a.bidderCode=o.ext.marketplace),n.push(a)}))})))}catch(e){(0,l.H)(e)}return n},getUserSyncs:function(e,t,n,i){var r=""+Do;return n&&(r+="&gdpr="+(n.gdprApplies?1:0),r+="&gdpr_consent="+encodeURIComponent(n.consentString||"")),i&&(r+="&us_privacy="+encodeURIComponent(i)),!0===a.vc.getConfig("coppa")&&(r+="&coppa=1"),e.iframeEnabled?[{type:"iframe",url:"https://ads.pubmatic.com/AdServer/js/user_sync.html?kdntuid=1&p="+r}]:[{type:"image",url:"https://image8.pubmatic.com/AdServer/ImgSync?p="+r}]},transformBidParams:function(e,t,n,i){return(0,l.uh)({publisherId:"string",adSlot:"string"},e)}};(0,o.dX)(Go),(0,s.z)("pubmaticBidAdapter");var Xo=n(5309),Ko={name:"pubProvidedId",gvlid:Xo.$P,decode:function(e){var t=e?{pubProvidedId:e}:void 0;return(0,l.PN)("PubProvidedId: Decoded value "+JSON.stringify(t)),t},getId:function(e){var t=e&&e.params||{},n=[];return(0,l.kJ)(t.eids)&&(n=n.concat(t.eids)),"function"==typeof t.eidsFunction&&(n=n.concat(t.eidsFunction())),{id:n}}};(0,D.Bx)("userId",Ko),(0,s.z)("pubProvidedIdSystem");var Jo="__qca",Yo="11",Qo=["1","10"],ea=["1"],ta=["1"],na=O.rp.getConsentData(),ia=O.nX.getConsentData(),ra="quantcastId",sa=(0,se.df)({moduleType:vn.y2,moduleName:ra});function oa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:392;if(!window._qevents&&e&&""!=e){var n,i,r=sa.getCookie(Jo),s="0",o=aa.findRootDomain(),a=new Date,d="";if(!r){var c=a.getTime(),u=new Date(c+864e5*t).toGMTString(),p=Math.round(2147483647*Math.random());r="B0-".concat(p,"-").concat(c),s="1",sa.setCookie(Jo,r,u,"/",o,null)}n="&fpan=".concat(s,"&fpa=").concat(r),i="&gdpr=0",na&&"boolean"==typeof na.gdprApplies&&na.gdprApplies&&(i="gdpr=1&gdpr_consent=".concat(na.consentString)),ia&&"string"==typeof ia&&(d="&us_privacy=".concat(ia));var h="https://pixel.quantserve.com/pixel?d="+o+"&client_id="+e+"&a=p-KceJUEvXN48CE"+d+i+n;(0,l.hq)(h)}}var aa={name:ra,gvlid:Yo,decode:function(e){return e},getId:function(e){var t,n=sa.getCookie(Jo);if(O.VP.getCoppa()||(t=ia)&&"string"==typeof t&&4==t.length&&"Y"==t.charAt(1)&&"Y"==t.charAt(2)||!function(e){return!e||"boolean"!=typeof e.gdprApplies||!e.gdprApplies||!!e.vendorData&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qo,n=e.gdprApplies,i=e.purpose,r=e.vendor,s=r&&r.consents&&r.consents[Yo],o=r&&r.legitimateInterests&&r.legitimateInterests[Yo],a=e.publisher?e.publisher.restrictions:{};return!n||t.map((function(e){var t=!!i.consents&&i.consents[e],n=!!i.legitimateInterests&&i.legitimateInterests[e],r=a&&a[e]?a[e][Yo]:null;return!(0===r||(!s||!t||2===r||-1==ea.indexOf(e)&&1!==r)&&(1===r||!o||!n||-1!=ta.indexOf(e)||-1!=ea.indexOf(e)&&2!==r))})).reduce((function(e,t){return e&&t}),!0)}(e.vendorData)}(na)){var i=new Date(0).toUTCString(),r=aa.findRootDomain();return(0,l.PN)("QuantcastId: Necessary consent not present for Id, exiting QuantcastId"),void sa.setCookie(Jo,"",i,"/",r,null)}var s=e&&e.params||{},o=e&&e.storage||{},a=s.clientId||"",d=o.expires||392;return"complete"===document.readyState?oa(a,d):window.addEventListener("load",(function(){oa(a,d)})),{id:n?{quantcastId:n}:void 0}}};(0,D.Bx)("userId",aa),(0,s.z)("quantcastIdSystem");var da,la,ca,ua=[],pa=[],ha=[],fa=(ca=!1,function(){var e;ca||(Object.entries((e={},(0,r.Z)(e,Tt.FP.AUCTION_INIT,["onAuctionInitEvent"]),(0,r.Z)(e,Tt.FP.AUCTION_END,["onAuctionEndEvent",va]),(0,r.Z)(e,Tt.FP.BID_RESPONSE,["onBidResponseEvent"]),(0,r.Z)(e,Tt.FP.BID_REQUESTED,["onBidRequestEvent"]),e)).forEach((function(e){var t=(0,L.Z)(e,2),n=t[0],i=(0,L.Z)(t[1],2),r=i[0],s=i[1];gi.on(n,(function(e){s&&s(e),pa.forEach((function(t){try{t[r]&&t[r](e,t.config,la)}catch(e){(0,l.H)("RTD provider '".concat(t.name,"': error in '").concat(r,"':"),e)}}))}))})),ca=!0)});function ga(){return{gdpr:O.rp.getConsentData(),usp:O.nX.getConsentData(),gpp:O.TJ.getConsentData(),coppa:!!a.vc.getConfig("coppa")}}function ma(){la=ga();var e=[];ha.forEach((function(t){var n=(0,$.sE)(ua,(function(e){return e.name===t.name}));n&&n.init&&n.init(t,la)&&e.push(Object.assign(n,{config:t}))})),pa=e,(0,l.PN)("Real time data module enabled, using submodules: ".concat(pa.map((function(e){return e.name})).join(", ")))}var ya=(0,ze.g3)("rtd",(function(e,t){la=ga();var n=[],i=[];pa.forEach((function(e){if("function"==typeof e.getBidRequestData){n.push(e);var t=e.config;t&&t.waitForIt&&i.push(e)}}));var r,s=i.length&&da.auctionDelay&&da.auctionDelay>0,o=i.length,a=!1;if(!n.length)return l();function d(){a||(this.config&&this.config.waitForIt&&o--,0===o&&setTimeout(l,0))}function l(){a||(a=!0,clearTimeout(r),e.call(this,t))}r=setTimeout(l,s?da.auctionDelay:0),n.forEach((function(e){e.getBidRequestData(t,d.bind(e),e.config,la)}))}));function va(e){var t,n=pa.filter((function(e){return"function"==typeof e.getTargetingData}));if(n.length){var i=e.adUnitCodes;if(i){for(var r=[],s=n.length-1;s>=0;s--){var o=n[s].getTargetingData(i,n[s].config,la,e);o&&"object"===(0,U.Z)(o)?r.push(o):(0,l.yN)("invalid getTargetingData response for sub module",n[s].name)}var a=(t=r,Array.isArray(t)&&t.length?t.reduce((function(e,t){for(var n in t)if(t.hasOwnProperty(n))if(e.hasOwnProperty(n)){var i=t[n];for(var r in i)i.hasOwnProperty(r)&&(e[n][r]=i[r])}else e[n]=t[n];return e}),{}):{});return e.adUnits.forEach((function(e){var t=e.code&&a[e.code];t&&((0,l.PN)("RTD set ad unit targeting of",t,"for",e),e[Tt.k2.xn]=Object.assign(e[Tt.k2.xn]||{},t))})),e.adUnits}}}function ba(e){pa.forEach((function(e){if("function"==typeof e.onDataDeletionRequest)try{e.onDataDeletionRequest(e.config)}catch(t){(0,l.H)("Error executing ".concat(e.name,".onDataDeletionRequest"),t)}}));for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];e.apply(this,n)}function _a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function wa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(0,D.bA)("realTimeData",(function(e){return ua.push(e),Xo.qh.register(vn.XG,e.name,e.gvlid),function(){var t=ua.indexOf(e);t>=0&&(ua.splice(t,1),ma())}})),function(e){var t=e.getConfig("realTimeData",(function(e){var n=e.realTimeData;n.dataProviders?(t(),da=n,ha=n.dataProviders,fa(),(0,D.v5)("startAuction").before(ya,20),O.ZP.callDataDeletionRequest.before(ba),ma()):(0,l.H)("missing parameters for real time module")}))}(a.vc),(0,s.z)("rtdModule");var Ta={};a.vc.getConfig("rubicon",(function(e){(0,l.Ee)(Ta,e.rubicon)}));var Ia={1:"468x60",2:"728x90",5:"120x90",7:"125x125",8:"120x600",9:"160x600",10:"300x600",13:"200x200",14:"250x250",15:"300x250",16:"336x280",17:"240x400",19:"300x100",31:"980x120",32:"250x360",33:"180x500",35:"980x150",37:"468x400",38:"930x180",39:"750x100",40:"750x200",41:"750x300",42:"2x4",43:"320x50",44:"300x50",48:"300x300",53:"1024x768",54:"300x1050",55:"970x90",57:"970x250",58:"1000x90",59:"320x80",60:"320x150",61:"1000x1000",64:"580x500",65:"640x480",66:"930x600",67:"320x480",68:"1800x1000",72:"320x320",73:"320x160",78:"980x240",79:"980x300",80:"980x400",83:"480x300",85:"300x120",90:"548x150",94:"970x310",95:"970x100",96:"970x210",101:"480x320",102:"768x1024",103:"480x280",105:"250x800",108:"320x240",113:"1000x300",117:"320x100",125:"800x250",126:"200x600",144:"980x600",145:"980x150",152:"1000x250",156:"640x320",159:"320x250",179:"250x600",195:"600x300",198:"640x360",199:"640x200",213:"1030x590",214:"980x360",221:"1x1",229:"320x180",230:"2000x1400",232:"580x400",234:"6x6",251:"2x2",256:"480x820",257:"400x600",258:"500x200",259:"998x200",261:"480x480",264:"970x1000",265:"1920x1080",274:"1800x200",278:"320x500",282:"320x400",288:"640x380",524:"1x2",548:"500x1000",550:"980x480",552:"300x200",558:"640x640",562:"300x431",564:"320x431",566:"320x300",568:"300x150",570:"300x125",572:"250x350",574:"620x891",576:"610x877",578:"980x552",580:"505x656",622:"192x160"};(0,l.yi)(Ia,(function(e,t){return Ia[e]=t}));var Sa=ii({request:function(e,t,n,i){var r,o,d=i.bidRequests,c=e(t,n,i);c.cur=["USD"],c.test=a.vc.getConfig("debug")?1:0,(0,j.N)(c,"ext.prebid.cache",{vastxml:{returnCreative:!0===Ta.returnVast}}),(0,j.N)(c,"ext.prebid.bidders",{rubicon:{integration:Ta.int_type||"pbjs"}}),(0,j.N)(c,"ext.prebid.targeting.pricegranularity",function(e){return{ranges:{low:[{max:5,increment:.5}],medium:[{max:20,increment:.1}],high:[{max:20,increment:.01}],auto:[{max:5,increment:.05},{min:5,max:10,increment:.1},{min:10,max:20,increment:.5}],dense:[{max:3,increment:.01},{min:3,max:8,increment:.05},{min:8,max:20,increment:.5}],custom:e.getConfig("customPriceBucket")&&e.getConfig("customPriceBucket").buckets}[e.getConfig("priceGranularity")]}}(a.vc));var u=(0,s.R)().installedModules;return!u||u.length&&-1===u.indexOf("rubiconAnalyticsAdapter")||(0,j.N)(c,"ext.prebid.analytics",{rubicon:{"client-analytics":!0}}),function(e,t){var n,i,r={},s=new Set;t.forEach((function(t){var n,i,o,d,c,u={user:{ext:{data:wa({},t.params.visitor)}},site:{ext:{data:wa({},t.params.inventory)}}},p=e.imp.find((function(e){var t,n,i,r,s;return null===(t=e.ext)||void 0===t||null===(n=t.prebid)||void 0===n||null===(i=n.bidder)||void 0===i||null===(r=i.rubicon)||void 0===r||null===(s=r.video)||void 0===s?void 0:s.language}));p&&(u.site.content={language:null===(n=p.ext)||void 0===n||null===(i=n.prebid)||void 0===i||null===(o=i.bidder)||void 0===o||null===(d=o.rubicon)||void 0===d||null===(c=d.video)||void 0===c?void 0:c.language}),t.params.keywords&&(Array.isArray(t.params.keywords)?t.params.keywords:t.params.keywords.split(",")).forEach((function(e){return s.add(e)})),r=(0,l.Ee)(r,t.ortb2||{},u);var h=a.vc.getConfig("user.id");r.user.id=r.user.id||h})),(0,l.Ee)(e,r),s&&s.size&&(0,j.N)(e,"site.keywords",Array.from(s.values()).join(",")),null==e||null===(n=e.ext)||void 0===n||null===(i=n.prebid)||void 0===i||delete i.storedrequest}(c,d),null==c||null===(r=c.ext)||void 0===r||null===(o=r.prebid)||void 0===o||delete o.storedrequest,!0===Ta.disableFloors&&delete c.ext.prebid.floors,d.filter((function(e){return"object"===(0,U.Z)(e.floorData)})).length>0&&(c.ext.prebid.floors={enabled:!1}),c},imp:function(e,t,n){var i,r,s=xa(t);if(!s.includes(c.Mk)||1!=s.length){var o=e(t,n);return o.id=t.adUnitCode,delete o.banner,a.vc.getConfig("s2sConfig.defaultTtl")&&(o.exp=a.vc.getConfig("s2sConfig.defaultTtl")),"atf"===t.params.position&&(o.video.pos=1),"btf"===t.params.position&&(o.video.pos=3),null===(i=o.ext)||void 0===i||null===(r=i.prebid)||void 0===r||delete r.storedrequest,function(e,t){if("USD"!=t.bidfloorcur&&(delete t.bidfloor,delete t.bidfloorcur),!t.bidfloor){var n=parseFloat((0,d.Z)(e,"params.floor"));isNaN(n)||(t.bidfloor=n,t.bidfloorcur="USD")}}(t,o),o}},bidResponse:function(e,t,n){var i=e(t,n);i.meta.mediaType=(0,d.Z)(t,"ext.prebid.type");var r=n.bidRequest;return i.mediaType===c.pX&&"outstream"===r.mediaTypes.video.context&&(i.renderer=function(e){var t=B.Th.install({id:e.adId,url:Ta.rendererUrl||"https://video-outstream.rubiconproject.com/apex-2.2.1.js",config:Ta.rendererConfig||{},loaded:!1,adUnitCode:e.adUnitCode});try{t.setRender(Ea)}catch(e){(0,l.yN)("Prebid Error calling setRender on renderer",e)}return t}(i)),i.width=t.w||(0,d.Z)(r,"mediaTypes.video.w")||(0,d.Z)(r,"params.video.playerWidth"),i.height=t.h||(0,d.Z)(r,"mediaTypes.video.h")||(0,d.Z)(r,"params.video.playerHeight"),(0,d.Z)(t,"ext.bidder.rp.advid")&&(0,j.N)(i,"meta.advertiserId",t.ext.bidder.rp.advid),i},context:{netRevenue:!1!==Ta.netRevenue,ttl:300},processors:Xs}),ka={code:"rubicon",gvlid:52,supportedMediaTypes:[c.Mk,c.pX,c.B5],isBidRequestValid:function(e){var t=!0;if("object"!==(0,U.Z)(e.params))return!1;for(var n=0,i=["accountId","siteId","zoneId"];n<i.length;n++)if(e.params[i[n]]=parseInt(e.params[i[n]]),isNaN(e.params[i[n]]))return(0,l.H)("Rubicon: wrong format of accountId or siteId or zoneId."),!1;var r=xa(e,!0);if(!r.length)return!1;r.includes(c.pX)&&(t=function(e){var t=!0,n=Object.prototype.toString.call([]),i={mimes:n,protocols:n,linearity:Object.prototype.toString.call(0),api:n};return Object.keys(i).forEach((function(n){Object.prototype.toString.call((0,d.Z)(e,"mediaTypes.video."+n))!==i[n]&&(t=!1,(0,l.H)("Rubicon: mediaTypes.video."+n+" is required and must be of type: "+i[n]))})),t}(e));var s=[c.Mk,c.B5].filter((function(e){return r.includes(e)})).length>0;return s?t&&s:t},buildRequests:function(e,t){var n,i=[],r=[];if(n=e.filter((function(e){var t=xa(e)||[],n=t.length,i=e.params||{},r=i.bidonmultiformat,s=i.video;return 1===n&&(t.includes(c.pX)||t.includes(c.B5))||2===n&&!t.includes(c.Mk)||s&&t.includes(c.pX)||r&&(t.includes(c.pX)||t.includes(c.B5))})),n&&n.length){var s=Sa.toORTB({bidRequests:n,bidderRequest:t});r.push({method:"POST",url:"https://".concat(Ta.videoHost||"prebid-server",".rubiconproject.com/openrtb2/auction"),data:s,bidRequest:n})}var o=e.filter((function(e){var t=xa(e)||[],n=e.params||{},i=n.bidonmultiformat,r=n.video;return t.includes(c.Mk)&&(1===t.length||i||!i&&!r||!i&&r&&!t.includes(c.pX))}));if(!0!==a.vc.getConfig("rubicon.singleRequest"))i=r.concat(o.map((function(e){var n=ka.createSlotParams(e,t);return{method:"GET",url:"https://".concat(Ta.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:ka.getOrderedParams(n).reduce((function(e,t){var i=n[t];return(0,l.d8)(i)&&""!==i||(0,l.hj)(i)?"".concat(e).concat(Oa(t,i),"&"):e}),"")+"slots=1&rand=".concat(Math.random()),bidRequest:e}})));else{var d=o.reduce((function(e,t){return(e[t.params.siteId]=e[t.params.siteId]||[]).push(t),e}),{});i=r.concat(Object.keys(d).reduce((function(e,n){var i;return(i=d[n],10,i.map((function(e,t){return t%10==0?i.slice(t,t+10):null})).filter((function(e){return e}))).forEach((function(n){var i=ka.combineSlotUrlParams(n.map((function(e){return ka.createSlotParams(e,t)})));e.push({method:"GET",url:"https://".concat(Ta.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:ka.getOrderedParams(i).reduce((function(e,t){var n=i[t];return(0,l.d8)(n)&&""!==n||(0,l.hj)(n)?"".concat(e).concat(Oa(t,n),"&"):e}),"")+"slots=".concat(n.length,"&rand=").concat(Math.random()),bidRequest:n})})),e}),[]))}return i},getOrderedParams:function(e){var t=/^tg_v/,n=/^tg_i/,i=/^eid_|^tpid_/,r=["account_id","site_id","zone_id","size_id","alt_size_ids","p_pos","gdpr","gdpr_consent","us_privacy","rp_schain"].concat(Object.keys(e).filter((function(e){return i.test(e)}))).concat(["x_liverampidl","ppuid","rf","p_geo.latitude","p_geo.longitude","kw"]).concat(Object.keys(e).filter((function(e){return t.test(e)}))).concat(Object.keys(e).filter((function(e){return n.test(e)}))).concat(["tk_flint","x_source.tid","l_pb_bid_id","p_screen_res","rp_floor","rp_secure","tk_user_key"]);return r.concat(Object.keys(e).filter((function(e){return-1===r.indexOf(e)})))},combineSlotUrlParams:function(e){if(1===e.length)return e[0];var t=e.reduce((function(t,n,i){return Object.keys(n).forEach((function(r){t.hasOwnProperty(r)||(t[r]=new Array(e.length)),t[r].splice(i,1,n[r])})),t}),{}),n=new RegExp("^([^;]*)(;\\1)+$");return Object.keys(t).forEach((function(e){var i=t[e].join(";"),r=i.match(n);t[e]=r?r[1]:i})),t},createSlotParams:function(e,t){e.startTime=(new Date).getTime();var n=e.params,i=Aa(e,"banner"),r=n.latLong||[],s=(0,L.Z)(r,2),o=s[0],u=s[1],p={account_id:n.accountId,site_id:n.siteId,zone_id:n.zoneId,size_id:i[0],alt_size_ids:i.slice(1).join(",")||void 0,rp_floor:(n.floor=parseFloat(n.floor))>=.01?n.floor:void 0,rp_secure:"1",tk_flint:"".concat(Ta.int_type||"pbjs_lite","_v7.47.0"),"x_source.tid":e.transactionId,"x_imp.ext.tid":e.transactionId,l_pb_bid_id:e.bidId,p_screen_res:[window.screen.width,window.screen.height].join("x"),tk_user_key:n.userId,"p_geo.latitude":isNaN(parseFloat(o))?void 0:parseFloat(o).toFixed(4),"p_geo.longitude":isNaN(parseFloat(u))?void 0:parseFloat(u).toFixed(4),"tg_fl.eid":e.code,rf:Ca(e,t)};if("function"==typeof e.getFloor&&!Ta.disableFloors){var h;try{h=e.getFloor({currency:"USD",mediaType:"banner",size:"*"})}catch(e){(0,l.H)("Rubicon: getFloor threw an error: ",e)}p.rp_hard_floor="object"!==(0,U.Z)(h)||"USD"!==h.currency||isNaN(parseInt(h.floor))?void 0:h.floor}var f={1:"atf",3:"btf"}[(0,d.Z)(e,"mediaTypes.banner.pos")]||"";p.p_pos="atf"===n.position||"btf"===n.position?n.position:f;var g=a.vc.getConfig("user.id");return g&&(p.ppuid=g),e.userIdAsEids&&e.userIdAsEids.forEach((function(e){try{if("adserver.org"===e.source?(p.tpid_tdid=e.uids[0].id,p["eid_adserver.org"]=e.uids[0].id):"liveintent.com"===e.source?(p["tpid_liveintent.com"]=e.uids[0].id,p["eid_liveintent.com"]=e.uids[0].id,e.ext&&Array.isArray(e.ext.segments)&&e.ext.segments.length&&(p["tg_v.LIseg"]=e.ext.segments.join(","))):"liveramp.com"===e.source?p.x_liverampidl=e.uids[0].id:"id5-sync.com"===e.source?p["eid_id5-sync.com"]="".concat(e.uids[0].id,"^").concat(e.uids[0].atype,"^").concat(e.uids[0].ext&&e.uids[0].ext.linkType||""):p["eid_".concat(e.source)]="".concat(e.uids[0].id,"^").concat(e.uids[0].atype||""),!p.ppuid){var t=(0,$.sE)(e.uids,(function(e){return e.ext&&"ppuid"===e.ext.stype}));t&&t.id&&(p.ppuid=t.id)}}catch(t){(0,l.yN)("Rubicon: error reading eid:",e,t)}})),t.gdprConsent&&("boolean"==typeof t.gdprConsent.gdprApplies&&(p.gdpr=Number(t.gdprConsent.gdprApplies)),p.gdpr_consent=t.gdprConsent.consentString),t.uspConsent&&(p.us_privacy=encodeURIComponent(t.uspConsent)),p.rp_maxbids=t.bidLimit||1,function(e,t,n){var i={user:{ext:{data:wa({},e.params.visitor)}},site:{ext:{data:wa({},e.params.inventory)}}};e.params.keywords&&(i.site.keywords=(0,l.kJ)(e.params.keywords)?e.params.keywords.join(","):e.params.keywords);var r=(0,l.Ee)({},e.ortb2||{},i),s=(0,d.Z)(e.ortb2Imp,"ext")||{},o=(0,d.Z)(e.ortb2Imp,"ext.data")||{},a=(0,d.Z)(e,"ortb2Imp.ext.gpid"),u={user:[4],site:[1,2,5,6]},p={user:"tg_v.",site:"tg_i.",adserver:"tg_i.dfp_ad_unit_code",pbadslot:"tg_i.pbadslot",keywords:"kw"},h=function(e,t,i){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=function(e,t,n){return"data"===t&&Array.isArray(e)?e.filter((function(e){return e.segment&&(0,d.Z)(e,"ext.segtax")&&u[n]&&-1!==u[n].indexOf((0,d.Z)(e,"ext.segtax"))})).map((function(e){var t=e.segment.filter((function(e){return e.id})).reduce((function(e,t){return e.push(t.id),e}),[]);if(t.length>0)return t.toString()})).toString():"object"===(0,U.Z)(e)&&!Array.isArray(e)||void 0===e?void 0:Array.isArray(e)?e.filter((function(e){if("object"!==(0,U.Z)(e)&&void 0!==e)return e.toString();(0,l.yN)("Rubicon: Filtered value: ",e,"for key",t,": Expected value to be string, integer, or an array of strings/ints")})).toString():e.toString()}(e,i,t),o=p[i]&&r?"".concat(p[i]):"data"===i?"".concat(p[t],"iab"):"".concat(p[t]).concat(i);n[o]=n[o]?n[o].concat(",",s):s};t===c.Mk?(["site","user"].forEach((function(e){Object.keys(r[e]).forEach((function(t){"site"===e&&"content"===t&&r[e][t].data?h(r[e][t].data,e,"data"):"ext"!==t?h(r[e][t],e,t):r[e][t].data&&Object.keys(r[e].ext.data).forEach((function(t){h(r[e].ext.data[t],e,t,!1)}))}))})),Object.keys(o).forEach((function(e){"adserver"!==e?h(o[e],"site",e):"gam"===o[e].name&&h(o[e].adslot,name,e)})),a&&(n.p_gpid=a),n["tg_i.pbadslot"]&&delete n["tg_i.dfp_ad_unit_code"]):(Object.keys(s).length&&(0,l.Ee)(n.imp[0].ext,s),a&&(n.imp[0].ext.gpid=a),(0,l.Ee)(n,r))}(e,c.Mk,p),!0===a.vc.getConfig("coppa")&&(p.coppa=1),e.schain&&Da(e.schain)&&(p.rp_schain=ka.serializeSupplyChain(e.schain)),p},serializeSupplyChain:function(e){if(!Da(e))return"";var t=e.ver,n=e.complete,i=e.nodes;return"".concat(t,",").concat(n,"!").concat(ka.serializeSupplyChainNodes(i))},serializeSupplyChainNodes:function(e){var t=["asi","sid","hp","rid","name","domain"];return e.map((function(e){return t.map((function(t){return encodeURIComponent(e[t]||"")})).join(",")})).join("!")},interpretResponse:function(e,t){e=e.body;var n=t.data;if(!e||"object"!==(0,U.Z)(e))return[];if(e.seatbid){var i=(0,d.Z)(e,"ext.errors.rubicon");return Array.isArray(i)&&i.length>0&&(0,l.yN)("Rubicon: Error in video response"),Sa.fromORTB({request:n,response:e}).bids}var r,s=e.ads,o=0,a=t.bidRequest;return"object"===(0,U.Z)(a)&&!Array.isArray(a)&&xa(a).includes(c.pX)&&"object"===(0,U.Z)(s)&&(s=s[a.adUnitCode]),!Array.isArray(s)||s.length<1?[]:s.reduce((function(t,n,i){if(n.impression_id&&r===n.impression_id?o++:r=n.impression_id,"ok"!==n.status)return t;var s,d,u=Array.isArray(a)?a[i-o]:a;if(u&&"object"===(0,U.Z)(u)){var p={requestId:u.bidId,currency:"USD",creativeId:n.creative_id||"".concat(n.network||"","-").concat(n.advertiser||""),cpm:n.cpm||0,dealId:n.deal,ttl:300,netRevenue:!1!==Ta.netRevenue,rubicon:{advertiserId:n.advertiser,networkId:n.network},meta:{advertiserId:n.advertiser,networkId:n.network,mediaType:c.Mk}};if(n.creative_type&&(p.mediaType=n.creative_type),n.adomain&&(p.meta.advertiserDomains=Array.isArray(n.adomain)?n.adomain:[n.adomain]),n.creative_type===c.pX)p.width=u.params.video.playerWidth,p.height=u.params.video.playerHeight,p.vastUrl=n.creative_depot_url,p.impression_id=n.impression_id,p.videoCacheKey=n.impression_id;else{p.ad=(s=n.script,d=n.impression_id,"<html>\n<head><script type='text/javascript'>inDapIF=true;<\/script></head>\n<body style='margin : 0; padding: 0;'>\n\x3c!-- Rubicon Project Ad Tag --\x3e\n<div data-rp-impression-id='".concat(d,"'>\n<script type='text/javascript'>").concat(s,"<\/script>\n</div>\n</body>\n</html>"));var h=Ia[n.size_id].split("x").map((function(e){return Number(e)})),f=(0,L.Z)(h,2);p.width=f[0],p.height=f[1]}p.rubiconTargeting=(Array.isArray(n.targeting)?n.targeting:[]).reduce((function(e,t){return e[t.key]=t.values[0],e}),{rpfl_elemid:u.adUnitCode}),t.push(p)}else(0,l.H)("Rubicon: bidRequest undefined at index position:".concat(i),a,e);return t}),[]).sort((function(e,t){return(t.cpm||0)-(e.cpm||0)}))},getUserSyncs:function(e,t,n,i){if(!Ra&&e.iframeEnabled){var r={};return n&&("boolean"==typeof n.gdprApplies&&(r.gdpr=Number(n.gdprApplies)),"string"==typeof n.consentString&&(r.gdpr_consent=n.consentString)),i&&(r.us_privacy=encodeURIComponent(i)),r=Object.keys(r).length?"?".concat((0,l.Yp)(r)):"",Ra=!0,{type:"iframe",url:"https://".concat(Ta.syncHost||"eus",".rubiconproject.com/usync.html")+r}}},transformBidParams:function(e,t){return(0,l.uh)({accountId:"number",siteId:"number",zoneId:"number"},e)}};function Ca(e,t){var n;return n=e.params.referrer?e.params.referrer:t.refererInfo.page,e.params.secure?n.replace(/^http:/i,"https:"):n}function Ea(e){var t,n=document.getElementById(e.adUnitCode);(t=n.querySelector("div[id^='google_ads']"))&&t.style.setProperty("display","none"),function(e){var t=e.querySelector("script[id^='sas_script']"),n=t&&t.nextSibling;n&&"iframe"===n.localName&&n.style.setProperty("display","none")}(n);var i=e.renderer.getConfig();e.renderer.push((function(){window.MagniteApex.renderAd({width:e.width,height:e.height,vastUrl:e.vastUrl,placement:{attachTo:n,align:i.align||"center",position:i.position||"append"},closeButton:i.closeButton||!1,label:i.label||void 0,collapse:i.collapse||!0})}))}function Aa(e,t){var n=e.params;if(t===c.pX){var i=[];return n.video&&n.video.playerWidth&&n.video.playerHeight?i=[n.video.playerWidth,n.video.playerHeight]:Array.isArray((0,d.Z)(e,"mediaTypes.video.playerSize"))&&1===e.mediaTypes.video.playerSize.length?i=e.mediaTypes.video.playerSize[0]:Array.isArray(e.sizes)&&e.sizes.length>0&&Array.isArray(e.sizes[0])&&e.sizes[0].length>1&&(i=e.sizes[0]),i}var r=[];return Array.isArray(n.sizes)?r=n.sizes:void 0!==(0,d.Z)(e,"mediaTypes.banner.sizes")?r=Pa(e.mediaTypes.banner.sizes):Array.isArray(e.sizes)&&e.sizes.length>0?r=Pa(e.sizes):(0,l.yN)("Rubicon: no sizes are setup or found"),function(e){var t=[15,2,9];return e.sort((function(e,n){var i=t.indexOf(e),r=t.indexOf(n);return i>-1||r>-1?-1===i?1:-1===r?-1:i-r:e-n}))}(r)}function Pa(e){return(0,l.sF)(e).reduce((function(e,t){var n=parseInt(Ia[t],10);return n&&e.push(n),e}),[])}function xa(e){var t,n,i,r,s,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[];if(t=e,n=void 0!==(0,d.Z)(t,"mediaTypes.".concat(c.pX)),i=void 0!==(0,d.Z)(t,"mediaTypes.".concat(c.Mk)),r=void 0!==(0,d.Z)(t,"params.bidonmultiformat"),s="object"!==(0,U.Z)((0,d.Z)(t,"params.video")),n&&r||(i&&s&&(n=!1),n&&s&&(0,j.N)(t,"params.video",{}),n)){if(-1===["outstream","instream"].indexOf((0,d.Z)(e,"mediaTypes.".concat(c.pX,".context"))))return o&&(0,l.H)("Rubicon: mediaTypes.video.context must be outstream or instream"),a;if(Aa(e,c.pX).length<2)return o&&(0,l.H)("Rubicon: could not determine the playerSize of the video"),a;o&&(0,l.ji)("Rubicon: making video request for adUnit",e.adUnitCode),a.push(c.pX)}if(void 0!==(0,d.Z)(e,"mediaTypes.".concat(c.B5))&&a.push(c.B5),void 0!==(0,d.Z)(e,"mediaTypes.".concat(c.Mk))){if(0===Aa(e,c.Mk).length)return o&&(0,l.H)("Rubicon: could not determine the sizes for banner request"),a;o&&(0,l.ji)("Rubicon: making banner request for adUnit",e.adUnitCode),a.push(c.Mk)}return a}function Da(e){var t=!1,n=["asi","sid","hp"];return e.nodes?((t=e.nodes.reduce((function(e,t){return e?n.every((function(e){return t.hasOwnProperty(e)})):e}),!0))||(0,l.H)("Rubicon: required schain params missing"),t):t}function Oa(e,t){return"rp_schain"===e?"rp_schain=".concat(t):"".concat(e,"=").concat(encodeURIComponent(t))}var Ra=!1;(0,o.dX)(ka),(0,s.z)("rubiconBidAdapter");var Na=(0,se.df)({moduleType:vn.y2,moduleName:"pubCommonId"}),Ma="cookie",La="html5",Ua="_pubcid_optout",ja="PublisherCommonId";function Ba(e,t){if(t===Ma)return Na.getCookie(e);if(t===La&&Na.hasLocalStorage()){var n=Na.getDataFromLocalStorage("".concat(e,"_exp"));if(!n)return Na.getDataFromLocalStorage(e);if(new Date(n).getTime()-Date.now()>0)return Na.getDataFromLocalStorage(e)}}function qa(e,t){return function(n,i){t?Fa(t,e,(function(){n(i()||e)}))():n(e)}}function Fa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;if(e){var i=(0,l.en)(e);i.search.id=encodeURIComponent("pubcid:"+t);var r=(0,l.Q2)(i);return function(){(0,l.hq)(r,n)}}}function Va(){return!!(Na.cookiesAreEnabled()&&Ba(Ua,Ma)||Na.hasLocalStorage()&&Ba(Ua,La))}var za={name:"sharedId",aliasName:"pubCommonId",gvlid:Xo.$P,decode:function(e,t){if(!Va())return(0,l.PN)(" Decoded value PubCommonId "+e),{pubcid:e};(0,l.PN)("PubCommonId decode: Has opted-out")},getId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>2?arguments[2]:void 0;if(Va())(0,l.PN)("PubCommonId: Has opted-out");else{if(!O.VP.getCoppa()){var n=e.params,i=(n=void 0===n?{}:n).create,r=void 0===i||i,s=n.pixelUrl,o=t;if(!o){try{"object"===(0,U.Z)(window[ja])&&(o=window[ja].getId())}catch(e){}o||(o=r&&(0,l.wn)()?(0,l.DO)():void 0)}return{id:o,callback:qa(o,s)}}(0,l.PN)("PubCommonId: IDs not provided for coppa requests, exiting PubCommonId")}},extendId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>2?arguments[2]:void 0;if(Va())return(0,l.PN)("PubCommonId: Has opted-out"),{id:void 0};if(O.VP.getCoppa())(0,l.PN)("PubCommonId: IDs not provided for coppa requests, exiting PubCommonId");else{var n=e.params,i=(n=void 0===n?{}:n).extend,r=void 0!==i&&i,s=n.pixelUrl;if(r)return s?{callback:Fa(s,t)}:{id:t}}},domainOverride:function(e,t){return function(){for(var t,n,i=document.domain.split("."),r="_gd".concat(Date.now(),"_").concat("sharedId"),s=0;s<i.length;s++){var o=i.slice(s).join(".");if(e.setCookie(r,"1",void 0,void 0,o),n=e.getCookie(r),e.setCookie(r,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,o),"1"!==n)return t;t=o}}}(Na)};function $a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ha(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(0,D.Bx)("userId",za),(0,s.z)("sharedIdSystem");var Wa="sharethrough",Za="https://btlr.sharethrough.com/universal/v1?supply_id=".concat("WYu2BXv1"),Ga=function(){return window.location.protocol},Xa={code:Wa,supportedMediaTypes:[c.pX,c.Mk],gvlid:80,isBidRequestValid:function(e){return!!e.params.pkey&&e.bidder===Wa},buildRequests:function(e,t){var n=t.timeout,i=t.ortb2||{},r=Ga().indexOf("http")<0||Ga().indexOf("https")>-1,s={id:(0,l.DO)(),at:1,cur:["USD"],tmax:n,site:Ha({domain:(0,d.Z)(t,"refererInfo.domain",window.location.hostname),page:(0,d.Z)(t,"refererInfo.page",window.location.href),ref:(0,d.Z)(t,"refererInfo.ref")},i.site),device:{ua:navigator.userAgent,language:navigator.language,js:1,dnt:"1"===navigator.doNotTrack?1:0,h:window.screen.height,w:window.screen.width},regs:{coppa:!0===a.vc.getConfig("coppa")?1:0,ext:{}},source:{tid:t.auctionId,ext:{version:"7.47.0",str:"4.3.0",schain:e[0].schain}},bcat:(0,d.Z)(t.ortb2,"bcat")||e[0].params.bcat||[],badv:(0,d.Z)(t.ortb2,"badv")||e[0].params.badv||[],test:0};if(s.user=Ja(i.user,{}),s.user.ext||(s.user.ext={}),s.user.ext.eids=e[0].userIdAsEids||[],t.gdprConsent){var o=!0===t.gdprConsent.gdprApplies;s.regs.ext.gdpr=o?1:0,o&&(s.user.ext.consent=t.gdprConsent.consentString)}return t.uspConsent&&(s.regs.ext.us_privacy=t.uspConsent),e.map((function(e){var t={ext:{}},n=(0,d.Z)(e,"ortb2Imp.ext.tid");n&&(t.ext.tid=n);var i=(0,d.Z)(e,"ortb2Imp.ext.gpid",(0,d.Z)(e,"ortb2Imp.ext.data.pbadslot"));i&&(t.ext.gpid=i);var s,o,a,c,u=(0,d.Z)(e,"mediaTypes.video");if(u){var p=640,h=360;if(u.playerSize&&u.playerSize[0]&&u.playerSize[1]){var f=(0,L.Z)(u.playerSize,2);p=f[0],h=f[1]}t.video={pos:Ja(u.pos,0),topframe:(0,l.yL)()?0:1,skip:Ja(u.skip,0),linearity:Ja(u.linearity,1),minduration:Ja(u.minduration,5),maxduration:Ja(u.maxduration,60),playbackmethod:u.playbackmethod||[2],api:(a=u,c=a.api,c&&Array.isArray(c)&&c.length>0?c:[2]),mimes:u.mimes||["video/mp4"],protocols:(s=u,o=s.protocols,o&&Array.isArray(o)&&o.length>0?o:[2,3,5,6,7,8]),w:p,h,startdelay:Ja(u.startdelay,0),skipmin:Ja(u.skipmin,0),skipafter:Ja(u.skipafter,0),placement:"instream"===u.context?1:+(0,d.Z)(u,"placement",4)},u.delivery&&(t.video.delivery=u.delivery),u.companiontype&&(t.video.companiontype=u.companiontype),u.companionad&&(t.video.companionad=u.companionad)}else t.banner={pos:(0,d.Z)(e,"mediaTypes.banner.pos",0),topframe:(0,l.yL)()?0:1,format:e.sizes.map((function(e){return{w:+e[0],h:+e[1]}}))};return Ha({id:e.bidId,tagid:String(e.params.pkey),secure:r?1:0,bidfloor:Ka(e)},t)})).filter((function(e){return!!e})).map((function(e){return{method:"POST",url:Za,data:Ha(Ha({},s),{},{imp:[e]})}}))},interpretResponse:function(e,t){var n=e.body;return n&&n.seatbid&&0!==n.seatbid.length&&n.seatbid[0].bid&&0!==n.seatbid[0].bid.length?n.seatbid[0].bid.map((function(e){var i={requestId:e.impid,width:+e.w,height:+e.h,cpm:+e.price,creativeId:e.crid,dealId:e.dealid||null,mediaType:t.data.imp[0].video?c.pX:c.Mk,currency:n.cur||"USD",netRevenue:!0,ttl:360,ad:e.adm,nurl:e.nurl,meta:{advertiserDomains:e.adomain||[]}};return i.mediaType===c.pX&&(i.ttl=3600,i.vastXml=e.adm),i})):[]},getUserSyncs:function(e,t){return e.pixelEnabled&&void 0!==(0,d.Z)(t,"0.body.cookieSyncUrls")?t[0].body.cookieSyncUrls.map((function(e){return{type:"image",url:e}})):[]},onTimeout:function(e){},onBidWon:function(e){},onSetTargeting:function(e){}};function Ka(e){var t=null;if("function"==typeof e.getFloor){var n=e.getFloor({currency:"USD",mediaType:e.mediaTypes&&e.mediaTypes.video?"video":"banner",size:e.sizes.map((function(e){return{w:e[0],h:e[1]}}))});"object"!==(0,U.Z)(n)||"USD"!==n.currency||isNaN(parseFloat(n.floor))||(t=parseFloat(n.floor))}return null!==t?t:e.params.floor}function Ja(e,t){return null==e?t:e}(0,o.dX)(Xa),(0,s.z)("sharethroughBidAdapter");var Ya={code:"smartadserver",gvlid:45,aliases:["smart"],supportedMediaTypes:[c.Mk,c.pX],isBidRequestValid:function(e){return!!(e.params&&e.params.siteId&&e.params.pageId&&e.params.formatId)},serializeSupplyChain:function(e){if(!e||!e.nodes)return null;var t=["asi","sid","hp","rid","name","domain"];return"".concat(e.ver,",").concat(e.complete,"!")+e.nodes.map((function(e){return t.map((function(t){return e[t]?encodeURIComponent(e[t]):""})).join(",")})).join("!")},adaptBannerSizes:function(e){return e.map((function(e){return{w:e[0],h:e[1]}}))},fillPayloadForVideoBidRequest:function(e,t,n){var i=t.playerSize[0];e.isVideo="instream"===t.context,e.mediaType=c.pX,e.videoData={videoProtocol:this.getProtocolForVideoBidRequest(t,n),playerWidth:i[0],playerHeight:i[1],adBreak:this.getStartDelayForVideoBidRequest(t,n)}},getProtocolForVideoBidRequest:function(e,t){return void 0!==t&&t.protocol?t.protocol:void 0!==e&&Array.isArray(e.protocols)?Math.max.apply(Math,e.protocols):null},getStartDelayForVideoBidRequest:function(e,t){if(void 0!==t&&t.startDelay)return t.startDelay;if(void 0!==e){if(0==e.startdelay)return 1;if(-1==e.startdelay)return 2;if(-2==e.startdelay)return 3}return 2},createServerRequest:function(e,t){return{method:"POST",url:(void 0!==t?t:"https://prg.smartadserver.com")+"/prebid/v1",data:JSON.stringify(e)}},buildRequests:function(e,t){var n=a.vc.getConfig("currency.adServerCurrency"),i=(0,d.Z)(t,"ortb2.user.data",a.vc.getAnyConfig("ortb2.user.data")),r=(0,d.Z)(t,"ortb2.site.content.data",a.vc.getAnyConfig("ortb2.site.content.data"));return e.reduce((function(e,s){var o={siteid:s.params.siteId,pageid:s.params.pageId,formatid:s.params.formatId,currencyCode:n,targeting:s.params.target&&""!==s.params.target?s.params.target:void 0,buid:s.params.buId&&""!==s.params.buId?s.params.buId:void 0,appname:s.params.appName&&""!==s.params.appName?s.params.appName:void 0,ckid:s.params.ckId||0,tagId:s.adUnitCode,pageDomain:t&&t.refererInfo&&t.refererInfo.page?t.refererInfo.page:void 0,transactionId:s.transactionId,timeout:a.vc.getConfig("bidderTimeout"),bidId:s.bidId,prebidVersion:"7.47.0",schain:Ya.serializeSupplyChain(s.schain),sda:i,sdc:r};t&&(t.gdprConsent&&(o.addtl_consent=t.gdprConsent.addtlConsent,o.gdpr_consent=t.gdprConsent.consentString,o.gdpr=t.gdprConsent.gdprApplies),t.gppConsent&&(o.gpp=t.gppConsent.gppString,o.gpp_sid=t.gppConsent.applicableSections),t.uspConsent&&(o.us_privacy=t.uspConsent)),s&&s.userIdAsEids&&(o.eids=s.userIdAsEids),t&&t.uspConsent&&(o.us_privacy=t.uspConsent);var u=(0,d.Z)(s,"mediaTypes.banner"),p=(0,d.Z)(s,"mediaTypes.video"),h=p&&("instream"===p.context||"outstream"===p.context);if(u||h){var f;if(u){if(f=c.Mk,o.sizes=Ya.adaptBannerSizes(u.sizes),h){var g=(0,l.I8)(o);Ya.fillPayloadForVideoBidRequest(g,p,s.params.video),g.bidfloor=s.params.bidfloor||Ya.getBidFloor(s,n,c.pX),e.push(Ya.createServerRequest(g,s.params.domain))}}else f=c.pX,Ya.fillPayloadForVideoBidRequest(o,p,s.params.video);o.bidfloor=s.params.bidfloor||Ya.getBidFloor(s,n,f),e.push(Ya.createServerRequest(o,s.params.domain))}else e.push({});return e}),[])},interpretResponse:function(e,t){var n=[],i=e.body;try{if(i&&!i.isNoAd&&(i.ad||i.adUrl)){var r=JSON.parse(t.data),s={requestId:r.bidId,cpm:i.cpm,width:i.width,height:i.height,creativeId:i.creativeId,dealId:i.dealId,currency:i.currency,netRevenue:i.isNetCpm,ttl:i.ttl,dspPixels:i.dspPixels,meta:{advertiserDomains:i.adomain?i.adomain:[]}};r.mediaType===c.pX?(s.mediaType=c.pX,s.vastUrl=i.adUrl,s.vastXml=i.ad,s.content=i.ad):(s.adUrl=i.adUrl,s.ad=i.ad),n.push(s)}}catch(e){(0,l.H)("Error while parsing smart server response",e)}return n},getBidFloor:function(e,t,n){if(!(0,l.LQ)(e.getFloor))return 0;var i=e.getFloor({currency:t||"USD",mediaType:n,size:"*"});return(0,l.PO)(i)&&!isNaN(i.floor)?i.floor:0},getUserSyncs:function(e,t){var n=[];return e.iframeEnabled&&t.length>0&&null!=t[0].body.cSyncUrl?n.push({type:"iframe",url:t[0].body.cSyncUrl}):e.pixelEnabled&&t.length>0&&void 0!==t[0].body.dspPixels&&t[0].body.dspPixels.forEach((function(e){n.push({type:"image",url:e})})),n}};function Qa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ed(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qa(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(0,o.dX)(Ya),(0,s.z)("smartadserverBidAdapter");var td="teads",nd=12,id=11,rd=0,sd=22,od=(0,se.df)({bidderCode:td}),ad={code:td,gvlid:132,supportedMediaTypes:["video","banner"],isBidRequestValid:function(e){var t=!1;if(void 0!==e.params){var n=ud((0,l.NA)(e.params,"placementId")),i=ud((0,l.NA)(e.params,"pageId"));t=n&&i}return t||(0,l.H)("Teads placementId and pageId parameters are required. Bid aborted."),t},buildRequests:function(e,t){var n,i=e.map(cd),r=ed(ed({referrer:dd(t),pageReferrer:document.referrer,networkBandwidth:(n=window.navigator,n&&n.connection&&n.connection.downlink>=0?n.connection.downlink.toString():""),timeToFirstByte:ld(window),data:i,deviceWidth:screen.width,hb_version:"7.47.0"},function(e){var t={unifiedId2:"uid2.id",liveRampId:"idl_env",lotamePanoramaId:"lotamePanoramaId",id5Id:"id5id.uid",criteoId:"criteoId",yahooConnectId:"connectId",quantcastId:"quantcastId",epsilonPublisherLinkId:"publinkId",publisherFirstPartyViewerId:"pubcid",merkleId:"merkleId.id",kinessoId:"kpuid"},n={};for(var i in t){var r=t[i],s=(0,d.Z)(e,"0.userId.".concat(r));s&&(n[i]=s)}return n}(e)),function(e){var t=(0,d.Z)(e,"0.userId.teadsId");if(t)return{firstPartyCookieTeadsId:t};if(od.cookiesAreEnabled(null)){var n=od.getCookie("_tfpvi",null);if(n)return{firstPartyCookieTeadsId:n}}return{}}(e)),s=e[0];s.schain&&(r.schain=s.schain);var o=t.gdprConsent;if(t&&o){var a="boolean"==typeof o.gdprApplies,l="string"==typeof o.consentString,c=a?function(e,t){var n=nd;return e?t&&!t.isServiceSpecific&&(n=id):n=rd,n}(o.gdprApplies,o.vendorData):sd;r.gdpr_iab={consent:l?o.consentString:"",status:c,apiVersion:o.apiVersion}}t&&t.uspConsent&&(r.us_privacy=t.uspConsent);var u=(0,d.Z)(s,"ortb2.device.sua");return u&&(r.userAgentClientHints=u),{method:"POST",url:"https://a.teads.tv/hb/bid-request",data:JSON.stringify(r)}},interpretResponse:function(e,t){var n=[];return(e=e.body).responses&&e.responses.forEach((function(e){var t={cpm:e.cpm,width:e.width,height:e.height,currency:e.currency,netRevenue:!0,ttl:e.ttl,meta:{advertiserDomains:e&&e.adomain?e.adomain:[]},ad:e.ad,requestId:e.bidId,creativeId:e.creativeId,placementId:e.placementId};e.dealId&&(t.dealId=e.dealId),n.push(t)})),n}};function dd(e){var t="";return e&&e.refererInfo&&e.refererInfo.page&&(t=e.refererInfo.page),t}function ld(e){var t=e.performance||e.webkitPerformance||e.msPerformance||e.mozPerformance,n=t&&"function"==typeof t.getEntriesByType&&"[object Function]"===Object.prototype.toString.call(t.getEntriesByType)&&t.getEntriesByType("navigation")[0]&&t.getEntriesByType("navigation")[0].responseStart&&t.getEntriesByType("navigation")[0].requestStart&&t.getEntriesByType("navigation")[0].responseStart>0&&t.getEntriesByType("navigation")[0].requestStart>0&&Math.round(t.getEntriesByType("navigation")[0].responseStart-t.getEntriesByType("navigation")[0].requestStart);if(n)return n.toString();var i=t&&t.timing.responseStart&&t.timing.requestStart&&t.timing.responseStart>0&&t.timing.requestStart>0&&t.timing.responseStart-t.timing.requestStart;return i?i.toString():""}function cd(e){var t={},n=(0,l.NA)(e.params,"placementId"),i=(0,l.NA)(e.params,"pageId"),r=(0,d.Z)(e,"ortb2Imp.ext.gpid");return t.sizes=function(e){return(0,l.sF)(function(e){var t=(0,d.Z)(e,"mediaTypes.video.playerSize"),n=(0,d.Z)(e,"mediaTypes.video.sizes"),i=(0,d.Z)(e,"mediaTypes.banner.sizes");return(0,l.kJ)(i)||(0,l.kJ)(t)||(0,l.kJ)(n)?[i,n,t].reduce((function(e,t){return(0,l.kJ)(t)&&((0,l.kJ)(t[0])?t.forEach((function(t){e.push(t)})):e.push(t)),e}),[]):e.sizes}(e))}(e),t.bidId=(0,l.An)("bidId",e),t.bidderRequestId=(0,l.An)("bidderRequestId",e),t.placementId=parseInt(n,10),t.pageId=parseInt(i,10),t.adUnitCode=(0,l.An)("adUnitCode",e),t.auctionId=(0,l.An)("auctionId",e),t.transactionId=(0,l.An)("transactionId",e),r&&(t.gpid=r),t}function ud(e){return parseInt(e)>0}function pd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function hd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pd(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(0,o.dX)(ad),(0,s.z)("teadsBidAdapter");var fd="triplelift",gd=!0,md=null,yd=(0,se.df)({bidderCode:fd}),vd={gvlid:28,code:fd,supportedMediaTypes:[c.Mk,c.pX],isBidRequestValid:function(e){return void 0!==e.params.inventoryCode},buildRequests:function(e,t){var n="https://tlx.3lift.com/header/auction?",i=function(e,t){var n,i,r={},s=e[0].schain,o=function(e){var t={},n={},i={},r=e.ortb2||{},s=function(){var e=yd.getDataFromLocalStorage("opecloud_ctx");if(!e)return null;try{return JSON.parse(e)}catch(e){return(0,l.H)("Triplelift: error parsing JSON: ",e),null}}(),o=Object.assign({},r.site),a=Object.assign({},r.user);if(s){a.data=a.data||[];try{a.data.push({name:"www.1plusx.com",ext:s})}catch(e){(0,l.H)("Triplelift: error adding 1plusX segments: ",e)}}return Id(n,o),Id(i,a),(0,l.xb)(n)||(t.context=n),(0,l.xb)(i)||(t.user=i),t}(t);r.imp=e.map((function(e,t){var n,i,r,s,o={id:t,tagid:e.params.inventoryCode,floor:Td(e)};return bd(e)&&(o.video=function(e){var t=hd(hd({},e.params.video),e.mediaTypes.video);try{t.w||(t.w=t.playerSize[0][0]),t.h||(t.h=t.playerSize[0][1])}catch(e){(0,l.yN)("Video size not defined",e)}return"instream"===t.context&&(t.placement=1),"outstream"===t.context&&(t.placement?-1===[3,4,5].indexOf(t.placement)&&((0,l.ji)("video.placement value of ".concat(t.placement," is invalid for outstream context. Setting placement to 3")),t.placement=3):t.placement=3),t.playbackmethod&&Number.isInteger(t.playbackmethod)&&(t.playbackmethod=Array.from(String(t.playbackmethod),Number)),delete t.playerSize,t}(e)),e.mediaTypes.banner&&!_d(e)&&(o.banner={format:(s=e.sizes,s.filter(Cd).map((function(e){return{w:e[0],h:e[1]}})))}),(0,l.xb)(e.ortb2Imp)||(o.fpd=(n=e.ortb2Imp,i={},Id(r={},n.ext),(0,l.xb)(r)||(i.context=r),i)),o}));var a=[].concat((0,M.Z)(Sd([e[0]],"tdid","adserver.org","TDID")),(0,M.Z)(function(e){return Sd(e,"idl_env","liveramp.com","idl")}([e[0]])),(0,M.Z)(function(e){return Sd(e,"criteoId","criteo.com","criteoId")}([e[0]])),(0,M.Z)(function(e){return Sd(e,"pubcid","pubcid.org","pubcid")}([e[0]])),(0,M.Z)(function(e){var t=["adserver.org","liveramp.com","criteo.com","pubcid.org"],n=[];return e.userIdAsEids&&e.userIdAsEids.forEach((function(e){try{if(-1===t.indexOf(e.source)){var i=e.uids.map((function(t){return{id:t.id,ext:{rtiPartner:e.source}}}));n.push({source:e.source,uids:i})}}catch(t){(0,l.yN)("Triplelift: Error attempting to add ".concat(e," to bid request"),t)}})),n}(e[0])));a.length>0&&(r.user={ext:{eids:a}});var d=function(e,t){var n={};return(0,l.xb)(e)||(n.schain=hd({},e)),(0,l.xb)(t)||(n.fpd=hd({},t)),n}(s,o);return(0,l.xb)(d)||(r.ext=d),null!=t&&null!==(n=t.ortb2)&&void 0!==n&&null!==(i=n.regs)&&void 0!==i&&i.gpp&&(r.regs=Object.assign({},t.ortb2.regs)),r}(e,t);if(n=(0,l.t0)(n,"lib","prebid"),n=(0,l.t0)(n,"v","7.47.0"),t&&t.refererInfo){var r=t.refererInfo.page;n=(0,l.t0)(n,"referrer",r)}return t&&t.timeout&&(n=(0,l.t0)(n,"tmax",t.timeout)),t&&t.gdprConsent&&(void 0!==t.gdprConsent.gdprApplies&&(gd=t.gdprConsent.gdprApplies,n=(0,l.t0)(n,"gdpr",gd.toString())),void 0!==t.gdprConsent.consentString&&(md=t.gdprConsent.consentString,n=(0,l.t0)(n,"cmp_cs",md))),t&&t.uspConsent&&(n=(0,l.t0)(n,"us_privacy",t.uspConsent)),!0===a.vc.getConfig("coppa")&&(n=(0,l.t0)(n,"coppa",!0)),n.lastIndexOf("&")===n.length-1&&(n=n.substring(0,n.length-1)),(0,l.ji)("tlCall request built: "+n),{method:"POST",url:n,data:i,bidderRequest:t}},interpretResponse:function(e,t){var n=t.bidderRequest;return(e.body.bids||[]).map((function(e){return function(e,t){var n={},i=t.width||1,r=t.height||1,s=t.deal_id||"",o=t.crid||"",a=e.bids[t.imp_id];return 0!=t.cpm&&t.ad&&(n={requestId:a.bidId,cpm:t.cpm,width:i,height:r,netRevenue:!0,ad:t.ad,creativeId:o,dealId:s,currency:"USD",ttl:300,tl_source:t.tl_source,meta:{}},bd(a)&&"video"===t.media_type&&(n.vastXml=t.ad,n.mediaType="video",n.ttl=3600),t.advertiser_name&&(n.meta.advertiserName=t.advertiser_name),t.adomain&&t.adomain.length&&(n.meta.advertiserDomains=t.adomain),t.tl_source&&"hdx"==t.tl_source&&(bd(a)&&"video"===t.media_type?n.meta.mediaType="video":n.meta.mediaType="banner"),t.tl_source&&"tlx"==t.tl_source&&(n.meta.mediaType="native"),o&&(n.meta.networkId=o.slice(0,o.indexOf("_")))),n}(n,e)}))},getUserSyncs:function(e,t,n,i){var r=function(e){if(e)return e.iframeEnabled?"iframe":e.pixelEnabled?"image":void 0}(e);if(r){var s="https://eb2.3lift.com/sync?";return"image"===r&&(s=(0,l.t0)(s,"px",1),s=(0,l.t0)(s,"src","prebid")),null!==md&&(s=(0,l.t0)(s,"gdpr",gd),s=(0,l.t0)(s,"cmp_cs",md)),i&&(s=(0,l.t0)(s,"us_privacy",i)),[{type:r,url:s}]}}};function bd(e){return wd(e)&&(_d(e)||function(e){return wd(e)&&"outstream"===e.mediaTypes.video.context.toLowerCase()}(e))}function _d(e){return wd(e)&&"instream"===e.mediaTypes.video.context.toLowerCase()}function wd(e){return e.mediaTypes.video&&e.mediaTypes.video.context}function Td(e){var t=null;if("function"==typeof e.getFloor)try{var n=e.getFloor({currency:"USD",mediaType:bd(e)?"video":"banner",size:"*"});"object"!==(0,U.Z)(n)||"USD"!==n.currency||isNaN(parseFloat(n.floor))||(t=parseFloat(n.floor))}catch(e){(0,l.H)("Triplelift: getFloor threw an error: ",e)}return null!==t?t:e.params.floor}function Id(e,t){(0,l.xb)(t)||Object.keys(t).forEach((function(n){null!=t[n]&&(e[n]=t[n])}))}function Sd(e,t,n,i){return e.map(function(e){return function(t){return t&&t.userId&&t.userId[e]}}(t)).filter(kd(t)).map(function(e,t){return function(n){return{source:e,uids:[{id:n.id?n.id:n,ext:{rtiPartner:t}}]}}}(n,i))}var kd=function(e){return function(t,n,i){var r=!!t&&((0,l.d8)(t)?!!t:(0,l.PO)(t)&&!(0,l.kJ)(t)&&!(0,l.xb)(t)&&t.id&&(0,l.d8)(t.id)&&!!t.id);return r||void 0===i[0]||(0,l.yN)("Triplelift: invalid ".concat(e," userId format")),r}};function Cd(e){return 2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}(0,o.dX)(vd),(0,s.z)("tripleliftBidAdapter");var Ed="unifiedId",Ad={name:Ed,gvlid:21,decode:function(e){return e&&"string"==typeof e.TDID?{tdid:e.TDID}:void 0},getId:function(e){var t=e&&e.params||{};if(t&&("string"==typeof t.partner||"string"==typeof t.url)){var n=t.url||"https://match.adsrvr.org/track/rid?ttd_pid=".concat(t.partner,"&fmt=json");return{callback:function(e){var t={success:function(t){var n;if(t)try{n=JSON.parse(t)}catch(e){(0,l.H)(e)}e(n)},error:function(t){(0,l.H)("".concat(Ed,": ID fetch encountered an error"),t),e()}};(0,x.h)(n,t,void 0,{method:"GET",withCredentials:!0})}}}(0,l.H)("User ID - unifiedId submodule requires either partner or url to be defined")}};(0,D.Bx)("userId",Ad),(0,s.z)("unifiedIdSystem");var Pd=["bids","bidderRequestId","auctionId","bidderCode"];function xd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Dd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xd(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Od={code:"unruly",supportedMediaTypes:[c.pX,c.Mk],gvlid:36,isBidRequestValid:function(e){var t=(0,d.Z)(e,"params.siteId")&&function(e){var t=(0,d.Z)(e,"mediaTypes.video"),n=(0,d.Z)(e,"mediaTypes.banner"),i=!(!t&&!n);return i&&t&&(i=function(e){return!!e.context&&-1!==["outstream","instream"].indexOf(e.context)}(t)),i&&n&&(i=function(e){return e.sizes}(n)),i}(e);return!!t},buildRequests:function(e,t){var n="https://targeting.unrulymedia.com/unruly_prebid";return e[0]&&(n=(0,d.Z)(e[0],"params.endpoint")||n),function(e,t,n){n.bids,n.bidderRequestId,n.auctionId,n.bidderCode;var i=zt(n,Pd),r=n.bids.length-t.length,s={};t.forEach((function(e){var t=e.params.siteId;!function(e){Object.keys(e.mediaTypes).forEach((function(t){var n;n="function"==typeof e.getFloor?e.getFloor({currency:"USD",mediaType:t,size:"*"}).floor||0:e.params.floor||0,e.mediaTypes[t].floor=n}))}(e),function(e){var t=(0,d.Z)(e,"mediaTypes.banner");if(t){var n={},i=[];t.sizes.forEach((function(e){n[e.toString()]||(n[e.toString()]=!0,i.push(e))})),t.sizes=i}}(e),s[t]=s[t]||[],s[t].push(e)}));var o=[];return Object.keys(s).forEach((function(t){var n={bidderRequest:Object.assign({},Dd({bids:s[t],invalidBidsCount:r},i))};o.push(Object.assign({},Dd({data:n},e)))})),o}({url:n,method:"POST",options:{contentType:"application/json"}},e,t)},interpretResponse:function(){var e,t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).body;return n&&n.bids?(e=n.bids,t=[],e.forEach((function(e){var n,i=(0,d.Z)(e,"meta.mediaType");if(i&&"banner"===i.toLowerCase())e.mediaType=c.Mk,n=function(e){if(e.ad)return e;(0,l.H)(new Error("UnrulyBidAdapter: Missing ad config."))}(e);else if(i&&"video"===i.toLowerCase()){var r=(0,d.Z)(e,"meta.videoContext");e.mediaType=c.pX,"instream"===r?n=function(e){if(e.vastUrl||e.vastXml)return e;(0,l.H)(new Error("UnrulyBidAdapter: Missing vastUrl or vastXml config."))}(e):"outstream"===r&&(n=function(e){var t=!!(0,d.Z)(e,"ext.renderer.config"),n=!!(0,d.Z)(e,"ext.renderer.config.siteId");if(t){if(n){var i=(0,d.Z)(e,"ext.renderer");!function(e,t){if(!e.config)throw new Error("UnrulyBidAdapter: Missing renderer config.");if(!e.config.siteId)throw new Error("UnrulyBidAdapter: Missing renderer siteId.");parent.window.unruly=parent.window.unruly||{},parent.window.unruly.native=parent.window.unruly.native||{},parent.window.unruly.native.siteId=parent.window.unruly.native.siteId||e.config.siteId,parent.window.unruly.native.adSlotId=t,parent.window.unruly.native.supplyMode="prebid"}(i,e.requestId),parent.window.unruly.native.prebid=parent.window.unruly.native.prebid||{},parent.window.unruly.native.prebid.uq=parent.window.unruly.native.prebid.uq||[];var r=B.Th.install(Object.assign({},i)),s=Object.assign({},e,{renderer:r,adUnitCode:(0,d.Z)(e,"ext.adUnitCode")});return r.setRender((function(){var e;e=s,parent.window.unruly.native.prebid.uq.push(["render",e])})),e.renderer=e.renderer||r,e}(0,l.H)(new Error("UnrulyBidAdapter: Missing renderer siteId."))}else(0,l.H)(new Error("UnrulyBidAdapter: Missing renderer config."))}(e))}n&&t.push(n)})),t):[]}};(0,o.dX)(Od),(0,s.z)("unrulyBidAdapter");var Rd={growthCodeId:{getValue:function(e){return e.gc_id},source:"growthcode.io",atype:1,getUidExt:function(e){var t=(0,l.ei)(e,["h1","h2","h3"]);if(Object.keys(t).length)return t}},trustpid:{source:"trustpid.com",atype:1,getValue:function(e){return e}},intentIqId:{source:"intentiq.com",atype:1},naveggId:{source:"navegg.com",atype:1},pairId:{source:"google.com",atype:571187},justId:{source:"justtag.com",atype:1},pubcid:{source:"pubcid.org",atype:1},tdid:{source:"adserver.org",atype:1,getUidExt:function(){return{rtiPartner:"TDID"}}},id5id:{getValue:function(e){return e.uid},source:"id5-sync.com",atype:1,getUidExt:function(e){if(e.ext)return e.ext}},ftrackId:{source:"flashtalking.com",atype:1,getValue:function(e){var t="";return e&&e.ext&&e.ext.DeviceID&&(t=e.ext.DeviceID),t},getUidExt:function(e){return e&&e.ext}},parrableId:{source:"parrable.com",atype:1,getValue:function(e){return e.eid?e.eid:e.ccpaOptout?"":null},getUidExt:function(e){var t=(0,l.ei)(e,["ibaOptout","ccpaOptout"]);if(Object.keys(t).length)return t}},idl_env:{source:"liveramp.com",atype:3},lipb:{getValue:function(e){return e.lipbid},source:"liveintent.com",atype:3,getEidExt:function(e){if(Array.isArray(e.segments)&&e.segments.length)return{segments:e.segments}}},bidswitch:{source:"bidswitch.net",atype:3,getValue:function(e){return e.id}},medianet:{source:"media.net",atype:3,getValue:function(e){return e.id}},britepoolid:{source:"britepool.com",atype:3},dmdId:{source:"hcn.health",atype:3},lotamePanoramaId:{source:"crwdcntrl.net",atype:1},criteoId:{source:"criteo.com",atype:1},merkleId:{atype:3,getSource:function(e){var t;return null!=e&&null!==(t=e.ext)&&void 0!==t&&t.ssp?"".concat(e.ext.ssp,".merkleinc.com"):"merkleinc.com"},getValue:function(e){return e.id},getUidExt:function(e){return e.keyID?{keyID:e.keyID}:e.ext?e.ext:void 0}},netId:{source:"netid.de",atype:1},IDP:{source:"zeotap.com",atype:1},hadronId:{source:"audigent.com",atype:1},quantcastId:{source:"quantcast.com",atype:1},idx:{source:"idx.lat",atype:1},connectid:{source:"verizonmedia.com",atype:3},fabrickId:{source:"neustar.biz",atype:1},mwOpenLinkId:{source:"mediawallahscript.com",atype:1},tapadId:{source:"tapad.com",atype:1},novatiq:{getValue:function(e){return void 0===e.snowflake.id?e.snowflake:e.snowflake.id},source:"novatiq.com"},uid2:{source:"uidapi.com",atype:3,getValue:function(e){return e.id}},deepintentId:{source:"deepintent.com",atype:3},admixerId:{source:"admixer.net",atype:3},adtelligentId:{source:"adtelligent.com",atype:3},amxId:{source:"amxdt.net",atype:1},publinkId:{source:"epsilon.com",atype:3},kpuid:{source:"kpuid.com",atype:3},imppid:{source:"ppid.intimatemerger.com",atype:1},imuid:{source:"intimatemerger.com",atype:1},connectId:{source:"yahoo.com",atype:3},qid:{source:"adquery.io",atype:1},dacId:{source:"impact-ad.jp",atype:1},"33acrossId":{source:"33across.com",atype:1,getValue:function(e){return e.envelope}},tncid:{source:"thenewco.it",atype:3},gravitompId:{source:"gravito.net",atype:1},czechAdId:{source:"czechadid.cz",atype:1},oneKeyData:{getValue:function(e){if(e&&Array.isArray(e.identifiers)&&e.identifiers[0])return e.identifiers[0].value},source:"paf",atype:1,getEidExt:function(e){if(e&&e.preferences)return{preferences:e.preferences}},getUidExt:function(e){if(e&&Array.isArray(e.identifiers)&&e.identifiers[0]){var t=e.identifiers[0];return{version:t.version,type:t.type,source:t.source}}}}};function Nd(e,t){var n=Rd[t];if(n&&e){var i={};i.source=(0,l.LQ)(n.getSource)?n.getSource(e):n.source;var r=(0,l.LQ)(n.getValue)?n.getValue(e):e;if((0,l.d8)(r)){var s={id:r,atype:n.atype};if((0,l.LQ)(n.getUidExt)){var o=n.getUidExt(e);o&&(s.ext=o)}if(i.uids=[s],(0,l.LQ)(n.getEidExt)){var a=n.getEidExt(e);a&&(i.ext=a)}return i}}return null}function Md(e){var t=[],n=function(n){if(e.hasOwnProperty(n))if("pubProvidedId"===n)t=t.concat(e.pubProvidedId);else if(Array.isArray(e[n]))e[n].forEach((function(e,i,r){var s=Nd(e,n);s&&t.push(s)}));else{var i=Nd(e[n],n);i&&t.push(i)}};for(var i in e)n(i);return t}var Ld,Ud,jd,Bd,qd,Fd,Vd=(0,D.z3)("sync",(function(){})),zd=n(1761),$d="User ID",Hd=se.c$,Wd=se.Dp,Zd="_pbjs_userid_consent_data",Gd=30,Xd="_pbjs_id_optout",Kd=(0,se.eA)("userid"),Jd=!1,Yd=[],Qd=[],el=[],tl=function(){return null==Fd&&(Fd=(0,ze.V6)()),Fd};function nl(e){return tl().fork().renameWith((function(t){return["userId.mod.".concat(t),"userId.mods.".concat(e,".").concat(t)]}))}function il(e){var t="function"==typeof e.submodule.domainOverride?e.submodule.domainOverride():null,n=e.config.storage.name;return function(e,i,r){Kd.setCookie(n+(e||""),i,r,"Lax",t)}}function rl(e,t){var n=e.config.storage;try{var i=new Date(Date.now()+864e5*n.expires).toUTCString(),r=(0,l.PO)(t)?JSON.stringify(t):t;if(n.type===Hd){var s=il(e);s(null,r,i),"number"==typeof n.refreshInSeconds&&s("_last",(new Date).toUTCString(),i)}else n.type===Wd&&(Kd.setDataInLocalStorage("".concat(n.name,"_exp"),i),Kd.setDataInLocalStorage(n.name,encodeURIComponent(r)),"number"==typeof n.refreshInSeconds&&Kd.setDataInLocalStorage("".concat(n.name,"_last"),(new Date).toUTCString()))}catch(e){(0,l.H)(e)}}function sl(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=n?"".concat(e.name,"_").concat(n):e.name;try{if(e.type===Hd)t=Kd.getCookie(i);else if(e.type===Wd){var r=Kd.getDataFromLocalStorage("".concat(e.name,"_exp"));""===r?t=Kd.getDataFromLocalStorage(i):r&&new Date(r).getTime()-Date.now()>0&&(t=decodeURIComponent(Kd.getDataFromLocalStorage(i)))}"string"==typeof t&&"{"===t.trim().charAt(0)&&(t=JSON.parse(t))}catch(e){(0,l.H)(e)}return t}function ol(e){var t={consentString:"",gdprApplies:!1,apiVersion:0};return e&&(t.consentString=e.consentString,t.gdprApplies=e.gdprApplies,t.apiVersion=e.apiVersion),(0,l._R)(JSON.stringify(t))}function al(e,t){t=tl().fork().startTiming("userId.callbacks.total").stopBefore(t);var n=(0,l.yx)((function(){clearTimeout(undefined),t()}),e.length);e.forEach((function(e){var t=nl(e.submodule.name).startTiming("callback").stopBefore(n);try{var i;e.callback((function(n){n?(e.config.storage&&rl(e,n),e.idObj=e.submodule.decode(n,e.config),wl(e.idObj)):(0,l.PN)("".concat($d,": ").concat(e.submodule.name," - request id responded with an empty value")),t()}),sl.bind(null,null===(i=e.config)||void 0===i?void 0:i.storage))}catch(n){(0,l.H)("Error in userID module '".concat(e.submodule.name,"':"),n),t()}e.callback=void 0}))}var dl,ll={};function cl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hl()||[],t=Bd&&e.find((function(e){return e.source===Bd}));if(t&&"string"==typeof(0,d.Z)(t,"uids.0.id")){var n=t.uids[0].id.replace(/[\W_]/g,"");if(n.length>=32&&n.length<=150)return n;(0,l.yN)("User ID - Googletag Publisher Provided ID for ".concat(Bd," is not between 32 and 150 characters - ").concat(n))}}var ul=(0,ze.g3)("userId",(function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.delay,o=void 0===r?It.Z.timeout:r,a=i.getIds,d=void 0===a?bl:a;It.Z.race([d().catch((function(){return null})),o(jd)]).then((function(){(function(e,t){[e].some((function(e){return!Array.isArray(e)||!e.length}))||e.forEach((function(e){e.bids&&(0,l.kJ)(e.bids)&&e.bids.forEach((function(e){var n=function(e,t){return Array.isArray(e)&&e.length&&t?e.filter((function(e){return!e.config.bidders||!(0,l.kJ)(e.config.bidders)||(0,$.q9)(e.config.bidders,t)})).filter((function(e){return(0,l.PO)(e.idObj)&&Object.keys(e.idObj).length})).reduce((function(e,t){return Object.keys(t.idObj).forEach((function(n){e[n]=t.idObj[n]})),e}),{}):{}}(t,e.bidder);Object.keys(n).length&&(e.userId=n,e.userIdAsEids=Md(n))}))}))})(t.adUnits||(0,s.R)().adUnits,Ld),tl().join((0,ze.Bf)(t.metrics),{propagate:!1,includeGroups:!0}),e.call(n,t)}))}));function pl(){return function(e){return Array.isArray(e)&&e.length?e.filter((function(e){return(0,l.PO)(e.idObj)&&Object.keys(e.idObj).length})).reduce((function(e,t){return Object.keys(t.idObj).forEach((function(n){e[n]=t.idObj[n]})),e}),{}):{}}(Ld)}function hl(){return Md(pl())}function fl(e){return Md(function(e,t){if(!Array.isArray(e)||!e.length)return{};var n=e.filter((function(e){var n;return(0,l.PO)(e.idObj)&&Object.keys(e.idObj).length&&(null===(n=Rd[Object.keys(e.idObj)[0]])||void 0===n?void 0:n.source)===t}));return(0,l.xb)(n)?[]:n[0].idObj}(Ld,e))[0]}function gl(e,t,n){return dl().then((function(){var i={};if((0,l.LQ)(n)){(0,l.PN)("".concat($d," - Getting encrypted signal from custom function : ").concat(n.name," & source : ").concat(e," "));var r=n(e);i[e]=r?ml(r):null}else{var s=fl(e);(0,l.PN)("".concat($d," - Getting encrypted signal for eids :").concat(JSON.stringify(s))),(0,l.xb)(s)||(i[s.source]=!0===t?ml(s):s.uids[0].id)}return(0,l.PN)("".concat($d," - Fetching encrypted eids: ").concat(i[e])),i[e]}))}function ml(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n="";return 1===t&&(n="object"===(0,U.Z)(e)?window.btoa(JSON.stringify(e)):window.btoa(e)),"".concat(t,"||").concat(n)}function yl(){if((0,l.T9)()){window.googletag.encryptedSignalProviders=window.googletag.encryptedSignalProviders||[];var e=a.vc.getConfig("userSync.encryptedSignalSources");if(e){var t=e.registerDelay||0;setTimeout((function(){e.sources&&e.sources.forEach((function(e){var t=e.source,n=e.encrypt,i=e.customFunc;t.forEach((function(e){window.googletag.encryptedSignalProviders.push({id:e,collectorFunction:function(){return gl(e,n,i)}})}))}))}),t)}else(0,l.yN)("".concat($d," - ESP : encryptedSignalSources config not defined under userSync Object"))}}function vl(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).submoduleNames,t=arguments.length>1?arguments[1]:void 0;return dl({refresh:!0,submoduleNames:e}).then((function(){return t&&(0,l.LQ)(t)&&t(),pl()}))}function bl(){return dl().then((function(){return pl()}),(function(e){return e===ll?Promise.resolve().then(bl):((0,l.H)("Error initializing userId",e),It.Z.reject(e))}))}var _l=(0,D.z3)("sync",(function(e,t){return{userIdModules:e,hasValidated:t&&t.hasValidated}}),"validateGdprEnforcement");function wl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pl();if(e&&Bd){var t=cl(Md(e));t&&((0,l.T9)()?window.googletag.pubads().setPublisherProvidedId(t):(window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((function(){window.googletag.pubads().setPublisherProvidedId(t)}))))}}function Tl(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return tl().fork().measureTime("userId.init.modules",(function(){if(!t.length)return[];var r=function(){var e=[],t=!1;return Kd.localStorageIsEnabled()&&(e.push(Wd),Kd.getDataFromLocalStorage(Xd)&&((0,l.PN)("".concat($d," - opt-out localStorage found, storage disabled")),t=!0)),Kd.cookiesAreEnabled()&&(e.push(Hd),Kd.getCookie(Xd)&&((0,l.PN)("".concat($d," - opt-out cookie found, storage disabled")),t=!0)),new Set(t?[]:e)}();if(!(t=t.filter((function(e){return!e.config.storage||r.has(e.config.storage.type)}))).length)return(0,l.yN)("".concat($d," - no ID module is configured for one of the available storage types:"),Array.from(r)),[];var s=_l(t,n),o=s.userIdModules;if(!s.hasValidated&&!(0,ae.h)(n))return(0,l.yN)("".concat($d," - gdpr permission not valid for local storage or cookies, exit module")),[];var a=function(){try{return Kd.getCookie(Zd)}catch(e){(0,l.H)(e)}}();!function(e){try{var t=new Date(Date.now()+864e5*Gd).toUTCString();Kd.setCookie(Zd,ol(e),t,"Lax")}catch(e){(0,l.H)(e)}}(n);var c=o.reduce((function(e,t){return nl(t.submodule.name).measureTime("init",(function(){try{(function(e,t,n,i){if(e.config.storage){var r,s=sl(e.config.storage),o=!1;if("number"==typeof e.config.storage.refreshInSeconds){var a=new Date(sl(e.config.storage,"last"));o=a&&Date.now()-a.getTime()>1e3*e.config.storage.refreshInSeconds}!s||o||i||!function(e,t){return null!=e&&e===ol(t)}(n,t)?r=e.submodule.getId(e.config,t,s):"function"==typeof e.submodule.extendId&&(r=e.submodule.extendId(e.config,t,s)),(0,l.PO)(r)&&(r.id&&(rl(e,r.id),s=r.id),"function"==typeof r.callback&&(e.callback=r.callback)),s&&(e.idObj=e.submodule.decode(s,e.config))}else if(e.config.value)e.idObj=e.config.value;else{var d=e.submodule.getId(e.config,t,void 0);(0,l.PO)(d)&&("function"==typeof d.callback&&(e.callback=d.callback),d.id&&(e.idObj=e.submodule.decode(d.id,e.config)))}wl(e.idObj)})(t,n,a,i),e.push(t)}catch(e){(0,l.H)("Error in userID module '".concat(t.submodule.name,"':"),e)}return e}))}),[]);return c.length&&function(e){var t=(0,l.EE)().setEidPermissions;"function"==typeof t&&(0,l.kJ)(e)&&t(function(e){var t=[];return e.filter((function(e){return(0,l.PO)(e.idObj)&&Object.keys(e.idObj).length})).forEach((function(e){Object.keys(e.idObj).forEach((function(n){(0,d.Z)(e,"config.bidders")&&Array.isArray(e.config.bidders)&&(0,d.Z)(Rd,n+".source")&&t.push({source:Rd[n].source,bidders:e.config.bidders})}))})),t}(e))}(c),c.forEach(Il.bind(null,e)),c}))}function Il(e,t){for(var n=!1,i=0;i<e.length;i++)if(t.config.name.toLowerCase()===e[i].config.name.toLowerCase()){n=!0,e[i]=t;break}n||e.push(t)}var Sl=new Set([Wd,Hd]);function kl(){var e=function(e,t){return Array.isArray(e)?e.reduce((function(e,t){return!t||(0,l.jH)(t.name)||(t.storage&&!(0,l.jH)(t.storage.type)&&!(0,l.jH)(t.storage.name)&&Sl.has(t.storage.type)||(0,l.PO)(t.value)?e.push(t):t.storage||t.value||e.push(t)),e}),[]):[]}(Qd);if(e.length){var t=el.filter((function(e){return!(0,$.sE)(Yd,(function(t){return t.name===e.name}))}));Yd.splice(0,Yd.length),t.map((function(t){var n=(0,$.sE)(e,(function(e){return e.name&&(e.name.toLowerCase()===t.name.toLowerCase()||t.aliasName&&e.name.toLowerCase()===t.aliasName.toLowerCase())}));return n&&t.name!==n.name&&(n.name=t.name),t.findRootDomain=zd.W,n?{submodule:t,config:n,callback:void 0,idObj:void 0}:null})).filter((function(e){return null!==e})).forEach((function(e){return Yd.push(e)})),!Jd&&Yd.length&&((0,s.R)().requestBids.before(ul,40),O.ZP.callDataDeletionRequest.before(Cl),Vd.after((function(e){return e(cl())})),(0,l.PN)("".concat($d," - usersync config updated for ").concat(Yd.length," submodules: "),Yd.map((function(e){return e.submodule.name}))),Jd=!0)}}function Cl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];(0,l.PN)("UserID: received data deletion request; deleting all stored IDs..."),Yd.forEach((function(e){if("function"==typeof e.submodule.onDataDeletionRequest)try{var t;(t=e.submodule).onDataDeletionRequest.apply(t,[e.config,e.idObj].concat(n))}catch(t){(0,l.H)("Error calling onDataDeletionRequest for ID submodule ".concat(e.submodule.name),t)}!function(e){var t,n,i,r;switch(null===(t=e.config)||void 0===t||null===(n=t.storage)||void 0===n?void 0:n.type){case Hd:var s=il(e),o=new Date(Date.now()-864e5).toUTCString();i=function(e){return s(e,"",o)},r=["","_last"];break;case Wd:i=function(t){return Kd.removeDataFromLocalStorage(e.config.storage.name+t)},r=["","_last","_exp"]}i&&r.forEach((function(e){try{i(e)}catch(e){(0,l.H)(e)}}))}(e)})),e.apply(this,n)}function El(e){return function(){return Promise.resolve(e.apply(this,arguments))}}function Al(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}!function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).delay,n=void 0===t?It.Z.timeout:t;Bd=void 0,Yd=[],Qd=[],Jd=!1,Ld=[],dl=function(){var e,t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).delay,i=void 0===n?It.Z.timeout:n,r=(0,It.P)(),s=(0,It.P)(),o=!1;function a(n){return t=tl().fork(),null!=e&&e.reject(ll),e=(0,It.P)(),It.Z.race([n,e.promise]).finally(t.startTiming("userId.total"))}var d=Ld,c=Yd;function u(e){return function(){if(d===Ld&&c===Yd)return e.apply(void 0,arguments)}}function p(){return O.rp.promise.finally(t.startTiming("userId.init.gdpr"))}var h=a(It.Z.all([D.Cd,r.promise]).then(p).then(u((function(e){Tl(d,c,e)}))).then((function(){return s.promise.finally(t.startTiming("userId.callbacks.pending"))})).then(u((function(){var e=d.filter((function(e){return(0,l.LQ)(e.callback)}));if(e.length)return new It.Z((function(t){return al(e,t)}))}))));return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refresh,n=void 0!==t&&t,l=e.submoduleNames,f=void 0===l?null:l,g=e.ready;return void 0!==g&&g&&!o&&(o=!0,r.resolve(),jd>0?s.resolve():gi.on(Tt.FP.AUCTION_END,(function e(){gi.S1(Tt.FP.AUCTION_END,e),i(Ud).then(s.resolve)}))),n&&o&&(h=a(h.catch((function(){return null})).then(p).then(u((function(e){var t=Tl(d,c.filter((function(e){return null==f||f.includes(e.submodule.name)})),e,!0).filter((function(e){return null!=e.callback}));if(t.length)return new It.Z((function(e){return al(t,e)}))}))))),h}}({delay:n}),null!=qd&&qd(),el=[],qd=e.getConfig("userSync",(function(e){var t=e.userSync;Bd=t.ppid,t&&t.userIds&&(Qd=t.userIds,Ud=(0,l.hj)(t.syncDelay)?t.syncDelay:500,jd=(0,l.hj)(t.auctionDelay)?t.auctionDelay:0,kl(),dl({ready:!0}))})),(0,s.R)().getUserIds=pl,(0,s.R)().getUserIdsAsEids=hl,(0,s.R)().getEncryptedEidsForSource=El(gl),(0,s.R)().registerSignalSources=yl,(0,s.R)().refreshUserIds=El(vl),(0,s.R)().getUserIdsAsync=El(bl),(0,s.R)().getUserIdsAsEidBySource=fl}(a.vc),(0,D.bA)("userId",(function(e){(0,$.sE)(el,(function(t){return t.name===e.name}))||(el.push(e),Xo.qh.register(vn.y2,e.name,e.gvlid),kl(),dl({refresh:!0,submoduleNames:[e.name]}))})),et({type:We,name:"userExtEids",fn:function(e,t,n){var i=(0,d.Z)(n,"bidRequests.0.userIdAsEids");i&&(0,j.N)(e,"user.ext.eids",i)}}),(0,s.z)("userId");var Pl="7.47.0",xl=300,Dl="USD",Ol=["admixer.net","adserver.org","adtelligent.com","akamai.com","amxdt.net","audigent.com","britepool.com","criteo.com","crwdcntrl.net","deepintent.com","epsilon.com","hcn.health","id5-sync.com","idx.lat","intentiq.com","intimatemerger.com","liveintent.com","liveramp.com","mediawallahscript.com","merkleinc.com","netid.de","neustar.biz","nextroll.com","novatiq.com","parrable.com","pubcid.org","quantcast.com","tapad.com","uidapi.com","verizonmedia.com","yahoo.com","zeotap.com"];function Rl(e){return{w:parseInt(e[0]),h:parseInt(e[1])}}function Nl(e){return(0,l.kJ)(e)&&2===e.length&&!(0,l.kJ)(e[0])?[Rl(e)]:e.map(Rl)}function Ml(e){return(0,l.kJ)((0,d.Z)(e,"userIdAsEids"))?e.userIdAsEids.filter((function(e){return-1!==Ol.indexOf(e.source)})):[]}function Ll(e){return(0,d.Z)(e,"params.bidOverride.imp.secure")||"https:"===document.location.protocol?1:0}function Ul(e){var t;return(0,d.Z)(e,"params.pubId")?t=!0:(0,d.Z)(e,"params.dcn")&&(0,d.Z)(e,"params.pos")&&(t=!1),t}function jl(){var e=a.vc.getConfig("yahoossp.mode");return void 0===(e=e?e.toLowerCase():void 0)||e===c.Mk?c.Mk:e===c.pX?c.pX:"all"===e?"*":void 0}function Bl(e){var t=jl(),n={currency:(0,d.Z)(e,"params.bidOverride.cur")||Dl,mediaType:t,size:"*"};return!!(0,l.LQ)(e.getFloor)&&e.getFloor(n)}function ql(e,t,n,i){var s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Al(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Al(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i);for(var o in n)switch(e){case"string":-1!==t.indexOf(o)&&(0,l.d8)(n[o])&&(s[o]=n[o]);break;case"number":-1!==t.indexOf(o)&&(0,l.hj)(n[o])&&(s[o]=n[o]);break;case"array":-1!==t.indexOf(o)&&(0,l.kJ)(n[o])&&(s[o]=n[o]);break;case"object":-1!==t.indexOf(o)&&(0,l.PO)(n[o])&&(s[o]=n[o]);break;case"objectAllKeys":(0,l.PO)(n)&&(s[o]=n[o])}return s}function Fl(e){var t,n=a.vc.getConfig("yahoossp.ttl");return t=n||(0,d.Z)(e,"params.ttl"),(0,l.hj)(t)&&t>0&&t<3600?t:xl}function Vl(e){return(0,l.d8)(e)&&e.length>0}function zl(e,t){if(e){var n,i,r={id:(0,l.DO)(),cur:[Bl(e).currency||(0,d.Z)(t,"params.bidOverride.cur")||Dl],imp:[],site:{page:(0,d.Z)(e,"refererInfo.page")},device:{dnt:0,ua:navigator.userAgent,ip:(0,d.Z)(t,"params.bidOverride.device.ip")||(0,d.Z)(t,"params.ext.ip")||void 0,w:window.screen.width,h:window.screen.height},regs:{ext:{us_privacy:e.uspConsent?e.uspConsent:"",gdpr:e.gdprConsent&&e.gdprConsent.gdprApplies?1:0}},source:{ext:{hb:1,adapterver:"1.0.2",prebidver:Pl,integration:{name:"prebid.js",ver:Pl}},fd:1},user:{ext:{consent:e.gdprConsent&&e.gdprConsent.gdprApplies?e.gdprConsent.consentString:"",eids:Ml(t)}}};!0===Ul(t)?(r.site.publisher={id:t.params.pubId},((0,d.Z)(t,"params.bidOverride.site.id")||(0,d.Z)(t,"params.siteId"))&&(r.site.id=(0,d.Z)(t,"params.bidOverride.site.id")||t.params.siteId)):r.site.id=t.params.dcn,null!==(n=e.ortb2)&&void 0!==n&&null!==(i=n.regs)&&void 0!==i&&i.gpp&&(r.regs.ext.gpp=e.ortb2.regs.gpp,r.regs.ext.gpp_sid=e.ortb2.regs.gpp_sid),e.ortb2&&(r=function(e,t){var n=t.ortb2,i=(0,d.Z)(n,"site")||void 0,r=(0,d.Z)(i,"content")||void 0,s=(0,d.Z)(i,"content.data")||void 0,o=(0,d.Z)(n,"app.content")||void 0,a=(0,d.Z)(n,"app.content.data")||void 0,c=(0,d.Z)(n,"user")||void 0;if(i&&(0,l.PO)(i)){e.site=ql("string",["name","domain","page","ref","keywords","search"],i,e.site),e.site=ql("array",["cat","sectioncat","pagecat"],i,e.site),e.site=ql("object",["ext"],i,e.site)}if(r&&(0,l.PO)(r)){e.site.content=ql("string",["id","title","series","season","genre","contentrating","language"],r,e.site.content),e.site.content=ql("number",["episode","prodq","context","livestream","len"],r,e.site.content),e.site.content=ql("array",["cat"],r,e.site.content),e.site.content=ql("object",["ext"],r,e.site.content),s&&(0,l.kJ)(s)&&s.every((function(t){var n={};n=ql("string",["id","name"],t,n),n=ql("array",["segment"],t,n),n=ql("object",["ext"],t,n),e.site.content.data=[],e.site.content.data.push(n)}))}if(o&&(0,l.PO)(o)&&a&&(0,l.kJ)(a)&&a.every((function(t){var n={};n=ql("string",["id","name"],t,n),n=ql("array",["segment"],t,n),n=ql("object",["ext"],t,n),e.app={content:{data:[]}},e.app.content.data.push(n)})),c&&(0,l.PO)(c)){e.user=ql("string",["id","buyeruid","gender","keywords","customdata"],c,e.user),e.user=ql("number",["yob"],c,e.user),e.user=ql("array",["data"],c,e.user),e.user.ext=ql("object",["ext"],c,e.user.ext)}return e}(r,t));var s=(0,d.Z)(t,"schain.nodes");return(0,l.kJ)(s)&&s.length>0&&(r.source.ext.schain=t.schain,r.source.ext.schain.nodes[0].rid=r.id),r}}function $l(e,t){var n=jl();if(t&&e){var i={id:e.bidId,secure:Ll(e),bidfloor:Bl(e).floor||(0,d.Z)(e,"params.bidOverride.imp.bidfloor")};if(!e.mediaTypes.banner||void 0!==n&&n!==c.Mk&&"*"!==n||(i.banner={mimes:e.mediaTypes.banner.mimes||["text/html","text/javascript","application/javascript","image/jpg"],format:Nl(e.sizes)},e.mediaTypes.banner.pos&&(i.banner.pos=e.mediaTypes.banner.pos)),e.mediaTypes.video&&(n===c.pX||"*"===n)){var r=Nl(e.mediaTypes.video.playerSize);i.video={mimes:(0,d.Z)(e,"params.bidOverride.imp.video.mimes")||e.mediaTypes.video.mimes||["video/mp4","application/javascript"],w:(0,d.Z)(e,"params.bidOverride.imp.video.w")||r[0].w,h:(0,d.Z)(e,"params.bidOverride.imp.video.h")||r[0].h,maxbitrate:(0,d.Z)(e,"params.bidOverride.imp.video.maxbitrate")||e.mediaTypes.video.maxbitrate||void 0,maxduration:(0,d.Z)(e,"params.bidOverride.imp.video.maxduration")||e.mediaTypes.video.maxduration||void 0,minduration:(0,d.Z)(e,"params.bidOverride.imp.video.minduration")||e.mediaTypes.video.minduration||void 0,api:(0,d.Z)(e,"params.bidOverride.imp.video.api")||e.mediaTypes.video.api||[2],delivery:(0,d.Z)(e,"params.bidOverride.imp.video.delivery")||e.mediaTypes.video.delivery||void 0,pos:(0,d.Z)(e,"params.bidOverride.imp.video.pos")||e.mediaTypes.video.pos||void 0,playbackmethod:(0,d.Z)(e,"params.bidOverride.imp.video.playbackmethod")||e.mediaTypes.video.playbackmethod||void 0,placement:(0,d.Z)(e,"params.bidOverride.imp.video.placement")||e.mediaTypes.video.placement||void 0,linearity:(0,d.Z)(e,"params.bidOverride.imp.video.linearity")||e.mediaTypes.video.linearity||1,protocols:(0,d.Z)(e,"params.bidOverride.imp.video.protocols")||e.mediaTypes.video.protocols||[2,5],startdelay:(0,d.Z)(e,"params.bidOverride.imp.video.startdelay")||e.mediaTypes.video.startdelay||0,rewarded:(0,d.Z)(e,"params.bidOverride.imp.video.rewarded")||void 0}}if(i.ext={dfp_ad_unit_code:e.adUnitCode},(0,d.Z)(e,"params.kvp")&&(0,l.PO)(e.params.kvp))for(var s in i.ext.kvs={},e.params.kvp)if((0,l.d8)(e.params.kvp[s])||(0,l.hj)(e.params.kvp[s]))i.ext.kvs[s]=e.params.kvp[s];else if((0,l.kJ)(e.params.kvp[s])){var o=e.params.kvp[s];(o.every((function(e){return(0,l.d8)(e)}))||o.every((function(e){return(0,l.hj)(e)})))&&(i.ext.kvs[s]=e.params.kvp[s])}(0,d.Z)(e,"ortb2Imp.ext.data")&&(0,l.PO)(e.ortb2Imp.ext.data)&&(i.ext.data=e.ortb2Imp.ext.data),(0,d.Z)(e,"ortb2Imp.instl")&&(0,l.hj)(e.ortb2Imp.instl)&&1===e.ortb2Imp.instl&&(i.instl=e.ortb2Imp.instl),!1===Ul(e)?(i.tagid=e.params.pos,i.ext.pos=e.params.pos):(0,d.Z)(e,"params.placementId")&&(i.tagid=e.params.placementId),t.imp.push(i)}}function Hl(e){var t=e.payload,n=e.requestOptions,i=e.bidderRequest,r=Ul(i),s=a.vc.getConfig("yahoossp.endpoint")||"https://c2shb.pubgw.yahoo.com/bidRequest";if(!0===r&&(s=a.vc.getConfig("yahoossp.endpoint")||"https://c2shb.pubgw.yahoo.com/admax/bid/partners/PBJS"),!0===(0,d.Z)(i,"params.testing.e2etest"))if((0,l.PN)("yahoossp adapter e2etest mode is active"),n.withCredentials=!1,!0===r)t.site.id="1234567";else{var o=jl();t.site.id="8a969516017a7a396ec539d97f540011",t.imp.forEach((function(e){e.ext.e2eTestMode=!0,o===c.Mk?e.tagid="8a969978017a7aaabab4ab0bc01a0009":o===c.pX?e.tagid="8a96958a017a7a57ac375d50c0c700cc":((0,l.yN)('yahoossp adapter e2etest mode does not support yahoossp.mode="all". \n Please specify either "banner" or "video"'),(0,l.yN)("yahoossp adapter e2etest mode: Please make sure your adUnit matches the yahoossp.mode video or banner"))}))}return{url:s,method:"POST",data:t,options:n,bidderRequest:i}}var Wl={code:"yahoossp",gvlid:25,aliases:[],supportedMediaTypes:[c.Mk,c.pX],isBidRequestValid:function(e){var t=e.params;return!0===(0,d.Z)(t,"testing.e2etest")||!(!(0,l.PO)(t)||!(Vl(t.pubId)||Vl(t.dcn)&&Vl(t.pos)))||((0,l.yN)("yahoossp bidder params missing or incorrect, please pass object with either: dcn & pos OR pubId"),!1)},buildRequests:function(e,t){if(!(0,l.xb)(e)&&!(0,l.xb)(t)){var n={contentType:"application/json",customHeaders:{"x-openrtb-version":"2.5"}};n.withCredentials=(0,ae.h)(t.gdprConsent);var i=function(e){var t=jl(),n=[];return t===c.Mk?n=e.filter((function(e){return Object.keys(e.mediaTypes).some((function(e){return e===c.Mk}))})):t===c.pX?n=e.filter((function(e){return Object.keys(e.mediaTypes).some((function(e){return e===c.pX}))})):"*"===t&&(n=e.filter((function(e){return Object.keys(e.mediaTypes).some((function(e){return e===c.Mk||e===c.pX}))}))),n}(e);if(!0===a.vc.getConfig("yahoossp.singleRequestMode")){var r=zl(t,i[0]);return i.forEach((function(e){$l(e,r)})),Hl({payload:r,requestOptions:n,bidderRequest:t})}return i.map((function(e){var i=zl(t,e);return $l(e,i),Hl({payload:i,requestOptions:n,bidderRequest:e})}))}(0,l.yN)('yahoossp Adapter: buildRequests called with either empty "validBidRequests" or "bidderRequest"')},interpretResponse:function(e,t){t.data;var n=t.bidderRequest,i=[];return e.body&&Array.isArray(e.body.seatbid)?(e.body.seatbid.forEach((function(e){var t;try{t=e.bid[0]}catch(e){return i}var r=t.ext&&t.ext.encp?t.ext.encp:t.price,s={adId:(0,d.Z)(t,"adId")?t.adId:t.impid||t.crid,adUnitCode:n.adUnitCode,requestId:t.impid,cpm:r,width:t.w,height:t.h,creativeId:t.crid||0,currency:t.cur||Dl,dealId:t.dealid?t.dealid:null,netRevenue:!0,ttl:Fl(n),meta:{advertiserDomains:t.adomain}},o=function(e){var t=e.adm;return-1!==t.indexOf("o2playerSettings")||-1!==t.indexOf("YAHOO.VideoPlatform.VideoPlayer")||-1!==t.indexOf("AdPlacement")?c.Mk:-1!==t.indexOf("VAST")?c.pX:void 0}(t);o===c.Mk?(s.mediaType=c.Mk,s.ad=t.adm,s.meta.mediaType=c.Mk):o===c.pX&&(s.mediaType=c.pX,s.meta.mediaType=c.pX,s.vastXml=t.adm,t.nurl&&(s.vastUrl=t.nurl)),"outstream"!==(0,d.Z)(n,"mediaTypes.video.context")||n.renderer||(s.renderer=function(e,t){var n=B.Th.install({url:"https://s.yimg.com/kp/prebid-outstream-renderer/renderer.js",loaded:!1,adUnitCode:e.adUnitCode});try{n.setRender((function(t){setTimeout((function(){o2PlayerRender(t)}),(0,d.Z)(e,"params.testing.renderer.setTimeout")||700)}))}catch(e){(0,l.yN)("yahoossp renderer error: setRender() failed",e)}return n}(n)||void 0),i.push(s)})),i):i},getUserSyncs:function(e,t,n,i){var r=!(0,l.xb)(t)&&t[0].body;return r&&r.ext&&r.ext.pixels?function(e,t){var n=/\w*(?=\s)/,i=/src=("|')(.*?)\1/,r=[];if(t){var s=t.match(/(img|iframe)[\s\S]*?src\s*=\s*("|')(.*?)\2/gi);s&&s.forEach((function(t){var s=t.match(n)[0],o=t.match(i)[2];if(s&&o){var a="img"===s.toLowerCase()?"image":"iframe";if(!e.iframeEnabled&&"iframe"===a||!e.pixelEnabled&&"image"===a)return;r.push({type:a,url:o})}}))}return r}(e,r.ext.pixels):[]}};(0,o.dX)(Wl),(0,s.z)("yahoosspBidAdapter"),i.ZP.processQueue();const Zl=i.ZP},9796:e=>{"use strict";e.exports=DM.molFeClientLogger},4760:()=>{},7044:()=>{},462:()=>{},6029:()=>{},3737:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},2977:(e,t,n)=>{"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}n.d(t,{Z:()=>i})},6172:(e,t,n)=>{"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:()=>i})},3330:(e,t,n)=>{"use strict";function i(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}n.d(t,{Z:()=>i})},266:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(3330);function r(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,(0,i.Z)(e,t,"get"))}},5248:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(3330);function r(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,(0,i.Z)(e,t,"set"),n),n}},1976:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(6908);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(0,i.Z)(r.key),r)}}function s(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},1909:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(6908);function r(e,t,n){return(t=(0,i.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},1785:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(9755);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,s,o,a=[],d=!0,l=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;d=!1}else for(;!(d=(i=s.call(n)).done)&&(a.push(i.value),a.length!==t);d=!0);}catch(e){l=!0,r=e}finally{try{if(!d&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw r}}return a}}(e,t)||(0,i.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},3014:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(2977),r=n(9755);function s(e){return function(e){if(Array.isArray(e))return(0,i.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,r.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},6908:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(9267);function r(e){var t=function(e,t){if("object"!==(0,i.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==(0,i.Z)(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===(0,i.Z)(t)?t:String(t)}},9267:(e,t,n)=>{"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}n.d(t,{Z:()=>i})},9755:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(2977);function r(e,t){if(e){if("string"==typeof e)return(0,i.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,i.Z)(e,t):void 0}}},3605:(e,t,n)=>{"use strict";function i(e,t,n){t.split&&(t=t.split("."));for(var i,r,s=0,o=t.length,a=e;s<o&&"__proto__"!==(r=t[s++])&&"constructor"!==r&&"prototype"!==r;)a=a[r]=s===o?n:typeof(i=a[r])==typeof t?i:0*t[s]!=0||~(""+t[s]).indexOf(".")?{}:[]}n.d(t,{N:()=>i})},251:e=>{"use strict";e.exports=JSON.parse('{"k2":{"xn":"adserverTargeting","zF":"standard"},"f":"pbjs_debug","Q_":{"Q":1,"H":2},"FP":{"AUCTION_INIT":"auctionInit","AUCTION_END":"auctionEnd","BID_ADJUSTMENT":"bidAdjustment","BID_TIMEOUT":"bidTimeout","BID_REQUESTED":"bidRequested","BID_RESPONSE":"bidResponse","BID_REJECTED":"bidRejected","NO_BID":"noBid","SEAT_NON_BID":"seatNonBid","BID_WON":"bidWon","BIDDER_DONE":"bidderDone","BIDDER_ERROR":"bidderError","SET_TARGETING":"setTargeting","BEFORE_REQUEST_BIDS":"beforeRequestBids","BEFORE_BIDDER_HTTP":"beforeBidderHttp","REQUEST_BIDS":"requestBids","ADD_AD_UNITS":"addAdUnits","AD_RENDER_FAILED":"adRenderFailed","AD_RENDER_SUCCEEDED":"adRenderSucceeded","TCF2_ENFORCEMENT":"tcf2Enforcement","AUCTION_DEBUG":"auctionDebug","BID_VIEWABLE":"bidViewable","STALE_RENDER":"staleRender","BILLABLE_EVENT":"billableEvent"},"q_":{"PREVENT_WRITING_ON_MAIN_DOCUMENT":"preventWritingOnMainDocument","NO_AD":"noAd","EXCEPTION":"exception","CANNOT_FIND_AD":"cannotFindAd","MISSING_DOC_OR_ADID":"missingDocOrAdid"},"aI":{"bidWon":"adUnitCode"},"Ql":{"yE":"low","M2":"medium","lj":"high","B7":"auto","uN":"dense","qN":"custom"},"TD":{"BIDDER":"hb_bidder","AD_ID":"hb_adid","PRICE_BUCKET":"hb_pb","SIZE":"hb_size","DEAL":"hb_deal","SOURCE":"hb_source","FORMAT":"hb_format","UUID":"hb_uuid","CACHE_ID":"hb_cache_id","CACHE_HOST":"hb_cache_host","ADOMAIN":"hb_adomain","ACAT":"hb_acat"},"kF":{"BIDDER":"hb_bidder","AD_ID":"hb_adid","PRICE_BUCKET":"hb_pb","SIZE":"hb_size","DEAL":"hb_deal","FORMAT":"hb_format","UUID":"hb_uuid","CACHE_HOST":"hb_cache_host"},"FY":{"title":"hb_native_title","body":"hb_native_body","body2":"hb_native_body2","privacyLink":"hb_native_privacy","privacyIcon":"hb_native_privicon","sponsoredBy":"hb_native_brand","image":"hb_native_image","icon":"hb_native_icon","clickUrl":"hb_native_linkurl","displayUrl":"hb_native_displayurl","cta":"hb_native_cta","rating":"hb_native_rating","address":"hb_native_address","downloads":"hb_native_downloads","likes":"hb_native_likes","phone":"hb_native_phone","price":"hb_native_price","salePrice":"hb_native_saleprice","rendererUrl":"hb_renderer_url","adTemplate":"hb_adTemplate"},"os":{"YZ":"s2s"},"UE":{"CK":"targetingSet","fe":"rendered","G9":"bidRejected"},"Gw":{"UI":"Bid has missing or invalid properties","Gp":"Invalid request ID","Dg":"Bidder code is not allowed by allowedAlternateBidderCodes / allowUnknownBidderCodes","Xx":"Unable to convert currency"},"V1":{"body":"desc","body2":"desc2","sponsoredBy":"sponsored","cta":"ctatext","rating":"rating","address":"address","downloads":"downloads","likes":"likes","phone":"phone","price":"price","salePrice":"saleprice","displayUrl":"displayurl"},"s$":{"sponsored":1,"desc":2,"rating":3,"likes":4,"downloads":5,"price":6,"saleprice":7,"phone":8,"address":9,"desc2":10,"displayurl":11,"ctatext":12},"oF":{"ICON":1,"MAIN":3},"zA":["privacyLink","clickUrl","sendTargetingKeys","adTemplate","rendererUrl","type"]}')}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var __webpack_exports__={};(()=>{"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{addFBRemarketingPixel:()=>ae,addTaboolaPosition:()=>oe,addToArray:()=>ee,appendToInfiniteList:()=>te,forceRefreshAds:()=>Q,getBannerFallbackPromise:()=>ce,getRequestedAds:()=>pe,getRtaReport:()=>le,getScriptContainer:()=>X,getSyncVideoTags:()=>fe,getVideoAdsSetup:()=>H,getVideoTags:()=>he,init:()=>ie,initEmergencyRules:()=>W.initEmergencyRules,initSlots:()=>W.initSlots,on:()=>me,openControlPanel:()=>ge,q:()=>se,reg:()=>ne,removeWatermark:()=>ve,setStickyBannerZoomThresholds:()=>J,setSupportedSlots:()=>W.setSupportedSlots,startVideoAuction:()=>be,stopRefreshingAds:()=>Y,unstick:()=>ye});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{isClickThrough:()=>De,onClick:()=>Pe,onDeactivate:()=>xe,onInteraction:()=>Oe});var n={};__webpack_require__.r(n),__webpack_require__.d(n,{article:()=>st,brandedVideoPlayer:()=>ht,gpt:()=>gt,sessionDepth:()=>kt});var i={};__webpack_require__.r(i),__webpack_require__.d(i,{conversion:()=>Ct.Z});var r={};__webpack_require__.r(r),__webpack_require__.d(r,{abtest:()=>Pt,bidmax:()=>Vt,bidmaxSendBeacon:()=>zt,bidmaxSendBeaconMigration:()=>$t,cacheIndication:()=>Zt,cmp:()=>on,connection:()=>zn,customTracking:()=>ln,entryPoint:()=>mn,externalData:()=>In,headerbidderWinner:()=>Sn,inputDelays:()=>kn,memory:()=>En,pageLoadEvent:()=>An,rtaIds:()=>Pn,storage:()=>xn,timing:()=>Ln,viewability:()=>jn});var s={};__webpack_require__.r(s),__webpack_require__.d(s,{adyoulike:()=>Si,brightroll:()=>ki,collective564:()=>Ei,groupmSkin:()=>Ai,konduit:()=>Gi,mediagridVideo:()=>Hi,openx:()=>Pi,openxVideo:()=>Wi,pxyz:()=>xi,rubiMM:()=>Ni,rubiTTD:()=>Mi,rubiconSkin:()=>Ri,teads:()=>Li,triplelift:()=>Ui});var o={};__webpack_require__.r(o),__webpack_require__.d(o,{dmplayer:()=>os});var a={};__webpack_require__.r(a),__webpack_require__.d(a,{availabilityNotification:()=>_s,hackyDelayer:()=>ws,reprompt:()=>Cs,rtaTracking:()=>Es});var d={};__webpack_require__.r(d),__webpack_require__.d(d,{indexedDBUsage:()=>Rs,targeting:()=>Ds,video:()=>Os});var l={};__webpack_require__.r(l),__webpack_require__.d(l,{permutive:()=>d});var c={};__webpack_require__.r(c),__webpack_require__.d(c,{dmplayer:()=>oo});var u={};__webpack_require__.r(u),__webpack_require__.d(u,{leaderTop:()=>xo,puffAdOthers:()=>Oo,refreshInfo:()=>Mo});var p={};__webpack_require__.r(p),__webpack_require__.d(p,{mpus:()=>Ga});var h={};__webpack_require__.r(h),__webpack_require__.d(h,{load:()=>Ql});var f={};__webpack_require__.r(f),__webpack_require__.d(f,{adxChannel:()=>gc,device:()=>yc,impid:()=>vc,ixIdentity:()=>_c,smartclip:()=>wc});var g={};__webpack_require__.r(g),__webpack_require__.d(g,{abe:()=>i,adIntegrator:()=>Ie.default,adsRefresherV2:()=>pu,adxChannelPlugin:()=>gc,analytics:()=>r,arrowKeysScroll:()=>fu,bidders:()=>s,billboardAdjustments:()=>mu,chromelessv2:()=>o,cmp:()=>a,cmpAvailabilityNotification:()=>_s,cmpRtaTracking:()=>Es,devicePlugin:()=>yc,dmp:()=>l,impIDPlugin:()=>vc,irisTv:()=>wu,messagePluginsFromCreatives:()=>Iu,nativo:()=>ku,nonPersonalizedAds:()=>Cu,pageVisibility:()=>Au,paidSessions:()=>Ru,performance:()=>ju,permutive:()=>Ds,pixelSync:()=>Bu,players:()=>c,programmaticCampaign:()=>np,quantcast:()=>ip,revenueReporter:()=>rp,rtaPageEventDispatcher:()=>op,runtimeMessages:()=>ap,skins:()=>pp,slots:()=>u,smartBanner:()=>yp,smartScheduler:()=>mp,sticky:()=>p,tcfv2:()=>h,trackers:()=>f,version:()=>vp,videoEvents:()=>bp});var m=__webpack_require__(4807),y=(__webpack_require__(34),__webpack_require__(2711),__webpack_require__(2807),__webpack_require__(6611)),v=__webpack_require__(8749),b=__webpack_require__(6550),_=__webpack_require__(4653),w=__webpack_require__(6247),T=__webpack_require__.n(w),I=__webpack_require__(1871),S=__webpack_require__(2866),k=__webpack_require__(690),C=__webpack_require__.n(k),E=__webpack_require__(780),A=__webpack_require__.n(E),P=__webpack_require__(9228);const x=e=>{const t=e.getWrapperAdSystems(),n=e.getWrapperAdIds(),i=e.getWrapperCreativeIds();return{adPodInfo:{maxDuration:e.getAdPodInfo().getMaxDuration()},adSDK:"IMA",adSystem:t,advertiserId:e.getAdSystem(),advertiserName:e.getAdvertiserName(),adWrapperIds:n,adWrapperSystems:t,contentType:e.getContentType(),creativeId:(null==i?void 0:i[null==t?void 0:t.indexOf("GDFP")])||e.getCreativeId(),dealId:e.getDealId(),height:e.getVastMediaHeight(),lineItemId:(null==n?void 0:n[null==t?void 0:t.indexOf("GDFP")])||e.getAdId(),mediaUrl:e.getMediaUrl(),skippable:1!==e.getSkipTimeOffset(),title:e.getTitle(),width:e.getVastMediaWidth()}};var D=__webpack_require__(4320),O=__webpack_require__(4241);const R=(0,_.x)("players.tags"),N=v.ZP.broker("players.tags"),M=(0,S.v_)(((e,t)=>{let{args:n={},observable:i,broker:r,log:s}=t,o={cust_params:{}};const{pos:a,offset:d}=n,l=s.extend(`${e}-${a}-${d}`);l("startAuction requested",n),r.emit("collect video tags",{...n,getVideoTagsNum:e},((e,t)=>{const n=t&&t.tags?t.tags:t;if(!n)return l("Video targeting ended with:",o),void i(n);o=(0,I.Yb)({...o,...n,cust_params:{...o.cust_params,...n.cust_params}}),i(e,o)}))}));let L={cust_params:{}};function U(){return L}N.on("sync video tags update",(e=>{L=T()({},L,e)}));const j=e=>{let{allTargeting:t,syncVideoTags:n}=e;const i=t.reduce(((e,t)=>{const n=(e=>e&&"tags"in e)(t)?(e=>e.tags||{})(t):(e=>e&&"targeting"in e)(t)?(e=>e.targeting||{})(t):t||{},i=(0,I.Yb)(n);return{...e,...i,cust_params:{...e.cust_params,...i.cust_params}}}),{cust_params:{}}),r=T()({},i.cust_params,n.cust_params),{npa:s,rdp:o,ppid:a}=T()({},i,n);return{custParams:r,npa:s,rdp:o,ppid:a}},B=(0,S.v_)(((e,t)=>{let{videoTagsRequestOpts:n,targetingHandler:i=j,_broker:r=N}=t;const s=O.AT.inc(n.pos),o=(0,y.U2)(`videoDescription.${n.pos}.provideAdTagAfterRequestNum`,1);if(R({counter:s,provideAdTagAfterRequestNum:o}),s%o!=0)return R(`${n.pos} has not reached expected request number. Expecting ${o}.`),{pAuctionEnded:Promise.resolve(),buildAdTagUrl:()=>{},onImpression:()=>{},onFailure:()=>{}};const{autoplay:a,offset:d,pos:l,videoId:c,videoStarts:u}=n,p=R.extend(`${e}-${l}-${d}`);p("startAuction requested",n);const h=l?[{cust_params:{pos:l}}]:[];let f;const g=Date.now(),{resolve:m,promise:v}=(0,D.PQ)();r.emit("collect video tags",{...n,getVideoTagsNum:e},((e,t)=>{t?h.push(t):(p("targeting",h),m())}));const b={adSDK:"IMA",autoplay:a,offset:d,platform:n.impressionEventPlatform||"dmplayer",play:u,targeting:{pos:[l]},timeSinceStartOfPlayer:Date.now()-g,videoId:c};return N.on("bid request",l,((e,t)=>{N.emit("video.bid-request",{...b,bidder:t.bidder,playerId:"jwplayer",userIds:t.userids})})),{pAuctionEnded:v,buildAdTagUrl:()=>{p("building adTagUrl with targeting:",h);const{custParams:t,npa:r,rdp:s,ppid:o}=i({allTargeting:h,syncVideoTags:L,getVideoTagsNum:e,videoTagsRequestOpts:n}),{timeoutPromise:a,...d}=n;return R({pos:l}),f=(e=>{const{adRequestFramework:t,adEl:n,articleURL:i,autoplay:r,cust_params:s,domain:o,duration:a,embed:d,flyaway:l,headerBiddingParams:c,iu:u,linkBaseURL:p,offset:h,platform:f,muted:g,scor:m,screen:y,source:v,sync:b,title:_,videoEl:w,videoId:T,videoStarts:I,npa:S,rdp:k,ppid:E,videoAdServerUrl:x}=e,{customParams:D}=C()({adEl:n,articleURL:i,adRequestFramework:t,autoplay:r,cust_params:s,domain:o,duration:a,embed:d,flyaway:l,headerBiddingParams:c,offset:h,platform:f,muted:g,screen:y,source:v,sync:b,title:_,videoAdServerUrl:x,videoEl:w,videoId:T,videoStarts:I}),O=function(e){const{videoAdServerUrl:t,linkBaseURL:n,scor:i,screen:r,videoId:s,customParams:o}=e;return new(A())(t).correlator(Date.now()).cust_params(o).description_url(n).url(`${location.protocol}//${location.hostname}${location.pathname}`).scor(i).sz(e.size?(0,P.a6)(e.size):r.width+"x"+r.height).setRequestNonPersonalizedAds(Boolean(e.npa)).setRestrictDataProcessing(Boolean(e.rdp)).setPpid(e.ppid).addParam("vid",s).iu(e.iu).build()}({customParams:D,linkBaseURL:p,npa:S,ppid:E,rdp:k,scor:m,screen:y,size:e.size,videoAdServerUrl:x,videoId:T,iu:u});return O})({...d,cust_params:t,size:(0,y.U2)(`videoDescription.${l}.size`),pos:l,npa:r,rdp:s,ppid:o}),p("returning adTagUrl:",f),f},onImpression:e=>{let{adUnit:t,videoOpts:i}=e;const s={...b,...i,adImpression:x(t.creativeAd),playerId:n.playerId,tag:f};p("adImpression received",s),r.emit("video.ad-impression",s)},onFailure:e=>{let{videoOpts:t}=e;const n={...b,...t,tag:f};p("onFailure received",n),r.emit("video.no-ad-shown",n)}}}));var q=__webpack_require__(6883),F=__webpack_require__(1934);const V=(0,_.x)("videoBidding"),z=(0,_.x)("videoPlayer"),$=(e,t,n)=>({videoAdServerUrl:n.replace(/(&iu=[^&]*)/,`$1/${e}`),cust_params:{pos:e},...t}),H=(e,t)=>{var n,i;V("request for video options");const r=(0,y.U2)("plugins.enabled",[]).includes("adsFree")&&(null===(n=(i=__webpack_require__.g).isAdFreeEntitled)||void 0===n?void 0:n.call(i));V("isAdFreeUser",r);const s=(0,y.U2)("players.editorial.v2",{}),o=(0,y.U2)("plugins.forceFlyawayPlayerConfiguration.styleVariant","letterbox"),a=(0,y.U2)("player.setup.flyoutFromParagraph"),[d]=(0,b.oK)(),l=(0,y.U2)("players.setup.earlyAdFactoryInit",!0),c=-1!==d&&(0,y.U2)("players.setup.userActionTimeout"),u=-1!==d&&(0,y.U2)("players.setup.earlyBidding"),p=new Set((0,y.U2)("plugins.enabled",[])),h=e=>{const t=(0,y.U2)(`players.setup.${e}`);return void 0!==t&&t||Boolean(p.has(e))},f=h("mobileFlyawayPlayer"),{tracking:g={},"ads-setup":m={}}=t.plugins||{},v=m.schedule||!g.sponsored&&m.adsEnabled&&((e,t)=>{if((0,I.xb)(e))return[];const n=t.duration/1e3,{preRoll:i,midRollRepeat:r}=e,s=[],o=t.plugins["ads-setup"].videoAdServerUrl;if(i&&s.push($("preroll",{offset:0},o)),r){const{each:e,videoDurationExceeds:t}=r;let i=e,a=i+t;for(;a<n;)s.push($("midroll",{offset:i,minVideoDuration:a},o)),i+=e,a=i+t}return s.sort(((e,t)=>e.offset-t.offset))})(s,t)||[];V("schedule",v);const _=h("chromelessv2.dmplayer")||h("players.commercial"),w=!_&&h("videoFlyout"),T=!_&&h("videoForceFlyout"),S=r?{adsEnabled:!1,earlyAdFactoryInit:!1,earlyBidding:!1,schedule:[],useIMASDK:!1,userActionTimeout:!1,vpaidEnabled:!1}:{schedule:v,vpaidEnabled:h("vpaid"),useIMASDK:h("imaSDK"),earlyAdFactoryInit:!!l,userActionTimeout:c,earlyBidding:u},k={"ads-setup":{...m,...S,bidmax:!0},flyout:{enabled:w,active:w,forceFlyout:{enabled:T,active:T}},flyawayPlayer:{enabled:f,fromParagraph:a,...f?{adhesiveStyleVariant:o}:{}},debugOn:z.enabled};return V("new opts:",k),k};var W=__webpack_require__(5584);const Z=(0,_.x)("AdsManager"),G=[],X=()=>__webpack_require__.g.DM.molFeMiniLodash.filter(__webpack_require__.g.document.documentElement.childNodes,(e=>1===e.nodeType))[0]||document.body,K=v.ZP.broker("AdsManager"),J=()=>{},Y=e=>{K.emit("stop refreshing ads",e)},Q=()=>K.emit("force ads refresh"),ee=e=>{const{id:t}=function(e){const t=document.currentScript||(0,q.Z$)(document.querySelectorAll(`*[id^=${e.pos}] script`))||(0,q.Z$)(document.scripts);return null==t?void 0:t.parentNode}(e)||{},n={...e,containerId:t};K.emit("api message","adSlotMount",n)},te=e=>{K.emit("infinite-list append",e)},ne=e=>G.push(e),ie=()=>{if(document.getElementById("content"))for(const e of G){const t=document.getElementById(e),n=document.getElementById(e),i=n.getAttribute("style");t.className=n.className,i&&t.setAttribute("style",n.getAttribute("style"))}},re=K.until("gpt loaded"),se=e=>re.then(e),oe=()=>{},ae=()=>{K.emit("add fb-marketing-pixel")};K.on("error",(function(){return console.error(...arguments)}));let de={version:1};K.on("send with rta page unload",(e=>{Z("will send to rta on page unload:",e),de={...de,...e}}));const le=()=>de;try{const e=()=>!!Object.keys(b.SP).some((e=>e.includes("debug")));"production"!==__webpack_require__.g.adEnvironment||e()||(v.ZP.showUncaughtErrors=!1)}catch(e){console.error(e)}const ce=e=>Object.keys((0,y.U2)("slots.enabled",{})).includes("mpu_player")?(K.emit("chromeless player event","bannerFallbackAd",e),K.until("bannerFallbackAd destroyed")):(Z("fallback banner ad disabled, resolving"),Promise.resolve());let ue=[];function pe(){return ue}function he(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:K;e.pos=e.pos||"video";const{pos:i,offset:r,videoId:s}=e;console.warn("DEPRECATED: consider using startVideoAuction"),Z("getVideoTags",s,i,r,e),M({args:e,observable:t,broker:n,log:Z})}K.on("ads rendered update",(e=>{ue=e}));const fe=U;function ge(){K.emit("open control panel")}function me(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];K.emit("external subscription",e,...n)}function ye(e){K.emit("unstick position",e)}function ve(e){K.emit("remove watermark",e)}function be(e){const t=function(e){const t="verticalvideo"===e.platform?e.platform:e.pos||"video",{autoplay:n,fbiaEmbed:i,flyaway:r,isMobile:s,offset:o,original:a,syndicationService:d,videoAdServerUrl:l}=e;return{...e,pos:t,impressionEventPlatform:"jwplayer"===e.pos?"chromeless":e.platform||"dmplayer",playerId:"jwplayer"===e.pos||" verticalvideo"===e.pos?e.pos:"video",iu:(0,F.Z)(t,{autoplay:n,fbiaEmbed:i,flyaway:r,isMobile:s,offset:o,original:a,syndicationService:d,videoAdServerUrl:l})}}(e);return Z("startVideoAuction",t.videoId,t.pos,t.offset,t),B({videoTagsRequestOpts:t})}var _e=__webpack_require__(2623),we=__webpack_require__(1028),Te=__webpack_require__(5786),Ie=__webpack_require__(7325),Se=__webpack_require__(3907);const ke=__webpack_require__(9622),Ce=__webpack_require__(7325),Ee=new ke("click",(function(e){const t=Ce.getElementOrIframeById(e),n=t.classList.contains("slide")?t:(0,Se.closest)(t,(function(e){return e.classList.contains("slide")}));let i;return document.querySelectorAll?i=n.querySelectorAll(".adLinkLabel a"):(i=n.getElementsByTagName("a"),i=Array.prototype.filter.call(i,(function(e){return(0,Se.closest)(e,(function(e){return e.classList.contains("adLinkLabel")}))}))),i[0]})),Ae=new ke("adDeactivate",(function(e){return(0,Se.closest)(Ce.getElementOrIframeById(e),(function(e){return"mobileGalleryModal"===e.id}))}));function Pe(){const e=Array.prototype.slice.call(arguments),t=e[1];e[1]=function(){window.open(t,"_blank")},Ee.registerEvent.apply(Ee,e)}function xe(e,t){Ae.registerEvent(e,t)}function De(e){"string"==typeof e?e=Ce.getElementById(e):(0,Se.isElement)(e)||(e=e[0]);let t=(e=Ce.getAdContainer(e)).getElementsByTagName("div");return t=Array.prototype.filter.call(t,(function(e){const t=Ee.getEvent(e.id);return t&&-1!==t.toString().indexOf("window.open")})),t.length>0}function Oe(){Ee.registerEvent.apply(Ee,arguments)}var Re=__webpack_require__(7378),Ne=__webpack_require__.n(Re),Me=__webpack_require__(9622),Le=__webpack_require__.n(Me);const Ue={},je=e=>{if(e in Ue)return Ue[e];let t=!0,n=(0,y.U2)("headerBidders",{});"string"==typeof n&&(n=JSON.parse(n));const i=n[window.location.hostname];return i&&(i.blacklist&&i.blacklist.includes(e)&&(t=!1),i.whitelist&&!i.whitelist.includes(e)&&(t=!1)),Ue[e]=t,t};function Be(){return(0,y.U2)("plugins.enabled",[]).filter((e=>je(e)))}var qe=__webpack_require__(7249);const Fe=(0,_.x)("plugin-manager");let Ve,ze,$e,He={},We=[];const Ze=e=>{Fe("adding plugins:",e);const t=new Set([...(0,y.U2)("plugins.enabled",[]),...e]);(0,y.t8)("plugins.enabled",[...t])},Ge=e=>{Fe("removing plugins:",e);const t=new Set((0,y.U2)("plugins.enabled",[]));e.forEach((e=>{t.delete(e)})),(0,y.t8)("plugins.enabled",[...t])},Xe=[],Ke=e=>Xe.push(e),Je=async(e,t)=>(await Promise.all(Xe.map((n=>n(e,t))))).every((e=>e)),Ye=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{addPlugins:Ze,broker:Ve.broker(e),doc:document,getConfig:y.U2,setConfig:y.t8,localStorage,sessionStorage,log:(0,_.x)(e),removePlugins:Ge,registerPluginBouncer:Ke,checkPluginBouncer:Je,ownName:e,win:window,...t}},Qe=e=>"object"==typeof e&&e.default?e.default:e,et=(e,t,n)=>{if(!je(t))return;if($e.includes(t))return;let i=Qe(e[t]);if("function"!=typeof i&&(i=Qe(e[t])),$e.push(t),"function"==typeof i)try{i(Ye(t,n))}catch(e){console.error(`Error initializing plugin "${t}":`,e)}},tt=async(e,t)=>{const n=(0,y.U2)("pluginManager.setupTimeout",5e3),i=async(e,i,r)=>{try{const s={...Ye(e,t),pluginsAlreadyRun:r};(0,y.t8)("pluginManager.setupTimeout",i.plugiSetupTimeout||n);const o=i.pluginSetup(s),a=(0,y.U2)("pluginManager.setupTimeout",n);return await(0,D.yq)(a,o)}catch(t){console.error(`Error calling pluginSetup on plugin '${e}':`,t)}},r=new Set;let s=null;for(;;){const t=(0,y.U2)("plugins.enabled").filter((e=>!r.has(e))).shift();if(!t)break;if(s===t){Fe.warn("Plugin",t,"just ran and its asking to run again, ignoring it"),r.add(t);continue}s=t;let n="object"==typeof(o=e[t])&&o.default?o.default:o;if(n="object"==typeof n?n.default:n,n&&"function"==typeof n.pluginSetup){if(!await Je(t,n)){Fe("plugin bounced during init",t),r.add(t);continue}Fe("setup plugin",t),"not yet"!==await i(t,n,r)?(Fe("ran:",t),r.add(t)):Fe("plugin",t,"asked to be called again")}else r.add(t)}var o};function nt(e){return Object.fromEntries(Object.entries(e).map((e=>{let[t,{run:n,init:i,initTimeout:r,...s}]=e;const o=n||(()=>{});return o.pluginSetup=i,o.plugiSetupTimeout=r||5e3,Object.entries(s).forEach((e=>{let[t,n]=e;return o[t]=n})),[t,o]})))}function it(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:__webpack_require__.g.document,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.head;return new Promise(((r,s)=>{"async"in t||(t.async=!0);const o=n.createElement("script");o.src=e,Object.entries(t).forEach((e=>{let[t,n]=e;o.setAttribute(t,!0===n?t:!1===n?"":n)})),o.addEventListener("load",r),o.addEventListener("error",s),"function"==typeof i?i(o):i.appendChild(o)}))}(0,qe.fo)("adzouk",{run:function(e){let{broker:t}=e;const{top:n}=__webpack_require__.g;if(n.location.hostname.includes("combotag.com"))return;const i=encodeURIComponent(location.href),r=n.ct_t_init;t.invoke("load script",`//serve.combotag.com/show_ad?id=994&url=${i}&t=${r}`,null,{},(()=>!0))},vendorIds:{gdpr:!1}}),(0,qe.fo)("scriptLoader",{run:function(e){let{broker:t,getConfig:n,log:i}=e;const r={};t.register("load script",((e,t,n,s)=>new Promise(((o,a)=>{i("load script:",e,t,n,s);const d=s||(()=>window[t]);t&&d()&&(i("variable already defined:",t),o(d()));const l=t||e;if(r[l]||(i("adding script tag to load",e),it(e,n).then((()=>{i("script loaded:",e);const t=r[l];i("calling",t.length,"listeners");const n=e=>e();r[l]={push:n},t.forEach(n)}),a),r[l]=[]),t||s)try{(0,D.gb)((()=>d())).then((e=>{i("tracking variable found:",t,s,e),o(e)}))}catch(n){i("error while loading",e,":",n),a(new Error(`Error loading ${e} (trackingVariable: ${t}): ${n}`))}else i("no tracking variable given for",e,"waiting on script load"),r[l].push(o)})))),t.register("import script",(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{document:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;return it(e,t,n,arguments.length>3?arguments[3]:void 0)})),t.register("import script in iframe",(e=>{let{url:t}=e;return new Promise(((e,n)=>{const i=document.createElement("iframe");i.display="none",i.onload=()=>it(t,{},i.contentWindow.document).then(e,n),document.head.appendChild(i)}))})),t.register("import stylesheet",(e=>{const t=document.createElement("link"),{head:n}=document;t.href=e,t.setAttribute("rel","stylesheet"),n.appendChild(t)}))},isAdsFreeSupported:!0,ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0}});const rt=()=>({articlewithvideo:""+__webpack_require__.g.PageCriteria.containsVideo,style:__webpack_require__.g.PageCriteria.articleStyle});async function st(e){let{broker:t}=e;t.emit("set page level targeting",rt()),t.emit("set page level targeting",new Promise((async e=>{await(0,Se.untilBodyAvailable)(),e(rt())})))}st.ccpa={enabledIfDissent:!0},st.gdpr={enabledIfDissent:!0};var ot=__webpack_require__(5695),at=__webpack_require__.n(ot),dt=__webpack_require__(4799),lt=__webpack_require__.n(dt);const ct=e=>{let t,n,i="GET",r=3e3,s={};"string"==typeof e?t=e:({method:i="GET",url:t,timeout:r=3e3,headers:s={},data:n}=e);const o=new XMLHttpRequest,a=new Promise(((e,r)=>{o.onreadystatechange=function(){4===this.readyState&&(this.status>199&&this.status<300?e(this.responseText):r(new Error(`Error status ${this.status}: ${this.statusText}`)))},o.open(i,t,!0),Object.entries(s).forEach((e=>{let[t,n]=e;return o.setRequestHeader(t,n)})),n?o.send(n):o.send()}));return r?(0,D.yq)(r,a):a},ut={purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:[95]}};async function pt(){let e,t=`/api/player/${PageCriteria.pageType}/${PageCriteria.channel}`;"article"===PageCriteria.pageType&&(t+=`/article-${PageCriteria.articleId}`),t+="/player-config.json";try{e=await ct({url:t,timeout:5e3})}catch(e){console.error(e)}return e}function ht(e){let{broker:t,checkPluginBouncer:n}=e;const i=(0,y.U2)("pos.bvp_puff_26.editorialVideoURL","//video.dailymail.co.uk/video/mol/test/2017/10/17/8934813711130511437/1024x576_MP4_8934813711130511437.mp4");function r(e,n,i,r,s,o){const a=document.getElementById(e),d=e+"_player",l={id:d,width:640,height:264,dataOpts:n,src:i,click:o,description:s,title:(0,y.U2)("pos.bvp_puff_26.title","SPONSORED")},c=document.createElement("div"),u=r(l);c.innerHTML=u,function(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild)}(a),a.appendChild(c.firstElementChild),"none"===a.style.display&&(a.style.display="");const p=DM.molFeVideoplayer.init(document.getElementById(d));t.emit("video player inited",e,p)}__webpack_require__.g.addEventListener("message",(async function(e){if(!e.data||"function"!=typeof e.data.indexOf)return;const n=e.data.indexOf("_dm\n");if(0===n){let s;const o=e.data.substring(n+4),a=JSON.parse(o);b.SP["bvp-force-editorial"]&&(s=await pt())?(console.log("Forcing editorial instead of campaign in BVP"),r(a.targeting.pos[0],s,i,lt(),"","")):t.emit("video",a.type,a)}}),!1),t.on("ad rendered",(async(e,t)=>{if(t.isEmpty&&e.startsWith("bvp_")&&(0,y.U2)("pos.bvp_puff_26.editorialFallback")){const t=await pt();t&&r(e,t,i,lt(),"","")}})),t.on("video","playBrandedVideo",(e=>{const i=e.targeting.pos[0];if(!document.getElementById(i))return void t.emit("log","BVP",`Element #${i} not found`);const s=e.videoObject;let o=[];n("brandedVideoPlayer",ut)&&(o=[...o,...e.lotome.filter((e=>e.id&&e.id.length)).map((e=>({time:e.time,uri:`//bcp.crwdcntrl.net/5/c=991/b=${e.id}`})))]),e.impTracker&&e.impTracker.length&&o.push({time:9,uri:e.impTracker});const a=`${e.clickPrefix}${s.clickThroughUrl}`,d={title:s.pageTitle,poster:s.stillImageUrl,isMobile:PageCriteria.isMobile,playerId:"default",videoId:s.videoId,preload:"none",referenceId:s.referenceId,linkBaseURL:"",initialVideo:!1,plugins:{"branded-content":{clickThroughUri:a,endStatePoster:s.endStateImageUrl,trackingPixels:o},"ads-setup":{adsEnabled:!1},tracking:{channelShortName:PageCriteria.channel,sponsored:!0,referenceId:s.referenceId,trackingType:"commercialVideoPlayer"}}};r(i,JSON.stringify(d),s.videoUrl,at(),s.description,a)}))}ht.ccpa={enabledIfDissent:!0},ht.gdpr={enabledIfDissent:!0};const ft=()=>{const e=document.createTextNode((0,y.U2)("label.text","ADVERTISEMENT")),t=document.createElement("span");t.classList.add("mol-ads-label"),t.appendChild(e);const n=document.createElement("span");return n.classList.add("mol-ads-label-container"),n.appendChild(t),n};function gt(e){let{broker:t,log:n,getConfig:i}=e;__webpack_require__(6513);const r=__webpack_require__.g.googletag=__webpack_require__.g.googletag||{};r.cmd=r.cmd||[];const s=new Promise((e=>r.cmd.push((()=>e()))));t.emit("import script","https://securepubads.g.doubleclick.net/tag/js/gpt.js"),t.on("system ready",(async()=>{await s,t.emit("gpt loaded",r)}));const o=new Set,a=e=>{let{slot:t}=e;const n=document.getElementById(t.getSlotElementId());n&&(n.classList.contains("noAdLabel")||n.classList.contains("dmg-ads-ad"))||o.delete(t)&&n&&n.appendChild(ft())};s.then((()=>r.pubads().addEventListener("slotRenderEnded",a))),t.register("googletag.pubads.refresh",(async(e,t)=>{await s,e.forEach((e=>{o.add(e),n.enable&&n("refresh",e.molAd.pos,"targeting",e.getTargetingMap())})),r.pubads().refresh(e,t)})).sync=!0,t.register("googletag.display",(async e=>{if(await s,n.enabled)try{const t=r.pubads().getSlots().find((t=>t.getSlotElementId()===e)),i=t&&t.getTargetingMap()||void 0;n("display",e,"targeting",i)}catch(e){n.warn(e)}return r.display(e)})).sync=!0;const d=e=>(Array.isArray(e)?e:[e]).map((e=>String(e)));t.on("set page level targeting",(async e=>{const t=await e;await s,Object.entries(t||{}).map((e=>{let[t,n]=e;return[t,d(n)]})).forEach((e=>{let[t,i]=e;n("page level targeting:",t,"=",i),r.pubads().setTargeting(t,i)}))}))}gt.ccpa={enabledIfDissent:!0},gt.gdpr={enabledIfDissent:!0},gt.disableIfNoAdsServable=!0;const mt=e=>__webpack_require__.g.sessionStorage.getItem(e),yt=(e,t)=>{__webpack_require__.g.sessionStorage.setItem(e,t),vt()},vt=()=>{__webpack_require__.g.localStorage.setItem("mol.ads.session.publish",JSON.stringify(sessionStorage)),__webpack_require__.g.localStorage.removeItem("mol.ads.session.publish")},bt=e=>{for(const t in e)__webpack_require__.g.sessionStorage.setItem(t,e[t])},_t=e=>{let{key:t,newValue:n}=e;if(n)switch(t){case"mol.ads.session.request":__webpack_require__.g.localStorage.setItem("mol.ads.session.response",JSON.stringify(__webpack_require__.g.sessionStorage)),__webpack_require__.g.localStorage.removeItem("mol.ads.session.response");break;case"mol.ads.session.publish":bt(JSON.parse(n))}};let wt;const Tt=()=>(wt||(__webpack_require__.g.addEventListener("storage",_t),wt=new Promise((e=>{const t=n=>{let{key:i,newValue:r}=n;if("mol.ads.session.response"!==i)return;__webpack_require__.g.removeEventListener("storage",t);const s=r?JSON.parse(r):{};e(s)};__webpack_require__.g.addEventListener("storage",t),__webpack_require__.g.localStorage.setItem("mol.ads.session.request","mol.ads.session.request"),__webpack_require__.g.localStorage.removeItem("mol.ads.session.request")})).then(bt)),wt),It=()=>{let e=parseInt(mt("mol.ads.sessionDepth")||0);return isNaN(e)&&(e=0),e++,yt("mol.ads.sessionDepth",e),e},St=async()=>{const e=Tt();return await Promise.race([e,(0,D.Vs)(1)]),{session:await It()}};async function kt(e){let{broker:t}=e;t.emit("set page level targeting",St())}kt.isAdsFreeSupported=!0,kt.ccpa={enabledIfDissent:!0},kt.gdpr={enabledIfDissent:!0},__webpack_require__(7418),__webpack_require__(4871);var Ct=__webpack_require__(5069);(0,qe.fo)("analytics.bidsHunting",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=new Set(n("analytics.bidsHunting.positions",[])),s=new Set(n("analytics.bidsHunting.bidders",[]));t.on("bid",((e,n)=>{!n.cpm||r.size>0&&!r.has(e)||s.size>0&&!s.has(n.bidder)||(i(" adding bid to stack",e,n),t.emit("send event to bidmax",{type:"custom",payload:{...n,event:"bid-hunt",pos:e}}))}))}}),(0,qe.fo)("analytics.coreMetrics",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){var t;let{broker:n}=e;const i=null===(t=__webpack_require__.g.performance)||void 0===t||null===(t=t.getEntries())||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.serverTiming)||void 0===t||null===(t=t.find((e=>"cdn-cache"===e.name)))||void 0===t||null===(t=t.description)||void 0===t?void 0:t.toLowerCase();n.register("call for page analytics",(()=>{const{width:e,height:t}=(0,b.ap)();return{ss:{w:e,h:t},pageCache:i}}))}}),(0,qe.fo)("analytics.cwv",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){let{broker:t,log:n}=e;function i(){const e=__webpack_require__.g.DM.molFeWebVitals.getStandard(),{CLS:t,FCP:n,FID:i,LCP:r,TTFB:o}=e;return s({cls:1e3*(t||0),fcp:n,fid:i,lcp:r,ttfb:o})}function r(){const e=__webpack_require__.g.DM.molFeWebVitals.getUpdated(),{CLS:t,FCP:n,FID:i,LCP:r,TTFB:o}=e;return s({cls:1e3*(t||0),fcp:n,fid:i,lcp:r,ttfb:o})}function s(e){return Object.fromEntries(Object.entries(e).filter((e=>{let[,t]=e;return null!=t})).map((e=>{let[t,n]=e;return[t,Math.round(n)]})))}__webpack_require__.g.DM&&__webpack_require__.g.DM.molFeWebVitals?(t.register("call for page analytics",(()=>({cwv:i()}))),__webpack_require__.g.DM.molFeWebVitals.getUpdated&&t.register("call for page-unload",(()=>({cwv:r()}))),__webpack_require__.g.DM.later("mol-fe-web-vitals-standard",(()=>{const e=function(){const e=i(),{cls:t,fcp:n,fid:r,lcp:s,ttfb:o}=e;return{...(0,O._b)("clsP1k",t),...(0,O._b)("fcpP10s",n),...(0,O._b)("fidP1s",r),...(0,O._b)("lcpP10s",s),...(0,O._b)("ttfbP10s",o)}}();n("mol-fe-web-vitals-standard fired, cwv:",e),t.emit("send event to bidmax",{type:"custom",payload:{event:"cwv",...e}})}))):n.warn("cwv metrics cannot be used because window.DM.molFeWebVitals is unavailable")}}),(0,qe.fo)("analytics.pageUnload",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){var t;let{broker:n,log:i,setConfig:r}=e;const s={capture:!0,passive:!0},o=__webpack_require__.g.performance&&__webpack_require__.g.performance.timing&&__webpack_require__.g.performance.timing.navigationStart||__webpack_require__.g.adverts.startTime;i("Starting at:",__webpack_require__.g.adverts.startTime-o);const a=localStorage.getItem("mol.ads.previousDwellTime"),d=(null===(t=(0,b.Y0)())||void 0===t?void 0:t.type)||"unknown";setInterval((()=>{localStorage.setItem("mol.ads.previousDwellTime",Date.now()-o)}),1e4);let l=!1,c=0,u=0;const p=new Set,h=new Set;n.on("ad rendered",(e=>{p.add(e),c++})),n.on("bid",((e,t)=>{let{bidder:n}=t;h.add(n),u++}));const f=async()=>{if(l)return;l=!0,i("force sync dispatcher"),n.bus.setDispatcher((e=>e())),n.bus.globalTimeoutOverride=0,i("about to call for page-unload");const e=await n.invokeAll("call for page-unload"),t=Date.now()-o;localStorage.setItem("mol.ads.previousDwellTime",t);const r=e.reduce(((e,t)=>({...e,...t})),{t,pdt:a,autorefresh:!!(0,b.ej)("autorefresh"),pnt:d,chp:window.location.href.includes("comments"),imp:c,bids:u,pr:p.size,ub:h.size});i("got:",r),n.emit("send event to bidmax",{type:"page-unload",payload:r},!0)};window.addEventListener("pagehide",f,s),window.addEventListener("beforeunload",f,s),window.addEventListener("unload",f,s)}}),(0,qe.fo)("analytics.partners",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,log:n}=e;t.once("permutive ready",(()=>o({event:"permutive-load"}))),t.once("new minute media player",(()=>o({event:"mm-load"}))),t.once("admantx loaded",(()=>o({event:"admantx-load"}))),document.addEventListener("spot-im-api-ready",(()=>o({event:"openweb-load"}))),document.addEventListener("spot-im-conversation-loaded",(()=>o({event:"openweb-conv-loaded"}))),document.addEventListener("spot-im-conversation-viewed",(()=>o({event:"openweb-conv-viewed"}))),document.addEventListener("spot-im-current-user-sent-message",(()=>s("powms"))),Et.forEach((e=>document.addEventListener(e,(()=>s("powui"))))),t.once("outbrain container render",(()=>o({event:"outbrain-container-render"}))),t.once("outbrain render",(()=>o({event:"outbrain-first-widget-render"}))),t.once("outbrain visible",(()=>o({event:"outbrain-first-view"}))),t.on("outbrain render",(()=>s("poi"))),t.on("outbrain visible",(()=>s("pov"))),t.on("outbrain nocontent",(()=>s("ponc"))),t.on("outbrain failed to load",(()=>s("poftl"))),t.on("outbrain click",(()=>s("poc"))),t.on("outbrain issue",(()=>s("pop")));let i=0;t.on("new perform player",((e,n)=>{0===i&&o({event:"dazn-load"});const r="peformPlayer-"+i++;t.emit("track viewability",r,n),t.once("ad viewable",r,(()=>s("pdv")))}));const r={};function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!At[e])throw new Error(`Metric '${e}' not registered in 'knownMetric'. Please do so.`);n("inc counter:",e);const i=r[e]||0;r[e]=i+t}function o(e){n("sending event:",e),t.emit("send event to bidmax",{type:"custom",payload:e})}t.register("call for page-unload",(()=>r))}});const Et=["spot-im-clicked-delete-message","spot-im-clicked-edit-message","spot-im-clicked-flag","spot-im-clicked-message-context-menu","spot-im-clicked-mute-user","spot-im-share-drop-down","spot-im-share-type","spot-im-hover-like-details","spot-im-show-more-comments-clicked","spot-im-show-more-replies-clicked","spot-im-user-down-vote-click","spot-im-user-up-vote-click","spot-im-login-start","spot-im-post-login","spot-im-notification-drop-down-link","spot-im-user-notifications-click","spot-im-clicked-cog-menu","spot-im-clicked-privacy","spot-im-clicked-settings","spot-im-profile-drop-down","spot-im-sort-by-drop-down","spot-im-sort-by-select","spot-im-clicked-article-link-profile","spot-im-open-user-profile"],At={poi:"outbrain impression",pov:"outbrain view",ponc:"outbrain no content",poftl:"outbrain failed to load",poc:"outbrain click",pop:"outbrain issue",powui:"openWeb user interaction",powms:"openWeb message sent",pdv:"dazn view"};function Pt(e){let{broker:t}=e;t.register("call for page analytics",(()=>({abtest:__webpack_require__.g.molABTest})))}(0,qe.fo)("analytics.reportPlugins",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){let{broker:t,getConfig:n}=e;const i=new Set(n("bidmax.reportPlugins",[]));i.size>0&&t.register("call for page analytics",(()=>({plugins:n("plugins.enabled").filter((e=>i.has(e)))})))}}),(0,qe.fo)("analytics.scrollDepth",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){let{broker:t}=e,n=0;function i(){n=Math.max(n,Math.round(window.pageYOffset+window.innerHeight))}document.addEventListener("scroll",(0,S.FU)(i,300),{passive:!0,capture:!1}),t.register("call for page-unload",(()=>(i(),{sd:n})))}}),(0,qe.fo)("analytics.takeover",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:i}=e,r=!1;n("__generated.modifiers.applied",[]).some((e=>e.startsWith("campaigns.rules-linteItem")))?(t.register("call for page analytics",(()=>({takeover:!0}))),t.emit("send event to bidmax",{type:"custom",payload:{event:"takeover"}})):__webpack_require__.g.addEventListener("message",(function e(n){!r&&n.data&&"function"==typeof n.data.indexOf&&0===n.data.indexOf("_dm_ads_takeover")&&(i("Marking page as containing takeover"),t.register("call for page analytics",(()=>({takeover:!0}))),t.emit("send event to bidmax",{type:"custom",payload:{event:"takeover"}}),r=!0,"function"==typeof __webpack_require__.g.removeEventListener&&__webpack_require__.g.removeEventListener("message",e,!1))}),!1)}}),(0,qe.fo)("analytics.timeSpent",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){let{broker:t,log:n,getConfig:i}=e;const r={capture:!0,passive:!0},s=i("bidmax.inactiveTime",1e4),o=__webpack_require__.g.performance&&__webpack_require__.g.performance.timing&&__webpack_require__.g.performance.timing.navigationStart||__webpack_require__.g.adverts.startTime;n("Starting at:",__webpack_require__.g.adverts.startTime-o);let a=0,d=0,l=o,c=o;const u=function(){const e=Date.now(),t=e-c-s;t>0&&(n("Adding inactive time:",t),a+=t,c=e)},p=()=>{const e=Date.now(),t=e-l;d+=t,n("Adding hidden time:",t),l=e},h=[[document,["mousemove","keypress","scroll","mousewheel","touchmove"]],[window,["focus","scroll"]]],f=(0,S.FU)((e=>{const t=Date.now();e&&u(),c=t}),1e3);for(const[e,t]of h)t.forEach((t=>e.addEventListener(t,f,r)));t.register("call for page-unload",(()=>(u(),m()&&p(),{i:a,h:d})));const g=()=>void 0!==document.hidden?"visibilitychange":void 0!==document.msHidden?"msvisibilitychange":void 0!==document.webkitHidden?"webkitvisibilitychanged":"",m=()=>{try{return __webpack_require__.g.top.document.hidden||__webpack_require__.g.top.document.msHidden||__webpack_require__.g.top.document.webkitHidden||!1}catch(e){return!!g()}};let y=m();document.addEventListener(g(),(e=>{m()!==y&&(y=m(),y?l=Date.now():p())}),!1)}}),(0,qe.fo)("analytics.videoFailures",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){var t;let{broker:n,log:i}=e;i("Starting");const r=function(){let{videoId:e,adErrorCode:t,autoplay:r,errorMessage:s,offset:o,trackingType:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const d={videoId:e,adErrorCode:t,autoplay:r,errorMessage:s,offset:o,trackingType:a};i("Error detected:",e,d),n.emit("send event to bidmax",{type:"video-ad-error",payload:d}),i("error:",d)},s=()=>{i("subscribing to 'video.advert-failed' events"),__webpack_require__.g.DM.pageEvents.subscribe("video.advert-failed",(function(e){r(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}))};n.on("video.advert-failed",(function(){r(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})})),(null===(t=__webpack_require__.g)||void 0===t||null===(t=t.DM)||void 0===t?void 0:t.pageEvents)&&s()||(i("waiting for chromeless player to load"),n.on("mol-fe-sync bundle loaded",(()=>{var e;i("mol-fe-sync bundle loaded"),null!==(e=__webpack_require__.g)&&void 0!==e&&null!==(e=e.DM)&&void 0!==e&&e.pageEvents&&s()})))}}),Pt.isAdsFreeSupported=!0,Pt.ccpa={enabledIfDissent:!0},Pt.gdpr={enabledIfDissent:!0};var xt=__webpack_require__(3166);let Dt,Ot,Rt,Nt;const Mt=["advertiserId","campaignId","creativeId","isEmpty","lineItemId","serviceName"],Lt=["adDurationSecs","adSystem","adTitle","advertiserId","autoplay","contentType","creativeId","isEmpty","lineItemId","mediaUrl","offset","platform","play","skippable","targeting","timeAtRender","timeSinceStartOfPlayer","videoHeight","videoWidth","winner","winningCPM"],Ut=()=>Date.now()-__webpack_require__.g.adverts.startTime,jt=e=>{if(e.slot&&e.slot.molAd&&void 0!==e.slot.molAd.state)return e.slot.molAd.state};function Bt(e){if(Array.isArray(e.size)&&2===e.size.length){const{size:[t,n]}=e;return`${t}x${n}`}}const qt=()=>{const e={};let t;const n={};let i=0;const r=async function(i){let{auction:r,pos:s,adImpressionData:o,offset:a}=i,d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!d)return delete e[s][a],n[s]&&delete n[s][a],delete r.pendingImpressions,delete r.lastPosTime,void(t=void 0);const l=r.slots[s];if(l.impression=o,void 0!==a?(r.pendingImpressions.delete(s+a),l.bids=n[s][a]?[...n[s][a]]:[],delete e[s][a],delete n[s][a]):(r.pendingImpressions.delete(s),l.bids=n[s],delete e[s],delete n[s]),!(r.pendingImpressions.size>0)&&(delete r.pendingImpressions,delete r.lastPosTime,t=void 0,d)){const e={...await Ft(),auction:r};Dt.emit("send to bidmax",e)}},s=e=>({auctionTime:e,startTime:Ut(),auctionId:i++,slots:{},pendingImpressions:new Set}),o=(t,n,i)=>{n.lastPosTime=Ut(),n.pendingImpressions.add(t+(void 0!==i?i:"")),n.slots[t]={},void 0!==i?(n.offset=i,e[t]||(e[t]={}),e[t][i]=n):e[t]=n},a=(e,n)=>((!t||t.lastPosTime<Ut()-2e3)&&(t=s(e)),o(n,t),t.slots[n].auctionStart=Ut(),t);Dt.on("get tags",(t=>{let{slot:{pos:n},timeout:i}=t;e[n]?Ot(`Auction is pending for ${n}`):a(i,n)})),Dt.on("bidding ended",(t=>{Ot("bidding ended",t);const n=e[t];n.slots?n.slots[t].biddingEnded=Ut():Object.keys(n).forEach((e=>{n[e].slots[t].biddingEnded=Ut()}))})),Dt.on("get video tags",(t=>{let{platform:i="dmplayer",offset:r=0,slot:{pos:a},timeout:d}=t;e[a]&&e[a][r]&&(e[a][r].pendingImpressions.delete(a+r),delete e[a][r],delete n[a][r]),o(a,s(d),r),n[a]||(n[a]={}),n[a][r]=[]})),Dt.on("bid",((t,i)=>{let r,{platform:a,offset:d,bidder:l,cpm:c,cached:u,requestSizes:p}=i;if(Ot("on bid",t),a="jwplayer"===t&&"dmplayer"===a?"chromeless":a,void 0!==d?(n[t]||(n[t]={}),r=n[t][d]=n[t][d]||[]):r=n[t]=n[t]||[],!r)return void Ot.warn("Got a bid after auction finished:",{pos:t,bidder:l,cpm:c,platform:a,offset:d,cached:u});void 0===d||e[t][d]||o(t,s(5e3),d);const h={bidder:l,cpm:Math.round(c),time:Ut(),platform:a,offset:d,cached:u,requestSizes:p};r.push(h)})),Dt.on("ad requested",(t=>{const n=e[t];n&&(n.slots[t].adRequestTime=Ut())})),Dt.on("ad loaded",(t=>{const n=e[t];n&&(n.slots[t].adLoadedTime=Ut())})),Dt.on("headerbidder winner",((t,n)=>{const i=e[t];i&&(i.slots[t].winner=n)}));const d=__webpack_require__.g.DM&&__webpack_require__.g.DM.molFeTracking&&__webpack_require__.g.DM.molFeTracking.pageEvents,l=(t,i)=>{const a=i.playerId||(i.targeting&&i.targeting.pos?i.targeting.pos[0]:"video"),d="preroll"===i.offset?0:"midroll"===i.offset?20:i.offset,l=i.tag&&(0,xt.Gi)(i.tag)||{cust_params:{}},c=Object.fromEntries(Object.entries(l.cust_params).filter((e=>{let[t,n]=e;return!t.startsWith("gdpr")&&!t.startsWith("hb_")&&(null==n?void 0:n.length)<=20}))),u=i.adImpression;let p;let h,f;var g;u&&!(0,I.xb)(u)&&(n[a]=n[a]||{},n[a][d]=n[a][d]||[],Dt.emit("video ad viewable",{pos:a,bids:n[a][d],videoId:i.videoId}),h=(e=>{let t="undetermined";return!e.adWrapperIds||!e.adWrapperIds[0]||e&&e.adWrapperSystems&&"DCM"===e.adWrapperSystems[0]?t="Other":e.traffickingParameters&&e.traffickingParameters.vu&&(t="tia"),t})(u),f={}[h]||0,p={adDurationSecs:null==u||null===(g=u.adPodInfo)||void 0===g?void 0:g.maxDuration,adSystem:null==u?void 0:u.adSystem,adTitle:u.title,advertiserId:u.adSystem,autoplay:i.autoplay,contentType:u.contentType,creativeId:u.creativeId,isEmpty:!1,lineItemId:u.lineItemId,mediaUrl:u.mediaUrl,offset:i.offset,play:i.play,platform:i.platform,skippable:u.skippable,targeting:{...c,pos:[a]},timeSinceStartOfPlayer:i.timeSinceStartOfPlayer,videoHeight:u.height,videoWidth:u.width,winner:h,winningCPM:f},Ot("targeting",p.targeting),Ot("imaEventData.targeting",u.targeting)),void 0===d||e[a]&&e[a][d]||o(a,s(5e3),d);const m={...e[a][d]};if(delete e[a][d],m)if(m.platform=i.platform,m.offset=d,p&&!(0,I.xb)(p)){const e=(0,I.ei)({...p,timeAtRender:Ut()},Lt);r({auction:m,pos:a,adImpressionData:e,offset:d})}else r({auction:m,pos:a,offset:d},!1);else Ot(`Current auction not found for ${a}${d}`)};Dt.on("video.bid-request",(async e=>{Ot("sending bid request data",e),Dt.emit("send event to bidmax",{...await Ft(),...e})})),d&&(Dt.on("dom ready",(()=>{d.subscribe("video.ad-impression",l),d.subscribe("video.no-ad-shown",l)})),Dt.on("video.ad-impression",(e=>l(0,e))),Dt.on("video.no-ad-shown",(e=>l(0,e)))),Dt.on("ad rendered",((t,n)=>{if(t.endsWith("-oop"))return;const i=(e=>({...(0,I.ei)(e,Mt),...e.isEmpty?{}:{creativeId:e.creativeId||e.sourceAgnosticCreativeId,lineItemId:e.lineItemId||e.sourceAgnosticLineItemId,advertiserId:e.advertiser,campaignId:e.campaignId,companyId:e.companyIds},targeting:e.slot?{...e.slot.getTargetingMap()}:{},timeAtRender:Ut(),slotState:jt(e),size:Bt(e)}))(n),s=e[t]||a(0,t);Ot("ad rendered, processImpression",t,s),r({auction:s,pos:t,adImpressionData:i})}))},Ft=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;const t=(await Dt.invokeAll({message:["call for page analytics"],timeout:e})).reduce(((e,t)=>({...e,...t})),{});return{...Rt,...t}};function Vt(e){let{broker:t,getConfig:n,log:i}=e;Ot=i,Dt=t,Nt=n,Rt={timestamp:__webpack_require__.g.adverts.startTime,referrer:document.referrer,url:window.location.href},__webpack_require__.g.performance&&__webpack_require__.g.performance.timing&&__webpack_require__.g.performance.timing.navigationStart&&(Rt.adsStart=__webpack_require__.g.adverts.startTime-__webpack_require__.g.performance.timing.navigationStart),Dt.register("get page level analytics",(()=>Ft())),function(){const e=Nt("bidmax.debounceTime",1e3),t=Nt("bidmax.pageTimeout",1e3);let n=[];const i=(0,S.Ds)((async function(){let e={...await Ft(t)};if(n.length){if(Ot.enabled){const e=n.find((e=>"page-unload"===e.type))?JSON.stringify(n):n;Ot("dispatching",n.length,"events:",e)}e=1===n.length?{...e,...n[0]}:{...e,type:"events",payload:n},Dt.emit("send to bidmax",e),n=[]}}),e);Dt.on("send event to bidmax",(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.push({...e,timeAtSend:Ut()}),t||!e.type?i.callNow():i()}))}(),Dt.on("send to bidmax",(e=>{try{const t={...e,event_type:"bidmax",type_version:2,timeAtSend:Ut(),version:b.SP.bidmax||"7.9.0"},n={"Content-type":"text/plain"};Dt.emit("dispatch to bidmax",{headers:n,body:t})}catch(e){console.warn(e)}}));const r=window.mol_ads_famab;Dt.on("plugins enabled",(async()=>Dt.emit("send event to bidmax",{type:"page",famab:r}))),qt()}function zt(e){let{broker:t,getConfig:n,log:i}=e,r=navigator.sendBeacon&&n("bidmax.dispatcher.useBeacon",!0);const s=n("bidmax.dispatcher.useCurrentUrl",!1)?window.location.href:n("bidmax.dispatcher.url","//crta.dailymail.co.uk"),o=(0,b.oK)()[0];o<13&&o>0&&(i("force disabling beacon for iOS < 13"),r=!1),t.on("dispatch to bidmax",(e=>{let{body:t,headers:n}=e;if(t){if(r)try{t={...t,reqType:"beacon"};const e=new Blob([JSON.stringify(t)],{...n,type:"text/plain"});if(navigator.sendBeacon(s,e))return}catch(e){console.error(e)}try{t={...t,reqType:"xhr"};const e=new XMLHttpRequest;e.open("POST",s,!0),Object.entries(n).forEach((t=>{let[n,i]=t;return e.setRequestHeader(n,i)})),e.send(JSON.stringify(t))}catch(e){console.error(e)}}else console.warn("Ignoring BidMax message with no body")}))}function $t(e){let{broker:t,getConfig:n}=e;const i=n("bidmax.migrationChance",0);if(Math.random()>=i)return;const r=navigator.sendBeacon&&n("bidmax.dispatcher.useBeacon",!0);let s=n("bidmax.dispatcher.useCurrentUrl",!1)?window.location.href:n("bidmax.dispatcher.url","//crta.dailymail.co.uk");s.endsWith("/")||(s+="/"),s+="migration",t.on("dispatch to bidmax",(e=>{let{body:t,headers:n}=e;if(t){if(r)try{t={...t,reqType:"beacon"};const e=new Blob([JSON.stringify(t)],{...n,type:"text/plain"});if(navigator.sendBeacon(s,e))return}catch(e){console.error(e)}try{t={...t,reqType:"xhr"};const e=new XMLHttpRequest;e.open("POST",s,!0),Object.entries(n).forEach((t=>{let[n,i]=t;return e.setRequestHeader(n,i)})),e.send(JSON.stringify(t))}catch(e){console.error(e)}}else console.warn("Ignoring BidMax message with no body")}))}Vt.isAdsFreeSupported=!0,Vt.ccpa={enabledIfDissent:!0},Vt.gdpr={enabledIfDissent:!0},zt.isAdsFreeSupported=!0,zt.ccpa={enabledIfDissent:!0},zt.gdpr={enabledIfDissent:!0},$t.isAdsFreeSupported=!0,$t.ccpa={enabledIfDissent:!0},$t.gdpr={enabledIfDissent:!0};const Ht=e=>{let[t,n]=e;return n>Date.now()-2628e6},Wt=(e,t)=>{let[n,i]=t;return{...e,[n]:i}};function Zt(e){let{broker:t}=e;const n="mol.ads.knownBundles",i=JSON.parse(localStorage.getItem(n)||"{}"),r=Object.entries(i).filter(Ht).reduce(Wt,{}),s=!!r["7.9.0"];r["7.9.0"]=Date.now(),localStorage.setItem(n,JSON.stringify(r)),t.register("call for page analytics",(()=>({abcache:s})))}Zt.isAdsFreeSupported=!0,Zt.ccpa={enabledIfDissent:!0},Zt.gdpr={enabledIfDissent:!0};const Gt="mol.ads.cmp.consent",Xt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(((n,i)=>{tn()(e,t,((r,s)=>{s?n(r):i(new Error(`Failed to call __cmp(${e}, ${t})`))}))}))},Kt=(0,S.ri)((()=>Xt("hasConsentedToAll"))),Jt=(0,S.ri)((()=>Xt("hasChoiceBeenMade"))),Yt=()=>Qt()&&(0,y.U2)("ccpa.scriptBaseUrl")&&(0,y.U2)("plugins.enabled").includes("cmp")&&(0,y.U2)("cmp.enable.userAgents",[".*"]).some((e=>navigator.userAgent.match(new RegExp(e)))),Qt=()=>"US"===PageCriteria.geo,en=()=>(0,y.U2)("ccpa.consentManagementRegions",["CA","VA"]).includes(__webpack_require__.g.PageCriteria.region),tn=()=>__webpack_require__.g.__uspapi,nn=()=>"yes"===localStorage.getItem("mol.ads.cmp.consent"),rn=()=>null!==localStorage.getItem("mol.ads.cmp.consent"),sn=()=>(0,y.U2)("plugins.enabled").includes("cmp")&&"US"!==PageCriteria.geo;function on(e){var t;let{broker:n,getConfig:i,log:r,pageCriteria:s}=e;const o="ccpa"===i("cmp.model"),a=(null===(t=i("ccpa.scriptBase"))||void 0===t?void 0:t.split("/").pop())||void 0,d={cmpVersion:i("ccpa.version",a),cmpEnforced:Qt()&&en(),cmpRegion:s.region};__webpack_require__.g[i("cmp.apiHandler")]("getUSPData",null,((e,t)=>{t&&(r("encoded data:",e),(e=>{let{uspString:t}=e;d.uspString=t})(e))})),n.register("call for page analytics",(()=>(d.consent=localStorage.getItem("mol.ads.cmp.consent"),d.cmp=o?"ccpa":void 0,r("sending",d),d)))}on.isAdsFreeSupported=!0,on.ccpa={enabledIfDissent:!0};const an="__bidmax\n",dn=(0,_.x)("custom-tracking");async function ln(e){let{broker:t,getConfig:n}=e;const i=n("bidmax.customTracking.max",1024);dn("MAX:",i),window.addEventListener("message",(async e=>{let{data:n}=e;if("string"!=typeof n||!n.startsWith(an))return;const r=n.substring(an.length);dn("message received size:",r.length),r.length>i&&dn("message too long, max",i);try{const e=JSON.parse(r);dn("message:",e),t.emit("send event to bidmax",{type:"custom",payload:e})}catch(e){dn("Error parsing:",r),console.error(e)}}))}ln.isAdsFreeSupported=!0,ln.ccpa={enabledIfDissent:!0},ln.gdpr={enabledIfDissent:!0};const cn="mol.ads.entryPoint.sessionId",un="mol.ads.entryPoint.data",pn=function(){return{id:(0,O.kb)(),lastVisit:Date.now()}},hn=(0,_.x)("entry-point"),fn=async()=>{if(__webpack_require__.g.RTA&&__webpack_require__.g.RTA.ids&&__webpack_require__.g.RTA.ids.then){const{visit:e}=await __webpack_require__.g.RTA.ids;if("string"==typeof e){const t=e.split(".");return hn("Using RTA visit id"),t[0]}}},gn=async e=>{hn("Using own session");let t=JSON.parse(localStorage.getItem(cn)||"{}");return t.id?t.lastVisit<Date.now()-60*e*1e3&&(hn("Session found in storage but it is too old:",new Date(t.lastVisit).toISOString(),"and max session is",e,"mins"),t=pn()):(hn("No session found in storage, creating a new one"),t=pn()),t.lastVisit=Date.now(),localStorage.setItem(cn,JSON.stringify(t)),t.id};async function mn(e){let{broker:t,getConfig:n}=e;const i=n("bidmax.entryPoint.sessionDurationInMins",28),r=(async()=>{let e=JSON.parse(localStorage.getItem(un)||"{}");const t=await(async()=>await fn()||gn(i))();if(hn("Id",t),e.sessionId!==t){hn("Entry Point new or too old. Creating another.");const n=__webpack_require__.g.PageCriteria;e={sessionId:t,ep:{pt:n.pageType,c:n.channel,s:n.subchannel,r:document.referrer}},localStorage.setItem(un,JSON.stringify(e))}return hn("Entry Point:",e.ep),{ep:e.ep}})();t.register("call for page analytics",(()=>r))}mn.isAdsFreeSupported=!0,mn.ccpa={enabledIfDissent:!0},mn.gdpr={enabledIfDissent:!0};const yn=async()=>{const e=(0,D.gb)((()=>__webpack_require__.g.pagemeta)),t=await e;return{bundle:t.bundleVersion,sync:t.syncBundleVersion,async:t.asyncBundleVersion,video:t.videoBundleVersion}},vn=e=>{let{broker:t}=e;return new Promise((e=>{t.once("gpt initialized",(t=>{e({gpt:t.getVersion()})}))}))},bn=e=>{let{broker:t}=e;return new Promise((e=>{t.once("prebid loaded",(t=>{e({prebid:t.version})}))}))},_n=async()=>{const e=(0,D.gb)((()=>__webpack_require__.g.google&&__webpack_require__.g.google.ima&&__webpack_require__.g.google.ima.VERSION));return{ima:await e}},wn=async()=>(0,D.gb)((()=>{if(!__webpack_require__.g.permutive||!__webpack_require__.g.permutive.config||!__webpack_require__.g.permutive.config.apiVersion)return!1;const{apiVersion:e,sdkType:t}=__webpack_require__.g.permutive.config;return{permutiveApi:e,permutiveSdkType:t}})),Tn=e=>{const{broker:t,getConfig:n,log:i}=e,r={},s={pageMeta:yn,gpt:vn,prebid:bn,ima:_n,permutive:wn},o=n("analytics.external.bundleVersions",[]);i("finding versions for",o),o.forEach((t=>{const n=s[t]&&s[t](e);n?n.then((e=>{i(`assigning ${t} version`,e),Object.assign(r,e)}),(()=>i("error waiting for",t))):i.error(`unable to find handler for ${t} version`)})),t.register("call for page analytics",(()=>({externals:{versions:r}})))};Tn.isAdsFreeSupported=!0,Tn.ccpa={enabledIfDissent:!0},Tn.gdpr={enabledIfDissent:!0};const In=Tn;async function Sn(e){let{broker:t}=e;const n={};await t.until("prebid loaded");const i=__webpack_require__.g.pbjs.renderAd;__webpack_require__.g.pbjs.renderAd=function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];const[,o]=r,{pos:a,bidder:d}=n[o];t.emit("headerbidder winner",a,d),i.apply(__webpack_require__.g.pbjs,r)},__webpack_require__.g.pbjs.onEvent("bidResponse",(e=>{n[e.adserverTargeting.hb_adid]={pos:e.adUnitCode,bidder:e.bidderCode}}))}function kn(e){let{broker:t,getConfig:n}=e;const i={},r=n("bidmax.inputDelay.monitorMax",!1),s=e=>{const t=n=>{const s=(n.timeStamp>=1e12?(new Date).getTime():performance.now())-n.timeStamp|0;if(s){r||e.removeEventListener(n.type,t,o);const a="f"+n.type[0],d="m"+n.type[0];i[a]?r&&i[d]<s&&(i[d]=s):(i[a]=s,r&&(i[d]=s))}};return t},o={capture:!0,passive:!0};window.addEventListener("scroll",s(window),o),document.addEventListener("mousemove",s(document),o),document.addEventListener("click",s(document),o),t.register("call for page analytics",(()=>({latency:i})))}Sn.ccpa={enabledIfDissent:!0},Sn.gdpr={enabledIfDissent:!0},kn.isAdsFreeSupported=!0,kn.ccpa={enabledIfDissent:!0},kn.gdpr={enabledIfDissent:!0};const Cn=["jsHeapSizeLimit","totalJSHeapSize","usedJSHeapSize"];function En(e){let{broker:t}=e;__webpack_require__.g.performance&&__webpack_require__.g.performance.memory&&t.register("call for page analytics",(()=>Promise.resolve({memory:Cn.reduce(((e,t)=>(e[t]=__webpack_require__.g.performance.memory[t],e)),{})})))}function An(e){let{broker:t}=e;t.on("page load",(()=>t.emit("send event to bidmax",{type:"page-load"})))}function Pn(e){let{broker:t}=e;t.register("call for page analytics",(async()=>{if(!__webpack_require__.g.RTA||!__webpack_require__.g.RTA.ids||!__webpack_require__.g.RTA.ids.then)return{};try{const{user:e,visit:t}=await(0,D.yq)(3e3,__webpack_require__.g.RTA.ids,new Error),n={rta:{user:e}};if("string"==typeof t){const e=t.split(".");5===e.length&&(n.rta.visit=e[0])}return n}catch(e){return console.error("RTA.ids not available"),{}}}))}function xn(e){let{broker:t}=e;t.register("call for page analytics",(()=>Promise.resolve({localStorage:{total:Object.keys(localStorage).map((e=>localStorage.getItem(e))).reduce(((e,t)=>e+t.length),0),top10:Object.keys(localStorage).map((e=>[e,localStorage.getItem(e).length])).sort(((e,t)=>t[1]-e[1])).slice(0,10)}})))}En.isAdsFreeSupported=!0,En.ccpa={enabledIfDissent:!0},En.gdpr={enabledIfDissent:!0},An.isAdsFreeSupported=!0,An.ccpa={enabledIfDissent:!0},An.gdpr={enabledIfDissent:!0},Pn.isAdsFreeSupported=!0,Pn.ccpa={enabledIfDissent:!0},Pn.gdpr={enabledIfDissent:!0},xn.isAdsFreeSupported=!0,xn.ccpa={enabledIfDissent:!0},xn.gdpr={enabledIfDissent:!0};const Dn=(0,_.x)("timing"),On=["navigationStart","responseEnd","domInteractive","domContentLoadedEventStart","domComplete","fetchStart"],Rn={"first-paint":"paint","first-contentful-paint":"firstContentfulPaint"},Nn=()=>{if(performance.getEntriesByType){const e=performance.getEntriesByType("paint").filter((e=>Rn[e.name])).map((e=>[Rn[e.name],Math.round(e.startTime)]));return Object.fromEntries(e)}},Mn=()=>{if(!__webpack_require__.g.performance||!__webpack_require__.g.performance.timing||!__webpack_require__.g.performance.timing.navigationStart)return{};const e=[...On.map((e=>[e,__webpack_require__.g.performance.timing[e]])).filter((e=>0!==e[1])),["adsBundleStart",adverts.startTime]].sort(((e,t)=>e[1]-t[1])),t=e[0],n=e.map((e=>[e[0],e[1]-t[1]])).reduce(((e,t)=>{let[n,i]=t;return{...e,[n]:i}}),{});return n[t[0]]=t[1],n};function Ln(e){let{broker:t}=e;const n=t.until("page network data").then((e=>{let[t]=e;return t.network}));t.on("page load",(async()=>{Dn("page load happened, sending timing data to bidmax");const e=await(0,D.yq)(1e3,n).catch((()=>({}))),i={...Mn(),...Nn(),...e};Dn("sending:",i),t.emit("send event to bidmax",{type:"page-load",payload:i})}))}Ln.isAdsFreeSupported=!0,Ln.ccpa={enabledIfDissent:!0},Ln.gdpr={enabledIfDissent:!0};class Un{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"__ads_viewability";this.startTimestamp=e,this.key=t;const n=JSON.parse(__webpack_require__.g.localStorage.getItem(t)||"{}"),i=Object.keys(n.pending||{}).reduce(((e,t)=>({...e,[t]:{misses:((n.ready[t]||{}).misses||0)+1}})),{});this.state={ready:Object.keys(n.ready||{}).reduce(((e,t)=>({...e,[t]:{...n.ready[t],...e[t]}})),i),pending:{}}}save(){__webpack_require__.g.localStorage.setItem(this.key,JSON.stringify(this.state))}adRendered(e){if(this.state.pending[e]){const t=this.state.ready[e]||(this.state.ready[e]={});t.misses=(t.misses||0)+1}this.state.pending[e]=1,this.save()}adViewed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();delete this.state.pending[e];const n=this.state.ready[e]||(this.state.ready[e]={});(n.views||(n.views=[])).push(t-this.startTimestamp),this.save()}snapshot(){const e=this.state.ready;return this.state.ready={},this.save(),e}}function jn(e){let{broker:t,getConfig:n}=e;if(!__webpack_require__.g.localStorage)return;const i=n("viewability.waitBeforeForcing",3e3),r=new Un(Date.now());let s;const o=function(){s&&(clearTimeout(s),s=void 0)},a=()=>{o(),s=setTimeout(d,i)},d=()=>{t.emit("send event to bidmax",{type:"ping"}),s=void 0},l=new Set;let c;t.on("ad rendered",(e=>r.adRendered(e))),t.on("ad viewable",(e=>{r.adViewed(e,Date.now()),"billboard"!==e&&!e.startsWith("sky_")||l.has(e)||(l.add(e),a())})),t.once("ad viewable",(e=>{c=!0,a()})),t.intercept("send to bidmax",((e,t)=>{let[n,i]=e;o();const s=r.snapshot();if((0,I.xb)(s))return t();t(n,{...i,viewability:s,first:c}),c=void 0}))}jn.ccpa={enabledIfDissent:!0},jn.gdpr={enabledIfDissent:!0};var Bn=__webpack_require__(9288),qn=__webpack_require__.n(Bn);const Fn=(0,_.x)("connection-type"),Vn=async e=>{let{broker:t}=e;const n=qn()(navigator,"connection.type");Fn("fetching edgedata from akamai");const i=await((e,t,n)=>{const i=new Headers;Object.keys(t).forEach((e=>{i.append(e,t[e])}));const r={method:"get",headers:i};return window.fetch("https://www.dailymail.co.uk/geo/edgedata.html",r)})(0,{pragma:"no-cache","cache-control":"no-cache"}).then((e=>e.text())).then((e=>e)),r={};i.match(/>(.*?)</g).forEach((e=>{const[t,n]=e.replace(/>|<|\s+/g,"").split(":");r[t]=n}));const s={connection:n,akamaiConnectionType:r.network_type,akamaiThroughput:r.throughput,akamaiNetwork:r.network};Fn(s),t.emit("page network data",{network:s})};Vn.isAdsFreeSupported=!0,Vn.ccpa={enabledIfDissent:!0},Vn.gdpr={enabledIfDissent:!0};const zn=Vn;(0,qe.fo)("bidders.33across",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[58]},run(e){let{broker:t,getConfig:n}=e;const i=n("plugins.bidders.33across.display",{adUnits:{}}),r=n("slotDescriptions.initial",{}),s=(0,q.DZ)((e=>{let[t,n]=e;return!!(n.sizes||r[t]&&r[t].size)}),(e=>{let[t,n]=e;return{code:t,siteId:n.siteId,sizes:n.sizes||r[t]&&r[t].size}}),Object.entries(i.adUnits)).map((e=>{let{code:t,siteId:n,sizes:i}=e;return{code:t,bids:[{bidder:"33across",params:{siteId:n,productId:"siab"}}],mediaTypes:{banner:{sizes:i}}}}));t.register("provide prebid adUnits",(()=>s))}}),(0,qe.fo)("bidders.adform.v2.display",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.bidders.adform.adxDomain","adx.adform.net"),s=Object.entries(n("plugins.bidders.adform.v2.display.adUnits",{})).map((e=>{let[t,{mid:i,sizes:s}]=e;return{code:t,bids:[{bidder:"adf",params:{adxDomain:r,mid:i}}],mediaTypes:{banner:{sizes:s||n(`slotDescriptions.initial.${t}.size`,[])}}}}));i.extend("adUnitTemplates")(s),t.register("provide prebid adUnits",(()=>s))},vendorIds:{gdpr:[50]}});function $n(e){const{getConfig:t,log:n}=e;if(!t("plugins.enabled",[]).includes("trackers.pubcommon")||!t("amazon.pubcommon.enabled",!1))return n("PubCommonId is disabled"),{addPubcommonId:e=>e};(function(e){let{broker:t,getConfig:n}=e;window.pubcid_options={type:"cookie",create:!1};const i=n("amazon.pubcommon.pubcidScript","//www.dailymail.co.uk/static/mol-adverts/demo/mol-21682/dist/pubcid.min.js");return t.invoke("import script",i)})(e).catch(n.error);const i=(0,D.gb)((()=>(0,b.ej)("_pubcid")),300,t("amazon.pubcommon.loadTimeout",3e3)).then((e=>({"pubcid.org":e}))).catch((()=>({})));return{async addPubcommonId(e){const t=await i;return e.map((e=>({...e,slotParams:{...e.slotParams||{},...t}})))}}}const Hn={},Wn={},Zn={sticky_banner_gallery_top:"sticky_banner_gallery_top",sticky_banner_gallery_bottom:"sticky_banner_gallery_bottom",jw_video_desktop:"jwplayer",jw_video_tablet:"jwplayer",jw_video_mobile:"jwplayer",ctp_video_desktop:"video",ctp_video_tablet:"video",ctp_video_mobile:"video",ap_video_desktop:"video",ap_video_tablet:"video",ap_video_mobile:"video"},Gn=e=>"sizes"in e,Xn=e=>{const{width:t,height:n}=(0,b.ap)();if(Gn(e)){const i=e.sizeMapping?(0,P.T3)(e.sizeMapping,e.sizes,[t,n]):e.sizes,{slotID:r,slotName:s}=e;return s?{slotID:r,slotName:s,sizes:i,slotParams:{}}:{slotID:r,sizes:i,slotParams:{}}}{const{mediaType:t,slotID:n,platform:i,offset:r,slotParams:s}=e;return{slotID:n,mediaType:t,platform:i,offset:r,slotParams:s}}};async function Kn(e,t){const{log:n,getConfig:i,broker:r,pApstagInitialised:s,addPubcommonId:o}=e,a=i("amazon.priceLookup","/abe/a9/price"),d=i("tia.timeout",.9*i("auction.maxTime",2e3)),l=i("tia.bidKeys",["amznbid","amznbid_sp"]);n("requesting bids for:",t.map((e=>{let{slotID:t}=e;return t})).join(", "));const c={};let u=t.map((e=>Xn(e))).filter((e=>e));function p(e){for(const t of l)if(e[t])return ct({url:`${a}/${e[t]}`});return 0}u.forEach((e=>{let{slotID:t}=e;(Hn[t]||(Hn[t]=[])).push(new Promise((async e=>{c[t]=e})))})),u=await o(u),s.then((()=>{__webpack_require__.g.apstag.fetchBids({slots:u,timeout:d},(async e=>{var t;n("bids response for:",e.map((e=>e.slotID)),e);const{noBids:i,realBids:s}=e.reduce(((e,t)=>{let{noBids:n,realBids:i}=e;return function(e,t){var n;if(null!=t&&null!==(n=t.targeting)&&void 0!==n&&n.amzndeals)return!0;for(const n of e){const e=t[n]&&!("1"===t[n]||"2"===t[n]),i=t.targeting&&t.targeting[n]&&!("1"===t.targeting[n]||"2"===t.targeting[n]);if(e||i)return!0}return!1}(l,t)?i.push(t):n.push(t),{realBids:i,noBids:n}}),{noBids:[],realBids:[]}),o=null!=s&&null!==(t=s[0])&&void 0!==t&&t.targeting?s.map((e=>{const{targeting:t,...n}=e;return{...n,...t}})):s;(null==o?void 0:o[0])&&n("bids targeting unwrapped:",o);const a=(await Promise.all(o.map(p))).map(Number.parseFloat);await function(e,t){const{broker:n,log:i}=e;t.map((async e=>{try{const{cpm:t,bid:r}=e;if(t>=0){const s=Gn(e)?{...(0,I.ei)(e,["slotID","slotParams"]),sizes:e.sizes,requestSizes:e.sizes.map((e=>{let[t,n]=e;return`${t}x${n}`}))}:{...(0,I.ei)(e,["slotID","slotParams","mediaType","offset","platform"]),sizes:[],requestSizes:[]},o=Zn[r.slotID]||r.slotID,a=!!r.amzndeals,d={bidder:"tia",cpm:Math.floor(100*t),amazonDeal:a,...s},l="slotName"in e&&r.slotID||o;i("broadcast bid received",o,d,l),n.emit("bid",l,d)}else i.warn(`Invalid lookup value ${t} for code ${r.amznbid}`)}catch(t){i.error("error broadcasting slot:",e,t)}}))}({broker:r,log:n},o.map(((e,t)=>({...u.find((t=>{let{slotID:n}=t;return n===e.slotID})),cpm:a[t],bid:e})))),o.forEach(((e,t)=>{const i={cpm:a[t],bid:e};return n(`bid for ${e.slotID}:`,i),(0,c[e.slotID])(i)})),i.forEach((e=>(n(`no bid for ${e.slotID}`),(0,c[e.slotID])({}))))}))}))}async function Jn(e,t){let{pos:n,id:i}=t;const{log:r}=e;let s=Hn[i]&&Hn[i].shift();if(!s){if(r(`No available bid for '${i}', requesting new one`),Kn(e,[Wn[i]||Wn[n]]),!Hn[i])return r("no bid promise for id",i),Promise.resolve({});s=Hn[i].shift()}return r(`Taking bid for '${i}':`,s),s||Promise.resolve({})}function Yn(e){let{pos:t,dfpPos:n,isTemplate:i,id:r,size:s}=e;const o=Wn[t]={...Wn[t],slotID:r,sizes:s};Gn(o)&&i&&(o.slotName=n)}async function Qn(e,t){const{broker:n,log:i}=e;try{var r,s;const e=(0,I.Ev)(await(0,D.yq)(1e3,n.invoke("get IrisTV tags",t),`Failed to get IrisTV tags for videoId ${t} in 1000ms`),{irisid:"iris_id",iriscat:"categories"});return e.iriscat=null===(r=(s=e.iriscat).join)||void 0===r?void 0:r.call(s,","),e}catch(e){return i.error(e),{}}}function ei(e){var t;if(!e||!e.bid)return{};const n=null==e||null===(t=e.bid)||void 0===t||null===(t=t.helpers)||void 0===t?void 0:t.qsParams();return n?n.replace(/^&/,"").split("&").reduce(((e,t)=>{const[n,i]=t.split("=");return e[n]=i,e}),{}):{}}(0,qe.fo)("bidders.amazon",{disableIfNoAdsServable:!0,run:function(e){!async function(e){const{broker:t,getConfig:n,log:i}=e,r=n("slots.enabled",{}),s=n("amazon.supportedVideoPositions",["video","jwplayer"]),o=n("plugins.enabled").includes("irisTv"),a=n("slotDescriptions.initial",{}),d=Object.entries(r).filter((e=>{let[t,n]=e;return"immediate"===n.type})).map((e=>{let[t,n]=e;return t})),l=(0,I.ei)(a,d.filter((e=>a[e]&&a[e].earlyBidding))),c=function(e){let{broker:t,getConfig:n,log:i,win:r}=e;const s=n("amazon.deal",!0);let o;return Qt()&&(i("In CCPA"),o=Xt("getUSPData")),t.invoke("load script","//c.amazon-adsystem.com/aax2/apstag.js","apstag").then((async e=>{if(!e)return void i.warn("Could not load apstag");const t={pubID:"3065",adServer:"googletag",videoAdServer:"DFP",deals:s,params:{}};r.PageCriteria&&(t.params.si_section=r.adAreaId||r.PageCriteria.channel,t.params.subchannel=r.PageCriteria.subchannel);try{o&&(t.params.us_privacy=(await(0,D.yq)(n("amazon.millisWaitForUspData",1500),o)).uspString,i(t))}catch(e){i.warn("Error while calling getUSPData, us_privacy will be omitted",e)}e.init(t)}))}(e),u={...e,pApstagInitialised:c};[{pos:"jwplayer",configItem:"amazonPreroll.jwplayer"},{pos:"video.ap",configItem:"amazonPreroll.auto-play"},{pos:"video.ctp",configItem:"amazonPreroll"}].forEach((e=>{let{pos:t,configItem:i}=e;const{slotId:r}=n(i);r&&(Wn[t]={slotID:r,mediaType:"video",platform:"dmplayer",offset:0,slotParams:{}})})),Object.values(l).forEach((e=>{i("creating slot for",e.id,e.pos),Yn(e)})),t.register("get tags",(async e=>{let{slot:t}=e;const n=t.dfpPos||t.pos,r=t.id;Wn[n]?i("no slot created",t):(i("creating slot for",t.id,t.pos,t),Yn(t)),Zn[r]=n;try{const e=await Jn(u,{id:r,pos:n}),t=ei(e);return i(`display params for ${n}`,t),(0,I.xb)(t)?{}:{type:"bid",pos:n,cpm:e.cpm&&Math.round(100*e.cpm)/100,bidderCode:"tia",tags:t}}catch(e){i.error(e)}})),t.on("prepare to refresh ads",(e=>{i("prepare to refresh ads",e);const t=e.map((e=>Wn[e]));i("preparing to refresh:",t),Kn(u,t)})),t.register("get video tags",(async t=>{let{slot:{pos:n},autoplay:r,platform:a="dmplayer",offset:d=0,videoId:l,auctionId:c}=t;if(!s.includes(n))return;const p="video"===n?r?"video.ap":"video.ctp":n,h={...Wn[p],platform:a,offset:d,slotParams:l&&o?await Qn(e,l):{}};i(`get video tags, auctionId: ${c}, offset: ${d}, slotId: ${h.slotID}`),Kn(u,[h]);const f=await Jn(u,{pos:p,id:h.slotID});i(`bid response auctionId: ${c}, offset: ${d}, slotId: ${h.slotID}`,f);const g=ei(f);return i(`video params, auctionId: ${c}, offset: ${d}, slotId: ${h.slotID}`,g),(0,I.xb)(g)?{}:{type:"bid",pos:p,offset:d,auctionId:c,cpm:f.cpm&&Math.round(100*f.cpm)/100,bidderCode:"tia",tags:{cust_params:g}}})),function(e,t){const{log:n}=e,i=t.map((e=>[e,Wn[e]])).filter((e=>{let[t,n]=e;return n})).filter((e=>{let[t,n]=e;return!Hn[n.slotID]}));i.length?(n("early bidding for",i.map((e=>{let[t,n]=e;return`pos: ${t}, id: ${n.slotID}`}))),i.forEach((e=>{let[t,n]=e;Zn[n.slotID]=t})),Kn(e,i.map((e=>{let[t,n]=e;return n})))):n("no early bidding")}(u,Object.keys(l))}({...e,...$n({...e,log:e.log.extend("pubcommon")})})},vendorIds:{gdpr:[793]},purposeIds:{gdpr:[1]}});const ti=(b.SP.debugBidder||"").split(",").map((e=>e.trim()))||[];function ni(e){return e.match(/(\d+x\d+,?\s*)+$/g)[0].trim().split(",").map((e=>e.split("x").map((e=>parseInt(e)))))}const ii=(e,t)=>{const{width:n}=(0,b.ap)(),{adUnits:i={},wideSkiesAdUnits:r}=e(t,{adUnits:{}});let s=i;return n>=1580&&r&&(s={...i,...r}),s};function ri(e,t,n){const i=[],r=(t,r)=>i.push({code:t,bids:[{bidder:e,params:n(r,t)}],mediaTypes:{banner:{sizes:ni(r)}}});return Object.keys(t).forEach((e=>{const n=t[e];Array.isArray(n)?n.forEach((t=>r(e,t))):r(e,n)})),i}function si(e,t,n){const i=[],r=(t,r)=>i.push({code:t,bids:[{bidder:e,params:n(r.split(" ").filter((e=>e)),t)}],mediaTypes:{banner:{sizes:ni(r)}}});return Object.keys(t).forEach((e=>{const n=t[e];Array.isArray(n)?n.forEach((t=>r(e,t.trim()))):r(e,n)})),i}function oi(e){if(function(e){const t=t=>{throw new Error(`providePrebidDisplayConfig error for '${e.bidder}': ${t}`)};("object"!=typeof e||Array.isArray(e))&&t("`config` must be an object."),["broker","getConfig","configKeys","bidder"].forEach((n=>{e[n]||t(`'config' must contain mandatory key '${n}'.`)}));const n={adapterName:n=>{"string"!=typeof n&&t("`adapterName` must be a string."),e.aliasedName||t("with `adapterName`, `aliasedName` is mandatory.")},aliasedName:n=>{"string"!=typeof n&&t("`aliasedName` must be a string."),e.adapterName||t("with `aliasedName`, `adapterName` is mandatory.")},broker:e=>{e instanceof v.Jj||t("`broker` must be an instance of the class `Broker`.")},getConfig:e=>{"function"!=typeof e&&t("`getConfig` error: must be a function.")},configKeys:e=>{("string"!=typeof e&&!Array.isArray(e)||Array.isArray(e)&&e.find((e=>"string"!=typeof e)))&&t("`configKeys` must be a string or an array of strings.")},configKey:e=>{"string"!=typeof e&&t("`configKey` must be a string.")},bidder:e=>{"string"!=typeof e&&t("`bidder` must be a string.")},chance:e=>{isNaN(e)&&t("`chance` must be a number.")},getBidsParams:e=>{"function"!=typeof e&&t("`getBidParams` must be a function.")},bidderSettings:e=>{const n="`bidderSettings` must be an Object or an array of Objects { key : <String>, val: <Function> }.";"object"==typeof e||Array.isArray(e)||t(n);const i=e=>{const i=["key","val"];Object.entries(e).forEach((e=>{let[r,s]=e;i.find((e=>e===r))||t(n),"key"===r&&"string"!=typeof s&&t(n),"val"===r&&"function"!=typeof s&&t(n)}))};"object"!=typeof e||Array.isArray(e)||i(e),Array.isArray(e)&&e.forEach((e=>i(e)))}};Object.entries(e).forEach((e=>{let[t,i]=e;n[t]&&n[t](i)}))}(e),e.chance&&e.chance<=Math.random())return;const{broker:t,getConfig:n,configKeys:i,bidder:r,paramsPerSize:s,getBidsParams:o}=e,a=s?ai:si;let d=null;const l={};if(Array.isArray(i)){if(d=[],d=i.map((e=>(l[e]=ii(n,e),d.concat(a(r,l[e],o))))),!d.length)return!1}else{if(l[i]=ii(n,i),(0,I.xb)(l[i]))return!1;d=a(r,l[i],o)}return function(e,t,n,i){const{bidder:r}=t;ti.find((e=>"*"===e||e===r))&&(console.log(`--------------\x3e ${r} configs <--------------`),[...t.configKeys||t.configKey].forEach((t=>{console.log(`-> ${t}:`,e(t))})),console.log(`--------------\x3e ${r} adUnits <--------------`),Object.entries(n).forEach((e=>{let[t,n]=e;console.log(`-> ${t}:`,n)})),console.log(`--------------\x3e ${r} prebid config <--------------`),console.log("->",i))}(n,e,l,d),t.register("provide prebid adUnits",(()=>d)),function(e){let{adapterName:t,aliasedName:n,broker:i}=e;t&&n&&i.register("provide bidder alias",(()=>({adapterName:t,aliasedName:n})))}(e),function(e){let{broker:t,bidderSettings:n,bidder:i,adapterName:r,aliasedName:s}=e;if(n){const e=r&&s||i;t.register("prebid reduce bidderSettings",(t=>(t[e]=t[e]||{},t[e].adserverTargeting=t[e].adserverTargeting||[],Array.isArray(n)?t[e].adserverTargeting.concat(n):t[e].adserverTargeting.push(n),t)))}}(e),function(e){let{bidder:t,asyncUpdate:n,broker:i}=e;n&&i.emit("prebid config async update",{[t]:n})}(e),!0}function ai(e,t,n){const i=[],r=(t,r)=>{const s=ni(r);i.push({code:t,bids:s.map((i=>({bidder:e,params:n(r.split(" ").filter((e=>e)),i,t)}))),mediaTypes:{banner:{sizes:s}}})};return Object.keys(t).forEach((e=>{const n=t[e];Array.isArray(n)?n.forEach((t=>r(e,t))):r(e,n)})),i}(0,qe.fo)("bidders.appnexusOutstream",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[32]},run(e){let{broker:t,getConfig:n,queryParams:i}=e;const r=i["mol.ads.appNexus.debug"],s=i.testmode,o={area:[__webpack_require__.g.adAreaId],...s?{testmode:s.split(",")}:void 0},{adUnits:a}=n("plugins.bidders.appnexus.outstream",{adUnits:[]});(0,I.xb)(a)||t.register("provide prebid adUnits",(()=>function(e,t,n,i){const s=[],a=(t,n)=>{return s.push({code:t,bids:[{bidder:"appnexus",params:(i=n.split(" ").filter((e=>e)),a=t,{placementId:i[0],keywords:{...r?{pos:a}:void 0,...o}})}],mediaTypes:{video:{...e("plugins.slots.outstream.default.mediaTypes.video",{}),playerSize:ni(n)[0]}}});var i,a};return Object.keys(n).forEach((e=>{const t=n[e];Array.isArray(t)?t.forEach((t=>a(e,t.trim()))):a(e,t)})),s}(n,0,a)))}});const di={admantx:e=>({"ias-bsp":e.map(String)}),airgrid:e=>({perid:e.slice(0,100).map(String)})};function li(e){return e.reduce(((e,t)=>{let[n,i]=t;const r=di[n];return r?{...e,...r(i)}:e}),{})}async function ci(e){var t;const n=await async function(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.appnexus.dependenciesTimeout",2e3),s=n("plugins.bidders.appnexus.dmps",["airgrid","admantx"]);i("providing prebid adUnits");const o=li((s.length?await Promise.all(s.map((async e=>{const n=(await t.invokeAllWithin("dmp",r,e))[0];return n&&[e,n]}))):[]).filter((e=>!!e)));return i("dmpData",o),o}(e);return e.win.adAreaId&&(n.area=e.win.adAreaId),null!==(t=e.pageCriteria)&&void 0!==t&&t.articleId&&(n.article=e.pageCriteria.articleId),n}(0,qe.fo)("bidders.appnexus",{disableIfNoAdsServable:!0,run:function(e){let{broker:t,getConfig:n,log:i,pageCriteria:r,win:s}=e,{adUnits:o,wideSkiesAdUnits:a}=n("plugins.bidders.appnexus.display",{adUnits:[]});if(!(0,I.xb)(o)){const e=ci({broker:t,getConfig:n,log:i,pageCriteria:r,win:s});t.register("provide prebid adUnits",(async()=>{const t=await e;pi&&a&&(o={...o,...a});const n=Object.entries(o).map((e=>{let[n,i]=e;return(Array.isArray(i)?i:[i]).map((e=>fi(t,n,e)))})).flat();return i("adUnits",n),n}))}},vendorIds:{gdpr:[32]},purposeIds:{gdpr:[1]}});const{width:ui}=(0,b.ap)(),pi=ui>1580,hi=e=>e.replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>e.split("x").map((e=>parseInt(e))))),fi=(e,t,n)=>({code:t,bids:[{bidder:"appnexus",params:{keywords:e,placementId:n.split(" ")[0].trim()}}],mediaTypes:{banner:{sizes:hi(n)}}});(0,qe.fo)("bidders.appnexusSkin",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:async function(e){let{broker:t,getConfig:n,log:i,pageCriteria:r,win:s}=e;const o=n("plugins.appnexus.minWidth",1224),a=n("plugins.appnexus.skin",gi);if(i("config:",{minWidth:o,adUnits:a}),__webpack_require__.g.innerWidth<o)return void i("bailing, viewport width too small:",__webpack_require__.g.innerWidth);const d=a.map((e=>{let{bids:t}=e;return t.map((e=>{let{params:{placementId:t}}=e;return t}))})).flat();i("known skins:",d);const l=new Set(d),c=ci({broker:t,getConfig:n,log:i,pageCriteria:r,win:s});t.register("provide prebid adUnits",(async()=>{const e=await c;return a.map((t=>({...t,bids:t.bids.map((t=>(t.params.keywords=e,t)))})))}));const u={};t.on("prebid loaded",(e=>{e.onEvent("bidRequested",(e=>{let{bidderCode:t,bids:n}=e;"appnexus"===t&&n.forEach((e=>{let{bidId:t,params:{placementId:n}}=e;u[t]=n}))}))})),t.register("prebid reduce bidderSettings",(e=>(e.appnexus||(e.appnexus={}),e.appnexus.adserverTargeting||(e.appnexus.adserverTargeting=[]),e.appnexus.adserverTargeting.push({key:"hb_skin",val:e=>{const t=u[e.requestId];return l.has(t)}}),e)))},vendorIds:{gdpr:[32]}});const gi=[{code:"billboard",mediaTypes:{banner:{sizes:[[970,250],[728,90]]}},bids:[{bidder:"appnexus",params:{placementId:19451012}}]}];(0,qe.fo)("bidders.groupm.v2.display",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=Math.random(),s=n("plugins.bidders.groupm.v3.chance",.1);if(i(`groupm chance: ${r}, 'request? ${r<s}`),s<=r)return void i("chance condition not met, bailing");const o=Object.entries(n("plugins.bidders.groupm.v3.adUnits",{})).map((e=>{let[t,{placementId:i,sizes:r}]=e;return{code:t,bids:[{bidder:"groupm",params:{placementId:i.toString()}}],mediaTypes:{banner:{sizes:r||n(`slotDescriptions.initial.${t}.size`,[])}}}}));i.extend("adUnitTemplates")(o),t.register("provide bidder alias",(()=>({adapterName:"appnexus",aliasedName:"groupm"}))),t.register("provide prebid adUnits",(()=>o)),t.register("prebid reduce bidderSettings",(e=>(e.groupm||(e.groupm={}),e.groupm.adserverTargeting||(e.groupm.adserverTargeting=[]),e.groupm.adserverTargeting.push({key:"hb_deal_groupm"}),e)))},vendorIds:{gdpr:[98]}}),(0,qe.fo)("bidders.collectiveImprove",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n}=e;const{adUnits:i}=n("plugins.bidders.collectiveImprove.display",{adUnits:{}});if((0,I.xb)(i))return;const r=ri("collectiveImprove",i,(e=>({placementId:e.split(" ")[0]})));t.register("provide prebid adUnits",(()=>r)),t.register("provide bidder alias",(()=>({adapterName:"improvedigital",aliasedName:"collectiveImprove"}))),t.register("prebid reduce bidderSettings",(e=>(e.collectiveImprove=e.collectiveImprove||{},e.collectiveImprove.adserverTargeting=e.collectiveImprove.adserverTargeting||[],e.collectiveImprove.adserverTargeting.push({key:"hb_skin",val:e=>!0}),e)))},vendorIds:{gdpr:[253]}}),(0,qe.fo)("bidders.improveDisplay",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[253]},run(e){let{broker:t,getConfig:n,log:i}=e;const r=n("bidders.improveDisplay.publisherId",1906),s=n("plugins.bidders.improveDisplay",[]).map((e=>{var t;return{code:e.code,mediaTypes:{banner:{sizes:e.sizes||(null===(t=(0,_e.get)(e.code))||void 0===t?void 0:t.size)}},bids:[{bidder:"improvedigital",params:{placementId:e.placementId,publisherId:r}}]}}));i.extend("adUnits")(s),t.register("provide prebid adUnits",(()=>s))}}),(0,qe.fo)("bidders.improveSkins",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[253]},run(e){let{broker:t,getConfig:n,log:i}=e;const r=n("bidders.improveSkins.publisherId",1906),s=n("plugins.bidders.improveSkins",[]).map((e=>{var t;return{code:e.code,mediaTypes:{banner:{sizes:e.sizes||(null===(t=(0,_e.get)(e.code))||void 0===t?void 0:t.size)}},bids:[{bidder:"improvedigital",params:{placementId:e.placementId,publisherId:r}}]}}));i.extend("adUnits")(s),t.register("provide prebid adUnits",(()=>s)),t.register("prebid reduce bidderSettings",(e=>{var t;return{...e,improvedigital:{...e.improvedigital||{},adserverTargeting:[...(null===(t=e.improvedigital)||void 0===t?void 0:t.adserverTargeting)||[],{key:"hb_skin",val:()=>!0}]}}}))}}),(0,qe.fo)("bidders.ix.v2.display",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=Object.entries(n("plugins.bidders.ix.v2.display.adUnits",{})).map((e=>{let[t,{siteId:i,sizes:r}]=e;return{code:t,bids:[{bidder:"ix",params:{siteId:i}}],mediaTypes:{banner:{sizes:r||n(`slotDescriptions.initial.${t}.size`,[])}}}}));i.extend("adUnitTemplates")(r),t.register("provide prebid adUnits",(()=>r))},vendorIds:{gdpr:[10]}}),(0,qe.fo)("bidders.justPremium",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n}=e;const{adUnits:i}=n("plugins.bidders.justpremium.display",{adUnits:{}});if((0,I.xb)(i))return;const r=ri("justpremium",i,(e=>({zone:e.split(" ")[0]})));t.register("provide prebid adUnits",(()=>r)),t.register("prebid reduce bidderSettings",(e=>(e.justpremium=e.justpremium||{},e.justpremium.adserverTargeting=e.justpremium.adserverTargeting||[],e.justpremium.adserverTargeting.push({key:"hb_skin",val:e=>!0}),e)))},vendorIds:{gdpr:[62]}}),(0,qe.fo)("bidders.kargo",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n}=e;const{adUnits:i}=n("plugins.bidders.kargo.display",{adUnits:[]}),r=e=>({code:e,bids:[{bidder:"kargo",params:{placementId:i[e].split(" ")[0].trim()}}],mediaTypes:{banner:{sizes:i[e].replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>e.split("x").map((e=>parseInt(e)))))}}});if(t.invoke("load script","https://storage.cloud.kargo.com/ad/network/klick/klick-dailymail.js",null,{},(()=>!0)),!(0,I.xb)(i)){const e=Object.keys(i).map(r);t.register("provide prebid adUnits",(()=>e)),t.register("prebid reduce bidderSettings",(e=>(e.kargo||(e.kargo={}),e.kargo.storageAllowed=!0,e)))}},vendorIds:{gdpr:[972]}}),(0,qe.fo)("bidders.mediagrid.v2.display",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=Object.entries(n("plugins.bidders.mediagrid.v2.display.adUnits",{})).map((e=>{let[t,{sizes:i,uid:r}]=e;return{code:t,bids:[{bidder:"grid",params:{uid:r}}],mediaTypes:{banner:{sizes:i||n(`slotDescriptions.initial.${t}.size`,[])}}}}));i.extend("adUnitTemplates")(r),t.register("provide prebid adUnits",(()=>r))},vendorIds:{gdpr:[686]}});const mi=e=>Array.isArray(e)&&2===e.length;class yi{constructor(e){this.adsDescriptions=e;const{width:t,height:n}=(0,b.ap)();this.browserWidth=t,this.browserHeight=n}getSizes(e){const t=this.adsDescriptions[e];if(t)return t.sizeMapping?(0,P.T3)(t.sizeMapping,t.size,[this.browserWidth,this.browserHeight]):t.size.filter(mi)}}const vi=MobileUtils.isMobile()?{sticky_banner:1420432285}:{billboard:1420432282,sky_right_top:1420432283,sky_left_top:1420432284};(0,qe.fo)("bidders.ozone",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[524]},run(e){let{broker:t,getConfig:n,pageCriteria:i={},log:r}=e;const s=new yi(n("slotDescriptions.initial",{})),o=n("plugins.bidders.ozone.publisherId","OZONEDMGT002"),a=n("plugins.bidders.ozone.siteId","4204204250"),d=Object.entries(n("plugins.bidders.ozone.display.adUnits",vi)).map((e=>{let[t,i]=e;return{code:t,mediaTypes:{banner:{sizes:n(`slotDescription.${t}.size`,s.getSizes(t))}},bids:[{bidder:"ozone",params:{placementId:i,publisherId:o,siteId:a}}]}}));t.register("provide prebid adUnits",(()=>(r.info("adUnits",d),d))),t.register("provide prebid bidder config",(()=>[["ozone"],{ortb2:{site:{page:"article"===i.pageType?"art":"hp"}}}]))}}),(0,qe.fo)("bidders.pubmatic",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[76]},run(e){let{broker:t,getConfig:n,log:i,win:r}=e;const{width:s}=(0,b.ap)(),o=s>1580;let{adUnits:a,wideSkiesAdUnits:d,publisherId:l}=n("plugins.bidders.pubmatic.display.v2",{adUnits:{},wideSkiesAdUnits:[]});if(o&&d&&(a={...a,...d}),i.extend("ad units")(a),(0,I.xb)(a))return;const c=n("plugins.bidders.pubmatic.display.v2.dependenciesTimeout",2e3),u=t.invokeAll({message:["dmp","admantx"],timeout:c});t.register("provide prebid adUnits",(async()=>{var e;const t=(await u)[0];i("ias-bsp",t);const n=[["area",r.adAreaId],["ias-bsp",t],["article",null===(e=r.pagemeta)||void 0===e?void 0:e.articleId]].reduce(((e,t)=>{let[n,i]=t;const r=Array.isArray(i)&&i.length||i?`${n}=${i}`:"";return r?e.length?`${e}|${r}`:`${r}`:e}),""),s=ri("pubmatic",a,(e=>({publisherId:`${l}`,adSlot:e.split(" ")[0],dctr:n})));return i("adUnits",s),s})),t.register("prebid reduce bidderSettings",(e=>{const t=n("plugins.bidders.pubmatic.display.netMultiplier",.93);return e.pubmatic||(e.pubmatic={}),e.pubmatic.bidCpmAdjustment=(e,n)=>e*t,e}))}}),(0,qe.fo)("bidders.rhythmOne",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:i}=e;i.warn("DEPRECATED: use unruly plugin");const r=n("plugins.bidders.rhythmOne.adUnits",{}),s=new yi(n("slotDescriptions.initial",{})),o=Object.entries(r).map((e=>{let[t,{placementId:n,sizes:r}]=e;const o=r||s.getSizes(t);if(o)return{code:t,sizes:o,mediaTypes:{banner:{sizes:o}},bids:[{bidder:"rhythmone",params:{placementId:n}}]};i(`no adDescription for pos: ${t}`)})).filter((e=>e));t.register("provide prebid adUnits",(()=>o))},vendorIds:{gdpr:[36]}}),(0,qe.fo)("bidders.rubiMM2",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{getConfig:t,broker:n,log:i}=e;const{width:r}=(0,b.ap)(),s=r>1580;let{accountId:o,siteId:a,adUnits:d,wideSkiesAdUnits:l}=t("plugins.bidders.rubiMM2.display",{adUnits:{},wideSkiesAdUnits:[]});if(i("adUnits",d),(0,I.xb)(d))return;s&&l&&(d={...d,...l});const c=ri("rubi_mm2",d,(e=>{const t={area:[__webpack_require__.g.adAreaId]};return{zoneId:e.split(" ")[0],inventory:t,siteId:a.toString(),accountId:o.toString()}}));i("transformed",c),n.register("provide prebid adUnits",(()=>c)),n.register("provide bidder alias",(()=>({adapterName:"rubicon",aliasedName:"rubi_mm2"}))),n.emit("prebid config async update",{rubi_mm2:{singleRequest:!0}})},vendorIds:{gdpr:[52]}}),(0,qe.fo)("bidders.sharethrough.v2.display",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=Object.entries(n("plugins.bidders.sharethrough.v2.display.adUnits",{}));i("adUnitConfig",r);const s=r.filter((e=>{let[t]=e;return n(`slotDescriptions.initial.${t}`)})).map((e=>{let[t,{pkey:i,sizes:r}]=e;return{code:t,bids:[{bidder:"sharethrough",params:{pkey:i}}],mediaTypes:{banner:{sizes:r||n(`slotDescriptions.initial.${t}.size`,[])}}}}));i.extend("adUnitTemplates")(s),t.register("provide prebid adUnits",(()=>s));const o=s.reduce(((e,t)=>{let{code:n,mediaTypes:{banner:{sizes:i}}}=t;return{...e,[n]:bi(i).join("x")}}),{});i("largestSizeForPos",o),t.register("prebid reduce bidderSettings",(e=>(e.sharethrough||(e.sharethrough={}),e.sharethrough.adserverTargeting||(e.sharethrough.adserverTargeting=[]),e.sharethrough.adserverTargeting.push({key:"hb_size",val:e=>(null==o?void 0:o[e.adUnitCode])||e.size}),e)))},vendorIds:{gdpr:[80]}});const bi=e=>e.sort(((e,t)=>{let[n,i]=e,[r,s]=t;return r*s-n*i}))[0];(0,qe.fo)("bidders.smartAdServer",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.bidders.smartAdServer.adUnits",{}),s=new yi(n("slotDescriptions.initial",{})),o=n("plugins.bidders.smartAdServer.siteId",395440),a=n("plugins.bidders.smartAdServer.pageId",1352205),d=Object.entries(r).map((e=>{let[t,{formatId:n,sizes:r}]=e;const d=r||s.getSizes(t);if(d)return{code:t,sizes:d,mediaTypes:{banner:{sizes:d}},bids:[{bidder:"smartadserver",params:{formatId:n,pageId:a,siteId:o}}]};i(`no adDescription for pos: ${t}`)})).filter((e=>e));t.register("provide prebid adUnits",(()=>d))},vendorIds:{gdpr:[45]}}),(0,qe.fo)("teads-cookieless",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[132]},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.bidders.teads.tagId","PUB_7442");i("tagId:",r),__webpack_require__.g.teads_analytics=__webpack_require__.g.teads_analytics||{},__webpack_require__.g.teads_analytics.analytics_tag_id=r,__webpack_require__.g.teads_analytics.share=__webpack_require__.g.teads_analytics.share||function(){const e=__webpack_require__.g.teads_analytics.shared_data=__webpack_require__.g.teads_analytics.shared_data||[];i("share current:",e),i("share adding:",arguments),e.push(arguments)},t.emit("import script","//a.teads.tv/analytics/tag.js",{async:!0})}});const{width:_i}=(0,b.ap)(),wi=_i>1580;(0,qe.fo)("bidders.rubicon",{vendorIds:{gdpr:[52]},purposeIds:{gdpr:[1]},disableIfNoAdsServable:!0,run:async function(e){let{broker:t,getConfig:n,log:i,win:r}=e;const{accountId:s,siteId:o,adUnits:a,wideSkiesAdUnits:d,atf:l}=n("plugins.bidders.rubicon.display.v2",{adUnits:{},wideSkiesAdUnits:{},atf:[]}),c=new Set(l);if((0,I.xb)(a))return;const u=wi&&d?{...a,...d}:a,p=n("plugins.bidders.rubicon.display.v2.dependenciesTimeout",2e3),h=t.invokeAll({message:["dmp","admantx"],timeout:p});t.register("provide prebid adUnits",(async()=>{const e=(await h)[0];i("ias-bsp",e);const t=(r.adAreaId?[["area",JSON.stringify([r.adAreaId])],["ias-bsp",e]]:[["ias-bsp",e]]).reduce(((e,t)=>{let[n,i]=t;return i?{...e,[n]:i}:e}),{}),n=ri("rubicon",u,((e,n)=>{const i={zoneId:e.split(" ")[0],inventory:t,siteId:o.toString(),accountId:s.toString()};return c.has(n)&&(i.position="atf"),i}));return i("adUnits",n),n})),t.emit("prebid config async update",{rubicon:{singleRequest:!0}})}});const{width:Ti}=(0,b.ap)(),Ii=Ti>1580;function Si(e){let{broker:t,getConfig:n}=e,{adUnits:i,wideSkiesAdUnits:r}=n("plugins.bidders.adyoulike.display",{adUnits:[]});const s=e=>({code:e,bids:[{bidder:"adyoulike",params:{placement:i[e].split(" ")[0].trim()}}],mediaTypes:{banner:{sizes:i[e].replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>e.split("x").map((e=>parseInt(e)))))}}});if(Ii&&r&&(i={...i,...r}),!(0,I.xb)(i)){const e=Object.keys(i).map(s);t.register("provide prebid adUnits",(()=>e))}}function ki(e){let{broker:t,getConfig:n}=e;const i=n("plugins.bidders.verizon.display",{}),r=i.adUnits&&Object.entries(i.adUnits).map((e=>{let[t,n]=e;return((e,t)=>({code:e,bids:[{bidder:"brightroll",params:{publisher:"dailymail"}}],mediaTypes:{banner:{sizes:t}}}))(t,n)}));r&&r.length>0&&t.register("provide prebid adUnits",(()=>r))}Si.vendorIds={gdpr:[259]},Si.purposeIds={gdpr:[1]},Si.disableIfNoAdsServable=!0,ki.vendorIds={gdpr:[25]},ki.purposeIds={gdpr:[1]},ki.disableIfNoAdsServable=!0;const Ci=(e,t)=>({code:e,bids:[{bidder:"collective564",params:{placementId:t.split(" ")[0].trim(),usePaymentRule:!0}}],mediaTypes:{banner:{sizes:t.replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>e.split("x").map((e=>parseInt(e)))))}}});function Ei(e){let{broker:t,getConfig:n}=e;const i=n("plugins.bidders.collective564.display",{adUnits:{}}).adUnits,r=[];(0,I.xb)(i)||(Object.keys(i).map((e=>{r.push(Ci(e,i[e]))})),t.register("provide prebid adUnits",(()=>r)),t.register("provide bidder alias",(()=>({adapterName:"appnexus",aliasedName:"collective564"}))),t.register("prebid reduce bidderSettings",(e=>(e.collective564=e.collective564||{},e.collective564.adserverTargeting=e.collective564.adserverTargeting||[],e.collective564.adserverTargeting.push({key:"hb_skin",val:e=>!0}),e))))}function Ai(e){let{broker:t,getConfig:n}=e;if(n("plugins.bidders.groupm.skin.chance",.1)<=Math.random())return;const i=n("plugins.bidders.groupm.skin.adUnits",[]);i.length&&t.register("provide prebid adUnits",(()=>i))}function Pi(e){let{broker:t,getConfig:n}=e;const{adUnits:i,delDomain:r}=n("plugins.bidders.openx.display.v2",{adUnits:[]}),s=e=>({code:e,bids:[{bidder:"openx",params:{unit:i[e].split(" ")[0].trim(),delDomain:r}}],mediaTypes:{banner:{sizes:i[e].replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>e.split("x").map((e=>parseInt(e)))))}}});if(r&&!(0,I.xb)(i)){const e=Object.keys(i).map(s);t.register("provide prebid adUnits",(()=>e))}}function xi(e){let{broker:t,getConfig:n}=e;const{adUnits:i}=n("plugins.bidders.pxyz.display",{adUnits:{}}),r=(e,t)=>({code:e,bids:[{bidder:"pxyz",params:{placementId:t.split(" ")[0].trim()}}],mediaTypes:{banner:{sizes:t.replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>e.split("x").map((e=>parseInt(e)))))}}});if(!(0,I.xb)(i)){const e=[];Object.entries(i).map((t=>{let[n,i]=t;"string"==typeof i?e.push(r(n,i)):i.forEach((t=>{e.push(r(n,t))}))})),t.register("provide prebid adUnits",(()=>e))}}Ei.vendorIds={gdpr:[179]},Ei.purposeIds={gdpr:[1]},Ei.disableIfNoAdsServable=!0,Ai.vendorIds={gdpr:[98]},Ai.purposeIds={gdpr:[1]},Ai.disableIfNoAdsServable=!0,Pi.vendorIds={gdpr:[69]},Pi.purposeIds={gdpr:[1]},Pi.disableIfNoAdsServable=!0,xi.vendorIds={gdpr:[490]},xi.purposeIds={gdpr:[1]},xi.disableIfNoAdsServable=!0;const Di=e=>{for(const t of e)for(const e of t.bids)"rubicon"===e.bidder&&((0,I.ns)(["params","inventory"],e).area=[__webpack_require__.g.adAreaId])},Oi=e=>e.adUnits.reduce(((e,t)=>(t.bids&&t.bids.forEach((t=>{t.params&&t.params.zoneId&&e.push(t.params.zoneId)})),e)),[]);function Ri(e){let{broker:t,getConfig:n}=e,i=new Set;const r=n("plugins.rubicon.skin",{});r.adUnits&&r.adUnits.length&&(Di(r.adUnits),i=new Set(Oi(r)),t.register("provide prebid adUnits",(()=>r.adUnits)));const s={};t.on("prebid loaded",(e=>{e.onEvent("bidRequested",(e=>{let{bidderCode:t,bids:n}=e;"rubicon"===t&&n.forEach((e=>{let{bidId:t,params:{zoneId:n}}=e;s[t]=n}))}))})),t.register("prebid reduce bidderSettings",(e=>(e.rubicon||(e.rubicon={}),e.rubicon.adserverTargeting||(e.rubicon.adserverTargeting=[]),e.rubicon.adserverTargeting.push({key:"hb_skin",val:e=>{const t=s[e.requestId];return i.has(t)}}),e)))}function Ni(e){let{getConfig:t,broker:n}=e;const{width:i}=(0,b.ap)(),r=i>1580;let{accountId:s,siteId:o,adUnits:a,wideSkiesAdUnits:d}=t("plugins.bidders.rubiMM.display",{adUnits:{},wideSkiesAdUnits:[]});if((0,I.xb)(a))return;r&&d&&(a={...a,...d});const l=ri("rubi_mm",a,(e=>{const t={area:[__webpack_require__.g.adAreaId]};return{zoneId:e.split(" ")[0],inventory:t,siteId:o.toString(),accountId:s.toString()}}));n.register("provide prebid adUnits",(()=>l)),n.register("provide bidder alias",(()=>({adapterName:"rubicon",aliasedName:"rubi_mm"}))),n.emit("prebid config async update",{rubi_mm:{singleRequest:!0}})}function Mi(e){let{getConfig:t,broker:n}=e;const{accountId:i,siteId:r}=t("plugins.bidders.rubicon.display.v2",{});oi({broker:n,getConfig:t,bidder:"rubi_ttd",adapterName:"rubicon",aliasedName:"rubi_ttd",getBidsParams:e=>{let[t]=e;return{zoneId:t,inventory:{area:[__webpack_require__.g.adAreaId]},siteId:`${r}`,accountId:`${i}`}},asyncUpdate:{singleRequest:!0}})}function Li(e){let{broker:t,getConfig:n}=e;const{adUnits:i}=n("plugins.bidders.teads.display",{adUnits:{}});t.register("provide prebid adUnits",(()=>ri("teads",i,(e=>{const t=e.split(/[ ]+/);return{placementId:t[0],pageId:t[1]}}))))}function Ui(e){let{broker:t,getConfig:n}=e;oi({broker:t,getConfig:n,configKeys:"plugins.bidders.triplelift.display",bidder:"triplelift",getBidsParams:e=>{let[t]=e;return{inventoryCode:t}}})}Ri.vendorIds={gdpr:[52]},Ri.purposeIds={gdpr:[1]},Ri.disableIfNoAdsServable=!0,Ni.vendorIds={gdpr:[79]},Ni.purposeIds={gdpr:[1]},Ni.disableIfNoAdsServable=!0,Mi.vendorIds={gdpr:[21]},Mi.purposeIds={gdpr:[1]},Mi.disableIfNoAdsServable=!0,Li.vendorIds={gdpr:[132]},Li.purposeIds={gdpr:[1]},Li.disableIfNoAdsServable=!0,Ui.vendorIds={gdpr:[28]},Ui.purposeIds={gdpr:[1]},Ui.disableIfNoAdsServable=!0,(0,qe.fo)("bidders.adform.video",{disableIfNoAdsServable:!0,run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.bidders.adform.adxDomain","adx.adform.net");t.register("provide video adUnits",(e=>{const t=n(`plugins.bidders.adform.video.${e}`);if(i.info("code",e),i.info("mid",t),!t)return i.warn(`no mid found for pos ${e}`),{};const s={bids:[{bidder:"adf",params:{adxDomain:r,mid:t}}]};return i.info("providing ad unit",s),s}))},purposeIds:{gdpr:[1]},vendorIds:{gdpr:[50]}}),(0,qe.fo)("bidders.appnexusVideo",{disableIfNoAdsServable:!0,run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.appnexus.dependenciesTimeout",2e3),s=n("plugins.bidders.appnexus.dmps",["airgrid","admantx"]),o=n("plugins.bidders.appnexus.video",{adUnits:{}});t.register("provide video adUnits",(async(e,n)=>{var a;if(null===(a=o.adUnits)||void 0===a||!a[e])return;const d=li((s.length?await Promise.all(s.map((async e=>{const n=(await t.invokeAll({message:["dmp",e],timeout:r}))[0];return n&&[e,n]}))):[]).filter((e=>e)));i("dmpData",d);const l={area:[__webpack_require__.g.adAreaId],...d},c=ji(o,l,e,n);return i("adUnits",c),c}))},vendorIds:{gdpr:[32]},purposeIds:{gdpr:[1]}});const ji=(e,t,n,i)=>{let r="";if(e.adUnits[n]&&"object"==typeof e.adUnits[n]&&e.adUnits[n][i?"autoplay":"ctp"])r=e.adUnits[n][i?"autoplay":"ctp"];else{if(!e.adUnits[n]||"string"!=typeof e.adUnits[n])return{};r=e.adUnits[n]}const s=r.trim().replace(/ +/," ").split(" ");return{bids:[{bidder:"appnexus",params:{accountId:parseInt(s[0]),placementId:parseInt(s[1]),keywords:t,video:{skipable:!1,playback_methods:i?["auto_play_sound_off"]:["click_to_play"]}}}]}};(0,qe.fo)("bidders.criteo.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n}=e;const i=n("plugins.bidders.criteo.video.adUnits",{}),r={skip:1},s=n("plugins.bidders.criteo.video.mediaTypes",{});t.register("provide video adUnits",(async e=>{const t=i[e],o=n(Bi[e]),a=s[e]||{};if(t)return{code:o.code,mediaTypes:{video:{...o.mediaTypes.video,...r,...a}},bids:[{bidder:"criteo",params:{zoneId:t}}]}}))},vendorIds:{gdpr:[91]}});const Bi={jwplayer:"plugins.slots.jwplayer.v3",video:"plugins.slots.video.v2",verticalvideo:"plugins.slots.verticalvideo.v1"};(0,qe.fo)("bidders.improveVideo",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[253]},run(e){let{broker:t,getConfig:n,log:i}=e;const r=n("bidders.improveVideo.publisherId",1906);t.register("provide video adUnits",((e,t)=>{var s;const o="video"===e?t?"video.autoplay":"video.ctp":e,a=n(`plugins.bidders.improveVideo.${o}`),[d,l]=(null===(s=n(`plugins.slots.${e}.v2`))||void 0===s||null===(s=s.mediaTypes)||void 0===s||null===(s=s.video)||void 0===s?void 0:s.playerSize)||[];return i({configCode:o,placementId:a,w:d,h:l}),a?{bids:[{bidder:"improvedigital",params:{placementId:a,publisherId:r,size:{w:d,h:l}}}]}:{}}))}});const qi={jwplayer:"plugins.slots.jwplayer.v3",video:"plugins.slots.video.v2",verticalvideo:"plugins.slots.verticalvideo.v1"};(0,qe.fo)("bidders.ixVideo",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[10]},run(e){let{broker:t,getConfig:n,queryParams:i}=e;const r=n("plugins.bidders.ix.video.adUnits",[]),s=n("plugins.bidders.ix.video.default",{}),{mimes:o=["video/mp4","application/javascript"],minduration:a=0}=s;t.register("provide video adUnits",(async(e,t)=>{i.ix_sandbox&&pbjs.setConfig({ix:{sandboxMode:!0}});try{const i=r[e]&&"object"==typeof r[e]?r[e][t?"autoplay":"ctp"]:r[e];if(!i)return;const s=n(`${qi[e]}.mediaTypes.video`,{}),{maxduration:d=61,protocols:l=[1,2,3,4,5,6],api:c=[1,2],playerSize:u=[636,358]}=s,p=(0,P.fb)(u);return{bids:[{bidder:"ix",params:{siteId:i,size:u,video:{startdelay:0,mimes:o,minduration:a,maxduration:d,protocols:l,api:c,playerSize:u,w:p[0],h:p[1]}}}]}}catch(e){console.log("[IX Video] transform error ",e)}}))}});const Fi={jwplayer:"plugins.slots.jwplayer.v3",video:"plugins.slots.video.v2",verticalvideo:"plugins.slots.verticalvideo.v1"};(0,qe.fo)("bidders.oathVideo",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[25]},run(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.bidders.oath.video",{pubId:"MailOnline"}),s=n("plugins.bidders.oath.video.supportedPositions",["jwplayer","video"]);t.register("provide video adUnits",(e=>{var t;if(!s.includes(e))return;const o=n(Fi[e]);if(2===(null==o||null===(t=o.mediaTypes)||void 0===t||null===(t=t.video)||void 0===t||null===(t=t.playerSize)||void 0===t?void 0:t.length)&&o.mediaTypes.video.context){const[e,t]=o.mediaTypes.video.playerSize;return{bids:[{bidder:"oneVideo",params:{pubId:r.pubId,video:{playerWidth:e,playerHeight:t,mimes:["video/mp4","application/javascript"],protocols:[1,2,3,4,5,6],api:[1,2],delivery:[2]}}}]}}i.warn(`Video adUnit misconfigured for pos: ${e}`,o)}))}}),(0,qe.fo)("bidders.rhythmOne.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:i}=e;i.warn("DEPRECATED: use unruly plugin"),t.register("provide video adUnits",(async(e,t)=>{const i=n(`plugins.bidders.rhythmOne.video.adUnits.${"video"===e?t?"autoplay":"ctp":e}`);if(i)return{bids:[{bidder:"rhythmone",params:{placementId:i}}]}}))},vendorIds:{gdpr:[36]}}),(0,qe.fo)("bidders.video.rubiMM",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.bidders.rubiMM.video.accountId"),s={area:[__webpack_require__.g.adAreaId]};r?(t.register("provide bidder alias",(()=>({adapterName:"rubicon",aliasedName:"rubi_mm"}))),t.register("prebid reduce bidderSettings",(e=>(e.rubi_mm={adserverTargeting:[{key:"hb_vast",val:e=>e.impression_id}]},e))),t.register("provide video adUnits",(function(e,t){const o="video"===e?t?"video.autoplay":"video.ctp":e,a=n(`plugins.bidders.rubiMM.video.adUnits.${o}`);if(!a)return i.warn(`config for ${o} does not exist`),{};const[d,l]=a.split(/\s+/,2);if(!d)return i.warn(`No site id for ${o}`),{};if(!l)return i.warn(`No zone id for ${o}`),{};const c=n(Vi[e]),u={language:"en",playerWidth:c.mediaTypes.video.playerSize[0],playerHeight:c.mediaTypes.video.playerSize[1],size_id:201},p=[{bidder:"rubi_mm",params:{accountId:r,inventory:s,siteId:Number(d),zoneId:Number(l),video:u}}];return i("providing auction info",p),{bids:p}}))):i.warn("no account id set")},vendorIds:{gdpr:[52]}});const Vi={jwplayer:"plugins.slots.jwplayer.v3",video:"plugins.slots.video.v2",verticalvideo:"plugins.slots.verticalvideo.v1"},zi={jwplayer:"plugins.slots.jwplayer.v3",video:"plugins.slots.video.v2",verticalvideo:"plugins.slots.verticalvideo.v1"};(0,qe.fo)("bidders.rubiconVideo",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[52]},run(e){let{broker:t,getConfig:n,log:i,win:r}=e;const s=n("plugins.bidders.rubicon.video.dependenciesTimeout",2e3),o=t.invokeAll({message:["dmp","admantx"],timeout:s}),a=new Promise((async e=>{const t=(await o)[0];i("ias-bsp",t),e((r.adAreaId?[["area",[r.adAreaId]],["ias-bsp",t]]:[["ias-bsp",t]]).reduce(((e,t)=>{let[n,i]=t;return i?{...e,[n]:i}:e}),{}))}));t.register("provide video adUnits",(async(e,t)=>{const i=(async(e,t)=>{const i=n("plugins.bidders.rubicon.video",{adUnits:{}}),r=n(zi[e]);let s="";const o=await a;if(i.adUnits[e]&&"object"==typeof i.adUnits[e]&&i.adUnits[e][t?"autoplay":"ctp"])s=i.adUnits[e][t?"autoplay":"ctp"];else{if(!i.adUnits[e]||"string"!=typeof i.adUnits[e])return{};s=i.adUnits[e]}const d=s.trim().replace(/ +/," ").split(" ");return{bids:[{bidder:"rubicon",params:{accountId:i.accountId,siteId:parseInt(d[0]),zoneId:parseInt(d[1]),inventory:o,video:{language:"en",playerWidth:r.mediaTypes.video.playerSize[0],playerHeight:r.mediaTypes.video.playerSize[1],size_id:201}}}]}})(e,t);return i})),t.register("prebid reduce bidderSettings",(e=>(e.rubicon||(e.rubicon={}),e.rubicon.adserverTargeting||(e.rubicon.adserverTargeting=[]),e.rubicon.adserverTargeting.push({key:"hb_vast",val:e=>e.impression_id}),e)))}}),(0,qe.fo)("bidders.smartAdServer.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n}=e;const i=n("plugins.bidders.smartAdServer.siteId",395440),r=n("plugins.bidders.smartAdServer.pageId",1352205),s=n("plugins.bidders.smartAdServer.video.formatId",93390),o=n("plugins.bidders.smartAdServer.video.supportedPositions",["video","jwplayer"]),a={bids:[{bidder:"smartadserver",params:{formatId:s,pageId:r,siteId:i}}]};t.register("provide video adUnits",(async e=>{if(o.includes(e))return a}))},vendorIds:{gdpr:[45]}}),(0,qe.fo)("bidders.tripleliftVideo",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[28]},run(e){let{broker:t,getConfig:n}=e;const i=n("plugins.bidders.tripleliftVideo.adUnits",{jwplayer:"dailymail_prebid_commercial_player_ctp_intstream",video:{ctp:"dailymail_prebid_editorial_player_ctp_intstream",autoplay:"dailymail_prebid_editorial_player_ap_intstream"}}),r=Object.keys(i);t.register("provide video adUnits",((e,t)=>{if(r.includes(e))return{bids:[{bidder:"triplelift",params:{inventoryCode:i[e]&&"object"==typeof i[e]?i[e][t?"autoplay":"ctp"]:i[e]}}]}}))}}),(0,qe.fo)("bidders.pubmaticVideo",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[76]},run(e){let{broker:t,getConfig:n,log:i,win:r}=e;const s=n("plugins.bidders.pubmatic.video.publisherId"),o=n("plugins.bidders.pubmatic.video.adUnits"),a=n("plugins.bidders.pubmatic.video.irisTv.enabled",!1),d=n("plugins.bidders.pubmatic.video.irisTv.timeout",1e3),l=n("plugins.bidders.pubmatic.video.dependenciesTimeout",2e3),c=n("plugins.bidders.pubmatic.video.outstreamAUs",{jwplayer:"jwplayer"}),u=t.invokeAll({message:["dmp","admantx"],timeout:l}),p=new Promise((async e=>{const t=(await u)[0];i("ias-bsp",t),e([["area",r.adAreaId],["ias-bsp",t]].reduce(((e,t)=>{let[n,i]=t;const r=Array.isArray(i)&&i.length||i?`${n}=${i}`:"";return r?e.length?`${e}|${r}`:`${r}`:e}),""))}));t.register("provide video adUnits",(async(e,n,r,l)=>{const u=((e,t,n,i)=>{if(e&&e[t]){const r=n=>0===n?e[t].preroll:e[t].midroll,s=n=>{var i;return null===(i=e[t])||void 0===i?void 0:i[n?"autoplay":"ctp"]},o=t.includes("jwplayer")?r(i):s(n);return o&&o.trim().replace(/\s+/,"@")}})(o,e,n,r);if(!u)return{};a&&i("requesting irisTV segments for videoId:",l);const h=a&&(0,D.Ye)(d,[t.invokeAll("get IrisTV tags",l)]),f=await h||{},{results:g=[]}=f,m=await p;i("dctr",m);const{context:y,iris_id:v}=g.length&&g[0].length&&!(0,I.xb)(g[0][0])&&g[0][0],{params:b,pbjsConfig:_}=null!=y&&y.length?{params:{adSlot:u,dctr:m.length?`${m}|iris_context=${y.join(",")}`:`iris_context=${y.join(",")}`,publisherId:s},pbjsConfig:{content:{id:v}}}:{params:{adSlot:u,dctr:m,publisherId:s},pbjsConfig:{}};return c[e]&&(b.outstreamAU=c[e]),i("bid params",b),{bids:[{bidder:"pubmatic",params:b}],pbjsConfig:_}}))}});const $i={jwplayer:"plugins.slots.jwplayer.v3",video:"plugins.slots.video.v2",verticalvideo:"plugins.slots.verticalvideo.v1"};function Hi(e){let{broker:t,getConfig:n,log:i}=e;i.info("enabled"),t.register("provide video adUnits",(e=>{const t=n(`plugins.bidders.mediagrid.video.${e}`);if(i.info("code",e),i.info("uid",t),!t)return i.warn(`no uid found for pos ${e}`),{};if(!n($i[e]))return i.warn(`no template found for pos ${e}`),{};const r={bids:[{bidder:"grid",params:{uid:t}}]};return i.info("providing ad unit",r),r}))}function Wi(e){let{broker:t,getConfig:n}=e;t.register("provide video adUnits",(async(e,t)=>{const i=((e,t)=>{const i=n("plugins.bidders.openx.video",{adUnits:{}});let r="";const s=i.delDomain;if(i.adUnits[e]&&"object"==typeof i.adUnits[e]&&i.adUnits[e][t?"autoplay":"ctp"])r=i.adUnits[e][t?"autoplay":"ctp"];else{if(void 0===i.adUnits[e])return{};r=i.adUnits[e].toString()}return{bids:[{bidder:"openx",params:{unit:r,delDomain:s,openrtb:{imp:[{video:{mimes:["video/x-ms-wmv","video/mp4"]}}]}}}]}})(e,t);return i}))}Hi.vendorIds={gdpr:[686]},Hi.purposeIds={gdpr:[1]},Hi.disableIfNoAdsServable=!0,Wi.vendorIds={gdpr:[69]},Wi.purposeIds={gdpr:[1]},Wi.disableIfNoAdsServable=!0;var Zi=__webpack_require__(1774);async function Gi(e){let{broker:t,log:n,getConfig:i}=e;const r=i("konduit.id","5ed6500c9166db0c4e9556ad"),s=new Set(["video","jwplayer"]),o={},a=(e,t)=>`${e}-${t}`,d=(e,t,i)=>(r,s)=>{r?n.warn("konduit erorrs",r):(n("bids processed:",e,[s]),s.forEach((e=>t.push(function(e){const t=e.adserverTargeting;return delete t.konduit_cache_key,delete t.konduit_id,n("konduit key values",t),{cust_params:t}}(e))))),l(i)},l=e=>{n("closing stream for:",e),o[e].push(null),delete o[e]};t.registerStream("get video tags",(e=>{const{slot:i,offset:r=0}=e,s=i.pos,d=a(s,r);if(n("get video tags for:",d),o[d])return void n.error(`Stream already existing for "${d}', bailing`);const l=o[d]=(0,Zi.KC)();return(0,Zi.TS)([l,t.openStream("konduit get video tags",e)])})),t.register("prebid video auction started",((e,t,i)=>{const r=a(t,i),s=o[r];o[e]=s,s.bids=[],delete o[r],n("auction started:",{key:r,auctionId:e})})),t.on("prebid video auction ended",((e,t)=>{n("prebid video auction ended",t);const i=o[t];if(!i)return void n("no stream for:",{adUnitCodes:e,auctionId:t});if(1!==e.length)throw l(t),new Error("No support for more than 1 unit per auction");const r=e[0];n("processing bids for:",r,t,i.bids),__webpack_require__.g.pbjs.adServers.konduit.processBids({adUnitCode:r,bids:i.bids,enableSendAllBids:!0,callback:d(r,i,t)})})),await t.until("prebid loaded"),__webpack_require__.g.pbjs.setConfig({konduit:{konduitId:r}}),__webpack_require__.g.pbjs.enableAnalytics({provider:"konduit"}),__webpack_require__.g.pbjs.onEvent("bidResponse",(e=>{s.has(e.adUnitCode)&&(n("bidResponse",e),o[e.auctionId].bids.push(e))}))}Gi.vendorIds={gdpr:!1},Gi.disableIfNoAdsServable=!0;var Xi=function(e,t){return Xi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Xi(e,t)};function Ki(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Xi(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Ji(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function Yi(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qi(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o}function er(e,t,n){if(n||2===arguments.length)for(var i,r=0,s=t.length;r<s;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function tr(e){return this instanceof tr?(this.v=e,this):new tr(e)}Object.create,Object.create;var nr=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function ir(e){return"function"==typeof e}var rr,sr=((rr=function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}((function(e){Error.call(e),e.stack=(new Error).stack}))).prototype=Object.create(Error.prototype),rr.prototype.constructor=rr,rr);function or(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var ar=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,i,r;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var o=Yi(s),a=o.next();!a.done;a=o.next())a.value.remove(this)}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}else s.remove(this);var d=this.initialTeardown;if(ir(d))try{d()}catch(e){r=e instanceof sr?e.errors:[e]}var l=this._finalizers;if(l){this._finalizers=null;try{for(var c=Yi(l),u=c.next();!u.done;u=c.next()){var p=u.value;try{lr(p)}catch(e){r=null!=r?r:[],e instanceof sr?r=er(er([],Qi(r)),Qi(e.errors)):r.push(e)}}}catch(e){n={error:e}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}}if(r)throw new sr(r)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)lr(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&or(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&or(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}();function dr(e){return e instanceof ar||e&&"closed"in e&&ir(e.remove)&&ir(e.add)&&ir(e.unsubscribe)}function lr(e){ir(e)?e():e.unsubscribe()}ar.EMPTY;var cr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ur={setTimeout:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r=ur.delegate;return(null==r?void 0:r.setTimeout)?r.setTimeout.apply(r,er([e,t],Qi(n))):setTimeout.apply(void 0,er([e,t],Qi(n)))},clearTimeout:function(e){var t=ur.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function pr(e){ur.setTimeout((function(){var t=cr.onUnhandledError;if(!t)throw e;t(e)}))}function hr(){}var fr=gr("C",void 0,void 0);function gr(e,t,n){return{kind:e,value:t,error:n}}var mr=null,yr=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,dr(t)&&t.add(n)):n.destination=Sr,n}return Ki(t,e),t.create=function(e,t,n){return new wr(e,t,n)},t.prototype.next=function(e){this.isStopped?Ir(function(e){return gr("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?Ir(gr("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?Ir(fr,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(ar),vr=Function.prototype.bind;function br(e,t){return vr.call(e,t)}var _r=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){Tr(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){Tr(e)}else Tr(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){Tr(e)}},e}(),wr=function(e){function t(t,n,i){var r,s,o=e.call(this)||this;return ir(t)||!t?r={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=i?i:void 0}:o&&cr.useDeprecatedNextContext?((s=Object.create(t)).unsubscribe=function(){return o.unsubscribe()},r={next:t.next&&br(t.next,s),error:t.error&&br(t.error,s),complete:t.complete&&br(t.complete,s)}):r=t,o.destination=new _r(r),o}return Ki(t,e),t}(yr);function Tr(e){var t;cr.useDeprecatedSynchronousErrorHandling?(t=e,cr.useDeprecatedSynchronousErrorHandling&&mr&&(mr.errorThrown=!0,mr.error=t)):pr(e)}function Ir(e,t){var n=cr.onStoppedNotification;n&&ur.setTimeout((function(){return n(e,t)}))}var Sr={closed:!0,next:hr,error:function(e){throw e},complete:hr},kr="function"==typeof Symbol&&Symbol.observable||"@@observable";function Cr(e){return e}var Er=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var i,r=this,s=(i=e)&&i instanceof yr||function(e){return e&&ir(e.next)&&ir(e.error)&&ir(e.complete)}(i)&&dr(i)?e:new wr(e,t,n);return function(e){if(cr.useDeprecatedSynchronousErrorHandling){var t=!mr;if(t&&(mr={errorThrown:!1,error:null}),e(),t){var n=mr,i=n.errorThrown,r=n.error;if(mr=null,i)throw r}}else e()}((function(){var e=r,t=e.operator,n=e.source;s.add(t?t.call(s,n):n?r._subscribe(s):r._trySubscribe(s))})),s},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=Ar(t))((function(t,i){var r=new wr({next:function(t){try{e(t)}catch(e){i(e),r.unsubscribe()}},error:i,complete:t});n.subscribe(r)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[kr]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===(n=e).length?Cr:1===n.length?n[0]:function(e){return n.reduce((function(e,t){return t(e)}),e)})(this);var n},e.prototype.toPromise=function(e){var t=this;return new(e=Ar(e))((function(e,n){var i;t.subscribe((function(e){return i=e}),(function(e){return n(e)}),(function(){return e(i)}))}))},e.create=function(t){return new e(t)},e}();function Ar(e){var t;return null!==(t=null!=e?e:cr.Promise)&&void 0!==t?t:Promise}var Pr="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function xr(e){if(e instanceof Er)return e;if(null!=e){if(function(e){return ir(e[kr])}(e))return function(e){return new Er((function(t){var n=e[kr]();if(ir(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}))}(e);if(nr(e))return r=e,new Er((function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()}));if(ir(null==(i=e)?void 0:i.then))return n=e,new Er((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,pr)}));if(function(e){return Symbol.asyncIterator&&ir(null==e?void 0:e[Symbol.asyncIterator])}(e))return Dr(e);if(function(e){return ir(null==e?void 0:e[Pr])}(e))return t=e,new Er((function(e){var n,i;try{for(var r=Yi(t),s=r.next();!s.done;s=r.next()){var o=s.value;if(e.next(o),e.closed)return}}catch(e){n={error:e}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}e.complete()}));if(function(e){return ir(null==e?void 0:e.getReader)}(e))return Dr(function(e){return function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(e){r[e]&&(i[e]=function(t){return new Promise((function(n,i){s.push([e,t,n,i])>1||a(e,t)}))})}function a(e,t){try{(n=r[e](t)).value instanceof tr?Promise.resolve(n.value.v).then(d,l):c(s[0][2],n)}catch(e){c(s[0][3],e)}var n}function d(e){a("next",e)}function l(e){a("throw",e)}function c(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,(function(){var t,n,i;return Ji(this,(function(r){switch(r.label){case 0:t=e.getReader(),r.label=1;case 1:r.trys.push([1,,9,10]),r.label=2;case 2:return[4,tr(t.read())];case 3:return n=r.sent(),i=n.value,n.done?[4,tr(void 0)]:[3,5];case 4:return[2,r.sent()];case 5:return[4,tr(i)];case 6:return[4,r.sent()];case 7:return r.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}(e))}var t,n,i,r;throw function(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}(e)}function Dr(e){return new Er((function(t){(function(e,t){var n,i,r,s,o,a,d,l;return o=this,a=void 0,l=function(){var o,a;return Ji(this,(function(d){switch(d.label){case 0:d.trys.push([0,5,6,11]),n=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=Yi(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){!function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)}(i,r,(t=e[n](t)).done,t.value)}))}}}(e),d.label=1;case 1:return[4,n.next()];case 2:if((i=d.sent()).done)return[3,4];if(o=i.value,t.next(o),t.closed)return[2];d.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=d.sent(),r={error:a},[3,11];case 6:return d.trys.push([6,,9,10]),i&&!i.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:d.sent(),d.label=8;case 8:return[3,10];case 9:if(r)throw r.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))},new((d=void 0)||(d=Promise))((function(e,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(t){var r;t.done?e(t.value):(r=t.value,r instanceof d?r:new d((function(e){e(r)}))).then(n,i)}r((l=l.apply(o,a||[])).next())}))})(e,t).catch((function(e){return t.error(e)}))}))}function Or(e){return function(t){if(function(e){return ir(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function Rr(e,t,n,i,r){return new Nr(e,t,n,i,r)}var Nr=function(e){function t(t,n,i,r,s,o){var a=e.call(this,t)||this;return a.onFinalize=s,a.shouldUnsubscribe=o,a._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=r?function(e){try{r(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=i?function(){try{i()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return Ki(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(yr);function Mr(e,t){return Or((function(n,i){var r=0;n.subscribe(Rr(i,(function(n){i.next(e.call(t,n,r++))})))}))}function Lr(e,t,n){return void 0===n&&(n=1/0),ir(t)?Lr((function(n,i){return Mr((function(e,r){return t(n,e,i,r)}))(xr(e(n,i)))}),n):("number"==typeof t&&(n=t),Or((function(t,i){return function(e,t,n,i,r,s,o,a){var d=[],l=0,c=0,u=!1,p=function(){!u||d.length||l||t.complete()},h=function(e){return l<i?f(e):d.push(e)},f=function(e){l++;var r=!1;xr(n(e,c++)).subscribe(Rr(t,(function(e){t.next(e)}),(function(){r=!0}),void 0,(function(){if(r)try{l--;for(var e=function(){var e=d.shift();f(e)};d.length&&l<i;)e();p()}catch(e){t.error(e)}})))};return e.subscribe(Rr(t,h,(function(){u=!0,p()}))),function(){}}(t,i,e,n)})))}var Ur=Array.isArray;var jr=["addListener","removeListener"],Br=["addEventListener","removeEventListener"],qr=["on","off"];function Fr(e,t,n,i){if(ir(n)&&(i=n,n=void 0),i)return Fr(e,t,n).pipe((r=i,Mr((function(e){return function(e,t){return Ur(t)?e.apply(void 0,er([],Qi(t))):e(t)}(r,e)}))));var r,s=Qi(function(e){return ir(e.addEventListener)&&ir(e.removeEventListener)}(e)?Br.map((function(i){return function(r){return e[i](t,r,n)}})):function(e){return ir(e.addListener)&&ir(e.removeListener)}(e)?jr.map(Vr(e,t)):function(e){return ir(e.on)&&ir(e.off)}(e)?qr.map(Vr(e,t)):[],2),o=s[0],a=s[1];if(!o&&nr(e))return Lr((function(e){return Fr(e,t,n)}))(xr(e));if(!o)throw new TypeError("Invalid event target");return new Er((function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return o(t),function(){return a(t)}}))}function Vr(e,t){return function(n){return function(i){return e[n](t,i)}}}var zr=function(e){function t(t,n){return e.call(this)||this}return Ki(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(ar),$r={setInterval:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r=$r.delegate;return(null==r?void 0:r.setInterval)?r.setInterval.apply(r,er([e,t],Qi(n))):setInterval.apply(void 0,er([e,t],Qi(n)))},clearInterval:function(e){var t=$r.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},Hr=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.pending=!1,i}return Ki(t,e),t.prototype.schedule=function(e,t){var n;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),$r.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&$r.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,i=!1;try{this.work(e)}catch(e){i=!0,n=e||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,i=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,or(i,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(zr),Wr={schedule:function(e){var t=requestAnimationFrame,n=cancelAnimationFrame,i=Wr.delegate;i&&(t=i.requestAnimationFrame,n=i.cancelAnimationFrame);var r=t((function(t){n=void 0,e(t)}));return new ar((function(){return null==n?void 0:n(r)}))},requestAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Wr.delegate;return((null==n?void 0:n.requestAnimationFrame)||requestAnimationFrame).apply(void 0,er([],Qi(e)))},cancelAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Wr.delegate;return((null==n?void 0:n.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,er([],Qi(e)))},delegate:void 0},Zr=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i}return Ki(t,e),t.prototype.requestAsyncId=function(t,n,i){return void 0===i&&(i=0),null!==i&&i>0?e.prototype.requestAsyncId.call(this,t,n,i):(t.actions.push(this),t._scheduled||(t._scheduled=Wr.requestAnimationFrame((function(){return t.flush(void 0)}))))},t.prototype.recycleAsyncId=function(t,n,i){var r;if(void 0===i&&(i=0),null!=i?i>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,i);var s=t.actions;null!=n&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==n&&(Wr.cancelAnimationFrame(n),t._scheduled=void 0)},t}(Hr),Gr={now:function(){return(Gr.delegate||Date).now()},delegate:void 0},Xr=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=Gr.now,e}(),Kr=function(e){function t(t,n){void 0===n&&(n=Xr.now);var i=e.call(this,t,n)||this;return i.actions=[],i._active=!1,i}return Ki(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(Xr),Jr=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ki(t,e),t.prototype.flush=function(e){this._active=!0;var t=this._scheduled;this._scheduled=void 0;var n,i=this.actions;e=e||i.shift();do{if(n=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,n){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw n}},t}(Kr))(Zr);const Yr=(e,t)=>(e.clientX-t.clientX)*(e.clientX-t.clientX)+(e.clientY-t.clientY)*(e.clientY-t.clientY),Qr=e=>e.touches[0],es=(e,t,n)=>{e.style.transform=`translate(${t}px, ${n}px)`};class ts{constructor(e,t,n,i){this.broker=e,this.playerConfig=t,this.playlist=n,this.config={...t},this.log=i,this.containerInitialised=this.containerInitialised.bind(this),this.playerRemove=this.playerRemove.bind(this),this.getPlaylistItem=this.getPlaylistItem.bind(this),this.handleRenderMpuAd=this.handleRenderMpuAd.bind(this),e.on("creative updated plugins",(e=>{e.hasOwnProperty("chromeless.dmplayer")&&!e["chromeless.dmplayer"]&&this.playerRemove()})),e.on("disable chromeless-player",(()=>{console.log("removing chromeless player"),this.playerRemove()}))}handlePlay(e){this.videoPlayerRef.handlePlay(e)}handleAdPlay(e){this.videoPlayerRef.handleAdPlay(e)}handleError(e){}handleRenderMpuAd(e,t){const n=e.bannerFallback.pos;this.log(`rendering ${n}`),e.pauseOnBlur&&this.broker.emit("mpuPlayerDisplayed",!0);const i=async()=>{this.videoPlayerRef.clearMpuAd(t),this.broker.emit("destroy slot",n),r.removeAttribute("data-adverts-ad");const i=await this.broker.invoke("is page visible?");e.pauseOnBlur&&!i&&(this.log("page not visible... waiting"),await this.broker.until("page visible")),this.log("restarting player"),e.pauseOnBlur&&this.broker.emit("mpuPlayerDisplayed",!1),this.broker.emit("bannerFallbackAd destroyed")},r=document.getElementById(n),s=this.broker.register("get tags",(e=>{let{slot:{pos:i}}=e;if(i!==n)return;s.cancel();const{offset:r}=t;return[{offset:r}]})),{pos:o,id:a,parentId:d}=e.bannerFallback;this.broker.emit("slot mounted",{pos:o,id:a,parentId:d}),this.broker.once("ad rendered",n,(r=>{let{isEmpty:s}=r;if(this.log(`${n} rendered`),s)return this.log(`${n} empty`),void i();this.videoPlayerRef.handleMpuAd(t),setTimeout((()=>{this.log(`destroying ${n}`),i()}),e.bannerFallback.displayTimeout)}))}getPlaylistItem(){return this.player.options_}monitorEvents(){const{broker:e,config:t}=this,{bannerFallback:n={},pauseOnBlur:i=!0}=t;e.on("chromeless player event","adPlay",(e=>this.handleAdPlay(e))),e.on("chromeless player event","play",(e=>this.handlePlay(e))),e.on("chromeless player event","error",(e=>this.handleError(e))),t.bannerFallback&&t.bannerFallback.enabled&&e.on("chromeless player event","bannerFallbackAd",(e=>this.handleRenderMpuAd({bannerFallback:n,pauseOnBlur:i},e)))}async createPlayerLayout(){const{width:e,height:t,ui:n}=this.config;this.timer=+new Date,this.monitorEvents(),this.targetBody=document.createElement("div"),this.targetBody.id="chromelessPlayer",this.targetBody.className="jwplayer_body",this.targetBody.style.width=`${e}px`,this.targetBody.style.height=`${t}px`,this.targetBody.style.background=`url(${this.config.ui.backgroundImage})`,document.body.appendChild(this.targetBody);const i={ref:e=>{this.videoPlayerRef=e},broker:this.broker,containerInitialised:this.containerInitialised,targetBody:this.targetBody,onClose:this.playerRemove,config:{width:e,ui:n},getPlaylistItem:this.getPlaylistItem};this.videoPlayerRef=function(e){let{broker:t,containerInitialised:n,getPlaylistItem:i,onClose:r}=e,s=!0;const o=MobileUtils.isMobile()?"touchstart":"click",a=document.createElement("img");a.src="//i.dailymail.co.uk/video/chromeless_closer.png";const d=document.createElement("div");d.id="closeButton",d.appendChild(a),d.addEventListener(o,(function(e){e&&e.preventDefault(),r()}));const l=document.createElement("video");l.setAttribute("defaultMuted","defaultMuted"),l.setAttribute("muted","muted");const c=document.createElement("div");c.id="playerDiv",c.classList.add("vjs-video-container"),c.classList.add("vjs-responsive"),c.style.visibility="hidden",c.appendChild(l);const u=document.createElement("div");u.id="readMoreWrapper",u.addEventListener(o,(function(e){e.preventDefault(),t.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"articleUrlClicked"}}),r(),__webpack_require__.g.top.location=i().linkBaseURL+"?ito=chromelessDM_0"})),u.addEventListener("mouseover",(function(){y(i().title)})),u.addEventListener("mouseout",(function(){g()}));const p=document.createElement("div");p.id="mpu_player",p.style.marginTop="0",p.style.left="73px";const h=document.createElement("div");h.classList.add("mpu_player_wrapper"),h.appendChild(p),h.style.display="none",h.addEventListener(o,(function(e){e.preventDefault()}));const f=document.createElement("div");f.id="outerWrapper",f.addEventListener("mouseover",(function(){f.querySelector(".jw-playlist-btn")&&(f.querySelector(".jw-playlist-btn").style.display="none",f.querySelector(".jw-icon-fullscreen").style.display="none")})),f.appendChild(d),f.appendChild(c),f.appendChild(u),f.appendChild(h),n(c,l);const g=(0,S.Ds)((()=>{u.innerText="Read more"}),5e3);return{clearMpuAd:function(){h.style.display="none"},handleAdPlay:function(){s&&m(),u.style.display="none"},handleMpuAd:function(){u.style.display="none",h.style.display="block"},handlePlay:function(){const e=i();s&&m(),y(e.title),u.style.display="inline"},outerWrapper:f,revealPlayer:m};function m(){c.style.visibility="visible",s=!1}function y(e){u.innerText=e,g()}}(i),this.targetBody.appendChild(this.videoPlayerRef.outerWrapper)}playerRemove(){this.videoPlayerRef&&this.videoPlayerRef.outerWrapper.parentNode.removeChild(this.videoPlayerRef.outerWrapper),this.targetBody&&this.targetBody.remove(),this.broker.emit("set slots enabled",["chromeless"],!1),this.broker.emit("chromeless player closed"),this.broker.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"close"}})}initialisePlayer(){this.broker.emit("set slots enabled",["chromeless"],!0),__webpack_require__.g.DM.later("videoplayer-ready",(async()=>{this.player=await(async(e,t,n)=>{const{width:i,height:r,bannerFallback:s={}}=e,o=await n,a={isMobile:MobileUtils.isMobile(),playerId:"default",preload:"none",initialVideo:!0,syndicationService:null,plugins:{tracking:{disableMolTracking:e.disableMolTracking,channelShortName:e.pageCriteraVideoChannel,sponsored:null,referenceId:"",videoId:"",trackingType:"chromeless",recommendationModel:""},"video-advertising-mode":{},"autoplay-next-video":{},"ads-setup":{bidmax:!0,cust_params:{pos:"jw_preroll"},headerBiddingParams:{platform:"dmplayer",pos:"jwplayer"},schedule:e.schedule,adsEnabled:!0,vpaidEnabled:!0,useIMASDK:e.useImaSdk,adsCancelTimeout:15e3,screen:{width:i,height:r},bannerFallback:!!s.enabled},"related-videos":{videos:o,playlistHistory:!1}}},d=await __webpack_require__.g.DM.molFeVideoplayer.initializeVideo(t,a);return await new Promise((e=>d.one("play",e))),d})(this.playerConfig,this.videoEl,this.playlist);const{delayBeforeMakingPlayerVisible:e,nonOptimisedMobileHomePage:t}=this.config;var n,i;setTimeout((()=>{this.targetBody.style.visibility="visible",this.broker.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"open"}})}),e),t&&(n=this.targetBody,i=this.player,new Promise((e=>{const t=Fr(n,"touchstart"),r=Fr(document,"touchmove"),s=Fr(document,"touchend"),o=t.pipe((a=t=>{const o=Qr(t);t.preventDefault(),t.stopPropagation();const a=s.pipe(Mr((e=>e.preventDefault()||Yr(e.changedTouches[0],o))),(u=ir(d=t=>{t>=4e4?(i.userActive(!0),e()):(es(n,0,0),i.userActive(!0))})?{next:d,error:l,complete:c}:d)?Or((function(e,t){var n;null===(n=u.subscribe)||void 0===n||n.call(u);var i=!0;e.subscribe(Rr(t,(function(e){var n;null===(n=u.next)||void 0===n||n.call(u,e),t.next(e)}),(function(){var e;i=!1,null===(e=u.complete)||void 0===e||e.call(u),t.complete()}),(function(e){var n;i=!1,null===(n=u.error)||void 0===n||n.call(u,e),t.error(e)}),(function(){var e,t;i&&(null===(e=u.unsubscribe)||void 0===e||e.call(u)),null===(t=u.finalize)||void 0===t||t.call(u)})))})):Cr);var d,l,c,u,p;return r.pipe(Mr((e=>{return t=Qr(e),n=o,{x:t.clientX-n.clientX,y:t.clientY-n.clientY,distSQ:Yr(t,n)};var t,n})),(p=a,Or((function(e,t){xr(p).subscribe(Rr(t,(function(){return t.complete()}),hr)),!t.closed&&e.subscribe(t)}))),function(e,t){return void 0===t&&(t=0),Or((function(n,i){i.add(e.schedule((function(){return n.subscribe(i)}),t))}))}(Jr))},Or((function(e,t){var n=null,i=!1,r=function(){return i&&!n&&t.complete()};e.subscribe(Rr(t,(function(e){null==n||n.unsubscribe(),xr(a(e)).subscribe(n=Rr(t,(function(e){return t.next(e)}),(function(){n=null,r()})))}),(function(){i=!0,r()})))}))));var a;o.subscribe((e=>{e.distSQ>=1e4?es(n,e.x,e.y):es(n,0,0)}))}))).then((()=>this.playerRemove())),this.broker.emit("chromeless player ready",this.player),((e,t)=>{t.on("videoAd.start",(t=>{e.emit("chromeless player event","adPlay",t)})),t.on("play",(t=>e.emit("chromeless player event","play",t))),t.on("error",(t=>e.emit("chromeless player event","error",t))),t.on("videoAd.contentPauseRequested",(t=>{e.emit("chromeless player event","adPlay",t)})),t.on("videoAd.contentResumeRequested",(t=>{e.emit("chromeless player event","play",t)})),t.on("request-reset",(t=>e.emit("chromeless player event","playlistItem",t))),t.on("time",(t=>e.emit("chromeless player event","time",t))),t.on("videoAd.error",(t=>e.emit("chromeless player event","adError",t))),t.on("videoAd.impression",(t=>{e.emit("video ad impression",t),e.emit("chromeless player event","adImpression",t)}))})(this.broker,this.player)}))}async containerInitialised(e,t){const{broker:n,config:i}=this;this.videoEl=t;const{width:r,height:s,videoAdServerUrl:o,pageLoadTimeout:a}=i,d=(await this.playlist)[0];n.emit("chromeless videoPlayer container ready",{broker:n,adEl:e,videoEl:t,videoId:d.videoId,config:{width:r,height:s,videoAdServerUrl:o,pageLoadTimeout:a}})}}const ns=MobileUtils.isMobile()&&!MobileUtils.isAndroidTablet()&&!MobileUtils.isIPad(),is=(e,t)=>e&&ns&&"desktop"===t.renderPlatform,rs=e=>{const t=e("players.chromeless.dmplayer.v3.adUnitNameLevel1","dm.chromelessvideo"),n=e("players.chromeless.dmplayer.v3.adUnitNameLevel2","dm_dmros_ros"),i=e("players.chromeless.dmplayer.v3.dfpAccountCode","5765"),r=e("players.chromeless.dmplayer.v3.videoAdServerUrlTemplate",{sz:"[size]",impl:"s",gdfp_req:1,env:"vp",output:"xml_vast4",unviewed_position_start:1,url:`${location.protocol}//${location.hostname}${location.pathname}`,correlator:"[time]"}),s=e("players.chromeless.dmplayer.v3.adRequestBaseUrl","https://pubads.g.doubleclick.net/gampad/ads");return e("players.chromeless.dmplayer.v3.adRoll",[]).map((e=>{let{offset:o,pos:a,cust_params:d,minVideoDuration:l}=e;const c={...r,iu:`/${i}/${t}/${n}/${a}`},u=Object.entries(c).map((e=>{let[t,n]=e;return t+"="+`${n}`.replace(/\//g,"%2F")})).join("&"),p=`${s}?${u}`;return l?{videoAdServerUrl:p,offset:o,minVideoDuration:l,cust_params:d}:{videoAdServerUrl:p,offset:o,cust_params:d}}))},ss=e=>{let t,{broker:n,getConfig:i,isHomepage:r,log:s,pageMeta:o}=e;const a=((e,t,n)=>{const i=e("plugins.slots.jwplayer.v3",{}),r=e("plugins.slots.jwplayer.v3.useIMASSDK",!0),s=e("players.commercial.pauseOnBlur",!0),o=new Set(["news","tvshowbiz","femail","health","sciencetech","travel","money"]).has(__webpack_require__.g.PageCriteria.channel)?__webpack_require__.g.PageCriteria.channel:"news",a=i.mediaType&&i.mediaType.video&&i.mediaType.video.playerSize||[401,225],d=Object.keys(e("slots.enabled",{})).includes("mpu_player"),l=e("slotDescriptions.initial",{}).mpu_player,{playerSize:c=[445,250],displayTimeout:u=5e3}=(null==l?void 0:l.bannerFallback)||{},[p,h]=d?c:a,f=d?((e,t)=>{const{id:n,parentId:i,pos:r}=e;return{displayTimeout:t,enabled:!0,id:n,parentId:i,pos:r}})(l,u):{};return{width:p,height:h,delayBeforeMakingPlayerVisible:e("players.chromeless.dmplayer.v3.delayBeforeMakingPlayerVisible",4e3),...i,nonOptimisedMobileHomePage:is(t,n),trackingData:{videoChannel:o},schedule:rs(e),disableMolTracking:e("players.chromeless.dmplayer.v3.disableMolTracking",!0),pageCriteraVideoChannel:__webpack_require__.g.PageCriteria.channel,useImaSdk:r,bannerFallback:{enabled:!1,...f},pauseOnBlur:s}})(i,r,o);s("player config",a);const{ui:d,disableMolTracking:l,pageCriteraVideoChannel:c,trackingData:u}=a,p=new Promise((e=>{n.once("ad rendered","billboard",(()=>setTimeout(e,500)))}));n.on("creative updated plugins",(e=>{e.hasOwnProperty("chromeless.dmplayer")&&!e["chromeless.dmplayer"]&&(t=!0)})),n.on("disable chromeless-player",(()=>{t=!0})),n.on("plugins enabled",(async()=>{if(t)return;const e=new Promise((e=>{n.on("chromeless videoPlayer container ready",(t=>{(async e=>{let{broker:t,adEl:n,videoEl:i,videoId:r,config:s}=e;const{width:o,height:a,videoAdServerUrl:d,pageLoadTimeout:l}=s;t.emit("start early video bid",{adEl:n,videoEl:i,offset:0,pos:"jwplayer",articleURL:`${__webpack_require__.g.location.protocol}//${__webpack_require__.g.location.host}${__webpack_require__.g.location.pathname}`,timeout:l,screen:{height:a,width:o},videoAdServerUrl:d,videoId:r,autoplay:!0,excludeSpotX:!1,platform:"dmplayer"})})(t),e()}))}));n.register("get video tags",(e=>{let{pos:t}=e;const n=__webpack_require__.g.PageCriteria.channel;if("jwplayer"===t)return{cust_params:{channel:n}}}));const r=(async e=>{const t=await async function(e){const t=await ct({url:e,timeout:18e3});return JSON.parse(t)}(e.ui.playlistUrl).catch((e=>{console.log("No jwplayer playlist available due to ",e.message)}));if(!t)return;const n=t[e.trackingData.videoChannel];return((e,t,n,i)=>e.filter((e=>e.duration<=t.maxVideoDuration)).map((e=>({linkBaseURL:e.articleUrl,isMobile:!1,duration:e.duration,src:e.url,source:e.source,playerId:"default",title:e.headline,preload:"none",initialVideo:!1,thumbnail:e.stillImageUrl,poster:t.backgroundImage,syndicationService:!1,plugins:{tracking:{disableMolTracking:n,channelShortName:i,sponsored:null,referenceId:e.id,videoId:e.externalVideoIdent,trackingType:"chromeless",recommendationModel:""},"ads-setup":{adsEnabled:!0,screen:{width:401,height:225},adsCancelTimeout:15e3},"autoplay-inline":{enabled:!1,alwaysOn:!1}},videoId:e.externalVideoIdent,descr:e.headline,referenceId:e.id,grapeshot:{article:{articleURL:e.articleUrl}}}))))(e.ui.shufflePlaylist?(0,q.TV)(n):n,e.ui,e.disableMolTracking,e.pageCriteraVideoChannel)})({ui:d,disableMolTracking:l,pageCriteraVideoChannel:c,trackingData:u}),o=new ts(n,a,r,s);__webpack_require__.g.DM.later("DOM_READY",(async()=>{await n.invoke("is page visible?")||!a.pauseOnBlur?(s("Page has focus - rendering player"),o.createPlayerLayout()):(s("Waiting for page to focus"),n.once("page visible",(()=>{s("Page has focus - rendering player"),o.createPlayerLayout()})))}));let h=i("players.chromeless.dmplayer.v3.delayBeforeStartPlayer",2e3);if(i("plugins.enabled").includes("chromelessWaitForBillboard")){const e=Date.now();await p;const t=Date.now()-e;h=t>h?0:h-t}setTimeout((async()=>{if(!t)try{await e,o.initialisePlayer()}catch(e){throw console.log("Unable to start chromeless player due to",e.message),e}}),h)}))};ss.pluginSetup=e=>{let{log:t,getConfig:n,isHomepage:i,pageMeta:r,addPlugins:s,removePlugins:o}=e;const a=n("players.chromeless.dmplayer.v3.domainExclusions",[]),d=n("players.chromeless.dmplayer.v3.articleIdExclusions",[]).map((e=>e.toString())),l=a.length&&(a.includes(__webpack_require__.g.location.hostname)||a.includes(__webpack_require__.g.location.hostname.replace(/www./,"")))||__webpack_require__.g.PageCriteria.articleId&&d.length&&d.includes(__webpack_require__.g.PageCriteria.articleId),c=n("players.chromeless.dmplayer.v3.enableWifiDetection",!1),u=navigator.connection&&"wifi"===navigator.connection.type;l||ns&&!is(i,r)||c&&!u||!c&&ns?(t("removing dmplayer"),o(["chromelessv2.dmplayer"])):(t("removing videoFlyout and videoForceFlyout"),o(["videoForceFlyout","videoFlyout"]),s(["players.onlyOneActivePlayer"]))};const os=ss;ss.ccpa={enabledIfDissent:!0},ss.gdpr={enabledIfDissent:!0},ss.disableIfNoAdsServable=!0;var as=__webpack_require__(2186);const ds=DM.molFeComponents,ls=e=>{try{if("string"==typeof e)return new URL(e).hostname}catch(e){}},cs=["dmgmediaprivacy.co.uk","dmgprivacyint.co.uk","localhost","127.0.0.1"],us=MobileUtils.isMobile()&&!MobileUtils.isAndroidTablet()&&!MobileUtils.isIPad(),ps={getUSPData:"__cachedUSPData"},hs=async(e,t,n,i)=>{const[r,s]=await Promise.all([Kt(),Jt()]);r||n(i),(async(e,t,n)=>{if(!n&&!b.cj&&!t("cmp.isEmbeddedVideo",!1)){await Xt("rendered");const t=(e=>{const t=t=>{if(!(e=>{if(void 0!==e.dataset.cmpNoConsent||/(cookie\s+policy|privacy\s+settings)/i.test(e.textContent))return!0;const t=document.querySelectorAll("*[data-cmp-no-consent]");for(const n of t)if((0,Se.contains)(n,e))return!0;return!1})(t.target)){const i=(0,as.vE)(t);t.preventDefault(),n(),e.emit("extra cmp ui tracking event","site clicked"),Xt("consentToAll").then((()=>{t.target.dispatchEvent(i)})).catch((e=>{console.error(e),t.target.dispatchEvent(i)}))}},n=()=>{document.body.removeEventListener("click",t)};return document.body.addEventListener("click",t),n})(e);await Xt("onUpdate"),t()}})(e,t,s)},fs=async e=>{const t=tn();return Promise.all(Object.entries(ps).map((e=>{let[n,i]=e;return new Promise((e=>{t.a.push([n,null,(t,r)=>{r&&(localStorage.setItem(i,JSON.stringify(t)),e({[n]:t}))}])}))})))},gs=async e=>{let{broker:t,getConfig:n,log:i,registerPluginBouncer:r}=e;function s(e,t){var n,r;return(null==t||null===(n=t.ccpa)||void 0===n||!n.enabledIfDissent)&&i("bouncing",e),null==t||null===(r=t.ccpa)||void 0===r?void 0:r.enabledIfDissent}ds.setConfig("molFeHomeChannel/showGDPRControls",{enabled:!b.cj&&en()}),b.SP["mol.ads.cmp.stubConsent"]?localStorage.setItem(Gt,"yes"):b.SP["mol.ads.cmp.stubDissent"]&&localStorage.setItem(Gt,"no");const o=function(e){const t=tn()||((e,t,n)=>{const i=ps[e];let r;i&&(r=localStorage.getItem(i))?n(JSON.parse(r),!0):tn().a.push([e,t,n])});return(e=>{__webpack_require__.g.__uspapi=e})(t),t.a=t.a||[],t}();switch(fs(),o("onUpdate",null,(async(e,n)=>{if(i("onUpdate",e),n){en()&&localStorage.setItem(Gt,e?"yes":"no");const n=(await fs()).find((e=>e.getUSPData));i("consentData",n);const r=n&&n.getUSPData;if(r){const n={...r,hasConsent:e};i("cmp updated",n),t.emit("cmp updated",n)}}})),en()&&Xt("onDissent").then((async()=>{i("user dissented"),localStorage.setItem(Gt,"no"),await fs()&&__webpack_require__.g.location.reload()})),(async e=>{var t;let n=e("ccpa.scriptBaseUrl");if(i=(e=>{const t=document.createElement("a");return t.href=e,t})(n).hostname,!Boolean(cs.find((e=>i.endsWith(e)))))throw new Error(`CMP script base "${n}" is not allowed.`);var i;(b.s$||b.JW)&&(n=n.replace(/^https?:/,""));const r=document.createElement("script"),s=e("cmp.isEmbeddedVideo",!1);if(s){const e=".vjs-flyout-wrapper-fixed .vjs-video-container";await Promise.race([(0,Se.elementReady)(e,4500),(0,D.Vs)(4e3)]),r.dataset.renderIn=e,r.dataset.renderVideo=!0}else r.dataset.render=!0;null!==(t=__webpack_require__.g.PageCriteria)&&void 0!==t&&t.region&&(r.dataset.region=__webpack_require__.g.PageCriteria.region);const o=e("cmp.renderConfig");o&&(r.dataset.renderConfig=JSON.stringify(o));const a=e("ccpa.version");n=a?`${n}/${a}`:n,r.dataset.gvlUiVersion=e("ccpa.gvlUiVersion",186),r.dataset.cvlUiVersion=e("ccpa.cvlUiVersion",1),r.dataset.nrvUiVersion=e("ccpa.nrvUiVersion",1),r.dataset.vendorListBaseUrl=e("ccpa.nrvUiVersion","//cmp.dmgmediaprivacy.co.uk"),r.dataset.i18nVersion=e("ccpa.i18nVersion",7),r.dataset.backendBaseUrl=e("ccpa.backendBaseUrl","//cmp.dmgmediaprivacy.co.uk"),r.dataset.consentManagementRegions=JSON.stringify(e("ccpa.consentManagementRegions",["CA","VA"])),r.id="mol-ads-cmp",r.src=`${n}/iife/mol-ads-cmp.js`;const d=document.createElement("link"),l=document.head.querySelector('link[rel="stylesheet"]')||document.head.lastChild,c=(()=>{switch(!0){case s:return"video";case us:return"mobile";default:return"desktop"}})();d.setAttribute("rel","stylesheet"),d.setAttribute("href",`${n}/css/${c}.css`),document.head.insertBefore(d,l),document.head.appendChild(r)})(n),(async()=>{const[e,t]=await Promise.all([Kt(),Jt()]);t?localStorage.setItem(Gt,e?"yes":"no"):localStorage.removeItem(Gt)})(),localStorage.getItem(Gt)){case"yes":break;case"no":i("user dissented..."),r(s);break;default:en()&&await hs(t,n,r,s)}tn()("onReset",null,(()=>{localStorage.removeItem(Gt)}))};gs.isAdsFreeSupported=!0;const ms=!!localStorage.getItem(ps.getUSPData),ys={ccpa:{enabledIfDissent:!0},init:async function(e){let{broker:t,getConfig:n,log:i,registerPluginBouncer:r}=e;Yt()&&(!ms&&i("provisional insufficient"),await gs({broker:t,getConfig:n,log:i,registerPluginBouncer:r}),i("ccpa loaded"))},run:async function(e){let{broker:t,log:n}=e;if(!tn())return;const i={gdpr:"0",cmp:"ccpa"},r=t.until("gpt initialized"),s=e=>{const n=e.hasConsent,s={...i,us_privacy:e.uspString,consent:n},o=n||!rn()?0:1,a=1===o?{...s,rdp:o}:s;t.emit("set page level targeting",a);const d={cust_params:{...s},rdp:o};t.emit("sync video tags update",d),bs(n,r)};t.on("cmp updated",(async e=>{n("user consentData updated",e),s(e)})),t.on("openCmpBanner",(()=>__webpack_require__.g.__uspapi.a.push(["openSettings"]))),t.register("check vendor consent",(async()=>({isConsented:rn()?nn():!en()||"1YNN"===(await Xt("getUSPData")).uspString})));try{const e=await Xt("getUSPData"),t=nn();n("setting initial user consentData",e,t),s({...e,hasConsent:t})}catch(e){console.error("[mol-ads]: There was a problem fetching consent data")}window.__uspapi&&b.SP.privacy&&((0,b.WH)("privacy"),window.__uspapi.a.push(["openSettings"])),__webpack_require__.g.openCcpaUi=()=>{window.__uspapi.a.push(["openSettings"])}},isAdsFreeSupported:!0},vs=ms?ys:{...ys,initTimeout:O.RD};(0,qe.fo)("cmp",vs);const bs=async(e,t)=>{if(!e&&rn()){const e=await t,n=e&&e[0];n&&n.pubads().setPrivacySettings({restrictDataProcessing:!0})}};function _s(e){let{broker:t}=e;__webpack_require__.g.__promised_cmp=new Promise(((e,n)=>{t.on("plugins enabled",(t=>{if(!__webpack_require__.g.__cmp)return e();__webpack_require__.g.__cmp("hasChoiceBeenMade",null,((t,i)=>{if(!i)return n(new Error("hasChoiceBeenMade failed"));t?__webpack_require__.g.__cmp("hasConsentedToAll",null,((t,i)=>{if(!i)return n(new Error("hasConsentedToAll failed"));e(t)})):__webpack_require__.g.__cmp("onUpdate",null,((t,i)=>{if(!i)return n(new Error("onUpdate failed"));e(t)}))}))}))})),__webpack_require__.g.postMessage("__promised_cmp:available","*")}function ws(){}_s.isAdsFreeSupported=!0,_s.ccpa={enabledIfDissent:!0};const Ts="home ushome auhome".split(" "),Is=(0,_.x)("Delayer");ws.pluginSetup=async e=>{let{broker:t,setConfig:n}=e;const i=!rn(),r=b.cj,s=PageCriteria.isMobile,o=navigator.cookieEnabled,a="channel"===PageCriteria.pageType,d=Ts.includes(PageCriteria.channel),l=en()&&Qt();if(Is("Initializing:",{newCmpUser:i,ios:r,ccpa:l,mobile:s,cookieEnabled:o,channel:a,home:d}),!(i&&r&&l&&s&&o&&a&&d))return void Is("Not delaying");Is("Possible");const c=(0,b.ej)("mol-home");if(Is("Cookie:",c),c)Is("Not delaying");else{Is("Active"),n("pluginManager.setupTimeout",6e5),Is("Change timeout to 10 minutes");try{await new Promise(((e,t)=>{let n=!1;const i=Date.now(),r=()=>{if(document.querySelector("#homePageCover"))n||Is("homePageCover detected"),n=!0;else{if(n)return Is("homePageCover closed"),e();{const e=Date.now()-i;if(e>5e3)return Is("homePageCover never showed up after",e),t(new Error(`homePageCover never showed up after ${e} ms`))}}setTimeout(r,200)};r()}))}catch(e){t.register("call for page analytics",(()=>({missingHomePageCover:!0})))}}},ws.isAdsFreeSupported=!0,ws.ccpa={enabledIfDissent:!0};const Ss="__ads_cmp_reprompt",ks=(0,_.x)("cmp-reprompt");function Cs(e){let{getConfig:t}=e;if(!sn())return void ks("Not in GDPR jurisdiction, bailing");const n=t("cmp.reprompt",{version:0,chance:0});ks("Goal:",n);const i=localStorage.getItem(Ss),r=i&&JSON.parse(i)||{version:0,chance:Math.random()},s=()=>{ks("Saving config"),localStorage.setItem(Ss,JSON.stringify(r))};ks("Current:",r),r.version<n.version&&r.chance<n.chance?(ks("Resetting CMP cookie"),tn()("reset",null,((e,t)=>{t?(ks("Cookie removed"),r.version=n.version,r.ts=(new Date).toISOString(),s()):ks("Failed resetting CMP")}))):i||s()}function Es(e){let{broker:t}=e;if(!Yt())return;const n={"overlay accepted":DM.molFeTracking.pageEvents.GDPR_OVERLAY_ACCEPTED,"overlay open settings":DM.molFeTracking.pageEvents.GDPR_OVERLAY_PRIVACY,"overlay displayed":DM.molFeTracking.pageEvents.GDPR_OVERLAY_DISPLAYED,"settings functional tab clicked":DM.molFeTracking.pageEvents.GDPR_SETTINGS_FUNCTION_TAB_CLICKED,"settings advertising tab clicked":DM.molFeTracking.pageEvents.GDPR_SETTINGS_ADVERTISING_TAB_CLICKED,"settings functional panel advertising link clicked":DM.molFeTracking.pageEvents.GDPR_SETTINGS_ADVERTISING_LINK_CLICKED,"settings functional panel policy link clicked":DM.molFeTracking.pageEvents.GDPR_SETTINGS_POLICY_LINK_CLICKED,"settings advertising panel policy link clicked":DM.molFeTracking.pageEvents.GDPR_SETTINGS_POLICY_LINK_CLICKED,"settings advertising panel disallow":DM.molFeTracking.pageEvents.GDPR_SETTINGS_DISALLOW_ADVERTISING_PARTNERS,"settings advertising panel disallow confirmed":DM.molFeTracking.pageEvents.GDPR_SETTINGS_CONFIRMATION_DISALLOW,"settings advertising panel disallow declined":DM.molFeTracking.pageEvents.GDPR_SETTINGS_CONFIRMATION_ALLOW,"settings functional panel allow all":DM.molFeTracking.pageEvents.GDPR_SETTINGS_FUNCTION_ALLOW_ALL,"settings advertising panel allow all":DM.molFeTracking.pageEvents.GDPR_SETTINGS_ADVERTISING_ALLOW_ALL,"site clicked":DM.molFeTracking.pageEvents.GDPR_OVERLAY_ACCEPT_BY_CLICK_SITE};__webpack_require__.g.addEventListener("message",(e=>{let{data:t}=e;if(!t||"function"!=typeof t.startsWith)return;if(!t.startsWith("__cmp_ui_tracking\n"))return;const i=t.substring(18),r=n[i];r?DM.molFeTracking.pageEvents.publish(r):console.warn("Unknown CMP UI Tracking event:",i)}),!1),t.on("extra cmp ui tracking event",(e=>DM.molFeTracking.pageEvents.publish(n[e])))}Cs.isAdsFreeSupported=!0,Cs.ccpa={enabledIfDissent:!0},Es.isAdsFreeSupported=!0,Es.ccpa={enabledIfDissent:!0},(0,qe.fo)("permutive.vault",{run:async function(e){let{broker:t,log:n}=e;n("waiting for permutive..."),await t.until("permutive ready"),n("starting");const i=(0,b.ej)("permutive-id");if(!i)return void n("no permutive id found");if(!DM.isLoggedIn||!DM.userId)return void n("not logged in");const r=localStorage.getItem("mol.ads.lkui"),s=DM.userId;if(s!==r){n("userId changed",{lastKnownUserId:r,newUserId:s});const e=await fetch("/registration/p/external-references/v1",{method:"PUT",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({vendor:"permutive",id:i})});202===e.status?(localStorage.setItem("mol.ads.lkui",s),n("updated permutive id:",i)):n.warn("failed sending external reference:",e.status,e.statusText)}else n("userId unchanged",s)},purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:[361]}});const As=(0,_.x)("permutive"),Ps=(0,S.ri)(((e,t,n)=>(e=>{let{broker:t,getConfig:n,pageMeta:i}=e;return new Promise((async e=>{if(!__webpack_require__.g.permutive){const e=n("plugins.permutive.projectId","5f42864d-a421-4f37-9478-00266f871d68"),r=n("plugins.permutive.webScriptSrc","https://5f42864d-a421-4f37-9478-00266f871d68.edge.permutive.app/{{WORKSPACE_ID}}-web.js"),s=n("plugins.permutive.delayedInitialisation",!1);await(async e=>{let{broker:t,getConfig:n,delayedInitialisation:i,pageMeta:r}=e;As("initializing");const s=n("plugins.permutive.projectId","5f42864d-a421-4f37-9478-00266f871d68"),o=n("plugins.permutive.publisherUserId","TheDailyMail"),a=n("plugins.permutive.apiKey","ed45e86d-a09e-4d2b-85c0-fbbd6857373e"),d=n("plugins.permutive.environment","production"),l=n("plugins.permutive.eventsCacheLimitBytes",25e5),c=e=>function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];u.q.push({functionName:e,arguments:n})},u=__webpack_require__.g.permutive={config:{apiKey:a,environment:d,projectId:s,eventsCacheLimitBytes:l,delayedInitialisation:i,viewId:__webpack_require__.g.PageCriteria&&__webpack_require__.g.PageCriteria.pageViewId||(0,O.kb)()},q:[],addon:c("addon"),consent:c("consent"),identify:c("identify"),on:c("on"),once:c("once"),query:c("query"),ready:c("ready"),segment:c("segment"),segments:c("segments"),track:c("track"),trigger:c("trigger"),user:c("user"),init:c("init")};u.ready((()=>t.emit("permutive ready"))),t.on("track in permutive",(async(e,t)=>{As("track:",e,t),__webpack_require__.g.permutive.track(e,t)}));const p=n("plugins.permutive.dependenciesTimeout",2e3),h=t.invokeAll({message:["dmp","admantx"],timeout:p}).then((e=>{let[t]=e;return{page:{admants:t}}})),f=__webpack_require__.g.RTA&&__webpack_require__.g.RTA.ids&&__webpack_require__.g.RTA.ids.then((e=>({user:{id:e.user,status:"logged out"}})))||{},g=(0,D.yq)(p,f),m=await Promise.all([h,g]),{contentType:y,topics:v,articleId:b,articleTitle:_,authorsShortNames:w,...I}=r||{},S=T()({page:{type:y,tags:v,article:{id:b,title:_,authors:w,categories:I.channel?[I.channel.substr(1)]:void 0,publishedAt:I.publishedDate&&I.publishedDate.toISOString()||void 0,modifiedAt:I.updatedDate&&I.updatedDate.toISOString()||void 0}}},...m);if(As("web context:",S),S.user){const e={id:S.user.id,tag:o};As("identity:",e),__webpack_require__.g.permutive.identify([e])}__webpack_require__.g.permutive.addon("web",S)})({broker:t,getConfig:n,delayedInitialisation:s,pageMeta:i}),await t.invoke("import script",r.replace("{{WORKSPACE_ID}}",e)),s&&__webpack_require__.g.permutive.init()}e()}))})({broker:e,getConfig:t,pageMeta:n}))),xs=()=>JSON.parse(__webpack_require__.g.localStorage.getItem("_pdfps")||"[]");async function Ds(e){let{broker:t,getConfig:n,pageMeta:i}=e;const r=Ps(t,n,i);if(window.localStorage.getItem("permutive-id")){const e=window.localStorage.getItem("permutive-id");t.emit("external user ids",{permutive:e}),t.emit("sync userId","permutive",e,location.hostname)}else r.then((()=>{const e=window.localStorage.getItem("permutive-id");t.emit("external user ids",{permutive:e}),t.emit("sync userId","permutive",e,location.hostname)}));t.emit("set page level targeting",r.then((()=>{const e=window.localStorage.getItem("permutive-id"),t=__webpack_require__.g.permutive.config.viewId;let n={permutive:xs(),pvid:t};return e&&(n={...n,puid:e,ptime:Date.now().toString()}),n})))}async function Os(e){let{broker:t,getConfig:n,pageMeta:i}=e;const r=DM&&DM.pageEvents,s=(0,_.x)("permutive");if(!r)return;const o=Ps(t,n,i),a={},d={};let l=1;await o;const c=e=>{const t=e.videoId,n={...a[t]};e.ratio>0&&(n.progress=e.ratio,s(`Sending VideoProgress Event, id: ${t}`,n),__webpack_require__.g.permutive.track("VideoProgress",n))},u=e=>{const t=e.videoId,{lineItemId:n,advertiserName:i,creativeId:r,dealId:o}=e.adImpression||{},l={id:n&&String(n)||void 0,advertiserName:i,creativeId:String(r),deal_id:String(o)};d[t]=l;const c={...a[t],ad:l};s(`Sending VideoAdPlay Event, id: ${t}`,c),__webpack_require__.g.permutive.track("VideoAdPlay",c)},p={[r.VIDEO_DATA_READY]:e=>{const t=e.videoId;a[t]=((e,t)=>{const{title:n,referenceId:i,autoplay:r}=e;return{video:{name:n,id:String(i)},autoStart:r,playId:t}})(e,String(l)),s(`videoDataReady Event, id: ${t}`,a[t]),l++},[r.VIDEO_CONTENT_STARTED]:e=>{let{videoId:t}=e;const n=a[t];s(`Sending VideoPlay Event, id: ${t}`,n),__webpack_require__.g.permutive.track("VideoPlay",n)},[r.VIDEO_PROGRESS]:c,[r.VIDEO_ADVERT_IMPRESSION]:u,[r.VIDEO_ADVERT_COMPLETED]:e=>{let{videoId:t}=e;const n={...a[t],ad:{...d[t]}};s(`Sending VideoAdComplete Event, id: ${t}`,n),__webpack_require__.g.permutive.track("VideoAdComplete",n),delete d[t]},[r.VIDEO_CONTENT_COMPLETED]:e=>{e={...e,ratio:1},c(e),delete a[e.videoId]}};Object.entries(p).forEach((e=>{let[n,i]=e;s("Registering",`video page event ${n}`),t.on(`video page event ${n}`,((e,t)=>{i(t)}))})),t.on("video.ad-impression",u)}function Rs(e){let{broker:t,getConfig:n}=e;const i=n("plugins.permutive.projectId","5f42864d-a421-4f37-9478-00266f871d68"),r=n("plugins.permutive.indexedDBVersion",2),s=new Promise((e=>{const t=indexedDB.open(i,r);t.onsuccess=async()=>{const n=t.result,i=await Promise.all(Object.values(n.objectStoreNames).map((e=>{const t=n.transaction(e,"readonly").objectStore(e).getAll();return new Promise((e=>{t.onsuccess=()=>{const n=t.result.reduce(((e,t)=>t.byteLength?e+t.byteLength:t.length?e+t.length:e),0);e(n)}}))})));n.close(),e(i.reduce(((e,t)=>e+t),0))}}));t.register("call for page analytics",(async()=>({indexedDB:{permutive:await s}})))}Ds.vendorIds={gdpr:[361]},Ds.purposeIds={gdpr:"N/A"},Os.vendorIds={gdpr:[361]},Os.purposeIds={gdpr:"N/A"},Rs.ccpa={enabledIfDissent:!0},Rs.gdpr={enabledIfDissent:!0},(0,qe.fo)("dmp.moat",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},run:async function(e){let{broker:t,getConfig:n,log:i}=e;const r=n("dmp.moat.url","https://z.moatads.com/mailonlineprebidheader526476985912/moatheader.js");i("config:",{URL:r});const s=new Promise((e=>{__webpack_require__.g.moatYieldReady=()=>{i.enabled&&__webpack_require__.g.moatPrebidApi.enableLogging(),e(__webpack_require__.g.moatPrebidApi)}}));t.emit("set page level targeting",s.then((e=>{const t=e.getMoatTargetingForPage();return i("page targeting",t),t||{}}))),t.register("get tags",(async e=>{let{slot:t}=e;const n=(await s).getMoatTargetingForSlot(t.pos);return i({[t.pos]:n}),n||{}})),await t.invoke("import script",r)},vendorIds:{gdpr:[772]}});var Ns=__webpack_require__(7080);function Ms(e,t,n){return e.has(t)?e.get(t):n}function Ls(e,t,n){return function(e,t,n){return new Map(e).set(t,n)}(e,t,n(Ms(e,t)))}function Us(e,t){const n=new Map;for(const[i,r]of e)n.set(i,t(i,r));return n}function js(e,t){return function(e,t){const n=new Map;for(const[i,r]of e)t(i)&&n.set(i,r);return n}(e,(e=>e!==t))}const Bs=()=>{};class qs{constructor(e){this.callbacks=new Map,this.intersectionObserver=new IntersectionObserver(this._onIntersect.bind(this),e)}_onIntersect(e){e.forEach((e=>{(this.callbacks.get(e.target)||Bs)(e,e.intersectionRatio>=Math.min(...this.intersectionObserver.thresholds))}))}observe(e,t){return this.callbacks.set(e,t),this.intersectionObserver.observe(e),()=>this.intersectionObserver.unobserve(e)}unobserve(e){this.callbacks.delete(e),this.intersectionObserver.unobserve(e)}}function Fs(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function Vs(e){return e.playerState&&["contentWaiting","contentPlaying","adPlaying","adsWaiting","started"].includes(e.playerState.getStateName())}function zs(){return Array.from(document.querySelectorAll("[id^=vjs_video]:not(.vjs-tech)")).filter((e=>!!e.player))}function $s(e,t){var n;return null===(n=Ms(e.molFeVideoPlayers,t,{}))||void 0===n?void 0:n.playing}function Hs(e){return function(e,t){for(const[n,i]of e)if(t(0,i))return!0;return!1}(e,((e,t)=>{let{playing:n}=t;return!!n}))}function Ws(e,t){return t.playing||e.seeking||t.mpuPlayerDisplayed?t:{...t,adInteraction:!1,playing:t.focused,shouldResume:!0,molFeVideoPlayers:Us(t.molFeVideoPlayers,((e,t)=>({...t,playing:!1,shouldResume:!1})))}}function Zs(e,t){return!t.playing||e.seeking?t:{...t,playing:!1,shouldResume:!(t.focused&&!t.adInteraction)&&t.shouldResume}}function Gs(e){var t,n,i;let{log:r,player:s}=e;null!==(t=s.ads)&&void 0!==t&&null!==(n=t.isInAdMode)&&void 0!==n&&n.call(t)&&null!==(i=s.ima)&&void 0!==i&&i.controller.sdkImpl.isAdPlaying()?(r.extend("ad")(""),s.ima.pauseAd()):(r.extend("player")(""),s.pause())}function Xs(e,t){let{playing:n}=e;var i;n?Vs(i=t)||i.play():function(e){Vs(e)&&e.pause()}(t)}function Ks(e){let{broker:t,getConfig:n,log:i,player:r,store:s}=e;const o=new as.JT;o.add(function(e,t){const n=new as.JT;return n.addEventListener(window,"blur",(()=>{const n=document.hasFocus();t("Blurred",{"has focus?":n}),n||e.dispatch({type:"blur"})})),n.addEventListener(document,"visibilitychange",(()=>{const{hidden:n}=document;t("Visibility change",{"hidden?":n}),n&&e.dispatch({type:"blur"})})),n.addEventListener(window,"focus",(()=>{setTimeout((()=>{e.dispatch({type:"focus"})}),100)})),()=>n.dispose()}(s,i.extend("window"))),o.add(function(e,t,n){const{DM:i}=__webpack_require__.g;if(!i)return n("no mol-fe video players"),()=>{};const r=new qs({threshold:.5}),s=new as.JT;return i.later("videoplayer-ready",(()=>{function o(e){n("setupHandlers",e);const i=s.on(e,"play",(()=>{t.dispatch({type:"playMolFeVideoPlayer",molFeVideoPlayer:e})})),r=s.on(e,"pause",(()=>{t.dispatch({type:"pauseMolFeVideoPlayer",molFeVideoPlayer:e})}));e.on("dispose",(()=>{n("DISPOSING",e.id()),i(),r(),s.remove(i),s.remove(r),t.dispatch({type:"disposeMolFeVideoPlayer",molFeVideoPlayer:e})}))}zs().forEach((e=>{o(e.player),s.add(r.observe(e,((n,i)=>{i?t.dispatch({type:"scrollMolFeVideoPlayerInToView",molFeVideoPlayer:e.player}):t.dispatch({type:"scrollMolFeVideoPlayerOutOfView",molFeVideoPlayer:e.player})})))})),n("molFeVideoPlayers Found",Object.keys(t.state.molFeVideoPlayers)),i.molFeVideoplayer.on("videoPlaying",(i=>{n("playing",i.player.id()),t.state.molFeVideoPlayers.has(i.player)||i.player.id()===e.id()||(n("new molFeVideoPlayer detected",i.player.id()),o(i.player),t.dispatch({type:"newMolFeVideoPlayerDetected",molFeVideoPlayer:i.player,isInPortraitVideoCarousel:i.player.el().matches("[data-mol-fe-xpmodule-originals] *")}))}))})),()=>s.dispose()}(r,s,i)),o.add(function(e,t,n){const i=new as.JT;return i.on(e,"play",(function(){t.dispatch({type:"loading"})})),i.on(e,"playing",(function(){t.dispatch({type:"loaded"})})),i.on(e,"play/pause toggle",(function(){t.dispatch({type:"togglePlay",seeking:e.seeking()})})),i.on(e,"ads-manager",(e=>function(e,n){let{adsManager:i}=e;const{google:r}=__webpack_require__.g;t.dispatch({type:"startAdMode"}),i.addEventListener(r.ima.AdEvent.Type.CLICK,(()=>{!function(e){t.dispatch({type:"ad click"}),e.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"videoAdClicked"}})}(n)}))}(e,n))),i.on(e,"adstart",(function(){t.dispatch({type:"startAdMode"})})),i.on(e,"adend",r),i.on(e,"adskip",r),i.on(e,"ads-ad-started",(function(){t.dispatch({type:"adHasStarted"})})),()=>i.dispose();function r(){t.dispatch({type:"finishAdMode"})}}(r,s,t)),o.add(s.subscribe(((e,t)=>function(e,t,n,i){for(const[e,t]of i.molFeVideoPlayers)Xs(t,e);!function(e,t,n){let{adMode:i,focused:r,playing:s}=n;s?function(e){var t,n;let{log:i,player:r}=e;r.ima&&null!==(t=r.ads)&&void 0!==t&&null!==(n=t.inAdBreak)&&void 0!==n&&n.call(t)?(i.extend("ad")(""),r.ima.resumeAd()):r.paused()&&(i.extend("player")(""),r.play())}({log:t,player:e}):r||s||!i?Gs({log:t,player:e}):setTimeout((()=>Gs({log:t,player:e})),300)}(e,t,i)}(r,i,0,t))));const{cancel:a}=t.on("display mpu_player",(()=>{s.dispatch({type:"displayMpuPlayer"})}));o.add(a);const{cancel:d}=t.on("destroy mpu_player",(()=>{s.dispatch({type:"destroyMpuPlayer"})}));o.add(d),r.on("dispose",(()=>o.dispose())),n("players.mediator.fullScreenOverlaySignalEnabled",!1)&&(t.on("fullScreenOverlayStarted",(()=>{s.dispatch({type:"fullScreenOverlayStarted"})})),t.on("fullScreenOverlayEnded",(()=>{s.dispatch({type:"fullScreenOverlayEnded"})})))}function Js(e){let{broker:t,getConfig:n,log:i}=e;const r=n("players.commercial.pauseOnBlur",!0);i("flyoutConfig",r);const s=async function(e){let{broker:t,getConfig:n,log:i}=e;const r=t.until("ad rendered","billboard");let s=n("players.chromeless.dmplayer.v3.delayBeforeStartPlayer",2e3);if(n("plugins.enabled").includes("chromelessWaitForBillboard")){const e=Date.now();await r;const t=Date.now()-e;s=t>s?0:s-t}i(`Waiting ${s}ms until I allow you to play`),await(0,D.Vs)(s)}({broker:t,getConfig:n,log:i});let o=!1;t.on("fullScreenOverlayStarted",(()=>{o=!0})),t.on("fullScreenOverlayEnded",(()=>{o=!1}));const a=function(e){let{log:t,pauseOnBlur:n,hasFullScreenOverlay:i}=e;return new Ns.Z(function(e){let{pauseOnBlur:t,hasFullScreenOverlay:n}=e;return(e,i)=>{var r,s;let o,a;switch(e.type){case"ad click":return{...i,adInteraction:!0,shouldResume:!0};case"blur":return i.focused?{...i,focused:!1,playing:!t&&i.playing,molFeVideoPlayers:Us(i.molFeVideoPlayers,((e,n)=>({...n,playing:!t&&n.playing})))}:i;case"focus":return i.focused?i:(o=Us(i.molFeVideoPlayers,((e,t)=>({...t,playing:t.inView&&t.shouldResume&&(!i.hasFullScreenOverlay||t.isInPortraitVideoCarousel)}))),{...i,adInteraction:!1,focused:!0,molFeVideoPlayers:o,playing:i.shouldResume&&!Hs(o)&&!i.mpuPlayerDisplayed&&!i.hasFullScreenOverlay});case"play":return Ws(e,i);case"pause":return Zs(e,i);case"togglePlay":return i.playing?Zs(e,i):Ws(e,i);case"startAdMode":return i.adMode?i:{...i,adMode:!0,loading:!0};case"adHasStarted":return{...i,loading:!1};case"finishAdMode":return i.adMode?{...i,adInteraction:!1,adMode:!1,loading:!1}:i;case"loading":return i.loading?i:{...i,loading:!0};case"loaded":return i.loading?{...i,loading:!1}:i;case"scrollMolFeVideoPlayerInToView":return null!==(r=i.molFeVideoPlayers.get(e.molFeVideoPlayer))&&void 0!==r&&r.isInPortraitVideoCarousel?i:(o=Ls(i.molFeVideoPlayers,e.molFeVideoPlayer,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e,inView:!0,playing:i.focused&&e.shouldResume&&!i.hasFullScreenOverlay}})),{...i,molFeVideoPlayers:o,playing:i.focused&&i.playing&&!Hs(o)&&!i.hasFullScreenOverlay,shouldResume:i.focused&&!i.hasFullScreenOverlay?i.playing:i.shouldResume});case"scrollMolFeVideoPlayerOutOfView":return null!==(s=i.molFeVideoPlayers.get(e.molFeVideoPlayer))&&void 0!==s&&s.isInPortraitVideoCarousel?i:(o=Ls(i.molFeVideoPlayers,e.molFeVideoPlayer,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e,inView:!1,playing:!1,shouldResume:i.focused&&!i.hasFullScreenOverlay?e.playing:e.shouldResume}})),{...i,molFeVideoPlayers:o,playing:i.focused&&i.shouldResume&&!Hs(o)&&!i.hasFullScreenOverlay});case"playMolFeVideoPlayer":return $s(i,e.molFeVideoPlayer)?i:{...i,playing:!1,shouldResume:i.playing||i.mpuPlayerDisplayed,molFeVideoPlayers:Ls(i.molFeVideoPlayers,e.molFeVideoPlayer,(function(){return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},playing:!0,shouldResume:!0}}))};case"pauseMolFeVideoPlayer":return $s(i,e.molFeVideoPlayer)?{...i,playing:i.shouldResume&&!i.hasFullScreenOverlay,molFeVideoPlayers:Ls(i.molFeVideoPlayers,e.molFeVideoPlayer,(function(){return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},playing:!1,shouldResume:!1}}))}:i;case"newMolFeVideoPlayerDetected":return a=i.focused&&Vs(e.molFeVideoPlayer),o=i.molFeVideoPlayers.set(e.molFeVideoPlayer,{inView:Fs(e.molFeVideoPlayer.el()),playing:a,shouldResume:a,isInPortraitVideoCarousel:e.isInPortraitVideoCarousel}),{...i,playing:i.focused&&!Hs(o),shouldResume:i.hasFullScreenOverlay?i.shouldResume:i.focused?i.playing:i.shouldResume,molFeVideoPlayers:o};case"disposeMolFeVideoPlayer":return{...i,molFeVideoPlayers:js(i.molFeVideoPlayers,e.molFeVideoPlayer),playing:!0,shouldResume:!0};case"displayMpuPlayer":return{...i,mpuPlayerDisplayed:!0,playing:!1};case"destroyMpuPlayer":return{...i,mpuPlayerDisplayed:!1,playing:i.shouldResume&&i.focused&&!Hs(i.molFeVideoPlayers)};case"fullScreenOverlayStarted":return i.hasFullScreenOverlay?i:{...i,hasFullScreenOverlay:!0,playing:!1,molFeVideoPlayers:Us(i.molFeVideoPlayers,((e,t)=>({...t,playing:!1})))};case"fullScreenOverlayEnded":return i.hasFullScreenOverlay?(o=Us(i.molFeVideoPlayers,((e,t)=>({...t,shouldResume:!t.isInPortraitVideoCarousel&&t.shouldResume,playing:!t.isInPortraitVideoCarousel&&t.inView&&t.shouldResume}))),{...i,hasFullScreenOverlay:!1,molFeVideoPlayers:o,playing:i.shouldResume&&!Hs(o)&&!i.mpuPlayerDisplayed}):i;case"__INIT__":return o=function(){const{DM:e}=__webpack_require__.g,t=new Map;return e&&e.molFeVideoplayer&&e.molFeVideoplayer.forEachPlayer&&zs().forEach((e=>{const n=Vs(e.player);t.set(e.player,{inView:Fs(e),playing:n,shouldResume:n,isInPortraitVideoCarousel:e.matches("[data-mol-fe-xpmodule-originals] *")})})),t}(),{adInteraction:!1,adMode:!1,focused:document.hasFocus(),loading:!1,playing:document.hasFocus()&&!Hs(o),shouldResume:!0,molFeVideoPlayers:o,mpuPlayerDisplayed:!1,hasFullScreenOverlay:n()};default:return i}}}({pauseOnBlur:n,hasFullScreenOverlay:i}),{adInteraction:!1,adMode:!1,focused:!1,loading:!1,playing:!1,shouldResume:!1,molFeVideoPlayers:new Map,mpuPlayerDisplayed:!1,hasFullScreenOverlay:!1},t)}({log:i.extend("store"),pauseOnBlur:r,hasFullScreenOverlay:()=>o});return e=>(Ks({broker:t,getConfig:n,log:i,player:e,store:a}),i("init store"),s.then((()=>a.init())))}function Ys(e){let t=0;return(0,Se.walk)(e,(e=>!e.previousSibling),(e=>{var n;const i=e.previousElementSibling;return null!=i&&null!==(n=i.classList)&&void 0!==n&&n.contains("mol-para-with-font")&&t++,i})),t}(0,qe.fo)("players.onlyOneActivePlayer",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run(e){const t=Js(e);e.broker.on("chromeless player ready",(n=>{var i;n.el()._player=n,delete n.el().player;const r=null!==(i=e.win.MobileUtils)&&void 0!==i&&i.isMobile()?"touchend":"click";n.on(r,(e=>{e.target.classList.contains("vjs-play-control")&&n.trigger("play/pause toggle")})),t(n)}))}}),(0,qe.fo)("performPlayer",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:[323]},async run(e){let{broker:t,doc:n,getConfig:i,log:r,ownName:s,win:o}=e;const a=i("performplayer",{enabled:!1,related:{enabled:!1}});if(r("config:",a),!a.enabled)return void r("turned off via config, bailing");const d=t.until("dom ready");t.register("placement requests",(async()=>{await d;const e=function(e){const t=[];return n('.perform-player[data-tracking-id][data-related-player="true"]'),n('.perform-player[data-tracking-id]:not([data-related-player="true"])'),t;function n(n){const i=e.querySelector(n);i&&t.push(i)}}(n);return e.map((e=>(r("found player",e.dataset.trackingId),{broker:t,log:r,sourcePlugin:s,targetParagraphIndex:Ys(e),insertMethod:n=>{n.insertAdjacentElement("afterend",e),async function(e){const n=e.dataset.trackingId;let i=n;a.idOverride&&(r("overriding it with configured id:",a.idOverride),i=a.idOverride),await t.invoke("import script",`${a.url}#${i}`,{},o,(t=>e.insertAdjacentElement("afterend",t))),t.emit("new perform player",n,e)}(e).catch(r.error)}})))}))}});var Qs=__webpack_require__(3334);(0,qe.fo)("players.targeting",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=n("auction.maxTime",2e3),s={},o=Zi.KC(),a={broker:t,log:i,pageLevelTargetingStream:o,defaultTargetingCollectionTimeout:r};t.on("set page level targeting",(async e=>{const t=await e;t&&T()(s,t),o.push(t)}));const d=Promise.race([t.until("configure and start prebid"),(0,D.Vs)(eo)]),l=Promise.race([t.until("prebid ready"),(0,D.Vs)(eo)]);t.on("collect video tags",(async(e,t)=>{const{getVideoTagsNum:n}=e,r=i.extend(`${n}-${e.pos}-${e.offset}`),o={...a,log:r};await Promise.race([d,l]);const c=io(o,e),{pos:u,autoplay:p,offset:h,videoId:f}=c;r(`requesting video bid for ${u}, ${p?"autoplay":"ctp"}, offset: ${h}, videoId: ${f}`);const g=ro(o,c);Object.keys(s).length&&(r("Dispatching known page level targeting:",s),t(null,{cust_params:{...s}})),c.cust_params&&t(null,{cust_params:c.cust_params}),function(e,t){e.on("data",(e=>{t(null,e)})).on("end",(()=>t(null,null)))}(g,((e,n)=>{t(e,n)}))})),t.on("start early video bid",(async e=>{await d;const t=io(a,e),{pos:n,offset:r}=t,s=i.extend(`earlybid-${n}-${r}`);s("starting auction");const o=ro({...a,log:s},t);to[e.pos]=o}))}});const eo=(0,y.U2)("players.targeting.prebidTimeout",1e3),to={},no=(e,t,n)=>{const i=Zi.c(e,Zi.UI(t,(e=>({cust_params:e}))));return e.on("end",(()=>n("Bidders finished, disconnecting pageLevelTargetingStream"))),i.on("close",(()=>n("Auction ended, disconnecting pageLevelTargetingStream"))),i};function io(e,t){return t.pos=t.pos||"video",t.timeout=t.timeout||e.defaultTargetingCollectionTimeout,"jwplayer"===t.pos&&(t.autoplay=!0,t.muted=!0),t.dfpPos=t.pos,t}function ro(e,t){const{broker:n,log:i}=e,{pos:r,autoplay:s,offset:o}=t;if(to[r]){i(`found stream for ${r}, ${s?"autoplay":"ctp"}, offset: ${o}`);const e=to[r];return delete to[r],n.emit("cached video bid consumed",r,s?"autoplay":"ctp"),e}return(()=>{const a=(0,Qs.Z)();i(`creating bidStream for: ${r}, ${s?"autoplay":"ctp"}, offset: ${o}, auctionId: ${a}`),t.auctionId=a;const d=function(e,t){const{broker:n,pageLevelTargetingStream:i}=e,{pos:r,timeout:s}=t,o={slot:{pos:r},...t};n.emit("start bidding",r);const a=[];return a.push(n.openStream({message:["get video tags",o],timeout:s,controlHandler:e=>{let{type:t,...i}=e;return n.emit("auction event",r,t,i)}})),no(Zi.TS(a),i,e.log)}(e,t),[l,c]=Zi.Ju();return function(e,t,n,i,r){Zi.dE(Zi.hX(n,(e=>"object"==typeof e)),(i=>{i&&console.warn("video bidding ended with error:",i),e.emit("auction event",t,"end"),e.emit("video bidding ended",t,r),n.destroy()})).pipe(i)}(n,r,d,c,a),l})()}const so=e=>{!function(e){let{broker:t,getConfig:n,log:i}=e;const r="androidMobile"===__webpack_require__.g.PageCriteria.device||"iphone"===__webpack_require__.g.PageCriteria.device;if(!__webpack_require__.g.PageCriteria.containsVideo&&!__webpack_require__.g.document.querySelector('meta[property="og:video"]'))return;const s=n("plugins.slots.video.v2.pageLoadTimeout",4e3),o=n("plugins.slots.video.v2.videoAdServerUrl_",`http://pubads.g.doubleclick.net/gampad/ads?sz=[size]&iu=%2F5765%2Fdm.video%2Fdm_video_news_apfa&ciu_szs=' +\n    '&impl=s&gdfp_req=1&env=vp&output=xml_vast3&unviewed_position_start=1&url=${encodeURIComponent(`${location.protocol}//${location.hostname}${location.pathname}`)}&correlator=[timestamp]`),[a,d]=n("plugins.slots.video.v2.mediaTypes.video.playerSize",[640,360]),l=()=>{const e=document.createElement("div");e.style.visibility="hidden";const n=document.createElement("video");n.setAttribute("muted","muted"),n.setAttribute("width",a),n.setAttribute("height",a),e.id="playerDiv_x",e.appendChild(n),document.body.appendChild(e);const l={pos:"video",articleURL:__webpack_require__.g.location.protocol+"//"+__webpack_require__.g.location.host+__webpack_require__.g.location.pathname,timeout:s,screen:{width:a,height:d},platform:"dmplayer",offset:0,videoAdServerUrl:o,autoplay:!1,excludeSpotX:!!r};i("start early video bid"),t.emit("start early video bid",l),setTimeout((()=>{document.body.removeChild(e)}),5e3)};t.on("cached video bid consumed","video","ctp",(()=>l())),t.on("plugins enabled",(()=>{__webpack_require__.g.DM.later("DOM_READY").then((()=>{i("trigger early bid"),l()}))}))}(e)},oo=so;function ao(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function lo(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,uo(e,t,"get"))}function co(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,uo(e,t,"set"),n),n}function uo(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}so.ccpa={enabledIfDissent:!0},so.gdpr={enabledIfDissent:!0},so.disableIfNoAdsServable=!0,(0,qe.fo)("slots.connatix",{disableIfNoAdsServable:!0,init:function(e){let{broker:t,getConfig:n,log:i,removePlugins:r,setConfig:s}=e;i("removing inread_player_top"),r(["slots.InreadPlayerTop"]);const o=n("slots.enabled",{});delete o.inread_player_top,s("slots.enabled",o);const a=n("slotDescription",{});delete a.inread_player_top,s("slotDescription",a);const d=n("slotDescriptions.initial",{});delete d.inread_player_top,s("slotDescriptions.initial",d),t.emit("set slots enabled",["inread_player_top"],!1)},purposeIds:{gdpr:"N/A"},run:async function(e){let{broker:t,log:n,getConfig:i,pageCriteria:r,doc:s}=e;if("article"!==(null==r?void 0:r.pageType))return void n("Not suitable for PageCriteria.pageType:",null==r?void 0:r.pageType);const o={insertMethod:async e=>{var o;const[a,d]=i("pos.connatix.size",[480,410]),l=i("pos.connatix.playerId","29388c8f-d1e6-4485-be68-d4bdbf2f2b1f"),c=i("pos.connatix.cid","b418cd9a-a117-4f3a-b6bb-09c266cad464"),u=i("pos.connatix.script",`//cd.connatix.com/connatix.playspace.js?cid=${c}`),p=i("pos.connatix.trackingPixel",`//capi.connatix.com/tr/si?token=${l}&cid=${c}`),h=i("pos.connatix.loadIASVerificationPixel",!1),f=(0,O.kb)(),g=e=>{e?n("Error:",e):(n("Rendered Successfully"),h&&t.emit("loadIASVerificationPixel",{cacheBuster:f,custom:l,document:s,width:a,height:d}))};__webpack_require__.g.cnxps||(__webpack_require__.g.cnxps={},__webpack_require__.g.cnxps.cmd=[],t.invoke("import script in iframe",{url:u}));const m=document.createElement("div");m.id=`ias-${f}`,n("slot id",m.id),m.className="connatix-placeholder";const y=r.isMobile&&!r.isTablet?m:(e=>{n("applying wrapper");const t=document.createElement("div");return t.classList.add("connatix-wrapper"),t.style.width=`${a}px`,t.style.height=`${d}px`,t.appendChild(e),t})(m);null===(o=e.parentElement)||void 0===o||o.insertBefore(y,e),(new Image).src=p,__webpack_require__.g.cnxps.cmd.push((async()=>{n("Library loaded"),t.register("call for page analytics",(()=>({connatix:!0}))),__webpack_require__.g.cnxps({playerId:l}).render(m.id,g)}))},log:n,margin:i("pos.connatix.margin",{top:30,bottom:60}),sourcePlugin:"connatix",targetParagraphIndex:i("pos.connatix.paragraphIndex",5)};t.register("placement requests",(()=>o))},vendorIds:{gdpr:[143]}});var po=new WeakMap,ho=new WeakMap,fo=new WeakMap,go=new WeakMap;class mo{constructor(e,t){ao(this,po,{writable:!0,value:void 0}),ao(this,ho,{writable:!0,value:void 0}),ao(this,fo,{writable:!0,value:void 0}),ao(this,go,{writable:!0,value:void 0});const{bindTo:n=__webpack_require__.g,eventToListen:i="scroll"}=e||{};co(this,po,new Set([])),co(this,ho,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(0,S.FU)((()=>{if(!e.size)return;const t=window.pageYOffset+(0,Se.getPageSize)()[3];for(const o of e){const[a,d]=o;n=a.element,i=a.offset,r=t,s=void 0,n&&"none"!==n.style.display&&r>=((null===(s=(0,Se.getOffset)(n))||void 0===s?void 0:s.top)||0)-i&&(d(),e.delete(o))}var n,i,r,s}),t)}(lo(this,po),t)),co(this,fo,n),co(this,go,i),n.addEventListener(i,lo(this,ho)),this.add=this.add.bind(this),this.dispose=this.dispose.bind(this)}add(e){lo(this,po).add(e)}dispose(){lo(this,fo).removeEventListener(lo(this,go),lo(this,ho)),lo(this,po).clear()}reset(){lo(this,po).clear()}size(){return lo(this,po).size}}function yo(e,t){return"lazy"===t.type&&function(e,t){let n=null;try{n="$this"===t.trigger?document.getElementById(e.id):document.querySelector(t.trigger)}catch(e){console.error("ads","Invalid css selector in the loading trigger:",t.trigger)}return{id:e.parentId||e.id,element:n||document.getElementById(e.parentId||e.id),offset:t.offset,slot:e}}(e,t)||void 0}function vo(){return(0,b.ej)("mol-home")}const bo=(0,S.ri)((function(e,t){return new Promise((n=>{const i=vo();if(i)t("cookie read from storage",i),n(i);else{var r;const i=e=>{s(),t("homepage cookie set",e),n(e)},{unsubscribe:s}=e.pageEvents.subscribe(e.pageEvents.MOBILE_HOME_PAGE_VIEW,(e=>(n,i)=>{if(!i.swipe&&!i.swipe){const n=vo();t("user made mobile-home-page choice",n),n&&e(n)}})(i));null===(r=__webpack_require__.g.DM)||void 0===r||r.later(["MOBILE_HOMEPAGE_DONE"],(()=>{i(vo()||"news")}))}}))})),_o="hp-panel",wo=["news","puff"];function To(e,t){const n="puff"===t?"dontmiss":__webpack_require__.g.adAreaId||"home";e.emit("set adSubareaId",n)}function Io(e){return e.classList.contains(_o)}(0,qe.fo)("slots.delayMount",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){const{log:t,...n}=e;(e=>{let{isHomepage:t,pageMeta:n}=e;return t&&"mobile"===n.renderPlatform})(e)?function(e){let{broker:t,DM:n,getConfig:i,log:r}=e;const s=new Map,o=i("slots.enabled",{}),a=bo(n,r),d=function(e,t){return new Promise((n=>{e.once("dom ready",(async()=>{const i=Array.from(document.getElementsByClassName(_o)),r=await t,s=r&&{news:"news",showbiz:"puff"}[r],o=s&&i[wo.indexOf(s)]||void 0;To(e,s),n([i,o])}))}))}(t,a),l="ontouchmove"in document?{bindTo:document.documentElement,eventToListen:"touchmove"}:{bindTo:__webpack_require__.g,eventToListen:"scroll"};r("using scrollEvent",l);const c=new mo(l);let u;n.pageEvents.subscribe(n.pageEvents.MOBILE_HOME_PAGE_SWIPE,(async(e,n)=>{r(`${e} event received, user on ${n.label} panel`);const[i]=await d,o=i[wo.indexOf(n.label)];!function(e){let{broker:t,log:n,loadTracking:i,newPanel:r,slots:s}=e;To(t,r),n("resetting loadTracking for panel:",r),i.reset();const o=[];s.forEach((e=>{let{slotDefinition:t,resolve:a,panelName:d,loadTrackingSettings:l}=e;if(d===r)if(l&&a){const e=()=>{s.set(t.id,{panelName:d,slotDefinition:t}),n(t.id," loadTrigger reached, resolving"),a()};n("adding loadTracking for",t.id),i.add([l,e])}else a?(n(t.id," resolving"),s.set(t.id,{panelName:d,slotDefinition:t}),a()):o.push([t.pos,t.id])}));const a=o.map((e=>{let[t]=e;return t})),d=o.map((e=>{let[,t]=e;return t}));a.length&&(n("refresh positions",a),t.emit("prepare to refresh ads",a),t.emit("refresh ads",{ids:d,positions:a,reason:"swipe"}))}({broker:t,log:r,loadTracking:c,newPanel:n.label,slots:s}),t.emit("panel updated",o,n.label)})),t.on("panel updated",(e=>{u=e})),d.then((e=>{let[,t]=e;u=t})),t.register("verify slot ready",(e=>function(e){let{currentPanel:t,enabledAds:n,loadTracking:i,log:r,pHomepageCookie:s,pPanelsRendered:o,slotDefinition:a,slots:d}=e;return new Promise((async e=>{await s;const[l,c]=await o;r("verifying slot",a.id);const u=document.getElementById(a.id),p=(0,Se.closest)(u,Io),h=wo[l.indexOf(p)],f=t||c;r("panelName:",a.id,h,f);const g=yo(a,n[a.dfpPos||a.pos]);if(p&&p!==f)r(a.id," not in this panel: delaying"),d.set(a.id,{loadTrackingSettings:g,panelName:h,slotDefinition:a,resolve:e});else if(g){r(a.id," loadTracking",g);const t=()=>{d.set(a.id,{panelName:h,slotDefinition:a}),r(a.id," loadTrigger reached, resolving"),e()};i.add([g,t]),d.set(a.id,{loadTrackingSettings:g,panelName:h,slotDefinition:a,resolve:e})}else r(a.id," no loadTracking, resolving"),d.set(a.id,{panelName:h,slotDefinition:a}),e()}))}({currentPanel:u,enabledAds:o,loadTracking:c,log:r,pHomepageCookie:a,pPanelsRendered:d,slotDefinition:e,slots:s}))),((e,t)=>{let n="unset";t.then((e=>{n=e})),e.register("call for page analytics",(()=>({homepageCookie:n})))})(t,a),t.register("call for page-unload",(()=>{if(!c)return;let e=0;for(const t of s.values())t.resolve&&e++;return{sdm:e}}))}({...n,log:t.extend("mobileHomePage")}):function(e){let{broker:t,getConfig:n,log:i}=e;i("using default delay-mount");const r=n("slots.delayMount.checkInterval",500),s="ontouchmove"in document?{bindTo:document.documentElement,eventToListen:"touchmove"}:{bindTo:__webpack_require__.g,eventToListen:"scroll"};i("using scrollEvent",s);const o=new mo(s,r),a=n("slots.enabled",{});t.register("verify slot ready",(e=>new Promise((t=>{const n=a[e.dfpPos||e.pos],r=yo(e,n);var s;r?(i(`delay mounting slot id: ${e.id}, pos: ${e.pos}, triggerId: ${null===(s=r.element)||void 0===s?void 0:s.id}, offset: ${r.offset}`),o.add([r,t])):(i("mounting slot",e.id,e.pos),t())})))),t.register("call for page-unload",(()=>o&&{sdm:o.size()}))}({...n,log:t.extend("default")})}});var So=__webpack_require__(8061),ko=__webpack_require__.n(So);(0,qe.fo)("slots.minuteMedia",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:[918]},async run(e){let{broker:t,getConfig:n,log:i,pageCriteria:r}=e;if(i("enabled"),"article"!==r.pageType)return void i("Not suitable for PageCriteria.pageType:",r.pageType);__webpack_require__.g.addEventListener("voltaxPlayerLoaded",(e=>{let{detail:n}=e;const i=n.playerName,r=__webpack_require__.g.voltax.getPlayersByName(i);t.emit("new minute media player",r[0])})),__webpack_require__.g.voltax&&__webpack_require__.g.voltax.getAllPlayersOnPage().forEach((e=>t.emit("new minute media player",e)));const s={insertMethod:async function(e){await async function(e){let{getConfig:t,log:n}=e;const i=t("pos.minuteMedia.tcfEventBarrier",!1);var r;i&&__webpack_require__.g.__tcfapi&&(n("waiting for TCF event",i),await(r=i,new Promise((e=>{__webpack_require__.g.__tcfapi("addEventListener",2,(t=>{r===t.eventStatus&&(__webpack_require__.g.__tcfapi("removeEventListener",2,(()=>{}),t.listenerId),e(t))}))}))),n("received TCF event",i))}({getConfig:n,log:i.extend("tcf")});const t=document.createElement("div");t.classList.add("minute-media-container");const r=document.createElement("div");r.classList.add("minute-media"),n("pos.minuteMedia.watermark",!0)&&r.classList.add("watermark"),t.appendChild(r),n("pos.minuteMedia.addLabel")&&r.classList.add("minute-media-label"),e.parentElement.insertBefore(t,e);const s=n("pos.minuteMedia.googleTagManagerId","GTM-PL4PD49"),o=`https://www.googletagmanager.com/gtm.js?id=${s}`,a=`https://www.googletagmanager.com/ns.html?id=${s}`;(0,Se.createIframe)({content:ko()({configScript:n("pos.minuteMedia.configScript","https://bucket1.mm-syringe.com/prod/configs/c4e65ff4-b385-d838-b9da-8cc3d8d9dfdb.js"),googleTagManagerScript:o,googleTagManagerIframeScript:a,injectorScript:n("pos.minuteMedia.injectorScript","https://bucket1.mm-syringe.com/prod/injector/injector.1.5.3.js")}),insertMethod:e=>r.appendChild(e),log:i.extend("")})},log:i,margin:n("pos.minuteMedia.margin",{top:30,bottom:60}),sourcePlugin:"minutemedia",targetParagraphIndex:n("pos.minuteMedia.paragraphIndex",4)};t.register("placement requests",(()=>s))}}),(0,qe.fo)("slots.mpuComments",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:i,pageMeta:r,pageCriteria:s}=e;if("mobile"!==r.renderPlatform||"article"!==s.pageType)return void i("mpu_comments not rendered on this page type, bailing");const o=n("slots.enabled",{}),a=Object.keys(o).filter((e=>e.startsWith("mpu_comments")));a.length?(t.on("slots initialized",(()=>{DM.later("bundle",(()=>DM.molFeComments&&DM.molFeComments.events.subscribe("loaded",(()=>{Eo=!0,Co.clear();const e=function(e,t){const n=()=>{t("running cleanupHandler"),__webpack_require__.g.location.hash.match(/^#comments-\d+$/)||(Eo=!1,__webpack_require__.g.removeEventListener("hashchange",n),t("cleaning up slots"),Co.forEach((n=>{t("destroying",n),e.emit("destroy slot",n)})))};return n}(t,i);__webpack_require__.g.addEventListener("hashchange",e),Ao(t,a,n,i)}))))})),t.on("ad rendered",((e,n)=>{const r=n.slot.getSlotElementId();a.includes(r)&&(Eo?(i("ad rendered, id:",r),Co.add(r)):(i("ad no longer in comments panel, destroying",r),t.emit("destroy slot",r)))}))):i("no mpu_comments positions enabled, bailing")}});const Co=new Set;let Eo=!1;const Ao=(e,t,n,i)=>{const r=n("slotDescription.mpu_comments.positions",[3,8]),s=document.querySelectorAll("#comments .comment"),o=s.length;t.filter(((e,t)=>r[t]<o)).forEach(((t,n)=>{i(`inserting ad, id: ${t}, in comment position ${r[n]}`),((e,t,n)=>{const i=e[n],r=(e=>{const t=document.createElement("div");t.id=e,t.className=`adHolder mpu molads_${e}`,t.appendChild(ft());const n=document.createElement("li");return n.appendChild(t),n})(t);i.parentNode.insertBefore(r,i)})(s,t,r[n]),e.emit("slot mounted",{pos:t,id:t})}))};(0,qe.fo)("slots.rendered",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t}=e;const n={};t.on("ad rendered",((e,i)=>{if("publisher_ads"===i.serviceName&&!i.isEmpty){const e=i.slot.molAd,t=e.type||"1x1",r=[e.pos,e.parentId,t].join("|");n[r]={pos:e.pos,id:e.parentId,sz:t,cid:i.creativeId,lid:i.lineItemId}}t.emit("ads rendered update",Object.values(n))}))}});const Po=e=>{let t,n,{broker:i,getConfig:r}=e,{offsetBelowElement:s,triggerElementId:o}=r("plugins.slots.leaderTop",{offsetBelowElement:0,triggerElementId:"billBoard"});s=parseInt(s);const a=()=>{const e=document.getElementById(o);if(!e)return;const i=(0,Se.getOffset)(e),r=(0,Se.getElementComputedHeight)(e),a=(0,Se.getOffset)(document.getElementById("page-container"));if(!t&&document.getElementById("smartBanner")){const e=document.getElementById("smartBanner").getElementsByTagName("a")[0];t=e.addEventListener("click",(n=>{e.removeEventListener("click",t),document.getElementById("leader_top").classList.remove("below-smart-banner")}))}n&&document.getElementById("leader_top").classList.add("styled"),__webpack_require__.g.scrollY<i.top+r-a.top+s?setTimeout((()=>{document.getElementById("leader_top").style.display="none"})):(document.getElementById("smartBanner")&&"block"===__webpack_require__.g.getComputedStyle(document.getElementById("smartBanner")).getPropertyValue("display")?document.getElementById("leader_top").classList.add("below-smart-banner"):document.getElementById("leader_top").classList.remove("below-smart-banner"),setTimeout((()=>{d&&(d(),d=void 0),document.getElementById("leader_top").style.display="block"})))};let d;i.intercept("slot ready for ad",((e,t)=>{let[n,i,r]=e;"leader_top"===i.pos?d=t:t()}));const l=document.createElement("div");i.once("slot defined",(()=>{l.id="leader_top",l.style.display="none",document.body.appendChild(l),i.emit("slot mounted",{pos:"leader_top"}),i.on("ad rendered","leader_top",(()=>{n=!0,a()})),i.on("dom ready",(()=>{a(),[1e3,2e3,3e3].forEach((e=>setTimeout(a,e))),document.addEventListener("scroll",__webpack_require__.g.DM.molFeMiniLodash.debounce(a,200),{passive:!0,capture:!0}),document.addEventListener("touchmove",__webpack_require__.g.DM.molFeMiniLodash.debounce(a,200),{passive:!0,capture:!0})}))}))};Po.ccpa={enabledIfDissent:!0},Po.gdpr={enabledIfDissent:!0},Po.disableIfNoAdsServable=!0;const xo=Po,Do="puff_ad_others";function Oo(e){let{broker:t,getConfig:n}=e;if(n("plugins.slots.puffAdOthers.renderInfiniteList",{enabled:!1}).enabled){const e=n("slotDescriptions.initial")[Do],i=e&&(0,P.fb)(e.size);t.on("infinite-list append",(e=>{const r=i&&n("plugins.slots.puffAdOthers.addWatermark",!0);for(const n of e.getElementsByClassName("puff-ad-other"))r&&Ro(n,i[0],i[1]),t.emit("slot mounted",{pos:Do,containerId:n.id})}))}}function Ro(e,t,n){e.classList.remove("puff-ad");const i=document.createElement("div");i.classList.add("ad-exp-container"),i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%",i.style.clip=`rect(0,${t}px,${n}px,0)`;const r=document.createElement("div");r.classList.add("adHolder"),r.classList.add("puff-ad"),r.classList.add("watermark"),r.style.position="relative",r.style.width=`${t}px`,r.style.height=`${n}px`,r.appendChild(i);const s=e.parentNode;return s.parentNode.replaceChild(r,s),i.appendChild(e),r}Oo.ccpa={enabledIfDissent:!0},Oo.gdpr={enabledIfDissent:!0},Oo.disableIfNoAdsServable=!0;const No={refreshCount:0};async function Mo(e){let{broker:t}=e;const n={};t.intercept("slot defined",((e,t)=>{let[i,{pos:r}]=e;n[r]=No,t()})),t.on("destroy slot",(e=>{delete n[e]})),t.register("get tags",(e=>{let{slot:{pos:t}}=e;return[n[t]]})),t.register("get video tags",(e=>{let{slot:{pos:t}}=e;return{cust_params:{...n[t]||No,player:t}}})),t.intercept("refresh ads",((e,t)=>{let[i,{positions:r,plugins:s,reason:o}]=e;try{r.forEach((e=>{n[e]={refresh:!0,refreshCount:n[e].refreshCount+1,refreshReason:o}}))}finally{t()}})),await t.until("dom ready");const i=__webpack_require__.g.DM&&__webpack_require__.g.DM.molFeTracking&&__webpack_require__.g.DM.molFeTracking.pageEvents;i&&i.subscribe("video.ad-impression",((e,t)=>{let{tag:i}=t;const r=(0,xt.Gi)(i),{cust_params:{player:s,refreshCount:o=0}}=r;n[s]={refresh:!0,refreshCount:Number(o)+1}})),t.on("video.ad-impression",(e=>{let{playerId:t}=e;const{refresh:i,refreshCount:r}=n[t]||{refresh:!0,refreshCount:0};n[t]={refresh:i,refreshCount:r+1}}))}Mo.ccpa={enabledIfDissent:!0},Mo.gdpr={enabledIfDissent:!0},Mo.disableIfNoAdsServable=!0,(0,qe.fo)("sticky.banner",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},disableIfNoAdsServable:!0,run:function(e){let{broker:t,DM:n,doc:i,getConfig:r,log:s}=e;if(!window.getComputedStyle)return;s("starting");const o=document.createElement("div"),a=r("plugins.enabled").includes("chromelessv2.dmplayer"),{news:d,puff:l}=r("slotDescription.sticky_banner.panel.unit",{}),c=e=>{const n=r("slotDescriptions.initial").sticky_banner;s("dispatching slotDescription update",n);const i="puff"===e||"showbiz"===e?l:d;t.emit("update description","sticky_banner",{...n,adUnit:(0,F.Z)(i)})};bo(n,s).then((e=>{c(e)}));const u=t.intercept("slot defined",((e,n)=>{let[i,d]=e;const{id:l,pos:c}=d;if("sticky_banner"!==c||!a||(MobileUtils.isMobile()||(0,b.bP)())&&(0,b.ej)("smart-banner")){if("sticky_banner"===c)try{s("replace sticky_banner element"),function(e){let{broker:t,getConfig:n,log:i,ad:r,underlayElement:s}=e;const o=document.getElementById(r.id),a=n("pos.stickyBanner.hiddenUntilImpression",!0),d=n("pos.stickyBanner.underlayPadding.top",15),l=n("pos.stickyBanner.underlayPadding.bottom",15),c=n("pos.stickyBanner.underlayPadding.closeButton",!1);i("config:",{paddingTop:d,paddingBottom:l,hiddenUntilImpression:a});const u=s;u.id="stickyBannerUnderlay",a&&(u.style.display="none"),document.body.appendChild(u);const p=ft();u.appendChild(p);const h=document.createElement("div");if(h.classList.add("adHolder"),h.classList.add("sticky_banner_overrides"),h.classList.add("noAdLabel"),h.id="stickyBanner",h.style.marginTop="0",u.style.padding=`${d}px 0 ${l}px 0`,u.appendChild(h),Lo()&&(0,Se.appendStyle)(`#stickyBannerUnderlay #stickyBanner {\n      transform: scale(${Uo});\n    }`),c){const e=document.createElement("button");e.classList.add("closeButton"),u.appendChild(e),e.addEventListener("click",(()=>{u.style.display="none"}))}t.on("ad rendered","sticky_banner",(e=>{let{isEmpty:t,size:n}=e;if(i("sticky banner rendered:",{isEmpty:t}),t)u.style.display="none";else{const e=n[1];if(u.style.display="flex",Lo()){i("ad height:",e);const t=e*Uo-e,n=`${Math.round(d*Uo+t/2)}px 0 ${Math.round(l*Uo+t/2)}px 0`;u.style.padding=n,i("scalled padding:",n)}}})),o.parentNode.replaceChild(u,o)}({broker:t,getConfig:r,log:s,ad:d,underlayElement:o}),u()}catch(e){console.error(e)}n(i,d)}}));t.on("panel updated",((e,n)=>{s("panel updated",n,e),t.emit("destroy slot","sticky_banner"),c(n),t.emit("slot mounted",{pos:"sticky_banner",id:"stickyBanner"})})),t.on("fullScreenOverlayStarted",(()=>{s("fullScreenOverlayStarted, destroying sticky_banner"),o.classList.add("fullScreenOverlay")})),t.on("fullScreenOverlayEnded",(()=>{s("fullScreenOverlayEnded, mounting sticky_banner"),o.classList.remove("fullScreenOverlay")}))}});const Lo=()=>document.body.classList.contains("mol-desktop"),Uo=window.innerWidth/window.screen.width,jo=2e3;function Bo(){return document.querySelector(".billboard-container")}function qo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bo();return null==e?void 0:e.querySelector(".sticky-container")}function Fo(){return document.querySelector("#billBoard")}async function Vo(e){let t,n,i,r,s,{broker:o,timeAfterScroll:a,timeAfterVisible:d,minimumVisibilityPeriod:l=0,waitMinVisiblity:c=!1}=e;const u=new Promise((e=>{t=o.once("ad rendered","billboard",(()=>{const t={capture:!1,passive:!1};let n=()=>{null!==n&&(window.removeEventListener("scroll",n,t),n=null,setTimeout(e,a))};window.addEventListener("scroll",n,t)}))})),p=new Promise((e=>{n=o.on("slot visibility changed","billboard",(t=>{t.inViewPercentage>=50&&(n.cancel(),setTimeout(e,d))}))})),h=new Promise((e=>{i=o.on("slot visibility changed","billboard",(t=>{t.inViewPercentage>=50&&(i.cancel(),setTimeout(e,l))}))})),f=new Promise((e=>{r=o.once("disable force view when viewed","billboard",(async()=>{c&&await h,e()}))})),g=new Promise((e=>{s=o.once("disable sticky position","billboard",(()=>{e("sticky disabled")}))})),m=await Promise.race([u,p,f,g]);return t.cancel(),n.cancel(),i.cancel(),r.cancel(),s.cancel(),m}function zo(e,t,n){const i=Fo();if(i){if(n.affix||(n.sticky?i.classList.add("sticky"):i.classList.remove("sticky")),"infinitly"===n.sticky)!function(e){const{height:t,billboardHeight:n,stickyContainer:i}=$o(document.body)||{};if(t&&n&&i)if(e.affix){const i=t-n,r=e.affix.getOffsets().startStickyOffset+i;e.affix.setOffsets({stopStickyOffset:r,stoppedPosition:i}),e.affix.started||e.affix.start()}else i.style.height=`${t}px`}(n);else if("limited"===n.sticky)!function(e){const{height:t,billboardHeight:n,stickyContainer:i}=$o(function(){const e=document.querySelector(".gamma"),t=document.querySelector(".lead-alpha"),n=t&&t.querySelector(".alpha"),i=n&&n.querySelector(".item"),r=t&&t.querySelector(".beta"),s=t&&t.querySelector(".sport"),o=t&&t.querySelector(".health"),a=t&&t.querySelector(".travel"),d=e=>{var t;return e&&((null===(t=(0,Se.getOffset)(e))||void 0===t?void 0:t.top)||1/0)<jo?e:null};return d(document.querySelector("#fff-hub-banner")||d(document.querySelector(".article-text h2"))||document.querySelector("#sciencetech #content h2")||document.querySelector(".author-container")||document.querySelector("#sciencetech, #arts, #you, #promotions, #tvshowbizheadlines, #food, #gardening, #femailblogs")&&(null==r?void 0:r.querySelector(".item:nth-child(1)"))||(null==e?void 0:e.querySelector(".tim-tools"))||(null==e?void 0:e.querySelector(".sport.item:nth-child(2)"))||(null==e?void 0:e.querySelector(".article-tri-headline h2"))||(null==n?void 0:n.querySelector(".article.article-tri-headline:nth-child(1) h2"))||(null==t?void 0:t.querySelector(".football-team-news .article.article-large h2"))||(null==s?void 0:s.querySelector(".article-large h2"))||(null==o?void 0:o.querySelector(".health-archive h2"))||(null==a?void 0:a.querySelector(".travel-banner h1"))||(null==r?void 0:r.querySelector(".item:nth-child(1) .puff ul li:nth-child(1)"))||(null==r?void 0:r.querySelector(".item:nth-child(1) .fff-hub .fff-search"))||(null==i?void 0:i.querySelector("h3:not(.usability)"))||(null==r?void 0:r.querySelector(".item:nth-child(2):not(.mpu_puff_wrapper)"))||(null==n?void 0:n.querySelector(".item h6"))||(null==r?void 0:r.querySelector(".item:nth-child(1)")))}())||{};if(t&&n&&i)if(e.affix&&t){const i=t-n,r=e.affix.getOffsets().startStickyOffset+i;e.affix.setOffsets({stopStickyOffset:r,stoppedPosition:i}),e.affix.started||e.affix.start()}else i.style.height=`${t}px`}(n);else{var r;null!=n&&null!==(r=n.affix)&&void 0!==r&&r.started&&n.affix.disable();const e=qo();e&&(e.style.height="100%")}if(n.closable?i.classList.add("closable"):i.classList.remove("closable"),"click close button"===t.type){const{DM:t}=__webpack_require__.g;t.pageEvents.publish(t.pageEvents.AD_BILLBOARD_CLOSED),e.emit("send event to bidmax",{type:"custom",payload:{userClosedBillboard:!0,refreshCount:n.refreshCount}})}!function(e){if(e.querySelector(".billboard-close"))return;const t=document.createElement("a"),n=document.createTextNode("Close x");t.href="#",t.classList.add("billboard-close"),t.appendChild(n),t.addEventListener("click",(e=>{e.preventDefault()})),e.appendChild(t)}(i)}}function $o(e){var t;if(!e)return void(null===(t=Fo())||void 0===t||t.classList.remove("sticky"));const n=Bo(),i=qo(n),r=Fo();if(!n||!i||!r)return;const s=(0,Se.getElementComputedHeight)(n),o=(0,Se.getElementComputedHeight)(r),a=s+((0,Se.getElementBottomOffset)(e)-(0,Se.getElementBottomOffset)(n)),d=(s-o)/2;return{height:d>0?a-d:a,billboardHeight:o,stickyContainer:i}}function Ho(e,t){switch(e.type){case"click close button":case"limit sticky height":return!1!==(null==t?void 0:t.closable)||"limited"!==(null==t?void 0:t.sticky)?{...t,closable:!1,sticky:"limited"}:t;case"infinitly stick":return"infinitly"!==(null==t?void 0:t.sticky)||(null==t?void 0:t.closable)!==!!e.closable?{...t,closable:!!e.closable,sticky:"infinitly"}:t;case"__DEINIT__":case"disable stickyness":return t.sticky?{...t,sticky:!1}:t;case"disable refresh":return t.refreshable?{...t,refreshable:!1}:t;case"refresh":return{...t,refreshCount:t.refreshCount+1};default:return t}}function Wo(e,t){Xo(e,t),t.add(e)}function Zo(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Go(e,t,n){Xo(e,t),t.set(e,n)}function Xo(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ko(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function Jo(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Qo(e,t,"get"))}function Yo(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Qo(e,t,"set"),n),n}function Qo(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const ea="affix-off",ta="affix-on",na=e=>{const t=window.getComputedStyle(e),n=parseInt(t.getPropertyValue("margin-left")),i=parseInt(t.getPropertyValue("margin-right")),r=parseInt(t.getPropertyValue("margin-top")),s=parseInt(t.getPropertyValue("margin-bottom")),o=parseInt(t.getPropertyValue("padding-left")),a=parseInt(t.getPropertyValue("padding-right")),d=parseInt(t.getPropertyValue("padding-top")),l=parseInt(t.getPropertyValue("padding-bottom")),c=(parseInt(t.getPropertyValue("border-left")),parseInt(t.getPropertyValue("border-right")),parseInt(t.getPropertyValue("border-top")),parseInt(t.getPropertyValue("border-bottom"))),u=e.getBoundingClientRect(),p={left:u.left-n,right:u.right-i-o-a,top:u.top-r,bottom:u.bottom-s-d-l-c,width:0,height:0};return p.width=p.right-p.left,p.height=p.bottom-p.top,p},ia=()=>{};var ra=new WeakMap,sa=new WeakMap,oa=new WeakMap,aa=new WeakMap,da=new WeakMap,la=new WeakMap,ca=new WeakMap,ua=new WeakMap,pa=new WeakMap,ha=new WeakMap,fa=new WeakMap,ga=new WeakMap,ma=new WeakMap,ya=new WeakSet,va=new WeakSet,ba=new WeakSet,_a=new WeakSet,wa=new WeakSet;class Ta{constructor(e){let{element:t,log:n,onAffix:i,onUnfix:r,onStopfix:s,relativeHorizontalElement:o,startStickyOffset:a=0,stopStickyOffset:d=Number.MAX_SAFE_INTEGER,stoppedPosition:l}=e;Wo(this,wa),Wo(this,_a),Wo(this,ba),Wo(this,va),Wo(this,ya),Go(this,ra,{writable:!0,value:void 0}),Go(this,sa,{writable:!0,value:void 0}),Go(this,oa,{writable:!0,value:void 0}),Go(this,aa,{writable:!0,value:void 0}),Go(this,da,{writable:!0,value:void 0}),Go(this,la,{writable:!0,value:void 0}),Go(this,ca,{writable:!0,value:void 0}),Go(this,ua,{writable:!0,value:void 0}),Go(this,pa,{writable:!0,value:void 0}),Go(this,ha,{writable:!0,value:void 0}),Zo(this,"started",void 0),Go(this,fa,{writable:!0,value:void 0}),Go(this,ga,{writable:!0,value:void 0}),Go(this,ma,{writable:!0,value:void 0}),Zo(this,"disable",void 0),Yo(this,ra,t),Yo(this,ua,n),Yo(this,sa,i||ia),Yo(this,oa,r||ia),Yo(this,aa,s||ia),Yo(this,la,o||t),Yo(this,da,na(Jo(this,la)).left),Yo(this,ca,"stopFix");const c=window.getComputedStyle(Jo(this,ra),null);Yo(this,ha,c.getPropertyValue("position")),Yo(this,pa,c.getPropertyValue("top")),Yo(this,fa,a),Yo(this,ga,d),Yo(this,ma,l||Jo(this,ga)),this.start=this.start.bind(this),this.setOffsets=this.setOffsets.bind(this),this.getOffsets=this.getOffsets.bind(this),this.started=!1,this.disable=ia}start(){if(this.started)return;const e=Ko(this,_a,Ca).bind(this),t=(0,S.FU)((()=>setTimeout(e)),200),n=Ko(this,wa,Ea).bind(this),i=(0,S.FU)(n,200);return this.disable=()=>{Jo(this,ua).call(this,"cancelling sticky",Jo(this,ra)),Yo(this,ca,"cancelled"),this.started=!1,Ko(this,ba,ka).call(this),document.removeEventListener("scroll",t),window.removeEventListener("resize",i)},this.disable.bind(this),document.addEventListener("scroll",t),window.addEventListener("resize",i),this.started=!0,this.disable}setOffsets(e){let{startStickyOffset:t,stopStickyOffset:n,stoppedPosition:i}=e;Yo(this,fa,t||Jo(this,fa)),Yo(this,ga,n||Jo(this,ga)),Yo(this,ma,i||Jo(this,ma)||Jo(this,ga)),Ko(this,_a,Ca).call(this)}getOffsets(){return{startStickyOffset:Jo(this,fa),stopStickyOffset:Jo(this,ga),stoppedPosition:Jo(this,ma)}}}function Ia(){Jo(this,ra).style.display="none",Jo(this,ra).classList.remove(ea),Jo(this,ra).classList.add(ta),Jo(this,ra).style.left=Jo(this,da)+"px",Jo(this,ra).style.position="fixed",Jo(this,ra).style.top="0",Yo(this,ca,"affix"),Jo(this,sa).call(this),setTimeout((()=>{Jo(this,ra).style.display="block"}))}function Sa(e){Jo(this,ra).style.display="none",Jo(this,ra).classList.remove(ta),Jo(this,ra).classList.add(ea),Jo(this,ra).style.left="auto",Jo(this,ra).style.position="absolute",Jo(this,ra).style.top=`${e}px`,Jo(this,aa).call(this),Yo(this,ca,"stopFix"),setTimeout((()=>{Jo(this,ra).style.display="block"}))}function ka(){Jo(this,ra).style.display="none",Jo(this,ra).classList.remove(ta),Jo(this,ra).classList.remove(ea),Jo(this,ra).style.left="auto",Jo(this,ra).style.position=Jo(this,ha),Jo(this,ra).style.top=Jo(this,pa),Yo(this,ca,"unfix"),Jo(this,oa).call(this),setTimeout((()=>{Jo(this,ra).style.display="block"}))}function Ca(){if("cancelled"===Jo(this,ca))return;const e=__webpack_require__.g.pageYOffset;Jo(this,ga)<e?"stopFix"!==Jo(this,ca)&&(Jo(this,ua).call(this,"stop stickiness"),Ko(this,va,Sa).call(this,Jo(this,ma))):Jo(this,fa)<e?"affix"!==Jo(this,ca)&&(Jo(this,ua).call(this,"enabling stickiness"),Ko(this,ya,Ia).call(this)):"unfix"!==Jo(this,ca)&&(Jo(this,ua).call(this,"reseting element"),Ko(this,ba,ka).call(this))}function Ea(){const e=na(Jo(this,la)).left;Jo(this,ua).call(this,"checkHorizontalPlacement triggered",Jo(this,ra).id,e),Yo(this,da,e),"fixed"===Jo(this,ra).style.position&&(Jo(this,ua).call(this,"checkHorizontalPlacement",e),Jo(this,ra).style.left=e+"px")}const Aa="billboard";(0,qe.fo)("sticky.billboard",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},init(e){let{log:t,getConfig:n,setConfig:i}=e;const r=n("sticky.billboard.secondary",{}),s=r.minPageHeight||900,o=(0,b.ap)().height>=s,a=r.enabled&&o,d=n("sticky.billboard.forceView",!1);if(!a||!d)return i("sticky.billboard.secondary.enabled",!1),void t(`bailing; secondaryEnabled: ${r.enabled}, minHeightForSecondaryMet: ${o}, forceViewEnabled: ${d}`);const l=n("adsRefresh",{slots:[],activeViewSlots:[]}),c=l.slots||[],u=c.filter((e=>e!==Aa)),p=l.activeViewSlots||[],h=p.filter((e=>{let{pos:t}=e;return t!==Aa}));i("adsRefresh",{...l,slots:u,activeViewSlots:h});const f=c.find((e=>e===Aa)),g=p.find((e=>{let{pos:t}=e;return t===Aa}));f?i("sticky.billboard.secondary",{...r,activeView:!1,refreshInterval:l.interval}):g&&i("sticky.billboard.secondary",{...r,activeView:!0,refreshInterval:g.interval}),t("Updated refresh config",n("adsRefresh")),t("stickyBillboard config",n("sticky.billboard"))},async run(e){var t;let{broker:n,getConfig:i,log:r}=e;const s=await n.until("ad rendered","billboard"),o=null==s||null===(t=s[0])||void 0===t||null===(t=t.slot)||void 0===t||null===(t=t.molAd)||void 0===t?void 0:t.parentId;r("billboard rendered, id:",o);const a=document.getElementById(o);if(!a)return;const d=b.s$?{log:r.extend("store"),element:a,startStickyOffset:(0,b.r7)(a).top}:{log:r.extend("store")};a.classList.remove("sticky");const l=function(e){let{log:t,element:n,startStickyOffset:i}=e;const r={closable:!1,refreshable:!0,refreshCount:0,sticky:!1},s=n&&i?{...r,affix:new Ta({element:n,relativeHorizontalElement:n.parentElement||void 0,onAffix:()=>n.setAttribute("stuck","stuck"),onUnfix:()=>n.removeAttribute("stuck"),log:t,startStickyOffset:i})}:r;return new Ns.Z(Ho,s,t)}(d);l.subscribe(((e,t)=>zo(n,e,t))),l.init(),async function(e){var t;let{broker:n,getConfig:i,store:r}=e;n.once("unstick position","billboard",(()=>{r.deinit()})),n.on("disable force view when viewed","billboard",(()=>{r.dispatch({type:"limit sticky height"})})),n.on("disable sticky position","billboard",(()=>{r.dispatch({type:"disable stickyness"})})),n.on("stop refreshing ads",(()=>{r.dispatch({type:"disable refresh"})})),n.on("ad rendered","billboard",(()=>{r.dispatch({type:"refresh"})})),null===(t=Fo())||void 0===t||t.addEventListener("click",(e=>{e.target instanceof HTMLElement&&e.target.classList.contains("billboard-close")&&r.dispatch({type:"click close button"})})),"sticky disabled"!==await async function(e){let{broker:t,getConfig:n,store:i}=e;const{forceView:r,timeAfterScroll:s=5e3,timeAfterVisible:o=3e3,minimumVisibilityPeriod:a=3e3}=n("sticky.billboard",{});if(!r)return;i.dispatch({type:"infinitly stick"});const d=await Vo({broker:t,timeAfterScroll:s,timeAfterVisible:o,minimumVisibilityPeriod:a,waitMinVisiblity:!0});return"sticky disabled"!==d&&i.dispatch({type:"limit sticky height"}),d}({broker:n,getConfig:i,store:r})&&"sticky disabled"!==await async function(e){let{broker:t,getConfig:n,store:i}=e;const{enabled:r,initialRefresh:s=5e3,refreshInterval:o,displayDuration:a=3e3,activeView:d=!0}=n("sticky.billboard.secondary",{});if(!r)return;const l=new Promise((async e=>{await t.until("disable sticky position","billboard"),e("sticky disabled")}));if("sticky disabled"===await Promise.race([(0,D.Vs)(s),l]))return"sticky disabled";if(!i.state.refreshable)return;if(o&&t.emit("setup ad refresh",{pos:"billboard",id:"billBoard",interval:o,activeViewSlot:d}),t.emit("prepare to refresh ads",["billboard"]),t.emit("refresh ads",{ids:["billBoard"],reason:"secondary",positions:["billboard"]}),"sticky disabled"===await Promise.race([t.until("ad rendered","billboard"),l]))return"sticky disabled";i.dispatch({type:"infinitly stick",closable:!0});const c=await Vo({broker:t,timeAfterScroll:a,timeAfterVisible:a});return"sticky disabled"!==c&&i.dispatch({type:"limit sticky height"}),c}({broker:n,getConfig:i,store:r})&&r.dispatch({type:"limit sticky height"})}({broker:n,getConfig:i,store:l})}}),(0,qe.fo)("sticky.gallery",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.sticky.gallery.ads",["sticky_banner_gallery_top","sticky_banner_gallery_bottom"]),s=n("slots.enabled",{}),o=Object.keys(s),a=r.filter((e=>o.includes(e)));if(!a.length)return void i("no gallery ads enabled... bailing");const d=n("slotDescriptions.initial",{}),l=(0,I.ei)(d,a);i("enabledAds",l);const c={};let u=null,p=null,h=null,f=null,g=null,m=null;const y={sticky_banner_gallery_top:e=>{p.style.top=`${e.height}px`},sticky_banner_gallery_bottom:e=>{h.style.bottom=`${e.height}px`,g.style.bottom=`${e.height+f.height}px`}},v=e=>{const t={width:["left","right"],height:["top","bottom"]},n="width"===e?0:1,i=Object.keys(l).filter((n=>n.includes(t[e][0])||n.includes(t[e][1])));if(i.length)return i.map((e=>{if(l[e].size.length)return 1===l[e].size.length?l[e].size[0][n]:l[e].size.reduce(((e,t)=>t[n]>e[n]?t[n]:e[n]))})).reduce(((e,t)=>t>e?t:e))},b=()=>{i("Gallery openned"),(()=>{const e=v("width"),t=v("height"),{innerWidth:n,innerHeight:i}=window,r=e?n-2*(e+Da):n,s=t?i-2*t:i;Array.from(document.querySelectorAll("#mobileGallerySwipeWrap > div > div:first-child")).filter((e=>e.firstElementChild)).map((e=>e.firstElementChild)).forEach((e=>{const t=xa(e);let n=Math.min(s/t.height,r/t.width);e.classList.contains(".vjs-video-container")&&s<r&&(n*=.78),e.style.transform=`scale(${n})`}))})(),Object.entries(l).forEach((e=>{let[n,r]=e;const s=(0,I.ei)(r,["pos","id"]);i("creating gallery ad",s),c[n]={container:Pa({broker:t,rootElement:u,ad:s})},y[n]&&y[n](xa(c[n].container)),MobileUtils.isMobile()&&(n.includes("top")&&(c[n].addEl=p),n.includes("bottom")&&(c[n].addEl=h))})),m=t.on("ad rendered",(e=>{const t=c[e]&&c[e].container.querySelector(".placeholder");t&&t.remove()}))},_=()=>{m.cancel(),MobileUtils.isMobile()&&MobileUtils.isLandscape()&&(p.style.top="0",h.style.bottom="0",g.style.bottom=`${f.height}px`),Object.entries(c).forEach((e=>{let[n,i]=e;i.container.remove(),t.emit("destroy slot",n)}))};MobileUtils.isMobile()&&window.addEventListener("orientationchange",(()=>{setTimeout((()=>{MobileUtils.isLandscape()?_():b()}),200)})),t.on("dom ready",(()=>{const e=document.getElementById("mobileGalleryModal");e&&(DM.pageEvents.subscribe("gallery.opened",b),DM.pageEvents.subscribe("gallery.closed",_),u=document.getElementById("mobileGallerySlider"),p=e.querySelector(".top-bar"),h=e.querySelector(".navigation-bar"),f=xa(h),g=e.querySelector(".caption-bar"))}))},disableIfNoAdsServable:!0});const Pa=e=>{let{broker:t,rootElement:n=document.body,ad:i,className:r,cssText:s}=e;const o=document.createElement("div");o.id=i.pos;const a=document.createElement("div");return a.className="placeholder",o.appendChild(a),r&&(o.className=r),s&&(o.style.cssText=s),n.appendChild(o),t.emit("slot mounted",i),o},xa=e=>{const t=getComputedStyle(e,"");return{width:(parseFloat(t.width)||0)+(parseFloat(t.borderLeftWidth)||0)+(parseFloat(t.borderRightWidth)||0),height:(parseFloat(t.height)||0)+(parseFloat(t.borderTopWidth)||0)+(parseFloat(t.borderBottomWidth)||0)}},Da=20;function Oa(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function Ra(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ma(e,t,"get"))}function Na(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ma(e,t,"set"),n),n}function Ma(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}(0,qe.fo)("sticky.mpuLeft",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run:async function(e){let{broker:t,log:n,getConfig:i}=e;n("init");const r=i("slots.enabled",{});if(!Object.keys(r).includes("mpu_left"))return void n("mpu_left isn't enabled, bailing");const s=i("slotDescriptions.initial",{}),o=s.mpu_left;if(!o||(0,I.xb)(o))return void n("insufficient config to render mpu_left... bailing",o);const a=new Promise((e=>{t.on("slot defined",(t=>{let{pos:n}=t;n.includes("sky_left_top")&&e()}))}));n("waiting for let sky container"),await a;const d=document.getElementById(s.sky_left_top.id);if(!d)return void n.error("no sky left element, bailing");const l=document.createElement("div");l.id=o.id,(0,Se.insertAfter)(l,d);const c={...o};t.emit("slot mounted",c),n("slot created",c,l),document.documentElement.classList.add("mpu_left_on"),await t.until("ad rendered","mpu_left"),n("slot rendered")}}),(0,qe.fo)("sticky.psuedoClasses",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},async run(){await(0,Se.loaded)();const e=new Va(za),t=document.querySelectorAll(".sticky");for(const n of t)e.observe(n);const n=new MutationObserver((t=>function(e,t){for(const i of t){const t=i.target;t instanceof HTMLElement&&((n=t)instanceof Element&&n.classList.contains("sticky")?e.observe(t):e.unobserve(t))}var n}(e,t)));n.observe(document.body,{attributeFilter:["class"],attributes:!0,subtree:!0})}});var La=new WeakMap,Ua=new WeakMap,ja=new WeakMap,Ba=new WeakMap,qa=new WeakMap,Fa=new WeakMap;class Va{constructor(e){Oa(this,La,{writable:!0,value:[]}),Oa(this,Ua,{writable:!0,value:[]}),Oa(this,ja,{writable:!0,value:void 0}),Oa(this,Ba,{writable:!0,value:e=>!Ra(this,Ua).includes(e)&&(0,Se.getOffset)(e).top<=window.scrollY}),Oa(this,qa,{writable:!0,value:e=>(0,Se.getOffset)(e).top>window.scrollY}),Oa(this,Fa,{writable:!0,value:()=>{const e=Ra(this,La).filter(Ra(this,Ba)),t=Ra(this,Ua).filter(Ra(this,qa));Ra(this,Ua).push(...e),Na(this,Ua,Ra(this,Ua).filter((e=>!t.includes(e)))),(e.length||t.length)&&Ra(this,ja).call(this,{in:e,out:t})}}),Na(this,ja,e),window.addEventListener("scroll",(0,S.FU)(Ra(this,Fa),300),{passive:!0})}observe(e){Ra(this,La).includes(e)||Ra(this,La).push(e)}unobserve(e){Na(this,La,(0,q.cl)(e,Ra(this,La)))}}function za(e){for(const t of e.in)t.setAttribute("stuck","stuck");for(const t of e.out)t.removeAttribute("stuck")}const $a=(e,t)=>{const n=e+"on",i=e+"off",r=document.documentElement;r.classList.remove(n),r.classList.remove(i),r.classList.add(t?n:i)};(0,qe.fo)("sticky.skies",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run:async function(e){let{broker:t,getConfig:n,log:i}=e;if(window.getComputedStyle){try{Ha(t)}catch(e){i("Missing configuration for leaderboard")}Wa(n("stickyAds",[]),t,i),await async function(){var e;await(0,Se.loaded)();const t=document.querySelector(".puff li:nth-child(20)"),n=t?null===(e=(0,Se.getOffset)(t))||void 0===e?void 0:e.top:5e3,i=Array.from(document.querySelectorAll("\n    #sky-left-container .sticky-container:first-child,\n    #sky-right-container .sticky-container:first-child\n  "));for(const e of i){var r,s,o;null!=e&&null!==(r=e.parentNode)&&void 0!==r&&null!==(s=(o=r).querySelectorAll)&&void 0!==s&&null!==(s=s.call(o,".sticky-container"))&&void 0!==s&&s.length&&(e.style.height=`${n}px`)}}()}}});const Ha=e=>{const t="molads_leader_top_";if($a(t,!1),(0,W.isAdEnabled)({pos:"leader_top"})){const n=e.on("ad rendered","leader_top",(e=>{"leader_top"===(e.slot?e.slot.molAd:{}).parentId&&(n.cancel(),$a(t,!e.isEmpty))}))}},Wa=(e,t,n)=>{e.forEach((e=>{/mpu_puff_\d{2,}/.test(e)&&((e,t,n)=>{if((0,W.isAdEnabled)({pos:e})){n("init sliding mpu",e);const i=t.on("ad rendered",e,(t=>{if(!t.isEmpty&&(!(r=t)||r.isEmpty||!r.size||2!==r.size.length||300!==r.size[0]||600!==r.size[1])){i.cancel();const t=document.getElementById(e);if(t){const e=(0,Se.closest)(t,(e=>e.classList.contains("mpu_puff_wrapper")));e&&(e.classList.add("sliding_mpu"),((e,t,n)=>{n(e.id);const i=((e,t)=>{var n;const i=window.getComputedStyle(t,null),r=null===(n=(0,Se.getOffset)(t))||void 0===n?void 0:n.top,s=parseInt(i.getPropertyValue("height")),o=r+s,a=window.getComputedStyle(e,null),d=parseInt(a.getPropertyValue("height"));if(!e.dataset.originalPadding){const t=(0,Se.getOffset)(e).top-r;t<0&&console.warn("negative padding"),e.dataset.originalPadding=Math.max(t,0).toString()}return{elementTop:r+parseInt(e.dataset.originalPadding),parentBottom:o,parentHeight:s,elementHeight:d,parentTop:r,marginBottom:parseInt(i.getPropertyValue("margin-bottom"))}})(e,t),r=i.elementTop,s=i.parentBottom-i.elementHeight;new Ta({element:e,startStickyOffset:r,stopStickyOffset:s,log:n.extend(e.id),relativeHorizontalElement:t,onAffix:()=>{e.style.bottom="",e.style.left=t.getBoundingClientRect().left+"px"},onStopfix:()=>{e.style.top="",e.style.bottom="0"}}).start()})(t,e,n))}}var r}))}})(e,t,n)}))},Za=e=>{let{broker:t,getPuffListStart:n,getOffElement:i,pos:r,id:s=r}=e;const o=t.on("ad rendered",r,(e=>{if(!e.isEmpty){o.cancel();const e=document.getElementById(s);if(!e)return;((e,t,n)=>{const i=e.parentNode,r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.parentNode;const n=getComputedStyle(t,null),i=(0,Se.getOffset)(t).top,r=parseInt(n.getPropertyValue("height")),s=i+r,o=getComputedStyle(e,null),a=parseInt(o.getPropertyValue("height"));if(!e.dataset.originalPadding){const t=(0,Se.getOffset)(e).top-i;t<0&&console.warn("negative padding"),e.dataset.originalPadding=Math.max(t,0)}return{elementTop:i+parseInt(e.dataset.originalPadding),parentBottom:s,parentHeight:r,elementHeight:a,parentTop:i,marginBottom:parseInt(n.getPropertyValue("margin-bottom")),marginTop:parseInt(o.getPropertyValue("margin-top"))}}(e,i),s=r.elementTop,o=(()=>{const i=t&&t()||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.parentNode;return(0,Se.walk)(t,(e=>e.classList.contains("mpu_puff_wrapper")&&e.querySelector("iframe")),(e=>e.nextElementSibling))}(e,n);return i?((e,t)=>{const n=e.previousElementSibling,i=getComputedStyle(n,null);return(0,Se.getOffset)(n).top+parseInt(i.getPropertyValue("height"))-t})(i,r.elementHeight):1/0})(),a=o===1/0?o:(()=>{const e=(0,Se.getRelativeContainer)(i);return e?o-(0,Se.getOffset)(e).top:o})();i.style.height=r.parentHeight+"px",i.style.marginTop=r.marginTop+"px",new Ta({element:e,log:()=>{},relativeHorizontalElement:i,startStickyOffset:s,stopStickyOffset:o,stoppedPosition:a}).start()})(e,i,n(e))}}))};function Ga(e){let{broker:t,getConfig:n,log:i}=e;if(!window.getComputedStyle)return;const r=n("stickyAds",[]);r.includes("mpu_puff_5")&&Za({broker:t,pos:"mpu_puff_5",getPuffListStart:e=>(0,Se.getParent)(e,".item")}),r.includes("mpu_top")&&Za({broker:t,pos:"mpu_top",getPuffListStart:e=>{const t=(0,Se.getParent)(e,".item"),n=(0,Se.walk)(t,(e=>e.querySelector(".puff")),(e=>e.nextElementSibling));return n?n.querySelector(".puff li"):t}})}Ga.ccpa={enabledIfDissent:!0},Ga.gdpr={enabledIfDissent:!0},Ga.disableIfNoAdsServable=!0;var Xa=__webpack_require__(6095);const Ka=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new Promise((t=>__webpack_require__.g.__tcfapi(e,2,(function(){return t(...arguments)}),...n)))};let Ja=()=>()=>{},Ya=(e,t)=>"function"==typeof t?t():t;if(performance.mark&&performance.measure){let e=0;Ja=t=>{const n="benchmark-"+e++;return performance.mark(`${n}-begin`),()=>{performance.mark(`${n}-end`),performance.measure(t,`${n}-begin`,`${n}-end`)}},Ya=(e,t)=>{const n=Ja(e);try{return"function"==typeof t.then?(t.then(n),t):t()}finally{n()}}}var Qa=__webpack_require__(4275).Buffer;function ed(e,t,n){return parseInt(e.substr(t,n),2)}function td(e){const t=ed(e);return String.fromCharCode(t+65).toLowerCase()}function nd(e,t,n){const i=e.substr(t,n);return td(i.slice(0,n/2))+td(i.slice(n/2))}function id(e){let t=e;for(;t.length%4!=0;)t+="=";t=t.replace(/-/g,"+").replace(/_/g,"/");const n=Qa.from(t,"base64");let i="";for(let e=0;e<n.length;e+=1){const t=n[e].toString(2);i+=(r=t,s=8-t.length,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",n="";for(let i=0;i<e;i+=1)n+=t;return n}(Math.max(0,s))+r)}var r,s;return function(e){const{decodedObject:t}=function(e){let{input:t,fields:n,startPosition:i=0}=e,r=i;const s=n.reduce(((e,n)=>{const{name:i,numBits:s}=n,{fieldValue:o,newPosition:a}=function(e){let{input:t,output:n,startPosition:i,field:r}=e;const{type:s,numBits:o,decoder:a,validator:d}=r;if("function"==typeof d&&!d(n))return{newPosition:i};if("function"==typeof a)return a(t,n,i);const l="function"==typeof o?o(n):o;switch(s){case"int":return{fieldValue:ed(t,i,l)};case"date":return{fieldValue:(c=t,u=i,p=l,new Date(100*ed(c,u,p)))};case"bits":return{fieldValue:t.substr(i,l)};case"language":return{fieldValue:nd(t,i,l)};default:throw new Error(`ConsentString - Unknown field type ${s} for decoding`)}var c,u,p}({input:t,output:e,startPosition:r,field:n});return void 0!==o&&(e[i]=o),void 0!==a?r=a:"number"==typeof s&&(r+=s),e}),{});return{decodedObject:s,newPosition:r}}({input:e,fields:[{name:"version",type:"int",numBits:6},{name:"created",type:"date",numBits:36},{name:"lastUpdated",type:"date",numBits:36},{name:"cmpId",type:"int",numBits:12},{name:"cmpVersion",type:"int",numBits:12},{name:"consentScreen",type:"int",numBits:6},{name:"consentLanguage",type:"language",numBits:12},{name:"vendorListVersion",type:"int",numBits:12},{name:"purposeIdBitString",type:"bits",numBits:24},{name:"maxVendorId",type:"int",numBits:16}]});return t}(i)}function rd(e,t){ad(e,t),t.add(e)}function sd(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function od(e,t,n){ad(e,t),t.set(e,n)}function ad(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function dd(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function ld(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ud(e,t,"get"))}function cd(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,ud(e,t,"set"),n),n}function ud(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var pd=new WeakMap,hd=new WeakMap,fd=new WeakMap,gd=new WeakMap,md=new WeakMap,yd=new WeakSet,vd=new WeakSet,bd=new WeakSet,_d=new WeakSet;class wd{constructor(e){rd(this,_d),rd(this,bd),rd(this,vd),rd(this,yd),od(this,pd,{writable:!0,value:void 0}),od(this,hd,{writable:!0,value:void 0}),od(this,fd,{writable:!0,value:void 0}),sd(this,"brokerId",void 0),od(this,gd,{writable:!0,value:void 0}),sd(this,"context",void 0),sd(this,"tcfv2Version",void 0),sd(this,"tcfv2UiVersion",void 0),od(this,md,{writable:!0,value:void 0});const{getConfig:t,log:n,broker:i,showUi:r,uiLevel:s="Level1",renderPlatform:o,repromptVersion:a,nextRepromptVersion:d,tracking:l,tcString:c,addtlConsent:u,nrvString:p,nrvVersion:h,geo:f,useGeoDeviceVariantGVL:g,cmpModel:m}=e;this.context=e,cd(this,hd,n),cd(this,pd,i),this.tcfv2Version=t("tcfv2.version",""),this.tcfv2UiVersion=t("tcfv2.uiVersion",""),this.brokerId=Math.random().toString(36).substring(2),cd(this,md,"@mol-ads/mol-adverts");const y=t("tcfv2.uiScriptBase","//www.dailymail.co.uk/static/mol-fe/static/mol-fe-cmp"),v=`${t("tcfv2.gvlUiVersion","51")}`,b=t("tcfv2.cvlUiVersion","1"),_=t("tcfv2.backendUrl","//cmp.dmgprivacyint.co.uk/gdpr/consent/persist"),w=t("tcfv2.uiFile","index.js"),T=t("tcfv2.brand",{}),I=`${y}/${this.tcfv2UiVersion}/${w}`,S=t("tcfv2.storeUserPreference",!1),k=t("tcfv2.scriptBase","//cmp.dmgmediaprivacy.co.uk/cmp"),C=t("tcfv2.nrvUiVersion","1"),E=e.cvlVersion||t("tcfv2.cvlUiVersion","1");cd(this,fd,`${k}/${this.tcfv2Version}/index.js`);const A=c&&id(c)||void 0,P=(null==A?void 0:A.vendorListVersion)||`${t("tcfv2.gvlUiVersion","51")}`;this.consentStringLastUpdated=(null==A?void 0:A.lastUpdated)&&new Date(A.lastUpdated),cd(this,gd,{brand:T,brokerId:this.brokerId,gvlEnvironment:"web",repromptVersion:a,nextRepromptVersion:d,gvlVersion:P,gvlUiVersion:v,cvlVersion:E,cvlUiVersion:b,showUi:r,uiLevel:s,uiScriptUrl:I,controllerScriptBase:`${k}/${this.tcfv2Version}`,tcString:c,addtlConsent:u,storeUserPreference:S,backendUrl:_,renderPlatform:o,platform:"web",nrvString:p,nrvVersion:h,nrvUiVersion:C,useGeoDeviceVariantGVL:g,molGvlVersion:e.molGvlVersion,geo:f,cmpModel:m}),__webpack_require__.g.addEventListener("message",(async e=>{const t=e.data;"@mol-ads/mol-ads-cmp"===t.ns&&t.id===this.brokerId&&"is_ready"===t.action&&t.sender!==ld(this,md)&&ld(this,pd).emit("TCFV2 controller ready"),"@mol-ads/mol-ads-cmp"===t.ns&&t.id===this.brokerId&&"level_changed"===t.action&&t.sender!==ld(this,md)&&this.tracking.track({type:"custom",payload:{changed:!0,event:"ui-open",level:t.payload.currentLevel,module:"tcfv2"}})})),this.openUi=this.openUi.bind(this),this.tracking=l,ld(this,pd).on("plugins enabled",(()=>{dd(this,bd,Sd).call(this,"ads-initialised")}))}loadController(){ld(this,hd).call(this,"loading controller..");const e=ld(this,gd).showUi?dd(this,_d,kd).call(this):void 0;return ld(this,gd).uuid=e,Promise.all([Ya("wait for external deps",dd(this,yd,Td).call(this))]).then((async()=>{ld(this,hd).call(this,"loading controller from:",ld(this,fd)),await Ya("tcfv2 controller load",dd(this,vd,Id).call(this,ld(this,fd),ld(this,gd))),ld(this,hd).call(this,"controller loaded")}))}openUi(e){let{reason:t,uiLevel:n}=e;const i=dd(this,_d,kd).call(this);ld(this,hd).call(this,`opening tcfv2 banner, level: ${n}, reason: ${t}`),this.tracking.track({type:"custom",payload:{event:"ui-open",level:n,module:"tcfv2",reason:t}}),dd(this,bd,Sd).call(this,"open",{uiLevel:n,uuid:i})}consentToAll(){ld(this,hd).call(this,"consenting to all"),dd(this,bd,Sd).call(this,"consentToAll",{uuid:dd(this,_d,kd).call(this)})}dissentToAll(){dd(this,bd,Sd).call(this,"dissentToAll",{uuid:dd(this,_d,kd).call(this)})}}function Td(){const{getConfig:e}=this.context;return new Promise((t=>{var n;"mol"===e("site")?(ld(this,hd).call(this,"awaiting for molFeReact_LOADED"),null===(n=__webpack_require__.g)||void 0===n||n.DM.later(["molFeReact_LOADED"],(()=>{ld(this,hd).call(this,"molFeReact_LOADED ready"),t()}))):t()}))}function Id(e,t){return new Promise(((n,i)=>{const r=document.createElement("script");r.src=e,r.id="mol-ads-tcfv2-script",r.dataset.opts=JSON.stringify(t),r.onload=()=>n(),r.onerror=()=>i(new Error(`Error loading ${e}`)),document.head.appendChild(r)}))}function Sd(e,t){const n={ns:"@mol-ads/mol-ads-cmp",id:this.brokerId,sender:ld(this,md)},i=t?{...n,action:e,payload:t}:{...n,action:e};window.postMessage(i,"*")}function kd(){const{storage:e}=this.context;let t=e.getUuid();return t||(t=(0,Qs.Z)(),e.setUuid(t)),t}function Cd(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ed(e,t,"get"))}function Ed(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Ad=new WeakMap;class Pd{constructor(e){let{getConfig:t,localStorage:n=__webpack_require__.g.localStorage}=e;var i,r;(function(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)})(this,Ad,{writable:!0,value:void 0}),r=n,function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(i=this,Ed(i,Ad,"set"),r);const s=t("tcfv2.storagePrefix","mol.ads");this.CONSENT_KEY=`${s}.cmp.tcf.client`,this.USER_CONSENT_DEGREE_KEY=`${s}.cmp.userConsentDegree`,this.GVL_VERSION_KEY=`${s}.cmp.tcf.gvlVersion`,this.UUID_KEY=`${s}.tcfv2.uuid`,this.TCFV1_CONSENT_FLAG_KEY=`${s}.cmp.consent`,this.TCFV1_CONSENT_STRING_KEY="euconsent",this.TCDATA_KEY=`${s}.cmp.tcf.cache`,this.TCFV2_REPROMPT=`${s}.cmp.tcfv2.reprompt`,this.TCFV2_LAST_REPROMPTED=`${s}.cmp.tcfv2.lastReprompted`,this.GVL_GEO_MIGRATION_STATUS_KEY="mol.ads.cmp.tcfv2.gvlGeoMigrationStatus"}getConsent(){return Cd(this,Ad).getItem(this.CONSENT_KEY)}setConsent(e){Cd(this,Ad).setItem(this.CONSENT_KEY,e)}getConsentDegree(){return JSON.parse(Cd(this,Ad).getItem(this.TCDATA_KEY)||"{}").getConsentDegree}setConsentDegree(e){Cd(this,Ad).setItem(this.USER_CONSENT_DEGREE_KEY,e)}setLastReprompted(e){Cd(this,Ad).setItem(this.TCFV2_LAST_REPROMPTED,JSON.stringify(e))}getVendorListVersion(){return Cd(this,Ad).getItem(this.GVL_VERSION_KEY)}setVendorListVersion(e){Cd(this,Ad).setItem(this.GVL_VERSION_KEY,e)}setRepromptVersion(e){Cd(this,Ad).setItem(this.TCFV2_REPROMPT,JSON.stringify(e))}getUuid(){return Cd(this,Ad).getItem(this.UUID_KEY)}setUuid(e){Cd(this,Ad).setItem(this.UUID_KEY,e)}getTcfv1ConsentFlag(){return Cd(this,Ad).getItem(this.TCFV1_CONSENT_FLAG_KEY)}getTcfv1ConsentString(){return Cd(this,Ad).getItem(this.TCFV1_CONSENT_STRING_KEY)}getTCData(){const e=JSON.parse(Cd(this,Ad).getItem(this.TCDATA_KEY)||"{}");return e&&e.getTCData||{}}getRepromptVersion(){let e;try{const t=Cd(this,Ad).getItem(this.TCFV2_REPROMPT);t&&(e=JSON.parse(t))}catch(e){console.error("unabled to parse repromptVersion")}return e||{version:0,chance:Math.random()}}getLastReprompted(){return JSON.parse(Cd(this,Ad).getItem(this.TCFV2_LAST_REPROMPTED)||"{}")}getGVLGeoMigrationStatus(){return JSON.parse(Cd(this,Ad).getItem(this.GVL_GEO_MIGRATION_STATUS_KEY)||"{}")}setGVLGeoMigrationStatus(e){Cd(this,Ad).setItem(this.GVL_GEO_MIGRATION_STATUS_KEY,JSON.stringify(e))}removeGVLGeoMigrationStatus(){Cd(this,Ad).removeItem(this.GVL_GEO_MIGRATION_STATUS_KEY)}cleanup(){["mol.ads.cmp.customVendors"].forEach((e=>{Cd(this,Ad).removeItem(e)}))}clearTcfV2(){[this.CONSENT_KEY,this.USER_CONSENT_DEGREE_KEY,this.GVL_VERSION_KEY,this.TCFV2_REPROMPT,this.UUID_KEY,this.TCFV2_LAST_REPROMPTED].forEach((e=>Cd(this,Ad).removeItem(e)))}}class xd{constructor(e){this.context=e}async setup(){const{validTCDataP:e,registerPluginBouncer:t,log:n}=this.context,i=await e,r=new Set(await Ka("consentedVendors")),s=i.addtlConsent&&new Set(i.addtlConsent.substring(2).split(".").filter((e=>e)).map((e=>parseInt(e))));s&&n("using addtlConsent for bouncing"),this.context={...this.context,tcData:i,vendorConsents:r,addtlConsent:s},t(((e,t)=>{var i;const r=n.extend(e);r("running bouncer");const s=(null==t||null===(i=t.gdpr)||void 0===i?void 0:i.enabledIfDissent)||this.checkVendorIds(e,t)&&this.checkPurposeIds(e,t)&&this.checkGoogleAdditionalConsentVendorIds(e,t)&&this.checkLegIntPurposeIds(e,t);return r(`passed checks: ${s}`),s}))}checkVendorIds(e,t){const{log:n,vendorConsents:i}=this.context;if(!t.vendorIds||void 0===t.vendorIds.gdpr)return n("no vendorIds or gdpr defined"),!1;if(!1===t.vendorIds.gdpr)return n("plugin",e,"bounced because it is not supported where GDPR applies"),!1;if("N/A"===t.vendorIds.gdpr)return n("restrictions not applicable"),!0;if(!Array.isArray(t.vendorIds.gdpr))return n.warn("gdpr vendorIds must be an array, but got:",t.vendorIds.gdpr),!1;const r=t.vendorIds.gdpr.filter((e=>!i.has(e)));return!r.length||(n("plugin",e,"bounced because user have not consented to vendors:",r),!1)}checkPurposeIds(e,t){const{log:n,tcData:i}=this.context;if(!t.purposeIds||void 0===t.purposeIds.gdpr)return n("no purposesIds or gdpr defined"),!1;if("N/A"===t.purposeIds.gdpr)return n("restrictions not applicable"),!0;if(!Array.isArray(t.purposeIds.gdpr))return n.warn("gdpr purposeIds must be an array, but got:",t.purposeIds.gdpr),!1;const r=t.purposeIds.gdpr.filter((e=>!i.purpose.consents[e]));return!r.length||(n("plugin",e,"bounced because user have not consented to purposes:",r),!1)}checkLegIntPurposeIds(e,t){const{log:n,tcData:i}=this.context;if(!t.legIntPurposeIds||void 0===t.legIntPurposeIds.gdpr)return!0;if(!Array.isArray(t.legIntPurposeIds.gdpr))return n.warn("gdprPurposeIds must be an array, but got:",t.purposeIds.gdpr),!1;const r=t.legIntPurposeIds.gdpr.filter((e=>!i.purpose.legitimateInterests[e]));return!r.length||(n("plugin",e,"bounced because user have not consented to legitimate interests:",r),!1)}checkGoogleAdditionalConsentVendorIds(e,t){if(!t.vendorIds||void 0===t.vendorIds.google)return!0;const{addtlConsent:n,log:i}=this.context,r=t.vendorIds.google.filter((e=>!n.has(e)));return!r.length||(i("plugin",e,"bounced because user have not consented to google's additional consent:",r),!1)}}const Dd={yes:"true",no:"false",partial:"custom"};var Od=__webpack_require__(4666);function Rd(e,t){Md(e,t),t.add(e)}function Nd(e,t,n){Md(e,t),t.set(e,n)}function Md(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ld(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Bd(e,t,"get"))}function Ud(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function jd(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Bd(e,t,"set"),n),n}function Bd(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var qd=new WeakMap,Fd=new WeakMap,Vd=new WeakMap,zd=new WeakMap,$d=new WeakMap,Hd=new WeakSet,Wd=new WeakSet;class Zd{constructor(e){let{account:t,broker:n,log:i,storage:r}=e;Rd(this,Wd),Rd(this,Hd),Nd(this,qd,{writable:!0,value:void 0}),Nd(this,Fd,{writable:!0,value:void 0}),Nd(this,Vd,{writable:!0,value:void 0}),Nd(this,zd,{writable:!0,value:void 0}),Nd(this,$d,{writable:!0,value:void 0}),jd(this,qd,t),jd(this,Vd,i),jd(this,Fd,n),jd(this,zd,r),jd(this,$d,Ud(this,Hd,Gd)),this.init=this.init.bind(this)}init(){Ld(this,Fd).once("system ready",(()=>{jd(this,$d,Ud(this,Wd,Xd))}))}track(e){Ld(this,$d).call(this,e)}}function Gd(e){const t={account:Ld(this,qd),...e};Ld(this,Vd).call(this,"sending to bidmax using barebones",t),(0,Od.H)(t)}function Xd(e){const t={...e,payload:{validConsent:Ld(this,zd).getConsentDegree()||void 0,...e.payload}};Ld(this,Vd).call(this,"sending event to bidmax",t),Ld(this,Fd).emit("send event to bidmax",t)}function Kd(e,t,n){Jd(e,t),t.set(e,n)}function Jd(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Yd(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function Qd(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,tl(e,t,"get"))}function el(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,tl(e,t,"set"),n),n}function tl(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var nl=new WeakMap,il=new WeakMap,rl=new WeakMap,sl=new WeakMap,ol=new WeakMap,al=new WeakMap,dl=new WeakMap,ll=new WeakMap,cl=new WeakMap,ul=new WeakMap,pl=new WeakMap,hl=new WeakMap,fl=new WeakMap,gl=new WeakSet;class ml{constructor(e){let{log:t,openUi:n,pageUnload:i,storage:r,tracking:s,userRepromptUpdate:o,debugRepromptData:a,openBarrier:d,stubConsent:l,stubDissent:c,controllerHandler:u,gvlGeoMigration:p}=e;!function(e,t){Jd(e,t),t.add(e)}(this,gl),Kd(this,nl,{writable:!0,value:void 0}),Kd(this,il,{writable:!0,value:void 0}),Kd(this,rl,{writable:!0,value:void 0}),Kd(this,sl,{writable:!0,value:void 0}),Kd(this,ol,{writable:!0,value:void 0}),Kd(this,al,{writable:!0,value:void 0}),Kd(this,dl,{writable:!0,value:void 0}),Kd(this,ll,{writable:!0,value:void 0}),Kd(this,cl,{writable:!0,value:void 0}),Kd(this,ul,{writable:!0,value:void 0}),Kd(this,pl,{writable:!0,value:void 0}),Kd(this,hl,{writable:!0,value:void 0}),Kd(this,fl,{writable:!0,value:void 0}),el(this,il,i),el(this,nl,s),el(this,rl,t),el(this,ol,n),el(this,al,r),el(this,sl,{bannerOpenedReason:"unknown",refreshOnClose:!1}),el(this,dl,o),el(this,ll,a),el(this,cl,d),Qd(this,rl).call(this,"userRepromptUpdate",o),el(this,ul,l),el(this,pl,c),el(this,hl,u),el(this,fl,p)}async handleAction(e,t){const{openRequest:n,tcData:i}=t;switch(e){case"uiOpened":Qd(this,nl).track({type:"custom",payload:{event:"ui-opened",module:"tcfv2",reason:Qd(this,sl).bannerOpenedReason}}),(e=>!!e.tcString.length)(i)&&(Qd(this,rl).call(this,"ui displayed for existing user"),Qd(this,sl).refreshOnClose=!0),Qd(this,il).updatePageUnloadData("tcfv2",{status:`${e}`}),Qd(this,ul)?(Qd(this,hl).consentToAll(),Qd(this,nl).track({type:"custom",payload:{event:"stubConsent",module:"tcfv2"}})):Qd(this,pl)&&(Qd(this,hl).dissentToAll(),Qd(this,nl).track({type:"custom",payload:{event:"stubDissent",module:"tcfv2"}}));break;case"newUser":Qd(this,rl).call(this,"opening UI for new user:",i.eventStatus),Qd(this,sl).bannerOpenedReason="newUser",Qd(this,ol).call(this,{uiLevel:"Level1",reason:Qd(this,sl).bannerOpenedReason}),Qd(this,il).updatePageUnloadData("tcfv2",{status:`${e}`});break;case"tcStringExpired":Qd(this,rl).call(this,"opening UI as tcString expired"),Qd(this,sl).bannerOpenedReason="tcStringExpired",Qd(this,ol).call(this,{uiLevel:"Level1",reason:Qd(this,sl).bannerOpenedReason}),Qd(this,il).updatePageUnloadData("tcfv2",{status:`${e}`});break;case"repromptUser":Qd(this,rl).call(this,"opening UI due to reprompt"),Qd(this,sl).bannerOpenedReason="reprompt",Qd(this,ol).call(this,{uiLevel:"Level1",reason:Qd(this,sl).bannerOpenedReason}),Qd(this,il).updatePageUnloadData("tcfv2",{status:`${e}`});break;case"loaded":Qd(this,rl).call(this,"tcf loaded"),Qd(this,nl).track({type:"custom",payload:{event:"loaded",module:"tcfv2"}}),await Yd(this,gl,yl).call(this,i),Qd(this,fl).tcDataLoaded(i),Qd(this,il).updatePageUnloadData("tcfv2",{status:"loaded"}),Qd(this,cl).call(this);break;case"uiClosed":if(Qd(this,rl).call(this,"uiClosed"),await Yd(this,gl,yl).call(this,i),Qd(this,fl).uiClosed(i),"reprompt"===Qd(this,sl).bannerOpenedReason){const e=Qd(this,al).getTCData().repromptVersion,t=Qd(this,al).getLastReprompted();(null==t?void 0:t.version)===i.repromptVersion&&(Qd(this,nl).track({type:"custom",payload:{daysSinceReprompt:Math.floor((Date.now()-t.date)/864e5),event:"reprompt-error",lastRepromptVersion:t.version,jounery:Qd(this,il).getPageUnloadData("tcfv2"),module:"tcfv2",onClosedStoredTCDataVersion:e,tcDataRepromptVersion:i.repromptVersion,...Qd(this,ll)}}),Qd(this,il).updatePageUnloadData("tcfv2",{status:"error"})),Qd(this,al).setLastReprompted({date:Date.now(),version:i.repromptVersion})}Qd(this,nl).track({type:"custom",payload:{event:"ui-closed",module:"tcfv2",reason:Qd(this,sl).bannerOpenedReason}}),Qd(this,il).updatePageUnloadData("tcfv2",{status:`${e}`}),Qd(this,sl).bannerOpenedReason="unknown",Qd(this,cl).call(this);break;case"cached":Qd(this,rl).call(this,"cached tcData, ignoring");break;case"openRequest":Qd(this,sl).bannerOpenedReason=n.reason,Qd(this,il).updatePageUnloadData("tcfv2",{status:`${e}-${n.reason}`});break;default:await Yd(this,gl,yl).call(this,i)}}}async function yl(e){const t=(null==e?void 0:e.repromptVersion)||0;Qd(this,al).setRepromptVersion({...Qd(this,dl),version:t}),await __webpack_require__.g.adverts.updateCache(e,Qd(this,rl)),Qd(this,rl).call(this,"storage update complete")}function vl(e,t,n){bl(e,t),t.set(e,n)}function bl(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _l(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Tl(e,t,"get"))}function wl(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Tl(e,t,"set"),n),n}function Tl(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const Il={capture:!0,passive:!0},Sl=["pagehide","beforeunload","unload"];var kl=new WeakMap,Cl=new WeakMap,El=new WeakMap,Al=new WeakMap,Pl=new WeakMap,xl=new WeakSet;class Dl{constructor(e){let{broker:t,log:n,tracking:i}=e;!function(e,t){bl(e,t),t.add(e)}(this,xl),vl(this,kl,{writable:!0,value:void 0}),vl(this,Cl,{writable:!0,value:void 0}),vl(this,El,{writable:!0,value:void 0}),vl(this,Al,{writable:!0,value:void 0}),vl(this,Pl,{writable:!0,value:void 0}),wl(this,kl,t),wl(this,Cl,n),wl(this,El,{}),wl(this,Al,i),wl(this,Pl,!1),this.init=this.init.bind(this)}init(){const e=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,xl,Ol).bind(this);Sl.forEach((t=>{window.addEventListener(t,e,Il)})),_l(this,kl).once("system ready",(()=>{_l(this,kl).register("call for page-unload",(()=>_l(this,El))),Sl.forEach((t=>{window.removeEventListener(t,e,Il)}))}))}updatePageUnloadData(e,t){_l(this,El)[e]=(_l(this,El)[e]?`${_l(this,El)[e]},${t.status}`:t.status).substring(0,200),_l(this,Cl).call(this,"payload",_l(this,El))}getPageUnloadData(e){return _l(this,El)[e]||""}}function Ol(){_l(this,Pl)||(wl(this,Pl,!0),_l(this,Cl).call(this,"onUnload called",_l(this,El)),_l(this,Al).track({type:"page-unload",payload:{..._l(this,El)}}))}const Rl={iab:async e=>(await Ka("consentedVendors")).includes(e),google:async e=>{var t;return null===(t=(await Ka("getCustomVendorsConsents"))[e])||void 0===t?void 0:t.consent},nrv:async e=>{var t;return null===(t=(await Ka("getNonRegisteredVendorsConsents"))[e])||void 0===t?void 0:t.consent}},Nl=async e=>{const{vendorRegistry:t,vendorId:n}=e,i=Rl[t];if(i){const e="string"==typeof n?parseInt(n):n;return isNaN(e)?{errorMsg:"invalid vendorId"}:await i(e)?{isConsented:!0}:{isConsented:!1}}return{errorMsg:"vendorRegistry not recognised, valid values are 'iab'|'google'|'nrv'"}};function Ml(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function Ll(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,jl(e,t,"get"))}function Ul(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,jl(e,t,"set"),n),n}function jl(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Bl=new WeakMap,ql=new WeakMap,Fl=new WeakMap,Vl=new WeakMap,zl=new WeakMap,$l=new WeakMap,Hl=new WeakMap,Wl=new WeakMap;class Zl{constructor(e){let{getConfig:t,molGvlVersion:n,tcString:i,storage:r,log:s}=e;Ml(this,Bl,{writable:!0,value:void 0}),Ml(this,ql,{writable:!0,value:void 0}),Ml(this,Fl,{writable:!0,value:!1}),Ml(this,Vl,{writable:!0,value:!1}),Ml(this,zl,{writable:!0,value:void 0}),Ml(this,$l,{writable:!0,value:void 0}),Ml(this,Hl,{writable:!0,value:void 0}),Ml(this,Wl,{writable:!0,value:e=>3===(null==e?void 0:e.split(".").length)}),Ul(this,$l,i),Ul(this,zl,r),Ul(this,Hl,s);const{useGeoDeviceVariantGVL:o,onlyMigrateExistingUsers:a,rollbackGeoVariant:d}=t("tcfv2.gvlMigration",{useGeoDeviceVariantGVL:!1,rollbackGeoVariant:!1,onlyMigrateExistingUsers:!0}),{newUser:l}=Ll(this,zl).getGVLGeoMigrationStatus();if(Ul(this,ql,!(3!==(null==n?void 0:n.split(".").length))),Ul(this,Bl,!(d||!(Ll(this,ql)||o&&i&&!l||o&&!a))),Ll(this,ql)&&d){const{hasBeenReprompted:e}=Ll(this,zl).getGVLGeoMigrationStatus();!1===e?Ul(this,Fl,!0):Ul(this,Vl,!(!e&&!l))}Ll(this,Hl).call(this,`initialised, userMigratedToGvlVariant: ${Ll(this,ql)}, useGeoDeviceVariantGVL: ${Ll(this,Bl)}, shouldRollbackUserTcString: ${Ll(this,Fl)}, shouldReprompt: ${Ll(this,Vl)}`)}get userMigratedToGvlVariant(){return Ll(this,ql)}get useGeoDeviceVariantGVL(){return Ll(this,Bl)}get shouldRollbackUserTcString(){return Ll(this,Fl)}get shouldReprompt(){return Ll(this,Vl)}getRollbackUserTcString(){if(Ll(this,Fl)){const{tcString:e}=Ll(this,zl).getGVLGeoMigrationStatus();return Ll(this,Hl).call(this,"returning rollback tcString",e),e}}tcDataLoaded(e){const t=Ll(this,Wl).call(this,e.molGvlVersion),{tcString:n}=Ll(this,zl).getGVLGeoMigrationStatus();if(Ll(this,Bl)&&!Ll(this,ql)&&t){const e={hasBeenReprompted:!1,migrated:t,tcString:Ll(this,$l)};Ll(this,Hl).call(this,"tcDataLoaded, updating GVLGeoMigrationStatus in storage",e),Ll(this,zl).setGVLGeoMigrationStatus(e)}else Ll(this,Fl)&&!t&&n===e.tcString&&(Ll(this,Hl).call(this,"tcDataLoaded, user rolled back, removing GVLGeoMigrationStatus in storage"),Ll(this,zl).removeGVLGeoMigrationStatus())}uiClosed(e){const{tcString:t}=Ll(this,zl).getGVLGeoMigrationStatus(),n=Ll(this,Wl).call(this,e.molGvlVersion);Ll(this,$l)?Ll(this,Bl)&&Ll(this,ql)&&t?(Ll(this,Hl).call(this,"uiClosed, setting hasBeenReprompted=true in GVLGeoMigrationStatus storage"),Ll(this,zl).setGVLGeoMigrationStatus({tcString:t,hasBeenReprompted:!0,migrated:n})):Ll(this,Vl)&&!Ll(this,Wl).call(this,null==e?void 0:e.molGvlVersion)&&(Ll(this,Hl).call(this,"uiClosed, user rolled back, removing GVLGeoMigrationStatus in storage"),Ll(this,zl).removeGVLGeoMigrationStatus()):(Ll(this,Hl).call(this,"marking user as newUser"),Ll(this,zl).setGVLGeoMigrationStatus({newUser:!0,migrated:n}))}}(0,qe.fo)("tcfv2",{gdpr:{enabledIfDissent:!0},init:Yl,initTimeout:O.RD});const Gl=function(e){e.once("dom ready",(()=>{document.querySelectorAll("a[href^='javascript:window.__cmp.a.push([\\'openSettings\\']']").forEach((e=>{e.href="javascript:window.openUi({ uiLevel: 'Level2', reason: 'userRequest' })"}))}))},Xl=e=>{const t=new Date;return t.setMonth(t.getMonth()-e),t},Kl=function(e,t){__webpack_require__.g.openUi=n=>{const{reason:i="unknown",uiLevel:r="Level1"}="string"==typeof n?{uiLevel:n,reason:"unknown"}:n||{};e.handleAction("openRequest",{openRequest:{reason:i}}),t.openUi({reason:i,uiLevel:r})}},Jl=e=>{const{done:t}=e.keys().next();return!t};async function Yl(e){const{broker:t,device:n,getConfig:i,isTCFV2Jurisdiction:r,log:s,pageCriteria:o,setConfig:a,queryParams:d}=e,l=e.tcfv2Opts,c=s.extend("main");if(!await r(i))return void c("tcfv2 is not supported for this geo, bailing");const u=new Pd(e);u.cleanup();const p=i("site","mol"),h=new Zd({account:p,broker:t,log:s.extend("tracking"),storage:u});h.init();const f=u.getTCData(),g=d.addtl_consent||(null==l?void 0:l.addtlConsent)||f.addtlConsent,m=(null==l?void 0:l.cvlVersion)||f.acmVersion;let y=d.gdpr_consent||(null==l?void 0:l.tcString)||f.tcString;const v=(null==l?void 0:l.nrvString)||f.nrvString,_=(null==l?void 0:l.nrvVersion)||f.nrvVersion;let w=f.molGvlVersion;const T=new Zl({getConfig:i,storage:u,molGvlVersion:w,tcString:y,log:s.extend("gvlGeoMigration")});if(s("shouldRollbackUserTcString",T.shouldRollbackUserTcString),T.shouldRollbackUserTcString&&(y=T.getRollbackUserTcString(),w=id(y).vendorListVersion.toString()),d.gdpr_consent||d.addtl_consent){const e=new URLSearchParams(__webpack_require__.g.location.search);["gdpr_consent","addtl_consent"].forEach((t=>e.delete(t)));const t=Jl(e)?`?${e}${__webpack_require__.g.location.hash}`:`${__webpack_require__.g.location.pathname}${__webpack_require__.g.location.hash}`;history.replaceState(null,"remove query params to ensure bid requests don't exceed size",t)}(d.gdpr_consent&&d.gdpr_consent!==f.tcString||d.addtl_consent&&d.addtl_consent!==f.addtlConsent||null!=l&&l.tcString&&l.tcString!==f.tcString||null!=l&&l.addtlConsent&&l.addtlConsent!==f.addtlConsent||null!=l&&l.nrvString&&l.nrvString!==f.nrvString)&&(c("new consent string provided, clearing cache"),(0,Xa.LK)(),u.clearTcfV2());const{shouldRepromptUser:I,debugRepromptData:S,userRepromptUpdate:k,repromptVersion:C}=function(e){let{getConfig:t,storage:n,queryParams:i,logPlugin:r}=e;const s=t("tcfv2.reprompt",{version:0,chance:0}),o=n.getRepromptVersion();let a=n.getTCData().repromptVersion;const{rollbackGeoVariant:d}=t("tcfv2.gvlMigration",{rollbackGeoVariant:!1});if(d){const{hasBeenReprompted:e,newUser:t,migrated:i}=n.getGVLGeoMigrationStatus();a=!e&&(!t||t&&!i)&&a<6?s.version:a}const l=a||o.version||0,c=!i.gdpr_consent&&l<s.version&&o.chance<s.chance;r(`reprompt - should: ${c}, config chance: ${s.chance}, user chance: ${o.chance}, config version: ${s.version}, user version: ${l}`);const u={version:s.version,chance:o.chance};return{shouldRepromptUser:c,debugRepromptData:{storedTCDataVersion:a,storedRepromptVersion:o.version,chosenRepromptVersion:l,repromptConfigVersion:s.version,shouldRepromptUser:c,userRepromptUpdateVersion:u.version,isConsentStringProvided:!!i.gdpr_consent},userRepromptUpdate:u,repromptVersion:l}}({getConfig:i,storage:u,queryParams:d,logPlugin:c});T.shouldReprompt&&I&&(s("clearing molGvlVersion"),w=void 0);const E=d["mol.ads.cmp.stubConsent"],A=d["mol.ads.cmp.stubDissent"];s("stubConsent",E),s("stubDissent",A);const P=d.privacy;P&&t.once("TCFV2 controller ready",(()=>{c('removing "privacy" from url'),(0,b.WH)("privacy")}));const x=i("cmp.model","tcfv2"),O={...e,log:s.extend("controller"),renderPlatform:n||i("tcfv2.renderPlatform",""),storage:u,showUi:P,uiLevel:P&&"Level2",repromptVersion:C,nextRepromptVersion:k.version,tracking:h,tcString:y,addtlConsent:g,nrvString:v,nrvVersion:_,cvlVersion:m,molGvlVersion:w,geo:(null==o?void 0:o.geo.toLowerCase())||"",useGeoDeviceVariantGVL:T.useGeoDeviceVariantGVL,cmpModel:x},R=new wd(O),{openUi:N,consentStringLastUpdated:M}=R;s("consentStringLastUpdated",M),(0,Xa.oP)(),Gl(t);const L=new Dl({broker:t,log:s.extend("pageUnload"),tracking:h});L.init();const U=i("tcfv2.consentMaxAgeMonths",12),j=Xl(U),B=i("tcfv2.allowBanner",!0),{resolve:q,promise:F}=(0,D.PQ)(),V=new ml({broker:t,log:s.extend("eventsHandler"),openUi:B?N:()=>{},pageUnload:L,storage:u,tracking:h,userRepromptUpdate:k,debugRepromptData:S,openBarrier:B?q:()=>{},stubConsent:E,stubDissent:A,controllerHandler:R,gvlGeoMigration:T});var z;Kl(V,R),z={consentStringValidFrom:j,userRepromptUpdate:k,shouldReprompt:I,stateHandler:V,stubConsent:E,stubDissent:A},__webpack_require__.g.__tcfapi("addEventListener",2,(async e=>{const t=e.repromptVersion||0,n=((e,t)=>{let{shouldReprompt:n,userRepromptUpdate:i,dmgMediaRepromptVersion:r,consentStringValidFrom:s}=t;return(e=>e.cached)(e)?"cached":(e=>"cmpuishown"===e.eventStatus)(e)?"uiOpened":(e=>"tcloaded"===e.eventStatus&&!e.tcString.length)(e)?"newUser":((e,t)=>id(e.tcString).lastUpdated<(t||0))(e,s)?"tcStringExpired":((e,t,n,i)=>"tcloaded"===e.eventStatus&&e.tcString.length&&t&&i<n.version)(e,n,i,r)?"repromptUser":(e=>"useractioncomplete"===e.eventStatus)(e)?"uiClosed":"loaded"})(e,{...z,dmgMediaRepromptVersion:t});z.stateHandler.handleAction(n,{tcData:e})})),R.loadController(),(!(0,Xa.hd)()||I||(M||0)<j)&&(c("waiting for barrier to unblock"),await F);const $=Ka("getValidTCData"),H=Ka("getConsentDegree");H.then((e=>{c("consent: ",e),a("cmp.consent",e)})),await new xd({validTCDataP:$,log:s.extend("bouncer"),registerPluginBouncer:e.registerPluginBouncer}).setup(),async function(e){let{controllerHandler:{tcfv2Version:t,tcfv2UiVersion:n},log:i,pValidConsentDegree:r,broker:s,validTCDataP:o,molGvlVersion:a,cmpModel:d}=e;const l=new Promise((async e=>{const[s,l]=await Promise.all([o,r]);i("consentDegree",l);const c=id(s.tcString);i("decoded:",c);const u=c.vendorListVersion,p={cmp:d,cmpVersion:`${t.length?t:"DEV"} ${n.length?n:"DEV"}`,consent:l,gdpr:{iabv:String(u)},cmpId:c.cmpId,molGvlVersion:a};i("bidmax targeting:",p),e(p)}));s.register("call for page analytics",(()=>l))}({controllerHandler:R,log:s.extend("bidmaxTracking"),pValidConsentDegree:H,broker:t,validTCDataP:$,molGvlVersion:w,cmpModel:x}),(async e=>{const{broker:t,log:n}=e,i=(async e=>{let{validTCDataP:t,pValidConsentDegree:n,log:i,broker:r,getConfig:s,cmpModel:o}=e;const a=s("tcfv2.par",{vendorIds:{gdpr:[755]},purposeIds:{gdpr:[1,3,4]}}),d=await t,l=await n;i("consentDegree",l);const c=id(d.tcString).vendorListVersion,u={consent:Dd[l],gdpr:d.gdprApplies?"1":"0",gdpr_consent:d.tcString,cmp:o,iabv:c},p=await Je("tcfv2.personalisedAds",a);u.google_consent=p;const h=p?0:1,f=p?u:{...u,npa:h};return i("dfp targeting:",f),f})(e);t.emit("set page level targeting",i),((e,t)=>{let{broker:n,getConfig:i,log:r}=e;i("tcfv2.setGptPersonalisedAdsState",!0)&&n.once("gpt initialized",(async e=>{(await t).google_consent?r("google personalised ads enabled"):(r("setting non-personalised ads"),e.pubads().setRequestNonPersonalizedAds(1))}))})(e,i);const r=await i,s=r.google_consent?0:1,o={cust_params:{...r},npa:s};n("video tags",o),t.emit("sync video tags update",o),n("done with gpt")})({broker:t,log:s.extend("gpt"),getConfig:i,validTCDataP:$,pValidConsentDegree:H,cmpModel:x});const W=await $;t.emit("TCData",W),t.on("openCmpBanner",(()=>{V.handleAction("openRequest",{openRequest:{reason:"userRequest"}}),R.openUi({uiLevel:"Level2",reason:"userRequest"})})),t.register("check vendor consent",Nl),c("resume loading ads bundle...")}Yl.isAdsFreeSupported=!0;const Ql=Yl;(0,qe.fo)("botsPlugin",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},init:function(e){let{getConfig:t,setConfig:n}=e;const i=function(e){return e("bots",[]).some((e=>{let{ip:t,ua:n}=e;const i=PageCriteria.clientIP===t;return n?i&&navigator.userAgent===n:i}))}(t)||/(?:[bB]ot|BOT|GrapeshotCrawler)s?\b/.test(navigator.userAgent);n("bots.isBotDetected",i)},run:function(e){let{broker:t,getConfig:n}=e;t.emit("set page level targeting",{bot:n("bots.isBotDetected")})}}),(0,qe.fo)("browserResolutionPlugin",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:i}=e;if(n("bots.isBotDetected"))return;const r=()=>{const{width:e,height:n}=(0,b.ap)();i("setting browserResolution page-level targeting",e,n),t.emit("set page level targeting",{sw:e,sh:n}),t.emit("sync video tags update",{cust_params:{sw:e,sh:n}})};window.addEventListener("resize",(0,S.Ds)(r,300)),r()}}),(0,qe.fo)("pageArea",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t}=e;const n=()=>{t.emit("set page level targeting",{area:__webpack_require__.g.adAreaId,subarea:__webpack_require__.g.adSubareaId})};t.on("set adSubareaId",(e=>{__webpack_require__.g.adSubareaId=e,n()})),n()}}),(0,qe.fo)("visits",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:async function(e){let{broker:t,getConfig:n,log:i}=e;const r=await async function(e,t){let[n,i,r]=await Promise.all([nc(e)?ic(t):{},rc(e,t),sc(t)]);t("cmpData",n),t("rtaData",i),t("visits",r);const{visitId:s}=i,o=localStorage.getItem(tc);return s&&o!==s&&(t("visitId changed:",{lastKnownVisitId:o,visitId:s}),localStorage.setItem(tc,s),r++,t("bumping visit count",r),localStorage.setItem(ec,""+r)),{...n,...i,visits:r}}(n,i),{visits:s}=r;i("targeting",r),t.emit("set page level targeting",{visits:s}),t.register("call for page analytics",(()=>r))}});const ec="mol.ads.visits.counterInt",tc="mol.ads.visits.lastKnownVisitId",nc=e=>(e("plugins.enabled").includes("tcfv2")||e("plugins.enabled").includes("tcfv2-v2"))&&e("tcfv2.enabled")||e("plugins.enabled").includes("cmp");async function ic(e){const t=id(await new Promise((e=>{__webpack_require__.g.__tcfapi?__webpack_require__.g.__tcfapi("getTCData",2,(t=>{let{tcString:n}=t;e(n)})):__webpack_require__.g.__cmp&&__webpack_require__.g.__cmp("getConsentData",null,(t=>{let{consentData:n}=t;e(n)}))}))).created,n=Math.floor((Date.now()-t.getTime())/1e3/60/60/24);return e("days since cmp created:",n),{cmpCreated:t,cmpDays:n}}async function rc(e,t){if(__webpack_require__.g.RTA&&__webpack_require__.g.RTA.ids&&__webpack_require__.g.RTA.ids.then){const n=e("visits.rtaDataTimeout",5e3),{results:i}=await(0,D.Ye)(n,[__webpack_require__.g.RTA.ids]);if(i.length){const{created:e,visitId:n}=i[0],r=Math.floor((Date.now()-e)/1e3/60/60/24);return t("days since RTA created:",r),{rtaCreated:e,rtaDays:r,visitId:n}}}return{}}async function sc(e){const t=parseInt(localStorage.getItem(ec));return isNaN(t)?(async()=>{e("no local storage found, trying to fetch visits count from cookie"),await Promise.race([Tt(),(0,D.Vs)(200)]);const t=function(){const e=mt("mol.ads.sessionStarted")||!1;let t=parseInt((0,b.ej)("mol.ads.visits"));return isNaN(t)&&(t=0),e||(yt("mol.ads.sessionStarted",!0),(0,b.zP)("mol.ads.visits",t)),t}();return e("cookie visits:",t),localStorage.setItem(ec,""+t),t})():t}(0,qe.fo)("trackers.quantcast.userSync",{purposeIds:{gdpr:"N/A"},run:function(e){let{broker:t,log:n}=e;t.register("provide prebid config",(()=>({userSyncConfig:{userIds:[{name:"quantcastId"}]}})))},vendorIds:{gdpr:[11]}});const oc=(0,_.x)("AdsRefresher");class ac{constructor(){let{broker:e,inactiveTime:t=1e4,events:n=[[document,["mousemove","keypress","scroll","mousewheel","touchmove"]],[window,["focus","scroll"]]],log:i=oc}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.priv={broker:e,events:n,inactiveTime:t,handleUserActivity:(0,S.FU)(dc.bind(this),t-10),lastActive:new Date,log:i}}get active(){const e=this.priv;return new Date-e.lastActive<e.inactiveTime}start(){const e=this.priv;uc.call(this,((t,n)=>{t.addEventListener(n,e.handleUserActivity)})),cc.call(this)}stop(){const e=this.priv;uc.call(this,((t,n)=>{t.removeEventListener(n,e.handleUserActivity)})),e.timer=clearTimeout(e.timer)}whenActive(){return new Promise((e=>{this.active?e():this.priv.broker.once("user active",e)}))}}function dc(){const e=this.priv,t=!this.active;e.lastActive=new Date,t&&(this.priv.log("user became active"),e.broker.emit("user active"))}function lc(){const{broker:e}=this.priv;this.active?(this.priv.log.debug("user is still active"),cc.call(this)):(this.priv.log("user became inactive"),e.emit("user inactive"),e.once("user active",cc.bind(this)))}function cc(){this.priv.timer=setTimeout(lc.bind(this),this.priv.inactiveTime)}function uc(e){for(const[t,n]of this.priv.events)if(t)for(const i of n)e(t,i)}(0,qe.fo)("trackers.viewability",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},disableIfNoAdsServable:!0,run(e){let{broker:t,log:n,getConfig:i}=e;const r=new qs({threshold:[0,.5,1]}),s="mol"===i("viewability.activityMonitor","mol")?new ac({broker:t}):(()=>{let e,t;if(void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),!e)throw new Error("Can't create activity monitor");const n={capture:!0,passive:!0};let i,r,s=0;const o=function(){r=new Promise((e=>{i=e}))};o();const a=()=>{if(document[e]){if(i)return;o()}else{if(!i)return;s=Date.now();const e=i;i=void 0;try{e()}catch(e){console.warn(e)}}};return a(),document.addEventListener(t,a,n),window.addEventListener("pagehide",a,n),window.addEventListener("pageshow",a,n),{whenActive:()=>r,start:()=>{},stop:()=>{},get active(){return Date.now()-s}}})(),o=new Map;t.on("track viewability",((e,i)=>{(async(e,i)=>{let a;o.set(e,i);let d=0;r.observe(i,(async i=>{const r=i.intersectionRatio;if(d=i.intersectionRatio,await s.whenActive(),i.isIntersecting){if(!a&&i.intersectionRatio>=.5){let i=!0;const s=()=>{i&&r<1&&d<1?(i=!1,o()):(a=void 0,n("ad viewable",e),t.emit("ad viewable",e))},o=()=>{a=setTimeout(s,500)};o()}}else a&&(clearTimeout(a),a=void 0)}))})(e,i)})),t.on("untrack viewability",(e=>(e=>{const t=o.get(e);t&&(r.unobserve(t),o.delete(e))})(e))),t.once("dom ready",(()=>{s.start()}))}}),(0,qe.fo)("trackers.admantx",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},run:async function(e){let{broker:t,getConfig:n,log:i}=e;i("starting");const{request:r,endPoint:s}=n("trackers.admantx",pc),{href:o}=window.location;r.body=o.substring(0,o.indexOf("?"))||o;const a=JSON.stringify(r),d=`${s}?request=${a}`,l={"Content-Type":"text/plain","Content-Length":a.length,Connection:"keep-alive"},c=new Promise(((e,t)=>{fetch(d,{method:"GET",headers:l}).then((async n=>{const i=await n.json(),{info:s}=i;if("OK"!==s)t(new Error(`Admantx fetch error: ${s}.`));else{const t=(r.filter.includes("default")?hc:r.filter).map((e=>i[e])).filter((e=>e)).reduce(((e,t)=>[...e,...t.map((e=>e.name))]),[]);e(t)}})).catch(t)})).catch((e=>i(e)));t.register("dmp","admantx",(async()=>await c)),t.emit("set page level targeting",c.then((e=>({"ias-bsp":e}))));const u=await c||[];i("targeting:",u),t.emit("admantx loaded"),t.register("call for page analytics",(()=>({admantx:u}))),t.emit("send with rta page unload",{brandSafety:u.includes("ias_safe")?"safe":"unsafe"})},vendorIds:{gdpr:[278]}});const pc={endPoint:"https://euasync01.admantx.com/admantx/service",request:{key:"d4d1cdf427f06ebc6ee7e0a3ffbcaecdfbfe517eca18a41d9126f88bdb16e7f0",type:"url",method:"descriptor",mode:"async",decorator:"json",filter:["admants"]}},hc=["categories","feelings","entities","admants"],fc=function(){const e=function(){const e=[];for(let t=1;t<=20;t++)e.push(t);return e}();return{getTags:function(){const t=function(){if(e.length){const t=(0,O.MX)(0,e.length-1);return e.splice(t,1)}}();if(t)return{adx_channel:t}}}};function gc(e){let{broker:t}=e;const n=fc();t.register("get tags",(()=>{const e=n.getTags();return e&&[e]})),t.register("get video tags",(e=>{const{pos:t}=e,i=n.getTags();if("jwplayer"===t&&i)return{cust_params:i}}))}gc.ccpa={enabledIfDissent:!0},gc.gdpr={enabledIfDissent:!0},gc.disableIfNoAdsServable=!0;const mc=()=>{const e=[window.screen.width,window.screen.height],t=t=>t[0]===e[0]&&t[1]===e[1];__webpack_require__.g.DM.molFeMobileutils.isLandscape()&&e.reverse();const n={iphone:{iphone6:()=>t([375,667]),iphone6p:()=>t([414,736]),iphone5:()=>t([320,568])},other:{ipad:__webpack_require__.g.DM.molFeMobileutils.isIPad,other:()=>!__webpack_require__.g.DM.molFeMobileutils.isMobile()&&!(0,b.bP)(),windows10:b.bP}},i={touch:()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0};function r(){const e=n[PageCriteria.device]||{};return Object.keys(e).find((t=>e[t]()))||PageCriteria.device}return{getTags:()=>[{device:r(),device_features:Object.keys(i).filter((e=>i[e]()))}]}};function yc(e){let{broker:t,log:n}=e;const i=mc(),[r]=i.getTags();n(r),t.emit("set page level targeting",r)}function vc(e){let{broker:t,getConfig:n}=e;n("bots.isBotDetected")||t.emit("set page level targeting",{random:[window.PageCriteria.pageViewId],impid:[(0,O.kb)()]})}function bc(e){let{broker:t,getConfig:n}=e;const i=n("plugins.ixIdentify.scriptUrl","//js-sec.indexww.com/ht/p/184669-186298276891027.js"),r=t.invoke("load script",i,"headertag");t.register("prebid prerequisites",(()=>r))}yc.ccpa={enabledIfDissent:!0},yc.gdpr={enabledIfDissent:!0},yc.disableIfNoAdsServable=!0,vc.ccpa={enabledIfDissent:!0},vc.gdpr={enabledIfDissent:!0},vc.disableIfNoAdsServable=!0,bc.pluginSetup=e=>{let{getConfig:t,setConfig:n}=e;const i=t("plugins.enabled"),r=i.findIndex((e=>"prebid"===e));if(~r){const e=r-1;n("plugins.enabled",[...new Set([...i.slice(0,e),"trackers.ixIdentity",...i.slice(e)])])}};const _c=bc;async function wc(e){let{getConfig:t}=e;const n=t("plugins.smartclip.url","https://sync.sxp.smartclip.net/sync?type=red&dsp=10");ct({url:n})}bc.vendorIds={gdpr:[10]},bc.purposeIds={gdpr:"N/A"},wc.vendorIds={gdpr:[115]},wc.purposeIds={gdpr:"N/A"};const Tc=[{size:[300,600],url:"https://scripts.dailymail.co.uk/static/mol-fe/static/mol-fe-xpmodule-news-search/1.13.0/mpuCarousel.html?forceIto=Mol-Carousel&startTab=entertainment"},{size:[970,250],image:"https://www.dailymail.co.uk/static/mol-adverts/creatives/newzit-static-billboard.jpeg"},{size:[160,600],image:"https://www.dailymail.co.uk/static/mol-adverts/creatives/newzit-static-skyscrapper.png"}],Ic={vendorIds:{gdpr:[755]},purposeIds:{gdpr:[1,3,4]},legIntPurposeIds:{gdpr:[3,4]}};(0,qe.fo)("adserver",{init:async function(e){let{broker:t,log:n,addPlugins:i,removePlugins:r,getConfig:s,setConfig:o,pluginsAlreadyRun:a,ownName:d,checkPluginBouncer:l}=e;const c=s("bidmax.dispatcher.url","//crta.dailymail.co.uk");function u(){Ac&&(Ac(),Ac=null),r([d]),n("bailing")}if(!a.has("tcfv2")){if(Ec++>10||Ac)return void u();n("tcfv2 hasnt ran yet");const e=s("plugins.enabled");e.splice(e.indexOf(d),1);const i=["tcfv2","mvt"].filter((e=>!a.has(e))).find((t=>e.includes(t)));let r;return i?(n("re-queing just after",i),r=e.indexOf(i)):(n("cant find tcfv2 or any way to dynamically enable it, holding off gpt.js loading"),Ac=function(e,t){const n=[];let i=e.intercept("import script","//www.googletagservices.com/tag/js/gpt.js",((e,r)=>{i&&(n.push(r),t("holding off gpt loading"))}));return()=>{i(),i=null,n.length&&(t("resume loading real gpt"),n.forEach((e=>e())))}}(t,n),n("re-queuing as last plugin"),r=e.length-1),e.splice(r+1,0,d),o("plugins.enabled",e),"not yet"}if(n("starting"),await l("adserver",Ic))return n("google enabled"),void u();n("user seems to have dissented to google, running own adserver"),Ac||t.intercept("import script","//www.googletagservices.com/tag/js/gpt.js",(()=>{n("intercepting real gpt loading")}));const p=s("adserver.ads",Tc);i(["analytics.headerbidderWinner"]);const h=__webpack_require__.g.googletag=__webpack_require__.g.googletag||{};h.cmd=h.cmd||[];const f={},g={setTargeting:(e,t)=>(void 0!==t&&(f[e]=[t]),g),addEventListener:(e,n)=>(t.on("gpt event",e,n),g),setCentering:e=>g,enableAsyncRendering:()=>g,getTargetingKeys:()=>Object.keys(f),getTargeting:e=>f[e]||[],setRequestNonPersonalizedAds:()=>{},setPrivacySettings:()=>{},getSlots:()=>Object.values(m)};h.pubads=()=>g;const m={};h.enableServices=()=>{n("enableServices")},h.getVersion=()=>"proprietary",h.display=e=>{const i=m[e];if(i.displayed)return void n.warn("slot",e,"already displayed, ignoring multiple calls");i.displayed=!0,n("display:",e,i.sizes);const r=e,[s]=i.getTargeting("hb_pb");if(s>0&&"oopGptSlot"!==i.slotType){n("prebid bid",s,"rendering ad:",e);const{document:o,size:a,adElement:d}=Sc(r),[l]=i.getTargeting("hb_adid");i.adElement=d,__webpack_require__.g.pbjs.renderAd(o,l);const c=!1;t.emit("gpt event","slotRenderEnded",{size:a,slot:i,isEmpty:c})}else{const e=document.getElementById(r),s=p.filter((e=>{let{size:t}=e;return i.sizes.find((e=>{let[n,i]=e;return t[0]===n&&t[1]===i}))}));if(s.length){const r=s[Math.floor(s.length*Math.random())];n("found house ad for size:",r.size),async function(e,t,n,i,r,s){const o=document.createElement("div"),{size:a,id:d,click:l}=e,[c,u]=a;if(e.url){const t=document.createElement("iframe");t.width=c,t.height=u,t.scrolling="no",t.marginHeight=0,t.marginWidth=0,t.frameBorder=0,t.src=e.url,o.appendChild(t)}else if(e.image){const t=document.createElement("img");t.width=c,t.height=u,t.src=e.image;const n=document.createElement("a");l&&(n.href=await async function(e,t,n,i){Cc||(Cc=new Promise((async t=>{const n=await e.invokeAll({message:["call for page analytics"],timeout:2e3});t({timestamp:__webpack_require__.g.adverts.startTime,referrer:document.referrer,localStorage:void 0,memory:void 0,indexedDB:void 0,viewability:void 0,...n.reduce(((e,t)=>({...e,...t})),{}),event_type:"bidmax",type_version:2,version:b.SP.bidmax||"7.9.0"})})));const r={timeAtSend:Date.now()-__webpack_require__.g.adverts.startTime,...await Cc,type:"custom",payload:{module:"adserver",event:"click",id:n}};return`${t}/_/e?r=${encodeURIComponent(i)}&e=${btoa(JSON.stringify(r))}`}(r,s,d,l)),n.appendChild(t),o.appendChild(n)}else{if(!e.html)return void t.warn("unsupported creative:",e);o.innerHTML=e.html}n.appendChild(o),i.adElement=o;const p={size:a,slot:i,isEmpty:!1,creativeId:d,serviceName:"proprietary"};r.emit("gpt event","slotRenderEnded",p)}(r,n,e,i,t,c)}else"oopGptSlot"===i.slotType?n("no header bidder or house ad found for out of page slot"):i.getCollapseEmptyDiv()?(n("no header bidder or house ad found, collapsing:",e),e.style.height="0px",e.style.display="none"):n("no header bidder or house ad found, but NOT collapsing it"),t.emit("gpt event","slotRenderEnded",{slot:i,isEmpty:!0})}},g.refresh=(e,t)=>{n("refresh:",e,t)},h.defineSlot=(e,t,i)=>{n("defineSlot:",i);const r=kc(n,e,i,t);return m[i]=r,r},h.defineOutOfPageSlot=(e,t)=>{n("defineOutOfPageSlot:",t);const i={...kc(n,e,t,[]),slotType:"oopGptSlot"};return m[t]=i,i},h.destroySlots=e=>{n("destroySlots:",e),e.forEach((t=>{const n=t.adElement;n&&n.parentNode.removeChild(n),delete e[t]}))}},run:function(e){let{log:t}=e;const n=googletag.cmd,i=e=>{try{e()}catch(e){t.warn("Error running function queued up in googletag.cmd:",e)}};googletag.cmd.push=i,n.forEach(i)}});const Sc=e=>{const t=document.getElementById(e),[n]=t.getClientRects(),i=n?Math.ceil(n.width):0,r=n?Math.ceil(n.height):0,s=document.createElement("div");s.style.border="0pt none",s.style.margin="0 auto",s.style.padding="0",s.style.minHeight="1px",t.appendChild(s);const o=document.createElement("iframe");return n&&(o.width=i+"",o.height=r+""),o.scrolling="no",o.marginWidth="0",o.marginHeight="0",o.style.marginTop="0px",o.style.marginLeft="0px",o.style.border="0pt none",s.appendChild(o),{document:o.contentDocument,size:[i,r],adElement:s}},kc=(e,t,n,i)=>{const r={};let s=!1;const o={getAdUnitPath:()=>t,getSlotElementId:()=>n,getTargetingMap:()=>r,setTargeting:function(e,t){return void 0!==t&&(r[e]=[t]),o},getTargeting:e=>r[e]||[],addService:()=>o,setCollapseEmptyDiv:e=>(s=e,o),getCollapseEmptyDiv:()=>s,sizes:i,getTargetingKeys:()=>Object.keys(r),targeting:r};return o};let Cc,Ec=0,Ac=null;(0,qe.fo)("adsFree",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init:function(e){let{broker:t,isAdsFreeUser:n,log:i,registerPluginBouncer:r,setConfig:s,getConfig:o}=e;if(!o("plugins.adsFree.enabled",!1))return;i("Starting..");const a=n();a&&(r(((e,t)=>{i(`checking ${e}`,Object.keys(t));const n=t.isAdsFreeSupported;return!n&&i("bouncing",e),n})),s("slots.enabled",{}),document.documentElement.classList.add("molads_ads_free")),t.register("call for page analytics",(()=>({adsFreeUser:a})))},isAdsFreeSupported:!0}),(0,qe.fo)("blockthrough",{init:async function(e){let{getConfig:t,setConfig:n,removePlugins:i,broker:r,log:s,ownName:o}=e;n("bidmax.reportPlugins",[...t("bidmax.reportPlugins",[]),o]);const a=t("plugins.enabled").filter((e=>e.startsWith("abe.")));s("removing plugins:",a),i(a),s("loading blockthrough script"),r.invoke("import script","//btloader.com/tag?o=5761266544017408&upapi=true").then((()=>{s("blockthrough script loaded")})),r.on("ad delayed",(e=>{let{id:t}=e;return window.postMessage("mol-ads/events/ad-delayed:"+t,"*")})),r.on("resuming delayed ad",(e=>{let{id:t}=e;return window.postMessage("mol-ads/events/ad-resumed:"+t,"*")}))},purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:[815]}}),(0,qe.fo)("conditionalLoad",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init:function(e){let{broker:t,getConfig:n,log:i}=e;i("starting"),t.register("call for page-unload",(()=>({sdoc:Pc.length})));const r=n("plugins.slots.loadConditions.constants",{});t.on("ad rendered",((e,t)=>{let{size:n,slot:i,isEmpty:r}=t,s=i.molAd.pos;"oopGptSlot"===i.molAd.slotType&&(s+="-oop"),xc.renderedAds[s]={size:n,isEmpty:r},Oc()})),t.intercept("slot defined",((e,t)=>{let[n,{pos:s}]=e;const o=(0,_e.get)(s);if(xc.definedPositions.push(s),o&&void 0!==o.loadCondition){const e="string"==typeof o.loadCondition?r[o.loadCondition]:o.loadCondition;i("delaying slot",s,"due to condition:",e),Rc(new Dc(e,{pos:s}),t)}else t();Oc()})),t.intercept("request slot",((e,t)=>{let[n,{pos:s,slotType:o}]=e;const a=(0,_e.get)(s);if("oopGptSlot"===o&&void 0!==a.oopLoadCondition){const e="string"==typeof a.oopLoadCondition?r[a.oopLoadCondition]:a.oopLoadCondition;i("delaying oop slot",s,"due to condition:",e),Rc(new Dc(e,{pos:s}),t)}else t();Oc()}))},disableIfNoAdsServable:!0});let Pc=[];const xc={renderedAds:{},definedPositions:[]};class Dc{constructor(e,t){this.context=t,this.rootDescriptor=e,this.do=this.do.bind(this),this.not=this.not.bind(this)}do(e){if("object"==typeof e){const t=Object.keys(e)[0];if("function"==typeof this[t])return this[t](e[t]);throw new Error("error calling fnName "+t)}return e}not(e){return!this.do(e)}and(e){return!e.find(this.not)}or(e){return!!e.find(this.do)}isAdSmallerThan(e){let{pos:t,size:n}=e;return((e,t)=>{let[n,i]=e,[r,s]=t;return n<r&&i<s})(xc.renderedAds[t].size,n)}isMasterRendered(){return!!xc.renderedAds[this.context.pos]}isPosDefined(e){return!!~xc.definedPositions.indexOf(e)}isPosEmpty(e){return xc.renderedAds[e].isEmpty||!xc.renderedAds[e].size}isPosRendered(e){return xc.renderedAds.hasOwnProperty(e)}isViewPortWidthLargerThan(e){return(0,b.ap)().width>e}isViewPortHeightLargerThan(e){return(0,b.ap)().height>e}isIE(){return b.JW}run(){return this.do(this.rootDescriptor)}}const Oc=(0,S.yS)((()=>{Pc=Pc.filter((e=>{let{condition:t,done:n}=e;try{return!t.run()||(n(),!1)}catch(e){return console.error("conditional-load: ",e),!1}}))}));function Rc(e,t){Pc.push({condition:e,done:t})}(0,qe.fo)("domain",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run(e){let{broker:t}=e;const n=(e=>{const t=e.match(/(www[0-9]*?\.)?(.[^/:]+)/i);return(null==t?void 0:t[2])&&"string"==typeof t[2]&&t[2].length>0&&t[2]})(__webpack_require__.g.location.hostname),i=n&&n.replace(/\./g,"_");t.emit("set page level targeting",{location:i}),t.register("provide domain",(()=>n))}});const Nc=(0,S.ri)((e=>{let{getConfig:t,broker:n,pageCriteria:i,inlineModuleIdsString:r=""}=e;return new Promise((e=>{const s=n.until("dom ready");if("femail"===(null==i?void 0:i.channel)&&"femailfashionhub"===(null==i?void 0:i.subchannel))e(!0);else{const n=t("plugins.fff.inlineModuleIds",["62328562","62328544","62032338","62451577","62451566","62451576","62451540","62257892"]);r.split(/\s+/).some((e=>n.includes(e)))?e(!0):s.then((()=>{e(!!document.getElementById("fff-inline")||!!document.querySelector(".fff-m-inline"))}))}}))}));(0,qe.fo)("fff",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},disableIfNoAdsServable:!0,run:e=>{let{broker:t,getConfig:n,log:i,pageCriteria:r}=e;Nc({getConfig:n,broker:t,pageCriteria:r,inlineModuleIdsString:__webpack_require__.g.inlineModules}).then((e=>{e?(i("fff found in page"),t.emit("set page level targeting",{fff:!0})):i("fff not found in page")}))}}),(0,qe.fo)("imageGallery",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run(e){let{broker:t}=e;t.on("image gallery open",(()=>{t.emit("pause refreshing ads")})),t.on("image gallery close",(()=>{t.emit("resume refreshing ads")}))}}),(0,qe.fo)("page.homepageRenderPlatform",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,isHomepage:n,log:i,pageMeta:r}=e;if(!n)return void i("not homepage, bailing");const s="mobile"===r.renderPlatform;t.register("call for page analytics",(()=>({homepage:!0,renderPlatform:r.renderPlatform}))),i("setting page-level targeting",{mobile:s}),t.emit("set page level targeting",{mobile:s})}});const Mc="mol-ads-control-panel",Lc={abv:"mol-ads-control-panel-abv",cluster:"mol-ads-control-panel-cluster"},Uc="mol-ads-control-panel-config";function jc(e){let{broker:t,getConfig:n,doc:i,log:r,win:s}=e;const o=n("controlPanel.scriptURL");o?s.DM.later("molFeReact_LOADED",(async()=>{const{React:e,ReactDOM:a}=s.DM.molFeReact;try{const[r,s]=await Promise.all([t.invoke("load script",o,"MOLAdsControlPanel"),t.invoke("get all plugins")]),d=document.getElementById(Mc)||function(e){const t=document.createElement("div");return t.id=Mc,e.body.appendChild(t),t}(i);a.unmountComponentAtNode(d),a.render(e.createElement(r,{abvCookieName:Lc.abv,allPlugins:Object.keys(s),clusterCookieName:Lc.cluster,configStorageKey:Uc,enabledPlugins:n("plugins.enabled",[]),onClose:()=>a.unmountComponentAtNode(d)}),d)}catch(e){Object.values(Lc).forEach(b.kT),localStorage.removeItem(Uc),r.error("\n        MOL Ads Control Panel has been requested to load, but cannot. \n        I have deleted the control panel cookies that will affect the behaviour of this site.\n      "),r.error(e)}})):r.error("No configured script url")}(0,qe.fo)("controlPanel",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run(e){(Object.values(Lc).some(b.ej)||b.SP.acp||b.SP.adsControlPanel||localStorage.getItem(Uc))&&jc(e),e.broker.on("open control panel",(()=>jc(e)))}}),(0,qe.fo)("performanceMonitor",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){let{broker:t,getConfig:n}=e;const i=n("performance.sampleSize",100);n("performance.pageLoad.offsets",[0,5,15]).forEach((e=>setTimeout(function(e){return async()=>{let n=await t.invoke("is page visible?");const r=t.on("page hidden",(()=>{n=!1})),s=await async function(e){return new Promise((t=>{const n=(new Date).getTime();!function e(i){if(0===i){const e=(new Date).getTime()-n;t(e)}else setTimeout((()=>e(i-1)),0)}(e)}))}(i);r.cancel();const o=s/i,a={offset:e,sampleSize:i,visible:n,...(0,O._b)("delayP1s",o),...(0,O._b)("delayP100ms",o)};t.emit("send event to bidmax",{type:"custom",payload:{module:"perf-monitor",event:"measure",...a}})}}(e),1e3*e)))}}),(0,qe.fo)("adNami",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},run:async function(e){let{broker:t,getConfig:n}=e;const i=n("plugins.adnami.scriptTimeout",500),r={adNami:"off"},s=(0,D.Ye)(i,[new Promise((e=>{window.adsmtag=window.adsmtag||{},window.adsmtag.cmd=window.adsmtag.cmd||[],window.adsmtag.cmd.push((()=>{r.adNami="on",e()}))}))]);t.invoke("import script","https://macro.adnami.io/macro/spec/adsm.macro.4111597d-dc70-4fd8-b25e-7d24d8423e73.js"),t.intercept("slot ready for ad",(async(e,t)=>{let[n,i,o]=e;await s,o.push(r),t(n,i,o)}))},vendorIds:{gdpr:[612]}}),(0,qe.fo)("fbRemarketingPixel",{purposeIds:{gdpr:"N/A"},run:async function(e){let{broker:t,log:n,getConfig:i,win:r}=e;const s=i("plugins.fbRemarketingPixel.waitForRequest",!0);if(n("starting"),s&&(n("waiting for request from html"),await t.until("add fb-marketing-pixel")),n("got request to add tracking"),r.fbq)return void n.warn("fbq already defined, bailing");const o=r.fbq=function(){o.callMethod?o.callMethod.apply(o,arguments):o.queue.push(arguments)};r._fbq||(r._fbq=o),o.push=o,o.loaded=!0,o.version="2.0",o.queue=[],t.invoke("import script","https://connect.facebook.net/en_US/fbevents.js").then((()=>n("pixel loaded"))),o("init","1401367413466420"),o("track","PageView")},vendorIds:{google:[89],gdpr:"N/A"}}),(0,qe.fo)("bidCount",{ccpa:{enabledIfDissent:!0},purposeIds:{gdpr:[1]},run:function(e){let{broker:t,log:n}=e;const i={},r=e=>(0,q.jj)(e.map((e=>{let{bidderCode:t}=e;return t})));t.register("get tags based on tags",(e=>{const t=e.flat().filter((e=>e&&"bid"===e.type));if(t.length){const e=r(t),{pos:i}=t[0];n(`${i} - unique bidders`,e);const s=e.length;return n(`${i} - bidCount`,s),{bidCount:s}}return n("no bids found"),{bidCount:0}})),t.intercept("collect video tags",((e,t)=>{let[s,o,a]=e;const d=(e,t)=>{if(t&&"bid"===t.type){const{pos:e,offset:s,auctionId:o}=t;i[o]=i[o]||[],i[o].push(t);const a=r(i[o]),d=a.length;n(`${e} - bid received for auctionId: ${o}, offset: ${s}, uniqueBidders: ${a}, bidCount: ${d}`),t.tags.cust_params.bidCount=d}a(e,t)};d(null,{cust_params:{bidCount:0}}),t(s,o,d)})),t.on("bidding ended",((e,t)=>{i[t]&&(n("video auction ended, removing auctionId",t),delete i[t])}))},vendorIds:{gdpr:"N/A"}}),(0,qe.fo)("maxbid",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,log:n}=e;const i={},r=e=>!isNaN(parseFloat(e))&&isFinite(e),s=e=>[...e].sort(((e,t)=>t.cpm-e.cpm)),o=e=>{const{bidderCode:t,cpm:n,cachedBid:i}=e;if(i){const{bidderCode:e,cpm:t}=i;return{bidderCode:e,cpm:parseFloat(t)}}return{bidderCode:t,cpm:parseFloat(n)}};t.register("get tags based on tags",(e=>{const t=e.flat().filter((e=>"bid"===(null==e?void 0:e.type)&&r(null==e?void 0:e.cpm)));if(!t.length)return;const{pos:i}=t[0],a=t.map(o);n(`${i} - bids:`,a);const d=s(a);n(`${i} - sorted:`,d);const{bidderCode:l,cpm:c}=d[0];return n(`${i} - highest bidder`,l,c),{maxbid:c,maxbidpk:Bc.findIndex((e=>{let[t,n]=e;return t<=c&&c<=n}))+1,maxbid_bidder:l}})),t.intercept("collect video tags",((e,t)=>{let[a,d,l]=e;t(a,d,((e,t)=>{if(t&&"bid"===t.type&&t.cpm&&r(t.cpm)){i[t.auctionId]=i[t.auctionId]||[];const e=o(t),{auctionId:r,offset:a}=t;n(`bid received, auctionId: ${r}, offset: ${a}, bid:`,e),i[t.auctionId].push(e);const d=s(i[t.auctionId]);n(`sorted bids, auctionId: ${r}, offset: ${a}`,d);const{cpm:l,bidderCode:c}=d[0];n(`hightest bid, auctionId: auctionId: ${r}, offset: ${a}`,c,l);const u={...t.tags.cust_params,maxbid:l,maxbidpk:Bc.findIndex((e=>{let[t,n]=e;return t<=l&&l<=n}))+1,maxbid_bidder:c};t.tags.cust_params=u}l(e,t)}))})),t.on("bidding ended",((e,t)=>{i[t]&&(n("video auction ended, removing auctionId",t),delete i[t])}))},vendorIds:{gdpr:"N/A"}});const Bc=[[.01,.5],[.51,1],[1.01,1.5],[1.51,2],[2.01,2.5],[2.51,3],[3.01,3.5],[3.51,4],[4.01,4.5],[4.51,5],[5.01,6],[6.01,7],[7.01,8],[8.01,9],[9.01,10],[10.01,12],[12.01,14],[14.01,16],[16.01,18],[18.01,20]];(0,qe.fo)("bidsReceived",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t}=e;t.register("get tags based on tags",(e=>e.flat().filter((e=>e&&"bid"===e.type)).length?{nobids:!1}:{nobids:!0}))},vendorIds:{gdpr:"N/A"}}),(0,qe.fo)("prebid.sharedId",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1,3,4]},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=`${n("plugins.sharedid.pixelUrl.endpoint","https://www.dailymail.co.uk/cvx/client/sync/fpc")}?fpc_domain=${n("plugins.sharedid.pixelUrl.fpcDomain","dailymail.co.uk")}`,s=n("plugins.sharedid.extend",!1),o=!s&&n("plugins.sharedid.refreshInSeconds",!1),a=Fc(o);t.register("provide prebid config",(()=>({userSyncConfig:{userIds:[{name:"pubCommonId",params:{extend:s,syncTime:60,pixelUrl:r},storage:a}],syncDelay:n("plugins.prebid.syncDelay",3e3)}}))),t.register("get shared id",(()=>{try{return(0,D.gb)((()=>(0,b.ej)("sharedid")),300,1500)}catch(e){return}}))},vendorIds:{gdpr:"N/A"}});const qc={name:"_pubcid",type:"cookie",expires:28},Fc=e=>"number"==typeof e?{...qc,refreshInSeconds:e}:qc;(0,qe.fo)("message-trace",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init:function(e){let{broker:t,log:n,queryParams:i}=e;const r=Object.entries(i).filter((e=>{let[t]=e;return t.startsWith(Vc)}));if(!r.length)return void n("no message filter, bailing");n("filters:",Object.fromEntries(r)),t.bus.logCall=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{id:""},i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(s(i,e,n)){const[s,...d]=i,l=[["Message",Hc],[e.id,a(2)],[t,a(1)],[s,a(0)],[r?o?"resuming":"intercepted by":"->",a(r?o?4:3:1)],[n.id,a(2)]],{text:c,styles:u}=l.reduce(((e,t)=>{let[n,i]=t;return e.text.length&&(e.text+="%c ",e.styles.push(Wc)),e.text+=`%c${n}`,e.styles.push(i),e}),{text:"",styles:[]});let p=d;try{p=(0,I.$Z)(d)}catch(e){}console.log(c,...u,p)}};let s=()=>!1;r.forEach((e=>{let[t,n]=e;const[i,...r]=t.split(".").slice(3),s=new RegExp(`^${n.replace(/\*/g,".*")}$`,"i");switch(i){case"path":l(r.join("."),n);break;case"slot":l("",n),l("pos",n),l("slot.pos",n);break;case"fulltext":o=new RegExp(n,"igm"),d((e=>o.test(JSON.stringify(e,Zc))));break;case"broker":c(s,s);break;case"sender":c(s);break;case"receiver":c(void 0,s)}var o}));const o=zc.split(" ").map((e=>(0,q.$R)(["background-color","color"],e.split("/")).map((e=>e.join(": "))).join("; "))),a=e=>$c+o[e];function d(e){const t=s;s=(i,r,s)=>{let o;try{o=e(i,r,s)}catch(e){n.warn("Error while filtering message:",e)}return o||t(i,r,s)}}function l(e,t){d((n=>n.find((n=>{const i=e?qn()(n,e):n;return i&&(void 0===t||new RegExp(`^${t.replace(/\*/g,".*")}$`).test(i))}))))}function c(e,t){d(((n,i,r)=>e&&e.test(i.id)||t&&t.test(r.id)))}}});const Vc="ads.debug.messageTrace",zc="#FFEFD3/black #FFFEE4/black #D0ECEA/black #FBC3BC/black #C8FFBE/black",$c="display: inline-block; padding: 1px 4px; border-radius: 3px;",Hc=$c+"color: #fff; background: hsl(214deg 100% 55%); ",Wc="color: black; background: none;";function Zc(e,t){if(!(0,I.T$)(t))return t}var Gc=__webpack_require__(1590);const Xc=(0,_.x)("mvt");var Kc=__webpack_require__(9366);let Jc="";(0,qe.fo)("mvt",{isAdsFreeSupported:!0,ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init(e){let{getConfig:t,setConfig:n,log:i,ownName:r}=e;i("Initialising MVT plugin");const{selectedScenarios:s,scenarios:o,tests:a}=(0,Kc.s)(i,t("mvt.tests",[]));((e,t,n,i)=>{let r=e("plugins.enabled",[]),s=[],o=[];n.forEach((e=>{Array.isArray(e.plugins)?(Xc(`From scenario "${e.name}", adding plugins:`,e.plugins),s=[...s,...e.plugins]):"object"==typeof e.plugins&&(Array.isArray(e.plugins.add)&&(Xc(`From scenario "${e.name}", adding plugins:`,e.plugins.add),s=[...s,...e.plugins.add]),Array.isArray(e.plugins.remove)&&(Xc(`From scenario "${e.name}", removing plugins:`,e.plugins.remove),o=[...o,...e.plugins.remove]))}));const a=r.indexOf(i)+1;r.splice(a,0,...s);const d=new Set(o);r=r.filter((e=>!d.has(e))),t("plugins.enabled",[...new Set(r)])})(t,n,o,r),(0,Gc.m)(t,n,o),(0,y._D)(),Jc=a.map((e=>[e.name,s[e.name]])).filter((e=>{let[,t]=e;return t})).map((e=>e.join("="))).join(",")},run(e){let{broker:t}=e;const n=()=>{try{return(__webpack_require__.g.molMVTest||"").split(",").map((e=>e.trim()))}catch(e){return[]}},i=()=>[...Jc.split(","),...n()].filter((e=>e)).join(",");t.register("call for page analytics",(()=>({mvt:i()}))),t.emit("send with rta page unload",{mvt:i().split("=").join("_")}),t.emit("set page level targeting",{mvt:i().split("=").join("_").split(",")})}});const Yc={mediaTrust:"//scripts.webcontentassessor.com/scripts/bc585bfefc95184247617f742a451b7f4f99b8d4f250b51c2fabb00dee8e855d",ticio:"//d2tuygj4en2za2.cloudfront.net/script.js",confiant:"//confiant-integrations.global.ssl.fastly.net/pkity_Tu7korz-AKdcG26RZexkw/gpt_and_prebid/config.js"};function Qc(){const e=new Date;return{watershed:String(e.getHours()>=21||e.getHours()+e.getMinutes()/60<5.5)}}(0,qe.fo)("scanner",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},async init(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.scanner.sync",!1),s=n("plugins.scanner.setupTimeout",2e3),o=n("plugins.scanner.provider"),a=n("plugins.scanner.scriptUrl",Yc)[o];if(i("config:",{provider:o,sync:r,timeout:s}),!a)return void i.warn("unknown provider:",o);const d=it(a,{async:!r}),l={scanner:{provider:o}};t.register("call for page analytics",(()=>l)),d.then((()=>{i("provider script loaded"),l.scanner.enabled=!0})),await(0,D.yq)(s,d).catch((()=>{i.warn("provider script did not load fast enough, continue loading ads bundle..."),l.scanner.timeout=!0}))}}),(0,qe.fo)("watershed",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run(e){let{broker:t}=e;t.emit("set page level targeting",Qc()),t.register("get prebid tags",Qc)}});const eu=Symbol("private properties"),tu=1e3;class nu{constructor(e){let{broker:t,pos:n}=e;const i=this[eu]={};i.broker=t,i.pos=n,i.inView=!1}get inView(){return this[eu].inView}start(){const e=this[eu];e.slotVisibilityChangedSub=e.broker.on("slot visibility changed",e.pos,su.bind(this)),e.adViewableSub=e.broker.on("ad viewable",e.pos,iu.bind(this))}stop(){const e=this[eu];e.slotVisibilityChangedSub.cancel(),e.adViewableSub.cancel(),au.call(this)}}function iu(){if(this.inView)return;const e=this[eu];e.inView=!0,e.broker.emit("ad active view",e.pos)}function ru(){if(!this.inView)return;const e=this[eu];e.inView=!1,au.call(this),e.broker.emit("ad out of view",this[eu].pos)}function su(e){let{inViewPercentage:t}=e;t<50?ru.call(this):this[eu].timer||ou.call(this)}function ou(){this[eu].timer=setTimeout(iu.bind(this),tu)}function au(){const e=this[eu];e.timer=clearTimeout(e.timer)}class du{constructor(e){let{interval:t=3e4,broker:n,positions:i,ids:r,activeViewTracker:s,userInactivityMonitor:o=new ac({broker:n})}=e;const a={};this.interval=t,a.broker=n,a.positions=i,a.ids=r,a.userInactivityMonitor=o,a.activeSub=a.broker.on("user active",lu.bind(this)),s&&(a.activeViewTracker=s,a.activeViewSub=a.broker.on("ad active view",a.positions[0],lu.bind(this)),a.activeViewTracker.start()),this.stopped=!1,this.priv=a,this.refresh=cu.bind(this),n.on("force ads refresh",(async()=>{this.refresh(),await n.until("ad rendered"),oc("Ads force-refreshed")})),n.on("ad rendered",(e=>{a.positions.includes(e)&&a.timer&&this.start()}))}start(){const e=this.priv;e.timer=clearTimeout(e.timer),e.stopped=!1,e.remaining=e.remaining||this.interval,e.timer=setTimeout(this.refresh,e.remaining)}stop(){const e=this.priv;e.activeSub.cancel(),e.activeViewTracker&&(e.activeViewSub.cancel(),e.activeViewTracker.stop()),e.timer=clearTimeout(e.timer),e.remaining=0,this.stopped=!0}}function lu(){0===this.priv.remaining&&cu.call(this)}function cu(){const e=this.priv;if(oc("Refresh: ",{positions:e.positions.join(" "),ids:e.ids.join(" "),active:e.userInactivityMonitor.active,inView:e.activeViewTracker?e.activeViewTracker.inView:"N/A"}),!e.userInactivityMonitor.active||e.activeViewTracker&&!e.activeViewTracker.inView)return e.timer=clearTimeout(e.timer),void(e.remaining=0);oc("Refreshing",{positions:e.positions.join(" "),ids:e.ids.join(" ")}),e.broker.emit("prepare to refresh ads",e.positions),e.broker.emit("refresh ads",{ids:e.ids,reason:"periodic",positions:e.positions}),this.start()}const uu=e=>{let{broker:t,pos:n,type:i,adRefresher:r,slotViewedPromise:s}=e;return"activeView"===i?t.once("ad viewable",n,o).cancel:(s.then(o),()=>{});function o(){r.stopped?oc(`adRefresher for ${n} already stopped, and won't be started`):(r.start(),oc(`Refreshing position ${n}`))}};function pu(e){let{broker:t,getConfig:n,log:i}=e;const r=n("adsRefresh.cancelOn1x1Billboard",!0),{intervalRefreshSlots:s,activeViewRefreshSlots:o}=function(e){const t=e("adsRefresh.interval",6e4);return{intervalRefreshSlots:e("adsRefresh.slots",[]).reduce(((e,n)=>({...e,[n]:{pos:n,interval:t,type:"interval"}})),{}),activeViewRefreshSlots:e("adsRefresh.activeViewSlots",[]).reduce(((e,t)=>{let{pos:n,interval:i}=t;return{...e,[n]:{pos:n,interval:i,type:"activeView"}}}),{})}}(n);if((0,I.xb)(s)&&(0,I.xb)(o))return void i("no slot refresh config provided, bailing");const a=new Promise((e=>t.once("ad viewable",(t=>{i(`Position "${t}" viewed, refreshes will start immediately`),e()})))),d=n("adsRefresh.inactiveTime",1e4),l=new ac({broker:t,inactiveTime:d});l.start();const c={broker:t,userInactivityMonitor:l,log:i,slotViewedPromise:a},u={...s,...o};r&&(i("will cancel refreshing ads upon 1x1 billboard"),t.on("ad rendered","billboard",(e=>{!e.isEmpty&&e.size&&e.size.every((e=>1===e))&&(i("1x1 billbaord received, cancel refreshing"),t.emit("stop refreshing ads"))}))),t.on("slot defined",(e=>{let{pos:t,id:n}=e;if(u[t]){i("slot defined, found refresher",u[t]),u[t].id=n;const e=function(e){let{broker:t,userInactivityMonitor:n,pos:i,id:r,interval:s,type:o}=e;oc(`Start refreshing: ${i}, id: ${r}, with ${o} refresh of ${s}ms`);const a="activeView"===o&&new nu({broker:t,pos:i});return new du({broker:t,interval:s,positions:[i],ids:[r],userInactivityMonitor:n,activeViewTracker:a})}({...c,...u[t]});u[t].adRefresher=e,u[t].cancel=uu({...c,...u[t]})}})),t.on("pause refreshing ads",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(u);const t=i.extend("pause");for(const n of e)u[n]?u[n].adRefresher?u[n].adRefresher.stopped?t.warn(`"${n}" position has already stopped refreshing.`):(u[n].adRefresher.stop(),t.info(`"${n}" position refresh is paused`)):t.warn(`"${n}" position has not been setup to refresh yet.`):t.warn(`"${n}" position is not configured to refresh and is therefore probably not refreshing.`)})),t.on("resume refreshing ads",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(u);const t=i.extend("resume");for(const n of e)u[n]?u[n].adRefresher?u[n].adRefresher.stopped?(u[n].adRefresher.start(),t.info(`"${n}" position refresh is resumed`)):t.warn(`"${n}" position isn't paused.`):t.warn(`"${n}" position has not been setup to refresh yet.`):t.warn(`"${n}" position is not configured to refresh.`)})),t.on("stop refreshing ads",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i("Received request to stop ads refreshing altogether",e);const{positions:n=[],activeView:r=!0}=e,o=r?u:s;(n.length?(0,P.e$)(o,n):Object.keys(o)).forEach((e=>{const{id:t,type:n}=u[e];i(`stopping ${n} refresh for ${e}, id: ${t}`),u[e].adRefresher&&u[e].adRefresher.stop(),u[e].cancel&&u[e].cancel(),delete u[e]})),(0,I.xb)(u)&&(t.emit("send event to bidmax",{type:"custom",payload:{module:"refreshManager",event:"fullStop"}}),l.stop())}))}pu.ccpa={enabledIfDissent:!0},pu.gdpr={enabledIfDissent:!0},pu.disableIfNoAdsServable=!1;const hu=()=>{};hu.pluginSetup=e=>{let{broker:t,getConfig:n,log:i}=e;if(!n("arrowKeysScroll.userAgents",[".*"]).some((e=>navigator.userAgent.match(new RegExp(e)))))return;(0,I.ns)(["DM"],__webpack_require__.g).arrowKeysScrollEnabled=!0;const r=n("arrowKeysScroll.stride",40);if(document.addEventListener("keydown",(e=>{if(e.altKey||e.ctrlKey||e.metaKey||e.target!==document.body)return;let t;switch(e.keyCode){case 38:t=-r;break;case 40:t=r}t&&(event.preventDefault(),event.stopPropagation(),window.scrollBy(0,t))})),"scrollRestoration"in history){history.scrollRestoration="manual";const e=history.state;e&&"arrow-keys-scroll"===e.name&&(i("state stored:",e),t.once("dom loaded",(()=>{0===window.pageYOffset?(i("restoring scroll offset to:",e.pageYOffset),window.scrollTo(window.pageXOffset,e.pageYOffset)):i("page scrolled to",window.pageYOffset,", ignoring scroll restore")})));const n=()=>{const e={name:"arrow-keys-scroll",version:1,pageYOffset:window.pageYOffset};history.replaceState(e,document.title)};window.addEventListener("scroll",DM.molFeMiniLodash.debounce(n,200),{passive:!0,capture:!0})}},hu.isAdsFreeSupported=!0,hu.ccpa={enabledIfDissent:!0},hu.gdpr={enabledIfDissent:!0};const fu=hu,gu=e=>{const t=document.querySelector(`#${e.slot.getSlotElementId()} iframe`);return t&&"90"===t.getAttribute("height")};function mu(e){let{broker:t}=e;t.on("slot defined",(e=>{if("billboard"!==e.pos)return;t.intercept("ad rendered","billboard",((e,t)=>{let[,i,r]=e;try{n(i,r)}finally{t()}}));const n=(t,n)=>{if(n.isEmpty)return;if(!document.getElementById(e.parentId).parentNode)return;const i=document.getElementsByClassName("molads_billboard_on")[0];i&&(gu(n)?i.classList.add("molads_ldr_billboard_on"):i.classList.remove("molads_ldr_billboard_on"))}}))}mu.ccpa={enabledIfDissent:!0},mu.gdpr={enabledIfDissent:!0},mu.disableIfNoAdsServable=!0;var yu=__webpack_require__(8909),vu=__webpack_require__.n(yu);const bu="https://ovp.iris.tv/libs/context/iris-context.min.js",_u="W491AUI45FTTFWD";function wu(e){let t,{broker:n,log:i}=e;const r=new Promise((e=>{window.addEventListener("IrisContextAPI",(()=>{i("Loaded"),t=window.IrisContextAPI({client_token:_u}),e(t)}))})),s=vu()((async e=>{if(!e)return{};await r;const n=await t.getVideoInfo(e);return i(`Info for video ${e}`,n),(0,I.ei)(n,["context","categories","iris_id"])}));n.invoke("import script",bu),n.register("get IrisTV tags",s),n.register("get video tags",(async e=>{let{videoId:n}=e;if(!t)return void i("Video auction started but IrisTV still not available");if(!n)return void i("IrisTV loaded but no videoId provided");i("Auction for video:",n);const r=(0,I.ei)(await s(n),["context","categories"]);return i("cust_params:",r),{cust_params:r}}))}wu.vendorIds={gdpr:"N/A"},wu.purposeIds={gdpr:[1]},wu.disableIfNoAdsServable=!0;const Tu=e=>{let{broker:t,getConfig:n}=e,i=[];t.on("plugins enabled",(e=>{i.lengh&&t.emit("creative updated plugins",i)})),t.register("get plugins set by creative",(async()=>i)),__webpack_require__.g.addEventListener("message",(async e=>{let{data:n}=e;"object"==typeof n&&"managePlugins"===n.callId&&(i=n.plugins||[],__webpack_require__.g.postMessage("managePluginsReceived","*"),t.emit("creative updated plugins",i),b.SP.hasOwnProperty("setPlugin")&&console.log(`message from creative ${JSON.stringify(i)}`))}))};Tu.ccpa={enabledIfDissent:!0},Tu.gdpr={enabledIfDissent:!0};const Iu=Tu,Su=e=>{let{broker:t}=e;const n=(0,y.U2)("plugins.nativo.scriptSrc","//s.ntv.io/serve/load.js");t.invoke("import script",n)},ku=Su;function Cu(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.nonPersonalizedAds.sendNPA",!0),s=n("plugins.nonPersonalizedAds.sendIllegalAttempts",!0),o={npa:!1,npaIllegalAttempts:[]};let a=e=>{t.once("gpt loaded",(()=>{googletag.pubads().setRequestNonPersonalizedAds(e)}))};t.once("gpt loaded",(()=>{const e=googletag.pubads();a=e.setRequestNonPersonalizedAds.bind(e),e.setRequestNonPersonalizedAds=e=>{const t=new Error(`Illegal attempt to call setRequestNonPersonalizedAds(${JSON.stringify(e)})`);o.npaIllegalAttempts.push(t.stack),i.warn(t)}})),t.register("call for page analytics",(()=>{const e={};return r&&(e.npa=o.npa),s&&(e.npaIllegalAttempts=[...o.npaIllegalAttempts]),o.npaIllegalAttempts=[],e})),t.on("set non personalized ads",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;o.npa=!!e,a(e)}))}Su.vendorIds={gdpr:[263]},Su.purposeIds={gdpr:"N/A"},Cu.ccpa={enabledIfDissent:!0},Cu.gdpr={enabledIfDissent:!0};const Eu=(0,_.x)("page-visibility");function Au(e){let{broker:t}=e;t.register("is page visible?",(()=>new Promise(((e,t)=>e((()=>{const e=document.hasFocus();return Eu("isPageVisible",e),e})()))))),__webpack_require__.g.top.addEventListener("blur",(()=>{setTimeout((()=>{Eu("Blur event - page hidden"),t.emit("page hidden")}))})),__webpack_require__.g.top.addEventListener("focus",(()=>{setTimeout((()=>{Eu("Focus event - page visible"),t.emit("page visible")}))}))}Au.isAdsFreeSupported=!0,Au.ccpa={enabledIfDissent:!0},Au.gdpr={enabledIfDissent:!0};const Pu="mol.ads.paidSession",xu=()=>JSON.parse(localStorage.getItem(Pu))||{},Du=e=>localStorage.setItem(Pu,JSON.stringify(e)),Ou=()=>localStorage.removeItem(Pu);function Ru(e){let{broker:t,getConfig:n}=e;const i=xu();let r="none",s="none";const o=1e3*n("plugins.paidSessions.maxIntervalInSeconds",900);i&&i.lastUpdate&&i.lastUpdate>=Date.now()-o?(i.lastUpdate=Date.now(),Du(i),s=i.utm_source,r=i.session_page_ID):b.SP.utm_source?(s=b.SP.utm_source,r=PageCriteria.articleId,Du({lastUpdate:Date.now(),utm_source:s,session_page_ID:r})):Ou();const a={session_page_ID:r,utm_source:s};t.emit("set page level targeting",a),t.register("call for page analytics",(()=>a))}Ru.ccpa={enabledIfDissent:!0},Ru.gdpr={enabledIfDissent:!0},Ru.disableIfNoAdsServable=!0;var Nu=__webpack_require__(2280),Mu=__webpack_require__.n(Nu);const Lu="38384040373937396665",Uu="211242";function ju(e){let{broker:t,getConfig:n}=e;const i=n("remoteDebugHooks",!0);localStorage.removeItem("mol.ads.debug.label");const r={auctions:[],auctionByPos:{},started:{},queue:[],bids:{},kv:{},gkv:{}},s=function(e){return r.auctionByPos[e]||r.auctionByPos[e.substr(0,e.lastIndexOf("-"))]},o=(e,t)=>{if(!s(e))return;const n=s(e);n.slots[e]||(n.slots[e]={}),n.slots[e][t]||(n.slots[e][t]=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:__webpack_require__.g.adverts.startTime;return parseFloat(((Date.now()-e)/1e3).toFixed(1))}())},a=e=>Array.isArray(e)?1===e.length?a(e[0]):e.join(", "):"boolean"==typeof e||isNaN(e)?e:parseFloat(e),d=e=>Object.keys(e).reduce(((t,n)=>(Object.keys(e[n]).forEach((i=>{t[i]=t[i]||{},t[i][n]=e[n][i]})),t)),{}),l=function(e){console.group("Auction Performance"),console.table(d(Object.fromEntries(Object.entries(e.streamAuctions).map((e=>{let[t,{endpoints:n}]=e;return[t,Object.fromEntries(Object.entries(n).map((e=>{let[t,n]=e;return[t,n>1e3?"ready":n]})))]}))))),console.groupEnd()},c=function(e){return(!r.currentAuction||r.currentAuction.lastPosTime<Date.now()-5e3)&&(r.currentAuction={id:r.auctions.length,slots:{},ads:{},kv:{},bids:{},streamAuctions:{}},r.auctions.push(r.currentAuction)),r.currentAuction.lastPosTime=Date.now(),r.currentAuction.streamAuctions[e]||(r.currentAuction.streamAuctions[e]={start:0,endpoints:{}}),r.auctionByPos[e]=r.currentAuction};t.on("get tags",(e=>{let{slot:{pos:t}}=e;c(t).streamAuctions[t].start=Date.now()})),t.on("get video tags",(e=>{let{slot:{pos:t}}=e;c(t)})),t.on("ad rendered",((e,t)=>{o(e,"ad rendered");let n=e,i=0;const r=s(e);for(;r.ads[n];)i++,n=`${e} ${i}`;const a=r.ads[n]={};a.creativeId=t.creativeId||t.sourceAgnosticCreativeId,a.lineItem=t.lineItemId||t.sourceAgnosticLineItemId,a.adUnit=t.slot.molAd.adUnit,t.sourceAgnosticLineItemId&&t.creativeId!==t.sourceAgnosticCreativeId&&(a["reservation or backfil"]=!0)})),t.on("headerbidder winner",((e,t)=>{const n=s(e);n&&n.ads[e]&&(n.ads[e]["headerbidder winner"]=t)})),t.on("ad viewable",((e,t)=>{o(e,"ad viewable")})),t.on("ad loaded",((e,t)=>{o(t,"ad loaded")})),t.on("slot defined",(e=>{e.slotTypes.includes("gpt")&&!e.slotTypes.includes("gptOOP")&&(c(e.pos),o(e.pos,"slot defined"))})),t.on("start bidding",(e=>{c(e),o(e,"start bidding"),r.started[e]=Date.now()})),t.on("ready to request",(e=>o(e,"ready to request"))),t.on("ad requested",(e=>o(e,"ad requested"))),t.on("bidding ended",(e=>o(e,"bidding ended"))),t.on("bids requested",(e=>{let{positions:t}=e;t.forEach((e=>{c(e),o(e,"prebid called")}))})),t.on("bid",((e,t)=>{let{bidder:n,cpm:i}=t;const r=i,s=c(e),o=s.bids[e]=s.bids[e]||{},a=r/100;(!o[n]||o[n]<a)&&(o[n]=a)})),t.on("set key value",((e,t,n)=>{const i=c(e);(i.kv[e]=i.kv[e]||{})[a(t)]=a(n)}));const u=e=>c(e).streamAuctions[e],p=(e,t)=>{e.endpoints[t]=Math.round((Date.now()-e.start)/10)/100};function h(){const e=document.createElement("div");e.innerHTML=Mu()();const t=e.firstChild;document.body.appendChild(t),setTimeout((()=>{window.debugRemoteLabel.focus(),window.debugRemoteLabel.addEventListener("keyPress",(e=>{"Enter"===e.key&&window.enterDebugRemoteButton.click()})),window.enterDebugRemoteButton.addEventListener("click",(()=>{localStorage.setItem("dmg.ads.debug.label",window.debugRemoteLabel.value),location.reload()}))}))}t.on("auction event",((e,t,n)=>{const i=u(e);if(!i.ended)if("interested endpoint"===t){0===i.start&&(i.start=Date.now(),Object.keys(i.endpoints).forEach((e=>{const t=i.endpoints[e];Number.isFinite(t)&&(i.endpoints[e]=Math.round((1e3*t-i.start)/10)/100)})));const e=(n.endpoints||[]).filter((e=>void 0===i.endpoints[e])),t=Object.fromEntries(e.map((e=>[e,"pending"])));i.endpoints={...i.endpoints,...t}}else"stream done"===t?p(i,n.endpoint):"end"===t&&(i.ended=!0,Object.entries(i.endpoints).forEach((e=>{let[t,n]=e;"string"==typeof n&&(i.endpoints[t]="missing")})))})),t.on("plugin done",((e,t)=>{const n=u(e);n.ended||p(n,t)})),__webpack_require__.g.openAdsControlPanel=()=>{const e=n("controlPanel.url");e&&t.emit("load script",e,null,{},(()=>!0))},i&&setTimeout((()=>(function(){let e="";document.addEventListener("keydown",(t=>{const{keyCode:n}=t;e+=""+n,e===Lu&&(t.preventDefault(),h()),Lu.indexOf(e)&&(e=""+n)}))}(),void t.once("ad rendered","sticky_banner",(()=>{const e=__webpack_require__.g.stickyBannerUnderlay;e&&function(e){var t;const n=[],i=null!==(t=__webpack_require__.g.MobileUtils)&&void 0!==t&&t.isMobile()?"touchstart":"mousedown";e.addEventListener(i,(e=>{if(e.stopPropagation(),e.preventDefault(),n.push(e.timeStamp),7===n.length){const e=[...n];for(let t=e.length-1;t>0;t--)e[t]=e[t]-e[t-1];n.shift(),e.shift();const t=(e[1]+e[2])/2;e.map((e=>Math.round(e/t))).join("")===Uu&&h()}}),{capture:!0,passive:!1})}(e)}))))),__webpack_require__.g.adverts.performance={state:r,print:()=>{r.auctions.forEach((e=>{console.group(`Auction ${e.id}`),console.group("Slots performance"),console.table(e.slots),console.table(e.ads),console.groupEnd(),console.group("Key+values"),console.table(d(e.kv)),console.groupEnd(),console.group("Bids"),console.table(e.bids),console.groupEnd(),l(e),console.groupEnd()})),console.group("Page level Key+values"),console.table(r.gkv),console.groupEnd()},printAuctionPerformance:()=>{r.auctions.forEach((e=>{console.group(`Auction ${e.id}`),l(e),console.groupEnd()}))}}}async function Bu(){const e=(0,y.U2)("plugins.pixelSync.byCMPVendor",{}),t=Object.keys(e),n=await qu(t);for(const i of t)n(i,e[i])}ju.ccpa={enabledIfDissent:!0},ju.gdpr={enabledIfDissent:!0};const qu=async e=>{const{vendorConsents:t}=await Xt("getVendorConsents",e);return(e,n)=>t[e]&&Fu(n)},Fu=e=>{(new Image).src=e};Bu.vendorIds={gdpr:!1};var Vu=__webpack_require__(2695),zu=function(e,t,n){if(n||2===arguments.length)for(var i,r=0,s=t.length;r<s;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},$u=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},Hu=function(e){this.version=e,this.type="node",this.name="node",this.os=Vu.platform},Wu=function(e,t,n,i){this.name=e,this.version=t,this.os=n,this.bot=i,this.type="bot-device"},Zu=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},Gu=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},Xu=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Ku=3,Ju=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],Yu=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Qu(e){var t=function(e){return""!==e&&Ju.reduce((function(t,n){var i=n[0],r=n[1];if(t)return t;var s=r.exec(e);return!!s&&[i,s]}),!1)}(e);if(!t)return null;var n=t[0],i=t[1];if("searchbot"===n)return new Zu;var r=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);r?r.length<Ku&&(r=zu(zu([],r,!0),function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(Ku-r.length),!0)):r=[];var s=r.join("."),o=function(e){for(var t=0,n=Yu.length;t<n;t++){var i=Yu[t],r=i[0];if(i[1].exec(e))return r}return null}(e),a=Xu.exec(e);return a&&a[1]?new Wu(n,s,o,a[1]):new $u(n,s,o)}const ep=b.SP["mol.ads.programmatic.debug"],tp=(e,t)=>({chrome:e("prog.campaign.percentage.chrome",.7),crios:e("prog.campaign.percentage.crios",.7)}[t]);function np(e){let{broker:t,getConfig:n}=e;const i=o?Qu(o):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new Gu:"undefined"!=typeof navigator?Qu(navigator.userAgent):void 0!==Vu&&Vu.version?new Hu(Vu.version.slice(1)):null,r=Math.random(),s=i&&i.name&&tp(n,i.name)||0;var o;ep&&console.log(`[PROG CAMPAIGN] browser: ${i&&i.name}, chance: ${s}, rand: ${r}`),s>r&&t.emit("set page level targeting",{prog:!0})}async function ip(e){let{broker:t,getConfig:n}=e;__webpack_require__.g.window._qevents=__webpack_require__.g.window._qevents||[],__webpack_require__.g.window._qevents.push({qacct:"p-yVg_z7_Zx4fHs"}),t.invoke("import script","https://secure.quantserve.com/quant.js")}function rp(e){let{broker:t,log:n}=e;const i={},r={},s={total:0,auction:{},video:{}};function o(e,t,o){let a;return!r[o]&&i[o]&&(n("[",o,"] ad viewable, but bidding in progress - assuming the auction ended",i[o]),r[o]=i[o],delete i[o]),r[o]?(a=r[o].cpm,s.total+=a,s[e][t]=(s[e][t]||0)+a,n("[",o,"] ad viewable",r[o],"summary.total",s.total),delete r[o]):n("[",o,"] ad viewable - no winner"),a}window.adverts.getRevenueSummary=()=>s,t.on("bids requested",(e=>{e.positions.forEach((e=>{n("[",e,"] start auction"),delete i[e]}))})),t.on("bid",((e,t)=>{let{bidder:r,cpm:s}=t;(!i[e]||i[e].cpm<s)&&(i[e]={bidder:r,cpm:s}),n("[",e,"]",r,"offers to pay",s)})),t.on("bidding ended",(e=>{i[e]?(r[e]=i[e],delete i[e],n("[",e,"] bidding ended",r[e])):n("[",e,"] bidding ended - no bids")})),t.on("video ad viewable",(e=>{let{pos:t,videoId:n}=e;return o("video",n||"unknown",t)})),t.on("ad viewable",(e=>o("auction",e,e)))}np.ccpa={enabledIfDissent:!0},np.gdpr={enabledIfDissent:!0},np.disableIfNoAdsServable=!0,ip.vendorIds={gdpr:[11]},ip.purposeIds={gdpr:"N/A"},rp.ccpa={enabledIfDissent:!0},rp.gdpr={enabledIfDissent:!0},rp.disableIfNoAdsServable=!0;const sp=(0,_.x)("rta");function op(e){let{broker:t}=e;t.on("send to rta",(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"store";if(__webpack_require__.g.RTA&&"function"==typeof __webpack_require__.g.RTA.tedEvent){const i={action:n,name:e,value:t};sp("Sending:",i),__webpack_require__.g.RTA.tedEvent("page_event",i)}}))}function ap(e){let{broker:t}=e;(0,Se.loaded)().then((()=>t.emit("dom loaded"))),DM.later("DOM_READY",(()=>t.emit("dom ready"))),window.addEventListener("load",(()=>t.emit("page load")))}op.isAdsFreeSupported=!0,op.ccpa={enabledIfDissent:!0},op.gdpr={enabledIfDissent:!0},ap.isAdsFreeSupported=!0,ap.ccpa={enabledIfDissent:!0},ap.gdpr={enabledIfDissent:!0};const dp=(e,t)=>{let{isEmpty:n,slot:i}=t;if(!n)switch(e){case"billboard-oop":return cp();case"billboard":return lp(document.getElementById(i.getSlotElementId()))}},lp=e=>{if(!e)return;const t=e.querySelector(".mol-ads-label-container");t&&e.parentNode.appendChild(t)},cp=()=>{const e=document.createElement("div"),t=document.createElement("div"),n=document.createTextNode((0,y.U2)("label.text","ADVERTISEMENT"));t.classList.add("mol-ads-skin-label"),t.appendChild(n),e.classList.add("mol-ads-skin-label-container"),e.appendChild(t),document.body.appendChild(e)},up=e=>{let{imageURL:t,clickURL:n}=e;const{body:i}=document;document.documentElement.classList.add("mol-ads-skin-enabled");const r=document.createElement("a");r.className="mol-ads-skin-click-target",r.href=n;const s=document.createElement("div");s.className="mol-ads-skin-pad",i.insertBefore(r,i.firstChild),i.insertBefore(s,r),(0,Se.appendStyle)(`\nbody { background-image: url(${t}); }\n`),adverts.stopRefreshingAds(),cp()};function pp(e){let{broker:t}=e;t.on("add skin to page",up),t.on("add skin label to page",cp),t.on("ad rendered",dp)}pp.ccpa={enabledIfDissent:!0},pp.gdpr={enabledIfDissent:!0},pp.disableIfNoAdsServable=!0;const hp=function(){let{delay:e=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[];return n=>{t.push(n),setTimeout((()=>t.shift()()),e)}},fp={sync:()=>e=>e(),async:hp,serial:()=>{const e=[];let t;const n=()=>{t=e.length&&setTimeout(i,0)},i=()=>{e.shift()(),n()},r=i=>{e.push(i),t||n()};return r.pause=()=>{t&&(clearTimeout(t),t=!1)},r.resume=()=>{t||n()},r.queue=e,r},idle:()=>__webpack_require__.g.requestIdleCallback?e=>__webpack_require__.g.requestIdleCallback(e):hp(),nextFrame:()=>__webpack_require__.g.requestAnimationFrame?e=>__webpack_require__.g.requestAnimationFrame(e):hp(),fps:__webpack_require__.g.requestAnimationFrame?function(){let e,{fps:t=20,count:n=1,internalExecuter:i="serial",...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=parseInt(t),n=parseInt(n);let s=0,o=[];const a=fp[i](r);let d=0;function l(e){a((()=>{e()}))}return requestAnimationFrame((function i(r){requestAnimationFrame(i),e?(d=1e3/(r-e),d>=t?(s++,s===n&&function(){const e=o;o={push:l},e.forEach(l),!e.length&&a.resume&&a.resume()}()):(s>=n&&(a.pause&&a.pause(),o=[]),s=0),e=r):e=r})),e=>{o.push(e)}}:hp};function gp(e){let{broker:t,getConfig:n}=e;const{type:i,...r}=n("scheduler.executer",{type:"async"}),s=(0,fp[i])(r);t.register("call for page analytics",(()=>({executer:i}))),t.bus.setDispatcher(s),r.debug&&console.log("Message dispatcher strategy:",i,r)}gp.isAdsFreeSupported=!0,gp.ccpa={enabledIfDissent:!0},gp.gdpr={enabledIfDissent:!0};const mp=gp;async function yp(e){let{broker:t,getConfig:n}=e;const i=/^https?:\/\/t\.co(\/.*)?$/.test(document.referrer),r="newzit.app"===b.SP.source,s=n("molFeSmartBanner");t.once("dom ready",(async()=>{!MobileUtils.isMobile()&&!(0,b.bP)()||(0,b.ej)("smart-banner")||i||r||DM.molFeComponents.setConfig("molFeSmartBanner",s)}))}function vp(e){let{broker:t}=e;t.emit("set page level targeting",{abv:"7.9.0"})}function bp(e){let{broker:t,log:n}=e;n("video-events starting");const i=DM&&DM.pageEvents,r=[i.VIDEO_ADVERT_ABORTED,i.VIDEO_ADVERT_COMPLETED,i.VIDEO_ADVERT_FAILED,i.VIDEO_ADVERT_IMPRESSION,i.VIDEO_ADVERT_NOT_SHOWN,i.VIDEO_ADVERT_STARTED,i.VIDEO_CONTENT_ABORTED,i.VIDEO_CONTENT_COMPLETED,i.VIDEO_CONTENT_STARTED,i.VIDEO_DATA_READY,i.VIDEO_PLAYER_READY,i.VIDEO_PROGRESS,i.VIDEO_STREAM_FAILED,i.VIDEO_STREAM_STARTED];i&&r.forEach((e=>{i.subscribe(e,((i,r)=>{n("firing:",e),t.emit(`video page event ${e}`,e,r)}))}))}yp.isAdsFreeSupported=!0,yp.ccpa={enabledIfDissent:!0},yp.gdpr={enabledIfDissent:!0},vp.isAdsFreeSupported=!0,vp.ccpa={enabledIfDissent:!0},vp.gdpr={enabledIfDissent:!0},bp.ccpa={enabledIfDissent:!0},bp.gdpr={enabledIfDissent:!0},bp.disableIfNoAdsServable=!0;var _p=__webpack_require__(1782);const wp=(0,_.x)("context"),Tp=(async()=>{const e="https://cmp.dmgmediaprivacy.co.uk/locationjson.html";try{return(await fetch(e)).json()}catch(t){wp.warn("error loading",e)}})(),Ip=_p.ZP.isAndroidTablet()||_p.ZP.isIPad()&&!_p.ZP.isIPhone()?"tablet":_p.ZP.isMobile()?"mobile":"desktop",Sp="channel"===__webpack_require__.g.PageCriteria.pageType&&(0,y.U2)("page.homepages",["home","ushome","auhome","mailonsunday"]).includes(__webpack_require__.g.PageCriteria.channel)&&__webpack_require__.g.PageCriteria.subchannel===__webpack_require__.g.PageCriteria.channel,kp={adPageType:__webpack_require__.g.adPageType,device:Ip,DM:__webpack_require__.g.DM,isAdsFreeUser:()=>__webpack_require__.g.isAdFreeEntitled&&__webpack_require__.g.isAdFreeEntitled(),isHomepage:Sp,isTCFV2Jurisdiction:async e=>e("tcfv2.enabled",!1),pageCriteria:{...__webpack_require__.g.PageCriteria},pageMeta:{...__webpack_require__.g.DM.getPageMetadata()},pageGeoInfo:function(){return Tp},queryParams:b.SP};function Cp(e,t){return Object.keys(t("slots.enabled",{})).includes(e)}(0,qe.fo)("api",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run(e){let{broker:t,getConfig:n,log:i}=e;!function(e){let{broker:t}=e;t.on("api message","openCmpBanner",(()=>{t.emit("openCmpBanner")}))}({broker:t}),t.on("api message","adSlotMount",(e=>{let{variant:i,position:r,pos:s,id:o,slotId:a,containerId:d}=e;const l=r||s,c=o||a;if(Cp(l,n)){const e={pos:l,id:c,parentId:a,variant:i,containerId:d};t.emit("slot mounted",e)}})),t.on("api message","adSlotUnmount",(e=>{let{position:n}=e;i("adSlotUnmount",n),t.emit("destroy slot",n)})),t.on("api message","adSlotUpdate",(e=>{let{position:r,slotId:s}=e;Cp(r,n)&&(i("adSlotUpdate",{position:r,slotId:s}),t.emit("prepare to refresh ads",[r]),t.emit("refresh ads",{positions:[r],ids:[s],reason:"api message"}))})),t.on("api message","onAdRendered",(e=>{t.on("ad rendered",e)})),t.on("api message","onAdRequest",(e=>{t.on("dfp slot requested",e)})),t.on("api message","imageGalleryOpen",(()=>{i("imageGalleryOpen"),t.emit("image gallery open")})),t.on("api message","imageGalleryClose",(()=>{i("imageGalleryClose"),t.emit("image gallery close")})),t.on("api message","adBlockerDetection",(e=>{i("adBlockerDetection",e),t.emit("ad block detection result",e)})),t.on("api message","adBlockerDetectionStatus",(e=>{t.emit("adblock detection status",e)})),t.on("api message","takeover",(e=>{let{type:n,config:r}=e;i("takeover requested",n),t.emit("takeover",n,r)})),t.on("api message","loadIASVerificationPixel",(e=>{t.emit("loadIASVerificationPixel",e)})),t.on("api message","fullScreenOverlayStarted",(e=>{let{owner:n}=e;i("fullScreenOverlayStarted",n),t.emit("fullScreenOverlayStarted",n)})),t.on("api message","fullScreenOverlayEnded",(e=>{let{owner:n}=e;i("fullScreenOverlayEnded",n),t.emit("fullScreenOverlayEnded",n)}));const r={};t.on("api message","startActiveViewTrack",(e=>{let{handle:n,element:s,callback:o}=e;i("start tracking viewability for:",n,s),r[n]=t.on("ad viewable",n,(function(){try{i("element viewable:",n),o(...arguments)}catch(e){i.warn("error in callback for viewability tracker",n,e)}})),t.emit("track viewability",n,s)})),t.on("api message","stopActiveViewTrack",(e=>{let{handle:n}=e;t.emit("untrack viewability",n);const s=r[n];s&&(delete r[n],s.cancel()),i("stopped tracking viewability for:",n)})),t.on("api message","checkVendor",(async e=>{const{vendorRegistry:n,vendorId:r,onConsent:s,onDissent:o,onError:a}=e;i("checkVendor",n,r);let d=!1;const l=(await t.invokeAll({message:["check vendor consent",e],catch:e=>{d=!0,a(e)}}))[0];if(!d){const{isConsented:e,errorMsg:t}=l||{};t?a(new Error(t)):e||void 0===l?s():o()}})),t.on("api message","getArticleImages",(e=>{t.emit("get article images",e)}))}});const Ep=e=>{let{broker:t}=e;const n=(0,y.U2)("plugins.audienceProject.scriptSrc","https://sak.userreport.com/mol/launcher.js");t.invoke("import script",n,{id:"userreport-launcher-script"})};Ep.vendorIds={gdpr:[394]},Ep.purposeIds={gdpr:"N/A"},(0,qe.fo)("dmp.airgrid",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.dmp.airgrid.accountId","pqIdXN"),s=n("plugins.dmp.airgrid.publisherId","kip2fp"),o=n("plugins.dmp.airgrid.apiKey","p7z1Zng10vQa6gGEAUva"),a=__webpack_require__.g.edktInitializor=__webpack_require__.g.edktInitializor||{};a.accountId=r,a.publisherId=s,a.apiKey=o,a.invoked||(a.invoked=!0,a.load=function(e){const n=`https://cdn.edkt.io/${e||"sdk"}/edgekit.min.js`;t.emit("import script",n)},a.load(a.accountId)),t.register("dmp","airgrid",(()=>{try{return JSON.parse(localStorage.getItem("edkt_matched_audience_ids")||[])}catch{return[]}}))},vendorIds:{gdpr:[782]}});const Ap=e=>t=>t.startsWith(e),Pp=e=>t=>t.includes(e),xp=[["Social|Instagram",(0,I.ar)({referringUrl:Pp("instagram.com")})],["Other Websites|MSN",(0,I.ar)({referringUrl:Pp("msn.com")})],["Social|Reddit",(0,I.ar)({referringUrl:Pp("reddit")})],["Other Websites|Upday",(0,I.ar)({referringUrl:Pp("axelspringer")})],["Other Websites|Break.ma",(0,I.ar)({referringUrl:Pp("break.ma")})],["Other Websites|Flipboard",(0,I.ar)({referringUrl:Pp("flipboard")})],["Other Websites|NewsNow",(0,I.ar)({referringUrl:Pp("newsnow")})],["Social|Pinterest",(0,I.ar)({referringUrl:Pp("pinterest")})],["Search|DuckDuckGO",(0,I.ar)({referringUrl:Pp("duckduckgo")})],["Search|Yahoo",(0,I.ar)({referringUrl:Pp("yahoo")})],["Other Websites|Drudgereport",(0,I.ar)({referringUrl:Pp("drudgereport")})],["Other Websites|Newzit",(0,I.ar)({referringUrl:Pp("newzit")})],["Social|Twitter",(0,I.ar)({referringUrl:Ap("https://t.co")})],["Search|Bing",(0,I.ar)({referringUrl:Pp("bing")})],["Search|Google App",(0,I.ar)({referringUrl:Pp("com.google")})],["Search|Google News",(0,I.ar)({referringUrl:Pp("news.google.com")})],["Search|Google Websearch",(0,I.ar)({referringUrl:Pp("google")})],["Social|Facebook",(0,I.ar)({referringUrl:Pp("facebook")})],["Push Channels|Push Notifications",(0,I.ar)({itoExternalSession:Ap("push-no")})],["Push Channels|Windows Widget",(0,I.ar)({itoExternalSession:Ap("windows-widget")})],["Direct|Direct",(0,I.ar)({referringDomain:e=>"undefined"===e||"www.dailymail.co.uk"===e,itoExternalSession:("undefined",e=>"undefined"===e)})]];function Dp(e){const[t]=xp.find((t=>{let[n,i]=t;return i(e)}))||["Other Websites|Other Websites"];return t}(0,qe.fo)("gpt-targeting.ga.referrer",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},run:function(e){let{broker:t,DM:n,getConfig:i,log:r}=e;const s=i("plugins.gptTargeting.ga.referrer.directHostNames",["dailymail.co.uk","a.dailymail.co.uk","b.dailymail.co.uk","c.dailymail.co.uk","dailymailint.co.uk","thisismoney.co.uk","thisismoneyint.co.uk"]),{hitReferral:o,sessionReferral:a}=i("plugins.gptTargeting.ga.referrer.trackCategories",{});n.molFeComponents.getConfig("molFeGAProps").then((e=>{var n,i,d;r("gaProps",e);const{itoExternalSession:l,referrer:c,referringDomain:u,referringUrl:p}=e,h=Dp({itoExternalSession:l,referringDomain:u,referringUrl:p}),f=ls(c);r("referrer hostname",f);const g=s.includes(null==f||null===(n=f.replace)||void 0===n?void 0:n.call(f,/^www\d?\./,""))||!c?"Direct|Direct":Dp({itoExternalSession:l,referringDomain:f,referringUrl:c});if(r("ga targeting, session_referral:",h,"hit_referral:",g),null!=o&&null!==(i=o.includes)&&void 0!==i&&i.call(o,g)||null!=a&&null!==(d=a.includes)&&void 0!==d&&d.call(a,h)){const e={ga_ito:l,ga_rd:u,ga_ru:ls(p),ga_r:ls(c)};t.emit("send event to bidmax",{type:"custom",payload:{module:"ga",...e}}),r("tracking, hit_referral:",g,"session_referral:",h,"payload:",e)}t.emit("set page level targeting",{hit_referral:g,session_referral:h})}))},vendorIds:{gdpr:"N/A"}}),(0,qe.fo)("houseAdsOnly",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:i,pageCriteria:r}=e;if(!r.firstArticleHasAdsDisabled)return void i("firstArticleHasAdsDisabled not enabled, bailing");const[s,o]=n("plugins.houseAdsOnly.keyvlaue",["code","red"]),a=n("plugins.houseAdsOnly.positions",[]);a.length?t.register("get tags",(e=>{let{slot:t}=e;const{pos:n}=t;if(a.includes(n))return i(`set ${n} targeting: ${s}=${o}`),{[s]:o}})):i("no positions configured, bailing")}});const Op={top:30,bottom:30};async function Rp(e){let{broker:t,log:n,targetParagraphIndex:i,margin:r=Op,paragraphLoadingTimeout:s=3e3}=e;n("target paragraph index:",i);let o,a=i;__webpack_require__.g.PageCriteria.isMobile&&!__webpack_require__.g.PageCriteria.isTablet?(n("is a mobile"),o="#mobile-content > div > article"):(n("is not a mobile"),o='[itemprop="articleBody"]');const d=`${o} > :not(.mol-para-with-font), ${o} > mol-permabox > :not(.mol-para-with-font)`;n("non-paragraph selector:",d);const l=e=>new Promise((n=>{const i=()=>{document.querySelector(`${o} > .mol-para-with-font:nth-of-type(${e})`)&&(r.cancel(),clearInterval(s),n())},r=t.on("slot defined",i),s=setInterval(i,250);i()})),c=e=>{let{top:t,left:n,right:i}=e;return{top:t-r.top,bottom:t+r.bottom,left:n,right:i}};for(;;){n("awaiting",s,"millis for paragraph",a,"to be available"),await(0,D.yq)(s,l(a));const e=(u=a,[...document.querySelectorAll(`${o} > .mol-para-with-font:nth-of-type(n+${u})`)].map((e=>({paragraph:e,rect:e.getBoundingClientRect()}))));n(e.length,"paragraphs loaded so far");const t=[...document.querySelectorAll(d)].map((e=>e.getBoundingClientRect()));let i;n("there are",t.length,"non-paragraph elements in this article");const r=e.find(((e,r)=>{let{rect:s}=e;i=a+r;const o=c(s),d=(l=o,t.find((e=>{return t=l,!((n=e).left>t.right||n.right<t.left||n.top>t.bottom||n.bottom<t.top);var t,n})));var l;return d?n("paragraph",a+r,"failed, ",o,"intersects with",d):n("paragraph",a+r,"seems suitable"),!d}));if(r)return[i,r.paragraph];a+=e.length,n("getting next batch of paragraph starting from",a)}var u}(0,qe.fo)("page.placement",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:async function(e){let{broker:t,log:n}=e;const i=(await t.invokeAll("placement requests")).flat();if(!i.length)return void n("No placement requests");const r=(0,q.M7)(i,"targetParagraphIndex");let s=r[0].targetParagraphIndex;n("sortedPlacementRequests",r);const o=r.map((e=>{let{sourcePlugin:t}=e;return t}));try{for(const e of r){const{targetParagraphIndex:n,insertMethod:i,log:r,margin:a}=e,d=Math.max(s,n),l={broker:t,log:r.extend("placement"),targetParagraphIndex:d,margin:a,insertMethod:i},c=await Rp(l);if(!c)break;const[u,p]=c;i(p),o.shift(),s=u}}catch(e){n(`unable to find placements for: ${o.join(", ")}`)}}});var Np=__webpack_require__(1667),Mp=__webpack_require__.n(Np),Lp=__webpack_require__(1709),Up=__webpack_require__.n(Lp),jp=__webpack_require__(390),Bp=__webpack_require__.n(jp),qp=__webpack_require__(5891),Fp=__webpack_require__.n(qp),Vp=__webpack_require__(1731),zp=__webpack_require__.n(Vp),$p=__webpack_require__(7189),Hp=__webpack_require__.n($p),Wp=__webpack_require__(4316),Zp=__webpack_require__.n(Wp);function Gp(){return Gp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Gp.apply(this,arguments)}var Xp=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),s=t.length,o=0;o<s;++o)t[o].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),Kp=__webpack_require__(4275).Buffer;function Jp(e){for(var t,n=(t=e,Mp().atob?Mp().atob(t):Kp.from(t,"base64").toString("binary")),i=new Uint8Array(n.length),r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class Yp extends Xp{constructor(){super(),this.buffer=""}push(e){let t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}}const Qp=String.fromCharCode(9),eh=function(e){const t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),n={};return t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),n},th=function(e){const t={};if(!e)return t;const n=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))'));let i,r=n.length;for(;r--;)""!==n[r]&&(i=/([^=]*)=(.*)/.exec(n[r]).slice(1),i[0]=i[0].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^['"](.*)['"]$/g,"$1"),t[i[0]]=i[1]);return t};class nh extends Xp{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let t,n;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce(((t,n)=>{const i=n(e);return i===e?t:t.concat([i])}),[e]).forEach((e=>{for(let t=0;t<this.customParsers.length;t++)if(this.customParsers[t].call(this,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e),t)this.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(e),t)return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void this.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(e),t)return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-VERSION:([0-9.]*)?/.exec(e),t)return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(e),t)return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(e),t)return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(e),t)return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void this.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:(.*)?$/.exec(e),t)return n=Gp(eh(t[1]),{type:"tag",tagType:"byterange"}),void this.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(e),t)return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-MAP:(.*)$/.exec(e),t){if(n={type:"tag",tagType:"map"},t[1]){const e=th(t[1]);e.URI&&(n.uri=e.URI),e.BYTERANGE&&(n.byterange=eh(e.BYTERANGE))}this.trigger("data",n)}else if(t=/^#EXT-X-STREAM-INF:(.*)$/.exec(e),t){if(n={type:"tag",tagType:"stream-inf"},t[1]){if(n.attributes=th(t[1]),n.attributes.RESOLUTION){const e=n.attributes.RESOLUTION.split("x"),t={};e[0]&&(t.width=parseInt(e[0],10)),e[1]&&(t.height=parseInt(e[1],10)),n.attributes.RESOLUTION=t}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}this.trigger("data",n)}else{if(t=/^#EXT-X-MEDIA:(.*)$/.exec(e),t)return n={type:"tag",tagType:"media"},t[1]&&(n.attributes=th(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-ENDLIST/.exec(e),t)this.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e),t)this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(e),t)return n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-KEY:(.*)$/.exec(e),t)return n={type:"tag",tagType:"key"},t[1]&&(n.attributes=th(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void this.trigger("data",n);if(t=/^#EXT-X-START:(.*)$/.exec(e),t)return n={type:"tag",tagType:"start"},t[1]&&(n.attributes=th(t[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void this.trigger("data",n);if(t=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(e),t)return n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-CUE-OUT:(.*)?$/.exec(e),t)return n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-CUE-IN:(.*)?$/.exec(e),t)return n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-SKIP:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"skip"},n.attributes=th(t[1]),n.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(n.attributes["SKIPPED-SEGMENTS"]=parseInt(n.attributes["SKIPPED-SEGMENTS"],10)),n.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(n.attributes["RECENTLY-REMOVED-DATERANGES"]=n.attributes["RECENTLY-REMOVED-DATERANGES"].split(Qp)),void this.trigger("data",n);if(t=/^#EXT-X-PART:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"part"},n.attributes=th(t[1]),["DURATION"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),["INDEPENDENT","GAP"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))})),n.attributes.hasOwnProperty("BYTERANGE")&&(n.attributes.byterange=eh(n.attributes.BYTERANGE)),void this.trigger("data",n);if(t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"server-control"},n.attributes=th(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))})),void this.trigger("data",n);if(t=/^#EXT-X-PART-INF:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"part-inf"},n.attributes=th(t[1]),["PART-TARGET"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),void this.trigger("data",n);if(t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"preload-hint"},n.attributes=th(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach((function(e){if(n.attributes.hasOwnProperty(e)){n.attributes[e]=parseInt(n.attributes[e],10);const t="BYTERANGE-LENGTH"===e?"length":"offset";n.attributes.byterange=n.attributes.byterange||{},n.attributes.byterange[t]=n.attributes[e],delete n.attributes[e]}})),void this.trigger("data",n);if(t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"rendition-report"},n.attributes=th(t[1]),["LAST-MSN","LAST-PART"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseInt(n.attributes[e],10))})),void this.trigger("data",n);if(t=/^#EXT-X-DATERANGE:(.*)$/.exec(e),t&&t[1]){n={type:"tag",tagType:"daterange"},n.attributes=th(t[1]),["ID","CLASS"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=String(n.attributes[e]))})),["START-DATE","END-DATE"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=new Date(n.attributes[e]))})),["DURATION","PLANNED-DURATION"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),["END-ON-NEXT"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/i.test(n.attributes[e]))})),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=n.attributes[e].toString(16))}));const e=/^X-([A-Z]+-)+[A-Z]+$/;for(const t in n.attributes){if(!e.test(t))continue;const i=/[0-9A-Fa-f]{6}/g.test(n.attributes[t]),r=/^\d+(\.\d+)?$/.test(n.attributes[t]);n.attributes[t]=i?n.attributes[t].toString(16):r?parseFloat(n.attributes[t]):String(n.attributes[t])}this.trigger("data",n)}else t=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(e),t?this.trigger("data",{type:"tag",tagType:"independent-segments"}):this.trigger("data",{type:"tag",data:e.slice(4)})}}}else this.trigger("data",{type:"comment",text:e.slice(1)})})):this.trigger("data",{type:"uri",uri:e}))}addParser({expression:e,customType:t,dataParser:n,segment:i}){"function"!=typeof n&&(n=e=>e),this.customParsers.push((r=>{if(e.exec(r))return this.trigger("data",{type:"custom",data:n(r),customType:t,segment:i}),!0}))}addTagMapper({expression:e,map:t}){this.tagMappers.push((n=>e.test(n)?t(n):n))}}const ih=function(e){const t={};return Object.keys(e).forEach((function(n){var i;t[(i=n,i.toLowerCase().replace(/-(\w)/g,(e=>e[1].toUpperCase())))]=e[n]})),t},rh=function(e){const{serverControl:t,targetDuration:n,partTargetDuration:i}=e;if(!t)return;const r="#EXT-X-SERVER-CONTROL",s="holdBack",o="partHoldBack",a=n&&3*n,d=i&&2*i;n&&!t.hasOwnProperty(s)&&(t[s]=a,this.trigger("info",{message:`${r} defaulting HOLD-BACK to targetDuration * 3 (${a}).`})),a&&t[s]<a&&(this.trigger("warn",{message:`${r} clamping HOLD-BACK (${t[s]}) to targetDuration * 3 (${a})`}),t[s]=a),i&&!t.hasOwnProperty(o)&&(t[o]=3*i,this.trigger("info",{message:`${r} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${t[o]}).`})),i&&t[o]<d&&(this.trigger("warn",{message:`${r} clamping PART-HOLD-BACK (${t[o]}) to partTargetDuration * 2 (${d}).`}),t[o]=d)};class sh extends Xp{constructor(){super(),this.lineStream=new Yp,this.parseStream=new nh,this.lineStream.pipe(this.parseStream);const e=this,t=[];let n,i,r={},s=!1;const o=function(){},a={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};let d=0;this.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};let l=0,c=0;const u={};this.on("end",(()=>{r.uri||!r.parts&&!r.preloadHints||(!r.map&&n&&(r.map=n),!r.key&&i&&(r.key=i),r.timeline||"number"!=typeof d||(r.timeline=d),this.manifest.preloadSegment=r)})),this.parseStream.on("data",(function(p){let h,f;({tag(){({version(){p.version&&(this.manifest.version=p.version)},"allow-cache"(){this.manifest.allowCache=p.allowed,"allowed"in p||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const e={};"length"in p&&(r.byterange=e,e.length=p.length,"offset"in p||(p.offset=l)),"offset"in p&&(r.byterange=e,e.offset=p.offset),l=e.offset+e.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),p.duration>0&&(r.duration=p.duration),0===p.duration&&(r.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=t},key(){if(p.attributes)if("NONE"!==p.attributes.METHOD)if(p.attributes.URI){if("com.apple.streamingkeydelivery"===p.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:p.attributes});if("com.microsoft.playready"===p.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:p.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===p.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(p.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===p.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==p.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):p.attributes.KEYID&&"0x"===p.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:p.attributes.KEYFORMAT,keyId:p.attributes.KEYID.substring(2)},pssh:Jp(p.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));p.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),i={method:p.attributes.METHOD||"AES-128",uri:p.attributes.URI},void 0!==p.attributes.IV&&(i.iv=p.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else i=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence"(){isFinite(p.number)?this.manifest.mediaSequence=p.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+p.number})},"discontinuity-sequence"(){isFinite(p.number)?(this.manifest.discontinuitySequence=p.number,d=p.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+p.number})},"playlist-type"(){/VOD|EVENT/.test(p.playlistType)?this.manifest.playlistType=p.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+p.playlist})},map(){n={},p.uri&&(n.uri=p.uri),p.byterange&&(n.byterange=p.byterange),i&&(n.key=i)},"stream-inf"(){this.manifest.playlists=t,this.manifest.mediaGroups=this.manifest.mediaGroups||a,p.attributes?(r.attributes||(r.attributes={}),Gp(r.attributes,p.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||a,!(p.attributes&&p.attributes.TYPE&&p.attributes["GROUP-ID"]&&p.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});const e=this.manifest.mediaGroups[p.attributes.TYPE];e[p.attributes["GROUP-ID"]]=e[p.attributes["GROUP-ID"]]||{},h=e[p.attributes["GROUP-ID"]],f={default:/yes/i.test(p.attributes.DEFAULT)},f.default?f.autoselect=!0:f.autoselect=/yes/i.test(p.attributes.AUTOSELECT),p.attributes.LANGUAGE&&(f.language=p.attributes.LANGUAGE),p.attributes.URI&&(f.uri=p.attributes.URI),p.attributes["INSTREAM-ID"]&&(f.instreamId=p.attributes["INSTREAM-ID"]),p.attributes.CHARACTERISTICS&&(f.characteristics=p.attributes.CHARACTERISTICS),p.attributes.FORCED&&(f.forced=/yes/i.test(p.attributes.FORCED)),h[p.attributes.NAME]=f},discontinuity(){d+=1,r.discontinuity=!0,this.manifest.discontinuityStarts.push(t.length)},"program-date-time"(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=p.dateTimeString,this.manifest.dateTimeObject=p.dateTimeObject),r.dateTimeString=p.dateTimeString,r.dateTimeObject=p.dateTimeObject},targetduration(){!isFinite(p.duration)||p.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+p.duration}):(this.manifest.targetDuration=p.duration,rh.call(this,this.manifest))},start(){p.attributes&&!isNaN(p.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:p.attributes["TIME-OFFSET"],precise:p.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out"(){r.cueOut=p.data},"cue-out-cont"(){r.cueOutCont=p.data},"cue-in"(){r.cueIn=p.data},skip(){this.manifest.skip=ih(p.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",p.attributes,["SKIPPED-SEGMENTS"])},part(){s=!0;const e=this.manifest.segments.length,t=ih(p.attributes);r.parts=r.parts||[],r.parts.push(t),t.byterange&&(t.byterange.hasOwnProperty("offset")||(t.byterange.offset=c),c=t.byterange.offset+t.byterange.length);const n=r.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${n} for segment #${e}`,p.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(((e,t)=>{e.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${t} lacks required attribute(s): LAST-PART`})}))},"server-control"(){const e=this.manifest.serverControl=ih(p.attributes);e.hasOwnProperty("canBlockReload")||(e.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),rh.call(this,this.manifest),e.canSkipDateranges&&!e.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const e=this.manifest.segments.length,t=ih(p.attributes),n=t.type&&"PART"===t.type;r.preloadHints=r.preloadHints||[],r.preloadHints.push(t),t.byterange&&(t.byterange.hasOwnProperty("offset")||(t.byterange.offset=n?c:0,n&&(c=t.byterange.offset+t.byterange.length)));const i=r.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${i} for segment #${e}`,p.attributes,["TYPE","URI"]),t.type)for(let n=0;n<r.preloadHints.length-1;n++){const s=r.preloadHints[n];s.type&&s.type===t.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${i} for segment #${e} has the same TYPE ${t.type} as preload hint #${n}`})}},"rendition-report"(){const e=ih(p.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(e);const t=this.manifest.renditionReports.length-1,n=["LAST-MSN","URI"];s&&n.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${t}`,p.attributes,n)},"part-inf"(){this.manifest.partInf=ih(p.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",p.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),rh.call(this,this.manifest)},daterange(){this.manifest.daterange=this.manifest.daterange||[],this.manifest.daterange.push(ih(p.attributes));const e=this.manifest.daterange.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${e}`,p.attributes,["ID","START-DATE"]);const t=this.manifest.daterange[e];t.endDate&&t.startDate&&new Date(t.endDate)<new Date(t.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),t.duration&&t.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),t.plannedDuration&&t.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const n=!!t.endOnNext;if(n&&!t.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),n&&(t.duration||t.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),t.duration&&t.endDate){const n=t.startDate,i=n.setSeconds(n.getSeconds()+t.duration);this.manifest.daterange[e].endDate=new Date(i)}if(t&&!this.manifest.dateTimeString&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),u[t.id]){for(const e in u[t.id])if(u[t.id][e]!==t[e]){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes and same attribute values"});break}}else u[t.id]=t},"independent-segments"(){this.manifest.independentSegments=!0}}[p.tagType]||o).call(e)},uri(){r.uri=p.uri,t.push(r),this.manifest.targetDuration&&!("duration"in r)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),r.duration=this.manifest.targetDuration),i&&(r.key=i),r.timeline=d,n&&(r.map=n),c=0,r={}},comment(){},custom(){p.segment?(r.custom=r.custom||{},r.custom[p.customType]=p.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[p.customType]=p.data)}})[p.type].call(e)}))}warnOnMissingAttributes_(e,t,n){const i=[];n.forEach((function(e){t.hasOwnProperty(e)||i.push(e)})),i.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${i.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push("\n"),this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var oh,ah,dh={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},lh=["video","audio","text"],ch=["Video","Audio","Text"],uh=function(e){return e?e.replace(/avc1\.(\d+)\.(\d+)/i,(function(e,t,n){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})):e},ph=function(e){void 0===e&&(e="");var t=e.split(","),n=[];return t.forEach((function(e){var t;e=e.trim(),lh.forEach((function(i){var r=dh[i].exec(e.toLowerCase());if(r&&!(r.length<=1)){t=i;var s=e.substring(0,r[1].length),o=e.replace(s,"");n.push({type:s,details:o,mediaType:i})}})),t||n.push({type:e,details:"",mediaType:"unknown"})})),n},hh=function(e){return void 0===e&&(e=""),dh.audio.test(e.trim().toLowerCase())},fh=function(e){if(e&&"string"==typeof e){var t,n=e.toLowerCase().split(",").map((function(e){return uh(e.trim())})),i="video";1===n.length&&hh(n[0])?i="audio":1===n.length&&(void 0===(t=n[0])&&(t=""),dh.text.test(t.trim().toLowerCase()))&&(i="application");var r="mp4";return n.every((function(e){return dh.mp4.test(e)}))?r="mp4":n.every((function(e){return dh.webm.test(e)}))?r="webm":n.every((function(e){return dh.ogg.test(e)}))&&(r="ogg"),i+"/"+r+';codecs="'+e+'"'}},gh=function(e){return void 0===e&&(e=""),Mp().MediaSource&&Mp().MediaSource.isTypeSupported&&Mp().MediaSource.isTypeSupported(fh(e))||!1},mh=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every((function(e){e=e.trim();for(var t=0;t<ch.length;t++)if(dh["muxer"+ch[t]].test(e))return!0;return!1}))},yh="mp4a.40.2",vh=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,bh=/^application\/dash\+xml/i,_h=function(e){return vh.test(e)?"hls":bh.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null},wh=function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},Th=function(e){return e instanceof Uint8Array?e:(Array.isArray(e)||function(e){return wh(e)}(e)||e instanceof ArrayBuffer||(e="number"!=typeof e||"number"==typeof e&&e!=e?0:[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},Ih=Mp().BigInt||Number,Sh=[Ih("0x1"),Ih("0x100"),Ih("0x10000"),Ih("0x1000000"),Ih("0x100000000"),Ih("0x10000000000"),Ih("0x1000000000000"),Ih("0x100000000000000"),Ih("0x10000000000000000")],kh=(oh=new Uint16Array([65484]),255===(ah=new Uint8Array(oh.buffer,oh.byteOffset,oh.byteLength))[0]||ah[0],function(e,t){var n=void 0===t?{}:t,i=n.signed,r=void 0!==i&&i,s=n.le,o=void 0!==s&&s;e=Th(e);var a=o?"reduce":"reduceRight",d=(e[a]?e[a]:Array.prototype[a]).call(e,(function(t,n,i){var r=o?i:Math.abs(i+1-e.length);return t+Ih(n)*Sh[r]}),Ih(0));if(r){var l=Sh[e.length]/Ih(2)-Ih(1);(d=Ih(d))>l&&(d-=l,d-=l,d-=Ih(2))}return Number(d)}),Ch=function(e,t){if("string"!=typeof e&&e&&"function"==typeof e.toString&&(e=e.toString()),"string"!=typeof e)return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n},Eh=function(e,t,n){var i=void 0===n?{}:n,r=i.offset,s=void 0===r?0:r,o=i.mask,a=void 0===o?[]:o;e=Th(e);var d=(t=Th(t)).every?t.every:Array.prototype.every;return t.length&&e.length-s>=t.length&&d.call(t,(function(t,n){return t===(a[n]?a[n]&e[s+n]:e[s+n])}))};const Ah=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=Mp().location&&Mp().location.href||"");var n="function"==typeof Mp().URL,i=/^\/\//.test(e),r=!Mp().location&&!/\/\//i.test(e);if(n?e=new(Mp().URL)(e,Mp().location||"http://example.com"):/\/\//i.test(e)||(e=Zp().buildAbsoluteURL(Mp().location&&Mp().location.href||"",e)),n){var s=new URL(t,e);return r?s.href.slice(18):i?s.href.slice(s.protocol.length):s.href}return Zp().buildAbsoluteURL(e,t)};var Ph=__webpack_require__(6683);const xh=e=>!!e&&"object"==typeof e,Dh=(...e)=>e.reduce(((e,t)=>("object"!=typeof t||Object.keys(t).forEach((n=>{Array.isArray(e[n])&&Array.isArray(t[n])?e[n]=e[n].concat(t[n]):xh(e[n])&&xh(t[n])?e[n]=Dh(e[n],t[n]):e[n]=t[n]})),e)),{}),Oh=e=>Object.keys(e).map((t=>e[t])),Rh=e=>e.reduce(((e,t)=>e.concat(t)),[]),Nh=e=>{if(!e.length)return[];const t=[];for(let n=0;n<e.length;n++)t.push(e[n]);return t};const Mh=({baseUrl:e="",source:t="",range:n="",indexRange:i=""})=>{const r={uri:t,resolvedUri:Ah(e||"",t)};if(n||i){const e=(n||i).split("-");let t,s=Mp().BigInt?Mp().BigInt(e[0]):parseInt(e[0],10),o=Mp().BigInt?Mp().BigInt(e[1]):parseInt(e[1],10);s<Number.MAX_SAFE_INTEGER&&"bigint"==typeof s&&(s=Number(s)),o<Number.MAX_SAFE_INTEGER&&"bigint"==typeof o&&(o=Number(o)),t="bigint"==typeof o||"bigint"==typeof s?Mp().BigInt(o)-Mp().BigInt(s)+Mp().BigInt(1):o-s+1,"bigint"==typeof t&&t<Number.MAX_SAFE_INTEGER&&(t=Number(t)),r.byterange={length:t,offset:s}}return r},Lh=e=>(e&&"number"!=typeof e&&(e=parseInt(e,10)),isNaN(e)?null:e),Uh={static(e){const{duration:t,timescale:n=1,sourceDuration:i,periodDuration:r}=e,s=Lh(e.endNumber),o=t/n;return"number"==typeof s?{start:0,end:s}:"number"==typeof r?{start:0,end:r/o}:{start:0,end:i/o}},dynamic(e){const{NOW:t,clientOffset:n,availabilityStartTime:i,timescale:r=1,duration:s,periodStart:o=0,minimumUpdatePeriod:a=0,timeShiftBufferDepth:d=1/0}=e,l=Lh(e.endNumber),c=(t+n)/1e3,u=i+o,p=c+a-u,h=Math.ceil(p*r/s),f=Math.floor((c-u-d)*r/s),g=Math.floor((c-u)*r/s);return{start:Math.max(0,f),end:"number"==typeof l?l:Math.min(h,g)}}},jh=e=>{const{type:t,duration:n,timescale:i=1,periodDuration:r,sourceDuration:s}=e,{start:o,end:a}=Uh[t](e),d=((e,t)=>{const n=[];for(let i=e;i<t;i++)n.push(i);return n})(o,a).map((e=>t=>{const{duration:n,timescale:i=1,periodStart:r,startNumber:s=1}=e;return{number:s+t,duration:n/i,timeline:r,time:t*n}})(e));if("static"===t){const e=d.length-1,t="number"==typeof r?r:s;d[e].duration=t-n/i*e}return d},Bh=e=>{const{baseUrl:t,initialization:n={},sourceDuration:i,indexRange:r="",periodStart:s,presentationTime:o,number:a=0,duration:d}=e;if(!t)throw new Error("NO_BASE_URL");const l=Mh({baseUrl:t,source:n.sourceURL,range:n.range}),c=Mh({baseUrl:t,source:t,indexRange:r});if(c.map=l,d){const t=jh(e);t.length&&(c.duration=t[0].duration,c.timeline=t[0].timeline)}else i&&(c.duration=i,c.timeline=s);return c.presentationTime=o||s,c.number=a,[c]},qh=(e,t,n)=>{const i=e.sidx.map?e.sidx.map:null,r=e.sidx.duration,s=e.timeline||0,o=e.sidx.byterange,a=o.offset+o.length,d=t.timescale,l=t.references.filter((e=>1!==e.referenceType)),c=[],u=e.endList?"static":"dynamic",p=e.sidx.timeline;let h,f=p,g=e.mediaSequence||0;h="bigint"==typeof t.firstOffset?Mp().BigInt(a)+t.firstOffset:a+t.firstOffset;for(let e=0;e<l.length;e++){const o=t.references[e],a=o.referencedSize,l=o.subsegmentDuration;let m;m="bigint"==typeof h?h+Mp().BigInt(a)-Mp().BigInt(1):h+a-1;const y=Bh({baseUrl:n,timescale:d,timeline:s,periodStart:p,presentationTime:f,number:g,duration:l,sourceDuration:r,indexRange:`${h}-${m}`,type:u})[0];i&&(y.map=i),c.push(y),h+="bigint"==typeof h?Mp().BigInt(a):a,f+=l/d,g++}return e.segments=c,e},Fh=["AUDIO","SUBTITLES"],Vh=e=>{return(t=e,n=({timeline:e})=>e,Oh(t.reduce(((e,t)=>(t.forEach((t=>{e[n(t)]=t})),e)),{}))).sort(((e,t)=>e.timeline>t.timeline?1:-1));var t,n},zh=e=>{let t=[];var n,i;return n=e,i=(e,n,i,r)=>{t=t.concat(e.playlists||[])},Fh.forEach((function(e){for(var t in n.mediaGroups[e])for(var r in n.mediaGroups[e][t]){var s=n.mediaGroups[e][t][r];i(s)}})),t},$h=({playlist:e,mediaSequence:t})=>{e.mediaSequence=t,e.segments.forEach(((t,n)=>{t.number=e.mediaSequence+n}))},Hh=e=>e&&e.uri+"-"+(e=>{let t;return t="bigint"==typeof e.offset||"bigint"==typeof e.length?Mp().BigInt(e.offset)+Mp().BigInt(e.length)-Mp().BigInt(1):e.offset+e.length-1,`${e.offset}-${t}`})(e.byterange),Wh=e=>Oh(e.reduce(((e,t)=>{const n=t.attributes.id+(t.attributes.lang||"");return e[n]?(t.segments&&(t.segments[0]&&(t.segments[0].discontinuity=!0),e[n].segments.push(...t.segments)),t.attributes.contentProtection&&(e[n].attributes.contentProtection=t.attributes.contentProtection)):(e[n]=t,e[n].attributes.timelineStarts=[]),e[n].attributes.timelineStarts.push({start:t.attributes.periodStart,timeline:t.attributes.periodStart}),e}),{})).map((e=>{var t;return e.discontinuityStarts=(t=e.segments||[],"discontinuity",t.reduce(((e,t,n)=>(t.discontinuity&&e.push(n),e)),[])),e})),Zh=(e,t)=>{const n=Hh(e.sidx),i=n&&t[n]&&t[n].sidx;return i&&qh(e,i,e.sidx.resolvedUri),e},Gh=(e,t={})=>{if(!Object.keys(t).length)return e;for(const n in e)e[n]=Zh(e[n],t);return e},Xh=({attributes:e,segments:t,sidx:n,discontinuityStarts:i})=>{const r={attributes:{NAME:e.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:e.width,height:e.height},CODECS:e.codecs,BANDWIDTH:e.bandwidth,"PROGRAM-ID":1},uri:"",endList:"static"===e.type,timeline:e.periodStart,resolvedUri:"",targetDuration:e.duration,discontinuityStarts:i,timelineStarts:e.timelineStarts,segments:t};return e.frameRate&&(r.attributes["FRAME-RATE"]=e.frameRate),e.contentProtection&&(r.contentProtection=e.contentProtection),n&&(r.sidx=n),r},Kh=({attributes:e})=>"video/mp4"===e.mimeType||"video/webm"===e.mimeType||"video"===e.contentType,Jh=({attributes:e})=>"audio/mp4"===e.mimeType||"audio/webm"===e.mimeType||"audio"===e.contentType,Yh=({attributes:e})=>"text/vtt"===e.mimeType||"text"===e.contentType,Qh=e=>e?Object.keys(e).reduce(((t,n)=>{const i=e[n];return t.concat(i.playlists)}),[]):[],ef=({dashPlaylists:e,locations:t,sidxMapping:n={},previousManifest:i,eventStream:r})=>{if(!e.length)return{};const{sourceDuration:s,type:o,suggestedPresentationDelay:a,minimumUpdatePeriod:d}=e[0].attributes,l=Wh(e.filter(Kh)).map(Xh),c=Wh(e.filter(Jh)),u=Wh(e.filter(Yh)),p=e.map((e=>e.attributes.captionServices)).filter(Boolean),h={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:s,playlists:Gh(l,n)};d>=0&&(h.minimumUpdatePeriod=1e3*d),t&&(h.locations=t),"dynamic"===o&&(h.suggestedPresentationDelay=a),r&&r.length>0&&(h.eventStream=r);const f=0===h.playlists.length,g=c.length?((e,t={},n=!1)=>{let i;const r=e.reduce(((e,r)=>{const s=r.attributes.role&&r.attributes.role.value||"",o=r.attributes.lang||"";let a=r.attributes.label||"main";if(o&&!r.attributes.label){const e=s?` (${s})`:"";a=`${r.attributes.lang}${e}`}e[a]||(e[a]={language:o,autoselect:!0,default:"main"===s,playlists:[],uri:""});const d=Zh((({attributes:e,segments:t,sidx:n,mediaSequence:i,discontinuitySequence:r,discontinuityStarts:s},o)=>{const a={attributes:{NAME:e.id,BANDWIDTH:e.bandwidth,CODECS:e.codecs,"PROGRAM-ID":1},uri:"",endList:"static"===e.type,timeline:e.periodStart,resolvedUri:"",targetDuration:e.duration,discontinuitySequence:r,discontinuityStarts:s,timelineStarts:e.timelineStarts,mediaSequence:i,segments:t};return e.contentProtection&&(a.contentProtection=e.contentProtection),n&&(a.sidx=n),o&&(a.attributes.AUDIO="audio",a.attributes.SUBTITLES="subs"),a})(r,n),t);return e[a].playlists.push(d),void 0===i&&"main"===s&&(i=r,i.default=!0),e}),{});return i||(r[Object.keys(r)[0]].default=!0),r})(c,n,f):null,m=u.length?((e,t={})=>e.reduce(((e,n)=>{const i=n.attributes.label||n.attributes.lang||"text";return e[i]||(e[i]={language:i,default:!1,autoselect:!1,playlists:[],uri:""}),e[i].playlists.push(Zh((({attributes:e,segments:t,mediaSequence:n,discontinuityStarts:i,discontinuitySequence:r})=>{void 0===t&&(t=[{uri:e.baseUrl,timeline:e.periodStart,resolvedUri:e.baseUrl||"",duration:e.sourceDuration,number:0}],e.duration=e.sourceDuration);const s={NAME:e.id,BANDWIDTH:e.bandwidth,"PROGRAM-ID":1};return e.codecs&&(s.CODECS=e.codecs),{attributes:s,uri:"",endList:"static"===e.type,timeline:e.periodStart,resolvedUri:e.baseUrl||"",targetDuration:e.duration,timelineStarts:e.timelineStarts,discontinuityStarts:i,discontinuitySequence:r,mediaSequence:n,segments:t}})(n),t)),e}),{}))(u,n):null,y=l.concat(Qh(g),Qh(m)),v=y.map((({timelineStarts:e})=>e));var b,_;return h.timelineStarts=Vh(v),b=y,_=h.timelineStarts,b.forEach((e=>{e.mediaSequence=0,e.discontinuitySequence=_.findIndex((function({timeline:t}){return t===e.timeline})),e.segments&&e.segments.forEach(((e,t)=>{e.number=t}))})),g&&(h.mediaGroups.AUDIO.audio=g),m&&(h.mediaGroups.SUBTITLES.subs=m),p.length&&(h.mediaGroups["CLOSED-CAPTIONS"].cc=p.reduce(((e,t)=>t?(t.forEach((t=>{const{channel:n,language:i}=t;e[i]={autoselect:!1,default:!1,instreamId:n,language:i},t.hasOwnProperty("aspectRatio")&&(e[i].aspectRatio=t.aspectRatio),t.hasOwnProperty("easyReader")&&(e[i].easyReader=t.easyReader),t.hasOwnProperty("3D")&&(e[i]["3D"]=t["3D"])})),e):e),{})),i?(({oldManifest:e,newManifest:t})=>{const n=e.playlists.concat(zh(e)),i=t.playlists.concat(zh(t));return t.timelineStarts=Vh([e.timelineStarts,t.timelineStarts]),(({oldPlaylists:e,newPlaylists:t,timelineStarts:n})=>{t.forEach((t=>{t.discontinuitySequence=n.findIndex((function({timeline:e}){return e===t.timeline}));const i=((e,t)=>{for(let n=0;n<e.length;n++)if(e[n].attributes.NAME===t)return e[n];return null})(e,t.attributes.NAME);if(!i)return;if(t.sidx)return;const r=t.segments[0],s=i.segments.findIndex((function(e){return Math.abs(e.presentationTime-r.presentationTime)<.016666666666666666}));if(-1===s)return $h({playlist:t,mediaSequence:i.mediaSequence+i.segments.length}),t.segments[0].discontinuity=!0,t.discontinuityStarts.unshift(0),void((!i.segments.length&&t.timeline>i.timeline||i.segments.length&&t.timeline>i.segments[i.segments.length-1].timeline)&&t.discontinuitySequence--);i.segments[s].discontinuity&&!r.discontinuity&&(r.discontinuity=!0,t.discontinuityStarts.unshift(0),t.discontinuitySequence--),$h({playlist:t,mediaSequence:i.segments[s].number})}))})({oldPlaylists:n,newPlaylists:i,timelineStarts:t.timelineStarts}),t})({oldManifest:i,newManifest:h}):h},tf=(e,t,n)=>{const{NOW:i,clientOffset:r,availabilityStartTime:s,timescale:o=1,periodStart:a=0,minimumUpdatePeriod:d=0}=e,l=(i+r)/1e3+d-(s+a);return Math.ceil((l*o-t)/n)},nf=(e,t)=>{const{type:n,minimumUpdatePeriod:i=0,media:r="",sourceDuration:s,timescale:o=1,startNumber:a=1,periodStart:d}=e,l=[];let c=-1;for(let u=0;u<t.length;u++){const p=t[u],h=p.d,f=p.r||0,g=p.t||0;let m;if(c<0&&(c=g),g&&g>c&&(c=g),f<0){const a=u+1;m=a===t.length?"dynamic"===n&&i>0&&r.indexOf("$Number$")>0?tf(e,c,h):(s*o-c)/h:(t[a].t-c)/h}else m=f+1;const y=a+l.length+m;let v=a+l.length;for(;v<y;)l.push({number:v,duration:h/o,time:c,timeline:d}),c+=h,v++}return l},rf=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,sf=(e,t)=>e.replace(rf,(e=>(t,n,i,r)=>{if("$$"===t)return"$";if(void 0===e[n])return t;const s=""+e[n];return"RepresentationID"===n?s:(r=i?parseInt(r,10):1,s.length>=r?s:`${new Array(r-s.length+1).join("0")}${s}`)})(t)),of=(e,t)=>{const n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},{initialization:i={sourceURL:"",range:""}}=e,r=Mh({baseUrl:e.baseUrl,source:sf(i.sourceURL,n),range:i.range}),s=((e,t)=>e.duration||t?e.duration?jh(e):nf(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}])(e,t);return s.map((t=>{n.Number=t.number,n.Time=t.time;const i=sf(e.media||"",n),s=e.timescale||1,o=e.presentationTimeOffset||0,a=e.periodStart+(t.time-o)/s;return{uri:i,timeline:t.timeline,duration:t.duration,resolvedUri:Ah(e.baseUrl||"",i),map:r,number:t.number,presentationTime:a}}))},af=(e,t)=>{const{duration:n,segmentUrls:i=[],periodStart:r}=e;if(!n&&!t||n&&t)throw new Error("SEGMENT_TIME_UNSPECIFIED");const s=i.map((t=>((e,t)=>{const{baseUrl:n,initialization:i={}}=e,r=Mh({baseUrl:n,source:i.sourceURL,range:i.range}),s=Mh({baseUrl:n,source:t.media,range:t.mediaRange});return s.map=r,s})(e,t)));let o;return n&&(o=jh(e)),t&&(o=nf(e,t)),o.map(((t,n)=>{if(s[n]){const i=s[n],o=e.timescale||1,a=e.presentationTimeOffset||0;return i.timeline=t.timeline,i.duration=t.duration,i.number=t.number,i.presentationTime=r+(t.time-a)/o,i}})).filter((e=>e))},df=({attributes:e,segmentInfo:t})=>{let n,i;t.template?(i=of,n=Dh(e,t.template)):t.base?(i=Bh,n=Dh(e,t.base)):t.list&&(i=af,n=Dh(e,t.list));const r={attributes:e};if(!i)return r;const s=i(n,t.segmentTimeline);if(n.duration){const{duration:e,timescale:t=1}=n;n.duration=e/t}else s.length?n.duration=s.reduce(((e,t)=>Math.max(e,Math.ceil(t.duration))),0):n.duration=0;return r.attributes=n,r.segments=s,t.base&&n.indexRange&&(r.sidx=s[0],r.segments=[]),r},lf=(e,t)=>Nh(e.childNodes).filter((({tagName:e})=>e===t)),cf=e=>e.textContent.trim(),uf=e=>{const t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;const[n,i,r,s,o,a]=t.slice(1);return 31536e3*parseFloat(n||0)+2592e3*parseFloat(i||0)+86400*parseFloat(r||0)+3600*parseFloat(s||0)+60*parseFloat(o||0)+parseFloat(a||0)},pf={mediaPresentationDuration:e=>uf(e),availabilityStartTime(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:e=>uf(e),suggestedPresentationDelay:e=>uf(e),type:e=>e,timeShiftBufferDepth:e=>uf(e),start:e=>uf(e),width:e=>parseInt(e,10),height:e=>parseInt(e,10),bandwidth:e=>parseInt(e,10),frameRate:e=>(e=>parseFloat(e.split("/").reduce(((e,t)=>e/t))))(e),startNumber:e=>parseInt(e,10),timescale:e=>parseInt(e,10),presentationTimeOffset:e=>parseInt(e,10),duration(e){const t=parseInt(e,10);return isNaN(t)?uf(e):t},d:e=>parseInt(e,10),t:e=>parseInt(e,10),r:e=>parseInt(e,10),presentationTime:e=>parseInt(e,10),DEFAULT:e=>e},hf=e=>e&&e.attributes?Nh(e.attributes).reduce(((e,t)=>{const n=pf[t.name]||pf.DEFAULT;return e[t.name]=n(t.value),e}),{}):{},ff={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},gf=(e,t)=>t.length?Rh(e.map((function(e){return t.map((function(t){return Ah(e,cf(t))}))}))):e,mf=e=>{const t=lf(e,"SegmentTemplate")[0],n=lf(e,"SegmentList")[0],i=n&&lf(n,"SegmentURL").map((e=>Dh({tag:"SegmentURL"},hf(e)))),r=lf(e,"SegmentBase")[0],s=n||t,o=s&&lf(s,"SegmentTimeline")[0],a=n||r||t,d=a&&lf(a,"Initialization")[0],l=t&&hf(t);l&&d?l.initialization=d&&hf(d):l&&l.initialization&&(l.initialization={sourceURL:l.initialization});const c={template:l,segmentTimeline:o&&lf(o,"S").map((e=>hf(e))),list:n&&Dh(hf(n),{segmentUrls:i,initialization:hf(d)}),base:r&&Dh(hf(r),{initialization:hf(d)})};return Object.keys(c).forEach((e=>{c[e]||delete c[e]})),c},yf=e=>Rh(lf(e.node,"EventStream").map((t=>{const n=hf(t),i=n.schemeIdUri;return lf(t,"Event").map((t=>{const r=hf(t),s=r.presentationTime||0,o=n.timescale||1,a=r.duration||0,d=s/o+e.attributes.start;return{schemeIdUri:i,value:n.value,id:r.id,start:d,end:d+a/o,messageData:cf(t)||r.messageData,contentEncoding:n.contentEncoding,presentationTimeOffset:n.presentationTimeOffset||0}}))}))),vf=(e,t)=>(n,i)=>{const r=gf(t,lf(n.node,"BaseURL")),s=Dh(e,{periodStart:n.attributes.start});"number"==typeof n.attributes.duration&&(s.periodDuration=n.attributes.duration);const o=lf(n.node,"AdaptationSet"),a=mf(n.node);return Rh(o.map(((e,t,n)=>i=>{const r=hf(i),s=gf(t,lf(i,"BaseURL")),o=lf(i,"Role")[0],a={role:hf(o)};let d=Dh(e,r,a);const l=lf(i,"Accessibility")[0],c="urn:scte:dash:cc:cea-608:2015"===(u=hf(l)).schemeIdUri?("string"!=typeof u.value?[]:u.value.split(";")).map((e=>{let t,n;return n=e,/^CC\d=/.test(e)?[t,n]=e.split("="):/^CC\d$/.test(e)&&(t=e),{channel:t,language:n}})):"urn:scte:dash:cc:cea-708:2015"===u.schemeIdUri?("string"!=typeof u.value?[]:u.value.split(";")).map((e=>{const t={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(e)){const[n,i=""]=e.split("=");t.channel=n,t.language=e,i.split(",").forEach((e=>{const[n,i]=e.split(":");"lang"===n?t.language=i:"er"===n?t.easyReader=Number(i):"war"===n?t.aspectRatio=Number(i):"3D"===n&&(t["3D"]=Number(i))}))}else t.language=e;return t.channel&&(t.channel="SERVICE"+t.channel),t})):void 0;var u;c&&(d=Dh(d,{captionServices:c}));const p=lf(i,"Label")[0];if(p&&p.childNodes.length){const e=p.childNodes[0].nodeValue.trim();d=Dh(d,{label:e})}const h=lf(i,"ContentProtection").reduce(((e,t)=>{const n=hf(t);n.schemeIdUri&&(n.schemeIdUri=n.schemeIdUri.toLowerCase());const i=ff[n.schemeIdUri];if(i){e[i]={attributes:n};const r=lf(t,"cenc:pssh")[0];if(r){const t=cf(r);e[i].pssh=t&&Jp(t)}}return e}),{});Object.keys(h).length&&(d=Dh(d,{contentProtection:h}));const f=mf(i),g=lf(i,"Representation"),m=Dh(n,f);return Rh(g.map(((e,t,n)=>i=>{const r=lf(i,"BaseURL"),s=gf(t,r),o=Dh(e,hf(i)),a=mf(i);return s.map((e=>({segmentInfo:Dh(n,a),attributes:Dh(o,{baseUrl:e})})))})(d,s,m)))})(s,r,a)))},bf=e=>{if(""===e)throw new Error("DASH_EMPTY_MANIFEST");const t=new Ph.DOMParser;let n,i;try{n=t.parseFromString(e,"application/xml"),i=n&&"MPD"===n.documentElement.tagName?n.documentElement:null}catch(e){}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return i};var _f,wf=__webpack_require__(8515),Tf=__webpack_require__.n(wf),If=Th([73,68,51]),Sf=function e(t,n){return void 0===n&&(n=0),(t=Th(t)).length-n<10||!Eh(t,If,{offset:n})?n:(n+=function(e,t){void 0===t&&(t=0);var n=(e=Th(e))[t+5],i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&n)>>4?i+20:i+10}(t,n),e(t,n))},kf=(new Uint8Array([79,112,117,115,72,101,97,100]),function(e){return"string"==typeof e?Ch(e):e}),Cf=function(e){e=Th(e);for(var t=[],n=0;e.length>n;){var i=e[n],r=0,s=0,o=e[++s];for(s++;128&o;)r=(127&o)<<7,o=e[s],s++;r+=127&o;for(var a=0;a<_f.length;a++){var d=_f[a],l=d.id,c=d.parser;if(i===l){t.push(c(e.subarray(s,s+r)));break}}n+=r+s}return t};_f=[{id:3,parser:function(e){var t={tag:3,id:e[0]<<8|e[1],flags:e[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&t.flags&&(t.dependsOnEsId=e[t.size]<<8|e[t.size+1],t.size+=2),64&t.flags){var n=e[t.size];t.url=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,Th(e));try{return decodeURIComponent(escape(t))}catch(e){}return t}(e.subarray(t.size+1,t.size+1+n)),t.size+=n}return 32&t.flags&&(t.ocrEsId=e[t.size]<<8|e[t.size+1],t.size+=2),t.descriptors=Cf(e.subarray(t.size))||[],t}},{id:4,parser:function(e){return{tag:4,oti:e[0],streamType:e[1],bufferSize:e[2]<<16|e[3]<<8|e[4],maxBitrate:e[5]<<24|e[6]<<16|e[7]<<8|e[8],avgBitrate:e[9]<<24|e[10]<<16|e[11]<<8|e[12],descriptors:Cf(e.subarray(13))}}},{id:5,parser:function(e){return{tag:5,bytes:e}}},{id:6,parser:function(e){return{tag:6,bytes:e}}}];var Ef=function e(t,n,i){void 0===i&&(i=!1),n=function(e){return Array.isArray(e)?e.map((function(e){return kf(e)})):[kf(e)]}(n),t=Th(t);var r=[];if(!n.length)return r;for(var s=0;s<t.length;){var o=(t[s]<<24|t[s+1]<<16|t[s+2]<<8|t[s+3])>>>0,a=t.subarray(s+4,s+8);if(0===o)break;var d=s+o;if(d>t.length){if(i)break;d=t.length}var l=t.subarray(s+8,d);Eh(a,n[0])&&(1===n.length?r.push(l):r.push.apply(r,e(l,n.slice(1),i))),s=d}return r},Af={EBML:Th([26,69,223,163]),DocType:Th([66,130]),Segment:Th([24,83,128,103]),SegmentInfo:Th([21,73,169,102]),Tracks:Th([22,84,174,107]),Track:Th([174]),TrackNumber:Th([215]),DefaultDuration:Th([35,227,131]),TrackEntry:Th([174]),TrackType:Th([131]),FlagDefault:Th([136]),CodecID:Th([134]),CodecPrivate:Th([99,162]),VideoTrack:Th([224]),AudioTrack:Th([225]),Cluster:Th([31,67,182,117]),Timestamp:Th([231]),TimestampScale:Th([42,215,177]),BlockGroup:Th([160]),BlockDuration:Th([155]),Block:Th([161]),SimpleBlock:Th([163])},Pf=[128,64,32,16,8,4,2,1],xf=function(e,t,n,i){void 0===n&&(n=!0),void 0===i&&(i=!1);var r=function(e){for(var t=1,n=0;n<Pf.length&&!(e&Pf[n]);n++)t++;return t}(e[t]),s=e.subarray(t,t+r);return n&&((s=Array.prototype.slice.call(e,t,t+r))[0]^=Pf[r-1]),{length:r,value:kh(s,{signed:i}),bytes:s}},Df=function e(t){return"string"==typeof t?t.match(/.{1,2}/g).map((function(t){return e(t)})):"number"==typeof t?function(e,t){var n=(void 0===t?{}:t).le,i=void 0!==n&&n;("bigint"!=typeof e&&"number"!=typeof e||"number"==typeof e&&e!=e)&&(e=0);for(var r,s=(r=e=Ih(e),Math.ceil(function(e){return e.toString(2).length}(r)/8)),o=new Uint8Array(new ArrayBuffer(s)),a=0;a<s;a++){var d=i?a:Math.abs(a+1-o.length);o[d]=Number(e/Sh[a]&Ih(255)),e<0&&(o[d]=Math.abs(~o[d]),o[d]-=0===a?1:2)}return o}(t):t},Of=function e(t,n,i){if(i>=n.length)return n.length;var r=xf(n,i,!1);if(Eh(t.bytes,r.bytes))return i;var s=xf(n,i+r.length);return e(t,n,i+s.length+s.value+r.length)},Rf=function e(t,n){n=function(e){return Array.isArray(e)?e.map((function(e){return Df(e)})):[Df(e)]}(n),t=Th(t);var i=[];if(!n.length)return i;for(var r=0;r<t.length;){var s=xf(t,r,!1),o=xf(t,r+s.length),a=r+s.length+o.length;127===o.value&&(o.value=Of(s,t,a),o.value!==t.length&&(o.value-=a));var d=a+o.value>t.length?t.length:a+o.value,l=t.subarray(a,d);Eh(n[0],s.bytes)&&(1===n.length?i.push(l):i=i.concat(e(l,n.slice(1)))),r+=s.length+o.length+l.length}return i},Nf=Th([0,0,0,1]),Mf=Th([0,0,1]),Lf=Th([0,0,3]),Uf=function(e){for(var t=[],n=1;n<e.length-2;)Eh(e.subarray(n,n+3),Lf)&&(t.push(n+2),n++),n++;if(0===t.length)return e;var i=e.length-t.length,r=new Uint8Array(i),s=0;for(n=0;n<i;s++,n++)s===t[0]&&(s++,t.shift()),r[n]=e[s];return r},jf=function(e,t,n,i){void 0===i&&(i=1/0),e=Th(e),n=[].concat(n);for(var r,s=0,o=0;s<e.length&&(o<i||r);){var a=void 0;if(Eh(e.subarray(s),Nf)?a=4:Eh(e.subarray(s),Mf)&&(a=3),a){if(o++,r)return Uf(e.subarray(r,s));var d=void 0;"h264"===t?d=31&e[s+a]:"h265"===t&&(d=e[s+a]>>1&63),-1!==n.indexOf(d)&&(r=s+a),s+=a+("h264"===t?1:2)}else s++}return e.subarray(0,0)},Bf={webm:Th([119,101,98,109]),matroska:Th([109,97,116,114,111,115,107,97]),flac:Th([102,76,97,67]),ogg:Th([79,103,103,83]),ac3:Th([11,119]),riff:Th([82,73,70,70]),avi:Th([65,86,73]),wav:Th([87,65,86,69]),"3gp":Th([102,116,121,112,51,103]),mp4:Th([102,116,121,112]),fmp4:Th([115,116,121,112]),mov:Th([102,116,121,112,113,116]),moov:Th([109,111,111,118]),moof:Th([109,111,111,102])},qf={aac:function(e){var t=Sf(e);return Eh(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=Sf(e);return Eh(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=Rf(e,[Af.EBML,Af.DocType])[0];return Eh(t,Bf.webm)},mkv:function(e){var t=Rf(e,[Af.EBML,Af.DocType])[0];return Eh(t,Bf.matroska)},mp4:function(e){return!qf["3gp"](e)&&!qf.mov(e)&&(!(!Eh(e,Bf.mp4,{offset:4})&&!Eh(e,Bf.fmp4,{offset:4}))||!(!Eh(e,Bf.moof,{offset:4})&&!Eh(e,Bf.moov,{offset:4}))||void 0)},mov:function(e){return Eh(e,Bf.mov,{offset:4})},"3gp":function(e){return Eh(e,Bf["3gp"],{offset:4})},ac3:function(e){var t=Sf(e);return Eh(e,Bf.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return 71===e[0];for(var t=0;t+188<e.length&&t<188;){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){var t=Sf(e);return Eh(e,Bf.flac,{offset:t})},ogg:function(e){return Eh(e,Bf.ogg)},avi:function(e){return Eh(e,Bf.riff)&&Eh(e,Bf.avi,{offset:8})},wav:function(e){return Eh(e,Bf.riff)&&Eh(e,Bf.wav,{offset:8})},h264:function(e){return function(e,t,n){return jf(e,"h264",7,3)}(e).length},h265:function(e){return function(e,t,n){return jf(e,"h265",[32,33],3)}(e).length}},Ff=Object.keys(qf).filter((function(e){return"ts"!==e&&"h264"!==e&&"h265"!==e})).concat(["ts","h264","h265"]);Ff.forEach((function(e){var t=qf[e];qf[e]=function(e){return t(Th(e))}}));var Vf=qf,zf=function(e){e=Th(e);for(var t=0;t<Ff.length;t++){var n=Ff[t];if(Vf[n](e))return n}return""},$f=__webpack_require__(3211),Hf="8.5.1";const Wf={},Zf=function(e,t){return Wf[e]=Wf[e]||[],t&&(Wf[e]=Wf[e].concat(t)),Wf[e]},Gf=function(e,t){const n=Zf(e).indexOf(t);return!(n<=-1||(Wf[e]=Wf[e].slice(),Wf[e].splice(n,1),0))},Xf={prefixed:!0},Kf=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],Jf=Kf[0];let Yf;for(let e=0;e<Kf.length;e++)if(Kf[e][1]in Up()){Yf=Kf[e];break}if(Yf){for(let e=0;e<Yf.length;e++)Xf[Jf[e]]=Yf[e];Xf.prefixed=Yf[0]!==Jf[0]}let Qf=[];const eg=function e(t){let n,i="info";const r=function(...e){n("log",i,e)};return n=((e,t)=>(n,i,r)=>{const s=t.levels[i],o=new RegExp(`^(${s})$`);if("log"!==n&&r.unshift(n.toUpperCase()+":"),r.unshift(e+":"),Qf){Qf.push([].concat(r));const e=Qf.length-1e3;Qf.splice(0,e>0?e:0)}if(!Mp().console)return;let a=Mp().console[n];a||"debug"!==n||(a=Mp().console.info||Mp().console.log),a&&s&&o.test(n)&&a[Array.isArray(r)?"apply":"call"](Mp().console,r)})(t,r),r.createLogger=n=>e(t+": "+n),r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:i},r.level=e=>{if("string"==typeof e){if(!r.levels.hasOwnProperty(e))throw new Error(`"${e}" in not a valid log level`);i=e}return i},(r.history=()=>Qf?[].concat(Qf):[]).filter=e=>(Qf||[]).filter((t=>new RegExp(`.*${e}.*`).test(t[0]))),r.history.clear=()=>{Qf&&(Qf.length=0)},r.history.disable=()=>{null!==Qf&&(Qf.length=0,Qf=null)},r.history.enable=()=>{null===Qf&&(Qf=[])},r.error=(...e)=>n("error",i,e),r.warn=(...e)=>n("warn",i,e),r.debug=(...e)=>n("debug",i,e),r}("VIDEOJS"),tg=eg.createLogger,ng=Object.prototype.toString,ig=function(e){return og(e)?Object.keys(e):[]};function rg(e,t){ig(e).forEach((n=>t(e[n],n)))}function sg(e,t,n=0){return ig(e).reduce(((n,i)=>t(n,e[i],i)),n)}function og(e){return!!e&&"object"==typeof e}function ag(e){return og(e)&&"[object Object]"===ng.call(e)&&e.constructor===Object}function dg(...e){const t={};return e.forEach((e=>{e&&rg(e,((e,n)=>{ag(e)?(ag(t[n])||(t[n]={}),t[n]=dg(t[n],e)):t[n]=e}))})),t}function lg(e={}){const t=[];for(const n in e)if(e.hasOwnProperty(n)){const i=e[n];t.push(i)}return t}function cg(e,t,n,i=!0){const r=n=>Object.defineProperty(e,t,{value:n,enumerable:!0,writable:!0}),s={configurable:!0,enumerable:!0,get(){const e=n();return r(e),e}};return i&&(s.set=r),Object.defineProperty(e,t,s)}var ug=Object.freeze({__proto__:null,each:rg,reduce:sg,isObject:og,isPlain:ag,merge:dg,values:lg,defineLazyProperty:cg});let pg,hg=!1,fg=null,gg=!1,mg=!1,yg=!1,vg=!1,bg=!1,_g=null,wg=null,Tg=null,Ig=!1,Sg=!1,kg=!1,Cg=!1;const Eg=Boolean(Rg()&&("ontouchstart"in Mp()||Mp().navigator.maxTouchPoints||Mp().DocumentTouch&&Mp().document instanceof Mp().DocumentTouch)),Ag=Mp().navigator&&Mp().navigator.userAgentData;if(Ag&&(gg="Android"===Ag.platform,yg=Boolean(Ag.brands.find((e=>"Microsoft Edge"===e.brand))),vg=Boolean(Ag.brands.find((e=>"Chromium"===e.brand))),bg=!yg&&vg,_g=wg=(Ag.brands.find((e=>"Chromium"===e.brand))||{}).version||null,Sg="Windows"===Ag.platform),!vg){const e=Mp().navigator&&Mp().navigator.userAgent||"";hg=/iPod/i.test(e),fg=function(){const t=e.match(/OS (\d+)_/i);return t&&t[1]?t[1]:null}(),gg=/Android/i.test(e),pg=function(){const t=e.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;const n=t[1]&&parseFloat(t[1]),i=t[2]&&parseFloat(t[2]);return n&&i?parseFloat(t[1]+"."+t[2]):n||null}(),mg=/Firefox/i.test(e),yg=/Edg/i.test(e),vg=/Chrome/i.test(e)||/CriOS/i.test(e),bg=!yg&&vg,_g=wg=function(){const t=e.match(/(Chrome|CriOS)\/(\d+)/);return t&&t[2]?parseFloat(t[2]):null}(),Tg=function(){const t=/MSIE\s(\d+)\.\d/.exec(e);let n=t&&parseFloat(t[1]);return!n&&/Trident\/7.0/i.test(e)&&/rv:11.0/.test(e)&&(n=11),n}(),Ig=/Safari/i.test(e)&&!bg&&!gg&&!yg,Sg=/Windows/i.test(e),kg=/iPad/i.test(e)||Ig&&Eg&&!/iPhone/i.test(e),Cg=/iPhone/i.test(e)&&!kg}const Pg=Cg||kg||hg,xg=(Ig||Pg)&&!bg;var Dg=Object.freeze({__proto__:null,get IS_IPOD(){return hg},get IOS_VERSION(){return fg},get IS_ANDROID(){return gg},get ANDROID_VERSION(){return pg},get IS_FIREFOX(){return mg},get IS_EDGE(){return yg},get IS_CHROMIUM(){return vg},get IS_CHROME(){return bg},get CHROMIUM_VERSION(){return _g},get CHROME_VERSION(){return wg},get IE_VERSION(){return Tg},get IS_SAFARI(){return Ig},get IS_WINDOWS(){return Sg},get IS_IPAD(){return kg},get IS_IPHONE(){return Cg},TOUCH_ENABLED:Eg,IS_IOS:Pg,IS_ANY_SAFARI:xg});function Og(e){return"string"==typeof e&&Boolean(e.trim())}function Rg(){return Up()===Mp().document}function Ng(e){return og(e)&&1===e.nodeType}function Mg(){try{return Mp().parent!==Mp().self}catch(e){return!0}}function Lg(e){return function(t,n){if(!Og(t))return Up()[e](null);Og(n)&&(n=Up().querySelector(n));const i=Ng(n)?n:Up();return i[e]&&i[e](t)}}function Ug(e="div",t={},n={},i){const r=Up().createElement(e);return Object.getOwnPropertyNames(t).forEach((function(e){const n=t[e];"textContent"===e?jg(r,n):r[e]===n&&"tabIndex"!==e||(r[e]=n)})),Object.getOwnPropertyNames(n).forEach((function(e){r.setAttribute(e,n[e])})),i&&im(r,i),r}function jg(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function Bg(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function qg(e,t){return function(e){if(e.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}(t),e.classList.contains(t)}function Fg(e,...t){return e.classList.add(...t.reduce(((e,t)=>e.concat(t.split(/\s+/))),[])),e}function Vg(e,...t){return e?(e.classList.remove(...t.reduce(((e,t)=>e.concat(t.split(/\s+/))),[])),e):(eg.warn("removeClass was called with an element that doesn't exist"),null)}function zg(e,t,n){return"function"==typeof n&&(n=n(e,t)),"boolean"!=typeof n&&(n=void 0),t.split(/\s+/).forEach((t=>e.classList.toggle(t,n))),e}function $g(e,t){Object.getOwnPropertyNames(t).forEach((function(n){const i=t[n];null==i||!1===i?e.removeAttribute(n):e.setAttribute(n,!0===i?"":i)}))}function Hg(e){const t={},n=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(e&&e.attributes&&e.attributes.length>0){const i=e.attributes;for(let e=i.length-1;e>=0;e--){const r=i[e].name;let s=i[e].value;n.includes(r)&&(s=null!==s),t[r]=s}}return t}function Wg(e,t){return e.getAttribute(t)}function Zg(e,t,n){e.setAttribute(t,n)}function Gg(e,t){e.removeAttribute(t)}function Xg(){Up().body.focus(),Up().onselectstart=function(){return!1}}function Kg(){Up().onselectstart=function(){return!0}}function Jg(e){if(e&&e.getBoundingClientRect&&e.parentNode){const t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach((e=>{void 0!==t[e]&&(n[e]=t[e])})),n.height||(n.height=parseFloat(dm(e,"height"))),n.width||(n.width=parseFloat(dm(e,"width"))),n}}function Yg(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};const t=e.offsetWidth,n=e.offsetHeight;let i=0,r=0;for(;e.offsetParent&&e!==Up()[Xf.fullscreenElement];)i+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;return{left:i,top:r,width:t,height:n}}function Qg(e,t){const n={x:0,y:0};if(Pg){let t=e;for(;t&&"html"!==t.nodeName.toLowerCase();){const e=dm(t,"transform");if(/^matrix/.test(e)){const t=e.slice(7,-1).split(/,\s/).map(Number);n.x+=t[4],n.y+=t[5]}else if(/^matrix3d/.test(e)){const t=e.slice(9,-1).split(/,\s/).map(Number);n.x+=t[12],n.y+=t[13]}t=t.parentNode}}const i={},r=Yg(t.target),s=Yg(e),o=s.width,a=s.height;let d=t.offsetY-(s.top-r.top),l=t.offsetX-(s.left-r.left);return t.changedTouches&&(l=t.changedTouches[0].pageX-s.left,d=t.changedTouches[0].pageY+s.top,Pg&&(l-=n.x,d-=n.y)),i.y=1-Math.max(0,Math.min(1,d/a)),i.x=Math.max(0,Math.min(1,l/o)),i}function em(e){return og(e)&&3===e.nodeType}function tm(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function nm(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map((e=>("function"==typeof e&&(e=e()),Ng(e)||em(e)?e:"string"==typeof e&&/\S/.test(e)?Up().createTextNode(e):void 0))).filter((e=>e))}function im(e,t){return nm(t).forEach((t=>e.appendChild(t))),e}function rm(e,t){return im(tm(e),t)}function sm(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||"mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons}const om=Lg("querySelector"),am=Lg("querySelectorAll");function dm(e,t){if(!e||!t)return"";if("function"==typeof Mp().getComputedStyle){let n;try{n=Mp().getComputedStyle(e)}catch(e){return""}return n?n.getPropertyValue(t)||n[t]:""}return""}function lm(e){[...Up().styleSheets].forEach((t=>{try{const n=[...t.cssRules].map((e=>e.cssText)).join(""),i=Up().createElement("style");i.textContent=n,e.document.head.appendChild(i)}catch(n){const i=Up().createElement("link");i.rel="stylesheet",i.type=t.type,i.media=t.media.mediaText,i.href=t.href,e.document.head.appendChild(i)}}))}var cm=Object.freeze({__proto__:null,isReal:Rg,isEl:Ng,isInFrame:Mg,createEl:Ug,textContent:jg,prependTo:Bg,hasClass:qg,addClass:Fg,removeClass:Vg,toggleClass:zg,setAttributes:$g,getAttributes:Hg,getAttribute:Wg,setAttribute:Zg,removeAttribute:Gg,blockTextSelection:Xg,unblockTextSelection:Kg,getBoundingClientRect:Jg,findPosition:Yg,getPointerPosition:Qg,isTextNode:em,emptyEl:tm,normalizeContent:nm,appendContent:im,insertContent:rm,isSingleLeftClick:sm,$:om,$$:am,computedStyle:dm,copyStyleSheetsToWindow:lm});let um,pm=!1;const hm=function(){if(!1===um.options.autoSetup)return;const e=Array.prototype.slice.call(Up().getElementsByTagName("video")),t=Array.prototype.slice.call(Up().getElementsByTagName("audio")),n=Array.prototype.slice.call(Up().getElementsByTagName("video-js")),i=e.concat(t,n);if(i&&i.length>0)for(let e=0,t=i.length;e<t;e++){const t=i[e];if(!t||!t.getAttribute){fm(1);break}void 0===t.player&&null!==t.getAttribute("data-setup")&&um(t)}else pm||fm(1)};function fm(e,t){Rg()&&(t&&(um=t),Mp().setTimeout(hm,e))}function gm(){pm=!0,Mp().removeEventListener("load",gm)}Rg()&&("complete"===Up().readyState?gm():Mp().addEventListener("load",gm));const mm=function(e){const t=Up().createElement("style");return t.className=e,t},ym=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t};var vm=new WeakMap;let bm,_m=3;function wm(){return _m++}function Tm(e,t){if(!vm.has(e))return;const n=vm.get(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&vm.delete(e)}function Im(e,t,n,i){n.forEach((function(n){e(t,n,i)}))}function Sm(e){if(e.fixed_)return e;function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped||!e.isImmediatePropagationStopped){const i=e||Mp().event;e={};for(const t in i)"layerX"!==t&&"layerY"!==t&&"keyLocation"!==t&&"webkitMovementX"!==t&&"webkitMovementY"!==t&&"path"!==t&&("returnValue"===t&&i.preventDefault||(e[t]=i[t]));if(e.target||(e.target=e.srcElement||Up()),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){i.preventDefault&&i.preventDefault(),e.returnValue=!1,i.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),e.cancelBubble=!0,i.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX){const t=Up().documentElement,n=Up().body;e.pageX=e.clientX+(t&&t.scrollLeft||n&&n.scrollLeft||0)-(t&&t.clientLeft||n&&n.clientLeft||0),e.pageY=e.clientY+(t&&t.scrollTop||n&&n.scrollTop||0)-(t&&t.clientTop||n&&n.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e.fixed_=!0,e}const km=function(){if("boolean"!=typeof bm){bm=!1;try{const e=Object.defineProperty({},"passive",{get(){bm=!0}});Mp().addEventListener("test",null,e),Mp().removeEventListener("test",null,e)}catch(e){}}return bm},Cm=["touchstart","touchmove"];function Em(e,t,n){if(Array.isArray(t))return Im(Em,e,t,n);vm.has(e)||vm.set(e,{});const i=vm.get(e);if(i.handlers||(i.handlers={}),i.handlers[t]||(i.handlers[t]=[]),n.guid||(n.guid=wm()),i.handlers[t].push(n),i.dispatcher||(i.disabled=!1,i.dispatcher=function(t,n){if(i.disabled)return;t=Sm(t);const r=i.handlers[t.type];if(r){const i=r.slice(0);for(let r=0,s=i.length;r<s&&!t.isImmediatePropagationStopped();r++)try{i[r].call(e,t,n)}catch(e){eg.error(e)}}}),1===i.handlers[t].length)if(e.addEventListener){let n=!1;km()&&Cm.indexOf(t)>-1&&(n={passive:!0}),e.addEventListener(t,i.dispatcher,n)}else e.attachEvent&&e.attachEvent("on"+t,i.dispatcher)}function Am(e,t,n){if(!vm.has(e))return;const i=vm.get(e);if(!i.handlers)return;if(Array.isArray(t))return Im(Am,e,t,n);const r=function(e,t){i.handlers[t]=[],Tm(e,t)};if(void 0===t){for(const t in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},t)&&r(e,t);return}const s=i.handlers[t];if(s)if(n){if(n.guid)for(let e=0;e<s.length;e++)s[e].guid===n.guid&&s.splice(e--,1);Tm(e,t)}else r(e,t)}function Pm(e,t,n){const i=vm.has(e)?vm.get(e):{},r=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=Sm(t),i.dispatcher&&i.dispatcher.call(e,t,n),r&&!t.isPropagationStopped()&&!0===t.bubbles)Pm.call(null,r,t,n);else if(!r&&!t.defaultPrevented&&t.target&&t.target[t.type]){vm.has(t.target)||vm.set(t.target,{});const e=vm.get(t.target);t.target[t.type]&&(e.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),e.disabled=!1)}return!t.defaultPrevented}function xm(e,t,n){if(Array.isArray(t))return Im(xm,e,t,n);const i=function(){Am(e,t,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||wm(),Em(e,t,i)}function Dm(e,t,n){const i=function(){Am(e,t,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||wm(),Em(e,t,i)}var Om=Object.freeze({__proto__:null,fixEvent:Sm,on:Em,off:Am,trigger:Pm,one:xm,any:Dm});const Rm=30,Nm=function(e,t,n){t.guid||(t.guid=wm());const i=t.bind(e);return i.guid=n?n+"_"+t.guid:t.guid,i},Mm=function(e,t){let n=Mp().performance.now();return function(...i){const r=Mp().performance.now();r-n>=t&&(e(...i),n=r)}},Lm=function(e,t,n,i=Mp()){let r;const s=function(){const s=this,o=arguments;let a=function(){r=null,a=null,n||e.apply(s,o)};!r&&n&&e.apply(s,o),i.clearTimeout(r),r=i.setTimeout(a,t)};return s.cancel=()=>{i.clearTimeout(r),r=null},s};var Um=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:Rm,bind_:Nm,throttle:Mm,debounce:Lm});let jm;class Bm{on(e,t){const n=this.addEventListener;this.addEventListener=()=>{},Em(this,e,t),this.addEventListener=n}off(e,t){Am(this,e,t)}one(e,t){const n=this.addEventListener;this.addEventListener=()=>{},xm(this,e,t),this.addEventListener=n}any(e,t){const n=this.addEventListener;this.addEventListener=()=>{},Dm(this,e,t),this.addEventListener=n}trigger(e){const t=e.type||e;"string"==typeof e&&(e={type:t}),e=Sm(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),Pm(this,e)}queueTrigger(e){jm||(jm=new Map);const t=e.type||e;let n=jm.get(this);n||(n=new Map,jm.set(this,n));const i=n.get(t);n.delete(t),Mp().clearTimeout(i);const r=Mp().setTimeout((()=>{n.delete(t),0===n.size&&(n=null,jm.delete(this)),this.trigger(e)}),0);n.set(t,r)}}Bm.prototype.allowedEvents_={},Bm.prototype.addEventListener=Bm.prototype.on,Bm.prototype.removeEventListener=Bm.prototype.off,Bm.prototype.dispatchEvent=Bm.prototype.trigger;const qm=e=>"function"==typeof e.name?e.name():"string"==typeof e.name?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e,Fm=e=>e instanceof Bm||!!e.eventBusEl_&&["on","one","off","trigger"].every((t=>"function"==typeof e[t])),Vm=e=>"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length,zm=(e,t,n)=>{if(!e||!e.nodeName&&!Fm(e))throw new Error(`Invalid target for ${qm(t)}#${n}; must be a DOM node or evented object.`)},$m=(e,t,n)=>{if(!Vm(e))throw new Error(`Invalid event type for ${qm(t)}#${n}; must be a non-empty string or array.`)},Hm=(e,t,n)=>{if("function"!=typeof e)throw new Error(`Invalid listener for ${qm(t)}#${n}; must be a function.`)},Wm=(e,t,n)=>{const i=t.length<3||t[0]===e||t[0]===e.eventBusEl_;let r,s,o;return i?(r=e.eventBusEl_,t.length>=3&&t.shift(),[s,o]=t):[r,s,o]=t,zm(r,e,n),$m(s,e,n),Hm(o,e,n),o=Nm(e,o),{isTargetingSelf:i,target:r,type:s,listener:o}},Zm=(e,t,n,i)=>{zm(e,e,t),e.nodeName?Om[t](e,n,i):e[t](n,i)},Gm={on(...e){const{isTargetingSelf:t,target:n,type:i,listener:r}=Wm(this,e,"on");if(Zm(n,"on",i,r),!t){const e=()=>this.off(n,i,r);e.guid=r.guid;const t=()=>this.off("dispose",e);t.guid=r.guid,Zm(this,"on","dispose",e),Zm(n,"on","dispose",t)}},one(...e){const{isTargetingSelf:t,target:n,type:i,listener:r}=Wm(this,e,"one");if(t)Zm(n,"one",i,r);else{const e=(...t)=>{this.off(n,i,e),r.apply(null,t)};e.guid=r.guid,Zm(n,"one",i,e)}},any(...e){const{isTargetingSelf:t,target:n,type:i,listener:r}=Wm(this,e,"any");if(t)Zm(n,"any",i,r);else{const e=(...t)=>{this.off(n,i,e),r.apply(null,t)};e.guid=r.guid,Zm(n,"any",i,e)}},off(e,t,n){if(!e||Vm(e))Am(this.eventBusEl_,e,t);else{const i=e,r=t;zm(i,this,"off"),$m(r,this,"off"),Hm(n,this,"off"),n=Nm(this,n),this.off("dispose",n),i.nodeName?(Am(i,r,n),Am(i,"dispose",n)):Fm(i)&&(i.off(r,n),i.off("dispose",n))}},trigger(e,t){zm(this.eventBusEl_,this,"trigger");const n=e&&"string"!=typeof e?e.type:e;if(!Vm(n))throw new Error(`Invalid event type for ${qm(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return Pm(this.eventBusEl_,e,t)}};function Xm(e,t={}){const{eventBusKey:n}=t;if(n){if(!e[n].nodeName)throw new Error(`The eventBusKey "${n}" does not refer to an element.`);e.eventBusEl_=e[n]}else e.eventBusEl_=Ug("span",{className:"vjs-event-bus"});return Object.assign(e,Gm),e.eventedCallbacks&&e.eventedCallbacks.forEach((e=>{e()})),e.on("dispose",(()=>{e.off(),[e,e.el_,e.eventBusEl_].forEach((function(e){e&&vm.has(e)&&vm.delete(e)})),Mp().setTimeout((()=>{e.eventBusEl_=null}),0)})),e}const Km={state:{},setState(e){let t;return"function"==typeof e&&(e=e()),rg(e,((e,n)=>{this.state[n]!==e&&(t=t||{},t[n]={from:this.state[n],to:e}),this.state[n]=e})),t&&Fm(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function Jm(e,t){return Object.assign(e,Km),e.state=Object.assign({},e.state,t),"function"==typeof e.handleStateChanged&&Fm(e)&&e.on("statechanged",e.handleStateChanged),e}const Ym=function(e){return"string"!=typeof e?e:e.replace(/./,(e=>e.toLowerCase()))},Qm=function(e){return"string"!=typeof e?e:e.replace(/./,(e=>e.toUpperCase()))},ey=function(e,t){return Qm(e)===Qm(t)};var ty=Object.freeze({__proto__:null,toLowerCase:Ym,toTitleCase:Qm,titleCaseEquals:ey});class ny{constructor(e,t,n){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=dg({},this.options_),t=this.options_=dg(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){const t=e&&e.id&&e.id()||"no_player";this.id_=`${t}_component_${wm()}`}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach((e=>this.addClass(e))),["on","off","one","any","trigger"].forEach((e=>{this[e]=void 0})),!1!==t.evented&&(Xm(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Jm(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,!1!==t.initChildren&&this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}on(e,t){}off(e,t){}one(e,t){}any(e,t){}trigger(e,t){}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return Boolean(this.isDisposed_)}player(){return this.player_}options(e){return e?(this.options_=dg(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,t,n){return Ug(e,t,n)}localize(e,t,n=e){const i=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),s=r&&r[i],o=i&&i.split("-")[0],a=r&&r[o];let d=n;return s&&s[e]?d=s[e]:a&&a[e]&&(d=a[e]),t&&(d=d.replace(/\{(\d+)\}/g,(function(e,n){const i=t[n-1];let r=i;return void 0===i&&(r=e),r}))),d}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce(((e,t)=>e.concat(t)),[]);let t=this;for(let n=0;n<e.length;n++)if(t=t.getChild(e[n]),!t||!t.getChild)return;return t}setIcon(e,t=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const n="http://www.w3.org/2000/svg",i=Ug("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),r=Up().createElementNS(n,"svg");r.setAttributeNS(null,"viewBox","0 0 512 512");const s=Up().createElementNS(n,"use");return r.appendChild(s),s.setAttributeNS(null,"href",`#vjs-icon-${e}`),i.appendChild(r),this.iconIsSet_?t.replaceChild(i,t.querySelector(".vjs-icon-placeholder")):t.appendChild(i),this.iconIsSet_=!0,i}addChild(e,t={},n=this.children_.length){let i,r;if("string"==typeof e){r=Qm(e);const n=t.componentClass||r;t.name=r;const s=ny.getComponent(n);if(!s)throw new Error(`Component ${n} does not exist`);if("function"!=typeof s)return null;i=new s(this.player_||this,t)}else i=e;if(i.parentComponent_&&i.parentComponent_.removeChild(i),this.children_.splice(n,0,i),i.parentComponent_=this,"function"==typeof i.id&&(this.childIndex_[i.id()]=i),r=r||i.name&&Qm(i.name()),r&&(this.childNameIndex_[r]=i,this.childNameIndex_[Ym(r)]=i),"function"==typeof i.el&&i.el()){let e=null;this.children_[n+1]&&(this.children_[n+1].el_?e=this.children_[n+1].el_:Ng(this.children_[n+1])&&(e=this.children_[n+1])),this.contentEl().insertBefore(i.el(),e)}return i}removeChild(e){if("string"==typeof e&&(e=this.getChild(e)),!e||!this.children_)return;let t=!1;for(let n=this.children_.length-1;n>=0;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(!t)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[Qm(e.name())]=null,this.childNameIndex_[Ym(e.name())]=null;const n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const t=this.options_,n=e=>{const n=e.name;let i=e.opts;if(void 0!==t[n]&&(i=t[n]),!1===i)return;!0===i&&(i={}),i.playerOptions=this.options_.playerOptions;const r=this.addChild(n,i);r&&(this[n]=r)};let i;const r=ny.getComponent("Tech");i=Array.isArray(e)?e:Object.keys(e),i.concat(Object.keys(this.options_).filter((function(e){return!i.some((function(t){return"string"==typeof t?e===t:e===t.name}))}))).map((t=>{let n,i;return"string"==typeof t?(n=t,i=e[n]||this.options_[n]||{}):(n=t.name,i=t),{name:n,opts:i}})).filter((e=>{const t=ny.getComponent(e.opts.componentClass||Qm(e.name));return t&&!r.isTech(t)})).forEach(n)}}buildCSSClass(){return""}ready(e,t=!1){if(e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))}triggerReady(){this.isReady_=!0,this.setTimeout((function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach((function(e){e.call(this)}),this),this.trigger("ready")}),1)}$(e,t){return om(e,t||this.contentEl())}$$(e,t){return am(e,t||this.contentEl())}hasClass(e){return qg(this.el_,e)}addClass(...e){Fg(this.el_,...e)}removeClass(...e){Vg(this.el_,...e)}toggleClass(e,t){zg(this.el_,e,t)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return Wg(this.el_,e)}setAttribute(e,t){Zg(this.el_,e,t)}removeAttribute(e){Gg(this.el_,e)}width(e,t){return this.dimension("width",e,t)}height(e,t){return this.dimension("height",e,t)}dimensions(e,t){this.width(e,!0),this.height(t)}dimension(e,t,n){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;const i=this.el_.style[e],r=i.indexOf("px");return-1!==r?parseInt(i.slice(0,r),10):parseInt(this.el_["offset"+Qm(e)],10)}currentDimension(e){let t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=dm(this.el_,e),t=parseFloat(t),0===t||isNaN(t)){const n=`offset${Qm(e)}`;t=this.el_[n]}return t}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(Bp().isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e,t=0,n=null;this.on("touchstart",(function(i){1===i.touches.length&&(n={pageX:i.touches[0].pageX,pageY:i.touches[0].pageY},t=Mp().performance.now(),e=!0)})),this.on("touchmove",(function(t){if(t.touches.length>1)e=!1;else if(n){const i=t.touches[0].pageX-n.pageX,r=t.touches[0].pageY-n.pageY;Math.sqrt(i*i+r*r)>10&&(e=!1)}}));const i=function(){e=!1};this.on("touchleave",i),this.on("touchcancel",i),this.on("touchend",(function(i){n=null,!0===e&&Mp().performance.now()-t<200&&(i.preventDefault(),this.trigger("tap"))}))}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=Nm(this.player(),this.player().reportUserActivity);let t;this.on("touchstart",(function(){e(),this.clearInterval(t),t=this.setInterval(e,250)}));const n=function(n){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n)}setTimeout(e,t){var n;return e=Nm(this,e),this.clearTimersOnDispose_(),n=Mp().setTimeout((()=>{this.setTimeoutIds_.has(n)&&this.setTimeoutIds_.delete(n),e()}),t),this.setTimeoutIds_.add(n),n}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),Mp().clearTimeout(e)),e}setInterval(e,t){e=Nm(this,e),this.clearTimersOnDispose_();const n=Mp().setInterval(e,t);return this.setIntervalIds_.add(n),n}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),Mp().clearInterval(e)),e}requestAnimationFrame(e){var t;return this.clearTimersOnDispose_(),e=Nm(this,e),t=Mp().requestAnimationFrame((()=>{this.rafIds_.has(t)&&this.rafIds_.delete(t),e()})),this.rafIds_.add(t),t}requestNamedAnimationFrame(e,t){if(this.namedRafs_.has(e))return;this.clearTimersOnDispose_(),t=Nm(this,t);const n=this.requestAnimationFrame((()=>{t(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)}));return this.namedRafs_.set(e,n),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),Mp().cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",(()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach((([e,t])=>{this[e].forEach(((e,n)=>this[t](n)))})),this.clearingTimersOnDispose_=!1})))}static registerComponent(e,t){if("string"!=typeof e||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const n=ny.getComponent("Tech"),i=n&&n.isTech(t),r=ny===t||ny.prototype.isPrototypeOf(t.prototype);if(i||!r){let t;throw t=i?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error(`Illegal component, "${e}"; ${t}.`)}e=Qm(e),ny.components_||(ny.components_={});const s=ny.getComponent("Player");if("Player"===e&&s&&s.players){const e=s.players,t=Object.keys(e);if(e&&t.length>0&&t.map((t=>e[t])).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return ny.components_[e]=t,ny.components_[Ym(e)]=t,t}static getComponent(e){if(e&&ny.components_)return ny.components_[e]}}function iy(e,t,n,i){return function(e,t,n){if("number"!=typeof t||t<0||t>n)throw new Error(`Failed to execute '${e}' on 'TimeRanges': The index provided (${t}) is non-numeric or out of bounds (0-${n}).`)}(e,i,n.length-1),n[i][t]}function ry(e){let t;return t=void 0===e||0===e.length?{length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:iy.bind(null,"start",0,e),end:iy.bind(null,"end",1,e)},Mp().Symbol&&Mp().Symbol.iterator&&(t[Mp().Symbol.iterator]=()=>(e||[]).values()),t}function sy(e,t){return Array.isArray(e)?ry(e):void 0===e||void 0===t?ry():ry([[e,t]])}ny.registerComponent("Component",ny);const oy=function(e,t){e=e<0?0:e;let n=Math.floor(e%60),i=Math.floor(e/60%60),r=Math.floor(e/3600);const s=Math.floor(t/60%60),o=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(r=i=n="-"),r=r>0||o>0?r+":":"",i=((r||s>=10)&&i<10?"0"+i:i)+":",n=n<10?"0"+n:n,r+i+n};let ay=oy;function dy(e){ay=e}function ly(){ay=oy}function cy(e,t=e){return ay(e,t)}var uy=Object.freeze({__proto__:null,createTimeRanges:sy,createTimeRange:sy,setFormatTime:dy,resetFormatTime:ly,formatTime:cy});function py(e,t){let n,i,r=0;if(!t)return 0;e&&e.length||(e=sy(0,0));for(let s=0;s<e.length;s++)n=e.start(s),i=e.end(s),i>t&&(i=t),r+=i-n;return r/t}function hy(e){if(e instanceof hy)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:og(e)&&("number"==typeof e.code&&(this.code=e.code),Object.assign(this,e)),this.message||(this.message=hy.defaultMessages[this.code]||"")}hy.prototype.code=0,hy.prototype.message="",hy.prototype.status=null,hy.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],hy.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(let e=0;e<hy.errorTypes.length;e++)hy[hy.errorTypes[e]]=e,hy.prototype[hy.errorTypes[e]]=e;function fy(e){return null!=e&&"function"==typeof e.then}function gy(e){fy(e)&&e.then(null,(e=>{}))}const my=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(((t,n,i)=>(e[n]&&(t[n]=e[n]),t)),{cues:e.cues&&Array.prototype.map.call(e.cues,(function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}}))})};const yy="vjs-modal-dialog";class vy extends ny{constructor(e,t){super(e,t),this.handleKeyDown_=e=>this.handleKeyDown(e),this.close_=e=>this.close(e),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=Ug("div",{className:`${yy}-content`},{role:"document"}),this.descEl_=Ug("p",{className:`${yy}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),jg(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${yy} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(!this.opened_){const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}}opened(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if("boolean"==typeof e){const t=this.closeable_=!!e;let n=this.getChild("closeButton");if(t&&!n){const e=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=e,this.on(n,"close",this.close_)}!t&&n&&(this.off(n,"close",this.close_),this.removeChild(n),n.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const t=this.contentEl(),n=t.parentNode,i=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),rm(t,e),this.trigger("modalfill"),i?n.insertBefore(t,i):n.appendChild(t);const r=this.getChild("closeButton");r&&n.appendChild(r.el_)}empty(){this.trigger("beforemodalempty"),tm(this.contentEl()),this.trigger("modalempty")}content(e){return void 0!==e&&(this.content_=e),this.content_}conditionalFocus_(){const e=Up().activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(e.stopPropagation(),Bp().isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(!Bp().isEventKey(e,"Tab"))return;const t=this.focusableEls_(),n=this.el_.querySelector(":focus");let i;for(let e=0;e<t.length;e++)if(n===t[e]){i=e;break}Up().activeElement===this.el_&&(i=0),e.shiftKey&&0===i?(t[t.length-1].focus(),e.preventDefault()):e.shiftKey||i!==t.length-1||(t[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,(e=>(e instanceof Mp().HTMLAnchorElement||e instanceof Mp().HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof Mp().HTMLInputElement||e instanceof Mp().HTMLSelectElement||e instanceof Mp().HTMLTextAreaElement||e instanceof Mp().HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof Mp().HTMLIFrameElement||e instanceof Mp().HTMLObjectElement||e instanceof Mp().HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")))}}vy.prototype.options_={pauseOnOpen:!0,temporary:!0},ny.registerComponent("ModalDialog",vy);class by extends Bm{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let t=0;t<e.length;t++)this.addTrack(e[t])}addTrack(e){const t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},Fm(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let t;for(let n=0,i=this.length;n<i;n++)if(this[n]===e){t=this[n],t.off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})}getTrackById(e){let t=null;for(let n=0,i=this.length;n<i;n++){const i=this[n];if(i.id===e){t=i;break}}return t}}by.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const e in by.prototype.allowedEvents_)by.prototype["on"+e]=null;const _y=function(e,t){for(let n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)},wy=function(e,t){for(let n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)};class Ty extends by{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class Iy{constructor(e){Iy.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const t=this.length||0;let n=0;const i=e.length;this.cues_=e,this.length_=e.length;const r=function(e){""+e in this||Object.defineProperty(this,""+e,{get(){return this.cues_[e]}})};if(t<i)for(n=t;n<i;n++)r.call(this,n)}getCueById(e){let t=null;for(let n=0,i=this.length;n<i;n++){const i=this[n];if(i.id===e){t=i;break}}return t}}const Sy={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},ky={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Cy={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Ey={disabled:"disabled",hidden:"hidden",showing:"showing"};class Ay extends Bm{constructor(e={}){super();const t={id:e.id||"vjs_track_"+wm(),kind:e.kind||"",language:e.language||""};let n=e.label||"";for(const e in t)Object.defineProperty(this,e,{get:()=>t[e],set(){}});Object.defineProperty(this,"label",{get:()=>n,set(e){e!==n&&(n=e,this.trigger("labelchange"))}})}}const Py=function(e){const t=["protocol","hostname","port","pathname","search","hash","host"],n=Up().createElement("a");n.href=e;const i={};for(let e=0;e<t.length;e++)i[t[e]]=n[t[e]];return"http:"===i.protocol&&(i.host=i.host.replace(/:80$/,"")),"https:"===i.protocol&&(i.host=i.host.replace(/:443$/,"")),i.protocol||(i.protocol=Mp().location.protocol),i.host||(i.host=Mp().location.host),i},xy=function(e){if(!e.match(/^https?:\/\//)){const t=Up().createElement("a");t.href=e,e=t.href}return e},Dy=function(e){if("string"==typeof e){const t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(t)return t.pop().toLowerCase()}return""},Oy=function(e,t=Mp().location){const n=Py(e);return(":"===n.protocol?t.protocol:n.protocol)+n.host!==t.protocol+t.host};var Ry=Object.freeze({__proto__:null,parseUrl:Py,getAbsoluteURL:xy,getFileExtension:Dy,isCrossOrigin:Oy});const Ny=function(e,t){const n=new(Mp().WebVTT.Parser)(Mp(),Mp().vttjs,Mp().WebVTT.StringDecoder()),i=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){i.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),i.length>0&&(Mp().console&&Mp().console.groupCollapsed&&Mp().console.groupCollapsed(`Text Track parsing errors for ${t.src}`),i.forEach((e=>eg.error(e))),Mp().console&&Mp().console.groupEnd&&Mp().console.groupEnd()),n.flush()},My=function(e,t){const n={uri:e},i=Oy(e);i&&(n.cors=i);const r="use-credentials"===t.tech_.crossOrigin();r&&(n.withCredentials=r),zp()(n,Nm(this,(function(e,n,i){if(e)return eg.error(e,n);t.loaded_=!0,"function"!=typeof Mp().WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],(e=>{if("vttjserror"!==e.type)return Ny(i,t);eg.error(`vttjs failed to load, stopping trying to process ${t.src}`)})):Ny(i,t)})))};class Ly extends Ay{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const t=dg(e,{kind:Cy[e.kind]||"subtitles",language:e.language||e.srclang||""});let n=Ey[t.mode]||"disabled";const i=t.default;"metadata"!==t.kind&&"chapters"!==t.kind||(n="hidden"),super(t),this.tech_=t.tech,this.cues_=[],this.activeCues_=[],this.preload_=!1!==this.tech_.preloadTextTracks;const r=new Iy(this.cues_),s=new Iy(this.activeCues_);let o=!1;this.timeupdateHandler=Nm(this,(function(e={}){this.tech_.isDisposed()||(this.tech_.isReady_?(this.activeCues=this.activeCues,o&&(this.trigger("cuechange"),o=!1),"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))):"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))})),this.tech_.one("dispose",(()=>{this.stopTracking()})),"disabled"!==n&&this.startTracking(),Object.defineProperties(this,{default:{get:()=>i,set(){}},mode:{get:()=>n,set(e){Ey[e]&&n!==e&&(n=e,this.preload_||"disabled"===n||0!==this.cues.length||My(this.src,this),this.stopTracking(),"disabled"!==n&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?r:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(0===this.cues.length)return s;const e=this.tech_.currentTime(),t=[];for(let n=0,i=this.cues.length;n<i;n++){const i=this.cues[n];i.startTime<=e&&i.endTime>=e&&t.push(i)}if(o=!1,t.length!==this.activeCues_.length)o=!0;else for(let e=0;e<t.length;e++)-1===this.activeCues_.indexOf(t[e])&&(o=!0);return this.activeCues_=t,s.setCues_(this.activeCues_),s},set(){}}}),t.src?(this.src=t.src,this.preload_||(this.loaded_=!0),(this.preload_||"subtitles"!==t.kind&&"captions"!==t.kind)&&My(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let t=e;if(t.constructor&&"VTTCue"!==t.constructor.name){t=new(Mp().vttjs.VTTCue)(e.startTime,e.endTime,e.text);for(const n in e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}const n=this.tech_.textTracks();for(let e=0;e<n.length;e++)n[e]!==this&&n[e].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)}removeCue(e){let t=this.cues_.length;for(;t--;){const n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}}}Ly.prototype.allowedEvents_={cuechange:"cuechange"};class Uy extends Ay{constructor(e={}){const t=dg(e,{kind:ky[e.kind]||""});super(t);let n=!1;Object.defineProperty(this,"enabled",{get:()=>n,set(e){"boolean"==typeof e&&e!==n&&(n=e,this.trigger("enabledchange"))}}),t.enabled&&(this.enabled=t.enabled),this.loaded_=!0}}class jy extends Ay{constructor(e={}){const t=dg(e,{kind:Sy[e.kind]||""});super(t);let n=!1;Object.defineProperty(this,"selected",{get:()=>n,set(e){"boolean"==typeof e&&e!==n&&(n=e,this.trigger("selectedchange"))}}),t.selected&&(this.selected=t.selected)}}class By extends Bm{constructor(e={}){let t;super();const n=new Ly(e);this.kind=n.kind,this.src=n.src,this.srclang=n.language,this.label=n.label,this.default=n.default,Object.defineProperties(this,{readyState:{get:()=>t},track:{get:()=>n}}),t=By.NONE,n.addEventListener("loadeddata",(()=>{t=By.LOADED,this.trigger({type:"load",target:this})}))}}By.prototype.allowedEvents_={load:"load"},By.NONE=0,By.LOADING=1,By.LOADED=2,By.ERROR=3;const qy={audio:{ListClass:class extends by{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].enabled){_y(e,e[t]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&_y(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,_y(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}},TrackClass:Uy,capitalName:"Audio"},video:{ListClass:class extends by{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].selected){wy(e,e[t]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set(){}})}addTrack(e){e.selected&&wy(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,wy(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}},TrackClass:jy,capitalName:"Video"},text:{ListClass:Ty,TrackClass:Ly,capitalName:"Text"}};Object.keys(qy).forEach((function(e){qy[e].getterName=`${e}Tracks`,qy[e].privateName=`${e}Tracks_`}));const Fy={remoteText:{ListClass:Ty,TrackClass:Ly,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:class{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}addTrackElement_(e){const t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let t;for(let n=0,i=this.trackElements_.length;n<i;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t}removeTrackElement_(e){for(let t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}}},TrackClass:By,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Vy=Object.assign({},qy,Fy);Fy.names=Object.keys(Fy),qy.names=Object.keys(qy),Vy.names=[].concat(Fy.names).concat(qy.names);class zy extends ny{constructor(e={},t=function(){}){e.reportTouchActivity=!1,super(null,e,t),this.onDurationChange_=e=>this.onDurationChange(e),this.trackProgress_=e=>this.trackProgress(e),this.trackCurrentTime_=e=>this.trackCurrentTime(e),this.stopTrackingCurrentTime_=e=>this.stopTrackingCurrentTime(e),this.disposeSourceHandler_=e=>this.disposeSourceHandler(e),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",(function(){this.hasStarted_=!0})),this.on("loadstart",(function(){this.hasStarted_=!1})),Vy.names.forEach((t=>{const n=Vy[t];e&&e[n.getterName]&&(this[n.privateName]=e[n.getterName])})),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((t=>{!1===e[`native${t}Tracks`]&&(this[`featuresNative${t}Tracks`]=!1)})),!1===e.nativeCaptions||!1===e.nativeTextTracks?this.featuresNativeTextTracks=!1:!0!==e.nativeCaptions&&!0!==e.nativeTextTracks||(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=!1!==e.preloadTextTracks,this.autoRemoteTextTracks_=new Vy.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",(()=>this.setTimeout((()=>this.triggerSourceset(e)),1))),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Nm(this,(function(){const e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()})),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return sy(0,0)}bufferedPercent(){return py(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}),250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(qy.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){(e=[].concat(e)).forEach((e=>{const t=this[`${e}Tracks`]()||[];let n=t.length;for(;n--;){const i=t[n];"text"===e&&this.removeRemoteTextTrack(i),t.removeTrack(i)}}))}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let t=e.length;for(;t--;){const n=e[t];this.removeRemoteTextTrack(n)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return void 0!==e&&(this.error_=new hy(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?sy(0,0):sy()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){qy.names.forEach((e=>{const t=qy[e],n=()=>{this.trigger(`${e}trackchange`)},i=this[t.getterName]();i.addEventListener("removetrack",n),i.addEventListener("addtrack",n),this.on("dispose",(()=>{i.removeEventListener("removetrack",n),i.removeEventListener("addtrack",n)}))}))}addWebVttScript_(){if(!Mp().WebVTT)if(Up().body.contains(this.el())){if(!this.options_["vtt.js"]&&ag(Hp())&&Object.keys(Hp()).length>0)return void this.trigger("vttjsloaded");const e=Up().createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",(()=>{e.onload=null,e.onerror=null})),Mp().WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),t=this.remoteTextTracks(),n=t=>e.addTrack(t.track),i=t=>e.removeTrack(t.track);t.on("addtrack",n),t.on("removetrack",i),this.addWebVttScript_();const r=()=>this.trigger("texttrackchange"),s=()=>{r();for(let t=0;t<e.length;t++){const n=e[t];n.removeEventListener("cuechange",r),"showing"===n.mode&&n.addEventListener("cuechange",r)}};s(),e.addEventListener("change",s),e.addEventListener("addtrack",s),e.addEventListener("removetrack",s),this.on("dispose",(function(){t.off("addtrack",n),t.off("removetrack",i),e.removeEventListener("change",s),e.removeEventListener("addtrack",s),e.removeEventListener("removetrack",s);for(let t=0;t<e.length;t++)e[t].removeEventListener("cuechange",r)}))}addTextTrack(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,n,i,r={}){const s=e.textTracks();r.kind=t,n&&(r.label=n),i&&(r.language=i),r.tech=e;const o=new Vy.text.TrackClass(r);return s.addTrack(o),o}(this,e,t,n)}createRemoteTextTrack(e){const t=dg(e,{tech:this});return new Fy.remoteTextEl.TrackClass(t)}addRemoteTextTrack(e={},t){const n=this.createRemoteTextTrack(e);return"boolean"!=typeof t&&(t=!1),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),!1===t&&this.ready((()=>this.autoRemoteTextTracks_.addTrack(n.track))),n}removeRemoteTextTrack(e){const t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const t=wm();return!this.isReady_||this.paused()?(this.queuedHanders_.add(t),this.one("playing",(()=>{this.queuedHanders_.has(t)&&(this.queuedHanders_.delete(t),e())}))):this.requestNamedAnimationFrame(t,e),t}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,t){return zy.canPlayType(e.type)}static isTech(e){return e.prototype instanceof zy||e instanceof zy||e===zy}static registerTech(e,t){if(zy.techs_||(zy.techs_={}),!zy.isTech(t))throw new Error(`Tech ${e} must be a Tech`);if(!zy.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!zy.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Qm(e),zy.techs_[e]=t,zy.techs_[Ym(e)]=t,"Tech"!==e&&zy.defaultTechOrder_.push(e),t}static getTech(e){if(e)return zy.techs_&&zy.techs_[e]?zy.techs_[e]:(e=Qm(e),Mp()&&Mp().videojs&&Mp().videojs[e]?(eg.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),Mp().videojs[e]):void 0)}}Vy.names.forEach((function(e){const t=Vy[e];zy.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}})),zy.prototype.featuresVolumeControl=!0,zy.prototype.featuresMuteControl=!0,zy.prototype.featuresFullscreenResize=!1,zy.prototype.featuresPlaybackRate=!1,zy.prototype.featuresProgressEvents=!1,zy.prototype.featuresSourceset=!1,zy.prototype.featuresTimeupdateEvents=!1,zy.prototype.featuresNativeTextTracks=!1,zy.prototype.featuresVideoFrameCallback=!1,zy.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){let i=e.sourceHandlers;i||(i=e.sourceHandlers=[]),void 0===n&&(n=i.length),i.splice(n,0,t)},e.canPlayType=function(t){const n=e.sourceHandlers||[];let i;for(let e=0;e<n.length;e++)if(i=n[e].canPlayType(t),i)return i;return""},e.selectSourceHandler=function(t,n){const i=e.sourceHandlers||[];let r;for(let e=0;e<i.length;e++)if(r=i[e].canHandleSource(t,n),r)return i[e];return null},e.canPlaySource=function(t,n){const i=e.selectSourceHandler(t,n);return i?i.canHandleSource(t,n):""},["seekable","seeking","duration"].forEach((function(e){const t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})}),e.prototype),e.prototype.setSource=function(t){let n=e.selectSourceHandler(t,this.options_);n||(e.nativeSourceHandler?n=e.nativeSourceHandler:eg.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},ny.registerComponent("Tech",zy),zy.registerTech("Tech",zy),zy.defaultTechOrder_=[];const $y={},Hy={},Wy={};function Zy(e,t,n){e.setTimeout((()=>Qy(t,$y[t.type],n,e)),1)}function Gy(e,t,n,i=null){const r="call"+Qm(n),s=e.reduce(Yy(r),i),o=s===Wy,a=o?null:t[n](s);return function(e,t,n,i){for(let r=e.length-1;r>=0;r--){const s=e[r];s[t]&&s[t](i,n)}}(e,n,a,o),a}const Xy={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Ky={setCurrentTime:1,setMuted:1,setVolume:1},Jy={play:1,pause:1};function Yy(e){return(t,n)=>t===Wy?Wy:n[e]?n[e](t):t}function Qy(e={},t=[],n,i,r=[],s=!1){const[o,...a]=t;if("string"==typeof o)Qy(e,$y[o],n,i,r,s);else if(o){const t=function(e,t){const n=Hy[e.id()];let i=null;if(null==n)return i=t(e),Hy[e.id()]=[[t,i]],i;for(let e=0;e<n.length;e++){const[r,s]=n[e];r===t&&(i=s)}return null===i&&(i=t(e),n.push([t,i])),i}(i,o);if(!t.setSource)return r.push(t),Qy(e,a,n,i,r,s);t.setSource(Object.assign({},e),(function(o,d){if(o)return Qy(e,a,n,i,r,s);r.push(t),Qy(d,e.type===d.type?a:$y[d.type],n,i,r,s)}))}else a.length?Qy(e,a,n,i,r,s):s?n(e,r):Qy(e,$y["*"],n,i,r,!0)}const ev={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},tv=function(e=""){const t=Dy(e);return ev[t.toLowerCase()]||""},nv=function(e){if(Array.isArray(e)){let t=[];e.forEach((function(e){e=nv(e),Array.isArray(e)?t=t.concat(e):og(e)&&t.push(e)})),e=t}else e="string"==typeof e&&e.trim()?[iv({src:e})]:og(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[iv(e)]:[];return e};function iv(e){if(!e.type){const t=tv(e.src);t&&(e.type=t)}return e}ny.registerComponent("MediaLoader",class extends ny{constructor(e,t,n){if(super(e,dg({createEl:!1},t),n),t.playerOptions.sources&&0!==t.playerOptions.sources.length)e.src(t.playerOptions.sources);else for(let n=0,i=t.playerOptions.techOrder;n<i.length;n++){const t=Qm(i[n]);let r=zy.getTech(t);if(t||(r=ny.getComponent(t)),r&&r.isSupported()){e.loadTech_(t);break}}}});class rv extends ny{constructor(e,t){super(e,t),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=e=>this.handleMouseOver(e),this.handleMouseOut_=e=>this.handleMouseOut(e),this.handleClick_=e=>this.handleClick(e),this.handleKeyDown_=e=>this.handleKeyDown(e),this.emitTapEvents(),this.enable()}createEl(e="div",t={},n={}){t=Object.assign({className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&eg.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),n=Object.assign({role:"button"},n),this.tabIndex_=t.tabIndex;const i=Ug(e,t,n);return this.player_.options_.experimentalSvgIcons||i.appendChild(Ug("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=Ug("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,t=this.el()){if(void 0===e)return this.controlText_||"Need Text";const n=this.localize(e);this.controlText_=e,jg(this.controlTextEl_,n),this.nonIconControl||this.player_.options_.noUITitleAttributes||t.setAttribute("title",n)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){Bp().isEventKey(e,"Space")||Bp().isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}ny.registerComponent("ClickableComponent",rv);class sv extends rv{constructor(e,t){super(e,t),this.update(),this.update_=e=>this.update(e),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return Ug("div",{className:"vjs-poster"})}crossOrigin(e){if(void 0===e)return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;null===e||"anonymous"===e||"use-credentials"===e?this.$("img")&&(this.$("img").crossOrigin=e):this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`)}update(e){const t=this.player().poster();this.setSrc(t),t?this.show():this.hide()}setSrc(e){e?(this.$("img")||this.el_.appendChild(Ug("picture",{className:"vjs-poster",tabIndex:-1},{},Ug("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e):this.el_.textContent=""}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?gy(this.player_.play()):this.player_.pause())}}sv.prototype.crossorigin=sv.prototype.crossOrigin,ny.registerComponent("PosterImage",sv);const ov="#222",av="#ccc",dv={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function lv(e,t){let n;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function cv(e,t,n){try{e.style[t]=n}catch(e){return}}function uv(e){return e?`${e}px`:""}ny.registerComponent("TextTrackDisplay",class extends ny{constructor(e,t,n){super(e,t,n);const i=e=>{this.updateDisplayOverlay(),this.updateDisplay(e)};e.on("loadstart",(e=>this.toggleDisplay(e))),e.on("texttrackchange",(e=>this.updateDisplay(e))),e.on("loadedmetadata",(e=>{this.updateDisplayOverlay(),this.preselectTrack(e)})),e.ready(Nm(this,(function(){if(e.tech_&&e.tech_.featuresNativeTextTracks)return void this.hide();e.on("fullscreenchange",i),e.on("playerresize",i);const t=Mp().screen.orientation||Mp(),n=Mp().screen.orientation?"change":"orientationchange";t.addEventListener(n,i),e.on("dispose",(()=>t.removeEventListener(n,i)));const r=this.options_.playerOptions.tracks||[];for(let e=0;e<r.length;e++)this.player_.addRemoteTextTrack(r[e],!0);this.preselectTrack()})))}preselectTrack(){const e={captions:1,subtitles:1},t=this.player_.textTracks(),n=this.player_.cache_.selectedLanguage;let i,r,s;for(let o=0;o<t.length;o++){const a=t[o];n&&n.enabled&&n.language&&n.language===a.language&&a.kind in e?a.kind===n.kind?s=a:s||(s=a):n&&!n.enabled?(s=null,i=null,r=null):a.default&&("descriptions"!==a.kind||i?a.kind in e&&!r&&(r=a):i=a)}s?s.mode="showing":r?r.mode="showing":i&&(i.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){"function"==typeof Mp().WebVTT&&Mp().WebVTT.processCues(Mp(),[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){const t=[];for(let n=0;n<e.length;++n){const i=e[n];"showing"===i.mode&&t.push(i)}return void this.updateForTrack(t)}let n=null,i=null,r=e.length;for(;r--;){const t=e[r];"showing"===t.mode&&("descriptions"===t.kind?n=t:i=t)}i?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(i)):n&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(n))}updateDisplayOverlay(){if(!this.player_.videoHeight()||!Mp().CSS.supports("inset-inline: 10px"))return;const e=this.player_.currentWidth(),t=this.player_.currentHeight(),n=e/t,i=this.player_.videoWidth()/this.player_.videoHeight();let r=0,s=0;Math.abs(n-i)>.1&&(n>i?r=Math.round((e-t*i)/2):s=Math.round((t-e/i)/2)),cv(this.el_,"insetInline",uv(r)),cv(this.el_,"insetBlock",uv(s))}updateDisplayState(e){const t=this.player_.textTrackSettings.getValues(),n=e.activeCues;let i=n.length;for(;i--;){const e=n[i];if(!e)continue;const r=e.displayState;if(t.color&&(r.firstChild.style.color=t.color),t.textOpacity&&cv(r.firstChild,"color",lv(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(r.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&cv(r.firstChild,"backgroundColor",lv(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?cv(r,"backgroundColor",lv(t.windowColor,t.windowOpacity)):r.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?r.firstChild.style.textShadow=`2px 2px 3px ${ov}, 2px 2px 4px ${ov}, 2px 2px 5px ${ov}`:"raised"===t.edgeStyle?r.firstChild.style.textShadow=`1px 1px ${ov}, 2px 2px ${ov}, 3px 3px ${ov}`:"depressed"===t.edgeStyle?r.firstChild.style.textShadow=`1px 1px ${av}, 0 1px ${av}, -1px -1px ${ov}, 0 -1px ${ov}`:"uniform"===t.edgeStyle&&(r.firstChild.style.textShadow=`0 0 4px ${ov}, 0 0 4px ${ov}, 0 0 4px ${ov}, 0 0 4px ${ov}`)),t.fontPercent&&1!==t.fontPercent){const e=Mp().parseFloat(r.style.fontSize);r.style.fontSize=e*t.fontPercent+"px",r.style.height="auto",r.style.top="auto"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?r.firstChild.style.fontVariant="small-caps":r.firstChild.style.fontFamily=dv[t.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),"function"!=typeof Mp().WebVTT||e.every((e=>!e.activeCues)))return;const t=[];for(let n=0;n<e.length;++n){const i=e[n];for(let e=0;e<i.activeCues.length;++e)t.push(i.activeCues[e])}Mp().WebVTT.processCues(Mp(),t,this.el_);for(let t=0;t<e.length;++t){const n=e[t];for(let e=0;e<n.activeCues.length;++e){const i=n.activeCues[e].displayState;Fg(i,"vjs-text-track-cue","vjs-text-track-cue-"+(n.language?n.language:t)),n.language&&Zg(i,"lang",n.language)}this.player_.textTrackSettings&&this.updateDisplayState(n)}}}),ny.registerComponent("LoadingSpinner",class extends ny{createEl(){const e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),n=Ug("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),i=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(n),i}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}});class pv extends rv{createEl(e,t={},n={}){const i=Ug("button",t=Object.assign({className:this.buildCSSClass()},t),n=Object.assign({type:"button"},n));return this.player_.options_.experimentalSvgIcons||i.appendChild(Ug("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}addChild(e,t={}){const n=this.constructor.name;return eg.warn(`Adding an actionable (user controllable) child to a Button (${n}) is not supported; use a ClickableComponent instead.`),ny.prototype.addChild.call(this,e,t)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){Bp().isEventKey(e,"Space")||Bp().isEventKey(e,"Enter")?e.stopPropagation():super.handleKeyDown(e)}}ny.registerComponent("Button",pv);class hv extends pv{constructor(e,t){super(e,t),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",(e=>this.handleMouseDown(e)))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY)return gy(t),void(this.player_.tech(!0)&&this.player_.tech(!0).focus());const n=this.player_.getChild("controlBar"),i=n&&n.getChild("playToggle");if(!i)return void this.player_.tech(!0).focus();const r=()=>i.focus();fy(t)?t.then(r,(()=>{})):this.setTimeout(r,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}hv.prototype.controlText_="Play Video",ny.registerComponent("BigPlayButton",hv),ny.registerComponent("CloseButton",class extends pv{constructor(e,t){super(e,t),this.setIcon("cancel"),this.controlText(t&&t.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){Bp().isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}});class fv extends pv{constructor(e,t={}){super(e,t),t.replay=void 0===t.replay||t.replay,this.setIcon("play"),this.on(e,"play",(e=>this.handlePlay(e))),this.on(e,"pause",(e=>this.handlePause(e))),t.replay&&this.on(e,"ended",(e=>this.handleEnded(e)))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?gy(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",(e=>this.handleSeeked(e)))}}fv.prototype.controlText_="Play",ny.registerComponent("PlayToggle",fv);class gv extends ny{constructor(e,t){super(e,t),this.on(e,["timeupdate","ended"],(e=>this.updateContent(e))),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),t=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),n=Ug("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}`},{role:"presentation"});return t.appendChild(n),this.contentEl_=Ug("span",{className:`${e}-display`},{role:"presentation"}),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}updateTextNode_(e=0){e=cy(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",(()=>{if(!this.contentEl_)return;let e=this.textNode_;e&&this.contentEl_.firstChild!==e&&(e=null,eg.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=Up().createTextNode(this.formattedTime_),this.textNode_&&(e?this.contentEl_.replaceChild(this.textNode_,e):this.contentEl_.appendChild(this.textNode_))})))}updateContent(e){}}gv.prototype.labelText_="Time",gv.prototype.controlText_="Time",ny.registerComponent("TimeDisplay",gv);class mv extends gv{buildCSSClass(){return"vjs-current-time"}updateContent(e){let t;t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)}}mv.prototype.labelText_="Current Time",mv.prototype.controlText_="Current Time",ny.registerComponent("CurrentTimeDisplay",mv);class yv extends gv{constructor(e,t){super(e,t);const n=e=>this.updateContent(e);this.on(e,"durationchange",n),this.on(e,"loadstart",n),this.on(e,"loadedmetadata",n)}buildCSSClass(){return"vjs-duration"}updateContent(e){const t=this.player_.duration();this.updateTextNode_(t)}}yv.prototype.labelText_="Duration",yv.prototype.controlText_="Duration",ny.registerComponent("DurationDisplay",yv),ny.registerComponent("TimeDivider",class extends ny{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=super.createEl("div"),n=super.createEl("span",{textContent:"/"});return t.appendChild(n),e.appendChild(t),e}});class vv extends gv{constructor(e,t){super(e,t),this.on(e,"durationchange",(e=>this.updateContent(e)))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return!1!==this.options_.displayNegative&&e.insertBefore(Ug("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if("number"!=typeof this.player_.duration())return;let t;t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t)}}vv.prototype.labelText_="Remaining Time",vv.prototype.controlText_="Remaining Time",ny.registerComponent("RemainingTimeDisplay",vv),ny.registerComponent("LiveDisplay",class extends ny{constructor(e,t){super(e,t),this.updateShowing(),this.on(this.player(),"durationchange",(e=>this.updateShowing(e)))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Ug("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Ug("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}`})),this.contentEl_.appendChild(Up().createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}});class bv extends pv{constructor(e,t){super(e,t),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=e=>this.updateLiveEdgeStatus(e),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=Ug("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}function _v(e,t,n){return e=Number(e),Math.min(n,Math.max(t,isNaN(e)?t:e))}bv.prototype.controlText_="Seek to live, currently playing live",ny.registerComponent("SeekToLive",bv);var wv=Object.freeze({__proto__:null,clamp:_v});class Tv extends ny{constructor(e,t){super(e,t),this.handleMouseDown_=e=>this.handleMouseDown(e),this.handleMouseUp_=e=>this.handleMouseUp(e),this.handleKeyDown_=e=>this.handleKeyDown(e),this.handleClick_=e=>this.handleClick(e),this.handleMouseMove_=e=>this.handleMouseMove(e),this.update_=e=>this.update(e),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,t={},n={}){return t.className=t.className+" vjs-slider",t=Object.assign({tabIndex:0},t),n=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},n),super.createEl(e,t,n)}handleMouseDown(e){const t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||bg||e.preventDefault(),Xg(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const t=this.bar.el_.ownerDocument;Kg(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",(()=>{const t=this.vertical()?"height":"width";this.bar.el().style[t]=(100*e).toFixed(2)+"%"}))),e}getProgress(){return Number(_v(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const t=Qg(this.el_,e);return this.vertical()?t.y:t.x}handleKeyDown(e){Bp().isEventKey(e,"Left")||Bp().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):Bp().isEventKey(e,"Right")||Bp().isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}ny.registerComponent("Slider",Tv);const Iv=(e,t)=>_v(e/t*100,0,100).toFixed(2)+"%";ny.registerComponent("LoadProgressBar",class extends ny{constructor(e,t){super(e,t),this.partEls_=[],this.on(e,"progress",(e=>this.update(e)))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),t=Ug("span",{className:"vjs-control-text"}),n=Ug("span",{textContent:this.localize("Loaded")}),i=Up().createTextNode(": ");return this.percentageEl_=Ug("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(n),t.appendChild(i),t.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",(()=>{const e=this.player_.liveTracker,t=this.player_.buffered(),n=e&&e.isLive()?e.seekableEnd():this.player_.duration(),i=this.player_.bufferedEnd(),r=this.partEls_,s=Iv(i,n);this.percent_!==s&&(this.el_.style.width=s,jg(this.percentageEl_,s),this.percent_=s);for(let e=0;e<t.length;e++){const n=t.start(e),s=t.end(e);let o=r[e];o||(o=this.el_.appendChild(Ug()),r[e]=o),o.dataset.start===n&&o.dataset.end===s||(o.dataset.start=n,o.dataset.end=s,o.style.left=Iv(n,i),o.style.width=Iv(s-n,i))}for(let e=r.length;e>t.length;e--)this.el_.removeChild(r[e-1]);r.length=t.length}))}}),ny.registerComponent("TimeTooltip",class extends ny{constructor(e,t){super(e,t),this.update=Mm(Nm(this,this.update),Rm)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,t,n){const i=Yg(this.el_),r=Jg(this.player_.el()),s=e.width*t;if(!r||!i)return;const o=e.left-r.left+s,a=e.width-s+(r.right-e.right);let d=i.width/2;o<d?d+=d-o:a<d&&(d=a),d<0?d=0:d>i.width&&(d=i.width),d=Math.round(d),this.el_.style.right=`-${d}px`,this.write(n)}write(e){jg(this.el_,e)}updateTime(e,t,n,i){this.requestNamedAnimationFrame("TimeTooltip#updateTime",(()=>{let r;const s=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const e=this.player_.liveTracker.liveWindow(),n=e-t*e;r=(n<1?"":"-")+cy(n,e)}else r=cy(n,s);this.update(e,t,r),i&&i()}))}});class Sv extends ny{constructor(e,t){super(e,t),this.setIcon("circle"),this.update=Mm(Nm(this,this.update),Rm)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,t){const n=this.getChild("timeTooltip");if(!n)return;const i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,t,i)}}Sv.prototype.options_={children:[]},Pg||gg||Sv.prototype.options_.children.push("timeTooltip"),ny.registerComponent("PlayProgressBar",Sv);class kv extends ny{constructor(e,t){super(e,t),this.update=Mm(Nm(this,this.update),Rm)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t){const n=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,n,(()=>{this.el_.style.left=e.width*t+"px"}))}}kv.prototype.options_={children:["timeTooltip"]},ny.registerComponent("MouseTimeDisplay",kv);class Cv extends Tv{constructor(e,t){super(e,t),this.setEventHandlers_()}setEventHandlers_(){this.update_=Nm(this,this.update),this.update=Mm(this.update_,Rm),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Up()&&"visibilityState"in Up()&&this.on(Up(),"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){"hidden"===Up().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Rm))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if("hidden"===Up().visibilityState)return;const t=super.update();return this.requestNamedAnimationFrame("SeekBar#update",(()=>{const e=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),n=this.player_.liveTracker;let i=this.player_.duration();n&&n.isLive()&&(i=this.player_.liveTracker.liveCurrentTime()),this.percent_!==t&&(this.el_.setAttribute("aria-valuenow",(100*t).toFixed(2)),this.percent_=t),this.currentTime_===e&&this.duration_===i||(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[cy(e,i),cy(i,i)],"{1} of {2}")),this.currentTime_=e,this.duration_=i),this.bar&&this.bar.update(Jg(this.el()),this.getProgress())})),t}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){const e=this.getCurrentTime_();let t;const n=this.player_.liveTracker;return n&&n.isLive()?(t=(e-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t}handleMouseDown(e){sm(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,t=!1){if(!sm(e)||isNaN(this.player_.duration()))return;let n;t||this.player_.scrubbing()||this.player_.scrubbing(!0);const i=this.calculateDistance(e),r=this.player_.liveTracker;if(r&&r.isLive()){if(i>=.99)return void r.seekToLiveEdge();const e=r.seekableStart(),t=r.liveCurrentTime();if(n=e+i*r.liveWindow(),n>=t&&(n=t),n<=e&&(n=e+.1),n===1/0)return}else n=i*this.player_.duration(),n===this.player_.duration()&&(n-=.1);this.userSeek_(n)}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?gy(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+5)}stepBack(){this.userSeek_(this.player_.currentTime()-5)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const t=this.player_.liveTracker;if(Bp().isEventKey(e,"Space")||Bp().isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(Bp().isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(Bp().isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),t&&t.isLive()?this.userSeek_(t.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(Bp()(e))){e.preventDefault(),e.stopPropagation();const n=10*(Bp().codes[Bp()(e)]-Bp().codes[0])/100;t&&t.isLive()?this.userSeek_(t.seekableStart()+t.liveWindow()*n):this.userSeek_(this.player_.duration()*n)}else Bp().isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):Bp().isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Up()&&"visibilityState"in Up()&&this.off(Up(),"visibilitychange",this.toggleVisibility_),super.dispose()}}Cv.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},Pg||gg||Cv.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),ny.registerComponent("SeekBar",Cv);class Ev extends ny{constructor(e,t){super(e,t),this.handleMouseMove=Mm(Nm(this,this.handleMouseMove),Rm),this.throttledHandleMouseSeek=Mm(Nm(this,this.handleMouseSeek),Rm),this.handleMouseUpHandler_=e=>this.handleMouseUp(e),this.handleMouseDownHandler_=e=>this.handleMouseDown(e),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const t=this.getChild("seekBar");if(!t)return;const n=t.getChild("playProgressBar"),i=t.getChild("mouseTimeDisplay");if(!n&&!i)return;const r=t.el(),s=Yg(r);let o=Qg(r,e).x;o=_v(o,0,1),i&&i.update(s,o),n&&n.update(s,t.getProgress())}handleMouseSeek(e){const t=this.getChild("seekBar");t&&t.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach((e=>e.disable&&e.disable())),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&gy(this.player_.play())}}enable(){this.children().forEach((e=>e.enable&&e.enable())),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}Ev.prototype.options_={children:["seekBar"]},ny.registerComponent("ProgressControl",Ev);class Av extends pv{constructor(e,t){super(e,t),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],(e=>this.handlePictureInPictureChange(e))),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],(e=>this.handlePictureInPictureEnabledChange(e))),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],(()=>this.handlePictureInPictureAudioModeChange())),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){"audio"===this.player_.currentType().substring(0,5)||this.player_.audioPosterMode()||this.player_.audioOnlyMode()?(this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()):this.show()}handlePictureInPictureEnabledChange(){Up().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in Mp()?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){"function"==typeof Up().exitPictureInPicture&&super.show()}}Av.prototype.controlText_="Picture-in-Picture",ny.registerComponent("PictureInPictureToggle",Av);class Pv extends pv{constructor(e,t){super(e,t),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",(e=>this.handleFullscreenChange(e))),!1===Up()[e.fsApi_.fullscreenEnabled]&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}Pv.prototype.controlText_="Fullscreen",ny.registerComponent("FullscreenToggle",Pv),ny.registerComponent("VolumeLevel",class extends ny{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}),ny.registerComponent("VolumeLevelTooltip",class extends ny{constructor(e,t){super(e,t),this.update=Mm(Nm(this,this.update),Rm)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,t,n,i){if(!n){const n=Jg(this.el_),i=Jg(this.player_.el()),r=e.width*t;if(!i||!n)return;const s=e.left-i.left+r,o=e.width-r+(i.right-e.right);let a=n.width/2;s<a?a+=a-s:o<a&&(a=o),a<0?a=0:a>n.width&&(a=n.width),this.el_.style.right=`-${a}px`}this.write(`${i}%`)}write(e){jg(this.el_,e)}updateVolume(e,t,n,i,r){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",(()=>{this.update(e,t,n,i.toFixed(0)),r&&r()}))}});class xv extends ny{constructor(e,t){super(e,t),this.update=Mm(Nm(this,this.update),Rm)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t,n){const i=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,n,i,(()=>{n?this.el_.style.bottom=e.height*t+"px":this.el_.style.left=e.width*t+"px"}))}}xv.prototype.options_={children:["volumeLevelTooltip"]},ny.registerComponent("MouseVolumeLevelDisplay",xv);class Dv extends Tv{constructor(e,t){super(e,t),this.on("slideractive",(e=>this.updateLastVolume_(e))),this.on(e,"volumechange",(e=>this.updateARIAAttributes(e))),e.ready((()=>this.updateARIAAttributes()))}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){sm(e)&&super.handleMouseDown(e)}handleMouseMove(e){const t=this.getChild("mouseVolumeLevelDisplay");if(t){const n=this.el(),i=Jg(n),r=this.vertical();let s=Qg(n,e);s=r?s.y:s.x,s=_v(s,0,1),t.update(i,s,r)}sm(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")}volumeAsPercentage_(){return Math.round(100*this.player_.volume())}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",(()=>{0===this.player_.volume()&&this.player_.lastVolume_(e)}))}}Dv.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Pg||gg||Dv.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),Dv.prototype.playerEvent="volumechange",ny.registerComponent("VolumeBar",Dv);class Ov extends ny{constructor(e,t={}){t.vertical=t.vertical||!1,(void 0===t.volumeBar||ag(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),super(e,t),function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))}(this,e),this.throttledHandleMouseMove=Mm(Nm(this,this.handleMouseMove),Rm),this.handleMouseUpHandler_=e=>this.handleMouseUp(e),this.on("mousedown",(e=>this.handleMouseDown(e))),this.on("touchstart",(e=>this.handleMouseDown(e))),this.on("mousemove",(e=>this.handleMouseMove(e))),this.on(this.volumeBar,["focus","slideractive"],(()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")})),this.on(this.volumeBar,["blur","sliderinactive"],(()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")}))}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}Ov.prototype.options_={children:["volumeBar"]},ny.registerComponent("VolumeControl",Ov);class Rv extends pv{constructor(e,t){super(e,t),function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))}(this,e),this.on(e,["loadstart","volumechange"],(e=>this.update(e)))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.volume(),n=this.player_.lastVolume_();if(0===t){const e=n<.1?.1:n;this.player_.volume(e),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let t=3;this.setIcon("volume-high"),Pg&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?(this.setIcon("volume-mute"),t=0):e<.33?(this.setIcon("volume-low"),t=1):e<.67&&(this.setIcon("volume-medium"),t=2),Vg(this.el_,[0,1,2,3].reduce(((e,t)=>e+`${t?" ":""}vjs-vol-${t}`),"")),Fg(this.el_,`vjs-vol-${t}`)}updateControlText_(){const e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)}}Rv.prototype.controlText_="Mute",ny.registerComponent("MuteToggle",Rv);class Nv extends ny{constructor(e,t={}){void 0!==t.inline?t.inline=t.inline:t.inline=!0,(void 0===t.volumeControl||ag(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),super(e,t),this.handleKeyPressHandler_=e=>this.handleKeyPress(e),this.on(e,["loadstart"],(e=>this.volumePanelState_(e))),this.on(this.muteToggle,"keyup",(e=>this.handleKeyPress(e))),this.on(this.volumeControl,"keyup",(e=>this.handleVolumeControlKeyUp(e))),this.on("keydown",(e=>this.handleKeyPress(e))),this.on("mouseover",(e=>this.handleMouseOver(e))),this.on("mouseout",(e=>this.handleMouseOut(e))),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){Bp().isEventKey(e,"Esc")&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),Em(Up(),"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),Am(Up(),"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){Bp().isEventKey(e,"Esc")&&this.handleMouseOut()}}Nv.prototype.options_={children:["muteToggle","volumeControl"]},ny.registerComponent("VolumePanel",Nv),ny.registerComponent("SkipForward",class extends pv{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){if(isNaN(this.player_.duration()))return;const t=this.player_.currentTime(),n=this.player_.liveTracker,i=n&&n.isLive()?n.seekableEnd():this.player_.duration();let r;r=t+this.skipTime<=i?t+this.skipTime:i,this.player_.currentTime(r)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}});class Mv extends pv{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.currentTime(),n=this.player_.liveTracker,i=n&&n.isLive()&&n.seekableStart();let r;r=i&&t-this.skipTime<=i?i:t>=this.skipTime?t-this.skipTime:0,this.player_.currentTime(r)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}Mv.prototype.controlText_="Skip Backward",ny.registerComponent("SkipBackward",Mv);class Lv extends ny{constructor(e,t){super(e,t),t&&(this.menuButton_=t.menuButton),this.focusedChild_=-1,this.on("keydown",(e=>this.handleKeyDown(e))),this.boundHandleBlur_=e=>this.handleBlur(e),this.boundHandleTapClick_=e=>this.handleTapClick(e)}addEventListenerForItem(e){e instanceof ny&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof ny&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){"string"==typeof e&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const t=this.addChild(e);t&&this.addEventListenerForItem(t)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=Ug(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const t=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),Em(t,"click",(function(e){e.preventDefault(),e.stopImmediatePropagation()})),t}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const t=e.relatedTarget||Up().activeElement;if(!this.children().some((e=>e.el()===t))){const e=this.menuButton_;e&&e.buttonPressed_&&t!==e.el().firstChild&&e.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const t=this.children();if(!Array.isArray(t))return;const n=t.filter((t=>t.el()===e.target))[0];if(!n)return;"CaptionSettingsMenuItem"!==n.name()&&this.menuButton_.focus()}}handleKeyDown(e){Bp().isEventKey(e,"Left")||Bp().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(Bp().isEventKey(e,"Right")||Bp().isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())}}ny.registerComponent("Menu",Lv);class Uv extends ny{constructor(e,t={}){super(e,t),this.menuButton_=new pv(e,t),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const n=pv.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+n,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const i=e=>this.handleClick(e);this.handleMenuKeyUp_=e=>this.handleMenuKeyUp(e),this.on(this.menuButton_,"tap",i),this.on(this.menuButton_,"click",i),this.on(this.menuButton_,"keydown",(e=>this.handleKeyDown(e))),this.on(this.menuButton_,"mouseenter",(()=>{this.addClass("vjs-hover"),this.menu.show(),Em(Up(),"keyup",this.handleMenuKeyUp_)})),this.on("mouseleave",(e=>this.handleMouseLeave(e))),this.on("keydown",(e=>this.handleSubmenuKeyDown(e)))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new Lv(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const t=Ug("li",{className:"vjs-menu-title",textContent:Qm(this.options_.title),tabIndex:-1}),n=new ny(this.player_,{el:t});e.addItem(n)}if(this.items=this.createItems(),this.items)for(let t=0;t<this.items.length;t++)e.addItem(this.items[t]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${pv.prototype.buildCSSClass()} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,t=this.menuButton_.el()){return this.menuButton_.controlText(e,t)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),Am(Up(),"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){Bp().isEventKey(e,"Esc")||Bp().isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),Bp().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(Bp().isEventKey(e,"Up")||Bp().isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(Bp().isEventKey(e,"Esc")||Bp().isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(Bp().isEventKey(e,"Esc")||Bp().isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Bp().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Pg&&Mg())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}ny.registerComponent("MenuButton",Uv);class jv extends Uv{constructor(e,t){const n=t.tracks;if(super(e,t),this.items.length<=1&&this.hide(),!n)return;const i=Nm(this,this.update);n.addEventListener("removetrack",i),n.addEventListener("addtrack",i),n.addEventListener("labelchange",i),this.player_.on("ready",i),this.player_.on("dispose",(function(){n.removeEventListener("removetrack",i),n.removeEventListener("addtrack",i),n.removeEventListener("labelchange",i)}))}}ny.registerComponent("TrackButton",jv);const Bv=["Tab","Esc","Up","Down","Right","Left"];class qv extends rv{constructor(e,t){super(e,t),this.selectable=t.selectable,this.isSelected_=t.selected||!1,this.multiSelectable=t.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,t,n){this.nonIconControl=!0;const i=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},t),n),r=Ug("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?i.appendChild(r):i.replaceChild(r,i.querySelector(".vjs-icon-placeholder")),i}handleKeyDown(e){Bv.some((t=>Bp().isEventKey(e,t)))||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}ny.registerComponent("MenuItem",qv);class Fv extends qv{constructor(e,t){const n=t.track,i=e.textTracks();t.label=n.label||n.language||"Unknown",t.selected="showing"===n.mode,super(e,t),this.track=n,this.kinds=(t.kinds||[t.kind||this.track.kind]).filter(Boolean);const r=(...e)=>{this.handleTracksChange.apply(this,e)},s=(...e)=>{this.handleSelectedLanguageChange.apply(this,e)};if(e.on(["loadstart","texttrackchange"],r),i.addEventListener("change",r),i.addEventListener("selectedlanguagechange",s),this.on("dispose",(function(){e.off(["loadstart","texttrackchange"],r),i.removeEventListener("change",r),i.removeEventListener("selectedlanguagechange",s)})),void 0===i.onchange){let e;this.on(["tap","click"],(function(){if("object"!=typeof Mp().Event)try{e=new(Mp().Event)("change")}catch(e){}e||(e=Up().createEvent("Event"),e.initEvent("change",!0,!0)),i.dispatchEvent(e)}))}this.handleTracksChange()}handleClick(e){const t=this.track,n=this.player_.textTracks();if(super.handleClick(e),n)for(let e=0;e<n.length;e++){const i=n[e];-1!==this.kinds.indexOf(i.kind)&&(i===t?"showing"!==i.mode&&(i.mode="showing"):"disabled"!==i.mode&&(i.mode="disabled"))}}handleTracksChange(e){const t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)}handleSelectedLanguageChange(e){if("showing"===this.track.mode){const e=this.player_.cache_.selectedLanguage;if(e&&e.enabled&&e.language===this.track.language&&e.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}ny.registerComponent("TextTrackMenuItem",Fv);class Vv extends Fv{constructor(e,t){t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,super(e,t)}handleTracksChange(e){const t=this.player().textTracks();let n=!0;for(let e=0,i=t.length;e<i;e++){const i=t[e];if(this.options_.kinds.indexOf(i.kind)>-1&&"showing"===i.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)}handleSelectedLanguageChange(e){const t=this.player().textTracks();let n=!0;for(let e=0,i=t.length;e<i;e++){const i=t[e];if(["captions","descriptions","subtitles"].indexOf(i.kind)>-1&&"showing"===i.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}ny.registerComponent("OffTextTrackMenuItem",Vv);class zv extends jv{constructor(e,t={}){t.tracks=e.textTracks(),super(e,t)}createItems(e=[],t=Fv){let n;this.label_&&(n=`${this.label_} off`),e.push(new Vv(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;const i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let n=0;n<i.length;n++){const r=i[n];if(this.kinds_.indexOf(r.kind)>-1){const n=new t(this.player_,{track:r,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});n.addClass(`vjs-${r.kind}-menu-item`),e.push(n)}}return e}}ny.registerComponent("TextTrackButton",zv);class $v extends qv{constructor(e,t){const n=t.track,i=t.cue,r=e.currentTime();t.selectable=!0,t.multiSelectable=!1,t.label=i.text,t.selected=i.startTime<=r&&r<i.endTime,super(e,t),this.track=n,this.cue=i}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}ny.registerComponent("ChaptersTrackMenuItem",$v);class Hv extends zv{constructor(e,t,n){super(e,t,n),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach((e=>{e.selected(this.track_.activeCues[0]===e.cue)}))}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&"chapters"!==e.track.kind)return;const t=this.findChaptersTrack();t!==this.track_?(this.setTrack(t),super.update()):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let t=e.length-1;t>=0;t--){const n=e[t];if(n.kind===this.kind_)return n}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(Qm(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const t=this.track_.cues;if(!t)return e;for(let n=0,i=t.length;n<i;n++){const i=t[n],r=new $v(this.player_,{track:this.track_,cue:i});e.push(r)}return e}}Hv.prototype.kind_="chapters",Hv.prototype.controlText_="Chapters",ny.registerComponent("ChaptersButton",Hv);class Wv extends zv{constructor(e,t,n){super(e,t,n),this.setIcon("audio-description");const i=e.textTracks(),r=Nm(this,this.handleTracksChange);i.addEventListener("change",r),this.on("dispose",(function(){i.removeEventListener("change",r)}))}handleTracksChange(e){const t=this.player().textTracks();let n=!1;for(let e=0,i=t.length;e<i;e++){const i=t[e];if(i.kind!==this.kind_&&"showing"===i.mode){n=!0;break}}n?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}Wv.prototype.kind_="descriptions",Wv.prototype.controlText_="Descriptions",ny.registerComponent("DescriptionsButton",Wv);class Zv extends zv{constructor(e,t,n){super(e,t,n),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}Zv.prototype.kind_="subtitles",Zv.prototype.controlText_="Subtitles",ny.registerComponent("SubtitlesButton",Zv);class Gv extends Fv{constructor(e,t){t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",super(e,t),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+t.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}ny.registerComponent("CaptionSettingsMenuItem",Gv);class Xv extends zv{constructor(e,t,n){super(e,t,n),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new Gv(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}Xv.prototype.kind_="captions",Xv.prototype.controlText_="Captions",ny.registerComponent("CaptionsButton",Xv);class Kv extends Fv{createEl(e,t,n){const i=super.createEl(e,t,n),r=i.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",i):r.appendChild(Ug("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(Ug("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),i}}ny.registerComponent("SubsCapsMenuItem",Kv);class Jv extends zv{constructor(e,t={}){super(e,t),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(Qm(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new Gv(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,Kv),e}}Jv.prototype.kinds_=["captions","subtitles"],Jv.prototype.controlText_="Subtitles",ny.registerComponent("SubsCapsButton",Jv);class Yv extends qv{constructor(e,t){const n=t.track,i=e.audioTracks();t.label=n.label||n.language||"Unknown",t.selected=n.enabled,super(e,t),this.track=n,this.addClass(`vjs-${n.kind}-menu-item`);const r=(...e)=>{this.handleTracksChange.apply(this,e)};i.addEventListener("change",r),this.on("dispose",(()=>{i.removeEventListener("change",r)}))}createEl(e,t,n){const i=super.createEl(e,t,n),r=i.querySelector(".vjs-menu-item-text");return["main-desc","description"].indexOf(this.options_.track.kind)>=0&&(r.appendChild(Ug("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(Ug("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),i}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const e=this.player_.audioTracks();for(let t=0;t<e.length;t++){const n=e[t];n!==this.track&&(n.enabled=n===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}ny.registerComponent("AudioTrackMenuItem",Yv);class Qv extends jv{constructor(e,t={}){t.tracks=e.audioTracks(),super(e,t),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const t=this.player_.audioTracks();for(let n=0;n<t.length;n++){const i=t[n];e.push(new Yv(this.player_,{track:i,selectable:!0,multiSelectable:!1}))}return e}}Qv.prototype.controlText_="Audio Track",ny.registerComponent("AudioTrackButton",Qv);class eb extends qv{constructor(e,t){const n=t.rate,i=parseFloat(n,10);t.label=n,t.selected=i===e.playbackRate(),t.selectable=!0,t.multiSelectable=!1,super(e,t),this.label=n,this.rate=i,this.on(e,"ratechange",(e=>this.update(e)))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}eb.prototype.contentElType="button",ny.registerComponent("PlaybackRateMenuItem",eb);class tb extends Uv{constructor(e,t){super(e,t),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",(e=>this.updateVisibility(e))),this.on(e,"ratechange",(e=>this.updateLabel(e))),this.on(e,"playbackrateschange",(e=>this.handlePlaybackRateschange(e)))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Ug("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),t=[];for(let n=e.length-1;n>=0;n--)t.push(new eb(this.player(),{rate:e[n]+"x"}));return t}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}tb.prototype.controlText_="Playback Rate",ny.registerComponent("PlaybackRateMenuButton",tb);class nb extends ny{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",t={},n={}){return t.className||(t.className=this.buildCSSClass()),super.createEl(e,t,n)}}ny.registerComponent("Spacer",nb),ny.registerComponent("CustomControlSpacer",class extends nb{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:""})}});class ib extends ny{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}ib.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]},ny.registerComponent("ControlBar",ib);class rb extends vy{constructor(e,t){super(e,t),this.on(e,"error",(e=>this.open(e)))}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}rb.prototype.options_=Object.assign({},vy.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),ny.registerComponent("ErrorDisplay",rb);const sb="vjs-text-track-settings",ob=["#000","Black"],ab=["#00F","Blue"],db=["#0FF","Cyan"],lb=["#0F0","Green"],cb=["#F0F","Magenta"],ub=["#F00","Red"],pb=["#FFF","White"],hb=["#FF0","Yellow"],fb=["1","Opaque"],gb=["0.5","Semi-Transparent"],mb=["0","Transparent"],yb={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[ob,pb,ub,lb,ab,hb,cb,db]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[fb,gb,mb]},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[pb,ob,ub,lb,ab,hb,cb,db]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:e=>"1.00"===e?null:Number(e)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[fb,gb]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[mb,gb,fb]}};function vb(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}yb.windowColor.options=yb.backgroundColor.options,ny.registerComponent("TextTrackSettings",class extends vy{constructor(e,t){t.temporary=!1,super(e,t),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.endDialog=Ug("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),void 0===t.persistTextTrackSettings&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.on(this.$(".vjs-done-button"),"click",(()=>{this.saveSettings(),this.close()})),this.on(this.$(".vjs-default-button"),"click",(()=>{this.setDefaults(),this.updateDisplay()})),rg(yb,(e=>{this.on(this.$(e.selector),"change",this.updateDisplay)})),this.options_.persistTextTrackSettings&&this.restoreSettings()}dispose(){this.endDialog=null,super.dispose()}createElSelect_(e,t="",n="label"){const i=yb[e],r=i.id.replace("%s",this.id_),s=[t,r].join(" ").trim();return[`<${n} id="${r}" class="${"label"===n?"vjs-label":""}">`,this.localize(i.label),`</${n}>`,`<select aria-labelledby="${s}">`].concat(i.options.map((e=>{const t=r+"-"+e[1].replace(/\W+/g,"");return[`<option id="${t}" value="${e[0]}" `,`aria-labelledby="${s} ${t}">`,this.localize(e[1]),"</option>"].join("")}))).concat("</select>").join("")}createElFgColor_(){const e=`captions-text-legend-${this.id_}`;return['<fieldset class="vjs-fg vjs-track-setting">',`<legend id="${e}">`,this.localize("Text"),"</legend>",'<span class="vjs-text-color">',this.createElSelect_("color",e),"</span>",'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")}createElBgColor_(){const e=`captions-background-${this.id_}`;return['<fieldset class="vjs-bg vjs-track-setting">',`<legend id="${e}">`,this.localize("Text Background"),"</legend>",'<span class="vjs-bg-color">',this.createElSelect_("backgroundColor",e),"</span>",'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")}createElWinColor_(){const e=`captions-window-${this.id_}`;return['<fieldset class="vjs-window vjs-track-setting">',`<legend id="${e}">`,this.localize("Caption Area Background"),"</legend>",'<span class="vjs-window-color">',this.createElSelect_("windowColor",e),"</span>",'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")}createElColors_(){return Ug("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})}createElFont_(){return Ug("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})}createElControls_(){const e=this.localize("restore all settings to the default values");return Ug("div",{className:"vjs-track-settings-controls",innerHTML:[`<button type="button" class="vjs-default-button" title="${e}">`,this.localize("Reset"),`<span class="vjs-control-text"> ${e}</span>`,"</button>",`<button type="button" class="vjs-done-button">${this.localize("Done")}</button>`].join("")})}content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return sg(yb,((e,t,n)=>{const i=(r=this.$(t.selector),s=t.parser,vb(r.options[r.options.selectedIndex].value,s));var r,s;return void 0!==i&&(e[n]=i),e}),{})}setValues(e){rg(yb,((t,n)=>{!function(e,t,n){if(t)for(let i=0;i<e.options.length;i++)if(vb(e.options[i].value,n)===t){e.selectedIndex=i;break}}(this.$(t.selector),e[n],t.parser)}))}setDefaults(){rg(yb,(e=>{const t=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=t}))}restoreSettings(){let e;try{e=JSON.parse(Mp().localStorage.getItem(sb))}catch(e){eg.warn(e)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?Mp().localStorage.setItem(sb,JSON.stringify(e)):Mp().localStorage.removeItem(sb)}catch(e){eg.warn(e)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}conditionalBlur_(){this.previouslyActiveEl_=null;const e=this.player_.controlBar,t=e&&e.subsCapsButton,n=e&&e.captionsButton;t?t.focus():n&&n.focus()}handleLanguagechange(){this.fill()}}),ny.registerComponent("ResizeManager",class extends ny{constructor(e,t){let n=t.ResizeObserver||Mp().ResizeObserver;null===t.ResizeObserver&&(n=!1),super(e,dg({createEl:!n,reportTouchActivity:!1},t)),this.ResizeObserver=t.ResizeObserver||Mp().ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=Lm((()=>{this.resizeHandler()}),100,!1,this),n?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const e=this.debouncedHandler_;let t=this.unloadListener_=function(){Am(this,"resize",e),Am(this,"unload",t),t=null};Em(this.el_.contentWindow,"unload",t),Em(this.el_.contentWindow,"resize",e)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}});const bb={trackingThreshold:20,liveTolerance:15};ny.registerComponent("LiveTracker",class extends ny{constructor(e,t){super(e,dg(bb,t,{createEl:!1})),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=e=>this.handlePlay(e),this.handleFirstTimeupdate_=e=>this.handleFirstTimeupdate(e),this.handleSeeked_=e=>this.handleSeeked(e),this.seekToLiveEdge_=e=>this.seekToLiveEdge(e),this.reset_(),this.on(this.player_,"durationchange",(e=>this.handleDurationchange(e))),this.on(this.player_,"canplay",(()=>this.toggleTracking()))}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const t=Number(Mp().performance.now().toFixed(4)),n=-1===this.lastTime_?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+n;const i=this.liveCurrentTime(),r=this.player_.currentTime();let s=this.player_.paused()||this.seekedBehindLive_||Math.abs(i-r)>this.options_.liveTolerance;this.timeupdateSeen_&&i!==1/0||(s=!1),s!==this.behindLiveEdge_&&(this.behindLiveEdge_=s,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Rm),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),t=[];let n=e?e.length:0;for(;n--;)t.push(e.end(n));return t.length?t.sort()[t.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),t=[];let n=e?e.length:0;for(;n--;)t.push(e.start(n));return t.length?t.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return"number"==typeof this.trackingInterval_}seekToLiveEdge(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}),ny.registerComponent("TitleBar",class extends ny{constructor(e,t){super(e,t),this.on("statechanged",(e=>this.updateDom_())),this.updateDom_()}createEl(){return this.els={title:Ug("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${wm()}`}),description:Ug("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${wm()}`})},Ug("div",{className:"vjs-title-bar"},{},lg(this.els))}updateDom_(){const e=this.player_.tech_,t=e&&e.el_,n={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach((e=>{const i=this.state[e],r=this.els[e],s=n[e];tm(r),i&&jg(r,i),t&&(t.removeAttribute(s),i&&t.setAttribute(s,r.id))})),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,t=e&&e.el_;t&&(t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-describedby")),super.dispose(),this.els=null}});const _b=e=>{const t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;const n=e.$$("source"),i=[];let r="";if(!n.length)return!1;for(let e=0;e<n.length;e++){const t=n[e].src;t&&-1===i.indexOf(t)&&i.push(t)}return!!i.length&&(1===i.length&&(r=i[0]),e.triggerSourceset(r),!0)},wb=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(e){const t=Up().createElement(this.nodeName.toLowerCase());t.innerHTML=e;const n=Up().createDocumentFragment();for(;t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",Mp().Element.prototype.appendChild.call(this,n),this.innerHTML}}),Tb=(e,t)=>{let n={};for(let i=0;i<e.length&&(n=Object.getOwnPropertyDescriptor(e[i],t),!(n&&n.set&&n.get));i++);return n.enumerable=!0,n.configurable=!0,n},Ib=function(e){const t=e.el();if(t.resetSourceWatch_)return;const n={},i=(e=>Tb([e.el(),Mp().HTMLMediaElement.prototype,Mp().Element.prototype,wb],"innerHTML"))(e),r=n=>(...i)=>{const r=n.apply(t,i);return _b(e),r};["append","appendChild","insertAdjacentHTML"].forEach((e=>{t[e]&&(n[e]=t[e],t[e]=r(n[e]))})),Object.defineProperty(t,"innerHTML",dg(i,{set:r(i.set)})),t.resetSourceWatch_=()=>{t.resetSourceWatch_=null,Object.keys(n).forEach((e=>{t[e]=n[e]})),Object.defineProperty(t,"innerHTML",i)},e.one("sourceset",t.resetSourceWatch_)},Sb=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?xy(Mp().Element.prototype.getAttribute.call(this,"src")):""},set(e){return Mp().Element.prototype.setAttribute.call(this,"src",e),e}});class kb extends zy{constructor(e,t){super(e,t);const n=e.source;let i=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&"VIDEO"===this.el_.tagName,n&&(this.el_.currentSrc!==n.src||e.tag&&3===e.tag.initNetworkState_)?this.setSource(n):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const e=this.el_.childNodes;let t=e.length;const n=[];for(;t--;){const r=e[t];"track"===r.nodeName.toLowerCase()&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack(r.track),this.textTracks().addTrack(r.track),i||this.el_.hasAttribute("crossorigin")||!Oy(r.src)||(i=!0)):n.push(r))}for(let e=0;e<n.length;e++)this.el_.removeChild(n[e])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&i&&eg.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),this.restoreMetadataTracksInIOSNativePlayer_(),(Eg||Cg)&&!0===e.nativeControlsForTouch&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),kb.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){!function(e){if(!e.featuresSourceset)return;const t=e.el();if(t.resetSourceset_)return;const n=(e=>Tb([e.el(),Mp().HTMLMediaElement.prototype,Sb],"src"))(e),i=t.setAttribute,r=t.load;Object.defineProperty(t,"src",dg(n,{set:i=>{const r=n.set.call(t,i);return e.triggerSourceset(t.src),r}})),t.setAttribute=(n,r)=>{const s=i.call(t,n,r);return/src/i.test(n)&&e.triggerSourceset(t.src),s},t.load=()=>{const n=r.call(t);return _b(e)||(e.triggerSourceset(""),Ib(e)),n},t.currentSrc?e.triggerSourceset(t.currentSrc):_b(e)||Ib(e),t.resetSourceset_=()=>{t.resetSourceset_=null,t.load=r,t.setAttribute=i,Object.defineProperty(t,"src",n),t.resetSourceWatch_&&t.resetSourceWatch_()}}(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let t;const n=()=>{t=[];for(let n=0;n<e.length;n++){const i=e[n];"metadata"===i.kind&&t.push({track:i,storedMode:i.mode})}};n(),e.addEventListener("change",n),this.on("dispose",(()=>e.removeEventListener("change",n)));const i=()=>{for(let e=0;e<t.length;e++){const n=t[e];"disabled"===n.track.mode&&n.track.mode!==n.storedMode&&(n.track.mode=n.storedMode)}e.removeEventListener("change",i)};this.on("webkitbeginfullscreen",(()=>{e.removeEventListener("change",n),e.removeEventListener("change",i),e.addEventListener("change",i)})),this.on("webkitendfullscreen",(()=>{e.removeEventListener("change",n),e.addEventListener("change",n),e.removeEventListener("change",i)}))}overrideNative_(e,t){if(t!==this[`featuresNative${e}Tracks`])return;const n=e.toLowerCase();this[`${n}TracksListeners_`]&&Object.keys(this[`${n}TracksListeners_`]).forEach((e=>{this.el()[`${n}Tracks`].removeEventListener(e,this[`${n}TracksListeners_`][e])})),this[`featuresNative${e}Tracks`]=!t,this[`${n}TracksListeners_`]=null,this.proxyNativeTracksForType_(n)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const t=qy[e],n=this.el()[t.getterName],i=this[t.getterName]();if(!this[`featuresNative${t.capitalName}Tracks`]||!n||!n.addEventListener)return;const r={change:t=>{const n={type:"change",target:i,currentTarget:i,srcElement:i};i.trigger(n),"text"===e&&this[Fy.remoteText.getterName]().trigger(n)},addtrack(e){i.addTrack(e.track)},removetrack(e){i.removeTrack(e.track)}},s=function(){const e=[];for(let t=0;t<i.length;t++){let r=!1;for(let e=0;e<n.length;e++)if(n[e]===i[t]){r=!0;break}r||e.push(i[t])}for(;e.length;)i.removeTrack(e.shift())};this[t.getterName+"Listeners_"]=r,Object.keys(r).forEach((e=>{const t=r[e];n.addEventListener(e,t),this.on("dispose",(i=>n.removeEventListener(e,t)))})),this.on("loadstart",s),this.on("dispose",(e=>this.off("loadstart",s)))}proxyNativeTracks_(){qy.names.forEach((e=>{this.proxyNativeTracksForType_(e)}))}createEl(){let e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){const t=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(t,e),kb.disposeMediaElement(e),e=t}else{e=Up().createElement("video");const t=dg({},this.options_.tag&&Hg(this.options_.tag));Eg&&!0===this.options_.nativeControlsForTouch||delete t.controls,$g(e,Object.assign(t,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&Zg(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const t=["loop","muted","playsinline","autoplay"];for(let n=0;n<t.length;n++){const i=t[n],r=this.options_[i];void 0!==r&&(r?Zg(e,i,i):Gg(e,i),e[i]=r)}return e}handleLateInit_(e){if(0===e.networkState||3===e.networkState)return;if(0===e.readyState){let e=!1;const t=function(){e=!0};this.on("loadstart",t);const n=function(){e||this.trigger("loadstart")};return this.on("loadedmetadata",n),void this.ready((function(){this.off("loadstart",t),this.off("loadedmetadata",n),e||this.trigger("loadstart")}))}const t=["loadstart"];t.push("loadedmetadata"),e.readyState>=2&&t.push("loadeddata"),e.readyState>=3&&t.push("canplay"),e.readyState>=4&&t.push("canplaythrough"),this.ready((function(){t.forEach((function(e){this.trigger(e)}),this)}))}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&xg?this.el_.fastSeek(e):this.el_.currentTime=e}catch(e){eg(e,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&gg&&bg&&0===this.el_.currentTime){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},t=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",t),this.on("dispose",(()=>{this.off("webkitbeginfullscreen",t),this.off("webkitendfullscreen",e)}))}supportsFullScreen(){return"function"==typeof this.el_.webkitEnterFullScreen}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)gy(this.el_.play()),this.setTimeout((function(){e.pause();try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}}),0);else try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}}exitFullScreen(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(void 0===e)return this.el_.src;this.setSrc(e)}reset(){kb.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,t,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,n):super.addTextTrack(e,t,n)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const t=Up().createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t}addRemoteTextTrack(e,t){const n=super.addRemoteTextTrack(e,t);return this.featuresNativeTextTracks&&this.el().appendChild(n),n}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const t=this.$$("track");let n=t.length;for(;n--;)e!==t[n]&&e!==t[n].track||this.el().removeChild(t[n])}}getVideoPlaybackQuality(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();const e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),Mp().performance&&(e.creationTime=Mp().performance.now()),e}}cg(kb,"TEST_VID",(function(){if(!Rg())return;const e=Up().createElement("video"),t=Up().createElement("track");return t.kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e})),kb.isSupported=function(){try{kb.TEST_VID.volume=.5}catch(e){return!1}return!(!kb.TEST_VID||!kb.TEST_VID.canPlayType)},kb.canPlayType=function(e){return kb.TEST_VID.canPlayType(e)},kb.canPlaySource=function(e,t){return kb.canPlayType(e.type)},kb.canControlVolume=function(){try{const e=kb.TEST_VID.volume;kb.TEST_VID.volume=e/2+.1;const t=e!==kb.TEST_VID.volume;return t&&Pg?(Mp().setTimeout((()=>{kb&&kb.prototype&&(kb.prototype.featuresVolumeControl=e!==kb.TEST_VID.volume)})),!1):t}catch(e){return!1}},kb.canMuteVolume=function(){try{const e=kb.TEST_VID.muted;return kb.TEST_VID.muted=!e,kb.TEST_VID.muted?Zg(kb.TEST_VID,"muted","muted"):Gg(kb.TEST_VID,"muted"),e!==kb.TEST_VID.muted}catch(e){return!1}},kb.canControlPlaybackRate=function(){if(gg&&bg&&wg<58)return!1;try{const e=kb.TEST_VID.playbackRate;return kb.TEST_VID.playbackRate=e/2+.1,e!==kb.TEST_VID.playbackRate}catch(e){return!1}},kb.canOverrideAttributes=function(){try{const e=()=>{};Object.defineProperty(Up().createElement("video"),"src",{get:e,set:e}),Object.defineProperty(Up().createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(Up().createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(Up().createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},kb.supportsNativeTextTracks=function(){return xg||Pg&&bg},kb.supportsNativeVideoTracks=function(){return!(!kb.TEST_VID||!kb.TEST_VID.videoTracks)},kb.supportsNativeAudioTracks=function(){return!(!kb.TEST_VID||!kb.TEST_VID.audioTracks)},kb.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach((function([e,t]){cg(kb.prototype,e,(()=>kb[t]()),!0)})),kb.prototype.featuresVolumeControl=kb.canControlVolume(),kb.prototype.movingMediaElementInDOM=!Pg,kb.prototype.featuresFullscreenResize=!0,kb.prototype.featuresProgressEvents=!0,kb.prototype.featuresTimeupdateEvents=!0,kb.prototype.featuresVideoFrameCallback=!(!kb.TEST_VID||!kb.TEST_VID.requestVideoFrameCallback),kb.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},kb.resetMediaElement=function(e){if(!e)return;const t=e.querySelectorAll("source");let n=t.length;for(;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(e){kb.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(e){kb.prototype["set"+Qm(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach((function(e){kb.prototype[e]=function(){return this.el_[e]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach((function(e){kb.prototype["set"+Qm(e)]=function(t){this.el_[e]=t}})),["pause","load","play"].forEach((function(e){kb.prototype[e]=function(){return this.el_[e]()}})),zy.withSourceHandlers(kb),kb.nativeSourceHandler={},kb.nativeSourceHandler.canPlayType=function(e){try{return kb.TEST_VID.canPlayType(e)}catch(e){return""}},kb.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return kb.nativeSourceHandler.canPlayType(e.type);if(e.src){const t=Dy(e.src);return kb.nativeSourceHandler.canPlayType(`video/${t}`)}return""},kb.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},kb.nativeSourceHandler.dispose=function(){},kb.registerSourceHandler(kb.nativeSourceHandler),zy.registerTech("Html5",kb);const Cb=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Eb={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Ab=["tiny","xsmall","small","medium","large","xlarge","huge"],Pb={};Ab.forEach((e=>{const t="x"===e.charAt(0)?`x-${e.substring(1)}`:e;Pb[e]=`vjs-layout-${t}`}));const xb={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class Db extends ny{constructor(e,t,n){if(e.id=e.id||t.id||`vjs_video_${wm()}`,(t=Object.assign(Db.getTagSettings(e),t)).initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language){const n=e.closest("[lang]");n&&(t.language=n.getAttribute("lang"))}if(super(null,t,n),this.boundDocumentFullscreenChange_=e=>this.documentFullscreenChange_(e),this.boundFullWindowOnEscKey_=e=>this.fullWindowOnEscKey(e),this.boundUpdateStyleEl_=e=>this.updateStyleEl_(e),this.boundApplyInitTime_=e=>this.applyInitTime_(e),this.boundUpdateCurrentBreakpoint_=e=>this.updateCurrentBreakpoint_(e),this.boundHandleTechClick_=e=>this.handleTechClick_(e),this.boundHandleTechDoubleClick_=e=>this.handleTechDoubleClick_(e),this.boundHandleTechTouchStart_=e=>this.handleTechTouchStart_(e),this.boundHandleTechTouchMove_=e=>this.handleTechTouchMove_(e),this.boundHandleTechTouchEnd_=e=>this.handleTechTouchEnd_(e),this.boundHandleTechTap_=e=>this.handleTechTap_(e),this.isFullscreen_=!1,this.log=tg(this.id_),this.fsApi_=Xf,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&Hg(e),this.language(this.options_.language),t.languages){const e={};Object.getOwnPropertyNames(t.languages).forEach((function(n){e[n.toLowerCase()]=t.languages[n]})),this.languages_=e}else this.languages_=Db.prototype.options_.languages;this.resetCache_(),this.poster_=t.poster||"",this.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach((e=>{if("function"!=typeof this[e])throw new Error(`plugin "${e}" does not exist`)})),this.scrubbing_=!1,this.el_=this.createEl(),Xm(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(Em(Up(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const i=dg(this.options_);if(t.plugins&&Object.keys(t.plugins).forEach((e=>{this[e](t.plugins[e])})),t.debug&&this.debug(!0),this.options_.playerOptions=i,this.middleware_=[],this.playbackRates(t.playbackRates),t.experimentalSvgIcons){const e=(new(Mp().DOMParser)).parseFromString('<svg xmlns="http://www.w3.org/2000/svg">\n  <defs>\n    <symbol viewBox="0 0 16 16" id="vjs-icon-play">\n      <path d="M2 1v14l12-7z"></path>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-pause">\n       <path d="M10 4H5v16h5V4zm9 0h-5v16h5V4z"/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-audio">\n      <g><rect fill=\'none\' height=\'24\' width=\'24\'/></g><g><path d=\'M12,3c-4.97,0-9,4.03-9,9v7c0,1.1,0.9,2,2,2h4v-8H5v-1c0-3.87,3.13-7,7-7s7,3.13,7,7v1h-4v8h4c1.1,0,2-0.9,2-2v-7 C21,7.03,16.97,3,12,3z\'/></g>\n    </symbol>\n    <symbol viewBox="0 0 576 512" id="vjs-icon-captions">\n      <path d=\'M0 96C0 60.7 28.7 32 64 32H512c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96zM200 208c14.2 0 27 6.1 35.8 16c8.8 9.9 24 10.7 33.9 1.9s10.7-24 1.9-33.9c-17.5-19.6-43.1-32-71.5-32c-53 0-96 43-96 96s43 96 96 96c28.4 0 54-12.4 71.5-32c8.8-9.9 8-25-1.9-33.9s-25-8-33.9 1.9c-8.8 9.9-21.6 16-35.8 16c-26.5 0-48-21.5-48-48s21.5-48 48-48zm144 48c0-26.5 21.5-48 48-48c14.2 0 27 6.1 35.8 16c8.8 9.9 24 10.7 33.9 1.9s10.7-24 1.9-33.9c-17.5-19.6-43.1-32-71.5-32c-53 0-96 43-96 96s43 96 96 96c28.4 0 54-12.4 71.5-32c8.8-9.9 8-25-1.9-33.9s-25-8-33.9 1.9c-8.8 9.9-21.6 16-35.8 16c-26.5 0-48-21.5-48-48z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-subtitles">\n      <path d=\'M0 0h24v24H0z\' fill=\'none\'/><path d=\'M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM4 12h4v2H4v-2zm10 6H4v-2h10v2zm6 0h-4v-2h4v2zm0-4H10v-2h10v2z\'/>\n    </symbol>\n    <symbol viewBox="0 0 448 512" id="vjs-icon-fullscreen-enter">\n      <path d=\'M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-fullscreen-exit">\n      <path d="M16,9h5a1,1,0,0,0,0-2H17V3a1,1,0,0,0-2,0V8A1,1,0,0,0,16,9ZM8,15H3a1,1,0,0,0,0,2H7v4a1,1,0,0,0,2,0V16A1,1,0,0,0,8,15ZM8,2A1,1,0,0,0,7,3V7H3A1,1,0,0,0,3,9H8A1,1,0,0,0,9,8V3A1,1,0,0,0,8,2ZM21,15H16a1,1,0,0,0-1,1v5a1,1,0,0,0,2,0V17h4a1,1,0,0,0,0-2Z"/>\n    </symbol>\n    <symbol viewBox="0 0 512 512" id="vjs-icon-play-circle">\n      <path d=\'M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM188.3 147.1c7.6-4.2 16.8-4.1 24.3 .5l144 88c7.1 4.4 11.5 12.1 11.5 20.5s-4.4 16.1-11.5 20.5l-144 88c-7.4 4.5-16.7 4.7-24.3 .5s-12.3-12.2-12.3-20.9V168c0-8.7 4.7-16.7 12.3-20.9z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-volume-mute">\n      <path d=\'M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-volume-low">\n      <path d="M0 0h24v24H0z" fill="none"/><path d="M7 9v6h4l5 5V4l-5 5H7z"/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-volume-medium">\n      <path d="M0 0h24v24H0z" fill="none"/><path d="M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z"/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-volume-high">\n      <path d="M0 0h24v24H0z" fill="none"/><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>\n    </symbol>\n    <symbol viewBox="0 0 512 512" id="vjs-icon-spinner">\n      <path d=\'M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">\n      <path d=\'M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-chapters">\n      <path d=\'M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-downloading">\n      <path d=\'M18.32,4.26C16.84,3.05,15.01,2.25,13,2.05v2.02c1.46,0.18,2.79,0.76,3.9,1.62L18.32,4.26z M19.93,11h2.02 c-0.2-2.01-1-3.84-2.21-5.32L18.31,7.1C19.17,8.21,19.75,9.54,19.93,11z M18.31,16.9l1.43,1.43c1.21-1.48,2.01-3.32,2.21-5.32 h-2.02C19.75,14.46,19.17,15.79,18.31,16.9z M13,19.93v2.02c2.01-0.2,3.84-1,5.32-2.21l-1.43-1.43 C15.79,19.17,14.46,19.75,13,19.93z M15.59,10.59L13,13.17V7h-2v6.17l-2.59-2.59L7,12l5,5l5-5L15.59,10.59z M11,19.93v2.02 c-5.05-0.5-9-4.76-9-9.95s3.95-9.45,9-9.95v2.02C7.05,4.56,4,7.92,4,12S7.05,19.44,11,19.93z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-file-download">\n      <path d=\'M18,15v3H6v-3H4v3c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2v-3H18z M17,11l-1.41-1.41L13,12.17V4h-2v8.17L8.41,9.59L7,11l5,5 L17,11z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-file-download-done">\n      <polygon points=\'20.13,5.41 18.72,4 9.53,13.19 5.28,8.95 3.87,10.36 9.53,16.02\'/><rect height=\'2\' width=\'14\' x=\'5\' y=\'18\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-file-download-off">\n      <path d=\'M18,15.17V15h2v2.17L18,15.17z M15.41,12.59L17,11l-1.41-1.41L14,11.17L15.41,12.59z M13,10.17V4h-2v4.17L13,10.17z M21.19,21.19l-1.78-1.78L2.81,2.81L1.39,4.22l6.19,6.19L7,11l5,5l0.59-0.59L15.17,18H6v-3H4v3c0,1.1,0.9,2,2,2h11.17l2.61,2.61 L21.19,21.19z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-share">\n      <path d=\'M0 0h24v24H0z\' fill=\'none\'/><path d=\'M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-cog">\n      <path d=\'M0,0h24v24H0V0z\' fill=\'none\'/><path d=\'M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z\'/>\n    </symbol>\n    <symbol viewBox="0 0 448 512" id="vjs-icon-square">\n      <path d=\'M384 80c8.8 0 16 7.2 16 16V416c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V96c0-8.8 7.2-16 16-16H384zM64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64z\'/>\n    </symbol>\n    <symbol viewBox="0 0 512 512" id="vjs-icon-circle">\n      <path d=\'M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-circle-outline">\n      <path d=\'M12,2C6.47,2,2,6.47,2,12c0,5.53,4.47,10,10,10s10-4.47,10-10C22,6.47,17.53,2,12,2z M12,20c-4.42,0-8-3.58-8-8 c0-4.42,3.58-8,8-8s8,3.58,8,8C20,16.42,16.42,20,12,20z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-circle-inner-circle">\n      <path d=\'M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3-8c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-cancel">\n      <path d=\'M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-repeat">\n      <path d=\'M0 0h24v24H0z\' fill=\'none\'/><path d=\'M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-replay">\n      <path d=\'M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z\'/>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">\n      <path d=\'m17.68852 98-8.69633 8.69633 8.69633 8.69634 2.48665-2.48434-4.31928-4.31928h1.3011c4.93015 0 9.07149 1.72189 12.42399 5.16511 3.35251 3.44322 5.02876 7.63753 5.02876 12.58345h3.54972c0-2.95809-.55264-5.7293-1.657-8.3127-1.10435-2.5834-2.62238-4.84095-4.555-6.77357-1.93262-1.93262-4.19017-3.45065-6.77357-4.55501-2.5834-1.10435-5.35462-1.65699-8.31271-1.65699H15.5l4.61508-4.61509zm-8.07929 21.65879v13.86144h11.35631v5.00796H9.60923V143h12.699c.83466 0 1.55075-.29818 2.14693-.89436.59619-.59619.89436-1.30996.89436-2.14462v-7.78117c0-.83466-.29817-1.55075-.89436-2.14693-.59618-.59618-1.31227-.89436-2.14693-.89436h-8.22719v-5.09578h11.26848v-4.38399z\'/>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">\n      <path d=\'M42.314792 125.62978c0-4.99676-1.693476-9.23445-5.080438-12.71305-3.386962-3.47861-7.570851-5.21791-12.551676-5.21791h-1.314946l4.363203 4.3632-2.510335 2.51034-8.786174-8.78619L25.2206 97l2.450567 2.45057-4.662053 4.66205h1.374714c2.988489 0 5.787713.55785 8.397671 1.67355 2.609949 1.11571 4.891163 2.64981 6.843654 4.60229 1.952481 1.95248 3.486576 4.2337 4.602275 6.84365 1.115709 2.60995 1.673563 5.40917 1.673563 8.39767zM8.1829433 142v-19.65677H3.17603v-4.5433h9.642939V142Zm13.6299297 0c-1.155923 0-2.126398-.39251-2.911424-1.17755-.778861-.77885-1.168286-1.74624-1.168286-2.90215v-16.04066c0-1.15593.392524-2.1264 1.17755-2.91144.77886-.77885 1.746237-1.16827 2.90216-1.16827h7.695814c1.155914 0 2.126388.39251 2.911425 1.17755.77885.77886 1.168275 1.74623 1.168275 2.90216v16.04066c0 1.15591-.392513 2.12639-1.177549 2.91142-.778851.77885-1.746237 1.16828-2.902151 1.16828Zm.556316-4.63603h6.583172v-15.02074h-6.583172z\'/>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">\n      <path d=\'m26.046875 97-8.732422 8.73242 8.732422 8.73242 2.496094-2.49414-4.335938-4.33789h1.306641c4.950749 0 9.108097 1.72991 12.474609 5.1875 3.366504 3.4576 5.050781 7.66818 5.050781 12.63477h3.564454c0-2.97045-.555098-5.75152-1.664063-8.3457-1.108965-2.59419-2.633522-4.86205-4.574219-6.80274-1.940688-1.94069-4.208545-3.46525-6.802734-4.57422-2.59419-1.10897-5.375262-1.66406-8.345703-1.66406h-1.367188l4.634766-4.63477zM2.5546875 117.53125v4.6875H12.851562v5.25H5.8730469v4.6875h6.9785151v5.15625H2.5546875V142H13.361328c1.06088 0 1.950319-.39495 2.667969-1.18555.71765-.79059 1.076172-1.7727 1.076172-2.9414v-16.2168c0-1.1687-.358522-2.14886-1.076172-2.93945-.71765-.79059-1.607089-1.18555-2.667969-1.18555zm22.4824215.14063c-1.148936 0-2.110612.38991-2.884765 1.16406-.780292.78029-1.171875 1.74365-1.171875 2.89258v15.94336c0 1.14892.387966 2.1106 1.162109 2.88476.780302.78029 1.745595 1.17188 2.894531 1.17188h7.648438c1.148936 0 2.110613-.38795 2.884765-1.16211.780294-.78029 1.169922-1.74561 1.169922-2.89453v-15.94336c0-1.14893-.386013-2.11061-1.160156-2.88477-.780293-.78029-1.745595-1.17187-2.894531-1.17187zm.552735 4.51757h6.544922v14.92969h-6.544922z\'/>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">\n      <path d=\'m29.50843 97-2.43193 2.42962 4.6253 4.6253h-1.3642c-2.96464 0-5.74198.55386-8.3311 1.66066-2.58912 1.1068-4.85167 2.62819-6.78857 4.56508-1.93689 1.9369-3.45828 4.19945-4.56508 6.78857-1.1068 2.58911-1.66066 5.36646-1.66066 8.3311h3.55757c0-4.95687 1.67996-9.16047 5.03989-12.6113 3.35992-3.45084 7.51042-5.17654 12.45149-5.17654h1.30398l-4.32653 4.32883 2.48984 2.48984 8.71558-8.71558zm-9.78332 21.60945v13.8898h11.38144v5.01905H19.72511V142h12.72711c.83651 0 1.55186-.29884 2.14937-.89634.5975-.59751.89634-1.31286.89634-2.14936v-7.7984c0-.83651-.29884-1.55418-.89634-2.15168-.59751-.5975-1.31286-.89634-2.14937-.89634h-8.2454v-5.10706h11.29111v-4.39137z\'/>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">\n      <path d=\'m23.118923 97-2.385761 2.38349 4.537491 4.53749h-1.338298c-2.908354 0-5.632974.54335-8.172936 1.62913-2.539963 1.08579-4.759558 2.57829-6.659682 4.47842-1.900125 1.90012-3.39263 4.11972-4.478415 6.65968-1.085785 2.53996-1.629134 5.26458-1.629134 8.17294h3.490028c0-4.86277 1.648071-8.98656 4.944206-12.37188 3.296134-3.38532 7.367841-5.07826 12.215097-5.07826h1.279222l-4.244383 4.24665 2.442565 2.44257 8.550114-8.55012zm-9.520322 21.44913v4.42161h4.871497V142h4.512496v-23.55087zm18.136328 0c-1.124919 0-2.06632.37811-2.824287 1.13608-.763982.76398-1.147437 1.70845-1.147437 2.83337v15.61197c0 1.12492.380382 2.06631 1.138349 2.82428.763983.76398 1.708456 1.14517 2.833375 1.14517h7.489021c1.12492 0 2.06632-.37811 2.82428-1.13608.76399-.76398 1.14517-1.70845 1.14517-2.83337v-15.61197c0-1.12492-.37811-2.06632-1.13608-2.82429-.76398-.76398-1.70845-1.14516-2.83337-1.14516zm.540773 4.42161h6.407468v14.61676h-6.407468z\'/>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">\n      <path d=\'m25.548631 97-2.436697 2.43438 4.634367 4.63436H26.37943c-2.970448 0-5.753239.55495-8.347429 1.66392-2.594191 1.10897-4.861176 2.63334-6.801867 4.57403-1.940693 1.94069-3.465063 4.20767-4.57403 6.80187-1.108967 2.59419-1.663916 5.37698-1.663916 8.34742h3.56454c0-4.96658 1.683258-9.17841 5.049766-12.63601 3.366507-3.4576 7.525145-5.18669 12.475891-5.18669h1.306534l-4.335002 4.33733 2.494714 2.49471 8.73266-8.73266zm-11.552266 20.53092v4.68774h10.296787v5.24934h-6.978237v4.68774h6.978237v5.15652H13.996365V142h10.807333c1.060879 0 1.94879-.39527 2.666443-1.18586.717653-.79059 1.076789-1.77158 1.076789-2.94028v-16.2168c0-1.1687-.359136-2.14969-1.076789-2.94028-.717653-.79059-1.605564-1.18586-2.666443-1.18586zm21.173741.16708c-1.148937 0-2.110436.38851-2.884586 1.16266-.780294.78029-1.171935 1.74493-1.171935 2.89387v15.94296c0 1.14894.388502 2.11043 1.162652 2.88458.780294.78029 1.744932 1.16962 2.893869 1.16962h7.648904c1.14894 0 2.11044-.38619 2.88459-1.16033.78029-.7803 1.16961-1.74493 1.16961-2.89387v-15.94296c0-1.14894-.38618-2.11044-1.16033-2.88459-.78029-.78029-1.74493-1.17194-2.89387-1.17194zm.552317 4.51602h6.541957v14.93115h-6.541957z\'/>\n    </symbol>\n    <symbol viewBox="0 0 512 512" xmlns:sketch=\'http://www.bohemiancoding.com/sketch/ns\' id="vjs-icon-audio-description">\n      <g id=\'Page-1\' stroke=\'none\' stroke-width=\'1\' sketch:type=\'MSPage\'><g id=\'AD\' sketch:type=\'MSArtboardGroup\'><g id=\'g24\' sketch:type=\'MSLayerGroup\' transform=\'translate(226.904216, 162.124958)\'><path d=\'M0.385466989,219.226204 L0.385466989,0.867948105 C50.7660025,-0.149278544 89.4938709,-2.16027378 118.016886,17.9940357 C145.39121,37.3362698 166.750707,74.9591545 162.906445,123.318579 C158.839382,174.474203 121.571663,217.457893 73.1311827,221.793795 C49.0460488,223.949377 1.1583283,221.793795 1.1583283,221.793795 C1.1583283,221.793795 0.318395733,220.441758 0.385466989,219.226204 M49.1404882,164.421786 C80.5703101,165.681697 102.34881,147.788744 105.636072,119.036417 C110.038491,80.5268177 84.4473371,55.4838492 47.5943801,58.2399576 L47.5943801,161.852062 C47.5585317,163.318404 48.1702678,164.071194 49.1404882,164.421786\' id=\'path26\' sketch:type=\'MSShapeGroup\'></path></g><g id=\'g28\' sketch:type=\'MSLayerGroup\' transform=\'translate(383.779991, 168.926023)\'><path d=\'M0,212.402042 C13.3360014,216.111401 17.386874,201.342635 23.2151349,190.99422 C35.936702,168.422877 45.5086182,139.400143 45.6604922,106.220214 C45.8813648,58.6259492 27.3172746,23.7033002 10.059532,0.0383859113 L1.54919183,0.0383859113 C0.96289654,3.91152436 3.77564916,7.35260805 5.41542574,10.3142944 C18.5814362,34.0755999 30.7818519,66.8674044 30.9556975,104.507776 C31.1545985,147.683822 16.7932549,183.786198 0,212.402042\' id=\'path30\' sketch:type=\'MSShapeGroup\'></path></g><g id=\'g32\' sketch:type=\'MSLayerGroup\' transform=\'translate(425.153705, 168.926023)\'><path d=\'M0,212.402042 C13.3360014,216.111401 17.3841758,201.340502 23.2151349,190.99422 C35.936702,168.422877 45.5066909,139.400143 45.6604922,106.220214 C45.8813648,58.6259492 27.3172746,23.7033002 10.059532,0.0383859113 L1.54919183,0.0383859113 C0.96289654,3.91152436 3.77487823,7.35346107 5.41542574,10.3142944 C18.5814362,34.0755999 30.7822374,66.8674044 30.9556975,104.507776 C31.1545985,147.683822 16.7932549,183.786198 0,212.402042\' id=\'path34\' sketch:type=\'MSShapeGroup\'></path></g><g id=\'g36\' sketch:type=\'MSLayerGroup\' transform=\'translate(466.260868, 168.926023)\'><path d=\'M0,212.402042 C13.3360014,216.111401 17.3841758,201.340502 23.2151349,190.99422 C35.936702,168.422877 45.5066909,139.400143 45.6604922,106.220214 C45.8813648,58.6259492 27.3172746,23.7033002 10.059532,0.0383859113 L1.54919183,0.0383859113 C0.96289654,3.91152436 3.77487823,7.35303456 5.41542574,10.3142944 C18.5814362,34.0755999 30.7818519,66.8674044 30.9556975,104.507776 C31.1545985,147.683822 16.7932549,183.786198 0,212.402042\' id=\'path38\' sketch:type=\'MSShapeGroup\'></path></g><path d=\'M4.4765625,383.005158 L72.5800993,383.005158 L91.1530552,354.521486 L155.321745,354.386058 C155.321745,354.386058 155.386889,373.799083 155.386889,383.005158 L204.142681,383.005158 L204.142681,160.308263 L145.326586,160.308263 C139.673713,169.845383 4.4765625,383.005158 4.4765625,383.005158 L4.4765625,383.005158 Z M157.144233,237.722611 L157.144233,308.881058 L116.6914,308.610203 L157.144233,237.722611 L157.144233,237.722611 Z\' id=\'path22\' sketch:type=\'MSShapeGroup\'></path></g></g>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-next-item">\n      <path d=\'M0 0h24v24H0z\' fill=\'none\'/><path d=\'M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-previous-item">\n      <path d=\'M0 0h24v24H0z\' fill=\'none\'/><path d=\'M6 6h2v12H6zm3.5 6l8.5 6V6z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-shuffle">\n      <path d=\'M0 0h24v24H0z\' fill=\'none\'/><path d=\'M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-cast">\n      <path d=\'M0 0h24v24H0z\' fill=\'none\'/><path d=\'M0 0h24v24H0z\' fill=\'none\' opacity=\'.1\'/><path d=\'M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z\'/>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-picture-in-picture-enter">\n      <path d=\'M0 0h24v24H0V0z\' fill=\'none\'/><path d=\'M19 11h-8v6h8v-6zm4 8V4.98C23 3.88 22.1 3 21 3H3c-1.1 0-2 .88-2 1.98V19c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H3V4.97h18v14.05z\'/>\n    </symbol>\n    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">\n      <path d=\'M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z\'/><path fill=\'none\' d=\'M-1-3h24v24H-1z\'/>\n    </symbol>\n    <symbol viewBox="0 0 320 512" id="vjs-icon-facebook">\n      <path d=\'M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z\'/>\n    </symbol>\n    <symbol viewBox="0 0 448 512" id="vjs-icon-linkedin">\n      <path d=\'M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z\'/>\n    </symbol>\n    <symbol viewBox="0 0 512 512" id="vjs-icon-twitter">\n      <path d=\'M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z\'/>\n    </symbol>\n    <symbol viewBox="0 0 320 512" id="vjs-icon-tumblr">\n      <path d=\'M309.8 480.3c-13.6 14.5-50 31.7-97.4 31.7-120.8 0-147-88.8-147-140.6v-144H17.9c-5.5 0-10-4.5-10-10v-68c0-7.2 4.5-13.6 11.3-16 62-21.8 81.5-76 84.3-117.1.8-11 6.5-16.3 16.1-16.3h70.9c5.5 0 10 4.5 10 10v115.2h83c5.5 0 10 4.4 10 9.9v81.7c0 5.5-4.5 10-10 10h-83.4V360c0 34.2 23.7 53.6 68 35.8 4.8-1.9 9-3.2 12.7-2.2 3.5.9 5.8 3.4 7.4 7.9l22 64.3c1.8 5 3.3 10.6-.4 14.5z\'/>\n    </symbol>\n    <symbol viewBox="0 0 496 512" id="vjs-icon-pinterest">\n      <path d=\'M496 256c0 137-111 248-248 248-25.6 0-50.2-3.9-73.4-11.1 10.1-16.5 25.2-43.5 30.8-65 3-11.6 15.4-59 15.4-59 8.1 15.4 31.7 28.5 56.8 28.5 74.8 0 128.7-68.8 128.7-154.3 0-81.9-66.9-143.2-152.9-143.2-107 0-163.9 71.8-163.9 150.1 0 36.4 19.4 81.7 50.3 96.1 4.7 2.2 7.2 1.2 8.3-3.3.8-3.4 5-20.3 6.9-28.1.6-2.5.3-4.7-1.7-7.1-10.1-12.5-18.3-35.3-18.3-56.6 0-54.7 41.4-107.6 112-107.6 60.9 0 103.6 41.5 103.6 100.9 0 67.1-33.9 113.6-78 113.6-24.3 0-42.6-20.1-36.7-44.8 7-29.5 20.5-61.3 20.5-82.6 0-19-10.2-34.9-31.4-34.9-24.9 0-44.9 25.7-44.9 60.2 0 22 7.4 36.8 7.4 36.8s-24.5 103.8-29 123.2c-5 21.4-3 51.6-.9 71.2C65.4 450.9 0 361.1 0 256 0 119 111 8 248 8s248 111 248 248z\'/>\n    </symbol>\n  </defs>\n</svg>',"image/svg+xml");if(e.querySelector("parsererror"))eg.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const t=e.documentElement;t.style.display="none",this.el_.appendChild(t),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio("audio"===e.nodeName.toLowerCase()),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),Eg&&this.addClass("vjs-touch-enabled"),Pg||this.addClass("vjs-workinghover"),Db.players[this.id_]=this;const r=Hf.split(".")[0];this.addClass(`vjs-v${r}`),this.userActive(!0),this.reportUserActivity(),this.one("play",(e=>this.listenForUserActivity_(e))),this.on("keydown",(e=>this.handleKeyDown(e))),this.on("languagechange",(e=>this.handleLanguagechange(e))),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",(()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)}))}dispose(){this.trigger("dispose"),this.off("dispose"),Am(Up(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Am(Up(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Db.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Hy[this.id()]=null,Vy.names.forEach((e=>{const t=this[Vy[e].getterName]();t&&t.off&&t.off()})),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e,t=this.tag,n=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player");const i="video-js"===this.tag.tagName.toLowerCase();n?e=this.el_=t.parentNode:i||(e=this.el_=super.createEl("div"));const r=Hg(t);if(i){for(e=this.el_=t,t=this.tag=Up().createElement("video");e.children.length;)t.appendChild(e.firstChild);qg(e,"video-js")||Fg(e,"video-js"),e.appendChild(t),n=this.playerElIngest_=e,Object.keys(e).forEach((n=>{try{t[n]=e[n]}catch(e){}}))}if(t.setAttribute("tabindex","-1"),r.tabindex="-1",bg&&Sg&&(t.setAttribute("role","application"),r.role="application"),t.removeAttribute("width"),t.removeAttribute("height"),"width"in r&&delete r.width,"height"in r&&delete r.height,Object.getOwnPropertyNames(r).forEach((function(n){i&&"class"===n||e.setAttribute(n,r[n]),i&&t.setAttribute(n,r[n])})),t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",t.player=e.player=this,this.addClass("vjs-paused"),!0!==Mp().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=mm("vjs-styles-dimensions");const e=om(".vjs-styles-defaults"),t=om("head");t.insertBefore(this.styleEl_,e?e.nextSibling:t.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const s=t.getElementsByTagName("a");for(let e=0;e<s.length;e++){const t=s.item(e);Fg(t,"vjs-hidden"),t.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!n&&t.parentNode.insertBefore(e,t),Bg(t,e),this.children_.unshift(t),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=e,e}crossOrigin(e){if(void 0===e)return this.techGet_("crossOrigin");null===e||"anonymous"===e||"use-credentials"===e?(this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)):eg.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,t){const n=e+"_";if(void 0===t)return this[n]||0;if(""===t||"auto"===t)return this[n]=void 0,void this.updateStyleEl_();const i=parseFloat(t);isNaN(i)?eg.error(`Improper value "${t}" supplied for for ${e}`):(this[n]=i,this.updateStyleEl_())}fluid(e){if(void 0===e)return!!this.fluid_;var t,n;this.fluid_=!!e,Fm(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),n=()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)},Fm(t=this)?n():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(n))):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(!0===Mp().VIDEOJS_NO_DYNAMIC_STYLE){const e="number"==typeof this.width_?this.width_:this.options_.width,t="number"==typeof this.height_?this.height_:this.options_.height,n=this.tech_&&this.tech_.el();return void(n&&(e>=0&&(n.width=e),t>=0&&(n.height=t)))}let e,t,n,i;n=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";const r=n.split(":"),s=r[1]/r[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/s:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*s,i=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(i),ym(this.styleEl_,`\n      .${i} {\n        width: ${e}px;\n        height: ${t}px;\n      }\n\n      .${i}.vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: ${100*s}%;\n      }\n    `)}loadTech_(e,t){this.tech_&&this.unloadTech_();const n=Qm(e),i=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==n&&this.tag&&(zy.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;let r=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(r=!1);const s={source:t,autoplay:r,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${i}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Vy.names.forEach((e=>{const t=Vy[e];s[t.getterName]=this[t.privateName]})),Object.assign(s,this.options_[n]),Object.assign(s,this.options_[i]),Object.assign(s,this.options_[e.toLowerCase()]),this.tag&&(s.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(s.startTime=this.cache_.currentTime);const o=zy.getTech(e);if(!o)throw new Error(`No Tech named '${n}' exists! '${n}' should be registered using videojs.registerTech()'`);var a,d;this.tech_=new o(s),this.tech_.ready(Nm(this,this.handleTechReady_),!0),a=this.textTracksJson_||[],d=this.tech_,a.forEach((function(e){const t=d.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach((e=>t.addCue(e)))})),d.textTracks(),Cb.forEach((e=>{this.on(this.tech_,e,(t=>this[`handleTech${Qm(e)}_`](t)))})),Object.keys(Eb).forEach((e=>{this.on(this.tech_,e,(t=>{0===this.tech_.playbackRate()&&this.tech_.seeking()?this.queuedCallbacks_.push({callback:this[`handleTech${Eb[e]}_`].bind(this),event:t}):this[`handleTech${Eb[e]}_`](t)}))})),this.on(this.tech_,"loadstart",(e=>this.handleTechLoadStart_(e))),this.on(this.tech_,"sourceset",(e=>this.handleTechSourceset_(e))),this.on(this.tech_,"waiting",(e=>this.handleTechWaiting_(e))),this.on(this.tech_,"ended",(e=>this.handleTechEnded_(e))),this.on(this.tech_,"seeking",(e=>this.handleTechSeeking_(e))),this.on(this.tech_,"play",(e=>this.handleTechPlay_(e))),this.on(this.tech_,"pause",(e=>this.handleTechPause_(e))),this.on(this.tech_,"durationchange",(e=>this.handleTechDurationChange_(e))),this.on(this.tech_,"fullscreenchange",((e,t)=>this.handleTechFullscreenChange_(e,t))),this.on(this.tech_,"fullscreenerror",((e,t)=>this.handleTechFullscreenError_(e,t))),this.on(this.tech_,"enterpictureinpicture",(e=>this.handleTechEnterPictureInPicture_(e))),this.on(this.tech_,"leavepictureinpicture",(e=>this.handleTechLeavePictureInPicture_(e))),this.on(this.tech_,"error",(e=>this.handleTechError_(e))),this.on(this.tech_,"posterchange",(e=>this.handleTechPosterChange_(e))),this.on(this.tech_,"textdata",(e=>this.handleTechTextData_(e))),this.on(this.tech_,"ratechange",(e=>this.handleTechRateChange_(e))),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===n&&this.tag||Bg(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){Vy.names.forEach((e=>{const t=Vy[e];this[t.privateName]=this[t.getterName]()})),this.textTracksJson_=function(e){const t=e.$$("track"),n=Array.prototype.map.call(t,(e=>e.track));return Array.prototype.map.call(t,(function(e){const t=my(e.track);return e.src&&(t.src=e.src),t})).concat(Array.prototype.filter.call(e.textTracks(),(function(e){return-1===n.indexOf(e)})).map(my))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return void 0===e&&eg.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||"string"!=typeof e)return;const t=()=>{const e=this.muted();this.muted(!0);const t=()=>{this.muted(e)};this.playTerminatedQueue_.push(t);const n=this.play();if(fy(n))return n.catch((e=>{throw t(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${e||""}`)}))};let n;return"any"!==e||this.muted()?n="muted"!==e||this.muted()?this.play():t():(n=this.play(),fy(n)&&(n=n.catch(t))),fy(n)?n.then((()=>{this.trigger({type:"autoplay-success",autoplay:e})})).catch((()=>{this.trigger({type:"autoplay-failure",autoplay:e})})):void 0}updateSourceCaches_(e=""){let t=e,n="";"string"!=typeof t&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=((e,t)=>{if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;const n=e.cache_.sources.filter((e=>e.src===t));if(n.length)return n[0].type;const i=e.$$("source");for(let e=0;e<i.length;e++){const n=i[e];if(n.type&&n.src&&n.src===t)return n.type}return tv(t)})(this,t)),this.cache_.source=dg({},e,{src:t,type:n});const i=this.cache_.sources.filter((e=>e.src&&e.src===t)),r=[],s=this.$$("source"),o=[];for(let e=0;e<s.length;e++){const n=Hg(s[e]);r.push(n),n.src&&n.src===t&&o.push(n.src)}o.length&&!i.length?this.cache_.sources=r:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}handleTechSourceset_(e){if(!this.changingSrc_){let t=e=>this.updateSourceCaches_(e);const n=this.currentSource().src,i=e.src;n&&!/^blob:/.test(n)&&/^blob:/.test(i)&&(!this.lastSource_||this.lastSource_.tech!==i&&this.lastSource_.player!==n)&&(t=()=>{}),t(i),e.src||this.tech_.any(["sourceset","loadstart"],(e=>{if("sourceset"===e.type)return;const t=this.techGet_("currentSrc");this.lastSource_.tech=t,this.updateSourceCaches_(t)}))}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach((e=>e.callback(e.event))),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),t=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",t))};this.on("timeupdate",t)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?gy(this.play()):this.pause()))}handleTechDoubleClick_(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(t=>t.contains(e.target)))||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const t=e.target.player;if(t&&t!==this)return;const n=this.el();let i=Up()[this.fsApi_.fullscreenElement]===n;!i&&n.matches&&(i=n.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(i)}handleTechFullscreenChange_(e,t){t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",(()=>{this.removeClass("vjs-ios-native-fs")}))),this.isFullscreen(t.isFullscreen))}handleTechFullscreenError_(e,t){this.trigger("fullscreenerror",t)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,t){this.ready((function(){if(e in Ky)return function(e,t,n,i){return t[n](e.reduce(Yy(n),i))}(this.middleware_,this.tech_,e,t);if(e in Jy)return Gy(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(e){throw eg(e),e}}),!0)}techGet_(e){if(this.tech_&&this.tech_.isReady_){if(e in Xy)return function(e,t,n){return e.reduceRight(Yy(n),t[n]())}(this.middleware_,this.tech_,e);if(e in Jy)return Gy(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw eg(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,t),t;if("TypeError"===t.name)throw eg(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,t),this.tech_.isReady_=!1,t;throw eg(t),t}}}play(){return new Promise((e=>{this.play_(e)}))}play_(e=gy){this.playCallbacks_.push(e);const t=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc())),n=Boolean(xg||Pg);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!t)return this.waitToPlay_=e=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!t&&n&&this.load());const i=this.techGet_("play");n&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),null===i?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(i)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach((function(e){e()}))}runPlayCallbacks_(e){const t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach((function(t){t(e)}))}pause(){this.techCall_("pause")}paused(){return!1!==this.techGet_("paused")}played(){return this.techGet_("played")||sy(0,0)}scrubbing(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){return void 0===e?(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime):(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),this.cache_.initTime=0,void(isFinite(e)&&(this.cache_.currentTime=Number(e)))):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_)))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return e&&e.length||(e=sy(0,0)),e}bufferedPercent(){return py(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),t=this.duration();let n=e.end(e.length-1);return n>t&&(n=t),n}volume(e){let t;return void 0!==e?(t=Math.max(0,Math.min(1,e)),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)}muted(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)}defaultMuted(e){return void 0!==e&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(void 0!==e){const t=this.isFullscreen_;return this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const t=this;return new Promise(((n,i)=>{function r(){t.off("fullscreenerror",o),t.off("fullscreenchange",s)}function s(){r(),n()}function o(e,t){r(),i(t)}t.one("fullscreenchange",s),t.one("fullscreenerror",o);const a=t.requestFullscreenHelper_(e);a&&(a.then(r,r),a.then(n,i))}))}requestFullscreenHelper_(e){let t;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen){const e=this.el_[this.fsApi_.requestFullscreen](t);return e&&e.then((()=>this.isFullscreen(!0)),(()=>this.isFullscreen(!1))),e}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise(((t,n)=>{function i(){e.off("fullscreenerror",s),e.off("fullscreenchange",r)}function r(){i(),t()}function s(e,t){i(),n(t)}e.one("fullscreenchange",r),e.one("fullscreenerror",s);const o=e.exitFullscreenHelper_();o&&(o.then(i,i),o.then(t,n))}))}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=Up()[this.fsApi_.exitFullscreen]();return e&&gy(e.then((()=>this.isFullscreen(!1)))),e}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Up().documentElement.style.overflow,Em(Up(),"keydown",this.boundFullWindowOnEscKey_),Up().documentElement.style.overflow="hidden",Fg(Up().body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){Bp().isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,Am(Up(),"keydown",this.boundFullWindowOnEscKey_),Up().documentElement.style.overflow=this.docOrigOverflow,Vg(Up().body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&Mp().documentPictureInPicture){const e=Up().createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(Ug("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),Mp().documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then((t=>(lm(t),this.el_.parentNode.insertBefore(e,this.el_),t.document.body.appendChild(this.el_),t.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger("enterpictureinpicture"),t.addEventListener("pagehide",(t=>{const n=t.target.querySelector(".video-js");e.parentNode.replaceChild(n,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")})),t)))}return"pictureInPictureEnabled"in Up()&&!1===this.disablePictureInPicture()?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){return Mp().documentPictureInPicture&&Mp().documentPictureInPicture.window?(Mp().documentPictureInPicture.window.close(),Promise.resolve()):"pictureInPictureEnabled"in Up()?Up().exitPictureInPicture():void 0}handleKeyDown(e){const{userActions:t}=this.options_;t&&t.hotkeys&&((e=>{const t=e.tagName.toLowerCase();return!!e.isContentEditable||("input"===t?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(e.type):-1!==["textarea"].indexOf(t))})(this.el_.ownerDocument.activeElement)||("function"==typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e)))}handleHotkeys(e){const t=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:n=(e=>Bp().isEventKey(e,"f")),muteKey:i=(e=>Bp().isEventKey(e,"m")),playPauseKey:r=(e=>Bp().isEventKey(e,"k")||Bp().isEventKey(e,"Space"))}=t;if(n.call(this,e)){e.preventDefault(),e.stopPropagation();const t=ny.getComponent("FullscreenToggle");!1!==Up()[this.fsApi_.fullscreenEnabled]&&t.prototype.handleClick.call(this,e)}else i.call(this,e)?(e.preventDefault(),e.stopPropagation(),ny.getComponent("MuteToggle").prototype.handleClick.call(this,e)):r.call(this,e)&&(e.preventDefault(),e.stopPropagation(),ny.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let t;for(let n=0,i=this.options_.techOrder;n<i.length;n++){const r=i[n];let s=zy.getTech(r);if(s||(s=ny.getComponent(r)),s){if(s.isSupported()&&(t=s.canPlayType(e),t))return t}else eg.error(`The "${r}" tech is undefined. Skipped browser support check for that tech.`)}return""}selectSource(e){const t=this.options_.techOrder.map((e=>[e,zy.getTech(e)])).filter((([e,t])=>t?t.isSupported():(eg.error(`The "${e}" tech is undefined. Skipped browser support check for that tech.`),!1))),n=function(e,t,n){let i;return e.some((e=>t.some((t=>{if(i=n(e,t),i)return!0})))),i};let i;const r=([e,t],n)=>{if(t.canPlaySource(n,this.options_[e.toLowerCase()]))return{source:n,tech:e}};var s;return i=this.options_.sourceOrder?n(e,t,(s=r,(e,t)=>s(t,e))):n(t,e,r),i||!1}handleSrc_(e,t){if(void 0===e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const n=nv(e);if(n.length){if(this.changingSrc_=!0,t||(this.cache_.sources=n),this.updateSourceCaches_(n[0]),Zy(this,n[0],((e,i)=>{if(this.middleware_=i,t||(this.cache_.sources=n),this.updateSourceCaches_(e),this.src_(e))return n.length>1?this.handleSrc_(n.slice(1)):(this.changingSrc_=!1,this.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0),void this.triggerReady());var r,s;r=i,s=this.tech_,r.forEach((e=>e.setTech&&e.setTech(s)))})),n.length>1){const e=()=>{this.error(null),this.handleSrc_(n.slice(1),!0)},t=()=>{this.off("error",e)};this.one("error",e),this.one("playing",t),this.resetRetryOnError_=()=>{this.off("error",e),this.off("playing",t)}}}else this.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0)}src(e){return this.handleSrc_(e,!1)}src_(e){const t=this.selectSource([e]);return!t||(ey(t.tech,this.techName_)?(this.ready((function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1}),!0),!1):(this.changingSrc_=!0,this.loadTech_(t.tech,t.source),this.tech_.ready((()=>{this.changingSrc_=!1})),!1))}load(){this.tech_&&this.tech_.vhs?this.src(this.currentSource()):this.techCall_("load")}reset(){this.paused()?this.doReset_():gy(this.play().then((()=>this.doReset_())))}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Fm(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:t,progressControl:n,remainingTimeDisplay:i}=this.controlBar||{},{seekBar:r}=n||{};e&&e.updateContent(),t&&t.updateContent(),i&&i.updateContent(),r&&(r.update(),r.loadProgressBar&&r.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")}autoplay(e){if(void 0===e)return this.options_.autoplay||!1;let t;"string"==typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"==typeof e?e:"play"),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)}playsinline(e){return void 0!==e&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")}poster(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(void 0===e)return this.error_||null;if(Zf("beforeerror").forEach((t=>{const n=t(this,e);og(n)&&!Array.isArray(n)||"string"==typeof n||"number"==typeof n||null===n?e=n:this.log.error("please return a value that MediaError expects in beforeerror hooks")})),this.options_.suppressNotSupportedError&&e&&4===e.code){const t=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),void this.one("loadstart",(function(){this.off(["click","touchstart"],t)}))}if(null===e)return this.error_=null,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new hy(e),this.addClass("vjs-error"),eg.error(`(CODE:${this.error_.code} ${hy.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),Zf("error").forEach((e=>e(this,this.error_)))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",(function(e){e.stopPropagation(),e.preventDefault()})),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,t,n;const i=Nm(this,this.reportUserActivity),r=function(t){i(),this.clearInterval(e)};this.on("mousedown",(function(){i(),this.clearInterval(e),e=this.setInterval(i,250)})),this.on("mousemove",(function(e){e.screenX===t&&e.screenY===n||(t=e.screenX,n=e.screenY,i())})),this.on("mouseup",r),this.on("mouseleave",r);const s=this.getChild("controlBar");let o;!s||Pg||gg||(s.on("mouseenter",(function(e){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0})),s.on("mouseleave",(function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}))),this.on("keydown",i),this.on("keyup",i),this.setInterval((function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(o);const e=this.options_.inactivityTimeout;e<=0||(o=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),e))}),250)}playbackRate(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)}defaultPlaybackRate(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),t=this.getChild("ControlBar"),n=t&&t.currentHeight();e.forEach((e=>{e!==t&&e.el_&&!e.hasClass("vjs-hidden")&&(e.hide(),this.audioOnlyCache_.hiddenChildren.push(e))})),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(n),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach((e=>e.show())),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if("boolean"!=typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const e=[];return this.isInPictureInPicture()&&e.push(this.exitPictureInPicture()),this.isFullscreen()&&e.push(this.exitFullscreen()),this.audioPosterMode()&&e.push(this.audioPosterMode(!1)),Promise.all(e).then((()=>this.enableAudioOnlyUI_()))}return Promise.resolve().then((()=>this.disableAudioOnlyUI_()))}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return"boolean"!=typeof e||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then((()=>{this.enablePosterModeUI_()})):Promise.resolve().then((()=>{this.enablePosterModeUI_()})):Promise.resolve().then((()=>{this.disablePosterModeUI_()})))}addTextTrack(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)}addRemoteTextTrack(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)}removeRemoteTextTrack(e={}){let{track:t}=e;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),Fm(this)&&this.trigger("languagechange"))}languages(){return dg(Db.prototype.options_.languages,this.languages_)}toJSON(){const e=dg(this.options_),t=e.tracks;e.tracks=[];for(let n=0;n<t.length;n++){let i=t[n];i=dg(i),i.player=void 0,e.tracks[n]=i}return e}createModal(e,t){(t=t||{}).content=e||"";const n=new vy(this,t);return this.addChild(n),n.on("dispose",(()=>{this.removeChild(n)})),n.open(),n}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),t=this.currentWidth();for(let n=0;n<Ab.length;n++){const i=Ab[n];if(t<=this.breakpoints_[i]){if(e===i)return;e&&this.removeClass(Pb[e]),this.addClass(Pb[i]),this.breakpoint_=i;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=Object.assign({},xb,e),this.updateCurrentBreakpoint_()),Object.assign(this.breakpoints_)}responsive(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?(this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return Pb[this.breakpoint_]||""}loadMedia(e,t){if(!e||"object"!=typeof e)return;const n=this.crossOrigin();this.reset(),this.cache_.media=dg(e);const{artist:i,artwork:r,description:s,poster:o,src:a,textTracks:d,title:l}=this.cache_.media;!r&&o&&(this.cache_.media.artwork=[{src:o,type:tv(o)}]),n&&this.crossOrigin(n),a&&this.src(a),o&&this.poster(o),Array.isArray(d)&&d.forEach((e=>this.addRemoteTextTrack(e,!1))),this.titleBar&&this.titleBar.update({title:l,description:s||i||""}),this.ready(t)}getMedia(){if(!this.cache_.media){const e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),(e=>({kind:e.kind,label:e.label,language:e.language,src:e.src})))};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:tv(t.poster)}]),t}return dg(this.cache_.media)}static getTagSettings(e){const t={sources:[],tracks:[]},n=Hg(e),i=n["data-setup"];if(qg(e,"vjs-fill")&&(n.fill=!0),qg(e,"vjs-fluid")&&(n.fluid=!0),null!==i){const[e,t]=Fp()(i||"{}");e&&eg.error(e),Object.assign(n,t)}if(Object.assign(t,n),e.hasChildNodes()){const n=e.childNodes;for(let e=0,i=n.length;e<i;e++){const i=n[e],r=i.nodeName.toLowerCase();"source"===r?t.sources.push(Hg(i)):"track"===r&&t.tracks.push(Hg(i))}}return t}debug(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(void 0===e)return this.cache_.playbackRates;Array.isArray(e)&&e.every((e=>"number"==typeof e))&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}Vy.names.forEach((function(e){const t=Vy[e];Db.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}})),Db.prototype.crossorigin=Db.prototype.crossOrigin,Db.players={};const Ob=Mp().navigator;Db.prototype.options_={techOrder:zy.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Ob&&(Ob.languages&&Ob.languages[0]||Ob.userLanguage||Ob.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach((function(e){Db.prototype[e]=function(){return this.techGet_(e)}})),Cb.forEach((function(e){Db.prototype[`handleTech${Qm(e)}_`]=function(){return this.trigger(e)}})),ny.registerComponent("Player",Db);const Rb="plugin",Nb="activePlugins_",Mb={},Lb=e=>Mb.hasOwnProperty(e),Ub=e=>Lb(e)?Mb[e]:void 0,jb=(e,t)=>{e[Nb]=e[Nb]||{},e[Nb][t]=!0},Bb=(e,t,n)=>{const i=(n?"before":"")+"pluginsetup";e.trigger(i,t),e.trigger(i+":"+t.name,t)},qb=(e,t)=>(t.prototype.name=e,function(...n){Bb(this,{name:e,plugin:t,instance:null},!0);const i=new t(...[this,...n]);return this[e]=()=>i,Bb(this,i.getEventHash()),i});class Fb{constructor(e){if(this.constructor===Fb)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),Xm(this),delete this.trigger,Jm(this,this.constructor.defaultState),jb(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,t={}){return Pm(this.eventBusEl_,e,this.getEventHash(t))}handleStateChanged(e){}dispose(){const{name:e,player:t}=this;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Nb][e]=!1,this.player=this.state=null,t[e]=qb(e,Mb[e])}static isBasic(e){const t="string"==typeof e?Ub(e):e;return"function"==typeof t&&!Fb.prototype.isPrototypeOf(t.prototype)}static registerPlugin(e,t){if("string"!=typeof e)throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(Lb(e))eg.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(Db.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if("function"!=typeof t)throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof t}.`);return Mb[e]=t,e!==Rb&&(Fb.isBasic(t)?Db.prototype[e]=function(e,t){const n=function(){Bb(this,{name:e,plugin:t,instance:null},!0);const n=t.apply(this,arguments);return jb(this,e),Bb(this,{name:e,plugin:t,instance:n}),n};return Object.keys(t).forEach((function(e){n[e]=t[e]})),n}(e,t):Db.prototype[e]=qb(e,t)),t}static deregisterPlugin(e){if(e===Rb)throw new Error("Cannot de-register base plugin.");Lb(e)&&(delete Mb[e],delete Db.prototype[e])}static getPlugins(e=Object.keys(Mb)){let t;return e.forEach((e=>{const n=Ub(e);n&&(t=t||{},t[e]=n)})),t}static getPluginVersion(e){const t=Ub(e);return t&&t.VERSION||""}}function Vb(e,t,n,i){return function(e,t){let n=!1;return function(...i){return n||eg.warn(e),n=!0,t.apply(this,i)}}(`${t} is deprecated and will be removed in ${e}.0; please use ${n} instead.`,i)}Fb.getPlugin=Ub,Fb.BASE_PLUGIN_NAME=Rb,Fb.registerPlugin(Rb,Fb),Db.prototype.usingPlugin=function(e){return!!this[Nb]&&!0===this[Nb][e]},Db.prototype.hasPlugin=function(e){return!!Lb(e)};const zb=e=>0===e.indexOf("#")?e.slice(1):e;function $b(e,t,n){let i=$b.getPlayer(e);if(i)return t&&eg.warn(`Player "${e}" is already initialised. Options will not be applied.`),n&&i.ready(n),i;const r="string"==typeof e?om("#"+zb(e)):e;if(!Ng(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");const s="getRootNode"in r&&r.getRootNode()instanceof Mp().ShadowRoot?r.getRootNode():r.ownerDocument.body;r.ownerDocument.defaultView&&s.contains(r)||eg.warn("The element supplied is not included in the DOM"),!0===(t=t||{}).restoreEl&&(t.restoreEl=(r.parentNode&&r.parentNode.hasAttribute("data-vjs-player")?r.parentNode:r).cloneNode(!0)),Zf("beforesetup").forEach((e=>{const n=e(r,dg(t));og(n)&&!Array.isArray(n)?t=dg(t,n):eg.error("please return an object in beforesetup hooks")}));const o=ny.getComponent("Player");return i=new o(r,t,n),Zf("setup").forEach((e=>e(i))),i}if($b.hooks_=Wf,$b.hooks=Zf,$b.hook=function(e,t){Zf(e,t)},$b.hookOnce=function(e,t){Zf(e,[].concat(t).map((t=>{const n=(...i)=>(Gf(e,n),t(...i));return n})))},$b.removeHook=Gf,!0!==Mp().VIDEOJS_NO_DYNAMIC_STYLE&&Rg()){let e=om(".vjs-styles-defaults");if(!e){e=mm("vjs-styles-defaults");const t=om("head");t&&t.insertBefore(e,t.firstChild),ym(e,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}fm(1,$b),$b.VERSION=Hf,$b.options=Db.prototype.options_,$b.getPlayers=()=>Db.players,$b.getPlayer=e=>{const t=Db.players;let n;if("string"==typeof e){const i=zb(e),r=t[i];if(r)return r;n=om("#"+i)}else n=e;if(Ng(n)){const{player:e,playerId:i}=n;if(e||t[i])return e||t[i]}},$b.getAllPlayers=()=>Object.keys(Db.players).map((e=>Db.players[e])).filter(Boolean),$b.players=Db.players,$b.getComponent=ny.getComponent,$b.registerComponent=(e,t)=>(zy.isTech(t)&&eg.warn(`The ${e} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),ny.registerComponent.call(ny,e,t)),$b.getTech=zy.getTech,$b.registerTech=zy.registerTech,$b.use=function(e,t){$y[e]=$y[e]||[],$y[e].push(t)},Object.defineProperty($b,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty($b.middleware,"TERMINATOR",{value:Wy,writeable:!1,enumerable:!0}),$b.browser=Dg,$b.obj=ug,$b.mergeOptions=Vb(9,"videojs.mergeOptions","videojs.obj.merge",dg),$b.defineLazyProperty=Vb(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",cg),$b.bind=Vb(9,"videojs.bind","native Function.prototype.bind",Nm),$b.registerPlugin=Fb.registerPlugin,$b.deregisterPlugin=Fb.deregisterPlugin,$b.plugin=(e,t)=>(eg.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Fb.registerPlugin(e,t)),$b.getPlugins=Fb.getPlugins,$b.getPlugin=Fb.getPlugin,$b.getPluginVersion=Fb.getPluginVersion,$b.addLanguage=function(e,t){return e=(""+e).toLowerCase(),$b.options.languages=dg($b.options.languages,{[e]:t}),$b.options.languages[e]},$b.log=eg,$b.createLogger=tg,$b.time=uy,$b.createTimeRange=Vb(9,"videojs.createTimeRange","videojs.time.createTimeRanges",sy),$b.createTimeRanges=Vb(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",sy),$b.formatTime=Vb(9,"videojs.formatTime","videojs.time.formatTime",cy),$b.setFormatTime=Vb(9,"videojs.setFormatTime","videojs.time.setFormatTime",dy),$b.resetFormatTime=Vb(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",ly),$b.parseUrl=Vb(9,"videojs.parseUrl","videojs.url.parseUrl",Py),$b.isCrossOrigin=Vb(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",Oy),$b.EventTarget=Bm,$b.any=Dm,$b.on=Em,$b.one=xm,$b.off=Am,$b.trigger=Pm,$b.xhr=zp(),$b.TextTrack=Ly,$b.AudioTrack=Uy,$b.VideoTrack=jy,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((e=>{$b[e]=function(){return eg.warn(`videojs.${e}() is deprecated; use videojs.dom.${e}() instead`),cm[e].apply(null,arguments)}})),$b.computedStyle=Vb(9,"videojs.computedStyle","videojs.dom.computedStyle",dm),$b.dom=cm,$b.fn=Um,$b.num=wv,$b.str=ty,$b.url=Ry;class Hb{constructor(e){let t=this;return t.id=e.id,t.label=t.id,t.width=e.width,t.height=e.height,t.bitrate=e.bandwidth,t.frameRate=e.frameRate,t.enabled_=e.enabled,Object.defineProperty(t,"enabled",{get:()=>t.enabled_(),set(e){t.enabled_(e)}}),t}}class Wb extends $b.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get:()=>e.selectedIndex_}),Object.defineProperty(e,"length",{get:()=>e.levels_.length}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let t=this.getQualityLevelById(e.id);if(t)return t;const n=this.levels_.length;return t=new Hb(e),""+n in this||Object.defineProperty(this,n,{get(){return this.levels_[n]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t}removeQualityLevel(e){let t=null;for(let n=0,i=this.length;n<i;n++)if(this[n]===e){t=this.levels_.splice(n,1)[0],this.selectedIndex_===n?this.selectedIndex_=-1:this.selectedIndex_>n&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t}getQualityLevelById(e){for(let t=0,n=this.length;t<n;t++){const n=this[t];if(n.id===e)return n}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}Wb.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const e in Wb.prototype.allowedEvents_)Wb.prototype["on"+e]=null;var Zb="4.0.0";const Gb=function(e){return function(e,t){const n=e.qualityLevels,i=new Wb,r=function(){i.dispose(),e.qualityLevels=n,e.off("dispose",r)};return e.on("dispose",r),e.qualityLevels=()=>i,e.qualityLevels.VERSION=Zb,i}(this,$b.obj.merge({},e))};$b.registerPlugin("qualityLevels",Gb),Gb.VERSION=Zb;const Xb=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=Mp().location&&Mp().location.href||"");var n="function"==typeof Mp().URL,i=/^\/\//.test(e),r=!Mp().location&&!/\/\//i.test(e);if(n?e=new(Mp().URL)(e,Mp().location||"http://example.com"):/\/\//i.test(e)||(e=Zp().buildAbsoluteURL(Mp().location&&Mp().location.href||"",e)),n){var s=new URL(t,e);return r?s.href.slice(18):i?s.href.slice(s.protocol.length):s.href}return Zp().buildAbsoluteURL(e,t)},Kb=(e,t)=>t&&t.responseURL&&e!==t.responseURL?t.responseURL:e,Jb=e=>$b.log.debug?$b.log.debug.bind($b,"VHS:",`${e} >`):function(){};function Yb(...e){const t=$b.obj||$b;return(t.merge||t.mergeOptions).apply(t,e)}function Qb(...e){const t=$b.time||$b;return(t.createTimeRanges||t.createTimeRanges).apply(t,e)}const e_=1/30,t_=.1,n_=function(e,t){const n=[];let i;if(e&&e.length)for(i=0;i<e.length;i++)t(e.start(i),e.end(i))&&n.push([e.start(i),e.end(i)]);return Qb(n)},i_=function(e,t){return n_(e,(function(e,n){return e-t_<=t&&n+t_>=t}))},r_=function(e,t){return n_(e,(function(e){return e-e_>=t}))},s_=e=>{const t=[];if(!e||!e.length)return"";for(let n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")},o_=e=>{const t=[];for(let n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t},a_=function(e){if(e&&e.length&&e.end)return e.end(e.length-1)},d_=function(e,t){let n=0;if(!e||!e.length)return n;for(let i=0;i<e.length;i++){const r=e.start(i),s=e.end(i);t>s||(n+=t>r&&t<=s?s-t:s-r)}return n},l_=(e,t)=>{if(!t.preload)return t.duration;let n=0;return(t.parts||[]).forEach((function(e){n+=e.duration})),(t.preloadHints||[]).forEach((function(t){"PART"===t.type&&(n+=e.partTargetDuration)})),n},c_=e=>(e.segments||[]).reduce(((e,t,n)=>(t.parts?t.parts.forEach((function(i,r){e.push({duration:i.duration,segmentIndex:n,partIndex:r,part:i,segment:t})})):e.push({duration:t.duration,segmentIndex:n,partIndex:null,segment:t,part:null}),e)),[]),u_=e=>{const t=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return t&&t.parts||[]},p_=({preloadSegment:e})=>{if(!e)return;const{parts:t,preloadHints:n}=e;let i=(n||[]).reduce(((e,t)=>e+("PART"===t.type?1:0)),0);return i+=t&&t.length?t.length:0,i},h_=(e,t)=>{if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;const n=u_(t).length>0;return n&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:n&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0},f_=function(e,t,n){if(void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;const i=function(e,t){let n=0,i=t-e.mediaSequence,r=e.segments[i];if(r){if(void 0!==r.start)return{result:r.start,precise:!0};if(void 0!==r.end)return{result:r.end-r.duration,precise:!0}}for(;i--;){if(r=e.segments[i],void 0!==r.end)return{result:n+r.end,precise:!0};if(n+=l_(e,r),void 0!==r.start)return{result:n+r.start,precise:!0}}return{result:n,precise:!1}}(e,t);if(i.precise)return i.result;const r=function(e,t){let n,i=0,r=t-e.mediaSequence;for(;r<e.segments.length;r++){if(n=e.segments[r],void 0!==n.start)return{result:n.start-i,precise:!0};if(i+=l_(e,n),void 0!==n.end)return{result:n.end-i,precise:!0}}return{result:-1,precise:!1}}(e,t);return r.precise?r.result:i.result+n},g_=function(e,t,n){if(!e)return 0;if("number"!=typeof n&&(n=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return Mp()[1/0]}return f_(e,t,n)},m_=function({defaultDuration:e,durationList:t,startIndex:n,endIndex:i}){let r=0;if(n>i&&([n,i]=[i,n]),n<0){for(let t=n;t<Math.min(0,i);t++)r+=e;n=0}for(let e=n;e<i;e++)r+=t[e].duration;return r},y_=function(e,t,n,i){if(!e||!e.segments)return null;if(e.endList)return g_(e);if(null===t)return null;t=t||0;let r=f_(e,e.mediaSequence+e.segments.length,t);return n&&(r-=i="number"==typeof i?i:h_(null,e)),Math.max(0,r)},v_=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},b_=function(e){return e.excludeUntil&&e.excludeUntil===1/0},__=function(e){const t=v_(e);return!e.disabled&&!t},w_=function(e,t){return t.attributes&&t.attributes[e]},T_=(e,t)=>{if(1===e.playlists.length)return!0;const n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter((e=>!!__(e)&&(e.attributes.BANDWIDTH||0)<n)).length},I_=(e,t)=>!(!e&&!t||!e&&t||e&&!t||e!==t&&(!e.id||!t.id||e.id!==t.id)&&(!e.resolvedUri||!t.resolvedUri||e.resolvedUri!==t.resolvedUri)&&(!e.uri||!t.uri||e.uri!==t.uri)),S_=function(e,t){const n=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{};let i=!1;for(const e in n){for(const r in n[e])if(i=t(n[e][r]),i)break;if(i)break}return!!i},k_=e=>{if(!e||!e.playlists||!e.playlists.length)return S_(e,(e=>e.playlists&&e.playlists.length||e.uri));for(let t=0;t<e.playlists.length;t++){const n=e.playlists[t],i=n.attributes&&n.attributes.CODECS;if((!i||!i.split(",").every((e=>hh(e))))&&!S_(e,(e=>I_(n,e))))return!1}return!0};var C_={liveEdgeDelay:h_,duration:g_,seekable:function(e,t,n){const i=t||0,r=y_(e,t,!0,n);return null===r?Qb():Qb(i,r)},getMediaInfoForTime:function({playlist:e,currentTime:t,startingSegmentIndex:n,startingPartIndex:i,startTime:r,exactManifestTimings:s}){let o=t-r;const a=c_(e);let d=0;for(let e=0;e<a.length;e++){const t=a[e];if(n===t.segmentIndex&&("number"!=typeof i||"number"!=typeof t.partIndex||i===t.partIndex)){d=e;break}}if(o<0){if(d>0)for(let t=d-1;t>=0;t--){const n=a[t];if(o+=n.duration,s){if(o<0)continue}else if(o+e_<=0)continue;return{partIndex:n.partIndex,segmentIndex:n.segmentIndex,startTime:r-m_({defaultDuration:e.targetDuration,durationList:a,startIndex:d,endIndex:t})}}return{partIndex:a[0]&&a[0].partIndex||null,segmentIndex:a[0]&&a[0].segmentIndex||0,startTime:t}}if(d<0){for(let n=d;n<0;n++)if(o-=e.targetDuration,o<0)return{partIndex:a[0]&&a[0].partIndex||null,segmentIndex:a[0]&&a[0].segmentIndex||0,startTime:t};d=0}for(let t=d;t<a.length;t++){const n=a[t];if(o-=n.duration,s){if(o>0)continue}else if(o-e_>=0)continue;return{partIndex:n.partIndex,segmentIndex:n.segmentIndex,startTime:r+m_({defaultDuration:e.targetDuration,durationList:a,startIndex:d,endIndex:t})}}return{segmentIndex:a[a.length-1].segmentIndex,partIndex:a[a.length-1].partIndex,startTime:t}},isEnabled:__,isDisabled:function(e){return e.disabled},isExcluded:v_,isIncompatible:b_,playlistEnd:y_,isAes:function(e){for(let t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},hasAttribute:w_,estimateSegmentRequestTime:function(e,t,n,i=0){return w_("BANDWIDTH",n)?(e*n.attributes.BANDWIDTH-8*i)/t:NaN},isLowestEnabledRendition:T_,isAudioOnly:k_,playlistMatch:I_,segmentDurationWithParts:l_};const{log:E_}=$b,A_=(e,t)=>`${e}-${t}`,P_=(e,t,n)=>`placeholder-uri-${e}-${t}-${n}`,x_=(e,t)=>{e.mediaGroups&&["AUDIO","SUBTITLES"].forEach((n=>{if(e.mediaGroups[n])for(const i in e.mediaGroups[n])for(const r in e.mediaGroups[n][i]){const s=e.mediaGroups[n][i][r];t(s,n,i,r)}}))},D_=({playlist:e,uri:t,id:n})=>{e.id=n,e.playlistErrors_=0,t&&(e.uri=t),e.attributes=e.attributes||{}},O_=(e,t,n=P_)=>{e.uri=t;for(let t=0;t<e.playlists.length;t++)if(!e.playlists[t].uri){const n=`placeholder-uri-${t}`;e.playlists[t].uri=n}const i=k_(e);x_(e,((t,r,s,o)=>{if(!t.playlists||!t.playlists.length){if(i&&"AUDIO"===r&&!t.uri)for(let t=0;t<e.playlists.length;t++){const n=e.playlists[t];if(n.attributes&&n.attributes.AUDIO&&n.attributes.AUDIO===s)return}t.playlists=[Gp({},t)]}t.playlists.forEach((function(t,i){const a=n(r,s,o,t),d=A_(i,a);t.uri?t.resolvedUri=t.resolvedUri||Xb(e.uri,t.uri):(t.uri=0===i?a:d,t.resolvedUri=t.uri),t.id=t.id||d,t.attributes=t.attributes||{},e.playlists[t.id]=t,e.playlists[t.uri]=t}))})),(e=>{let t=e.playlists.length;for(;t--;){const n=e.playlists[t];D_({playlist:n,id:A_(t,n.uri)}),n.resolvedUri=Xb(e.uri,n.uri),e.playlists[n.id]=n,e.playlists[n.uri]=n,n.attributes.BANDWIDTH||E_.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}})(e),(e=>{x_(e,(t=>{t.uri&&(t.resolvedUri=Xb(e.uri,t.uri))}))})(e)},{EventTarget:R_}=$b,N_=(e,t)=>{if(!e)return t;const n=Yb(e,t);if(e.preloadHints&&!t.preloadHints&&delete n.preloadHints,e.parts&&!t.parts)delete n.parts;else if(e.parts&&t.parts)for(let i=0;i<t.parts.length;i++)e.parts&&e.parts[i]&&(n.parts[i]=Yb(e.parts[i],t.parts[i]));return!e.skipped&&t.skipped&&(n.skipped=!1),e.preload&&!t.preload&&(n.preload=!1),n},M_=(e,t)=>{!e.resolvedUri&&e.uri&&(e.resolvedUri=Xb(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=Xb(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=Xb(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=Xb(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach((e=>{e.resolvedUri||(e.resolvedUri=Xb(t,e.uri))})),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach((e=>{e.resolvedUri||(e.resolvedUri=Xb(t,e.uri))}))},L_=function(e){const t=e.segments||[],n=e.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints)for(let e=0;e<n.preloadHints.length;e++)if("MAP"===n.preloadHints[e].type)return t;n.duration=e.targetDuration,n.preload=!0,t.push(n)}return t},U_=(e,t)=>e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment,j_=(e,t,n=U_)=>{const i=Yb(e,{}),r=i.playlists[t.id];if(!r)return null;if(n(r,t))return null;t.segments=L_(t);const s=Yb(r,t);if(s.preloadSegment&&!t.preloadSegment&&delete s.preloadSegment,r.segments){if(t.skip){t.segments=t.segments||[];for(let e=0;e<t.skip.skippedSegments;e++)t.segments.unshift({skipped:!0})}s.segments=((e,t,n)=>{const i=e.slice(),r=t.slice();n=n||0;const s=[];let o;for(let e=0;e<r.length;e++){const t=i[e+n],a=r[e];t?(o=t.map||o,s.push(N_(t,a))):(o&&!a.map&&(a.map=o),s.push(a))}return s})(r.segments,t.segments,t.mediaSequence-r.mediaSequence)}s.segments.forEach((e=>{M_(e,s.resolvedUri)}));for(let e=0;e<i.playlists.length;e++)i.playlists[e].id===t.id&&(i.playlists[e]=s);return i.playlists[t.id]=s,i.playlists[t.uri]=s,x_(e,((e,n,i,r)=>{if(e.playlists)for(let n=0;n<e.playlists.length;n++)t.id===e.playlists[n].id&&(e.playlists[n]=s)})),i},B_=(e,t)=>{const n=e.segments||[],i=n[n.length-1],r=i&&i.parts&&i.parts[i.parts.length-1],s=r&&r.duration||i&&i.duration;return t&&s?1e3*s:500*(e.partTargetDuration||e.targetDuration||10)};class q_ extends R_{constructor(e,t,n={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=Jb("PlaylistLoader");const{withCredentials:i=!1}=n;this.src=e,this.vhs_=t,this.withCredentials=i;const r=t.options_;this.customTagParsers=r&&r.customTagParsers||[],this.customTagMappers=r&&r.customTagMappers||[],this.llhls=r&&r.llhls,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_)}handleMediaupdatetimeout_(){if("HAVE_METADATA"!==this.state)return;const e=this.media();let t=Xb(this.main.uri,e.uri);this.llhls&&(t=((e,t)=>{if(t.endList||!t.serverControl)return e;const n={};if(t.serverControl.canBlockReload){const{preloadSegment:e}=t;let i=t.mediaSequence+t.segments.length;if(e){const r=e.parts||[],s=p_(t)-1;s>-1&&s!==r.length-1&&(n._HLS_part=s),(s>-1||r.length)&&i--}n._HLS_msn=i}if(t.serverControl&&t.serverControl.canSkipUntil&&(n._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){const t=new(Mp().URL)(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach((function(e){n.hasOwnProperty(e)&&t.searchParams.set(e,n[e])})),e=t.toString()}return e})(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials},((e,t)=>{if(this.request)return e?this.playlistRequestError(this.request,this.media(),"HAVE_METADATA"):void this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}))}playlistRequestError(e,t,n){const{uri:i,id:r}=t;this.request=null,n&&(this.state=n),this.error={playlist:this.main.playlists[r],status:e.status,message:`HLS playlist request error at URL: ${i}.`,responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")}parseManifest_({url:e,manifestString:t}){return(({onwarn:e,oninfo:t,manifestString:n,customTagParsers:i=[],customTagMappers:r=[],llhls:s})=>{const o=new sh;e&&o.on("warn",e),t&&o.on("info",t),i.forEach((e=>o.addParser(e))),r.forEach((e=>o.addTagMapper(e))),o.push(n),o.end();const a=o.manifest;if(s||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach((function(e){a.hasOwnProperty(e)&&delete a[e]})),a.segments&&a.segments.forEach((function(e){["parts","preloadHints"].forEach((function(t){e.hasOwnProperty(t)&&delete e[t]}))}))),!a.targetDuration){let t=10;a.segments&&a.segments.length&&(t=a.segments.reduce(((e,t)=>Math.max(e,t.duration)),0)),e&&e(`manifest has no targetDuration defaulting to ${t}`),a.targetDuration=t}const d=u_(a);if(d.length&&!a.partTargetDuration){const t=d.reduce(((e,t)=>Math.max(e,t.duration)),0);e&&(e(`manifest has no partTargetDuration defaulting to ${t}`),E_.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),a.partTargetDuration=t}return a})({onwarn:({message:t})=>this.logger_(`m3u8-parser warn for ${e}: ${t}`),oninfo:({message:t})=>this.logger_(`m3u8-parser info for ${e}: ${t}`),manifestString:t,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}haveMetadata({playlistString:e,playlistObject:t,url:n,id:i}){this.request=null,this.state="HAVE_METADATA";const r=t||this.parseManifest_({url:n,manifestString:e});r.lastRequest=Date.now(),D_({playlist:r,uri:n,id:i});const s=j_(this.main,r);this.targetDuration=r.partTargetDuration||r.targetDuration,this.pendingMedia_=null,s?(this.main=s,this.media_=this.main.playlists[i]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(B_(this.media(),!!s)),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),Mp().clearTimeout(this.mediaUpdateTimeout),Mp().clearTimeout(this.finalRenditionTimeout),this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,t){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(Mp().clearTimeout(this.finalRenditionTimeout),t){const t=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;return void(this.finalRenditionTimeout=Mp().setTimeout(this.media.bind(this,e,!1),t))}const n=this.state,i=!this.media_||e.id!==this.media_.id,r=this.main.playlists[e.id];if(r&&r.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(i&&(this.trigger("mediachanging"),"HAVE_MAIN_MANIFEST"===n?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(B_(e,!0)),i){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},((t,i)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=Kb(e.resolvedUri,i),t)return this.playlistRequestError(this.request,e,n);this.haveMetadata({playlistString:i.responseText,url:e.uri,id:e.id}),"HAVE_MAIN_MANIFEST"===n?this.trigger("loadedmetadata"):this.trigger("mediachange")}}))}}pause(){this.mediaUpdateTimeout&&(Mp().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(Mp().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const t=this.media();if(e){const e=t?(t.partTargetDuration||t.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=Mp().setTimeout((()=>{this.mediaUpdateTimeout=null,this.load()}),e)}else this.started?t&&!t.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(Mp().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=Mp().setTimeout((()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)}),e))}start(){if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=Mp().location.href),this.src.resolvedUri=this.src.uri,void setTimeout((()=>{this.setupInitialPlaylist(this.src)}),0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},((e,t)=>{if(!this.request)return;if(this.request=null,e)return this.error={status:t.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:t.responseText,code:2},"HAVE_NOTHING"===this.state&&(this.started=!1),this.trigger("error");this.src=Kb(this.src,t);const n=this.parseManifest_({manifestString:t.responseText,url:this.src});this.setupInitialPlaylist(n)}))}srcUri(){return"string"==typeof this.src?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists)return this.main=e,O_(this.main,this.srcUri()),e.playlists.forEach((e=>{e.segments=L_(e),e.segments.forEach((t=>{M_(t,e.resolvedUri)}))})),this.trigger("loadedplaylist"),void(this.request||this.media(this.main.playlists[0]));const t=this.srcUri()||Mp().location.href;this.main=((e,t)=>{const n=A_(0,t),i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:Mp().location.href,resolvedUri:Mp().location.href,playlists:[{uri:t,id:n,resolvedUri:t,attributes:{}}]};return i.playlists[n]=i.playlists[0],i.playlists[t]=i.playlists[0],i})(0,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}}const{xhr:F_}=$b,V_=function(e,t,n,i){const r="arraybuffer"===e.responseType?e.response:e.responseText;!t&&r&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=r.byteLength||r.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),n.headers&&(e.responseHeaders=n.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),t||e.aborted||200===n.statusCode||206===n.statusCode||0===n.statusCode||(t=new Error("XHR Failed with a response of: "+(e&&(r||e.responseText)))),i(t,e)},z_=function(){const e=function e(t,n){t=Yb({timeout:45e3},t);const i=e.beforeRequest||$b.Vhs.xhr.beforeRequest,r=e._requestCallbackSet||$b.Vhs.xhr._requestCallbackSet||new Set,s=e._responseCallbackSet||$b.Vhs.xhr._responseCallbackSet;i&&"function"==typeof i&&($b.log.warn("beforeRequest is deprecated, use onRequest instead."),r.add(i));const o=!0===$b.Vhs.xhr.original?F_:$b.Vhs.xhr,a=((e,t)=>{if(!e||!e.size)return;let n=t;return e.forEach((e=>{n=e(n)})),n})(r,t);r.delete(i);const d=o(a||t,(function(e,t){return((e,t,n,i)=>{e&&e.size&&e.forEach((e=>{e(t,n,i)}))})(s,d,e,t),V_(d,e,t,n)})),l=d.abort;return d.abort=function(){return d.aborted=!0,l.apply(d,arguments)},d.uri=t.uri,d.requestTime=Date.now(),d};return e.original=!0,e},$_=function(e){const t={};return e.byterange&&(t.Range=function(e){let t;const n=e.offset;return t="bigint"==typeof e.offset||"bigint"==typeof e.length?Mp().BigInt(e.offset)+Mp().BigInt(e.length)-Mp().BigInt(1):e.offset+e.length-1,"bytes="+n+"-"+t}(e.byterange)),t},H_=function(e,t){return e.start(t)+"-"+e.end(t)},W_=function(e,t){const n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},Z_=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},G_=function(e){const t={};return Object.keys(e).forEach((n=>{const i=e[n];wh(i)?t[n]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:t[n]=i})),t},X_=function(e){const t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},K_=function(e){return e.resolvedUri},J_=e=>{const t=Array.prototype.slice.call(e),n=16;let i,r,s="";for(let e=0;e<t.length/n;e++)i=t.slice(e*n,e*n+n).map(W_).join(""),r=t.slice(e*n,e*n+n).map(Z_).join(""),s+=i+" "+r+"\n";return s};var Y_=Object.freeze({__proto__:null,createTransferableMessage:G_,initSegmentId:X_,segmentKeyId:K_,hexDump:J_,tagDump:({bytes:e})=>J_(e),textRanges:e=>{let t,n="";for(t=0;t<e.length;t++)n+=H_(e,t)+" ";return n}});const Q_=({programTime:e,playlist:t,retryCount:n=2,seekTo:i,pauseAfterSeek:r=!0,tech:s,callback:o})=>{if(!o)throw new Error("seekToProgramTime: callback must be provided");if(void 0===e||!t||!i)return o({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!t.endList&&!s.hasStarted_)return o({message:"player must be playing a live stream to start buffering"});if(!(e=>{if(!e.segments||0===e.segments.length)return!1;for(let t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0})(t))return o({message:"programDateTime tags must be provided in the manifest "+t.resolvedUri});const a=((e,t)=>{let n;try{n=new Date(e)}catch(e){return null}if(!t||!t.segments||0===t.segments.length)return null;let i=t.segments[0];if(n<i.dateTimeObject)return null;for(let e=0;e<t.segments.length-1&&(i=t.segments[e],!(n<t.segments[e+1].dateTimeObject));e++);const r=t.segments[t.segments.length-1],s=r.dateTimeObject,o=r.videoTimingInfo?(a=r.videoTimingInfo).transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds:r.duration+.25*r.duration;var a;return n>new Date(s.getTime()+1e3*o)?null:(n>s&&(i=r),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:C_.duration(t,t.mediaSequence+t.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})})(e,t);if(!a)return o({message:`${e} was not found in the stream`});const d=a.segment,l=((e,t)=>{let n,i;try{n=new Date(e),i=new Date(t)}catch(e){}const r=n.getTime();return(i.getTime()-r)/1e3})(d.dateTimeObject,e);if("estimate"===a.type)return 0===n?o({message:`${e} is not buffered yet. Try again`}):(i(a.estimatedStart+l),void s.one("seeked",(()=>{Q_({programTime:e,playlist:t,retryCount:n-1,seekTo:i,pauseAfterSeek:r,tech:s,callback:o})})));const c=d.start+l;s.one("seeked",(()=>o(null,s.currentTime()))),r&&s.pause(),i(c)},ew=(e,t)=>{if(4===e.readyState)return t()},{EventTarget:tw}=$b,nw=function(e,t){if(!U_(e,t))return!1;if(e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx)return!1;if(e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(let n=0;n<e.segments.length;n++){const i=e.segments[n],r=t.segments[n];if(i.uri!==r.uri)return!1;if(!i.byterange&&!r.byterange)continue;const s=i.byterange,o=r.byterange;if(s&&!o||!s&&o)return!1;if(s.offset!==o.offset||s.length!==o.length)return!1}return!0},iw=(e,t,n,i)=>`placeholder-uri-${e}-${t}-${i.attributes.NAME||n}`,rw=(e,t)=>(Boolean(!e.map&&!t.map)||Boolean(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length))&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length,sw=(e,t)=>{const n={};for(const i in e){const r=e[i].sidx;if(r){const e=Hh(r);if(!t[e])break;const i=t[e].sidxInfo;rw(i,r)&&(n[e]=t[e])}}return n};class ow extends tw{constructor(e,t,n={},i){super(),this.mainPlaylistLoader_=i||this,i||(this.isMain_=!0);const{withCredentials:r=!1}=n;if(this.vhs_=t,this.withCredentials=r,this.addMetadataToTextTrack=n.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",(()=>{this.refreshXml_()})),this.on("mediaupdatetimeout",(()=>{this.refreshMedia_(this.media().id)})),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=Jb("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}requestErrored_(e,t,n){return!this.request||(this.request=null,e?(this.error="object"!=typeof e||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2}:e,n&&(this.state=n),this.trigger("error"),!0):void 0)}addSidxSegments_(e,t,n){const i=e.sidx&&Hh(e.sidx);if(!e.sidx||!i||this.mainPlaylistLoader_.sidxMapping_[i])return void(this.mediaRequest_=Mp().setTimeout((()=>n(!1)),0));const r=Kb(e.sidx.resolvedUri),s=(r,s)=>{if(this.requestErrored_(r,s,t))return;const o=this.mainPlaylistLoader_.sidxMapping_;let a;try{a=Tf()(Th(s.response).subarray(8))}catch(e){return void this.requestErrored_(e,s,t)}return o[i]={sidxInfo:e.sidx,sidx:a},qh(e,a,e.sidx.resolvedUri),n(!0)};this.request=((e,t,n)=>{let i,r=[],s=!1;const o=function(e,t,i,r){return t.abort(),s=!0,n(e,t,i,r)},a=function(e,t){if(s)return;if(e)return o(e,t,"",r);const n=t.responseText.substring(r&&r.byteLength||0,t.responseText.length);if(r=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t=t.filter((function(e){return e&&(e.byteLength||e.length)&&"string"!=typeof e})),t.length<=1)return Th(t[0]);var i=t.reduce((function(e,t,n){return e+(t.byteLength||t.length)}),0),r=new Uint8Array(i),s=0;return t.forEach((function(e){e=Th(e),r.set(e,s),s+=e.byteLength})),r}(r,Ch(n,!0)),i=i||Sf(r),r.length<10||i&&r.length<i+2)return ew(t,(()=>o(e,t,"",r)));const a=zf(r);return"ts"===a&&r.length<188||!a&&r.length<376?ew(t,(()=>o(e,t,"",r))):o(null,t,a,r)},d={uri:e,beforeSend(e){e.overrideMimeType("text/plain; charset=x-user-defined"),e.addEventListener("progress",(function({total:t,loaded:n}){return V_(e,null,{statusCode:e.status},a)}))}},l=t(d,(function(e,t){return V_(l,e,t,a)}));return l})(r,this.vhs_.xhr,((t,n,i,o)=>{if(t)return s(t,n);if(!i||"mp4"!==i)return s({status:n.status,message:`Unsupported ${i||"unknown"} container type for sidx segment at URL: ${r}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},n);const{offset:a,length:d}=e.sidx.byterange;if(o.length>=d+a)return s(t,{response:o.subarray(a,a+d),status:n.status,uri:n.uri});this.request=this.vhs_.xhr({uri:r,responseType:"arraybuffer",headers:$_({byterange:e.sidx.byterange})},s)}))}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},Mp().clearTimeout(this.minimumUpdatePeriodTimeout_),Mp().clearTimeout(this.mediaRequest_),Mp().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);const t=this.state;if("string"==typeof e){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const n=!this.media_||e.id!==this.media_.id;if(n&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(n&&(this.trigger("mediachanging"),this.trigger("mediachange")));n&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,t,(n=>{this.haveMetadata({startingState:t,playlist:e})})))}haveMetadata({startingState:e,playlist:t}){this.state="HAVE_METADATA",this.loadedPlaylists_[t.id]=t,this.mediaRequest_=null,this.refreshMedia_(t.id),"HAVE_MAIN_MANIFEST"===e?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),Mp().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(Mp().clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)}load(e){Mp().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const t=this.media();if(e){const e=t?t.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=Mp().setTimeout((()=>this.load()),e)}else this.started?t&&!t.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()}start(){this.started=!0,this.isMain_?this.requestMain_(((e,t)=>{this.haveMain_(),this.hasPendingRequest()||this.media_||this.media(this.mainPlaylistLoader_.main.playlists[0])})):this.mediaRequest_=Mp().setTimeout((()=>this.haveMain_()),0)}requestMain_(e){this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},((t,n)=>{if(this.requestErrored_(t,n))return void("HAVE_NOTHING"===this.state&&(this.started=!1));const i=n.responseText!==this.mainPlaylistLoader_.mainXml_;return this.mainPlaylistLoader_.mainXml_=n.responseText,n.responseHeaders&&n.responseHeaders.date?this.mainLoaded_=Date.parse(n.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=Kb(this.mainPlaylistLoader_.srcUrl,n),i?(this.handleMain_(),void this.syncClientServerClock_((()=>e(n,i)))):e(n,i)}))}syncClientServerClock_(e){const t=(n=this.mainPlaylistLoader_.mainXml_,(e=>{const t=lf(e,"UTCTiming")[0];if(!t)return null;const n=hf(t);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return n})(bf(n)));var n;return null===t?(this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()):"DIRECT"===t.method?(this.mainPlaylistLoader_.clientOffset_=t.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:Xb(this.mainPlaylistLoader_.srcUrl,t.value),method:t.method,withCredentials:this.withCredentials},((n,i)=>{if(!this.request)return;if(n)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();let r;r="HEAD"===t.method?i.responseHeaders&&i.responseHeaders.date?Date.parse(i.responseHeaders.date):this.mainLoaded_:Date.parse(i.responseText),this.mainPlaylistLoader_.clientOffset_=r-Date.now(),e()})))}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main;let t=(({mainXml:e,srcUrl:t,clientOffset:n,sidxMapping:i,previousManifest:r})=>{const s=((e,t={})=>{const n=((e,t={})=>{const{manifestUri:n="",NOW:i=Date.now(),clientOffset:r=0}=t,s=lf(e,"Period");if(!s.length)throw new Error("INVALID_NUMBER_OF_PERIOD");const o=lf(e,"Location"),a=hf(e),d=gf([n],lf(e,"BaseURL"));a.type=a.type||"static",a.sourceDuration=a.mediaPresentationDuration||0,a.NOW=i,a.clientOffset=r,o.length&&(a.locations=o.map(cf));const l=[];return s.forEach(((e,t)=>{const n=hf(e),i=l[t-1];n.start=(({attributes:e,priorPeriodAttributes:t,mpdType:n})=>"number"==typeof e.start?e.start:t&&"number"==typeof t.start&&"number"==typeof t.duration?t.start+t.duration:t||"static"!==n?null:0)({attributes:n,priorPeriodAttributes:i?i.attributes:null,mpdType:a.type}),l.push({node:e,attributes:n})})),{locations:a.locations,representationInfo:Rh(l.map(vf(a,d))),eventStream:Rh(l.map(yf))}})(bf(e),t),i=n.representationInfo.map(df);return ef({dashPlaylists:i,locations:n.locations,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest,eventStream:n.eventStream})})(e,{manifestUri:t,clientOffset:n,sidxMapping:i,previousManifest:r});return O_(s,t,iw),s})({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e});e&&(t=((e,t,n)=>{let i=!0,r=Yb(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts});for(let e=0;e<t.playlists.length;e++){const s=t.playlists[e];if(s.sidx){const e=Hh(s.sidx);n&&n[e]&&n[e].sidx&&qh(s,n[e].sidx,s.sidx.resolvedUri)}const o=j_(r,s,nw);o&&(r=o,i=!1)}return x_(t,((e,t,n,s)=>{if(e.playlists&&e.playlists.length){const o=e.playlists[0].id,a=j_(r,e.playlists[0],nw);a&&(r=a,s in r.mediaGroups[t][n]||(r.mediaGroups[t][n][s]=e),r.mediaGroups[t][n][s].playlists[0]=r.playlists[o],i=!1)}})),((e,t)=>{x_(e,((n,i,r,s)=>{s in t.mediaGroups[i][r]||delete e.mediaGroups[i][r][s]}))})(r,t),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(i=!1),i?null:r})(e,t,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=t||e;const n=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];return n&&n!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=n),(!e||t&&t.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(t),Boolean(t)}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(Mp().clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let t=e.main&&e.main.minimumUpdatePeriod;0===t&&(e.media()?t=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!=typeof t||t<=0?t<0&&this.logger_(`found invalid minimumUpdatePeriod of ${t}, not setting a timeout`):this.createMUPTimeout_(t)}createMUPTimeout_(e){const t=this.mainPlaylistLoader_;t.minimumUpdatePeriodTimeout_=Mp().setTimeout((()=>{t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)}),e)}refreshXml_(){this.requestMain_(((e,t)=>{t&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=((e,t)=>{let n=sw(e.playlists,t);return x_(e,((e,i,r,s)=>{if(e.playlists&&e.playlists.length){const i=e.playlists;n=Yb(n,sw(i,t))}})),n})(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,(e=>{this.refreshMedia_(this.media().id)})))}))}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const t=this.mainPlaylistLoader_.main.playlists,n=!this.media_||this.media_!==t[e];if(n?this.media_=t[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const e=()=>{this.media().endList||(this.mediaUpdateTimeout=Mp().setTimeout((()=>{this.trigger("mediaupdatetimeout"),e()}),B_(this.media(),Boolean(n))))};e()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const e=this.mainPlaylistLoader_.main.eventStream.map((e=>({cueTime:e.start,frames:[{data:e.messageData}]})));this.addMetadataToTextTrack("EventStream",e,this.mainPlaylistLoader_.main.duration)}}}var aw={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const dw=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},lw=function(e){return function(){const t=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(t){const n=new BlobBuilder;return n.append(e),URL.createObjectURL(n.getBlob())}}(e),n=dw(new Worker(t));n.objURL=t;const i=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(t),i.call(this)},n}},cw=function(e){return`var browserWorkerPolyFill = ${dw.toString()};\nbrowserWorkerPolyFill(self);\n`+e},uw=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},pw=cw(uw((function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:{},t=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var i;return!!e[t]&&(i=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(i,1),i>-1)},this.trigger=function(t){var n,i,r,s;if(n=e[t])if(2===arguments.length)for(r=n.length,i=0;i<r;++i)n[i].call(this,arguments[1]);else{for(s=[],i=arguments.length,i=1;i<arguments.length;++i)s.push(arguments[i]);for(r=n.length,i=0;i<r;++i)n[i].apply(this,s)}},this.dispose=function(){e={}}}};t.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},t.prototype.push=function(e){this.trigger("data",e)},t.prototype.flush=function(e){this.trigger("done",e)},t.prototype.partialFlush=function(e){this.trigger("partialdone",e)},t.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},t.prototype.reset=function(e){this.trigger("reset",e)};var n,i,r,s,o,a,d,l,c,u,p,h,f,g,m,y,v,b,_,w,T,I,S,k,C,E,A,P,x,D,O,R,N,M,L,U,j,B,q,F,V=t,z=Math.pow(2,32),$={getUint64:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getBigUint64?(t=n.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(t):t:n.getUint32(0)*z+n.getUint32(4)},MAX_UINT32:z},H=$.MAX_UINT32;!function(){var e;if(I={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in I)I.hasOwnProperty(e)&&(I[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);S=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),C=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),k=new Uint8Array([0,0,0,1]),E=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),A=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),P={video:E,audio:A},O=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),D=new Uint8Array([0,0,0,0,0,0,0,0]),R=new Uint8Array([0,0,0,0,0,0,0,0]),N=R,M=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),L=R,x=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),n=function(e){var t,n,i=[],r=0;for(t=1;t<arguments.length;t++)i.push(arguments[t]);for(t=i.length;t--;)r+=i[t].byteLength;for(n=new Uint8Array(r+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(e,4),t=0,r=8;t<i.length;t++)n.set(i[t],r),r+=i[t].byteLength;return n},i=function(){return n(I.dinf,n(I.dref,O))},r=function(e){return n(I.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},m=function(e){return n(I.hdlr,P[e])},g=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),n(I.mdhd,t)},f=function(e){return n(I.mdia,g(e),m(e.type),a(e))},o=function(e){return n(I.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},a=function(e){return n(I.minf,"video"===e.type?n(I.vmhd,x):n(I.smhd,D),i(),v(e))},d=function(e,t){for(var i=[],r=t.length;r--;)i[r]=_(t[r]);return n.apply(null,[I.moof,o(e)].concat(i))},l=function(e){for(var t=e.length,i=[];t--;)i[t]=p(e[t]);return n.apply(null,[I.moov,u(4294967295)].concat(i).concat(c(e)))},c=function(e){for(var t=e.length,i=[];t--;)i[t]=w(e[t]);return n.apply(null,[I.mvex].concat(i))},u=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return n(I.mvhd,t)},y=function(e){var t,i,r=e.samples||[],s=new Uint8Array(4+r.length);for(i=0;i<r.length;i++)t=r[i].flags,s[i+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return n(I.sdtp,s)},v=function(e){return n(I.stbl,b(e),n(I.stts,L),n(I.stsc,N),n(I.stsz,M),n(I.stco,R))},b=function(e){return n(I.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?U(e):j(e))},U=function(e){var t,i,r=e.sps||[],s=e.pps||[],o=[],a=[];for(t=0;t<r.length;t++)o.push((65280&r[t].byteLength)>>>8),o.push(255&r[t].byteLength),o=o.concat(Array.prototype.slice.call(r[t]));for(t=0;t<s.length;t++)a.push((65280&s[t].byteLength)>>>8),a.push(255&s[t].byteLength),a=a.concat(Array.prototype.slice.call(s[t]));if(i=[I.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),n(I.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([r.length],o,[s.length],a))),n(I.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var d=e.sarRatio[0],l=e.sarRatio[1];i.push(n(I.pasp,new Uint8Array([(4278190080&d)>>24,(16711680&d)>>16,(65280&d)>>8,255&d,(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l])))}return n.apply(null,i)},j=function(e){return n(I.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),r(e))},h=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return n(I.tkhd,t)},_=function(e){var t,i,r,s,o,a;return t=n(I.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),o=Math.floor(e.baseMediaDecodeTime/H),a=Math.floor(e.baseMediaDecodeTime%H),i=n(I.tfdt,new Uint8Array([1,0,0,0,o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a])),"audio"===e.type?(r=T(e,92),n(I.traf,t,i,r)):(s=y(e),r=T(e,s.length+92),n(I.traf,t,i,r,s))},p=function(e){return e.duration=e.duration||4294967295,n(I.trak,h(e),f(e))},w=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),n(I.trex,t)},F=function(e,t){var n=0,i=0,r=0,s=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(i=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(s=8)),[0,0,n|i|r|s,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},q=function(e,t){var i,r,s,o,a,d;for(t+=20+16*(o=e.samples||[]).length,s=F(o,t),(r=new Uint8Array(s.length+16*o.length)).set(s),i=s.length,d=0;d<o.length;d++)a=o[d],r[i++]=(4278190080&a.duration)>>>24,r[i++]=(16711680&a.duration)>>>16,r[i++]=(65280&a.duration)>>>8,r[i++]=255&a.duration,r[i++]=(4278190080&a.size)>>>24,r[i++]=(16711680&a.size)>>>16,r[i++]=(65280&a.size)>>>8,r[i++]=255&a.size,r[i++]=a.flags.isLeading<<2|a.flags.dependsOn,r[i++]=a.flags.isDependedOn<<6|a.flags.hasRedundancy<<4|a.flags.paddingValue<<1|a.flags.isNonSyncSample,r[i++]=61440&a.flags.degradationPriority,r[i++]=15&a.flags.degradationPriority,r[i++]=(4278190080&a.compositionTimeOffset)>>>24,r[i++]=(16711680&a.compositionTimeOffset)>>>16,r[i++]=(65280&a.compositionTimeOffset)>>>8,r[i++]=255&a.compositionTimeOffset;return n(I.trun,r)},B=function(e,t){var i,r,s,o,a,d;for(t+=20+8*(o=e.samples||[]).length,s=F(o,t),(i=new Uint8Array(s.length+8*o.length)).set(s),r=s.length,d=0;d<o.length;d++)a=o[d],i[r++]=(4278190080&a.duration)>>>24,i[r++]=(16711680&a.duration)>>>16,i[r++]=(65280&a.duration)>>>8,i[r++]=255&a.duration,i[r++]=(4278190080&a.size)>>>24,i[r++]=(16711680&a.size)>>>16,i[r++]=(65280&a.size)>>>8,i[r++]=255&a.size;return n(I.trun,i)},T=function(e,t){return"audio"===e.type?B(e,t):q(e,t)};var W,Z,G,X,K,J,Y,Q,ee={ftyp:s=function(){return n(I.ftyp,S,k,S,C)},mdat:function(e){return n(I.mdat,e)},moof:d,moov:l,initSegment:function(e){var t,n=s(),i=l(e);return(t=new Uint8Array(n.byteLength+i.byteLength)).set(n),t.set(i,n.byteLength),t}},te=function(e,t){var n={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n},ne={groupNalsIntoFrames:function(e){var t,n,i=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,i.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(i.length&&(i.duration=n.dts-i.dts,r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i)),(i=[n]).byteLength=n.data.byteLength,i.pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(i.keyFrame=!0),i.duration=n.dts-i.dts,i.byteLength+=n.data.byteLength,i.push(n));return r.length&&(!i.duration||i.duration<=0)&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i),r},groupFramesIntoGops:function(e){var t,n,i=[],r=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(i.length&&(r.push(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration),(i=[n]).nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return r.length&&i.duration<=0&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration,r.push(i),r},extendFirstKeyFrame:function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},generateSampleTable:function(e,t){var n,i,r,s,o,a=t||0,d=[];for(n=0;n<e.length;n++)for(s=e[n],i=0;i<s.length;i++)o=s[i],a+=(r=te(o,a)).size,d.push(r);return d},concatenateNalData:function(e){var t,n,i,r,s,o,a=0,d=e.byteLength,l=e.nalCount,c=new Uint8Array(d+4*l),u=new DataView(c.buffer);for(t=0;t<e.length;t++)for(r=e[t],n=0;n<r.length;n++)for(s=r[n],i=0;i<s.length;i++)o=s[i],u.setUint32(a,o.data.byteLength),a+=4,c.set(o.data,a),a+=o.data.byteLength;return c},generateSampleTableForFrame:function(e,t){var n,i=[];return n=te(e,t||0),i.push(n),i},concatenateNalDataForFrame:function(e){var t,n,i=0,r=e.byteLength,s=e.length,o=new Uint8Array(r+4*s),a=new DataView(o.buffer);for(t=0;t<e.length;t++)n=e[t],a.setUint32(i,n.data.byteLength),i+=4,o.set(n.data,i),i+=n.data.byteLength;return o}},ie=[33,16,5,32,164,27],re=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],se=function(e){for(var t=[];e--;)t.push(0);return t},oe=9e4;J=function(e,t){return Z(K(e,t))},Y=function(e,t){return G(X(e),t)},Q=function(e,t,n){return X(n?e:e-t)};var ae={ONE_SECOND_IN_TS:oe,secondsToVideoTs:Z=function(e){return e*oe},secondsToAudioTs:G=function(e,t){return e*t},videoTsToSeconds:X=function(e){return e/oe},audioTsToSeconds:K=function(e,t){return e/t},audioTsToVideoTs:J,videoTsToAudioTs:Y,metadataTsToSeconds:Q},de=ae,le={prefixWithSilence:function(e,t,n,i){var r,s,o,a,d,l=0,c=0,u=0;if(t.length&&(r=de.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),s=Math.ceil(de.ONE_SECOND_IN_TS/(e.samplerate/1024)),n&&i&&(l=r-Math.max(n,i),u=(c=Math.floor(l/s))*s),!(c<1||u>de.ONE_SECOND_IN_TS/2))){for((o=function(){if(!W){var e={96e3:[ie,[227,64],se(154),[56]],88200:[ie,[231],se(170),[56]],64e3:[ie,[248,192],se(240),[56]],48e3:[ie,[255,192],se(268),[55,148,128],se(54),[112]],44100:[ie,[255,192],se(268),[55,163,128],se(84),[112]],32e3:[ie,[255,192],se(268),[55,234],se(226),[112]],24e3:[ie,[255,192],se(268),[55,255,128],se(268),[111,112],se(126),[224]],16e3:[ie,[255,192],se(268),[55,255,128],se(268),[111,255],se(269),[223,108],se(195),[1,192]],12e3:[re,se(268),[3,127,248],se(268),[6,255,240],se(268),[13,255,224],se(268),[27,253,128],se(259),[56]],11025:[re,se(268),[3,127,248],se(268),[6,255,240],se(268),[13,255,224],se(268),[27,255,192],se(268),[55,175,128],se(108),[112]],8e3:[re,se(268),[3,121,16],se(47),[7]]};t=e,W=Object.keys(t).reduce((function(e,n){return e[n]=new Uint8Array(t[n].reduce((function(e,t){return e.concat(t)}),[])),e}),{})}var t;return W}()[e.samplerate])||(o=t[0].data),a=0;a<c;a++)d=t[0],t.splice(0,0,{data:o,dts:d.dts-s,pts:d.pts-s});return e.baseMediaDecodeTime-=Math.floor(de.videoTsToAudioTs(u,e.samplerate)),u}},trimAdtsFramesByEarliestDts:function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter((function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)})))},generateSampleTable:function(e){var t,n,i=[];for(t=0;t<e.length;t++)n=e[t],i.push({size:n.data.byteLength,duration:1024});return i},concatenateFrameData:function(e){var t,n,i=0,r=new Uint8Array(function(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t].data.byteLength;return n}(e));for(t=0;t<e.length;t++)n=e[t],r.set(n.data,i),i+=n.data.byteLength;return r}},ce=ae.ONE_SECOND_IN_TS,ue={clearDtsInfo:function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(e,t){var n,i=e.minSegmentDts;return t||(i-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=i,n=Math.max(0,n),"audio"===e.type&&(n*=e.samplerate/ce,n=Math.floor(n)),n},collectDtsInfo:function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))}},pe={parseSei:function(e){for(var t=0,n={payloadType:-1,payloadSize:0},i=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)i+=255,t++;for(i+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!n.payload&&4===i){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){n.payloadType=i,n.payloadSize=r,n.payload=e.subarray(t,t+r);break}n.payload=void 0}t+=r,i=0,r=0}return n},parseUserData:function(e){return 181!==e.payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},parseCaptionPackets:function(e,t){var n,i,r,s,o=[];if(!(64&t[0]))return o;for(i=31&t[0],n=0;n<i;n++)s={type:3&t[2+(r=3*n)],pts:e},4&t[r+2]&&(s.ccData=t[r+3]<<8|t[r+4],o.push(s));return o},discardEmulationPreventionBytes:function(e){for(var t,n,i=e.byteLength,r=[],s=1;s<i-2;)0===e[s]&&0===e[s+1]&&3===e[s+2]?(r.push(s+2),s+=2):s++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var o=0;for(s=0;s<t;o++,s++)o===r[0]&&(o++,r.shift()),n[s]=e[o];return n},USER_DATA_REGISTERED_ITU_T_T35:4},he=V,fe=pe,ge=function(e){e=e||{},ge.prototype.init.call(this),this.parse708captions_="boolean"!=typeof e.parse708captions||e.parse708captions,this.captionPackets_=[],this.ccStreams_=[new ke(0,0),new ke(0,1),new ke(1,0),new ke(1,1)],this.parse708captions_&&(this.cc708Stream_=new _e({captionServices:e.captionServices})),this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))}),this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};ge.prototype=new he,ge.prototype.push=function(e){var t,n,i;if("sei_rbsp"===e.nalUnitType&&(t=fe.parseSei(e.escapedRBSP)).payload&&t.payloadType===fe.USER_DATA_REGISTERED_ITU_T_T35&&(n=fe.parseUserData(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));i=fe.parseCaptionPackets(e.pts,n),this.captionPackets_=this.captionPackets_.concat(i),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},ge.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return"flush"===e?t.flush():t.partialFlush()}),this)},ge.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2?this.dispatchCea608Packet(e):this.dispatchCea708Packet(e)}),this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},ge.prototype.flush=function(){return this.flushStream("flush")},ge.prototype.partialFlush=function(){return this.flushStream("partialFlush")},ge.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},ge.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},ge.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},ge.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},ge.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)},ge.prototype.dispatchCea708Packet=function(e){this.parse708captions_&&this.cc708Stream_.push(e)};var me={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},ye=function(e){return 32<=e&&e<=127||160<=e&&e<=255},ve=function(e){this.windowNum=e,this.reset()};ve.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},ve.prototype.getText=function(){return this.rows.join("\n")},ve.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},ve.prototype.newLine=function(e){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(e),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},ve.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},ve.prototype.addText=function(e){this.rows[this.rowIdx]+=e},ve.prototype.backspace=function(){if(!this.isEmpty()){var e=this.rows[this.rowIdx];this.rows[this.rowIdx]=e.substr(0,e.length-1)}};var be=function(e,t,n){this.serviceNum=e,this.text="",this.currentWindow=new ve(-1),this.windows=[],this.stream=n,"string"==typeof t&&this.createTextDecoder(t)};be.prototype.init=function(e,t){this.startPts=e;for(var n=0;n<8;n++)this.windows[n]=new ve(n),"function"==typeof t&&(this.windows[n].beforeRowOverflow=t)},be.prototype.setCurrentWindow=function(e){this.currentWindow=this.windows[e]},be.prototype.createTextDecoder=function(e){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(e)}catch(t){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+e+" encoding. "+t})}};var _e=function(e){e=e||{},_e.prototype.init.call(this);var t,n=this,i=e.captionServices||{},r={};Object.keys(i).forEach((e=>{t=i[e],/^SERVICE/.test(e)&&(r[e]=t.encoding)})),this.serviceEncodings=r,this.current708Packet=null,this.services={},this.push=function(e){3===e.type?(n.new708Packet(),n.add708Bytes(e)):(null===n.current708Packet&&n.new708Packet(),n.add708Bytes(e))}};_e.prototype=new he,_e.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},_e.prototype.add708Bytes=function(e){var t=e.ccData,n=t>>>8,i=255&t;this.current708Packet.ptsVals.push(e.pts),this.current708Packet.data.push(n),this.current708Packet.data.push(i)},_e.prototype.push708Packet=function(){var e=this.current708Packet,t=e.data,n=null,i=null,r=0,s=t[r++];for(e.seq=s>>6,e.sizeCode=63&s;r<t.length;r++)i=31&(s=t[r++]),7==(n=s>>5)&&i>0&&(n=s=t[r++]),this.pushServiceBlock(n,r,i),i>0&&(r+=i-1)},_e.prototype.pushServiceBlock=function(e,t,n){var i,r=t,s=this.current708Packet.data,o=this.services[e];for(o||(o=this.initService(e,r));r<t+n&&r<s.length;r++)i=s[r],ye(i)?r=this.handleText(r,o):24===i?r=this.multiByteCharacter(r,o):16===i?r=this.extendedCommands(r,o):128<=i&&i<=135?r=this.setCurrentWindow(r,o):152<=i&&i<=159?r=this.defineWindow(r,o):136===i?r=this.clearWindows(r,o):140===i?r=this.deleteWindows(r,o):137===i?r=this.displayWindows(r,o):138===i?r=this.hideWindows(r,o):139===i?r=this.toggleWindows(r,o):151===i?r=this.setWindowAttributes(r,o):144===i?r=this.setPenAttributes(r,o):145===i?r=this.setPenColor(r,o):146===i?r=this.setPenLocation(r,o):143===i?o=this.reset(r,o):8===i?o.currentWindow.backspace():12===i?o.currentWindow.clearText():13===i?o.currentWindow.pendingNewLine=!0:14===i?o.currentWindow.clearText():141===i&&r++},_e.prototype.extendedCommands=function(e,t){var n=this.current708Packet.data[++e];return ye(n)&&(e=this.handleText(e,t,{isExtended:!0})),e},_e.prototype.getPts=function(e){return this.current708Packet.ptsVals[Math.floor(e/2)]},_e.prototype.initService=function(e,t){var n,i,r=this;return(n="SERVICE"+e)in this.serviceEncodings&&(i=this.serviceEncodings[n]),this.services[e]=new be(e,i,r),this.services[e].init(this.getPts(t),(function(t){r.flushDisplayed(t,r.services[e])})),this.services[e]},_e.prototype.handleText=function(e,t,n){var i,r,s,o,a=n&&n.isExtended,d=n&&n.isMultiByte,l=this.current708Packet.data,c=a?4096:0,u=l[e],p=l[e+1],h=t.currentWindow;return t.textDecoder_&&!a?(d?(r=[u,p],e++):r=[u],i=t.textDecoder_.decode(new Uint8Array(r))):(o=me[s=c|u]||s,i=4096&s&&s===o?"":String.fromCharCode(o)),h.pendingNewLine&&!h.isEmpty()&&h.newLine(this.getPts(e)),h.pendingNewLine=!1,h.addText(i),e},_e.prototype.multiByteCharacter=function(e,t){var n=this.current708Packet.data,i=n[e+1],r=n[e+2];return ye(i)&&ye(r)&&(e=this.handleText(++e,t,{isMultiByte:!0})),e},_e.prototype.setCurrentWindow=function(e,t){var n=7&this.current708Packet.data[e];return t.setCurrentWindow(n),e},_e.prototype.defineWindow=function(e,t){var n=this.current708Packet.data,i=n[e],r=7&i;t.setCurrentWindow(r);var s=t.currentWindow;return i=n[++e],s.visible=(32&i)>>5,s.rowLock=(16&i)>>4,s.columnLock=(8&i)>>3,s.priority=7&i,i=n[++e],s.relativePositioning=(128&i)>>7,s.anchorVertical=127&i,i=n[++e],s.anchorHorizontal=i,i=n[++e],s.anchorPoint=(240&i)>>4,s.rowCount=15&i,i=n[++e],s.columnCount=63&i,i=n[++e],s.windowStyle=(56&i)>>3,s.penStyle=7&i,s.virtualRowCount=s.rowCount+1,e},_e.prototype.setWindowAttributes=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.winAttr;return i=n[++e],r.fillOpacity=(192&i)>>6,r.fillRed=(48&i)>>4,r.fillGreen=(12&i)>>2,r.fillBlue=3&i,i=n[++e],r.borderType=(192&i)>>6,r.borderRed=(48&i)>>4,r.borderGreen=(12&i)>>2,r.borderBlue=3&i,i=n[++e],r.borderType+=(128&i)>>5,r.wordWrap=(64&i)>>6,r.printDirection=(48&i)>>4,r.scrollDirection=(12&i)>>2,r.justify=3&i,i=n[++e],r.effectSpeed=(240&i)>>4,r.effectDirection=(12&i)>>2,r.displayEffect=3&i,e},_e.prototype.flushDisplayed=function(e,t){for(var n=[],i=0;i<8;i++)t.windows[i].visible&&!t.windows[i].isEmpty()&&n.push(t.windows[i].getText());t.endPts=e,t.text=n.join("\n\n"),this.pushCaption(t),t.startPts=e},_e.prototype.pushCaption=function(e){""!==e.text&&(this.trigger("data",{startPts:e.startPts,endPts:e.endPts,text:e.text,stream:"cc708_"+e.serviceNum}),e.text="",e.startPts=e.endPts)},_e.prototype.displayWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible=1);return e},_e.prototype.hideWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible=0);return e},_e.prototype.toggleWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible^=1);return e},_e.prototype.clearWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&t.windows[r].clearText();return e},_e.prototype.deleteWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&t.windows[r].reset();return e},_e.prototype.setPenAttributes=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penAttr;return i=n[++e],r.textTag=(240&i)>>4,r.offset=(12&i)>>2,r.penSize=3&i,i=n[++e],r.italics=(128&i)>>7,r.underline=(64&i)>>6,r.edgeType=(56&i)>>3,r.fontStyle=7&i,e},_e.prototype.setPenColor=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penColor;return i=n[++e],r.fgOpacity=(192&i)>>6,r.fgRed=(48&i)>>4,r.fgGreen=(12&i)>>2,r.fgBlue=3&i,i=n[++e],r.bgOpacity=(192&i)>>6,r.bgRed=(48&i)>>4,r.bgGreen=(12&i)>>2,r.bgBlue=3&i,i=n[++e],r.edgeRed=(48&i)>>4,r.edgeGreen=(12&i)>>2,r.edgeBlue=3&i,e},_e.prototype.setPenLocation=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penLoc;return t.currentWindow.pendingNewLine=!0,i=n[++e],r.row=15&i,i=n[++e],r.column=63&i,e},_e.prototype.reset=function(e,t){var n=this.getPts(e);return this.flushDisplayed(n,t),this.initService(t.serviceNum,e)};var we={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Te=function(e){return null===e?"":(e=we[e]||e,String.fromCharCode(e))},Ie=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Se=function(){for(var e=[],t=15;t--;)e.push("");return e},ke=function(e,t){ke.prototype.init.call(this),this.field_=e||0,this.dataChannel_=t||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,i,r,s;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),i=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=Se();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Se();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=Se()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(i,r))s=Te((i=(3&i)<<8)|r),this[this.mode_](e.pts,s),this.column_++;else if(this.isExtCharacter(i,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),s=Te((i=(3&i)<<8)|r),this[this.mode_](e.pts,s),this.column_++;else if(this.isMidRowCode(i,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&r)&&this.addFormatting(e.pts,["i"]),1==(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(i,r))this.column_+=3&r;else if(this.isPAC(i,r)){var o=Ie.indexOf(7968&t);"rollUp"===this.mode_&&(o-this.rollUpRows_+1<0&&(o=this.rollUpRows_-1),this.setRollUp(e.pts,o)),o!==this.row_&&(this.clearFormatting(e.pts),this.row_=o),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(i)&&(0===r&&(r=null),s=Te(i),s+=Te(r),this[this.mode_](e.pts,s),this.column_+=s.length)}else this.lastControlCode_=null}};ke.prototype=new he,ke.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e,t){try{return e.trim()}catch(e){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+t+"."}),""}}),this).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},ke.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Se(),this.nonDisplayed_=Se(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},ke.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},ke.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},ke.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},ke.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},ke.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},ke.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},ke.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},ke.prototype.isNormalChar=function(e){return e>=32&&e<=127},ke.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=Se(),this.displayed_=Se()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},ke.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,n)},ke.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[],this[this.mode_](e,t)}},ke.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},ke.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},ke.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},ke.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n};var Ce={CaptionStream:ge,Cea608Stream:ke,Cea708Stream:_e},Ee={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Ae=V,Pe="shared",xe=function(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=8589934592*n;return e},De=function(e){var t,n;De.prototype.init.call(this),this.type_=e||Pe,this.push=function(e){this.type_!==Pe&&e.type!==this.type_||(void 0===n&&(n=e.dts),e.dts=xe(e.dts,n),e.pts=xe(e.pts,n),t=e.dts,this.trigger("data",e))},this.flush=function(){n=t,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){n=void 0,t=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};De.prototype=new Ae;var Oe,Re={TimestampRolloverStream:De,handleRollover:xe},Ne=(e,t,n)=>{if(!e)return-1;for(var i=n;i<e.length;i++)if(e[i]===t)return i;return-1},Me=function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r},Le=function(e,t,n){return decodeURIComponent(Me(e,t,n))},Ue=function(e,t,n){return unescape(Me(e,t,n))},je=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Be={APIC:function(e){var t,n,i=1;3===e.data[0]&&((t=Ne(e.data,0,i))<0||(e.mimeType=Ue(e.data,i,t),i=t+1,e.pictureType=e.data[i],i++,(n=Ne(e.data,0,i))<0||(e.description=Le(e.data,i,n),i=n+1,"--\x3e"===e.mimeType?e.url=Ue(e.data,i,e.data.length):e.pictureData=e.data.subarray(i,e.data.length))))},"T*":function(e){3===e.data[0]&&(e.value=Le(e.data,1,e.data.length).replace(/\0*$/,""),e.values=e.value.split("\0"))},TXXX:function(e){var t;3===e.data[0]&&-1!==(t=Ne(e.data,0,1))&&(e.description=Le(e.data,1,t),e.value=Le(e.data,t+1,e.data.length).replace(/\0*$/,""),e.data=e.value)},"W*":function(e){e.url=Ue(e.data,0,e.data.length).replace(/\0.*$/,"")},WXXX:function(e){var t;3===e.data[0]&&-1!==(t=Ne(e.data,0,1))&&(e.description=Le(e.data,1,t),e.url=Ue(e.data,t+1,e.data.length).replace(/\0.*$/,""))},PRIV:function(e){var t;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=Ue(e.data,0,t);break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}},qe={parseId3Frames:function(e){var t,n=10,i=0,r=[];if(!(e.length<10||e[0]!=="I".charCodeAt(0)||e[1]!=="D".charCodeAt(0)||e[2]!=="3".charCodeAt(0))){i=je(e.subarray(6,10)),i+=10,64&e[5]&&(n+=4,n+=je(e.subarray(10,14)),i-=je(e.subarray(16,20)));do{if((t=je(e.subarray(n+4,n+8)))<1)break;var s={id:String.fromCharCode(e[n],e[n+1],e[n+2],e[n+3]),data:e.subarray(n+10,n+t+10)};s.key=s.id,Be[s.id]?Be[s.id](s):"T"===s.id[0]?Be["T*"](s):"W"===s.id[0]&&Be["W*"](s),r.push(s),n+=10,n+=t}while(n<i);return r}},parseSyncSafeInteger:je,frameParsers:Be},Fe=Ee,Ve=qe;(Oe=function(e){var t,n={descriptor:e&&e.descriptor},i=0,r=[],s=0;if(Oe.prototype.init.call(this),this.dispatchType=Fe.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(t=0;t<n.descriptor.length;t++)this.dispatchType+=("00"+n.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,o,a,d;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(s=0,r.length=0),0===r.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(r.push(e),s+=e.data.byteLength,1===r.length&&(i=Ve.parseSyncSafeInteger(e.data.subarray(6,10)),i+=10),!(s<i)){for(t={data:new Uint8Array(i),frames:[],pts:r[0].pts,dts:r[0].dts},d=0;d<i;)t.data.set(r[0].data.subarray(0,i-d),d),d+=r[0].data.byteLength,s-=r[0].data.byteLength,r.shift();n=10,64&t.data[5]&&(n+=4,n+=Ve.parseSyncSafeInteger(t.data.subarray(10,14)),i-=Ve.parseSyncSafeInteger(t.data.subarray(16,20)));do{if((o=Ve.parseSyncSafeInteger(t.data.subarray(n+4,n+8)))<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if((a={id:String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),data:t.data.subarray(n+10,n+o+10)}).key=a.id,Ve.frameParsers[a.id]?Ve.frameParsers[a.id](a):"T"===a.id[0]?Ve.frameParsers["T*"](a):"W"===a.id[0]&&Ve.frameParsers["W*"](a),"com.apple.streaming.transportStreamTimestamp"===a.owner){var l=a.data,c=(1&l[3])<<30|l[4]<<22|l[5]<<14|l[6]<<6|l[7]>>>2;c*=4,c+=3&l[7],a.timeStamp=c,void 0===t.pts&&void 0===t.dts&&(t.pts=a.timeStamp,t.dts=a.timeStamp),this.trigger("timestamp",a)}t.frames.push(a),n+=10,n+=o}while(n<i);this.trigger("data",t)}}}).prototype=new V;var ze,$e,He,We=Oe,Ze=V,Ge=Ce,Xe=Ee,Ke=Re.TimestampRolloverStream,Je=188;(ze=function(){var e=new Uint8Array(Je),t=0;ze.prototype.init.call(this),this.push=function(n){var i,r=0,s=Je;for(t?((i=new Uint8Array(n.byteLength+t)).set(e.subarray(0,t)),i.set(n,t),t=0):i=n;s<i.byteLength;)71!==i[r]||71!==i[s]?(r++,s++):(this.trigger("data",i.subarray(r,s)),r+=Je,s+=Je);r<i.byteLength&&(e.set(i.subarray(r),0),t=i.byteLength-r)},this.flush=function(){t===Je&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}}).prototype=new Ze,($e=function(){var e,t,n,i;$e.prototype.init.call(this),i=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,i){var r=0;i.payloadUnitStartIndicator&&(r+=e[r]+1),"pat"===i.type?t(e.subarray(r),i):n(e.subarray(r),i)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],i.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=i.pmtPid},n=function(e,t){var n,r;if(1&e[5]){for(i.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,r=12+((15&e[10])<<8|e[11]);r<n;){var s=e[r],o=(31&e[r+1])<<8|e[r+2];s===Xe.H264_STREAM_TYPE&&null===i.programMapTable.video?i.programMapTable.video=o:s===Xe.ADTS_STREAM_TYPE&&null===i.programMapTable.audio?i.programMapTable.audio=o:s===Xe.METADATA_STREAM_TYPE&&(i.programMapTable["timed-metadata"][o]=s),r+=5+((15&e[r+3])<<8|e[r+4])}t.programMapTable=i.programMapTable}},this.push=function(t){var n={},i=4;if(n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],(48&t[3])>>>4>1&&(i+=t[i]+1),0===n.pid)n.type="pat",e(t.subarray(i),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",e(t.subarray(i),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,i,n]):this.processPes_(t,i,n)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=Xe.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=Xe.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}}).prototype=new Ze,$e.STREAM_TYPES={h264:27,adts:15},He=function(){var e,t=this,n=!1,i={data:[],size:0},r={data:[],size:0},s={data:[],size:0},o=function(e,n,i){var r,s,o=new Uint8Array(e.size),a={type:n},d=0,l=0;if(e.data.length&&!(e.size<9)){for(a.trackId=e.data[0].pid,d=0;d<e.data.length;d++)s=e.data[d],o.set(s.data,l),l+=s.data.byteLength;!function(e,t){var n;const i=e[0]<<16|e[1]<<8|e[2];t.data=new Uint8Array,1===i&&(t.packetLength=6+(e[4]<<8|e[5]),t.dataAlignmentIndicator=0!=(4&e[6]),192&(n=e[7])&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&n&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1)),t.data=e.subarray(9+e[8]))}(o,a),r="video"===n||a.packetLength<=e.size,(i||r)&&(e.size=0,e.data.length=0),r&&t.trigger("data",a)}};He.prototype.init.call(this),this.push=function(a){({pat:function(){},pes:function(){var e,t;switch(a.streamType){case Xe.H264_STREAM_TYPE:e=i,t="video";break;case Xe.ADTS_STREAM_TYPE:e=r,t="audio";break;case Xe.METADATA_STREAM_TYPE:e=s,t="timed-metadata";break;default:return}a.payloadUnitStartIndicator&&o(e,t,!0),e.data.push(a),e.size+=a.data.byteLength},pmt:function(){var i={type:"metadata",tracks:[]};null!==(e=a.programMapTable).video&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),n=!0,t.trigger("data",i)}})[a.type]()},this.reset=function(){i.size=0,i.data.length=0,r.size=0,r.data.length=0,this.trigger("reset")},this.flushStreams_=function(){o(i,"video"),o(r,"audio"),o(s,"timed-metadata")},this.flush=function(){if(!n&&e){var i={type:"metadata",tracks:[]};null!==e.video&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",i)}n=!1,this.flushStreams_(),this.trigger("done")}},He.prototype=new Ze;var Ye={PAT_PID:0,MP2T_PACKET_LENGTH:Je,TransportPacketStream:ze,TransportParseStream:$e,ElementaryStream:He,TimestampRolloverStream:Ke,CaptionStream:Ge.CaptionStream,Cea608Stream:Ge.Cea608Stream,Cea708Stream:Ge.Cea708Stream,MetadataStream:We};for(var Qe in Xe)Xe.hasOwnProperty(Qe)&&(Ye[Qe]=Xe[Qe]);var et,tt=Ye,nt=V,it=ae.ONE_SECOND_IN_TS,rt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(et=function(e){var t,n=0;et.prototype.init.call(this),this.skipWarn_=function(e,t){this.trigger("log",{level:"warn",message:`adts skiping bytes ${e} to ${t} in frame ${n} outside syncword`})},this.push=function(i){var r,s,o,a,d,l=0;if(e||(n=0),"audio"===i.type){var c;for(t&&t.length?(o=t,(t=new Uint8Array(o.byteLength+i.data.byteLength)).set(o),t.set(i.data,o.byteLength)):t=i.data;l+7<t.length;)if(255===t[l]&&240==(246&t[l+1])){if("number"==typeof c&&(this.skipWarn_(c,l),c=null),s=2*(1&~t[l+1]),r=(3&t[l+3])<<11|t[l+4]<<3|(224&t[l+5])>>5,d=(a=1024*(1+(3&t[l+6])))*it/rt[(60&t[l+2])>>>2],t.byteLength-l<r)break;this.trigger("data",{pts:i.pts+n*d,dts:i.dts+n*d,sampleCount:a,audioobjecttype:1+(t[l+2]>>>6&3),channelcount:(1&t[l+2])<<2|(192&t[l+3])>>>6,samplerate:rt[(60&t[l+2])>>>2],samplingfrequencyindex:(60&t[l+2])>>>2,samplesize:16,data:t.subarray(l+7+s,l+r)}),n++,l+=r}else"number"!=typeof c&&(c=l),l++;"number"==typeof c&&(this.skipWarn_(c,l),c=null),t=t.subarray(l)}},this.flush=function(){n=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}}).prototype=new nt;var st,ot=et;st=function(e){var t=e.byteLength,n=0,i=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+i},this.loadWord=function(){var r=e.byteLength-t,s=new Uint8Array(4),o=Math.min(4,t);if(0===o)throw new Error("no bytes available");s.set(e.subarray(r,r+o)),n=new DataView(s.buffer).getUint32(0),i=8*o,t-=o},this.skipBits=function(e){var r;i>e?(n<<=e,i-=e):(e-=i,e-=8*(r=Math.floor(e/8)),t-=r,this.loadWord(),n<<=e,i-=e)},this.readBits=function(e){var r=Math.min(i,e),s=n>>>32-r;return(i-=r)>0?n<<=r:t>0&&this.loadWord(),(r=e-r)>0?s<<r|this.readBits(r):s},this.skipLeadingZeros=function(){var e;for(e=0;e<i;++e)if(0!=(n&2147483648>>>e))return n<<=e,i-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var at,dt,lt,ct=V,ut=st;(dt=function(){var e,t,n=0;dt.prototype.init.call(this),this.push=function(i){var r;t?((r=new Uint8Array(t.byteLength+i.data.byteLength)).set(t),r.set(i.data,t.byteLength),t=r):t=i.data;for(var s=t.byteLength;n<s-3;n++)if(1===t[n+2]){e=n+5;break}for(;e<s;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}n+3!==e-2&&this.trigger("data",t.subarray(n+3,e-2));do{e++}while(1!==t[e]&&e<s);n=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3}t=t.subarray(n),e-=n,n=0},this.reset=function(){t=null,n=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new ct,lt={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},at=function(){var e,t,n,i,r,s,o,a=new dt;at.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,i=e.dts,a.push(e))},a.on("data",(function(o){var a={trackId:t,pts:n,dts:i,data:o,nalUnitTypeCode:31&o[0]};switch(a.nalUnitTypeCode){case 5:a.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:a.nalUnitType="sei_rbsp",a.escapedRBSP=r(o.subarray(1));break;case 7:a.nalUnitType="seq_parameter_set_rbsp",a.escapedRBSP=r(o.subarray(1)),a.config=s(a.escapedRBSP);break;case 8:a.nalUnitType="pic_parameter_set_rbsp";break;case 9:a.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",a)})),a.on("done",(function(){e.trigger("done")})),a.on("partialdone",(function(){e.trigger("partialdone")})),a.on("reset",(function(){e.trigger("reset")})),a.on("endedtimeline",(function(){e.trigger("endedtimeline")})),this.flush=function(){a.flush()},this.partialFlush=function(){a.partialFlush()},this.reset=function(){a.reset()},this.endTimeline=function(){a.endTimeline()},o=function(e,t){var n,i=8,r=8;for(n=0;n<e;n++)0!==r&&(r=(i+t.readExpGolomb()+256)%256),i=0===r?i:r},r=function(e){for(var t,n,i=e.byteLength,r=[],s=1;s<i-2;)0===e[s]&&0===e[s+1]&&3===e[s+2]?(r.push(s+2),s+=2):s++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var o=0;for(s=0;s<t;o++,s++)o===r[0]&&(o++,r.shift()),n[s]=e[o];return n},s=function(e){var t,n,i,r,s,a,d,l,c,u,p,h,f=0,g=0,m=0,y=0,v=[1,1];if(n=(t=new ut(e)).readUnsignedByte(),r=t.readUnsignedByte(),i=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),lt[n]&&(3===(s=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(p=3!==s?8:12,h=0;h<p;h++)t.readBoolean()&&o(h<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(a=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===a)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),d=t.readUnsignedExpGolomb(),h=0;h<d;h++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),l=t.readUnsignedExpGolomb(),c=t.readUnsignedExpGolomb(),0===(u=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(f=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:v=[1,1];break;case 2:v=[12,11];break;case 3:v=[10,11];break;case 4:v=[16,11];break;case 5:v=[40,33];break;case 6:v=[24,11];break;case 7:v=[20,11];break;case 8:v=[32,11];break;case 9:v=[80,33];break;case 10:v=[18,11];break;case 11:v=[15,11];break;case 12:v=[64,33];break;case 13:v=[160,99];break;case 14:v=[4,3];break;case 15:v=[3,2];break;case 16:v=[2,1];break;case 255:v=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}v&&(v[0],v[1])}return{profileIdc:n,levelIdc:i,profileCompatibility:r,width:16*(l+1)-2*f-2*g,height:(2-u)*(c+1)*16-2*m-2*y,sarRatio:v}}},at.prototype=new ct;var pt,ht={H264Stream:at,NalByteStream:dt},ft=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],gt=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return n=n>=0?n:0,(16&e[t+5])>>4?n+20:n+10},mt=function(e,t){return e.length-t<10||e[t]!=="I".charCodeAt(0)||e[t+1]!=="D".charCodeAt(0)||e[t+2]!=="3".charCodeAt(0)?t:(t+=gt(e,t),mt(e,t))},yt=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},vt={isLikelyAacData:function(e){var t=mt(e,0);return e.length>=t+2&&255==(255&e[t])&&240==(240&e[t+1])&&16==(22&e[t+1])},parseId3TagSize:gt,parseAdtsSize:function(e,t){var n=(224&e[t+5])>>5,i=e[t+4]<<3;return 6144&e[t+3]|i|n},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return ft[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,n,i;t=10,64&e[5]&&(t+=4,t+=yt(e.subarray(10,14)));do{if((n=yt(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){i=e.subarray(t+10,t+n+10);for(var r=0;r<i.byteLength;r++)if(0===i[r]){if("com.apple.streaming.transportStreamTimestamp"===unescape(function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r}(i,0,r))){var s=i.subarray(r+1),o=(1&s[3])<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2;return(o*=4)+(3&s[7])}break}}t+=10,t+=n}while(t<e.byteLength);return null}},bt=vt;(pt=function(){var e=new Uint8Array,t=0;pt.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(n){var i,r,s,o,a=0,d=0;for(e.length?(o=e.length,(e=new Uint8Array(n.byteLength+o)).set(e.subarray(0,o)),e.set(n,o)):e=n;e.length-d>=3;)if(e[d]!=="I".charCodeAt(0)||e[d+1]!=="D".charCodeAt(0)||e[d+2]!=="3".charCodeAt(0))if(255!=(255&e[d])||240!=(240&e[d+1]))d++;else{if(e.length-d<7)break;if(d+(a=bt.parseAdtsSize(e,d))>e.length)break;s={type:"audio",data:e.subarray(d,d+a),pts:t,dts:t},this.trigger("data",s),d+=a}else{if(e.length-d<10)break;if(d+(a=bt.parseId3TagSize(e,d))>e.length)break;r={type:"timed-metadata",data:e.subarray(d,d+a)},this.trigger("data",r),d+=a}i=e.length-d,e=i>0?e.subarray(d):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new V;var _t,wt,Tt,It,St=V,kt=ee,Ct=ne,Et=le,At=ue,Pt=tt,xt=ae,Dt=ot,Ot=ht.H264Stream,Rt=pt,Nt=vt.isLikelyAacData,Mt=ae.ONE_SECOND_IN_TS,Lt=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Ut=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],jt=function(e,t){t.stream=e,this.trigger("log",t)},Bt=function(e,t){for(var n=Object.keys(t),i=0;i<n.length;i++){var r=n[i];"headOfPipeline"!==r&&t[r].on&&t[r].on("log",jt.bind(e,r))}},qt=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},Ft=function(e,t,n,i,r,s){return{start:{dts:e,pts:e+(n-t)},end:{dts:e+(i-t),pts:e+(r-n)},prependedContentDuration:s,baseMediaDecodeTime:e}};wt=function(e,t){var n,i=[],r=0,s=0,o=1/0;n=(t=t||{}).firstSequenceNumber||0,wt.prototype.init.call(this),this.push=function(t){At.collectDtsInfo(e,t),e&&Lt.forEach((function(n){e[n]=t[n]})),i.push(t)},this.setEarliestDts=function(e){r=e},this.setVideoBaseMediaDecodeTime=function(e){o=e},this.setAudioAppendStart=function(e){s=e},this.flush=function(){var a,d,l,c,u,p,h;0!==i.length?(a=Et.trimAdtsFramesByEarliestDts(i,e,r),e.baseMediaDecodeTime=At.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),h=Et.prefixWithSilence(e,a,s,o),e.samples=Et.generateSampleTable(a),l=kt.mdat(Et.concatenateFrameData(a)),i=[],d=kt.moof(n,[e]),c=new Uint8Array(d.byteLength+l.byteLength),n++,c.set(d),c.set(l,d.byteLength),At.clearDtsInfo(e),u=Math.ceil(1024*Mt/e.samplerate),a.length&&(p=a.length*u,this.trigger("segmentTimingInfo",Ft(xt.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),a[0].dts,a[0].pts,a[0].dts+p,a[0].pts+p,h||0)),this.trigger("timingInfo",{start:a[0].pts,end:a[0].pts+p})),this.trigger("data",{track:e,boxes:c}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){At.clearDtsInfo(e),i=[],this.trigger("reset")}},wt.prototype=new St,_t=function(e,t){var n,i,r,s=[],o=[];n=(t=t||{}).firstSequenceNumber||0,_t.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){At.collectDtsInfo(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.config,e.sps=[t.data],Ut.forEach((function(t){e[t]=i[t]}),this)),"pic_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.data,e.pps=[t.data]),s.push(t)},this.flush=function(){for(var i,r,a,d,l,c,u,p,h=0;s.length&&"access_unit_delimiter_rbsp"!==s[0].nalUnitType;)s.shift();if(0===s.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(i=Ct.groupNalsIntoFrames(s),(a=Ct.groupFramesIntoGops(i))[0][0].keyFrame||((r=this.getGopForFusion_(s[0],e))?(h=r.duration,a.unshift(r),a.byteLength+=r.byteLength,a.nalCount+=r.nalCount,a.pts=r.pts,a.dts=r.dts,a.duration+=r.duration):a=Ct.extendFirstKeyFrame(a)),o.length){var f;if(!(f=t.alignGopsAtEnd?this.alignGopsAtEnd_(a):this.alignGopsAtStart_(a)))return this.gopCache_.unshift({gop:a.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");At.clearDtsInfo(e),a=f}At.collectDtsInfo(e,a),e.samples=Ct.generateSampleTable(a),l=kt.mdat(Ct.concatenateNalData(a)),e.baseMediaDecodeTime=At.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",a.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}))),u=a[0],p=a[a.length-1],this.trigger("segmentTimingInfo",Ft(e.baseMediaDecodeTime,u.dts,u.pts,p.dts+p.duration,p.pts+p.duration,h)),this.trigger("timingInfo",{start:a[0].pts,end:a[a.length-1].pts+a[a.length-1].duration}),this.gopCache_.unshift({gop:a.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),d=kt.moof(n,[e]),c=new Uint8Array(d.byteLength+l.byteLength),n++,c.set(d),c.set(l,d.byteLength),this.trigger("data",{track:e,boxes:c}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),s=[],this.gopCache_.length=0,o.length=0,this.trigger("reset")},this.resetStream_=function(){At.clearDtsInfo(e),i=void 0,r=void 0},this.getGopForFusion_=function(t){var n,i,r,s,o,a=1/0;for(o=0;o<this.gopCache_.length;o++)r=(s=this.gopCache_[o]).gop,e.pps&&qt(e.pps[0],s.pps[0])&&e.sps&&qt(e.sps[0],s.sps[0])&&(r.dts<e.timelineStartInfo.dts||(n=t.dts-r.dts-r.duration)>=-1e4&&n<=45e3&&(!i||a>n)&&(i=s,a=n));return i?i.gop:null},this.alignGopsAtStart_=function(e){var t,n,i,r,s,a,d,l;for(s=e.byteLength,a=e.nalCount,d=e.duration,t=n=0;t<o.length&&n<e.length&&(i=o[t],r=e[n],i.pts!==r.pts);)r.pts>i.pts?t++:(n++,s-=r.byteLength,a-=r.nalCount,d-=r.duration);return 0===n?e:n===e.length?null:((l=e.slice(n)).byteLength=s,l.duration=d,l.nalCount=a,l.pts=l[0].pts,l.dts=l[0].dts,l)},this.alignGopsAtEnd_=function(e){var t,n,i,r,s,a,d;for(t=o.length-1,n=e.length-1,s=null,a=!1;t>=0&&n>=0;){if(i=o[t],r=e[n],i.pts===r.pts){a=!0;break}i.pts>r.pts?t--:(t===o.length-1&&(s=n),n--)}if(!a&&null===s)return null;if(0===(d=a?n:s))return e;var l=e.slice(d),c=l.reduce((function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{byteLength:0,duration:0,nalCount:0});return l.byteLength=c.byteLength,l.duration=c.duration,l.nalCount=c.nalCount,l.pts=l[0].pts,l.dts=l[0].dts,l},this.alignGopsWith=function(e){o=e}},_t.prototype=new St,It=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,It.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}},It.prototype=new St,It.prototype.flush=function(e){var t,n,i,r,s=0,o={captions:[],captionStreams:{},metadata:[],info:{}},a=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(a=this.videoTrack.timelineStartInfo.pts,Ut.forEach((function(e){o.info[e]=this.videoTrack[e]}),this)):this.audioTrack&&(a=this.audioTrack.timelineStartInfo.pts,Lt.forEach((function(e){o.info[e]=this.audioTrack[e]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?o.type=this.pendingTracks[0].type:o.type="combined",this.emittedTracks+=this.pendingTracks.length,i=kt.initSegment(this.pendingTracks),o.initSegment=new Uint8Array(i.byteLength),o.initSegment.set(i),o.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)o.data.set(this.pendingBoxes[r],s),s+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(t=this.pendingCaptions[r]).startTime=xt.metadataTsToSeconds(t.startPts,a,this.keepOriginalTimestamps),t.endTime=xt.metadataTsToSeconds(t.endPts,a,this.keepOriginalTimestamps),o.captionStreams[t.stream]=!0,o.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)(n=this.pendingMetadata[r]).cueTime=xt.metadataTsToSeconds(n.pts,a,this.keepOriginalTimestamps),o.metadata.push(n);for(o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),r=0;r<o.captions.length;r++)t=o.captions[r],this.trigger("caption",t);for(r=0;r<o.metadata.length;r++)n=o.metadata[r],this.trigger("id3Frame",n)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},It.prototype.setRemux=function(e){this.remuxTracks=e},(Tt=function(e){var t,n,i=this,r=!0;Tt.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="aac",r.metadataStream=new Pt.MetadataStream,r.aacStream=new Rt,r.audioTimestampRolloverStream=new Pt.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new Pt.TimestampRolloverStream("timed-metadata"),r.adtsStream=new Dt,r.coalesceStream=new It(e,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on("timestamp",(function(e){r.aacStream.setTimestamp(e.timeStamp)})),r.aacStream.on("data",(function(s){"timed-metadata"!==s.type&&"audio"!==s.type||r.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:i.baseMediaDecodeTime},codec:"adts",type:"audio"},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new wt(n,e),r.audioSegmentStream.on("log",i.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t}))})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),Bt(this,r)},this.setupTsPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="ts",r.metadataStream=new Pt.MetadataStream,r.packetStream=new Pt.TransportPacketStream,r.parseStream=new Pt.TransportParseStream,r.elementaryStream=new Pt.ElementaryStream,r.timestampRolloverStream=new Pt.TimestampRolloverStream,r.adtsStream=new Dt,r.h264Stream=new Ot,r.captionStream=new Pt.CaptionStream(e),r.coalesceStream=new It(e,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",(function(s){var o;if("metadata"===s.type){for(o=s.tracks.length;o--;)t||"video"!==s.tracks[o].type?n||"audio"!==s.tracks[o].type||((n=s.tracks[o]).timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime):(t=s.tracks[o]).timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime;t&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new _t(t,e),r.videoSegmentStream.on("log",i.getLogTrigger_("videoSegmentStream")),r.videoSegmentStream.on("timelineStartInfo",(function(t){n&&!e.keepOriginalTimestamps&&(n.timelineStartInfo=t,r.audioSegmentStream.setEarliestDts(t.dts-i.baseMediaDecodeTime))})),r.videoSegmentStream.on("processedGopsInfo",i.trigger.bind(i,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",(function(e){n&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),r.videoSegmentStream.on("timingInfo",i.trigger.bind(i,"videoTimingInfo")),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),n&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new wt(n,e),r.audioSegmentStream.on("log",i.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.audioSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"audioSegmentTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t})}})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("id3Frame",(function(e){e.dispatchType=r.metadataStream.dispatchType,i.trigger("id3Frame",e)})),r.coalesceStream.on("caption",this.trigger.bind(this,"caption")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),Bt(this,r)},this.setBaseMediaDecodeTime=function(i){var r=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=i),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,At.clearDtsInfo(n),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),t&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,At.clearDtsInfo(t),r.captionStream.reset()),r.timestampRolloverStream&&r.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var n=this.transmuxPipeline_;e.remux=t,n&&n.coalesceStream&&n.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.getLogTrigger_=function(e){var t=this;return function(n){n.stream=e,t.trigger("log",n)}},this.push=function(e){if(r){var t=Nt(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),r=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new St;var Vt,zt,$t,Ht,Wt={Transmuxer:Tt,VideoSegmentStream:_t,AudioSegmentStream:wt,AUDIO_PROPERTIES:Lt,VIDEO_PROPERTIES:Ut,generateSegmentTimingInfo:Ft},Zt=function(e){return e>>>0},Gt=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),(t+=String.fromCharCode(e[2]))+String.fromCharCode(e[3])},Xt=Zt,Kt=Gt,Jt=function(e,t){var n,i,r,s,o,a=[];if(!t.length)return null;for(n=0;n<e.byteLength;)i=Xt(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]),r=Kt(e.subarray(n+4,n+8)),s=i>1?n+i:e.byteLength,r===t[0]&&(1===t.length?a.push(e.subarray(n+8,s)):(o=Jt(e.subarray(n+8,s),t.slice(1))).length&&(a=a.concat(o))),n=s;return a},Yt=Zt,Qt=$.getUint64,en=function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4))};return 1===t.version?t.baseMediaDecodeTime=Qt(e.subarray(4)):t.baseMediaDecodeTime=Yt(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),t},tn=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},nn=function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&n.flags[2],s=4&n.flags[2],o=1&n.flags[1],a=2&n.flags[1],d=4&n.flags[1],l=8&n.flags[1],c=i.getUint32(4),u=8;for(r&&(n.dataOffset=i.getInt32(u),u+=4),s&&c&&(t={flags:tn(e.subarray(u,u+4))},u+=4,o&&(t.duration=i.getUint32(u),u+=4),a&&(t.size=i.getUint32(u),u+=4),l&&(1===n.version?t.compositionTimeOffset=i.getInt32(u):t.compositionTimeOffset=i.getUint32(u),u+=4),n.samples.push(t),c--);c--;)t={},o&&(t.duration=i.getUint32(u),u+=4),a&&(t.size=i.getUint32(u),u+=4),d&&(t.flags=tn(e.subarray(u,u+4)),u+=4),l&&(1===n.version?t.compositionTimeOffset=i.getInt32(u):t.compositionTimeOffset=i.getUint32(u),u+=4),n.samples.push(t);return n},rn=function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},r=1&i.flags[2],s=2&i.flags[2],o=8&i.flags[2],a=16&i.flags[2],d=32&i.flags[2],l=65536&i.flags[0],c=131072&i.flags[0];return t=8,r&&(t+=4,i.baseDataOffset=n.getUint32(12),t+=4),s&&(i.sampleDescriptionIndex=n.getUint32(t),t+=4),o&&(i.defaultSampleDuration=n.getUint32(t),t+=4),a&&(i.defaultSampleSize=n.getUint32(t),t+=4),d&&(i.defaultSampleFlags=n.getUint32(t)),l&&(i.durationIsEmpty=!0),!r&&c&&(i.baseDataOffsetIsMoof=!0),i},sn=(Vt="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},pe.discardEmulationPreventionBytes),on=Ce.CaptionStream,an=Jt,dn=en,ln=nn,cn=rn,un=Vt,pn=function(e,t){for(var n=e,i=0;i<t.length;i++){var r=t[i];if(n<r.size)return r;n-=r.size}return null},hn=function(){var e,t,n,i,r,s,o=!1;this.isInitialized=function(){return o},this.init=function(t){e=new on,o=!0,s=!!t&&t.isPartial,e.on("data",(function(e){e.startTime=e.startPts/i,e.endTime=e.endPts/i,r.captions.push(e),r.captionStreams[e.stream]=!0})),e.on("log",(function(e){r.logs.push(e)}))},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||n===e[0]&&i===t[n])},this.parse=function(e,s,o){var a;if(!this.isInitialized())return null;if(!s||!o)return null;if(this.isNewInit(s,o))n=s[0],i=o[n];else if(null===n||!i)return t.push(e),null;for(;t.length>0;){var d=t.shift();this.parse(d,s,o)}return a=function(e,t,n){if(null===t)return null;var i=function(e,t){var n=an(e,["moof","traf"]),i=an(e,["mdat"]),r={},s=[];return i.forEach((function(e,t){var i=n[t];s.push({mdat:e,traf:i})})),s.forEach((function(e){var n,i,s=e.mdat,o=e.traf,a=an(o,["tfhd"]),d=cn(a[0]),l=d.trackId,c=an(o,["tfdt"]),u=c.length>0?dn(c[0]).baseMediaDecodeTime:0,p=an(o,["trun"]);t===l&&p.length>0&&(n=function(e,t,n){var i=t,r=n.defaultSampleDuration||0,s=n.defaultSampleSize||0,o=n.trackId,a=[];return e.forEach((function(e){var t=ln(e).samples;t.forEach((function(e){void 0===e.duration&&(e.duration=r),void 0===e.size&&(e.size=s),e.trackId=o,e.dts=i,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),"bigint"==typeof i?(e.pts=i+un.BigInt(e.compositionTimeOffset),i+=un.BigInt(e.duration)):(e.pts=i+e.compositionTimeOffset,i+=e.duration)})),a=a.concat(t)})),a}(p,u,d),i=function(e,t,n){var i,r,s,o,a=new DataView(e.buffer,e.byteOffset,e.byteLength),d={logs:[],seiNals:[]};for(r=0;r+4<e.length;r+=s)if(s=a.getUint32(r),r+=4,!(s<=0))switch(31&e[r]){case 6:var l=e.subarray(r+1,r+1+s),c=pn(r,t);if(i={nalUnitType:"sei_rbsp",size:s,data:l,escapedRBSP:sn(l),trackId:n},c)i.pts=c.pts,i.dts=c.dts,o=c;else{if(!o){d.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+r+" for trackId "+n+". See mux.js#223."});break}i.pts=o.pts,i.dts=o.dts}d.seiNals.push(i)}return d}(s,n,l),r[l]||(r[l]={seiNals:[],logs:[]}),r[l].seiNals=r[l].seiNals.concat(i.seiNals),r[l].logs=r[l].logs.concat(i.logs))})),r}(e,t)[t]||{};return{seiNals:i.seiNals,logs:i.logs,timescale:n}}(e,n,i),a&&a.logs&&(r.logs=r.logs.concat(a.logs)),null!==a&&a.seiNals?(this.pushNals(a.seiNals),this.flushStream(),r):r.logs.length?{logs:r.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach((function(t){e.push(t)}))},this.flushStream=function(){if(!this.isInitialized())return null;s?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={},r.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],n=null,i=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},fn=function(e){for(var t=0,n=String.fromCharCode(e[t]),i="";"\0"!==n;)i+=n,t++,n=String.fromCharCode(e[t]);return i+n},gn=$.getUint64,mn=function(e){return void 0!==e||null!==e},yn={parseEmsgBox:function(e){var t,n,i,r,s,o,a,d=4,l=e[0];if(0===l)d+=(t=fn(e.subarray(d))).length,d+=(n=fn(e.subarray(d))).length,i=(c=new DataView(e.buffer)).getUint32(d),d+=4,s=c.getUint32(d),d+=4,o=c.getUint32(d),d+=4,a=c.getUint32(d),d+=4;else if(1===l){var c;i=(c=new DataView(e.buffer)).getUint32(d),d+=4,r=gn(e.subarray(d)),d+=8,o=c.getUint32(d),d+=4,a=c.getUint32(d),d+=4,d+=(t=fn(e.subarray(d))).length,d+=(n=fn(e.subarray(d))).length}var u={scheme_id_uri:t,value:n,timescale:i||1,presentation_time:r,presentation_time_delta:s,event_duration:o,id:a,message_data:new Uint8Array(e.subarray(d,e.byteLength))};return function(e,t){var n="\0"!==t.scheme_id_uri,i=0===e&&mn(t.presentation_time_delta)&&n,r=1===e&&mn(t.presentation_time)&&n;return!(e>1)&&i||r}(l,u)?u:void 0},scaleTime:function(e,t,n,i){return e||0===e?e/t:i+n/t}},vn=Zt,bn=function(e){return("00"+e.toString(16)).slice(-2)},_n=Jt,wn=Gt,Tn=yn,In=$.getUint64,Sn=Vt,kn=qe.parseId3Frames;zt=function(e,t){var n=_n(t,["moof","traf"]).reduce((function(t,n){var i,r=_n(n,["tfhd"])[0],s=vn(r[4]<<24|r[5]<<16|r[6]<<8|r[7]),o=e[s]||9e4,a=_n(n,["tfdt"])[0],d=new DataView(a.buffer,a.byteOffset,a.byteLength);let l;return"bigint"==typeof(i=1===a[0]?In(a.subarray(4,12)):d.getUint32(4))?l=i/Sn.BigInt(o):"number"!=typeof i||isNaN(i)||(l=i/o),l<Number.MAX_SAFE_INTEGER&&(l=Number(l)),l<t&&(t=l),t}),1/0);return"bigint"==typeof n||isFinite(n)?n:0},Ht=function(e){var t=0===e[0]?12:20;return vn(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])},$t=function(e){var t=_n(e,["moov","trak"]),n=[];return t.forEach((function(e){var t,i,r={},s=_n(e,["tkhd"])[0];s&&(i=(t=new DataView(s.buffer,s.byteOffset,s.byteLength)).getUint8(0),r.id=0===i?t.getUint32(12):t.getUint32(20));var o=_n(e,["mdia","hdlr"])[0];if(o){var a=wn(o.subarray(8,12));r.type="vide"===a?"video":"soun"===a?"audio":a}var d=_n(e,["mdia","minf","stbl","stsd"])[0];if(d){var l=d.subarray(8);r.codec=wn(l.subarray(4,8));var c,u=_n(l,[r.codec])[0];u&&(/^[asm]vc[1-9]$/i.test(r.codec)?(c=u.subarray(78),"avcC"===wn(c.subarray(4,8))&&c.length>11?(r.codec+=".",r.codec+=bn(c[9]),r.codec+=bn(c[10]),r.codec+=bn(c[11])):r.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(r.codec)?(c=u.subarray(28),"esds"===wn(c.subarray(4,8))&&c.length>20&&0!==c[19]?(r.codec+="."+bn(c[19]),r.codec+="."+bn(c[20]>>>2&63).replace(/^0/,"")):r.codec="mp4a.40.2"):r.codec=r.codec.toLowerCase())}var p=_n(e,["mdia","mdhd"])[0];p&&(r.timescale=Ht(p)),n.push(r)})),n};var Cn=zt,En=$t,An=function(e,t=0){return _n(e,["emsg"]).map((e=>{var n=Tn.parseEmsgBox(new Uint8Array(e)),i=kn(n.message_data);return{cueTime:Tn.scaleTime(n.presentation_time,n.timescale,n.presentation_time_delta,t),duration:Tn.scaleTime(n.event_duration,n.timescale),frames:i}}))},Pn=Ee,xn=function(e){var t=31&e[1];return(t<<=8)|e[2]},Dn=function(e){return!!(64&e[1])},On=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},Rn=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Nn={parseType:function(e,t){var n=xn(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},parsePat:function(e){var t=Dn(e),n=4+On(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function(e){var t={},n=Dn(e),i=4+On(e);if(n&&(i+=e[i]+1),1&e[i+5]){var r;r=3+((15&e[i+1])<<8|e[i+2])-4;for(var s=12+((15&e[i+10])<<8|e[i+11]);s<r;){var o=i+s;t[(31&e[o+1])<<8|e[o+2]]=e[o],s+=5+((15&e[o+3])<<8|e[o+4])}return t}},parsePayloadUnitStartIndicator:Dn,parsePesType:function(e,t){switch(t[xn(e)]){case Pn.H264_STREAM_TYPE:return"video";case Pn.ADTS_STREAM_TYPE:return"audio";case Pn.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!Dn(e))return null;var t=4+On(e);if(t>=e.byteLength)return null;var n,i=null;return 192&(n=e[t+7])&&((i={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,i.pts*=4,i.pts+=(6&e[t+13])>>>1,i.dts=i.pts,64&n&&(i.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,i.dts*=4,i.dts+=(6&e[t+18])>>>1)),i},videoPacketContainsKeyFrame:function(e){for(var t=4+On(e),n=e.subarray(t),i=0,r=0,s=!1;r<n.byteLength-3;r++)if(1===n[r+2]){i=r+5;break}for(;i<n.byteLength;)switch(n[i]){case 0:if(0!==n[i-1]){i+=2;break}if(0!==n[i-2]){i++;break}r+3!==i-2&&"slice_layer_without_partitioning_rbsp_idr"===Rn(31&n[r+3])&&(s=!0);do{i++}while(1!==n[i]&&i<n.length);r=i-2,i+=3;break;case 1:if(0!==n[i-1]||0!==n[i-2]){i+=3;break}"slice_layer_without_partitioning_rbsp_idr"===Rn(31&n[r+3])&&(s=!0),r=i-2,i+=3;break;default:i+=3}return n=n.subarray(r),i-=r,r=0,n&&n.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===Rn(31&n[r+3])&&(s=!0),s}},Mn=Ee,Ln=Re.handleRollover,Un={};Un.ts=Nn,Un.aac=vt;var jn=ae.ONE_SECOND_IN_TS,Bn=188,qn=71,Fn=function(e,t,n){for(var i,r,s,o,a=0,d=Bn,l=!1;d<=e.byteLength;)if(e[a]!==qn||e[d]!==qn&&d!==e.byteLength)a++,d++;else{if(i=e.subarray(a,d),"pes"===Un.ts.parseType(i,t.pid)&&(r=Un.ts.parsePesType(i,t.table),s=Un.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&s&&(o=Un.ts.parsePesTime(i))&&(o.type="audio",n.audio.push(o),l=!0)),l)break;a+=Bn,d+=Bn}for(a=(d=e.byteLength)-Bn,l=!1;a>=0;)if(e[a]!==qn||e[d]!==qn&&d!==e.byteLength)a--,d--;else{if(i=e.subarray(a,d),"pes"===Un.ts.parseType(i,t.pid)&&(r=Un.ts.parsePesType(i,t.table),s=Un.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&s&&(o=Un.ts.parsePesTime(i))&&(o.type="audio",n.audio.push(o),l=!0)),l)break;a-=Bn,d-=Bn}},Vn=function(e,t,n){for(var i,r,s,o,a,d,l,c=0,u=Bn,p=!1,h={data:[],size:0};u<e.byteLength;)if(e[c]!==qn||e[u]!==qn)c++,u++;else{if(i=e.subarray(c,u),"pes"===Un.ts.parseType(i,t.pid)&&(r=Un.ts.parsePesType(i,t.table),s=Un.ts.parsePayloadUnitStartIndicator(i),"video"===r&&(s&&!p&&(o=Un.ts.parsePesTime(i))&&(o.type="video",n.video.push(o),p=!0),!n.firstKeyFrame))){if(s&&0!==h.size){for(a=new Uint8Array(h.size),d=0;h.data.length;)l=h.data.shift(),a.set(l,d),d+=l.byteLength;if(Un.ts.videoPacketContainsKeyFrame(a)){var f=Un.ts.parsePesTime(a);f?(n.firstKeyFrame=f,n.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}h.size=0}h.data.push(i),h.size+=i.byteLength}if(p&&n.firstKeyFrame)break;c+=Bn,u+=Bn}for(c=(u=e.byteLength)-Bn,p=!1;c>=0;)if(e[c]!==qn||e[u]!==qn)c--,u--;else{if(i=e.subarray(c,u),"pes"===Un.ts.parseType(i,t.pid)&&(r=Un.ts.parsePesType(i,t.table),s=Un.ts.parsePayloadUnitStartIndicator(i),"video"===r&&s&&(o=Un.ts.parsePesTime(i))&&(o.type="video",n.video.push(o),p=!0)),p)break;c-=Bn,u-=Bn}},zn=function(e,t){var n;return n=Un.aac.isLikelyAacData(e)?function(e){for(var t,n=!1,i=0,r=null,s=null,o=0,a=0;e.length-a>=3;){switch(Un.aac.parseType(e,a)){case"timed-metadata":if(e.length-a<10){n=!0;break}if((o=Un.aac.parseId3TagSize(e,a))>e.length){n=!0;break}null===s&&(t=e.subarray(a,a+o),s=Un.aac.parseAacTimestamp(t)),a+=o;break;case"audio":if(e.length-a<7){n=!0;break}if((o=Un.aac.parseAdtsSize(e,a))>e.length){n=!0;break}null===r&&(t=e.subarray(a,a+o),r=Un.aac.parseSampleRate(t)),i++,a+=o;break;default:a++}if(n)return null}if(null===r||null===s)return null;var d=jn/r;return{audio:[{type:"audio",dts:s,pts:s},{type:"audio",dts:s+1024*i*d,pts:s+1024*i*d}]}}(e):function(e){var t={pid:null,table:null},n={};for(var i in function(e,t){for(var n,i=0,r=Bn;r<e.byteLength;)if(e[i]!==qn||e[r]!==qn)i++,r++;else{switch(n=e.subarray(i,r),Un.ts.parseType(n,t.pid)){case"pat":t.pid=Un.ts.parsePat(n);break;case"pmt":var s=Un.ts.parsePmt(n);t.table=t.table||{},Object.keys(s).forEach((function(e){t.table[e]=s[e]}))}i+=Bn,r+=Bn}}(e,t),t.table)if(t.table.hasOwnProperty(i))switch(t.table[i]){case Mn.H264_STREAM_TYPE:n.video=[],Vn(e,t,n),0===n.video.length&&delete n.video;break;case Mn.ADTS_STREAM_TYPE:n.audio=[],Fn(e,t,n),0===n.audio.length&&delete n.audio}return n}(e),n&&(n.audio||n.video)?(function(e,t){if(e.audio&&e.audio.length){var n=t;(void 0===n||isNaN(n))&&(n=e.audio[0].dts),e.audio.forEach((function(e){e.dts=Ln(e.dts,n),e.pts=Ln(e.pts,n),e.dtsTime=e.dts/jn,e.ptsTime=e.pts/jn}))}if(e.video&&e.video.length){var i=t;if((void 0===i||isNaN(i))&&(i=e.video[0].dts),e.video.forEach((function(e){e.dts=Ln(e.dts,i),e.pts=Ln(e.pts,i),e.dtsTime=e.dts/jn,e.ptsTime=e.pts/jn})),e.firstKeyFrame){var r=e.firstKeyFrame;r.dts=Ln(r.dts,i),r.pts=Ln(r.pts,i),r.dtsTime=r.dts/jn,r.ptsTime=r.pts/jn}}}(n,t),n):null};class $n{constructor(e,t){this.options=t||{},this.self=e,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Wt.Transmuxer(this.options),function(e,t){t.on("data",(function(t){const n=t.initSegment;t.initSegment={data:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength};const i=t.data;t.data=i.buffer,e.postMessage({action:"data",segment:t,byteOffset:i.byteOffset,byteLength:i.byteLength},[t.data])})),t.on("done",(function(t){e.postMessage({action:"done"})})),t.on("gopInfo",(function(t){e.postMessage({action:"gopInfo",gopInfo:t})})),t.on("videoSegmentTimingInfo",(function(t){const n={start:{decode:ae.videoTsToSeconds(t.start.dts),presentation:ae.videoTsToSeconds(t.start.pts)},end:{decode:ae.videoTsToSeconds(t.end.dts),presentation:ae.videoTsToSeconds(t.end.pts)},baseMediaDecodeTime:ae.videoTsToSeconds(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=ae.videoTsToSeconds(t.prependedContentDuration)),e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:n})})),t.on("audioSegmentTimingInfo",(function(t){const n={start:{decode:ae.videoTsToSeconds(t.start.dts),presentation:ae.videoTsToSeconds(t.start.pts)},end:{decode:ae.videoTsToSeconds(t.end.dts),presentation:ae.videoTsToSeconds(t.end.pts)},baseMediaDecodeTime:ae.videoTsToSeconds(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=ae.videoTsToSeconds(t.prependedContentDuration)),e.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:n})})),t.on("id3Frame",(function(t){e.postMessage({action:"id3Frame",id3Frame:t})})),t.on("caption",(function(t){e.postMessage({action:"caption",caption:t})})),t.on("trackinfo",(function(t){e.postMessage({action:"trackinfo",trackInfo:t})})),t.on("audioTimingInfo",(function(t){e.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:ae.videoTsToSeconds(t.start),end:ae.videoTsToSeconds(t.end)}})})),t.on("videoTimingInfo",(function(t){e.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:ae.videoTsToSeconds(t.start),end:ae.videoTsToSeconds(t.end)}})})),t.on("log",(function(t){e.postMessage({action:"log",log:t})}))}(this.self,this.transmuxer)}pushMp4Captions(e){this.captionParser||(this.captionParser=new hn,this.captionParser.init());const t=new Uint8Array(e.data,e.byteOffset,e.byteLength),n=this.captionParser.parse(t,e.trackIds,e.timescales);this.self.postMessage({action:"mp4Captions",captions:n&&n.captions||[],logs:n&&n.logs||[],data:t.buffer},[t.buffer])}probeMp4StartTime({timescales:e,data:t}){const n=Cn(e,t);this.self.postMessage({action:"probeMp4StartTime",startTime:n,data:t},[t.buffer])}probeMp4Tracks({data:e}){const t=En(e);this.self.postMessage({action:"probeMp4Tracks",tracks:t,data:e},[e.buffer])}probeEmsgID3({data:e,offset:t}){const n=An(e,t);this.self.postMessage({action:"probeEmsgID3",id3Frames:n,emsgData:e},[e.buffer])}probeTs({data:e,baseStartTime:t}){const n="number"!=typeof t||isNaN(t)?void 0:t*ae.ONE_SECOND_IN_TS,i=zn(e,n);let r=null;i&&(r={hasVideo:i.video&&2===i.video.length||!1,hasAudio:i.audio&&2===i.audio.length||!1},r.hasVideo&&(r.videoStart=i.video[0].ptsTime),r.hasAudio&&(r.audioStart=i.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:r,data:e},[e.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(e){const t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}reset(){this.transmuxer.reset()}setTimestampOffset(e){const t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(ae.secondsToVideoTs(t)))}setAudioAppendStart(e){this.transmuxer.setAudioAppendStart(Math.ceil(ae.secondsToVideoTs(e.appendStart)))}setRemux(e){this.transmuxer.setRemux(e.remux)}flush(e){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}self.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new $n(self,e.data.options):(this.messageHandlers||(this.messageHandlers=new $n(self)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}})));var hw=lw(pw);const fw=e=>{const{transmuxer:t,bytes:n,audioAppendStart:i,gopsToAlignWith:r,remux:s,onData:o,onTrackInfo:a,onAudioTimingInfo:d,onVideoTimingInfo:l,onVideoSegmentTimingInfo:c,onAudioSegmentTimingInfo:u,onId3:p,onCaptions:h,onDone:f,onEndedTimeline:g,onTransmuxerLog:m,isEndOfTimeline:y}=e,v={buffer:[]};let b=y;if(t.onmessage=n=>{t.currentTransmux===e&&("data"===n.data.action&&((e,t,n)=>{const{type:i,initSegment:r,captions:s,captionStreams:o,metadata:a,videoFrameDtsTime:d,videoFramePtsTime:l}=e.data.segment;t.buffer.push({captions:s,captionStreams:o,metadata:a});const c=e.data.segment.boxes||{data:e.data.segment.data},u={type:i,data:new Uint8Array(c.data,c.data.byteOffset,c.data.byteLength),initSegment:new Uint8Array(r.data,r.byteOffset,r.byteLength)};void 0!==d&&(u.videoFrameDtsTime=d),void 0!==l&&(u.videoFramePtsTime=l),n(u)})(n,v,o),"trackinfo"===n.data.action&&a(n.data.trackInfo),"gopInfo"===n.data.action&&((e,t)=>{t.gopInfo=e.data.gopInfo})(n,v),"audioTimingInfo"===n.data.action&&d(n.data.audioTimingInfo),"videoTimingInfo"===n.data.action&&l(n.data.videoTimingInfo),"videoSegmentTimingInfo"===n.data.action&&c(n.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===n.data.action&&u(n.data.audioSegmentTimingInfo),"id3Frame"===n.data.action&&p([n.data.id3Frame],n.data.id3Frame.dispatchType),"caption"===n.data.action&&h(n.data.caption),"endedtimeline"===n.data.action&&(b=!1,g()),"log"===n.data.action&&m(n.data.log),"transmuxed"===n.data.type&&(b||(t.onmessage=null,(({transmuxedData:e,callback:t})=>{e.buffer=[],t(e)})({transmuxedData:v,callback:f}),gw(t))))},i&&t.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(r)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),void 0!==s&&t.postMessage({action:"setRemux",remux:s}),n.byteLength){const e=n instanceof ArrayBuffer?n:n.buffer,i=n instanceof ArrayBuffer?0:n.byteOffset;t.postMessage({action:"push",data:e,byteOffset:i,byteLength:n.byteLength},[e])}y&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},gw=e=>{e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),"function"==typeof e.currentTransmux?e.currentTransmux():fw(e.currentTransmux))},mw=(e,t)=>{e.postMessage({action:t}),gw(e)};var yw=e=>{((e,t)=>{if(!t.currentTransmux)return t.currentTransmux=e,void mw(t,e);t.transmuxQueue.push(mw.bind(null,t,e))})("reset",e)};const vw=function(e){const t=e.transmuxer,n=e.endAction||e.action,i=e.callback,r=Gp({},e,{endAction:null,transmuxer:null,callback:null}),s=r=>{r.data.action===n&&(t.removeEventListener("message",s),r.data.data&&(r.data.data=new Uint8Array(r.data.data,e.byteOffset||0,e.byteLength||r.data.data.byteLength),e.data&&(e.data=r.data.data)),i(r.data))};if(t.addEventListener("message",s),e.data){const n=e.data instanceof ArrayBuffer;r.byteOffset=n?0:e.data.byteOffset,r.byteLength=e.data.byteLength;const i=[n?e.data:e.data.buffer];t.postMessage(r,i)}else t.postMessage(r)},bw=-101,_w=-102,ww=e=>{e.forEach((e=>{e.abort()}))},Tw=(e,t)=>t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:bw,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:_w,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:2,xhr:t}:"arraybuffer"===t.responseType&&0===t.response.byteLength?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:2,xhr:t}:null,Iw=(e,t,n)=>(i,r)=>{const s=r.response,o=Tw(i,r);if(o)return n(o,e);if(16!==s.byteLength)return n({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:2,xhr:r},e);const a=new DataView(s),d=new Uint32Array([a.getUint32(0),a.getUint32(4),a.getUint32(8),a.getUint32(12)]);for(let e=0;e<t.length;e++)t[e].bytes=d;return n(null,e)},Sw=(e,t)=>{const n=zf(e.map.bytes);if("mp4"!==n){const i=e.map.resolvedUri||e.map.uri;return t({internal:!0,message:`Found unsupported ${n||"unknown"} container for initialization segment at URL: ${i}`,code:2})}vw({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:({tracks:n,data:i})=>(e.map.bytes=i,n.forEach((function(t){e.map.tracks=e.map.tracks||{},e.map.tracks[t.type]||(e.map.tracks[t.type]=t,"number"==typeof t.id&&t.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[t.id]=t.timescale))})),t(null))})},kw=({segment:e,bytes:t,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:d,endedTimelineFn:l,dataFn:c,doneFn:u,onTransmuxerLog:p})=>{const h=e.map&&e.map.tracks||{},f=Boolean(h.audio&&h.video);let g=i.bind(null,e,"audio","start");const m=i.bind(null,e,"audio","end");let y=i.bind(null,e,"video","start");const v=i.bind(null,e,"video","end");vw({action:"probeTs",transmuxer:e.transmuxer,data:t,baseStartTime:e.baseStartTime,callback:i=>{e.bytes=t=i.data;const h=i.result;h&&(n(e,{hasAudio:h.hasAudio,hasVideo:h.hasVideo,isMuxed:f}),n=null,h.hasAudio&&!f&&g(h.audioStart),h.hasVideo&&y(h.videoStart),g=null,y=null),(e=>{if(!e.transmuxer.currentTransmux)return e.transmuxer.currentTransmux=e,void fw(e);e.transmuxer.transmuxQueue.push(e)})({bytes:t,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,remux:f,onData:t=>{t.type="combined"===t.type?"video":t.type,c(e,t)},onTrackInfo:t=>{n&&(f&&(t.isMuxed=!0),n(e,t))},onAudioTimingInfo:e=>{g&&void 0!==e.start&&(g(e.start),g=null),m&&void 0!==e.end&&m(e.end)},onVideoTimingInfo:e=>{y&&void 0!==e.start&&(y(e.start),y=null),v&&void 0!==e.end&&v(e.end)},onVideoSegmentTimingInfo:e=>{r(e)},onAudioSegmentTimingInfo:e=>{s(e)},onId3:(t,n)=>{o(e,t,n)},onCaptions:t=>{a(e,[t])},isEndOfTimeline:d,onEndedTimeline:()=>{l()},onTransmuxerLog:p,onDone:t=>{u&&(t.type="combined"===t.type?"video":t.type,u(null,e,t))}})}})},Cw=({segment:e,bytes:t,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:d,endedTimelineFn:l,dataFn:c,doneFn:u,onTransmuxerLog:p})=>{let h=new Uint8Array(t);if(function(e){return Ef(e,["moof"]).length>0}(h)){e.isFmp4=!0;const{tracks:r}=e.map,s={isFmp4:!0,hasVideo:!!r.video,hasAudio:!!r.audio};r.audio&&r.audio.codec&&"enca"!==r.audio.codec&&(s.audioCodec=r.audio.codec),r.video&&r.video.codec&&"encv"!==r.video.codec&&(s.videoCodec=r.video.codec),r.video&&r.audio&&(s.isMuxed=!0),n(e,s);const d=(t,n)=>{c(e,{data:h,type:s.hasAudio&&!s.isMuxed?"audio":"video"}),n&&n.length&&o(e,n),t&&t.length&&a(e,t),u(null,e,{})};vw({action:"probeMp4StartTime",timescales:e.map.timescales,data:h,transmuxer:e.transmuxer,callback:({data:n,startTime:o})=>{t=n.buffer,e.bytes=h=n,s.hasAudio&&!s.isMuxed&&i(e,"audio","start",o),s.hasVideo&&i(e,"video","start",o),vw({action:"probeEmsgID3",data:h,transmuxer:e.transmuxer,offset:o,callback:({emsgData:i,id3Frames:s})=>{t=i.buffer,e.bytes=h=i,r.video&&n.byteLength&&e.transmuxer?vw({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:e.transmuxer,data:h,timescales:e.map.timescales,trackIds:[r.video.id],callback:n=>{t=n.data.buffer,e.bytes=h=n.data,n.logs.forEach((function(e){p(Yb(e,{stream:"mp4CaptionParser"}))})),d(n.captions,s)}}):d(void 0,s)}})}})}else if(e.transmuxer){if(void 0===e.container&&(e.container=zf(h)),"ts"!==e.container&&"aac"!==e.container)return n(e,{hasAudio:!1,hasVideo:!1}),void u(null,e,{});kw({segment:e,bytes:t,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:d,endedTimelineFn:l,dataFn:c,doneFn:u,onTransmuxerLog:p})}else u(null,e,{})},Ew=function({id:e,key:t,encryptedBytes:n,decryptionWorker:i},r){const s=t=>{if(t.data.source===e){i.removeEventListener("message",s);const e=t.data.decrypted;r(new Uint8Array(e.bytes,e.byteOffset,e.byteLength))}};let o;i.addEventListener("message",s),o=t.bytes.slice?t.bytes.slice():new Uint32Array(Array.prototype.slice.call(t.bytes)),i.postMessage(G_({source:e,encrypted:n,key:o,iv:t.iv}),[n.buffer,o.buffer])},Aw=({xhr:e,xhrOptions:t,decryptionWorker:n,segment:i,abortFn:r,progressFn:s,trackInfoFn:o,timingInfoFn:a,videoSegmentTimingInfoFn:d,audioSegmentTimingInfoFn:l,id3Fn:c,captionsFn:u,isEndOfTimeline:p,endedTimelineFn:h,dataFn:f,doneFn:g,onTransmuxerLog:m})=>{const y=[],v=(({activeXhrs:e,decryptionWorker:t,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:d,endedTimelineFn:l,dataFn:c,doneFn:u,onTransmuxerLog:p})=>{let h=0,f=!1;return(g,m)=>{if(!f){if(g)return f=!0,ww(e),u(g,m);if(h+=1,h===e.length){const h=function(){if(m.encryptedBytes)return(({decryptionWorker:e,segment:t,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:d,endedTimelineFn:l,dataFn:c,doneFn:u,onTransmuxerLog:p})=>{Ew({id:t.requestId,key:t.key,encryptedBytes:t.encryptedBytes,decryptionWorker:e},(e=>{t.bytes=e,Cw({segment:t,bytes:t.bytes,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:d,endedTimelineFn:l,dataFn:c,doneFn:u,onTransmuxerLog:p})}))})({decryptionWorker:t,segment:m,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:d,endedTimelineFn:l,dataFn:c,doneFn:u,onTransmuxerLog:p});Cw({segment:m,bytes:m.bytes,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:d,endedTimelineFn:l,dataFn:c,doneFn:u,onTransmuxerLog:p})};if(m.endOfAllRequests=Date.now(),m.map&&m.map.encryptedBytes&&!m.map.bytes)return Ew({decryptionWorker:t,id:m.requestId+"-init",encryptedBytes:m.map.encryptedBytes,key:m.map.key},(t=>{m.map.bytes=t,Sw(m,(t=>{if(t)return ww(e),u(t,m);h()}))}));h()}}}})({activeXhrs:y,decryptionWorker:n,trackInfoFn:o,timingInfoFn:a,videoSegmentTimingInfoFn:d,audioSegmentTimingInfoFn:l,id3Fn:c,captionsFn:u,isEndOfTimeline:p,endedTimelineFn:h,dataFn:f,doneFn:g,onTransmuxerLog:m});if(i.key&&!i.key.bytes){const n=[i.key];i.map&&!i.map.bytes&&i.map.key&&i.map.key.resolvedUri===i.key.resolvedUri&&n.push(i.map.key);const r=e(Yb(t,{uri:i.key.resolvedUri,responseType:"arraybuffer"}),Iw(i,n,v));y.push(r)}if(i.map&&!i.map.bytes){if(i.map.key&&(!i.key||i.key.resolvedUri!==i.map.key.resolvedUri)){const n=e(Yb(t,{uri:i.map.key.resolvedUri,responseType:"arraybuffer"}),Iw(i,[i.map.key],v));y.push(n)}const n=Yb(t,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:$_(i.map)}),r=(({segment:e,finishProcessingFn:t})=>(n,i)=>{const r=Tw(n,i);if(r)return t(r,e);const s=new Uint8Array(i.response);if(e.map.key)return e.map.encryptedBytes=s,t(null,e);e.map.bytes=s,Sw(e,(function(n){if(n)return n.xhr=i,n.status=i.status,t(n,e);t(null,e)}))})({segment:i,finishProcessingFn:v}),s=e(n,r);y.push(s)}const b=Yb(t,{uri:i.part&&i.part.resolvedUri||i.resolvedUri,responseType:"arraybuffer",headers:$_(i)}),_=e(b,(({segment:e,finishProcessingFn:t,responseType:n})=>(i,r)=>{const s=Tw(i,r);if(s)return t(s,e);const o="arraybuffer"!==n&&r.responseText?(e=>{const t=new Uint8Array(new ArrayBuffer(e.length));for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer})(r.responseText.substring(e.lastReachedChar||0)):r.response;return e.stats=(e=>({bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}))(r),e.key?e.encryptedBytes=new Uint8Array(o):e.bytes=new Uint8Array(o),t(null,e)})({segment:i,finishProcessingFn:v,responseType:b.responseType}));_.addEventListener("progress",(({segment:e,progressFn:t,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:d,endedTimelineFn:l,dataFn:c})=>n=>{if(!n.target.aborted)return e.stats=Yb(e.stats,(e=>{const t=e.target,n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t.requestTime||0};return n.bytesReceived=e.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n})(n)),!e.stats.firstBytesReceivedAt&&e.stats.bytesReceived&&(e.stats.firstBytesReceivedAt=Date.now()),t(n,e)})({segment:i,progressFn:s,trackInfoFn:o,timingInfoFn:a,videoSegmentTimingInfoFn:d,audioSegmentTimingInfoFn:l,id3Fn:c,captionsFn:u,isEndOfTimeline:p,endedTimelineFn:h,dataFn:f})),y.push(_);const w={};return y.forEach((e=>{e.addEventListener("loadend",(({loadendState:e,abortFn:t})=>n=>{n.target.aborted&&t&&!e.calledAbortFn&&(t(),e.calledAbortFn=!0)})({loadendState:w,abortFn:r}))})),()=>ww(y)},Pw=Jb("CodecUtils"),xw=(e,t)=>{const n=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&n.AUDIO&&e.mediaGroups.AUDIO[n.AUDIO]},Dw=function(e){const t={};return e.forEach((({mediaType:e,type:n,details:i})=>{t[e]=t[e]||[],t[e].push(uh(`${n}${i}`))})),Object.keys(t).forEach((function(e){if(t[e].length>1)return Pw(`multiple ${e} codecs found as attributes: ${t[e].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),void(t[e]=null);t[e]=t[e][0]})),t},Ow=function(e){let t=0;return e.audio&&t++,e.video&&t++,t},Rw=function(e,t){const n=t.attributes||{},i=Dw(function(e){const t=e.attributes||{};if(t.CODECS)return ph(t.CODECS)}(t)||[]);if(xw(e,t)&&!i.audio&&!((e,t)=>{if(!xw(e,t))return!0;const n=t.attributes||{},i=e.mediaGroups.AUDIO[n.AUDIO];for(const e in i)if(!i[e].uri&&!i[e].playlists)return!0;return!1})(e,t)){const t=Dw(function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var i in n){var r=n[i];if(r.default&&r.playlists)return ph(r.playlists[0].attributes.CODECS)}return null}(e,n.AUDIO)||[]);t.audio&&(i.audio=t.audio)}return i},Nw=Jb("PlaylistSelector"),Mw=function(e){if(!e||!e.playlist)return;const t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})},Lw=function(e,t){if(!e)return"";const n=Mp().getComputedStyle(e);return n?n[t]:""},Uw=function(e,t){const n=e.slice();e.sort((function(e,i){const r=t(e,i);return 0===r?n.indexOf(e)-n.indexOf(i):r}))},jw=function(e,t){let n,i;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||Mp().Number.MAX_VALUE,t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),i=i||Mp().Number.MAX_VALUE,n-i};let Bw=function(e,t,n,i,r,s){if(!e)return;const o={bandwidth:t,width:n,height:i,limitRenditionByPlayerDimensions:r};let a=e.playlists;C_.isAudioOnly(e)&&(a=s.getAudioTrackPlaylists_(),o.audioOnly=!0);let d=a.map((e=>{let t;const n=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,i=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;return t=e.attributes&&e.attributes.BANDWIDTH,t=t||Mp().Number.MAX_VALUE,{bandwidth:t,width:n,height:i,playlist:e}}));Uw(d,((e,t)=>e.bandwidth-t.bandwidth)),d=d.filter((e=>!C_.isIncompatible(e.playlist)));let l=d.filter((e=>C_.isEnabled(e.playlist)));l.length||(l=d.filter((e=>!C_.isDisabled(e.playlist))));const c=l.filter((e=>e.bandwidth*aw.BANDWIDTH_VARIANCE<t));let u=c[c.length-1];const p=c.filter((e=>e.bandwidth===u.bandwidth))[0];if(!1===r){const e=p||l[0]||d[0];if(e&&e.playlist){let t="sortedPlaylistReps";return p&&(t="bandwidthBestRep"),l[0]&&(t="enabledPlaylistReps"),Nw(`choosing ${Mw(e)} using ${t} with options`,o),e.playlist}return Nw("could not choose a playlist with options",o),null}const h=c.filter((e=>e.width&&e.height));Uw(h,((e,t)=>e.width-t.width));const f=h.filter((e=>e.width===n&&e.height===i));u=f[f.length-1];const g=f.filter((e=>e.bandwidth===u.bandwidth))[0];let m,y,v,b;if(g||(m=h.filter((e=>e.width>n||e.height>i)),y=m.filter((e=>e.width===m[0].width&&e.height===m[0].height)),u=y[y.length-1],v=y.filter((e=>e.bandwidth===u.bandwidth))[0]),s.leastPixelDiffSelector){const e=h.map((e=>(e.pixelDiff=Math.abs(e.width-n)+Math.abs(e.height-i),e)));Uw(e,((e,t)=>e.pixelDiff===t.pixelDiff?t.bandwidth-e.bandwidth:e.pixelDiff-t.pixelDiff)),b=e[0]}const _=b||v||g||p||l[0]||d[0];if(_&&_.playlist){let e="sortedPlaylistReps";return b?e="leastPixelDiffRep":v?e="resolutionPlusOneRep":g?e="resolutionBestRep":p?e="bandwidthBestRep":l[0]&&(e="enabledPlaylistReps"),Nw(`choosing ${Mw(_)} using ${e} with options`,o),_.playlist}return Nw("could not choose a playlist with options",o),null};const qw=function(){const e=this.useDevicePixelRatio&&Mp().devicePixelRatio||1;return Bw(this.playlists.main,this.systemBandwidth,parseInt(Lw(this.tech_.el(),"width"),10)*e,parseInt(Lw(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.playlistController_)},Fw=function(e,t,n){let i,r;if(n&&n.cues)for(i=n.cues.length;i--;)r=n.cues[i],r.startTime>=e&&r.endTime<=t&&n.removeCue(r)},Vw=e=>"number"==typeof e&&isFinite(e),zw=1/60,$w=e=>{const{startOfSegment:t,duration:n,segment:i,part:r,playlist:{mediaSequence:s,id:o,segments:a=[]},mediaIndex:d,partIndex:l,timeline:c}=e,u=a.length-1;let p="mediaIndex/partIndex increment";e.getMediaInfoForTime?p=`getMediaInfoForTime (${e.getMediaInfoForTime})`:e.isSyncRequest&&(p="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(p+=` with independent ${e.independent}`);const h="number"==typeof l,f=e.segment.uri?"segment":"pre-segment",g=h?p_({preloadSegment:i})-1:0;return`${f} [${s+d}/${s+u}]`+(h?` part [${l}/${g}]`:"")+` segment start/end [${i.start} => ${i.end}]`+(h?` part start/end [${r.start} => ${r.end}]`:"")+` startOfSegment [${t}]`+` duration [${n}]`+` timeline [${c}]`+` selected by [${p}]`+` playlist [${o}]`},Hw=e=>`${e}TimingInfo`,Ww=({timelineChangeController:e,currentTimeline:t,segmentTimeline:n,loaderType:i,audioDisabled:r})=>{if(t===n)return!1;if("audio"===i){const t=e.lastTimelineChange({type:"main"});return!t||t.to!==n}if("main"===i&&r){const t=e.pendingTimelineChange({type:"audio"});return!t||t.to!==n}return!1},Zw=({segmentDuration:e,maxDuration:t})=>!!e&&Math.round(e)>t+e_;class Gw extends $b.EventTarget{constructor(e,t={}){if(super(),!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",(()=>{this.isEndOfStream_()||(this.ended_=!1)})),this.fetchAtBuffer_=!1,this.logger_=Jb(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(e){e!==this.state_&&(this.logger_(`${this.state_} -> ${e}`),this.state_=e,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",(()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})),"main"===this.loaderType_&&this.timelineChangeController_.on("pendingtimelinechange",(()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})),"audio"===this.loaderType_&&this.timelineChangeController_.on("timelinechange",(()=>{this.hasEnoughInfoToLoad_()&&this.processLoadQueue_(),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}))}createTransmuxer_(){return(e=>{const t=new hw;t.currentTransmux=null,t.transmuxQueue=[];const n=t.terminate;return t.terminate=()=>(t.currentTransmux=null,t.transmuxQueue.length=0,n.call(t)),t.postMessage({action:"init",options:e}),t})({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&Mp().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,Mp().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)}error(e){return void 0!==e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&yw(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return Qb();if("main"===this.loaderType_){const{hasAudio:t,hasVideo:n,isMuxed:i}=e;if(n&&t&&!this.audioDisabled_&&!i)return this.sourceUpdater_.buffered();if(n)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,t=!1){if(!e)return null;const n=X_(e);let i=this.initSegments_[n];return t&&!i&&e.bytes&&(this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),i||e}segmentKey(e,t=!1){if(!e)return null;const n=K_(e);let i=this.keyCache_[n];this.cacheEncryptionKeys_&&t&&!i&&e.bytes&&(this.keyCache_[n]=i={resolvedUri:e.resolvedUri,bytes:e.bytes});const r={resolvedUri:(i||e).resolvedUri};return i&&(r.bytes=i.bytes),r}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,t={}){if(!e)return;const n=this.playlist_,i=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));let r=null;if(n&&(n.id?r=n.id:n.uri&&(r=n.uri)),this.logger_(`playlist update [${r} => ${e.id||e.uri}]`),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri)return null!==this.mediaIndex&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");const s=e.mediaSequence-n.mediaSequence;if(this.logger_(`live window shift [${s}]`),null!==this.mediaIndex)if(this.mediaIndex-=s,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const e=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!e.parts||!e.parts.length||!e.parts[this.partIndex])){const e=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=e}}i&&(i.mediaIndex-=s,i.mediaIndex<0?(i.mediaIndex=null,i.partIndex=null):(i.mediaIndex>=0&&(i.segment=e.segments[i.mediaIndex]),i.partIndex>=0&&i.segment.parts&&(i.part=i.segment.parts[i.partIndex]))),this.syncController_.saveExpiredSegmentInfo(n,e)}pause(){this.checkBufferTimeout_&&(Mp().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return null===this.checkBufferTimeout_}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.resyncLoader()}resyncLoader(){this.transmuxer_&&yw(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,t,n=(()=>{}),i=!1){if(t===1/0&&(t=this.duration_()),t<=e)return void this.logger_("skipping remove because end ${end} is <= start ${start}");if(!this.sourceUpdater_||!this.getMediaInfo_())return void this.logger_("skipping remove because no source updater or starting media info");let r=1;const s=()=>{r--,0===r&&n()};!i&&this.audioDisabled_||(r++,this.sourceUpdater_.removeAudio(e,t,s)),(i||"main"===this.loaderType_)&&(this.gopBuffer_=((e,t,n,i)=>{const r=Math.ceil((t-i)*$f.ONE_SECOND_IN_TS),s=Math.ceil((n-i)*$f.ONE_SECOND_IN_TS),o=e.slice();let a=e.length;for(;a--&&!(e[a].pts<=s););if(-1===a)return o;let d=a+1;for(;d--&&!(e[d].pts<=r););return d=Math.max(d,0),o.splice(d,a-d+1),o})(this.gopBuffer_,e,t,this.timeMapping_),r++,this.sourceUpdater_.removeVideo(e,t,s));for(const n in this.inbandTextTracks_)Fw(e,t,this.inbandTextTracks_[n]);Fw(e,t,this.segmentMetadataTrack_),s()}monitorBuffer_(){this.checkBufferTimeout_&&Mp().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Mp().setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&Mp().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Mp().setTimeout(this.monitorBufferTick_.bind(this),500)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();e&&("number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}isEndOfStream_(e=this.mediaIndex,t=this.playlist_,n=this.partIndex){if(!t||!this.mediaSource_)return!1;const i="number"==typeof e&&t.segments[e],r=e+1===t.segments.length,s=!i||!i.parts||n+1===i.parts.length;return t.endList&&"open"===this.mediaSource_.readyState&&r&&s}chooseNextRequest_(){const e=this.buffered_(),t=a_(e)||0,n=d_(e,this.currentTime_()),i=!this.hasPlayed_()&&n>=1,r=n>=this.goalBufferLength_(),s=this.playlist_.segments;if(!s.length||i||r)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());const o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(o.isSyncRequest)o.mediaIndex=function(e,t,n){t=t||[];const i=[];let r=0;for(let s=0;s<t.length;s++){const o=t[s];if(e===o.timeline&&(i.push(s),r+=o.duration,r>n))return s}return 0===i.length?0:i[i.length-1]}(this.currentTimeline_,s,t);else if(null!==this.mediaIndex){const e=s[this.mediaIndex],n="number"==typeof this.partIndex?this.partIndex:-1;o.startOfSegment=e.end?e.end:t,e.parts&&e.parts[n+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=n+1):o.mediaIndex=this.mediaIndex+1}else{const{segmentIndex:e,startTime:n,partIndex:i}=C_.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?t:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});o.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${t}`:`currentTime ${this.currentTime_()}`,o.mediaIndex=e,o.startOfSegment=n,o.partIndex=i}const a=s[o.mediaIndex];let d=a&&"number"==typeof o.partIndex&&a.parts&&a.parts[o.partIndex];if(!a||"number"==typeof o.partIndex&&!d)return null;if("number"!=typeof o.partIndex&&a.parts&&(o.partIndex=0,d=a.parts[0]),!n&&d&&!d.independent)if(0===o.partIndex){const e=s[o.mediaIndex-1],t=e.parts&&e.parts.length&&e.parts[e.parts.length-1];t&&t.independent&&(o.mediaIndex-=1,o.partIndex=e.parts.length-1,o.independent="previous segment")}else a.parts[o.partIndex-1].independent&&(o.partIndex-=1,o.independent="previous part");const l=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return o.mediaIndex>=s.length-1&&l&&!this.seeking_()?null:this.generateSegmentInfo_(o)}generateSegmentInfo_(e){const{independent:t,playlist:n,mediaIndex:i,startOfSegment:r,isSyncRequest:s,partIndex:o,forceTimestampOffset:a,getMediaInfoForTime:d}=e,l=n.segments[i],c="number"==typeof o&&l.parts[o],u={requestId:"segment-loader-"+Math.random(),uri:c&&c.resolvedUri||l.resolvedUri,mediaIndex:i,partIndex:c?o:null,isSyncRequest:s,startOfSegment:r,playlist:n,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:l.timeline,duration:c&&c.duration||l.duration,segment:l,part:c,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:d,independent:t},p=void 0!==a?a:this.isPendingTimestampOffset_;u.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:l.timeline,currentTimeline:this.currentTimeline_,startOfSegment:r,buffered:this.buffered_(),overrideCheck:p});const h=a_(this.sourceUpdater_.audioBuffered());return"number"==typeof h&&(u.audioAppendStart=h-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(u.gopsToAlignWith=((e,t,n)=>{if(null==t||!e.length)return[];const i=Math.ceil((t-n+3)*$f.ONE_SECOND_IN_TS);let r;for(r=0;r<e.length&&!(e[r].pts>i);r++);return e.slice(r)})(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),u}timestampOffsetForSegment_(e){return(({segmentTimeline:e,currentTimeline:t,startOfSegment:n,buffered:i,overrideCheck:r})=>r||e!==t?e<t?n:i.length?i.end(i.length-1):n:null)(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const t=this.currentTime_(),n=e.bandwidth,i=this.pendingSegment_.duration,r=C_.estimateSegmentRequestTime(i,n,this.playlist_,e.bytesReceived),s=function(e,t,n=1){return((e.length?e.end(e.length-1):0)-t)/n}(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(r<=s)return;const o=function(e){const{main:t,currentTime:n,bandwidth:i,duration:r,segmentDuration:s,timeUntilRebuffer:o,currentTimeline:a,syncController:d}=e,l=t.playlists.filter((e=>!C_.isIncompatible(e)));let c=l.filter(C_.isEnabled);c.length||(c=l.filter((e=>!C_.isDisabled(e))));const u=c.filter(C_.hasAttribute.bind(null,"BANDWIDTH")).map((e=>{const t=d.getSyncPoint(e,r,a,n)?1:2;return{playlist:e,rebufferingImpact:C_.estimateSegmentRequestTime(s,i,e)*t-o}})),p=u.filter((e=>e.rebufferingImpact<=0));return Uw(p,((e,t)=>jw(t.playlist,e.playlist))),p.length?p[0]:(Uw(u,((e,t)=>e.rebufferingImpact-t.rebufferingImpact)),u[0]||null)}({main:this.vhs_.playlists.main,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:s,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!o)return;const a=r-s-o.rebufferingImpact;let d=.5;s<=e_&&(d=1),!o.playlist||o.playlist.uri===this.playlist_.uri||a<d||(this.bandwidth=o.playlist.attributes.BANDWIDTH*aw.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${$w(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,t){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.trigger("progress")}handleTrackInfo_(e,t){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.checkForIllegalMediaSwitch(t)||(t=t||{},function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;const n=Object.keys(e).sort(),i=Object.keys(t).sort();if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++){const s=n[r];if(s!==i[r])return!1;if(e[s]!==t[s])return!1}return!0}(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),this.checkForAbort_(e.requestId)||(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))}handleTimingInfo_(e,t,n,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const r=this.pendingSegment_,s=Hw(t);r[s]=r[s]||{},r[s][n]=i,this.logger_(`timinginfo: ${t} - ${n} - ${i}`),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}handleCaptions_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(0===t.length)return void this.logger_("SegmentLoader received no captions from a caption event");if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));const n=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),i={};t.forEach((e=>{i[e.stream]=i[e.stream]||{startTime:1/0,captions:[],endTime:0};const t=i[e.stream];t.startTime=Math.min(t.startTime,e.startTime+n),t.endTime=Math.max(t.endTime,e.endTime+n),t.captions.push(e)})),Object.keys(i).forEach((e=>{const{startTime:t,endTime:r,captions:s}=i[e],o=this.inbandTextTracks_;this.logger_(`adding cues from ${t} -> ${r} for ${e}`),function(e,t,n){if(!e[n]){t.trigger({type:"usage",name:"vhs-608"});let i=n;/^cc708_/.test(n)&&(i="SERVICE"+n.split("_")[1]);const r=t.textTracks().getTrackById(i);if(r)e[n]=r;else{let r=n,s=n,o=!1;const a=(t.options_.vhs&&t.options_.vhs.captionServices||{})[i];a&&(r=a.label,s=a.language,o=a.default),e[n]=t.addRemoteTextTrack({kind:"captions",id:i,default:o,label:r,language:s},!1).track}}}(o,this.vhs_.tech_,e),Fw(t,r,o[e]),function({inbandTextTracks:e,captionArray:t,timestampOffset:n}){if(!t)return;const i=Mp().WebKitDataCue||Mp().VTTCue;t.forEach((t=>{const r=t.stream;e[r].addCue(new i(t.startTime+n,t.endTime+n,t.text))}))}({captionArray:s,inbandTextTracks:o,timestampOffset:n})})),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,t,n){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||(this.pendingSegment_.hasAppendedData_?this.addMetadataToTextTrack(n,t,this.duration_()):this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,n)))}processMetadataQueue_(){this.metadataQueue_.id3.forEach((e=>e())),this.metadataQueue_.caption.forEach((e=>e())),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach((e=>e()))}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach((e=>e()))}hasEnoughInfoToLoad_(){if("audio"!==this.loaderType_)return!0;const e=this.pendingSegment_;return!(!e||this.getCurrentMediaInfo_()&&Ww({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;const{hasAudio:n,hasVideo:i,isMuxed:r}=t;return!(i&&!e.videoTimingInfo||n&&!this.audioDisabled_&&!r&&!e.audioTimingInfo||Ww({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return void this.callQueue_.push(this.handleData_.bind(this,e,t));const n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.part||n.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),n.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),n.isFmp4=e.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4)this.trigger("fmp4"),n.timingInfo.start=n[Hw(t.type)].start;else{const e=this.getCurrentMediaInfo_(),t="main"===this.loaderType_&&e&&e.hasVideo;let i;t&&(i=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:t,firstVideoFrameTimeForData:i,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(n,t.type),this.updateSourceBufferTimestampOffset_(n),n.isSyncRequest){this.updateTimingInfoEnd_(n),this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:"main"===this.loaderType_});const e=this.chooseNextRequest_();if(e.mediaIndex!==n.mediaIndex||e.partIndex!==n.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}n.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(n,t)}}updateAppendInitSegmentStatus(e,t){"main"!==this.loaderType_||"number"!=typeof e.timestampOffset||e.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:t,map:n,playlist:i}){if(n){const e=X_(n);if(this.activeInitSegmentId_===e)return null;t=this.initSegmentForMap(n,!0).bytes,this.activeInitSegmentId_=e}return t&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=i,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,t):null}handleQuotaExceededError_({segmentInfo:e,type:t,bytes:n},i){const r=this.sourceUpdater_.audioBuffered(),s=this.sourceUpdater_.videoBuffered();r.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+o_(r).join(", ")),s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+o_(s).join(", "));const o=r.length?r.start(0):0,a=r.length?r.end(r.length-1):0,d=s.length?s.start(0):0,l=s.length?s.end(s.length-1):0;if(a-o<=1&&l-d<=1)return this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${n.byteLength}, audio buffer: ${o_(r).join(", ")}, video buffer: ${o_(s).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:t,bytes:n}));const c=this.currentTime_()-1;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${c}`),this.remove(0,c,(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=Mp().setTimeout((()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()}),1e3)}),!0)}handleAppendError_({segmentInfo:e,type:t,bytes:n},i){i&&(22!==i.code?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",i),this.error(`${t} append of ${n.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:e,type:t,bytes:n}))}appendToSourceBuffer_({segmentInfo:e,type:t,initSegment:n,data:i,bytes:r}){if(!r){const e=[i];let t=i.byteLength;n&&(e.unshift(n),t+=n.byteLength),r=(e=>{let t,n=0;return e.bytes&&(t=new Uint8Array(e.bytes),e.segments.forEach((e=>{t.set(e,n),n+=e.byteLength}))),t})({bytes:t,segments:e})}this.sourceUpdater_.appendBuffer({segmentInfo:e,type:t,bytes:r},this.handleAppendError_.bind(this,{segmentInfo:e,type:t,bytes:r}))}handleSegmentTimingInfo_(e,t,n){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId)return;const i=this.pendingSegment_.segment,r=`${e}TimingInfo`;i[r]||(i[r]={}),i[r].transmuxerPrependedSeconds=n.prependedContentDuration||0,i[r].transmuxedPresentationStart=n.start.presentation,i[r].transmuxedDecodeStart=n.start.decode,i[r].transmuxedPresentationEnd=n.end.presentation,i[r].transmuxedDecodeEnd=n.end.decode,i[r].baseMediaDecodeTime=n.baseMediaDecodeTime}appendData_(e,t){const{type:n,data:i}=t;if(!i||!i.byteLength)return;if("audio"===n&&this.audioDisabled_)return;const r=this.getInitSegmentAndUpdateState_({type:n,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:r,data:i})}loadSegment_(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"==typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push((()=>{const t=Gp({},e,{forceTimestampOffset:!0});Gp(e,this.generateSegmentInfo_(t)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)}))}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const t=this.createSimplifiedSegmentObj_(e),n=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),i=null!==this.mediaIndex,r=e.timeline!==this.currentTimeline_&&e.timeline>0,s=n||i&&r;this.logger_(`Requesting ${$w(e)}`),t.map&&!t.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=Aw({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:s,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:t,level:n,stream:i})=>{this.logger_(`${$w(e)} logged from transmuxer stream ${i} as a ${n}: ${t}`)}})}trimBackBuffer_(e){const t=((e,t,n)=>{let i=t-aw.BACK_BUFFER_LENGTH;e.length&&(i=Math.max(i,e.start(0)));const r=t-n;return Math.min(r,i)})(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}createSimplifiedSegmentObj_(e){const t=e.segment,n=e.part,i={resolvedUri:n?n.resolvedUri:t.resolvedUri,byterange:n?n.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},r=e.playlist.segments[e.mediaIndex-1];if(r&&r.timeline===t.timeline&&(r.videoTimingInfo?i.baseStartTime=r.videoTimingInfo.transmuxedDecodeEnd:r.audioTimingInfo&&(i.baseStartTime=r.audioTimingInfo.transmuxedDecodeEnd)),t.key){const n=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);i.key=this.segmentKey(t.key),i.key.iv=n}return t.map&&(i.map=this.initSegmentForMap(t.map)),i}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,t){this.pendingSegment_.byteLength=t.bytesReceived,e<zw?this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record 0.016666666666666666`):(this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime)}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,t,n){if(this.callQueue_.length)return void this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,n));if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return;if(t.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===_w)return;return this.pause(),e.code===bw?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}const i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),i.endOfAllRequests=t.endOfAllRequests,n.gopInfo&&(this.gopBuffer_=((e,t,n)=>{if(!t.length)return e;if(n)return t.slice();const i=t[0].pts;let r=0;for(;r<e.length&&!(e[r].pts>=i);r++);return e.slice(0,r).concat(t)})(this.gopBuffer_,n.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(i)}setTimeMapping_(e){const t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)}updateMediaSecondsLoaded_(e){"number"==typeof e.start&&"number"==typeof e.end?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())}trueSegmentStart_({currentStart:e,playlist:t,mediaIndex:n,firstVideoFrameTimeForData:i,currentVideoTimestampOffset:r,useVideoTimingInfo:s,videoTimingInfo:o,audioTimingInfo:a}){if(void 0!==e)return e;if(!s)return a.start;const d=t.segments[n-1];return 0!==n&&d&&void 0!==d.start&&d.end===i+r?o.start:i}waitForAppendsToComplete_(e){const t=this.getCurrentMediaInfo_(e);if(!t)return this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),void this.trigger("error");const{hasAudio:n,hasVideo:i,isMuxed:r}=t,s="main"===this.loaderType_&&i,o=!this.audioDisabled_&&n&&!r;if(e.waitingOnAppends=0,!e.hasAppendedData_)return e.timingInfo||"number"!=typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);s&&e.waitingOnAppends++,o&&e.waitingOnAppends++,s&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const t=((e,t,n)=>"main"===e&&t&&n?n.hasAudio||n.hasVideo?t.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null)(this.loaderType_,this.getCurrentMediaInfo_(),e);return!!t&&(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0)}updateSourceBufferTimestampOffset_(e){if(null===e.timestampOffset||"number"!=typeof e.timingInfo.start||e.changedTimestampOffset||"main"!==this.loaderType_)return;let t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:t,timingInfo:n}){return this.useDtsForTimestampOffset_?e&&"number"==typeof e.transmuxedDecodeStart?e.transmuxedDecodeStart:t&&"number"==typeof t.transmuxedDecodeStart?t.transmuxedDecodeStart:n.start:n.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const t=this.getMediaInfo_(),n="main"===this.loaderType_&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;n&&(e.timingInfo.end="number"==typeof n.end?n.end:n.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());const e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});const t=((e,t)=>{if("hls"!==t)return null;const n=(e=>{let t=0;return["video","audio"].forEach((function(n){const i=e[`${n}TimingInfo`];if(!i)return;const{start:r,end:s}=i;let o;"bigint"==typeof r||"bigint"==typeof s?o=Mp().BigInt(s)-Mp().BigInt(r):"number"==typeof r&&"number"==typeof s&&(o=s-r),void 0!==o&&o>t&&(t=o)})),"bigint"==typeof t&&t<Number.MAX_SAFE_INTEGER&&(t=Number(t)),t})({audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo});if(!n)return null;const i=e.playlist.targetDuration,r=Zw({segmentDuration:n,maxDuration:2*i}),s=Zw({segmentDuration:n,maxDuration:i}),o=`Segment with index ${e.mediaIndex} from playlist ${e.playlist.id} has a duration of ${n} when the reported duration is ${e.duration} and the target duration is ${i}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return r||s?{severity:r?"warn":"info",message:o}:null})(e,this.sourceType_);if(t&&("warn"===t.severity?$b.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_))return void this.logger_(`Throwing away un-appended sync request ${$w(e)}`);this.logger_(`Appended ${$w(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const n=e.segment,i=e.part,r=n.end&&this.currentTime_()-n.end>3*e.playlist.targetDuration,s=i&&i.end&&this.currentTime_()-i.end>3*e.playlist.partTargetDuration;if(r||s)return this.logger_(`bad ${r?"segment":"part"} ${$w(e)}`),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<zw)return void this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record 0.016666666666666666`);const t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,i=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(i-t)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const t=e.segment,n=t.start,i=t.end;if(!Vw(n)||!Vw(i))return;Fw(n,i,this.segmentMetadataTrack_);const r=Mp().WebKitDataCue||Mp().VTTCue,s={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:n,end:i},o=new r(n,i,JSON.stringify(s));o.value=s,this.segmentMetadataTrack_.addCue(o)}}function Xw(){}const Kw=function(e){return"string"!=typeof e?e:e.replace(/./,(e=>e.toUpperCase()))},Jw=["video","audio"],Yw=(e,t)=>{const n=t[`${e}Buffer`];return n&&n.updating||t.queuePending[e]},Qw=(e,t)=>{if(0===t.queue.length)return;let n=0,i=t.queue[n];if("mediaSource"!==i.type){if("mediaSource"!==e&&t.ready()&&"closed"!==t.mediaSource.readyState&&!Yw(e,t)){if(i.type!==e){if(n=((e,t)=>{for(let n=0;n<t.length;n++){const i=t[n];if("mediaSource"===i.type)return null;if(i.type===e)return n}return null})(e,t.queue),null===n)return;i=t.queue[n]}return t.queue.splice(n,1),t.queuePending[e]=i,i.action(e,t),i.doneFn?void 0:(t.queuePending[e]=null,void Qw(e,t))}}else t.updating()||"closed"===t.mediaSource.readyState||(t.queue.shift(),i.action(t),i.doneFn&&i.doneFn(),Qw("audio",t),Qw("video",t))},eT=(e,t)=>{const n=t[`${e}Buffer`],i=Kw(e);n&&(n.removeEventListener("updateend",t[`on${i}UpdateEnd_`]),n.removeEventListener("error",t[`on${i}Error_`]),t.codecs[e]=null,t[`${e}Buffer`]=null)},tT=(e,t)=>e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t),nT=(e,t,n)=>(i,r)=>{const s=r[`${i}Buffer`];if(tT(r.mediaSource,s)){r.logger_(`Appending segment ${t.mediaIndex}'s ${e.length} bytes to ${i}Buffer`);try{s.appendBuffer(e)}catch(e){r.logger_(`Error with code ${e.code} `+(22===e.code?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${t.mediaIndex} to ${i}Buffer`),r.queuePending[i]=null,n(e)}}},iT=(e,t)=>(n,i)=>{const r=i[`${n}Buffer`];if(tT(i.mediaSource,r)){i.logger_(`Removing ${e} to ${t} from ${n}Buffer`);try{r.remove(e,t)}catch(r){i.logger_(`Remove ${e} to ${t} from ${n}Buffer failed`)}}},rT=e=>(t,n)=>{const i=n[`${t}Buffer`];tT(n.mediaSource,i)&&(n.logger_(`Setting ${t}timestampOffset to ${e}`),i.timestampOffset=e)},sT=e=>(t,n)=>{e()},oT=e=>t=>{if("open"===t.mediaSource.readyState){t.logger_(`Calling mediaSource endOfStream(${e||""})`);try{t.mediaSource.endOfStream(e)}catch(e){$b.log.warn("Failed to call media source endOfStream",e)}}},aT=e=>t=>{t.logger_(`Setting mediaSource duration to ${e}`);try{t.mediaSource.duration=e}catch(e){$b.log.warn("Failed to set media source duration",e)}},dT=(e,t)=>n=>{const i=Kw(e),r=fh(t);n.logger_(`Adding ${e}Buffer with codec ${t} to mediaSource`);const s=n.mediaSource.addSourceBuffer(r);s.addEventListener("updateend",n[`on${i}UpdateEnd_`]),s.addEventListener("error",n[`on${i}Error_`]),n.codecs[e]=t,n[`${e}Buffer`]=s},lT=e=>t=>{const n=t[`${e}Buffer`];if(eT(e,t),tT(t.mediaSource,n)){t.logger_(`Removing ${e}Buffer with codec ${t.codecs[e]} from mediaSource`);try{t.mediaSource.removeSourceBuffer(n)}catch(t){$b.log.warn(`Failed to removeSourceBuffer ${e}Buffer`,t)}}},cT=e=>(t,n)=>{const i=n[`${t}Buffer`],r=fh(e);tT(n.mediaSource,i)&&n.codecs[t]!==e&&(n.logger_(`changing ${t}Buffer codec from ${n.codecs[t]} to ${e}`),i.changeType(r),n.codecs[t]=e)},uT=({type:e,sourceUpdater:t,action:n,doneFn:i,name:r})=>{t.queue.push({type:e,action:n,doneFn:i,name:r}),Qw(e,t)},pT=(e,t)=>n=>{if(t.queuePending[e]){const n=t.queuePending[e].doneFn;t.queuePending[e]=null,n&&n(t[`${e}Error_`])}Qw(e,t)};class hT extends $b.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>Qw("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=Jb("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=pT("video",this),this.onAudioUpdateEnd_=pT("audio",this),this.onVideoError_=e=>{this.videoError_=e},this.onAudioError_=e=>{this.audioError_=e},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,t){uT({type:"mediaSource",sourceUpdater:this,action:dT(e,t),name:"addSourceBuffer"})}abort(e){uT({type:e,sourceUpdater:this,action:(e,t)=>{if("open"!==t.mediaSource.readyState)return;const n=t[`${e}Buffer`];if(tT(t.mediaSource,n)){t.logger_(`calling abort on ${e}Buffer`);try{n.abort()}catch(t){$b.log.warn(`Failed to abort on ${e}Buffer`,t)}}},name:"abort"})}removeSourceBuffer(e){this.canRemoveSourceBuffer()?uT({type:"mediaSource",sourceUpdater:this,action:lT(e),name:"removeSourceBuffer"}):$b.log.error("removeSourceBuffer is not supported!")}canRemoveSourceBuffer(){return!$b.browser.IS_FIREFOX&&Mp().MediaSource&&Mp().MediaSource.prototype&&"function"==typeof Mp().MediaSource.prototype.removeSourceBuffer}static canChangeType(){return Mp().SourceBuffer&&Mp().SourceBuffer.prototype&&"function"==typeof Mp().SourceBuffer.prototype.changeType}canChangeType(){return this.constructor.canChangeType()}changeType(e,t){this.canChangeType()?uT({type:e,sourceUpdater:this,action:cT(t),name:"changeType"}):$b.log.error("changeType is not supported!")}addOrChangeSourceBuffers(e){if(!e||"object"!=typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach((t=>{const n=e[t];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(t,n);this.canChangeType()&&this.changeType(t,n)}))}appendBuffer(e,t){const{segmentInfo:n,type:i,bytes:r}=e;if(this.processedAppend_=!0,"audio"===i&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_(`delayed audio append of ${r.length} until video append`);if(uT({type:i,sourceUpdater:this,action:nT(r,n||{mediaIndex:-1},t),doneFn:t,name:"appendBuffer"}),"video"===i){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const e=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${e.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,e.forEach((e=>{this.appendBuffer.apply(this,e)}))}}audioBuffered(){return tT(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Qb()}videoBuffered(){return tT(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Qb()}buffered(){const e=tT(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=tT(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():function(e,t){let n=null,i=null,r=0;const s=[],o=[];if(!(e&&e.length&&t&&t.length))return Qb();let a=e.length;for(;a--;)s.push({time:e.start(a),type:"start"}),s.push({time:e.end(a),type:"end"});for(a=t.length;a--;)s.push({time:t.start(a),type:"start"}),s.push({time:t.end(a),type:"end"});for(s.sort((function(e,t){return e.time-t.time})),a=0;a<s.length;a++)"start"===s[a].type?(r++,2===r&&(n=s[a].time)):"end"===s[a].type&&(r--,1===r&&(i=s[a].time)),null!==n&&null!==i&&(o.push([n,i]),n=null,i=null);return Qb(o)}(this.audioBuffered(),this.videoBuffered())}setDuration(e,t=Xw){uT({type:"mediaSource",sourceUpdater:this,action:aT(e),name:"duration",doneFn:t})}endOfStream(e=null,t=Xw){"string"!=typeof e&&(e=void 0),uT({type:"mediaSource",sourceUpdater:this,action:oT(e),name:"endOfStream",doneFn:t})}removeAudio(e,t,n=Xw){this.audioBuffered().length&&0!==this.audioBuffered().end(0)?uT({type:"audio",sourceUpdater:this,action:iT(e,t),doneFn:n,name:"remove"}):n()}removeVideo(e,t,n=Xw){this.videoBuffered().length&&0!==this.videoBuffered().end(0)?uT({type:"video",sourceUpdater:this,action:iT(e,t),doneFn:n,name:"remove"}):n()}updating(){return!(!Yw("audio",this)&&!Yw("video",this))}audioTimestampOffset(e){return void 0!==e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(uT({type:"audio",sourceUpdater:this,action:rT(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return void 0!==e&&this.videoBuffer&&this.videoTimestampOffset!==e&&(uT({type:"video",sourceUpdater:this,action:rT(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&uT({type:"audio",sourceUpdater:this,action:sT(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&uT({type:"video",sourceUpdater:this,action:sT(e),name:"callback"})}dispose(){this.trigger("dispose"),Jw.forEach((e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`]((()=>eT(e,this)))})),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const fT=e=>decodeURIComponent(escape(String.fromCharCode.apply(null,e))),gT=new Uint8Array("\n\n".split("").map((e=>e.charCodeAt(0))));class mT extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class yT extends Gw{constructor(e,t={}){super(e,t),this.mediaSource_=null,this.subtitlesTrack_=null,this.loaderType_="subtitle",this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Qb();const e=this.subtitlesTrack_.cues;return Qb([[e[0].startTime,e[e.length-1].startTime]])}initSegmentForMap(e,t=!1){if(!e)return null;const n=X_(e);let i=this.initSegments_[n];if(t&&!i&&e.bytes){const t=gT.byteLength+e.bytes.byteLength,r=new Uint8Array(t);r.set(e.bytes),r.set(gT,e.bytes.byteLength),this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:r}}return i||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}remove(e,t){Fw(e,t,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(null===this.syncController_.timestampOffsetForTimeline(e.timeline)){const e=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};return this.syncController_.one("timestampoffset",e),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,t,n){if(!this.subtitlesTrack_)return void(this.state="READY");if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return e.code===bw&&this.handleTimeout_(),e.code===_w?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);const i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");const r=i.segment;if(r.map&&(r.map.bytes=t.map.bytes),i.bytes=t.bytes,"function"!=typeof Mp().WebVTT&&"function"==typeof this.loadVttJs)return this.state="WAITING_ON_VTTJS",void this.loadVttJs().then((()=>this.segmentRequestFinished_(e,t,n)),(()=>this.stopForError({message:"Error loading vtt.js"})));r.requested=!0;try{this.parseVTTCues_(i)}catch(e){return void this.stopForError({message:e.message})}if(this.updateTimeMapping_(i,this.syncController_.timelines[i.timeline],this.playlist_),i.cues.length?i.timingInfo={start:i.cues[0].startTime,end:i.cues[i.cues.length-1].endTime}:i.timingInfo={start:i.startOfSegment,end:i.startOfSegment+i.duration},i.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");i.byteLength=i.bytes.byteLength,this.mediaSecondsLoaded+=r.duration,i.cues.forEach((e=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new(Mp().VTTCue)(e.startTime,e.endTime,e.text):e)})),function(e){const t=e.cues;if(!t)return;const n={};for(let i=t.length-1;i>=0;i--){const r=t[i],s=`${r.startTime}-${r.endTime}-${r.text}`;n[s]?e.removeCue(r):n[s]=r}}(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(e){let t,n=!1;if("function"!=typeof Mp().WebVTT)throw new mT;"function"==typeof Mp().TextDecoder?t=new(Mp().TextDecoder)("utf8"):(t=Mp().WebVTT.StringDecoder(),n=!0);const i=new(Mp().WebVTT.Parser)(Mp(),Mp().vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},i.oncue=e.cues.push.bind(e.cues),i.ontimestampmap=t=>{e.timestampmap=t},i.onparsingerror=e=>{$b.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){let t=e.segment.map.bytes;n&&(t=fT(t)),i.parse(t)}let r=e.bytes;n&&(r=fT(r)),i.parse(r),i.flush()}updateTimeMapping_(e,t,n){const i=e.segment;if(!t)return;if(!e.cues.length)return void(i.empty=!0);const r=e.timestampmap,s=r.MPEGTS/$f.ONE_SECOND_IN_TS-r.LOCAL+t.mapping;if(e.cues.forEach((e=>{e.startTime+=s,e.endTime+=s})),!n.syncInfo){const t=e.cues[0].startTime,r=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(t,r-i.duration)}}}}const vT=function(e,t){const n=e.cues;for(let e=0;e<n.length;e++){const i=n[e];if(t>=i.adStartTime&&t<=i.adEndTime)return i}return null},bT=[{name:"VOD",run:(e,t,n,i,r)=>n!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"ProgramDateTime",run:(e,t,n,i,r)=>{if(!Object.keys(e.timelineToDatetimeMappings).length)return null;let s=null,o=null;const a=c_(t);r=r||0;for(let n=0;n<a.length;n++){const i=a[t.endList||0===r?n:a.length-(n+1)],d=i.segment,l=e.timelineToDatetimeMappings[d.timeline];if(!l||!d.dateTimeObject)continue;let c=d.dateTimeObject.getTime()/1e3+l;if(d.parts&&"number"==typeof i.partIndex)for(let e=0;e<i.partIndex;e++)c+=d.parts[e].duration;const u=Math.abs(r-c);if(null!==o&&(0===u||o<u))break;o=u,s={time:c,segmentIndex:i.segmentIndex,partIndex:i.partIndex}}return s}},{name:"Segment",run:(e,t,n,i,r)=>{let s=null,o=null;r=r||0;const a=c_(t);for(let e=0;e<a.length;e++){const n=a[t.endList||0===r?e:a.length-(e+1)],d=n.segment,l=n.part&&n.part.start||d&&d.start;if(d.timeline===i&&void 0!==l){const e=Math.abs(r-l);if(null!==o&&o<e)break;(!s||null===o||o>=e)&&(o=e,s={time:l,segmentIndex:n.segmentIndex,partIndex:n.partIndex})}}return s}},{name:"Discontinuity",run:(e,t,n,i,r)=>{let s=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length){let n=null;for(let i=0;i<t.discontinuityStarts.length;i++){const o=t.discontinuityStarts[i],a=t.discontinuitySequence+i+1,d=e.discontinuities[a];if(d){const e=Math.abs(r-d.time);if(null!==n&&n<e)break;(!s||null===n||n>=e)&&(n=e,s={time:d.time,segmentIndex:o,partIndex:null})}}}return s}},{name:"Playlist",run:(e,t,n,i,r)=>t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}:null}];class _T extends $b.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={},this.logger_=Jb("SyncController")}getSyncPoint(e,t,n,i){const r=this.runStrategies_(e,t,n,i);return r.length?this.selectSyncPoint_(r,{key:"time",value:i}):null}getExpiredTime(e,t){if(!e||!e.segments)return null;const n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;const i=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return i.segmentIndex>0&&(i.time*=-1),Math.abs(i.time+m_({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:i.segmentIndex,endIndex:0}))}runStrategies_(e,t,n,i){const r=[];for(let s=0;s<bT.length;s++){const o=bT[s],a=o.run(this,e,t,n,i);a&&(a.strategy=o.name,r.push({strategy:o.name,syncPoint:a}))}return r}selectSyncPoint_(e,t){let n=e[0].syncPoint,i=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy;for(let s=1;s<e.length;s++){const o=Math.abs(e[s].syncPoint[t.key]-t.value);o<i&&(i=o,n=e[s].syncPoint,r=e[s].strategy)}return this.logger_(`syncPoint for [${t.key}: ${t.value}] chosen with strategy [${r}]: [time:${n.time}, segmentIndex:${n.segmentIndex}`+("number"==typeof n.partIndex?`,partIndex:${n.partIndex}`:"")+"]"),n}saveExpiredSegmentInfo(e,t){const n=t.mediaSequence-e.mediaSequence;if(n>86400)$b.log.warn(`Not saving expired segment info. Media sequence gap ${n} is too large.`);else for(let i=n-1;i>=0;i--){const n=e.segments[i];if(n&&void 0!==n.start){t.syncInfo={mediaSequence:e.mediaSequence+i,time:n.start},this.logger_(`playlist refresh sync: [time:${t.syncInfo.time}, mediaSequence: ${t.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const t=e.segments[0],n=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-n}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:t}){const n=this.calculateSegmentTimeMapping_(e,e.timingInfo,t),i=e.segment;n&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:i.start}));const r=i.dateTimeObject;i.discontinuity&&t&&r&&(this.timelineToDatetimeMappings[i.timeline]=-r.getTime()/1e3)}timestampOffsetForTimeline(e){return void 0===this.timelines[e]?null:this.timelines[e].time}mappingForTimeline(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,t,n){const i=e.segment,r=e.part;let s,o,a=this.timelines[e.timeline];if("number"==typeof e.timestampOffset)a={time:e.startOfSegment,mapping:e.startOfSegment-t.start},n&&(this.timelines[e.timeline]=a,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${a.time}] [mapping: ${a.mapping}]`)),s=e.startOfSegment,o=t.end+a.mapping;else{if(!a)return!1;s=t.start+a.mapping,o=t.end+a.mapping}return r&&(r.start=s,r.end=o),(!i.start||s<i.start)&&(i.start=s),i.end=o,!0}saveDiscontinuitySyncInfo_(e){const t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(let i=0;i<t.discontinuityStarts.length;i++){const r=t.discontinuityStarts[i],s=t.discontinuitySequence+i+1,o=r-e.mediaIndex,a=Math.abs(o);if(!this.discontinuities[s]||this.discontinuities[s].accuracy>a){let i;i=o<0?n.start-m_({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:r}):n.end+m_({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:r}),this.discontinuities[s]={time:i,accuracy:a}}}}dispose(){this.trigger("dispose"),this.off()}}class wT extends $b.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:t,to:n}){return"number"==typeof t&&"number"==typeof n&&(this.pendingTimelineChanges_[e]={type:e,from:t,to:n},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:t,to:n}){return"number"==typeof t&&"number"==typeof n&&(this.lastTimelineChanges_[e]={type:e,from:t,to:n},delete this.pendingTimelineChanges_[e],this.trigger("timelinechange")),this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const TT=cw(uw((function(){var e=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),s=t.length,o=0;o<s;++o)t[o].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}();let t=null;class n{constructor(e){let n,i,r;t||(t=function(){const e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],n=e[1],i=t[4],r=n[4];let s,o,a;const d=[],l=[];let c,u,p,h,f,g;for(s=0;s<256;s++)l[(d[s]=s<<1^283*(s>>7))^s]=s;for(o=a=0;!i[o];o^=c||1,a=l[a]||1)for(h=a^a<<1^a<<2^a<<3^a<<4,h=h>>8^255&h^99,i[o]=h,r[h]=o,p=d[u=d[c=d[o]]],g=16843009*p^65537*u^257*c^16843008*o,f=257*d[h]^16843008*h,s=0;s<4;s++)t[s][o]=f=f<<24^f>>>8,n[s][h]=g=g<<24^g>>>8;for(s=0;s<5;s++)t[s]=t[s].slice(0),n[s]=n[s].slice(0);return e}()),this._tables=[[t[0][0].slice(),t[0][1].slice(),t[0][2].slice(),t[0][3].slice(),t[0][4].slice()],[t[1][0].slice(),t[1][1].slice(),t[1][2].slice(),t[1][3].slice(),t[1][4].slice()]];const s=this._tables[0][4],o=this._tables[1],a=e.length;let d=1;if(4!==a&&6!==a&&8!==a)throw new Error("Invalid aes key size");const l=e.slice(0),c=[];for(this._key=[l,c],n=a;n<4*a+28;n++)r=l[n-1],(n%a==0||8===a&&n%a==4)&&(r=s[r>>>24]<<24^s[r>>16&255]<<16^s[r>>8&255]<<8^s[255&r],n%a==0&&(r=r<<8^r>>>24^d<<24,d=d<<1^283*(d>>7))),l[n]=l[n-a]^r;for(i=0;n;i++,n--)r=l[3&i?n:n-4],c[i]=n<=4||i<4?r:o[0][s[r>>>24]]^o[1][s[r>>16&255]]^o[2][s[r>>8&255]]^o[3][s[255&r]]}decrypt(e,t,n,i,r,s){const o=this._key[1];let a,d,l,c=e^o[0],u=i^o[1],p=n^o[2],h=t^o[3];const f=o.length/4-2;let g,m=4;const y=this._tables[1],v=y[0],b=y[1],_=y[2],w=y[3],T=y[4];for(g=0;g<f;g++)a=v[c>>>24]^b[u>>16&255]^_[p>>8&255]^w[255&h]^o[m],d=v[u>>>24]^b[p>>16&255]^_[h>>8&255]^w[255&c]^o[m+1],l=v[p>>>24]^b[h>>16&255]^_[c>>8&255]^w[255&u]^o[m+2],h=v[h>>>24]^b[c>>16&255]^_[u>>8&255]^w[255&p]^o[m+3],m+=4,c=a,u=d,p=l;for(g=0;g<4;g++)r[(3&-g)+s]=T[c>>>24]<<24^T[u>>16&255]<<16^T[p>>8&255]<<8^T[255&h]^o[m++],a=c,c=u,u=p,p=h,h=a}}class i extends e{constructor(){super(e),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const r=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24};class s{constructor(e,t,n,o){const a=s.STEP,d=new Int32Array(e.buffer),l=new Uint8Array(e.byteLength);let c=0;for(this.asyncStream_=new i,this.asyncStream_.push(this.decryptChunk_(d.subarray(c,c+a),t,n,l)),c=a;c<d.length;c+=a)n=new Uint32Array([r(d[c-4]),r(d[c-3]),r(d[c-2]),r(d[c-1])]),this.asyncStream_.push(this.decryptChunk_(d.subarray(c,c+a),t,n,l));this.asyncStream_.push((function(){var e;o(null,(e=l).subarray(0,e.byteLength-e[e.byteLength-1]))}))}static get STEP(){return 32e3}decryptChunk_(e,t,i,s){return function(){const o=function(e,t,i){const s=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),o=new n(Array.prototype.slice.call(t)),a=new Uint8Array(e.byteLength),d=new Int32Array(a.buffer);let l,c,u,p,h,f,g,m,y;for(l=i[0],c=i[1],u=i[2],p=i[3],y=0;y<s.length;y+=4)h=r(s[y]),f=r(s[y+1]),g=r(s[y+2]),m=r(s[y+3]),o.decrypt(h,f,g,m,d,y),d[y]=r(d[y]^l),d[y+1]=r(d[y+1]^c),d[y+2]=r(d[y+2]^u),d[y+3]=r(d[y+3]^p),l=h,c=f,u=g,p=m;return a}(e,t,i);s.set(o,e.byteOffset)}}}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:{},a=("undefined"!=typeof window?window:void 0!==o?o:"undefined"!=typeof self?self:{}).BigInt||Number;a("0x1"),a("0x100"),a("0x10000"),a("0x1000000"),a("0x100000000"),a("0x10000000000"),a("0x1000000000000"),a("0x100000000000000"),a("0x10000000000000000"),function(){var e=new Uint16Array([65484]),t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);255===t[0]||t[0]}();self.onmessage=function(e){const t=e.data,n=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),i=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4),r=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4);new s(n,i,r,(function(e,n){self.postMessage(function(e){const t={};return Object.keys(e).forEach((n=>{const i=e[n];!function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer}(i)?t[n]=i:t[n]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}})),t}({source:t.source,decrypted:n}),[n.buffer])}))}})));var IT=lw(TT);const ST=e=>{let t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},kT=(e,t)=>{e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},CT=(e,t)=>{t.activePlaylistLoader=e,e.load()},ET={AUDIO:(e,t)=>()=>{const{segmentLoaders:{[e]:n},mediaTypes:{[e]:i},excludePlaylist:r}=t;kT(n,i);const s=i.activeTrack(),o=i.activeGroup(),a=(o.filter((e=>e.default))[0]||o[0]).id,d=i.tracks[a];if(s!==d){$b.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const e in i.tracks)i.tracks[e].enabled=i.tracks[e]===d;i.onTrackChanged()}else r({error:{message:"Problem encountered loading the default audio track."}})},SUBTITLES:(e,t)=>()=>{const{segmentLoaders:{[e]:n},mediaTypes:{[e]:i}}=t;$b.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),kT(n,i);const r=i.activeTrack();r&&(r.mode="disabled"),i.onTrackChanged()}},AT={AUDIO:(e,t,n)=>{if(!t)return;const{tech:i,requestOptions:r,segmentLoaders:{[e]:s}}=n;t.on("loadedmetadata",(()=>{const e=t.media();s.playlist(e,r),(!i.paused()||e.endList&&"none"!==i.preload())&&s.load()})),t.on("loadedplaylist",(()=>{s.playlist(t.media(),r),i.paused()||s.load()})),t.on("error",ET[e](e,n))},SUBTITLES:(e,t,n)=>{const{tech:i,requestOptions:r,segmentLoaders:{[e]:s},mediaTypes:{[e]:o}}=n;t.on("loadedmetadata",(()=>{const e=t.media();s.playlist(e,r),s.track(o.activeTrack()),(!i.paused()||e.endList&&"none"!==i.preload())&&s.load()})),t.on("loadedplaylist",(()=>{s.playlist(t.media(),r),i.paused()||s.load()})),t.on("error",ET[e](e,n))}},PT={AUDIO:(e,t)=>{const{vhs:n,sourceType:i,segmentLoaders:{[e]:r},requestOptions:s,main:{mediaGroups:o},mediaTypes:{[e]:{groups:a,tracks:d,logger_:l}},mainPlaylistLoader:c}=t,u=k_(c.main);o[e]&&0!==Object.keys(o[e]).length||(o[e]={main:{default:{default:!0}}},u&&(o[e].main.default.playlists=c.main.playlists));for(const r in o[e]){a[r]||(a[r]=[]);for(const p in o[e][r]){let h,f=o[e][r][p];if(u?(l(`AUDIO group '${r}' label '${p}' is a main playlist`),f.isMainPlaylist=!0,h=null):h="vhs-json"===i&&f.playlists?new q_(f.playlists[0],n,s):f.resolvedUri?new q_(f.resolvedUri,n,s):f.playlists&&"dash"===i?new ow(f.playlists[0],n,s,c):null,f=Yb({id:p,playlistLoader:h},f),AT[e](e,f.playlistLoader,t),a[r].push(f),void 0===d[p]){const e=new $b.AudioTrack({id:p,kind:ST(f),enabled:!1,language:f.language,default:f.default,label:p});d[p]=e}}}r.on("error",ET[e](e,t))},SUBTITLES:(e,t)=>{const{tech:n,vhs:i,sourceType:r,segmentLoaders:{[e]:s},requestOptions:o,main:{mediaGroups:a},mediaTypes:{[e]:{groups:d,tracks:l}},mainPlaylistLoader:c}=t;for(const s in a[e]){d[s]||(d[s]=[]);for(const u in a[e][s]){if(!i.options_.useForcedSubtitles&&a[e][s][u].forced)continue;let p,h=a[e][s][u];if("hls"===r)p=new q_(h.resolvedUri,i,o);else if("dash"===r){if(!h.playlists.filter((e=>e.excludeUntil!==1/0)).length)return;p=new ow(h.playlists[0],i,o,c)}else"vhs-json"===r&&(p=new q_(h.playlists?h.playlists[0]:h.resolvedUri,i,o));if(h=Yb({id:u,playlistLoader:p},h),AT[e](e,h.playlistLoader,t),d[s].push(h),void 0===l[u]){const e=n.addRemoteTextTrack({id:u,kind:"subtitles",default:h.default&&h.autoselect,language:h.language,label:u},!1).track;l[u]=e}}}s.on("error",ET[e](e,t))},"CLOSED-CAPTIONS":(e,t)=>{const{tech:n,main:{mediaGroups:i},mediaTypes:{[e]:{groups:r,tracks:s}}}=t;for(const t in i[e]){r[t]||(r[t]=[]);for(const o in i[e][t]){const a=i[e][t][o];if(!/^(?:CC|SERVICE)/.test(a.instreamId))continue;const d=n.options_.vhs&&n.options_.vhs.captionServices||{};let l={label:o,language:a.language,instreamId:a.instreamId,default:a.default&&a.autoselect};if(d[l.instreamId]&&(l=Yb(l,d[l.instreamId])),void 0===l.default&&delete l.default,r[t].push(Yb({id:o},a)),void 0===s[o]){const e=n.addRemoteTextTrack({id:l.instreamId,kind:"captions",default:l.default,language:l.language,label:l.label},!1).track;s[o]=e}}}}},xT=(e,t)=>{for(let n=0;n<e.length;n++){if(I_(t,e[n]))return!0;if(e[n].playlists&&xT(e[n].playlists,t))return!0}return!1},DT={AUDIO:(e,t)=>()=>{const{mediaTypes:{[e]:{tracks:n}}}=t;for(const e in n)if(n[e].enabled)return n[e];return null},SUBTITLES:(e,t)=>()=>{const{mediaTypes:{[e]:{tracks:n}}}=t;for(const e in n)if("showing"===n[e].mode||"hidden"===n[e].mode)return n[e];return null}};let OT;const RT=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],NT=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]};class MT extends $b.EventTarget{constructor(e){super();const{src:t,withCredentials:n,tech:i,bandwidth:r,externVhs:s,useCueTags:o,playlistExclusionDuration:a,enableLowInitialPlaylist:d,sourceType:l,cacheEncryptionKeys:c,bufferBasedABR:u,leastPixelDiffSelector:p,captionServices:h}=e;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:f}=e;null==f&&(f=1/0),OT=s,this.bufferBasedABR=Boolean(u),this.leastPixelDiffSelector=Boolean(p),this.withCredentials=n,this.tech_=i,this.vhs_=i.vhs,this.sourceType_=l,this.useCueTags_=o,this.playlistExclusionDuration=a,this.maxPlaylistRetries=f,this.enableLowInitialPlaylist=d,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:n,maxPlaylistRetries:f,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=(()=>{const e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((t=>{e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Xw,activeTrack:Xw,getActiveGroup:Xw,onGroupChanged:Xw,onTrackChanged:Xw,lastTrack_:null,logger_:Jb(`MediaGroups[${t}]`)}})),e})(),this.mediaSource=new(Mp().MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.seekable_=Qb(),this.hasPlayed_=!1,this.syncController_=new _T(e),this.segmentMetadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new IT,this.sourceUpdater_=new hT(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new wT;const g={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:h,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:r,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:c,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_="dash"===this.sourceType_?new ow(t,this.vhs_,Yb(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new q_(t,this.vhs_,this.requestOptions_),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new Gw(Yb(g,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new Gw(Yb(g,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new yT(Yb(g,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise(((e,t)=>{function n(){i.off("vttjserror",r),e()}function r(){i.off("vttjsloaded",n),t()}i.one("vttjsloaded",n),i.one("vttjserror",r),i.addWebVttScript_()}))}),e),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",(()=>this.startABRTimer_())),this.tech_.on("pause",(()=>this.stopABRTimer_())),this.tech_.on("play",(()=>this.startABRTimer_()))),RT.forEach((e=>{this[e+"_"]=NT.bind(this,e)})),this.logger_=Jb("pc"),this.triggeredFmp4Usage=!1,"none"===this.tech_.preload()?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const m="none"===this.tech_.preload()?"play":"loadstart";this.tech_.one(m,(()=>{const e=Date.now();this.tech_.one("loadeddata",(()=>{this.timeToLoadedData__=Date.now()-e,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends}))}))}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return-1===e||-1===t?-1:e+t}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}switchMedia_(e,t,n){const i=this.media(),r=i&&(i.id||i.uri),s=e.id||e.uri;r&&r!==s&&(this.logger_(`switch media ${r} -> ${s} from ${t}`),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${t}`})),this.mainPlaylistLoader_.media(e,n)}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=Mp().setInterval((()=>this.checkABR_()),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(Mp().clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;const n=e.mediaGroups.AUDIO,i=Object.keys(n);let r;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)r=this.mediaTypes_.AUDIO.activeTrack();else{const e=n.main||i.length&&n[i[0]];for(const t in e)if(e[t].default){r={label:t};break}}if(!r)return t;const s=[];for(const t in n)if(n[t][r.label]){const i=n[t][r.label];if(i.playlists&&i.playlists.length)s.push.apply(s,i.playlists);else if(i.uri)s.push(i);else if(e.playlists.length)for(let n=0;n<e.playlists.length;n++){const i=e.playlists[n];i.attributes&&i.attributes.AUDIO&&i.attributes.AUDIO===t&&s.push(i)}}return s.length?s:t}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",(()=>{const e=this.mainPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;T_(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=t,e.endList&&"none"!==this.tech_.preload()&&(this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load()),(e=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((t=>{PT[t](t,e)}));const{mediaTypes:t,mainPlaylistLoader:n,tech:i,vhs:r,segmentLoaders:{AUDIO:s,main:o}}=e;["AUDIO","SUBTITLES"].forEach((n=>{t[n].activeGroup=((e,t)=>n=>{const{mainPlaylistLoader:i,mediaTypes:{[e]:{groups:r}}}=t,s=i.media();if(!s)return null;let o=null;s.attributes[e]&&(o=r[s.attributes[e]]);const a=Object.keys(r);if(!o)if("AUDIO"===e&&a.length>1&&k_(t.main))for(let e=0;e<a.length;e++){const t=r[a[e]];if(xT(t,s)){o=t;break}}else r.main?o=r.main:1===a.length&&(o=r[a[0]]);return void 0===n?o:null!==n&&o&&o.filter((e=>e.id===n.id))[0]||null})(n,e),t[n].activeTrack=DT[n](n,e),t[n].onGroupChanged=((e,t)=>()=>{const{segmentLoaders:{[e]:n,main:i},mediaTypes:{[e]:r}}=t,s=r.activeTrack(),o=r.getActiveGroup(),a=r.activePlaylistLoader,d=r.lastGroup_;o&&d&&o.id===d.id||(r.lastGroup_=o,r.lastTrack_=s,kT(n,r),o&&!o.isMainPlaylist&&(o.playlistLoader?(n.resyncLoader(),CT(o.playlistLoader,r)):a&&i.resetEverything()))})(n,e),t[n].onGroupChanging=((e,t)=>()=>{const{segmentLoaders:{[e]:n},mediaTypes:{[e]:i}}=t;i.lastGroup_=null,n.abort(),n.pause()})(n,e),t[n].onTrackChanged=((e,t)=>()=>{const{mainPlaylistLoader:n,segmentLoaders:{[e]:i,main:r},mediaTypes:{[e]:s}}=t,o=s.activeTrack(),a=s.getActiveGroup(),d=s.activePlaylistLoader,l=s.lastTrack_;if((!l||!o||l.id!==o.id)&&(s.lastGroup_=a,s.lastTrack_=o,kT(i,s),a)){if(a.isMainPlaylist){if(!o||!l||o.id===l.id)return;const e=t.vhs.playlistController_,i=e.selectPlaylist();if(e.media()===i)return;return s.logger_(`track change. Switching main audio from ${l.id} to ${o.id}`),n.pause(),r.resetEverything(),void e.fastQualityChange_(i)}if("AUDIO"===e){if(!a.playlistLoader)return r.setAudio(!0),void r.resetEverything();i.setAudio(!0),r.setAudio(!1)}d!==a.playlistLoader?(i.track&&i.track(o),i.resetEverything(),CT(a.playlistLoader,s)):CT(a.playlistLoader,s)}})(n,e),t[n].getActiveGroup=((e,{mediaTypes:t})=>()=>{const n=t[e].activeTrack();return n?t[e].activeGroup(n):null})(n,e)}));const a=t.AUDIO.activeGroup();if(a){const e=(a.filter((e=>e.default))[0]||a[0]).id;t.AUDIO.tracks[e].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged(),t.AUDIO.getActiveGroup().playlistLoader?(o.setAudio(!1),s.setAudio(!0)):o.setAudio(!0)}n.on("mediachange",(()=>{["AUDIO","SUBTITLES"].forEach((e=>t[e].onGroupChanged()))})),n.on("mediachanging",(()=>{["AUDIO","SUBTITLES"].forEach((e=>t[e].onGroupChanging()))}));const d=()=>{t.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"})};i.audioTracks().addEventListener("change",d),i.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),r.on("dispose",(()=>{i.audioTracks().removeEventListener("change",d),i.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)})),i.clearTracks("audio");for(const e in t.AUDIO.tracks)i.audioTracks().addTrack(t.AUDIO.tracks[e])})({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),e),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(()=>{this.trigger("selectedinitialmedia")}))})),this.mainPlaylistLoader_.on("loadedplaylist",(()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let e=this.mainPlaylistLoader_.media();if(!e){let t;if(this.excludeUnsupportedVariants_(),this.enableLowInitialPlaylist&&(t=this.selectInitialPlaylist()),t||(t=this.selectPlaylist()),!t||!this.shouldSwitchToMedia_(t))return;if(this.initialMedia_=t,this.switchMedia_(this.initialMedia_,"initial"),"vhs-json"!==this.sourceType_||!this.initialMedia_.segments)return;e=this.initialMedia_}this.handleUpdatedMediaPlaylist(e)})),this.mainPlaylistLoader_.on("error",(()=>{const e=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:e.playlist,error:e})})),this.mainPlaylistLoader_.on("mediachanging",(()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()})),this.mainPlaylistLoader_.on("mediachange",(()=>{const e=this.mainPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;T_(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=t,this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})})),this.mainPlaylistLoader_.on("playlistunchanged",(()=>{const e=this.mainPlaylistLoader_.media();"playlist-unchanged"!==e.lastExcludeReason_&&this.stuckAtPlaylistEnd_(e)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))})),this.mainPlaylistLoader_.on("renditiondisabled",(()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})})),this.mainPlaylistLoader_.on("renditionenabled",(()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}))}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,t){const n=e.mediaGroups||{};let i=!0;const r=Object.keys(n.AUDIO);for(const e in n.AUDIO)for(const t in n.AUDIO[e])n.AUDIO[e][t].uri||(i=!1);i&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),OT.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),r.length&&Object.keys(n.AUDIO[r[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const t=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,n=this.tech_.currentTime(),i=this.bufferLowWaterLine(),r=this.bufferHighWaterLine();return function({currentPlaylist:e,buffered:t,currentTime:n,nextPlaylist:i,bufferLowWaterLine:r,bufferHighWaterLine:s,duration:o,bufferBasedABR:a,log:d}){if(!i)return $b.log.warn("We received no playlist to switch to. Please check your stream."),!1;const l=`allowing switch ${e&&e.id||"null"} -> ${i.id}`;if(!e)return d(`${l} as current playlist is not set`),!0;if(i.id===e.id)return!1;const c=Boolean(i_(t,n).length);if(!e.endList)return c||"number"!=typeof e.partTargetDuration?(d(`${l} as current playlist is live`),!0):(d(`not ${l} as current playlist is live llhls, but currentTime isn't in buffered.`),!1);const u=d_(t,n),p=a?aw.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:aw.MAX_BUFFER_LOW_WATER_LINE;if(o<p)return d(`${l} as duration < max low water line (${o} < ${p})`),!0;const h=i.attributes.BANDWIDTH,f=e.attributes.BANDWIDTH;if(h<f&&(!a||u<s)){let e=`${l} as next bandwidth < current bandwidth (${h} < ${f})`;return a&&(e+=` and forwardBuffer < bufferHighWaterLine (${u} < ${s})`),d(e),!0}if((!a||h>f)&&u>=r){let e=`${l} as forwardBuffer >= bufferLowWaterLine (${u} >= ${r})`;return a&&(e+=` and next bandwidth > current bandwidth (${h} > ${f})`),d(e),!0}return d(`not ${l} as no switching criteria met`),!1}({buffered:this.tech_.buffered(),currentTime:n,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:i,bufferHighWaterLine:r,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",(()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("timeout",(()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()})),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",(()=>{this.trigger("progress")})),this.mainSegmentLoader_.on("error",(()=>{const e=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:e.playlist,error:e})})),this.mainSegmentLoader_.on("appenderror",(()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")})),this.mainSegmentLoader_.on("syncinfoupdate",(()=>{this.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(()=>{this.onSyncInfoUpdate_()})),this.audioSegmentLoader_.on("appenderror",(()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")})),this.mainSegmentLoader_.on("ended",(()=>{this.logger_("main segment loader ended"),this.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(e=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:120}))}));const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const e=this.getCodecsOrExclude_();e&&this.sourceUpdater_.addOrChangeSourceBuffers(e)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",(()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("fmp4",(()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("ended",(()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}))}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}fastQualityChange_(e=this.selectPlaylist()){e!==this.mainPlaylistLoader_.media()?(this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything((()=>{this.tech_.setCurrentTime(this.tech_.currentTime())}))):this.logger_("skipping fastQualityChange because new media is same as old")}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const t=this.seekable();if(!t.length)return!1;const n=t.end(0);let i=n;if(e.start){const r=e.start.timeOffset;i=r<0?Math.max(n+r,t.start(0)):Math.min(n,r)}this.trigger("firstplay"),this.tech_.setCurrentTime(i)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,(e=>{}))}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const t=this.mainSegmentLoader_.getCurrentMediaInfo_();e=!t||t.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const t=this.syncController_.getExpiredTime(e,this.duration());if(null===t)return!1;const n=OT.Playlist.playlistEnd(e,t),i=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return n-i<=t_;const s=r.end(r.length-1);return s-i<=t_&&n-s<=t_}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:t={},playlistExclusionDuration:n}){if(e=e||this.mainPlaylistLoader_.media(),n=n||t.playlistExclusionDuration||this.playlistExclusionDuration,!e)return this.error=t,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));e.playlistErrors_++;const i=this.mainPlaylistLoader_.main.playlists,r=i.filter(__),s=1===r.length&&r[0]===e;if(1===i.length&&n!==1/0)return $b.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(s);if(s){let t=!1;i.forEach((n=>{if(n===e)return;const i=n.excludeUntil;void 0!==i&&i!==1/0&&(t=!0,delete n.excludeUntil)})),t&&($b.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let o;o=e.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*n,e.excludeUntil=o,t.reason&&(e.lastExcludeReason_=t.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const a=this.selectPlaylist();if(!a)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");const d=t.internal?this.logger_:$b.log.warn,l=t.message?" "+t.message:"";d(`${t.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${l} Switching to playlist ${a.id}.`),a.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),a.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const c=a.targetDuration/2*1e3||5e3,u="number"==typeof a.lastRequest&&Date.now()-a.lastRequest<=c;return this.switchMedia_(a,"exclude",s||u)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,t){const n=[],i="all"===e;(i||"main"===e)&&n.push(this.mainPlaylistLoader_);const r=[];(i||"audio"===e)&&r.push("AUDIO"),(i||"subtitle"===e)&&(r.push("CLOSED-CAPTIONS"),r.push("SUBTITLES")),r.forEach((e=>{const t=this.mediaTypes_[e]&&this.mediaTypes_[e].activePlaylistLoader;t&&n.push(t)})),["main","audio","subtitle"].forEach((t=>{const i=this[`${t}SegmentLoader_`];!i||e!==t&&"all"!==e||n.push(i)})),n.forEach((e=>t.forEach((t=>{"function"==typeof e[t]&&e[t]()}))))}setCurrentTime(e){const t=i_(this.tech_.buffered(),e);return this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media()&&this.mainPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:OT.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let e;if(!this.mainPlaylistLoader_)return;let t=this.mainPlaylistLoader_.media();if(!t)return;let n=this.syncController_.getExpiredTime(t,this.duration());if(null===n)return;const i=this.mainPlaylistLoader_.main,r=OT.Playlist.seekable(t,n,OT.Playlist.liveEdgeDelay(i,t));if(0===r.length)return;if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),n=this.syncController_.getExpiredTime(t,this.duration()),null===n)return;if(e=OT.Playlist.seekable(t,n,OT.Playlist.liveEdgeDelay(i,t)),0===e.length)return}let s,o;this.seekable_&&this.seekable_.length&&(s=this.seekable_.end(0),o=this.seekable_.start(0)),e?e.start(0)>r.end(0)||r.start(0)>e.end(0)?this.seekable_=r:this.seekable_=Qb([[e.start(0)>r.start(0)?e.start(0):r.start(0),e.end(0)<r.end(0)?e.end(0):r.end(0)]]):this.seekable_=r,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===s&&this.seekable_.start(0)===o||(this.logger_(`seekable updated [${s_(this.seekable_)}]`),this.tech_.trigger("seekablechanged"))}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){const e=this.seekable();if(!e.length)return;return void((isNaN(this.mediaSource.duration)||this.mediaSource.duration<e.end(e.length-1))&&this.sourceUpdater_.setDuration(e.end(e.length-1)))}const t=this.tech_.buffered();let n=OT.Playlist.duration(this.mainPlaylistLoader_.media());t.length>0&&(n=Math.max(n,t.end(t.length-1))),this.mediaSource.duration!==n&&this.sourceUpdater_.setDuration(n)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach((e=>{const t=this.mediaTypes_[e].groups;for(const e in t)t[e].forEach((e=>{e.playlistLoader&&e.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),n=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!t||!n)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},t=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const n=Rw(this.main(),t),i={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(i.video=n.video||e.main.videoCodec||"avc1.4d400d"),e.main.isMuxed&&(i.video+=`,${n.audio||e.main.audioCodec||yh}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||r)&&(i.audio=n.audio||e.main.audioCodec||e.audio.audioCodec||yh,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!i.audio&&!i.video)return void this.excludePlaylist({playlistToExclude:t,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});const s={};let o;if(["video","audio"].forEach((function(t){if(i.hasOwnProperty(t)&&(n=e[t].isFmp4,r=i[t],!(n?gh(r):mh(r)))){const n=e[t].isFmp4?"browser":"muxer";s[n]=s[n]||[],s[n].push(i[t]),"audio"===t&&(o=n)}var n,r})),r&&o&&t.attributes.AUDIO){const e=t.attributes.AUDIO;this.main().playlists.forEach((n=>{(n.attributes&&n.attributes.AUDIO)===e&&n!==t&&(n.excludeUntil=1/0)})),this.logger_(`excluding audio group ${e} as ${o} does not support codec(s): "${i.audio}"`)}if(!Object.keys(s).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const e=[];if(["video","audio"].forEach((t=>{const n=(ph(this.sourceUpdater_.codecs[t]||"")[0]||{}).type,r=(ph(i[t]||"")[0]||{}).type;n&&r&&n.toLowerCase()!==r.toLowerCase()&&e.push(`"${this.sourceUpdater_.codecs[t]}" -> "${i[t]}"`)})),e.length)return void this.excludePlaylist({playlistToExclude:t,error:{message:`Codec switching not supported: ${e.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0})}return i}{const e=Object.keys(s).reduce(((e,t)=>(e&&(e+=", "),e+`${t} does not support codec(s): "${s[t].join(",")}"`)),"")+".";this.excludePlaylist({playlistToExclude:t,error:{internal:!0,message:e},playlistExclusionDuration:1/0})}}tryToCreateSourceBuffers_(){if("open"!==this.mediaSource.readyState||this.sourceUpdater_.hasCreatedSourceBuffers())return;if(!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}excludeUnsupportedVariants_(){const e=this.main().playlists,t=[];Object.keys(e).forEach((n=>{const i=e[n];if(-1!==t.indexOf(i.id))return;t.push(i.id);const r=Rw(this.main,i),s=[];!r.audio||mh(r.audio)||gh(r.audio)||s.push(`audio codec ${r.audio}`),!r.video||mh(r.video)||gh(r.video)||s.push(`video codec ${r.video}`),r.text&&"stpp.ttml.im1t"===r.text&&s.push(`text codec ${r.text}`),s.length&&(i.excludeUntil=1/0,this.logger_(`excluding ${i.id} for unsupported: ${s.join(", ")}`))}))}excludeIncompatibleVariants_(e){const t=[],n=this.main().playlists,i=Dw(ph(e)),r=Ow(i),s=i.video&&ph(i.video)[0]||null,o=i.audio&&ph(i.audio)[0]||null;Object.keys(n).forEach((e=>{const i=n[e];if(-1!==t.indexOf(i.id)||i.excludeUntil===1/0)return;t.push(i.id);const a=[],d=Rw(this.mainPlaylistLoader_.main,i),l=Ow(d);if(d.audio||d.video){if(l!==r&&a.push(`codec count "${l}" !== "${r}"`),!this.sourceUpdater_.canChangeType()){const e=d.video&&ph(d.video)[0]||null,t=d.audio&&ph(d.audio)[0]||null;e&&s&&e.type.toLowerCase()!==s.type.toLowerCase()&&a.push(`video codec "${e.type}" !== "${s.type}"`),t&&o&&t.type.toLowerCase()!==o.type.toLowerCase()&&a.push(`audio codec "${t.type}" !== "${o.type}"`)}a.length&&(i.excludeUntil=1/0,this.logger_(`excluding ${i.id}: ${a.join(" && ")}`))}}))}updateAdCues_(e){let t=0;const n=this.seekable();n.length&&(t=n.start(0)),function(e,t,n=0){if(!e.segments)return;let i,r=n;for(let n=0;n<e.segments.length;n++){const s=e.segments[n];if(i||(i=vT(t,r+s.duration/2)),i){if("cueIn"in s){i.endTime=r,i.adEndTime=r,r+=s.duration,i=null;continue}if(r<i.endTime){r+=s.duration;continue}i.endTime+=s.duration}else if("cueOut"in s&&(i=new(Mp().VTTCue)(r,r+s.duration,s.cueOut),i.adStartTime=r,i.adEndTime=r+parseFloat(s.cueOut),t.addCue(i)),"cueOutCont"in s){const[e,n]=s.cueOutCont.split("/").map(parseFloat);i=new(Mp().VTTCue)(r,r+s.duration,""),i.adStartTime=r-e,i.adEndTime=i.adStartTime+n,t.addCue(i)}r+=s.duration}}(e,this.cueTagsTrack_,t)}goalBufferLength(){const e=this.tech_.currentTime(),t=aw.GOAL_BUFFER_LENGTH,n=aw.GOAL_BUFFER_LENGTH_RATE,i=Math.max(t,aw.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,i)}bufferLowWaterLine(){const e=this.tech_.currentTime(),t=aw.BUFFER_LOW_WATER_LINE,n=aw.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(t,aw.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(t,aw.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,this.bufferBasedABR?r:i)}bufferHighWaterLine(){return aw.BUFFER_HIGH_WATER_LINE}addMetadataToTextTrack(e,t,n){const i=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();((e,t,n)=>{e.metadataTrack_||(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)})(this.inbandTextTracks_,e,this.tech_),(({inbandTextTracks:e,metadataArray:t,timestampOffset:n,videoDuration:i})=>{if(!t)return;const r=Mp().WebKitDataCue||Mp().VTTCue,s=e.metadataTrack_;if(!s)return;if(t.forEach((e=>{const t=e.cueTime+n;!("number"!=typeof t||Mp().isNaN(t)||t<0)&&t<1/0&&e.frames&&e.frames.length&&e.frames.forEach((e=>{const n=new r(t,t,e.value||e.url||e.data||"");n.frame=e,n.value=e,function(e){Object.defineProperties(e.frame,{id:{get:()=>($b.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key)},value:{get:()=>($b.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data)},privateData:{get:()=>($b.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data)}})}(n),s.addCue(n)}))})),!s.cues||!s.cues.length)return;const o=s.cues,a=[];for(let e=0;e<o.length;e++)o[e]&&a.push(o[e]);const d=a.reduce(((e,t)=>{const n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e}),{}),l=Object.keys(d).sort(((e,t)=>Number(e)-Number(t)));l.forEach(((e,t)=>{const n=d[e],r=Number(l[t+1])||i;n.forEach((e=>{e.endTime=r}))}))})({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:i,videoDuration:n})}}class LT{constructor(e,t,n){const{playlistController_:i}=e,r=i.fastQualityChange_.bind(i);if(t.attributes){const e=t.attributes.RESOLUTION;this.width=e&&e.width,this.height=e&&e.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}var s,o,a;this.codecs=Rw(i.main(),t),this.playlist=t,this.id=n,this.enabled=(s=e.playlists,o=t.id,a=r,e=>{const t=s.main.playlists[o],n=b_(t),i=__(t);return void 0===e?i:(e?delete t.disabled:t.disabled=!0,e===i||n||(a(),e?s.trigger("renditionenabled"):s.trigger("renditiondisabled")),e)})}}const UT=["seeking","seeked","pause","playing","error"];class jT{constructor(e){this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=Jb("PlaybackWatcher"),this.logger_("initialize");const t=()=>this.monitorCurrentTime_(),n=()=>this.monitorCurrentTime_(),i=()=>this.techWaiting_(),r=()=>this.resetTimeUpdate_(),s=this.playlistController_,o=["main","subtitle","audio"],a={};o.forEach((e=>{a[e]={reset:()=>this.resetSegmentDownloads_(e),updateend:()=>this.checkSegmentDownloads_(e)},s[`${e}SegmentLoader_`].on("appendsdone",a[e].updateend),s[`${e}SegmentLoader_`].on("playlistupdate",a[e].reset),this.tech_.on(["seeked","seeking"],a[e].reset)}));const d=e=>{["main","audio"].forEach((t=>{s[`${t}SegmentLoader_`][e]("appended",this.seekingAppendCheck_)}))};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),d("off"))},this.clearSeekingAppendCheck_=()=>d("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),d("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",i),this.tech_.on(UT,r),this.tech_.on("canplay",n),this.tech_.one("play",t),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",i),this.tech_.off(UT,r),this.tech_.off("canplay",n),this.tech_.off("play",t),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),o.forEach((e=>{s[`${e}SegmentLoader_`].off("appendsdone",a[e].updateend),s[`${e}SegmentLoader_`].off("playlistupdate",a[e].reset),this.tech_.off(["seeked","seeking"],a[e].reset)})),this.checkCurrentTimeTimeout_&&Mp().clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&Mp().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=Mp().setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const t=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=t.buffered_()}checkSegmentDownloads_(e){const t=this.playlistController_,n=t[`${e}SegmentLoader_`],i=n.buffered_(),r=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e)return!0;if(e.length!==t.length)return!0;for(let n=0;n<e.length;n++)if(e.start(n)!==t.start(n)||e.end(n)!==t.end(n))return!0;return!1}(this[`${e}Buffered_`],i);this[`${e}Buffered_`]=i,r?this.resetSegmentDownloads_(e):(this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:n.playlist_&&n.playlist_.id,buffered:o_(i)}),this[`${e}StalledDownloads_`]<10||(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),"subtitle"!==e&&t.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0})))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+t_>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const e=this.seekable(),t=this.tech_.currentTime();let n;if(this.afterSeekableWindow_(e,t,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(n=e.end(e.length-1)),this.beforeSeekableWindow_(e,t)){const t=e.start(0);n=t+(t===e.end(0)?0:t_)}if(void 0!==n)return this.logger_(`Trying to seek outside of seekable at time ${t} with seekable range ${s_(e)}. Seeking to ${n}.`),this.tech_.setCurrentTime(n),!0;const i=this.playlistController_.sourceUpdater_,r=this.tech_.buffered(),s=i.audioBuffer?i.audioBuffered():null,o=i.videoBuffer?i.videoBuffered():null,a=this.media(),d=a.partTargetDuration?a.partTargetDuration:2*(a.targetDuration-e_),l=[s,o];for(let e=0;e<l.length;e++)if(l[e]&&d_(l[e],t)<d)return!1;const c=r_(r,t);return 0!==c.length&&(n=c.start(0)+t_,this.logger_(`Buffered region starts (${c.start(0)})  just beyond seek point (${t}). Seeking to ${n}.`),this.tech_.setCurrentTime(n),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),t=this.tech_.buffered(),n=i_(t,e);return n.length&&e+3<=n.end(0)?(this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${n.start(0)} -> ${n.end(0)}]. Attempting to resume playback by seeking to the current time.`),void this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"})):void 0}techWaiting_(){const e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,t)){const n=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${t}. Seeking to live point (seekable end) ${n}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const n=this.tech_.vhs.playlistController_.sourceUpdater_,i=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:n.audioBuffered(),videoBuffered:n.videoBuffered(),currentTime:t}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const r=r_(i,t);return r.length>0&&(this.logger_(`Stopped at ${t} and seeking to ${r.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(t),!0)}afterSeekableWindow_(e,t,n,i=!1){if(!e.length)return!1;let r=e.end(e.length-1)+t_;return!n.endList&&i&&(r=e.end(e.length-1)+3*n.targetDuration),t>r}beforeSeekableWindow_(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:t,currentTime:n}){if(!e)return;let i;if(e.length&&t.length){const r=i_(e,n-3),s=i_(e,n),o=i_(t,n);o.length&&!s.length&&r.length&&(i={start:r.end(0),end:o.end(0)})}else r_(e,n).length||(i=this.gapFromVideoUnderflow_(e,n));return!!i&&(this.logger_(`Encountered a gap in video from ${i.start} to ${i.end}. Seeking to current time ${n}`),!0)}skipTheGap_(e){const t=this.tech_.buffered(),n=this.tech_.currentTime(),i=r_(t,n);this.resetTimeUpdate_(),0!==i.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",i.start(0)),this.tech_.setCurrentTime(i.start(0)+e_),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}))}gapFromVideoUnderflow_(e,t){const n=function(e){if(e.length<2)return Qb();const t=[];for(let n=1;n<e.length;n++){const i=e.end(n-1),r=e.start(n);t.push([i,r])}return Qb(t)}(e);for(let e=0;e<n.length;e++){const i=n.start(e),r=n.end(e);if(t-i<4&&t-i>2)return{start:i,end:r}}return null}}const BT={errorInterval:30,getSource(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},qT=function(e,t){let n=0,i=0;const r=Yb(BT,t);e.ready((()=>{e.trigger({type:"usage",name:"vhs-error-reload-initialized"})}));const s=function(){i&&e.currentTime(i)},o=function(t){null!=t&&(i=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",s),e.src(t),e.trigger({type:"usage",name:"vhs-error-reload"}),e.play())},a=function(){if(Date.now()-n<1e3*r.errorInterval)e.trigger({type:"usage",name:"vhs-error-reload-canceled"});else{if(r.getSource&&"function"==typeof r.getSource)return n=Date.now(),r.getSource.call(e,o);$b.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},d=function(){e.off("loadedmetadata",s),e.off("error",a),e.off("dispose",d)};e.on("error",a),e.on("dispose",d),e.reloadSourceOnError=function(t){d(),qT(e,t)}};var FT="3.3.1";const VT={PlaylistLoader:q_,Playlist:C_,utils:Y_,STANDARD_PLAYLIST_SELECTOR:qw,INITIAL_PLAYLIST_SELECTOR:function(){const e=this.playlists.main.playlists.filter(C_.isEnabled);Uw(e,((e,t)=>jw(e,t)));return e.filter((e=>!!Rw(this.playlists.main,e).video))[0]||null},lastBandwidthSelector:qw,movingAverageBandwidthSelector:function(e){let t=-1,n=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){const i=this.useDevicePixelRatio&&Mp().devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(t=e*this.systemBandwidth+(1-e)*t,n=this.systemBandwidth),Bw(this.playlists.main,t,parseInt(Lw(this.tech_.el(),"width"),10)*i,parseInt(Lw(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.playlistController_)}},comparePlaylistBandwidth:jw,comparePlaylistResolution:function(e,t){let n,i;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||Mp().Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),i=i||Mp().Number.MAX_VALUE,n===i&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-i},xhr:z_()};Object.keys(aw).forEach((e=>{Object.defineProperty(VT,e,{get:()=>($b.log.warn(`using Vhs.${e} is UNSAFE be sure you know what you are doing`),aw[e]),set(t){$b.log.warn(`using Vhs.${e} is UNSAFE be sure you know what you are doing`),"number"!=typeof t||t<0?$b.log.warn(`value of Vhs.${e} must be greater than or equal to 0`):aw[e]=t}})}));const zT="videojs-vhs",$T=function(e,t){const n=t.media();let i=-1;for(let t=0;t<e.length;t++)if(e[t].id===n.id){i=t;break}e.selectedIndex_=i,e.trigger({selectedIndex:i,type:"change"})};VT.canPlaySource=function(){return $b.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const HT=()=>{if(!Mp().localStorage)return null;const e=Mp().localStorage.getItem(zT);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},WT=(e,t)=>{e._requestCallbackSet||(e._requestCallbackSet=new Set),e._requestCallbackSet.add(t)},ZT=(e,t)=>{e._responseCallbackSet||(e._responseCallbackSet=new Set),e._responseCallbackSet.add(t)},GT=(e,t)=>{e._requestCallbackSet&&(e._requestCallbackSet.delete(t),e._requestCallbackSet.size||delete e._requestCallbackSet)},XT=(e,t)=>{e._responseCallbackSet&&(e._responseCallbackSet.delete(t),e._responseCallbackSet.size||delete e._responseCallbackSet)};VT.supportsNativeHls=function(){if(!Up()||!Up().createElement)return!1;const e=Up().createElement("video");return!!$b.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(t){return/maybe|probably/i.test(e.canPlayType(t))}))}(),VT.supportsNativeDash=!!(Up()&&Up().createElement&&$b.getTech("Html5").isSupported())&&/maybe|probably/i.test(Up().createElement("video").canPlayType("application/dash+xml")),VT.supportsTypeNatively=e=>"hls"===e?VT.supportsNativeHls:"dash"===e&&VT.supportsNativeDash,VT.isSupported=function(){return $b.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")},VT.xhr.onRequest=function(e){WT(VT.xhr,e)},VT.xhr.onResponse=function(e){ZT(VT.xhr,e)},VT.xhr.offRequest=function(e){GT(VT.xhr,e)},VT.xhr.offResponse=function(e){XT(VT.xhr,e)};const KT=$b.getComponent("Component");class JT extends KT{constructor(e,t,n){if(super(t,n.vhs),"number"==typeof n.initialBandwidth&&(this.options_.bandwidth=n.initialBandwidth),this.logger_=Jb("VhsHandler"),t.options_&&t.options_.playerId){const e=$b.getPlayer(t.options_.playerId);this.player_=e}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(Up(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(e=>{const t=Up().fullscreenElement||Up().webkitFullscreenElement||Up().mozFullScreenElement||Up().msFullscreenElement;t&&t.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()})),this.on(this.tech_,"seeking",(function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())})),this.on(this.tech_,"error",(function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()})),this.on(this.tech_,"play",this.play)}setOptions_(){if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=!1!==this.options_.llhls,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,"number"!=typeof this.options_.playlistExclusionDuration&&(this.options_.playlistExclusionDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){const e=HT();e&&e.bandwidth&&(this.options_.bandwidth=e.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),e&&e.throughput&&(this.options_.throughput=e.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=aw.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===aw.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach((e=>{void 0!==this.source_[e]&&(this.options_[e]=this.source_[e])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio}src(e,t){if(!e)return;var n;this.setOptions_(),this.options_.src=0===(n=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(n.substring(n.indexOf(",")+1)):n,this.options_.tech=this.tech_,this.options_.externVhs=VT,this.options_.sourceType=_h(t),this.options_.seekTo=e=>{this.tech_.setCurrentTime(e)},this.playlistController_=new MT(this.options_);const i=Yb({liveRangeSafeTimeDelta:t_},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new jT(i),this.playlistController_.on("error",(()=>{const e=$b.players[this.tech_.options_.playerId];let t=this.playlistController_.error;"object"!=typeof t||t.code?"string"==typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)}));const r=this.options_.bufferBasedABR?VT.movingAverageBandwidthSelector(.55):VT.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):r.bind(this),this.playlistController_.selectInitialPlaylist=VT.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(e){this.playlistController_.selectPlaylist=e.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(e){this.playlistController_.mainSegmentLoader_.throughput.rate=e,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let e=this.playlistController_.mainSegmentLoader_.bandwidth;const t=Mp().navigator.connection||Mp().navigator.mozConnection||Mp().navigator.webkitConnection,n=1e7;if(this.options_.useNetworkInformationApi&&t){const i=1e3*t.downlink*1e3;e=i>=n&&e>=n?Math.max(e,i):i}return e},set(e){this.playlistController_.mainSegmentLoader_.bandwidth=e,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const e=1/(this.bandwidth||1);let t;return t=this.throughput>0?1/this.throughput:0,Math.floor(1/(e+t))},set(){$b.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>o_(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>o_(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",(()=>{this.options_.useBandwidthFromLocalStorage&&(e=>{if(!Mp().localStorage)return!1;let t=HT();t=t?Yb(t,e):e;try{Mp().localStorage.setItem(zT,JSON.stringify(t))}catch(e){return!1}})({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})})),this.playlistController_.on("selectedinitialmedia",(()=>{var e;(e=this).representations=()=>{const t=e.playlistController_.main(),n=k_(t)?e.playlistController_.getAudioTrackPlaylists_():t.playlists;return n?n.filter((e=>!b_(e))).map(((t,n)=>new LT(e,t,t.id))):[]}})),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",(()=>{this.setupEme_()})),this.on(this.playlistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.playlistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=Mp().URL.createObjectURL(this.playlistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),(({player:e,sourceKeySystems:t,audioMedia:n,mainPlaylists:i})=>{if(!e.eme.initializeMediaKeys)return Promise.resolve();const r=(a=n?i.concat([n]):i,d=Object.keys(t),a.reduce(((e,t)=>{if(!t.contentProtection)return e;const n=d.reduce(((e,n)=>{const i=t.contentProtection[n];return i&&i.pssh&&(e[n]={pssh:i.pssh}),e}),{});return Object.keys(n).length&&e.push(n),e}),[])),s=[],o=[];var a,d;return r.forEach((t=>{o.push(new Promise(((t,n)=>{e.tech_.one("keysessioncreated",t)}))),s.push(new Promise(((n,i)=>{e.eme.initializeMediaKeys({keySystems:t},(e=>{e?i(e):n()}))})))})),Promise.race([Promise.all(s),Promise.race(o)])})({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then((()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()})).catch((e=>{this.logger_("error while creating EME key session",e),this.player_.error({message:"Failed to initialize media keys for EME",code:3})}))}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,t=(({player:e,sourceKeySystems:t,media:n,audioMedia:i})=>{const r=((e,t,n)=>{if(!e)return e;let i={};t&&t.attributes&&t.attributes.CODECS&&(i=Dw(ph(t.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(i.audio=n.attributes.CODECS);const r=fh(i.video),s=fh(i.audio),o={};for(const n in e)o[n]={},s&&(o[n].audioContentType=s),r&&(o[n].videoContentType=r),t.contentProtection&&t.contentProtection[n]&&t.contentProtection[n].pssh&&(o[n].pssh=t.contentProtection[n].pssh),"string"==typeof e[n]&&(o[n].url=e[n]);return Yb(e,o)})(t,n,i);return!(!r||(e.currentSource().keySystems=r,r&&!e.eme&&($b.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1)))})({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});this.player_.tech_.on("keystatuschange",(e=>{if("output-restricted"!==e.status)return;const t=this.playlistController_.main();if(!t||!t.playlists)return;const n=[];t.playlists.forEach((e=>{e&&e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height>=720&&(!e.excludeUntil||e.excludeUntil<1/0)&&(e.excludeUntil=1/0,n.push(e))})),n.length&&($b.log.warn('DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.',...n),this.playlistController_.fastQualityChange_())})),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),t?this.createKeySessions_():this.playlistController_.sourceUpdater_.initializedEme()}setupQualityLevels_(){const e=$b.players[this.tech_.options_.playerId];e&&e.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",(()=>{!function(e,t){t.representations().forEach((t=>{e.addQualityLevel(t)})),$T(e,t.playlists)}(this.qualityLevels_,this)})),this.playlists.on("mediachange",(()=>{$T(this.qualityLevels_,this.playlists)})))}static version(){return{"@videojs/http-streaming":FT,"mux.js":"6.3.0","mpd-parser":"1.1.1","m3u8-parser":"6.0.0","aes-decrypter":"4.0.1"}}version(){return this.constructor.version()}canChangeType(){return hT.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&Mp().URL.revokeObjectURL&&(Mp().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,t){return(({playlist:e,time:t,callback:n})=>{if(!n)throw new Error("getProgramTime: callback must be provided");if(!e||void 0===t)return n({message:"getProgramTime: playlist and time must be provided"});const i=((e,t)=>{if(!t||!t.segments||0===t.segments.length)return null;let n,i=0;for(let r=0;r<t.segments.length&&(n=t.segments[r],i=n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:i+n.duration,!(e<=i));r++);const r=t.segments[t.segments.length-1];if(r.videoTimingInfo&&r.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>i){if(e>i+.25*r.duration)return null;n=r}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:i-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}})(t,e);if(!i)return n({message:"valid programTime was not found"});if("estimate"===i.type)return n({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:i.estimatedStart});const r={mediaSeconds:t},s=((e,t)=>{if(!t.dateTimeObject)return null;const n=t.videoTimingInfo.transmuxerPrependedSeconds,i=e-(t.videoTimingInfo.transmuxedPresentationStart+n);return new Date(t.dateTimeObject.getTime()+1e3*i)})(t,i.segment);return s&&(r.programDateTime=s.toISOString()),n(null,r)})({playlist:this.playlistController_.media(),time:e,callback:t})}seekToProgramTime(e,t,n=!0,i=2){return Q_({programTime:e,playlist:this.playlistController_.media(),retryCount:i,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}setupXhrHooks_(){this.xhr.onRequest=e=>{WT(this.xhr,e)},this.xhr.onResponse=e=>{ZT(this.xhr,e)},this.xhr.offRequest=e=>{GT(this.xhr,e)},this.xhr.offResponse=e=>{XT(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}}const YT={name:"videojs-http-streaming",VERSION:FT,canHandleSource(e,t={}){const n=Yb($b.options,t);return YT.canPlayType(e.type,n)},handleSource(e,t,n={}){const i=Yb($b.options,n);return t.vhs=new JT(e,t,i),t.vhs.xhr=z_(),t.vhs.setupXhrHooks_(),t.vhs.src(e.src,e.type),t.vhs},canPlayType(e,t){const n=_h(e);if(!n)return"";const i=YT.getOverrideNative(t);return!VT.supportsTypeNatively(n)||i?"maybe":""},getOverrideNative(e={}){const{vhs:t={}}=e,n=!($b.browser.IS_ANY_SAFARI||$b.browser.IS_IOS),{overrideNative:i=n}=t;return i}};gh("avc1.4d400d,mp4a.40.2")&&$b.getTech("Html5").registerSourceHandler(YT,0),$b.VhsHandler=JT,$b.VhsSourceHandler=YT,$b.Vhs=VT,$b.use||$b.registerComponent("Vhs",VT),$b.options.vhs=$b.options.vhs||{},$b.getPlugin&&$b.getPlugin("reloadSourceOnError")||$b.registerPlugin("reloadSourceOnError",(function(e){qT(this,e)}));var QT="7.3.2",eI=function(e,t){t.isImmediatePropagationStopped=function(){return!0},t.cancelBubble=!0,t.isPropagationStopped=function(){return!0}},tI=function(e,t,n){eI(0,n),e.trigger({type:t+n.type,originalEvent:n})};function nI(e){"playing"===e.type?function(e,t){e.ads.isInAdMode()&&(e.ads.isContentResuming()?e.ads._contentEnding&&tI(e,"content",t):tI(e,"ad",t))}(this,e):"ended"===e.type?function(e,t){e.ads.isInAdMode()?e.ads.isContentResuming()?(eI(0,t),e.trigger("resumeended")):tI(e,"ad",t):e.ads._contentHasEnded||e.ads.stitchedAds()||(tI(e,"content",t),e.trigger("readyforpostroll"))}(this,e):"loadstart"===e.type||"loadeddata"===e.type||"loadedmetadata"===e.type?function(e,t){if(!("loadstart"===t.type&&!e.ads._hasThereBeenALoadStartDuringPlayerLife||"loadeddata"===t.type&&!e.ads._hasThereBeenALoadedData||"loadedmetadata"===t.type&&!e.ads._hasThereBeenALoadedMetaData))if(e.ads.inAdBreak())tI(e,"ad",t);else{if(e.currentSrc()!==e.ads.contentSrc)return;tI(e,"content",t)}}(this,e):"play"===e.type?function(e,t){e.ads.inAdBreak()?tI(e,"ad",t):e.ads.isContentResuming()&&tI(e,"content",t)}(this,e):this.ads.isInAdMode()&&(this.ads.isContentResuming()?tI(this,"content",e):tI(this,"ad",e))}function iI(){return iI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},iI.apply(this,arguments)}function rI(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,sI(e,t)}function sI(e,t){return sI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},sI(e,t)}var oI={},aI=function(){!function(e){if($b.dom.isInFrame()&&"function"!=typeof Mp().__tcfapi){for(var t,n=Mp(),i={};n;){try{if(n.frames.__tcfapiLocator){t=n;break}}catch(e){}if(n===Mp().top)break;n=n.parent}if(!t)return;Mp().__tcfapi=function(e,n,r,s){var o=Math.random()+"",a={__tcfapiCall:{command:e,parameter:s,version:n,callId:o}};i[o]=r,t.postMessage(a,"*")},Mp().addEventListener("message",(function(e){var t={};try{t="string"==typeof e.data?JSON.parse(e.data):e.data}catch(e){}var n=t.__tcfapiReturn;n&&"function"==typeof i[n.callId]&&(i[n.callId](n.returnValue,n.success),i[n.callId]=null)}),!1)}}(),"function"==typeof Mp().__tcfapi&&Mp().__tcfapi("addEventListener",2,(function(e,t){t&&(oI=e)}))},dI="",lI=function(e,t){if(void 0===t&&(t=Mp()),t.__uspapi)t.__uspapi("getUSPData",1,(function(t,n){var i=n?t.uspString:null;dI=i,e(i)}));else{var n=function(e){for(var t=e.parent;t!==e.top;){try{if(t.frames&&t.frames.__uspapiLocator)return t}catch(e){}t=t.parent}try{if(e.top.frames&&e.top.frames.__uspapiLocator)return e.top}catch(e){}return null}(t);if(!n)return void e(null);var i=Math.random().toString(36).substring(2),r={__uspapiCall:{command:"getUSPData",version:1,callId:i}};t.addEventListener("message",(function n(r){if(r&&r.data&&r.data.__uspapiReturn&&r.data.__uspapiReturn.callId===i){t.removeEventListener("message",n,!1);var s=r.data.__uspapiReturn,o=s.returnValue,a=s.success?o.uspString:null;dI=a,e(a)}}),!1),n.postMessage(r,"*")}},cI=function(e,t){return t?encodeURIComponent(e):e},uI=function(e,t,n,i){for(var r in void 0===i&&(i={}),t){var s=i.hasOwnProperty(r)?i[r]:r;if(s.startsWith("r:"))try{var o=new RegExp(s.slice(2),"g");e=e.replace(o,cI(t[r],n))}catch(e){$b.log.warn('Unable to replace macro with regex "'+s+'". The provided regex may be invalid.')}else e=e.split(s).join(cI(t[r],n))}return e};function pI(e,t,n){void 0===t&&(t=!1),void 0===n&&(n={});var i=n.disableDefaultMacros||!1,r=n.macroNameOverrides||{};delete n.disableDefaultMacros,delete n.macroNameOverrides;var s=n;if(i)return uI(e,s,t,r);var o,a,d,l=function(e){var t={},n=e.replace(/{([^}=]+)=([^}]*)}/g,(function(e,n,i){return t["{"+n+"}"]=i,"{"+n+"}"}));return{defaults:t,modifiedString:n}}(e),c=l.defaults,u=l.modifiedString;for(var p in e=u,iI(s,{"{player.id}":(d=this).options_["data-player"]||d.id_,"{player.height}":d.currentHeight(),"{player.width}":d.currentWidth(),"{player.heightInt}":Math.round(d.currentHeight()),"{player.widthInt}":Math.round(d.currentWidth()),"{player.autoplay}":d.autoplay()?1:0,"{player.muted}":d.muted()?1:0,"{player.language}":d.language()||"","{mediainfo.id}":d.mediainfo?d.mediainfo.id:"","{mediainfo.name}":d.mediainfo?d.mediainfo.name:"","{mediainfo.duration}":d.mediainfo?d.mediainfo.duration:"","{player.duration}":d.duration(),"{player.durationInt}":Math.round(d.duration()),"{player.live}":d.duration()===1/0?1:0,"{player.pageUrl}":$b.dom.isInFrame()?Up().referrer:Mp().location.href,"{playlistinfo.id}":d.playlistinfo?d.playlistinfo.id:"","{playlistinfo.name}":d.playlistinfo?d.playlistinfo.name:"","{timestamp}":(new Date).getTime(),"{document.referrer}":Up().referrer,"{window.location.href}":Mp().location.href,"{random}":Math.floor(1e12*Math.random())},function(e,t){var n={};return["description","tags","reference_id","ad_keys"].forEach((function(i){e&&e[i]?n["{mediainfo."+i+"}"]=e[i]:t["{mediainfo."+i+"}"]?n["{mediainfo."+i+"}"]=t["{mediainfo."+i+"}"]:n["{mediainfo."+i+"}"]=""})),["custom_fields","customFields"].forEach((function(t){!function(e,t,n){if(e&&e[n])for(var i=e[n],r=Object.keys(i),s=0;s<r.length;s++)t["{mediainfo."+n+"."+r[s]+"}"]=i[r[s]]}(e,n,t)})),n}(this.mediainfo,c),(o=oI,a={},Object.keys(o).forEach((function(e){a["{tcf."+e+"}"]=o[e]})),a["{tcf.gdprAppliesInt}"]=o.gdprApplies?1:0,a),{"{usp.uspString}":dI},function(e,t,n){var i=new RegExp("{pageVariable\\.([^}]+)}","g"),r={},s=(e.match(i)||[]).concat(Object.keys(n).filter((function(t){return i.test(t)&&e.includes(n[t])})));if(s)return s.forEach((function(e){for(var n,i=e,s=e.slice(14,-1),o=s.split("."),a=Mp(),d=0;d<o.length;d++)if(d===o.length-1)n=a[o[d]];else if(void 0===(a=a[o[d]]))break;var l=typeof n;null===n?r[i]="null":void 0===n?t[i]?r[i]=t[i]:($b.log.warn('Page variable "'+s+'" not found'),r[i]=""):"string"!==l&&"number"!==l&&"boolean"!==l?($b.log.warn('Page variable "'+s+'" is not a supported type'),r[i]=""):r[i]=n})),r}(e,c,r)),e=uI(e,s,t,r),c)e=e.replace(p,c[p]);return e}var hI={processMetadataTracks:function(e,t){for(var n=e.textTracks(),i=function(n){"metadata"===n.kind&&(e.ads.cueTextTracks.setMetadataTrackMode(n),t(e,n))},r=0;r<n.length;r++)i(n[r]);n.addEventListener("addtrack",(function(e){i(e.track)}))},setMetadataTrackMode:function(e){},getSupportedAdCue:function(e,t){return t},isSupportedAdCue:function(e,t){return!0},getCueId:function(e,t){return t.id}},fI=function(e,t){return void 0!==t&&e.ads.includedCues[t]},gI=function(e,t){void 0!==t&&""!==t&&(e.ads.includedCues[t]=!0)};function mI(){!1!==this.ads._shouldBlockPlay&&(this.paused()||(this.ads.debug("Playback was canceled by cancelContentPlay"),this.pause()),this.ads._cancelledPlay=!0)}hI.processAdTrack=function(e,t,n,i){e.ads.includedCues={};for(var r=0;r<t.length;r++){var s=t[r],o=this.getSupportedAdCue(e,s);if(!this.isSupportedAdCue(e,s))return void $b.log.warn("Skipping as this is not a supported ad cue.",s);var a=this.getCueId(e,s),d=s.startTime;if(fI(e,a))return void $b.log("Skipping ad already seen with ID "+a);i&&i(e,o,a,d),n(e,o,a,d),gI(e,a)}};var yI={},vI=$b;yI.isMiddlewareMediatorSupported=function(){return!vI.browser.IS_IOS&&!vI.browser.IS_ANDROID&&!!(vI.use&&vI.middleware&&vI.middleware.TERMINATOR)},yI.playMiddleware=function(e){return{setSource:function(e,t){t(null,e)},callPlay:function(){if(e.ads&&!0===e.ads._shouldBlockPlay)return e.ads.debug("Using playMiddleware to block content playback"),e.ads._playBlocked=!0,vI.middleware.TERMINATOR},play:function(t,n){e.ads&&e.ads._playBlocked&&t?(e.ads.debug("Play call to Tech was terminated."),e.trigger("play"),e.addClass("vjs-has-started"),e.ads._playBlocked=!1):n&&n.catch&&n.catch((function(t){"NotAllowedError"!==t.name||$b.browser.IS_SAFARI||e.trigger("pause")}))}}},yI.testHook=function(e){vI=e};var bI=yI.playMiddleware,_I=yI.isMiddlewareMediatorSupported,wI=function(){function e(){}return e.getState=function(t){if(t)return e.states_&&e.states_[t]?e.states_[t]:void 0},e.registerState=function(t,n){if("string"!=typeof t||!t)throw new Error('Illegal state name, "'+t+'"; must be a non-empty string.');return e.states_||(e.states_={}),e.states_[t]=n,n},e}(),TI=function(){function e(e){this.player=e}e._getName=function(){return"Anonymous State"};var t=e.prototype;return t.transitionTo=function(e){var t=this.player;this.cleanup(t);var n=new e(t);t.ads._state=n,t.ads.debug(this.constructor._getName()+" -> "+n.constructor._getName());for(var i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];n.init.apply(n,[t].concat(r))},t.init=function(){},t.cleanup=function(){},t.onPlay=function(){},t.onPlaying=function(){},t.onEnded=function(){},t.onAdEnded=function(){},t.onAdsReady=function(){$b.log.warn("Unexpected adsready event")},t.onAdsError=function(){},t.onAdsCanceled=function(){},t.onAdTimeout=function(){},t.onAdStarted=function(){},t.onAdSkipped=function(){},t.onContentChanged=function(){},t.onContentResumed=function(){},t.onReadyForPostroll=function(){$b.log.warn("Unexpected readyforpostroll event")},t.onNoPreroll=function(){},t.onNoPostroll=function(){},t.startLinearAdMode=function(){$b.log.warn("Unexpected startLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.endLinearAdMode=function(){$b.log.warn("Unexpected endLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.skipLinearAdMode=function(){$b.log.warn("Unexpected skipLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.isAdState=function(){throw new Error("isAdState unimplemented for "+this.constructor._getName())},t.isWaitingForAdBreak=function(){return!1},t.isContentResuming=function(){return!1},t.inAdBreak=function(){return!1},t.handleEvent=function(e){var t=this.player;"play"===e?this.onPlay(t):"adsready"===e?this.onAdsReady(t):"adserror"===e?this.onAdsError(t):"adscanceled"===e?this.onAdsCanceled(t):"adtimeout"===e?this.onAdTimeout(t):"ads-ad-started"===e?this.onAdStarted(t):"ads-ad-skipped"===e?this.onAdSkipped(t):"contentchanged"===e?this.onContentChanged(t):"contentresumed"===e?this.onContentResumed(t):"readyforpostroll"===e?this.onReadyForPostroll(t):"playing"===e?this.onPlaying(t):"ended"===e?this.onEnded(t):"nopreroll"===e?this.onNoPreroll(t):"nopostroll"===e?this.onNoPostroll(t):"adended"===e&&this.onAdEnded(t)},e}();wI.registerState("State",TI);var II=function(e){function t(t){var n;return(n=e.call(this,t)||this).contentResuming=!1,n.waitingForAdBreak=!1,n}rI(t,e);var n=t.prototype;return n.isAdState=function(){return!0},n.onPlaying=function(){var e=wI.getState("ContentPlayback");this.contentResuming&&this.transitionTo(e)},n.onContentResumed=function(){var e=wI.getState("ContentPlayback");this.contentResuming&&this.transitionTo(e)},n.isWaitingForAdBreak=function(){return this.waitingForAdBreak},n.isContentResuming=function(){return this.contentResuming},n.inAdBreak=function(){return!0===this.player.ads._inLinearAdMode},t}(TI);wI.registerState("AdState",II);var SI=function(e){function t(){return e.apply(this,arguments)||this}rI(t,e);var n=t.prototype;return n.isAdState=function(){return!1},n.onContentChanged=function(e){var t=wI.getState("BeforePreroll"),n=wI.getState("Preroll");e.ads.debug("Received contentchanged event (ContentState)"),e.paused()?this.transitionTo(t):(this.transitionTo(n,!1),e.pause(),e.ads._pausedOnContentupdate=!0)},t}(TI);wI.registerState("ContentState",SI);var kI,CI=function(e){function t(){return e.apply(this,arguments)||this}rI(t,e),t._getName=function(){return"AdsDone"};var n=t.prototype;return n.init=function(e){e.ads._contentHasEnded=!0,e.trigger("ended")},n.startLinearAdMode=function(){$b.log.warn("Unexpected startLinearAdMode invocation (AdsDone)")},t}(wI.getState("ContentState"));wI.registerState("AdsDone",CI);var EI=function(e){e.ads.debug("Starting ad break"),e.ads._inLinearAdMode=!0,e.trigger("adstart"),e.ads.shouldTakeSnapshots()&&(e.ads.snapshot=function(e){var t;t=$b.browser.IS_IOS&&e.ads.isLive(e)&&e.seekable().length>0?e.currentTime()-e.seekable().end(0):e.currentTime();var n=e.$(".vjs-tech"),i=e.textTracks?e.textTracks():[],r=[],s={ended:e.ended(),currentSrc:e.currentSrc(),sources:e.currentSources(),src:e.tech_.src(),currentTime:t,type:e.currentType()};n&&(s.style=n.getAttribute("style"));for(var o=0;o<i.length;o++){var a=i[o];r.push({track:a,mode:a.mode}),a.mode="disabled"}return s.suppressedTracks=r,s}(e)),e.ads.shouldPlayContentBehindAd(e)&&(e.ads.preAdVolume_=e.volume(),e.volume(0)),e.addClass("vjs-ad-playing"),e.hasClass("vjs-live")&&e.removeClass("vjs-live"),e.ads.removeNativePoster(),e.ads.preAdPlaybackRate_=e.playbackRate(),e.playbackRate(1),e.controlBar&&e.controlBar.playbackRateMenuButton&&e.controlBar.playbackRateMenuButton.playbackRateSupported&&!e.controlBar.playbackRateMenuButton.hasClass("vjs-hidden")?(e.controlBar.playbackRateMenuButton.hide(),e.ads.showPlaybackMenuOnAdEnd_=!0):e.ads.showPlaybackMenuOnAdEnd_=!1},AI=function(e,t){e.ads.debug("Ending ad break"),void 0===t&&(t=function(){}),e.ads.adType=null,e.ads._inLinearAdMode=!1,e.trigger("adend"),e.removeClass("vjs-ad-playing"),e.ads.isLive(e)&&e.addClass("vjs-live"),e.ads.shouldTakeSnapshots()?function(e,t){var n=e.ads.snapshot;if(void 0===t&&(t=function(){}),!0===e.ads.disableNextSnapshotRestore)return e.ads.disableNextSnapshotRestore=!1,delete e.ads.snapshot,void t();var i,r=e.$(".vjs-tech"),s=20,o=n.suppressedTracks,a=function(){for(var e=0;e<o.length;e++)(i=o[e]).track.mode=i.mode},d=function(){var t;if($b.browser.IS_IOS&&e.ads.isLive(e)){if(n.currentTime<0&&(t=e.seekable().length>0?e.seekable().end(0)+n.currentTime:e.currentTime(),e.currentTime(t)),e.paused()){var i=e.play();i&&i.catch&&i.catch((function(e){$b.log.warn("Play promise rejected in IOS snapshot resume",e)}))}}else if(n.ended)e.currentTime(e.duration());else{e.currentTime(n.currentTime);var r=e.play();r&&r.catch&&r.catch((function(e){$b.log.warn("Play promise rejected in snapshot resume",e)}))}e.ads.shouldRemoveAutoplay_&&(e.autoplay(!1),e.ads.shouldRemoveAutoplay_=!1)},l=function t(){if(e.off("contentcanplay",t),kI&&e.clearTimeout(kI),(r=e.el().querySelector(".vjs-tech")).readyState>1)return d();if(void 0===r.seekable)return d();if(r.seekable.length>0)return d();if(s--)e.setTimeout(t,50);else try{d()}catch(e){$b.log.warn("Failed to resume the content after an advertisement",e)}};if("style"in n&&r.setAttribute("style",n.style||""),e.ads.videoElementRecycled())e.one("resumeended",(function(){delete e.ads.snapshot,t()})),e.one("contentloadedmetadata",a),$b.browser.IS_IOS&&!e.autoplay()&&(e.autoplay(!0),e.ads.shouldRemoveAutoplay_=!0),e.src(n.sources),e.one("contentcanplay",l),kI=e.setTimeout(l,2e3);else{if(a(),!e.ended()){var c=e.play();c&&c.catch&&c.catch((function(e){$b.log.warn("Play promise rejected in snapshot restore",e)}))}delete e.ads.snapshot,t()}}(e,t):(e.volume(e.ads.preAdVolume_),t()),e.playbackRate(e.ads.preAdPlaybackRate_),e.ads.showPlaybackMenuOnAdEnd_&&e.controlBar.playbackRateMenuButton.show()},PI=function(e){function t(){return e.apply(this,arguments)||this}rI(t,e),t._getName=function(){return"Preroll"};var n=t.prototype;return n.init=function(e,t,n){if(this.waitingForAdBreak=!0,e.addClass("vjs-ad-loading"),n||e.ads.nopreroll_)return this.resumeAfterNoPreroll(e);var i=e.ads.settings.timeout;"number"==typeof e.ads.settings.prerollTimeout&&(i=e.ads.settings.prerollTimeout),this._timeout=e.setTimeout((function(){e.trigger("adtimeout")}),i),t?this.handleAdsReady():this.adsReady=!1},n.onAdsReady=function(e){e.ads.inAdBreak()?$b.log.warn("Unexpected adsready event (Preroll)"):(e.ads.debug("Received adsready event (Preroll)"),this.handleAdsReady())},n.handleAdsReady=function(){this.adsReady=!0,this.readyForPreroll()},n.afterLoadStart=function(e){var t=this.player;t.ads._hasThereBeenALoadStartDuringPlayerLife?e():(t.ads.debug("Waiting for loadstart..."),t.one("loadstart",(function(){t.ads.debug("Received loadstart event"),e()})))},n.noPreroll=function(){var e=this;this.afterLoadStart((function(){e.player.ads.debug("Skipping prerolls due to nopreroll event (Preroll)"),e.resumeAfterNoPreroll(e.player)}))},n.readyForPreroll=function(){var e=this.player;this.afterLoadStart((function(){e.ads.debug("Triggered readyforpreroll event (Preroll)"),e.trigger("readyforpreroll")}))},n.onAdsCanceled=function(e){var t=this;e.ads.debug("adscanceled (Preroll)"),this.afterLoadStart((function(){t.resumeAfterNoPreroll(e)}))},n.onAdsError=function(e){var t=this;$b.log("adserror (Preroll)"),this.inAdBreak()?e.ads.endLinearAdMode():this.afterLoadStart((function(){t.resumeAfterNoPreroll(e)}))},n.startLinearAdMode=function(){var e=this.player;!this.adsReady||e.ads.inAdBreak()||this.isContentResuming()?$b.log.warn("Unexpected startLinearAdMode invocation (Preroll)"):(this.clearTimeout(e),e.ads.adType="preroll",this.waitingForAdBreak=!1,EI(e),e.ads._shouldBlockPlay=!1)},n.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.endLinearAdMode=function(){var e=this.player;this.inAdBreak()&&(e.removeClass("vjs-ad-loading"),e.addClass("vjs-ad-content-resuming"),this.contentResuming=!0,AI(e))},n.skipLinearAdMode=function(){var e=this,t=this.player;t.ads.inAdBreak()||this.isContentResuming()?$b.log.warn("Unexpected skipLinearAdMode invocation"):this.afterLoadStart((function(){t.trigger("adskip"),t.ads.debug("skipLinearAdMode (Preroll)"),e.resumeAfterNoPreroll(t)}))},n.onAdTimeout=function(e){var t=this;this.afterLoadStart((function(){e.ads.debug("adtimeout (Preroll)"),t.resumeAfterNoPreroll(e)}))},n.onNoPreroll=function(e){e.ads.inAdBreak()||this.isContentResuming()?$b.log.warn("Unexpected nopreroll event (Preroll)"):this.noPreroll()},n.resumeAfterNoPreroll=function(e){if(this.contentResuming=!0,e.ads._shouldBlockPlay=!1,this.cleanupPartial(e),e.ads._playRequested||e.ads._pausedOnContentupdate)if(e.paused()){e.ads.debug("resumeAfterNoPreroll: attempting to resume playback (Preroll)");var t=e.play();t&&t.then&&t.then(null,(function(e){}))}else e.ads.debug("resumeAfterNoPreroll: already playing (Preroll)"),e.trigger("play"),e.trigger("playing")},n.cleanup=function(e){e.ads._hasThereBeenALoadStartDuringPlayerLife||$b.log.warn("Leaving Preroll state before loadstart event can cause issues."),this.cleanupPartial(e)},n.cleanupPartial=function(e){e.removeClass("vjs-ad-loading"),e.removeClass("vjs-ad-content-resuming"),this.clearTimeout(e)},n.clearTimeout=function(e){e.clearTimeout(this._timeout),this._timeout=null},t}(wI.getState("AdState"));wI.registerState("Preroll",PI);var xI=function(e){function t(){return e.apply(this,arguments)||this}rI(t,e),t._getName=function(){return"BeforePreroll"};var n=t.prototype;return n.init=function(e){this.adsReady=!1,this.shouldResumeToContent=!1,e.ads._shouldBlockPlay=!e.ads.settings.allowVjsAutoplay||!e.autoplay()},n.onAdsReady=function(e){e.ads.debug("Received adsready event (BeforePreroll)"),this.adsReady=!0},n.onPlay=function(e){var t=wI.getState("Preroll");e.ads.debug("Received play event (BeforePreroll)"),this.transitionTo(t,this.adsReady,this.shouldResumeToContent)},n.onAdsCanceled=function(e){e.ads.debug("adscanceled (BeforePreroll)"),this.shouldResumeToContent=!0},n.onAdsError=function(){this.player.ads.debug("adserror (BeforePreroll)"),this.shouldResumeToContent=!0},n.onNoPreroll=function(){this.player.ads.debug("Skipping prerolls due to nopreroll event (BeforePreroll)"),this.shouldResumeToContent=!0},n.skipLinearAdMode=function(){var e=this.player;e.trigger("adskip"),e.ads.debug("skipLinearAdMode (BeforePreroll)"),this.shouldResumeToContent=!0},n.onContentChanged=function(){this.init(this.player)},t}(wI.getState("ContentState"));wI.registerState("BeforePreroll",xI);var DI=function(e){function t(){return e.apply(this,arguments)||this}rI(t,e),t._getName=function(){return"Midroll"};var n=t.prototype;return n.init=function(e){e.ads.adType="midroll",EI(e),e.addClass("vjs-ad-loading")},n.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.endLinearAdMode=function(){var e=this.player;this.inAdBreak()&&(this.contentResuming=!0,e.addClass("vjs-ad-content-resuming"),e.removeClass("vjs-ad-loading"),AI(e))},n.onAdsError=function(e){this.inAdBreak()&&e.ads.endLinearAdMode()},n.cleanup=function(e){e.removeClass("vjs-ad-loading"),e.removeClass("vjs-ad-content-resuming")},t}(wI.getState("AdState"));wI.registerState("Midroll",DI);var OI=function(e){function t(){return e.apply(this,arguments)||this}rI(t,e),t._getName=function(){return"Postroll"};var n=t.prototype;return n.init=function(e){if(this.waitingForAdBreak=!0,e.ads._contentEnding=!0,e.ads.nopostroll_){this.resumeContent(e);var t=wI.getState("AdsDone");this.transitionTo(t)}else{e.addClass("vjs-ad-loading");var n=e.ads.settings.timeout;"number"==typeof e.ads.settings.postrollTimeout&&(n=e.ads.settings.postrollTimeout),this._postrollTimeout=e.setTimeout((function(){e.trigger("adtimeout")}),n)}},n.startLinearAdMode=function(){var e=this.player;e.ads.inAdBreak()||this.isContentResuming()?$b.log.warn("Unexpected startLinearAdMode invocation (Postroll)"):(e.ads.adType="postroll",e.clearTimeout(this._postrollTimeout),this.waitingForAdBreak=!1,EI(e))},n.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.endLinearAdMode=function(){var e=this,t=this.player,n=wI.getState("AdsDone");this.inAdBreak()&&(t.removeClass("vjs-ad-loading"),this.resumeContent(t),AI(t,(function(){e.transitionTo(n)})))},n.skipLinearAdMode=function(){var e=this.player;e.ads.inAdBreak()||this.isContentResuming()?$b.log.warn("Unexpected skipLinearAdMode invocation"):(e.ads.debug("Postroll abort (skipLinearAdMode)"),e.trigger("adskip"),this.abort(e))},n.onAdTimeout=function(e){e.ads.debug("Postroll abort (adtimeout)"),this.abort(e)},n.onAdsError=function(e){e.ads.debug("Postroll abort (adserror)"),e.ads.inAdBreak()?e.ads.endLinearAdMode():this.abort(e)},n.onContentChanged=function(e){if(this.isContentResuming()){var t=wI.getState("BeforePreroll");this.transitionTo(t)}else if(!this.inAdBreak()){var n=wI.getState("Preroll");this.transitionTo(n)}},n.onNoPostroll=function(e){this.isContentResuming()||this.inAdBreak()?$b.log.warn("Unexpected nopostroll event (Postroll)"):this.abort(e)},n.resumeContent=function(e){this.contentResuming=!0,e.addClass("vjs-ad-content-resuming")},n.abort=function(e){var t=wI.getState("AdsDone");this.resumeContent(e),e.removeClass("vjs-ad-loading"),this.transitionTo(t)},n.cleanup=function(e){e.removeClass("vjs-ad-content-resuming"),e.clearTimeout(this._postrollTimeout),e.ads._contentEnding=!1},t}(wI.getState("AdState"));wI.registerState("Postroll",OI);var RI=function(e){function t(){return e.apply(this,arguments)||this}rI(t,e),t._getName=function(){return"ContentPlayback"};var n=t.prototype;return n.init=function(e){e.ads._shouldBlockPlay=!1},n.onAdsReady=function(e){e.ads.debug("Received adsready event (ContentPlayback)"),e.ads.nopreroll_||(e.ads.debug("Triggered readyforpreroll event (ContentPlayback)"),e.trigger("readyforpreroll"))},n.onReadyForPostroll=function(e){var t=wI.getState("Postroll");e.ads.debug("Received readyforpostroll event"),this.transitionTo(t)},n.startLinearAdMode=function(){var e=wI.getState("Midroll");this.transitionTo(e)},t}(wI.getState("ContentState"));wI.registerState("ContentPlayback",RI);var NI=function(e){function t(){return e.apply(this,arguments)||this}rI(t,e),t._getName=function(){return"StitchedContentPlayback"};var n=t.prototype;return n.init=function(){this.player.ads._shouldBlockPlay=!1},n.onContentChanged=function(){this.player.ads.debug("Received contentchanged event ("+this.constructor._getName()+")")},n.startLinearAdMode=function(){var e=wI.getState("StitchedAdRoll");this.transitionTo(e)},t}(wI.getState("ContentState"));wI.registerState("StitchedContentPlayback",NI);var MI=function(e){function t(){return e.apply(this,arguments)||this}rI(t,e),t._getName=function(){return"StitchedAdRoll"};var n=t.prototype;return n.init=function(){this.waitingForAdBreak=!1,this.contentResuming=!1,this.player.ads.adType="stitched",EI(this.player)},n.onPlaying=function(){},n.onContentResumed=function(){},n.onAdEnded=function(){this.endLinearAdMode(),this.player.trigger("ended")},n.endLinearAdMode=function(){var e=wI.getState("StitchedContentPlayback");AI(this.player),this.transitionTo(e)},t}(wI.getState("AdState"));wI.registerState("StitchedAdRoll",MI);var LI=yI.isMiddlewareMediatorSupported,UI=$b.getTech("Html5").Events,jI={timeout:5e3,prerollTimeout:void 0,postrollTimeout:void 0,debug:!1,stitchedAds:!1,contentIsLive:void 0,liveCuePoints:!0,allowVjsAutoplay:$b.options.normalizeAutoplay||!1},BI=function(e){var t=this,n=$b.obj.merge(jI,e),i=[];UI.concat(["firstplay","loadedalldata"]).forEach((function(e){-1===i.indexOf(e)&&i.push(e)})),t.on(i,nI),LI()||function(e,t){t&&$b.log("Using cancelContentPlay to block content playback"),e.on("play",mI)}(t,n.debug),t.setTimeout((function(){t.ads._hasThereBeenALoadStartDuringPlayerLife||""===t.src()||$b.log.error("videojs-contrib-ads has not seen a loadstart event 5 seconds after being initialized, but a source is present. This indicates that videojs-contrib-ads was initialized too late. It must be initialized immediately after video.js in the same tick. As a result, some ads will not play and some media events will be incorrect. For more information, see http://videojs.github.io/videojs-contrib-ads/integrator/getting-started.html")}),5e3),t.on("ended",(function(){t.hasClass("vjs-has-started")||t.addClass("vjs-has-started")})),t.on("contenttimeupdate",(function(){t.removeClass("vjs-waiting")})),t.on(["addurationchange","adcanplay"],(function(){if(!t.ads.settings.stitchedAds&&!t.hasStarted()&&(!t.ads.snapshot||t.currentSrc()!==t.ads.snapshot.currentSrc)&&t.ads.inAdBreak()){var e=t.play();e&&e.catch&&e.catch((function(e){$b.log.warn("Play promise rejected when playing ad",e)}))}})),t.on("nopreroll",(function(){t.ads.debug("Received nopreroll event"),t.ads.nopreroll_=!0})),t.on("nopostroll",(function(){t.ads.debug("Received nopostroll event"),t.ads.nopostroll_=!0})),t.on("playing",(function(){t.ads._cancelledPlay=!1,t.ads._pausedOnContentupdate=!1})),t.on("play",(function(){t.ads._playRequested=!0})),t.one("loadstart",(function(){t.ads._hasThereBeenALoadStartDuringPlayerLife=!0})),t.on("loadeddata",(function(){t.ads._hasThereBeenALoadedData=!0})),t.on("loadedmetadata",(function(){t.ads._hasThereBeenALoadedMetaData=!0})),t.ads=function(e){return{disableNextSnapshotRestore:!1,_contentEnding:!1,_contentHasEnded:!1,_hasThereBeenALoadStartDuringPlayerLife:!1,_hasThereBeenALoadedData:!1,_hasThereBeenALoadedMetaData:!1,_inLinearAdMode:!1,_shouldBlockPlay:!1,_playBlocked:!1,_playRequested:!1,adType:null,VERSION:QT,reset:function(){e.ads.disableNextSnapshotRestore=!1,e.ads._contentEnding=!1,e.ads._contentHasEnded=!1,e.ads.snapshot=null,e.ads.adType=null,e.ads._hasThereBeenALoadedData=!1,e.ads._hasThereBeenALoadedMetaData=!1,e.ads._cancelledPlay=!1,e.ads._shouldBlockPlay=!1,e.ads._playBlocked=!1,e.ads.nopreroll_=!1,e.ads.nopostroll_=!1,e.ads._playRequested=!1},startLinearAdMode:function(){e.ads._state.startLinearAdMode()},endLinearAdMode:function(){e.ads._state.endLinearAdMode()},skipLinearAdMode:function(){e.ads._state.skipLinearAdMode()},stitchedAds:function(e){return void 0!==e&&($b.log.warn("Using player.ads.stitchedAds() as a setter is deprecated, it should be set as an option upon initialization of contrib-ads."),this.settings.stitchedAds=!!e),this.settings.stitchedAds},videoElementRecycled:function(){if(e.ads.shouldPlayContentBehindAd(e))return!1;if(!this.snapshot)throw new Error("You cannot use videoElementRecycled while there is no snapshot.");var t=e.tech_.src()!==this.snapshot.src,n=e.currentSrc()!==this.snapshot.currentSrc;return t||n},isLive:function(t){return void 0===t&&(t=e),"boolean"==typeof t.ads.settings.contentIsLive?t.ads.settings.contentIsLive:t.duration()===1/0||"8"===$b.browser.IOS_VERSION&&0===t.duration()},shouldPlayContentBehindAd:function(t){if(void 0===t&&(t=e),t)return!!t.ads.settings.liveCuePoints&&!$b.browser.IS_IOS&&!$b.browser.IS_ANDROID&&t.duration()===1/0;throw new Error("shouldPlayContentBehindAd requires a player as a param")},shouldTakeSnapshots:function(t){return void 0===t&&(t=e),!this.shouldPlayContentBehindAd(t)&&!this.stitchedAds()},isInAdMode:function(){return this._state.isAdState()},isWaitingForAdBreak:function(){return this._state.isWaitingForAdBreak()},isContentResuming:function(){return this._state.isContentResuming()},isAdPlaying:function(){return this._state.inAdBreak()},inAdBreak:function(){return this._state.inAdBreak()},removeNativePoster:function(){var t=e.$(".vjs-tech");t&&t.removeAttribute("poster")},debug:function(){if(this.settings.debug){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];1===t.length&&"string"==typeof t[0]?$b.log("ADS: "+t[0]):$b.log.apply($b,["ADS:"].concat(t))}}}}(t),t.ads.settings=n,n.stitchedAds=!!n.stitchedAds,n.stitchedAds?t.ads._state=new(wI.getState("StitchedContentPlayback"))(t):t.ads._state=new(wI.getState("BeforePreroll"))(t),t.ads._state.init(t),t.ads.cueTextTracks=hI,t.ads.adMacroReplacement=pI.bind(t),function(e){e.ads.contentSrc=e.currentSrc(),e.ads._seenInitialLoadstart=!1,e.on("loadstart",(function(){if(!e.ads.inAdBreak()){var t=e.currentSrc();t!==e.ads.contentSrc&&(e.ads._seenInitialLoadstart&&e.trigger({type:"contentchanged"}),e.trigger({type:"contentupdate",oldValue:e.ads.contentSrc,newValue:t}),e.ads.contentSrc=t),e.ads._seenInitialLoadstart=!0}}))}(t),t.on("contentchanged",t.ads.reset);var r=function(){var e=t.textTracks();if(!t.ads.shouldPlayContentBehindAd(t)&&t.ads.inAdBreak()&&t.tech_.featuresNativeTextTracks&&$b.browser.IS_IOS&&!Array.isArray(t.textTracks()))for(var n=0;n<e.length;n++){var i=e[n];"showing"===i.mode&&(i.mode="disabled")}};t.ready((function(){t.textTracks().addEventListener("change",r)})),t.on(["play","playing","ended","adsready","adscanceled","adskip","adserror","adtimeout","adended","ads-ad-started","ads-ad-skipped","contentchanged","dispose","contentresumed","readyforpostroll","nopreroll","nopostroll"],(function(e){t.ads._state.handleEvent(e.type)})),t.on("dispose",(function(){t.ads.reset(),t.textTracks().removeEventListener("change",r)})),aI(),lI((function(){})),t.ads.listenToTcf=aI,t.ads.updateUsPrivacyString=function(e){return lI(e)}};BI.VERSION=QT,function(e){!function(){if($b.getPlugin)return Boolean($b.getPlugin("ads"));var e=$b.getComponent("Player");return Boolean(e&&e.prototype.ads)}()&&(($b.registerPlugin||$b.plugin)("ads",e),_I()&&!$b.usingContribAdsMiddleware_&&($b.use("*",bI),$b.usingContribAdsMiddleware_=!0,$b.log.debug("Play middleware has been registered with videojs")))}(BI);var qI=function(e,t,n){this.vjsPlayer=e,this.controller=n,this.contentTrackingTimer=null,this.contentComplete=!1,this.updateTimeIntervalHandle=null,this.updateTimeInterval=1e3,this.seekCheckIntervalHandle=null,this.seekCheckInterval=1e3,this.resizeCheckIntervalHandle=null,this.resizeCheckInterval=250,this.seekThreshold=100,this.contentEndedListeners=[],this.contentSource="",this.contentSourceType="",this.contentPlayheadTracker={currentTime:0,previousTime:0,seeking:!1,duration:0},this.vjsPlayerDimensions={width:this.getPlayerWidth(),height:this.getPlayerHeight()},this.vjsControls=this.vjsPlayer.getChild("controlBar"),this.h5Player=null,this.vjsPlayer.one("play",this.setUpPlayerIntervals.bind(this)),this.boundContentEndedListener=this.localContentEndedListener.bind(this),this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsPlayer.on("dispose",this.playerDisposedListener.bind(this)),this.vjsPlayer.on("readyforpreroll",this.onReadyForPreroll.bind(this)),this.vjsPlayer.on("adtimeout",this.onAdTimeout.bind(this)),this.vjsPlayer.ready(this.onPlayerReady.bind(this)),"onPlay"===this.controller.getSettings().requestMode&&this.vjsPlayer.one("play",this.controller.requestAds.bind(this.controller)),this.vjsPlayer.ads||window.console.warn("You may be using a version of videojs-contrib-ads that is not compatible with your version of video.js."),this.vjsPlayer.ads(t)};qI.prototype.setUpPlayerIntervals=function(){this.updateTimeIntervalHandle=setInterval(this.updateCurrentTime.bind(this),this.updateTimeInterval),this.seekCheckIntervalHandle=setInterval(this.checkForSeeking.bind(this),this.seekCheckInterval),this.resizeCheckIntervalHandle=setInterval(this.checkForResize.bind(this),this.resizeCheckInterval)},qI.prototype.updateCurrentTime=function(){this.contentPlayheadTracker.seeking||(this.contentPlayheadTracker.currentTime=this.vjsPlayer.currentTime())},qI.prototype.checkForSeeking=function(){var e=1e3*(this.vjsPlayer.currentTime()-this.contentPlayheadTracker.previousTime);Math.abs(e)>this.seekCheckInterval+this.seekThreshold?this.contentPlayheadTracker.seeking=!0:this.contentPlayheadTracker.seeking=!1,this.contentPlayheadTracker.previousTime=this.vjsPlayer.currentTime()},qI.prototype.checkForResize=function(){var e=this.getPlayerWidth(),t=this.getPlayerHeight();e==this.vjsPlayerDimensions.width&&t==this.vjsPlayerDimensions.height||(this.vjsPlayerDimensions.width=e,this.vjsPlayerDimensions.height=t,this.controller.onPlayerResize(e,t))},qI.prototype.localContentEndedListener=function(){for(var e in this.contentComplete||(this.contentComplete=!0,this.controller.onContentComplete()),this.contentEndedListeners)"function"==typeof this.contentEndedListeners[e]&&this.contentEndedListeners[e]();clearInterval(this.updateTimeIntervalHandle),clearInterval(this.seekCheckIntervalHandle),clearInterval(this.resizeCheckIntervalHandle),this.vjsPlayer.el()&&this.vjsPlayer.one("play",this.setUpPlayerIntervals.bind(this))},qI.prototype.onNoPostroll=function(){this.vjsPlayer.trigger("nopostroll")},qI.prototype.playerDisposedListener=function(){this.contentEndedListeners=[],this.controller.onPlayerDisposed(),this.contentComplete=!0,this.vjsPlayer.off("contentended",this.boundContentEndedListener),this.vjsPlayer.ads.adTimeoutTimeout&&clearTimeout(this.vjsPlayer.ads.adTimeoutTimeout);var e=[this.updateTimeIntervalHandle,this.seekCheckIntervalHandle,this.resizeCheckIntervalHandle];for(var t in e)e[t]&&clearInterval(e[t])},qI.prototype.onReadyForPreroll=function(){this.controller.onPlayerReadyForPreroll()},qI.prototype.onAdTimeout=function(){this.controller.onAdTimeout()},qI.prototype.onPlayerReady=function(){this.h5Player=document.getElementById(this.getPlayerId()).getElementsByClassName("vjs-tech")[0],this.h5Player.hasAttribute("autoplay")&&this.controller.setSetting("adWillAutoPlay",!0),this.onVolumeChange(),this.vjsPlayer.on("fullscreenchange",this.onFullscreenChange.bind(this)),this.vjsPlayer.on("volumechange",this.onVolumeChange.bind(this)),this.controller.onPlayerReady()},qI.prototype.onFullscreenChange=function(){this.vjsPlayer.isFullscreen()?this.controller.onPlayerEnterFullscreen():this.controller.onPlayerExitFullscreen()},qI.prototype.onVolumeChange=function(){var e=this.vjsPlayer.muted()?0:this.vjsPlayer.volume();this.controller.onPlayerVolumeChanged(e)},qI.prototype.injectAdContainerDiv=function(e){this.vjsControls.el().parentNode.appendChild(e)},qI.prototype.getContentPlayer=function(){return this.h5Player},qI.prototype.getVolume=function(){return this.vjsPlayer.muted()?0:this.vjsPlayer.volume()},qI.prototype.setVolume=function(e){this.vjsPlayer.volume(e),0==e?this.vjsPlayer.muted(!0):this.vjsPlayer.muted(!1)},qI.prototype.unmute=function(){this.vjsPlayer.muted(!1)},qI.prototype.mute=function(){this.vjsPlayer.muted(!0)},qI.prototype.play=function(){this.vjsPlayer.play()},qI.prototype.togglePlayback=function(){this.vjsPlayer.paused()?this.vjsPlayer.play():this.vjsPlayer.pause()},qI.prototype.getPlayerWidth=function(){var e=(getComputedStyle(this.vjsPlayer.el())||{}).width;return e&&0!==parseFloat(e)||(e=(this.vjsPlayer.el().getBoundingClientRect()||{}).width),parseFloat(e)||this.vjsPlayer.width()},qI.prototype.getPlayerHeight=function(){var e=(getComputedStyle(this.vjsPlayer.el())||{}).height;return e&&0!==parseFloat(e)||(e=(this.vjsPlayer.el().getBoundingClientRect()||{}).height),parseFloat(e)||this.vjsPlayer.height()},qI.prototype.getPlayerOptions=function(){return this.vjsPlayer.options_},qI.prototype.getPlayerId=function(){return this.vjsPlayer.id()},qI.prototype.toggleFullscreen=function(){this.vjsPlayer.isFullscreen()?this.vjsPlayer.exitFullscreen():this.vjsPlayer.requestFullscreen()},qI.prototype.getContentPlayheadTracker=function(){return this.contentPlayheadTracker},qI.prototype.onAdError=function(e){this.vjsControls.show();var t=void 0!==e.getError?e.getError():e.stack;this.vjsPlayer.trigger({type:"adserror",data:{AdError:t,AdErrorEvent:e}})},qI.prototype.onAdLog=function(e){var t=e.getAdData(),n=void 0!==t.adError?t.adError.getMessage():void 0;this.vjsPlayer.trigger({type:"adslog",data:{AdError:n,AdEvent:e}})},qI.prototype.onAdBreakStart=function(){this.contentSource=this.vjsPlayer.currentSrc(),this.contentSourceType=this.vjsPlayer.currentType(),this.vjsPlayer.off("contentended",this.boundContentEndedListener),this.vjsPlayer.ads.startLinearAdMode(),this.vjsControls.hide(),this.vjsPlayer.pause()},qI.prototype.onAdBreakEnd=function(){this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsPlayer.ads.inAdBreak()&&this.vjsPlayer.ads.endLinearAdMode(),this.vjsControls.show()},qI.prototype.onAdStart=function(){this.vjsPlayer.trigger("ads-ad-started")},qI.prototype.onAllAdsCompleted=function(){1==this.contentComplete&&(this.contentSource&&this.vjsPlayer.currentSrc()!=this.contentSource&&this.vjsPlayer.src({src:this.contentSource,type:this.contentSourceType}),this.controller.onContentAndAdsCompleted())},qI.prototype.onAdsReady=function(){this.vjsPlayer.trigger("adsready")},qI.prototype.changeSource=function(e){this.vjsPlayer.currentSrc()&&(this.vjsPlayer.currentTime(0),this.vjsPlayer.pause()),e&&this.vjsPlayer.src(e),this.vjsPlayer.one("loadedmetadata",this.seekContentToZero.bind(this))},qI.prototype.seekContentToZero=function(){this.vjsPlayer.currentTime(0)},qI.prototype.triggerPlayerEvent=function(e,t){this.vjsPlayer.trigger(e,t)},qI.prototype.addContentEndedListener=function(e){this.contentEndedListeners.push(e)},qI.prototype.reset=function(){this.vjsPlayer.off("contentended",this.boundContentEndedListener),this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsControls.show(),this.vjsPlayer.ads.inAdBreak()&&this.vjsPlayer.ads.endLinearAdMode(),this.contentPlayheadTracker.currentTime=0,this.contentComplete=!1};var FI=function(e){this.controller=e,this.adContainerDiv=document.createElement("div"),this.controlsDiv=document.createElement("div"),this.countdownDiv=document.createElement("div"),this.seekBarDiv=document.createElement("div"),this.progressDiv=document.createElement("div"),this.playPauseDiv=document.createElement("div"),this.muteDiv=document.createElement("div"),this.sliderDiv=document.createElement("div"),this.sliderLevelDiv=document.createElement("div"),this.fullscreenDiv=document.createElement("div"),this.boundOnMouseUp=this.onMouseUp.bind(this),this.boundOnMouseMove=this.onMouseMove.bind(this),this.adPlayheadTracker={currentTime:0,duration:0,isPod:!1,adPosition:0,totalAds:0},this.controlPrefix=this.controller.getPlayerId()+"_",this.showCountdown=!0,!1===this.controller.getSettings().showCountdown&&(this.showCountdown=!1),this.isAdNonlinear=!1,this.createAdContainer()};FI.prototype.createAdContainer=function(){this.assignControlAttributes(this.adContainerDiv,"ima-ad-container"),this.adContainerDiv.style.position="absolute",this.adContainerDiv.style.zIndex=1111,this.adContainerDiv.addEventListener("mouseenter",this.showAdControls.bind(this),!1),this.adContainerDiv.addEventListener("mouseleave",this.hideAdControls.bind(this),!1),this.adContainerDiv.addEventListener("click",this.onAdContainerClick.bind(this),!1),this.createControls(),this.controller.injectAdContainerDiv(this.adContainerDiv)},FI.prototype.createControls=function(){this.assignControlAttributes(this.controlsDiv,"ima-controls-div"),this.controlsDiv.style.width="100%",this.controller.getIsMobile()?this.countdownDiv.style.display="none":(this.assignControlAttributes(this.countdownDiv,"ima-countdown-div"),this.countdownDiv.innerHTML=this.controller.getSettings().adLabel,this.countdownDiv.style.display=this.showCountdown?"block":"none"),this.assignControlAttributes(this.seekBarDiv,"ima-seek-bar-div"),this.seekBarDiv.style.width="100%",this.assignControlAttributes(this.progressDiv,"ima-progress-div"),this.assignControlAttributes(this.playPauseDiv,"ima-play-pause-div"),this.addClass(this.playPauseDiv,"ima-playing"),this.playPauseDiv.addEventListener("click",this.onAdPlayPauseClick.bind(this),!1),this.assignControlAttributes(this.muteDiv,"ima-mute-div"),this.addClass(this.muteDiv,"ima-non-muted"),this.muteDiv.addEventListener("click",this.onAdMuteClick.bind(this),!1),this.assignControlAttributes(this.sliderDiv,"ima-slider-div"),this.sliderDiv.addEventListener("mousedown",this.onAdVolumeSliderMouseDown.bind(this),!1),this.controller.getIsIos()&&(this.sliderDiv.style.display="none"),this.assignControlAttributes(this.sliderLevelDiv,"ima-slider-level-div"),this.assignControlAttributes(this.fullscreenDiv,"ima-fullscreen-div"),this.addClass(this.fullscreenDiv,"ima-non-fullscreen"),this.fullscreenDiv.addEventListener("click",this.onAdFullscreenClick.bind(this),!1),this.adContainerDiv.appendChild(this.controlsDiv),this.controlsDiv.appendChild(this.countdownDiv),this.controlsDiv.appendChild(this.seekBarDiv),this.controlsDiv.appendChild(this.playPauseDiv),this.controlsDiv.appendChild(this.muteDiv),this.controlsDiv.appendChild(this.sliderDiv),this.controlsDiv.appendChild(this.fullscreenDiv),this.seekBarDiv.appendChild(this.progressDiv),this.sliderDiv.appendChild(this.sliderLevelDiv)},FI.prototype.onAdPlayPauseClick=function(){this.controller.onAdPlayPauseClick()},FI.prototype.onAdMuteClick=function(){this.controller.onAdMuteClick()},FI.prototype.onAdFullscreenClick=function(){this.controller.toggleFullscreen()},FI.prototype.onAdsPaused=function(){this.controller.sdkImpl.adPlaying=!1,this.addClass(this.playPauseDiv,"ima-paused"),this.removeClass(this.playPauseDiv,"ima-playing"),this.showAdControls()},FI.prototype.onAdsResumed=function(){this.onAdsPlaying(),this.showAdControls()},FI.prototype.onAdsPlaying=function(){this.controller.sdkImpl.adPlaying=!0,this.addClass(this.playPauseDiv,"ima-playing"),this.removeClass(this.playPauseDiv,"ima-paused")},FI.prototype.updateAdUi=function(e,t,n,i,r){var s=Math.floor(t/60),o=Math.floor(t%60);o.toString().length<2&&(o="0"+o);var a=": ";r>1&&(a=" ("+i+" "+this.controller.getSettings().adLabelNofN+" "+r+"): "),this.countdownDiv.innerHTML=this.controller.getSettings().adLabel+a+s+":"+o;var d=e/n*100;this.progressDiv.style.width=d+"%"},FI.prototype.unmute=function(){this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted"),this.sliderLevelDiv.style.width=100*this.controller.getPlayerVolume()+"%"},FI.prototype.mute=function(){this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted"),this.sliderLevelDiv.style.width="0%"},FI.prototype.onAdVolumeSliderMouseDown=function(){document.addEventListener("mouseup",this.boundOnMouseUp,!1),document.addEventListener("mousemove",this.boundOnMouseMove,!1)},FI.prototype.onMouseMove=function(e){this.changeVolume(e)},FI.prototype.onMouseUp=function(e){this.changeVolume(e),document.removeEventListener("mouseup",this.boundOnMouseUp),document.removeEventListener("mousemove",this.boundOnMouseMove)},FI.prototype.changeVolume=function(e){var t=(e.clientX-this.sliderDiv.getBoundingClientRect().left)/this.sliderDiv.offsetWidth;t*=100,t=Math.min(Math.max(t,0),100),this.sliderLevelDiv.style.width=t+"%",0==this.percent?(this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted")):(this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted")),this.controller.setVolume(t/100)},FI.prototype.showAdContainer=function(){this.adContainerDiv.style.display="block"},FI.prototype.hideAdContainer=function(){this.adContainerDiv.style.display="none"},FI.prototype.onAdContainerClick=function(){this.isAdNonlinear&&this.controller.togglePlayback()},FI.prototype.reset=function(){this.hideAdContainer()},FI.prototype.onAdError=function(){this.hideAdContainer()},FI.prototype.onAdBreakStart=function(e){this.showAdContainer(),"application/javascript"!==e.getAd().getContentType()||this.controller.getSettings().showControlsForJSAds?this.controlsDiv.style.display="block":this.controlsDiv.style.display="none",this.onAdsPlaying(),this.hideAdControls()},FI.prototype.onAdBreakEnd=function(){var e=this.controller.getCurrentAd();(null==e||e.isLinear())&&this.hideAdContainer(),this.controlsDiv.style.display="none",this.countdownDiv.innerHTML=""},FI.prototype.onAllAdsCompleted=function(){this.hideAdContainer()},FI.prototype.onLinearAdStart=function(){this.removeClass(this.adContainerDiv,"bumpable-ima-ad-container"),this.isAdNonlinear=!1},FI.prototype.onNonLinearAdLoad=function(){this.adContainerDiv.style.display="block",this.addClass(this.adContainerDiv,"bumpable-ima-ad-container"),this.isAdNonlinear=!0},FI.prototype.onPlayerEnterFullscreen=function(){this.addClass(this.fullscreenDiv,"ima-fullscreen"),this.removeClass(this.fullscreenDiv,"ima-non-fullscreen")},FI.prototype.onPlayerExitFullscreen=function(){this.addClass(this.fullscreenDiv,"ima-non-fullscreen"),this.removeClass(this.fullscreenDiv,"ima-fullscreen")},FI.prototype.onPlayerVolumeChanged=function(e){0==e?(this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted"),this.sliderLevelDiv.style.width="0%"):(this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted"),this.sliderLevelDiv.style.width=100*e+"%")},FI.prototype.showAdControls=function(){this.controller.getSettings().disableAdControls||this.addClass(this.controlsDiv,"ima-controls-div-showing")},FI.prototype.hideAdControls=function(){this.removeClass(this.controlsDiv,"ima-controls-div-showing")},FI.prototype.assignControlAttributes=function(e,t){e.id=this.controlPrefix+t,e.className=this.controlPrefix+t+" "+t},FI.prototype.getClassRegexp=function(e){return new RegExp("(^|[^A-Za-z-])"+e+"((?![A-Za-z-])|$)","gi")},FI.prototype.elementHasClass=function(e,t){return this.getClassRegexp(t).test(e.className)},FI.prototype.addClass=function(e,t){e.className=e.className.trim()+" "+t},FI.prototype.removeClass=function(e,t){var n=this.getClassRegexp(t);e.className=e.className.trim().replace(n,"")},FI.prototype.getAdContainerDiv=function(){return this.adContainerDiv},FI.prototype.setShowCountdown=function(e){this.showCountdown=e,this.countdownDiv.style.display=this.showCountdown?"block":"none"};var VI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zI=function(e){this.controller=e,this.adDisplayContainer=null,this.adDisplayContainerInitialized=!1,this.adsLoader=null,this.adsManager=null,this.adsRenderingSettings=null,this.adsResponse=null,this.currentAd=null,this.adTrackingTimer=null,this.allAdsCompleted=!1,this.adsActive=!1,this.adPlaying=!1,this.adMuted=!1,this.adBreakReadyListener=void 0,this.contentCompleteCalled=!1,this.isAdTimedOut=!1,this.adsManagerDimensions={width:0,height:0},this.autoPlayAdBreaks=!0,!1===this.controller.getSettings().autoPlayAdBreaks&&(this.autoPlayAdBreaks=!1),this.controller.getSettings().locale&&google.ima.settings.setLocale(this.controller.getSettings().locale),this.controller.getSettings().disableFlashAds&&google.ima.settings.setDisableFlashAds(this.controller.getSettings().disableFlashAds),this.controller.getSettings().disableCustomPlaybackForIOS10Plus&&google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.controller.getSettings().disableCustomPlaybackForIOS10Plus),this.controller.getSettings().ppid&&google.ima.settings.setPpid(this.controller.getSettings().ppid),this.controller.getSettings().featureFlags&&google.ima.settings.setFeatureFlags(this.controller.getSettings().featureFlags)};zI.prototype.initAdObjects=function(){this.adDisplayContainer=new google.ima.AdDisplayContainer(this.controller.getAdContainerDiv(),this.controller.getContentPlayer()),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),0==this.controller.getSettings().vpaidAllowed&&this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED),void 0!==this.controller.getSettings().vpaidMode&&this.adsLoader.getSettings().setVpaidMode(this.controller.getSettings().vpaidMode),this.controller.getSettings().locale&&this.adsLoader.getSettings().setLocale(this.controller.getSettings().locale),this.controller.getSettings().numRedirects&&this.adsLoader.getSettings().setNumRedirects(this.controller.getSettings().numRedirects),this.controller.getSettings().sessionId&&this.adsLoader.getSettings().setSessionId(this.controller.getSettings().sessionId),this.adsLoader.getSettings().setPlayerType("videojs-ima"),this.adsLoader.getSettings().setPlayerVersion("2.2.0"),this.adsLoader.getSettings().setAutoPlayAdBreaks(this.autoPlayAdBreaks),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsLoaderError.bind(this),!1),this.controller.playerWrapper.vjsPlayer.trigger({type:"ads-loader",adsLoader:this.adsLoader})},zI.prototype.requestAds=function(){var e=new google.ima.AdsRequest;if(this.controller.getSettings().adTagUrl?e.adTagUrl=this.controller.getSettings().adTagUrl:e.adsResponse=this.controller.getSettings().adsResponse,this.controller.getSettings().forceNonLinearFullSlot&&(e.forceNonLinearFullSlot=!0),this.controller.getSettings().vastLoadTimeout&&(e.vastLoadTimeout=this.controller.getSettings().vastLoadTimeout),this.controller.getSettings().omidMode&&window.console.warn("The additional setting `omidMode` has been removed. Use `omidVendorAccess` instead."),this.controller.getSettings().omidVendorAccess){e.omidAccessModeRules={};var t=this.controller.getSettings().omidVendorAccess;Object.keys(t).forEach((function(n){e.omidAccessModeRules[n]=t[n]}))}e.linearAdSlotWidth=this.controller.getPlayerWidth(),e.linearAdSlotHeight=this.controller.getPlayerHeight(),e.nonLinearAdSlotWidth=this.controller.getSettings().nonLinearWidth||this.controller.getPlayerWidth(),e.nonLinearAdSlotHeight=this.controller.getSettings().nonLinearHeight||this.controller.getPlayerHeight(),e.setAdWillAutoPlay(this.controller.adsWillAutoplay()),e.setAdWillPlayMuted(this.controller.adsWillPlayMuted());var n=this.controller.getSettings().adsRequest;n&&"object"===(void 0===n?"undefined":VI(n))&&Object.keys(n).forEach((function(t){e[t]=n[t]})),this.adsLoader.requestAds(e),this.controller.playerWrapper.vjsPlayer.trigger({type:"ads-request",AdsRequest:e})},zI.prototype.onAdsManagerLoaded=function(e){this.createAdsRenderingSettings(),this.adsManager=e.getAdsManager(this.controller.getContentPlayheadTracker(),this.adsRenderingSettings),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,this.onAdBreakReady.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAllAdsCompleted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.onAdLoaded.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdStarted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdComplete.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdComplete.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOG,this.onAdLog.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdPaused.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,this.onAdResumed.bind(this)),this.controller.playerWrapper.vjsPlayer.trigger({type:"ads-manager",adsManager:this.adsManager}),this.autoPlayAdBreaks||this.initAdsManager();var t=this.controller.getSettings().preventLateAdStart;t?t&&!this.isAdTimedOut&&this.controller.onAdsReady():this.controller.onAdsReady(),this.controller.getSettings().adsManagerLoadedCallback&&this.controller.getSettings().adsManagerLoadedCallback()},zI.prototype.onAdsLoaderError=function(e){window.console.warn("AdsLoader error: "+e.getError()),this.controller.onErrorLoadingAds(e),this.adsManager&&this.adsManager.destroy()},zI.prototype.initAdsManager=function(){try{var e=this.controller.getPlayerWidth(),t=this.controller.getPlayerHeight();this.adsManagerDimensions.width=e,this.adsManagerDimensions.height=t,this.adsManager.init(e,t,google.ima.ViewMode.NORMAL),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.initializeAdDisplayContainer()}catch(e){this.onAdError(e)}},zI.prototype.createAdsRenderingSettings=function(){if(this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.controller.getSettings().adsRenderingSettings)for(var e in this.controller.getSettings().adsRenderingSettings)""!==e&&(this.adsRenderingSettings[e]=this.controller.getSettings().adsRenderingSettings[e])},zI.prototype.onAdError=function(e){var t=void 0!==e.getError?e.getError():e.stack;window.console.warn("Ad error: "+t),this.adsManager.destroy(),this.controller.onAdError(e),this.adsActive=!1,this.adPlaying=!1},zI.prototype.onAdBreakReady=function(e){this.adBreakReadyListener(e)},zI.prototype.onContentPauseRequested=function(e){this.adsActive=!0,this.adPlaying=!0,this.controller.onAdBreakStart(e)},zI.prototype.onContentResumeRequested=function(e){this.adsActive=!1,this.adPlaying=!1,this.controller.onAdBreakEnd()},zI.prototype.onAllAdsCompleted=function(e){this.allAdsCompleted=!0,this.controller.onAllAdsCompleted()},zI.prototype.onAdLoaded=function(e){e.getAd().isLinear()||(this.controller.onNonLinearAdLoad(),this.controller.playContent())},zI.prototype.onAdStarted=function(e){this.currentAd=e.getAd(),this.currentAd.isLinear()?(this.adTrackingTimer=setInterval(this.onAdPlayheadTrackerInterval.bind(this),250),this.controller.onLinearAdStart()):this.controller.onNonLinearAdStart()},zI.prototype.onAdPaused=function(){this.controller.onAdsPaused()},zI.prototype.onAdResumed=function(e){this.controller.onAdsResumed()},zI.prototype.onAdComplete=function(){this.currentAd.isLinear()&&clearInterval(this.adTrackingTimer)},zI.prototype.onAdLog=function(e){this.controller.onAdLog(e)},zI.prototype.onAdPlayheadTrackerInterval=function(){if(null!==this.adsManager){var e=this.adsManager.getRemainingTime(),t=this.currentAd.getDuration(),n=t-e;n=n>0?n:0;var i=0,r=void 0;this.currentAd.getAdPodInfo()&&(r=this.currentAd.getAdPodInfo().getAdPosition(),i=this.currentAd.getAdPodInfo().getTotalAds()),this.controller.onAdPlayheadUpdated(n,e,t,r,i)}},zI.prototype.onContentComplete=function(){this.adsLoader&&(this.adsLoader.contentComplete(),this.contentCompleteCalled=!0),(this.adsManager&&this.adsManager.getCuePoints()&&!this.adsManager.getCuePoints().includes(-1)||!this.adsManager)&&this.controller.onNoPostroll(),this.allAdsCompleted&&this.controller.onContentAndAdsCompleted()},zI.prototype.onPlayerDisposed=function(){this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null)},zI.prototype.onPlayerReadyForPreroll=function(){if(this.autoPlayAdBreaks){this.initAdsManager();try{this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start()}catch(e){this.onAdError(e)}}},zI.prototype.onAdTimeout=function(){this.isAdTimedOut=!0},zI.prototype.onPlayerReady=function(){this.initAdObjects(),(this.controller.getSettings().adTagUrl||this.controller.getSettings().adsResponse)&&"onLoad"===this.controller.getSettings().requestMode&&this.requestAds()},zI.prototype.onPlayerEnterFullscreen=function(){this.adsManager&&this.adsManager.resize(window.screen.width,window.screen.height,google.ima.ViewMode.FULLSCREEN)},zI.prototype.onPlayerExitFullscreen=function(){this.adsManager&&this.adsManager.resize(this.controller.getPlayerWidth(),this.controller.getPlayerHeight(),google.ima.ViewMode.NORMAL)},zI.prototype.onPlayerVolumeChanged=function(e){this.adsManager&&this.adsManager.setVolume(e),this.adMuted=0==e},zI.prototype.onPlayerResize=function(e,t){this.adsManager&&(this.adsManagerDimensions.width=e,this.adsManagerDimensions.height=t,this.adsManager.resize(e,t,google.ima.ViewMode.NORMAL))},zI.prototype.getCurrentAd=function(){return this.currentAd},zI.prototype.setAdBreakReadyListener=function(e){this.adBreakReadyListener=e},zI.prototype.isAdPlaying=function(){return this.adPlaying},zI.prototype.isAdMuted=function(){return this.adMuted},zI.prototype.pauseAds=function(){this.adsManager.pause(),this.adPlaying=!1},zI.prototype.resumeAds=function(){this.adsManager.resume(),this.adPlaying=!0},zI.prototype.unmute=function(){this.adsManager.setVolume(1),this.adMuted=!1},zI.prototype.mute=function(){this.adsManager.setVolume(0),this.adMuted=!0},zI.prototype.setVolume=function(e){this.adsManager.setVolume(e),this.adMuted=0==e},zI.prototype.initializeAdDisplayContainer=function(){this.adDisplayContainer&&(this.adDisplayContainerInitialized||(this.adDisplayContainer.initialize(),this.adDisplayContainerInitialized=!0))},zI.prototype.playAdBreak=function(){this.autoPlayAdBreaks||(this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start())},zI.prototype.addEventListener=function(e,t){this.adsManager&&this.adsManager.addEventListener(e,t)},zI.prototype.getAdsManager=function(){return this.adsManager},zI.prototype.reset=function(){this.adsActive=!1,this.adPlaying=!1,this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null),this.adsLoader&&!this.contentCompleteCalled&&this.adsLoader.contentComplete(),this.contentCompleteCalled=!1,this.allAdsCompleted=!1};var $I=function(e,t){this.settings={},this.contentAndAdsEndedListeners=[],this.isMobile=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i),this.isIos=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i),this.initWithSettings(t);var n={debug:this.settings.debug,timeout:this.settings.timeout,prerollTimeout:this.settings.prerollTimeout},i=Object.assign({},n,t.contribAdsSettings||{});this.playerWrapper=new qI(e,i,this),this.adUi=new FI(this),this.sdkImpl=new zI(this)};$I.IMA_DEFAULTS={adLabel:"Advertisement",adLabelNofN:"of",debug:!1,disableAdControls:!1,prerollTimeout:1e3,preventLateAdStart:!1,requestMode:"onLoad",showControlsForJSAds:!0,timeout:5e3},$I.prototype.initWithSettings=function(e){this.settings=Object.assign({},$I.IMA_DEFAULTS,e||{}),this.warnAboutDeprecatedSettings(),this.showCountdown=!0,!1===this.settings.showCountdown&&(this.showCountdown=!1)},$I.prototype.warnAboutDeprecatedSettings=function(){var e=this;["adWillAutoplay","adsWillAutoplay","adWillPlayMuted","adsWillPlayMuted"].forEach((function(t){void 0!==e.settings[t]&&console.warn("WARNING: videojs.ima setting "+t+" is deprecated")}))},$I.prototype.getSettings=function(){return this.settings},$I.prototype.getIsMobile=function(){return this.isMobile},$I.prototype.getIsIos=function(){return this.isIos},$I.prototype.injectAdContainerDiv=function(e){this.playerWrapper.injectAdContainerDiv(e)},$I.prototype.getAdContainerDiv=function(){return this.adUi.getAdContainerDiv()},$I.prototype.getContentPlayer=function(){return this.playerWrapper.getContentPlayer()},$I.prototype.getContentPlayheadTracker=function(){return this.playerWrapper.getContentPlayheadTracker()},$I.prototype.requestAds=function(){this.sdkImpl.requestAds()},$I.prototype.setSetting=function(e,t){this.settings[e]=t},$I.prototype.onErrorLoadingAds=function(e){this.adUi.onAdError(),this.playerWrapper.onAdError(e)},$I.prototype.onAdPlayPauseClick=function(){this.sdkImpl.isAdPlaying()?(this.adUi.onAdsPaused(),this.sdkImpl.pauseAds()):(this.adUi.onAdsPlaying(),this.sdkImpl.resumeAds())},$I.prototype.onAdMuteClick=function(){this.sdkImpl.isAdMuted()?(this.playerWrapper.unmute(),this.adUi.unmute(),this.sdkImpl.unmute()):(this.playerWrapper.mute(),this.adUi.mute(),this.sdkImpl.mute())},$I.prototype.setVolume=function(e){this.playerWrapper.setVolume(e),this.sdkImpl.setVolume(e)},$I.prototype.getPlayerVolume=function(){return this.playerWrapper.getVolume()},$I.prototype.toggleFullscreen=function(){this.playerWrapper.toggleFullscreen()},$I.prototype.onAdError=function(e){this.adUi.onAdError(),this.playerWrapper.onAdError(e)},$I.prototype.onAdBreakStart=function(e){this.playerWrapper.onAdBreakStart(),this.adUi.onAdBreakStart(e)},$I.prototype.showAdContainer=function(){this.adUi.showAdContainer()},$I.prototype.onAdBreakEnd=function(){this.playerWrapper.onAdBreakEnd(),this.adUi.onAdBreakEnd()},$I.prototype.onAllAdsCompleted=function(){this.adUi.onAllAdsCompleted(),this.playerWrapper.onAllAdsCompleted()},$I.prototype.onAdsPaused=function(){this.adUi.onAdsPaused()},$I.prototype.onAdsResumed=function(){this.adUi.onAdsResumed()},$I.prototype.onAdPlayheadUpdated=function(e,t,n,i,r){this.adUi.updateAdUi(e,t,n,i,r)},$I.prototype.onAdLog=function(e){this.playerWrapper.onAdLog(e)},$I.prototype.getCurrentAd=function(){return this.sdkImpl.getCurrentAd()},$I.prototype.playContent=function(){this.playerWrapper.play()},$I.prototype.onLinearAdStart=function(){this.adUi.onLinearAdStart(),this.playerWrapper.onAdStart()},$I.prototype.onNonLinearAdLoad=function(){this.adUi.onNonLinearAdLoad()},$I.prototype.onNonLinearAdStart=function(){this.adUi.onNonLinearAdLoad(),this.playerWrapper.onAdStart()},$I.prototype.getPlayerWidth=function(){return this.playerWrapper.getPlayerWidth()},$I.prototype.getPlayerHeight=function(){return this.playerWrapper.getPlayerHeight()},$I.prototype.onAdsReady=function(){this.playerWrapper.onAdsReady()},$I.prototype.onPlayerResize=function(e,t){this.sdkImpl.onPlayerResize(e,t)},$I.prototype.onContentComplete=function(){this.sdkImpl.onContentComplete()},$I.prototype.onNoPostroll=function(){this.playerWrapper.onNoPostroll()},$I.prototype.onContentAndAdsCompleted=function(){for(var e in this.contentAndAdsEndedListeners)"function"==typeof this.contentAndAdsEndedListeners[e]&&this.contentAndAdsEndedListeners[e]()},$I.prototype.onPlayerDisposed=function(){this.contentAndAdsEndedListeners=[],this.sdkImpl.onPlayerDisposed()},$I.prototype.onPlayerReadyForPreroll=function(){this.sdkImpl.onPlayerReadyForPreroll()},$I.prototype.onAdTimeout=function(){this.sdkImpl.onAdTimeout()},$I.prototype.onPlayerReady=function(){this.sdkImpl.onPlayerReady()},$I.prototype.onPlayerEnterFullscreen=function(){this.adUi.onPlayerEnterFullscreen(),this.sdkImpl.onPlayerEnterFullscreen()},$I.prototype.onPlayerExitFullscreen=function(){this.adUi.onPlayerExitFullscreen(),this.sdkImpl.onPlayerExitFullscreen()},$I.prototype.onPlayerVolumeChanged=function(e){this.adUi.onPlayerVolumeChanged(e),this.sdkImpl.onPlayerVolumeChanged(e)},$I.prototype.setContentWithAdTag=function(e,t){this.reset(),this.settings.adTagUrl=t||this.settings.adTagUrl,this.playerWrapper.changeSource(e)},$I.prototype.setContentWithAdsResponse=function(e,t){this.reset(),this.settings.adsResponse=t||this.settings.adsResponse,this.playerWrapper.changeSource(e)},$I.prototype.setContentWithAdsRequest=function(e,t){this.reset(),this.settings.adsRequest=t||this.settings.adsRequest,this.playerWrapper.changeSource(e)},$I.prototype.reset=function(){this.sdkImpl.reset(),this.playerWrapper.reset(),this.adUi.reset()},$I.prototype.addContentEndedListener=function(e){this.playerWrapper.addContentEndedListener(e)},$I.prototype.addContentAndAdsEndedListener=function(e){this.contentAndAdsEndedListeners.push(e)},$I.prototype.setAdBreakReadyListener=function(e){this.sdkImpl.setAdBreakReadyListener(e)},$I.prototype.setShowCountdown=function(e){this.adUi.setShowCountdown(e),this.showCountdown=e,this.adUi.countdownDiv.style.display=this.showCountdown?"block":"none"},$I.prototype.initializeAdDisplayContainer=function(){this.sdkImpl.initializeAdDisplayContainer()},$I.prototype.playAdBreak=function(){this.sdkImpl.playAdBreak()},$I.prototype.addEventListener=function(e,t){this.sdkImpl.addEventListener(e,t)},$I.prototype.getAdsManager=function(){return this.sdkImpl.getAdsManager()},$I.prototype.getPlayerId=function(){return this.playerWrapper.getPlayerId()},$I.prototype.changeAdTag=function(e){this.reset(),this.settings.adTagUrl=e},$I.prototype.pauseAd=function(){this.adUi.onAdsPaused(),this.sdkImpl.pauseAds()},$I.prototype.resumeAd=function(){this.adUi.onAdsPlaying(),this.sdkImpl.resumeAds()},$I.prototype.togglePlayback=function(){this.playerWrapper.togglePlayback()},$I.prototype.adsWillAutoplay=function(){return void 0!==this.settings.adsWillAutoplay?this.settings.adsWillAutoplay:void 0!==this.settings.adWillAutoplay?this.settings.adWillAutoplay:!!this.playerWrapper.getPlayerOptions().autoplay},$I.prototype.adsWillPlayMuted=function(){return void 0!==this.settings.adsWillPlayMuted?this.settings.adsWillPlayMuted:void 0!==this.settings.adWillPlayMuted?this.settings.adWillPlayMuted:void 0!==this.playerWrapper.getPlayerOptions().muted?this.playerWrapper.getPlayerOptions().muted:0==this.playerWrapper.getVolume()},$I.prototype.triggerPlayerEvent=function(e,t){this.playerWrapper.triggerPlayerEvent(e,t)};var HI=function(e,t,n){this.vjsPlayer=e,this.daiController=n,this.vjsControls=this.vjsPlayer.getChild("controlBar"),this.h5Player=null,this.vjsPlayer.on("dispose",this.playerDisposedListener.bind(this)),this.vjsPlayer.on("pause",this.onPause.bind(this)),this.vjsPlayer.on("play",this.onPlay.bind(this)),this.vjsPlayer.on("seeked",this.onSeekEnd.bind(this)),this.vjsPlayer.ready(this.onPlayerReady.bind(this)),this.vjsPlayer.ads||window.console.warn("You may be using a version of videojs-contrib-ads that is not compatible with your version of video.js."),this.vjsPlayer.ads(t)};HI.prototype.playerDisposedListener=function(){this.contentEndedListeners=[],this.daiController.onPlayerDisposed()},HI.prototype.onPause=function(){this.daiController.isInAdBreak()&&this.vjsControls.show()},HI.prototype.onPlay=function(){this.daiController.isInAdBreak()&&this.vjsControls.hide()},HI.prototype.onSeekEnd=function(){this.daiController.onSeekEnd(this.vjsPlayer.currentTime())},HI.prototype.onPlayerReady=function(){this.h5Player=document.getElementById(this.getPlayerId()).getElementsByClassName("vjs-tech")[0],this.daiController.onPlayerReady()},HI.prototype.getStreamPlayer=function(){return this.h5Player},HI.prototype.getVjsPlayer=function(){return this.vjsPlayer},HI.prototype.getPlayerOptions=function(){return this.vjsPlayer.options_},HI.prototype.getPlayerId=function(){return this.vjsPlayer.id()},HI.prototype.onAdError=function(e){this.vjsControls.show();var t=void 0!==e.getError?e.getError():e.stack;this.vjsPlayer.trigger({type:"adserror",data:{AdError:t,AdErrorEvent:e}})},HI.prototype.onAdBreakStart=function(){this.vjsControls.hide()},HI.prototype.onAdBreakEnd=function(){this.vjsControls.show()},HI.prototype.reset=function(){this.vjsControls.show()};var WI=function(e){this.daiController=e,this.streamPlayer=null,this.vjsPlayer=null,this.streamManager=null,this.uiSettings=new google.ima.dai.api.UiSettings,this.isAdBreak=!1,this.isSnapback=!1,this.snapForwardTime=0,this.timedMetadata,this.metadataLoaded={},this.SOURCE_TYPES={hls:"application/x-mpegURL",dash:"application/dash+xml"}};WI.prototype.initImaDai=function(){this.streamPlayer=this.daiController.getStreamPlayer(),this.vjsPlayer=this.daiController.getVjsPlayer(),this.createAdUiDiv(),this.daiController.getSettings().locale&&this.uiSettings.setLocale(this.daiController.getSettings().locale),this.streamManager=new google.ima.dai.api.StreamManager(this.streamPlayer,this.adUiDiv,this.uiSettings),this.streamPlayer.addEventListener("pause",this.onStreamPause),this.streamPlayer.addEventListener("play",this.onStreamPlay),this.streamManager.addEventListener([google.ima.dai.api.StreamEvent.Type.LOADED,google.ima.dai.api.StreamEvent.Type.ERROR,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED],this.onStreamEvent.bind(this),!1),this.vjsPlayer.textTracks().onaddtrack=this.onAddTrack.bind(this),this.vjsPlayer.trigger({type:"stream-manager",StreamManager:this.streamManager}),this.requestStream()},WI.prototype.onAddTrack=function(e){var t=this,n=e.track;"metadata"===n.kind&&(n.mode="hidden",n.oncuechange=function(e){var i=!0,r=!1,s=void 0;try{for(var o,a=n.activeCues_[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var d=o.value,l={};l[d.value.key]=d.value.data,t.streamManager.onTimedMetadata(l)}}catch(e){r=!0,s=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw s}}})},WI.prototype.createAdUiDiv=function(){var e=document.createElement("div");e.id="ad-ui",e.style.height="calc(100% - 3em)",this.streamPlayer.parentNode.appendChild(e),this.adUiDiv=e},WI.prototype.onStreamPause=function(){this.isAdBreak&&(this.adUiDiv.style.display="none")},WI.prototype.onStreamPlay=function(){this.isAdBreak&&(this.adUiDiv.style.display="block")},WI.prototype.onSeekEnd=function(e){if("live"!==this.daiController.getSettings().streamType)if(this.isSnapback)this.isSnapback=!1;else{var t=this.streamManager.previousCuePointForStreamTime(e);t&&!t.played&&(this.isSnapback=!0,this.snapForwardTime=e,this.vjsPlayer.currentTime(t.start))}},WI.prototype.onStreamEvent=function(e){switch(e.type){case google.ima.dai.api.StreamEvent.Type.LOADED:this.loadUrl(e.getStreamData().url);break;case google.ima.dai.api.StreamEvent.Type.ERROR:window.console.warn("Error loading stream, attempting to play backup stream. "+e.getStreamData().errorMessage),this.daiController.onErrorLoadingAds(e),this.daiController.getSettings().fallbackStreamUrl&&this.loadurl(this.daiController.getSettings().fallbackStreamUrl);break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED:this.isAdBreak=!0,this.adUiDiv.style.display="block",this.daiController.onAdBreakStart();break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED:this.isAdBreak=!1,this.adUiDiv.style.display="none",this.daiController.onAdBreakEnd(),this.snapForwardTime&&this.snapForwardTime>this.vjsPlayer.currentTime()&&(this.vjsPlayer.currentTime(this.snapForwardTime),this.snapForwardTime=0)}},WI.prototype.loadUrl=function(e){this.vjsPlayer.ready(function(){var t=this.daiController.getSettings().streamFormat;this.vjsPlayer.src({src:e,type:this.SOURCE_TYPES[t]});var n=this.daiController.getSettings().bookmarkTime;if(n){var i=this.streamManager.streamTimeForContentTime(n);this.isSnapback=!0,this.vjsPlayer.currentTime(i)}}.bind(this))},WI.prototype.requestStream=function(){var e=void 0,t=this.daiController.getSettings().streamType;if("vod"===t?((e=new google.ima.dai.api.VODStreamRequest).contentSourceId=this.daiController.getSettings().cmsId,e.videoId=this.daiController.getSettings().videoId):"live"===t?(e=new google.ima.dai.api.LiveStreamRequest).assetKey=this.daiController.getSettings().assetKey:window.console.warn("No valid stream type selected"),e.format=this.daiController.getSettings().streamFormat,this.daiController.getSettings().apiKey&&(e.apiKey=this.daiController.getSettings().apiKey),this.daiController.getSettings().authToken&&(e.authToken=this.daiController.getSettings().authToken),this.daiController.getSettings().adTagParameters&&(e.adTagParameters=this.daiController.getSettings().adTagParameters),this.daiController.getSettings().streamActivityMonitorId&&(e.streamActivityMonitorId=this.daiController.getSettings().streamActivityMonitorId),this.daiController.getSettings().omidMode){e.omidAccessModeRules={};var n=this.daiController.getSettings().omidMode;n.FULL&&(e.omidAccessModeRules[google.ima.OmidAccessMode.FULL]=n.FULL),n.DOMAIN&&(e.omidAccessModeRules[google.ima.OmidAccessMode.DOMAIN]=n.DOMAIN),n.LIMITED&&(e.omidAccessModeRules[google.ima.OmidAccessMode.LIMITED]=n.LIMITED)}this.streamManager.requestStream(e),this.vjsPlayer.trigger({type:"stream-request",StreamRequest:e})},WI.prototype.onPlayerReady=function(){this.initImaDai()},WI.prototype.onPlayerDisposed=function(){this.streamManager&&this.streamManager.reset()},WI.prototype.getStreamManager=function(){return this.StreamManager},WI.prototype.reset=function(){this.StreamManager&&this.StreamManager.reset()};var ZI=function(e,t){this.inAdBreak=!1,this.settings={},this.isMobile=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i),this.isIos=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i),this.initWithSettings(t);var n={debug:this.settings.debug,timeout:this.settings.timeout,prerollTimeout:this.settings.prerollTimeout},i=Object.assign({},n,t.contribAdsSettings||{});this.playerWrapper=new HI(e,i,this),this.sdkImpl=new WI(this)};function GI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}ZI.IMA_DEFAULTS={adLabel:"Advertisement",adLabelNofN:"of",debug:!1,disableAdControls:!1,showControlsForJSAds:!0},ZI.prototype.initWithSettings=function(e){this.settings=Object.assign({},ZI.IMA_DEFAULTS,e||{}),this.warnAboutDeprecatedSettings(),this.showCountdown=!0,!1===this.settings.showCountdown&&(this.showCountdown=!1)},ZI.prototype.warnAboutDeprecatedSettings=function(){var e=this;[].forEach((function(t){void 0!==e.settings[t]&&console.warn("WARNING: videojs.imaDai setting "+t+" is deprecated")}))},ZI.prototype.getSettings=function(){return this.settings},ZI.prototype.getIsMobile=function(){return this.isMobile},ZI.prototype.getIsIos=function(){return this.isIos},ZI.prototype.getStreamPlayer=function(){return this.playerWrapper.getStreamPlayer()},ZI.prototype.getVjsPlayer=function(){return this.playerWrapper.getVjsPlayer()},ZI.prototype.requestStream=function(){this.sdkImpl.requestStream()},ZI.prototype.setSetting=function(e,t){this.settings[e]=t},ZI.prototype.onErrorLoadingAds=function(e){this.playerWrapper.onAdError(e)},ZI.prototype.onAdError=function(e){this.playerWrapper.onAdError(e)},ZI.prototype.onAdBreakStart=function(){this.inAdBreak=!0,this.playerWrapper.onAdBreakStart()},ZI.prototype.onAdBreakEnd=function(){this.inAdBreak=!1,this.playerWrapper.onAdBreakEnd()},ZI.prototype.onPlayerDisposed=function(){this.contentAndAdsEndedListeners=[],this.sdkImpl.onPlayerDisposed()},ZI.prototype.isInAdBreak=function(){return this.inAdBreak},ZI.prototype.onSeekEnd=function(e){this.sdkImpl.onSeekEnd(e)},ZI.prototype.onPlayerReady=function(){this.sdkImpl.onPlayerReady()},ZI.prototype.reset=function(){this.sdkImpl.reset(),this.playerWrapper.reset()},ZI.prototype.addEventListener=function(e,t){this.sdkImpl.addEventListener(e,t)},ZI.prototype.getStreamManager=function(){return this.sdkImpl.getStreamManager()},ZI.prototype.getPlayerId=function(){return this.playerWrapper.getPlayerId()},ZI.prototype.streamWillAutoplay=function(){return void 0!==this.settings.streamWillAutoplay?this.settings.streamWillAutoplay:!!this.playerWrapper.getPlayerOptions().autoplay},ZI.prototype.triggerPlayerEvent=function(e,t){this.playerWrapper.triggerPlayerEvent(e,t)};var XI=function(e,t){this.controller=new $I(e,t),this.addContentAndAdsEndedListener=function(e){this.controller.addContentAndAdsEndedListener(e)}.bind(this),this.addContentEndedListener=function(e){this.controller.addContentEndedListener(e)}.bind(this),this.addEventListener=function(e,t){this.controller.addEventListener(e,t)}.bind(this),this.changeAdTag=function(e){this.controller.changeAdTag(e)}.bind(this),this.getAdsManager=function(){return this.controller.getAdsManager()}.bind(this),this.initializeAdDisplayContainer=function(){this.controller.initializeAdDisplayContainer()}.bind(this),this.pauseAd=function(){this.controller.pauseAd()}.bind(this),this.playAdBreak=function(){this.controller.playAdBreak()}.bind(this),this.requestAds=function(){this.controller.requestAds()}.bind(this),this.resumeAd=function(){this.controller.resumeAd()}.bind(this),this.setAdBreakReadyListener=function(e){this.controller.setAdBreakReadyListener(e)}.bind(this),this.setContentWithAdTag=function(e,t){this.controller.setContentWithAdTag(e,t)}.bind(this),this.setContentWithAdsResponse=function(e,t){this.controller.setContentWithAdsResponse(e,t)}.bind(this),this.setContentWithAdsRequest=function(e,t){this.controller.setContentWithAdsRequest(e,t)}.bind(this),this.setShowCountdown=function(e){this.controller.setShowCountdown(e)}.bind(this)},KI=function(e,t){this.controller=new ZI(e,t),this.streamEndedListener=function(e){this.controller.addStreamEndedListener(e)}.bind(this),this.addEventListener=function(e,t){this.controller.addEventListener(e,t)}.bind(this),this.getStreamManager=function(){return this.controller.getStreamManager()}.bind(this)},JI=function e(t,n){GI(this,e),"hls"===(t=t.toLowerCase())||"dash"===t?"dash"!==t?"string"==typeof n?(this.streamFormat=t,this.assetKey=n):window.console.error("assetKey error: value must be string."):window.console.error("streamFormat error: DASH streams are notcurrently supported by this plugin."):window.console.error("VodStream error: incorrect streamFormat.")},YI=function e(t,n,i){GI(this,e),"hls"===(t=t.toLowerCase())||"dash"===t?"dash"!==t?"string"==typeof n?"string"==typeof i?(this.streamFormat=t,this.cmsId=n,this.videoId=i):window.console.error("videoId error: value must be string."):window.console.error("cmsId error: value must be string."):window.console.error("streamFormat error: DASH streams are notcurrently supported by this plugin."):window.console.error("VodStream error: incorrect streamFormat.")},QI=$b.registerPlugin||$b.plugin;function eS(e,t,n){e.on("timeupdate",r);const i=()=>e.off("timeupdate",r);return i;function r(){const r=e.currentTime();r>=t&&(i(),n(r))}}QI("ima",(function(e){this.ima=new XI(this,e)})),QI("imaDai",(function(e,t){if(e instanceof JI)t.streamType="live",t.assetKey=e.assetKey;else{if(!(e instanceof YI))return void window.console.error("initDai() first parameter must be an instance of LiveStream or VodStream.");t.streamType="vod",t.cmsId=e.cmsId,t.videoId=e.videoId}t.streamFormat=e.streamFormat,this.imaDai=new KI(this,t)}));let tS=e=>{const t=e.playlist.autoadvance_;t.timeout&&e.clearTimeout(t.timeout),t.trigger&&e.off("ended",t.trigger),t.timeout=null,t.trigger=null};const nS=(e,t)=>{var n;tS(e),"number"==typeof(n=t)&&!isNaN(n)&&n>=0&&n<1/0?(e.playlist.autoadvance_.delay=t,e.playlist.autoadvance_.trigger=function(){const n=()=>nS(e,t);e.one("play",n),e.playlist.autoadvance_.timeout=e.setTimeout((()=>{tS(e),e.off("play",n),e.playlist.next()}),1e3*t)},e.one("ended",e.playlist.autoadvance_.trigger)):e.playlist.autoadvance_.delay=null};let iS=1;const rS=e=>{let t=e;return e&&"object"==typeof e||(t=Object(e),t.originalValue=e),t.playlistItemId_=iS++,t},sS=e=>e.map(rS),oS=(e,t)=>{let n=e,i=t;return"object"==typeof e&&(n=e.src),"object"==typeof t&&(i=t.src),/^\/\//.test(n)&&(i=i.slice(i.indexOf("//"))),/^\/\//.test(i)&&(n=n.slice(n.indexOf("//"))),n===i},aS=(e,t)=>{for(let n=0;n<e.length;n++){const i=e[n].sources;if(Array.isArray(i))for(let e=0;e<i.length;e++){const r=i[e];if(r&&oS(r,t))return n}}return-1};const dS=function(e,t){!function(e,t,n=0){let i=null,r=!1;const s=e.playlist=(t,n=0)=>{if(r)throw new Error("do not call playlist() during a playlist change");if(Array.isArray(t)){const o=Array.isArray(i)?i.slice():null;i=sS(t),r=!0,e.trigger({type:"duringplaylistchange",nextIndex:n,nextPlaylist:t,previousIndex:s.currentIndex_,previousPlaylist:o||[]}),r=!1,-1!==n&&s.currentItem(n),o&&e.setTimeout((()=>{e.trigger({type:"playlistchange",action:"change"})}),0)}return i.map((e=>e.originalValue||e))};e.on("loadstart",(()=>{-1===s.currentItem()&&tS(e)})),s.currentIndex_=-1,s.player_=e,s.autoadvance_={},s.repeat_=!1,s.currentPlaylistItemId_=null,s.currentItem=t=>{if(r)return s.currentIndex_;if("number"==typeof t&&s.currentIndex_!==t&&t>=0&&t<i.length)return s.currentIndex_=t,((e,t)=>{const n=!e.paused()||e.ended();e.trigger("beforeplaylistitem",t.originalValue||t),t.playlistItemId_&&(e.playlist.currentPlaylistItemId_=t.playlistItemId_),e.poster(t.poster||""),e.src(t.sources),(e=>{const t=e.remoteTextTracks();let n=t&&t.length||0;for(;n--;)e.removeRemoteTextTrack(t[n])})(e),e.ready((()=>{if((t.textTracks||[]).forEach(e.addRemoteTextTrack.bind(e)),e.trigger("playlistitem",t.originalValue||t),n){const t=e.play();void 0!==t&&"function"==typeof t.then&&t.then(null,(e=>{}))}nS(e,e.playlist.autoadvance_.delay)}))})(s.player_,i[s.currentIndex_]),t>0&&e.poster(""),s.currentIndex_;const n=s.player_.currentSrc()||"";if(s.currentPlaylistItemId_){const e=((e,t)=>{for(let n=0;n<e.length;n++)if(e[n].playlistItemId_===t)return n;return-1})(i,s.currentPlaylistItemId_),t=i[e];if(t&&Array.isArray(t.sources)&&aS([t],n)>-1)return s.currentIndex_=e,s.currentIndex_;s.currentPlaylistItemId_=null}return s.currentIndex_=s.indexOf(n),s.currentIndex_},s.add=(t,n)=>{if(r)throw new Error("cannot modify a playlist that is currently changing");("number"!=typeof n||n<0||n>i.length)&&(n=i.length),Array.isArray(t)||(t=[t]),i.splice(n,0,...sS(t)),e.trigger({type:"playlistchange",action:"add"}),e.trigger({type:"playlistadd",count:t.length,index:n})},s.remove=(t,n=1)=>{if(r)throw new Error("cannot modify a playlist that is currently changing");"number"!=typeof t||t<0||t>i.length||(i.splice(t,n),e.trigger({type:"playlistchange",action:"remove"}),e.trigger({type:"playlistremove",count:n,index:t}))},s.contains=e=>-1!==s.indexOf(e),s.indexOf=e=>{if("string"==typeof e)return aS(i,e);const t=Array.isArray(e)?e:e.sources;for(let e=0;e<t.length;e++){const n=t[e];if("string"==typeof n)return aS(i,n);if(n.src)return aS(i,n.src)}return-1},s.currentIndex=()=>s.currentItem(),s.lastIndex=()=>i.length-1,s.nextIndex=()=>{const e=s.currentItem();if(-1===e)return-1;const t=s.lastIndex();return s.repeat_&&e===t?0:Math.min(e+1,t)},s.previousIndex=()=>{const e=s.currentItem();return-1===e?-1:s.repeat_&&0===e?s.lastIndex():Math.max(e-1,0)},s.first=()=>{if(r)return;const e=s.currentItem(0);if(i.length)return i[e].originalValue||i[e];s.currentIndex_=-1},s.last=()=>{if(r)return;const e=s.currentItem(s.lastIndex());if(i.length)return i[e].originalValue||i[e];s.currentIndex_=-1},s.next=()=>{if(r)return;const e=s.nextIndex();if(e!==s.currentIndex_){const t=s.currentItem(e);return i[t].originalValue||i[t]}},s.previous=()=>{if(r)return;const e=s.previousIndex();if(e!==s.currentIndex_){const t=s.currentItem(e);return i[t].originalValue||i[t]}},s.autoadvance=e=>{nS(s.player_,e)},s.repeat=e=>void 0===e?s.repeat_:"boolean"==typeof e?(s.repeat_=!!e,s.repeat_):void $b.log.error("videojs-playlist: Invalid value for repeat",e),s.sort=t=>{i.length&&(i.sort(t),r||e.trigger("playlistsorted"))},s.reverse=()=>{i.length&&(i.reverse(),r||e.trigger("playlistsorted"))},s.shuffle=({rest:t}={})=>{let n=0,o=i;t&&(n=s.currentIndex_+1,o=i.slice(n)),o.length<=1||((e=>{let t=-1;const n=e.length-1;for(;++t<e.length;){const i=t+Math.floor(Math.random()*(n-t+1)),r=e[i];e[i]=e[t],e[t]=r}})(o),t&&i.splice(...[n,o.length].concat(o)),r||e.trigger("playlistsorted"))},Array.isArray(t)?s(t,n):i=[]}(this,e,t)};($b.registerPlugin||$b.plugin)("playlist",dS),dS.VERSION="5.1.0";const lS={align:"top-left",class:"",content:"This overlay will show up while the video is playing",debug:!1,showBackground:!0,attachToControlBar:!1,overlays:[{start:"playing",end:"paused"}]},cS=$b.getComponent("Component"),uS=$b.dom||$b,pS=$b.registerPlugin||$b.plugin,hS=e=>"number"==typeof e&&e==e,fS=e=>"string"==typeof e&&/^\S+$/.test(e);class gS extends cS{constructor(e,t){super(e,t),["start","end"].forEach((e=>{const t=this.options_[e];if(hS(t))this[e+"Event_"]="timeupdate";else if(fS(t))this[e+"Event_"]=t;else if("start"===e)throw new Error('invalid "start" option; expected number or string')})),["endListener_","rewindListener_","startListener_"].forEach((e=>{this[e]=t=>gS.prototype[e].call(this,t)})),"timeupdate"===this.startEvent_&&this.on(e,"timeupdate",this.rewindListener_),this.debug(`created, listening to "${this.startEvent_}" for "start" and "${this.endEvent_||"nothing"}" for "end"`),this.hide()}createEl(){const e=this.options_,t=e.content,n=e.showBackground?"vjs-overlay-background":"vjs-overlay-no-background",i=uS.createEl("div",{className:`\n        vjs-overlay\n        vjs-overlay-${e.align}\n        ${e.class}\n        ${n}\n        vjs-hidden\n      `});return"string"==typeof t?i.innerHTML=t:t instanceof Mp().DocumentFragment?i.appendChild(t):uS.appendContent(i,t),i}debug(...e){if(!this.options_.debug)return;const t=$b.log;let n=t;t.hasOwnProperty(e[0])&&"function"==typeof t[e[0]]&&(n=t[e.shift()]),n(`overlay#${this.id()}: `,...e)}hide(){return super.hide(),this.debug("hidden"),this.debug(`bound \`startListener_\` to "${this.startEvent_}"`),this.endEvent_&&(this.debug(`unbound \`endListener_\` from "${this.endEvent_}"`),this.off(this.player(),this.endEvent_,this.endListener_)),this.on(this.player(),this.startEvent_,this.startListener_),this}shouldHide_(e,t){const n=this.options_.end;return hS(n)?e>=n:n===t}show(){return super.show(),this.off(this.player(),this.startEvent_,this.startListener_),this.debug("shown"),this.debug(`unbound \`startListener_\` from "${this.startEvent_}"`),this.endEvent_&&(this.debug(`bound \`endListener_\` to "${this.endEvent_}"`),this.on(this.player(),this.endEvent_,this.endListener_)),this}shouldShow_(e,t){const n=this.options_.start,i=this.options_.end;return hS(n)?hS(i)?e>=n&&e<i:this.hasShownSinceSeek_?Math.floor(e)===n:(this.hasShownSinceSeek_=!0,e>=n):n===t}startListener_(e){const t=this.player().currentTime();this.shouldShow_(t,e.type)&&this.show()}endListener_(e){const t=this.player().currentTime();this.shouldHide_(t,e.type)&&this.hide()}rewindListener_(e){const t=this.player().currentTime(),n=this.previousTime_,i=this.options_.start,r=this.options_.end;t<n&&(this.debug("rewind detected"),hS(r)&&!this.shouldShow_(t)?(this.debug(`hiding; ${r} is an integer and overlay should not show at this time`),this.hasShownSinceSeek_=!1,this.hide()):fS(r)&&t<i&&(this.debug(`hiding; show point (${i}) is before now (${t}) and end point (${r}) is an event`),this.hasShownSinceSeek_=!1,this.hide())),this.previousTime_=t}}$b.registerComponent("Overlay",gS);const mS=function(e){const t=this,n=$b.mergeOptions(lS,e);Array.isArray(this.overlays_)&&this.overlays_.forEach((e=>{this.removeChild(e),this.controlBar&&this.controlBar.removeChild(e),e.dispose()}));const i=n.overlays;delete n.overlays;const r=e=>e.map((e=>{const t=$b.mergeOptions(n,e),i="string"==typeof t.attachToControlBar||!0===t.attachToControlBar;if(!this.controls()||!this.controlBar)return this.addChild("overlay",t);if(i&&-1!==t.align.indexOf("bottom")){let e=this.controlBar.children()[0];if(void 0!==this.controlBar.getChild(t.attachToControlBar)&&(e=this.controlBar.getChild(t.attachToControlBar)),e){const n=this.controlBar.children().indexOf(e);return this.controlBar.addChild("overlay",t,n)}}const r=this.addChild("overlay",t);return this.el().insertBefore(r.el(),this.controlBar.el()),r}));return this.overlays_=r(i),{add:function(e){Array.isArray(e)||(e=[e]);const n=r(e);return t.overlays_=t.overlays_.concat(n),n},remove:function(e){const n=t.overlays_.indexOf(e);-1!==n?(e.el().parentNode.removeChild(e.el()),t.overlays_.splice(n,1)):t.log.warn("overlay does not exist and cannot be removed")},get:function(){return t.overlays_}}};function yS(e){let{log:t,player:n}=e;n.addClass("vjs-waiting"),Gs({log:t,player:n}),t("adding spinner")}mS.VERSION="3.1.0",pS("overlay",mS);var vS=__webpack_require__(7072),bS=__webpack_require__.n(vS);async function _S(e){let{poster:t,videoId:n}=e;await(0,Se.untilBodyAvailable)();const i=document.createElement("div");return i.id="commercial-player",i.classList.add("hide"),i.innerHTML=bS()({poster:t,videoId:n}),document.body.appendChild(i),i}(0,qe.fo)("players.commercial",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init(e){let{getConfig:t,isHomepage:n,removePlugins:i}=e;i(["players.onlyOneActivePlayer","chromelessv2.dmplayer"]);const r=t("players.chromeless.dmplayer.v3.domainExclusions",[]),s=t("players.chromeless.dmplayer.v3.articleIdExclusions",[]).map((e=>e.toString())),o=r.length&&(r.includes(__webpack_require__.g.location.hostname)||r.includes(__webpack_require__.g.location.hostname.replace(/www./,"")))||__webpack_require__.g.PageCriteria.articleId&&s.length&&s.includes(__webpack_require__.g.PageCriteria.articleId),a=t("players.chromeless.dmplayer.v3.enableWifiDetection",!1),d=navigator.connection&&"wifi"===navigator.connection.type;(o||ns&&(!n||!ns||"desktop"!==(0,b.ej)("mol-home")&&"true"!==(0,b.ej)("mol-desktop"))||a&&!d||!a&&ns)&&i(["players.commercial"])},run:async function(e){var t;let{broker:n,doc:i,getConfig:r,log:s,pageCriteria:o}=e;const a=r("players.commercial.poster","//creative.dailymail.co.uk/videos/top-videos.jpg"),d=async function(e){var t;let{log:n,poster:i,url:r}=e;n("fetching top videos",r);const s=await fetch(r),o=await s.json(),a=(0,q.TV)((0,q.DZ)((e=>!!e.url),(e=>({articleUrl:e.articleUrl,videoId:e.externalVideoIdent,headline:e.headline,poster:i,provider:e.source,sources:[{src:e.url,type:"video/mp4"}]})),o[null===(t=__webpack_require__.g.PageCriteria)||void 0===t?void 0:t.channel]||Object.values(o).flat()));return n(a),{applyPlaylist:function(e){e.playlist(a),e.ima||(e.on("skip to next item",(()=>e.playlist.next())),e.on("skipt to previous item",(()=>e.playlist.previous())))},playlistItems:a}}({log:s.extend("playlist"),poster:a,url:r("players.commerical.playlistURL","https://secured.dailymail.co.uk/feeds/commercial/topVideos.json")}),l=d.then((e=>{let{playlistItems:t}=e;return async function(e){let{broker:t,doc:n,getConfig:i,log:r,pageCriteria:s,playlist:o}=e;const a=Date.now(),d=i("dfpAccountCode",5765),l=i("players.commercial.adRoll",[]),c=l.find((e=>0===e.offset)),u=l.filter((e=>e.offset>0)),{pageLoadTimeout:p=5e3}=i("plugins.slots.jwplayer.v3",{});let h=1;const f=c?b({...o[0],offset:c.offset}):Promise.resolve({});let g="",m=0;return{applyIMA:async function(e){if(r("initializing ads"),e.isDisposed())return;await(0,D.gb)((()=>{var e;return null===(e=__webpack_require__.g.google)||void 0===e?void 0:e.ima}),50,1e4),e.ima({contribAdsSettings:{debug:r.enabled},debug:r.enabled,disableFlashAds:!0,numRedirects:10});const s=n.getElementById("commercial-player-video_html5_api");let d;(navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i))&&null!=s&&s.hasAttribute("controls")&&(null==s||s.removeAttribute("controls")),e.ima.initializeAdDisplayContainer(),e.on("playlistitem",(0,S.mk)((()=>{++h,r({playNumber:h}),m=0}))),e.on("adserror",(e=>{let{data:n}=e;const{AdErrorEvent:i}=n;if(void 0===i.getError)return;const s={adErrorCode:i.getError().getErrorCode()||i.getError().getVastErrorCode(),errorMessage:i.getError().getMessage(),offset:m,platform:"chromeless",playerId:"jwplayer",trackingType:"chromeless"};r("adserror",s),t.emit("video.advert-failed",s),t.emit("video.no-ad-shown",s)})),t.on("bid request","jwplayer",((n,i)=>{t.emit("video.bid-request",{adSDK:"IMA",autoplay:!0,bidder:i.bidder,offset:m,platform:"chromeless",play:h,playerId:"jwplayer",targeting:{pos:[i.pos]},timeSinceStartOfPlayer:Date.now()-a,userIds:i.userids,videoId:o[e.playlist.currentIndex()].videoId})})),e.on("ads-manager",(n=>{let{adsManager:i}=n;const s=r.extend("adsManager");s("created"),i.addEventListener(__webpack_require__.g.google.ima.AdEvent.Type.IMPRESSION,(n=>{const i=x(n.getAd());s("impression",i),t.emit("video.ad-impression",{adSDK:i.adSDK,adImpression:i,autoplay:!0,offset:m,platform:"chromeless",play:h,playerId:"jwplayer",tag:g,targeting:{pos:["jwplayer"]},timeSinceStartOfPlayer:Date.now()-a,videoId:o[e.playlist.currentIndex()].videoId})})),function(e,t){const n=new as.JT;n.one(e,"adserror",(()=>{n.dispose()})),n.one(e,"adplaying",(()=>{n.on(e,"volumechange",(()=>{e.muted()?t.setVolume(0):t.setVolume(e.volume())})),e.one("adended",(()=>{n.dispose()}))})),e.muted()&&t.setVolume(0)}(e,i)})),e.on("playlistitem",(function(){let t=!1;const n=new as.JT,i=r.extend("midroll").extend(`video ${h}`);function s(){i("disposing"),t=!0,n.dispose()}function a(t,n){const r=e.$(".vjs-progress-control.vjs-control .vjs-progress-holder"),s=document.createElement("div");return s.className="vjs-marker",s.style.left=`${Math.round(n/t*100)}%`,i({offset:n,videoDuration:t,"elem.style.left":s.style.left}),s.innerHTML='<div class="top"><p>Advertisement</p><i></i></div>',r.appendChild(s),s}async function d(n,r,s){if(t)return;i("time to build ad tag url",n);const o=g=y(e,{...n,adRollItem:r},await s,h);m=r.offset,t?i("dropping request as we've gone to the next video already"):(i("requesting ads",{src:n.sources[0].src,nextAdTagUrl:o}),e.ima.changeAdTag(o),e.ima.requestAds())}i("waiting for known duration"),n.one(e,"playing",(()=>{const t=e.duration();i("Setting up midrolls",{adRoll:l,filtered:u,mediaDuration:t});for(const r of u){const{offset:s}=r;if(s>=t){i(`skipping midroll ${s}`);continue}const l=a(t,s),c=o[e.playlist.currentIndex()],u=b({...c,offset:s}).catch((e=>(i.error(e),{})));u.then((e=>i(`auction finished for midroll offset ${s}`,e)));const p=()=>l.remove();n.onDispose(p),n.add(eS(e,s,(()=>{p(),d(c,r,u).catch((e=>i.error(e)))})))}})),n.one(e,"playlistitem",s),n.one(e,"ended",s),n.one(e,"skip to next item",s),n.one(e,"skip to previous item",s)}));let p={};async function f(){try{p=await d||{}}catch(e){r.error(e),p={}}finally{e.playlist.next()}}e.on("playlistitem",(function(){const t=new as.JT;function n(){t.dispose()}function s(){if(!c)return;const t=o[e.playlist.nextIndex()];r("time to build ad tag url",{nextItem:t}),d=b({...t,offset:c.offset},h+1)}t.add(function(e,t){return isNaN(e.duration())?(e.one("loadeddata",t),()=>e.off("loadeddata",t)):(t(),()=>{})}(e,(()=>{t.add(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e.on("timeupdate",r);const i=()=>e.off("timeupdate",r);return i;function r(){e.duration()-e.currentTime()<=n&&(i(),t())}}(e,s,Number(i("players.commercial.auction.secsFromEnd",e.duration()))))}))),t.one(e,"skip to next item",n),t.one(e,"skip to previous item",n)})),e.on("playlistitem",(0,S.mk)((function(t,n){if(!c)return;const i=g=y(e,{...n,adRollItem:c},p,h);d=void 0,p={},r("requesting ads",{src:n.sources[0].src,adTagUrl:i}),e.ima.setContentWithAdTag(n.sources[0].src,i),e.ima.requestAds()}))),e.on("ended",f),e.on("skip to next item",f),e.on("skip to previous item",(async()=>{if(d=void 0,c)try{p=await b({...o[e.playlist.previousIndex()],offset:c.offset})||{}}catch(e){r.error(e),p={}}e.playlist.previous()}))},initAdRequest:function(e,t){if(r("initAdRequest"),!c)return Promise.resolve();const n=g=y(e,{...o[0],adRollItem:c},t,h);return r("setContentWithAdTag adTag",n),e.ima.setContentWithAdTag(o[0].sources[0].src,n),e.ima.requestAds(),new Promise((t=>{const n=new as.JT,i=()=>{r.timeEnd("ads-manager"),n.dispose(),t()};r("waiting for ads-manager event"),r.time("ads-manager"),n.one(e,"ads-manager",(()=>{r("received ads-manager event"),i()})),n.one(e,"adserror",(()=>{r("received adserror event"),i()}))}))},firstAuction:f};function y(e,t,n,o){let{articleUrl:a,headline:l,adRollItem:c,provider:u,videoId:p}=t;const h=e.muted(),f=T()({correlator:Date.now(),description_url:a,env:"vp",gdfp_req:"1",impl:1,iu:`/${d}/dm.chromelessvideo/${i("players.chromeless.dmplayer.v3.adUnitNameLevel2","dm_dmros_ros")}/${c.pos}`,output:"xml_vast4",vpa:"auto",sz:"401x225",unviewed_position_start:"1",url:`${location.protocol}//${location.hostname}${location.pathname}`,vid:p,vpmute:"1",cust_params:{channel:null==s?void 0:s.channel,oov:!document.hasFocus(),length:30,videoWidth:401,videoHeight:225,play:o,embed:!1,ttid:p,domain:"dailymail",flyaway:!1,s:"off",videoTitle:l,video:u,environment:"production",sz:"401x225",vpmute:h,...c.cust_params}},n,U()),g=new URL("https://pubads.g.doubleclick.net/gampad/ads");for(const[e,t]of Object.entries(f))e&&(r("adding",e,t),g.searchParams.set(e,v(t)));return r("adTag",g.toString()),g.toString()}function v(e){switch(typeof e){case"string":return e;case"number":return e.toString();case"boolean":return e?"1":"0";default:return new URLSearchParams(e).toString()}}async function b(e){let{articleUrl:n,videoId:i,offset:s=0}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;const a=r.extend(`video ${o}`);return a("getAsyncVideoTags",s),new Promise((e=>{let r={};M({args:{articleURL:n,videoId:i,offset:s,platform:"chromeless",pos:"jwplayer",screen:{width:401,height:225},timeout:p},broker:t,observable:(t,n)=>{t?(a.error("error getting tags",t),e(r)):n?r=(0,I.Yb)({...r,...n,cust_params:{...r.cust_params||{},...n.cust_params||{}}}):e(r)},log:a})}))}}({broker:n,doc:i,getConfig:r,log:s.extend("ima"),pageCriteria:o,playlist:t})})),c=Js({broker:n,getConfig:r,log:s.extend("mediator")}),u=function(e){let{broker:t,getConfig:n,log:i}=e;const r=n("slotDescriptions.initial",{}).mpu_player;return r?e=>{const n=()=>{i("forcing pauseAndLoad"),yS({log:i,player:e})},s=(0,as.Vl)(e,"adserror",(async()=>{const s=new as.JT;s.on(e,"play",n),s.on(e,"playing",n),t.emit("display mpu_player"),yS({log:i,player:e}),await async function(e){let{broker:t,mpuPlayerConfig:n,log:i,player:r}=e;return new Promise((e=>{var s;const o="mpu_player",a=(null==n||null===(s=n.bannerFallback)||void 0===s?void 0:s.displayTimeout)||5e3,{id:d=o,parentId:l=o,pos:c=o}=n;t.once("ad rendered","mpu_player",(async n=>{let{isEmpty:s}=n;const o=r.el().parentNode;i("ad rendered"),s?i("ad empty"):(o.classList.add("mpu-ad-displayed"),await(0,D.Vs)(a),o.classList.remove("mpu-ad-displayed")),t.emit("destroy slot","mpu_player"),e()})),t.emit("slot mounted",{id:d,parentId:l,pos:c})}))}({broker:t,mpuPlayerConfig:r,log:i,player:e}),s.dispose(),t.emit("destroy mpu_player"),e.removeClass("vjs-waiting"),i("resume player")}));e.on("dispose",s)}:()=>{}}({broker:n,getConfig:r,log:s.extend("mpuPlayer")}),p=function(e){let{broker:t,getConfig:n,log:i}=e;const r="chromelessPlayer"===n("players.commercial.closeButton.style","commercialPlayer")?"commercial-player-close-chromeless":"commercial-player-close",s=n("players.commercial.closeButton.addAfterImpression",!1),o=n("players.commercial.closeButton.addAfterTimeout",6e4);return e=>{var n;function a(){i("closing the player"),e.dispose(),t.emit("set slots enabled",["chromeless"],!1),t.emit("chromeless player closed"),t.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"close"}})}i("adding");const d=null!==(n=__webpack_require__.g.MobileUtils)&&void 0!==n&&n.isMobile()?"touchend":"click",l=e.addChild("button",{text:"Close"}),c=new as.JT;let u;const p=()=>{l.addClass(r),l.on(d,a),e.on("dispose",(()=>l.off(d,a))),c.dispose(),clearTimeout(u)};s?(()=>{const t=()=>{u||(n(),u=setTimeout((()=>{i("adding closebutton due to timeout"),p()}),o))},n=c.one(e,"playing",t);c.one(e,"adserror",p),c.one(e,"ads-manager",(n=>{let{adsManager:r}=n;c.addEventListener(r,__webpack_require__.g.google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,p),c.addEventListener(r,__webpack_require__.g.google.ima.AdEvent.Type.SKIPPED,p),c.one(e,"ads-ad-started",(()=>{c.one(e,"playing",(()=>{i("playing, show close button"),p()}))})),t()}))})():p()}}({broker:n,getConfig:r,log:s.extend("closeButton")}),h=function(e){let{log:t}=e;return e=>{var n;t("adding");const i=null!==(n=__webpack_require__.g.MobileUtils)&&void 0!==n&&n.isMobile()?"touchend":"click",r=e.addChild("component");r.addClass("commercial-player-big-controls"),r.hide(),e.one("playing",(()=>{r.show()}));const s=r.addChild("button",{text:"previous"});s.addClass("commercial-player-big-control"),s.addClass("commercial-player-previous"),s.on(i,(()=>e.trigger("skip to previous item")));const o=r.addChild("playToggle");o.addClass("commercial-player-big-control"),o.addClass("commercial-player-big-control"),o.on(i,(()=>e.trigger("play/pause toggle")));const a=r.addChild("button",{text:"Next"});a.addClass("commercial-player-big-control"),a.addClass("commercial-player-next"),a.on(i,(()=>e.trigger("skip to next item"))),e.on("playlistitem",(()=>{e.playlist.previousIndex()===e.playlist.currentIndex()?(t("disabling previous control"),s.disable()):s.enable()}))}}({log:s.extend("bigControls")}),f=function(e){let{broker:t,log:n}=e;const i=new Promise((e=>{t.once("creative updated plugins",(t=>{((0,I.nr)(t,"chromeless.dmplayer")&&!t["chromeless.dmplayer"]||(0,I.nr)(t,"players.commercial")&&!t["players.commercial"])&&(n("plugin cancelled by creative"),e())}))}));return e=>{i.then((()=>{e.dispose()}))}}({broker:n,log:s}),g=function(e){let{broker:t,log:n}=e;return e=>{var i;const r=null!==(i=__webpack_require__.g.MobileUtils)&&void 0!==i&&i.isMobile()?"touchend":"click";let s,o,a,d,l=!0;function c(){l&&o&&s?u(s,o):!l&&o&&u("Read more",o)}function u(i,s){const o=i+s;o!==d&&(d=o,n(i,s),e.overlay({overlays:[{align:"top",class:"commercial-player-headline",content:i,start:"playing",end:"ended"}]}),function(i){if(a&&a(),i){const s=()=>{t.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"articleUrlClicked"}}),t.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"close"}}),location.href=i},o=e.$(".vjs-overlay");n("adding click event",{overlay:o,articleUrl:i}),e.on(o,r,s),a=()=>{n("removing click event",{overlay:o,articleUrl:i}),e.off(o,r,s)}}}(s))}u("",""),e.on("playlistitem",((e,t)=>{let{articleUrl:n,headline:i}=t;s=i,o=n,c()})),e.on("userinactive",(()=>{l=!1,c()})),e.on("useractive",(()=>{l=!0,c()}))}}({broker:n,log:s.extend("headline")}),m=null===(t=(0,b.Y0)())||void 0===t?void 0:t.type,y=r("players.commercial.playUnmuted",!1)&&"navigate"===m&&""!==i.referrer,v=r("players.commercial.unMutedVolume",.03);s("playUnmuted",y),n.emit("send event to bidmax",{type:"custom",payload:{directReferrer:""===i.referrer,module:"commercialPlayer",performanceNavigationType:m||"unknown",playUnmuted:y}});const _=function(e){let{broker:t,log:n,container:i,poster:r,videoId:s,playMuted:o}=e;document.documentElement.classList.add("molads_chromeless_on"),n("instatiating videojs");const a=$b(s,{mediaLoader:!0,posterImage:!!r,textTrackDisplay:!0,loadingSpinner:!0,bigPlayButton:!1,liveTracker:!0,errorDisplay:!0,textTrackSettings:!0,resizeManager:!0,controlBar:{children:["currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","volumePanel","remainingTimeDisplay","fullscreenToggle"],pictureInPictureToggle:!1}});return a.el()._player=a,delete a.el().player,o?(n("player muted"),a.muted(!0)):n("player unmuted"),a.one("play",(()=>{i.classList.remove("hide")})),a.one("playing",(()=>{setTimeout((()=>{const e=document.getElementById("commercial-player-video_html5_api");e&&(e.style.height="",e.style.width="")}))})),a.on("dispose",(()=>{i.remove()})),a}({broker:n,container:await _S({poster:a,videoId:"commercial-player-video"}),log:s.extend(""),poster:a,videoId:"commercial-player-video",playMuted:!y});f(_);const[{applyIMA:w,firstAuction:k,initAdRequest:C},{applyPlaylist:E}]=await Promise.all([l,d]);try{c(_).then((()=>{n.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"open"}})})),w(_).catch(s.error),u(_),g(_),p(_),h(_),k.then((e=>C(_,e))).then((()=>{E(_),y?(s("setting volume",v),_.volume(v)):(s("muted autoplay"),_.autoplay("muted"))}))}catch(e){s.warn(e)}}}),(0,qe.fo)("players.remixd",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.players.remixd.scriptUrl","//tags.remixd.com/player/v5/index.js"),s=n("plugin.player.remixd.paragraphIndex",5),o={insertMethod:async e=>{if(!e)return void t.emit("send event to bidmax",{type:"custom",payload:{event:"noPlacement",module:wS}});const n=function(e,t){const n={"remixd-player-complete":"complete","remixd-player-error":"error","remixd-player-impression":"impression","remixd-player-mute":"mute","remixd-player-pause":"pause","remixd-player-play":"play"},i=t.extend("event received");return(0,as.Oo)(window,"message",(t=>{if(!t.data||"remixd"!==t.data.scope||!t.data.data)return;const r=t.data.data,s=null==r?void 0:r.event,o=null==r?void 0:r.error,a=null==n?void 0:n[s];a&&(i(t.data.data),e.emit("send event to bidmax",{type:"custom",payload:{event:a,module:wS,error:o}}))}))}(t,i);!function(e,t){const n=document.createElement("div");n.id="remixd-audio-player";const i=document.createElement("script");i.id="remixd-audio-player-script",i.src=e,i.async=!0,n.appendChild(i),t.parentElement.insertBefore(n,t)}(r,e);try{await(0,D.gb)((()=>__webpack_require__.g._rmxd)),i("script loaded"),t.emit("send event to bidmax",{type:"custom",payload:{event:"scriptLoaded",module:wS}})}catch(e){i("error while loading",r,":",e),t.emit("send event to bidmax",{type:"custom",payload:{event:"scriptLoadErr",module:wS,error:e}}),n()}},log:i,margin:n("plugin.player.remixd.margin",{top:30,bottom:60}),sourcePlugin:"remixd",targetParagraphIndex:s};i("requesting placement",s),t.register("placement requests",(()=>o))},vendorIds:{gdpr:[768]}});const wS="remixd";(0,qe.fo)("bidders.yahoossp.display",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[25]},run(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.bidders.verizon.v2.display",{});t.once("prebid loaded",(e=>{e.setConfig({yahoossp:{endpoint:"https://webc2s.pubgw.yahoo.com/pubgw/v1/hb/web/prebid",mode:"all"}})}));const s=Object.entries(r.adUnits).filter((e=>{let[t]=e;return!!n(`slotDescription.${t}`)})).map((e=>{var t;let[i,s]=e;return{code:i,bids:[{bidder:"yahoossp",params:{dcn:r.dcn,pos:`${r.posPrefix}_${i}`}}],mediaTypes:{banner:{sizes:null!==(t=null==s?void 0:s.sizes)&&void 0!==t?t:n(`slotDescription.${i}.size`,[])}}}}));i.extend("adUnitTemplates")(s),t.register("provide prebid adUnits",(()=>s))}}),(0,qe.fo)("bidders.yahoossp.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[25]},run(e){let{broker:t,getConfig:n,log:i}=e;t.once("prebid loaded",(e=>{e.setConfig({yahoossp:{endpoint:"https://webc2s.pubgw.yahoo.com/pubgw/v1/hb/web/prebid",mode:"all"}})})),t.register("provide video adUnits",((e,t,r)=>{const s=n("plugins.bidders.yahoossp.video",{});if(!s)return{};const o={code:e,bids:[{bidder:"yahoossp",params:{dcn:s.siteId,pos:"jwplayer"===e?s.adUnits[e][0===r?"preroll":"midroll"].placementId:"video"===e?s.adUnits[e][t?"ap":"ctp"].placementId:void 0}}]};return i.extend("ad unit")(o),o}))}}),(0,qe.fo)("userId",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,log:n}=e;const i=function(){const e="ads.user.id";let t=localStorage.getItem(e);return t||(t=(0,Qs.Z)(),localStorage.setItem(e,t)),t}();n("userId",i),t.register("provide userId",(()=>i)),t.emit("sync userId","bidmaxId",i,location.hostname)}}),(0,qe.fo)("trackers.pubProvidedId",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1,3,4]},vendorIds:{gdpr:"N/A"},async run(e){let{broker:t,log:n}=e;t.register("provide prebid config",(async()=>{const[e,i]=await Promise.all([t.invoke("provide userId"),t.invoke("provide domain")]);if(n({userId:e,domain:i}),e&&i)return{userSyncConfig:{userIds:[{name:"pubProvidedId",params:{eids:[{source:i,uids:[{id:e,atype:1,ext:{stype:"ppuid"}}],atype:"ppuid"}]}}]}}}))}}),(0,qe.fo)("trackers.applePrivateRelay",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run(e){let{broker:t,log:n,win:i}=e;n({applePrivateRelay:i.applePrivateRelay}),t.emit("set page level targeting",{applerelay:!!i.applePrivateRelay})}});const TS=["left","top","width","height"];function IS(e){if(!e)return;e.nodeType===Node.TEXT_NODE&&(e=e.parentNode);const t=e.id?`#${e.id}`:"",n=Array.from(e.classList||[]),i=n.length?`.${n.join(".")}`:"";return(t||i?"":`${IS(e.parentElement)} > `)+`${e.tagName.toLowerCase()}${t}${i}`}function SS(){try{return window.location.hash||"none"}catch(e){return"none"}}function kS(e,t,n){CS(e,t),t.set(e,n)}function CS(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ES(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,PS(e,t,"get"))}function AS(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,PS(e,t,"set"),n),n}function PS(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}(0,qe.fo)("analytics.cwv.cls",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:async function(e){let{broker:t,getConfig:n,log:i}=e;const r=n("analytics.cwv.cls.totalThreshold",.08),s=n("analytics.cwv.cls.entryThreshold",.01),o=n("analytics.cwv.cls.maxEntries",20),a=new Set(n("analytic.cwv.cls.slotsOfInterest",["billboard","billboard-oop","leader_top"])),d=n("analytic.cwv.cls.slotsShelfLife",5e3);i("config:",{totalThreshold:r,entryThreshold:s,maxEntries:o,interestingSlots:a,slotsShelfLife:d});const l=[],c=new Set;let u=[];t.on("ad rendered",((e,t)=>{let{isEmpty:n,lineItemId:i,creativeId:r,sourceAgnosticCreativeId:s,sourceAgnosticLineItemId:o}=t;!n&&a.has(e)&&u.push({time:Date.now(),pos:e,lineItemId:i||o,creativeId:r||s})})),__webpack_require__.g.DM.molFeWebVitals.webVitals.getCLS((e=>{let{entries:t}=e;for(const e of t){if(e.value<s||e.hadRecentInput||c.has(e))continue;c.add(e);const t=e.sources,r=t.length,o=t.map((e=>IS(e.node)));for(const s of t){const t=TS.filter((e=>s.currentRect[e]!==s.previousRect[e])),a=t.map((e=>`${e}: ${s.previousRect[e]}->${s.currentRect[e]}`)),c=IS(s.node),{before:p,after:f}=(n=s.node)?{before:n.previousElementSibling,next:n.nextElementSibling}:{};i("entry above threshold:",c,e.value,a);const g=Date.now()-d,m=u.filter((e=>e.time>=g)).map((e=>{let{pos:t,lineItemId:n,creativeId:i}=e;return`${t}=${n}/${i}`}));u=u.filter((e=>e.time<g)),i("recentPositions",m),l.push({type:"custom",payload:{module:"ads.cwv.cls",trigger:"page-unload",event:"element",changes:a,selector:c,value:Math.round(1e3*e.value)/1e3,accomplicesCount:r-1,accomplices:o.filter((e=>e!==c)),clsHash:SS(),propertiesChanged:t,total:h,startTimeInSecs:Math.round(e.startTime/1e3),previous:IS(p),next:IS(f),recentPositions:m}})}}var n}),!0),await t.until("call for page-unload");const p=__webpack_require__.g.DM.molFeWebVitals.getUpdated(),h=Math.round(1e3*p.CLS)/1e3;if(p.CLS&&h>r){i("cls",h,"above threshold",r),i("cls entries:",l.length);const e=l.sort(((e,t)=>t.value-e.value)).slice(0,o),n=l.length>e.length;n&&i("too many entries, truncating it from",l.length,"to",e.length),t.emit("send event to bidmax",{type:"custom",payload:{module:"ads.cwv.cls",trigger:"page-unload",event:"total",clsHash:SS(),value:h,heavyElements:e.length>0,truncatedEntries:n}}),e.forEach((e=>t.emit("send event to bidmax",e)))}}});var xS=new WeakMap,DS=new WeakMap,OS=new WeakMap,RS=new WeakMap,NS=new WeakSet;class MS{constructor(){let{events:e=[[document,["mousemove","keypress","scroll","mousewheel","touchmove"]],[window,["focus","scroll"]]],throttleMs:t=1e4}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){CS(e,t),t.add(e)}(this,NS),kS(this,xS,{writable:!0,value:void 0}),kS(this,DS,{writable:!0,value:void 0}),kS(this,OS,{writable:!0,value:void 0}),kS(this,RS,{writable:!0,value:[]}),AS(this,xS,new as.JT),AS(this,DS,e),AS(this,OS,(0,S.FU)(function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,NS,LS).bind(this),t))}start(){ES(this,DS).forEach((e=>{let[t,n]=e;t&&n.forEach((e=>{ES(this,xS).addEventListener(t,e,ES(this,OS))}))}))}stop(){ES(this,xS).dispose()}add(e){return ES(this,RS).push(e),()=>{this.remove(e)}}remove(e){AS(this,RS,(0,q.cl)(e,ES(this,RS)))}whenActive(){return new Promise((e=>{const t=()=>{this.remove(t),e()};this.add(t)}))}}function LS(e){ES(this,RS).forEach((t=>t(e)))}(0,qe.fo)("adPageType",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,DM:n,getConfig:i,log:r,adPageType:s}=e;r("running");const o=localStorage.getItem(US);localStorage.removeItem(US);const a=i("adPageType.usePageAdTypeOverride",!1);if(r(`autorefresh pageAutoRefreshStatus: ${o}, usePageAdTypeOverride: ${a}`),t.on("dom ready",(()=>{n.pageEvents.subscribe("page.autorefresh-event",(()=>{localStorage.setItem(US,!0)}))})),!a||!o||"art"===s)return r("setting 'page' targeting to",s),void t.emit("set page level targeting",{page:s});r("setting 'page' targeting to hp_inactive"),t.emit("set page level targeting",{page:"hp_inactive"});const d=t.until("ad rendered"),l=new MS;l.whenActive().then((async()=>{l.stop(),await d,r("setting 'page' targeting to hp"),t.emit("set page level targeting",{page:"hp"})})),l.start()}});const US="mol.ads.pageautorefresh";(0,qe.fo)("takeovers.videowallpaper",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,log:n}=e;function i(e){4===e.readyState?(e.muted=!0,e.play(),n("Video background play")):(n("Loading"),setTimeout((()=>i(e)),100))}t.on("takeover","videowallpaper",(e=>{t.emit("stop refreshing ads"),t.emit("disable chromeless-player"),t.emit("collapseAdByPos",["sky_left_top","sky_left_bottom","sky_right_top","sky_right_bottom"]);const{clickUrl:n,video:r}=e,s=jS(r.styles);(0,Se.appendStyle)(s);const o=document.createElement("template");o.innerHTML=FS.trim(),document.body.insertBefore(o.content,document.body.firstChild);const a=document.createElement("template");a.innerHTML=VS.trim();const d=document.getElementById("page-container");d.insertBefore(a.content.firstChild,d.firstChild);const l=qS(r);document.body.append(l),document.querySelector(".billboard-container").classList.remove("watermark");const c=BS(n);document.body.append(c),i(document.getElementById("backgroundvideo"))}))}});const jS=e=>{let{backupSkin:t,skinBGColor:n}=e;return`\n.fullscreen-bg {\n  background-image: url(${t});\n  background-size: contain;\n  background-position: top center;\n  background-repeat: no-repeat;\n  background-color: ${n};\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  overflow: hidden;\n  z-index: 1;\n}\n\n\n#billBoard {\n  background-color: transparent!important;\n  position: relative!important;\n  top: -30px !important;\n  box-shadow: none!important;\n  left: 0!important;\n}\n\n.cleared.lead-alpha, #content > .cleared {\n  background-color: #fff!important;\n}\n\n.articleWide {\n  background-color: #fff;\n}\n\n#top {\n  position: relative;\n  z-index: 2;\n}\n\nvideo#backgroundvideo {\n  position: fixed;\n  top: 0;\n  left: 50%;\n  min-width: 100%;\n  width: 100%;\n  height: auto;\n  z-index: -100;\n  animation: translate-video;\n  animation-fill-mode: forwards;\n}\n\n@keyframes translate-video {\n  to {\n    transform: translateX(-50%) translateY(0%);\n  }\n}\n\n.page-container-cover {\n  position: absolute;\n  width: 994px;\n  background: #fff;\n  z-index: 1;\n  margin-left: auto;\n  margin-right: auto;\n  height: 100%;\n  left: -16px;\n  right: 0;\n  top: 465px;\n}\n\n.page-header-cover {\n  position: absolute;\n  width: 994px;\n  height: 186px;\n  background: #fff;\n  left: 0;\n  right: 0;\n  z-index: 2;\n  margin-left: auto;\n  margin-right: auto;\n}\n\n#content {\n  z-index: 1;\n  animation: shift-content-down 500ms;\n  animation-fill-mode: forwards;\n}\n\n@keyframes shift-content-down {\n  to {\n    transform: translateY(30px);\n  }\n}\n\n#ad_skinHolder {\n  width: 100%;\n  height: 100%;\n  margin: auto;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 1;\n`},BS=e=>{const t=document.createElement("template");return t.innerHTML=`\n      <a id="ad_skinHolder" href="${e}" target="_blank">\n        <div class="extra-static-skin"></div> \n      </a>\n    `.trim(),t.content},qS=e=>{let{attributes:t,sources:n}=e;const i=document.createElement("div");i.setAttribute("id","ad_video"),i.classList.add("fullscreen-bg"),i.setAttribute("post","");const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.id="backgroundvideo";const n=document.createElement("video");return Object.entries(e).forEach((e=>{let[t,i]=e;n.setAttribute(t,i)})),t.forEach((e=>{let{type:t,src:i}=e;const r=document.createElement("source");r.setAttribute("type",t),r.setAttribute("src",i),n.appendChild(r)})),n}(t,n);return i.appendChild(r),i},FS='<div class="page-header-cover"></div>',VS='<div class="page-container-cover"></div>';(0,qe.fo)("site",{init:function(e){let{broker:t,log:n,setConfig:i,getConfig:r,DM:s,pageCriteria:o}=e;const a=r("site","mol");i("site",a),o.pageViewId=(0,O.kb)(),t.register("call for page analytics",(()=>({account:a}))),function(e,t,n){const i=(0,y.U2)("tcfv2.enabled",!1),r="US"===e.geo,s=i&&"BR"===e.geo;n("cmp.model",(r?"ccpa":s&&"lgpd")||i&&"tcfv2"||void 0),n("cmp.shouldBeEnforced",r&&(0,y.U2)("ccpa.consentManagementRegions",["CA","VA"]).some((t=>e.region===t))||i),n("cmp.keyNameForGPTVideoConsent",r?"rdp":"npa"),n("cmp.apiHandler",(r?"__uspapi":(i||s)&&"__tcfapi")||void 0),t("cmp:",(0,y.U2)("cmp"))}(o,n,i);const d={...$S},l=r("tcfv2.branding.includePrimaryVendor",!0),c=r("tcfv2.branding.providerUrl"),u={level1Paragraphs:zS};l&&(u.primaryVendor=d),c&&(u.providerUrl=c),i("tcfv2.brand",u),"object"==typeof s&&"function"==typeof s.getPageMetadata&&i("tcfv2.renderPlatform",s.getPageMetadata().renderPlatform)},ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0});const zS=["We and our partners process, store and/or access data such as IP address, unique ID and browsing data based on your consent to display personalised ads and content, ad and content measurement, audience insights and product development, use precise geolocation data, and actively scan device characteristics for identification.","Sometimes we and/or our partners dont rely on your consent but rely on legitimate interest to process your data. Click Cookie Settings below to see our partners, why they rely on legitimate interest and how you can object.","Control how your data is used and view more info at any time via the Cookie Settings link in the Privacy Policy."],$S={features:[1,2,3],flexiblePurposes:[],headingName:"Associated Newspapers Ltd.",legIntPurposes:[5,6,8,10],name:"Associated Newspapers Ltd. (MailOnline, ThisIsMoney & Metro)",policyUrl:(0,y.U2)("tcfv2.policyUrl","/home/article-7759273/Privacy-Cookies-Policy-Policy.html"),purposes:[1,2,3,4,7,9],specialFeatures:[1],specialPurposes:[1,2]},HS=DM.molFeAsync;var WS=__webpack_require__(9796);(0,qe.fo)("skimlinks",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},run:function(e){let{getConfig:t}=e;const n=t("skimlinks",{enabled:!1});n.enabled&&(0,HS.later)("DOM_READY").then((()=>{const e=n.filename||ZS();if(e){const t="//s.skimresources.com/js/"+e+".skimlinks.js",n=document.createElement("script"),i=document.querySelector("script");n.async=!0,n.src=t,i.parentNode.insertBefore(n,i)}})).catch((e=>{WS.logger.error("Error during skimlinks initialisation: ",e)}))},vendorIds:{gdpr:[46]}});const ZS=()=>{const e=document.querySelector(".skimlinks");return null===e?null:e.getAttribute("data-tracking-id")};(0,qe.fo)("slotDefinition",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,doc:n,getConfig:i,log:r}=e;const s=i("slots.enabled"),o=["gpt","gptOOP"];t.on("slot defined",(e=>{t.emit("update description",e.pos,e),o.some((t=>e.slotTypes.includes(t)))?(r("dispatching 'slot ready'",e.pos),t.emit("slot ready",e)):r("unsupported slot type, bailing",e.pos,e.slotTypes)})),t.on("slot mounted",(async e=>{var i;const o=(0,_e.get)(e.pos);if(!s[e.pos])return void r("slot not enabled, bailing",e.pos);if(!o)return void r("unable to find description for slot, bailing",e);const a=GS(o,e);n.getElementById(a)||r.error(`Unknown element "#${a}"`);const{isTemplate:d,pos:l,regex:c,unitSuffix:u,...p}=o,h=p.unit&&u?`${p.unit}_${u}`:p.unit?p.unit:a,f=d&&c?{...XS(p),adUnit:(0,F.Z)(h),dfpPos:l,id:a,isTemplate:d,pos:a,parentId:a,targeting:{puff_offset:null===(i=new RegExp(c).exec(a))||void 0===i?void 0:i[1]}}:{...p,id:a,pos:"fff"===l?a:l};r("slotDefintion",f);try{await t.invoke("verify slot ready",f)}catch(e){r.warn(e)}n.getElementById(a)?(r("slot verified",f.pos),t.emit("slot defined",f)):r("slot no longer exists",f.pos)}))}});const GS=(e,t)=>t.id||e.id||t.containerId||t.pos+"_"+(new Date).getTime(),XS=e=>JSON.parse(JSON.stringify(e));function KS(e){const t=e("slotDescription",{});return e("plugins.adservers.openweb.slots",[]).filter((e=>e in t)).map((e=>[e,t[e]]))}(0,qe.fo)("googlePPID",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1,2,3,4,5,6,7,8,9,10]},run:function(e){let{broker:t,log:n}=e;n("running googlePPID");const i=t.invoke("provide userId");t.on("gpt initialized",(async e=>{const t=await i;n("setting googlePPID",t),e.pubads().setPublisherProvidedId(t)})),i.then((e=>{t.emit("sync video tags update",{ppid:e})}))},vendorIds:{gdpr:[755]}}),(0,qe.fo)("adservers.openweb",{disableIfNoAdsServable:!0,init:function({getConfig:e,log:t,setConfig:n}){const i=KS(e);i.length?(t("enabled openwebSlots slots",i),i.forEach((([i,r])=>{r.slotTypes=["openweb"],r.earlyBidding=!1,t("setting",i,r),n(`slotDescription.${i}`,r),e("slotDescriptions.initial")&&(t("updating slotDescription.initial",i,r),n(`slotDescriptions.initial.${i}`,r))}))):t("no enabled openweb slots, bailing")},run:function({broker:e,getConfig:t,log:n}){const i=t("plugins.adservers.openweb.forceLoadBundle",!1),r=KS(t).map((([e])=>e));if(r.length){if(!__webpack_require__.g.window.PageCriteria.openwebEnabled||i){const n=t("plugins.adservers.openweb.scriptUrl","//launcher-sa.spot.im/spot/sp_jhHPoiRK");e.invoke("import script",n,{"data-spotim-autorun":"true","data-spotim-module":"spotim-launcher"})}n("enabled openweb slots",r),e.on("slot defined",(function(t){if(!r.includes(t.dfpPos||t.pos))return;n("slot defined",t.pos,t);const i=document.getElementById(t.id);if(!i)return void n("unabled to find element, bailing",t.pos,t.id);const s=t?.openweb?.dataset.column||"1";i.dataset.openwebAd="",i.dataset.row="1",i.dataset.column=s;try{!function(t){e.emit("send event to bidmax",{type:"custom",payload:{event:"slotDefined",module:"openweb",pos:t.pos}})}(t)}catch(e){console.warn(e)}try{(new Image).src="https://t.cdnopw.com/b.gif"}catch(e){console.warn(e)}try{!function(e){const t=__webpack_require__.g.DM&&__webpack_require__.g.DM.molFeTracking&&__webpack_require__.g.DM?.molFeTracking?.pageEvents;t?t.AD_SLOT_LOADED_ON_PAGE?t.publish(t.AD_SLOT_LOADED_ON_PAGE,{slotType:e.slotTypes[0]}):n.warn("wrong version of fe-sync-bundle"):n.warn("no pageEvents")}(t)}catch(e){console.warn(e)}}))}else n("no enabled openweb slots, bailing")},purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:"N/A"}}),(0,qe.fo)("modifiers.takeovers",{gdpr:{enabledIfDissent:!0},run:function({broker:e,getConfig:t,log:n}){const i=t("__generated.modifiers.applied",[]).filter((e=>e.startsWith("campaigns.rules-linteItem-"))).map((e=>e.substring(26)));i.length?(n("liveTakeovers applied",i),e.register("call for page analytics",(()=>({takeoverLineItems:i})))):n("no takeovers applied, bailing")}}),(0,qe.fo)("slots.display-handlers.skies",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run:function({broker:e,getConfig:t,log:n}){const i=new Set(["sky_left_top","sky_right_top","sky_left_bottom","sky_right_bottom"].filter((e=>t(`slots.enabled.${e}`))));if(!b.s$||!i.size)return void n("no supported slots, bailing");n("supported slots",i);const{cancel:r}=e.on("ad requested",(e=>{n("display",e),i.has(e)&&(document.documentElement.classList.add("has-skies"),r())}))}});var JS=__webpack_require__(7019),YS=__webpack_require__.n(JS);class QS{constructor({broker:e}){const t={};this.broker=e,t.auctions={},t.pendingStreams={},this.priv=t}_createPendingStreamForPosition(e){const t=this.broker.createReadObjectStream();return this.priv.pendingStreams[e]=t,t}_createAuctionForPositions(e,t){const n=(0,Qs.Z)(),i=e.reduce(((e,n)=>{const i=t?this._createPendingStreamForPosition(n):this.broker.createReadObjectStream();return i.bids=[],{...e,[n]:{stream:i}}}),{});return this.priv.auctions[n]=i,{auctionId:n,positions:i}}createAuctionWithPendingStreams(e){return this._createAuctionForPositions(e,!0)}resolveStreamForPosition(e){let t={};if(this.priv.pendingStreams[e])t.stream=this.priv.pendingStreams[e],delete this.priv.pendingStreams[e];else{const n=this._createAuctionForPositions([e],!1);t={auctionId:n.auctionId,stream:n.positions[e].stream}}return t}createAuctionForAdUnitCode(e,t,n,i){const r=t||(0,Qs.Z)(),s=this.broker.createReadObjectStream();s.bids=[];const o={stream:s,offset:n,platform:i};return this.priv.auctions[r]={[e]:o},{auctionId:r,positions:{[e]:o}}}getStreamForAdUnitCode(e,t){return this.priv.auctions[e]&&this.priv.auctions[e][t]||{}}dispose(e){const t=this.priv.auctions[e];t?(Object.values(t).forEach((({stream:e})=>{e.push(null),e.ended=!0})),delete this.priv.auctions[e]):console.error(`Unabled to find auctionId: ${e}`)}}function ek(e,t,n){return e.bidderSettings.standard.adserverTargeting.filter((e=>void 0===t[e.key])).map((e=>[e.key,e.val(n)])).filter((e=>{let[t,n]=e;return void 0!==n})).forEach((e=>{let[n,i]=e;return t[n]=i})),t}function tk(e,t){return Object.keys(t).reduce(((n,i)=>("hb_bidder"===i||(n[`${i}_${e}`.substring(0,20)]=t[i]),n)),{})}const nk=e=>JSON.parse(JSON.stringify(e));function ik(e){let t,{stream:n,log:i,bid:r,broker:s,pbjs:o,requestSizes:a}=e;if(!(n.bids&&n.bids[r.bidderCode]&&(i(`auctionId: ${r.auctionId}, additional bid, adUnitCode: ${r.adUnitCode}, ${r.bidderCode}, cpm: ${r.cpm}, slotSize: ${r.size}`),n.bids[r.bidderCode].cpm>=r.cpm))){if(["video","jwplayer"].includes(r.adUnitCode))i(`auctionId: ${r.auctionId}, bid caching not supported for slot: ${r.adUnitCode}`),n.highestBidder=n.highestBidder&&r.cpm<=n.highestBidder.cpm?n.highestBidder:r,t=n.highestBidder;else{const e=o.getHighestUnusedBidResponseForAdUnitCode(r.adUnitCode);i(`auctionId: ${r.auctionId}, bidResponse, adUnitCode: ${r.adUnitCode}, highestCachedBid: ${e&&e.bidderCode}, adId: ${e&&e.adId}, cpm: ${e&&e.cpm}, from auctionId: ${e.auctionId}`),t=e&&!(0,I.xb)(e)&&e.cpm>=r.cpm?e:r,i(`auctionId: ${r.auctionId}, bidResponse, adUnitCode: ${r.adUnitCode}, selected bidder isCached: ${r.auctionId!==t.auctionId},  bidderCode: ${t.bidderCode}, adId: ${t.adId}, cpm: ${t.cpm}`)}!function(e){let{broker:t,log:n,pbjs:i,stream:r,bidResponse:s,selectedBid:o,requestSizes:a}=e;r.bids=r.bids||{},r.cachedBid=r.cachedBid||{},r.bids[s.bidderCode]=r.bids[s.bidderCode]||{};const d=ek(i,nk(o.adserverTargeting),o),l=tk(s.bidderCode,ek(i,nk(s.adserverTargeting),s)),c=o.auctionId!==s.auctionId?1:0;if(void 0===r.highestCpm&&(r.highestCpm=0),r.highestCpm=s.cpm>r.highestCpm?s.cpm:r.highestCpm,d.bc=c,d.bc_diff=(u=c?o.cpm-r.highestCpm:0,Math.round(100*u)/100),n(`auctionId: ${s.auctionId}, streamBid, adUnitCode: ${o.adUnitCode}, bidder: ${o.bidderCode}, adId: ${o.adId}, cpm: ${o.cpm}, from auctionId: ${o.auctionId}, cachedBidDiff: ${d.bc_diff}`),r.bids[s.bidderCode].bidderTargeting=l,r.bids[s.bidderCode].cpm=s.cpm,c&&!r.cachedBid.hasUsedCachedBid){const e=tk(o.bidderCode,ek(i,nk(o.adserverTargeting),o));r.cachedBid={hasUsedCachedBid:!0,targeting:e,bidderCode:o.bidderCode};const n={cached:!0,bidder:o.bidderCode,cpm:Math.round(100*o.cpm)};t.emit("bid",o.adUnitCode,n)}else!c&&r.cachedBid.hasUsedCachedBid?(r.bids[r.cachedBid.bidderCode]?r.cachedBid.targeting=r.bids[r.cachedBid.bidderCode].bidderTargeting:r.cachedBid.targeting=r.cachedBid.targeting?Object.fromEntries(Object.keys(r.cachedBid.targeting).map((e=>[e,void 0]))):{},r.cachedBid.hasUsedCachedBid=!1):c||(r.cachedBid.targeting={});var u;const p={...d,...l,...r.cachedBid.targeting},h={type:"bid",pos:s.adUnitCode,cpm:Math.round(100*s.cpm)/100,bidderCode:s.bidderCode,tags:p};c&&(h.cachedBid={bidderCode:o.bidderCode,cpm:Math.round(100*o.cpm)/100}),r.push([h])}({broker:s,log:i,pbjs:o,stream:n,bidResponse:r,selectedBid:t})}}var rk=__webpack_require__(8622),sk=__webpack_require__.n(rk);function ok(e,t){const n=e[0]*e[1],i=t[0]*t[1],r=e[0]<t[0]?1:e[0]>t[0]?-1:0;return n<i?1:n>i?-1:r}const ak=(e,t)=>{let{code:n,bids:i,mediaTypes:r,ortb2Imp:s}=t;const o=n+JSON.stringify(r)+JSON.stringify(s),a=e[o]||{code:n,bids:[],mediaTypes:{banner:{...r.banner,sizes:[]}}};return a.bids=[...a.bids,...i],a.mediaTypes.banner.sizes=((e,t)=>{const n=t&&t.banner&&t.banner.sizes||[];return Array.from(new Set([...n,...e.mediaTypes.banner.sizes].map(JSON.stringify))).map(JSON.parse).sort(ok)})(a,r),s&&(a.ortb2Imp=s),e[o]=a,e};(0,qe.fo)("prebid",{ccpa:{enabledIfDissent:!0},purposeIds:{gdpr:[1]},run:async function({broker:e,getConfig:t,win:n}){let i;const r=t("slots.enabled",{}),s=e.invokeAll("prebid prerequisites",{timeout:t("plugins.prebid.prequisiteTimeout",3e3)}),o=new Promise((async t=>{await s,({default:i}=__webpack_require__(924)),e.emit("prebid loaded",i),t(i)})),a=t("plugins.prebid.ortb2.params",["area","article","ias-bsp"]),d=t("plugins.prebid.ortb2.iasBspLength",30),l=t("plugins.prebid.dependenciesTimeout",2e3),c=t("plugins.prebid.setVideoOffsetInAdUnit",!1),u={area:()=>__webpack_require__.g.adAreaId,"ias-bsp":async()=>{const t=(await e.invokeAll({message:["dmp","admantx"],timeout:l}))[0];if(t)return t.slice(0,d)},article:()=>n.pagemeta?.articleId},p=a.reduce(((e,t)=>{const n=u[t]?.();return n&&e.push([t,n]),e}),[]),h=new QS({broker:e}),f=new Set,g={},m=t("slotDescriptions.initial",{}),y=(0,I.ei)(m,Object.keys(r));Object.entries(r).forEach((([e,t])=>{y[e]&&(y[e].loadSettings=t)}));const v=t("prebid.globalPlacementIds.display",{}),_=t("prebid.globalPlacementIds.video",{}),w={},S={},k=e=>{const t={},n=e.filter((e=>{const t=e&&"code"in e;return t||dk("ignoring invalid adUnit"),t}));n.forEach((e=>{const{bids:n,code:i,sizes:r}=e,s=r.map((([e,t])=>`${e}x${t}`));(0,q.jj)(n.map((({bidder:e})=>e))).forEach((e=>{t[i]=t[i]||{},t[i][e]=t[i][e]||{};const n=t[i][e].requestSizes||[];n.push(s),t[i][e]={requestSizes:(0,q.jj)(n)}}))})),Object.entries(t).forEach((([e,t])=>{const n=Object.entries(t).reduce(((e,[t,n])=>({...e,[t]:{requestSizes:n.requestSizes.flat()}})),{});S[e]=n})),dk("addAdUnits",n),i.addAdUnits(n),n.map((e=>e.code)).forEach((e=>f.add(e))),n.forEach((({code:e,bids:t})=>{w[e]=[...new Set([...w[e]||[],...t.map((({bidder:e})=>e))])]}))},C=t("auction.priceGranularity",{buckets:[{min:0,max:20,increment:.01},{min:20,max:50,increment:.1}]});e.register("prebid config async update",(async e=>{await o,i.setConfig(e)}));const E=(e,t,n)=>i=>{dk("auctionId:",e,", ",t,"auctionEnded, bids:",Object.keys(i||{}).length);try{n&&n()}finally{h.dispose(e)}},A=(t,n)=>{dk("auctionId:",t,", bidOnAdUnitCodes: ",n),i.requestBids({adUnitCodes:n,auctionId:t,bidsBackHandler:E(t,n)}),e.emit("bids requested",{positions:n})},P=t("prebid.videoAuctionOffset",500),x={standard:{adserverTargeting:[{key:"hb_bidder",val:({bidderCode:e})=>e},{key:"hb_adid",val:({adId:e})=>e},{key:"hb_pb",val:e=>{switch(C){case"auto":return e.pbAg;case"dense":return e.pbDg;case"high":return e.pbHg;case"low":return e.pbLg;case"medium":return e.pbMg;default:return"object"==typeof C?e.pbCg:e.pbHg}}},{key:"hb_size",val:({size:e})=>e},{key:"hb_source",val:({source:e})=>e},{key:"hb_format",val:({mediaType:e})=>e},{key:"hb_cache_id",val:({videoCacheKey:e})=>e},{key:"hb_uuid",val:({videoCacheKey:e})=>e},{key:"fb_bidid",val:e=>e.fb_bidid}]}};e.on("plugins enabled",(async t=>{const n=(await e.invokeAll("provide prebid adUnits")).flat();await o,i.bidderSettings=await e.invokeChainMutable("prebid reduce bidderSettings",x),(await e.invokeAll("provide bidder alias")).forEach((({adapterName:e,aliasedName:t})=>{i.aliasBidder(e,t)})),e.emit("configure and start prebid",t,n)}));const D=new Promise((n=>{e.on("configure and start prebid",(async(r,s=[])=>{await async function(n,r){const s={"bidders.adform.display":"adf","bidders.adform.v2.display":"adf","bidders.adform.video":"adf","bidders.mediagrid":"grid","bidders.mediagrid.v2.display":"grid","bidders.mediagridVideo":"grid","bidders.brightroll":"brightroll","bidders.appnexusPSP":"appnexus"};dk.info("pluginToS2SBidderNameMap",s);const o=YS()(n,Object.keys(s));dk.info("enabledS2SPlugins",o);const a=new Set(o.map((e=>s[e]))),d=Array.from(a);dk.info("enabledS2SBidders",a),((e,t)=>{const{s2sAdUnits:n,headerAdUnits:i}=t.reduce(((t,n)=>(e.has(n.bids[0].bidder)?t.s2sAdUnits.push(n):t.headerAdUnits.push(n),t)),{s2sAdUnits:[],headerAdUnits:[]});dk("S2S AdUnits",n);const r=n.reduce(((e,{code:t,bids:n,mediaTypes:i})=>{const r=[...e[t]&&e[t].bids||[],...n],s=(0,q.jj)([...e[t]&&e[t].mediaTypes.banner.sizes||[],...i.banner.sizes.map((e=>e.toString()))]);return{...e,[t]:{code:t,bids:r,mediaTypes:{banner:{sizes:s}}}}}),{}),s=Object.values(r).map((({code:e,bids:t,mediaTypes:n})=>({code:e,bids:t,mediaTypes:{banner:{sizes:n.banner.sizes.map((e=>e.split(",").map((e=>parseInt(e)))))}}})));dk("merged S2S AdUnits",s)})(a,r);const l=Object.values(r.reduce(ak,{})).map((e=>(e.sizes=e.mediaTypes.banner.sizes,e))),c=l.map((e=>((e,t)=>(e[t.code]&&sk()(t,"ortb2Imp.ext.data.pbadslot",e[t.code]),t))(v,e)));dk("allAdUnits",c);const u=[...new Set(ck(c,y))],f=e.invokeAll("provide prebid bidder config"),m=await e.invokeAll("provide prebid config"),{realTimeData:_,userSync:w,fledgeForGpt:E}=m.reduce(((e,{realTimeDataConfig:t={},userSyncConfig:n={},fledgeForGptConfig:i={}})=>{const{realTimeData:r,userSync:s,fledgeForGpt:o}=e;return{realTimeData:pk(r,t),userSync:hk(s,n),fledgeForGpt:{...o,...i}}}),{realTimeData:{},userSync:{},fledgeForGpt:{}});(0,I.xb)(_)||(dk("setting realTimeData config",_),i.setConfig({realTimeData:_})),(0,I.xb)(w)||(dk("setting userSync config",w),i.setConfig({userSync:w})),(0,I.xb)(E)||(dk("setting fledgeForGpt config",E),i.setConfig({fledgeForGpt:E}));const P=t("topPageUrl"),x={debug:t("prebid.debug",!1)||b.SP.pbjs_debug||!1,enableSendAllBids:!1,priceGranularity:C,cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"},s2sConfig:(await e.invokeAll("prebid s2s config")).reduce(((e,t)=>T()(e,t)),{accountId:t("auction.accountId","37643165-9d8c-4c14-9e55-57b51f032308"),defaultVendor:"appnexus",enabled:!!d.length,bidders:d,timeout:t("auction.maxTime",2e3),adapter:t("auction.adapter","prebidServer"),endpoint:t("auction.endpoint","https://prebid.adnxs.com/pbs/v1/openrtb2/auction"),syncEndpoint:"https://prebid.adnxs.com/pbs/v1/cookie_sync",secure:t("auction.secure",0)}),currency:t("prebid.currency",{adServerCurrency:"USD",granularityMultiplier:1,conversionRateFile:"https://currency.prebid.org/latest.json",defaultRates:{GBP:{USD:1.2764213953}}}),sizeConfig:t("plugins.prebid.sizeConfig",[]),targetingControls:{allowTargetingKeys:["BIDDER","AD_ID","PRICE_BUCKET","SIZE","DEAL","SOURCE","FORMAT","UUID","CACHE_ID","CACHE_HOST","ADOMAIN"]}};P&&(x.pageUrl=P);const D=await Promise.all(p.map((async([e,t])=>[e,await t]))).then((e=>({site:{ext:{data:e.reduce(((e,[t,n])=>n?{...e,[t]:n}:e),{})},keywords:e.flatMap((([e,t])=>Array.isArray(t)?t.map((t=>`${e}=${t}`)):t?`${e}=${t}`:void 0)).filter(Boolean).join(",")}})));x.ortb2=D,(await f).forEach((([e,t])=>{i.setBidderConfig({bidders:e,config:t},!0)}),{}),__webpack_require__.g.__tcfapi?x.consentManagement={...x.consentManagement||{},gdpr:{cmpApi:"iab",timeout:5e3,defaultGdprScope:!0}}:__webpack_require__.g.__cmp&&(x.consentManagement={...x.consentManagement||{},gdpr:{cmpApi:"iab",timeout:5e3,allowAuctionWithoutConsent:!1}}),__webpack_require__.g.__uspapi&&(x.consentManagement={...x.consentManagement||{},usp:{cmpApi:"iab",timeout:500}}),dk("config:",x),i.setConfig(x);const O=uk(g,c);dk("adUnits",O),dk("othersAdsPos templates",g),k(O),fk(e,i,h,S),e.emit("prebid adunits added",O,u);const{auctionId:R}=h.createAuctionWithPendingStreams(u);dk(`auctionId: ${R}, requestBids. adUnitCodes: ${u}`),A(R,u)}(r,s),n()}))})),O=(e,t,n)=>{let i=g[e]&&JSON.parse(JSON.stringify(g[e]))||[];return i=i.map((i=>{if(i.code=t,n[e]){const r=n[e].split(",");r[r.length-1]=t,sk()(i,"ortb2Imp.ext.data.pbadslot",r.join(","))}return i})),k(i),i};e.registerStream("get tags",(async({slot:t})=>{await D;const{pos:n}=t;if(dk("get tags, pos:",n,t),n.startsWith("mpu_puff_other"))O("mpu_puff_others",n,v);else if(n.startsWith("puff_ad_other"))O("puff_ad_others",n,v);else if(n.startsWith("mpu_mobile_other"))O("mpu_mobile_others",n,v);else if(n.startsWith("mpu_factbox"))O("mpu_factbox",n,v);else if(n.startsWith("mpu_mobile_factbox"))O("mpu_mobile_factbox",n,v);else if(!y[n]||!f.has(n))return void dk("unable to run auction for pos:",n,y[n],f.has(n));const i=h.resolveStreamForPosition(n);return i.auctionId&&A(i.auctionId,[n]),e.emit("auction event",n,"interested endpoint",{endpoints:w[n]}),i.stream}));const R=t("plugins.enabled").filter((e=>e.includes("konduit"))).length>0;dk("konduitEnabled:",R),R?e.registerStream("konduit get video tags",M):e.registerStream("get video tags",M);const N=(e,t,n)=>{const i=0===n?"preroll":"midroll";return e?.[t.code]?.[i]&&sk()(t,"ortb2Imp.ext.data.pbadslot",e?.[t.code]?.[i]),t};async function M({platform:n,offset:r=0,timeout:s,slot:o,autoplay:a,videoId:d,auctionId:l}){await D;const u=(e=>t(lk[e],{}))(o.pos),{code:p,mediaTypes:f}=u,g=c?{...f,video:{...f.video,startdelay:r}}:f,m=o.pos||"video",y=(await e.invokeAll("provide video adUnits",m,a,r,d)).filter((e=>e)),{adUnits:v,bids:b,pbjsConfig:w}=y.reduce(((e,t)=>{if(t.pbjsConfig&&(e.pbjsConfig=T()({},e.pbjsConfig,t.pbjsConfig)),t.mediaTypes){const{bids:n,code:i,mediaTypes:s}=t,o={...f,...s,video:c?{...f.video,...s.video,startdelay:r}:{...f.video,...s.video}};e.adUnits.push({bids:n,code:i,mediaTypes:o})}else t.bids&&(e.bids=[...e.bids,...t.bids]);return e}),{adUnits:[],bids:[],pbjsConfig:{}}),S=[...v,b.length&&{bids:b,code:p,mediaTypes:g}].filter((e=>e)).map((e=>N(_,e,r))),k=await e.invoke("enrich video adUnits",S);let C;if(dk(`video auctionId: ${l}, adUnit config`,k,w),k.length){(0,I.xb)(w)||i.setConfig(w);const t=((t,n,r,s,o)=>{const a=t[0].code,d=h.createAuctionForAdUnitCode(a,r,s,o);dk("auctionId:",d.auctionId,", adUnit: ",t),e.emit("bids requested",{positions:[a]});const l=n-P;return i.requestBids({adUnits:t,auctionId:d.auctionId,timeout:l,bidsBackHandler:E(d.auctionId,[a],(()=>e.emit("prebid video auction ended",[a],d.auctionId)))}),{stream:d.positions[a].stream,auctionId:d.auctionId}})(k,s,l,r,n);C=t.stream,e.emit("prebid video auction started",l,m,r)}const A=k.map((({bids:e})=>e)).flat().map((({bidder:e})=>e));if(dk("Interested endpoints:",A),e.emit("auction event",m,"interested endpoint",{endpoints:A}),S.length)return function(e,t,n,i){return Zi.UI(e,(e=>{if(e.length){const{bidderCode:r,cpm:s,cachedBid:o}=e[0],a=e[0].tags;return{auctionId:n,pos:t,offset:i,type:"bid",cpm:s,bidderCode:r,cachedBid:o,tags:{cust_params:{...a}}}}return{}}))}(C,m,l,r)}return e.register("enrich video adUnits",(e=>e)),e.on("prepare to refresh ads",(e=>{const{auctionId:t}=h.createAuctionWithPendingStreams(e);dk(`auctionId: ${t}, requestBids refresh, adUnitCodes: ${e}`),A(t,e)})),o},vendorIds:{gdpr:"N/A"},disableIfNoAdsServable:!0});const dk=(0,_.x)("prebid"),lk={jwplayer:"plugins.slots.jwplayer.v3",video:"plugins.slots.video.v2",verticalvideo:"plugins.slots.verticalvideo.v1"},ck=(e,t)=>(0,q.DZ)((e=>{return(n=t[e.code])&&"immediate"===n.loadSettings.type&&n.earlyBidding;var n}),(e=>e.code),e||[]),uk=(e,t)=>{const n=new Set(["mpu_puff_others","puff_ad_others","mpu_mobile_others","mpu_factbox","mpu_mobile_factbox"]),i=t.filter((t=>n.has(t.code)?(t.bids&&t.bids.length&&(e[t.code]=e[t.code]||[],e[t.code].push(t)),!1):t.bids&&t.bids.length));return i},pk=(e,t)=>{if((0,I.xb)(t))return e;const{dataProviders:n,...i}=t;return e.dataProviders=[...e.dataProviders||[],...n],{...e,...i}},hk=(e,t)=>{if((0,I.xb)(t))return e;const{userIds:n=[],...i}=t;return e.userIds=[...e.userIds||[],...n],{...e,...i}},fk=(e,t,n,i)=>{t.onEvent("bidderDone",(({bidderCode:t,bids:n})=>{new Set(n.map((({adUnitCode:e})=>e))).forEach((n=>e.emit("plugin done",n,t)))})),t.onEvent("bidResponse",(r=>{dk(`auctionId: ${r.auctionId}, bidResponse, adUnitCode: ${r.adUnitCode}, bidderCode: ${r.bidderCode}, adId: ${r.adId}, cpm: ${r.cpm}`);const{stream:s,offset:o,platform:a}=n.getStreamForAdUnitCode(r.auctionId,r.adUnitCode),d=Math.round(100*r.cpm),l=i[r.adUnitCode]&&i[r.adUnitCode][r.bidderCode]&&i[r.adUnitCode][r.bidderCode].requestSizes;e.emit("bid",r.adUnitCode,{bidder:r.bidderCode,cpm:d,offset:o,platform:a,requestSizes:l}),dk("bid requestSize",r.adUnitCode,r.bidderCode,l),s?s.ended?dk(`auctionId: ${r.auctionId}, streamEnded, adUnitCode: ${r.adUnitCode}, bidder: ${r.bidderCode}, adId: ${r.adId}, bailing`):ik({broker:e,log:dk,pbjs:t,stream:s,bid:r,requestSizes:l}):console.error(`[PREBID] auctionId: ${r.auctionId},  Unknown stream for ${r.adUnitCode}, bidder: ${r.bidderCode}`)}))};(0,qe.fo)("gpid",{disableIfNoAdsServable:!0,ccpa:{enabledIfDissent:!0},init:function({getConfig:e,setConfig:t,log:n}){const i=Object.keys(e("slots.enabled",{})),r=e("dfp.networkCode"),s=Object.fromEntries(i.map((e=>[e,`${r}/${(0,F.Z)(e)}`])));n("setting display globalPlacementIds",s),t("prebid.globalPlacementIds.display",s);const o=e("players.chromeless.dmplayer.v3.dfpAccountCode","5765"),a=e("players.chromeless.dmplayer.v3.adUnitNameLevel1","dm.chromelessvideo"),d=e("players.chromeless.dmplayer.v3.adUnitNameLevel2","dm_dmros_ros"),l=e("players.editorial.v2.gpid.adUnitNameLevel1","dm.video"),c=e("players.editorial.v2.gpid.adUnitNameLevel2","dm_ros"),u=Object.fromEntries(["preroll","midroll"].map((e=>[e,`${o}/${a}/${d}/${e}`]))),p=Object.fromEntries(["preroll","midroll"].map((e=>[e,`${o}/${l}/${c}/${e}`])));n("setting video globalPlacementIds",u,p),t("prebid.globalPlacementIds.video",{jwplayer:u,video:p})},purposeIds:{gdpr:[1]},vendorIds:{gdpr:"N/A"}}),(0,qe.fo)("prebid.permutiveRtd",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=n("permutive.rtd.acBidders",["appnexus","rubicon","ozone"]),s=n("permutive.rtd.maxSegs",500),o=n("permutive.rtd.auctionDelay",2e3),a={name:"permutive",params:{acBidders:r,maxSegs:s}},d=[o?{...a,waitForIt:!0}:a],l=o?{auctionDelay:o,dataProviders:d}:{dataProviders:d};i("setting realTimeData rtd",l),t.register("provide prebid config",(()=>({realTimeDataConfig:l})))},vendorIds:{gdpr:[361]}}),(0,qe.fo)("trackers.exitbee",{purposeIds:{gdpr:"N/A"},run:function(e){let{broker:t,getConfig:n,log:i}=e;i("start");const r=n("plugins.exitbee.loadSite","8038");__webpack_require__.g.ExitBeeObject="xtb",__webpack_require__.g.xtb=__webpack_require__.g.xtb||function(){(__webpack_require__.g.xtb.args=__webpack_require__.g.xtb.args||[]).push(arguments)},t.invoke("import script","https://cdn.exitbee.com/xtb.min.js").then((()=>{i("loaded")})),__webpack_require__.g.xtb("loadSite",r)},vendorIds:{gdpr:[1027]}}),(0,qe.fo)("slots.classes",{gdpr:{enabledIfDissent:!0},ccpa:{enabledIfDissent:!0},run:({broker:e,doc:t,getConfig:n,log:i})=>{const r=n("slots.classes.adRequested",["sky_left_top","sky_right_top"]);e.on("request slot",(({pos:e,parentId:n})=>{r.includes(e)&&(i("display label",e),t?.getElementById(n)?.parentNode?.querySelector(".mol-ads-label-container")?.classList.add("ad-requested"))}))}}),(0,qe.fo)("slots.InreadPlayerTop",{ccpa:{enabledIfDissent:!0},disableIfNoAdsServable:!0,gdpr:{enabledIfDissent:!0},run:function({broker:e,log:t,getConfig:n,pageCriteria:i,pageMeta:r}){if("article"!==i.pageType)return void t("Not suitable for PageCriteria.pageType:",i.pageType);const s=n("pos.inread_player_top.paragraphIndex",2),o={insertMethod:t=>{const i="inread_player_top",s="desktop"===r.renderPlatform?vk(i,n):yk(i,n),o={pos:i};t.parentElement.insertBefore(s,t),e.emit("slot mounted",o)},log:t,margin:n("pos.inread_player_top.margin",{top:30,bottom:30}),sourcePlugin:"inreadPlayerTop",targetParagraphIndex:s};t("requesting placement",s),e.register("placement requests",(()=>o))}});const gk=e=>{const t=e("slotDescription.inread_player_top.size",[[300,250]]);return(e=>Array.isArray(e)&&e.every(Array.isArray)&&e.every((e=>2==e.length&&e.every((e=>!isNaN(e))))))(t)?t.reduce(((e,t)=>[Math.max(e[0],t[0]),Math.max(e[1],t[1])]),[0,0]):[300,250]},mk=(e,t,n)=>{const i=document.createElement("div");i.id=e,i.style.width=`${t}px`,i.style.height=`${n}px`;const r=document.createElement("div");return r.classList.add("inread_player_top_container"),r.appendChild(i),[r,i]},yk=(e,t)=>{const[n,i]=gk(t),[r,s]=mk(e,n,i);return s.className=`adHolder mpu molads_${e} watermark`,r.dataset.swipeArticle="false",r.appendChild(s),r},vk=(e,t)=>{const[n,i]=gk(t),[r,s]=mk(e,n,i);s.className=`adHolder molads_${e}`,r.classList.add("watermark"),r.style.width=`${n}px`,r.style.height=`${i}px`;const o=ft();return r.appendChild(o),r.appendChild(s),r};function bk(e){return e.replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>{const[t,n]=e.split("x",2);return[parseInt(t),parseInt(n)]}))}(0,qe.fo)("bidders.appnexusPSP",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[32]},async run({broker:e,getConfig:t,log:n,pageCriteria:i,win:r}){e.register("prebid s2s config",(e=>{const i=function(e){return{allowUnknownBidderCodes:!0,defaultVendor:e("auction.adapter","appnexuspsp"),endpoint:e("auction.endpoint","https://ib.adnxs.com/openrtb2/prebid"),extPrebid:{targeting:{includebidderkeys:!0,includewinners:!0}}}}(t);return n("setting s2s config",i),i}));const s=ci({broker:e,getConfig:t,log:n,pageCriteria:i,win:r}).then((e=>{const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(e("plugins.bidders.appnexus.display.adUnits",{})).filter((t=>{let[n]=t;return!!e(`slotDescription.${n}`)})).map((e=>{let[n,i]=e;return{code:n,bids:(0,q.pj)(i).map((e=>({bidder:"appnexus",params:{keywords:t,placementId:e.split(" ")[0].trim()}}))),mediaTypes:{banner:{sizes:(0,q.pj)(i).flatMap(bk)}}}}))}(t,e);return n({keywords:e,config:i}),i}));e.register("provide prebid adUnits",(async()=>s)),e.register("provide video adUnits",(async(e,n)=>function(e){let{getConfig:t,pos:n,autoplay:i}=e;const r=t("plugins.bidders.appnexus.video.adUnits",{}),s={area:[__webpack_require__.g.adAreaId]},o="object"==typeof r[n]&&r[n][i?"autoplay":"ctp"]?r[n][i?"autoplay":"ctp"]:"string"==typeof r[n]?r[n]:"";if(!o)return;const[a,d]=o.trim().split(/\s+/);return{bids:[{bidder:"appnexus",params:{accountId:a,placementId:d,keywords:s,video:{skipable:!1,playback_methods:i?["auto_play_sound_off"]:["click_to_play"]}}}]}}({getConfig:t,autoplay:n,pos:e})))}}),(0,qe.fo)("bidders.33across.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[58]},run(e){let{broker:t,getConfig:n,log:i}=e;t.register("provide video adUnits",(e=>{const t=n(`plugins.bidders.33across.video.${e}`);if(i({code:e,siteId:t}),!t)return console.warn(`no site id found for pos ${e}`),{};const r={bids:[{bidder:"33across",params:{productId:"instream",siteId:t}}]};return i.info("prioviding ad unit",r),r}))}}),(0,qe.fo)("bidders.kargo.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[972]},run(e){let{broker:t,getConfig:n,log:i}=e;t.register("provide video adUnits",(e=>{const t=n(`plugins.bidders.kargo.video.${e}`);if(i({code:e,placementId:t}),!t)return console.warn(`no placement id found for pos ${e}`),{};const r={bids:[{bidder:"kargo",params:{placementId:t}}]};return i.info("prioviding ad unit",r),r})),t.register("prebid reduce bidderSettings",(e=>(e.kargo||(e.kargo={}),e.kargo.storageAllowed=!0,e)))}}),(0,qe.fo)("bidders.sharethrough.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[80]},run(e){let{broker:t,getConfig:n,log:i}=e;t.register("provide video adUnits",(e=>{const t=n(`plugins.bidders.sharethrough.video.${e}`);if(i({code:e,pkey:t}),!t)return console.warn(`no pkey found for pos ${e}`),{};const r={bids:[{bidder:"sharethrough",params:{pkey:t}}]};return i.info("prioviding ad unit",r),r}))}});const _k="_dm_ads_message\n";function wk(){Tk.call(window),window.__h82AlnkH6D91__("WyJwdWItNjgxNDAzMTY2OTc2MjgwMSIsW251bGwsbnVsbCxudWxsLCJodHRwczovL2Z1bmRpbmdjaG9pY2VzbWVzc2FnZXMuZ29vZ2xlLmNvbS9iL3B1Yi02ODE0MDMxNjY5NzYyODAxIl0sbnVsbCxudWxsLCJodHRwczovL2Z1bmRpbmdjaG9pY2VzbWVzc2FnZXMuZ29vZ2xlLmNvbS9lbC9BR1NLV3hXaWdXejVkalIzVm1ubm9NWnVLV3FFbHY5WUsxbHM0Uy1hRUNXUlJxSEpTcGVGMUVUR0JOSUZPN3hKN0FnQnVIZTFaeHloUUMzX1pDN2duT3JKWnU1U3dnXHUwMDNkXHUwMDNkP3RlXHUwMDNkVE9LRU5fRVhQT1NFRCIsImh0dHBzOi8vZnVuZGluZ2Nob2ljZXNtZXNzYWdlcy5nb29nbGUuY29tL2VsL0FHU0tXeFUxcFh0eENmTFBLU0M4dkZFWDFtMjRMV0xBTWtYWnUyZHBmcXpWR1Q2RjZvdmsxZUUxeEZGQ1p6clNxamlTLWZFUXV4REFYYUJuWEVQd055c3BWNzNxUndcdTAwM2RcdTAwM2Q/YWJcdTAwM2QxXHUwMDI2c2JmXHUwMDNkMSIsImh0dHBzOi8vZnVuZGluZ2Nob2ljZXNtZXNzYWdlcy5nb29nbGUuY29tL2VsL0FHU0tXeFZGRkFMVEsyRW5GbF9nVl90emdSS1d0WUV4Snc3LWpacXVNMTlxeXBSVGhiV2dvSFdxVFZVQXBKNTlDM0ZFOHNMQWNHbndFbWxkRXhWQ01xbV9NemdwdUFcdTAwM2RcdTAwM2Q/YWJcdTAwM2QyXHUwMDI2c2JmXHUwMDNkMSIsImh0dHBzOi8vZnVuZGluZ2Nob2ljZXNtZXNzYWdlcy5nb29nbGUuY29tL2VsL0FHU0tXeFhpdUM1bkthOG41RXdhMlFVbTJuTUJMU0tlZnhIRFVmc0dJZmpDTUhhT3FEY1NrX2p0bEtGMWNwbUVjYUlsOGk1X0ZBR19tOWEwdHpWTXdneUVSZXRrQndcdTAwM2RcdTAwM2Q/c2JmXHUwMDNkMiIsImRpdi1ncHQtYWQiLDIwLDEwMCwiY0hWaUxUWTRNVFF3TXpFMk5qazNOakk0TURFXHUwMDNkIixbbnVsbCxudWxsLG51bGwsImh0dHBzOi8vd3d3LmdzdGF0aWMuY29tLzBlbW4vZi9wL3B1Yi02ODE0MDMxNjY5NzYyODAxLmpzP3VzcXBcdTAwM2RDQWsiXSwiaHR0cHM6Ly9mdW5kaW5nY2hvaWNlc21lc3NhZ2VzLmdvb2dsZS5jb20vZWwvQUdTS1d4VzhYcGJsWldyeG8xejhGYXJONTNVZ3YyOENBZ2dNcWtBZG43U2dPdkl6X1N1c0ltYkQzdkNXU3pzTHFhVWI2bFhRMHdCbExVT3NOaDN4VHZIQ3o3LUZtd1x1MDAzZFx1MDAzZCJd")}function Tk(){var e,t=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},n="function"==typeof Object.create?Object.create:function(e){var t=function(){};return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)e=Object.setPrototypeOf;else{var i;e:{var r={};try{r.__proto__={a:!0},i=r.a;break e}catch(e){}i=!1}e=i?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var s,o=e,a=function(e,t){if(e.prototype=n(t.prototype),e.prototype.constructor=e,o)o(e,t);else for(var i in t)if("prototype"!=i)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,i);r&&Object.defineProperty(e,i,r)}else e[i]=t[i];e.v=t.prototype},d=this||self,l=function(){},c=function(e){return e},u=function(e,t){this.g=t===p?e:""};u.prototype.toString=function(){return this.g+""};var p={},h=function(e){if(void 0===s){var t=null,n=d.trustedTypes;if(n&&n.createPolicy){try{t=n.createPolicy("goog#html",{createHTML:c,createScript:c,createScriptURL:c})}catch(e){d.console&&d.console.error(e.message)}s=t}else s=t}return e=(t=s)?t.createScriptURL(e):e,new u(e,p)},f=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)},g={},m=null,y="function"==typeof Uint8Array;function v(e,t,n){return"object"==typeof e?y&&!Array.isArray(e)&&e instanceof Uint8Array?n(e):b(e,t,n):t(e)}function b(e,t,n){if(Array.isArray(e)){for(var i=Array(e.length),r=0;r<e.length;r++){var s=e[r];null!=s&&(i[r]=v(s,t,n))}return Array.isArray(e)&&e.s&&T(i),i}for(r in i={},e)Object.prototype.hasOwnProperty.call(e,r)&&null!=(s=e[r])&&(i[r]=v(s,t,n));return i}var _,w={s:{value:!0,configurable:!0}},T=function(e){return Array.isArray(e)&&!Object.isFrozen(e)&&Object.defineProperties(e,w),e},I=function(e,t,n){var i=_;if(_=null,e||(e=i),i=this.constructor.u,e||(e=i?[i]:[]),this.j=i?0:-1,this.h=null,this.g=e,e=(i=this.g.length)-1,!i||null===(i=this.g[e])||"object"!=typeof i||Array.isArray(i)||y&&i instanceof Uint8Array?void 0!==t&&-1<t?(this.l=Math.max(t,e+1-this.j),this.i=null):this.l=Number.MAX_VALUE:(this.l=e-this.j,this.i=i),n)for(t=0;t<n.length;t++)(e=n[t])<this.l?(e+=this.j,(i=this.g[e])?T(i):this.g[e]=S):(i=this.l+this.j,this.g[i]||(this.i=this.g[i]={}),(i=this.i[e])?T(i):this.i[e]=S)},S=Object.freeze(T([])),k=function(e,t){if(-1===t)return null;if(t<e.l){t+=e.j;var n=e.g[t];return n!==S?n:e.g[t]=T([])}return e.i?(n=e.i[t])!==S?n:e.i[t]=T([]):void 0},C=function(e,t){var n=W;if(-1===t)return null;if(e.h||(e.h={}),!e.h[t]){var i=k(e,t);i&&(e.h[t]=new n(i))}return e.h[t]};I.prototype.toJSON=function(){return function(e){return b(e,(function(e){return"number"==typeof e?isFinite(e)?e:String(e):e}),(function(e){var t;if(void 0===t&&(t=0),!m){m={};for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),i=["+/=","+/","-_=","-_.","-_"],r=0;5>r;r++){var s=n.concat(i[r].split(""));g[r]=s;for(var o=0;o<s.length;o++){var a=s[o];void 0===m[a]&&(m[a]=o)}}}for(t=g[t],n=Array(Math.floor(e.length/3)),i=t[64]||"",r=s=0;s<e.length-2;s+=3){var d=e[s],l=e[s+1];a=e[s+2],o=t[d>>2],d=t[(3&d)<<4|l>>4],l=t[(15&l)<<2|a>>6],a=t[63&a],n[r++]=""+o+d+l+a}switch(o=0,a=i,e.length-s){case 2:a=t[(15&(o=e[s+1]))<<2]||i;case 1:e=e[s],n[r]=""+t[e>>2]+t[(3&e)<<4|o>>4]+a+i}return n.join("")}))}(E(this,!1))};var E=function(e,t){if(e.h)for(var n in e.h)if(Object.prototype.hasOwnProperty.call(e.h,n)){var i=e.h[n];if(Array.isArray(i))for(var r=0;r<i.length;r++)i[r]&&E(i[r],t);else i&&E(i,t)}return e.g},A=function(e,t){return _=t=t?JSON.parse(t):null,e=new e(t),_=null,e};I.prototype.toString=function(){return E(this,!1).toString()};var P=function(e){I.call(this,e)};a(P,I);var x=function(e,t){return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)},D=function(e){this.g=e||d.document||document};D.prototype.appendChild=function(e,t){e.appendChild(t)};var O=function(e,t,n,i,r,s){try{var o=e.g,a=x(e.g,"SCRIPT");a.async=!0,a.src=t instanceof u&&t.constructor===u?t.g:"type_error:TrustedResourceUrl",function(e){var t,n=(e.ownerDocument&&e.ownerDocument.defaultView||window).document,i=null===(t=n.querySelector)||void 0===t?void 0:t.call(n,"script[nonce]");(t=i&&(i.nonce||i.getAttribute("nonce"))||"")&&e.setAttribute("nonce",t)}(a),o.head.appendChild(a),a.addEventListener("load",(function(){r(),i&&o.head.removeChild(a)})),a.addEventListener("error",(function(){0<n?O(e,t,n-1,i,r,s):(i&&o.head.removeChild(a),s())}))}catch(e){s()}},R=d.atob("aHR0cHM6Ly93d3cuZ3N0YXRpYy5jb20vaW1hZ2VzL2ljb25zL21hdGVyaWFsL3N5c3RlbS8xeC93YXJuaW5nX2FtYmVyXzI0ZHAucG5n"),N=d.atob("WW91IGFyZSBzZWVpbmcgdGhpcyBtZXNzYWdlIGJlY2F1c2UgYWQgb3Igc2NyaXB0IGJsb2NraW5nIHNvZnR3YXJlIGlzIGludGVyZmVyaW5nIHdpdGggdGhpcyBwYWdlLg=="),M=d.atob("RGlzYWJsZSBhbnkgYWQgb3Igc2NyaXB0IGJsb2NraW5nIHNvZnR3YXJlLCB0aGVuIHJlbG9hZCB0aGlzIHBhZ2Uu"),L=function(e,t,n){this.h=e,this.j=new D(this.h),this.g=null,this.i=[],this.l=!1,this.o=t,this.m=n},U=function(e){if(e.h.body&&!e.l){var t=function(){j(e),d.setTimeout((function(){return z(e,3)}),50)};O(e.j,e.o,2,!0,(function(){d[e.m]||t()}),t),e.l=!0}},j=function(e){for(var t=q(1,5),n=0;n<t;n++){var i=V(e);e.h.body.appendChild(i),e.i.push(i)}(t=V(e)).style.bottom="0",t.style.left="0",t.style.position="fixed",t.style.width=q(100,110).toString()+"%",t.style.zIndex=q(2147483544,2147483644).toString(),t.style["background-color"]=F(249,259,242,252,219,229),t.style["box-shadow"]="0 0 12px #888",t.style.color=F(0,10,0,10,0,10),t.style.display="flex",t.style["justify-content"]="center",t.style["font-family"]="Roboto, Arial",(n=V(e)).style.width=q(80,85).toString()+"%",n.style.maxWidth=q(750,775).toString()+"px",n.style.margin="24px",n.style.display="flex",n.style["align-items"]="flex-start",n.style["justify-content"]="center",(i=x(e.j.g,"IMG")).className=f(),i.src=R,i.style.height="24px",i.style.width="24px",i.style["padding-right"]="16px";var r=V(e),s=V(e);s.style["font-weight"]="bold",s.textContent=N;var o=V(e);for(o.textContent=M,B(e,r,s),B(e,r,o),B(e,n,i),B(e,n,r),B(e,t,n),e.g=t,e.h.body.appendChild(e.g),t=q(1,5),n=0;n<t;n++)i=V(e),e.h.body.appendChild(i),e.i.push(i)},B=function(e,t,n){for(var i=q(1,5),r=0;r<i;r++){var s=V(e);t.appendChild(s)}for(t.appendChild(n),n=q(1,5),i=0;i<n;i++)r=V(e),t.appendChild(r)},q=function(e,t){return Math.floor(e+Math.random()*(t-e))},F=function(e,t,n,i,r,s){return"rgb("+q(Math.max(e,0),Math.min(t,255)).toString()+","+q(Math.max(n,0),Math.min(i,255)).toString()+","+q(Math.max(r,0),Math.min(s,255)).toString()+")"},V=function(e){return(e=x(e.j.g,"DIV")).className=f(),e},z=function(e,t){0>=t||null!=e.g&&0!=e.g.offsetHeight&&0!=e.g.offsetWidth||($(e),j(e),d.setTimeout((function(){return z(e,t-1)}),50))},$=function(e){var n=e.i,i="undefined"!=typeof Symbol&&Symbol.iterator&&n[Symbol.iterator];for(n=i?i.call(n):{next:t(n)},i=n.next();!i.done;i=n.next())(i=i.value)&&i.parentNode&&i.parentNode.removeChild(i);e.i=[],(n=e.g)&&n.parentNode&&n.parentNode.removeChild(n),e.g=null},H=function(e){var t=document.createElement("div");return t.className=e,t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.left="-10000px",t.style.top="-10000px",t.style.zIndex="-10000",t},W=function(e){I.call(this,e)};a(W,I);var Z=function(e){I.call(this,e)};a(Z,I);var G=function(e,t){this.l=e,this.m=new D(e.document),this.g=t,this.i=k(this.g,1),t=C(this.g,2),this.o=h(k(t,4)||""),this.h=!1,t=C(this.g,13),t=h(k(t,4)||""),this.j=new L(e.document,t,k(this.g,12))};G.prototype.start=function(){X(this)};var X=function(e){J(e),O(e.m,e.o,3,!1,(function(){e:{var t=e.i,n=d.btoa(t);if(n=d[n]){try{var i=A(P,d.atob(n))}catch(e){t=!1;break e}t=t===k(i,1)}else t=!1}t?K(e,k(e.g,14)):(K(e,k(e.g,8)),U(e.j))}),(function(){!function(e,t,n,i,r){var s=H(n),o=function(n){document.body?(document.body.appendChild(s),d.setTimeout((function(){s?(0!==s.offsetHeight&&0!==s.offsetWidth?t():e(),s.parentNode&&s.parentNode.removeChild(s)):e()}),i)):0<n?d.setTimeout((function(){o(n-1)}),r):t()};o(3)}((function(){K(e,k(e.g,7)),U(e.j)}),(function(){return K(e,k(e.g,6))}),k(e.g,9),k(e.g,10),k(e.g,11))}))},K=function(e,t){e.h||(e.h=!0,(e=new e.l.XMLHttpRequest).open("GET",t,!0),e.send())},J=function(e){var t=d.btoa(e.i);e.l[t]&&K(e,k(e.g,5))};!function(e,t){d[e]=function(n){for(var i=[],r=0;r<arguments.length;++r)i[r-0]=arguments[r];d[e]=l,t.apply(null,i)}}("__h82AlnkH6D91__",(function(e){"function"==typeof window.atob&&new G(window,A(Z,window.atob(e))).start()}))}function Ik(){if(!window.frames.googlefcPresent)if(document.body){const e=document.createElement("iframe");e.style="width: 0; height: 0; border: none; z-index: -1000; left: -1000px; top: -1000px;",e.style.display="none",e.name="googlefcPresent",document.body.appendChild(e)}else setTimeout(Ik,0)}function Sk(e){__webpack_require__.g.RTA.tedEvent("page_event",{action:"increment",name:e})}function kk(e,t){__webpack_require__.g.RTA.tedEvent("page_event",{action:"set",name:e,value:t})}(0,qe.fo)("exposeUserData",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:i}=e;i("running");const r=n("exposeUserData.origins",[""]);let s={};t.on("external user ids",(e=>{s=T()(s,e)})),window.addEventListener("message",(e=>{if(r.includes(e.origin)&&e.source)try{if("string"!=typeof e.data||!e.data.startsWith(_k))return void i(`unsupported message: ${"string"==typeof e.data?e.data:JSON.stringify(e.data,null,2)}, bailing`);const t=JSON.parse(e.data.split(_k)[1]);if("getExternalIds"!==t.scope)return void i(`unsupported scope: ${null==e?void 0:e.data.scope}, bailing`);i("request received"),e.source.postMessage(`${_k}${JSON.stringify({schemaVersion:1,responseTo:t.messageId,data:{payload:s}})}`,{targetOrigin:e.origin})}catch(e){i.error("error handling request",e)}}),!1)}}),(0,qe.fo)("headerbidding.intentiq",{gdpr:!1,run:function(e){var t,n;let{broker:i,log:r,getConfig:s,win:o}=e;const a=s("intentiq.manualWinReportEnabled",!0),d=null!==(t=o.pbjs)&&void 0!==t?t:o.pbjs={};null!==(n=d.que)&&void 0!==n||(d.que=[]);let l=!1;i.once("prebid loaded",(async()=>{const e=__webpack_require__(6017);r("loading intentIQ");const t=e.loadIIQ();r("script loaded, initialising IntentIqObject");const n=new t({partner:1721969090,pbjs:d,callback:()=>{l||(r("IntentIqObject initialised; resolving"),l=!0)},timeoutInMillis:350,manualWinReportEnabled:a,ABTestingConfigurationSource:"percentage",abPercentage:95});let s="N",o={};try{({currentTestGroup:s="U",groupNames:o={}}=n.intentIqConfig.abTesting)}catch(e){}const c=Object.entries(o).reduce(((e,t)=>{let[n,i]=t;return e[i]=n,e}),{})[s];i.register("call for page analytics",(()=>({iiqtg:c}))),i.emit("set page level targeting",{intent_iq_group:s}),r("intentIqConfig.abTesting.currentTestGroup",s),r("intentIqConfig.abTesting.currentPercentage",n.intentIqConfig.abTesting.currentPercentage),r("intentIqConfig.abTesting.groupNames",n.intentIqConfig.abTesting.groupNames),r("scenario:",c),d.que.push((()=>function(e,t,n){t.onEvent("bidWon",(t=>{const{auctionId:i,bidderCode:r,cpm:s,currency:o,originalCpm:a,originalCurrency:d,status:l,adUnitCode:c}=t;n("reporting prebid bidWon:",r,s,c),e.reportExternalWin({biddingPlatformId:1,partnerAuctionId:i,bidderCode:r,prebidAuctionId:i,cpm:s,currency:o,originalCpm:a,originalCurrency:d,status:l,placementId:c})}))}(n,d,r)))}))}}),(0,qe.fo)("googleAdSense",{disableIfNoAdsServable:!0,run:function(e){let t,{broker:n,log:i}=e;n.on("slot defined",(e=>{const{slotTypes:r,pos:s,id:o}=e;r.includes("googleAdSense")?(t=t||(i("loading adSense for",s,o),n.invoke("import script","//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js")),t.then((()=>{i("requesting ad",s,o),__webpack_require__.g.adsbygoogle.push({})}))):i("slot type not supported, bail",r)}))},vendorIds:{gdpr:[755]},purposeIds:{gdpr:"N/A"}}),(0,qe.fo)("amazonNative",{disableIfNoAdsServable:!0,run:function(e){let{broker:t,getConfig:n,log:i}=e;t.on("slot defined",(e=>{let{slotTypes:r,id:s}=e;if(!r.includes("amazon"))return void i("slot type not supported, bailing",r);if(!document.getElementById(s))return void i("unable to fine element id:",s,", bailing");const o=`${n("pos.under-article.amazon.url","//z-na.amazon-adsystem.com/widgets/onejs")}?MarketPlace=US&adInstanceId=${n("pos.under-article.amazon.id","df745670-1d9e-4f8c-890c-b2e54a92586a")}`;i("loading scriptUrl",o),t.invoke("import script",o).then((()=>{i("script loaded")})).catch((e=>{i("error loading",o),i("error",e)}))}))},vendorIds:{gdpr:[793]},purposeIds:{gdpr:"N/A"}}),(0,qe.fo)("funding-choices",{disableIfNoAdsServable:!0,purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:"N/A"},async run(e){let{broker:t,getConfig:n,doc:i,localStorage:r,log:s,pageCriteria:o,win:a}=e;await async function(){if(a.__uspapi&&en()&&(await Xt("ready"),!rn()))return s("waiting for CMP banner to be acknowledged"),new Promise((e=>{const t=(0,as.Oo)(a,"message",(n=>{let{data:i}=n;"string"==typeof i&&i.startsWith("__cmp_ui_tracking\n")&&"overlay accepted"===i.substring(18)&&(s("CMP banner has been acknowledged"),t(),e())}))}))}();const d="true"===r.getItem("dmg.ads.abe.prevFcVisible");r.removeItem("dmg.ads.abe.prevFcVisible"),t.register("call for page-unload",(()=>({fcodppv:d}))),a.googlefc=a.googlefc||{},a.googlefc.ccpa=a.googlefc.ccpa||{},a.googlefc.callbackQueue=a.googlefc.callbackQueue||[];const l=function(){if(!n("plugins.fundingChoices.overlayMonitor"))return()=>null;let e=!1;const o=new MutationObserver((n=>{for(const{addedNodes:i}of n)for(let n=0;n<i.length;n++){const a=i[n];if(a instanceof HTMLElement&&a.classList.contains("fc-ab-root")){const n=a.querySelector(".fc-dialog-container");n instanceof HTMLElement&&null!==n.offsetParent&&(o.disconnect(),e=!0,r.setItem("dmg.ads.abe.prevFcVisible","true"),c="abd",t.emit("set page level targeting",{exabd:c}),s("overlay was displayed"))}}}));return(0,Se.onBodyAvailable)((()=>{o.observe(i.body,{childList:!0})}),i),googlefc.callbackQueue.push({async AD_BLOCK_DATA_READY(){await(0,D.Vs)(2e3),s("disconnecting overlay monitor"),o.disconnect()}}),()=>e}();let c;t.register("call for page analytics",(()=>{if(void 0!==c)return{exabd:c}})),googlefc.callbackQueue.push({AD_BLOCK_DATA_READY(){const e=googlefc.getAdBlockerStatus(),n=googlefc.getAllowAdsStatus(),i=function(e){const t=function(e){let t={had:!1,state:"unknown"};try{e&&(t=JSON.parse(e))}catch(e){}const n=new Ns.Z(((e,t)=>{switch(e.type){case"block":return{...t,had:!0,state:"converted"===t.state||"reverted"===t.state?"reverted":"unconverted"};case"unblock":return{...t,state:t.had?"converted":"none"};case"fail":return{...t,state:"unknown"};default:return t}}),t,s.extend("store"));return n.init(),n}(r.getItem("dmg.ads.abe.gfc"));return!function(e){return e===googlefc.AdBlockerStatusEnum.EXTENSION_LEVEL_AD_BLOCKER||e===googlefc.AdBlockerStatusEnum.NETWORK_LEVEL_AD_BLOCKER}(e.adBlockerStatus)?e.allowAdsStatus===googlefc.AllowAdsStatusEnum.UNKNOWN?t.dispatch({type:"fail"}):t.dispatch({type:"unblock"}):t.dispatch({type:"block"}),r.setItem("dmg.ads.abe.gfc",JSON.stringify(t.state)),t.state.state}({adBlockerStatus:e,allowAdsStatus:n});s({adBlockerStatus:e,allowAdsStatus:n,convertedStatus:i}),void 0===c&&n!==googlefc.AllowAdsStatusEnum.UNKNOWN&&"none"!==i&&"unknown"!==i&&"unconverted"!==i&&(c="converted"===i,t.emit("set page level targeting",{exabd:c})),t.register("call for page analytics",(()=>{const t=l(),r={fcabs:e,fcaas:n,fcabcs:i};return null===t?r:{...r,fcabod:t}}))}}),await(0,Se.untilBodyAvailable)(i),wk(),"US"===(null==o?void 0:o.geo)?await async function(){const e=document.createElement("script");e.src="https://fundingchoicesmessages.google.com/i/pub-6814031669762801?ers=1",e.setAttribute("nonce","ej8mtvjc_wHrxrHc5NHUNw"),await(0,Se.untilBodyAvailable)(),document.body.appendChild(e),Ik()}():await async function(){const e=document.createElement("script");e.src="https://fundingchoicesmessages.google.com/i/pub-6274168003790870?ers=1",e.setAttribute("nonce","Ub2QTPjvEhLWe-kdSZr-4Q"),await(0,Se.untilBodyAvailable)(),document.body.appendChild(e),Ik()}()}}),(0,qe.fo)("widgets",{run:function(e){var t;let{broker:n,getConfig:i,log:r,win:s,DM:o}=e;r("running");const a=i("plugins.widgets.loadEarly",!1),d=i("plugins.widgets.detailedTracking",!0),l=i("widgetsScript","https://widgets.outbrain.com/outbrain.js");let c={};const u={};kk("outbrain","scriptLoading"),function(){s.OBREvents=s.OBREvents||[],s.OBREvents.push({name:"all",callback:function(e){const n=t[e.name];if(n)try{n(e)}catch(t){r.warn("error while running callback:",e.name),r.warn(t)}else r.warn("no event handler for:",e.name)},widgetId:"all",feedCards:1});let e=!1;const t={viewability:t=>{if(n.emit("outbrain visible"),!e){null!=u&&u.obMissedWidget&&delete u.obMissedWidget;const{feedIndex:n,servedParentWidgetId:i,...r}=t;m("containerVisible",{...r,servedWidgetId:i}),e=!0}m("visible",t),Sk("outbrainView")},click:e=>{n.emit("outbrain click"),m("click",e),Sk("outbrainClick")},norecs:e=>{n.emit("outbrain nocontent"),m("norecs",e),Sk("outbrainNoContent")},issue:e=>{n.emit("outbrain issue"),m("issue",e),Sk("outbrainIssue")},rendered:e=>{if("feedIndex"in e)n.emit("outbrain render"),m("render",e),Sk("outbrainRender");else{if((0,I.xb)(c)){const e=document.querySelector(".ob-smartfeed-wrapper"),t=e&&(0,b.r7)(e).top;r("obWrapperTop",t),c={numImages:document.querySelectorAll(".image-wrap").length,...t?(0,O._b)("outbrainTopOffsetP20000px",t):{}}}u.obMissedWidget=e.servedWidgetId,n.emit("outbrain container render"),m("containerRender",e),kk("outbrain","rendered")}}}}(),i("plugins.widgets.customViewabilityTracking")&&function(){var e;let t,i=!1;const o={},a=r.extend("viewability");null===(e=s.OBREvents)||void 0===e||e.push({name:"rendered",widgetId:"all",feedCards:1,callback:e=>{a("rendered",e),i?a.debug("event already sent"):e.parentWidgetId?e.element&&(a("tracking viewability for widget",e),o[e.widgetId]=n.once("ad viewable",e.widgetId,(()=>{i||(a(`viewed ${e.parentWidgetId}.${e.widgetId}`),i=!0,function(){for(const[e,t]of Object.entries(o))t.cancel(),n.emit("untrack viewability",e)}(),m("dmgContainerVisible",t))})),n.emit("track viewability",e.widgetId,e.element)):(a.debug("container render"),t=e)}})}();const p=null==o||null===(t=o.molFeTracking)||void 0===t?void 0:t.pageEvents;if(null!=p&&p.ARTICLE_TRUNCATION_EXPAND){const{unsubscribe:e}=(null==p?void 0:p.listen(p.ARTICLE_TRUNCATION_EXPAND,(()=>{e(),r("ARTICLE_TRUNCATION_EXPAND clicked"),n.emit("send event to bidmax",{type:"custom",payload:{module:"outbrain",viewMoreClicked:!0,...c}}),n.register("call for page analytics",(()=>({viewMoreClicked:!0}))),u.viewMoreClicked=!0})))||{unsubscribe:()=>{}}}let h=!1;const f={};function g(){if(!h){h=!0,r("loading",l);try{n.invoke("import script",l),m("scriptLoaded"),kk("outbrain","scriptLoaded")}catch(e){r.warn("unable to load script",e),n.emit("outbrain failed to load"),m("scriptFailed"),kk("outbrain","scriptFailed")}}}function m(e,t){var i;if(!d)return;const{abtest:s,version:o,servedWidgetId:a,feedIndex:l}=t||{},u=null==t||null===(i=t.data)||void 0===i?void 0:i.message,p=!f[e];f[e]=!0,r("sending event",e,{widget:a,feedIndex:l,message:u}),n.emit("send event to bidmax",{type:"custom",payload:{module:"outbrain",widget:a,type:e,abtest:s,outbrainVersion:o,message:u,first:p,feedIndex:l,...c}})}a?(r("loading early"),g()):(r("delay loading after slot-defined"),n.on("slot defined",(function(e){let{pos:t,slotTypes:n}=e;r("slot defined",t,n),n.includes("widgets")&&(r(`loading slot "${t}"`),g())}))),n.register("call for page-unload",(()=>u))},gdpr:{enabledIfDissent:!0},ccpa:{enabledIfDissent:!0},initTimeout:O.RD});const Ck={i8:"1.0.2"};(0,qe.fo)("capabilities.3rdPartyCookies",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},disableIfNoAdsServable:!0,run(e){let{broker:t,getConfig:n,log:i,win:r}=e;const s=function(){let{iframeSrc:e=`https://cmp.dmgmediaprivacy.co.uk/3rd-party-cookie-compatibility/${Ck.i8}/iframe.html`,win:t=window}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(((n,i)=>{const r=t.document;t.addEventListener("message",(function i(r){e.includes(r.origin)&&"object"==typeof r.data&&null!==r.data&&"thirdPartyCookies"in r.data&&(t.removeEventListener("message",i),s.remove(),n(!!r.data.thirdPartyCookies))}));const s=r.createElement("iframe");s.width="1",s.height="1",s.style.position="fixed",s.style.left="0",s.style.bottom="-1px",s.style.border="none",s.src=e,s.addEventListener("error",i),r.body.appendChild(s)}))}({iframeSrc:n("capabilities.cookies.iframeSrc"),win:r}).then((e=>({cookies:e.toString()})));s.then(i),t.emit("set page level targeting",s),t.register("call for page analytics",(()=>s))}}),(0,qe.fo)("nonRegisteredVendors",{disableIfNoAdsServable:!0,run:async function(e){let{broker:t,log:n}=e;t.on("TCData",(e=>{n("TCData received",e),__webpack_require__.g.__tcfapi("getNonRegisteredVendors",2,((i,r)=>{var s,o;if(!r)return void n("no response from getNonRegisteredVendors");const a=Object.keys(i);if(n("nonRegisteredVendorsIds",a),null!==(s=e.nrvString)&&void 0!==s&&null!==(o=s.startsWith)&&void 0!==o&&o.call(s,"1~")){const i=(".",""===(d=e.nrvString.slice(2))?[]:d.split(".")),r=(0,q.zu)(a,i);r.length?(n("setting unconsenting targeting",r),t.emit("set page level targeting",{unconsentednrv:r})):n("user has consented to all NRVs")}var d}))}))},gdpr:{enabledIfDissent:!0}}),(0,qe.fo)("userIds.sync",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:i,win:r}=e;const s=n("plugins.user.sync.backend.url","https://idsync.anm.co.uk/v1/sync"),o=n("plugins.user.sync.backend.invalidStateURL","https://idsync.anm.co.uk/v1/invalidState"),a=n("plugins.user.sync.backend.debounceTime",1e3),d=n("plugins.user.sync.backend.lockTimeout",15e3),l=n("plugins.user.sync.backend.retryBackoffTime",1e4);!function(){try{const e=localStorage.getItem("mol.ads.user");if(!e)return;i("migrating old data:",e);const t=JSON.parse(e);p("inSyncState",(()=>t.references))}catch(e){i.warn("error migrating data",e)}localStorage.removeItem("mol.ads.user")}();const c=(0,S.Ds)((async()=>{if(f("lock",0)+d>Date.now())return i("sync is locked, skipping"),c();var e,t,n;e="lock",t=Date.now(),i("setStateValue",e,t),p(e,(()=>t));try{const{inSyncState:e,queue:t}=function(){let{inSyncState:e={},processingQueue:t=[],incomingQueue:n=[]}=h();return t=[...t,...n].filter((t=>{var n;let{userIdPartner:i,id:r}=t;return(null===(n=e[i])||void 0===n?void 0:n.id)!==r})),u((()=>({processingQueue:t,incomingQueue:void 0}))),{inSyncState:e,queue:t}}();if(!t.length)return void i("Nothing in the queue, bailing");const a=function(e,t){return t.reduce(((e,t)=>{let{userIdPartner:n,...i}=t;return e[n]=i,e}),e||{})}(e,t);if(!function(e){return e&&"permutive"in e}(a))return void i("Dont have permutive yet, bailing");try{const e=await(n={ids:a},r.fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}));if(e.status>=500)throw new Error(`Server error (${e.status}) "${e.statusText}"`);if(e.status>=400)return i.warn("Invalid user data, sending to invalid endpoint",a),await function(e){return r.fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}({body:{state:a,responseStatus:e.status,responseStatusText:e.statusText,responseText:await e.text()}}),void g("processingQueue")}catch(e){return i("rescheduling dispatch in",l,"ms coz fetch failed",e),void setTimeout(c,l)}i("synced",t.length,"ids"),function(e){u((()=>({inSyncState:e,processingQueue:void 0})))}(a)}finally{g("lock")}f("incomingQueue")&&c()}),a);function u(e){const t=h();localStorage.setItem(Ek,JSON.stringify({...t,...e(t)}))}function p(e,t){u((n=>{const r=t(n[e]);return i("updateStateValue",e,r),n[e]=r,n}))}function h(){return JSON.parse(localStorage.getItem(Ek)||"{}")}function f(e,t){return h()[e]||t}function g(e){i("deleteStateValue",e),u((t=>(t[e]=void 0,t)))}t.on("sync userId",((e,t,n)=>{var i;i={createdAt:(new Date).toISOString(),userIdPartner:e,id:t,source:n},p("incomingQueue",(e=>[...e||[],i])),c()}))}});const Ek="mol.ads.userids.sync";(0,qe.fo)("userIds.thirdPartyUserData",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:i}=e;i("starting"),function(){const e=n("plugins.user.sync.thirdPartyUserData.supportedOrigins",["https://localhost:8124"]);window.addEventListener("message",(n=>{if("string"==typeof n.data&&n.data.startsWith(Ak))if(e.includes(n.origin)&&n.source)try{const e=function(e){return JSON.parse(e.data.split(Ak)[1])}(n);if(!function(e){return"postUserData"===e.scope}(e))return void i("unsupported scope, bailing");t.emit("sync userId","email",e.data,n.origin)}catch(e){i.error("error handling request",e)}else i("bailing cos origin not supported:",{supportedOrigins:e,origin:n.origin})}),!1)}(),t.on("api message","postUserData",(e=>{let{email:n,source:i}=e;t.emit("sync userId","email",n,i)}))}});const Ak="_dm_ads_message\n";(0,qe.fo)("userIds.registration",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,DM:n}=e;null!=n&&n.userId&&t.emit("sync userId","registration",n.userId,location.hostname)}});const Pk=/(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))/,xk=/(\b25[0-5]|\b2[0-4][0-9]|\b[01]?[0-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}/;function Dk(e){const t=[],n=e.split(".");let i;for(i=0;i<n.length;i+=2)t.push(parseInt(n[i],10).toString(16).padStart(2,"0")+parseInt(n[i+1],10).toString(16).padStart(2,"0"));return"::"+t.join(":")}function Ok(e){const t=function(e){const t=new Array(8).fill(0);if("::"===e)return t;const n=e.split(":"),i=Math.min(n.length,8);for(let e=0,r=0;e<i;e++)e&&""===n[e]?r=9-i+e:(t[r]=parseInt("0x0"+n[e]),r++);return t}(e);return(t[6]>>8)+"."+(255&t[6])+"."+(t[7]>>8)+"."+(255&t[7])}function Rk(e){switch(e.getLinkType()){case 0:return"unlinked";case 1:return"probabilistic";case 2:return"deterministic";default:return"uknown"}}(0,qe.fo)("trackers.id5v2",{purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:[131]},run(e){let{broker:t,getConfig:n,log:i,win:r}=e;const s=n("trackers.id5.partnerId");if(!s)throw new Error("Missing adverts.config.trackers.id5.partnerId");const o=function(){var e;const t=null===(e=r.PageCriteria)||void 0===e?void 0:e.clientIP;if(!t)throw new Error("Cannot find user IPv4 address");const[n,i]=(s=t,xk.test(s)?[t,Dk(t)]:function(e){return Pk.test(e)}(t)?[Ok(t),t]:[]);var s;if(!n)throw new Error("Cannot find user IPv4 address");let o=`10=${encodeURIComponent(n)}&12=${encodeURIComponent(r.navigator.userAgent)}`;return i&&(o+=`&11=${encodeURIComponent(i)}`),o}(),a=async function(){i("Loading ID5");const e=await t.invoke("load script","https://cdn.id5-sync.com/api/1.0/id5-api.js","ID5");i("Requesting id5");const n=e.init({partnerId:s,pd:r.btoa(o)});return new Promise((e=>{n.onAvailable(e)}))}(),d=a.then((e=>{const n=e.getUserId();return t.emit("sync userId","id5",n,location.hostname),{id5:n}}));t.emit("set page level targeting",d),t.register("call for page analytics",(()=>d)),a.then((function(e){i({fromCache:e.isFromCache(),linkType:Rk(e),userId:e.getUserId()})})),t.register("provide prebid config",(()=>({userSyncConfig:{userIds:[{name:"id5id",params:{partner:s,pd:o},storage:{type:"html5",name:"id5id",expires:n("trackers.id5.expires",395),refreshInSeconds:n("trackers.id5.refresh",28800)}}]}})))}});var Nk=__webpack_require__(6084),Mk=__webpack_require__.n(Nk);function Lk(e,t,n){Uk(e,t),t.set(e,n)}function Uk(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function jk(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,qk(e,t,"get"))}function Bk(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,qk(e,t,"set"),n),n}function qk(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Fk=new WeakMap,Vk=new WeakMap,zk=new WeakMap,$k=new WeakMap,Hk=new WeakMap,Wk=new WeakMap,Zk=new WeakMap,Gk=new WeakSet;class Xk{constructor(e){let{baseURL:t,doc:n,worker:i,log:r,win:s}=e;!function(e,t){Uk(e,t),t.add(e)}(this,Gk),Lk(this,Fk,{writable:!0,value:void 0}),Lk(this,Vk,{writable:!0,value:void 0}),Lk(this,zk,{writable:!0,value:void 0}),Lk(this,$k,{writable:!0,value:void 0}),Lk(this,Hk,{writable:!0,value:void 0}),Lk(this,Wk,{writable:!0,value:void 0}),Lk(this,Zk,{writable:!0,value:e=>{let{data:t}=e;const{id:n,match:i}=t;if(!n)return;jk(this,zk).call(this,"match check result:",n,i);const r=jk(this,Vk).get(n);r&&i&&function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,Gk,Kk).call(this,r),jk(this,Vk).delete(n)}}),Bk(this,Fk,i),jk(this,Fk).onmessage=jk(this,Zk),Bk(this,zk,r),Bk(this,Vk,new Map),Bk(this,$k,n),Bk(this,Hk,t),Bk(this,Wk,s)}queueHrefReplacement(e){const t=(0,Qs.Z)();jk(this,Vk).set(t,e),jk(this,zk).call(this,"requesting match check",t),jk(this,Fk).postMessage({id:t,cmd:"testMatch",href:e.href})}}function Kk(e){var t;jk(this,zk).call(this,"matched",e,`replacing ${e.href}`),e.dataset.originalHref=e.href;let n=`${jk(this,Hk)}?q=${encodeURIComponent(e.dataset.originalHref)}&p=${encodeURIComponent((top||jk(this,Wk)).location.href)}&event_type=click`;jk(this,$k).referrer&&(n+=`&ref=${encodeURIComponent(jk(this,$k).referrer)}`),null!==(t=jk(this,Wk).PageCriteria)&&void 0!==t&&t.articleId&&(n+=`&articleid=${jk(this,Wk).PageCriteria.articleId}`),e.href=n}const Jk=["https://www.dailymail.co.uk","https://creative.dailymail.co.uk","https://discountcode.dailymail.co.uk","https://mailpictures.newsprints.co.uk/","https://www.mailonsunday.co.uk/","https://www.thisismoney.co.uk/","https://www.metro.co.uk/","https://www.jobsite.co.uk/","https://www.mailtravel.co.uk","https://www.zoopla.co.uk/","https://www.primelocation.com/","https://www.dmgmedia.co.uk/","https://www.mailmetromedia.co.uk/","https://paid.outbrain.com/","https://www.outbrain.com/","https://www.mymail.co.uk","https://games.dailymail.co.uk","https://shopping.dailymail.co.uk","http://www.mailtravel.co.uk","https://www.mailadvertising.co.uk","http://blakesmalltalkblog.dailymail.co.uk","https://www.mailshop.co.uk","mailto","https://twitter.com","https://share.flipboard","fb-messenger","https://m.facebook.com/sharer"];function Yk(e){return!!e.href&&!Jk.some((t=>e.href.startsWith(t)))}function Qk(e){return Array.from(e.querySelectorAll("a")).filter(Yk)}function eC(e){return e instanceof PerformanceResourceTiming}(0,qe.fo)("trackonomics",{vendorIds:{gdpr:[365]},purposeIds:{gdpr:[1]},run:async function(e){let{broker:t,doc:n,getConfig:i,log:r,pageCriteria:s,pageMeta:o,win:a}=e;const d=i("plugins.trackonomics.baseURL","https://clicks.trx-hub.com/xid/mailonline_8bcce_mailonline"),l=i("plugins.trackonomics.patternURL","https://iad.anm.co.uk/tnomics/trackonomics.pattern.txt"),c=t.until("dom ready"),u=i("plugins.trackonomics.supportedTopics",["Mail Best","Mail Best US"]);if(!await Nc({getConfig:i,broker:t,pageCriteria:s,inlineModuleIdsString:__webpack_require__.g.inlineModules})&&!((e,t)=>e.some((e=>{var n;return null==t||null===(n=t.topics)||void 0===n?void 0:n.includes(e)})))(u,o))return void r("fff not found in page, and no supported topics bailing");if(!l)return void r.error("Misconfigured pattern URL");const p=await async function(e){const t=await fetch(e);return(await t.text()).trim()}(l);if(!p)return void r.error("no pattern configured for trackonomics");r.extend("pattern")(p);const h=new(Mk());h.postMessage({cmd:"setPattern",pattern:p});const f=new Xk({baseURL:d,doc:n,worker:h,log:r,win:a}),g={trkn:"started"};t.register("call for page-unload",(()=>g)),await c,new MutationObserver((e=>{for(const t of e)for(let e=0;e<t.addedNodes.length;e++){const n=t.addedNodes[e];if(1===n.nodeType){if(n instanceof HTMLElement&&n.classList.contains("noskim"))return;if(n instanceof HTMLAnchorElement&&Yk(n))f.queueHrefReplacement(n);else if(n.hasChildNodes()){const e=Qk(n);for(let t=0;t<e.length;t++)f.queueHrefReplacement(e[t])}}}})).observe(n.body,{childList:!0,subtree:!0});const m=Qk(n);for(let e=0;e<m.length;e++)f.queueHrefReplacement(m[e]);g.trkn="ready"}}),__webpack_require__(2455),(0,qe.fo)("abe.transferPerformance",{isAdsFreeSupported:!1,ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,log:n}=e;t.register("call for page-unload",(()=>{const e=__webpack_require__.g.performance.getEntries().filter(eC),[t,i]=e.reduce(((e,t)=>{let[n,i]=e;return n+=t.duration,i+=t.transferSize,[n,i]}),[0,0]),r=e.length,s=i/(t/1e3)/1e3;return n("resourceTransfer",r,s),{resourceTranfer:{numResources:r,rate:s}}}))}});const tC="\n.mpu_puff_wrapper.watermark,\n.adHolder.watermark,\n#mobile-content .adHolder.watermark,\n#content .billboard-container.watermark,\n.mol-ads-label-container {\n  display: none;\n}\n";(0,qe.fo)("nonAdServable",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init:function(e){let{broker:t,DM:n,getConfig:i,log:r,setConfig:s,pageCriteria:o,queryParams:a,addPlugins:d,removePlugins:l,registerPluginBouncer:c}=e;if(null==o||!o.nonAdservable||a.ignoreDisableAds)return;const u=new Set(i("plugins.nonAdServable.disablePlugins",[])),p=i("plugins.nonAdServable.enabledPlugins",[]);r("plugins disabled via config",u),c(((e,t)=>{const n=r.extend(e);return!t.disableIfNoAdsServable&&!u.has(e)||(n("disabling plugin"),!1)})),function(e,t,n){t("slots.enabled",(0,I.ei)(e("slots.enabled",{}),n)),(0,Se.appendStyle)(tC)}(i,s,["smart_feed"]),p.length&&(r("enabled plugins",p),d(p)),nC(n),(0,Se.appendStyle)("#mini-carousel-wrapper {display: none;}"),l(["trackers.pubcommon","imaSDK","vpaid","prebid","chromelessWaitForBillboard"]),t.register("call for page analytics",(()=>({adsDisabled:!0})))}});const nC=function(e){var t,n;null==e||null===(t=e.molFeComponents)||void 0===t||null===(n=t.setConfig)||void 0===n||n.call(t,"mol-fe-videoplayer",{plugins:{flyout:{enabled:!1,forceFlyout:{enabled:!1}}}})};var iC=__webpack_require__(9475),rC=__webpack_require__.n(iC);(0,qe.fo)("conditionalEnable",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init:function(e){let{broker:t,log:n,getConfig:i,pageCriteria:r,setConfig:s,registerPluginBouncer:o}=e;n("starting");const a=i("enableCondition.downlinkMin",0),d=rC()(),l=i("enableCondition.notForAuthorTypes",[]),c=new Set(i("enableCondition.disablePlugins",[]));if(a>=d)return n("disabling ads because of downlink:",{downlinkMax:d,downlinkMin:a}),p();const u=r.authorType;if(l.includes(u))return n("disabling ads because of controvential author:",{controversialAuthors:l,authorType:u}),p();function p(){o(((e,t)=>{const i=n.extend(e);return!t.disableIfNoAdsServable&&!c.has(e)||(i("disabling plugin"),!1)})),function(e){e("slots.enabled",{}),(0,Se.appendStyle)(tC)}(s),t.register("call for page analytics",(()=>({adsDisabled:!0})))}}}),(0,qe.fo)("dmp.ias.verificationPixel",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=n("dmp.ias.pubId",931554);t.on("loadIASVerificationPixel",(e=>{var t,n,s,o,a;let d,{document:l,cacheBuster:c,width:u,height:p,...h}=e;const f=sC({anId:r,width:u,height:p,...h});i("iasScriptUrl",f);const g=l.createElement("iframe");(g.frameElement||g).style.cssText="width: 0; height: 0; border: 0; display: none;",g.src="javascript:false";const m=l.getElementById(`ias-${c}`);null==m||null===(t=m.parentNode)||void 0===t||t.insertBefore(g,m);try{var y;d=null==g||null===(y=g.contentWindow)||void 0===y?void 0:y.document}catch(e){var v;const t=l.domain;g.src="javascript:var d=document.open();d.domain='"+t+"';void(0);",d=null==g||null===(v=g.contentWindow)||void 0===v?void 0:v.document}null===(n=d)||void 0===n||null===(s=n.open)||void 0===s||s.call(n).write("<body onload=\"window.__IntegralASUseFIF = true;var js = document.createElement('script');js.src = '"+f+"';document.body.appendChild(js);\">"),null===(o=d)||void 0===o||null===(a=o.close)||void 0===a||a.call(o)}))}});const sC=e=>{let{anId:t,width:n,height:i,...r}=e;return["impId","pubId","chanId","placementId","pubCreative","pubOrder","custom"].reduce(((e,t)=>t in r?`${e}&${t}=${r[t]}`:e),`//pixel.adsafeprotected.com/jload?anId=${t}&campId=${n}x${i}&adsafe_par`)};(0,qe.fo)("dmp.ias.targeting",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){var t;let{broker:n,getConfig:i,log:r,pageCriteria:s,win:o}=e;if("true"===(null==s?void 0:s.sponsored))return void r("sponsored article, bailing");const a=Object.values(i("slotDescriptions.initial",{})).filter((e=>!e.isTemplate&&e.slotTypes.includes("gpt"))).map(aC).filter((e=>{let{adSlotId:t,size:n,adUnitPath:i}=e;return t&&n&&i}));o.__iasPET=o.__iasPET||{};const d=o.__iasPET;d.queue=d.queue||[],d.pubId=i("dmp.ias.pubId",931554);const l=i("dmp.ias.targetingRequestTimeout",1e3),c=`//static.adsafeprotected.com/iasPET.${i("dmp.ias.petScriptVersion",1)}.js`;r("loading script",c),n.invoke("import script",c);let u={};n.register("get tags",(e=>{const{slot:{pos:t,id:n}}=e;r("get tags requested",t);const i=u[n];return r(`tags for ${t}:`,i),i})),r("iasPETSlots",a),r("requesting targeting, timeout: ",l),null===(t=d.queue)||void 0===t||t.push({adSlots:a,dataHandler:e=>{r("ias data received",e);const t=JSON.parse(e);u=t.slots;const s=i("dmp.ias.targeting",["brandSafety","fr"]),o=oC(t,s);r("pageTargeting",o),n.emit("set page level targeting",o),n.register("call for page analytics",(()=>({iasTargeting:o})))},timeout:l})}});const oC=(e,t)=>{const{brandSafety:n,fr:i}=e,r=t.includes("brandSafety")?{...n}:{};return t.includes("fr")&&(r.fr=i),r},aC=e=>({adSlotId:e.id,size:e.size,adUnitPath:e.adUnit});(0,qe.fo)("dmp.ias.prebidRtd",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:"N/A"},disableIfNoAdsServable:!0,run:function(e){let{getConfig:t,broker:n,log:i,pageCriteria:r}=e;if("true"===(null==r?void 0:r.sponsored))return void i("sponsored article, bailing");const s=t("ias.rtd.auctionDelay",2e3),o={name:"ias",params:{pubId:t("dmp.ias.pubId",931554)}},a=[s?{...o,waitForIt:!0}:o],d=s?{auctionDelay:s,dataProviders:a}:{dataProviders:a};i("setting realTimeData rtd",d),n.register("provide prebid config",(()=>({realTimeDataConfig:d})))}}),(0,qe.fo)("trackers.universalid",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:"N/A"},run:e=>{let{broker:t,getConfig:n,log:i}=e;const r=n("trackers.universalIds",[]);r.length&&t.register("provide prebid config",(()=>({userSyncConfig:{userIds:r,syncDelay:n("plugins.prebid.syncDelay",3e3)}})))}}),(0,qe.fo)("prebidUserSync",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:"N/A"},disableIfNoAdsServable:!0,run:async e=>{let{getConfig:t,broker:n,log:i}=e;const r=new Promise((async e=>{const[,t]=await n.until("configure and start prebid");e(t)}));n.register("provide prebid config",(async()=>{const e=await r;return{userSyncConfig:{...T()({},t("plugins.prebid.userSync"),{filterSettings:{iframe:{bidders:dC(e)}}})}}}))}});const dC=e=>Array.from(new Set(e.reduce(((e,t)=>[...e,...t.bids.map((e=>e.bidder))]),[])));function lC(e){const{activeElement:t}=e.document;if("IFRAME"===(null==t?void 0:t.tagName))try{const e=t.contentWindow;if(!e)throw new Error("cant access win");return lC(e)}catch(e){return}return e}(0,qe.fo)("trackers.unifiedid",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:"N/A"},disableIfNoAdsServable:!0,run:e=>{let{broker:t,getConfig:n}=e;t.register("provide prebid config",(()=>({userSyncConfig:{userIds:[{name:"unifiedId",params:{url:"//match.adsrvr.org/track/rid?ttd_pid=a8r0pns&fmt=json"},storage:{type:"cookie",name:"pbjs-unifiedid",expires:60}}],syncDelay:n("plugins.prebid.syncDelay",3e3)}})))}}),(0,qe.fo)("players.oov",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,log:n}=e;n("running"),window.addEventListener("blur",(()=>{t.emit("sync video tags update",{cust_params:{oov:!0}})})),window.addEventListener("focus",(()=>{t.emit("sync video tags update",{cust_params:{oov:!1}})})),t.emit("sync video tags update",{cust_params:{oov:!document.hasFocus()}})}}),(0,qe.fo)("analytics.fullscreenOverlay",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n}=e;const i=e=>{t.emit("send event to bidmax",{type:"custom",payload:{...e,module:"fullScreenOverlay"}})};t.once("fullScreenOverlayStarted",(e=>{t.register("call for page analytics",(()=>({fullScreenOverlay:{owner:e}})))})),n("analytics.fullscreenOverlay.reportToBidmax",!1)&&(t.on("fullScreenOverlayStarted",(e=>{i({owner:e,state:"started"})})),t.on("fullScreenOverlayEnded",(e=>{i({owner:e,state:"ended"})})))}});var cC=__webpack_require__(4399),uC=__webpack_require__.n(cC),pC=__webpack_require__(5214);(0,qe.fo)("trackers.watchdog",{ccpa:{enabledIfDissent:!0},description:"Monitors non-user initiated reloads",gdpr:{enabledIfDissent:!0},run(e){let{broker:t,doc:n,getConfig:i,log:r,pageCriteria:s,win:o}=e;const a=function(){let e,t=!1;return n.documentElement.addEventListener("click",(()=>{r("clicked"),t=!0,y(),e&&(e=clearTimeout(e)),e=setTimeout((()=>{r("click reset"),t=!1,y()}),300)}),{capture:!0}),()=>t}(),d=function(){let e=!1;return uC()("+r, ctrl+r, alt+f4",(()=>{e=!0,y()})),()=>e}(),l=function(){let e=n.hasFocus();return n.documentElement.addEventListener("mouseenter",(()=>{e=!0,y(),r("entered")})),n.documentElement.addEventListener("mouseleave",(()=>{e=!1,y(),r("left")})),()=>e}(),c=function(){let e=!1;return n.documentElement.addEventListener("touchstart",(()=>{r("touch start"),e=!0,y()})),n.documentElement.addEventListener("touchend",(()=>{r("touch end"),e=!1,y()})),()=>e}(),u=()=>{const e=lC(o);return e?e.document.hasFocus()?e===o?"top":e.name:"none":"unknown"},p=function(){const e=s&&1e3*Number(s.timestamp)+1e3*s.refresh;return()=>!!e&&Date.now()>=e}(),h=function(){let e=!1;return window.addEventListener("visibilitychange",(()=>{const{hidden:t}=document;r("hidden:",t),e=t,v("visibilitychange",{hidden:t},!0),y()}),{capture:!0,passive:!0}),()=>e}();i("trackers.watchdog.reportStart",!0)&&v("start",(0,pC.b)(r));const f=(0,S.jR)();let g=0;function y(){const e=Math.round(performance.now()/1e3),t={st:m.B,ts:Date.now(),dtis:e,c:a(),fw:u(),t:c(),miv:l(),prt:p(),rk:d(),h:h(),u:(0,xt.vp)(window.location.href)};r("saving state",t),localStorage.setItem("mol.ads.watchdog",JSON.stringify(t)),g&&clearTimeout(g),g=setTimeout(y,1e3*f.next().value)}function v(e,n){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r("reporting",{event:e,flush:i,payload:n}),t.emit("send event to bidmax",{type:"watchdog",event:e,payload:n},i)}y(),t.register("call for page-unload",(()=>{const e={clicked:a(),focusedWin:u(),isTouching:c(),mouseInViewport:l(),postRefreshTime:p(),refreshKeys:d(),hidden:h()};return r("unload",e),e}))}}),(0,qe.fo)("abe.pageUnload",{disableIfNoAdsServable:!0,ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:e=>{let{broker:t,log:n}=e,i={};t.on("adblock detection status",(e=>{i=e,n("adBlockerStatus",i)})),t.register("call for page-unload",(()=>i))}});const hC=["pageViewId","articleId","channel","device","geo","isMobile","isTablet","pageType","sponsored","subchannel","cljVersion","cljNode","articleStyle"],fC=["renderPlatform"];(0,qe.fo)("analytics.pageMeta",{gdpr:{enabledIfDissent:!0},ccpa:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:e=>{let{broker:t,log:n,pageMeta:i,pageCriteria:r,doc:s}=e;const o=(0,Se.loaded)(s);function a(){const{authorsShortNames:e,publishedDate:t}=i||{},n=(Date.now()-Number(t))/1e3/60/60/24;return{...i?(0,I.ei)(i,fC):{},authors:e,daysSincePublished:n}}function d(){const e=s.querySelector('#mobile-content .scrollable-content > article, #page-container .article-text [itemprop="articleBody"]');return(null==e?void 0:e.classList.contains("article-truncated"))?{trunc:1}:{}}t.register("call for page analytics",(()=>{const e={...r?(0,I.ei)(r,hC):{},...a()};return n("sync:",e),e})),t.register("call for page analytics",(()=>o.then((()=>{const e=d();return n("async:",e),e})))),t.emit("set page level targeting",o.then((()=>{const e=d();return n({pageLevelTargeting:e}),e})))}}),(0,qe.fo)("page.topics",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:e=>{var t;let{broker:n,log:i,pageMeta:r}=e;if(null!=r&&null!==(t=r.topics)&&void 0!==t&&t.length){i("topics found",r.topics),n.register("call for page analytics",(()=>({topics:r.topics})));const e=r.topics.map((e=>e.toLowerCase().replace(/[^a-zA-Z0-9]/g,"_")));i("sending:",e),n.emit("set page level targeting",{tags:e})}}}),(0,qe.fo)("prebid.lexiconId",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1,2,3,4,5,6,7,8,9,10]},run:e=>{let{broker:t,getConfig:n}=e;const i=n("prebid.lexiconId.pid","0013300001f6OFRAA2");t.register("provide prebid config",(()=>({userSyncConfig:{userIds:[{name:"33acrossId",params:{pid:i},storage:{type:"html5",name:"33acrossId",expires:90,refreshInSeconds:28800}}]}})))},vendorIds:{gdpr:[58]}});const gC=e=>!(null==e);(0,qe.fo)("prebid.optout",{disableIfNoAdsServable:!0,vendorIds:{gdpr:"N/A"},purposeIds:{gdpr:"N/A"},run:e=>{let{broker:t,log:n}=e;const i="_pbjs_id_optout",r="_pubcid_optout",s=gC(localStorage.getItem(i))||gC((0,b.ej)(i)),o=gC(localStorage.getItem(r))||gC((0,b.ej)(r));n("pbjsOptOut:",s),n("pubcidOptout:",o);const a=Object.entries({pbjsOptout:s,pubcidOptout:o}).reduce(((e,t)=>{let[n,i]=t;return i?{...e,[n]:i}:e}),{});(0,I.xb)(a)||t.register("call for page analytics",(()=>({...a})))}}),(0,qe.fo)("bidders.mediagrid.skin",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:i,win:r}=e;const s=n("plugins.mediagrid.skin.minWidth",1224),o=n("plugins.mediagrid.skin",mC);if(i("config:",{minWidth:s,adUnits:o}),r.innerWidth<s)return void i("bailing, viewport width too small:",r.innerWidth);const a=o.flatMap((e=>{let{bids:t}=e;return t.map((e=>{let{params:{uid:t}}=e;return t}))}));i("known skins:",a);const d=new Set(a);t.register("provide prebid adUnits",(()=>o)),t.register("prebid reduce bidderSettings",(e=>(e.grid||(e.grid={}),e.grid.adserverTargeting||(e.grid.adserverTargeting=[]),e.grid.adserverTargeting.push({key:"hb_skin",val:e=>{const t=l[e.requestId];return d.has(t)}}),e)));const l={};t.on("prebid loaded",(e=>{e.onEvent("bidRequested",(e=>{let{bidderCode:t,bids:n}=e;i("bidRequested",n),"grid"===t&&n.forEach((e=>{let{bidId:t,params:{uid:n}}=e;l[t]=n}))}))}))},vendorIds:{gdpr:[686]}});const mC=[{code:"billboard",mediaTypes:{banner:{sizes:[[970,250],[728,90]]}},bids:[{bidder:"grid",params:{uid:344499}}]}];function yC(e,t,n,i){try{e.__yb_pkg_version="3eec2a79-9905-4dbe-bb82-cd8bdf45e73d"}catch(t){}try{void 0!==e.__yb_tz_hour_offset?O=e.__yb_tz_hour_offset:(N=new Date,U=new Date(N.toLocaleString("en-US",{timeZone:"UTC"})),O=(new Date(N.toLocaleString("en-US",{timeZone:"America/New_York"})).getTime()-U.getTime())/36e5,e.__yb_tz_hour_offset=O)}catch(t){e.__yb_tz_hour_offset=O=-5}var r,s,o,a,d,l,c,u,p,h,f,g,m,y,v,b,_,w,T,I,S,k,C,E,A,P,x,D,O,R=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],N={"1_0010":"01","1_0011":"02","1_0020":"03","1_0021":"04","1_0110":"05","1_0111":"06","1_0120":"07","1_0121":"08","1_0310":"09","1_0311":"0a","1_0320":"0b","1_0321":"0c","1_0610":"0d","1_0611":"0e","1_0620":"0f","1_0621":"0g","1_0810":"0h","1_0811":"0i","1_0820":"0j","1_0821":"0k","2_0000":"19","2_0001":"1a","2_0002":"1b","2_000z":"1c","2_0030":"1d","2_0031":"1e","2_0032":"1f","2_003z":"1g","2_0100":"1h","2_0101":"1i","2_0102":"1j","2_010z":"1k","2_0130":"1l","2_0131":"1m","2_0132":"1n","2_013z":"1o","2_0300":"1p","2_0301":"1q","2_0302":"1r","2_030z":"1s","2_0330":"1t","2_0331":"1u","2_0332":"1v","2_033z":"1w","2_0600":"1x","2_0601":"1y","2_0602":"1z","2_060z":"20","2_0630":"21","2_0631":"22","2_0632":"23","2_063z":"24","2_0800":"25","2_0801":"26","2_0802":"27","2_080z":"28","2_0830":"29","2_0831":"2a","2_0832":"2b","2_083z":"2c","1_0z10":"3l","1_0z11":"3m","1_0z20":"3n","1_0z21":"3o","2_0z00":"3x","2_0z01":"3y","2_0z02":"3z","2_0z0z":"40","2_0z30":"41","2_0z31":"42","2_0z32":"43","2_0z3z":"44"},M={gpt:0,amp:1,video:2,mobile:3,gpt_lite:4,adx_tag:5},L={out_of_page:0,anchor:1,app_open:2,banner:3,instream_audio:4,instream_video:5,interstitial:6,native_advance:7,rewarded:8,others:35},U={desktop:0,smartphone:1,tablet:2,connecttv:3,others:35},j=(e={ios:0,android:1,macos:2,windows:3,others:35},{chrome:0,safari:1,edge:2,others:35});function B(e,t){return-1!==e.indexOf(t)}function q(e,t){return e.some((function(e){return e.brand===t}))}try{return"u"===t?[]:(s=function(e,t){if(void 0===(e=M[e]))throw new Error;return t=void 0!==L[t="top_anchor"!==t&&"bottom_anchor"!==t?t:"anchor"]?L[t]:L.others,{rt:R[e],ivf:R[t]}}("gpt",n),r||(D=function(){var e,t=(t=(t=window.navigator)&&t.userAgent)||"",n=(n=(n=window.navigator)&&n.userAgentData)||null;return{os:B(e=t,"Win")?"windows":B(e,"like Mac")?"ios":B(e,"Mac")?"macos":B(e,"Android")?"android":"others",dc:function(e){return B(e,"iPad")||B(e,"Tablet")||B(e,"Android")&&!B(e,"Mobile")||B(e,"Silk")}(e=t)?"tablet":function(e){return B(e,"iPod")||B(e,"iPhone")||B(e,"Android")||B(e,"IEMobile")}(e)?"smartphone":function(e){return B(e,"Roku")||B(e,"SMART-TV")||B(e,"SmartTV")||B(e,"NetCast")||B(e,"crkey")}(e)?"connecttv":"desktop",browser:function(e,t){return t=function(e){if(e&&e.brands){if(q(e.brands,"Opera"))return"opera";if(q(e.brands,"Microsoft Edge"))return"edge";if(q(e.brands,"Chrome"))return"chrome"}return null}(t),t||(B(e,"OPR/")||B(e,"Opera")?"others":B(e,"Edg")?"edge":B(e,"Firefox")?"others":B(e,"Chrome")?"chrome":B(e,"Safari")||B(e,"iPad")||B(e,"iPhone")||B(e,"iphone")?"safari":"others")}(t,n)}}(),P=void 0!==j[D.browser]?j[D.browser]:j.others,x=void 0!==e[D.os]?e[D.os]:e.others,D=void 0!==U[D.dc]?U[D.dc]:U.others,r={dc:R[D],os:R[x],browser:R[P]}),o=r,a=s.rt,d=s.ivf,l=o.dc,c=o.os,u=o.browser,h=function(e,t){if(e)return["0"];for(var n=Math.floor(1e3*Math.random()+1),i=[],r=0,s=0;s<t.length;++s){for(var o=1,a=t[s],d=0,l=0;l<a.length;l++)if(n<=(d+=a[l])){o=l+1;break}1<o&&0<r&&(o=o+r-1),r+=t[s].length;var c=R[o];for(l=0;l<i.length;++l)if(i[l]===c){l=-1;break}-1!==l&&i.push(c)}return i}(p="b"===t,[[900,10,10,10,10,10,10,10,10,10,10],[900,20,20,20,20,20]]),E=O,E=(new Date).getTime()+36e5*E,A=parseInt(E/36e5,10)%24,f=[[1,0],[3,24],[6,32]].map((function(e){return R[Math.floor(A/e[0])+e[1]]})),y=a,v=d,_=c,w=u,T=h,I=f,S=[],"0"===(b=l)||"3"===b?(w=N["2_"+y+v+b+w])&&S.push(w):(w=N["1_"+y+v+b+_])&&S.push(w),k=[],C=[],S.forEach((e=>{k.push("-"+e);for(var t=0;t<T.length;++t){var n=e+T[t];k.push(n),I.forEach((e=>{C.push(n+e)}))}})),g={short:k,full:C},m=[],m=p?[{key:"in2w_key20",values:g.full}]:[{key:"in2w_key16",values:g.short},{key:"in2w_key20",values:g.full}],i&&i.length&&m.push({key:"in2w_key21",values:[function(e){var t,n,i,r=e,s=[],o=1e5,a=1,d=1e5,l=1;for(t in r="fluid"===e||"number"==typeof r[0]&&"number"==typeof r[1]?[e]:r)"fluid"===r[t]?s.push(r[t]):((n=r[t][0])<o&&(o=n),a<n&&(a=n),(i=r[t][1])<d&&(d=i),l<i&&(l=i),s.push(n+"x"+i));s.sort(((e,t)=>e<t?-1:1)),e=s.length;var c=(s.push(o),s.push(a),s.push(d),s.push(l),s.push(e),s.join(","));try{if(!c.length)return"0";let e=305419896;for(let t=0;t<c.length;++t)e^=(e<<5)+(e>>2)+c.charCodeAt(t)&4294967295;return(e<0?4294967296+e:e)+""}catch(e){return"-1"}}(i)]}),m)}catch(t){return[{key:"in2w_key20",values:["4p10","4p1o","4p1w"]}]}}(0,qe.fo)("page.responsiveness",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:e=>{let t,{broker:n,log:i}=e,r=0,s=Date.now(),o=document.hasFocus();__webpack_require__.g.addEventListener("blur",(()=>{i("blur event received, halting monitoring"),o=!1,t&&clearTimeout(t)})),__webpack_require__.g.addEventListener("focus",(()=>{i("focus event received, restarting monitoring"),o=!0,s=Date.now(),a()})),n.register("call for page-unload",(()=>({mut:r})));const a=()=>{if(!o)return;let e=Date.now();r=Math.max(r,e-s-1e3),s=e,i("max delay",r),t=setTimeout(a,1e3)};a()}}),(0,qe.fo)("bidders.criteoV2",{vendorIds:{gdpr:[91]},purposeIds:{gdpr:[1]},disableIfNoAdsServable:!0,run:e=>{let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.bidders.criteo.v2.networkId",10352);let s=n("plugins.bidders.criteo.v2.display",{});const{width:o}=(0,b.ap)();s=o>1580&&s.wideSkiesAdUnits?{...s.adUnits,...s.wideSkiesAdUnits}:s.adUnits;const a=Object.entries(s).map((e=>{let[t,n]=e;return((e,t)=>({code:e,bids:[{bidder:"criteo",params:{networkId:r,publisherSubId:e}}],mediaTypes:{banner:{sizes:t}}}))(t,n)}));i("adUnits",a),t.register("provide prebid adUnits",(()=>a)),t.register("prebid reduce bidderSettings",(e=>(e.criteo||(e.criteo={}),e.criteo.storageAllowed=!0,e)))}}),(0,qe.fo)("fbWebview",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run(e){let{broker:t,getConfig:n,doc:i,win:r}=e;const s=n("fbWebview.useReferrer",!1),o=i.referrer.includes("facebook.com"),a=r.navigator.userAgent;(a.includes("FBAV")||a.includes("FBAN")||s&&o)&&t.emit("set page level targeting",{platform:"FBOS"})}}),(0,qe.fo)("bidders.unruly",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[36]},run(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.bidders.unruly.adUnits",n("plugins.bidders.rhythmOne.adUnits",{}));i(r);const s=new yi(n("slotDescriptions.initial",{})),o=Object.entries(r).reduce(((e,t)=>{let[n,{placementId:r,siteId:o,sizes:a=s.getSizes(n)}]=t;return a?[...e,{code:n,sizes:a,mediaTypes:{banner:{sizes:a}},bids:[{bidder:"unruly",params:{siteId:o||r}}]}]:(i(`no adDescription for pos: ${n}`),e)}),[]);i({adUnits:o}),t.register("provide prebid adUnits",(()=>o))}}),(0,qe.fo)("bidders.unruly.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[36]},run(e){let{broker:t,getConfig:n,log:i}=e;t.register("provide video adUnits",(async(e,t)=>{const r="video"===e?t?"autoplay":"ctp":e,s=n(`plugins.bidders.unruly.video.adUnits.${r}`,n(`plugins.bidders.rhythmOne.video.adUnits.${r}`));return i({adUnitName:r,siteId:s}),s&&{bids:[{bidder:"unruly",params:{siteId:s}}]}}))}}),(0,qe.fo)("intowow",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:e=>{let{broker:t,log:n,getConfig:i,win:r}=e;const s=i("plugins.intowow.optRatio",.3),o=i("plugins.intowow.trafficType",Math.random()<s?"o":"b"),a="o"===o?{intowow_optimized:["true"]}:{intowow_optimized:["false"]};n("setting page level targeting",a),t.emit("set page level targeting",a),t.register("call for page analytics",(()=>({intowowTrafficType:"o"===o?"optimized":"nonOptimized"}))),t.register("get tags",(e=>{let{slot:{pos:t,size:i}}=e;n("get tags",t,i);const s=yC(r,o,"banner",i).reduce(((e,t)=>{let{key:n,values:i}=t;return{...e,[n]:i}}),{});return n("targeting",t,s),s})),t.register("get video tags",(e=>{let{pos:t,screen:{width:i,height:s}}=e;const a=yC(r,o,"instream_video",[[i,s]]).reduce(((e,t)=>{let{key:n,values:i}=t;return{...e,[n]:i}}),{});return n("targeting",t,a),{cust_params:a}}))}}),(0,qe.fo)("prebid.fledge",{ccpa:{enabledIfDissent:!0},purposeIds:{gdpr:[1]},vendorIds:{gdpr:"N/A"},disableIfNoAdsServable:!0,run:e=>{let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.prebid.fledge.supportedPositions",["all"]),s=new Set(r),o=n("plugins.prebid.fledge.supportedBidders",["openx"]),a=new Set(o);if(!r.length||!o.length)return void i("no positions or no bidders configured, bailing");t.register("provide prebid config",(()=>(i("provide prebid config"),{fledgeForGptConfig:{enabled:!0}}))),t.register("provide prebid bidder config",(()=>(i("provide prebid bidder config"),[o.filter((e=>"all"!==e)),{fledgeEnabled:!0}])));const d=function(e){return(t,n)=>{const{bidder:i}=n;return e.has(i)||e.has("all")?t.fledgeBids.push(n):t.bids.push(n),t}}(a),l=function(e,t){return(n,i)=>{const{bids:r,code:s,...o}=i;if(e.has(s)||e.has("all")){const{bids:e,fledgeBids:i}=r.reduce(t,{bids:[],fledgeBids:[]});if(e.length&&n.push({bids:e,code:s,...o}),i.length){const e=JSON.parse(JSON.stringify(o));e.ortb2Imp=e.ortb2Imp||{},e.ortb2Imp.ext=e.ortb2Imp.ext||{},e.ortb2Imp.ext.ae=1,n.push({bids:i,code:s,...e})}}else n.push(i);return n}}(s,d);t.interceptOnce("configure and start prebid",((e,t)=>{let[n,r,s]=e;const o=s.reduce(l,[]);i("adUnits",o),t(n,r,o)})),t.intercept("enrich video adUnits",((e,t)=>{let[n,r]=e;return i("received adUnits",r),t(n,r.reduce(l,[]))}))}}),(0,qe.fo)("originTrials",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},disableIfNoAdsServable:!0,run:async e=>{var t;let{broker:n,doc:i,getConfig:r,log:s}=e;s("running");const o=document.createElement("meta");o.setAttribute("http-equiv","origin-trial"),o.setAttribute("content","A6J37Z0ggn4BcJKHxifWnGCOxxYKVW8PF63TnTXMmKNeOSlfiSGW+9k9sH40edl9R+o2peUbA9gtgyuGMdpdZwkAAACFeyJvcmlnaW4iOiJodHRwczovL2RhaWx5bWFpbC5jby51azo0NDMiLCJmZWF0dXJlIjoiUHJpdmFjeVNhbmRib3hBZHNBUElzIiwiZXhwaXJ5IjoxNjk1MTY3OTk5LCJpc1N1YmRvbWFpbiI6dHJ1ZSwiaXNUaGlyZFBhcnR5Ijp0cnVlfQ=="),null===(t=i.querySelector("head"))||void 0===t||t.appendChild(o);const a={};var d;"browsingTopics"in i&&i.featurePolicy.allowsFeature("browsing-topics")&&(s("browsing topics enabled"),null===(d=i.browsingTopics)||void 0===d||null===(d=d.call(i))||void 0===d||d.then((e=>{if(s("topics",e),r("plugins.originTrials.topics.sendToBidmax",!1))try{const t=e.map((e=>e.topic)),i=e[0].taxonomyVersion;n.emit("send event to bidmax",{type:"originTrials",payload:{topics:t,tv:i}})}catch(e){const t=e instanceof Error?e.message:String(e);console.error(t)}})),a.bt=!0),"joinAdInterestGroup"in navigator&&i.featurePolicy.allowsFeature("join-ad-interest-group")&&(s("fledge interest group enabled"),a.fig=!0),"runAdAuction"in navigator&&i.featurePolicy.allowsFeature("run-ad-auction")&&(s("fledge auction enabled"),a.fa=!0),i.featurePolicy.allowsFeature("attribution-reporting")&&(s("attribution reporting enabled"),a.ar=!0),(0,I.xb)(a)||n.register("call for page analytics",(()=>({ot:{...a}})))}}),(0,qe.fo)("bidders.ozone.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[524]},run:e=>{let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.bidders.ozone.video.publisherId","OZONEDM00001"),s=n("plugins.bidders.ozone.video.placementIds",{video:"3500010853"}),o=n("plugins.bidders.ozone.video.siteId","1500000022"),a={video:{...n("plugins.slots.video.v2.mediaTypes.video",{playerSize:[636,358],context:"instream",mimes:["video/mp4","application/javascript"],protocols:[1,2,3,4,5,6],api:[1,2],linearity:1,minduration:5,maxduration:30}),playerSize:n("plugins.bidders.ozone.video.playerSize",[640,480])}},{cancel:d}=t.register("provide video adUnits",(async(e,t)=>{if(!s[e])return;const n=[{bidder:"ozone",params:{publisherId:r,placementId:s[e],siteId:o,video:{skippable:!1,playback_method:t?["auto_play_sound_off"]:["click_to_play"]}}}],l="video"===e?{code:e,bids:n,mediaTypes:a}:{bids:n};return i("adUnits",l),d(),l}))}});const vC="mol.ads.cmp.tcfv2.reprompt",bC="mol.ads.cmp.tcfv2.lastReprompted";function _C(){let e;try{const t=localStorage.getItem(vC);t&&(e=JSON.parse(t))}catch(e){console.error("unabled to parse repromptVersion")}return e||{version:0,chance:Math.random()}}async function wC(e){let{localBroker:t,tcData:n,log:i}=e;const r=n.repromptVersion,s=JSON.parse(localStorage.getItem(bC)||"{}");(null==s?void 0:s.version)===n.repromptVersion&&(i.warn("reprompt failed - same version: ",n.repromptVersion),t.emit("send event to bidmax",{type:"custom",payload:{daysSinceReprompt:Math.floor((Date.now()-s.date)/864e5),event:"reprompt-error",lastRepromptVersion:s.version,jounery:await t.emit("get journey so far"),module:"tcfv2",onClosedStoredTCDataVersion:r,tcDataRepromptVersion:n.repromptVersion}}),t.emit("add user journey","error"))}var TC=__webpack_require__(5965);const IC="mol.ads.tcfv2.uuid",SC=["pagehide","beforeunload","unload"],kC={capture:!0,passive:!0},CC="mol.ads.cmp.tcfv2.gvlGeoMigrationStatus",EC={useGeoDeviceVariantGVL:!1,rollbackGeoVariant:!1};function AC(){return JSON.parse(localStorage.getItem(CC)||"{}")}function PC(){localStorage.removeItem(CC)}function xC(e){return 3===(null==e?void 0:e.split(".").length)}const DC={yes:"true",no:"false",partial:"custom"},OC="dmg.ads.tcfv2.remigration",RC=[async function(e){let{localBroker:t,log:n}=e;await t.until("local consent data resolved"),t.invokeAll("start cmp")},async function(e){let{localBroker:t,log:n,getConfig:i,setConfig:r,win:s}=e;const o=i("tcfv2.gvlRemigrateVersion");if(!function(){const e=!!o,t=localStorage.getItem(OC),i=!t||Number(t)<Number(o),r=!!AC().tcString,s=function(){const{getConsentDegree:e}=JSON.parse(localStorage.getItem("mol.ads.cmp.tcf.cache")||"{}");return"partial"===e}(),a=e&&i&&r&&s;return n.extend("should remigrate")(a,{configuredToTryRemigration:e,hasYetToRemigrate:i,hasPreGVLMigrationBackupTCString:r,isPartiallyConsented:s}),a}())return;const a={...i("tcfv2.gvlMigration"),rollbackGeoVariant:!0};n("triggering"),n.extend("config")(a),r("tcfv2.gvlMigration",a),t.on("cache updated",(()=>{localStorage.setItem(OC,o),n("remigrated")}))},async function(e){let{localBroker:t,log:n}=e;const i=await t.invoke("get local storage consent data"),r=(await t.invokeAll("get local consent data",i)).filter((e=>e));n("tcDatas",r);let s=(0,I.ei)(i,["acmVersion","addtlConsent","molGvlVersion","nrvString","nrvVersion","repromptVersion","tcString"]);if(t.register("get controller starting options",(()=>s)),!r.length)return n("emit tcData from localStorage",i),void t.emit("local consent data resolved",i);const o=r.reduce(((e,t)=>{let{src:n,tcData:i}=t;return{...e,[n]:i}}),{}),a=o.consentDataFromUrl||o.consentDataFromTCFV2Opts||o.geoGVLMigrator||i;n("tcDatasMap",o),n("localStorageTCData",i),s=a,t.emit("local consent data resolved")},function(e){let{log:t,broker:n,localBroker:i,getConfig:r}=e;const s=r("site","mol"),o=e=>n.emit("send event to bidmax",e);let a=e=>{const n={account:s,...e};t("sending to bidmax using barebones",n),(0,Od.H)(n)};n.on("system ready",(()=>{a=o})),i.on("send event to bidmax",(e=>a(e)))},function(e){let{log:t,localBroker:n,broker:i}=e;const r=n.until("versions").then((e=>{let[{tcfv2Version:t,tcfv2UiVersion:n}]=e;return`${t.length?t:"DEV"} ${n.length?n:"DEV"}`})),s=n.until("valid consent").then((e=>{let[{tcString:t},n]=e;return[id(t),n]})),o=async function(){const[e,n]=await s,i=e.vendorListVersion,o={cmp:"tcfv2",cmpVersion:await r,consent:n,gdpr:{iabv:String(i)},cmpId:e.cmpId};return t("bidmax targeting:",o),o}();i.register("call for page analytics",(()=>o))},function(e){let{queryParams:t,log:n,localBroker:i}=e;if(!t.gdpr_consent&&!t.addtl_consent)return;const r=new URLSearchParams(__webpack_require__.g.location.search);["gdpr_consent","addtl_consent"].forEach((e=>r.delete(e)));const s=function(e){const{done:t}=e.keys().next();return!t}(r)?`?${r}${__webpack_require__.g.location.hash}`:`${__webpack_require__.g.location.pathname}${__webpack_require__.g.location.hash}`;history.replaceState(null,"remove query params to ensure bid requests don't exceed size",s),i.register("get local consent data",(()=>({src:"consentDataFromUrl",tcData:{tcString:t.gdpr_consent,addtlConsent:t.addtl_consent,acmVersion:"0.0.1"}})))},function(e){let{localBroker:t,log:n,win:i}=e;const r=JSON.parse(localStorage.getItem("mol.ads.cmp.tcf.cache")||"{}"),s=(null==r?void 0:r.getTCData)||{},o=(null==r?void 0:r.getConsentDegree)||void 0;t.register("get local consent degree",(()=>o)),t.register("get local storage consent data",(()=>s)),t.register("ui closed",(async e=>{let{tcData:r}=e;await i.adverts.updateCache(r,n),t.emit("cache updated",r)})),t.on("loaded",(async e=>{let{tcData:r}=e;await i.adverts.updateCache(r,n),t.emit("cache updated",r)}))},async function(e){let{localBroker:t,getConfig:n,log:i}=e;const r=n("tcfv2.consentMaxAgeMonths",12),s=(0,I._)(-r),[o]=await t.until("valid consent");((e,t)=>id(e.tcString).lastUpdated<(t||0))(o,s)&&(i("opening UI as tcString expired"),t.emit("openUi",{uiLevel:"Level1",reason:"tcStringExpired"}),t.emit("add user journey","tcStringExpired"),await t.until("ui closed"))},async function(e){let{localBroker:t,getConfig:n,queryParams:i,log:r,localStorage:s,win:o}=e;if(i.gdpr_consent)return void r("bailing reprompt coz gdpr_consent was passed in url");const a=_C(),d=n("tcfv2.repromptMigrations",[n("tcfv2.reprompt",{version:0,chance:0})]),l=(0,q.Z$)(d).version;t.on("local consent data resolved",(async e=>{let n=(null==e?void 0:e.repromptVersion)||a.version||l,i=l;if(t.register("get controller starting options",(()=>({repromptVersion:n,nextRepromptVersion:i}))),null==e||!e.tcString)return void(n=l);const[c]=await t.until("valid consent"),u=await async function(e){if(null==e||!e.tcString)return r("it looks like new user, bailing reprompt"),{shouldRepromptUser:!1};const t=e.repromptVersion||a.version||0;let n=t;const i=d.filter((e=>e.version>n)),s=i.some((e=>Array.isArray(e.onlyIfDissentedFromAny)))?await new Promise((e=>{o.__tcfapi("getPurposesByVendorMap",2,(t=>{e(Object.keys(t))}))})):[];r("migrating",{toMigrate:i,migrations:d});for(const t of i){let i=a.chance<t.chance,o=!1;if(Array.isArray(t.onlyIfDissentedFromAny)&&(o=t.onlyIfDissentedFromAny.some((t=>s.includes(t.toString())&&!e.vendor.consents[t.toString()])),i=i&&o),r.extend("migrate")(t.version,i,{chance:t.chance,userChance:a.chance,repromptVersion:n,onlyIfDissentedFromAny:t.onlyIfDissentedFromAny,missingVendorsConsent:o,consentableVendorIds:s}),!i)break;n=t.version}const l=n>t;return r("shouldRepromptUser",l,{repromptVersion:n}),{shouldRepromptUser:l,repromptVersion:n}}(c);if(i=u.repromptVersion,u.shouldRepromptUser){r("opening UI due to reprompt"),t.emit("openUi",{uiLevel:"Level1",reason:"reprompt"}),t.emit("add user journey","reprompt");const[e]=await t.until("ui closed");await wC({localBroker:t,tcData:e,log:r}),s.setItem(bC,JSON.stringify({date:Date.now(),version:c.repromptVersion}))}t.register("ui closed",(async e=>{const t=(null==e?void 0:e.repromptVersion)||0;s.setItem(vC,JSON.stringify({...a,version:t}))}))}))},function(e){let{localBroker:t,queryParams:n,log:i}=e;const r=n["mol.ads.cmp.stubConsent"],s=n["mol.ads.cmp.stubDissent"];(r||s)&&(i("stubs:",{stubConsent:r,stubDissent:s}),t.once("ui opened",(()=>{r?t.emit("consent to all"):t.emit("dissent to all");const e=r?"stubConsent":"stubDissent";t.emit("send event to bidmax",{type:"custom",payload:{event:e,module:"tcfv2"}})})))},function(e){let{queryParams:t,broker:n,localBroker:i,log:r}=e;t.privacy&&(n.once("TCFV2 controller ready",(()=>{r('removing "privacy" from url'),(0,b.WH)("privacy")})),i.register("get controller starting options",(()=>({showUi:!0,uiLevel:"Level2"}))))},async function(e){const{registerPluginBouncer:t,log:n,localBroker:i}=e,r=i.until("valid consent"),s=r.then((()=>Ka("consentedVendors"))),o=Promise.all([r,s]);t((async(e,t)=>{var i;await o;const r=n.extend(e);r("running bouncer");const s=(null==t||null===(i=t.gdpr)||void 0===i?void 0:i.enabledIfDissent)||function(e,t){if(!t.vendorIds||void 0===t.vendorIds.gdpr)return n("no vendorIds or gdpr defined"),!1;if(!1===t.vendorIds.gdpr)return n("plugin",e,"bounced because it is not supported where GDPR applies"),!1;if("N/A"===t.vendorIds.gdpr)return n("restrictions not applicable for",e),!0;if(!Array.isArray(t.vendorIds.gdpr))return n.warn("gdpr vendorIds must be an array, but got:",t.vendorIds.gdpr),!1;const i=t.vendorIds.gdpr.filter((e=>!d.has(e)));return!i.length||(n("plugin",e,"bounced because user have not consented to vendors:",i),!1)}(e,t)&&function(e,t){if(!t.purposeIds||void 0===t.purposeIds.gdpr)return n("no purposesIds or gdpr defined"),!1;if("N/A"===t.purposeIds.gdpr)return n("restrictions not applicable for",e),!0;if(!Array.isArray(t.purposeIds.gdpr))return n.warn("gdpr purposeIds must be an array, but got:",t.purposeIds.gdpr),!1;const i=t.purposeIds.gdpr.filter((e=>!a.purpose.consents[e]));return!i.length||(n("plugin",e,"bounced because user have not consented to purposes:",i),!1)}(e,t)&&function(e,t){if(!t.vendorIds||void 0===t.vendorIds.google)return!0;const i=t.vendorIds.google.filter((e=>!l.has(e)));return!i.length||(n("plugin",e,"bounced because user have not consented to google's additional consent:",i),!1)}(e,t)&&function(e,t){if(!t.legIntPurposeIds||void 0===t.legIntPurposeIds.gdpr)return!0;if(!Array.isArray(t.legIntPurposeIds.gdpr))return n.warn("gdprPurposeIds must be an array, but got:",t.purposeIds.gdpr),!1;const i=t.legIntPurposeIds.gdpr.filter((e=>!a.purpose.legitimateInterests[e]));return!i.length||(n("plugin",e,"bounced because user have not consented to legitimate interests:",i),!1)}(e,t);return r(`passed checks: ${s}`),s}));const[a]=await r;n("tcData",a);const d=new Set(await s),l=a.addtlConsent&&new Set(a.addtlConsent.substring(2).split(".").filter((e=>e)).map((e=>parseInt(e))));l&&n("using addtlConsent for bouncing")},async function(e){let{localStorage:t,localBroker:n,log:i,doc:r,getConfig:s,win:o,broker:a}=e;const d=Math.random().toString(36).substring(2),l="@mol-ads/mol-adverts",c=n.until("loaded"),u=function(){const e=s("tcfv2.version",""),t=s("tcfv2.scriptBase","//cmp.dmgmediaprivacy.co.uk/cmp"),i=s("tcfv2.uiVersion",""),r=s("tcfv2.uiScriptBase","//www.dailymail.co.uk/static/mol-fe/static/mol-fe-cmp"),o=s("tcfv2.uiFile","index.js"),a=`${s("tcfv2.gvlUiVersion","51")}`,d=s("tcfv2.cvlUiVersion","1"),l=s("tcfv2.backendUrl","//cmp.dmgprivacyint.co.uk/gdpr/consent/persist"),c=s("tcfv2.brand",{}),u=`${r}/${i}/${o}`,p=s("tcfv2.storeUserPreference",!1),h=s("tcfv2.nrvUiVersion","1");return n.emit("versions",{tcfv2Version:e,tcfv2UiVersion:i}),{uiLevel:"Level1",tcfv2Version:e,scriptBase:t,tcfv2UiVersion:i,tcfv2UiScriptBase:r,tcfv2UiFile:o,gvlUiVersion:a,cvlUiVersion:d,backendUrl:l,brand:c,uiScriptUrl:u,storeUserPreference:p,nrvUiVersion:h,controllerScriptBase:`${t}/${e}`,cvlVersion:d}}();function p(){let e=t.getItem(IC);return e||(e=(0,Qs.Z)(),t.setItem(IC,e)),e}async function h(e,t){await c;const n={ns:"@mol-ads/mol-ads-cmp",id:d,sender:l},i=t?{...n,action:e,payload:t}:{...n,action:e};o.postMessage(i,"*")}n.on("consent to all",(()=>{i("consenting to all"),h("consentToAll",{uuid:p()})})),n.on("dissent to all",(()=>{i("consenting to all"),h("dissentToAll",{uuid:p()})})),n.on("openUi",(e=>{let{reason:t,uiLevel:r}=e;const s=p();i(`opening tcfv2 banner, level: ${r}, reason: ${t}`),n.emit("send event to bidmax",{type:"custom",payload:{event:"ui-open",level:r,module:"tcfv2",reason:t}}),h("open",{uiLevel:r,uuid:s})})),n.on("start cmp",(async()=>{i("invoking get controller starting options");let e=(0,TC.Z)({},...await n.invokeAll("get controller starting options"));i("opts",e);const t=`${u.scriptBase}/${u.tcfv2Version}/index.js`,o=e.tcString&&id(e.tcString)||void 0,a=(null==o?void 0:o.vendorListVersion)||`${s("tcfv2.gvlUiVersion","51")}`,l=e.acmVersion;delete e.acmVersion,e=(0,TC.Z)({},u,{brokerId:d,gvlVersion:a,cvlVersion:l},e),i("controller starting options:",e),async function(e,t){return new Promise(((n,i)=>{const s=r.createElement("script");s.src=e,s.id="mol-ads-tcfv2-script",s.dataset.opts=JSON.stringify(t),s.onload=()=>n(),s.onerror=()=>i(new Error(`Error loading ${e}`)),r.head.appendChild(s)}))}(t,e).catch((e=>{i("error loading tcfv2 script",e)}))})),a.on("plugins enabled",(()=>{h("ads-initialised")})),o.addEventListener("message",(async e=>{const t=e.data;"@mol-ads/mol-ads-cmp"===t.ns&&t.id===d&&t.sender!==l&&("is_ready"===t.action&&a.emit("TCFV2 controller ready"),"level_changed"===t.action&&n.emit("send event to bidmax",{type:"custom",payload:{changed:!0,event:"ui-open",level:t.payload.currentLevel,module:"tcfv2"}}))}))},function(e){let{setConfig:t,log:n,localBroker:i}=e;(async function(e,t,n){e.on("local consent data resolved",(async i=>{var r;let s=await e.invoke("get local consent degree"),o=i;null!=i&&null!==(r=i.tcString)&&void 0!==r&&r.length||(t("no cached tcData, waiting for cmp"),[{tcData:o}]=await e.until("valid consent from controller"),t("tcData",o),s=await Ka("getConsentDegree")),t("valid consent: ",{tcData:o,consentDegree:s}),n("cmp.consent",s),e.emit("valid consent",o,s)}))})(i,n,t).catch(n.error)},function(e){let{localBroker:t}=e;__webpack_require__.g.openUi=e=>{const{reason:n="unknown",uiLevel:i="Level1"}="string"==typeof e?{uiLevel:e,reason:"unknown"}:e||{};t.emit("openUi",{reason:n,uiLevel:i}),t.emit("add user journey",`openRequest-${n}`)}},function(e){let t,{broker:n,localBroker:i,log:r}=e,s=!1;function o(){s||(r("onUnload called",t),r("force sync dispatcher"),s=!0,i.bus.setDispatcher((e=>e())),i.bus.globalTimeoutOverride=0,i.emit("send event to bidmax",{type:"page-unload",payload:t}))}SC.forEach((e=>{window.addEventListener(e,o,kC)})),n.once("system ready",(()=>{n.register("call for page-unload",(()=>({tcfv2:t}))),SC.forEach((e=>window.removeEventListener(e,o,kC)))})),i.register("add user journey",(e=>{t=(t?`${t},${e}`:e).substring(0,200)})),i.register("get journey so far",(()=>t))},function(e){let{getConfig:t,localBroker:n,log:i}=e;"mol"===t("site")&&n.interceptOnce("start cmp",((e,t)=>{var n;i("awaiting for molFeReact_LOADED"),null===(n=__webpack_require__.g)||void 0===n||n.DM.later(["molFeReact_LOADED"],(()=>{i("molFeReact_LOADED ready"),t()}))}))},async function(e){let{localBroker:t,broker:n,log:i,getConfig:r}=e;const{resolve:s,promise:o}=(0,D.PQ)();function a(){let{molGvlVersion:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.register("call for page analytics",(()=>({molGvlVersion:e})))}t.register("get local consent data",(e=>{const{useGeoDeviceVariantGVL:n,rollbackGeoVariant:o}=r("tcfv2.gvlMigration",EC);i(`useGeoDeviceVariantGVL: ${n}, rollbackGeoVariant: ${o}`);const{molGvlVersion:d,tcString:l}=e||{};i("molGvlVersion",d);const c=xC(d);if(o){const{tcString:n}=AC();if(!c)return a(e),PC(),void s();if(n){const r=id(n).vendorListVersion.toString();i("rolling back migrated user to",{molGvlVersion:r}),t.emit("add user journey","geoVersionRolledBack"),t.once("loaded",(e=>{let{tcData:t}=e;a(t),PC(),s()}));const o=(0,I.ei)(e,["acmVersion","addtlConsent","nrvString","nrvVersion","repromptVersion"]);return o.tcString=n,o.molGvlVersion=r,{src:"geoGVLMigrator",tcData:o}}return i("no backup, prompting user"),a(e),t.emit("add user journey","rollbackWithoutBackup"),s(),{src:"geoGVLMigrator",tcData:{tcString:""}}}{const r=!l;if(r||c||(i("user not migrated yet, saving state for possible rollback"),u={tcString:l},localStorage.setItem(CC,JSON.stringify(u))),n){if(i("using geo device variant GVL"),t.register("get controller starting options",(()=>({useGeoDeviceVariantGVL:!0}))),function(e,t){e.on("ui closed",(()=>{t("user reprompted, clearing GVL migration status"),PC()}))}(t,i),!c)return i("migration happening now"),t.on(r?"ui closed":"loaded",(e=>{let{tcData:n}=e;a(n),xC(n.molGvlVersion)?(t.emit("add user journey","geoVersionMigrated"),i("migration complete")):i("migration not complete"),s()})),{src:"geoGVLMigrator",tcData:(0,I.ei)(e,["acmVersion","addtlConsent","molGvlVersion","nrvString","nrvVersion","repromptVersion","tcString"])};a(e),s()}else r?t.on("ui closed",(e=>{let{tcData:t}=e;a(t)})):a(e),s()}var u})),await o,i("gvlGeoMigration module complete")},function(e){let{localBroker:t,pageCriteria:n,device:i,getConfig:r}=e;const s=r("cmp.model","tcfv2");t.register("get controller starting options",(()=>({geo:(null==n?void 0:n.geo.toLowerCase())||"",renderPlatform:i||r("tcfv2.renderPlatform",""),platform:"web",gvlEnvironment:"web",cmpModel:s})))},function(e){let{win:t,localBroker:n,log:i}=e;t.__tcfapi("addEventListener",2,(e=>{e.cached?i("Event came from cache re-run, ignoring:",e):n.emit("api event",e.eventStatus,e)})),n.on("api event","tcloaded",(function(e){const t=function(e){return!e.tcString.length}(e);t?(n.emit("add user journey","newUser"),n.emit("openUi",{reason:"newUser",uiLevel:"Level1"})):(n.emit("add user journey","loaded"),n.emit("send event to bidmax",{type:"custom",payload:{event:"loaded",module:"tcfv2"}})),n.emit("loaded",{tcData:e,newUser:t})})),n.on("api event","cmpuishown",(function(e){n.emit("send event to bidmax",{type:"custom",payload:{event:"ui-opened",module:"tcfv2",reason:r}}),n.emit("add user journey","uiOpened"),n.emit("ui opened",{tcData:e})})),n.on("api event","useractioncomplete",(async function(e){i("uiClosed",e),await n.invokeAll("ui closed",{tcData:e}),n.emit("send event to bidmax",{type:"custom",payload:{event:"ui-closed",module:"tcfv2",reason:r}}),n.emit("add user journey","uiClosed"),r="unknown"})),async function(e){let{localBroker:t,log:n}=e;const i=t.until("ui closed");let[{tcData:r,newUser:s=!1}]=await t.until("loaded");n("cmp loaded",{tcData:r,newUser:s}),s&&([{tcData:r}]=await i,n("cmp ui closed",{tcData:r})),t.emit("valid consent from controller",{tcData:r,newUser:s})}({localBroker:n,log:i}).catch(i);let r="unknown";n.intercept("openUi",((e,t)=>{let[n,{reason:i}]=e;return r=i,t()}))},async function(e){const{broker:t,log:n}=e,i=async function(e){let{localBroker:t,log:n,getConfig:i}=e;const r=i("tcfv2.par",{vendorIds:{gdpr:[755]},purposeIds:{gdpr:[1,3,4]}}),[s,o]=await t.until("valid consent");n("consentDegree",o);const a=id(s.tcString).vendorListVersion,d={consent:DC[o],gdpr:s.gdprApplies?"1":"0",gdpr_consent:s.tcString,cmp:i("cmp.model","tcfv2"),iabv:a},l=await Je("tcfv2.personalisedAds",r);d.google_consent=l;const c=l?0:1,u=l?d:{...d,npa:c};return n("dfp targeting:",u),u}(e);t.emit("set page level targeting",i),((e,t)=>{let{broker:n,getConfig:i,log:r}=e;i("tcfv2.setGptPersonalisedAdsState",!0)&&n.once("gpt initialized",(async e=>{const{google_consent:n}=await t;n?r("google personalised ads enabled"):(r("setting non-personalised ads"),e.pubads().setRequestNonPersonalizedAds(1))}))})(e,i);const r=await i,s=r.google_consent?0:1,o={cust_params:{...r},npa:s};n("video tags",o),t.emit("sync video tags update",o),await n("done with gpt")},function(e){let{broker:t,log:n,doc:i,win:r}=e;t.on("openCmpBanner",(()=>{r.openUi({uiLevel:"Level2",reason:"userRequest"})})),t.once("dom ready",(()=>{i.querySelectorAll("a[href^='javascript:window.__cmp.a.push([\\'openSettings\\']']").forEach((e=>{e.href="javascript:window.openUi({ uiLevel: 'Level2', reason: 'userRequest' })"}))}))},function(e){let{log:t,localBroker:n,tcfv2Opts:i}=e;i&&(t("tcfv2Opts",i),n.register("get local consent data",(()=>({src:"consentDataFromTCFV2Opts",tcData:{tcString:i.tcString||"",nrvString:null==i?void 0:i.nrvString,nrvVersion:null==i?void 0:i.nrvVersion,addtlConsent:null==i?void 0:i.addtlConsent,acmVersion:null==i?void 0:i.cvlVersion}}))))}];(0,qe.fo)("tcfv2-v2",{gdpr:{enabledIfDissent:!0},initTimeout:O.RD,async init(e){const{removePlugins:t,isTCFV2Jurisdiction:n,getConfig:i,log:r}=e;if(t(["tcfv2"]),!await n(i))return void r("tcfv2 is not supported for this geo, bailing");const s=function(e){const{ownName:t}=e,n=new v.Ys,i=n.broker(t);return e.log.enabled&&function(e){const t=(0,qe.s3)("message-trace");if(t){const n={"ads.debug.messageTrace.broker":"*"};t.init({...e,queryParams:n})}}({...e,broker:i}),n}(e),o=async function(e,t,n){const{log:i}=t,r=new Set(n.map((e=>e.name))),s=setInterval((()=>i("waiting for",[...r])),5e3);await Promise.all(n.map((async n=>{i("starting",n.name);try{await n(function(n){const r=e.broker([t.broker.id,n.name].filter((e=>e)).join("::")),s=i.extend(n.name);return{...t,localBroker:r,log:s}}(n))}catch(e){i.error("error starting",n.name,e)}r.delete(n.name)}))),clearInterval(s)}(s,e,RC);s.start(!1),await o}}),__webpack_require__(831);var NC=__webpack_require__(1909),MC=__webpack_require__(2249),LC=__webpack_require__(7436),UC=__webpack_require__(5446),jC=__webpack_require__(3605),BC=__webpack_require__(1501),qC=__webpack_require__(1301);function FC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function VC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FC(Object(n),!0).forEach((function(t){(0,NC.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var zC={mimes:function(e){return Array.isArray(e)&&e.length>0&&e.every((function(e){return"string"==typeof e}))},minduration:function(e){return(0,LC.U)(e)},maxduration:function(e){return(0,LC.U)(e)},protocols:function(e){return Array.isArray(e)&&e.every((function(e){return e>=1&&e<=10}))},w:function(e){return(0,LC.U)(e)},h:function(e){return(0,LC.U)(e)},startdelay:function(e){return(0,LC.U)(e)},placement:function(e){return(0,LC.U)(e)&&e>=1&&e<=5},linearity:function(e){return-1!==[1,2].indexOf(e)},skip:function(e){return-1!==[0,1].indexOf(e)},skipmin:function(e){return(0,LC.U)(e)},skipafter:function(e){return(0,LC.U)(e)},sequence:function(e){return(0,LC.U)(e)},battr:function(e){return Array.isArray(e)&&e.every((function(e){return e>=1&&e<=17}))},maxextended:function(e){return(0,LC.U)(e)},minbitrate:function(e){return(0,LC.U)(e)},maxbitrate:function(e){return(0,LC.U)(e)},boxingallowed:function(e){return-1!==[0,1].indexOf(e)},playbackmethod:function(e){return Array.isArray(e)&&e.every((function(e){return e>=1&&e<=6}))},playbackend:function(e){return-1!==[1,2,3].indexOf(e)},delivery:function(e){return Array.isArray(e)&&e.every((function(e){return e>=1&&e<=3}))},pos:function(e){return(0,LC.U)(e)&&e>=1&&e<=7},api:function(e){return Array.isArray(e)&&e.every((function(e){return e>=1&&e<=6}))}},$C={context:function(e){return e!==qC.Oh},mimes:zC.mimes,minduration:zC.minduration,maxduration:zC.maxduration,protocols:zC.protocols},HC={code:"sovrn",supportedMediaTypes:[qC.Mk,qC.pX],gvlid:13,isBidRequestValid:function(e){var t,n=null==e||null===(t=e.mediaTypes)||void 0===t?void 0:t.video;return!(!e.params.tagid||isNaN(parseFloat(e.params.tagid))||!isFinite(e.params.tagid)||n&&!Object.keys($C).every((function(e){return $C[e](n[e])})))},buildRequests:function(e,t){try{var n,i,r,s,o=[];(0,LC.yi)(e,(function(e){!r&&e.userIdAsEids&&(r=e.userIdAsEids).forEach((function(e){e.uids&&e.uids[0]&&"criteo.com"===e.source&&(s=e.uids[0].id)})),e.schain&&(i=i||e.schain),n=n||(0,LC.An)("iv",e.params);var t=e.getFloor&&"function"==typeof e.getFloor?e.getFloor({currency:"USD",mediaType:e.mediaTypes&&e.mediaTypes.banner?"banner":"video",size:"*"}):{};t.floor=t.floor||(0,LC.An)("bidfloor",e.params);var a={adunitcode:e.adUnitCode,id:e.bidId,tagid:String((0,LC.An)("tagid",e.params)),bidfloor:t.floor};if((0,UC.Z)(e,"mediaTypes.banner")){var d=(0,UC.Z)(e,"mediaTypes.banner.sizes")||e.sizes,l=(d=(d=(0,LC.kJ)(d)&&(0,LC.kJ)(d[0])?d:[d]).filter((function(e){return(0,LC.kJ)(e)}))).map((function(e){return{w:parseInt(e[0],10),h:parseInt(e[1],10)}}));a.banner={format:l,w:1,h:1}}(0,UC.Z)(e,"mediaTypes.video")&&(a.video=function(e){var t={},n=(0,UC.Z)(e,"sizes"),i=(0,UC.Z)(e,"mediaTypes.video",{}),r=(0,UC.Z)(e,"params.video",{}),s={};if(n){var o=Array.isArray(n[0])?n[0]:n;s.w=o[0],s.h=o[1]}else if(Array.isArray(i.playerSize)){var a=Array.isArray(i.playerSize[0])?i.playerSize[0]:i.playerSize;s.w=a[0],s.h=a[1]}var d=VC(VC(VC({},s),i),r);return Object.keys(zC).forEach((function(e){d.hasOwnProperty(e)&&(zC[e](d[e])?t[e]=d[e]:(0,LC.yN)("The OpenRTB video param ".concat(e," has been skipped due to misformating. Please refer to OpenRTB 2.5 spec.")))})),t}(e)),a.ext=(0,LC.An)("ext",e.ortb2Imp)||void 0;var c=(0,LC.An)("segments",e.params);c&&(a.ext=a.ext||{},a.ext.deals=c.split(",").map((function(e){return e.trim()}))),o.push(a)}));var a=t.ortb2||{},d=a.site||{};d.page=t.refererInfo.page,d.domain=t.refererInfo.domain;var l={id:(0,LC._d)(),imp:o,site:d,user:a.user||{}};i&&(l.source={ext:{schain:i}}),t.gdprConsent&&((0,jC.N)(l,"regs.ext.gdpr",+t.gdprConsent.gdprApplies),(0,jC.N)(l,"user.ext.consent",t.gdprConsent.consentString)),t.uspConsent&&(0,jC.N)(l,"regs.ext.us_privacy",t.uspConsent),r&&((0,jC.N)(l,"user.ext.eids",r),s&&(0,jC.N)(l,"user.ext.prebid_criteoid",s));var c="https://ap.lijit.com/rtb/bid?src=prebid_prebid_7.47.0";return n&&(c+="&iv=".concat(n)),{method:"POST",url:c,data:JSON.stringify(l),options:{contentType:"text/plain"}}}catch(e){(0,LC.H)("Could not build bidrequest, error deatils:",e)}},interpretResponse:function(e){var t=e.body,n=t.id,i=t.seatbid;if(!n||!i||!Array.isArray(i))return[];try{return i.filter((function(e){return e})).map((function(e){return e.bid.map((function(e){var t,n={requestId:e.impid,cpm:parseFloat(e.price),width:parseInt(e.w),height:parseInt(e.h),creativeId:e.crid||e.id,dealId:e.dealid||null,currency:"USD",netRevenue:!0,mediaType:e.nurl?qC.Mk:qC.pX,ttl:(null===(t=e.ext)||void 0===t?void 0:t.ttl)||90,meta:{advertiserDomains:e&&e.adomain?e.adomain:[]}};return e.nurl?n.ad=decodeURIComponent("".concat(e.adm,'<img src="').concat(e.nurl,'">')):n.vastXml=decodeURIComponent(e.adm),n}))})).flat()}catch(e){return(0,LC.H)("Could not interpret bidresponse, error details:",e),e}},getUserSyncs:function(e,t,n,i){try{var r=[];if(t&&0!==t.length){if(e.iframeEnabled){var s=t.filter((function(e){return(0,UC.Z)(e,"body.ext.iid")})).map((function(e){return e.body.ext.iid})),o=[];n&&n.gdprApplies&&"string"==typeof n.consentString&&o.push(["gdpr_consent",n.consentString]),i&&o.push(["us_privacy",i]),s[0]&&(o.push(["informer",s[0]]),r.push({type:"iframe",url:"https://ap.lijit.com/beacon?"+o.map((function(e){return e.join("=")})).join("&")}))}e.pixelEnabled&&t.filter((function(e){return(0,UC.Z)(e,"body.ext.sync.pixels")})).reduce((function(e,t){return e.concat(t.body.ext.sync.pixels)}),[]).map((function(e){return e.url})).forEach((function(e){return r.push({type:"image",url:e})}))}return r}catch(e){return[]}}};(0,BC.dX)(HC),(0,MC.z)("sovrnBidAdapter"),(0,qe.fo)("bidders.sovrn.display",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[13]},run(e){let{broker:t,getConfig:n,log:i}=e;const r=Object.entries(n("plugins.bidders.sovrn.display",{})).map((e=>{var t;let[n,i]=e;return{code:n,mediaTypes:{banner:{sizes:(null===(t=(0,_e.get)(n))||void 0===t?void 0:t.size)||[]}},bids:[{bidder:"sovrn",params:{tagid:i.toString()}}]}}));i.extend("adUnits")(r),t.register("provide prebid adUnits",(()=>r))}}),(0,qe.fo)("bidders.sovrn.video",{disableIfNoAdsServable:!0,purposeIds:{gdpr:[1]},vendorIds:{gdpr:[13]},run(e){let{broker:t,getConfig:n,log:i}=e;t.register("provide video adUnits",(e=>{const t=n(`plugins.bidders.sovrn.video.${e}`);if(i({code:e,tagid:t}),!t)return void console.warn(`no tag id found for pos ${e}`);const r={bids:[{bidder:"sovrn",params:{tagid:t}}]};return i.info("providing ad unit",r),r}))}});const WC=(e,t,n)=>{if("IMG"!==n.tagName)return!0;if(t.some((e=>n.closest(e))))return!1;const i=n.width||parseInt(n.getAttribute("width"),10),r=(e=>{if("IMG"!==e.tagName)return e.clientHeight;const t=parseInt(e.getAttribute("width"),10)||e.width,n=t/(parseInt(e.getAttribute("height"),10)||e.height),i=e.width||t;return Math.floor(i/n)})(n);return r>e.height+70||r<e.height+70&&r>=e.height&&i>e.width+90};(0,qe.fo)("page.articleImages",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:async e=>{let{broker:t,getConfig:n,doc:i,pageMeta:r,pageCriteria:s,log:o}=e;if("article"!==(null==s?void 0:s.pageType))return void o("not on article page, bailing");const a=n("plugins.page.articlesImages.selectors",["img[id^=i-]"]),d=n("plugins.page.articlesImages.exclusionsSelectors",[".mol-product"]),l=n("plugins.page.articleImages.sizes",{desktop:{width:300,height:300},mobile:{width:200,height:150}}),{renderPlatform:c}=r||{renderPlatform:"desktop"},u="mobile"===c?l.mobile:l.desktop,p=t.until("dom ready").then((()=>{const e=(e=>{let{doc:t,imageSelectors:n,imageExludeContainersSelector:i,minImageSizes:r}=e;const s=WC.bind(null,r,i);return Array.from(t.querySelectorAll(n.join(","))).filter(s).map((e=>({element:e})))})({doc:i,imageSelectors:a,imageExludeContainersSelector:d,minImageSizes:u}).map((e=>{var t,n;let{element:i}=e;return{url:(null===(t=i.dataset)||void 0===t?void 0:t.gallerySrc)||(null===(n=i.dataset)||void 0===n?void 0:n.src)||(null==i?void 0:i.src),caption:null==i?void 0:i.alt}}));return o("images",e),e}));t.on("get article images",(async e=>{e(await p)}))}});const ZC=(0,_.x)("processQueue"),GC=v.ZP.broker("processQueue");function XC(e){if(function(e){return"object"==typeof e&&null!==e&&"string"==typeof e.scope}(e))!function(e){ZC("api item",e),GC.emit("api message",e.scope,e.data)}(e);else if(function(e){const{adverts:t}=__webpack_require__.g;return Array.isArray(e)&&3===e.length&&"FacadeQueueItem"===e[0]&&"function"==typeof t[e[1]]&&Array.isArray(e[2])}(e))!function(e){const{adverts:t}=__webpack_require__.g,[,n,i]=e;ZC("calling",n,i);try{t[n](...i)}catch(e){ZC.error(e)}}(e);else if("function"==typeof e)try{e()}catch(t){ZC.error("error processing item:",e,t)}else ZC.error("unsupported task type:",e)}Object.assign(__webpack_require__.g.adverts,e);const KC=pe;__webpack_require__.g.adverts.startTime=m.B,__webpack_require__.g.adListLoader=W,__webpack_require__.g.adsDescriptions=_e,__webpack_require__.g.adsRenderer=we,__webpack_require__.g.DfpServer=Te,__webpack_require__.g.adsTrackers={getRequestedAds:KC},__webpack_require__.g.AdIntegrator=Ie,__webpack_require__.g.AdBehaviour=t,__webpack_require__.g.AdImpression=Ne(),__webpack_require__.g.AdEvents=Le(),v.ZP.broker("molEntry").register("call for page analytics",(()=>({configVersion:(0,y.U2)("__generated.commit.sha"),bundle:"mol",cmVersion:(0,y.U2)("__generated.rulesJs.version"),cmCluster:(0,y.U2)("__generated.rulesJs.cluster")})));const JC=(e,t,n={})=>Object.entries(e).reduce(((e,[n,i])=>{const r=(t?t+".":"")+n;if("default"===n)e[t]=i;else if("function"==typeof i)e[r]=i;else{if(i)return JC(i,r,e);console.warn(`Plugin "${r}" does not export anything. Check the way it's being imported in to the project.`)}return e}),n),YC=Object.assign({},n,JC(g)),QC=["api","site","adsFree","message-trace","conditionalEnable","imageGallery","adListLoader","scriptLoader","prebid","pageVisibility","runtimeMessages","sticky.mpus","sticky.banner","version","skins","performance","nonAdServable","smartScheduler","messagePluginsFromCreatives","slots.descriptions","conditionalLoad","analytics.coreMetrics","analytics.reportPlugins","takeovers.videowallpaper","adPageType","slotDefinition","slots.delayMount","userId","domain","page.placement","slots.display-handlers.skies",...(0,y.U2)("plugins.enabled",[])];async function eE(){await async function(e){let{plugins:t=He,context:n={},mandatory:i=We,messageBus:r}=e;t={...t,...nt((0,qe.uM)())},$e=[],Ve=r,ze=Ve.broker("plugin-manager"),await tt(t,n),ze.emit("plugins initialized"),ze.register("get all plugins",(()=>t));for(const e of i)et(t,e,n);const s=Xe.length?await async function(e){const t=Be(),n=t.map((t=>[t,e[t]])).filter((e=>{let[,t]=e;return t})),i=t.map((t=>[t,e[t]])).filter((e=>{let[,t]=e;return!t})).map((e=>{let[t]=e;return t})),r=(await Promise.all(n.map((async e=>{let[t,n]=e;return await Je(t,n)&&t})))).filter((e=>e));return(0,y.t8)("plugins.enabled",[...r,...i]),r}(t):Be();for(const e of s)et(t,e,n);ze.emit("plugins enabled",$e),Ve.start()}({plugins:YC,messageBus:v.ZP,context:kp}),Object.assign(__webpack_require__.g.adverts,e),function(){const e=window.adverts,t=Array.isArray(e.queue)?e.queue:[];for(ZC("There are",t.length,"items on the queue"),window.__dmgCmp=window.__dmgCmp||[];window.__dmgCmp.length;)XC(window.__dmgCmp.shift());for(window.__dmgCmp.push=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>XC(e)))};t.length;)XC(t.shift());e.queue={push(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>XC(e)))}}}()}(0,y.t8)("plugins.enabled",QC),(0,y.t8)("tcfv2.uuid.useRtaId",!0);const tE=(0,y.U2)("cwv.barriers.global","ads");tE?DM.later(tE,eE):eE()})()})();