const navLoginId="gnav_login",navLogoutId="gnav_logout";function navScript(){const e=document.getElementById("global-nav-search-box"),t=document.getElementById("global-nav-search-box-input"),n=document.getElementById("global-nav-search-box-close"),l=document.getElementById("global-nav-search-box-search"),s=document.getElementById("hamburgerMenuOpener"),o=document.getElementById("searchButtonWrapper"),a=document.getElementById("searchInputWrapper"),d=document.getElementsByName("menutoggle")[0],c=document.getElementById("label-tab-open-helpMenu"),r=document.getElementById("label-tab-close-helpMenu");o.ariaExpanded=!1,null!=c&&c.addEventListener("keypress",e=>{e.preventDefault(),"Enter"!==e.key&&" "!==e.key||(c.click(),r.focus())}),null!=r&&r.addEventListener("keypress",e=>{e.preventDefault(),"Enter"!==e.key&&" "!==e.key||(r.click(),c.focus())}),s.addEventListener("keypress",e=>{e.preventDefault(),"Enter"!==e.key&&" "!==e.key||(d.checked=!d.checked)});const i=()=>{a.style.display="block"!==a.style.display?"block":"none",l.ariaExpanded="false"!==l.ariaExpanded?"false":"true",setTimeout(()=>t.focus(),1500)};null!=o&&(o.addEventListener("keypress",e=>{e.preventDefault(),"Enter"!==e.key&&" "!==e.key||i()}),o.addEventListener("click",()=>{i()}));const u=(()=>({isLoggedIn(e){if("boolean"==typeof e)return e;const t=u.readCookie("amexsessioncookie"),n=u.readCookie("blueboxvalues"),l=u.readCookie("SMSESSION");let s=!1;if(null!==t&&""!==t){const e=(new Date).getTime(),n=/uts=([^|]+)/.exec(t);if(!n)return!1;(e-parseInt(n[1],10))/6e4<5&&(s=!0)}else(null!==n&&""!==n||null!==l&&"LOGGEDOFF"!==l)&&(s=!0);return s},readCookie(e){const t=document.cookie.split(";"),n=`${e}=`;let l=null;for(let e=0;e<t.length;e+=1){const s=t[e].trim();if(0===s.indexOf(n)){l=s.substring(n.length,s.length);break}}return l},appendQueriesToUrl({url:e,queries:t}){let n=e;return t.forEach(({key:t,value:l})=>{if(n.indexOf(`${t}=`)>-1){const s=new RegExp(`[\\?&]${t}=([^&#]*)`),o=s.exec(e)[0].charAt(0);let a=e.replace(s,`${o}${t}=${l}`);return"undefined"===l&&(a=a.replace(new RegExp(`[\\?&]${t}=${l}`),"")),void(n=a)}if("undefined"===l)return;const s=n.indexOf("?")>-1?"&":"?";n=`${n}${s}${t}=${l}`}),n},appendDestPageQuery:(e,t)=>u.appendQueriesToUrl({url:e,queries:[{key:"DestPage",value:encodeURIComponent(t)}]}),updateAuthView(e){try{const t=document.getElementById(navLogoutId),n=document.getElementById(navLoginId);u.isLoggedIn(e)?(t.style.display="inline-block",n.style.display="none"):(t.style.display="none",n.style.display="inline-block")}catch(e){console.warn(e)}},setLoginDestPage(e){try{const t=document.getElementById(navLoginId);t.href=u.appendDestPageQuery(t.href,e)}catch(e){console.warn(e)}},setLogoutDestPage(e){try{const t=document.getElementById(navLogoutId);t.href=u.appendDestPageQuery(t.href,e)}catch(e){console.warn(e)}},handleKeyPressed(e,t){"Enter"!==e.key&&" "!==e.key||null===document.getElementById(t)||document.getElementById(t).click()},handleChecking(e,t){e.checked?t.ariaExpanded=!0:t.ariaExpanded=!1},searchInputEventListener(e){n.classList.add("show-icon"),e&&n.classList.remove("show-icon")},closeSearchIconEventListener(){t.value="",n.classList.remove("show-icon")},searchIconEventListener(t){t?e.submit():console.warn("Search term is empty or invalid. Please try again.")}}))(),m=document.getElementById("menu");if(null!=m){const e=m.children;for(let t=0;t<e.length;t+=1){const n=e[t].getElementsByTagName("label"),l=n[0],s=n[1];l.addEventListener("keypress",e=>{u.handleKeyPressed(e,e.target.id),s.focus()}),s.addEventListener("keypress",e=>{u.handleKeyPressed(e,e.target.id),l.focus()})}}const y=document.getElementById("smallMenuList");if(null!=y){const e=y.children;for(let t=0;t<e.length-1;t+=1){const n=document.querySelectorAll("#smallMenuList > li > label")[t];n.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||n.click()});const l=e[t].getElementsByTagName("input"),s=document.getElementById(l[0].id),o=e[t].getElementsByTagName("label")[0];s.addEventListener("change",()=>{u.handleChecking(s,o)})}}d&&d.addEventListener("change",()=>{document.activeElement.className.includes("hiddenSmDown")?d.checked?document.getElementsByName("closemenudesktop")[0].focus():document.getElementsByName("openmenudesktop")[0].focus():document.activeElement.className.includes("hiddenMdUp")?d.checked?document.getElementsByName("closemenumobile")[0].focus():document.getElementsByName("openmenumobile")[0].focus():document.activeElement.focus()}),t&&t.addEventListener("input",()=>{u.searchInputEventListener(""===t.value)}),n&&(n.addEventListener("click",()=>{u.closeSearchIconEventListener()}),n.addEventListener("keypress",e=>{"Enter"!==e.key&&" "!==e.key||u.closeSearchIconEventListener()})),l&&(l.addEventListener("click",()=>{u.searchIconEventListener(t.value)}),l.addEventListener("keypress",e=>{"Enter"!==e.key&&" "!==e.key||u.searchIconEventListener(t.value)}));const g=document.getElementsByName("closemenudesktop")[0];g&&g.addEventListener("keydown",e=>{"Tab"===e.key&&(e.preventDefault(),setTimeout(()=>document.querySelectorAll("#largeMenuList > li > label")[0].focus(),0))});const E=document.querySelectorAll("#largeMenuList > li > label")[0];E&&E.addEventListener("keydown",e=>{"Tab"===e.key&&!0===e.shiftKey&&(e.preventDefault(),setTimeout(()=>g.focus(),0))});const k=document.getElementById("largeMenuList");if(null!=k){const e=k.children;for(let t=0;t<e.length-1;t+=1){const e=document.querySelectorAll("#largeMenuList > li > label")[t];e.addEventListener("keydown",t=>{"Enter"!==t.key&&" "!==t.key||e.click()})}}const p=document.getElementsByName("closemenumobile")[0],h=document.querySelectorAll("#smallMenuList > li > label")[0];p&&p.addEventListener("keydown",e=>{"Tab"===e.key&&(e.preventDefault(),setTimeout(()=>h.focus(),0))}),h&&h.addEventListener("keydown",e=>{"Tab"===e.key&&!0===e.shiftKey&&(e.preventDefault(),setTimeout(()=>p.focus(),0))});const v=document.getElementById("keyBoardHandler");return v&&v.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),v.click())}),u.updateAuthView(),window.AmexNavigation={updateAuthView:u.updateAuthView,setLoginDestPage:u.setLoginDestPage,setLogoutDestPage:u.setLogoutDestPage,handleKeyPressed:u.handleKeyPressed,handleChecking:u.handleChecking},u}navScript();