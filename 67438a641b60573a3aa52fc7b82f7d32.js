(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2242],{58883:function(t,e){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,i)}return o}function r(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach(function(e){var i,n,a;i=t,n=e,a=r[e],(n=function(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!==o(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}(n))in i?Object.defineProperty(i,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(this instanceof n))return new n(t);this._init(t)}n.prototype={_init:function(t){var e=t.width,o=t.elements,i=t.onFloatingStart,r=t.onFloatingEnd,n=t.offset,a=t.dimensions,s=t.viewportMargin,l=t.providers,c=t.launchPolicy,d=t.stickingThreshold,h=t.pauseOnExit,u=t.backgroundImage,p=t.closeButton,f=t.area,m=t.edgesTriggeringFloating,g=t.floatingAnimation;this.MIN_WIDTH=300,this.DEFAULT_WIDTH=window.innerWidth/4,this.PLAYER_API_MESSAGES={pause:JSON.stringify({method:"pause",params:{}})},this.area=void 0===f?"":f,this.edgesTriggeringFloating=void 0===m?"both":m,this.providers=void 0===l?["OnettvVideo","pulsevideo"]:l,this.elements=o||this._getDefaultElements(),this.launchPolicy=void 0===c?"FLOAT_FIRST_PLAYER_AND_OTHER_WHEN_IS_PLAYING":c,this.stickingThreshold=void 0===d?.8:d,this.bgImage=void 0===u?"https://ocdn.eu/images/pulscms/OWU7MDA_/20ec3038d7c7d1637e04da3395de954d.png":u,this.floatingAnimation=void 0===g||g,this.defaultOffsetForFloatingElement=this._overwritePropertiesForEachKey(this._createObjectForEachKey(this.providers),{top:0,right:0,bottom:null,left:null}),this.offset=this._createPlayersParameters(void 0===n?{}:n,this.defaultOffsetForFloatingElement),this.viewportMargin={top:0,right:0,bottom:0,left:0},s&&this._updateViewportMargin(s),this.width=this._standardizeWidth(e),this.height=9/16*this.width,this.defaultDimensionsFloatingElement=this._overwritePropertiesForEachKey(this._createObjectForEachKey(this.providers),{width:this.width,height:this.height}),this.dimensions=this._createPlayersParameters(void 0===a?{}:a,this.defaultDimensionsFloatingElement,this._validateDimensions()),this.defaultCloseButton=this._overwritePropertiesForEachKey(this._createObjectForEachKey(this.providers),{template:"default",position:"left",color:{background:"default",border:"default",mark:"default"}}),this.closeButton=this._createPlayersParameters(void 0===p?{}:p,this.defaultCloseButton),this.pauseOnExit=void 0!==h&&h,this.onFloatingStart="function"==typeof i?i:null,this.onFloatingEnd="function"==typeof r?r:null,this.isFloatingEnabled=!1,this.isFloatingRemoved=!1,this.floatingElement=null,this.providerName="",this.videoPlayers={},this.isFloating=!1,this.dynamicStyles=this._createStyles(),this.$disableEl=this._createDisableElement(),this._launchPolicy(),this._addCloseFloatingAction()},_launchPolicy:function(){switch(this.launchPolicy){case"FLOAT_WHEN_PLAYER_IS_PLAYING":this._clearCallbacksFromEventListener(),this._listenVideoPlayers("pulsevideo","PLAYING");break;case"FLOAT_FIRST_PLAYER_AND_OTHER_WHEN_IS_PLAYING":this._prepareVideoPlayers(1),this._clearCallbacksFromEventListener(),this._listenVideoPlayers("pulsevideo","PLAYING");break;default:this._prepareVideoPlayers()}},_listenVideoPlayers:function(t,e){var o=this,i=function(i){if(i.origin.includes("pulsembed.eu")&&i.data&&o._checkPostMessageFromProvider(t,e,i.data)){for(var r="".concat(o.area,' [data-provider-name="').concat(t,'"] iframe'),n=document.querySelectorAll(r.trim()),a=0;a<n.length;a++)if(n[a].contentWindow===i.source){var s=n[a].parentNode;s&&o._validateElement(s)&&(o._clearVideoPlayers(),o.addVideoPlayer(s))}}};this._addCallbacksFromEventListener(i),window.addEventListener("message",i,!1)},_addCallbacksFromEventListener:function(t){window.floatingPlayerCallbacks||(window.floatingPlayerCallbacks=new Set),t&&window.floatingPlayerCallbacks.add(t)},_clearCallbacksFromEventListener:function(){window.floatingPlayerCallbacks&&(window.floatingPlayerCallbacks.forEach(function(t){return window.removeEventListener("message",t,!1)}),window.floatingPlayerCallbacks.clear())},_checkPostMessageFromProvider:function(t,e,o){if("pulsevideo"===t&&"string"==typeof o&&o.includes("playerEvent")){var i=JSON.parse(o);if(i.playerEvents&&(i.playerEvents.message=JSON.parse(i.playerEvents.message),i.playerEvents.message.eventName===e)||i.playerEvent&&i.playerEvent.eventName.toUpperCase()===e)return!0}return!1},_getDefaultElements:function(){for(var t="",e=0;e<this.providers.length;e++)t+='[data-provider-name="'.concat(this.providers[e],'"],');return t=t.slice(0,-1),document.querySelectorAll(t)},_validateElements:function(t){for(var e=t.length,o=[],i=0;i<e;i++)o.push(this._validateElement(t[i]));return o},_validateElement:function(t){if(t.dataset.providerName&&-1!==this.providers.indexOf(t.dataset.providerName))return t},_prepareVideoPlayers:function(t){for(var e=t&&this.elements.length?t:this.elements.length,o=0;o<e;o++)this.addVideoPlayer(this.elements[o])},_getVideoPlayers:function(){return this.videoPlayers},_getVideoPlayer:function(t){if("string"==typeof t&&Object.prototype.hasOwnProperty.call(this.videoPlayers,t))return this.videoPlayers[t]},_sendMessageToPlayer:function(t,e){t.contentWindow.postMessage(e,"*")},_addCloseFloatingAction:function(){var t=this;this.$disableEl.onclick=function(){t.isFloatingRemoved=!0;var e=t.floatingElement.element.querySelector("iframe"),o=t.PLAYER_API_MESSAGES.pause;e&&t.pauseOnExit&&t.isFloatingRemoved&&t._sendMessageToPlayer(e,o),t._floatingOff(),window.dataLayer.push({event:"player",ga:{eventCategory:"click",eventAction:"float",eventLabel:"x"}})}},setViewportMargin:function(t){this._updateViewportMargin(t).wasUpdate&&this._reloadObservers()},_isViewportEdgeAllowsFloating:function(t){return("bottom"!==this.edgesTriggeringFloating||!(t.boundingClientRect.top<t.intersectionRect.top))&&("top"!==this.edgesTriggeringFloating||!(t.boundingClientRect.bottom>t.intersectionRect.bottom))},_addToObserver:function(t){var e=this;if("IntersectionObserver"in window){var o=this.viewportMargin,i=o.top,r=o.bottom,n=o.left,a=o.right,s={rootMargin:"-".concat(i,"px -").concat(a,"px -").concat(r,"px -").concat(n,"px"),threshold:this.stickingThreshold};try{t.observer=new window.IntersectionObserver(function(o){o.forEach(function(o){if(e.isFloatingRemoved)return t.observer.disconnect(),!1;if(!e.isFloatingEnabled)return o.isIntersecting&&(e.isFloatingEnabled=!0),!1;if(t.entry=o,o.intersectionRatio<=e.stickingThreshold&&!e.isFloating&&t.element.getElementsByTagName("iframe").length&&e._isViewportEdgeAllowsFloating(o)){for(var i in e.videoPlayers){var r=e.videoPlayers[i];if(r.entry&&r.entry.intersectionRatio>e.stickingThreshold)return}e._floatingOn(t)}o.intersectionRatio>e.stickingThreshold&&e.isFloating&&e._floatingOff()})},s),t.observer.observe(t.element)}catch(t){console.error(t,s)}}},_removeObserver:function(t){t.observer&&t.observer.unobserve(t.element)},_reloadObservers:function(){var t=this;Object.keys(this.videoPlayers).forEach(function(e){t._removeObserver(t.videoPlayers[e]),t._addToObserver(t.videoPlayers[e])})},updateCloseButtonPosition:function(){var t=this.$disableEl,e=t.offsetWidth,o=t.offsetHeight,i=this.floatingElement.element.childNodes[0],r=i.offsetWidth,n=i.offsetHeight,a=this._getPlayerParameters({provider:this.providerName,parameters:this.offset}),s=this._getPlayerParameters({provider:this.providerName,parameters:this.closeButton}),l=null===a.bottom,c=null===a.left;if(this.isFloating)switch(s.position){default:case"left":l?t.style.top="".concat(a.top,"px"):t.style.bottom="".concat(a.bottom+n-o,"px"),c?t.style.right="".concat(a.right+r,"px"):t.style.left="".concat(a.left-e,"px");break;case"right":l?t.style.top="".concat(a.top,"px"):t.style.bottom="".concat(a.bottom+n-o,"px"),c?t.style.right="".concat(a.right-e,"px"):t.style.left="".concat(a.left+r,"px");break;case"bottom":l?t.style.top="".concat(a.top+n,"px"):t.style.bottom="".concat(a.bottom-o,"px"),c?t.style.right="".concat(a.right,"px"):t.style.left="".concat(a.left+r-e,"px");break;case"top":l?t.style.top="".concat(a.top-o,"px"):t.style.bottom="".concat(a.bottom+n,"px"),c?t.style.right="".concat(a.right,"px"):t.style.left="".concat(a.left+r-e,"px")}},_floatingOn:function(t){var e=this;this.isFloating=!0,this.floatingElement=t,this.providerName=this._getPlayerProviderName(t.element);var o=this._getPlayerParameters({provider:this.providerName,parameters:this.offset}),i=this._getPlayerParameters({provider:this.providerName,parameters:this.dimensions});this.width=i.width,this.height=i.height;var r=t.entry.boundingClientRect;i.height=Math.round(i.width/r.width*r.height),this.floatingAnimation&&(this.dynamicStyles.innerHTML=" @keyframes floatFromTop { from {top: ".concat(-r.height,"px;} to {top: ").concat(o.top,"px;} } @keyframes floatFromBottom { from {bottom: ").concat(-r.height,"px;} to {bottom: ").concat(o.bottom,"px;} } "));var n=t.element.childNodes[0],a=this.$disableEl;a.className="player-move-up player-move-up-".concat(this.providerName),t.element.appendChild(a),n.className="player-floating player-floating-".concat(this.providerName),this.floatingAnimation&&(n.style.animation=null===o.bottom?"floatFromTop .3s":"floatFromBottom .3s",n.style.transition="top 0.2s",a.style.transition="top 0.2s"),n.style.width="".concat(i.width,"px"),n.style.height="".concat(i.height,"px"),n.style.position="fixed",n.style.boxSizing="content-box",n.style.bottom=null===o.bottom?"auto":"".concat(o.bottom,"px"),n.style.top=null===o.bottom?"".concat(o.top,"px"):"auto",n.style.left=null===o.left?"auto":"".concat(o.left,"px"),n.style.right=null===o.left?"".concat(o.right,"px"):"auto",n.style.marginBottom="0",setTimeout(function(){e.isFloating&&(a.style.display="block"),n.style.animation="",e.updateCloseButtonPosition()},400),this.onFloatingStart&&(this.onFloatingStart(i.height,t),this.updateCloseButtonPosition()),window.dataLayer.push({event:"player",ga:{eventCategory:"floatingplayer",eventAction:"float",eventLabel:"start"}})},_floatingOff:function(){var t=this.floatingElement;this.isFloating=!1;var e=t.element.childNodes[0],o=this.$disableEl;try{t.element.removeChild(this.$disableEl)}catch(t){console.error(t)}e.className="",e.style.right="0",this.isFloating||(e.style.width="100%",e.style.height="100%",e.style.inset="0 auto auto 0"),e.style.position="absolute",e.style.marginBottom="",o.style.display="none",o.style.inset="auto",this.onFloatingEnd&&this.onFloatingEnd(),window.dataLayer.push({event:"player",ga:{eventCategory:"floatingplayer",eventAction:"float",eventLabel:"end"}})},turnOffFloating:function(){this.isFloatingRemoved=!0,this.isFloating&&this._floatingOff()},turnOnFloating:function(){this.isFloatingRemoved=!1,this._reloadObservers()},_createDisableElement:function(){return document.createElement("div")},_generateId:function(t){return window.btoa(t)},setOffset:function(t){if(this.offset=this._createPlayersParameters(t,this.offset),this.isFloating){var e=this.floatingElement,o=this._getPlayerParameters({provider:this.providerName,parameters:this.offset}),i=e.element.childNodes[0];null===o.bottom?(i.style.top="".concat(o.top,"px"),i.style.bottom="auto"):(i.style.top="auto",i.style.bottom="".concat(o.bottom,"px")),null===o.left?i.style.right="".concat(o.right,"px"):i.style.left="".concat(o.left,"px"),this.updateCloseButtonPosition()}},setDimensions:function(t){var e=this._createPlayersParameters(t,this.dimensions,this._validateDimensions());if(this.isFloating){var o=this.floatingElement,i=this._getPlayerParameters({provider:this.providerName,parameters:this.dimensions}),r=this._getPlayerParameters({provider:this.providerName,parameters:e}),n=o.element.childNodes[0];r.height=Math.round(r.width/i.width*i.height),n.style.width="".concat(r.width,"px"),n.style.height="".concat(r.height,"px"),this.updateCloseButtonPosition()}this.dimensions=e},addVideoPlayer:function(t){if(this._validateElement(t)){var e=t.dataset.embedId||this._generateId(t.toString());Object.prototype.hasOwnProperty.call(this.videoPlayers,e)||(t.style.background='url("'.concat(this.bgImage,'")'),t.style.backgroundSize="contain",t.style.backgroundRepeat="no-repeat",t.style.backgroundPosition="center",t.dataset.embedId=e,this.videoPlayers[e]={observer:!1,id:e,element:t},this._addToObserver(this.videoPlayers[e]))}},_clearVideoPlayers:function(){var t=Object.keys(this.videoPlayers);t.length&&(this._removeObserver(this.videoPlayers[t[0]]),this.videoPlayers={})},defaultFallback:function(t,e){return void 0===t||"default"===t?e:t},_createStyles:function(){var t=this,e=document.getElementById("floating-player-styles");e||(e=document.createElement("style")).setAttribute("id","floating-player-styles");var o=" .player-move-up { z-index: 2500001; position: fixed; box-sizing: border-box; cursor: pointer; } .player-floating { z-index: 2500000; top: inherit; } ",i=[];Object.entries(this.closeButton).map(function(t){return i.push(t)}),i.map(function(e){var i=e[0],r=e[1],n={background:"#fff",mark:"#aaa",border:"none"},a={background:"#ffd200",mark:"#000",border:"#ffd200"},s="";switch(r.color.border){case"default":break;case"none":s="border: none";break;default:s="border-".concat(r.position,": 5px solid ").concat(r.color.border," !important")}"mobile"===r.template?o+=" .player-move-up-".concat(i," { height: 31px; width: 36px; border-bottom-left-radius: .5em; border-bottom-right-radius: .5em; background-color: ").concat(t.defaultFallback(r.color.background,a.background),"; transform: translateX(").concat(["left","right"].includes(r.position)?"0":"-.5em",") ").concat("top"===r.position?"rotate(180deg)":"","; } .player-move-up-").concat(i,":before { content: ''; position: absolute; box-shadow: 2px -2px ").concat(t.defaultFallback(r.color.mark,a.mark)," inset; -webkit-box-shadow: 2px -2px ").concat(t.defaultFallback(r.color.mark,a.mark)," inset; width: 11px; height: 11px; bottom: 8px; left: 12px; transform: rotate(135deg); } .player-floating-").concat(i," { ").concat(""===s?"border-".concat(r.position,": 5px solid ").concat(a.border," !important;"):s," } "):o+=" .player-move-up-".concat(i," { font-size: 24px; width: 24px; height: 24px; display: none; background-color: ").concat(t.defaultFallback(r.color.background,n.background),"; border: 0.03em solid ").concat(t.defaultFallback(r.color.mark,n.mark),"; } .player-move-up-").concat(i,":before, .player-move-up-").concat(i,":after { position: absolute; left: 0.44em; content: ' '; height: 0.66em; top: 0.16em; width: 0.06em; background-color: ").concat(t.defaultFallback(r.color.mark,n.mark),"; } .player-move-up-").concat(i,":before { transform: rotate(45deg); } .player-move-up-").concat(i,":after { transform: rotate(-45deg); } .player-floating-").concat(i," { ").concat(""===s?"border: none;":s," } ")}),e.innerHTML=o,document.body.appendChild(e);var r=document.createElement("style");return document.body.appendChild(r),r},_hasAnyProviderKey:function(t){var e=Object.keys(t);return this.providers.some(function(t){return e.find(function(e){return e===t})})},_createPlayersParameters:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,i=this._hasAnyProviderKey(t),r=Object.assign({},e);return i?this._overrideProvidersParametersProperties(r,t,o):this._overwritePropertiesForEachKey(r,t,o)},_createObjectForEachKey:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.reduce(function(t,e){return t[e]={},t},{})},_overwritePropertiesForEachKey:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;return Object.keys(t).reduce(function(t,i){var n=r(r({},t[i]),e);return t[i]=o?o(n):n,t},t)},_overrideProvidersParametersProperties:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;return this.providers.reduce(function(t,i){if(e[i]){var n=r(r({},t[i]),e[i]);t[i]=o?o(n):n}return t},t)},_getPlayerParameters:function(t){var e=t.provider,o=t.parameters;return(void 0===o?{}:o)[e]||{}},_getPlayerProviderName:function(t){return"getAttribute"in t?t.getAttribute("data-provider-name"):""},_standardizeWidth:function(t){return Math.max(t||this.DEFAULT_WIDTH,this.MIN_WIDTH)},_validateDimensions:function(){var t=this;return function(e){var o=e.width,i=e.height;return{width:t._standardizeWidth(o),height:i}}},_updateViewportMargin:function(t){if(!this._isObject(t))return console.warn("FloatingVideoPlayer::Input must be a object",{margin:t}),{wasUpdate:!1};if(!this._areObjectValuesNumeric(t))return console.warn("FloatingVideoPlayer::Object must contain keys with a numeric value",{margin:t}),{wasUpdate:!1};for(var e in t)t[e]=Math.round(t[e]);return this.viewportMargin=r(r({},this.viewportMargin),t),{wasUpdate:!0}},_areObjectValuesNumeric:function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&"number"!=typeof t[e])return!1;return Object.keys(t).length>0},_isObject:function(t){return"object"===o(t)&&null!==t&&!Array.isArray(t)}},e.floatingPlayer=n},32242:function(t,e,o){let i=o(58883);t.exports=i.floatingPlayer}}]);