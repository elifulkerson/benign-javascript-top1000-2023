function AjaxPost(n,t,i){$.ajax({url:n,data:t,success:function(n){n.d&&i(n.d)}})}function zzk_go(){var n=encodeURIComponent(document.getElementById("zzk_search_input").value);window.location="https://zzk.cnblogs.com/s?t=b&w="+n}function zzk_go_enter(n){if(n.keyCode===13)return zzk_go(),!1}function google_search(){return location.href="http://www.google.com/search?q="+encodeURIComponent("site:cnblogs.com "+document.getElementById("google_search_q").value),!1}function google_search_enter(n){if(n.keyCode===13)return google_search(),!1}function DiggPost(n,t,i,r){var u=$("#digg_tip_"+t),f;u.css("color","red").html("æäº¤ä¸­...");f={postId:t,voteType:"Digg",isAbandoned:!1};$("#digg_count_"+t).parent().removeAttr("onclick").off("click");$.ajax({url:"/"+n+"/ajax/vote/blogpost",data:JSON.stringify(f),headers:{RequestVerificationToken:$("#antiforgery_token").val()},success:function(f){f.isSuccess&&($("#digg_count_"+t).html(parseInt($("#digg_count_"+t).html())+1),$("#digg_count_"+t).parent().addClass("active").click(function(){return UnDiggPost(n,t,i,r),!1}));u.html(f.message)},error:function(n,t){u.html("åºç°éè¯¯ï¼è¯·å·æ°é¡µé¢åéè¯ï¼");console.log(n.status+", errorTextStatus"+t)}})}function UnDiggPost(n,t,i,r){var u=$("#digg_tip_"+t),f;u.css("color","red").html("æäº¤ä¸­...");f={postId:t,voteType:"Digg",isAbandoned:!0};$("#digg_count_"+t).parent().removeAttr("onclick").off("click");$.ajax({url:"/"+n+"/ajax/vote/blogpost",data:JSON.stringify(f),headers:{RequestVerificationToken:$("#antiforgery_token").val()},success:function(f){f.isSuccess&&($("#digg_count_"+t).html(parseInt($("#digg_count_"+t).html())-1),$("#digg_count_"+t).parent().removeClass("active").click(function(){return DiggPost(n,t,i,r),!1}));u.html("åæ¶æå")},error:function(n,t){u.html("åºç°éè¯¯ï¼è¯·å·æ°é¡µé¢åéè¯ï¼");console.log(n.status+", errorTextStatus"+t)}})}function cateShow(n){document.getElementById("cate_content_block_"+n)&&(document.getElementById("cate_content_block_"+n).style.display="block");document.getElementById("cate_item_"+n).className="cate_item_hover"}function cateHidden(n){document.getElementById("cate_content_block_"+n)&&(document.getElementById("cate_content_block_"+n).style.display="none");document.getElementById("cate_item_"+n).className=""}function showSpinner(){var n=$("#post_list").width();$("#post_list").html('<div class="spin-block"><img src="//common.cnblogs.com/images/loading.gif" alt=""/><\/div>');$("#post_list").width(n)}function GetNewsList(n,t){var i,r;window.scrollTo(0,0);i=eval("(function(){GetNewsList(1,30);return false;});");$("#posts_refresh").attr("onclick","").attr("title","å·æ°æ°é»åè¡¨").click(i).hide();$("#nav_tab_3").attr("class","current_nav");$("#nav_tab_1,#nav_tab_2").removeAttr("class");$("#posts_refresh_tips").css("color","green").html("æ´æ°ä¸­...");$("#headline_block").html("");$("#post_list").css("padding-top","20px");showSpinner();$.ajax({url:"/ws/SiteHomeService.asmx/GetNewsLis",data:"{pageIndex:"+n+",pageSize:"+t+"}",success:function(n){$("#post_list").html(n.d);$("#posts_refresh_tips").html("");$("#posts_refresh").show()},error:function(){$("#post_list").html("æ´æ°æ°æ®å¤±è´¥ï¼è¯·éè¯ï¼")}});r="#";ShowPager(1500,n,t,r,"GetNewsList(")}function set_a_title(n){var t=$.trim($(n).text());t&&!$(n).attr("title")&&$(n).attr("title",t)}function clearLongCookies(){document.cookie.length>500&&$.ajax({url:"/clearcookies",type:"post"})}function loadSiteCategories(){$.ajax({url:"/aggsite/allsitecategories",type:"get",dataType:"text",success:function(n){$("#site_categories_card").html(n);location.hash.indexOf("#cate-menu")===0&&showCategoryMenu();$("#sidenav_category a").first().click(function(){return $("#site_categories_wrapper").is(":visible")===!1?showCategoryMenu():hideCategoryMenu(),!1})}})}function showCategoryMenu(){$("#sidenav_category").addClass("sidenav-category-active");$("#site_categories_wrapper").show();$("#sidenav_category.current-nav").length||$("#side_nav .current-nav").removeClass("current-nav")}function hideCategoryMenu(){$("#site_categories_wrapper").is(":visible")===!0&&($("#sidenav_category").removeClass("sidenav-category-active"),$("#site_categories_wrapper").hide())}function getAdA1(){}function deliverB1(){$("#cnblogs_b1").length&&!$("#cnblogs_b1 a img").length&&$.getJSON("https://a1.cnblogs.com/group/B1",function(n){n&&n.B1?$("#cnblogs_b1").html(n.B1):$("#cnblogs_b1").hide()})}function deliverT1(){$.ajax({url:location.protocol+"//a1.cnblogs.com/units/text/T1/creative",type:"get",dataType:"html",success:function(n){n!="<ul><\/ul>"&&n.length>10&&$("#sidebar_bh").html(n)}})}function changeForMobile(){$(window).width()<767&&($('a[target="_blank"]').prop("target","_self"),$('#nav_dropdown_menu a[href="https://ing.cnblogs.com/"]').attr("href","https://ing.cnblogs.com/mobile/home/"))}function toggleDropdownMenu(){var n=$("#nav_dropdown_menu");$(n).css("max-height")=="1000px"?$(n).css("max-height",""):$(n).css("max-height","1000px")}function ShowProgress(){showSpinner()}function dark(){var n,t;$(".navbar").addClass("navbar-dark");$("body").addClass("body-dark");$("#dark_switch a img").attr("src","/images/aggsite/light.svg");$("#dark_switch").attr("onclick","undark()");n=new Date;n.setTime(n.getTime()+36e8);t="; expires="+n.toUTCString();document.cookie="darkmode=true"+t+"; path=/"}function undark(){$(".navbar").removeClass("navbar-dark");$("body").removeClass("body-dark");$("#dark_switch a img").attr("src","/images/aggsite/dark.svg");$("#dark_switch").attr("onclick","dark()");document.cookie="darkmode=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}function determineDarkMode(){screen.width>1024&&document.cookie!=null&&document.cookie.indexOf("darkmode=true")>=0?dark():$("#dark_switch").attr("onclick","dark()")}function auditBlogPosts(){var n=$(".post-item").map(function(){return this.dataset.postId}).get();$.ajax({url:"/audit",method:"post",data:JSON.stringify(n),success:function(n){var t,i,r;if(n)for(t=0;t<n.length;t++)i=document.createElement("a"),r=n[t].linkCount>50?'style="color: red"':"",$(i).addClass("post-meta-item").addClass("btn").html("<span "+r+">é¾æ¥æ°: "+n[t].linkCount+"<\/span>"),$(".post-item[data-post-id="+n[t].postId+"] footer").append(i)}})}function b0Impress(n,t){t&&$.get(t);b0ImpressGa(n)}function gscmdImpressM1(){$("#banner_m1").is(":visible")&&$.get("https://i.gridsumdissector.com/v/?gscmd=impress&gid=gad_545_oqb4jfae&ck=38&adk=475&os=__OS__&if=__IDFA__&oid=__OPENUDID__&aid=__ANDROIDID__&im=__IMEI__&oa=__OAID__&m=__MAC__&ip=__IP__&lbs=__LBS__&ts=__TS__&did=__DUID__&aaid=__AAID__&uid=__UDID__&odin=__ODIN__&ua=__UA__&geo=__GEO__&autorefresh=__AUTOREFRESH__&caid=__CAID__")}function b0ImpressGa(n){setTimeout(function(){countImpressions("ad","B0-"+n)},300)}function getGACustom(){return null}function ga_brandzone(){countClicks("sitehome-nav-brands")}function ga_legacy_brandzone(){countClicks("sitehome-nav-brands-legacy")}function ga_legacy(){countClicks("sitehome-nav-legacy")}function countClicks(n,t){typeof gtag!="undefined"&&gtag("event","click",{event_category:n,event_label:t})}function countCreativeClicks(n){countClicks("ad",n)}function countImpressions(n,t){setTimeout(function(){typeof gtag!="undefined"&&gtag("event","impression",{event_category:n,event_label:t})},50)}function countCreativeImpressions(n){n.indexOf("C0-")==0&&screen.width<700||n.indexOf("B0-")==0&&screen.width<700||(n.indexOf("B0-è¾è®¯-æ°å­çæå¤§ä¼")==0&&n.indexOf("B0-è¾è®¯-æ°å­çæå¤§ä¼-ä¸åº")<0&&screen.width>700&&$("#b0_impression").html('<img style="display:none" src="https://g.cn.miaozhen.com/x/k=2372648&p=8Rohw&dx=__IPDX__&rt=2&pro=s&ns=__IP__&ni=__IESID__&v=__LOC__&xa=__ADPLATFORM__&tr=__REQUESTID__&vg=__AUTOPLAY__&nh=__AUTOREFRESH__&mo=__OS__&m0=__OPENUDID__&m0a=__DUID__&m1=__ANDROIDID1__&m1a=__ANDROIDID__&m2=__IMEI__&m4=__AAID__&m5=__IDFA__&m6=__MAC1__&m6a=__MAC__&m11=__OAID__&m14=__CAID__&m5a=__IDFV__&mn=__ANAME__&m5b=__IDFA1__&m11a=__OAID1__&m14a=__CAID1__&o="/>'),n.indexOf("C0-è¾è®¯-æ°å­çæå¤§ä¼")==0&&screen.width>700&&$("#c0_impression").html('<img style="display:none" src="https://g.cn.miaozhen.com/x/k=2372648&p=8Rohx&dx=__IPDX__&rt=2&pro=s&ns=__IP__&ni=__IESID__&v=__LOC__&xa=__ADPLATFORM__&tr=__REQUESTID__&vg=__AUTOPLAY__&nh=__AUTOREFRESH__&mo=__OS__&m0=__OPENUDID__&m0a=__DUID__&m1=__ANDROIDID1__&m1a=__ANDROIDID__&m2=__IMEI__&m4=__AAID__&m5=__IDFA__&m6=__MAC1__&m6a=__MAC__&m11=__OAID__&m14=__CAID__&m5a=__IDFV__&mn=__ANAME__&m5b=__IDFA1__&m11a=__OAID1__&m14a=__CAID1__&o="/>'),n.indexOf("B0-è¾è®¯-æ°å­çæå¤§ä¼-ä¸åº")==0&&$("#b0_impression").html('<img style="display:none" src="https://g.cn.miaozhen.com/x/k=2373332&p=8RrlJ&dx=__IPDX__&rt=2&pro=s&ns=__IP__&ni=__IESID__&v=__LOC__&xa=__ADPLATFORM__&tr=__REQUESTID__&vg=__AUTOPLAY__&nh=__AUTOREFRESH__&mo=__OS__&m0=__OPENUDID__&m0a=__DUID__&m1=__ANDROIDID1__&m1a=__ANDROIDID__&m2=__IMEI__&m4=__AAID__&m5=__IDFA__&m6=__MAC1__&m6a=__MAC__&m11=__OAID__&m14=__CAID__&m5a=__IDFV__&mn=__ANAME__&m5b=__IDFA1__&m11a=__OAID1__&m14a=__CAID1__&o="/>'),countImpressions("ad",n))}function countCreativeImpressionsOnMobile(n){screen.width<700&&countCreativeImpressions(n)}function logCreativeClick(){return}function logCreativeImpression(){return}function provisionWechatShare(){var i=document.querySelector('meta[name="description"]'),n,t;i&&(n="https://common.cnblogs.com/logo_square.png",t=document.querySelector("#cnblogs_post_body img"),t&&(n=t.src),$.getScript("https://res.wx.qq.com/open/js/jweixin-1.6.0.js",function(){var t=location.href.split("#")[0];$.getJSON("/ajax/wechatshare/getconfig?url="+encodeURIComponent(t)).done(function(r){wx.config(r);var u=document.title,f=$("<div><\/div>").html(i.content).text();wx.ready(function(){wx.updateAppMessageShareData({title:u,desc:f,link:t,imgUrl:n,fail:function(n){console.log(n)}});wx.updateTimelineShareData({title:u,link:t,imgUrl:n})});wx.error(function(n){console.log(n)})})}))}function zzk_go(){var n=encodeURIComponent("blog:"+currentBlogApp+" "+document.getElementById("q").value);window.location="https://zzk.cnblogs.com/s?w="+n}function zzk_go_enter(n){if(n.keyCode===13)return zzk_go(),!1}function zzkSearch(n,t){if(t=t.trim(),!t){window.navbarSearchManager.selectActiveOption(n.target);return}window.location.href="https://zzk.cnblogs.com/s?w="+encodeURIComponent(t)}function zzkBlogSearch(n,t,i){if(i=i.trim(),!i){window.navbarSearchManager.selectActiveOption(n.target);return}const r=encodeURIComponent("blog:"+t+" "+i);window.location="https://zzk.cnblogs.com/s?w="+r}function google_go(){return location.href="http://www.google.com/search?q="+encodeURIComponent("site:www.cnblogs.com/"+currentBlogApp+"/ "+document.getElementById("google_q").value),!1}function google_go_enter(n){if(n.keyCode===13)return google_go(),!1}var JSON,waitingTips,c_enable_dfp,aggSite,FollowingPosts;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function o(n){return e.lastIndex=0,e.test(n)?'"'+n.replace(e,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function u(i,f){var s,l,h,a,v=n,c,e=f[i];e&&typeof e=="object"&&typeof e.toJSON=="function"&&(e=e.toJSON(i));typeof t=="function"&&(e=t.call(f,i,e));switch(typeof e){case"string":return o(e);case"number":return isFinite(e)?String(e):"null";case"boolean":case"null":return String(e);case"object":if(!e)return"null";if(n+=r,c=[],Object.prototype.toString.apply(e)==="[object Array]"){for(a=e.length,s=0;s<a;s+=1)c[s]=u(s,e)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=u(l,e),h&&c.push(o(l)+(n?": ":":")+h));else for(l in e)Object.prototype.hasOwnProperty.call(e,l)&&(h=u(l,e),h&&c.push(o(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,r,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",r="",typeof e=="number")for(o=0;o<e;o+=1)r+=" ";else typeof e=="string"&&(r=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return u("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),f.lastIndex=0,f.test(n)&&(n=n.replace(f,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();$.ajaxSetup({type:"post",dataType:"json",contentType:"application/json; charset=utf-8",timeout:8e3});waitingTips='<div id="tips_block"><img src="//common.cnblogs.com/images/waiting.gif" alt=""/><\/div>';c_enable_dfp=!0;aggSite={};aggSite.user={};aggSite.user.getUserInfo=function(){account.userInfo(function(n){$("#span_userinfo").html(n)})};aggSite.loadPostList=function(n){return window.scrollTo(0,0),$("#posts_refresh").hide(),$("#posts_refresh_tips").css("color","green").html("æ´æ°ä¸­..."),showSpinner(),$.ajax({url:n,data:JSON.stringify(aggSiteModel),dataType:"text",success:function(n){$("#post_list").html(n);changeForMobile();$("#posts_refresh_tips").html("");$("#posts_refresh").show();aggSite.filterUserBlocked();aggSite.loadAntiforgery()},error:function(){$("#post_list").html("æ´æ°æ°æ®å¤±è´¥ï¼è¯·éè¯ï¼")}}),!1};aggSite.loadCategoryPostList=function(n){if(arguments.length>0&&(aggSiteModel.PageIndex=n),n>1){location.hash="#p"+n;this.loadPostList("/AggSite/"+aggSiteModel.ItemListActionName);switch(aggSiteModel.CategoryType){case"SiteHome":document.title="ç½ç«é¦é¡µ - ç¬¬"+n+"é¡µ - åå®¢å­";break;case"HomeCandidate":document.title="åéåº - ç¬¬"+n+"é¡µ - åå®¢å­";break;case"Picked":document.title="ç²¾ååº - ç¬¬"+n+"é¡µ - åå®¢å­"}return}if(location.hash){window.location=location.href.substring(0,location.href.indexOf("#"));return}this.loadPostList("/AggSite/"+aggSiteModel.ItemListActionName)};aggSite.loadCommentList=function(n){arguments.length>0&&(aggSiteModel.PageIndex=n);this.loadPostList("/AggSite/CommentList")};aggSite.loadEditorpicks=function(n,t){aggSiteModel.PageIndex=n;this.loadPostList("/aggsite/EditorpickList",'{"pageIndex":'+n+',"pageSize":'+t+"}")};aggSite.loadTopViewsPostList=function(n){this.loadPostList("/aggsite/TopViewsPostList",'{"pageIndex":'+n+"}")};aggSite.loadTopDiggsPostList=function(n){this.loadPostList("/aggsite/TopDiggsPostList",'{"pageIndex":'+n+"}")};aggSite.loadSiteHomePosts=function(){};aggSite.loadMyCommentedPosts=function(n){return aggSiteModel.CategoryType!="MyCommented"&&$.ajax({url:"/aggsite/MyCommentedPostCount",dataType:"text",success:function(n){n&&(pagingBuider.TotalCount=n,buildPaging(1))}}),aggSiteModel.CategoryType="MyCommented",$(n).css("font-weight","bold").css("color","red"),!1};aggSite.loadSideRight=function(){var n="/aggsite/SideRight";location.search&&location.search.indexOf("delivery")>0&&(n+=location.search);$.when($.ajax({url:n,type:"get",dataType:"text"}),$.ajax({url:"/aggsite/bh",type:"get",dataType:"text"})).done(function(n,t){var i=t[0],r=n[0];$("#side_right").html(i?i+r:r)})};aggSite.loadSubCategories=function(){var n=$("#cate_sub_block");n.length>0&&$.ajax({url:"/aggsite/SubCategories",data:JSON.stringify(cateIdList),dataType:"text",success:function(t){n.html(t)}})};aggSite.loadUserStats=function(){var n=$("#user_stats");n.length>0&&$.ajax({url:"/aggsite/UserStats",type:"get",dataType:"text",success:function(t){n.html(t)}})};aggSite.loadAggStats=function(){var n=$("#site_stats");n.length>0&&$.ajax({url:"/aggsite/AggStats",type:"get",dataType:"text",success:function(t){n.html(t)}})};aggSite.loadAntiforgery=function(){$.ajax({url:"/aggsite/MyDigged/token",method:"get",success:function(n){n&&$("#antiforgery_token").val(n.token)}})};aggSite.userBlocks=new Set;aggSite.loadUserBlockList=function(){account.getBlockList(function(n){aggSite.userBlocks=n;aggSite.filterUserBlocked();aggSite.loadAntiforgery()})};aggSite.filterUserBlocked=function(){for(var t,r,i=document.querySelectorAll(".post-item"),n=0;n<i.length;n++)t=i[n],r=t.querySelector(".post-item-author").href.match(/\/([^\/]+?)\/$/)[1],aggSite.userBlocks.has(r)&&t.remove()};$(function(){var n,t;if(determineDarkMode(),changeForMobile(),aggSiteModel.CategoryType=="MyFollowing")n=new FollowingPosts(aggSiteModel),location.hash.length>1&&n.handleHashChange(),window.onhashchange=function(){n.handleHashChange()},$("#mygroup_list li a").each(function(){var t=$(this).data("group");$(this).on("click",function(){n.load(t,1)})});else{$(window).on("hashchange",function(){if(location.hash.indexOf("#p")<0&&location.hash.indexOf("#cate-menu")<0){window.location.reload();return}if(location.hash.indexOf("#cate-menu")<0&&location.hash.length<=1&&hideCategoryMenu(),location.hash.indexOf("#p")===0){var n=parseInt(location.hash.substr(2));if(n===1){location.hash="";return}aggSiteModel.PageIndex=n;aggSite.loadPostList("/AggSite/"+aggSiteModel.ItemListActionName);buildPaging(n)}});location.hash.indexOf("#p")===0&&(t=parseInt(location.hash.substr(2)),t>1&&(aggSite.loadCategoryPostList(t),buildPaging(t)))}loadSiteCategories();$("body").on("click",function(n){var t=$("#site_categories_wrapper");t.is(n.target)||t.has(n.target).length!==0||hideCategoryMenu()});aggSite.loadSideRight();aggSite.loadUserBlockList()});FollowingPosts=function(n){this.model=n};FollowingPosts.prototype.handleHashChange=function(){var n=this.getGroupIdFromHash(),t=this.getPageIndexFromHash();(n||t>0)&&this.load(n,t)};FollowingPosts.prototype.handleClick=function(n,t){var i=this.getHash(n,t);window.location.hash===i?this.load(n,t):window.location.hash=i};FollowingPosts.prototype.load=function(n,t){this.checkGroup(n);this.setPageIndex(t);this.toggleGroupTab(n);this.fetchPosts()};FollowingPosts.prototype.getHash=function(n,t){return n?"#"+n+"/p"+t:"#p"+t};FollowingPosts.prototype.checkGroup=function(n){this.model.CheckedGroupId=n?n:null};FollowingPosts.prototype.setPageIndex=function(n){this.model.PageIndex=n};FollowingPosts.prototype.toggleGroupTab=function(n){$("#mygroup_list li").removeClass("active");n?$("#"+n).addClass("active"):$("#mygroup_list li:first").addClass("active")};FollowingPosts.prototype.fetchPosts=function(){window.scrollTo(0,0);$("#posts_refresh").hide();$("#posts_refresh_tips").css("color","green").html("æ´æ°ä¸­...");ShowProgress();var n=this.model;return $.ajax({url:(location.href.indexOf("/legacy/")>-1?"/legacy":"")+"/aggsite/postlistbygroup",data:JSON.stringify(this.model),timeout:1e4,contentType:"application/json; charset=utf-8",success:function(t){t?($("#post_list").html(t.postList),$("#pager_bottom").html('<div id="paging_block">'+t.pager+"<\/div>"),n.PageIndex>1?($("#pager_top").html(t.pager),$("#pager_top").show()):$("#pager_top").hide()):($("#post_list").html("æ²¡æåå®¢å¦:)"),$("#pager_bottom").html(""))},error:function(n){$("#post_list").html("æ´æ°æ°æ®å¤±è´¥ï¼è¯·éè¯ï¼éè¯¯åå ï¼"+n.status+". "+n.responseText)},complete:function(){$("#posts_refresh_tips").html("");$("#posts_refresh").show()}}),!1};FollowingPosts.prototype.getGroupIdFromHash=function(){var t=location.hash.match(/#.*\//),n;return t&&(n=t[0].slice(1,-1),n)?n:null};FollowingPosts.prototype.getPageIndexFromHash=function(){var n=location.hash.match(/\/p\d*$/);return n?parseInt(n[0].substr(2)):1};$("#navbar_more").click(function(){$("#navbar_more_list").toggle()});$(function(){$.ajax({type:"get",url:"https://account.cnblogs.com/user/userinfo",xhrFields:{withCredentials:!0},success:function(n){if(n){$("#navblog-myblog-icon").attr("href",n.blogLink);$("#navblog-myblog-text").attr("href",n.blogLink);n.iconName.indexOf("/sample_face.gif")<0&&$("#user_icon, #user_icon_mobile").attr("src",n.iconName);$("#user_icon, #user_icon_mobile").parent().attr("href",n.homeLink);n.unreadMsg===0?$("#msg_count").hide():($("#msg_count").text(n.unreadMsg===0?"":n.unreadMsg),$("#msg_count").show());$(".navbar-anonymous").hide();$(".navbar-user-info").show();return}$(".navbar-user-info").hide();$(".navbar-anonymous").show()},error:function(){$(".navbar-anonymous").show();$(".navbar-user-info").hide()}})});$(function(){$("#nav_legacy_brandzone").click(ga_legacy_brandzone);$("#nav_brandzone").click(ga_brandzone);$("#nav_legacy").click(ga_legacy)});!function(){"use strict";function i(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},n(t)}function e(t){var i=function(t,i){var r,u;if("object"!==n(t)||null===t)return t;if(r=t[Symbol.toPrimitive],void 0!==r){if(u=r.call(t,i||"default"),"object"!==n(u))return u;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===i?String:Number)(t)}(t,"string");return"symbol"===n(i)?i:String(i)}function o(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,e(i.key),i)}function r(n,t,i){return t&&o(n.prototype,t),i&&o(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function u(n,t){(null==t||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function c(n){return function(n){if(Array.isArray(n))return u(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(n){if("string"==typeof n)return u(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);return"Object"===i&&n.constructor&&(i=n.constructor.name),"Map"===i||"Set"===i?Array.from(n):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?u(n,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}()}function f(n,t,i){return(t=e(t))in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}var t="https://account.cnblogs.com",s=function(){function n(){i(this,n)}return r(n,[{key:"login",value:function(n){var i=location.href;return n&&i.indexOf("#"+n)<0&&(i+="#"+n),location.href=t+"/signin?returnUrl="+encodeURIComponent(i),!1}},{key:"logout",value:function(){return confirm("ç¡®è®¤éåºåï¼")&&$.ajax({method:"POST",url:t+"/signout",xhrFields:{withCredentials:!0},complete:function(n){200===n.status&&location.reload()}}),!1}},{key:"register",value:function(){return location.href=t+"/signup?returnUrl="+encodeURIComponent(location.href),!1}},{key:"getUserInfo",value:function(n){$.ajax({url:t+"/user/userinfo",dataType:"html",xhrFields:{withCredentials:!0},success:function(t){n(t)}})}},{key:"getBlockList",value:function(n){$.ajax({url:t+"/user/blocks",xhrFields:{withCredentials:!0},success:function(t){var i=new Set(t.map(function(n){return n.blogApp}));n(i)}})}}]),n}(),h=function(){function n(){i(this,n)}return r(n,[{key:"updateVisitorPreference",value:function(){$.ajax({type:"get",url:"/pref",success:function(n){n&&n.liteMode?($("#navbar_lite_mode_on").show(),$("#navbar_lite_mode_indicator").show()):($("#navbar_lite_mode_on").hide(),$("#navbar_lite_mode_indicator").hide())}})}},{key:"init",value:function(){this.updateVisitorPreference();var n=this;$("#navbar_lite_mode_toggle").on("click",function(){var t="blog"===$("#navbar_lite_mode_indicator").data("current-page");return $("#navbar_lite_mode_spinner").show(),$.ajax({type:"post",url:"/pref",dataType:"text",data:JSON.stringify({liteMode:!$("#navbar_lite_mode_on").is(":visible")}),success:function(){($("#navbar_lite_mode_spinner").hide(),n.updateVisitorPreference(),t)&&window.confirm("ç®æ´æ¨¡å¼åæ¢æåï¼æ¯å¦å·æ°é¡µé¢ï¼")&&window.location.reload()},error:function(){$("#navbar_lite_mode_spinner").hide();alert("ç®æ´æ¨¡å¼æ´æ°å¤±è´¥")}}),!1});$("#navbar_lite_mode_indicator").on("click",function(t){var i="blog"===t.currentTarget.dataset.currentPage;window.confirm(i?"ç¡®è®¤è¦éåºç®æ´æ¨¡å¼åï¼å½åé¡µé¢å°ä¼å·æ°ï¼":"ç¡®è®¤è¦éåºç®æ´æ¨¡å¼åï¼")&&$.ajax({type:"post",url:"/pref",dataType:"text",data:JSON.stringify({liteMode:!1}),success:function(){i?window.location.reload():n.updateVisitorPreference()},error:function(){alert("ç®æ´æ¨¡å¼æ´æ°å¤±è´¥")}})})}}]),n}(),l=function(){function n(t,r){var u=this;i(this,n);f(this,"input",void 0);f(this,"menu",void 0);f(this,"options",void 0);this.input=t;this.menu=r;this.options=c(r.querySelectorAll("li"));t.addEventListener("keydown",function(n){if(document.activeElement===u.input)switch(n.key){case"ArrowDown":u.rotateActiveOption(1);n.preventDefault();break;case"ArrowUp":u.rotateActiveOption(-1);n.preventDefault();break;case"Enter":u.triggerActiveOption();n.preventDefault()}});t.addEventListener("input",function(){u.updateKeyword(u.input.value)})}return r(n,[{key:"triggerActiveOption",value:function(){if(this.input.value){var n=this.options.findIndex(function(n){return n.classList.contains("active")});-1===n&&(n=0);this.options[n].click()}}},{key:"selectActiveOption",value:function(n){this.options.forEach(function(n){return n.classList.remove("active")});n.classList.add("active")}},{key:"updateKeyword",value:function(n){this.menu.querySelectorAll(".keyword").forEach(function(t){return t.innerHTML=n})}},{key:"rotateActiveOption",value:function(n){var i=this.options.findIndex(function(n){return n.classList.contains("active")}),t;this.options.forEach(function(n){return n.classList.remove("active")});-1===i&&(i=0);t=i+n;t<0?t=this.options.length-1:t==this.options.length&&(t=0);this.options[t].classList.add("active")}}]),n}();window.account=new s;window.liteMode=new h;$(function(){window.liteMode.init();document.getElementById("navbar_search_options")&&(window.navbarSearchManager=new l(document.getElementById("zzk_search_input"),document.getElementById("navbar_search_options")))})}();$(function(){provisionWechatShare()});