var param,index,paramsArray=window.location.search.substring(1).split("&"),key="adt_ei";const checkEmail=e=>{let a=e.match(/((?=([a-zA-Z0-9._!#$%+^&*()[\]<>-]+))\2@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);return a?a[0]:""},validateEmail=e=>checkEmail(trimInput(e.toLowerCase())),trimInput=e=>e.replace(/\s/g,""),hashEmail=e=>new Promise(a=>{if(!("msCrypto"in window)&&"https:"===location.protocol&&"crypto"in window&&"TextEncoder"in window){let r=new TextEncoder().encode(e);crypto.subtle.digest("SHA-256",r).then(e=>{let r=Array.from(new Uint8Array(e)),t=r.map(e=>("00"+e.toString(16)).slice(-2)).join("");a(t)})}else a("")});for(index=0;index<paramsArray.length;index++)if(0===(param=decodeURIComponent(paramsArray[index])).indexOf(key)){var e=param.split(key+"=")[1];if(validateEmail(e)){hashEmail(e).then(e=>{e.length&&(localStorage.setItem(key,e),localStorage.setItem("adt_emsrc","url"),paramsArray.splice(index,1),history.replaceState(null,"","?"+paramsArray.join("&")))});break}}