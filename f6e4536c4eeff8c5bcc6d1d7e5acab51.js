(()=>{var e,t,i;window.pbjs=window.pbjs||{},window.pbjs.que=window.pbjs.que||[],window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[];(t=e||(e={})).WIN="WIN",t.FLOORED="FLOORED",t.NOBIDS="NOBIDS";let l=(e,t)=>{let i=void 0!==e.adserverTargeting&&void 0!==e.adserverTargeting[t]&&!isNaN(e.adserverTargeting[t])&&parseFloat(e.adserverTargeting[t])>0;return i},o=(e,t)=>e.filter(e=>e.adUnitCode===t),a=(e,t)=>e.flatMap(e=>e.bids).filter(e=>e.adUnitCode===t),r=(t,i)=>0===t.length?e.NOBIDS:t.some(e=>l(e,i))?e.WIN:e.FLOORED,d=(t,i,o,a,r,d)=>{let{hbPbKey:n}=r;switch(a){case e.WIN:let u=i.filter(e=>l(e,n)).map(e=>e.adserverTargeting[n]).map(parseFloat).sort().reverse()[0];return parseFloat((u*d.winBidMultiplier).toFixed(4));case e.FLOORED:let p=i.map(e=>e.originalCurrency===r.currency?e.originalCpm:e.getCpmInNewCurrency(r.currency)).sort().reverse()[0];return parseFloat((p*d.flooredBidMultiplier).toFixed(4));case e.NOBIDS:let s=t.sizes,c=o.flatMap(e=>s.map(t=>{let i=e.getFloor({size:t});return i.floor,i.floor})),b=c.reduce((e,t)=>e+t,0)/c.length;return parseFloat((b*d.noBidMultiplier).toFixed(4))}},n=e=>e.flatMap(e=>e.bids.map(e=>e.floorData.modelVersion))[0],u=(e,t)=>{let i=e.includes("_AB_")?e.split("_AB_")[1]?.split("_")[0]:void 0,l=t.modelVersion.includes("_AB_")?t.modelVersion.split("_AB_")[1]?.split("_")[0]:void 0;return i||l},p=(e,t)=>{let i=e.includes("_dt_")?parseFloat(e.split("_dt_")[1].split("_")[0]):t.flooredBidMultiplier,l=e.includes("_dnt_")?parseFloat(e.split("_dnt_")[1].split("_")[0]):t.noBidMultiplier,o=e.includes("_dwt_")?parseFloat(e.split("_dwt_")[1].split("_")[0]):t.winBidMultiplier;return{flooredBidMultiplier:i,noBidMultiplier:l,winBidMultiplier:o}},s=(e,t,i,l)=>_(e,l)?t.adUnits.map(e=>{let n=o(t.bidsReceived,e.code),u=a(t.bidderRequests,e.code),s=r(n,l.hbPbKey);l.winBidMultiplier,l.flooredBidMultiplier,l.noBidMultiplier;let c=p(i,l),b=d(e,n,u,s,l,c);return{adUnitCode:e.code,floorValue:b,status:s}}):[],c=e=>googletag.pubads().getSlots().filter(t=>e.includes(t.getAdUnitPath())||e.includes(t.getSlotElementId())),b=(e,t)=>{if(0===e)return t[0];let i=t.find(t=>{let i=Object.keys(t)[0],[l,o]=t[i];return e>l&&e<=o});return i},f=(t,i)=>{let l=b(t.floorValue,i.gamBuckets),o=Object.keys(l)[0],a=t.status===e.WIN?"_w":t.status===e.FLOORED?"_f":"_n";return o.split("_n")[0]+a},g={debug:(e,...t)=>{let i=window.location.search,l=new URLSearchParams(i);l.has("pubx_debug")&&console.info("%cPubx.ai","background-color: #fc6203; color: white; border-radius: 3px; padding: 1px 4px","INFO:",e,t)}},_=(e,t)=>e&&t.pbNamespace.getConfig("floors")&&t.pbNamespace.getConfig("floors").endpoint.url.includes("floor.pbxai.com"),m=(e,t)=>e?t.pubxSplitOnValue:t.pubxSplitOffValue,w={hbPbKey:"hb_pb",splitRate:50,pubxSplitKey:"pubx-a",pubxSplitOnValue:"on",pubxSplitOffValue:"off",pubxMvKey:"pubx-m_v",pubxFloorKey:"pubx-floor",samplingRate:100,pbNamespace:pbjs,currency:"GBP",modelVersion:"pbxdflt_v1.1_AB_z_dt_0.5_dwt_0.5_dnt_0.1",auctionDelay:200,pubxId:"2b03064a-e5c4-45db-bee9-7cf48527580b",schema:['gptSlot','mediaType'],defaultValues:{"*|banner":.04},flooredBidMultiplier:0.95,noBidMultiplier:0.55,floorFetchUrl:"https://floor.pbxai.com/?pubxId=2b03064a-e5c4-45db-bee9-7cf48527580b&page="+window.top.location.href,winBidMultiplier:0.75,gamBuckets:[{'pbx_a0d_n':[0,0.03]},{'pbx_a1d_n':[0.03,0.06]},{'pbx_a2d_n':[0.06,0.09]},{'pbx_a3d_n':[0.09,0.12]},{'pbx_a4d_n':[0.12,0.15]},{'pbx_b0d_n':[0.15,0.2]},{'pbx_b1d_n':[0.2,0.25]},{'pbx_b2d_n':[0.25,0.3]},{'pbx_b3d_n':[0.3,0.35]},{'pbx_b4d_n':[0.35,0.4]},{'pbx_b5d_n':[0.4,0.45]},{'pbx_b6d_n':[0.45,0.5]},{'pbx_b7d_n':[0.5,0.55]},{'pbx_b8d_n':[0.55,0.6]},{'pbx_b9d_n':[0.6,0.65]},{'pbx_b10d_n':[0.65,0.7]},{'pbx_b11d_n':[0.7,0.75]},{'pbx_b12d_n':[0.75,0.8]},{'pbx_b13d_n':[0.8,0.85]},{'pbx_b14d_n':[0.85,0.9]},{'pbx_b15d_n':[0.9,0.95]},{'pbx_b16d_n':[0.95,1]},{'pbx_c0d_n':[1,1.1]},{'pbx_c1d_n':[1.1,1.2]},{'pbx_c2d_n':[1.2,1.3]},{'pbx_c3d_n':[1.3,1.4]},{'pbx_c4d_n':[1.4,1.5]},{'pbx_c5d_n':[1.5,1.6]},{'pbx_c6d_n':[1.6,1.7]},{'pbx_c7d_n':[1.7,1.8]},{'pbx_c8d_n':[1.8,1.9]},{'pbx_c9d_n':[1.9,2]},{'pbx_d0d_n':[2,2.25]},{'pbx_d1d_n':[2.25,2.5]},{'pbx_d2d_n':[2.5,2.75]},{'pbx_d3d_n':[2.75,3]},{'pbx_d4d_n':[3,3.25]},{'pbx_d5d_n':[3.25,3.5]},{'pbx_d6d_n':[3.5,3.75]},{'pbx_d7d_n':[3.75,4]},{'pbx_d8d_n':[4,4.25]},{'pbx_d9d_n':[4.25,4.5]},{'pbx_d10d_n':[4.5,4.75]},{'pbx_d11d_n':[4.75,5]},{'pbx_d12d_n':[5,111111]}]};let x=w.splitRate>100*Math.random();window.__pubxLoaded__=x,(e=>{e.pbNamespace.que.push(function(){let t={provider:"pubxai",options:{samplingRate:e.samplingRate,pubxId:e.pubxId}};e.pbNamespace.enableAnalytics(t),g.debug("Enabling Analytics",t)})})(w),x&&w.pbNamespace.que.push(function(){let e={floors:{enforcement:{floorDeals:!0},auctionDelay:w.auctionDelay,endpoint:{url:w.floorFetchUrl},data:{floorProvider:"PubxFloorProvider",modelVersion:w.modelVersion,currency:w.currency,schema:{fields:w.schema},values:w.defaultValues}}};w.pbNamespace.setConfig(e),g.debug("Setting Floors Config",e)}),((e,t)=>{t.pbNamespace.que.push(function(){t.pbNamespace.onEvent("auctionInit",i=>{try{googletag.cmd.push(()=>{let l=i.adUnits.map(e=>e.code),o=c(l),a=_(e,t),r=m(a,t);o.forEach(e=>{e.setTargeting(t.pubxSplitKey,r),g.debug("Setting Split KVs in GAM",{gptSlot:e,key:t.pubxSplitKey,value:r})})})}catch(e){console.info("pubx: error",e)}})})})(x,w),i=(e,t,i,l)=>{try{let i=e.map(e=>e.adUnitCode),o=c(i);o.forEach(i=>{let o=e.find(e=>[i.getAdUnitPath(),i.getSlotElementId()].includes(e.adUnitCode)),a=f(o,l);i.setTargeting(l.pubxFloorKey,a),g.debug("Setting Floor KVs in GAM",{gptSlot:i,adUnitCode:o.adUnitCode,key:l.pubxFloorKey,value:a});let r=u(t,l);r&&(i.setTargeting(l.pubxMvKey,r),g.debug("Setting MV KVs in GAM",{gptSlot:i,adUnitCode:o.adUnitCode,key:l.pubxMvKey,value:r}))})}catch(e){console.info("pubx: error",e)}},x&&w.pbNamespace.que.push(function(){w.pbNamespace.onEvent("auctionEnd",e=>{try{let t=n(e.bidderRequests),l=s(x,e,t,w);i(l,t,e.auctionId,w)}catch(e){console.info("pubx: error",e)}})})})();