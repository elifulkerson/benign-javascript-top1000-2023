"use strict";(("undefined"!=typeof self?self:this).webpackChunk_cb_marketing=("undefined"!=typeof self?self:this).webpackChunk_cb_marketing||[]).push([[92],{781:(e,t)=>{let s,i;Object.defineProperty(t,"__esModule",{value:!0}),t.setupMetricHandler=t.logMetric=t.MetricType=void 0,t.MetricType=s,function(e){e.count="count",e.rate="rate",e.gauge="gauge",e.distribution="distribution",e.histogram="histogram"}(s||(t.MetricType=s={}));t.setupMetricHandler=e=>{i=e};t.logMetric=e=>{if(!i)return;let t;try{"undefined"!=typeof window&&(t=window.requestIdleCallback.bind(window))}catch(e){}t?t(i.bind(null,e)):i(e)}},425:(e,t)=>{let s,i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.setVisibilityApi=t.setIsOnline=t.resetVisibilityApi=t.onVisibleChanged=t.getIsVisible=t.getIsOnline=t.delayUntilNetworkConnection=t.__testOnlyClearIsOnline=void 0;t.getIsOnline=()=>s;t.setIsOnline=e=>{s=e,e&&r&&(r(),i=void 0,r=void 0)};t.delayUntilNetworkConnection=async()=>void 0===s||s?Promise.resolve():(void 0===i&&(i=new Promise((e=>{r=e}))),i);t.__testOnlyClearIsOnline=()=>{s=void 0};let a=()=>!0,n=()=>()=>{};t.getIsVisible=()=>a();t.onVisibleChanged=e=>n(e);t.setVisibilityApi=e=>{a=e.getIsVisible,n=e.onVisibleChanged};t.resetVisibilityApi=()=>{a=()=>!0,n=()=>()=>{}}},1238:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ApiError",{enumerable:!0,get:function(){return i.ApiError}});var i=s(124)},780:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NetworkError",{enumerable:!0,get:function(){return i.NetworkError}});var i=s(124)},1235:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FetchableResource=void 0;var i,r=(i=s(270))&&i.__esModule?i:{default:i},a=s(425),n=s(426);function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}t.FetchableResource=class{_setData(e){var t;(this._data=e,this._dataIsStale=!1,e instanceof Error)||(this._lastNonErrorData=e,null===(t=this._schedulePersist)||void 0===t||t.call(this))}_setHydratedData(e){this._data=e,this._dataIsStale=!0}get data(){return this._data}get lastNonErrorData(){return this._lastNonErrorData}get dataIsStale(){return this._dataIsStale}get lastUpdated(){return this._lastUpdated}constructor({fetch:e,url:t,cleanupAfterMs:s,hydratedData:i,initialData:c,disableCamelize:l,schedulePersist:h}){if(o(this,"_dataIsStale",!1),o(this,"_subscribers",new Set),o(this,"_noSubscribersTimestamp",Date.now()),o(this,"_onPageVisible",(()=>{this._scheduleRefresh()})),o(this,"_stopWatchingPageVisibility",void 0),o(this,"_startWatchingPageVisibility",(()=>{if(this._stopWatchingPageVisibility)return;const e=(0,a.onVisibleChanged)((e=>{e?this._scheduleRefresh():this._refreshTimeoutId&&clearTimeout(this._refreshTimeoutId)}));this._stopWatchingPageVisibility=e})),o(this,"_scheduleRefresh",((e=Date.now())=>{if(this._refreshTimeoutId&&clearTimeout(this._refreshTimeoutId),(0,a.getIsVisible)()&&this._subscribers.size){let t;for(const e of this._subscribers){const s=e.maxAgeMs;s&&s>0&&(t=t?Math.min(t,s):s)}const s=t&&this.lastUpdated?this.lastUpdated+t-e:void 0;if(void 0===s)return;this._refreshTimeoutId=setTimeout(this.fetch,Math.max(s,0))}})),o(this,"_scheduleCleanup",((e=Date.now())=>{if(this._cleanupTimeoutId&&clearTimeout(this._cleanupTimeoutId),this._noSubscribersTimestamp&&this._cleanupAfterMs){const t=this._noSubscribersTimestamp+this._cleanupAfterMs-e;t<=0?(this._setData(void 0),this._lastUpdated=void 0,this._notifySubscribers()):this._cleanupTimeoutId=setTimeout((()=>{this._setData(void 0),this._lastUpdated=void 0,this._notifySubscribers()}),t)}})),o(this,"fetch",(async()=>{if(this._inFlightRequest)return this._inFlightRequest;return this._inFlightRequest=(async()=>{var e;const t=await this._fetchFunction(this.url,{headers:{accept:"application/json","content-type":"application/json"},disableCamelize:null!==(e=this._isCamelizeDisabled)&&void 0!==e&&e}),s=Date.now();if(this._lastUpdated=s,this._noSubscribersTimestamp=this._noSubscribersTimestamp&&s,this._scheduleCleanup(s),this._scheduleRefresh(s),t instanceof Error)this._setData(t),this._notifySubscribers();else{const e=await t.json();(0,r.default)(this._data,e)||(this._setData(e),this._notifySubscribers())}this._inFlightRequest=void 0})(),this._inFlightRequest})),o(this,"_notifySubscribers",(()=>{for(const e of this._subscribers)try{e.callback()}catch(e){e instanceof Error&&(0,n.reportError)({error:e,metadata:{url:this.url}})}})),o(this,"subscribe",(e=>(this._subscribers.add(e),this._startWatchingPageVisibility(),this._noSubscribersTimestamp=void 0,this._scheduleRefresh(),this._scheduleCleanup(),()=>{var t;(this._subscribers.delete(e),0===this._subscribers.size)&&(this._noSubscribersTimestamp=Date.now(),null===(t=this._stopWatchingPageVisibility)||void 0===t||t.call(this));this._scheduleRefresh(),0===this._subscribers.size&&this._scheduleCleanup()}))),o(this,"clear",(()=>{this._setData(void 0),this._lastUpdated=void 0,this._notifySubscribers(),this._scheduleRefresh()})),o(this,"optimisticUpdate",(async e=>{const t=e(this._data instanceof Error?void 0:this._data),s=t[0],i=t[1];return this._setData(s),this._lastUpdated=Date.now(),this._notifySubscribers(),await i,await this.fetch(),i})),this.url=t,this._fetchFunction=e,this._schedulePersist=h,this._isCamelizeDisabled=l,s&&s<0)throw new Error("Cleanup after MS must be greater than 0");if(this._cleanupAfterMs=s,i&&void 0===this._data&&this._setHydratedData(i),c){const e=void 0!==this._data;this._inFlightRequest=c.then((t=>{this._setData(t);const s=Date.now();this._lastUpdated=s,this._noSubscribersTimestamp=this._noSubscribersTimestamp&&s,this._scheduleRefresh(s),this._scheduleCleanup(s),this._inFlightRequest=void 0,this._isCamelizeDisabled=l,e&&this._notifySubscribers()}))}}get numSubscribers(){return this._subscribers.size}get isFetching(){return Boolean(this._inFlightRequest)}}},1234:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.apiCamelizeMiddleware=void 0;var i=s(124),r=s(424);t.apiCamelizeMiddleware=e=>async(t,s)=>{const a=await e(t,s);if(a instanceof i.NetworkError)return a;if(a instanceof i.ApiError)return a.responseJson=(0,r.apiCamelize)(a.responseJson),a;const n=a.json.bind(a);return a.json=async(...e)=>{try{const t=await n(...e);return null!=s&&s.disableCamelize?t:(0,r.apiCamelize)(t)}catch(e){return e}},a}},1233:(e,t,s)=>{t.N5=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=c(t);if(s&&s.has(e))return s.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var n=r?Object.getOwnPropertyDescriptor(e,a):null;n&&(n.get||n.set)?Object.defineProperty(i,a,n):i[a]=e[a]}i.default=e,s&&s.set(e,i);return i}(s(0)),r=s(124),a=s(183),n=s(1234),o=s(1235);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(c=function(e){return e?s:t})(e)}const l=(0,n.apiCamelizeMiddleware)((0,r.createFetch)(Object.assign({},r.defaultFetchConfig,{credentials:"include"}))),h=(0,i.createContext)(void 0),u=(0,i.memo)((({fetch:e,cleanupAfterMs:t,persistor:s,prefetchedData:r={},children:n,cacheKey:c,mutableFeatureFlags:u={enablePersistorSave:!0}})=>{const _=null!=e?e:l,d=(0,i.useState)({})[0],m=(0,i.useState)(c),p=m[0],b=m[1],f=(0,i.useState)(u)[0];if(null!=s&&s.hydrationInProgress)throw s.waitOnHydrate();const T=(0,i.useMemo)((()=>{var e;return null!==(e=null==s?void 0:s.hydratedData)&&void 0!==e?e:{}}),[s]),v=(0,i.useMemo)((()=>s?()=>{f.enablePersistorSave&&s.persist(d)}:void 0),[s,f.enablePersistorSave,d]);(0,i.useEffect)((()=>{Object.keys(Object.assign({},T,r)).forEach((e=>{const s=e.split("::"),i=s[0];let a;s.length>1&&(a=s[1].includes("disableCamelize")),d[e]||(d[e]=new o.FetchableResource({fetch:_,url:i,disableCamelize:a,cleanupAfterMs:t,hydratedData:null==T?void 0:T[e],initialData:r[e],schedulePersist:v})),delete r[e],delete T[e]}))}),[_,d,T,r,v,t]);const g=(0,i.useRef)(!0);(0,i.useEffect)((()=>{g.current?g.current=!1:console.warn(a.CONSOLE_PREFIX,a.CONSOLE_STYLE,"Fetch resource prop change not applied to existing resources.")}),[t]),(0,i.useEffect)((()=>{c!==p&&(b(c),Object.keys(d).forEach((e=>delete d[e])))}),[d,p,c]);const E=(0,i.useCallback)(((e,s)=>{const i=`${e}${s?"::disableCamelize":""}`;return d[i]||(d[i]=new o.FetchableResource({fetch:_,url:e,cleanupAfterMs:t,disableCamelize:s,hydratedData:null==T?void 0:T[i],initialData:r[i],schedulePersist:v})),d[i]}),[_,t,d,T,r,v]),S=(0,i.useCallback)((()=>Object.values(d).filter((e=>void 0===e.data&&e.isFetching))),[d]),O=(0,i.useCallback)((()=>Object.values(d).filter((e=>e.data instanceof Error))),[d]),C=(0,i.useMemo)((()=>({fetch:_,getResource:E,getAllPendingResources:S,getAllFailedResources:O})),[_,E,S,O]);return i.default.createElement(h.Provider,{value:C},n)}));t.N5=u},426:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.shouldReport=t.setErrorHandler=t.reportError=t.createErrorReporter=t.consoleNotify=t.CONSOLE_STYLE=t.CONSOLE_PREFIX=void 0;var i,r=(i=s(346))&&i.__esModule?i:{default:i};const a={info:console.info,warning:console.warn,error:console.error},n="%c Error Reporting:";t.CONSOLE_PREFIX=n;const o="color:red;";t.CONSOLE_STYLE=o;const c=e=>{var t;const s=e.severity;(null!==(t=a[null!=s?s:"error"])&&void 0!==t?t:console.error)(n,o,e)};t.consoleNotify=c;const l=e=>!("reportError"in e)||!!e.reportError;t.shouldReport=l;const h=e=>t=>{let s;t instanceof Error?(s={error:t},console.warn(n,o,"reportError called incorrectly (reportError(error) rather than reportError({error}))")):"object"==typeof t?(s=t,s.error instanceof Error||(console.warn(n,o,"reportError called incorrectly with something other than an error object",t),s.metadata=Object.assign({},s.metadata,{originalErrorData:JSON.stringify(s.error)}),s.error=new Error("Unspecified error."))):(s={error:new Error("Unspecified error."),metadata:{originalErrorData:JSON.stringify(t)}},console.warn(n,o,"reportError called incorrectly"));const i=s.error,a=(e=>{var t;return(0,r.default)(e.message+(null!==(t=e.stack)&&void 0!==t?t:"")).substring(0,8)})(i);return l(i)&&e(s,a),{errorHash:a}};t.createErrorReporter=h;let u=h(c);t.setErrorHandler=e=>{u=e};t.reportError=e=>{try{return u(e)}catch(e){return console.error(n,o,"Error reporting error",e),{}}}},1237:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.METRIC_NAMES=t.LegacyStreamingResource=t.DEFAULT_HEARTBEAT_STALE_TIMEOUT=t.DEFAULT_HEARTBEAT_RECONNECT_TIMEOUT=void 0;var i,r=(i=s(270))&&i.__esModule?i:{default:i},a=s(427),n=s(1238),o=s(780),c=s(781),l=s(425),h=s(426),u=s(424),_=s(183),d=s(782),m=s(783);function p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const b=1e3;t.DEFAULT_HEARTBEAT_RECONNECT_TIMEOUT=16e3;t.DEFAULT_HEARTBEAT_STALE_TIMEOUT=2e4;const f={TIME_TO_ESTABLISH_CONNECTION:"sse_time_to_establish_connection",CONNECTION_OPEN:"sse_connection_open",TIME_TO_FIRST_SNAPSHOT:"sse_time_to_first_snapshot",CONTENT_LENGTH:"sse_content_length",CONNECTION_CLOSED:"sse_connection_closed",CONNECTION_ERROR:"sse_connection_error",STALE_DATA:"sse_stale_data"};t.METRIC_NAMES=f;t.LegacyStreamingResource=class{get data(){return this._data}get lastUpdated(){return this._lastUpdated}get numSubscribers(){return this._subscribers.size}get dataSnapshot(){const e=this._data,t=this._lastUpdated;if(e)return this._currentSnapshot||(this._currentSnapshot=e instanceof Error?e:{data:(0,m.deepCloneWithWarn)(this.streamName,e,this.data),lastUpdated:null!=t?t:Date.now()}),this._currentSnapshot}get lastHeartbeatTimestamp(){return this._lastHeartbeatTimestamp}get isLoading(){return(!this.data||this._isStale)&&Boolean(this._eventSource)}get isAppVisible(){return void 0===this._notVisibleTimestamp}constructor({url:e,streamName:t,closeUnusedConnectionAfterMs:s=500,pauseAfterNotVisibleForMs:i=6e4,maxMissingHeartbeatIntervalMs:m=16e3,markAsStaleAfterMs:T=2e4,maxConnectionTimeoutMs:v=1e4}){if(p(this,"_subscribers",new Set),p(this,"_noSubscribersTimestamp",Date.now()),p(this,"_pageVisible",!0),p(this,"_createdAt",Date.now()),p(this,"_eventSource",void 0),p(this,"_deferredLoad",new d.DeferredPromise),p(this,"_notVisibleTimestamp",(0,l.getIsVisible)()?void 0:Date.now()),p(this,"_eventSourceCreatedTimes",0),p(this,"_currentSnapshot",void 0),p(this,"_maxOpenConnectionTimeout",void 0),p(this,"_missingHeartbeatReconnectTimeout",void 0),p(this,"_missingHeartbeatSetStaleTimeout",void 0),p(this,"_cleanupTimeout",void 0),p(this,"_stopWatchingPageVisibility",void 0),p(this,"_startWatchingPageVisibility",(()=>{if(this._stopWatchingPageVisibility)return;const e=(0,l.onVisibleChanged)((e=>{var t;e?(this._pageVisible=!0,this._notVisibleTimestamp=void 0,this._open()):(this._pageVisible=!1,this._notVisibleTimestamp=null!==(t=this._notVisibleTimestamp)&&void 0!==t?t:Date.now(),this._subscribers.size&&console.debug(_.CONSOLE_PREFIX,_.CONSOLE_STYLE,"Reopening the SSE connection",this.url),this._scheduleCleanup())}));this._stopWatchingPageVisibility=e})),p(this,"_handleSnapshotMessage",(e=>{const t=(0,u.apiCamelize)(e);(0,r.default)(this._data,t)||(this._data=t,this._currentSnapshot=void 0,this._notifySubscribers({eventType:"snapshot",data:t})),this._lastUpdated=Date.now(),this._deferredLoad.resolve(void 0)})),p(this,"_handlePatchMessage",(e=>{if(e.length)try{var t;if(!this._data)throw new Error(`Received a patch without a current snapshot (${this.url})`);for(const t of e)"add"!==t.op&&"replace"!==t.op||(t.value=(0,u.apiCamelize)(t.value)),t.path=(0,u.camelizeJsonPatchPath)(t.path);const s=!0;(0,a.applyPatch)(this._data,e,s);const i=this._currentSnapshot instanceof Error||null===(t=this._currentSnapshot)||void 0===t?void 0:t.data,n=this._data instanceof Error?void 0:this._data;this._lastUpdated=Date.now(),(0,r.default)(this._data,i)||(this._currentSnapshot=void 0,this._notifySubscribers({eventType:"patch",data:n,patches:e}))}catch(e){e instanceof Error&&(0,h.reportError)({error:e,metadata:{url:this.url}})}})),p(this,"_handleHeartbeat",(()=>{this._lastHeartbeatTimestamp=Date.now()})),p(this,"_handleMessage",(()=>{this._lastMessageTimestamp=Date.now(),this._checkMissingHeartbeat(),this._scheduleHeartbeatReconnectCheck()})),p(this,"_handleConnectionOpenMetric",(e=>{var t,s,i;const r=this.streamName,a=Date.now()-e,n=null!==(t=null===(s=navigator)||void 0===s||null===(i=s.connection)||void 0===i?void 0:i.effectiveType)&&void 0!==t?t:"undefined";(0,c.logMetric)({metricName:f.TIME_TO_ESTABLISH_CONNECTION,metricType:c.MetricType.distribution,value:a,tags:{stream_name:r}}),(0,c.logMetric)({metricName:f.CONNECTION_OPEN,metricType:c.MetricType.count,value:1,tags:{stream_name:r,connection_type:n}})})),p(this,"_handleFirstSnapshotMetric",((e,t)=>{const s=this.streamName;if(!this.isAppVisible)return;const i=Date.now()-t;(0,c.logMetric)({metricName:f.TIME_TO_FIRST_SNAPSHOT,metricType:c.MetricType.distribution,value:i,tags:{stream_name:s}}),(0,c.logMetric)({metricName:f.CONTENT_LENGTH,metricType:c.MetricType.distribution,value:e,tags:{stream_name:s,stream_message_type:"snapshot"}})})),p(this,"_handleMessageMetric",((e,t)=>{const s=Date.now(),i=this._lastSentMetricTimestamp,r=this.streamName;!this.isAppVisible||i&&s-i<1e3||(this._lastSentMetricTimestamp=Date.now(),(0,c.logMetric)({metricName:f.CONTENT_LENGTH,metricType:c.MetricType.distribution,value:t,tags:{stream_name:r,stream_message_type:e}}))})),p(this,"_handleConnectionCloseMetric",(e=>{var t,s,i;const r=null!==(t=null===(s=navigator)||void 0===s||null===(i=s.connection)||void 0===i?void 0:i.effectiveType)&&void 0!==t?t:"undefined";(0,c.logMetric)({metricName:f.CONNECTION_CLOSED,metricType:c.MetricType.count,value:1,tags:{stream_name:this.streamName,stream_closing_reason:e,connection_type:r}})})),p(this,"_getIsOnlineMetricValue",(()=>{const e=(0,l.getIsOnline)();return void 0===e?"n/a":e?"true":"false"})),p(this,"_handleConnectionErrorMetric",(()=>{(0,c.logMetric)({metricName:f.CONNECTION_ERROR,metricType:c.MetricType.count,value:1,tags:{stream_name:this.streamName,is_online:this._getIsOnlineMetricValue()}})})),p(this,"_reconnect",(()=>{var e;null===(e=this._eventSource)||void 0===e||e.close(),this._eventSource=void 0,this._open()})),p(this,"_open",(async()=>{if(await(0,l.delayUntilNetworkConnection)(),this._eventSource)return;this._eventSource=new EventSource(this.url,{withCredentials:!0}),this._eventSourceCreatedTimes+=1;const e=Date.now();this._eventSource.addEventListener("message",(({data:t})=>{const s=JSON.parse(t);this._handleMessage(),"snapshot"in s.result?(!this._data&&this.isAppVisible?this._handleFirstSnapshotMetric(t.length,e):this._handleMessageMetric("snapshot",t.length),this._handleSnapshotMessage(s.result.snapshot)):"patch"in s.result?(this._handlePatchMessage(s.result.patch.operations),this._handleMessageMetric("patch",t.length)):s.result.heartbeat&&this._handleHeartbeat()})),this._eventSource.addEventListener("error",(()=>{"enabled"==={NODE_ENV:"production",NODE_DEBUG:void 0}.DETAILED_ERRORS&&(0,h.reportError)({error:new n.ApiError({status:400,headers:new Headers},{message:"Error on streaming resource."}),metadata:{url:this.url}}),this._handleConnectionErrorMetric()}));try{await new Promise(((t,s)=>{var i;const r=()=>{var s;this._maxOpenConnectionTimeout&&clearTimeout(this._maxOpenConnectionTimeout),null===(s=this._eventSource)||void 0===s||s.removeEventListener("open",r),this._handleConnectionOpenMetric(e),this._scheduleIsStaleCheck(),t()};this._maxOpenConnectionTimeout=setTimeout((()=>{var e;this._maxOpenConnectionTimeout&&clearTimeout(this._maxOpenConnectionTimeout),null===(e=this._eventSource)||void 0===e||e.removeEventListener("open",r),s({error:new o.NetworkError({message:`Connection timeout reached for url: ${this.url}.`}),metadata:{url:this.url}})}),this._maxConnectionTimeoutMs),null===(i=this._eventSource)||void 0===i||i.addEventListener("open",r)}))}catch(e){e instanceof Error&&(0,h.reportError)({error:e}),this._pageVisible&&this._reconnect()}this._scheduleHeartbeatReconnectCheck(),console.debug(_.CONSOLE_PREFIX,_.CONSOLE_STYLE,"Streaming resource opened.",this.url)})),p(this,"_scheduleCleanup",(()=>{if(this._cleanupTimeout&&clearTimeout(this._cleanupTimeout),!this._eventSource)return;const e=Date.now(),t=this._noSubscribersTimestamp?e-this._noSubscribersTimestamp:void 0,s=this._notVisibleTimestamp?e-this._notVisibleTimestamp:void 0;if(void 0===t&&void 0===s)return;const i=Math.min(void 0!==t?this._closeUnusedConnectionAfterMs-t:Number.MAX_SAFE_INTEGER,void 0!==s?this._pauseAfterNotVisibleForMs-s:Number.MAX_SAFE_INTEGER);if(i>0)return console.debug(_.CONSOLE_PREFIX,_.CONSOLE_STYLE,"Streaming connection shutdown scheduled",{url:this.url,shutdownIn:i,reason:void 0!==s?"App is not visible":"No active subscribers"}),void(this._cleanupTimeout=setTimeout(this._scheduleCleanup,i+1));void 0!==s&&(console.debug(_.CONSOLE_PREFIX,_.CONSOLE_STYLE,"Closing streaming connection because the app is not visible.",{url:this.url}),this._handleConnectionCloseMetric("app_not_visible")),void 0!==t&&(console.debug(_.CONSOLE_PREFIX,_.CONSOLE_STYLE,"Closing streaming connection because there are no active subscribers.",{url:this.url}),this._handleConnectionCloseMetric("no_subscribers")),this._eventSource.close(),this._eventSource=void 0,this._missingHeartbeatReconnectTimeout&&clearTimeout(this._missingHeartbeatReconnectTimeout),this._maxOpenConnectionTimeout&&clearTimeout(this._maxOpenConnectionTimeout)})),p(this,"_scheduleIsStaleCheck",(()=>{this._missingHeartbeatSetStaleTimeout&&clearTimeout(this._missingHeartbeatSetStaleTimeout),this._missingHeartbeatSetStaleTimeout=setTimeout((()=>{this._checkMissingHeartbeat()}),this._markAsStaleAfterMs)})),p(this,"_scheduleHeartbeatReconnectCheck",(()=>{this._missingHeartbeatReconnectTimeout&&clearTimeout(this._missingHeartbeatReconnectTimeout),this._missingHeartbeatReconnectTimeout=setTimeout((()=>{this._pageVisible&&this._reconnect()}),this._maxMissingHeartbeatIntervalMs)})),p(this,"load",(()=>{this._open();return(async()=>{await this._deferredLoad,0===this.numSubscribers&&(this._noSubscribersTimestamp=Date.now(),this._scheduleCleanup())})(),this._deferredLoad})),p(this,"waitForUpdate",(()=>(this._open(),this._updateDeferred||(this._updateDeferred=new d.DeferredPromise),this._updateDeferred))),p(this,"_resolveUpdatePromise",(()=>{this._updateDeferred&&(this._updateDeferred.resolve(void 0),this._updateDeferred=void 0)})),p(this,"_eventIsUpdate",(e=>"stale"===e.eventType?!e.isStale:"error"!==e.eventType)),p(this,"_notifySubscribers",(e=>{for(const t of this._subscribers)try{t.callback(e)}catch(e){e instanceof Error&&(0,h.reportError)({error:e,metadata:{url:this.url}})}this._eventIsUpdate(e)&&this._resolveUpdatePromise()})),p(this,"_checkMissingHeartbeat",(()=>{var e;const t=null!==(e=this._lastMessageTimestamp)&&void 0!==e?e:0,s=Date.now(),i=s-t>this._markAsStaleAfterMs,r=this.streamName;i!==this._isStale&&(this._isStale=i,this._isStale?(console.debug(_.CONSOLE_PREFIX,_.CONSOLE_STYLE,r,": Stale data","no heartbeats or other messages seens for",(s-t)/b,"seconds"),this.isAppVisible&&(0,c.logMetric)({metricName:f.STALE_DATA,metricType:c.MetricType.distribution,value:1,tags:{stream_name:r}})):console.debug(_.CONSOLE_PREFIX,_.CONSOLE_STYLE,r,": Stale data recovered"),this._notifySubscribers({eventType:"stale",isStale:i})),this._isStale||this._scheduleIsStaleCheck()})),p(this,"subscribe",(e=>(this._subscribers.add(e),this._startWatchingPageVisibility(),this._noSubscribersTimestamp=void 0,this._open(),()=>{var t;(this._subscribers.delete(e),0===this._subscribers.size)&&(this._noSubscribersTimestamp=Date.now(),null===(t=this._stopWatchingPageVisibility)||void 0===t||t.call(this));0===this.numSubscribers&&(this._noSubscribersTimestamp=Date.now(),this._scheduleCleanup())}))),this.url=e,this.streamName=t,s&&s<0)throw new Error("closeUnusedConnectionAfter after MS must be greater than 0");if(i&&i<0)throw new Error("pauseAfterNotVisibleForMs must be greater than 0");this._createdAt=Date.now(),this._maxMissingHeartbeatIntervalMs=m,this._closeUnusedConnectionAfterMs=s,this._pauseAfterNotVisibleForMs=i,this._markAsStaleAfterMs=T,this._maxConnectionTimeoutMs=v,this._isStale=!1}}},1239:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.enableTextStreamRnHack=t.__testOnlyDisableTextStreamRnHack=t.StreamingResource=t.METRIC_NAMES=t.DEFAULT_HEARTBEAT_STALE_TIMEOUT=t.DEFAULT_HEARTBEAT_RECONNECT_TIMEOUT=t.ConnectionTimeoutError=void 0;var i,r=s(124),a=(i=s(270))&&i.__esModule?i:{default:i},n=s(427),o=s(780),c=s(781),l=s(425),h=s(426),u=s(424),_=s(183),d=s(782),m=s(783);function p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const b=1e3;t.DEFAULT_HEARTBEAT_RECONNECT_TIMEOUT=16e3;t.DEFAULT_HEARTBEAT_STALE_TIMEOUT=2e4;let f=!1;t.enableTextStreamRnHack=()=>{f=!0};t.__testOnlyDisableTextStreamRnHack=()=>{f=!1};const T=async(e,t)=>new Promise((s=>setTimeout((()=>{s(e())}),t)));class v extends o.NetworkError{constructor(...e){super(...e),p(this,"name","ConnectionTimeoutError"),Object.setPrototypeOf(this,v.prototype)}}t.ConnectionTimeoutError=v;const g={TIME_TO_ESTABLISH_CONNECTION:"sse_time_to_establish_connection",CONNECTION_OPEN:"sse_connection_open",TIME_TO_FIRST_SNAPSHOT:"sse_time_to_first_snapshot",CONTENT_LENGTH:"sse_content_length",CONNECTION_CLOSED:"sse_connection_closed",CONNECTION_ERROR:"sse_connection_error",STREAM_DONE:"sse_stream_done",STALE_DATA:"sse_stale_data"};t.METRIC_NAMES=g;t.StreamingResource=class{get data(){return this._data}get lastUpdated(){return this._lastUpdated}get numSubscribers(){return this._subscribers.size}get dataSnapshot(){const e=this._data,t=this._lastUpdated;if(e)return this._currentSnapshot||(this._currentSnapshot=e instanceof Error?e:{data:(0,m.deepCloneWithWarn)(this.streamName,e,this.data),lastUpdated:null!=t?t:Date.now()}),this._currentSnapshot}get lastHeartbeatTimestamp(){return this._lastHeartbeatTimestamp}get isLoading(){return(!this.data||this._isStale)&&Boolean(this._streamProcessor)}get isAppVisible(){return void 0===this._notVisibleTimestamp}constructor({url:e,streamName:t,fetch:s,closeUnusedConnectionAfterMs:i=500,pauseAfterNotVisibleForMs:m=6e4,maxMissingHeartbeatIntervalMs:E=16e3,markAsStaleAfterMs:S=2e4,maxConnectionTimeoutMs:O=1e4,sseDevToolsReporter:C}){if(p(this,"_subscribers",new Set),p(this,"_noSubscribersTimestamp",Date.now()),p(this,"_pageVisible",!0),p(this,"_createdAt",Date.now()),p(this,"_streamProcessor",void 0),p(this,"_notVisibleTimestamp",(0,l.getIsVisible)()?void 0:Date.now()),p(this,"_streamProcessorCreatedTimes",0),p(this,"_currentSnapshot",void 0),p(this,"_missingHeartbeatReconnectTimeout",void 0),p(this,"_missingHeartbeatSetStaleTimeout",void 0),p(this,"_cleanupTimeout",void 0),p(this,"isDestroyed",!1),p(this,"_stopWatchingPageVisibility",void 0),p(this,"_startWatchingPageVisibility",(()=>{if(this._stopWatchingPageVisibility)return;const e=(0,l.onVisibleChanged)((e=>{var t;e?(this._pageVisible=!0,this._notVisibleTimestamp=void 0,this._open()):(this._pageVisible=!1,this._notVisibleTimestamp=null!==(t=this._notVisibleTimestamp)&&void 0!==t?t:Date.now(),this._subscribers.size&&console.debug(_.CONSOLE_PREFIX,_.CONSOLE_STYLE,"Reopening the SSE connection",this.url),this._scheduleCleanup())}));this._stopWatchingPageVisibility=e})),p(this,"_handleSnapshotMessage",(e=>{const t=(0,u.apiCamelize)(e);(0,a.default)(this._data,t)||(this._data=t,this._currentSnapshot=void 0,this._notifySubscribers({eventType:"snapshot",data:t})),this._lastUpdated=Date.now(),this._resolveDeferredLoad()})),p(this,"_handlePatchMessage",(e=>{if(e.length)try{var t;if(!this._data)throw new Error(`Received a patch without a current snapshot (${this.url})`);for(const t of e)"add"!==t.op&&"replace"!==t.op||(t.value=(0,u.apiCamelize)(t.value)),t.path=(0,u.camelizeJsonPatchPath)(t.path);const s=!0;(0,n.applyPatch)(this._data,e,s);const i=this._currentSnapshot instanceof Error||null===(t=this._currentSnapshot)||void 0===t?void 0:t.data,r=this._data instanceof Error?void 0:this._data;this._lastUpdated=Date.now(),(0,a.default)(this._data,i)||(this._currentSnapshot=void 0,this._notifySubscribers({eventType:"patch",data:r,patches:e}))}catch(e){e instanceof Error&&(0,h.reportError)({error:e,metadata:{url:this.url}})}})),p(this,"_handleHeartbeat",(()=>{this._lastHeartbeatTimestamp=Date.now()})),p(this,"_handleMessage",(()=>{this._lastMessageTimestamp=Date.now(),this._checkMissingHeartbeat(),this._scheduleHeartbeatReconnectCheck()})),p(this,"_handleError",((e,t)=>{(0,h.reportError)({error:e,metadata:{url:this.url,errorSource:t}}),e instanceof v||(this._data=e,this._handleConnectionErrorMetric(e,t)),e instanceof o.NetworkError?this._pageVisible&&this._reconnect():(this._notifySubscribers({eventType:"error"}),this._resolveDeferredLoad())})),p(this,"_handleConnectionOpenMetric",(e=>{var t,s,i;const r=this.streamName,a=Date.now()-e,n=null!==(t=null===(s=navigator)||void 0===s||null===(i=s.connection)||void 0===i?void 0:i.effectiveType)&&void 0!==t?t:"undefined";(0,c.logMetric)({metricName:g.TIME_TO_ESTABLISH_CONNECTION,metricType:c.MetricType.distribution,value:a,tags:{fetch_based:"fetch_based",stream_name:r}}),(0,c.logMetric)({metricName:g.CONNECTION_OPEN,metricType:c.MetricType.count,value:1,tags:{fetch_based:"fetch_based",stream_name:r,connection_type:n}})})),p(this,"_handleFirstSnapshotMetric",((e,t)=>{const s=this.streamName;if(!this.isAppVisible)return;const i=Date.now()-t;(0,c.logMetric)({metricName:g.TIME_TO_FIRST_SNAPSHOT,metricType:c.MetricType.distribution,value:i,tags:{fetch_based:"fetch_based",stream_name:s}}),(0,c.logMetric)({metricName:g.CONTENT_LENGTH,metricType:c.MetricType.distribution,value:e,tags:{fetch_based:"fetch_based",stream_name:s,stream_message_type:"snapshot"}})})),p(this,"_handleMessageMetric",((e,t)=>{const s=Date.now(),i=this._lastSentMetricTimestamp,r=this.streamName;!this.isAppVisible||i&&s-i<1e3||(this._lastSentMetricTimestamp=Date.now(),(0,c.logMetric)({metricName:g.CONTENT_LENGTH,metricType:c.MetricType.distribution,value:t,tags:{fetch_based:"fetch_based",stream_name:r,stream_message_type:e}}))})),p(this,"_handleDoneMetric",(e=>{const t=this.streamName;(0,c.logMetric)({metricName:g.STREAM_DONE,metricType:c.MetricType.count,value:1,tags:{fetch_based:"fetch_based",stream_name:t,reconnected:e?"true":"false"}})})),p(this,"_handleConnectionCloseMetric",(e=>{var t,s,i;const r=null!==(t=null===(s=navigator)||void 0===s||null===(i=s.connection)||void 0===i?void 0:i.effectiveType)&&void 0!==t?t:"undefined";(0,c.logMetric)({metricName:g.CONNECTION_CLOSED,metricType:c.MetricType.count,value:1,tags:{fetch_based:"fetch_based",stream_name:this.streamName,stream_closing_reason:e,connection_type:r}})})),p(this,"_getIsOnlineMetricValue",(()=>{const e=(0,l.getIsOnline)();return void 0===e?"n/a":e?"true":"false"})),p(this,"_handleConnectionErrorMetric",((e,t)=>{(0,c.logMetric)({metricName:g.CONNECTION_ERROR,metricType:c.MetricType.count,value:1,tags:{fetch_based:"fetch_based",stream_name:this.streamName,is_online:this._getIsOnlineMetricValue(),errorSource:t,status:e instanceof r.ApiError?String(e.status):e instanceof v?"timeout_error":"network_error"}})})),p(this,"_reconnect",(()=>{this._cleanupStreamProcessor(),this._open()})),p(this,"_open",(async()=>{if(this.isDestroyed)return;if(await(0,l.delayUntilNetworkConnection)(),this._streamProcessor)return;const e=Date.now();this._streamProcessor=new r.SseStreamProcessor({onResult:(t,s)=>{this._handleMessage(),"snapshot"in t.result?(!this._data&&this.isAppVisible?this._handleFirstSnapshotMetric(s.length,e):this._handleMessageMetric("snapshot",s.length),this._handleSnapshotMessage(t.result.snapshot)):"patch"in t.result?(this._handlePatchMessage(t.result.patch.operations),this._handleMessageMetric("patch",s.length)):t.result.heartbeat&&this._handleHeartbeat()},onError:e=>{this._handleError(e,"read")},onDone:()=>{var e;const t=!0===(null===(e=this._streamProcessor)||void 0===e?void 0:e.checkIsClosed()),s=Boolean(this._pageVisible&&this._subscribers.size>0&&t);console.debug(_.CONSOLE_PREFIX,_.CONSOLE_STYLE,"Stream is done",{url:this.url,reconnected:s}),this._handleDoneMetric(s),s&&this._reconnect()}},{devTools:this._sseDevToolsReporter?{reporter:this._sseDevToolsReporter,url:this.url}:void 0}),this._streamProcessorCreatedTimes+=1;const t=new AbortController;let s=!1;const i=await Promise.race([this._fetch(this.url,{signal:t.signal,credentials:"include",headers:{"Content-Type":f?"text":"text/event-stream"}}),T((()=>(s||t.abort(),new v({message:`Connection timeout reached for url: ${this.url}.`}))),this._maxConnectionTimeoutMs)]);if(this.isDestroyed)return;if(s=!0,i instanceof Error){const e=i;return void this._handleError(e,"open")}if(null==i.body){const e=new o.NetworkError({message:"Response body was null"});return void this._handleError(e,"open")}if(!this._streamProcessor)return;console.debug(_.CONSOLE_PREFIX,_.CONSOLE_STYLE,"Streaming resource opened.",this.url),this._handleConnectionOpenMetric(e);const a=i.body.getReader();this._streamProcessor.start(a),this._scheduleIsStaleCheck(),this._scheduleHeartbeatReconnectCheck()})),p(this,"_scheduleCleanup",(()=>{if(this._cleanupTimeout&&clearTimeout(this._cleanupTimeout),!this._streamProcessor)return;const e=Date.now(),t=this._noSubscribersTimestamp?e-this._noSubscribersTimestamp:void 0,s=this._notVisibleTimestamp?e-this._notVisibleTimestamp:void 0;if(void 0===t&&void 0===s)return;const i=Math.min(void 0!==t?this._closeUnusedConnectionAfterMs-t:Number.MAX_SAFE_INTEGER,void 0!==s?this._pauseAfterNotVisibleForMs-s:Number.MAX_SAFE_INTEGER);if(i>0)return console.debug(_.CONSOLE_PREFIX,_.CONSOLE_STYLE,"Streaming connection shutdown scheduled",{url:this.url,shutdownIn:i,reason:void 0!==s?"App is not visible":"No active subscribers"}),void(this._cleanupTimeout=setTimeout(this._scheduleCleanup,i+1));void 0!==s&&(console.debug(_.CONSOLE_PREFIX,_.CONSOLE_STYLE,"Closing streaming connection because the app is not visible.",{url:this.url}),this._handleConnectionCloseMetric("app_not_visible")),void 0!==t&&(console.debug(_.CONSOLE_PREFIX,_.CONSOLE_STYLE,"Closing streaming connection because there are no active subscribers.",{url:this.url}),this._handleConnectionCloseMetric("no_subscribers")),this._cleanupStreamProcessor()})),p(this,"_scheduleIsStaleCheck",(()=>{this._missingHeartbeatSetStaleTimeout&&clearTimeout(this._missingHeartbeatSetStaleTimeout),this._missingHeartbeatSetStaleTimeout=setTimeout((()=>{this._checkMissingHeartbeat()}),this._markAsStaleAfterMs)})),p(this,"_scheduleHeartbeatReconnectCheck",(()=>{this._missingHeartbeatReconnectTimeout&&clearTimeout(this._missingHeartbeatReconnectTimeout),this._missingHeartbeatReconnectTimeout=setTimeout((()=>{this._pageVisible&&this._subscribers.size>0&&this._reconnect()}),this._maxMissingHeartbeatIntervalMs)})),p(this,"load",(()=>{this._deferredLoad||(this._deferredLoad=new d.DeferredPromise),this._open();return(async()=>{await this._deferredLoad,0===this.numSubscribers&&(this._noSubscribersTimestamp=Date.now(),this._scheduleCleanup())})(),this._deferredLoad})),p(this,"_resolveDeferredLoad",(()=>{this._deferredLoad&&(this._deferredLoad.resolve(void 0),this._deferredLoad=void 0)})),p(this,"waitForUpdate",(()=>(this._open(),this._updateDeferred||(this._updateDeferred=new d.DeferredPromise),this._updateDeferred))),p(this,"_resolveUpdatePromise",(()=>{this._updateDeferred&&(this._updateDeferred.resolve(void 0),this._updateDeferred=void 0)})),p(this,"_eventIsUpdate",(e=>"stale"===e.eventType?!e.isStale:"snapshot"===e.eventType||"patch"===e.eventType)),p(this,"_notifySubscribers",(e=>{for(const t of this._subscribers)try{t.callback(e)}catch(e){e instanceof Error&&(0,h.reportError)({error:e,metadata:{url:this.url}})}this._eventIsUpdate(e)&&this._resolveUpdatePromise()})),p(this,"_checkMissingHeartbeat",(()=>{var e;const t=null!==(e=this._lastMessageTimestamp)&&void 0!==e?e:0,s=Date.now(),i=s-t>this._markAsStaleAfterMs,r=this.streamName;i!==this._isStale&&(this._isStale=i,this._isStale?(console.debug(_.CONSOLE_PREFIX,_.CONSOLE_STYLE,r,": Stale data","no heartbeats or other messages seens for",(s-t)/b,"seconds"),this.isAppVisible&&(0,c.logMetric)({metricName:g.STALE_DATA,metricType:c.MetricType.distribution,value:1,tags:{fetch_based:"fetch_based",stream_name:r}})):console.debug(_.CONSOLE_PREFIX,_.CONSOLE_STYLE,r,": Stale data recovered"),this._notifySubscribers({eventType:"stale",isStale:i})),this._isStale||this._scheduleIsStaleCheck()})),p(this,"subscribe",(e=>(this._subscribers.add(e),this._startWatchingPageVisibility(),this._noSubscribersTimestamp=void 0,this._open(),()=>{var t;(this._subscribers.delete(e),0===this._subscribers.size)&&(this._noSubscribersTimestamp=Date.now(),null===(t=this._stopWatchingPageVisibility)||void 0===t||t.call(this));0===this.numSubscribers&&(this._noSubscribersTimestamp=Date.now(),this._scheduleCleanup())}))),p(this,"kill",(()=>{var e;this.isDestroyed=!0,null===(e=this._streamProcessor)||void 0===e||e.cancel()})),this.url=e,this.streamName=t,this._fetch=s,this._sseDevToolsReporter=C,i&&i<0)throw new Error("closeUnusedConnectionAfter after MS must be greater than 0");if(m&&m<0)throw new Error("pauseAfterNotVisibleForMs must be greater than 0");this._createdAt=Date.now(),this._maxMissingHeartbeatIntervalMs=E,this._closeUnusedConnectionAfterMs=i,this._pauseAfterNotVisibleForMs=m,this._markAsStaleAfterMs=S,this._maxConnectionTimeoutMs=O,this._isStale=!1}_cleanupStreamProcessor(){var e;null===(e=this._streamProcessor)||void 0===e||e.cancel(),this._streamProcessor=void 0,this._missingHeartbeatReconnectTimeout&&clearTimeout(this._missingHeartbeatReconnectTimeout)}}},1236:(e,t,s)=>{t.Jx=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=c(t);if(s&&s.has(e))return s.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var n=r?Object.getOwnPropertyDescriptor(e,a):null;n&&(n.get||n.set)?Object.defineProperty(i,a,n):i[a]=e[a]}i.default=e,s&&s.set(e,i);return i}(s(0)),r=s(124),a=s(183),n=s(1237),o=s(1239);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(c=function(e){return e?s:t})(e)}const l=(0,r.createFetch)(Object.assign({},r.defaultFetchConfig,{credentials:"include"})),h=(0,i.createContext)(void 0),u=(0,i.memo)((function({fetch:e,closeUnusedConnectionAfterMs:t,pauseAfterNotVisibleForMs:s,maxMissingHeartbeatIntervalMs:r,initialResources:c,children:u,enableFetchBasedStreaming:_,checkAllowFetchBasedStreamingByUrl:d,sseDevToolsReporter:m}){const p=null!=e?e:l,b=(0,i.useState)((()=>{const e={};if(c)for(const t of c)e[t.url]=t;return e}))[0],f=(0,i.useRef)(!0);(0,i.useEffect)((()=>{f.current?f.current=!1:console.warn(a.CONSOLE_PREFIX,a.CONSOLE_STYLE,"Streaming resource prop change not applied to existing resources.")}),[t,s,r,c]),(0,i.useEffect)((()=>()=>{const e=Object.values(b);for(const t of e)"kill"in t&&t.kill()}),[b]);const T=(0,i.useCallback)((({url:e,streamName:i})=>{const a=!d||d(e),c=_&&a?o.StreamingResource:n.LegacyStreamingResource;if(b[e])return b[e];const l=new c({fetch:p,url:e,streamName:i,closeUnusedConnectionAfterMs:t,pauseAfterNotVisibleForMs:s,maxMissingHeartbeatIntervalMs:r,sseDevToolsReporter:m});return b[e]=l,l}),[p,b,t,s,r,_,d,m]),v=(0,i.useCallback)((()=>Object.values(b).filter((e=>void 0===e.data&&e.isLoading))),[b]),g=(0,i.useCallback)((()=>{for(const e of Object.keys(b)){const t=b[e];t.data instanceof Error&&("kill"in t&&t.kill(),delete b[e])}}),[b]),E=(0,i.useMemo)((()=>({getResource:T,getAllPendingResources:v,killAndRemoveFailedResources:g})),[T,v,g]);return i.default.createElement(h.Provider,{value:E},u)}));t.Jx=u},782:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeferredPromise=void 0;t.DeferredPromise=class{constructor(){this._promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),this.then=this._promise.then.bind(this._promise),this.catch=this._promise.catch.bind(this._promise),this.finally=this._promise.finally.bind(this._promise),this[Symbol.toStringTag]="DeferredPromise"}}},424:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.camelizeJsonPatchPath=t.apiCamelize=void 0;var i=s(411);t.camelizeJsonPatchPath=e=>/[A-Za-z0-9]+_[A-Za-z0-9_]*/.test(e)||(e=>/[A-Z]+[A-Za-z0-9]*/.test(e))(e)?(0,i.camelize)(e):e;t.apiCamelize=e=>(0,i.camelizeKeys)(e,((e,t,s)=>{const i=(e=>/^[A-Za-z0-9]+_[A-Za-z0-9_]*$/.test(e))(e)||(e=>/^[A-Z]+[A-Za-z0-9]*$/.test(e))(e);return i?t(e,s):e}))},183:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CONSOLE_STYLE=t.CONSOLE_PREFIX=void 0;t.CONSOLE_PREFIX="%c Instant API Hooks:";t.CONSOLE_STYLE="color:blue"},783:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deepCloneWithWarn=void 0;var i=s(427),r=s(183);t.deepCloneWithWarn=(e,t,s)=>{const a=Date.now(),n=(0,i.deepClone)(t),o=Date.now()-a;return o>5&&(console.warn(r.CONSOLE_PREFIX,r.CONSOLE_STYLE,`Deep clone for stream: ${e} took ${o}ms. Consider using useStreamWithSelector or selecting less data in your useStreamWithSelector`),console.debug(r.CONSOLE_PREFIX,r.CONSOLE_STYLE,"Streaming Resource Data for slow clone: ",s)),n}}}]);
//# sourceMappingURL=instantapihooks-7652d2e16e55931f.js.map