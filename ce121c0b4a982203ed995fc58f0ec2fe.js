var _objAllSearchResult=document.getElementById("_allSearchResult"),_objAllSearchKeyword=document.getElementById("_allSearchKeyword"),_temp_only_mark_the_frist=0,_last_click_hotel_id_from_search,outerFormIsShit="FALSE",_search_placeHolder="搜索任何旅游相关",_promotion_url="",isFirstSendHttp="true",isDownKey="false",isHaveRecommondHistory="false",resultPageUrl="",firstNodeData={},lenovoInterface="//m.ctrip.com/restapi/soa2/26872/search";String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},_objAllSearchKeyword.parentNode.getAttribute("class");var _objSearchFormForEnter=document.getElementById("_search_for_enter");function _mIn(e){_mOut(),e.classList.add("hover")}function _mOut(){for(var e=_objAllSearchResult.childNodes,t=0;t<e.length;t++){e[t].classList.remove("hover")}}function _get_set_search_placeholder(){_search_placeHolder="搜索任何旅游相关","placeholder"in _objAllSearchKeyword?_objAllSearchKeyword.placeholder=_search_placeHolder:(_objAllSearchKeyword.value=_search_placeHolder,_objAllSearchKeyword.style.color="gray")}function _get_last_choice(){return"0"}function _getHover(){var e=0,t=_objAllSearchResult.childNodes,r="";if(_objAllSearchResult.childNodes[0]&&_objAllSearchResult.childNodes[0].textContent&&(r=_objAllSearchResult.childNodes[0].textContent||""),"历史搜索："==r||"无匹配的产品，您可以搜索："==r)e=1;else if(_objAllSearchResult.children&&0==_objAllSearchResult.children.length)e=1;else for(var o=_objAllSearchResult.childNodes[0].childNodes,a=0;a<o.length;a++)if(o[a].classList){if(o[a].classList.contains("hover"))return"0."+a}else if(-1!=o[a].className.indexOf("hover"))return"0."+a;for(;e<t.length;e++)if(t[e].classList){if(t[e].classList.contains("hover"))return e}else{if(!t[e].className)continue;if(-1!=t[e].className.indexOf("hover"))return e}return-1}function _getHoverIndex(){var e=1,t=_objAllSearchResult.childNodes;if(!_objAllSearchResult.children.length)return-2;for(;e<t.length;e++)if(t[e].classList){if(t[e].classList.contains("hover"))return e}else if(-1!=t[e].className.indexOf("hover"))return e;return-1}function _getRealEleCount(){var e=_objAllSearchResult.childNodes,t=e.length;return e[t-1].classList?e[t-1].classList.contains("search_close")?t-2:t-1:e[t-1].className.indexOf("search_close")>=0?t-2:t-1}function allDocumentBindClick(){document.addEventListener("click",clickDocument),document.body.addEventListener("click",clickDocument)}function clickDocument(e){try{var t=e?e.target:window.event.srcElement;"_allSearchResult"!=t.id&&"_allSearchKeyword"!=t.id&&(_objAllSearchResult.style.display="none",""!=_objAllSearchKeyword.value||"placeholder"in _objAllSearchKeyword||(_objAllSearchKeyword.value=_search_placeHolder,_objAllSearchKeyword.style.color="gray"),1==_temp_only_mark_the_frist&&(_temp_only_mark_the_frist=0,traceLog(["_tracklog","WWW_SEARCH_AUTOCOMPLET_US",'searchType=LF&inputkeyword="'+_objAllSearchKeyword.value+'"'])))}catch(e){}}function _conversType(e){var t=e;switch(e){case"hotelbrand":case"hotellist":case"zone":case"zonehotel":case"hotel":case"locationhotel":case"poihotel":case"channelhotel":case"channelhotelsearch":case"desthotel":t="hotel";break;case"travellist":case"channeltravelsearch":case"sighttravel":case"channeltravel":case"channel_travel_group":case"channel_travel_free":case"ttdlist":case"hhtravel":case"flighthotel":case"travelgroup":t="vacation";break;case"sighthotel":case"channelsh":t="scenicHotel";break;case"ticket":case"tickets":case"channelticket":case"channelticketsearch":t="ticket";break;case"intlairport":case"channelplanesearch":case"channelplane":case"airporthotel":case"flight":case"airport":case"flightschedule":t="flight";break;case"metrostation":case"railwaystation":case"trainhotel":case"channeltrainsearch":case"channeltrain":case"train":case"channelbus":case"channelbussearch":t="train";break;case"sight":case"attractions":t="destination";break;case"fun":case"play":case"entertainment":case"huodong":t="play";break;case"shop":case"shopping":t="shopping";break;case"channelgroup":case"channeltuan":case"channeltuansearch":case"channelgroupsearch":case"tuan":t="tuan";break;case"food":case"sightrestaurant":t="food";break;case"district":case"hotdistrict":case"location":case"channelother":default:t="location";break;case"gs":case"channelgs":case"channelgssearch":t="gs";break;case"car":t="car"}return"ico_"+t}function _allSearchEnterIn(e,t){try{t=t||(window.event?window.event:null);if("gray"==_objAllSearchKeyword.style.color&&(_objAllSearchKeyword.style.color="black"),13==t.keyCode){if(""==_objAllSearchResult.innerHTML)return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),void(t.returnValue=!1);if((y=_getHover())<0){y=0!=document.getElementById("_search_history_upper").querySelectorAll("*").length?0:1;var r="";_objAllSearchResult.firstChild&&_objAllSearchResult.firstChild.textContent&&(r=_objAllSearchResult.firstChild.textContent||""),(r.indexOf("无匹配的产品")>=0||r.indexOf("历史搜索")>=0)&&(y=1)}var o="",a=(o=y<1?document.getElementById("_search_history_upper")[0].children[10*y]:_objAllSearchResult.childNodes[y]).getAttribute("word")||o.getAttribute("keyword"),l=o.getAttribute("district")||o.getAttribute("dis"),s=o.getAttribute("url"),n=o.getAttribute("type"),i=o.getAttribute("onclick");o.getAttribute("class");if("_delhistoryHref()"==i)return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.returnValue=!1,void _delhistoryHref();if(null==s||""==s||"TRUE"==outerFormIsShit)return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),void(t.returnValue=!1);if(-1!=s.indexOf("?")){s.split("?")[0];for(var c=s.split("?")[1].split("&"),h=0;h<c.length;h++){var d=c[h].split("=")[0],_=c[h].split("=")[1];"channelgs"==n&&(_=decodeURIComponent(_)),"<input type='hidden' name ="+d+"  value="+_+" />"}}if("_historyHref(this)"==i&&"#ctm_ref=www_hp_his_lst","_dumpHref(this)"==i&&"#ctm_ref=www_hp_bs_lst","_otherSearchHref(this)"==i&&"#ctm_ref=www_hp_bs_lst",resultPageUrl.length>0&&firstNodeData.url!=resultPageUrl&&(a=_objAllSearchKeyword.value,l="",s=resultPageUrl),s&&a&&(_addCookie(_allSearchHtmlEncode(a),l||" ",s),"hotel"==n&&(_last_click_hotel_id_from_search=s.split(".html")[0].split("/").pop())),window.open(s),"channelgs"==n)if("acceptCharset"in _objSearchFormForEnter){var u=_objSearchFormForEnter.acceptCharset;_objSearchFormForEnter.acceptCharset="utf-8",setTimeout((function(){_objSearchFormForEnter.acceptCharset=u}))}else{u=document.charset;document.charset="utf-8",setTimeout((function(){document.charset=u}))}if(t.returnValue=!0,"_historyHref(this)"==i)traceLog(["_tracklog","WWW_SEARCH_AUTOCOMPLET_US",'searchType=HIS&keyword="'+a+'"&inputkeyword="'+_objAllSearchKeyword.value+'"']);else{traceLog(["_tracklog","WWW_SEARCH_AUTOCOMPLET_US","searchType=BS&AutoType="+o.getAttribute("type")+"&Yindex="+_getHover()+'&keyword="'+o.getAttribute("word")+'"&inputkeyword="'+_objAllSearchKeyword.value+'"']);var p=_objAllSearchResult.childNodes;p&&3==p.length&&"channeltravelsearch"==p[0].getAttribute("type")&&"gs"==p[2].getAttribute("type")&&("channeltravelsearch"==n?traceLog(["_tracklog","WWW_SEARCH_AUTOCOMPLET_US_1","searchType=TR&AutoType="+o.getAttribute("type")+"&Yindex="+_getHover()+'&keyword="'+o.getAttribute("word")+'"&inputkeyword="'+_objAllSearchKeyword.value+'"']):"gs"==n&&traceLog(["_tracklog","WWW_SEARCH_AUTOCOMPLET_US_1","searchType=GS&AutoType="+o.getAttribute("type")+"&Yindex="+_getHover()+'&keyword="'+o.getAttribute("word")+'"&inputkeyword="'+_objAllSearchKeyword.value+'"']))}}if(38===t.keyCode){var y=_getHover(),m=_objAllSearchResult.childNodes,v="";if(m[0]&&m[0].textContent&&(v=m[0].textContent||""),"历史搜索："==v||"无匹配的产品，您可以搜索："==v){if(y<0)_mIn(m[1]),(S=m[1].getAttribute("word"))&&(_objAllSearchKeyword.value=S);if(y>1)_mIn(m[y-1]),(S=m[y-1].getAttribute("word"))&&(_objAllSearchKeyword.value=S)}else{if(y<0){var g=m[0];"search_list_history"==g.className&&(g=m[0].firstChild),_mIn(g),(S=g.getAttribute("word")||g.getAttribute("keyword"))&&(_objAllSearchKeyword.value=S)}if(y>1)_mIn(m[y-1]),(S=m[y-1].getAttribute("word"))&&(_objAllSearchKeyword.value=S);if(1==y)if((w=m[0]).hasChildNodes())_mIn(w.lastChild),(S=w.lastChild.getAttribute("keyword"))&&(_objAllSearchKeyword.value=S);if(y<1&&y>=0){var w,f=(w=m[0]).childNodes;if((A=10*y)>0){var b=f[A-1];_mIn(b),(S=b.getAttribute("keyword"))&&(_objAllSearchKeyword.value=S)}}}}if(40==t.keyCode){y=_getHover(),m=_objAllSearchResult.childNodes,v="";if(m[0]&&m[0].textContent&&(v=m[0].textContent||""),"历史搜索："==v||"无匹配的产品，您可以搜索："==v){if(y<0||y==_getRealEleCount())_mIn(m[1]),(S=m[1].getAttribute("word"))&&(_objAllSearchKeyword.value=S);if(y>=1&&y<_getRealEleCount())_mIn(m[y+1]),(S=m[y+1].getAttribute("word"))&&(_objAllSearchKeyword.value=S)}else{var A;if(isDownKey="true",y<0||y==_getRealEleCount())if(m[0].hasChildNodes())_mIn((f=m[0].childNodes)[0]),(S=f[0].getAttribute("keyword"))&&(_objAllSearchKeyword.value=S);else _mIn(m[1]),(S=m[1].getAttribute("word"))&&(_objAllSearchKeyword.value=S);if(y>=1&&y<_getRealEleCount())_mIn(m[y+1]),(S=m[y+1].getAttribute("word"))&&(_objAllSearchKeyword.value=S);if(y>=0&&y<1)if((A=10*y)==m[0].children.length-1){_mIn(m[1]),(S=m[1].getAttribute("word"))&&(_objAllSearchKeyword.value=S)}else{var S,k=m[0].childNodes;_mIn(k[A+1]),(S=k[A+1].getAttribute("keyword"))&&(_objAllSearchKeyword.value=S)}}}}catch(e){}}function _allSearchHtmlEncode(e){try{return e.replace(/&/g,"&amp").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\+/g,"＋")}catch(e){return""}}function _navigatorMSIE(){return userAgent=window.navigator.userAgent.toLowerCase(),userAgent.indexOf("msie")>=0?1:0}_get_set_search_placeholder(),allDocumentBindClick(),document.getElementById("search_button_global").onclick=function(e){if("placeholder"in _objAllSearchKeyword){if(""==_objAllSearchKeyword.value&&""!=_promotion_url)return window.open(_promotion_url),void traceLog(["_tracklog","WWW_SEARCH_AUTOCOMPLET_US","searchType=EBC&AutoType=&Yindex="+_getHover()+'&keyword=""&inputkeyword="'+_objAllSearchKeyword.value+'"'])}else if((_objAllSearchKeyword.value==_search_placeHolder||""==_objAllSearchKeyword.value)&&""!=_promotion_url)return window.open(_promotion_url),void traceLog(["_tracklog","WWW_SEARCH_AUTOCOMPLET_US","searchType=EBC&AutoType=&Yindex="+_getHover()+'&keyword=""&inputkeyword="'+_objAllSearchKeyword.value+'"']);var t={};if(_objAllSearchResult.childNodes[0]&&_objAllSearchResult.childNodes[0].textContent&&_objAllSearchResult.childNodes[0].textContent.indexOf("无匹配的产品")>=0)(t=_objAllSearchResult.childNodes[1]).click();else try{t=_objAllSearchResult.hasChildNodes()&&_objAllSearchResult.childNodes[0]&&_objAllSearchResult.childNodes[0].hasChildNodes()?_objAllSearchResult.childNodes[0].childNodes[0]:_objAllSearchResult.childNodes[1],resultPageUrl.length>0&&firstNodeData.url!=resultPageUrl?(_addCookie(_allSearchHtmlEncode(_objAllSearchKeyword.value),"",resultPageUrl),window.open(resultPageUrl)):t.click()}catch(e){}};var autoIncreasementId=0,inputNode=document.getElementById("_allSearchKeyword");function _callMCtripData(e){if("true"!=isDownKey||"placeholder"in _objAllSearchKeyword){try{if(13==(e=e||(window.event?window.event:null)).keyCode||38==e.keyCode||40==e.keyCode)return}catch(e){}var t=e.target||e.srcElement;if(t){var r=_allSearchHtmlEncode(t.value);if(resultPageUrl="",null==r||0==r.length||""==r.trim())return void _historyResultDiv();"true"!=isFirstSendHttp||r!=_search_placeHolder||"placeholder"in _objAllSearchKeyword?_drawOut(r):isFirstSendHttp="false"}}else isDownKey="false"}function _getServerMessage(){}function _drawOut(keyword){var id=++autoIncreasementId,httpRequest=null;httpRequest=window.XMLHttpRequest?1==_navigatorMSIE()&&window.XDomainRequest?new XDomainRequest:new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var params="action=online&source=globalonline&keyword=",keywordStr=_objAllSearchKeyword.value;keywordStr.length>50&&(keywordStr=keywordStr.substr(0,50)),params+=encodeURIComponent(keywordStr),httpRequest.open("POST",lenovoInterface,!0),httpRequest.setRequestHeader("Content-type","application/x-www-form-urlencoded"),httpRequest.send(params),httpRequest.onload=function(){if(keyword===_objAllSearchKeyword.value){var jsons=httpRequest.responseText,node;node="undefined"==typeof JSON?eval("("+jsons+")"):JSON.parse(jsons),null!==node&&null!==node.data&&node.data.length>0?id==autoIncreasementId&&(resultPageUrl=node.resultPageUrl||"",firstNodeData=node.data[0],_renderResult(keyword,node.data)):(resultPageUrl="",firstNodeData={},""!==keyword?_renderNoResultDiv(keyword):_historyResultDiv())}}}function _renderResult(e,t){var r="";isHaveRecommondHistory="false";var o=_readCookie();if(null!=o)var a=o.split("#&&");else a=new Array;for(var l=a.length-1;l>=0;l--){var s=a[l].split("#=="),n=s[0].split("#--"),i=n[0];e.length>1&&0==i.indexOf(e)&&(" "==n[1]?r+='<a href="javascript:void(0);" url='+s[1]+' onClick="_historyHref(this)" keyword="'+n[0]+'" dis="'+n[1]+'" onmouseenter="_mIn(this)" onmouseleave="_mOut()"><span class="first_item"><i class="ico_history"></i><strong>'+i+"</strong></span></a>":r+='<a href="javascript:void(0);" url='+s[1]+' onClick="_historyHref(this)" keyword="'+n[0]+'" dis="'+n[1]+'" onmouseenter="_mIn(this)" onmouseleave="_mOut()"><span class="first_item"><i class="ico_history"></i><strong>'+i+"</strong>,<span>"+n[1]+"</span></span></a>",isHaveRecommondHistory="true",traceLog(["_tracklog","WWW_SEARCH_AUTOCOMPLET_US",'searchType=HC&inputkeyword="'+_objAllSearchKeyword.value+'"']))}var c="";c=""!=r?'<div class="search_list_history" id="_search_history_upper" style="display:block;">'+r+"</div>":'<div class="search_list_history" id="_search_history_upper" style="display:none;">'+r+"</div>";for(var h=0;h<t.length;h++){var d=t[h],_=d.districtName;_||(_=" ");var u=_allSearchHtmlEncode(d.word),p=_conversType(d.type);if(["客栈","民宿","途家公寓","租房","公寓"].indexOf(u)>-1&&(p="ico_hotel"),"更多城市"!=u)if(["携程宝","礼品卡","程涨宝","任我游","任我行","任我住"].indexOf(u)>-1)p="ico_location",c+='<a href="javascript:void(0);" url="'+d.url+'"  word="'+u+'" district="'+_+'"  type ='+d.type+' onclick="_dumpHref(this)" onmouseenter="_mIn(this)" onmouseleave="_mOut()"> <i class="'+p+'"></i>'+d.word.split(e).join("<strong>"+e+"</strong>")+"<span>  "+_+"</span></a>";else if(["hotel","sighthotel","desthotel","channelgroup","channeltravel","travelgroup","ticket","huodong","hhtravel","flighthotel"].indexOf(d.type)>-1){var y="",m=d.starIconType||"";switch(y=["circle","star","diamond"].indexOf(m)>-1?m:"F"===d.starLicence?"circle":null!=d.starRating&&d.starRating.indexOf("星级")>=0?"star":"diamond",d.starRating){case"一星级":y+="01";break;case"二星级":case"经济型":y+="02";break;case"三星级":case"舒适型":y+="03";break;case"四星级":case"高档型":y+="04";break;case"五星级":case"豪华型":y+="05";break;case"六星级":y+="06"}var v=" ";void 0!==d.price&&(v=' <span class="search_hotel_price"><dfn>￥</dfn>'+d.price+"起</span>"),"实时计价"==d.price&&(v=' <span class="search_hotel_price">实时计价</span>');var g=u;(d.zoneName||" "!=_)&&(g+=" , "+(d.zoneName||_)),y.indexOf("00")>-1?d.costlowerpercent&&d.costlowerpercent>=10&&d.costlowerpercent<=50?"sighthotel"==d.type?c+='<div class="search_list_vacation" title="'+g+'" url="'+d.url+'" word="'+u+'" type="'+d.type+'" district="'+(d.zoneName||_)+'" onclick="_dumpHref(this)" onmouseenter="_mIn(this)" onmouseleave="_mOut()" > <i class="'+p+'"></i><p class="search_hotel_name" >'+d.word.split(e).join("<strong>"+e+"</strong>")+"<span> "+(d.zoneName||_)+'</span></p><span class="search_hotel_grade cui_'+y+'"></span>'+v+' <span class="search_hotel_notes">比附近同级低<span>'+d.costlowerpercent+"%</span></span> </div>":c+='<div class="search_list_hotel" title="'+g+'" url="'+d.url+'" word="'+u+'" type="'+d.type+'" district="'+(d.zoneName||_)+'" onclick="_dumpHref(this)" onmouseenter="_mIn(this)" onmouseleave="_mOut()" > <i class="'+p+'"></i><p class="search_hotel_name" >'+d.word.split(e).join("<strong>"+e+"</strong>")+"<span> "+(d.zoneName||_)+'</span></p><span class="search_hotel_grade cui_'+y+'"></span>'+v+' <span class="search_hotel_notes">比附近同级低<span>'+d.costlowerpercent+"%</span></span> </div>":"sighthotel"==d.type?c+='<div class="search_list_vacation" title="'+g+'" url="'+d.url+'" word="'+u+' "type="'+d.type+'" district="'+(d.zoneName||_)+'" onclick="_dumpHref(this)" onmouseenter="_mIn(this)" onmouseleave="_mOut()" > <i class="'+p+'"></i><p class="search_hotel_name" >'+d.word.split(e).join("<strong>"+e+"</strong>")+"<span> "+(d.zoneName||_)+"</span></p>"+v+"</span> </div>":c+='<div class="search_list_hotel" title="'+g+'" url="'+d.url+'" word="'+u+' "type="'+d.type+'" district="'+(d.zoneName||_)+'" onclick="_dumpHref(this)" onmouseenter="_mIn(this)" onmouseleave="_mOut()" > <i class="'+p+'"></i><p class="search_hotel_name" >'+d.word.split(e).join("<strong>"+e+"</strong>")+"<span> "+(d.zoneName||_)+"</span></p>"+v+"</span> </div>":d.costlowerpercent&&d.costlowerpercent>=10&&d.costlowerpercent<=50?"sighthotel"==d.type?c+='<div class="search_list_vacation" title="'+g+'" url="'+d.url+'" word="'+u+'" type="'+d.type+'" district="'+(d.zoneName||_)+'" onclick="_dumpHref(this)" onmouseenter="_mIn(this)" onmouseleave="_mOut()" > <i class="'+p+'"></i><p class="search_hotel_name" >'+d.word.split(e).join("<strong>"+e+"</strong>")+"<span> "+(d.zoneName||_)+'</span></p><span class="search_hotel_grade cui_'+y+'"></span>'+v+'  <span class="search_hotel_notes">比附近同级低<span>'+d.costlowerpercent+"%</span></span> </div>":c+='<div class="search_list_hotel" title="'+g+'" url="'+d.url+'" word="'+u+'" type="'+d.type+'" district="'+(d.zoneName||_)+'" onclick="_dumpHref(this)" onmouseenter="_mIn(this)" onmouseleave="_mOut()" > <i class="'+p+'"></i><p class="search_hotel_name" >'+d.word.split(e).join("<strong>"+e+"</strong>")+"<span> "+(d.zoneName||_)+'</span></p><span class="search_hotel_grade cui_'+y+'"></span>'+v+'  <span class="search_hotel_notes">比附近同级低<span>'+d.costlowerpercent+"%</span></span> </div>":"sighthotel"==d.type?c+='<div class="search_list_vacation" title="'+g+'" url="'+d.url+'" word="'+u+'" type="'+d.type+'" district="'+(d.zoneName||_)+'" onclick="_dumpHref(this)" onmouseenter="_mIn(this)" onmouseleave="_mOut()" > <i class="'+p+'"></i><p class="search_hotel_name" >'+d.word.split(e).join("<strong>"+e+"</strong>")+"<span> "+(d.zoneName||_)+'</span></p><span class="search_hotel_grade cui_'+y+'"></span>'+v+"  </span> </div>":["channelgroup","channeltravel","travelgroup","ticket","huodong","hhtravel","flighthotel"].indexOf(d.type)>-1?c+='<div class="search_list_hotel" style="height:20px;" title="'+g+'" url="'+d.url+'" word="'+u+'" type="'+d.type+'" district="'+(d.zoneName||_)+'" onclick="_dumpHref(this)" onmouseenter="_mIn(this)" onmouseleave="_mOut()" > <i class="'+p+'"></i><p class="search_hotel_name" >'+d.word.split(e).join("<strong>"+e+"</strong>")+"<span> "+(d.zoneName||_)+'</span></p><span class="search_hotel_grade cui_'+y+'"></span>'+v+"  </span> </div>":" "==d.starRating?c+='<div class="search_list_hotel" style="height:20px;" title="'+g+'" url="'+d.url+'" word="'+u+'" type="'+d.type+'" district="'+(d.zoneName||_)+'" onclick="_dumpHref(this)" onmouseenter="_mIn(this)" onmouseleave="_mOut()" > <i class="'+p+'"></i><p class="search_hotel_name" >'+d.word.split(e).join("<strong>"+e+"</strong>")+"<span> "+(d.zoneName||_)+'</span></p><span class="search_hotel_grade cui_'+y+'"></span>'+v+" </div>":"ico_hotel"==p?(console.log(d.starLicence,d.word),y.indexOf("circle"),c+='<div class="search_list_hotel" style="position: relative;-webkit-line-clamp: 2;height: auto;padding: 5px 10px 5px 34px;color: #333;cursor: pointer;text-overflow: ellipsis" title="'+g+'" url="'+d.url+'" word="'+u+'" type="'+d.type+'" district="'+(d.zoneName||_)+'" onclick="_dumpHref(this)" onmouseenter="_mIn(this)" onmouseleave="_mOut()" > <i class="'+p+'"></i><p class="" style="margin: 0;width: 225px;overflow: hidden;text-overflow: ellipsis;-webkit-line-clamp: 2;display: -webkit-box;-webkit-box-orient: vertical;" >'+d.word.split(e).join("<span style='color:#0086F6'>"+e+"</span>")+'<span style="color: #999999"> '+(d.zoneName||_)+'</span></p><span class="search_hotel_grade cui_'+y+'"></span>'+v+" </div>"):c+='<div class="search_list_hotel" title="'+g+'" url="'+d.url+'" word="'+u+'" type="'+d.type+'" district="'+(d.zoneName||_)+'" onclick="_dumpHref(this)" onmouseenter="_mIn(this)" onmouseleave="_mOut()" > <i class="'+p+'"></i><p class="search_hotel_name" >'+d.word.split(e).join("<strong>"+e+"</strong>")+"<span> "+(d.zoneName||_)+'</span></p><span class="search_hotel_grade cui_'+y+'"></span>'+v+" </div>"}else if("flightschedule"==d.type){var w=d.arrivalCity+d.arrivalAirport,f=d.departureCity+d.departureAirport+"->"+w;c+='<a href="javascript:void(0);" url="'+d.url+'"  word="'+u+'" district="'+f+'"  type ='+d.type+' onclick="_dumpHref(this)" onmouseenter="_mIn(this)" onmouseleave="_mOut()"><i class="'+p+'"></i>'+d.word.split(e).join("<strong>"+e+"</strong>")+"<span>  "+f+"</span></a>"}else c+='<a href="javascript:void(0);" url="'+d.url+'"  word="'+u+'" district="'+_+'"  type ='+d.type+' onclick="_dumpHref(this)" onmouseenter="_mIn(this)" onmouseleave="_mOut()"><i class="'+p+'"></i>'+d.word.split(e).join("<strong>"+e+"</strong>")+"<span>  "+_+"</span></a>"}c+='<a class="search_close" onclick="this.parentNode.style.display=\'none\'">×</a>',_objAllSearchResult.innerHTML=c,_objAllSearchResult.style.display="block",traceLog(["_tracklog","WWW_SEARCH_AUTOCOMPLET_US",'searchType=SD&inputkeyword="'+_objAllSearchKeyword.value+'"'])}function traceLog(e){window.__bfi&&window.__bfi.push(e)}function _dumpHref(e){var t=e.getAttribute("word"),r=e.getAttribute("district")||" ",o=e.getAttribute("url"),a=e.getAttribute("type"),l=e.getAttribute("class");_addCookie(_allSearchHtmlEncode(t),r,o),"hotel"==a&&(_last_click_hotel_id_from_search=o.split(".html")[0].split("/").pop()),window.open(o+"#ctm_ref=www_hp_bs_lst"),traceLog("search_list_history"==l?["_tracklog","WWW_SEARCH_AUTOCOMPLET_US","searchType=BS&AutoType=his&Yindex="+(10*_getHover()+1)+'&keyword="'+e.getAttribute("word")+'"&inputkeyword="'+_objAllSearchKeyword.value+'"']:["_tracklog","WWW_SEARCH_AUTOCOMPLET_US","searchType=BS&AutoType="+e.getAttribute("type")+"&Yindex="+_getHover()+'&keyword="'+e.getAttribute("word")+'"&inputkeyword="'+_objAllSearchKeyword.value+'"&isHaveRecommondHistory="'+isHaveRecommondHistory+'"'])}function _doNothing(e){(e=e||(window.event?window.event:null)).preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.returnValue=!1}function _renderNoResultDiv(e){try{e.length>100&&(e=e.substr(0,100));var t=encodeURIComponent(_allSearchHtmlEncode(e)),r='<div onclick="_doNothing(event)">无匹配的产品，您可以搜索：</div><a href="javascript:;" url="//you.ctrip.com/globalsearch/?keyword='+t+'" onclick="_otherSearchHref(this)"  onmouseenter="_mIn(this)"  onmouseleave="_mOut()"><i class="ico_gs"></i>“'+e+'”相关的攻略</a><a href="javascript:;" url="//hotels.ctrip.com/hotel/sz2/k1'+t+'"  onclick="_otherSearchHref(this)" onmouseenter="_mIn(this)"  onmouseleave="_mOut()"><i class="ico_hotel"></i>“'+e+'”相关的酒店</a><a href="javascript:;" url="//vacations.ctrip.com/list/whole/sc.html?sv='+t+'" onclick="_otherSearchHref(this)"  onmouseenter="_mIn(this)" onmouseleave="_mOut()" ><i class="ico_vacation"></i>“'+e+'”相关的旅游产品</a><a href="javascript:;" url="//piao.ctrip.com/piao.html?keyword='+t+'" onclick="_otherSearchHref(this)"  onmouseenter="_mIn(this)" ><i class="ico_ticket" onmouseleave="_mOut()"></i>“'+e+"”相关的门票</a>";r+='<a class="search_close" onclick="this.parentNode.style.display=\'none\'">×</a>',_objAllSearchResult.innerHTML=r,_objAllSearchResult.style.display="block"}catch(e){}}function _addCookie(e,t,r){var o=(e=_allSearchHtmlEncode(e))+"#--"+t,a=e+"#--"+t+"#=="+r,l=_readCookie();if(null!=l)var s=l.split("#&&");else s=new Array;for(var n=0;n<s.length;n++){var i=s[n].split("#==");if(i.length>1&&i[0]==o)return}5==s.length&&s.shift(),s.push(a);var c=s.join("#&&"),h="SearchHistoryWordV2="+escape(c),d=new Date;d.setTime(d.getTime()+2592e6),h+="; expires="+d.toGMTString(),document.cookie=h}function _readCookie(){var e=/"|;|'|<|>|\.\.\//g,t=document.cookie;if(""==t)return null;for(var r=t.split("; "),o=0;o<r.length;o++){var a=r[o].split("="),l=a[0],s=a[1];if("SearchHistoryWordV2"==l){var n=unescape(s);if(null!=n)return n=n.replace(e,"")}}return null}function _delhistoryHref(){_readCookie();try{var e=new Date;e.setTime(e.getTime()-1e4),document.cookie="SearchHistoryWordV2=a; expires="+e.toGMTString(),_objSearchFormForEnter&&_objSearchFormForEnter.setAttribute("action","//www.ctrip.com")}catch(e){}finally{return _historyResultDiv(),!1}}function _deleteCookie(e){var t=_readCookie(),r=e.currentTarget.parentElement.getAttribute("keyword")+"#--"+e.currentTarget.parentElement.getAttribute("dis");try{if(null!=t){for(var o=t.split("#&&"),a=0;a<o.length;a++){o[a].split("#==")[0]==r&&o.splice(a,1)}if(0!=o.length){var l=o.join("#&&"),s="SearchHistoryWordV2="+escape(l),n=new Date;n.setTime(n.getTime()+2592e6),s+="; expires="+n.toGMTString(),document.cookie=s}else{(n=new Date).setTime(n.getTime()-1e4),document.cookie="SearchHistoryWordV2=a; expires="+n.toGMTString()}}}catch(e){}finally{if(null==(t=_readCookie()))_hideHistory();else 0==(o=t.split("#&&")).length&&_hideHistory();return e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0,_historyResultDiv(),!1}}function _hideHistory(){_objAllSearchResult.style.display="none"}function _historyHref(e){window.open(e.getAttribute("url")+"#ctm_ref=www_hp_his_lst"),traceLog(["_tracklog","WWW_SEARCH_AUTOCOMPLET_US",'searchType=HIS&keyword="'+e.getAttribute("keyword")+'"&inputkeyword="'+_objAllSearchKeyword.value+'"'])}function _hotHref(e){window.open(e.getAttribute("url")),traceLog(["_tracklog","WWW_SEARCH_AUTOCOMPLET_US",'searchType=HOT&keyword="'+e.getAttribute("keyword")+'"'])}function _otherSearchHref(e){var t=e.textContent,r=e.getAttribute("district")||" ",o=e.getAttribute("url"),a=t.slice(-2);"产品"==a&&(a="旅游"),_addCookie(t,r,o),window.open(o+"#ctm_ref=www_hp_bs_lst"),traceLog(["_tracklog","WWW_SEARCH_AUTOCOMPLET_US",'searchType=NR&keyword="'+a+'"&inputkeyword="'+_objAllSearchKeyword.value+'"'])}function _historyResultDiv(){if(_temp_only_mark_the_frist=1,_objAllSearchKeyword.value&&""!=_objAllSearchKeyword.value.trim()&&_objAllSearchKeyword.value!=_search_placeHolder)_drawOut(_allSearchHtmlEncode(_objAllSearchKeyword.value));else{var e="",t=_readCookie();if(null!=t){var r=t.split("#&&");e+='<div  onclick="_doNothing(event)">历史搜索：</div>';for(var o=r.length-1;o>=0;o--){var a=r[o].split("#=="),l=a[0].split("#--"),s=l[0];null!=a[1]&&null!=l[1]&&(e+='<a class= "history_link " href="javascript:void(0);" url='+a[1]+' onClick="_historyHref(this)" keyword="'+l[0]+'" dis="'+l[1]+'" onmouseenter="_mIn(this)" onmouseleave="_mOut()">'+s+"<span>  "+l[1]+"</span></a>")}e+='<a class= "history_link " href="javascript:void(0);"  onClick="_delhistoryHref()" onmouseenter="_mIn(this)" onmouseleave="_mOut()"><span> 清除历史搜索记录 </span></a>'}""!=e?(_objAllSearchResult.innerHTML=e,_objAllSearchResult.style.display="block"):(_objAllSearchResult.innerHTML=e,_objAllSearchResult.style.display="none"),traceLog(["_tracklog","WWW_SEARCH_AUTOCOMPLET_US",'searchType=FO&inputkeyword="noinputstatus"'])}}inputNode.removeAttribute("onkeyup"),inputNode.addEventListener?inputNode.addEventListener("input",_callMCtripData,!1):inputNode.attachEvent("onpropertychange",(function(e){"value"==window.event.propertyName&&_callMCtripData(e)})),_objAllSearchKeyword.onclick=function(){"placeholder"in _objAllSearchKeyword||_objAllSearchKeyword.value!=_search_placeHolder||"gray"!=_objAllSearchKeyword.style.color||(_objAllSearchKeyword.value="")};
//# sourceMappingURL=https://sourcemap.ares.tripws.com/modules/gcc/online-globalsearch/map/allsearchbar.bc4da8bcbdc9fc9fd21a3b6e9f48356e.map