(window.webpackJsonp=window.webpackJsonp||[]).push([[149],{2147:function(e,t,r){"use strict";r.r(t);var n=r(7),o=(r(5),r(6),r(23),r(0)),l=r(782),c=(r(19),r(36)),d=r(40),v=r(29),h=r(62),f=class extends h.a{constructor(e){super(e),this.services=["tagular"]}get defaults(){return{"@type":"core.InfinitePageScrolled.v1",isInfiniteScroll:!0}}};f=Object(o.c)([Object(c.a)(v.a.Transient),Object(o.g)(0,d.a),Object(o.f)("design:paramtypes",[Object])],f);var m=r(4),x=r(785),O=r(852);function P(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?P(Object(source),!0).forEach((function(t){Object(m.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):P(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var $=new(r(9).a)("SeamlessTriggers"),j=class extends l.Vue{constructor(){super(...arguments),this.requested=!1}get config(){return this.$seamless.config}get requestObserverOptions(){var e,t;return y({handler:this.requestPage,data:{index:this.index}},(null===(t=null===(e=this.config)||void 0===e?void 0:e.intersectionObservers)||void 0===t?void 0:t.request)||{})}get enterObserverOptions(){var e,t;return y({handler:this.enterPage,data:{index:this.index}},(null===(t=null===(e=this.config)||void 0===e?void 0:e.intersectionObservers)||void 0===t?void 0:t.enter)||{})}requestPage(e){var{data:data,direction:t}=e;if("down"===t&&!this.requested){$.log("requestPage",t,data);try{this.$emit("seamless-insert-page",data.index,this.$seamless.requestPage({data:data,direction:t})),this.requested=!0}catch(e){$.error(e)}}}enterPage(e){var{data:data,direction:t}=e;$.log("enterPage",t,data),this.$emit("seamless-enter-page",{data:data,direction:t})}};Object(o.c)([Object(l.Prop)({default:!1,required:!0}),Object(o.f)("design:type",Number)],j.prototype,"index",void 0);var w=j=Object(o.c)([l.Component,Object(x.a)("intersection-observer",O.a)],j),_=r(121),S=Object(_.a)(w,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"c-seamlessTriggers"},[t("div",{directives:[{name:"intersection-observer",rawName:"v-intersection-observer",value:e.requestObserverOptions,expression:"requestObserverOptions"}]}),e._v(" "),t("div",{directives:[{name:"intersection-observer",rawName:"v-intersection-observer",value:e.enterObserverOptions,expression:"enterObserverOptions"}]})])}),[],!1,null,null,null).exports,k=r(67),T=r(889),I=class extends l.Vue{constructor(){super(...arguments),this.pages=[],this.currentParentPage=null,this.listing=null,this.pageRequestPromises=[],this.loading=!1}getPages(){var e,t=(null===(e=this.$refs)||void 0===e?void 0:e.pages)?this.$refs.pages:[];return[this.currentParentPage,...t]}getPageByIndex(e){var t;return(null===(t=this.getPages())||void 0===t?void 0:t[e])||null}routeChange(){this.cleanup()}beforeDestroy(){this.cleanup(),this.$nuxt.$off("pageMounted")}beforeMount(){this.$nuxt.$on("pageMounted",(e=>{this.currentParentPage=e,this.initializeSeamless()}))}initializeSeamless(){var e=this;return Object(n.a)((function*(){var t,r;e.$services.isFeatureEnabled("seamless")?(e.$seamless.createSeamlessMeta(e.$meta()),e.listing=null===(r=yield e.$seamless.requestSeamlessListing(null===(t=e.currentParentPage)||void 0===t?void 0:t.content))||void 0===r?void 0:r.items):k.a.warn("Seamless is disabled")}))()}enterPage(e){var t=this;return Object(n.a)((function*(){var{data:data,direction:r}=e;k.a.log("waiting for page to be requested and inserted");try{yield t.pageRequestPromises[data.index]}catch(e){return void k.a.error(e)}k.a.log("enterPage",data,r);var n="down"===r?data.index+1:data.index,o=t.getPageByIndex(n),l="down"===r?data.index-1:data.index+1,c=t.getPageByIndex(l);k.a.log("previousPage",c),c&&c.removeAds(),t.$seamless.enterPage(o,c,{data:data,direction:r}),t.$nuxt.$emit("seamless-enter",o)}))()}preInsertPage(e,t){this.loading=!0;try{this.pageRequestPromises[e]=new Promise(((r,n)=>{t.then((t=>{var n;if(!(null===(n=null==t?void 0:t.content)||void 0===n?void 0:n.content))throw new Error("no content found on page");this.insertPage(t.content,e,t.pageTypeConfig).then(r),this.loading=!1}))}))}catch(e){k.a.error(e),this.loading=!1}}insertPage(content,e,t){var r=this;return Object(n.a)((function*(){var component=yield t.component();component=component.extend({data:()=>({content:content}),beforeCreate(){try{this.$options.asyncData(this.$nuxt.context,content)}catch(e){k.a.error("error calling 'asyncData' for page with slug: '".concat(content.id,"'"),e)}}}),r.$config.ads.adDisplay.delayLoad=!0,r.$nuxt.$meta().pause(),r.pages.push(component),yield r.$nextTick();try{r.$refs.pages[e]?k.a.log("inserted page: '".concat(content.pageType,"' with slug: '").concat(content.id,"'")):(r.pages.pop(),k.a.warn("could not find a reference to a page at index ".concat(e)))}catch(e){k.a.error("error getting page reference for slug: '".concat(content.id,"'"),e)}}))()}trackScroll(e,t){var r,n,o,l,c;if(this.$services.isFeatureEnabled("seamless")){k.a.log("Firing Cohesion scroll event",e,null===(r=null==t?void 0:t.data)||void 0===r?void 0:r.index),this.$track(f).with({scrollDistance:e,pageIndex:null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.index}).fire();var content=null===(c=null===(l=this.getPageByIndex(null===(o=null==t?void 0:t.data)||void 0===o?void 0:o.index))||void 0===l?void 0:l.content)||void 0===c?void 0:c.content;this.$nuxt.$emit("track-scroll",e,content)}else k.a.log("Not firing scroll events, seamless is disabled")}cleanup(){this.$config.ads.adDisplay.delayLoad=!1,this.pages=[],this.pageRequestPromises=[],this.listing=null,this.$store.commit("page/clearSeamless"),this.$nuxt.$meta().resume()}};Object(o.c)([Object(l.Watch)("$route"),Object(o.f)("design:type",Function),Object(o.f)("design:paramtypes",[]),Object(o.f)("design:returntype",void 0)],I.prototype,"routeChange",null);var C=I=Object(o.c)([Object(l.Component)({components:{SeamlessTriggers:S,TrackScroll:T.a}})],I),D=Object(_.a)(C,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"c-seamlessListing"},[t("TrackScroll",{attrs:{"tracking-data":{index:0}},on:{"scroll-change":e.trackScroll}},[e._t("default")],2),e._v(" "),e.listing?[t("SeamlessTriggers",{attrs:{index:0},on:{"seamless-insert-page":e.preInsertPage,"seamless-enter-page":e.enterPage}}),e._v(" "),e._l(e.pages,(function(r,n){return[t("TrackScroll",{key:r.slug,attrs:{"tracking-data":{index:n+1}},on:{"scroll-change":e.trackScroll}},[t(r,{ref:"pages",refInFor:!0,tag:"component",attrs:{"is-seamless":!0}})],1),e._v(" "),n<e.listing.length-1?t("SeamlessTriggers",{key:r.slug,attrs:{index:n+1},on:{"seamless-insert-page":e.preInsertPage,"seamless-enter-page":e.enterPage}}):e._e()]}))]:e._e(),e._v(" "),e.loading?e._t("loader"):e._e()],2)}),[],!1,null,null,null).exports,L=class extends D{constructor(){super(...arguments),this.pageRecords=[]}insertPage(content,e,t){var r=this;return Object(n.a)((function*(){var component=yield t.component();component=component.extend({data:()=>({content:content}),beforeCreate(){try{this.$options.asyncData(this.$nuxt.context,content)}catch(e){k.a.error("error calling 'asyncData' for page with slug: '".concat(content.id,"'"),e)}}}),r.$config.ads.adDisplay.delayLoad=!0,r.$nuxt.$meta().pause();var n=content.content,o="15020e90-588e-484e-a12c-7f22a574f819"===n.id||["dab293a4-bef1-4902-86b6-3a4565bc524d","67c4f6cc-3599-4d80-9133-a895025952b6","6ee97e07-e721-4e0b-a19f-43d9e095d528","5e79b4a1-e66d-4c79-aaf3-4b1b8bcb54df"].includes(n.id);r.pageRecords.push({component:component,isBestList:o,id:n.id}),yield r.$nextTick();try{r.$refs.pages[e]?k.a.log("inserted page: '".concat(content.pageType,"' with slug: '").concat(content.id,"'")):(r.pageRecords.pop(),k.a.warn("could not find a reference to a page at index ".concat(e)))}catch(e){k.a.error("error getting page reference for slug: '".concat(content.id,"'"),e)}}))()}enterPage(e){var t=this;return Object(n.a)((function*(){var{data:data,direction:r}=e;k.a.log("waiting for page to be requested and inserted");try{yield t.pageRequestPromises[data.index]}catch(e){return void k.a.error(e)}k.a.log("enterPage",data,r);var n="down"===r?data.index+1:data.index,o=t.getPageByIndex(n),l="down"===r?data.index-1:data.index+1,c=t.getPageByIndex(l);k.a.log("previousPage",c),c&&c.removeAds(),t.$seamless.enterPage(o,c,{data:data,direction:r}),t.$nuxt.$emit("seamless-enter",o),t.clearBestListCompareStore()}))()}clearBestListCompareStore(){this.$store.dispatch("bestList/updateFirstProduct",null),this.$store.dispatch("bestList/updateFirstProductCta",null),this.$store.dispatch("bestList/updateSecondProduct",null),this.$store.dispatch("bestList/updateSecondProductCta",null)}},B=L=Object(o.c)([Object(l.Component)({components:{SeamlessTriggers:S,TrackScroll:T.a}})],L),R=Object(_.a)(B,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"c-seamlessListing"},[t("TrackScroll",{attrs:{"tracking-data":{index:0}},on:{"scroll-change":e.trackScroll}},[e._t("default")],2),e._v(" "),e.listing?[t("SeamlessTriggers",{attrs:{index:0},on:{"seamless-insert-page":e.preInsertPage,"seamless-enter-page":e.enterPage}}),e._v(" "),e._l(e.pageRecords,(function(r,n){return[t("TrackScroll",{key:r.id+"-scroll",attrs:{"tracking-data":{index:n+1}},on:{"scroll-change":e.trackScroll}},[t(r.component,{ref:"pages",refInFor:!0,tag:"component",attrs:{"is-seamless":!0,"is-seamless-best-list":r.isBestList}})],1),e._v(" "),n<e.listing.length-1?t("SeamlessTriggers",{key:r.id+"-triggers",attrs:{index:n+1},on:{"seamless-insert-page":e.preInsertPage,"seamless-enter-page":e.enterPage}}):e._e()]}))]:e._e(),e._v(" "),e.loading?e._t("loader"):e._e()],2)}),[],!1,null,null,null);t.default=R.exports},852:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n=r(7),o=r(11),l=r(9),c=r(787),d=new l.a("observerDirective");class v{constructor(){this.refreshOnUpdate=!1}bind(e,t){var r=this;return Object(n.a)((function*(){var n,l,v,h,f,m;yield o.default.nextTick(),r.refreshOnUpdate="undefined"!==(null===(n=null==t?void 0:t.value)||void 0===n?void 0:n.refreshOnUpdate)&&(null===(l=null==t?void 0:t.value)||void 0===l?void 0:l.refreshOnUpdate),r.observer=new c.a({data:null===(v=null==t?void 0:t.value)||void 0===v?void 0:v.data,rootMargin:(null===(h=null==t?void 0:t.value)||void 0===h?void 0:h.rootMargin)||"0px 0px -100% 0px",el:e,threshold:(null===(f=null==t?void 0:t.value)||void 0===f?void 0:f.threshold)||0,singleIntersection:(null===(m=null==t?void 0:t.value)||void 0===m?void 0:m.singleIntersection)||!1},(data=>{var e;d.log(data);var r=null===(e=null==t?void 0:t.value)||void 0===e?void 0:e.handler;r?r(data):d.warn("No handler specified on Intersection Observer directive")}))}))()}update(){this.observer&&this.refreshOnUpdate&&this.observer.refresh()}componentUpdated(){this.observer&&this.refreshOnUpdate&&this.observer.refresh()}unbind(){this.observer&&this.observer.destroy()}}}}]);
//# sourceMappingURL=d5ea6e1.modern.js.map