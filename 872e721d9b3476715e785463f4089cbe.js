!function e(){if("undefined"!=typeof firebase)if(void 0!==firebase.firestore){var t=[];firebase.initializeApp({projectId:"firestore-realtime-push"});var i=firebase.firestore();try{i.collection("stage.ndtv.com").doc("ndtv_homepage").onSnapshot((function(e){for(;t.length>0;){var i=t.pop();$(i).unbind("click"),$(i).removeClass("unwatched")}var a=e.data(),s=$.grep(a.experiments,(function(e){return e.siteid==__siteid})),c=$.grep(a.experiments,(function(e){return"widget"==e.exptype}));$.each(c,(function(e,i){var a=i.Experimentvariant.length,s="widgetexpr_"+i.experimentId,c=getCookie(s),l="";""==c||null==c?(l=n(0,a),setCookie(s,l,1,"")):l=c;var p=i.Experimentvariant[l],d=i.catid,f=$("[class*=-"+d+"]");if(f.length>0){$(f).html(p.widgethtml),$(f).addClass("unwatched");var u=$(f).find("a");$.each(u,(function(e,n){t.push(n);var a=i.masterkey+"_deleted";$(n).on("click",(function(e){e.preventDefault(),r(p.variantkey+"_click",$(this).attr("href"),a,!0)}))})),$(f).isInViewport()&&o(f,i.masterkey,p.variantkey),$(window).on("scroll",(function(){$(f).isInViewport()&&o(f,i.masterkey,p.variantkey)}))}})),$.each(s,(function(e,i){if("widget"!==i.exptype){var a=i.Experimentvariant.length,s="expr_"+i.experimentId,c=getCookie(s),l="";""==c||null==c?(l=n(0,a),setCookie(s,l,1,"")):l=c;var p=i.Experimentvariant[l],d=i.catid,f=$("[class*=-"+d+"]");if(f.length>0){i.exptype;var u=$(f).find("a").filter((function(){return $(this).html().trim().replace(/&amp;/g,"&")===i.Experimentvariant[0].name.replace(new RegExp(/\bRs(\.\s|\s\b)/,"g"),"₹").trim()}));u.length>0&&""!=p.name&&(u=u[0],$(u).html(p.name.replace(new RegExp(/\bRs(\.\s|\s\b)/,"g"),"₹")),$(u).addClass("unwatched"),t.push(u),$(u).on("click",(function(e){e.preventDefault();var t=i.masterKey+"_deleted";r(p.variantkey+"_click",$(this).attr("href"),t,!0)})),$(u).isInViewport()&&o(u,i.masterkey,p.variantkey),$(window).on("scroll",(function(){$(u).isInViewport()&&o(u,i.masterkey,p.variantkey)})))}}}))}))}catch(e){console.log(e)}$.fn.isInViewport=function(){var e=$(this).offset().top,t=e+$(this).outerHeight(),i=$(window).scrollTop(),n=i+$(window).height();return t>i&&e<n}}else setTimeout(e,10);else setTimeout(e,10);function n(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)}function r(e,t,i,n=!1){var r={key:e,type:"incr",deletedkey:i};!function(e,t,i,n){var r={url:"https://hpcms.ndtv.com/sportsredisapi/webapi/ndtv-trc?q="+n,method:"POST",timeout:0,headers:{"Content-Type":"application/json"},contentType:"application/json",data:JSON.stringify(e)};$.ajax(r).done((function(e){console.log(e),i&&(window.location=t)}))}(JSON.stringify(r),t,n,e)}function a(e,t){var i=e+"_deleted";r(e,"",i),r(t,"",i)}function o(e,t,i){setTimeout((function(){var n="expr_variant_img_impr_"+i;if(__echImprssCount&&setCookie(n,i+"_view",-1,""),$(e).isInViewport()&&$(e).hasClass("unwatched")){var r=getCookie(n);""!=r&&null!=r||(a(t,i+"_view"),$(e).removeClass("unwatched"),setCookie(n,i+"_view",1,""))}}),3e3)}}();