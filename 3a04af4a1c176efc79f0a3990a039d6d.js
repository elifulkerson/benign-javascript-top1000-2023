"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[268],{5608:(e,t,r)=>{var n=r(2059),o=r(4349),i=r(9261);function a(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e){e.target.closest("a")&&window.ym&&window.ym(27714477,"reachGoal","partners_desk")}var c=r(8043),u=r(4930);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(u){c=!0,o=u}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"===typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v,m,w,b,h,g,S=document.querySelector(".js-layout"),j=S.querySelector(".js-explainer-wrapper"),E=S.querySelector(".js-explainer-popup"),_=S.querySelector(".js-layout-header"),A=f(S.querySelectorAll(".js-video-preview"));function O(){var e=E.querySelector(".js-preview-wrapper");j.addEventListener("click",(function(e){return function(e){var t=e.target.closest(".js-video-explainer"),r=f(j.querySelectorAll(".js-video-explainer"));t&&(window.ym&&window.ym(27714477,"reachGoal","explainers"),m=t.id,g=r.indexOf(t),k(),I())}(e)})),e.addEventListener("click",(function(e){e.stopPropagation(),function(e){var t=e.target.closest(".js-video-preview");t&&(m=t.dataset.vid,g=A.indexOf(t),I())}(e)})),E.addEventListener("click",k),document.addEventListener("keydown",(function(e){E.classList.contains("_active")&&("Escape"!==e.key&&"Esc"!==e.key||k())}))}function k(){var e=S.getBoundingClientRect().top;if(_.classList.toggle("_hidden"),S.classList.toggle("_no-scroll"),S.style.pointerEvents="all",E.classList.toggle("_active"))return S.style.top="".concat(e,"px"),void function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=document.querySelector(".js-slider-preview");v=new o.tq(t,{initialSlide:e,slidesPerView:"auto",direction:"vertical",speed:400,slidesOffsetBefore:116,slidesOffsetAfter:116,grabCursor:!0,modules:[o.Gk,o.Rv,o.oM],mousewheel:!0,freeMode:{enabled:!0,sticky:!0},lazy:{checkInView:!0,enabled:!0,loadOnTransitionStart:!0}})}(g);S.style.top="",window.scrollTo(0,-e),v.destroy(!0,!1),h.destroy(),w&&w.classList.remove("_active"),w=null,(0,u.Kn)("fullscreenPopupClosed")}function I(){var e;w&&(w.classList.remove("_active"),h.configure({id:m}));var t,r,n=d(A.filter((function(e){return e.dataset.vid===m})),1);(w=n[0]).classList.add("_active"),g>=0&&v.slideTo(g),h&&!(null===(e=h)||void 0===e?void 0:e.destroyed)||(t=window._lentaData.puids,r=function(){(h=new window.RamblerPlayer({parentId:"#explainer",id:w.dataset.vid,playerTemplateId:w.dataset.template,sspJparams:t,autoplay:!0,sspUserId:(0,i.ej)("lid"),sspUserIdScope:".lenta.ru"})).on(window.RamblerPlayer.Events.PLAYER_DESTROY,(function(){h.destroyed=!0})),h.on(window.RamblerPlayer.Events.PLAYER_ENDED,(function(){g=A[g+1]?g+1:0,m=A[g].dataset.vid,I()}))},"pending"===b?window.RamblerPlayer.push((function(){r()})):"success"===b&&r())}var L,x=r(5291),q=r(8181),P="IntersectionObserver"in window,R=[document.querySelector(".longgrid-feature-list__box:last-child a"),document.querySelector(".longgrid-list__box:nth-child(2) a:last-child")],T=[{3:R[0].pathname},{5:R[1].pathname}];P&&(L=new IntersectionObserver((function(e){e.forEach((function(e){if(e.isIntersecting){var t=T.find((function(t){return Object.values(t)[0]===e.target.pathname}));(0,q.Wu)("special_show",t),L.unobserve(e.target)}}))}),{threshold:.5}));(0,n.S)([{module:function(){var e=a(document.querySelectorAll(".js-slider")),t=e.find((function(e){return e.classList.contains("js-slider-partners")})),r="IntersectionObserver"in window;e.forEach((function(e){(new o.tq(e,{slidesPerView:"auto",watchSlidesProgress:!0,speed:400,slidesOffsetBefore:120,slidesOffsetAfter:120,modules:[o.W_,o.N1,o.oM],navigation:{nextEl:".slider__button._next",prevEl:".slider__button._prev"},grabCursor:!0,lazy:{enabled:!0,loadOnTransitionStart:!0}}),r)&&new IntersectionObserver(i.m0,{threshold:.7}).observe(e)})),t&&t.addEventListener("click",s)}},{module:function(){E&&(S.append(E),window.RamblerPlayer=window.RamblerPlayer||[],b="pending",(0,c.Z)("https://vp.rambler.ru/player/sdk.js").then((function(){b="success"})).catch((function(){b="error"})),O())}},{module:x.Z},{module:function(){R.forEach((function(e,t){var r;e.addEventListener("click",(function(){(0,q.Wu)("special_click",T[t])})),null===(r=L)||void 0===r||r.observe(e)}))}}])}},e=>{e.O(0,[810],(()=>{return t=5608,e(e.s=t);var t}));e.O()}]);