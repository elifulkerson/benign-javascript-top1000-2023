WH.StatusWidget.Assaults=function(e,t,n){const a=this;const i=WH.StatusWidget;const l={data:{},parentElement:undefined,regionId:undefined,statusWidgets:{}};this.update=function(){for(let e in l.data){if(l.data.hasOwnProperty(e)){u(e)}}};function o(e){let t=l.data[e];if(!t){return null}let n={active:false,duration:t.content.duration,iconActive:t.content.iconActive,iconInactive:t.content.iconInactive,id:t.id,label:t.name,name:null,remaining:null,upcoming:[],url:t.url};let a=WH.Time.unix();for(let e=0,i=t.content.upcoming.length;e<i;e++){let i=t.content.upcoming[e];if(i>a){n.upcoming.push(i)}else if(i+t.content.duration>a){n.active=true;n.name=t.content.name;n.remaining=i+t.content.duration-a}}return n}function s(e,t,n){l.regionId=e;l.parentElement=t;l.data=n;requestAnimationFrame(a.update)}function u(e){if(l.statusWidgets[e]){l.statusWidgets[e].update();return}let t=o(e);if(!t){WH.error("No data available for assault widget.",l.regionId+", "+e,l.parentElement);return}let n=WH.qs(`#${l.regionId}-group-${t.id}`,l.parentElement);if(!n){WH.error("Could not find assault widget target.",l.regionId+", "+e+", "+t.id,t);return}if(n.offsetParent===null){return}let a=WH.ce("div",{className:"tiw-group-icon"});WH.Tooltip.simple(a,(function(){return WH.ce("span",{style:{whiteSpace:"nowrap"}},WH.ct(a.dataset.assaultName)).outerHTML}),"q");WH.ae(n,a);let s=WH.ce("div",{className:"tiw-group-status"});WH.ae(n,s);let u=WH.ce("div",{className:"status-widget-info-text"});let r=function(t,i){let s=o(e);let r=s.iconInactive||"spell_nature_sleep";let c=WH.TERMS.noassaults;let d="inactive";let m=0;let W="";if(s.active){r=s.iconActive||r;c=s.name||WH.TERMS.legionassaultbegun_shorthand;d="active";m=s.remaining;W=WH.Time.formatDeltaWithSymbols(s.remaining)}a.style.backgroundImage="url("+WH.Icon.getIconUrl(r)+")";a.dataset.assaultName=c;Slider.setTitle(t,c);n.dataset.assault=r===WH.Icon.UNKNOWN_ZONE?"unknown":d;let g;if(l.data[e].content&&l.data[e].content.urgencies){l.data[e].content.urgencies.forEach((e=>{if(s.remaining<=e.time){g=e.level}}))}Slider.setValue(t,m);Slider.setValueDisplay(t,W,g);WH.ee(u);WH.st(u,WH.TERMS.next+WH.TERMS.colon_punct);let f=s.upcoming.slice(0,3);for(let e=0,t;t=f[e];e++){if(e>0){WH.ae(u,WH.ce("br"))}WH.ae(u,WH.ct(WH.Time.formatFutureTimeAndDay(new Date(t*1e3),l.regionId!=="US")))}};let c=new i(s,{maxValue:t.duration,minValue:0,remaining:true,title:WH.TERMS.noassaults,updateFunction:r,updateInterval:WH.Time.MS_SEC,valueDisplay:""});let d=c.getElement("info");d.dataset.label="left";let m=WH.ce("div",{className:"status-widget-info-label"},WH.ct(WH.TERMS.localtime));WH.ae(d,m);WH.ae(d,u);l.statusWidgets[e]=c}s.apply(this,arguments)};