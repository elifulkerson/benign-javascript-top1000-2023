/*!
* @zpfe/stat-sdk@1.3.1 
* (c) 2018-2023 zhaopin.com
*/
!function(){"use strict";var t=!1,e=[".zhaopin.com",".zhaopin.cn",".highpin.cn",".zpexam.com",".zlbpo.com"],n="1.24.9",r={AesEncryption:"aes-encryption/index.js",Exposure:"exposure/index.js",SessionEvent:"session-event/index.js",SiteLinkerConcatUtm:"site-linker-concat-utm/index.js",WechatWebViewChannel:"wechat-webview-channel/index.js",SensorsABTest:"abtesting-sdk-web/abtest.min.js",Popup:"sf-sdk-web/popup.min.js",WebPopup:"sf-sdk-web/webPopup.min.js",GeneralEncryption:"general-encryption/index.js",CustomEventsSender:"custom-events-sender/index.js",SfInstantEvent:"sf-instant-event/index.js",ChannelUtm:"channel-utm/index.js"};function o(t){for(var n=0;n<e.length;n++)if((r=t,o=void 0,o=document.createElement("a"),o.href=r,o.hostname).indexOf(e[n])>-1)return!0;var r,o;return!1}function a(t){var e="";return"string"==typeof t&&(e=t.replace(/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,"$3/$5")),e}function i(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function c(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on".concat(e),n)}var s=[".zhaopin.com",".zhaopin.cn",".highpin.cn",".zpexam.com",".zlbpo.com"];var p={get:function(t){var e="; ".concat(document.cookie).split("; ".concat(t,"="));return 2===e.length?e.pop().split(";").shift():null},set:function(t,e,n){for(var r=null,o=0;o<s.length;o++)new RegExp("".concat(s[o],"$")).test(window.location.hostname)&&(r=s[o]);r||console.warn("当前域名不在白名单内，白名单列表：".concat(s.join(", ")));var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3),document.cookie="".concat(t,"=").concat(e,"; expires=").concat(a.toUTCString(),"; domain=").concat(r,"; path=/")}},u={generate:function(){var t=(new Date).getTime();return void 0!==window.performance&&"function"==typeof window.performance.now&&(t+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return("x"===e?n:7&n|8).toString(16)}))}};var d={get:function(){var t="";try{t=function(){var t=p.get("x-zp-client-id");return t||(t=u.generate(),p.set("x-zp-client-id",t,36500)),t}()}catch(t){console.error(t.message)}return t}};var l,w={get:function(){var t={},e=window.zpPageRequestId;e&&(t["x-zp-page-request-id"]=e);var n=d.get();return n&&(t["x-zp-client-id"]=n),t}};var f={get:function(){var t=window.zpStatConfig||{},e={};i(e,t.page||{}),t.isSPA&&(e.isSPA=!0);var n=w.get();for(var r in n)n.hasOwnProperty(r)&&(e[r.replace(/-/g,"_")]=n[r]);e.current_url=document.location.href,e.current_url_path=a(document.location.href),e.referrer=e.isSPA&&l?l.current_url:document.referrer;var o=function(){var t={};try{for(var e=document.cookie?document.cookie.split("; "):[],n=0;n<e.length;n++){var r=e[n].split("="),o=decodeURIComponent(r[1]);t[r[0]]=o}return t}catch(e){return console.error("获取 cookies 失败",e),window.zpStat&&window.zpStat.error&&window.zpStat.error(e,"获取 cookies 失败"),t}}();return o.at&&o.rt&&(e.passport_at=o.at,e.passport_rt=o.rt),l=e,e}};var g={get:function(){var t={};return i(t,window.zpStatConfig&&(window.zpStatConfig.sa||{})),t}};var m={get:function(){return window.zpStatConfig&&"function"==typeof window.zpStatConfig.ready?window.zpStatConfig.ready:null}},h=f.get(),v=m.get(),z="sa";function _(t){try{var e=t.getAttribute("zp-stat-id");if(!e)return{};for(var n={stat_id:e},r=t.attributes,o=0;o<r.length;o++){var a=r[o].name;"zp-stat-id"!==a&&(0===a.indexOf("zp-stat-")&&(n[a=a.substr(8).replace(/-/g,"_")]=r[o].value))}return n.track&&window.zpStat&&window.zpStat.track&&window.zpStat.track(n.track,n),n}catch(t){return window.zpStat&&window.zpStat.error&&window.zpStat.error(t.message,"提取自定义上报信息失败"),{}}}function x(t){return window.sa&&window.sa[t]}!function(t){try{var e=t.sdk_url,n=t.name,r=window,o=document,a="script",i=null,c=null;r.sensorsDataAnalytic201505=n,r[n]=r[n]||function(t){return function(){(r[n]._q=r[n]._q||[]).push([t,arguments])}};for(var s=["track","quick","register","registerPage","registerOnce","trackSignup","trackAbtest","setProfile","setOnceProfile","appendProfile","incrementProfile","deleteProfile","unsetProfile","identify","login","logout","trackLink","clearAllRegister","getAppStatus"],p=0;p<s.length;p++)r[n][s[p]]=r[n].call(null,s[p]);r[n]._t||(i=o.createElement(a),c=o.getElementsByTagName(a)[0],i.async=1,i.src=e,i.setAttribute("charset","UTF-8"),c.parentNode.insertBefore(i,c),r[n].para=t)}catch(t){console.error("神策SDK默认初始化错误",t)}}(function(){var e=function(){var e={A14:"zlclient",A17:"zlclient",A18:"zlclient",A19:"zlclient",A20:"zlbusiness",A1:"zlbusiness",A:"zlclient",B:"highpin",E1:"zlcrm",E:"itoa",F:"production",G14:"zlclient",G:"production",H:"zlclient",J:"zlbschool",K:"hremail",L:"talentdev",S31:"zlclient",T:"production"},n=h.appid;if(t||!n)return"default";var r=window.zpStatConfig&&window.zpStatConfig.project;if(r)return r;var o=n.substr(0,2),a=n.substr(0,1);return e[n]?e[n]:e[o]?e[o]:e[a]?e[a]:"default"}(),r={sdk_url:"https://statistic.zhaopin.cn/sdk/sa/".concat(n,"/sa.min.js"),heatmap_url:"https://statistic.zhaopin.cn/sdk/sa/".concat(n,"/heap_map.min.js"),name:z,show_log:Boolean(t),web_url:"https://dsm.zhaopin.cn/?project=".concat(e),server_url:"https://ds.zhaopin.cn/sa?project=".concat(e),heatmap:{custom_property:_}};i(r,g.get());try{void 0!==window.localStorage&&void 0!==window.localStorage.zpfe_stat_sa_show_log&&(r.show_log="true"===window.localStorage.getItem("zpfe_stat_sa_show_log"))}catch(t){}return r}()),window[z].registerPage&&window[z].registerPage(h),!0!==h.isSPA&&window[z].quick&&window[z].quick("autoTrack"),v&&window[z].quick&&window[z].quick("isReady",v),window.zpStat={track:function(t,e,n){x("track")&&window.sa.track(t,e,n)},login:function(t){x("login")&&window.sa.login(t)},logout:function(t){x("logout")&&window.sa.logout(t)},setProfile:function(t,e){x("setProfile")&&window.sa.setProfile(t,e)},error:function(t,e){t&&(console.error(e,t),x("track")&&window.sa.track("zp_ui_error",{zp_ui_error_message:t.message,zp_ui_error_stack:t.stack,zp_ui_error_description:e,current_url_path:a(document.location.href)}))},refreshPageConfig:function(){x("track")&&window.sa.registerPage(f.get())},switchPage:function(){var t=this;x("quick")&&setTimeout((function(){t.refreshPageConfig(),window.sa.quick("autoTrackSinglePage")}),100)},loadExternalPlugin:function(t,e,o){var a,i,c,s,p=(a=r[t])?"https://statistic.zhaopin.cn/sdk/sa/".concat(n,"/dist/web/plugin/").concat(a):"";p?(i=p,c=function(){var n=window.sa.use(t,e);o&&o(n)},(s=document.createElement("script")).setAttribute("type","text/javascript"),s.setAttribute("src",i),s.setAttribute("charset","UTF-8"),s.setAttribute("async",!0),s.onload=function(){c&&c()},document.getElementsByTagName("head")[0].appendChild(s)):console.error("不支持插件 ".concat(t))}};var S={params:{}};i(S.params,w.get());var k=function(){return S};!function(){if(window.XMLHttpRequest){var t=window.XMLHttpRequest.prototype.open;window.XMLHttpRequest.prototype.open=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=n[1],i=a;if(o(a)){var c=k().params;for(var s in c){var p=i.indexOf("?")>-1?"&":"?";i+="".concat(p).concat(s,"=").concat(c[s])}}n[1]=i,t.apply(this,n)}}}(),c(window,"error",(function(t){(function(t){return!t.error||!t.error.stack||!o(t.error.stack)})(t)||(window.zpStat&&window.zpStat.error?window.zpStat.error(t.error,"发现未捕获的错误"):console.error("发现未捕获的错误",t.error))}));var y,b,P=3e4;function A(t,e){var n=Math.abs(parseInt(e-t));return n>P&&(n=0),n}function E(t){return decodeURIComponent(window.location.search.replace(new RegExp("^(?:.*[&\\?]".concat(encodeURIComponent(t).replace(/[.+*]/g,"\\$&"),"(?:\\=([^&]*))?)?.*$"),"i"),"$1"))}c(window,"load",(function(){var t=function(){if(!window.performance||!window.performance.timing)return null;var t=window.performance.timing,e=A(t.redirectStart,t.redirectEnd),n=A(t.domainLookupStart,t.domainLookupEnd),r=A(t.connectStart,t.connectEnd),o=A(t.requestStart,t.responseStart),a=A(t.responseStart,t.responseEnd),i=A(t.domLoading,t.domInteractive),c=A(t.domInteractive,t.domComplete),s=A(t.navigationStart,t.domComplete),p={zp_performance_redirect:e,zp_performance_domain_lookup:n,zp_performance_tcp:r,zp_performance_request:o,zp_performance_response:a,zp_performance_dom_content_load:i,zp_performance_dom_processing:c,zp_performance_dom_complete:s};return p}();t&&window.zpStat.track("zp_ui_performance",t)})),y=E("chuda_user_id"),b=E("exp_id"),y&&(window.zpStat.login(y),window.zpStat.track("chuda_pageopen",{exp_id:b}))}();
