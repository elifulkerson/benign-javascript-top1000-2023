!function(n){var r,s,a,d={},o=n.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),l=!1;function h(t){return n.data(t,"tooltip")}function e(){if(!n.tooltip.blocked&&this!=r&&(this.tooltipText||h(this).bodyHandler)){if(s=(r=this).tooltipText,h(this).bodyHandler){d.title.hide();var t=h(this).bodyHandler.call(this);t.nodeType||t.jquery?d.body.empty().append(t):d.body.html(t),d.body.show()}else if(h(this).showBody){var e=s.split(h(this).showBody);d.title.html(e.shift()).show(),d.body.empty();for(var i,o=0;i=e[o];o++)0<o&&d.body.append("<br/>"),d.body.append(i);d.body.hideWhenEmpty()}else d.title.html(s).show(),d.body.hide();h(this).showURL&&n(this).url()?d.url.html(n(this).url().replace("http://","")).show():d.url.hide(),d.parent.addClass(h(this).extraClass),h(this).fixPNG&&d.parent.fixPNG(),function(t){h(this).delay?a=setTimeout(p,h(this).delay):p(),l=!!h(this).track,n(document.body).bind("mousemove",f),f(t)}.apply(this,arguments)}}function p(){a=null,o&&n.fn.bgiframe||!h(r).fade?d.parent.show():d.parent.is(":animated")?d.parent.stop().show().fadeTo(h(r).fade,r.tOpacity):d.parent.is(":visible")?d.parent.fadeTo(h(r).fade,r.tOpacity):d.parent.fadeIn(h(r).fade),f()}function f(t){if(!(n.tooltip.blocked||t&&"OPTION"==t.target.tagName))if(!l&&d.parent.is(":visible")&&n(document.body).unbind("mousemove",f),null!=r){d.parent.removeClass("viewport-right").removeClass("viewport-bottom");var e=d.parent[0].offsetLeft,i=d.parent[0].offsetTop;if(t){e=t.pageX+h(r).left,i=t.pageY+h(r).top;var o="auto";h(r).positionLeft&&(o=n(window).width()-e,e="auto"),d.parent.css({left:e,right:o,top:i})}var s={x:n(window).scrollLeft(),y:n(window).scrollTop(),cx:n(window).width(),cy:n(window).height()},a=d.parent[0];s.x+s.cx<a.offsetLeft+a.offsetWidth&&(e-=a.offsetWidth+20+h(r).left,d.parent.css({left:e+"px"}).addClass("viewport-right")),s.y+s.cy<a.offsetTop+a.offsetHeight&&(i-=a.offsetHeight+20+h(r).top,d.parent.css({top:i+"px"}).addClass("viewport-bottom"))}else n(document.body).unbind("mousemove",f)}function i(t){if(!n.tooltip.blocked){a&&clearTimeout(a),r=null;var e=h(this);o&&n.fn.bgiframe||!e.fade?i():d.parent.is(":animated")?d.parent.stop().fadeTo(e.fade,0,i):d.parent.stop().fadeOut(e.fade,i),h(this).fixPNG&&d.parent.unfixPNG()}function i(){d.parent.removeClass(e.extraClass).hide().css("opacity","")}}n.tooltip={blocked:!1,defaults:{delay:200,fade:!1,showURL:!0,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){n.tooltip.blocked=!n.tooltip.blocked}},n.fn.extend({tooltip:function(t){return function(t){if(d.parent)return;d.parent=n('<div id="'+t.id+'"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(document.body).hide(),n.fn.bgiframe&&d.parent.bgiframe();d.title=n("h3",d.parent),d.body=n("div.body",d.parent),d.url=n("div.url",d.parent)}(t=n.extend({},n.tooltip.defaults,t)),this.each(function(){n.data(this,"tooltip",t),this.tOpacity=d.parent.css("opacity"),this.tooltipText=this.title,n(this).removeAttr("title"),this.alt=""}).mouseover(e).mouseout(i).click(i)},fixPNG:o?function(){return this.each(function(){var t=n(this).css("backgroundImage");t.match(/^url\(["']?(.*\.png)["']?\)$/i)&&(t=RegExp.$1,n(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+t+"')"}).each(function(){var t=n(this).css("position");"absolute"!=t&&"relative"!=t&&n(this).css("position","relative")}))})}:function(){return this},unfixPNG:o?function(){return this.each(function(){n(this).css({filter:"",backgroundImage:""})})}:function(){return this},hideWhenEmpty:function(){return this.each(function(){n(this)[n(this).html()?"show":"hide"]()})},url:function(){return this.attr("href")||this.attr("src")}})}(jQuery);