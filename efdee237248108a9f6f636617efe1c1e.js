"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[93729],{946618:function(e,t,r){var n=r(739425),i=/\/today\/(article|best|trending)\/[\w-]+\/(\d+)/,a=function(e,t){return t?e.substring(t.length).split("/")[0]:e},o=function(e){var t,r=e.boardUrl,o=e.path,s=e.pinId,c=e.pinnerUserName,u=e.query,d=e.search,p=e.storyPinDataId;if(!o)return"";switch(o){case"/":case"/homefeed/":return"UserHomefeedResource";case c&&"/".concat(c,"/pins/"):return"UserPinsResource";case c&&"/".concat(c,"/"):case/\/_activity\//.test(o)&&o:return"UserActivityPinsResource";case/\/_created\//.test(o)&&o:return p?"UserStoryPinsFeedResource":"UserActivityPinsResource";case/\/_community\//.test(o)&&o:return"UserDiscoveredPinsResource";case/\/_shop\//.test(o)&&o:return"StoreFrontFeedResource";case/\/_saved\//.test(o)&&o:return"BoardlessPinsResource";case c&&"/".concat(c,"/_shopping_list/"):return"ShoppingListFeedResource";case/\/visual-search\//.test(o)&&o:return"VisualLiveSearchResource";case/\/pin\//.test(o)&&o:var l=a(o,"/pin/");if(s!==l)return"RelatedPinFeedResource_".concat(l);break;case/\/search\//.test(o)&&o:if(d){var f=(0,n.mB)(d,{shouldDecode:!1}).q||"";return"SearchResource_".concat(f.toLowerCase())}if(u)return"SearchResource_".concat(encodeURIComponent(u.q||"").toLowerCase());break;case/\/categories\//.test(o)&&o:var m=a(o,"/categories/");return"CategoryFeedResource_".concat(m);case/\/discover\/topics\//.test(o)&&o:return"CategoryFeedResource";case/\/news_hub\//.test(o)&&o:var v=a(o,"/news_hub/");return"NewsHubDetailsResource_".concat(v);case/\/_tools\/more-ideas\//.test(o)&&o:return"BoardContentRecommendationResource";case/\/topics\//.test(o)&&o:var g=a(o,"/topics/");return"TopicFeedResource_".concat(g);case c&&"/".concat(c,"/products/"):return"StoreFrontFeedResource";case/\/source\//.test(o)&&o:var h=a(o,"/source/");return"DomainFeedResource_".concat(h);case/\/explore\//.test(o)&&o:var _=a(o,"/explore/");return"SearchResource_".concat(_);case r:case!!r&&/\/more_ideas\//.test(o)&&o:return"BoardFeedResource";case r&&o.indexOf(r)>-1&&o:return"BoardSectionPinsResource";case/\/following\//.test(o)&&o:return"FollowingFeedResource";case/\/brand_catalog\//.test(o)&&o:return"BrandCatalogFeedResource";case i.test(o)&&o:var P=(null===(t=o.match(i))||void 0===t?void 0:t[2])||"unknown";return"TodayArticleFeedResource_".concat(P);case/\/today\//.test(o):return"TodayTabResource";case/\story_feed\//.test(o)&&o:if(d){var w=(0,n.mB)(d),y=w.feed_type,T=w.request_params;return"StoryFeedResource_".concat(y,"_").concat(T)}}return""},s=function(e){var t=null==e?void 0:e.pathname;return t?(t.match(/\/search\//)&&null!=e&&e.search&&(t+=e.search),t.toLowerCase()):""};t.Z=function(e){var t,r,n=e.boardUrl,i=e.location,a=e.pinId,c=e.pinnerUserName,u=e.previousHistory,d=e.storyPinDataId,p=e.trackingParams,l=e.trackingParamsMap,f=void 0===l?{}:l;if(a&&p&&i){if(!f)return"".concat(null!=p?p:"","~0");var m=i.pathname,v=i.search,g=i.query,h=o({boardUrl:n,path:m,pinId:a,pinnerUserName:c,query:g,search:v,storyPinDataId:d,trackingParams:p,trackingParamsMap:f}),_=Object.keys(f);if((m||"").startsWith("/pin/")){var P=_.find(function(e){return"PinResource"!==e});t=P?f[P]:f.PinResource}else t=f[h];return!t&&u&&u.length&&(r=o({boardUrl:n,path:s(u[u.length-1].location),pinId:a,pinnerUserName:c,query:g,search:v,storyPinDataId:d,trackingParams:p,trackingParamsMap:f}),t=f[r]),t||(t="".concat(p||"","~0")),t}}},348448:function(e,t,r){r.d(t,{w:function(){return g}});var n=r(40660),i=r(946618),a=r(291986),o=r(911386);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){d(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=null,l={ACTIVE:"ACTIVE",PAUSED:"PAUSED"},f=function(){return window&&window.performance&&window.performance.now?"(Time: ".concat((window.performance.now()/1e3).toFixed(3),"s)"):""},m=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}},v={};function g(e){var t=e.contextLogger,r=e.shouldExtractTrackingParams;if(p)return p;var s=function(e,n,a){if(r&&a&&e){var o=e.pair_id,s=e.event_type;if(4703===s&&o&&v[o])e.clientTrackingParams=v[o];else{var c,u,d,p,l=e.object_id_str,f=l?a[l]:null,m=null==n?void 0:null===(u=n.current)||void 0===u?void 0:u.location,g=null==n?void 0:n.previous;f&&m&&(c=(0,i.Z)({boardUrl:null===(d=f.board)||void 0===d?void 0:d.url,location:m,pinId:f.id,pinnerUserName:null===(p=f.pinner)||void 0===p?void 0:p.username,previousHistory:g,storyPinDataId:f.story_pin_data_id,trackingParams:f.tracking_params,trackingParamsMap:f.tracking_params_map})||"".concat(f.tracking_params||"","~0"),e.clientTrackingParams=c,4702===s&&o&&(v[o]=c))}}t.logContextEvent(e)},g=new Map,h=(0,o.Z)()&&(0,o.Z)().debug_timespent,_=h?console:{error:function(){},log:function(){},group:function(){},groupEnd:function(){}};return console.group||(_.group=function(){var e;return(e=console).log.apply(e,arguments)},_.groupEnd=function(){}),p=new(function(){var e,r;function i(){var e=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,i),d(this,"appTimedPair",null),d(this,"clickthroughProperties",null),d(this,"historyStackContext",null),d(this,"offsiteTimedPair",null),d(this,"offsiteTimedPairForegroundId",null),d(this,"pins",Object.freeze({})),d(this,"addEventListeners",function(){"undefined"!==document.hidden?(t="hidden",r="visibilitychange"):"undefined"!==document.msHidden?(t="msHidden",r="msvisibilitychange"):"undefined"!==document.webkitHidden&&(t="webkitHidden",r="webkitvisibilitychange"),r&&document.addEventListener(r,function(r){document[t]?e.unregisterApp(!1,void 0,r):document.hasFocus()&&e.registerApp()},!1),window.addEventListener("focus",e.registerApp),window.addEventListener("blur",function(t){return e.unregisterApp(!1,void 0,t)});var t,r,i=m(function(t){return e.unregisterApp(!0,void 0,t)});window.addEventListener("beforeunload",i),window.addEventListener("pagehide",i);var a=navigator&&navigator.userAgent.toLowerCase();a&&a.includes("macintosh")&&a.includes("chrome")&&window.addEventListener("popstate",function(e){document.hasFocus()||document[t]||n.Z.increment("chrome_mac_back_forward_button",1)})}),d(this,"storeClickthroughProperties",function(t){e.clickthroughProperties&&n.Z.increment("webapp.metrics.clickthroughs.overwritten",1,{previousView:e.clickthroughProperties.view_type,previousViewParameter:e.clickthroughProperties.view_parameter,nextView:t.view_type,nextViewParameter:t.view_parameter}),e.clickthroughProperties=t}),d(this,"clearClickthroughProperties",function(){e.clickthroughProperties=null,e.offsiteTimedPair=null,e.offsiteTimedPairForegroundId=null}),d(this,"registerApp",function(){_.group("App Foreground",f()),null==e.appTimedPair?(e.appTimedPair=new a.Z,e.appTimedPair.start(),e._unpauseAllComponents(),e._endOffsiteTimedPair(),null!==e.appTimedPair&&void 0!==e.appTimedPair&&s({event_type:4700,pair_id:e.appTimedPair.uuid},e.historyStackContext,e.pins)):_.error("TimedPair already exists for app."),_.groupEnd()}),d(this,"unregisterApp",function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;_.group("App Background",f());var a=e.appTimedPair;if(null!=a){e._pauseAllComponents();var o=a.end();e._startOffsiteTimedPair(),s({event_type:4701,duration_ns:o,pair_id:a.uuid},e.historyStackContext,e.pins),e.appTimedPair=null}else _.error("No TimedPair found for app.");var c=["beforeunload","pagehide"],u=c.includes(null==i?void 0:i.type),d=c.includes(null==i?void 0:i.pauseReason);(u||d)&&e._endOffsiteTimedPair(),n||t.flushContextEvents(null!=r&&r),_.groupEnd()}),d(this,"_activateComponent",function(t){_.group("Activating component",f()),h&&_.log(t.getContext());var r=t.getTimedPair();if(r){r.start();var n=t.getLoggerContext(),i=n.view,a=n.viewParameter,o=n.component,u=n.element,d=n.objectId,p=n.clientTrackingParams;s({event_type:4702,view_type:i,view_parameter:a,component:o,element:u,object_id_str:d,view_data:t.props.viewData,pair_id:r.uuid,clientTrackingParams:p,aux_data:c({time_spent_foreground_pairid:e.appTimedPair&&e.appTimedPair.uuid,time_spent_parent_pairid:t.getParentId()},t.props.auxData)},e.historyStackContext,e.pins)}_.groupEnd()}),d(this,"_deactivateComponent",function(t){_.group("Deactivating component",f()),h&&_.log(t.getContext());var r=t.getTimedPair();if(r){var n=r.view,i=r.viewParameter,a=r.component,o=r.element,u=r.objectId,d=r.clientTrackingParams,p=r.end();s({event_type:4703,view_type:n,view_parameter:i,component:a,element:o,object_id_str:u,view_data:t.props.viewData,duration_ns:p,pair_id:r.uuid,clientTrackingParams:d,aux_data:c({time_spent_foreground_pairid:e.appTimedPair&&e.appTimedPair.uuid,time_spent_parent_pairid:t.getParentId()},t.props.auxData)},e.historyStackContext,e.pins)}_.groupEnd()}),d(this,"_startOffsiteTimedPair",function(){var t=e.clickthroughProperties;t&&(e.offsiteTimedPair=new a.Z(c(c({},t),{},{view:186,viewParameter:t.view_parameter,objectId:t.object_id_str})),e.offsiteTimedPair.start(),e.offsiteTimedPairForegroundId=e.appTimedPair?e.appTimedPair.uuid:null,s(c(c({},t),{},{event_type:4702,view_type:186,pair_id:e.offsiteTimedPair?e.offsiteTimedPair.uuid:null,aux_data:c(c({},t.aux_data),{},{time_spent_foreground_pairid:e.offsiteTimedPairForegroundId})}),e.historyStackContext,e.pins))}),d(this,"_endOffsiteTimedPair",function(){var t=e.offsiteTimedPair,r=e.clickthroughProperties;if(t&&r){var n=t.end();s(c(c({},r),{},{event_type:4703,view_type:186,pair_id:e.offsiteTimedPair?e.offsiteTimedPair.uuid:null,aux_data:c(c({},r.aux_data),{},{time_spent_foreground_pairid:e.offsiteTimedPairForegroundId}),duration_ns:n}),e.historyStackContext,e.pins),e.clearClickthroughProperties()}}),d(this,"_pauseAllComponents",function(){_.group("Pause all components"),g.forEach(function(t,r,n){t===l.ACTIVE&&e._deactivateComponent(r),n.set(r,l.PAUSED)}),_.groupEnd()}),d(this,"_unpauseAllComponents",function(){_.group("Unpause all components"),g.forEach(function(e,t){t.setTimedPair(new a.Z(t.getLoggerContext()))}),g.forEach(function(t,r){g.set(r,l.ACTIVE),e._activateComponent(r)}),_.groupEnd()})}return e=[{key:"setHistoryStackContext",value:function(e){this.historyStackContext=e}},{key:"setPins",value:function(e){this.pins=e}},{key:"registerComponent",value:function(e){null===this.appTimedPair?g.set(e,l.PAUSED):(g.set(e,l.ACTIVE),this._activateComponent(e))}},{key:"unregisterComponent",value:function(e){g.get(e)===l.ACTIVE&&(this._deactivateComponent(e),e.setTimedPair(new a.Z(e.getLoggerContext()))),g.delete(e)}},{key:"size",value:function(){return g.size}}],u(i.prototype,e),r&&u(i,r),i}())}},393729:function(e,t,r){r.d(t,{j:function(){return f},w:function(){return l}});var n=r(388011),i=r(583592),a=r(282802),o=r(348448),s=r(549201),c=r(272109),u=r(389282),d=(0,i.Z)("TimeSpentManagerContext"),p=d.Provider,l=d.useMaybeHook;function f(e){var t=e.children,r=(0,n.v)(),i=(0,s.HG)(),d=(0,a.B)().isAuthenticated,l=(0,o.w)({contextLogger:r,shouldExtractTrackingParams:i&&d});return(0,c.Z)(function(){document.hasFocus()&&l.registerApp(),l.addEventListeners()}),(0,u.jsx)(p,{value:l,children:t})}},291986:function(e,t,r){var n=r(522649),i=r(933742);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o="undefined"!=typeof window&&window.performance&&window.performance.now?function(){return Math.floor(1e6*window.performance.now())}:function(){return 1e6*Date.now()};t.Z=function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),a(this,"start",function(){return r.startTime=o(),r.startTime}),a(this,"end",function(){return r.endTime=o(),r.duration=r.startTime?r.endTime-r.startTime:null,r.duration});try{this.uuid=(0,n.Z)()}catch(e){this.uuid=(0,i.Z)()}t&&Object.assign(this,t)}},933742:function(e,t,r){var n,i,a=r(256309),o=r(416195),s=0,c=0;t.Z=function(e,t,r){var u=t&&r||0,d=t||Array(16),p=(e=e||{}).node||n,l=void 0!==e.clockseq?e.clockseq:i;if(null==p||null==l){var f=e.random||(e.rng||a.Z)();null==p&&(p=n=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==l&&(l=i=(f[6]<<8|f[7])&16383)}var m=void 0!==e.msecs?e.msecs:Date.now(),v=void 0!==e.nsecs?e.nsecs:c+1,g=m-s+(v-c)/1e4;if(g<0&&void 0===e.clockseq&&(l=l+1&16383),(g<0||m>s)&&void 0===e.nsecs&&(v=0),v>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");s=m,c=v,i=l;var h=((268435455&(m+=122192928e5))*1e4+v)%4294967296;d[u++]=h>>>24&255,d[u++]=h>>>16&255,d[u++]=h>>>8&255,d[u++]=255&h;var _=m/4294967296*1e4&268435455;d[u++]=_>>>8&255,d[u++]=255&_,d[u++]=_>>>24&15|16,d[u++]=_>>>16&255,d[u++]=l>>>8|128,d[u++]=255&l;for(var P=0;P<6;++P)d[u+P]=p[P];return t||(0,o.Z)(d)}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/93729-7c9cc10dbf9b6dfb.js.map