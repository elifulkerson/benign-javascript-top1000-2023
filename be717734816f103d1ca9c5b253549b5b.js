(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["DesktopFeedPage.loadable"],{"./cozy/data/actions/TrendingActions.tsx":function(e,t,n){"use strict";n.d(t,{GJ:function(){return d},Ni:function(){return l},dm:function(){return u}});var o=n("./cozy/data/builders/GenericFeedService.tsx"),r=n("./cozy/utils/Api.tsx"),s=async(e,t)=>{const{data:n}=await(0,r.ZP)("trends/get",{offset:e,count:t});return n},i=n("./cozy/data/selectors/TrendingSelectors.tsx"),c=n("./cozy/data/constants/AppConstants.tsx"),a=n("./cozy/data/actions/actionNameConstants/TrendingActionNameConstants.tsx");const d=(e,t,n)=>async(s,d)=>{s({type:a.aj,payload:e});try{const l=(0,i.HM)(d(),e),u=await(async(e,t,n)=>{const{data:o}=await(0,r.ZP)("trends/products/get",{trend:e,offset:t,count:n});return o})(e,t,n),p={...(0,o.Z)(u,c.Yw.TRENDING_FEED,{seenProductIDs:l,productsFieldName:"products",nextOffsetFieldName:"next_offset",noMoreItemsFieldName:"no_more_items"}),trend:e,trendInfo:u.trend_info};s({type:a.tz,payload:p})}catch(t){s({type:a.y1,payload:{error:t,trend:e}})}},l=(e,t)=>({type:a.xc,payload:s(e,t)}),u=e=>({type:a.q3,payload:{index:e}})},"./cozy/data/actions/actionNameConstants/PushNotificationsActionNameConstants.tsx":function(e,t,n){"use strict";n.d(t,{Xb:function(){return o},Mm:function(){return r},n_:function(){return s}});const o="PUSH_NOTIFICATION_TOKEN_UPDATED",r="PUSH_NOTIFICATION_TOKEN_UPDATED_FULFILLED",s="PUSH_NOTIFICATION_PERMISSION_REQUESTED"},"./cozy/data/actions/actionNameConstants/TrendingActionNameConstants.tsx":function(e,t,n){"use strict";n.d(t,{tz:function(){return o},y1:function(){return r},aj:function(){return s},xc:function(){return i},nW:function(){return c},Am:function(){return a},q3:function(){return d}});const o="TRENDING_LOAD_PRODUCTS_FULFILLED",r="TRENDING_LOAD_PRODUCTS_REJECTED",s="TRENDING_LOAD_PRODUCTS_PENDING",i="TRENDING_LOAD_TRENDS",c="TRENDING_LOAD_TRENDS_FULFILLED",a="TRENDING_LOAD_TRENDS_PENDING",d="TRENDING_SET_SELECTED_TREND_INDEX"},"./cozy/data/selectors/TrendingSelectors.tsx":function(e,t,n){"use strict";n.d(t,{hh:function(){return r},vp:function(){return s},MP:function(){return i},L3:function(){return c},ij:function(){return a},gM:function(){return l},ct:function(){return u},s2:function(){return p},ht:function(){return h},Zq:function(){return m},HM:function(){return f}});var o=n("./cozy/data/selectors/DataSelectors.tsx");const r=e=>(0,o.S8)(e).trendInfos,s=e=>(0,o.S8)(e).trendIsLoading,i=e=>(0,o.S8)(e).trendNextOffset,c=e=>(0,o.S8)(e).trendNoMoreItems,a=e=>{const t=(e=>(0,o.S8)(e).selectedTrendIndex)(e);return r(e)[t]},d=(e,t)=>(e=>(0,o.S8)(e).trendingFeedByTrend)(e)[t],l=(e,t)=>Boolean(d(e,t)),u=(e,t)=>{const n=d(e,t);return!l(e,t)||Boolean(n&&n.isLoading)},p=(e,t)=>{const n=d(e,t);return n?n.nextOffset:0},h=(e,t)=>{const n=d(e,t);return!!n&&n.noMoreItems},m=(e,t)=>{const n=d(e,t);return n?n.productIDs:[]},f=(e,t)=>{const n=d(e,t);return n?n.seenProductIDs:{}}},"./cozy/desktop/components/feed/FeedPage.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ze}}),n("./node_modules/core-js/modules/web.dom-collections.iterator.js"),n("./node_modules/core-js/modules/es.string.replace.js");var o=n("./node_modules/react/index.js"),r=n("./node_modules/react-redux/es/index.js"),s=n("./node_modules/react-router/esm/react-router.js"),i=n("./cozy/utils/URL.tsx"),c=n("./cozy/utils/logger/AnalyticsUtil.tsx"),a=n("./cozy/utils/ads/Impact.tsx"),d=n("./cozy/utils/ads/Artsai.tsx"),l=n("./cozy/utils/seo/SEOUtils.tsx"),u=n("./cozy/utils/ClientExperimentUtils.tsx"),p=n("./cozy/coco/components/ThinBanner/ThinBanner.tsx"),h=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),m=n("./cozy/data/selectors/FeedSelectors.tsx"),f=n("./cozy/data/selectors/CategorySelectors.tsx"),y=n("./cozy/data/selectors/UniversalHomepageSelectors.tsx"),g=n("./cozy/data/selectors/DataSelectors.tsx"),x=n("./cozy/data/selectors/DealDashSelectors.tsx"),_=n("./cozy/data/selectors/CartSelectors.tsx"),I=n("./cozy/data/actions/BottomSheetActions.tsx"),S=n("./cozy/data/actions/DealDashActions.tsx"),C=n("./cozy/shared/components/common/ProductGrid.tsx"),w=n("./cozy/desktop/components/promotionBanner/FeedBannerSwitch.tsx"),P=n("./cozy/data/services/AnalyticsService.tsx");const T=e=>{const t=(0,g.tb)(e);return t?t.pushNotificationsInfo:null},N=e=>{const t=T(e);return!!t&&t.isPermissionGranted},j=e=>{const t=T(e);return t?t.isTokenSentToServer:null};var v=n("./cozy/utils/Api.tsx");const D="granted";var b=async function(e){const t=await(0,v.ZP)("mobile/push/register",{type:7,token:e});return null!==t&&null!==t.data},E=n("./cozy/data/actions/actionNameConstants/PushNotificationsActionNameConstants.tsx");function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class O extends o.Component{constructor(){super(...arguments),z(this,"isNotificationsSupported",(()=>"serviceWorker"in navigator&&"PushManager"in window)),z(this,"askPermission",(()=>new Promise(((e,t)=>{const n=Notification.requestPermission((t=>{e(t)}));n&&n.then(e,t)})))),z(this,"extractToken",(e=>{if(e.subscriptionId)return e.subscriptionId;const t="https://android.googleapis.com/gcm/send/";return 0!==e.endpoint.indexOf(t)?e.endpoint:e.endpoint.slice(t.length)})),z(this,"sendSubscriptionToServer",(e=>{const t=this.extractToken(e);this.props.enablePushNotifications(t)})),z(this,"subscribe",(()=>{navigator.serviceWorker.ready.then((e=>{e.pushManager.subscribe({userVisibleOnly:!0}).then((e=>{this.sendSubscriptionToServer(e)}))}))})),z(this,"registerDesktopPush",(()=>{navigator.serviceWorker.ready.then((e=>{e.pushManager.getSubscription().then((e=>{e?this.props.isTokenSentToServer||this.sendSubscriptionToServer(e):this.subscribe()}))}))}))}componentDidMount(){this.isNotificationsSupported()&&(Notification.permission===D?this.registerDesktopPush():"default"===Notification.permission&&void 0===this.props.isPermissionGranted&&this.askPermission().then((e=>{const{onClickPermission:t}=this.props;t&&t(),e!==D?((0,P.y)("denied"===e?"CLICK_WEB_PUSH_NOTIFICATION_PERMISSION_DENIED":"CLICK_WEB_PUSH_NOTIFICATION_PERMISSION_DEFAULT"),this.props.requestedPermissionForPushNotifications(!1)):((0,P.y)("CLICK_WEB_PUSH_NOTIFICATION_PERMISSION_ACCEPT"),this.props.requestedPermissionForPushNotifications(!0),this.registerDesktopPush())})))}render(){return null}}var B=(0,r.$j)((e=>({isPermissionGranted:N(e),isTokenSentToServer:j(e)})),(e=>({enablePushNotifications:t=>e((e=>({type:E.Xb,payload:b(e)}))(t)),requestedPermissionForPushNotifications:t=>e((e=>({type:E.n_,payload:e}))(t))})))(O),F=n("./cozy/shared/components/brand/BrandDealsHeader.tsx"),L=n("./cozy/desktop/components/promotionBanner/PromoBannerContainer.tsx"),R=n("./cozy/shared/components/common/homepageV2/TabbedContainer.tsx"),A=n("./cozy/shared/components/common/MerchantisedCarousel/MerchandisedCarouselContainer.tsx"),k=n("./cozy/shared/components/BlitzBuyV2/BlitzBuyModal.tsx"),M=n("./cozy/desktop/styles/FeedPage.tsx"),Z=n("./cozy/data/selectors/BrandFeedSelectors.tsx"),U=n("./cozy/routes/Routes.tsx"),G=n("./cozy/routes/RouteGenerators.tsx"),W=n("./cozy/desktop/styles/brand/BrandsFeedPage.tsx"),H=n("./cozy/shared/styles/brand/BrandsFeedPage.tsx"),V=n("./cozy/utils/i18n.tsx"),q=n("./cozy/shared/styles/Mixins.tsx");const Q=h.ZP.div.withConfig({displayName:"OutletBanner__DropdownWrapper",componentId:"sc-2onyhg-0"})(["display:inline-block;cursor:pointer;margin:0 10px 0 10px;position:relative;color:",";",";"],(e=>{let{theme:t}=e;return t.primaryColor}),q.Vf),K=h.ZP.div.withConfig({displayName:"OutletBanner__DropdownContent",componentId:"sc-2onyhg-1"})(["",";flex-direction:column;background:white;position:absolute;top:28px;z-index:",";border:1px solid ",";margin-left:-18px;width:auto;white-space:nowrap;"],q.qO,(e=>{let{theme:t}=e;return t.zIndexOverlay1}),(e=>{let{theme:t}=e;return t.Grey6})),$=h.ZP.div.withConfig({displayName:"OutletBanner__DropdownItem",componentId:"sc-2onyhg-2"})(["display:flex;margin:0 25px;width:100%;height:42px;line-height:42px;cursor:pointer;color:",";",";&:hover{background-color:",";}",";"],(e=>{let{theme:t}=e;return t.Grey2}),q.Mc,(e=>{let{theme:t}=e;return t.Grey6}),q.qO),J=h.ZP.div.withConfig({displayName:"OutletBanner__OutletDropdownArrowUpWrapper",componentId:"sc-2onyhg-3"})(["position:absolute;z-index:",";top:13px;overflow:hidden;width:100%;left:0;justify-content:center;display:",";"],(e=>{let{theme:t}=e;return t.zIndexOverlay2}),(e=>{let{dropdownOpen:t}=e;return t?"flex":"none"}));var X=n("./cozy/desktop/styles/common/HeaderBar.tsx"),Y=n("./node_modules/react/jsx-runtime.js"),ee=e=>{let{filterID:t,name:n,changeOutletCategory:o}=e;return(0,Y.jsx)($,{onClick:o,"data-id":t,"data-name":n,children:n})};function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ne extends o.PureComponent{constructor(e){super(e),te(this,"onMoreEnter",(()=>{this.setState({dropdownOpen:!0})})),te(this,"onMoreLeave",(()=>{this.setState({dropdownOpen:!1})})),this.state={dropdownOpen:!1}}render(){const{changeOutletCategory:e,moreCategories:t}=this.props;return(0,Y.jsxs)(Q,{onMouseEnter:this.onMoreEnter,onMouseLeave:this.onMoreLeave,children:[(0,V.ag)("View More"),(0,Y.jsx)(J,{dropdownOpen:this.state.dropdownOpen,children:(0,Y.jsx)(X.r0,{children:(0,Y.jsx)(X.iq,{shadow:"none"})})}),this.state.dropdownOpen&&(0,Y.jsx)(K,{children:t.map((t=>(0,Y.jsx)(ee,{filterID:t.filter_id,name:t.name,changeOutletCategory:e},t.filter_id)))})]})}}var oe=n("./cozy/data/constants/BrandConstants.tsx"),re=(0,r.$j)((e=>({brandsSectionTitle:(0,Z.Y8)(e),brandsSectionActionText:(0,Z.Nf)(e),brandItems:(0,Z.dE)(e),categoriesSectionTitle:(0,Z.wi)(e),categoreisSectionActionText:(0,Z.$8)(e),categoryItems:(0,Z.FG)(e)})))((e=>{let{brandItems:t,brandsSectionTitle:n,brandsSectionActionText:r,categoryItems:c,categoriesSectionTitle:a,bannerWidth:d}=e;const l=(0,s.k6)();if((0,o.useEffect)((()=>{(0,P.y)("IMPRESSION_WEB_OUTLET_TAB")}),[]),!t||!c)return null;const u=c&&c.length?(d-oe.Fb)/2:d,p=u/oe.AK,h=t.slice(0,p),m=c.slice(0,p),f=c.slice(p,c.length);return(0,Y.jsxs)(W.tH,{width:"".concat(d,"px"),children:[(0,Y.jsxs)(H.v2,{width:"".concat(u,"px"),children:[(0,Y.jsxs)(H.ti,{children:[(0,Y.jsx)(H.yU,{children:n}),(0,Y.jsx)(H.CQ,{to:U.Zjt,children:r})]}),(0,Y.jsx)(H.AW,{children:h.map((e=>(0,Y.jsxs)(H.sN,{width:"".concat(oe.AK,"px"),onClick:()=>{l.push((0,G.s0)(e.name,e.collection_id,l)),(0,P.y)("CLICK_WEB_BRAND_TAB_BRAND_ICON")},children:[(0,Y.jsx)(H.Os,{children:(0,Y.jsx)(H.ZH,{src:e.logo_url,width:"".concat(oe.Jr*e.logo_aspect_ratio>oe.T1?oe.T1:oe.Jr*e.logo_aspect_ratio,"px"),height:"".concat(oe.Jr*e.logo_aspect_ratio>oe.T1?oe.T1/e.logo_aspect_ratio:oe.Jr,"px")})}),(0,Y.jsx)(H.qM,{children:e.name})]},e.name)))})]}),c&&c.length?(0,Y.jsxs)(H.v2,{width:"".concat(u,"px"),children:[(0,Y.jsxs)(H.ti,{children:[(0,Y.jsx)(H.yU,{children:a}),(0,Y.jsx)(ne,{moreCategories:f,changeOutletCategory:e=>{l.push((0,G.NX)(e.currentTarget.dataset.id)),(0,i.oe)("category",e.currentTarget.dataset.name,l),(0,P.y)("CLICK_WEB_BRAND_TAB_CATEGORY_DROPDOWN_ITEM")}})]}),(0,Y.jsx)(H.AW,{children:m.map((e=>(0,Y.jsxs)(H.sN,{width:"".concat(oe.AK,"px"),onClick:()=>{l.push((0,G.NX)(e.filter_id)),(0,i.oe)("category",e.name,l),(0,P.y)("CLICK_WEB_BRAND_TAB_CATEGORY_ICON")},children:[(0,Y.jsx)(H.Os,{children:(0,Y.jsx)(H.ZH,{src:e.image_url})}),(0,Y.jsx)(H.qM,{children:e.name})]},e.name)))})]}):null]})})),se=n("./cozy/desktop/styles/search/SearchPage.tsx"),ie=n("./cozy/utils/WithRouter.tsx"),ce=n("./cozy/routes/RouteTesters.tsx"),ae=n("./cozy/data/services/GetPopupDialogSpecService.tsx"),de=(0,ie.oc)((0,r.$j)(((e,t)=>{let{location:n}=t;const o=(0,ce.kcp)(n),r=(0,ce.rdR)(n),s=r?(0,y.V_)(e):(0,m.V_)(e),i=(0,y.WQ)(e),c=(0,g.MI)(e),a=(0,m.Vc)(e);return{productIDs:s,noMoreItems:(0,m.JP)(e),isLoading:a,selectedCategory:o,shouldLoadUniversalHomepage:r,moduleIDs:i,modules:c,isOutlet:(0,ce.fm)(n),productsPerRow:(0,m.pe)(e),bannerWidth:(0,m.nq)(e),selectedSubCategory:(0,f.qv)(e,n),shouldShowFeedBanner:!(0,ce.fm)(n)&&(0,ce.hT1)(n)||(0,f.cL)(e,n)||(0,ce.tGn)(n)||(0,ce.FLM)(n),isUrgencyModalOpen:(0,x.f2)(e),hasSeenUrgencyModal:(0,x.aq)(e),isInDesktopFRSOptimizationShowV1Bucket:(0,_.lrT)(e)}}),(e=>({getThinBannerBottomSpec:(t,n)=>e((0,I.D)(ae.H.THIN_BANNER_CTA,t,n)),hideUrgencyModal:()=>e((0,S.hideBlitzBuyUrgencyModal)())})))((e=>{let{productIDs:t,onLoadMore:n,isOutlet:o,productsPerRow:r,noMoreItems:s,isLoading:c,onScrollUp:a,onScrollDown:d,selectedCategory:l,shouldLoadUniversalHomepage:m,source:f,bannerWidth:y,selectedSubCategory:g,shouldShowFeedBanner:x,pageViewId:_,moduleIDs:I,modules:S,isUrgencyModalOpen:P,isCartSectionShown:T,isInDesktopFRSOptimizationShowV1Bucket:N,getThinBannerBottomSpec:j,hideUrgencyModal:v,hasSeenUrgencyModal:D}=e;const b=(0,h.Fg)(),E=e=>{if(!e)return;const t=(0,i.s6)(e,"page_code"),n=(0,i.s6)(e,"section_code");j(t,n)};let z,O;return I&&S&&m&&(O=I.map((e=>{var n,o,s,i,c,a,d,l;switch(S[e].type){case"thin_banner":const u=null===(n=S[e])||void 0===n?void 0:n.staticFields.thin_banner_module_spec,h=T?N?b.cartSectionV2Width:b.cartSectionWidth:"0px";return z=u&&(0,Y.jsx)(p.Z,{thinBannerSpec:u,onClick:E,isSticky:!0,overrideStyle:{width:"calc(100% - ".concat(h,")")}}),null;case"tabbed_item_row":const f=null===(o=S[e])||void 0===o?void 0:o.staticFields.tabbed_module_spec;return f&&(0,Y.jsx)(R.Z,{tabbedContainerSpec:f,moduleID:e});case"product_tile_v2":const g=null===(s=S[e])||void 0===s||null===(i=s.staticFields)||void 0===i?void 0:i.short_feed_product_tiles_spec,x=null==g?void 0:g.length,I=x&&x%r;if(I&&I>0&&t.length>0)if(r>x){let e=0;for(let n=r-1;n>=x;n--)t[e]&&(g.push(t[e]),t.shift()),e++}else if(x>r)for(let e=x-1;e>=x-I;e--)g[e]&&(t.unshift(g[e]),g.pop());return g&&(0,Y.jsx)(C.Z,{productIDs:g,productsPerRow:r,pageViewId:_,shouldHideLoadDot:!0,isLoading:!1,isHomepageV2:m});case"promo_carousel":const w=null===(c=S[e])||void 0===c||null===(a=c.staticFields)||void 0===a?void 0:a.promo_carousel_module_spec;return w&&(0,Y.jsx)(L.Z,{promoBannerProps:w,bannerWidth:y},e);case"merchandised_carousel":const P=null===(d=S[e])||void 0===d||null===(l=d.staticFields)||void 0===l?void 0:l.merchandised_carousel_spec;return P&&(0,Y.jsx)(A.Z,{merchandisedCarouselSpec:P});default:return null}}))),(0,Y.jsxs)(M.T,{hasBackgroundColor:m,children:[(0,u.cE)()&&!D&&P&&(0,Y.jsx)(k.Z,{onClose:()=>{v()}}),z,o&&(0,Y.jsxs)(H.mL,{children:[(0,Y.jsx)(F.Z,{}),(0,Y.jsx)(re,{bannerWidth:y}),(0,Y.jsx)(H.kQ,{width:"".concat(y,"px"),children:(0,V.ag)("Latest Products")})]}),x&&(0,Y.jsx)(w.Z,{}),g&&(0,Y.jsx)(se._r,{children:(0,Y.jsxs)(se.yo,{as:"h1",productsPerRow:r,children:[(0,Y.jsx)("span",{children:(0,V.ag)("Results for")}),(0,Y.jsx)(se.CW,{children:' "'.concat(g.name,'"')})]})}),O,(0,Y.jsx)(C.Z,{productIDs:t,productsPerRow:r,onLoadMore:n,onScrollUp:a,onScrollDown:d,noMoreItems:s,isLoading:c,source:f||l||void 0,pageViewId:_,withScrollToTop:!0,isHomepageV2:m}),(0,Y.jsx)(B,{})]})}))),le=n("./cozy/shared/components/dealDash/DealDashContainer.tsx"),ue=n("./cozy/shared/components/feed/FeedPageModalSwitch.tsx"),pe=n("./cozy/desktop/styles/trending/Trending.tsx"),he=n("./node_modules/lodash/filter.js"),me=n.n(he),fe=n("./cozy/coco/components/DotLoader/DotLoader.tsx"),ye=n("./cozy/coco/components/InfiniteList/InfiniteList.tsx"),ge=n("./cozy/data/selectors/TrendingSelectors.tsx"),xe=n("./cozy/data/actions/TrendingActions.tsx"),_e=n("./cozy/desktop/components/common/ScrollingProductsRow.tsx"),Ie=n("./cozy/data/constants/TrendingConstants.tsx"),Se=(0,r.$j)(((e,t)=>{let{trend:n}=t;return{productIDs:(0,ge.Zq)(e,n),isLoading:(0,ge.ct)(e,n),nextOffset:(0,ge.s2)(e,n),hasLoaded:(0,ge.gM)(e,n)}}),(e=>({loadProducts:(t,n,o)=>e((0,xe.GJ)(t,n,o)),setSelectedIndex:t=>e((0,xe.dm)(t))})))((e=>{let{productIDs:t,tagName:n,displayName:r,description:s,trend:i,loadProducts:c,isLoading:a,nextOffset:d,hasLoaded:l,bannerWidth:u,index:p,setSelectedIndex:h,viewAllText:m,source:f,analytics:y}=e;(0,o.useEffect)((()=>{(0,P.y)(y.impression,{trend:i,description:s,index:p}),l||c(i,d,Ie.Gy)}),[]);const g=(0,o.useMemo)((()=>(0,Y.jsx)(_e.Z,{productIDs:t.slice(0,Ie.Gy),dimensions:200,isLoading:a,source:f,trendFeedTileLoggingFields:{trend:i,rowIndex:p}})),[a]);return(0,Y.jsxs)(pe.X2,{bannerWidth:u,children:[(0,Y.jsxs)(pe.h4,{children:[n&&(0,Y.jsx)(pe.qQ,{children:n}),(0,Y.jsxs)(pe.bj,{children:[(0,Y.jsx)(pe.Uj,{children:r}),s&&(0,Y.jsx)(pe.ZI,{children:s})]}),(0,Y.jsx)(pe.gp,{onClick:()=>{h(p),(0,P.y)(y.clickViewAll,{trend:i,description:s,index:p})},to:(0,G.nR)(i),children:m||(0,V.ag)("View All")})]}),g]})})),Ce=n("./cozy/data/constants/FeedConstants.tsx"),we=(0,r.$j)((e=>({trendInfos:(0,ge.hh)(e),isLoading:(0,ge.vp)(e),noMoreItems:(0,ge.L3)(e),nextOffset:(0,ge.MP)(e),feedBannerWidth:(0,m.nq)(e)})),(e=>({fetchTrends:(t,n)=>e((0,xe.Ni)(t,n))})))((e=>{let{trendInfos:t,isLoading:n,noMoreItems:r,nextOffset:s,fetchTrends:i,onScrollUp:c,onScrollDown:a,feedBannerWidth:d}=e;const l=()=>{n||r||i(s,Ie.GT)};(0,o.useEffect)((()=>{0===t.length&&l()}),[]);const u=me()(t,(e=>null!==e.tag_name&&void 0!==e.tag_name)).map(((e,t)=>(0,Y.jsx)(Se,{tagName:e.tag_name,displayName:e.display_name,description:e.description,trend:e.trend,bannerWidth:d,index:t,source:Ce.vQ.TRENDING,analytics:{impression:"IMPRESSION_TRENDING_ROW",clickViewAll:"CLICK_TRENDING_VIEW_ALL"}},e.trend))),p=r?null:(0,Y.jsx)(pe.$_,{children:(0,Y.jsx)(fe.Z,{})},"footer-loader");return u.push(p),(0,Y.jsx)(pe.zc,{children:(0,Y.jsx)(ye.Z,{lazyLoadCallback:l,entries:u,onScrollUp:c,onScrollDown:a})})})),Pe=e=>{let{onScrollUp:t,onScrollDown:n}=e;return(0,Y.jsx)(pe.im,{children:(0,Y.jsx)(we,{onScrollUp:t,onScrollDown:n})})},Te=n("./cozy/data/selectors/UserSelectors.tsx"),Ne=n("./cozy/data/selectors/ExperimentsSelectors.tsx"),je=n("./cozy/desktop/components/feed/WithTabBarHOC.tsx"),ve=n("./cozy/shared/components/hoc/AuthenticatedHOC.tsx"),De=n("./cozy/shared/components/hoc/FeedHOC.tsx"),be=n("./cozy/data/constants/AppConstants.tsx"),Ee=n("./cozy/shared/components/BlitzBuyV2/BlitzBuyContainerV2.tsx"),ze=(0,ve.Z)((0,je.Z)((0,De.Z)((0,ie.oc)((0,r.$j)(((e,t)=>{let{location:n}=t;return{selectedCategory:(0,ce.kcp)(n),outletCategory:(0,m.wH)(e),isOutlet:(0,ce.fm)(n),webTrendingTabBucket:(0,Ne.Ab)(e,"web_trending_tab_v2"),visitorId:(0,Te.OP)(e),trafficSource:(0,Te.zE)(e),trafficSourceVisitorId:(0,Te.Uo)(e)}}))((e=>{let{outletCategory:t,isOutlet:n,webTrendingTabBucket:r,visitorId:p,trafficSource:h,trafficSourceVisitorId:m,selectedCategory:f,onScrollUp:y,onScrollDown:g,feedOffset:x,isLoading:_,noMoreItems:I,categoryID:S,shouldRefreshCurrentFeed:C,isInitialData:w,setIsNotInitialData:T,loadProducts:N,loadUniversalHomepageProducts:j,loadFilteredOrUniversalProducts:v,selectCategoryAndGetProducts:D,selectCategoryAndGetFilteredOrUniversalProducts:b,ackFeedHasBeenRefreshed:E,productsPerRow:z,isCartSectionShown:O}=e;const B=(0,s.k6)(),{categoryID:F}=(0,s.UO)(),L=(0,s.TH)(),R=(0,o.useRef)(null),[A,k]=(0,o.useState)(!1),M=(0,o.useRef)();M.current=_;const Z=(0,o.useRef)();Z.current=I;const U=(0,o.useRef)();U.current=x;const W=(0,o.useRef)();W.current=n;const H=(0,o.useRef)();H.current=t,(0,o.useRef)().current=f;const V=(0,l.z$)(null!=p?p:"",be.UI.FEED_PAGE),q=()=>(0,i.re)("filter",L)||(0,i.re)("tag",L),Q=()=>{const e=F||Ce.EQ;if(e===Ce.vQ.TRENDING&&"show"===r)return;k(!0);const o=e===Ce.vQ.OUTLET;q()&&((0,i.pP)("filter",B),(0,i.pP)("tag",B));const s=o?t:e;n?v({universalFeedCategory:t,filteredFeedCategory:t,offset:x,requestBrandedFilter:!0}):b(s,{numColumns:z}),k(!1)};(0,o.useEffect)((()=>{if((0,l.d2)(V),(0,P.y)("IMPRESSION_WEB_FEED_PAGE",{page_view_id:V,traffic_source:h,traffic_source_id:m}),(0,a.ck)(),(0,d.dV)(),R.current=window.document.onkeydown,window.document.onkeydown=e=>{R.current&&R.current(e),(0,c.uN)(e.code)},w)T();else{var e;const t=F||Ce.EQ,n=f||Ce.EQ,o=q();if(n===Ce.vQ.TRENDING&&"show"===r)return;null!==(e=L.state)&&void 0!==e&&e.forceRefresh?b(n):n!=t&&(o?D(n):b(n))}return()=>{document.onkeydown=R.current}}),[]),(0,o.useEffect)((()=>{if(C){const e=F||Ce.EQ;E(),b(e,{numColumns:z}),B.replace({...L,hash:""})}}),[C]),(0,o.useEffect)((()=>{var e;const t=F||Ce.EQ;null!==(e=L.state)&&void 0!==e&&e.forceRefresh||A||t===S||null==S&&t===Ce.EQ||Q()}),[F]),(0,o.useEffect)((()=>{var e;null!==(e=L.state)&&void 0!==e&&e.forceRefresh&&!A&&(F||Ce.EQ)!==S&&Q()}),[L]);const K=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!M.current&&!Z.current)if((0,ce.rdR)(L))j({offset:U.current,count:30,numColumns:z});else{const t=q();t?N(t,{offset:U.current}):v({universalFeedCategory:F||Ce.EQ,filteredFeedCategory:(W.current?H.current:F)||Ce.EQ,offset:U.current,requestBrandedFilter:W.current,filters:e})}};return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)(s.rs,{children:[(0,Y.jsx)(s.AW,{path:(0,G.pR)(Ce.vQ.BLITZ_BUY),children:(0,u.cE)()?(0,Y.jsx)(Ee.Z,{onLoadMore:K,onScrollDown:g,onScrollUp:y,isCartSectionShown:O}):(0,Y.jsx)(le.Z,{onLoadMore:K,onScrollDown:g,onScrollUp:y,isCartSectionShown:O})}),"show"===r&&(0,Y.jsx)(s.AW,{path:(0,G.pR)(Ce.vQ.TRENDING),children:(0,Y.jsx)(Pe,{onScrollDown:g,onScrollUp:y})}),(0,Y.jsx)(s.AW,{path:"*",children:(0,Y.jsx)(de,{onLoadMore:K,onScrollDown:g,onScrollUp:y,pageViewId:V,isCartSectionShown:O})})]}),(0,Y.jsx)(ue.Z,{})]})})))),{withCartSection:!0}))},"./cozy/desktop/components/promotionBanner/PromoBannerContainer.tsx":function(e,t,n){"use strict";n("./node_modules/core-js/modules/web.dom-collections.iterator.js");var o=n("./node_modules/react/index.js"),r=n("./cozy/coco/components/PromoBanner/PromoBanner.tsx"),s=n("./cozy/coco/components/ItemCarousel/ItemCarousel.tsx"),i=n("./cozy/shared/styles/promotionBanner/PromotionBanner.tsx"),c=n("./cozy/desktop/styles/promotionBanner/PromotionBanner.tsx"),a=n("./cozy/data/services/AnalyticsService.tsx"),d=n("./node_modules/react/jsx-runtime.js");t.Z=e=>{let{promoBannerProps:t,bannerWidth:n}=e;const[l,u]=(0,o.useState)(!1),[p,h]=(0,o.useState)(!1),{items:m,impression_event_id:f,log_info:y}=t;(0,o.useEffect)((()=>{(0,a.y)(f,y)}),[]);const g=m.filter((e=>Boolean(e))),x=g.map(((e,t)=>(0,d.jsx)(r.Z,{promoBannerItem:e,bannerWidth:n},t)));return(0,d.jsx)(c.Dm,{children:(0,d.jsx)(i.vU,{onMouseEnter:()=>{u(!0),h(!0)},onMouseLeave:()=>{u(!1),h(!1)},children:(0,d.jsx)(s.ZP,{entries:x,rotate:!0,withDot:g.length>1,forceHorizontal:!1,showArrow:g.length>1&&l,arrowPosition:s.ZV.SIDE_WITH_CIRCLE,autoScroll:!p,autoScrollInterval:(e=>{if(e)return 1e3*e})(g[0].auto_scroll_delay_seconds),overrideStyle:{padding:0}})})})}},"./cozy/desktop/styles/FeedPage.tsx":function(e,t,n){"use strict";n.d(t,{T:function(){return o}});const o=n("./node_modules/styled-components/dist/styled-components.browser.esm.js").ZP.div.withConfig({displayName:"FeedPage__GridContainer",componentId:"sc-12azqnc-0"})(["flex:1 1 auto;background-color:",";"],(e=>{let{theme:t,hasBackgroundColor:n}=e;return t.isDark||n?t.white:t.Grey7}))},"./cozy/desktop/styles/brand/BrandsFeedPage.tsx":function(e,t,n){"use strict";n.d(t,{tH:function(){return s},ZW:function(){return i},IO:function(){return c},n6:function(){return a},tM:function(){return d}});var o=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("./cozy/shared/styles/Mixins.tsx");const s=o.ZP.div.withConfig({displayName:"BrandsFeedPage__BrandsMenuOuterWrapper",componentId:"sc-8n84rl-0"})(["width:",";padding:16px 0;display:flex;justify-content:space-between;"],(e=>{let{width:t}=e;return t})),i=o.ZP.div.withConfig({displayName:"BrandsFeedPage__CategoryFeedHeaderWrapper",componentId:"sc-8n84rl-1"})(["",";margin-bottom:10px;flex-direction:column;background-color:#fff;"],r.qO),c=o.ZP.div.withConfig({displayName:"BrandsFeedPage__CategoryFeedHeaderRow",componentId:"sc-8n84rl-2"})(["display:flex;justify-content:space-between;align-items:center;"]),a=o.ZP.div.withConfig({displayName:"BrandsFeedPage__CategoryFeedFooterWrapper",componentId:"sc-8n84rl-3"})(["",";padding:20px 0 10px 0;background-color:#fff;"],r.qO),d=o.ZP.div.withConfig({displayName:"BrandsFeedPage__FooterButtonWrapper",componentId:"sc-8n84rl-4"})(["",";padding:20px 0;background-color:#fff;"],r.qO)},"./cozy/desktop/styles/search/SearchPage.tsx":function(e,t,n){"use strict";n.d(t,{im:function(){return i},_r:function(){return c},yo:function(){return a},Dr:function(){return d},CW:function(){return l},gY:function(){return u}});var o=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("./cozy/shared/styles/Mixins.tsx"),s=n("./cozy/data/constants/FeedConstants.tsx");const i=o.ZP.div.withConfig({displayName:"SearchPage__Wrapper",componentId:"sc-1jsux1m-0"})(["flex:1 1 auto;flex-direction:column;background-color:",";"],(e=>{let{theme:t}=e;return t.Grey7})),c=o.ZP.div.withConfig({displayName:"SearchPage__SearchQueryContainer",componentId:"sc-1jsux1m-1"})(["display:flex;justify-content:center;margin-top:",";margin-bottom:-10px;"," ",""],(e=>{let{hasSearchTag:t,hasPromoCarousel:n}=e;return t&&!n?"70px":"36px"}),(e=>{let{hide:t}=e;return t&&"display: none;"}),(e=>{let{hasSearchTag:t}=e;return!t&&"padding-left:80px"})),a=o.ZP.div.withConfig({displayName:"SearchPage__SearchQuerySpacer",componentId:"sc-1jsux1m-2"})(["width:","px;text-align:left;padding-bottom:4px;color:",";"," white-space:nowrap;"],(e=>{let{productsPerRow:t}=e;return t*s.$6+(t-1)*(s.Uk.LEFT+s.Uk.RIGHT)}),(e=>{let{theme:t}=e;return t.Grey1}),r.fb),d=o.ZP.span.withConfig({displayName:"SearchPage__Span",componentId:"sc-1jsux1m-3"})([""]),l=o.ZP.span.withConfig({displayName:"SearchPage__BoldSpan",componentId:"sc-1jsux1m-4"})([""," font-weight:bold;"],r.fb),u=o.ZP.div.withConfig({displayName:"SearchPage__PromoBannerContainerWrapper",componentId:"sc-1jsux1m-5"})(["",""],(e=>{let{hasSearchTag:t}=e;return t&&"margin-top: 70px"}))},"./cozy/desktop/styles/trending/Trending.tsx":function(e,t,n){"use strict";n.d(t,{im:function(){return c},zc:function(){return a},X2:function(){return d},h4:function(){return l},qQ:function(){return u},bj:function(){return p},Uj:function(){return h},ZI:function(){return m},$_:function(){return f},gp:function(){return y},Fu:function(){return g},IC:function(){return x},Tm:function(){return _},PC:function(){return I}});var o=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),r=n("./node_modules/react-router-dom/esm/react-router-dom.js"),s=n("./cozy/shared/styles/Mixins.tsx"),i=n("./cozy/shared/styles/Utils.tsx");const c=o.ZP.div.withConfig({displayName:"Trending__Wrapper",componentId:"sc-523eej-0"})(["display:flex;flex:1 1 auto;justify-content:center;background-color:",";"],(e=>{let{theme:t}=e;return t.Grey7})),a=o.ZP.div.withConfig({displayName:"Trending__GridWrapper",componentId:"sc-523eej-1"})(["flex-direction:row;"]),d=o.ZP.div.withConfig({displayName:"Trending__Row",componentId:"sc-523eej-2"})(["background-color:",";width:",";padding-top:32px;border-radius:4px;"],(e=>{let{theme:t}=e;return t.Grey7}),(e=>{let{bannerWidth:t}=e;return"".concat(t,"px")})),l=o.ZP.div.withConfig({displayName:"Trending__Header",componentId:"sc-523eej-3"})(["display:flex;align-items:center;"]),u=o.ZP.div.withConfig({displayName:"Trending__TrendRank",componentId:"sc-523eej-4"})(["",";margin-left:10px;padding:4px 8px;border-radius:12px;background-color:",";color:#fff;"],s.nf,(e=>{let{theme:t}=e;return(0,i._j)(t.primaryColor,20)})),p=o.ZP.div.withConfig({displayName:"Trending__TrendTitle",componentId:"sc-523eej-5"})(["margin-left:12px;display:flex;align-items:center;flex:1;"]),h=o.ZP.div.withConfig({displayName:"Trending__TrendName",componentId:"sc-523eej-6"})(["",";color:",";"],s.tO,(e=>{let{theme:t}=e;return t.Grey1})),m=o.ZP.div.withConfig({displayName:"Trending__TrendDescription",componentId:"sc-523eej-7"})(["color:",";margin-left:8px;",";"],(e=>{let{theme:t}=e;return t.Grey2}),s.Mc),f=o.ZP.div.withConfig({displayName:"Trending__Footer",componentId:"sc-523eej-8"})(["",";",";color:",";height:48px;padding:24px 0;"],s.qO,s.fb,(e=>{let{theme:t}=e;return t.Grey3})),y=(0,o.ZP)(r.rU).withConfig({displayName:"Trending__ViewAll",componentId:"sc-523eej-9"})(["color:",";cursor:pointer;"],(e=>{let{theme:t}=e;return t.primaryColor})),g=o.ZP.div.withConfig({displayName:"Trending__FeedHeader",componentId:"sc-523eej-10"})(["margin-top:26px;display:flex;align-itmes:center;margin:26px auto 0 auto;width:",";"],(e=>{let{bannerWidth:t}=e;return"".concat(t,"px")})),x=(0,o.ZP)(r.rU).withConfig({displayName:"Trending__TopLevel",componentId:"sc-523eej-11"})(["color:",";",""],(e=>{let{theme:t}=e;return t.Grey3}),s.fb),_=o.ZP.div.withConfig({displayName:"Trending__Slash",componentId:"sc-523eej-12"})(["color:",";"," margin:0 8px;"],(e=>{let{theme:t}=e;return t.Grey1}),s.fb),I=o.ZP.div.withConfig({displayName:"Trending__CurrentLevel",componentId:"sc-523eej-13"})(["color:",";",""],(e=>{let{theme:t}=e;return t.Grey1}),s.fb)}}]);
//# sourceMappingURL=DesktopFeedPage.loadable.7b1654710117d4186c9a.js.map