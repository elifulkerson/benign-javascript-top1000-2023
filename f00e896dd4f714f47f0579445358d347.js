var swfobject=function(){function e(){if(!D){try{var e=$.getElementsByTagName("body")[0].appendChild(v("span"));e.parentNode.removeChild(e)}catch(e){return}D=!0;for(var t=J.length,n=0;t>n;n++)J[n]()}}function t(e){D?e():J[J.length]=e}function n(e){if(typeof O.addEventListener!=A)O.addEventListener("load",e,!1);else if(typeof $.addEventListener!=A)$.addEventListener("load",e,!1);else if(typeof O.attachEvent!=A)m(O,"onload",e);else if("function"==typeof O.onload){var t=O.onload;O.onload=function(){t(),e()}}else O.onload=e}function o(){H?i():a()}function i(){var e=$.getElementsByTagName("body")[0],t=v(N);t.setAttribute("type",F);var n=e.appendChild(t);if(n){var o=0;!function(){if(typeof n.GetVariable!=A){var i=n.GetVariable("$version");i&&(i=i.split(" ")[1].split(","),Q.pv=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)])}else if(10>o)return o++,void setTimeout(arguments.callee,10);e.removeChild(t),n=null,a()}()}else a()}function a(){var e=M.length;if(e>0)for(var t=0;e>t;t++){var n=M[t].id,o=M[t].callbackFn,i={success:!1,id:n};if(Q.pv[0]>0){var a=y(n);if(a)if(!g(M[t].swfVersion)||Q.wk&&Q.wk<312)if(M[t].expressInstall&&s()){var f={};f.data=M[t].expressInstall,f.width=a.getAttribute("width")||"0",f.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(f.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(f.align=a.getAttribute("align"));for(var d={},p=a.getElementsByTagName("param"),u=p.length,h=0;u>h;h++)"movie"!=p[h].getAttribute("name").toLowerCase()&&(d[p[h].getAttribute("name")]=p[h].getAttribute("value"));c(f,d,n,o)}else l(a),o&&o(i);else b(n,!0),o&&(i.success=!0,i.ref=r(n),o(i))}else if(b(n,!0),o){var v=r(n);v&&typeof v.SetVariable!=A&&(i.success=!0,i.ref=v),o(i)}}}function r(e){var t=null,n=y(e);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=A)t=n;else{var o=n.getElementsByTagName(N)[0];o&&(t=o)}return t}function s(){return!R&&g("6.0.65")&&(Q.win||Q.mac)&&!(Q.wk&&Q.wk<312)}function c(e,t,n,o){R=!0,C=o||null,T={success:!1,id:n};var i=y(n);if(i){"OBJECT"==i.nodeName?(E=f(i),k=null):(E=i,k=n),e.id=B,(typeof e.width==A||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==A||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),$.title=$.title.slice(0,47)+" - Flash Player Installation";var a=Q.ie&&Q.win?"ActiveX":"PlugIn",r="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+a+"&MMdoctitle="+$.title;if(typeof t.flashvars!=A?t.flashvars+="&"+r:t.flashvars=r,Q.ie&&Q.win&&4!=i.readyState){var s=v("div");n+="SWFObjectNew",s.setAttribute("id",n),i.parentNode.insertBefore(s,i),i.style.display="none",function(){4==i.readyState?i.parentNode.removeChild(i):setTimeout(arguments.callee,10)}()}d(e,t,n)}}function l(e){if(Q.ie&&Q.win&&4!=e.readyState){var t=v("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(f(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(f(e),e)}function f(e){var t=v("div");if(Q.win&&Q.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(N)[0];if(n){var o=n.childNodes;if(o)for(var i=o.length,a=0;i>a;a++)1==o[a].nodeType&&"PARAM"==o[a].nodeName||8==o[a].nodeType||t.appendChild(o[a].cloneNode(!0))}}return t}function d(e,t,n){var o,i=y(n);if(Q.wk&&Q.wk<312)return o;if(i)if(typeof e.id==A&&(e.id=n),Q.ie&&Q.win){var a="";for(var r in e)e[r]!=Object.prototype[r]&&("data"==r.toLowerCase()?t.movie=e[r]:"styleclass"==r.toLowerCase()?a+=' class="'+e[r]+'"':"classid"!=r.toLowerCase()&&(a+=" "+r+'="'+e[r]+'"'));var s="";for(var c in t)t[c]!=Object.prototype[c]&&(s+='<param name="'+c+'" value="'+t[c]+'" />');i.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+s+"</object>",W[W.length]=e.id,o=y(e.id)}else{var l=v(N);l.setAttribute("type",F);for(var f in e)e[f]!=Object.prototype[f]&&("styleclass"==f.toLowerCase()?l.setAttribute("class",e[f]):"classid"!=f.toLowerCase()&&l.setAttribute(f,e[f]));for(var d in t)t[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&p(l,d,t[d]);i.parentNode.replaceChild(l,i),o=l}return o}function p(e,t,n){var o=v("param");o.setAttribute("name",t),o.setAttribute("value",n),e.appendChild(o)}function u(e){var t=y(e);t&&"OBJECT"==t.nodeName&&(Q.ie&&Q.win?(t.style.display="none",function(){4==t.readyState?h(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function h(e){var t=y(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}function y(e){var t=null;try{t=$.getElementById(e)}catch(e){}return t}function v(e){return $.createElement(e)}function m(e,t,n){e.attachEvent(t,n),V[V.length]=[e,t,n]}function g(e){var t=Q.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]}function w(e,t,n,o){if(!Q.ie||!Q.mac){var i=$.getElementsByTagName("head")[0];if(i){var a=n&&"string"==typeof n?n:"screen";if(o&&(I=null,j=null),!I||j!=a){var r=v("style");r.setAttribute("type","text/css"),r.setAttribute("media",a),I=i.appendChild(r),Q.ie&&Q.win&&typeof $.styleSheets!=A&&$.styleSheets.length>0&&(I=$.styleSheets[$.styleSheets.length-1]),j=a}Q.ie&&Q.win?I&&typeof I.addRule==N&&I.addRule(e,t):I&&typeof $.createTextNode!=A&&I.appendChild($.createTextNode(e+" {"+t+"}"))}}}function b(e,t){if(U){var n=t?"visible":"hidden";D&&y(e)?y(e).style.visibility=n:w("#"+e,"visibility:"+n)}}function S(e){return null!=/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!=A?encodeURIComponent(e):e}var E,k,C,T,I,j,A="undefined",N="object",x="Shockwave Flash",F="application/x-shockwave-flash",B="SWFObjectExprInst",P="onreadystatechange",O=window,$=document,L=navigator,H=!1,J=[o],M=[],W=[],V=[],D=!1,R=!1,U=!0,Q=function(){var e=typeof $.getElementById!=A&&typeof $.getElementsByTagName!=A&&typeof $.createElement!=A,t=L.userAgent.toLowerCase(),n=L.platform.toLowerCase(),o=/win/.test(n?n:t),i=/mac/.test(n?n:t),a=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),r=!1,s=[0,0,0],c=null;if(typeof L.plugins!=A&&typeof L.plugins[x]==N)!(c=L.plugins[x].description)||typeof L.mimeTypes!=A&&L.mimeTypes[F]&&!L.mimeTypes[F].enabledPlugin||(H=!0,r=!1,c=c.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(c.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(c.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(c)?parseInt(c.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof O.ActiveXObject!=A)try{var l=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");l&&(c=l.GetVariable("$version"))&&(r=!0,c=c.split(" ")[1].split(","),s=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)])}catch(e){}return{w3:e,pv:s,wk:a,ie:r,win:o,mac:i}}();return function(){Q.w3&&((typeof $.readyState!=A&&"complete"==$.readyState||typeof $.readyState==A&&($.getElementsByTagName("body")[0]||$.body))&&e(),D||(typeof $.addEventListener!=A&&$.addEventListener("DOMContentLoaded",e,!1),Q.ie&&Q.win&&($.attachEvent(P,function(){"complete"==$.readyState&&($.detachEvent(P,arguments.callee),e())}),O==top&&function(){if(!D){try{$.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}e()}}()),Q.wk&&function(){D||(/loaded|complete/.test($.readyState)?e():setTimeout(arguments.callee,0))}(),n(e)))}(),function(){Q.ie&&Q.win&&window.attachEvent("onunload",function(){for(var e=V.length,t=0;e>t;t++)V[t][0].detachEvent(V[t][1],V[t][2]);for(var n=W.length,o=0;n>o;o++)u(W[o]);for(var i in Q)Q[i]=null;Q=null;for(var a in swfobject)swfobject[a]=null;swfobject=null})}(),{registerObject:function(e,t,n,o){if(Q.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=o,M[M.length]=i,b(e,!1)}else o&&o({success:!1,id:e})},getObjectById:function(e){return Q.w3?r(e):void 0},embedSWF:function(e,n,o,i,a,r,l,f,p,u){var h={success:!1,id:n};Q.w3&&!(Q.wk&&Q.wk<312)&&e&&n&&o&&i&&a?(b(n,!1),t(function(){o+="",i+="";var t={};if(p&&typeof p===N)for(var y in p)t[y]=p[y];t.data=e,t.width=o,t.height=i;var v={};if(f&&typeof f===N)for(var m in f)v[m]=f[m];if(l&&typeof l===N)for(var w in l)typeof v.flashvars!=A?v.flashvars+="&"+w+"="+l[w]:v.flashvars=w+"="+l[w];if(g(a)){var S=d(t,v,n);t.id==n&&b(n,!0),h.success=!0,h.ref=S}else{if(r&&s())return t.data=r,void c(t,v,n,u);b(n,!0)}u&&u(h)})):u&&u(h)},switchOffAutoHideShow:function(){U=!1},ua:Q,getFlashPlayerVersion:function(){return{major:Q.pv[0],minor:Q.pv[1],release:Q.pv[2]}},hasFlashPlayerVersion:g,createSWF:function(e,t,n){return Q.w3?d(e,t,n):void 0},showExpressInstall:function(e,t,n,o){Q.w3&&s()&&c(e,t,n,o)},removeSWF:function(e){Q.w3&&u(e)},createCSS:function(e,t,n,o){Q.w3&&w(e,t,n,o)},addDomLoadEvent:t,addLoadEvent:n,getQueryParamValue:function(e){var t=$.location.search||$.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return S(t);for(var n=t.split("&"),o=0;o<n.length;o++)if(n[o].substring(0,n[o].indexOf("="))==e)return S(n[o].substring(n[o].indexOf("=")+1))}return""},expressInstallCallback:function(){if(R){var e=y(B);e&&E&&(e.parentNode.replaceChild(E,e),k&&(b(k,!0),Q.ie&&Q.win&&(E.style.display="block")),C&&C(T)),R=!1}}}}();!function(e,t){var n=t,o={init:function(n){var i=n.h5playerUrl+"?"+t.config.ver,a=n.h5playerCoreUrl+"?"+t.config.ver,r=n.h5playerCssUrl+"?"+t.config.ver,s=n.placeholder||"yp-flash-placeholder",c=this;return this.id=n.attr.h5playerId,this.connection={},this.connection.open=function(){this.onopen()},this.connection.send=function(e){var t=o.getWS();t&&t[o.J2F]&&t[o.J2F](e)},this.connection.close=function(){this.onclose(),e(document).trigger("socket/close",{ws:o.getWS()})},this.connection.error=function(){this.onerror()},this.connection.destroy=function(){var t=e("#"+c.id),n=t.parent();c.connection.ws.destroy(),t.remove(),n.append('<div id="'+s+'"></div>'),c.connection.close()},this.connection.onopen=n.onopen||t.noop,this.connection.onmessage=n.onmessage||t.noop,this.connection.onclose=n.onclose||t.noop,this.connection.onerror=n.onerror||t.noop,this.loadCss(r),t.use(i+", "+a,function(e){c.connection.ws=H5PlayerApp,c.connection.ws.init(n)}),this.connection},getWS:function(){return this.connection.ws},F2J:function(e){"ready_resp"===e.cmdid?o.connection.open():o.connection.onmessage({data:e})},loadCss:function(e){var t=document,n=t.getElementsByTagName("head")[0],o=e.replace(/[?#].*/,"");if(!t.getElementById(o)){var i=t.createElement("link");i.rel="stylesheet",i.href=e,i.id=o,n.insertBefore(i,n.firstChild)}}};window.JSInterfaceH5=o.F2J,o.J2F="receiveFormJSToH5",n.h5Player=o,define("yp.h5Player",[],function(){return o})}(jQuery,yp),function(e,t){var n="h5",o=t,i=function(e){return-1!=navigator.appName.indexOf("Microsoft")?window[e]:document[e]},a={init:function(o,i,r){n=i;var s=o.url+"?"+t.config.flashVer,c=o.placeholder||"yp-flash-placeholder",l=o.installUrl+"?"+t.config.flashVer,f=t.mix({},o.vars),d=t.mix({},o.params),p=t.mix({},o.attr),u=this;return this.id=o.attr.id,this.connection={},this.connection.open=function(){this.onopen()},this.connection.send=function(e){var t=a.getWS();t&&t[a.J2F]&&t[a.J2F](e)},this.connection.close=function(){this.onclose(),e(document).trigger("socket/close",{ws:a.getWS()})},this.connection.error=function(){this.onerror()},this.connection.destroy=function(){var t=e("#"+u.id),n=t.parent();t.remove(),n.append('<div id="'+c+'"></div>'),u.connection.close()},this.connection.onopen=o.onopen||t.noop,this.connection.onmessage=o.onmessage||t.noop,this.connection.onclose=o.onclose||t.noop,this.connection.onerror=o.onerror||t.noop,setTimeout(function(){switch(i){case"h5":r?$.when(r).done(function(){window.$H5Player.init(o.vars)}):window.$H5Player.init(o.vars);break;case"flash":swfobject.embedSWF(s,c,"100%","100%","11.0.1",l,f,d,p,o.callback||function(e){e.success||alert("抱歉，当前页面不能加载Flash")})}},0),this.connection},getWS:function(){return"flash"===n?this.connection.ws||i(this.id):window.sockChannel},F2J:function(e){a.connection.ws=a.getWS(),"ready_resp"===e.cmdid?(a.connection.open(),e.type&&window.localStorage&&yp.localStorage.setItem("lastPlayer",e.type)):a.connection.onmessage({data:e})}};window.JSInterface=a.F2J,a.J2F="receiveFormJS",o.flash=a,define("yp.flash",[],function(){return a})}(jQuery,yp),function(e,t){function n(e,t,n){$.ajax({type:"GET",url:e,success:t,dataType:"script",ifModified:!0,cache:n})}var o,i=oPageConfig.oUrl.h5liveplayerUrl||"https://h5player.zhanqi.tv/assets/h5liveplayer/dist",a=function(){var e=navigator.userAgent,t={isIE:!1,isEdge:!1,isIE11:!1,isSafari:!1};return t.isIE=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1,t.isEdge=e.indexOf("Edge")>-1&&!t.isIE,t.isIE11=e.indexOf("Trident")>-1&&e.indexOf("rv:11.0")>-1,t.isSafari=e.indexOf("Safari")>-1&&-1==e.indexOf("Chrome"),t}(),r="flash",s=window.oPageConfig.oFlash.useH5Player;if(!a.isIE&&!a.isIE11&&!a.isEdge&&function(){var e=window.MediaSource&&"function"==typeof window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),t=!window.SourceBuffer||window.SourceBuffer.prototype&&"function"==typeof window.SourceBuffer.prototype.appendBuffer&&"function"==typeof window.SourceBuffer.prototype.remove;return e&&t}()&&!s){if(r="h5",function(){var e=document.getElementsByTagName("HEAD").item(0),t=document.createElement("link");t.href=i+"/css/app.css?v="+yp.config.ver,t.rel="stylesheet",t.type="text/css",e.appendChild(t)}(),window.localStorage){var c=yp.localStorage.getItem("lastPlayer");c&&(r="h5"==c?"h5":"flash");var l=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null}("player");if(l)switch(l){case"h5":case"fl":r="h5"==l?"h5":"flash"}}o=$.Deferred(),n(i+"/zplayer.js?v="+yp.config.ver,function(){n(i+"/js/manifest.js?v="+yp.config.ver,function(){n(i+"/js/vendor.js?v="+yp.config.ver,function(){n(i+"/js/app.js?v="+yp.config.ver,function(){o.resolve(),$.when(flashReadyDtd).then(function(){"flash"==r&&yp.ajax("isH5Supported",{type:"socket",data:{}}),yp.sub("page/player/ready",function(e){yp.ajax("isH5Supported",{type:"socket",data:{}})})})},!0)},!0)},!0)},!0)}var f=this,d=t,p={init:function(n){return n.onopen=function(){e.pub("socket/open")},n.onmessage=function(t){e.pub("socket/message",t.data)},n.onclose=function(){e.pub("socket/close")},n.onerror=function(t){e.pub("socket/error",t.data)},f.onunload=function(){p.connection.close()},e.sub("socket/send.socket",function(e,t){p.connection.send(t)}),e.topic("msgc/error").sub(function(e){204==e.code?yp.pub("page/chat/204error"):e.msg&&alert(e.msg)}),e.topic("msgc/changeToH5").sub(function(e){return"live"===e.type?(p.connection.send({cmdid:"jdestroy"}),setTimeout(function(){n.vars=oPageConfig.oRoom.flashvars,p.connection.destroy(),p.connection=t.flash.init(n,"h5")}),0):(e&&(n.vars.Position=e.position),p.connection.destroy(),p.connection=t.h5Player.init(n),void yp.pub("page/player/change",{type:"h5"}))}),e.topic("msgc/changeToFlash").sub(function(e){return e&&"live"===e.type?(p.connection.send({cmdid:"jdestroy"}),setTimeout(function(){n.vars=oPageConfig.oRoom.flashvars,p.connection.destroy(),window.$H5Player&&$H5Player.destroy(),p.connection=t.flash.init(n,"flash")}),0):(e&&(n.vars.Position=e.position),p.connection.destroy(),p.connection=t.flash.init(n,"flash"),void yp.pub("page/player/change",{type:"flash"}))}),n.useH5Player&&n.h5Default?p.connection=t.h5Player.init(n):p.connection="h5"===r?t.flash.init(n,"h5",o):t.flash.init(n,"flash"),p.connection}};d.socket=p,define("yp.socket",[],function(){return p})}(jQuery,yp),function(e,t){var n=t,o=n.loader;o.msgc=o.socket=function(){return e.sub("loader/msgc/message.loader",function(t,n){"socket"===n.dataType&&(n.winType="msgc",e.pub("loader/msgc/message/socket",n))}),e.sub("loader/msgc/message/socket.loader",function(t,n){e.topic([n.winType,n.name].join("/")).pub.call(null,n.params)}),{ajax:function(t,n){var o=e.Deferred(),i=n.data;return i.cmdid=t,e.pub("loader/msgc/send",i),o.promise()}}}()}(jQuery,yp),function(e,t){var n=t,o=n.event,i={};o.topic=function(t){function n(e,t){if(/\//.test(e)){var o=e.replace(/[^\/]*(\/\*)?$/,"*"),a=i[o];a?a.pub.apply(a,t):n(o,t)}}function o(){a.fire.apply(this,arguments),n(this.id,arguments)}var a,r=t&&i[t];return r||(a=e.Callbacks("memory"),r={id:t,pub:o,sub:a.add,unsub:a.remove},t&&(i[t]=r)),r},e.topic=o.topic,e.sub("socket/open.event",function(){t.pub("msgc/ready")}),e.sub("socket/message.event",function(t,n){var o=n,i={name:o.cmdid,params:o};i.dataType="socket",e.pub("loader/msgc/message",i)}),e.sub("loader/msgc/send.event",function(t,n){e.pub("socket/send",n)})}(jQuery,yp),define("j/yp/yp-socket",function(){});