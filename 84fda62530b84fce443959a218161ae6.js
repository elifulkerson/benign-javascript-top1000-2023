$(document).ready(function(){var modal=document.getElementById("myModal");var btn=document.getElementById("filter_posts");var span=document.getElementsByClassName("close")[0];btn.onclick=function(){modal.style.display="block";button_obj=$(".filter_keywords_list_button");showFilterKeywordsList(button_obj)}
span.onclick=function(){modal.style.display="none"}
window.onclick=function(event){if(event.target==modal){modal.style.display="none"}}
$(document).on("click","#filter_add",function(){var kw=$("#filter_keyword").val();if(kw.length>0){addFilterKeyword(kw);addFilterKeywordsHtml(kw);$("#filter_keyword").val("")}});$(document).on("click",".filter_keywords_list_button",function(){var button_obj=$(this);showFilterKeywordsList(button_obj)});$(document).on("click",".filter_keywords_hide_list_button",function(){var button_obj=$(this);button_obj.html("[リスト表示]");button_obj.removeClass('filter_keywords_hide_list_button').addClass("filter_keywords_list_button");$("#filter_keywords_list").html("")});$(document).on("click",".filter_keywords_remove",function(){var button_obj=$(this);var value=button_obj.attr('data-keyword');removeFilterkeyword(value);button_obj.parent().parent().remove()});$(document).on("click",".filter_keywords_clear_all_button",function(){var r=confirm("フィルターされたキーワードを削除してもよろしいですか？")
if(r==!0){clearAllFilterKeywords()}});$(document).on("click",".filter_keywords_refresh_page_button",function(){redirect("/")})});function addFilterKeywordsHtml(kw){kw_html="<div class=\"row\"><div class=\"col filter_keyword_text\">"+kw+"</div><div class=\"col filter_keyword_action_remove\"><a href=\"javascript:void(0)\" class=\"filter_keywords_remove\" data-keyword=\""+kw+"\">x</a></div></div>"
button_obj=$(".filter_keywords_list_button");showFilterKeywordsList(button_obj)}
function showFilterKeywordsList(button_obj){var fkw_arr_list=getFilterKeywordsList();if(fkw_arr_list.length>0){var fkws="";fkw_arr_list.forEach(function(fkw){fkws+="<div class=\"row\"><div class=\"col filter_keyword_text\">"+fkw+"</div><div class=\"col filter_keyword_action_remove\"><a href=\"javascript:void(0)\" class=\"filter_keywords_remove\" data-keyword=\""+fkw+"\">x</a></div></div>"});$("#filter_keywords_list").html(fkws);$(".filter_keywords_list_button").html("[リストを非表示にする]");button_obj.removeClass('filter_keywords_list_button').addClass("filter_keywords_hide_list_button")}}
function addFilterKeyword(kw){var current_list=getFilterKeywordsList();var new_insert=kw;current_list.push(new_insert);localStorage.setItem("filterKeywords",JSON.stringify(current_list));hideFilterKeywords()}
function removeFilterkeyword(value){var filter=getFilterKeywordsList();for(var i=0;i<filter.length;i++){if(filter[i]==value){filter.splice(i,1);break}}
localStorage.filterKeywords=JSON.stringify(filter)}
function getFilterKeywordsList(){if(localStorage.filterKeywords){return JSON.parse(localStorage.filterKeywords)}else{return[]}}
function hideFilterKeywords(){var fkw_arr_list=getFilterKeywordsList();fkw_arr_list.forEach(function(fkw){var post_contents=function(){li_thread_content=$(this).parent().parent().parent();comment=$(this).html();if(comment.toString().match(fkw)){li_thread_content.hide()}};$('.thread-content').each(post_contents)})}
function clearAllFilterKeywords(){localStorage.setItem("filterKeywords",[]);redirect("/")}
