var AsanaStorage={optanonWrapperInitialized:!1,STORAGE_KEYS:{ENCRYPTED_USER_ID:"ga__ec_ui",ECOMMERCE_CONFIG:"ga__ecommerce_config",USER_SIGNUP_EMAIL:"user_signup_email",GOOGLE_ANALYTICS_ID:"_ga"},pendingCookies:[],pendingDataLayerEvents:[],CATEGORY:{NECESSARY:"C0001",PERFORMANCE:"C0002",FUNCTIONAL:"C0003",TARGETING:"C0004"},getFromSessionStorage:function(e){try{return window.sessionStorage.getItem(e)}catch(e){window.AsanaErrors.notifyException(e)}},setToSessionStorage:function(e,t){try{window.sessionStorage.setItem(e,t)}catch(e){window.AsanaErrors.notifyException(e)}},removeFromSessionStorage:function(e){try{window.sessionStorage.removeItem(e)}catch(e){window.AsanaErrors.notifyException(e)}},getFromLocalStorage:function(e){try{return window.localStorage.getItem(e)}catch(e){window.AsanaErrors.notifyException(e)}},setToLocalStorage:function(e,t){try{window.localStorage.setItem(e,t)}catch(e){window.AsanaErrors.notifyException(e)}},removeFromLocalStorage:function(e){try{window.localStorage.removeItem(e)}catch(e){window.AsanaErrors.notifyException(e)}},getEcommerceConfig:function(){var e=this.getFromSessionStorage(this.STORAGE_KEYS.ECOMMERCE_CONFIG);if(!e)return{};try{return JSON.parse(e)}catch(e){window.AsanaErrors.notifyException(e)}},setEcommerceConfig:function(e){this.setToSessionStorage(this.STORAGE_KEYS.ECOMMERCE_CONFIG,JSON.stringify(e))},removeEcommerceConfig:function(){this.removeFromSessionStorage(this.STORAGE_KEYS.ECOMMERCE_CONFIG)},updateEcommerceConfig:function(e){var t=this.getEcommerceConfig();e(t),this.setEcommerceConfig(t)},setEncryptedUserId:function(e){e&&this.setToLocalStorage(this.STORAGE_KEYS.ENCRYPTED_USER_ID,e)},getEncryptedUserId:function(){return this.getFromLocalStorage(this.STORAGE_KEYS.ENCRYPTED_USER_ID)||null},removeEncryptedUserId:function(){this.removeFromLocalStorage(this.STORAGE_KEYS.ENCRYPTED_USER_ID)},getCookie:function(e){var t=document.cookie,n=t.indexOf(" "+e+"=");return t=-1==(n=-1==n?t.indexOf(e+"="):n)?null:(n=t.indexOf("=",n)+1,-1==(e=t.indexOf(";",n))&&(e=t.length),unescape(t.substring(n,e)))},setCookie:function(e,t,n,i,o,a,s="Lax"){var r;n==AsanaStorage.CATEGORY.NECESSARY||this.getUserConsentByGroupId(n)?(i=i||30,o=void 0===o||o,(r=new Date).setTime(r.getTime()+24*i*60*60*1e3),r=e+"="+t+";"+("expires="+r.toUTCString())+";path="+(a||"/")+this.resolveCookieDomain(o)+";SameSite="+s+";secure",document.cookie=r):this.pendingCookies.push({name:e,value:t,groupId:n,expires_in_days:i,cross_domain:o,path:a})},deleteCookie:function(e,t){t=t||"/";this.setCookie(e,null,this.CATEGORY.NECESSARY,0,!0,t),"null"!==this.getCookie(e)&&this.setCookie(e,null,this.CATEGORY.NECESSARY,0,!1,t)},setPendingCookies:function(){window.AsanaTimings.setTiming("setPendingCookiesExecution");var e=this.pendingCookies.slice();this.pendingCookies=[],e.forEach(function(e){this.setCookie(e.name,e.value,e.groupId,e.expires_in_days,e.cross_domain,e.path)},this)},pushEventToDataLayerWithConsentGroupId:function(e,t){e&&(this.getUserConsentByGroupId(t)?(window.dataLayer=window.dataLayer||[],window.dataLayer.push(e),"asanadotcomLoggedOutExperimentEnrollment"===e.event&&(window.AsanaTimings.setTiming("experimentLoggingEnrollmentDatalayerPassedConsentCheck"),fetch("/api/update-metrics",{method:"POST",body:JSON.stringify({metrics:[{type:"increment",metricName:"experimentation.enrollment_funnel.datalayer_passed_consent_check",value:1,tags:`experiment_name:${e.experiment_id},experiment_variant:`+e.variant_id}]})}))):this.pendingDataLayerEvents.push({event:e,groupId:t}))},pushPendingEventsToDataLayer:function(){window.AsanaTimings.setTiming("pushPendingEventsToDataLayerExecution");var e=this.pendingDataLayerEvents.slice();this.pendingDataLayerEvents=[],e.forEach(function(e){this.pushEventToDataLayerWithConsentGroupId(e.event,e.groupId)},this)},logEnrollmentEvent:function(e,t=!1,n=void 0,i=void 0){"function"==typeof window.AsanaTimings?.setTiming&&window.AsanaTimings.setTiming("firstLogEnrollmentEventExecution");var o=document&&window?Math.max(document.body?.scrollWidth||0,document.documentElement?.scrollWidth||0,document.body?.offsetWidth||0,document.documentElement?.offsetWidth||0,document.documentElement?.clientWidth||0,window.innerWidth):0;return!(null!=n&&o<n||null!=i&&i<o||(t?this.immediatelyLogEnrollmentEvent(e,this.CATEGORY.PERFORMANCE):(this.pushEventToDataLayerWithConsentGroupId(e,this.CATEGORY.PERFORMANCE),(n=JSON.parse(JSON.stringify(e))).experiment_id+="-mp_experimental",(i=n.eventLabel.split(" - "))[0]+="-mp_experimental",n.eventLabel=i.join(" - "),this.immediatelyLogEnrollmentEvent(n,this.CATEGORY.PERFORMANCE)),0))},immediatelyLogEnrollmentEvent(e,t){var n,i,o,a;window.AsanaTimings.setTiming("experimentLoggingFirstImmediatelyLogEnrollmentExecution"),this.getUserConsentByGroupId(t)&&({eventCategory:t,eventAction:n,eventLabel:i,eventValue:o,bucketing_id:a}=e,a={v:"1",t:"event",tid:"UA-11757081-1",ds:"mp",cd5:"mp",uid:a,ec:t,ea:n,el:i,ev:o,cid:this.getCookie("_ga")?.replace(/GA1.\d./,"")},window.AsanaTimings.setTiming("experimentLoggingEnrollmentMPPassedConsentCheck"),navigator?.sendBeacon("https://www.google-analytics.com/collect?"+new URLSearchParams(a)),fetch("/api/update-metrics",{method:"POST",body:JSON.stringify({metrics:[{type:"increment",metricName:"experimentation.enrollment_funnel.mp_passed_consent_check",value:1,tags:`experiment_name:${e.experiment_id},experiment_variant:`+e.variant_id}]})}))},getUserConsentByGroupId:function(e){var t=window.OptanonActiveGroups;return t&&t.includes(e)},setUserEmailCookie:function(e){for(var t,n=["/thank-you","/thankyou","/thank","/thanks","/confirm","/confirmation","/invite-confirmation"],i=this.getLanguagePreference(),o=0;o<n.length;o++)this.setCookie(this.STORAGE_KEYS.USER_SIGNUP_EMAIL,e,this.CATEGORY.NECESSARY,1/24,!1,n[o]),i&&"en"!==i&&(t=["/",i,n[o]].join(""),this.setCookie(this.STORAGE_KEYS.USER_SIGNUP_EMAIL,e,this.CATEGORY.NECESSARY,1/24,!1,t))},getUserEmailCookie:function(){return this.getCookie(this.STORAGE_KEYS.USER_SIGNUP_EMAIL)},getLanguagePreference:function(){return AsanaStorage.getCookie("lang_pref")||null},getUserGeo:function(){return this.getCookie("user_geo")},resolveCookieDomain:function(e){var t=/netlify\.app/.test(window.location.hostname);return!0!==e||t?"":";domain=.asana.com"}};