!function(){var e={6451:function(e,t,n){!function(){"use strict";var e={n:function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,{a:n}),n},d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};e.r(r),e.d(r,{primeHelper:function(){return q}});var i,o,s,a,u={"https://prime.rambler.ru":{key1:"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwTHGbo/ZwQVpkql42H/5tbOYgEVnS1w66lN4vql6TWtYi+TpeTuy9WaRJptIHhO1fKYNRV6QaRw6QJ/lHf5cl9Y8klOU02A5Mnwdq7UKo3z+SB4/cPZWyk0vGHcIE9iDLjUkOAF0bdArYEgujl1ysYMQOdb93VSCPyM2GSZJx7itnHG6melJThTe7TO63rzQHPSkn/z1tLCGcQBF/UoSSbOHDpU+ntBdX7ord/9Q2Lwid0Oy4ISBqzQSxS54SyZHXefYz+e8pD9eCtmiadPd8IU60AYJul/pDqIf4utD+kHeQPWut+abBYt5LMV5Wy4ZoAmdrRuhguNzx9r6G4xxCwIDAQAB",key2:"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAzGXeSOMjF1jaD8n3JD5lZpls0f0keRuYFqOmGgvrx9xvq0Man2Eg60TCVihZ3AhWotA0LW0pl3ZSrc1TpuObYBDT3qHB+YXdef4TBU1cI7TzK+GCp5Za+B/N1DOP9dBP71lFXNzYH1KaqQlCHSJPq5yq35QZhdAH780eaPZP0wKsbU1j6ucAu0vYndTgpxx2WmlSdY8yDfD7JZdRyzOqwyTut//LtakzzBS/guN+tTsdUds2hlAb2i/iGOiQlsrioX35x7D0pEyj/7NPY4ABgWTQAFV65OJnbiWG+fqQ6M9XwQrT/UbgeXVslYUkz5NmtGp2FlLl1fOPtLOwXhFswwIDAQAB"},"https://prime-stage01.rambler.ru":{key1:"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA2U2M51P4BnHxpH59slie4xLIzxP4xNn7jPk1t4PHmLnaVsC3ytcHEcEF/lK+lBBbtCmrfVxuoXWI64KMyeonrNPscDpFlDhctbwXqsTEXx7KAxX9EUTbqY2JOMgJMgt44IhmUbrkiWdynCAsCKKrCwAIbh5vBorHEjm2eWxDRG8qAzlu0HAAK6Mn8+5cCk3nJKR0lLWj71n44aE4h7QvnG7TT3RYWjFjOLPpeF8/IlHZigecECPox5Ss2ylPDh2u8Gt4BW01T3M09FwamCeh/uzYjqneRZT3o6K7Rp92iXimxjnnw+4QWP9iACIuDQqZLpIQLhMi02E9N+j9+bhCeQIDAQAB",key2:"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApGPr0ZzcEEJ7/eRK1/neCvduJeicYXsF17vRc8JIS+YWXVScOA6yzML3pnyN+ubnlOGBdpB8n4tb4yiNe8fxzVo+/aWOOcvcrxc5b1L1MvKP/sUIS6L7hi4p6hQGMF+cfVGqYh+iFzpwAZ9qKXVe3XBKc5ym0Pm2fKCIJ7RNMZY6pMZP8HQjpL+rFXrMgPIkkazqUqUMaudKZGmfBBbuSWUfhOyRJIkTakfExn7Thklk7f68n3sde5c1t1ttuWFhi7UcThQ3aoN4BLhuQhT0s2rNvhIdNZd6IoA+DZMIXxKjNLAXeYkcQVtUB47zVhOiAxjD2UkyhfB1o44IvOsY5wIDAQAB"}},l=e.n(u),c=(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),d=function(e){function t(t){var n,r=e.call(this)||this;return r.name="ApiError",r.message=t.message.toString().toLowerCase(),r.code=null!==(n=t.code)&&void 0!==n?n:"unknown",r.details=t.details,r}return c(t,e),t}(Error),f=function(){return(Date.now().toString(36)+Math.random().toString(36).slice(2)).slice(0,17)},p=1===function(e){var t,n=null;try{n=JSON.parse(null!==(t=window.localStorage.getItem("primeStageApi"))&&void 0!==t?t:"")}catch(e){}return n}()?"https://prime-stage01.rambler.ru":"https://prime.rambler.ru",h=function(e,t,n,r){var i=new XMLHttpRequest,o=p+"/api/v3/prime/"+t,s=f();n.id=s,"get"===e&&(o+="?"+Object.keys(n).reduce((function(e,t){return e.concat(t+"="+encodeURIComponent(n[t]&&"object"==typeof n[t]?JSON.stringify(n[t]):n[t]))}),[]).join("&")),i.open(e,o,!0),i.setRequestHeader("Content-Type","application/json"),i.onreadystatechange=function(){if(4===i.readyState&&200===i.status){var e=JSON.parse(i.responseText),n=e.success,o=e.error,a=e.result;if(n&&null==o){var u=i.getResponseHeader("x-server-response-signature");return u&&a&&(a.signature=u),void r(null,a)}var l=null==o?"UNKNOW_ERROR":o.type+"_"+o.subtype;r(new d({message:"api failed",code:l,details:{requestId:s,method:t}}))}},i.onerror=function(){r(new d({message:"api does not respond",code:"UNKNOW_ERROR",details:{requestId:s,method:t}}))},i.send("get"===e?null:JSON.stringify(n))},v=h.bind(null,"post"),g=h.bind(null,"get","getActiveAdblockInfo"),m=h.bind(null,"post","createAdblockOrder"),y=n(1176),b=function(){return b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},b.apply(this,arguments)},w={domain:"."+window.location.hostname.split(".").slice(-2).join("."),path:"/",samesite:"none",secure:!0},O="requestStorageAccess"in document&&"function"==typeof document.requestStorageAccess,A=function(e){return e.split(".").slice(-2).join(".")},P=(o=window.location.hostname,(s=(O?["id.rambler.ru","id.championat.com","idrambler.afisha.ru","rid.eda.ru","id.gazeta.ru","id.lenta.ru","id.moslenta.ru","id.secretmag.ru","id.motor.ru","id.passion.ru","id.wmj.ru","id.letidor.ru","id.ferra.ru","id.quto.ru","id.indicator.ru","id-loyalty.rambler-co.ru","id.eagleplatform.com"].filter((function(e){return A(e)===A(o)})):[])[0])?"https://"+s:"https://id.rambler.ru"),E=function(e){!function(e,t,n){var r=new XMLHttpRequest,i=P+"/api/v3"+e,o="rid"+f();t.id=o,r.open("post",i,!0),r.setRequestHeader("Content-Type","application/json"),r.withCredentials=!0,r.onreadystatechange=function(){var t,i;if(4===r.readyState&&200===r.status){var s=JSON.parse(r.responseText),a=s.success,u=s.error,l=s.result,c=null===(t=null==u?void 0:u.extra)||void 0===t?void 0:t.legacy_error;a&&null==c?n(null,l):n(new d(null!=c?{message:null===(i=c.strerror)||void 0===i?void 0:i.toLowerCase(),code:c.errno,details:{method:e,requestId:o}}:{message:"api failed",code:0,details:{method:e,requestId:o}}))}},r.onerror=function(){n(new d({message:"api does not respond",code:0,details:{method:e,requestId:o}}))},r.send(JSON.stringify(t))}("/session/getRsidx",{},(function(t,n){t?e(t):(function(e){if(e){var t=e;e instanceof Error&&(t={message:e.message},"code"in e&&(t.code=e.code,t.details=e.details));var n=e instanceof Error&&"need session"!==e.message?1/24/30:1/24/12;!function(e,t,n){try{y.set(e,JSON.stringify(t),n)}catch(e){}}("rchainid",t,b(b({},w),{expires:n}))}}(null!=t?t:null==n?void 0:n.result.rccid),e(t,n))}))};window.primeStorage=null!==(a=window.primeStorage)&&void 0!==a?a:{};var C,S,x,_=window.primeStorage;_.timing=null!==(C=_.timing)&&void 0!==C?C:[],_.viewId=null!==(S=_.viewId)&&void 0!==S?S:f(),_.serialId=null!==(x=_.serialId)&&void 0!==x?x:1;var k,I=window.crypto||window.msCrypto,j=(null==I?void 0:I.subtle)||(null==I?void 0:I.webkitSubtle),L=function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return t},T=new(function(){function e(){}return Object.defineProperty(e.prototype,"hasMsCrypto",{get:function(){return"msCrypto"in window},enumerable:!1,configurable:!0}),e.prototype.importKey=function(e,t,n,r,i){var o=j.importKey(e,t,n,r,i);return this.hasMsCrypto?new Promise((function(e,t){var n=o;n.addEventListener("complete",(function(t){e(t.target.result)})),n.addEventListener("error",(function(){t(new Error("importing a key failed"))}))})):o},e.prototype.verify=function(e,t,n,r){var i=j.verify(e,t,n,r);return this.hasMsCrypto?new Promise((function(e,t){var n=i;n.addEventListener("complete",(function(t){e(t.target.result)})),n.addEventListener("error",(function(){t(new Error("verification a key failed"))}))})):i},e}()),M=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("illegal base64url string")}return JSON.parse(decodeURIComponent(escape(window.atob(t))))},D=function(e){var t=e.split("."),n=t[0],r=t[1],i=t[2];return{header:M(n),payload:M(r),signature:i}},R={RS256:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}}},z="undefined"!=typeof window&&(null===(k=window.navigator)||void 0===k?void 0:k.userAgent)||"",F=/iPhone|iPad|iPod/i.test(z),W=/Android/i.test(z),N=function(){return N=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},N.apply(this,arguments)},B=l()[p],V=function(){},U=function(){function e(){}return e.prototype.push=function(e){void 0===e&&(e=V),e()},e.prototype.api=function(e,t,n,r){void 0===n&&(n=V),!1!==(null==r?void 0:r.needSessionId)?E((function(r,i){var o;if(null===(o=null==i?void 0:i.result)||void 0===o?void 0:o.token){var s={params:t,sessionId:i.result.token};v(e,s,n)}else n(r)})):v(e,{params:t},n)},e.prototype.getSubscription=function(e,t){var n,r;void 0===t&&(t=V);var i=Date.now(),o=null===(r=null===(n=window.performance)||void 0===n?void 0:n.timing)||void 0===r?void 0:r.navigationStart,s={start:o?i-o:0},a=!1,u=function(e,n){s.overall=Date.now()-i,function(e){clearTimeout(_.timeout),_.timing.push(e),_.timeout=window.setTimeout((function(){!function(e){if("complete"===document.readyState)e();else{var t=function(){e(),window.removeEventListener("load",t)};window.addEventListener("load",t)}}((function(){var e,t=_.timing;if(_.timing=[],Array.isArray(t)&&t.length>0)try{var n=encodeURIComponent(t.sort((function(e,t){return e.start-t.start})).map((function(e){return Object.keys(e).map((function(t){return t+"-"+e[t]})).join("_")})).join("!")),r=null!==(e=_.viewId)&&void 0!==e?e:"",i=_.serialId?_.serialId++:"";(new Image).src=p+"/phtimes?view_id="+r+"&serial="+i+"&data="+n}catch(e){}}))}),2e3)}(s),t(e,n)};if(!0===window.PRIME_SSR_STATUS)return s.ssr=0,void u(null,a);var l=function(e,t){var n;if(e)u(e,a);else if(null==t?void 0:t.signature){var r=Date.now();try{var i=D(t.signature),o=1e3*parseInt(i.payload.ctime,10);if(Date.now()-o>6e5)throw new Error("signature has expired");var l=B[null===(n=i.header)||void 0===n?void 0:n.kid];!function(e,t,n){if("string"==typeof e)if("string"==typeof t){var r=e.split("."),i=r[0],o=r[1],s=r[2];if("string"!=typeof s)return n(new Error("illegal token"));var a=D(e),u=R[a.header.alg];if(u){var l=L(window.atob(t));T.importKey("spki",l,u,!1,["verify"]).then((function(e){var t,n=i+"."+o;return T.verify(u,e,L((t=s,window.atob(t.replace(/-/g,"+").replace(/_/g,"/").replace(/\n/g,"")))),L(n))})).then((function(e){e?n(null,a):n(new Error("invalid signature"))}),(function(e){n(e)}))}else n(new Error("algorithm not found"))}else n(new Error("secret must be a string"));else n(new Error("token must be a string"))}(null==t?void 0:t.signature,l,(function(e,n){a=!!t.adblockInfoList&&t.adblockInfoList.length>0&&i.signature===(null==n?void 0:n.signature),s.verify=Date.now()-r,u(e,a)}))}catch(e){s.verify=Date.now()-r,u(e,a)}}else u(new Error("empty signature"),a)},c=_.cache;if((null==c?void 0:c.referrer)===e.referrer&&Date.now()-(null==c?void 0:c.currentTime)<3e5)return s.cache=0,void l(null,c);var d=Date.now();Array.isArray(_.queue)?_.queue.push((function(e,t){s.wait=Date.now()-d,l(e,t)})):(_.queue=[l],E((function(t,n){var r;if(s.id=Date.now()-d,!(null===(r=null==n?void 0:n.result)||void 0===r?void 0:r.token))return Array.isArray(_.queue)&&_.queue.forEach((function(e){e(t,void 0)})),void delete _.queue;var i={params:e,sessionId:n.result.token},o=Date.now();g(i,(function(t,n){s.prime=Date.now()-o,n&&(n.currentTime=Date.now(),n.referrer=e.referrer,_.cache=n),Array.isArray(_.queue)&&_.queue.forEach((function(e){e(t,n)})),delete _.queue}))})))},e.prototype.createSubscriptionOrder=function(e,t){void 0===t&&(t=V);var n=e.code,r=e.project,i=e.cpsEmail,o=e.cpsPhone,s=e.useForSubscription,a=void 0!==s&&s,u=e.trial,l=void 0===u||u,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["code","project","cpsEmail","cpsPhone","useForSubscription","trial"]);n?i?E((function(e,s){var u;if(null===(u=null==s?void 0:s.result)||void 0===u?void 0:u.token){var f={params:{code:n,useForSubscription:a,trial:l,paymentCpsEmail:i},sessionId:s.result.token};m(f,(function(e,s){if(e)t(e);else{var a=s.shopId,u=s.scId,l=s.orderNumber,f=s.requestSign,p=s.orderAmount,h=s.discountPrice,v=s.tax,g=s.publicName,m=s.publicDescription,y=s.publicPicture,b=s.useForSubscription,w=["AC","ST"];parseFloat(p)&&!b||w.pop();var O=N({lang:"ru",tabs:w.map((function(e){return{tab:e}}))},c),A={order:{shopId:a,scId:u,orderNumber:l,requestSign:f,cpsEmail:i,orderAmount:p,productName:n,addData:{project:r}},products:[{offer:{name:g,description:m,picture:y,price:h,tax:v,taxValue:0},count:1,total:{price:h,currencyId:"RUB"}}]};o&&(A.order.cpsPhone=o),b&&(A.order.paymentAddParams={rebillingOn:1}),(F||W)&&(A.order.paymentAddParams=N(N({},A.order.paymentAddParams),{jsonParams:{app2app:!0,"app.osType":F?"ios":"android","app.deepLink":encodeURIComponent(window.location.href)}})),function(e,t,n){window.RamblerPayment=window.RamblerPayment||[],window.RamblerPayment.push((function(){var r=window.RamblerPayment.buildWidget("PaymentPopup",e);void 0!==r&&r.then((function(e){return e.show(),e.initializeOrder(t).then((function(){var t,r=null;e.on("close",(function(){e.destroy(),n(r,t)})),e.on("fail",(function(){r=new Error("payment failed")})),e.on("success",(function(e){t=e}))}))})).catch((function(e){n(e)}))})),function(e,t){var n=document.createElement("script");n.src="https://payment.rambler.ru/widget/sdk.js",n.onload=function(){t(null),document.body&&document.body.removeChild(n)},n.onerror=function(){t(new d({message:"script does not loaded"}))},document.body&&document.body.appendChild(n)}(0,(function(e){e&&n(e)}))}(O,A,(function(e,n){n?t(null,{orderNumber:l}):t(e)}))}}))}else t(e)})):t(new Error("missing `cpsEmail` in params")):t(new Error("missing `code` of product in params"))},e}(),q=new U,G=t;for(var H in r)G[H]=r[H];r.__esModule&&Object.defineProperty(G,"__esModule",{value:!0})}()},4175:function(e,t,n){"use strict";var r=n(7537),i=n.n(r),o=n(3645),s=n.n(o)()(i());s.push([e.id,".ZLbuG9RN18ysi3usOLTq{overflow:hidden;clear:both}.ZLbuG9RN18ysi3usOLTq.Sqohf86udG01armwRMP3,.ZLbuG9RN18ysi3usOLTq.fzI6gjjv3V8ko4R6afNs .t9UgUsc6H6WozGSOi2X_{height:0;visibility:hidden}.ZLbuG9RN18ysi3usOLTq *{box-sizing:border-box}.jGFYfNbnq8_SbZyrQHvx{display:none}.jGFYfNbnq8_SbZyrQHvx.SZ_BTP4q6eaGT8JkRlXn{display:block}.t9UgUsc6H6WozGSOi2X_{overflow:hidden}.t9UgUsc6H6WozGSOi2X_ iframe{display:block;width:1px;max-width:100%;min-width:100%}.AXpoOfAhaxXa79BgkLLU{position:static}","",{version:3,sources:["webpack://./node_modules/widgetly/lib/layouts/EmbedLayout.css"],names:[],mappings:"AAAA,sBACE,eAAA,CACA,UAAA,CACA,4GAEE,QAAA,CACA,iBAAA,CAEF,wBACE,qBAAA,CAIJ,sBACE,YAAA,CACA,2CACE,aAAA,CAIJ,sBACE,eAAA,CACA,6BAIE,aAAA,CACA,SAAA,CACA,cAAA,CACA,cAAA,CAIJ,sBACE,eAAA",sourcesContent:[".EmbedLayout {\n  overflow: hidden;\n  clear: both;\n  &.is-hidden,\n  &.is-loading &__content {\n    height: 0;\n    visibility: hidden;\n  }\n  & * {\n    box-sizing: border-box;\n  }\n}\n\n.EmbedLayout__loader {\n  display: none;\n  &.is-shown {\n    display: block;\n  }\n}\n\n.EmbedLayout__content {\n  overflow: hidden;\n  & iframe {\n    /*\n    http://stackoverflow.com/questions/23083462/how-to-get-an-iframe-to-be-responsive-in-ios-safari\n    */\n    display: block;\n    width: 1px;\n    max-width: 100%;\n    min-width: 100%;\n  }\n}\n\n.EmbedLayout__wrapper {\n  position: static;\n}\n"],sourceRoot:""}]),s.locals={EmbedLayout:"ZLbuG9RN18ysi3usOLTq","is-hidden":"Sqohf86udG01armwRMP3","is-loading":"fzI6gjjv3V8ko4R6afNs",EmbedLayout__content:"t9UgUsc6H6WozGSOi2X_",EmbedLayout__loader:"jGFYfNbnq8_SbZyrQHvx","is-shown":"SZ_BTP4q6eaGT8JkRlXn",EmbedLayout__wrapper:"AXpoOfAhaxXa79BgkLLU"},t.Z=s},967:function(e,t,n){"use strict";var r=n(7537),i=n.n(r),o=n(3645),s=n.n(o)()(i());s.push([e.id,".SkZhwzHsAQ0rhDAPZu3l{position:fixed;border-radius:50%;background:#fff;transition:fill .2s,opacity .2s,color .2s;fill:#000;cursor:pointer;z-index:16777271}.h0e6YzLXvsgn2BFFMNDP{opacity:0}.h0e6YzLXvsgn2BFFMNDP:hover,iframe:hover+.h0e6YzLXvsgn2BFFMNDP{opacity:1}.sL6BcSsYwl0ZVJc4beDF{opacity:0 !important;pointer-events:none}","",{version:3,sources:["webpack://./src/widgets/player/styles.scss"],names:[],mappings:"AAAA,sBACE,cAAA,CACA,iBAAA,CACA,eAAA,CACA,yCAAA,CACA,SAAA,CACA,cAAA,CACA,gBAAA,CAGF,sBACE,SAAA,CAEA,+DAEE,SAAA,CAIJ,sBACE,oBAAA,CACA,mBAAA",sourcesContent:[".close {\n  position: fixed;\n  border-radius: 50%;\n  background: #fff;\n  transition: fill 0.2s, opacity 0.2s, color 0.2s;\n  fill: black;\n  cursor: pointer;\n  z-index: 16777271;\n}\n\n.hoverable {\n  opacity: 0;\n\n  &:hover,\n  iframe:hover + & {\n    opacity: 1;\n  }\n}\n\n.hidden {\n  opacity: 0 !important;\n  pointer-events: none;\n}\n"],sourceRoot:""}]),s.locals={close:"SkZhwzHsAQ0rhDAPZu3l",hoverable:"h0e6YzLXvsgn2BFFMNDP",hidden:"sL6BcSsYwl0ZVJc4beDF"},t.Z=s},3645:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,o){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var a=0;a<this.length;a++){var u=this[a][0];null!=u&&(s[u]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);r&&s[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),t.push(c))}},t}},7537:function(e){"use strict";e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),o="/*# ".concat(i," */");return[t].concat([o]).join("\n")}return[t].join("\n")}},5093:function(e){var t,n,r,i,o,s;e.exports=(n=[],i=(r=document).documentElement.doScroll,o="DOMContentLoaded",(s=(i?/^loaded|^c/:/^loaded|^i|^c/).test(r.readyState))||r.addEventListener(o,t=function(){for(r.removeEventListener(o,t),s=1;t=n.shift();)t()}),function(e){s?setTimeout(e,0):n.push(e)})},3517:function(e,t,n){"use strict";var r=n(4290);function i(e){for(var t=e.split("."),n=[],r=0;r<t.length;r++){for(var i=t[r];"\\"===i[i.length-1]&&void 0!==t[r+1];)i=i.slice(0,-1)+".",i+=t[++r];n.push(i)}return n}e.exports.get=function(e,t){if(!r(e)||"string"!=typeof t)return e;for(var n=i(t),o=0;o<n.length;o++){var s=Object.getOwnPropertyDescriptor(e,n[o])||Object.getOwnPropertyDescriptor(Object.prototype,n[o]);if(s&&!s.enumerable)return;if(null==(e=e[n[o]])){if(o!==n.length-1)return;break}}return e},e.exports.set=function(e,t,n){if(r(e)&&"string"==typeof t)for(var o=i(t),s=0;s<o.length;s++){var a=o[s];r(e[a])||(e[a]={}),s===o.length-1&&(e[a]=n),e=e[a]}},e.exports.delete=function(e,t){if(r(e)&&"string"==typeof t)for(var n=i(t),o=0;o<n.length;o++){var s=n[o];if(o===n.length-1)return void delete e[s];e=e[s]}},e.exports.has=function(e,t){if(!r(e)||"string"!=typeof t)return!1;for(var n=i(t),o=0;o<n.length;o++)if(void 0===(e=e[n[o]]))return!1;return!0}},7187:function(e){"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}v(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&v(e,"error",t,{once:!0})}(e,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var i,o,s,l;if(a(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=u(e))>0&&s.length>i&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,l=c,console&&console.warn&&console.warn(l)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=c.bind(r);return i.listener=n,r.wrapFn=i,i}function f(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):h(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function v(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=o[e];if(void 0===u)return!1;if("function"==typeof u)r(u,this,t);else{var l=u.length,c=h(u,l);for(n=0;n<l;++n)r(c[n],this,t)}return!0},o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,d(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,s;if(a(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return f(this,e,!0)},o.prototype.rawListeners=function(e){return f(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},4290:function(e){"use strict";e.exports=function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}},1176:function(e){"use strict";e.exports.get=function(e){if(document.cookie&&document.cookie.length){for(var t,n=document.cookie.split(";"),r={},i=0,o=n.length;i<o;i++)r[(t=n[i].replace(/^(\s|\u00A0)+/g,"").split("="))[0]]=decodeURIComponent(t[1]);return e?r[e]:r}},e.exports.set=function(e,t,n){if(void 0!==e&&void 0!==t){var r=(n=n||{}).expires||{};"number"==typeof n.expires&&(r=new Date).setTime(r.getTime()+24*n.expires*60*60*1e3);var i=e+"="+encodeURIComponent(t);return i+=r.toUTCString?"; expires="+r.toUTCString():"",i+=n.path?"; path="+n.path:"",i+=n.domain?"; domain="+n.domain:"",i+=n.samesite?"; samesite="+n.samesite:"",i+=n.secure?"; secure":"",document.cookie=i,i}},e.exports.remove=function(t,n){return(n=n||{}).expires=-1,e.exports.set(t,"",n)}},1296:function(e,t,n){var r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,l="object"==typeof self&&self&&self.Object===Object&&self,c=u||l||Function("return this")(),d=Object.prototype.toString,f=Math.max,p=Math.min,h=function(){return c.Date.now()};function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(v(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=v(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=o.test(e);return n||s.test(e)?a(e.slice(2),n?2:8):i.test(e)?NaN:+e}e.exports=function(e,t,n){var r,i,o,s,a,u,l=0,c=!1,d=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=r,o=i;return r=i=void 0,l=t,s=e.apply(o,n)}function b(e){var n=e-u;return void 0===u||n>=t||n<0||d&&e-l>=o}function w(){var e=h();if(b(e))return O(e);a=setTimeout(w,function(e){var n=t-(e-u);return d?p(n,o-(e-l)):n}(e))}function O(e){return a=void 0,m&&r?y(e):(r=i=void 0,s)}function A(){var e=h(),n=b(e);if(r=arguments,i=this,u=e,n){if(void 0===a)return function(e){return l=e,a=setTimeout(w,t),c?y(e):s}(u);if(d)return a=setTimeout(w,t),y(u)}return void 0===a&&(a=setTimeout(w,t)),s}return t=g(t)||0,v(n)&&(c=!!n.leading,o=(d="maxWait"in n)?f(g(n.maxWait)||0,t):o,m="trailing"in n?!!n.trailing:m),A.cancel=function(){void 0!==a&&clearTimeout(a),l=0,r=u=i=a=void 0},A.flush=function(){return void 0===a?s:O(h())},A}},7142:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(6099)),i=o(n(7187));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),s=new i.default;return s.setMaxListeners(0),o.connectedWindow=window.opener||window.parent,o.consumer=o.facade=Object.assign(s,r),o.sendMessage({type:"initialize",args:[o.consumer],waitResponse:!0}).then((function(e){var t=e.response.result,n=e.id;o.provider=t[0],o.sendMessage({type:"response",responseToId:n}),o.emit("ready",o.provider)})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(r.default);t.default=s},3262:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(6099)),o=s(n(7187));function s(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function t(e,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i||(i=r,r=null);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r)),a=new o.default;return a.setMaxListeners(0),s.provider=s.facade=Object.assign(a,i),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"handleInitialize",value:function(e,t){var n=this,r=e.id,i=e.args;this.connectedWindow||(this.connectedWindow=t);var o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(i,1)[0];this.consumer=o,this.sendMessage({type:"response",response:{result:[this.provider]},responseToId:r,waitResponse:!0}).then((function(){n.emit("ready",o)}))}}]),t}(i.default);t.default=a},6099:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(3517),u=d(n(7187)),l=d(n(7385)),c=n(9153);function d(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.expectedOrigin=n,i.connectedWindow=r,i.functions={},i.contexts={},i.unpackedFunctions={},i.i=0,i.onMessage=i.onMessage.bind(i),i.subscribeEvents(),i.transportId=i.prepareTransportId(e),i.setMaxListeners(1/0),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"destroy",value:function(){this.unsubscribeEvents(),this.functions={},this.contexts={},this.unpackedFunctions={}}},{key:"generateId",value:function(){return++this.i}},{key:"subscribeEvents",value:function(){window.addEventListener("message",this.onMessage,!0)}},{key:"unsubscribeEvents",value:function(){window.removeEventListener("message",this.onMessage,!0)}},{key:"prepareTransportId",value:function(e){return"MAGIC_TRANSPORT:"+e}},{key:"pack",value:function(e){var t=this,n={},r=[];return(0,l.default)(e,(function(e,i,s,a,u){if(-1!==r.indexOf(e))return!1;if("function"==typeof e){var l=0===u?window:s,c="__"+t.transportId+":functionId",d=e[c];d||(d=t.generateId(),Object.defineProperty(e,c,{get:function(){return d}})),t.functions[d]||(t.functions[d]=function(t,n){return new Promise((function(r,i){try{Promise.resolve(e.apply(t,n)).then(r,i)}catch(e){i(e)}}))});var f="__"+t.transportId+":contextId",p=l[f];p||(p=t.generateId(),Object.defineProperty(l,f,{get:function(){return p}})),t.contexts[p]||(t.contexts[p]=l),n[a]=[d,p]}else"object"===(void 0===e?"undefined":o(e))&&r.push(e)})),n}},{key:"unpack",value:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(0,a.set)(e,n,this.unpackFunction(t[n]))}},{key:"unpackFunction",value:function(e){var t=this,n=i(e,2),r=n[0]+"|"+n[1];return this.unpackedFunctions[r]||(this.unpackedFunctions[r]=function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.sendMessage({args:r,functionToInvoke:e,type:"invoke",waitResponse:!0}).then((function(e){return e.response.result}))}),this.unpackedFunctions[r]}},{key:"sendMessage",value:function(e){var t,n,i,o,s=e.type,a=e.args,u=void 0===a?[]:a,l=e.response,d=void 0===l?{}:l,f=e.responseToId,p=e.functionToInvoke,h=e.waitResponse,v=this.generateId(),g=(n={},i=this.transportId,o={id:v,type:s,args:u,responseToId:f,functionToInvoke:p,response:d,functions:r({},this.pack(u),this.pack(d)),ts:Date.now()},i in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n),m=[(0,c.stringify)(g)],y=this.expectedOrigin&&"*"!==this.expectedOrigin?this.expectedOrigin:"*";if(y&&m.push(y),(t=this.connectedWindow).postMessage.apply(t,m),h)return this.waitResponse(v)}},{key:"waitResponse",value:function(e){var t=this;return new Promise((function(n,r){t.once("response:"+e,(function(e){var t=e.response.error;t?r(t):n(e)}))}))}},{key:"checkOrigin",value:function(e){return!this.expectedOrigin||"*"===this.expectedOrigin||e===this.expectedOrigin}},{key:"onMessage",value:function(e){var t=e.data;if("string"==typeof t&&this.checkOrigin(e.origin)){try{t=(0,c.parse)(t)}catch(e){t={}}t[this.transportId]&&(this.connectedOrigin||(this.connectedOrigin=e.origin),this.handleMessage(t[this.transportId],e.source))}}},{key:"handleMessage",value:function(e,t){var n=e.type,r=e.args,i=e.functions,o=e.response;switch(n){case"invoke":this.unpack(r,i),this.handleInvoke(e);break;case"response":this.unpack(o,i),this.handleResponse(e);break;case"initialize":this.unpack(r,i),this.handleInitialize&&this.handleInitialize(e,t)}}},{key:"handleResponse",value:function(e){var t=e.responseToId;this.emit("response:"+t,e)}},{key:"handleInvoke",value:function(e){var t=this,n=e.functionToInvoke,r=e.args,o=e.id,s=i(n,2),a=s[0],u=s[1],l=this.functions[a],c=this.contexts[u];new Promise((function(e,t){try{Promise.resolve(l(c,r)).then(e,(function(e){throw t(e),e}))}catch(e){throw t(e),e}})).then((function(e){return t.sendMessage({type:"response",response:{result:e},responseToId:o})}),(function(e){return t.sendMessage({type:"response",response:{error:e},responseToId:o})}))}}]),t}(u.default);t.default=f},2113:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3262);Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return o(r).default}});var i=n(7142);function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"Consumer",{enumerable:!0,get:function(){return o(i).default}})},9153:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(t instanceof Error){var n={};return Object.getOwnPropertyNames(t).forEach((function(e){n[e]=t[e]})),n}return t};t.parse=JSON.parse.bind(JSON),t.stringify=function(e){return JSON.stringify(e,n)}},7385:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function e(t,r,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i=i||"",Array.isArray(t)?function(t,n,r,i){var o="";t.forEach((function(t,s,a){o=r?r+"."+s:s.toString(),!1!==n.call(a,t,s,a,o,i)&&e(a[s],n,o,i+1)}))}(t,r,i,o):!t||"object"!==(void 0===t?"undefined":n(t))||t instanceof Error||function(t,n,r,i){for(var o in t){var s=r?r+"."+o:o;!1!==n.call(t,t[o],o,t,s,i)&&e(t[o],n,s,i+1)}}(t,r,i,o)}},1309:function(e,t,n){var r=n(479),i=n(3925);e.exports=r,e.exports.murmur3=r,e.exports.murmur2=i},3925:function(e){e.exports=function(e,t){for(var n,r=e.length,i=t^r,o=0;r>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&e.charCodeAt(o+2))<<16;case 2:i^=(255&e.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}},479:function(e){e.exports=function(e,t){var n,r,i,o,s,a,u,l;for(n=3&e.length,r=e.length-n,i=t,s=3432918353,a=461845907,l=0;l<r;)u=255&e.charCodeAt(l)|(255&e.charCodeAt(++l))<<8|(255&e.charCodeAt(++l))<<16|(255&e.charCodeAt(++l))<<24,++l,i=27492+(65535&(o=5*(65535&(i=(i^=u=(65535&(u=(u=(65535&u)*s+(((u>>>16)*s&65535)<<16)&4294967295)<<15|u>>>17))*a+(((u>>>16)*a&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(u=0,n){case 3:u^=(255&e.charCodeAt(l+2))<<16;case 2:u^=(255&e.charCodeAt(l+1))<<8;case 1:i^=u=(65535&(u=(u=(65535&(u^=255&e.charCodeAt(l)))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<15|u>>>17))*a+(((u>>>16)*a&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}},4737:function(e){"use strict";e.exports=function(e){var t,n=null,r=function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var s;t=i,null===n&&(n=requestAnimationFrame((s=this,function(){n=null,e.apply(s,t)})))};return r.cancel=function(){cancelAnimationFrame(n),n=null},r}},1513:function(e,t,n){"use strict";n.r(t);var r=n(3379),i=n.n(r),o=n(7795),s=n.n(o),a=n(569),u=n.n(a),l=n(3565),c=n.n(l),d=n(9216),f=n.n(d),p=n(4589),h=n.n(p),v=n(4175),g={};g.styleTagTransform=h(),g.setAttributes=c(),g.insert=u().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=f(),i()(v.Z,g),t.default=v.Z&&v.Z.locals?v.Z.locals:void 0},3379:function(e){"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var o={},s=[],a=0;a<e.length;a++){var u=e[a],l=r.base?u[0]+r.base:u[0],c=o[l]||0,d="".concat(l," ").concat(c);o[l]=c+1;var f=n(d),p={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==f)t[f].references++,t[f].updater(p);else{var h=i(p,r);r.byIndex=a,t.splice(a,0,{identifier:d,updater:h,references:1})}s.push(d)}return s}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var o=r(e=e||[],i=i||{});return function(e){e=e||[];for(var s=0;s<o.length;s++){var a=n(o[s]);t[a].references--}for(var u=r(e,i),l=0;l<o.length;l++){var c=n(o[l]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}o=u}}},569:function(e){"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},9216:function(e){"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:function(e,t,n){"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:function(e){"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:function(e){"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},4860:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=(o=n(2954))&&o.__esModule?o:{default:o},u=n(5972),l=n(1708),c=n(3850);function d(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var f=(0,c.mixin)(a.default.prototype)((i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a.default.call(this),this.element=t,this.reduceViewportChange=n,this._ready=!1,this.emit("ready"),(0,u.onRemoveFromDOM)(this.element,this.destroy)}return s(e,[{key:"getElement",value:function(){return this.element}},{key:"appendChild",value:function(e){this.element.appendChild(e)}},{key:"destroy",value:function(){this.emit("destroy"),this.removeAllListeners(),this.viewportManager&&this.viewportManager.destroy()}},{key:"updateViewport",value:function(){this.emit("viewportChange")}},{key:"_subscribeScroll",value:function(){this.viewportManager||(this.viewportManager=(0,u.createViewportManager)(this.element,this._onScroll,this.reduceViewportChange))}},{key:"_onScroll",value:function(e){this.emit("viewportChange",e)}},{key:"whenEnterViewportFromTop",value:function(e){var t=this,n=e.lazy,r=void 0!==n&&n,i=e.offset,o={offset:void 0===i?300:i,compliantScrollDown:!0};return r?this._ready||((0,l.isVisible)(this.element,o)?this._ready=Promise.resolve():this._ready=new Promise((function(e){t._subscribeScroll(),t.on("viewportChange",(function n(){(0,l.isVisible)(t.element,o)&&(t.removeListener("viewportChange",n),e())}))}))):this._ready=Promise.resolve(),this._ready}}]),e}(),d(i.prototype,"destroy",[c.autobind,c.once],Object.getOwnPropertyDescriptor(i.prototype,"destroy"),i.prototype),d(i.prototype,"_subscribeScroll",[c.once],Object.getOwnPropertyDescriptor(i.prototype,"_subscribeScroll"),i.prototype),d(i.prototype,"_onScroll",[c.autobind],Object.getOwnPropertyDescriptor(i.prototype,"_onScroll"),i.prototype),r=i))||r;t.default=f},1569:function(e,t,n){"use strict";t.Z=void 0;var r,i,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=h(n(5093)),u=h(n(2884)),l=n(3850),c=n(5972),d=h(n(2954)),f=h(n(4860)),p=h(n(5747));function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function g(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var m=(0,l.mixin)(d.default.prototype)((i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var r in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.counterWidgetId=0,this.widgets={},this.widgetInstances={},d.default.call(this),this.options=t,this.prefix=t.prefix,this.config=t.config||{},this.id=e.provideId(),this.properties={},n)if(n.hasOwnProperty(r)){var i=n[r];void 0===this[r]&&(this[r]=i),this.properties[r]="function"==typeof i?i.bind(this):i}this.options.initialize&&this.options.initialize.call(this),c.mutationEvents.on("mutation",this.initializeDOMElements),(0,a.default)(this.initializeDOMElements)}return s(e,null,[{key:"provideId",value:function(){return(0,u.default)()}}]),s(e,[{key:"destroy",value:function(){c.mutationEvents.removeListener("mutation",this.initializeDOMElements)}},{key:"provideWidgetId",value:function(){return(this.prefix?this.prefix+"_":"")+this.id+"_"+ ++this.counterWidgetId}},{key:"defineWidget",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.widgets[e.name])throw new Error("Widget with name '"+e.name+"' already exists");this.widgets[e.name]={config:e,properties:t}}},{key:"buildWidget",value:function(e,t,n){var r=this;if(!this.widgets[e])throw new Error("Widget '"+e+"' does not exists");n||"string"==typeof t||t instanceof HTMLElement||(n=t,t=null),"string"==typeof t&&(t=document.querySelector(t));var i=this.widgets[e],o=i.config,s=i.properties,a=this.provideWidgetId(),u=this.widgetInstances[a]=new p.default(this,a,o,s,n);return u.once("destroy",(function(){return delete r.widgetInstances[a]})),u.container=t?new f.default(t,o.reduceViewportChange):null,t&&(t.rcWidget=u),u.initialize()}},{key:"updateViewport",value:function(){var e=this.widgetInstances;for(var t in e)e.hasOwnProperty(t)&&e[t].updateViewport()}},{key:"initializeDOMElements",value:function(){var e=this,t=this.prefix?this.prefix+"-":"";[].slice.call(document.querySelectorAll("[data-"+t+"widget]:not([data-"+t+"inited])")).forEach((function(n){if(!n.hasAttribute("data-"+t+"inited")){var r=v(n.dataset,[]);if(e.prefix){var i=e.prefix.length;for(var o in r)r.hasOwnProperty(o)&&(r[o.slice(i,i+1).toLowerCase()+o.slice(i+1)]=r[o],delete r[o])}var s=r.widget,a=v(r,["widget"]);n.setAttribute("data-"+t+"inited",!0),e.buildWidget(s,n,a)}}))}},{key:"externalize",value:function(){return o({buildWidget:this.buildWidget.bind(this),initializeDOMElements:this.initializeDOMElements.bind(this)},this.properties,this.externalizeEmitter())}},{key:"externalizeAsProvider",value:function(){var e=this.options.externalizeAsProvider;return o({buildWidget:this.buildWidget.bind(this),initializeDOMElements:this.initializeDOMElements.bind(this)},this.externalizeEmitter(),e?e.call(this):this.properties)}}]),e}(),g(i.prototype,"updateViewport",[l.autobind],Object.getOwnPropertyDescriptor(i.prototype,"updateViewport"),i.prototype),g(i.prototype,"initializeDOMElements",[l.autobind],Object.getOwnPropertyDescriptor(i.prototype,"initializeDOMElements"),i.prototype),r=i))||r;t.Z=m},5747:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=d(n(7791)),u=d(n(2954)),l=n(5972),c=n(3850);function d(e){return e&&e.__esModule?e:{default:e}}var f,p,h,v,g,m,y=(0,c.mixin)(u.default.prototype)((i=function(){function e(t,n,r,i,o){for(var s in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params={},this.id=null,this.mediator=null,u.default.call(this),this.mediator=t,this.id=n,this.config=r,this.name=r.name,this.properties={},this.params=o,this._destroyed=!1,r.externalize&&(this.externalize=r.externalize.bind(this)),i)if(i.hasOwnProperty(s)){var a=i[s];this.properties[s]="function"==typeof a?a.bind(this):a,void 0===this[s]&&(this[s]=this.properties[s])}}return s(e,[{key:"initialize",value:function(){var e=this,t=this.config.initialize;return Promise.resolve(t.call(this)).then((function(){return e._subscribeEvents(),e.externalize()}))}},{key:"updateViewport",value:function(){this.container&&this.container.updateViewport(),this.iframe&&this.iframe.updateViewport()}},{key:"destroy",value:function(){this._unsubscribeEvents(),this.layout&&this.layout.destroy(),this.iframe&&this.iframe.destroy(),this.config.destroy&&this.config.destroy.call(this),this.emit("destroy"),this.removeAllListeners()}},{key:"createIFrame",value:function(e){return new a.default(e,this,this.id,this.config.reduceViewportChange)}},{key:"externalize",value:function(){return o({},this.properties,this.iframe?this.iframe.consumer.externalizedProps:{},this.externalizeEmitter(),{destroy:this.destroy.bind(this),params:this.params})}},{key:"externalizeAsProvider",value:function(){var e,t=this.config.externalizeAsProvider;return o({url:location.href,mediator:this.mediator.externalizeAsProvider(),destroy:this.destroy.bind(this),params:this.params,subscribeVisibleAreaChange:this._subscribeVisibleAreaChange.bind(this),getVisibleArea:this._getIFrameVisibleArea.bind(this),scrollTo:this._iFrameScrollTo.bind(this),resize:(e=this.iframe).resize.bind(e)},this.externalizeEmitter({withEmit:!0}),t?t.call(this):this.properties)}},{key:"whenContainerInViewport",value:function(){var e;return this.container?(e=this.container).whenEnterViewportFromTop.apply(e,arguments):Promise.resolve()}},{key:"_iFrameScrollTo",value:function(e,t){var n=this;return(0,l.scrollByElementTo)(this.iframe.getElement(),e,t).then((function(){n.iframe.updateViewport()}))}},{key:"_subscribeVisibleAreaChange",value:function(e,t){if(this.iframe)return this.iframe.subscribeVisibleAreaChange(e,t)}},{key:"_subscribeEvents",value:function(){this.iframe&&this.iframe.on("destroy",this.destroy),this.layout&&this.layout.on("destroy",this.destroy),this.container&&this.container.on("destroy",this.destroy)}},{key:"_unsubscribeEvents",value:function(){this.iframe&&this.iframe.removeListener("destroy",this.destroy),this.layout&&this.layout.removeListener("destroy",this.destroy),this.container&&this.container.removeListener("destroy",this.destroy)}},{key:"_getIFrameVisibleArea",value:function(){return this.iframe.getVisibleArea()}}]),e}(),f=i.prototype,p="destroy",h=[c.autobind,c.once],v=Object.getOwnPropertyDescriptor(i.prototype,"destroy"),g=i.prototype,m={},Object.keys(v).forEach((function(e){m[e]=v[e]})),m.enumerable=!!m.enumerable,m.configurable=!!m.configurable,("value"in m||m.initializer)&&(m.writable=!0),m=h.slice().reverse().reduce((function(e,t){return t(f,p,e)||e}),m),g&&void 0!==m.initializer&&(m.value=m.initializer?m.initializer.call(g):void 0,m.initializer=void 0),void 0===m.initializer&&(Object.defineProperty(f,p,m),m=null),r=i))||r;t.default=y},7791:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=p(n(8924)),u=n(2113),l=n(5972),c=n(3850),d=n(1708),f=p(n(2954));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var g=function(){function e(t,n){v(this,e),this.container=t,this.transport=n}return s(e,[{key:"resize",value:function(){var e=this;return this.transport.consumer.getSize().then((function(t){e.setSize(t)}))}},{key:"setSize",value:function(e){var t=e.height;this.container.style.height=t+"px"}}]),e}(),m=(0,c.mixin)(f.default.prototype)((i=function(e){function t(e,n,r,i){v(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));f.default.call(o),o.id=r,o.url=e+(-1===e.indexOf("#")?"#":"&")+"widgetId="+o.id,o.widget=n,o.reduceViewportChange=i,o._destroyed=!1;var s=new URL(e),a=s.protocol,u=s.host;return o.consumerOrigin=u?a+"//"+u:location.origin,o.createElement(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"createElement",value:function(){this.element=document.createElement("iframe"),this.element.style.display="block !important",this.element.setAttribute("frameborder","no"),this.element.setAttribute("width","100%"),this.element.setAttribute("scrolling","no"),this.element.name=this.id,this.element.id=this.id,this.element.src=this.url,(0,l.onRemoveFromDOM)(this.element,this.destroy)}},{key:"initialize",value:function(){var e=this;return this.transport=new u.Provider(this.id,this.consumerOrigin,o({},this.widget.externalizeAsProvider(),{resize:function(){return e.resizer.resize()},setSize:function(t){return e.resizer.setSize(t)}})),this.resizer=new g(this.element,this.transport),this.provider=this.transport.provider,new Promise((function(t){return e.transport.once("ready",t)})).then((function(t){e.consumer=t})).then((function(){return e.consumer.initialize()})).then((function(){return e.resizer.resize()})).then((function(){return e.consumer.watchSize(),e.consumer}))}},{key:"subscribeVisibleAreaChange",value:function(e){var t=this;this._subscribeViewportChange();var n=function(){e(t.getVisibleArea())};return this.on("viewportChange",n),function(){t.removeListener("viewportChange",n)}}},{key:"getVisibleArea",value:function(){return(0,d.getVisibleArea)(this.element)}},{key:"_subscribeViewportChange",value:function(){this.viewportManager||(this.viewportManager=(0,l.createViewportManager)(this.element,this.updateViewport,this.reduceViewportChange))}},{key:"updateViewport",value:function(){this.emit("viewportChange")}},{key:"resize",value:function(){this.resizer.resize()}},{key:"destroy",value:function(){(0,l.removeFromDOM)(this.element),this.emit("destroy"),this.transport.destroy(),this.removeAllListeners(),this.viewportManager&&this.viewportManager.destroy()}}]),t}(a.default),h(i.prototype,"_subscribeViewportChange",[c.once],Object.getOwnPropertyDescriptor(i.prototype,"_subscribeViewportChange"),i.prototype),h(i.prototype,"updateViewport",[c.autobind],Object.getOwnPropertyDescriptor(i.prototype,"updateViewport"),i.prototype),h(i.prototype,"destroy",[c.autobind,c.once],Object.getOwnPropertyDescriptor(i.prototype,"destroy"),i.prototype),r=i))||r;t.default=m},3211:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(3850),a=c(n(2954)),u=n(5972),l=c(n(2884));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var f=(0,s.mixin)(a.default.prototype)((i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a.default.call(this),this.id=(0,l.default)(),this.element=document.createElement("div"),this.config=t,(0,u.onRemoveFromDOM)(this.element,this.destroy)}return o(e,[{key:"getElement",value:function(){return this.element}},{key:"showLoading",value:function(){}},{key:"hideLoading",value:function(){}},{key:"setContent",value:function(){}},{key:"addToDOM",value:function(){}},{key:"hide",value:function(){}},{key:"show",value:function(){}},{key:"destroy",value:function(){}}]),e}(),d(i.prototype,"showLoading",[s.virtual],Object.getOwnPropertyDescriptor(i.prototype,"showLoading"),i.prototype),d(i.prototype,"hideLoading",[s.virtual],Object.getOwnPropertyDescriptor(i.prototype,"hideLoading"),i.prototype),d(i.prototype,"setContent",[s.virtual],Object.getOwnPropertyDescriptor(i.prototype,"setContent"),i.prototype),d(i.prototype,"addToDOM",[s.virtual],Object.getOwnPropertyDescriptor(i.prototype,"addToDOM"),i.prototype),d(i.prototype,"hide",[s.virtual],Object.getOwnPropertyDescriptor(i.prototype,"hide"),i.prototype),d(i.prototype,"show",[s.virtual],Object.getOwnPropertyDescriptor(i.prototype,"show"),i.prototype),d(i.prototype,"destroy",[s.virtual],Object.getOwnPropertyDescriptor(i.prototype,"destroy"),i.prototype),r=i))||r;t.default=f},8924:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"getElement",value:function(){return this.element}}]),e}();t.default=r},1819:function(e,t,n){"use strict";t.Z=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=l(n(3211)),s=l(n(1513)),a=n(5972),u=n(3850);function l(e){return e&&e.__esModule?e:{default:e}}var c,d,f,p,h,v,g=(r=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.spinner=e.spinner||"",n.contentId=n.id+"_content",n.loaderId=n.id+"_loader",n.element.innerHTML='\n      <div class="'+s.default.EmbedLayout__wrapper+'">\n        '+(n.spinner?'<div class="'+s.default.EmbedLayout__loader+'" id="'+n.loaderId+'">'+n.spinner+"</div>":"")+'\n        <div class="'+s.default.EmbedLayout__content+'" id="'+n.contentId+'"></div>\n      </div>\n    ',n.contentElement=(0,a.findById)(n.contentId,n.element),n.loaderElement=(0,a.findById)(n.loaderId,n.element),(0,a.setClass)(n.element,s.default.EmbedLayout,s.default["is-hidden"]),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"addToDOM",value:function(e){this.container=e,this.container.appendChild(this.getElement())}},{key:"showLoading",value:function(){this.toggleLoading(!0)}},{key:"hideLoading",value:function(){this.toggleLoading(!1)}},{key:"hide",value:function(){(0,a.toggleClass)(this.element,s.default["is-hidden"],!0)}},{key:"show",value:function(){(0,a.toggleClass)(this.element,s.default["is-hidden"],!1)}},{key:"toggleLoading",value:function(e){(0,a.toggleClass)(this.element,s.default["is-loading"],e),(0,a.toggleClass)(this.loaderElement,s.default["is-shown"],e)}},{key:"setContent",value:function(e){this.content=e,this.contentElement.appendChild(e.getElement())}},{key:"destroy",value:function(){(0,a.removeFromDOM)(this.element),this.emit("destroy")}}]),t}(o.default),c=r.prototype,d="destroy",f=[u.autobind,u.once],p=Object.getOwnPropertyDescriptor(r.prototype,"destroy"),h=r.prototype,v={},Object.keys(p).forEach((function(e){v[e]=p[e]})),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=f.slice().reverse().reduce((function(e,t){return t(c,d,e)||e}),v),h&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(h):void 0,v.initializer=void 0),void 0===v.initializer&&(Object.defineProperty(c,d,v),v=null),r);t.Z=g},5972:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globalViewportEvents=t.mutationObserver=t.mutationEvents=void 0,t.setMutationParams=function(e){l=e,c&&h()},t.initObserve=h,t.createViewportManager=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r="function"==typeof n?n(t):(0,i.default)(t,n),o=void 0,s=void 0;return e&&(o=w(e,!0))&&o!==document.body&&o!==document.documentElement&&(o.addEventListener("scroll",r,!1),s=!0),v.on("change",r),{destroy:function(){v.removeListener("change",r),s&&o.removeEventListener("scroll",r,!1)}}},t.onRemoveFromDOM=function(e,t){var n=m(e),r=(0,i.default)((function(){var i=m(e);!i&&n&&(f.removeListener("mutation",r),t()),n=i}));f.on("mutation",r)},t.removeFromDOM=function(e){e.parentNode&&e.parentNode.removeChild(e)},t.isElementInDOM=m,t.inViewport=function(e,t){return e.getBoundingClientRect().top-t<window.innerHeight},t.setClass=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e&&(e.className=n.filter(Boolean).join(" "))},t.addClass=y,t.removeClass=b,t.toggleClass=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o=(i=n.reverse(),Array.isArray(i)?i:Array.from(i)),s=o[0],a=o.slice(1);s?y.apply(void 0,[e].concat(u(a))):b.apply(void 0,[e].concat(u(a)))},t.findById=function(e,t){return t?t.querySelector('[id="'+e+'"]'):document.getElementById(e)},t.scrollByElementTo=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r=w(e);if(r&&r!==e){var i=e.getBoundingClientRect().top-r.getBoundingClientRect().top+t;return r!==document.body&&r!==document.documentElement&&(i+=(0,s.getScroll)(r)),(0,s.scrollToTop)(r,i,n)}};var r=a(n(5093)),i=a(n(1296)),o=a(n(7187)),s=n(2946);function a(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var l={childList:!0,subtree:!0},c=!1,d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver||function(e){var t=void 0;return{observe:function(){t=setInterval(e,2e3)},disconnect:function(){clearInterval(t)}}},f=t.mutationEvents=new o.default,p=t.mutationObserver=new d((function(e){f.emit("mutation",e)}));function h(){c&&p.disconnect();var e=document.body||document.documentElement;p.observe(e,l),c=!0}var v=t.globalViewportEvents=new o.default,g=function(e){v.emit("change",e)};function m(e){return document.body.contains(e)}function y(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e&&(t=e.classList).add.apply(t,u(r.filter(Boolean)))}function b(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e&&(t=e.classList).remove.apply(t,u(r.filter(Boolean)))}function w(e,t){if(!(e=e.parentElement)||e===document.documentElement)return document.documentElement;if(t||e.scrollHeight>e.clientHeight||e===document.body||e===document.documentElement){var n=getComputedStyle(e).overflowY;if("auto"===n||"scroll"===n)return e}return w(e,t)}window.addEventListener("scroll",g),window.addEventListener("resize",g),(0,r.default)(h)},2946:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setScroll=r,t.getScroll=i,t.scrollToTop=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;return new Promise((function(s){var a=i(e),u=0;t=Math.max(t,0),function i(){var l=(u+=1/60)/(o/1e3),c=l;if(l<1){n(i);var d=Math.round(a+(t-a)*c);r(e,d)}else r(e,t),s()}()}))};var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)};function r(e,t){e===document.body||e===document.documentElement?window.scrollTo(0,t):e.scrollTop=t}function i(e){return e===document.body||e===document.documentElement?document.body.scrollTop||document.documentElement.scrollTop:e.scrollTop}},1708:function(e,t){"use strict";function n(e){return"hidden"===e||"scroll"===e||"auto"===e}function r(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=window.innerHeight,o=window.innerWidth,s=e.getBoundingClientRect(),a=s.left,u=s.right,l=s.top,c=s.bottom;t.offset&&(a-=t.offset,u+=t.offset,l-=t.offset,c+=t.offset),l=Math.max(0,l),a=Math.max(0,a),l=Math.min(l,i);var d,f=(u=Math.min(u,o))-a,p=c-l,h=a<0?Math.min(Math.max(0,a+f),o):Math.max(Math.min(o-a,f),0),v=l<0?Math.min(Math.max(0,l+p),i):Math.max(Math.min(i-l,p),0),g={horizontal:!1,vertical:!1};if(r){var m=(d=e,window.getComputedStyle?window.getComputedStyle(d):d.currentStyle),y=m.overflowX,b=m.overflowY;g={horizontal:n(y),vertical:n(b)}}var w=!1;return t.compliantScrollDown&&(w=c<=0&&p>0),{left:a,top:l,rect:s,childOverflowed:g,isCompliantVerticalVisible:w,width:h,height:v,isVisible:h>0&&(v>0||w)}}function i(e,t){if(!t.childOverflowed.horizontal&&!t.childOverflowed.vertical)return e;var n=e.width,r=e.height,i=e.left,o=e.top,s=e.right,a=e.bottom,u=e.childOverflowed,l=e.rect;return t.childOverflowed.vertical&&(o=Math.max(o,t.top),a=Math.min(o+r,t.top+t.height),r=Math.max(a-o,0)),t.childOverflowed.horizontal&&(i=Math.max(i,t.left),s=Math.min(i+n,t.left+t.width),n=Math.max(s-i,0)),{left:i,top:o,width:n,height:r,childOverflowed:u,rect:l,isVisible:e.isVisible&&t.isVisible&&n>0&&(r>0||e.isCompliantVerticalVisible&&t.isCompliantVerticalVisible)}}function o(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r(e,t),o=e.parentElement;o&&o!==document.body&&o!==document.documentElement&&n.isVisible;)n=i(n,r(o,t,!0)),o=o.parentElement;return{isVisible:n.isVisible,area:{left:n.left-n.rect.left,top:n.top-n.rect.top,width:n.width,height:n.height}}}Object.defineProperty(t,"__esModule",{value:!0}),t.calcVisibleOptions=o,t.isVisible=function(e){return o(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).isVisible},t.getVisibleArea=function(e){return o(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).area}},2954:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r,i=(r=n(7187))&&r.__esModule?r:{default:r};function o(){i.default.call(this),this.setMaxListeners(1/0)}Object.assign(o.prototype,i.default.prototype,{externalizeEmitter:function(){var e=["on","once","removeListener"],t=this;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).withEmit&&e.push("emit"),e.reduce((function(e,n){return e[n]=function(){t[n].apply(t,arguments)},e}),{})}})},3850:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.once=function(e,t,r){return n({},r,{value:function(){this.__invokedFunctions=this.__invokedFunctions||[],this.__invokedFunctionResults=this.__invokedFunctionResults||[];var e=r.value,t=this.__invokedFunctions.indexOf(e);if(-1===t){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];var s=e.call.apply(e,[this].concat(i));return this.__invokedFunctions.push(e),this.__invokedFunctions.push(s),s}return this.__invokedFunctionResults[t]}})},t.autobind=function(e,t,n){var r=n.value;return{configurable:n.configurable,enumerable:n.enumerable,get:function(){var e=r.bind(this);return Object.defineProperty(this,t,{configurable:!0,writable:!0,enumerable:!1,value:e}),e}}},t.virtual=function(e,t,r){return n({},r,{value:function(){throw new Error('Method "'+t+'" should be overrided')}})},t.mixin=function(e){return function(t){return Object.assign(t.prototype,e),t}}},2884:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(Date.now()+Math.random()).toString(36)}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,exports:{}};return e[r](o,o.exports,n),o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0,function(){"use strict";var e={};n.r(e),n.d(e,{Events:function(){return ue},defineWidget:function(){return Se},name:function(){return Ce}});var t={};n.r(t),n.d(t,{Player:function(){return e}});var r=n(4737),i=n.n(r),o=n(1708),s=n(5972);(0,s.setMutationParams)({childList:!0,subtree:!0,attributes:!0});const a=e=>new Promise(((t,n)=>{const r=document.createElement("script");r.src=e,r.async=!0,r.type="text/javascript",r.onload=()=>{t(r)},r.onerror=()=>{n(new Error(`script not loaded: ${e}`))},document.body.appendChild(r)})),u=(e,t)=>{const n=null==e?void 0:e.parentElement;if(!n||n===document.documentElement)return document.documentElement;if(t||n.scrollHeight>n.clientHeight||n===document.body||n===document.documentElement){const e=getComputedStyle(n).overflowY;if("auto"===e||"scroll"===e)return n}return u(n,t)};var l=n(1569);Boolean(navigator.userAgent.match(new RegExp(`(${["googlebot/","Googlebot-Mobile","Googlebot-Image","Google favicon","Mediapartners-Google","bingbot","slurp","java","wget","curl","Commons-HttpClient","Python-urllib","libwww","httpunit","nutch","phpcrawl","msnbot","jyxobot","FAST-WebCrawler","FAST Enterprise Crawler","biglotron","teoma","convera","seekbot","gigablast","exabot","ngbot","ia_archiver","GingerCrawler","webmon","httrack","webcrawler","grub.org","UsineNouvelleCrawler","antibot","netresearchserver","speedy","fluffy","bibnum.bnf","findlink","msrbot","panscient","yacybot","AISearchBot","IOI","ips-agent","tagoobot","MJ12bot","dotbot","woriobot","yanga","buzzbot","mlbot","yandexbot","purebot","Linguee Bot","Voyager","CyberPatrol","voilabot","baiduspider","citeseerxbot","spbot","twengabot","postrank","turnitinbot","scribdbot","page2rss","sitebot","linkdex","Adidxbot","blekkobot","ezooms","dotbot","Mail.RU_Bot","discobot","heritrix","findthatfile","europarchive.org","NerdByNature.Bot","sistrix crawler","ahrefsbot","Aboundex","domaincrawle","wbsearchbot","summify","ccbot","edisterbot","seznambot","ec2linkfinder","gslfbot","aihitbot","intelium_bot","facebookexternalhit","yeti","RetrevoPageAnalyzer","lb-spider","sogou","lssbot","careerbot","wotbox","wocbot","ichiro","DuckDuckBot","lssrocketcrawler","drupact","webcompanycrawler","acoonbot","openindexspider","gnam gnam spider","web-archive-net.com.bot","backlinkcrawler","coccoc","integromedb","content crawler spider","toplistbot","seokicks-robot","it2media-domain-crawler","ip-web-crawler.com","siteexplorer.info","elisabot","proximic","changedetection","blexbot","arabot","WeSEE:Search","niki-bot","CrystalSemanticsBot","rogerbot","360Spider","psbot","InterfaxScanBot","Lipperhey SEO Service","CC Metadata Scaper","g00g1e.net","GrapeshotCrawler","urlappendbot","brainobot","fr-crawler","binlar","SimpleCrawler","Livelapbot","Twitterbot","cXensebot","smtbot","bnf.fr_bot","A6-Indexer","ADmantX","Facebot","Twitterbot","OrangeBot","memorybot","AdvBot","MegaIndex","SemanticScholarBot","ltx71","nerdybot","xovibot","BUbiNG","Qwantify","archive.org_bot","Applebot","TweetmemeBot","crawler4j","findxbot","SemrushBot","yoozBot","lipperhey","y!j-asr","Domain Re-Animator Bot","AddThis"].join("|")})`,"i"))),"requestStorageAccess"in document&&document.requestStorageAccess;var c=function(e,t){void 0===t&&(t={});var n,r=t.raw;try{var i=window.localStorage.getItem(e);n=r?i:JSON.parse(null!=i?i:"")}catch(e){}return null!=n?n:null};const d="vpPlayer:optionsStorage";var f=n(1296),p=n.n(f),h=n(1819),v=function(e){var t={};return Object.keys(e).forEach((function(n){null!=e[n]&&(t[n]=e[n])})),t},g=function(e){var t={};return new URL(e).searchParams.forEach((function(e,n){t[n]=e})),t};let m,y;const b=async()=>{if(!m){y||(y=new Promise(((e,t)=>{window.ramblerIdHelper=window.ramblerIdHelper||[],window.ramblerIdHelper.push((()=>{m=window.ramblerIdHelper,e()})),a("https://id.rambler.ru/rambler-id-helper/auth_events.js").catch((e=>t(e)))})));try{await y}catch(e){}}return m},w=async()=>{const e=await b();return new Promise(((t,n)=>{e.getSessionToken(((e,r)=>{r?n(r):t(e)}))}))};var O=n(6451);const A=e=>Promise.race([new Promise((t=>{O.primeHelper.getSubscription({referrer:e},((e,n)=>{t(Boolean(n))}))})),new Promise((e=>window.setTimeout((()=>e(!1)),5e3)))]),P=(e,t)=>{if(t<1)return"";if(t%2)return P(e,t-1)+e;const n=P(e,t/2);return n+n};var E=n(1309);const C="1.2.0";class S{constructor(e,t=window){this._fingerprintStorage=e,this._eventContainer=t,this._getFingerprintHandler=e=>{return t=this,n=void 0,i=function*(){if(!e.data||"octopusGetFingerprint"!==e.data.type)return;const t=yield this._fingerprintStorage.getFingerPrint();e.source.postMessage({fingerprint:t,type:"octopusSetFingerprint"},e.origin)},new((r=void 0)||(r=Promise))((function(e,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,a)}u((i=i.apply(t,n||[])).next())}));var t,n,r,i},this._eventContainer.addEventListener("message",this._getFingerprintHandler,!1)}}class x{constructor(e){this.name=e}static getUserDataWithoutIP(e){var t;const n=JSON.parse(e);return(null===(t=n[n.length-1])||void 0===t?void 0:t.IP)?n.slice(0,n.length-1):n}getFingerprint(e){const t=e.getGatheredIP(),n=x.getUserDataWithoutIP(e.getCollectedUserData());return{fp:Z.getFingerPrintHash(JSON.stringify(n)+t.split(".")[0]),name:this.name}}}const _="UNKNOWN";class k{constructor(e){this.name=e}getFingerprint(e){const t=[...JSON.parse(e.getCollectedUserData()),this.getCanvas(),this.getWebGL()];return{fp:Z.getFingerPrintHash(JSON.stringify(t)),name:this.name}}getCanvas(){const e={},t=document.createElement("canvas");t.width=400,t.height=200,t.style.display="inline";const n=t.getContext("2d");try{null==n||n.rect(0,0,10,10),null==n||n.rect(2,2,6,6),e.canvasWinding=null==n?void 0:n.isPointInPath(5,5,"evenodd")}catch(t){e.canvasWinding=_}try{n&&(n.textBaseline="alphabetic",n.fillStyle="#f60",n.fillRect(125,1,62,20),n.fillStyle="#069",n.font="11pt no-real-font-123",n.fillText("Cwm fjordbank glyphs vext quiz, ",2,15),n.fillStyle="rgba(102, 204, 0, 0.2)",n.font="18pt Arial",n.fillText("Cwm fjordbank glyphs vext quiz, ",4,45),n.globalCompositeOperation="multiply",n.fillStyle="rgb(255,0,255)",n.beginPath(),n.arc(50,50,50,0,2*Math.PI,!0),n.closePath(),n.fill(),n.fillStyle="rgb(0,255,255)",n.beginPath(),n.arc(100,50,50,0,2*Math.PI,!0),n.closePath(),n.fill(),n.fillStyle="rgb(255,255,0)",n.beginPath(),n.arc(75,100,50,0,2*Math.PI,!0),n.closePath(),n.fill(),n.fillStyle="rgb(255,0,255)",n.arc(75,75,75,0,2*Math.PI,!0),n.arc(75,75,25,0,2*Math.PI,!0),n.fill("evenodd"),e.image=t.toDataURL())}catch(t){e.image=_}return e}getWebGL(){try{const e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl");let n,r;return t.getSupportedExtensions().indexOf("WEBGL_debug_renderer_info")>=0?(n=t.getParameter(t.getExtension("WEBGL_debug_renderer_info").UNMASKED_VENDOR_WEBGL),r=t.getParameter(t.getExtension("WEBGL_debug_renderer_info").UNMASKED_RENDERER_WEBGL)):(n="Not supported",r="Not supported"),[n,r]}catch(e){return"Not supported;;;Not supported"}}}const I=[new x("firstIPByte"),new class{constructor(e){this.name=e}getFingerprint(e){const t=e.getGatheredIP();return{fp:e.getBaseFingerprint()+t.split(".")[0],name:this.name}}}("joinedFirstIPByte"),new class{constructor(e){this.name=e}getFingerprint(e){const t=e.getGatheredIP().split(".");return{fp:`${e.getBaseFingerprint()}${t[0]}${t[1]}`,name:this.name}}}("joinedFirstSecondIPBytes"),new class{constructor(e){this.name=e}getFingerprint(e){return{fp:e.getBaseFingerprint(),name:this.name}}}("withoutIP"),new k("withCanvas")];class j{constructor(e){this.userID=e}get(){return j.experimentalAlgorithms.reduce(((e,t)=>{const{name:n,fp:r}=t.getFingerprint(this.userID);return Object.assign(Object.assign({},e),{[n]:r})}),{})}}j.experimentalAlgorithms=I;class L{getFingerprint(){return e=this,t=void 0,r=function*(){if(window.OfflineAudioContext){const e=4500,t=new(0,window.OfflineAudioContext)(1,5e3,44100),n=t.createOscillator();n.type="triangle",n.frequency.value=1e4;const r=t.createDynamicsCompressor();r.threshold.value=-50,r.knee.value=40,r.ratio.value=12,r.attack.value=0,r.release.value=.25,n.connect(r),r.connect(t.destination),n.start(0);const[i,o]=this.startRenderingAudio(t);let s;try{const t=yield i;s=this.getHash(t.getChannelData(0).subarray(e))}catch(e){e&&e instanceof Error&&("timeout"===e.name||"suspended"===e.name)&&(s=0)}return{ok:!0,webAudioHash:()=>(o(),s)}}return{ok:!1}},new((n=void 0)||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}));var e,t,n,r}startRenderingAudio(e){let t=()=>{};return[new Promise(((n,r)=>{let i=!1,o=0,s=0;e.oncomplete=e=>n(e.renderedBuffer);const a=()=>{setTimeout((()=>r()),Math.min(500,s+5e3-Date.now()))},u=()=>{try{switch(e.startRendering(),e.state){case"running":s=Date.now(),i&&a();break;case"suspended":document.hidden||o++,i&&o>=3?r():setTimeout(u,500)}}catch(e){r(e)}};u(),t=()=>{i||(i=!0,s>0&&a())}})),t]}getHash(e){let t=0;for(let n=0;n<e.length;++n)t+=Math.abs(e[n]);return t}}const T=()=>-1!==navigator.userAgent.indexOf("Opera"),M=()=>-1!==navigator.userAgent.indexOf("OPR"),D=()=>-1!==navigator.userAgent.indexOf("Edg"),R=()=>-1!==navigator.userAgent.indexOf("Edge"),z=()=>-1!==navigator.userAgent.indexOf("Chrome"),F=()=>-1!==navigator.userAgent.indexOf("Firefox"),W=()=>-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome"),N=()=>navigator.userAgent.lastIndexOf(" ")+1<navigator.userAgent.lastIndexOf("/"),B=()=>{let e;return T()||M()?e="Opera":D()||R()?e="Edge":z()?e="Chrome":F()?e="Firefox":W()?e="Safari":N()&&(e=(()=>{const e=navigator.userAgent.lastIndexOf(" ")+1,t=navigator.userAgent.lastIndexOf("/");let n=navigator.userAgent.substring(e,t);return n.toLowerCase()===n.toUpperCase()&&(n=navigator.appName),n})()),e||""},V=e=>{if("string"==typeof e){const t=[";"," ",")"];for(let n=0;n<t.length;n++){const r=t[n],i=e.indexOf(r);-1!==i&&(e=e.substring(0,i))}return e}return""},U=()=>{let e;return T()?e=(()=>{let e=navigator.userAgent.indexOf("Opera"),t=navigator.userAgent.substring(e+6);return e=navigator.userAgent.indexOf("Version"),-1!==e&&(t=navigator.userAgent.substring(e+8)),V(t)})():M()?e=(()=>{const e=navigator.userAgent.indexOf("OPR"),t=navigator.userAgent.substring(e+4);return V(t)})():R()?e=(()=>{const e=navigator.userAgent.indexOf("Edge"),t=navigator.userAgent.substring(e+5);return V(t)})():D()?e=(()=>{const e=navigator.userAgent.indexOf("Edg"),t=navigator.userAgent.substring(e+4);return V(t)})():z()?e=(()=>{const e=navigator.userAgent.indexOf("Chrome"),t=navigator.userAgent.substring(e+7);return V(t)})():F()?e=(()=>{const e=navigator.userAgent.indexOf("Firefox"),t=navigator.userAgent.substring(e+8);return V(t)})():W()?e=(()=>{let e=navigator.userAgent.indexOf("Safari"),t=navigator.userAgent.substring(e+7);return e=navigator.userAgent.indexOf("Version"),-1!==e&&(t=navigator.userAgent.substring(e+8)),V(t)})():N()&&(e=(()=>{const e=navigator.userAgent.lastIndexOf("/"),t=navigator.userAgent.substring(e+1);return V(t)})()),e||""},q=()=>{let e=0;return void 0!==window.screen.systemXDPI&&void 0!==window.screen.logicalXDPI&&window.screen.systemXDPI>window.screen.logicalXDPI?e=window.screen.systemXDPI/window.screen.logicalXDPI:void 0!==window.devicePixelRatio&&(e=window.devicePixelRatio),e},G=()=>{let e="";const t=[{r:/(Windows 10.0|Windows NT 10.0)/,s:"Windows 10"},{r:/(Windows 8.1|Windows NT 6.3)/,s:"Windows 8.1"},{r:/(Windows 8|Windows NT 6.2)/,s:"Windows 8"},{r:/(Windows 7|Windows NT 6.1)/,s:"Windows 7"},{r:/Windows NT 6.0/,s:"Windows Vista"},{r:/Windows NT 5.2/,s:"Windows Server 2003"},{r:/(Windows NT 5.1|Windows XP)/,s:"Windows XP"},{r:/(Windows NT 5.0|Windows 2000)/,s:"Windows 2000"},{r:/(Win 9x 4.90|Windows ME)/,s:"Windows ME"},{r:/(Windows 98|Win98)/,s:"Windows 98"},{r:/(Windows 95|Win95|Windows_95)/,s:"Windows 95"},{r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/,s:"Windows NT 4.0"},{r:/Windows CE/,s:"Windows CE"},{r:/Win16/,s:"Windows 3.11"},{r:/Android/,s:"Android"},{r:/OpenBSD/,s:"Open BSD"},{r:/SunOS/,s:"Sun OS"},{r:/(Linux|X11)/,s:"Linux"},{r:/(iPhone|iPad|iPod)/,s:"iOS"},{r:/Mac OS X/,s:"Mac OS X"},{r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/,s:"Mac OS"},{r:/QNX/,s:"QNX"},{r:/UNIX/,s:"UNIX"},{r:/BeOS/,s:"BeOS"},{r:/OS\/2/,s:"OS/2"},{r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/,s:"Search Bot"}];for(let n=0;n<t.length;n++){const r=t[n];if(r.r.test(navigator.userAgent)){e=r.s;break}}return e},H=()=>{let e=G(),t="";switch(/Windows/.test(e)&&(t=/Windows (.*)/.exec(e),t&&(t=t[1],e="Windows")),e){case"Mac OS X":t=/Mac OS X (10[._\d]+)/.exec(navigator.userAgent),t&&(t=t[1]);break;case"Android":t=/Android ([._\d]+)/.exec(navigator.userAgent),t&&(t=t[1]);break;case"iOS":const e=/OS (\d+)_(\d+)_?(\d+)?/.exec(navigator.appVersion);e&&(t=e[1]+"."+e[2]+"."+(e[3]||0))}return t||""};class X{constructor(e=[]){this.onUserDataGatheredCallbacks=[],this.onUserDataGatheredCallbacks.push(...e),this.baseFpProperties=this.getBaseFpProperties(),this.userData=this.getCollectedUserData(),this.onUserDataGathered()}getUserLanguage(){try{const e=window.navigator;return{UserLanguage:e.language||e.userLanguage||e.browserLanguage||e.systemLanguage||""}}catch(e){return null}}getBaseFpProperties(){return{browser:{browser:{browser:B(),mobile:/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(navigator.appVersion),version:U()},screen:{availableSize:{height:window.screen.availHeight,width:window.screen.availWidth},colorDepth:window.screen.colorDepth,pixelRatio:q(),size:{height:window.screen.height,width:window.screen.width}},system:{name:G(),version:H()}},userLanguage:this.getUserLanguage(),timezoneOffset:this.getTimezoneOffset(),plugins:this.getPlugins()}}getTimezoneOffset(){try{return{TimezoneOffset:(new Date).getTimezoneOffset()}}catch(e){return null}}onUserDataGathered(){this.onUserDataGatheredCallbacks.forEach((e=>{e(this.userData)}))}getCollectedUserData(){const e=Object.assign({},this.baseFpProperties);return 0===this.baseFpProperties.browser.screen.pixelRatio&&(e.browser.screen.pixelRatio=1),[{UserAgent:navigator.userAgent},...Object.values(e)]}getPlugins(){try{return{Plugins:this.getRegularPlugins()}}catch(e){return null}}getRegularPlugins(){try{let e=[];for(let t=0;t<window.navigator.plugins.length;t++)e.push(window.navigator.plugins[t]);return e=e.sort(((e,t)=>e.name>t.name?1:e.name<t.name?-1:0)),this.map(e,(e=>{const t=this.map(e,(e=>[e.type,e.suffixes].join("~"))).join(",");return[e.name,e.description,t].join("::")}),this)}catch(e){return[]}}map(e,t,n){const r=[];return null===e?r:Array.prototype.map&&e.map===Array.prototype.map?e.map(t,n):(this.each(e,((e,i,o)=>{r[r.length]=t.call(n,e,i,o)}),n),r)}each(e,t,n){if(null!==e)if(Array.prototype.forEach&&e.forEach===Array.prototype.forEach)e.forEach(t,n);else if(e.length===+e.length){for(let r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e)==={})return}else for(let r=0;r<e.length;r++){const i=e[r];if(e.hasOwnProperty(i)&&t.call(n,e[i],i,e)==={})return}}}class Y{constructor(e){this.stunServerURI=e,this.cbs=[],this.IPRegex=/(\d{1,3}(\.\d{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/,this.onIceCandidate=(e,t)=>{var n;if((null===(n=null==e?void 0:e.candidate)||void 0===n?void 0:n.candidate)&&this.IPRegex.test(e.candidate.candidate)){const[n]=this.IPRegex.exec(e.candidate.candidate)||[];this.triggerCbs(),t(n)}}}onWebRTCRequest(e){this.cbs.push(e)}getIP(){return e=this,t=void 0,r=function*(){return new Promise(((e,t)=>{const n=window.RTCPeerConnection=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;if(!n)return e();setTimeout((()=>{t()}),1e3);const r=new n({iceServers:[{urls:this.stunServerURI}]});r.onicegatheringstatechange=e=>{const n=e.target;"complete"===(null==n?void 0:n.iceGatheringState)&&t()},r.onicecandidate=t=>{this.onIceCandidate(t,e)},r.createDataChannel(""),r.createOffer().then((e=>{r.setLocalDescription(e)}))}))},new((n=void 0)||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}));var e,t,n,r}triggerCbs(){this.cbs.forEach((e=>e()))}}var J=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};class Z{constructor(e,t=[]){this.isAccurate=!1,this.settings={onInitFPDiscovery:!1},this.onceFullUidResolve=[],this.isGetFingerPrintCalled=!1,this.defaultIP={IP:"0.0.0.0"},e&&(this.settings=Object.assign(Object.assign({},this.settings),e)),this.settings.ipDiscUrl&&(this.settings.ipDiscUrl=((e,t)=>{if("string"!=typeof e)throw new TypeError(`Expected \`url\` to be of type \`string\`, got \`${typeof e}\``);return e=e.trim(),t=Object.assign({https:!1},t),/^.+\/\/|^(?!localhost)\w+:/.test(e)?e:e.replace(/^(\/\/|(?!.+?\/\/))/,t.https?"https://":"http://")})(this.settings.ipDiscUrl,{https:!0})),this.userData=new X(t),this.accurateFingerprint="",this.userDataString=JSON.stringify(this.userData.userData),this.baseFingerprint=Z.getFingerPrintHash(this.userDataString),this.isAccurate=!1,this.settings.onInitFPDiscovery&&this.getFingerPrint().catch((()=>{this.resetState()})),this.experimentalFingerprints=new j(this),this.webAudioFp=new L,this.fpWithCanvas=new k(""),this.completeFPPromise=this.generateCompleteFingerprint(),this.settings.webRTCStunServerURI&&(this.webRTCIP=new Y(this.settings.webRTCStunServerURI)),new S(this)}static fnv32a(e,t){for(let n=0;n<e.length;n++)t=16777619*(t^=e.charCodeAt(n))&4294967295;return t}static tobinary(e){let t="";for(let n=0;n<4;n++)t+=String.fromCharCode(255&e),e>>=8;return t}static getFingerPrintHash(e){const t=1471357547+Number(C.split(".").map((e=>P("0",2-e.length)+e)).join("")),n=Z.fnv32a(e.substr(0,e.length/2),2166136261);let r=Z.fnv32a(e.substr(e.length/2),n);r=4294967040&r|1;let i="";return i+=Z.tobinary(4004),i+=Z.tobinary(t),i+=Z.tobinary(n),i+=Z.tobinary(r),i+=String.fromCharCode(0),btoa(i)}getUserLanguage(){return this.userData.baseFpProperties.userLanguage?this.userData.baseFpProperties.userLanguage:null}getTimezoneOffset(){return this.userData.baseFpProperties.timezoneOffset?this.userData.baseFpProperties.timezoneOffset:null}getCompleteFingerprint(){return this.completeFPPromise}getJsonFpParams(){return J(this,void 0,void 0,(function*(){const{fp:e,screen:t,others:n}=yield this.completeFPPromise,r={f:{p:e.plugins,c:e.canvasWinding,i:e.canvasImage,v:e.webGLVendor,r:e.webGLRenderer,w:e.webAudioContext},s:{w:t.screenWidth,h:t.screenHeight,a:t.screenAvalWidth,b:t.screenAvalHeight,p:t.pixelRatio,c:t.colorDepth},o:{t:n.timezoneOffset,u:n.userLanguage}};return JSON.stringify(r)}))}getVersion(){return C}getGatheredIP(){return this._gatheredIP||this.defaultIP.IP}getCollectedUserData(){return this.userDataString}getExperimentalFingerprints(){return this.experimentalFingerprints.get()}getWebAudioFp(){return J(this,void 0,void 0,(function*(){const e=yield this.webAudioFp.getFingerprint();if(e.ok){const t=e.webAudioHash(),n=JSON.parse(this.getCollectedUserData());return Z.getFingerPrintHash(JSON.stringify([...n,{hash:t}]))}return""}))}getUserIDs(){return Promise.all([this.getFingerPrint()])}getBaseFingerprint(){return this.baseFingerprint}getFingerPrint(e=!1){return new Promise((t=>{if(this.isAccurate)return t(this.getID());this.isGetFingerPrintCalled&&!e?this.onceFullUidResolve.push((()=>{t(this.getID())})):(this.isGetFingerPrintCalled=!0,this.getUIDParams().then((e=>{this.onUidResolved(e),this.emitUidResolve(),t(this.getID())})).catch((()=>{this.resetState(),this.emitUidResolve(),t(this.getID())})))}))}getID(){return this.accurateFingerprint||this.baseFingerprint}subscribeOnWebRTC(e){this.webRTCIP&&this.webRTCIP.onWebRTCRequest(e)}generateCompleteFingerprint(){return J(this,void 0,void 0,(function*(){const e=this.userData.baseFpProperties;let t;if(e.plugins){const n=JSON.stringify(e.plugins.Plugins);t=(0,E.murmur3)(n)}else t=null;const{canvasWinding:n,image:r}=this.fpWithCanvas.getCanvas(),i=!0===n?1:null,o=r?(0,E.murmur3)(r):null;let s,a;const u=this.fpWithCanvas.getWebGL();"string"==typeof u?(s=null,a=null):([s,a]=u,"Not supported"===s&&(s=null),"Not supported"===a&&(a=null));const l=yield this.getWebAudioFp(),c=""===l?null:(0,E.murmur3)(l),d=e.timezoneOffset?e.timezoneOffset.TimezoneOffset:null,f=e.userLanguage?e.userLanguage.UserLanguage:null,p=e.browser.screen,h=p.pixelRatio||null;return{fp:{plugins:t,canvasWinding:i,canvasImage:o,webGLVendor:s,webGLRenderer:a,webAudioContext:c},screen:{screenWidth:p.size.width,screenHeight:p.size.height,screenAvalWidth:p.availableSize.width,screenAvalHeight:p.availableSize.height,pixelRatio:h,colorDepth:p.colorDepth},others:{timezoneOffset:d,userLanguage:f}}}))}getUIDParams(){return this.getIP().then((e=>[...this.userData.userData,null===e?{IP:null}:e]))}getIP(){return J(this,void 0,void 0,(function*(){if(!this.settings||!this.settings.ipDiscUrl)return this.getWebRTCIP();try{return(yield this.getIPFromServer())||(yield this.getWebRTCIP())}catch(e){return this.defaultIP}}))}getWebRTCIP(){return J(this,void 0,void 0,(function*(){if(!this.webRTCIP)return this.defaultIP;try{const e=yield this.webRTCIP.getIP();return e?{IP:e}:this.defaultIP}catch(e){return this.defaultIP}}))}getIPFromServer(){return new Promise((e=>{if(!this.settings||!this.settings.ipDiscUrl)return e(null);setTimeout((()=>{e(null)}),1e3);const t=new XMLHttpRequest;t.onload=()=>{4===t.readyState&&(200===t.status&&t.responseText?e({IP:t.responseText}):e(null))},t.onerror=()=>{e(null)},t.open("GET",this.settings.ipDiscUrl,!0),t.send()}))}emitUidResolve(){this.onceFullUidResolve.forEach((e=>{e()})),this.onceFullUidResolve=[]}onUidResolved(e){this.userDataString=JSON.stringify(e);for(const t of Object.values(e))this.accurateFingerprint=null===t.IP||t.IP===this.defaultIP.IP?this.fpWithCanvas.getFingerprint(this).fp:Z.getFingerPrintHash(this.userDataString);this.isAccurate=!0;const t=e[e.length-1];this._gatheredIP=null!==t.IP&&t.IP}resetState(){this.isAccurate=!1,this.isGetFingerPrintCalled=!1}}const Q=new Z,K=()=>Q.getFingerPrint();const $=()=>Boolean(~"https://vp.rambler.ru".indexOf("vp-stage"))||Boolean(~"https://vp.rambler.ru".indexOf("vp-dev")),ee=("https://vp.rambler.ru".replace("https://",""),(e,t)=>{var n,r,i,o,s,a,u;if($()&&console.log("%c[debug][loyalty]","color: #0000ff; font-weight: bold; font-size: 13px;",e,t),!window.loyalty)try{r=window,i=document,o="script",r[s="loyalty"]=r[s]||function(){(r[s].q=r[s].q||[]).push(arguments)},r[s].l=1*new Date,a=i.getElementsByTagName(o)[0],(u=i.createElement(o)).async=!0,u.src="https://loyalty.rambler-co.ru/sdk/sdk.js",a.parentNode.insertBefore(u,a)}catch(e){}null===(n=window.loyalty)||void 0===n||n.call(window,e,t)}),te=e=>{try{return document.cookie.split(";").reduce(((t,n)=>{if(null==t){const[t,...r]=n.trim().split("=");if(t===e)return r.join("=")}return t}),null)}catch(e){return null}},ne=(e,t,n={})=>{try{let r=`${e}=${t}`;n.domain&&(r+=`; domain=${n.domain}`),n.path&&(r+=`; path=${n.path}`),n.expires&&(r+=`; expires=${n.expires}`),n.sameSite&&(r+=`; SameSite=${n.sameSite}`),n.secure&&(r+="; Secure"),document.cookie=r}catch(e){}},re="color: #0000ff; font-weight: bold; font-size: 13px;";let ie=null;const oe={},se=(e={})=>{$()&&console.log("%c[debug][top100]",re,e.project);const{project:t}=e;oe.hasOwnProperty(t)||(oe[t]=new Promise((async(n,r)=>{try{ie||(ie=a("//st.top100.ru/top100/top100.js"));try{await ie}catch(e){throw ie=null,e}const r=new window.top100(Object.assign(Object.assign({},e),{checkInit:!0})),i=`initKraken${t}`,o=()=>{document.removeEventListener(i,o),n(r)};document.addEventListener(i,o)}catch(e){delete oe[t],r(e)}})))},ae=async(e,t)=>{$()&&console.log("%c[debug][sendCustomVars]",re,t);try{const n=await oe[e];null==n||n.sendCustomVars(t)}catch(e){}};var ue;!function(e){e.PLAYER_READY="ready",e.PLAYER_RESIZE="resize",e.PLAYER_FULLSCREEN="fullscreen",e.PLAYER_DOCK="dock",e.PLAYER_PLAY="play",e.PLAYER_PAUSE="pause",e.PLAYER_STOP="stop",e.PLAYER_ENDED="ended",e.PLAYER_SEEK="seek",e.PLAYER_ERROR="playererror",e.PLAYER_TIMEUPDATE="timeupdate",e.PLAYER_VOLUMEUPDATE="volumeupdate",e.PLAYER_DESTROY="destroy",e.ADVERTISEMENT_STARTED="advertisement:started",e.ADVERTISEMENT_PAUSED="advertisement:paused",e.ADVERTISEMENT_RESUMED="advertisement:resumed",e.ADVERTISEMENT_ENDED="advertisement:ended",e.ADVERTISEMENT_ERROR="advertisement:error"}(ue||(ue={}));var le=n(3379),ce=n.n(le),de=n(7795),fe=n.n(de),pe=n(569),he=n.n(pe),ve=n(3565),ge=n.n(ve),me=n(9216),ye=n.n(me),be=n(4589),we=n.n(be),Oe=n(967),Ae={};Ae.styleTagTransform=we(),Ae.setAttributes=ge(),Ae.insert=he().bind(null,"head"),Ae.domAPI=fe(),Ae.insertStyleElement=ye(),ce()(Oe.Z,Ae);var Pe=Oe.Z&&Oe.Z.locals?Oe.Z.locals:void 0;const Ee=16/9,Ce="Player",Se=e=>{e.defineWidget({name:Ce,async initialize(){var e,t,n,r,i,o,s;const{href:a,hash:u,protocol:l,hostname:c}=window.location;this.startTime=Date.now(),this.params.referrer=null!==(e=this.params.referrer)&&void 0!==e?e:a,this.params.aspectRatio=null!==(t=this.params.aspectRatio)&&void 0!==t?t:Ee,this.properties.id=this.id;const d=this.params.referrer?g(this.params.referrer):null,f=function(e){var t,n=e.protocol,r=e.host,i=e.pathname,o=e.query;if(o&&"object"==typeof o){var s=v(o);t=new URLSearchParams(s).toString()}else t=o;return"".concat(n?"".concat(n,"//"):"").concat(null!=r?r:"").concat(i).concat(t?"?".concat(t):"")}({protocol:l,host:c}),p=g(a),m=g(`${f}${u.replace(/^#/,"?")}`),y=Object.assign(Object.assign(Object.assign({},d),p),m);let b;try{b=JSON.parse(atob(y.rprecord)||"")}catch(e){}const w=v(Object.assign(Object.assign({},this.params),{initialId:this.params.id,id:null!==(n=null==b?void 0:b.recordId)&&void 0!==n?n:this.params.id,debug:null!==(r=this.params.debug)&&void 0!==r?r:y.hasOwnProperty("rpdebug")||y.hasOwnProperty("rpversion"),lazy:"true"===(null===(i=this.params.lazy)||void 0===i?void 0:i.toString()),lazyOffset:Number(this.params.lazyOffset)||300}));for(const e in w)"object"==typeof w[e]&&(w[e]=JSON.stringify(w[e])),"function"==typeof w[e]&&delete w[e];const O=new URLSearchParams(w).toString();await this.whenContainerInViewport({lazy:w.lazy,offset:w.lazyOffset}),this.iframe=this.createIFrame(`https://vp.rambler.ru/player/1.116.0/player.html#${O}`),this.iframe.element.setAttribute("allow","autoplay; fullscreen"),this.iframe.element.setAttribute("allowfullscreen",""),this.iframe.element.title=this.name,this.layout=new h.Z,this.layout.show(),this.layout.showLoading(),this.layout.element.style.height=`${null!==(o=this.params.height)&&void 0!==o?o:this.container.element.offsetWidth/this.params.aspectRatio}px`,this.layout.element.style.backgroundColor="black",this.layout.element.style.position="relative",this.layout.addToDOM(this.container),this.layout.setContent(this.iframe);try{if(await this.iframe.initialize(),this.layout.element.style.height="",this.layout.element.style.backgroundColor="",this.layout.hideLoading(),this.emit("widgetShown"),b){const e="number"==typeof(A=this.params.id)?A:"string"==typeof A&&A.length?/^\d+$/.test(A)?Number(A):A:void 0;e&&e===b.id&&(null===(s=this.iframe)||void 0===s||s.provider.scrollTo(-50,300))}}catch(e){throw this.destroy(),e}var A},destroy(){var e,t,n;null===(e=this.unsubscribePageScroll)||void 0===e||e.call(this),null===(t=this.unsubscribePageOrientationChange)||void 0===t||t.call(this),null===(n=this.viewportManager)||void 0===n||n.destroy(),this.playerId&&this.mediator.stopPlaying(this.playerId,this.params.dockingParentId)}},{getSessionToken:w,getSubscription:A,getCookie:te,setCookie:ne,loyalty:ee,activateTop100:se,sendCustomVars:ae,getFingerPrintUserId:K,getStartTime(){return this.startTime},getVisibleArea(){return(e=>{let t=(0,o.getVisibleArea)(e);const n=e.getBoundingClientRect();return t.height>0&&e===document.elementFromPoint(Math.ceil(n.left+t.left+t.width/2),Math.ceil(n.top+t.top+t.height/2))||(t=Object.assign(Object.assign({},t),{width:0,height:0})),t})(this.iframe.element)},getEmbedVisibleArea(){return(0,o.getVisibleArea)(this.layout.element)},setPlayerId(e){this.playerId=e},subscribePageOrientationChange(e){const t=p()((()=>{e()}),300);return window.addEventListener("orientationchange",t),()=>{window.removeEventListener("orientationchange",t)}},subscribePageScroll(e){const t=i()((()=>{this.getEmbedVisibleArea&&!this.mediator.hasFullscreen()&&e(this.getEmbedVisibleArea())}));return s.globalViewportEvents.on("change",t),()=>{s.globalViewportEvents.removeListener("change",t)}},subscribeVisibleAreaChange(e){if(!this.viewportManager){const e=()=>{this.emit("viewportChange")};this.viewportManager=((e,t)=>{const n=i()(t);let r,o;return e&&(r=u(e,!0),r&&r!==document.body&&r!==document.documentElement&&(r.addEventListener("scroll",n,!1),o=!0)),s.globalViewportEvents.on("change",n),s.mutationEvents.on("mutation",n),document.body.addEventListener("transitionend",n),{destroy(){s.globalViewportEvents.removeListener("change",n),s.mutationEvents.removeListener("mutation",n),document.body.removeEventListener("transitionend",n),o&&r.removeEventListener("scroll",n,!1)}}})(this.iframe.element,e)}const t=()=>{this.getVisibleArea&&!this.mediator.hasFullscreen()&&e(this.getVisibleArea())};return this.on("viewportChange",t),()=>{this.removeListener("viewportChange",t)}},dock({docking:e="left-down",dockingWidth:t=400,dockingOffsetX:n,dockingOffsetY:r,dockingCloseDelay:i,dockingParentId:o,onCloseClick:s,buttonSize:a,buttonGap:u,buttonHoverable:l,buttonStyle:c}){var d,f;const p=null!=n?n:10,h=null!=r?r:10;let v,g,m,y,b;const w=o?document.querySelector(o):null,O=()=>{this.closeDockButton&&this.dockingX&&(this.closeDockButton.style[this.dockingX]=`${y+v+u}px`)},A=()=>{const{aspectRatio:n=Ee}=this.params,{height:r}=this.layout.element.getBoundingClientRect(),{clientWidth:i}=document.documentElement;v=Math.min(i-2*p-u-a,t),g=v/n,this.dockingX=~e.indexOf("right")?"right":"left",this.dockingY=~e.indexOf("up")?"top":"bottom",clearTimeout(this.resetLayoutHeightTimeout),this.layout.element.style.height=`${r}px`,this.layout.element.style.position="",this.iframe.element.style.zIndex="16777271",this.iframe.element.style.width=`${v}px`,this.iframe.element.style.minWidth=`${v}px`,this.iframe.element.style.maxWidth=`${v}px`,this.iframe.element.style.maxHeight=`${g}px`},P=()=>{const t=null==w?void 0:w.getBoundingClientRect(),{clientWidth:n,clientHeight:r}=document.documentElement,i="bottom"===this.dockingY?r-g-2*h:0,o="top"===this.dockingY?g+2*h:r,s=w&&t?i<t.top?"top":o>t.bottom?"bottom":null:null;if((s!==m||n!==b)&&this.dockingX&&this.dockingY&&this.closeDockButton){const r=null==s?this.dockingY:s,i=t?~e.indexOf("right")?n-t.right:t.left:0;y=null==s?p:p-i,b=n,~e.indexOf("middle")&&(n>v+2*(p+a+u)?y=(n-v)/2:n>v+2*p+a+u&&(y=(n-v-a-u)/2)),this.iframe.element.style.position=null==s?"fixed":"absolute",this.iframe.element.style[this.dockingX]=`${y}px`,this.iframe.element.style[r]=`${h}px`,this.iframe.element.style["top"===r?"bottom":"top"]="",this.closeDockButton.style.position=null==s?"":"absolute",this.closeDockButton.style[r]="top"===r?`${h}px`:h+g-a+"px",this.closeDockButton.style["top"===r?"bottom":"top"]="",m=s}};A(),P(),(()=>{const{parentElement:e}=this.iframe.element;if(e){const t=this.closeDockButton=((e,t,n)=>{const r=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=[["width",`${e}px`],["height",`${e}px`]];Object.keys(n).forEach((e=>{i.push([e,n[e]])})),r.setAttributeNS(null,"class",[Pe.close,t&&Pe.hoverable].filter(Boolean).join(" ")),r.setAttributeNS(null,"style",i.map((e=>e.join(":"))).join(";")),r.setAttributeNS(null,"viewbox","0 0 20 20");const o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttributeNS(null,"d","M20 0v20M0 0v20M14.18 6.88 11.06 10l3.12 3.12a.5.5 0 0 1 0 .7l-.36.36a.5.5 0 0 1-.7 0L10 11.06l-3.12 3.12a.5.5 0 0 1-.7 0l-.36-.36a.5.5 0 0 1 0-.7L8.94 10 5.82 6.88a.5.5 0 0 1 0-.7l.36-.36a.5.5 0 0 1 .7 0L10 8.94l3.12-3.12a.5.5 0 0 1 .7 0l.36.36a.5.5 0 0 1 0 .7"),r.appendChild(o),r})(a,l,c);t.onclick=()=>s(),O(),i&&(t.classList.add(Pe.hidden),this.closeDelayTimeout=window.setTimeout((()=>{t.classList.remove(Pe.hidden)}),1e3*i)),this.layout.element.style.overflow="visible",e.style.overflow="visible",e.appendChild(t)}})(),this.unsubscribePageOrientationChange=null===(d=this.subscribePageOrientationChange)||void 0===d?void 0:d.call(this,(()=>{m="",A(),P(),O()})),this.unsubscribePageScroll=null===(f=this.subscribePageScroll)||void 0===f?void 0:f.call(this,(()=>{P(),O()}))},async undock(){var e,t;this.iframe.element.style.width="",this.iframe.element.style.minWidth="",this.iframe.element.style.maxWidth="",this.iframe.element.style.maxHeight="",this.dockingX&&(this.iframe.element.style[this.dockingX]=""),this.dockingY&&(this.iframe.element.style[this.dockingY]=""),this.iframe.element.style.position="",this.iframe.element.style.zIndex="";const{parentElement:n}=this.iframe.element;n&&(this.layout.element.style.overflow="",this.layout.element.style.position="relative",n.style.overflow="",this.closeDockButton&&(n.removeChild(this.closeDockButton),delete this.closeDockButton)),clearTimeout(this.resetLayoutHeightTimeout),this.closeDelayTimeout&&window.clearTimeout(this.closeDelayTimeout),null===(e=this.unsubscribePageScroll)||void 0===e||e.call(this),null===(t=this.unsubscribePageOrientationChange)||void 0===t||t.call(this),await new Promise((e=>{this.resetLayoutHeightTimeout=window.setTimeout((async()=>{this.layout.element.style.height="",this.emit("viewportChange"),e()}),1e3)}))}})};class xe extends l.Z{constructor(){super(...arguments),this.buildWidget=async(e,n,r)=>{if(e in t)return super.buildWidget(e,n,r)}}}let _e;const ke="594de936d90ad705a3c05dd6ac8c4a94ae7aa515",Ie=()=>{if(!_e){const e=new xe({},{state:{},canPlay(e,t){var n,r;return null!=t||(t=ke),null!==(n=(r=this.state)[t])&&void 0!==n||(r[t]=e),!this.state[t]||this.state[t]===e},stopPlaying(e,t){null!=t||(t=ke),this.state[t]===e&&delete this.state[t]},hasFullscreen(){return Boolean(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)||this.state.fullscreen},toggleFullscreen(e){this.state.fullscreen=e},disableDocking(){this.emit("disableDocking",!0)},enforceStart(e,t){null!=t||(t=ke),this.state[t]=e,this.emit("enforceStart",e)},getWidgetInstances(){return this.widgetInstances},setOptionStorage(e,t){((e,t)=>{const n=c(d);!function(e,t,n){void 0===n&&(n={});var r=n.raw;try{var i=r?String(t):JSON.stringify(t);window.localStorage.setItem(e,i)}catch(e){}}(d,Object.assign(Object.assign({},n),{[e]:t}))})(e,t),this.emit(`changeOptions:${e}`,t)},getOptionStorage(e){return(e=>{var t;const n=c(d);return null!==(t=null==n?void 0:n[e])&&void 0!==t?t:null})(e)}});Object.keys(t).forEach((n=>{const{defineWidget:r}=t[n];null==r||r(e)})),_e=e.externalize()}return _e};var je,Le=n(5093),Te=n.n(Le),Me=n(7187);Me.EventEmitter.defaultMaxListeners=1/0;class De{static push(e){e()}static fallback(){[].slice.call(document.querySelectorAll('iframe[src*="media.eagleplatform.com"]')).forEach((e=>{const{parentElement:t}=e,n=g(e.src),r=document.createElement("div");r.dataset.widget=Ce,n.record_id&&(r.dataset.id=n.record_id.toString()),n.id&&(r.dataset.id=n.id.toString()),n.ad_template_id&&(r.dataset.adTemplateId=n.ad_template_id.toString()),n.player_template_id&&(r.dataset.playerTemplateId=n.player_template_id.toString()),n.multiplayer_filter_id&&(r.dataset.multiplayerFilterId=n.multiplayer_filter_id.toString()),n.stream&&(r.dataset.live=n.stream.toString()),null==t||t.removeChild(e),null==t||t.appendChild(r)}))}static getSourceLinks(){const e=Ie().getWidgetInstances();return Promise.all(Object.keys(e).map((t=>{var n,r,i;return null===(i=null===(r=null===(n=e[t])||void 0===n?void 0:n.iframe)||void 0===r?void 0:r.consumer)||void 0===i?void 0:i.getSourceLink()})))}constructor(e){var t,n;this.emitter=new Me.EventEmitter;const{parent:r,parentId:i}=e,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["parent","parentId"]);if(this.containerElement=i?document.querySelector(i):r,!this.containerElement)throw new Error("missed parent element that the player should be inserted into");const s=this.containerElement.rcWidget?Promise.resolve(this.containerElement.rcWidget):this.containerElement.dataset.widget===Ce?new Promise((e=>Te()((()=>e(this.containerElement.rcWidget))))):Promise.resolve(null);null!==(t=(n=this.containerElement).rcWidgetPromise)&&void 0!==t||(n.rcWidgetPromise=s.then((e=>e?new Promise((t=>{var n;return(null===(n=e.iframe)||void 0===n?void 0:n.consumer)?t():e.iframe.transport.once("ready",t)})).then((()=>e.externalize())):Ie().buildWidget(Ce,this.containerElement,o)))),this.containerElement.rcWidgetPromise.then((e=>{this.consumer=e,Object.keys(De.Events).forEach((e=>{const t=De.Events[e];"string"==typeof t&&this.consumer.on(t,((...e)=>{this.emitter.emit(t,...e)}))})),this.emitter.emit(De.Events.PLAYER_READY)}))}toggleFullscreen(){var e;return null===(e=this.consumer)||void 0===e?void 0:e.toggleFullscreen()}resize(e){var t;return null===(t=this.consumer)||void 0===t?void 0:t.resize(e)}play(){var e;return null===(e=this.consumer)||void 0===e?void 0:e.play()}pause(){var e;return null===(e=this.consumer)||void 0===e?void 0:e.pause()}stop(){var e;return null===(e=this.consumer)||void 0===e?void 0:e.stop()}seek(e){var t;return null===(t=this.consumer)||void 0===t?void 0:t.seek(e)}seekPercentage(e){var t;return null===(t=this.consumer)||void 0===t?void 0:t.seekPercentage(e)}mute(){var e;return null===(e=this.consumer)||void 0===e?void 0:e.mute()}unmute(){var e;return null===(e=this.consumer)||void 0===e?void 0:e.unmute()}setVolume(e){var t;return null===(t=this.consumer)||void 0===t?void 0:t.setVolume(e)}configure(e){var t;return null===(t=this.consumer)||void 0===t?void 0:t.configure(e)}isReady(){var e;return null===(e=this.consumer)||void 0===e?void 0:e.isReady()}isPlaying(){var e;return null===(e=this.consumer)||void 0===e?void 0:e.isPlaying()}getVolume(){var e;return null===(e=this.consumer)||void 0===e?void 0:e.getVolume()}getCurrentTime(){var e;return null===(e=this.consumer)||void 0===e?void 0:e.getCurrentTime()}getStartTimeOffset(){var e;return null===(e=this.consumer)||void 0===e?void 0:e.getStartTimeOffset()}getDuration(){var e;return null===(e=this.consumer)||void 0===e?void 0:e.getDuration()}on(e,t){this.emitter.on(e,t)}once(e,t){this.emitter.once(e,t)}removeListener(e,t){this.emitter.removeListener(e,t)}destroy(){var e,t,n;return null===(e=this.containerElement)||void 0===e||delete e.rcWidget,null===(t=this.containerElement)||void 0===t||delete t.rcWidgetPromise,null===(n=this.consumer)||void 0===n?void 0:n.destroy()}}De.Events=ue;const Re=null===(je=window.location.search.match(/rpversion=([^&]+)(?:&|$)/))||void 0===je?void 0:je[1];if(Re&&"1.116.0"!==Re){const e=`https://vp.rambler.ru/player/${Re}/sdk.js`;document.querySelector(`script[src="${e}"]`)||a(e)}else if(Array.isArray(window.RamblerPlayer)||!window.RamblerPlayer){const e=window.RamblerPlayer||[];Ie(),window.RamblerPlayer=De,e.forEach((e=>window.RamblerPlayer.push(e)))}}()}();
//# sourceMappingURL=sdk.js.map