"use strict";(self.webpackChunk_multimediallc_cb_ts=self.webpackChunk_multimediallc_cb_ts||[]).push([[375],{9597:function(e,t,n){n.d(t,{y:function(){return d}});var i=n(2951),r=n(1976),o=n(7591),a=n(9492),s=n(7597),l=n(3753),c=n(6767),u=n(9),h=n(3705),p=n(3543),f=n(7542);var d=function(e){(0,o.Z)(d,e);var t,n,u=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,s.Z)(t);if(n){var r=(0,s.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,a.Z)(this,e)});function d(){var e;(0,i.Z)(this,d),(e=u.call(this)).element.style.position="relative",e.element.style.display="none",e.innerDiv=document.createElement("div"),e.innerDiv.className="top_alert",e.element.appendChild(e.innerDiv);var t=document.createElement("span");t.className="top_alert_close",t.innerText="Ã—",t.style.fontSize="2em",e.innerDiv.appendChild(t),t.onclick=function(){(0,c.C)("mobile_redirect_hide","true",.75),e.element.style.display="none"};var n=document.createElement("div"),r=document.createElement("span");r.textContent=p.ag.improvedMobileSite,n.appendChild(r);var o=document.createElement("div"),a=document.createElement("ul");a.style.listStyleType="disc";var s=document.createElement("li");s.textContent=p.ag.myCollectionText;var l=document.createElement("li");l.textContent=p.ag.satisfactionVoting;var m=document.createElement("li");m.textContent=p.ag.reportAbuse,a.appendChild(s),a.appendChild(l),a.appendChild(m),o.appendChild(a);var v=document.createElement("div"),g=document.createElement("span");g.innerHTML=p.ag.visitMobileSiteOrFeedback(),e.mobileLink=g.querySelectorAll("a")[0];var y=g.querySelectorAll("a")[1];return v.appendChild(g),e.mobileLink.onclick=function(){(0,h.fg)("MobileAlertLinkClicked")},y.onclick=function(){(0,h.fg)("MobileAlertSurveyClicked"),f.F.fire({source:"desktop_on_mobile"})},e.innerDiv.appendChild(n),e.innerDiv.appendChild(o),e.innerDiv.appendChild(v),e}return(0,r.Z)(d,[{key:"show",value:function(e){var t=void 0!==e?"?b=".concat(e,"&"):"?";this.mobileLink.href=(0,l.BN)("https://m.chaturbate.com/mobile/".concat(t,"source=desktop")),this.element.style.display="block"}}]),d}(u.w)},5755:function(e,t,n){n.d(t,{t:function(){return O}});var i=n(126),r=n(4649),o=n(3243),a=n(2951),s=n(1976),l=n(7591),c=n(9492),u=n(7597);function h(e,t){return Array.from(Array(t-e+1).keys()).map((function(t){return t+e}))}var p=n(7585),f=n(47),d=n(3753),m=n(1289);function v(e,t,n){var i;n=null!==(i=n)&&void 0!==i?i:"page";var r="",o="";if(void 0!==t){var a=t.split("?");2===a.length?(r=a[0],o=a[1]):a.length<=1&&(r=t)}else r=window.location.pathname,o=window.location.search;var s=(0,m.dD)(o);return s[n]="".concat(e),"".concat(r,"?").concat((0,m.Ie)(s))}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var y=function(e){(0,l.Z)(o,e);var t,n,i=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,c.Z)(this,e)});function o(){return(0,a.Z)(this,o),i.apply(this,arguments)}return(0,s.Z)(o,[{key:"createElement",value:function(e){var t=this,n=e.reloadOnPageChange?{"data-floatingnav":""}:{};return(0,f.vz)("li",null,(0,f.vz)("a",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:"".concat(e.direction," no-link"),onClick:e.onClick,href:(0,d.BN)(v(e.page,e.baseUrl,e.pageParam)),ref:function(e){t._anchorElement=e}},n),e.direction))}},{key:"toggleDisable",value:function(e){e?this._anchorElement.classList.add("no-link"):this._anchorElement.classList.remove("no-link")}},{key:"isDisabled",value:function(){return this.element.classList.contains("no-link")}}]),o}(p.I);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var b=function(e){(0,l.Z)(o,e);var t,n,i=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,c.Z)(this,e)});function o(){return(0,a.Z)(this,o),i.apply(this,arguments)}return(0,s.Z)(o,[{key:"createElement",value:function(e){var t=e.reloadOnPageChange?{"data-floatingnav":""}:{};return(0,f.vz)("li",{className:"page_number_container"},(0,f.vz)("a",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({onClick:e.onClick,href:(0,d.BN)(v(e.page,e.baseUrl,e.pageParam))},t),e.page))}},{key:"toggleSelected",value:function(e){e?this.element.classList.add("active"):this.element.classList.remove("active")}},{key:"isSelected",value:function(){return this.element.classList.contains("active")}}]),o}(p.I);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,u.Z)(e);if(t){var r=(0,u.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,c.Z)(this,n)}}var P=function(e){(0,l.Z)(n,e);var t=R(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"createElement",value:function(){return(0,f.vz)("span",{className:"endless_separator"},"...")}},{key:"setShowHide",value:function(e){e?this.showElement():this.hideElement()}}]),n}(p.I),O=function(e){(0,l.Z)(n,e);var t=R(n);function n(e){var i,r;return(0,a.Z)(this,n),(r=t.call(this,e)).pageParam=null!==(i=e.pageParam)&&void 0!==i?i:"page",r.setState({currentPage:r.props.initialPage,totalItems:r.props.totalItems}),r}return(0,s.Z)(n,[{key:"currentPage",get:function(){return this.state.currentPage},set:function(e){this.setState(C(C({},this.state),{},{currentPage:e}))}},{key:"createElement",value:function(e){var t=this;return this.props=e,this.prevNavigationLink=this.createDirectionalButton("prev",this.state.currentPage-1),this.nextNavigationLink=this.createDirectionalButton("next",this.state.currentPage+1),(0,f.vz)("ul",{className:"paging","data-paction":"PageNumber"},this.prevNavigationLink.element,(0,f.vz)(P,{classRef:function(e){t.previousSpacer=e}}),(0,f.vz)(P,{classRef:function(e){t.nextSpacer=e}}),this.nextNavigationLink.element)}},{key:"generatePaginationNumberSequence",value:function(){var e=!1,t=!1;this.maxPages=n.calculateMaxPages(this.state.totalItems,this.props.itemsPerPage),(this.state.currentPage>this.maxPages||this.state.currentPage<n.LOWEST_PAGE_NUMBER)&&(this.state.currentPage=n.LOWEST_PAGE_NUMBER);var r=this.state.currentPage-1,o=Math.min(r,n.MAX_PAGE_NUMBERS_PER_SIDE),a=h(this.state.currentPage-o,this.state.currentPage-1);r>n.MAX_PAGE_NUMBERS_PER_SIDE&&(a[0]=n.LOWEST_PAGE_NUMBER,e=!0);var s=this.maxPages-this.state.currentPage,l=Math.min(s,n.MAX_PAGE_NUMBERS_PER_SIDE),c=h(this.state.currentPage+1,this.state.currentPage+l);return s>n.MAX_PAGE_NUMBERS_PER_SIDE&&(c[l-1]=this.maxPages,t=!0),{pageNumbers:[].concat((0,i.Z)(a),[this.state.currentPage],(0,i.Z)(c)),showPreviousEllipses:e,showNextEllipses:t}}},{key:"createDirectionalButton",value:function(e,t){var n=this,i=this.nextNavigationLink,r=this.maxPages;"prev"===e&&(i=this.prevNavigationLink,r=1);var o=new y({direction:e,baseUrl:this.props.baseUrl,onClick:function(e){e instanceof MouseEvent&&(e.ctrlKey||e.metaKey||e.shiftKey)||(n.props.reloadOnPageChange||e.preventDefault(),i.isDisabled()||n.onUserInitiatedPageChange(t))},page:t,reloadOnPageChange:this.props.reloadOnPageChange,pageParam:this.props.pageParam});return o.toggleDisable(this.state.currentPage===r),o}},{key:"createPageNumber",value:function(e,t){var n=this,i=new b({baseUrl:this.props.baseUrl,onClick:function(t){!function(t,i){t instanceof MouseEvent&&(t.ctrlKey||t.metaKey||t.shiftKey)||(n.props.reloadOnPageChange||t.preventDefault(),i.isSelected()||n.onUserInitiatedPageChange(e))}(t,i)},page:e,reloadOnPageChange:this.props.reloadOnPageChange,pageParam:this.props.pageParam});return i.toggleSelected(t),i}},{key:"rearrangePaginationButtons",value:function(e){this.removeAllDOMChildren(),this.addChild(this.createDirectionalButton("prev",this.state.currentPage-1));for(var t=0;t<e.length;t++){t===e.length-1&&this.addChild(this.nextSpacer);var n=this.createPageNumber(e[t],this.state.currentPage===e[t]);t===e.length-1&&!0===this.props.addLastPageAction&&(n.element.dataset.pactionName="LastPage"),this.addChild(n),0===t&&this.addChild(this.previousSpacer)}this.addChild(this.createDirectionalButton("next",this.state.currentPage+1))}},{key:"updateState",value:function(){(0,o.Z)((0,u.Z)(n.prototype),"updateState",this).call(this);var e=this.generatePaginationNumberSequence(),t=e.pageNumbers;this.rearrangePaginationButtons(t),this.nextSpacer.setShowHide(e.showNextEllipses),this.previousSpacer.setShowHide(e.showPreviousEllipses)}},{key:"onUserInitiatedPageChange",value:function(e){this.setState(C(C({},this.state),{},{currentPage:e})),void 0!==this.props.onPageChange&&this.props.onPageChange(e)}}],[{key:"calculateMaxPages",value:function(e,t){return Math.max(Math.ceil(e/t),n.LOWEST_PAGE_NUMBER)}}]),n}(p.I);O.MAX_PAGE_NUMBERS_PER_SIDE=4,O.LOWEST_PAGE_NUMBER=1},1436:function(e,t,n){n.d(t,{Z:function(){return d}});var i=n(2951),r=n(1976),o=n(3243),a=n(7591),s=n(9492),l=n(7597),c=n(7654),u=n(7585),h=n(3543),p=n(47),f=n(2800);var d=function(e){(0,a.Z)(d,e);var t,n,u=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,s.Z)(this,e)});function d(){return(0,i.Z)(this,d),u.apply(this,arguments)}return(0,r.Z)(d,[{key:"createElement",value:function(e){return(0,p.vz)("p",{className:"filters-info"})}},{key:"alertLinks",value:function(e){return(0,p.vz)("span",null,(0,p.vz)("span",null,h.ag.notShowingFromRegions," "),e.map((function(t,n){return(0,p.vz)("span",null,(0,p.vz)("a",{className:"advanced_search_region",href:"#"},t),(0,p.vz)("span",null,n===e.length-1?"":n<e.length-2?", ":" ".concat(h.ag.and," ")))})))}},{key:"initUI",value:function(e){var t=this;(0,o.Z)((0,l.Z)(d.prototype),"initUI",this).call(this,e),this.selectedRegions=f.J.current.regions,this.advancedSearchOptions=e.advancedSearchOptions,this.regionChangeListener=this.advancedSearchOptions.regionsChanged.listen((function(e){t.selectedRegions=""!==e?e:c.PR.join(","),t.updateAlertMessage()})),this.updateAlertMessage()}},{key:"updateAlertMessage",value:function(){var e,t=this,n=(0,c.ip)(),i=(e=void 0===n?this.selectedRegions:n,c.PR.filter((function(t){return!e.includes(t)})).map((function(e){var t;return null!==(t=m.get(e))&&void 0!==t?t:""})));if(this.element.textContent="",i.length>0){var r=this.alertLinks(i);this.element.appendChild(r)}window.setTimeout((function(){t.advancedSearchOptions.bindAdvancedSearchRegion()}))}},{key:"dispose",value:function(){this.regionChangeListener.removeListener()}}]),d}(u.I),m=new Map([["NA",h.ag.northAmericaTitle],["SA",h.ag.southAmericaTitle],["AS",h.ag.asiaTitle],["ER",h.ag.europeRussiaTitle],["O",h.ag.otherTitle]])},4707:function(e,t,n){n.d(t,{B:function(){return h}});var i=n(2951),r=n(1976),o=n(7591),a=n(9492),s=n(7597),l=n(7585),c=n(3543),u=n(47);var h=function(e){(0,o.Z)(h,e);var t,n,l=(t=h,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,s.Z)(t);if(n){var r=(0,s.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,a.Z)(this,e)});function h(e){return(0,i.Z)(this,h),l.call(this,e)}return(0,r.Z)(h,[{key:"createElement",value:function(e){var t,n=null!==(t=e.searchString)&&void 0!==t?t:"";return(0,u.vz)("p",{className:"no-rooms-available"},this.messageString(n))}},{key:"updateMessage",value:function(e){this.element.textContent=this.messageString(e)}},{key:"messageString",value:function(e){return e.length>0?c.ag.noSearchResultsMatch(e):c.ag.noRoomsAvailableFiltered}}]),h}(l.I)},6178:function(e,t,n){n.d(t,{rT:function(){return S},te:function(){return O}});var i=n(2951),r=n(1976),o=n(3243),a=n(7591),s=n(9492),l=n(7597),c=n(8759),u=n(7654),h=n(3753),p=n(9),f=n(7585),d=n(8263),m=n(1794),v=n(9165),g=n(6422),y=n(3543),k=n(47),b=n(5696),w=n(180),C=n(9395),R=n(8871);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,l.Z)(e);if(t){var r=(0,l.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,s.Z)(this,n)}}var O=new m.xB("GenderDropdownToggle"),S=function(e){(0,a.Z)(n,e);var t=P(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"createElement",value:function(e){return this.props=e,this.listeners=new m.mM,(0,k.vz)("ul",{className:"sub-nav genderTabs",style:{display:"block",top:"1px",marginTop:"2px"}})}},{key:"renderTabs",value:function(){var e,t,n,i=this;this.listeners.removeAll(),null===(e=this.tabsDropdown)||void 0===e||e.dispose();var r=(0,v.ej)(),o=null!==(t=this.props.enableGenderedLinkUpdates)&&void 0!==t&&t,a=E()||(0,u._A)()?y.ag.featuredCAPS:y.ag.allGendersCAPS;this.removeAllDOMChildren(),this.element.appendChild((0,k.vz)(Z,{text:null!==(n=this.props.featuredTabTitle)&&void 0!==n?n:a,isActive:r===v.Y0.All,gender:v.Y0.All,enableGenderedLinkUpdates:o,onTabClick:this.props.onTabClick})),(0,u.W1)()||[v.Y0.Female,v.Y0.Male,v.Y0.Couple,v.Y0.Trans].forEach((function(e){i.element.appendChild((0,k.vz)(Z,{isActive:r===e,gender:e,enableGenderedLinkUpdates:o,onTabClick:i.props.onTabClick}))})),this.makeGenderTabsResponsive(),!Boolean(this.props.skipJoinOverlaySetup)&&this.element.isConnected&&(0,g.Wk)(this.element)}},{key:"initUI",value:function(e){(0,o.Z)((0,l.Z)(n.prototype),"initUI",this).call(this,e),this.element.style.overflow="hidden",this.element.style.position="relative",this.element.style.display="block",this.element.style.top="1px",this.element.style.marginTop="2px",this.renderTabs(),window.setTimeout((function(){(0,c.sg)()||(0,c.z8)()||(document.body.style.minWidth="".concat(500-(0,d.np)(),"px"))}))}},{key:"initData",value:function(e){var t=this;(0,o.Z)((0,l.Z)(n.prototype),"initData",this).call(this,e),C.Mj.onSubmit.addListener((function(){t.renderTabs()}),this.element)}},{key:"makeGenderTabsResponsive",value:function(){var e=this,t=this.element;if(null!==t&&t instanceof HTMLElement){var n=new p.w(t);Array.from(t.children).forEach((function(t){if(t instanceof HTMLElement){t.style.display="inline-block",t.style.position="relative",t.style.font=getComputedStyle(t).font;var i=new b.tB(t);e.listeners.add(i.onCollapseEvent.listen((function(e){i.element.style.margin=e?"5px 0":"",i.element.style.display=e?"block":"inline-block"}))),t.firstElementChild instanceof HTMLAnchorElement&&(t.firstElementChild.style.cursor=getComputedStyle(t.firstElementChild).cursor,t.firstElementChild.style.textDecoration="none"),n.attachChild(i)}})),this.tabsDropdown=new b.QY,this.tabsDropdown.element.classList.add("gender-tab"),n.addChild(this.tabsDropdown),this.listeners.add(w.i.searchInputWidthChanged.listen((function(t){e.tabsDropdown.setSpacerWidth(t),e.tabsDropdown.collapseIfNeeded()}))),this.tabsDropdown.dropDown.toggleEvent.listen((function(e){O.fire(e.isShowing)})),(0,d.Zs)(this.tabsDropdown,{borderWidth:"1px",borderStyle:"solid",borderRadius:"4px 4px 0 0",height:"27px",lineHeight:"27px",marginRight:"2px",width:"41px"}),(0,d.Zs)(this.tabsDropdown.dropDown,{padding:"8px 20px 8px 0",width:"108px"})}}}]),n}(f.I),Z=function(e){(0,a.Z)(n,e);var t=P(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"createElement",value:function(e){var t,i=this;return(0,k.vz)("li",{className:"gender-tab"},(0,k.vz)("a",{ref:function(e){i.anchorElement=e},className:"gender-tab tabElement tabElementLink".concat(e.isActive?" active":""),"data-paction":"TopTab","data-floatingnav":"",href:T(e.gender),onClick:function(t){t.ctrlKey||t.metaKey||t.shiftKey||(e.enableGenderedLinkUpdates&&(t.preventDefault(),R.Me.fire(e.gender)),void 0!==e.onTabClick&&e.onTabClick(t))}},null!==(t=e.text)&&void 0!==t?t:n.GenderSymbolToPluralCapsCategoryMap.get(e.gender)))}},{key:"updateState",value:function(){(0,o.Z)((0,l.Z)(n.prototype),"updateState",this).call(this),this.state.isActive?this.anchorElement.classList.add("active"):this.anchorElement.classList.remove("active")}}]),n}(f.I);function T(e,t){var n=(0,v.$p)(e),i=new URLSearchParams(window.location.search);i.delete("g"),i.delete("page");var r=null!=t?t:i.get("keywords");null!==r&&""!==r?i.set("keywords",r):i.delete("keywords");var o=i.toString();return(0,h.BN)("".concat(function(e){return e===v.Y0.All?L():E()?"/".concat((0,v.eN)(e),"/"):"".concat(L()).concat(v.aI.get(e),"/")}(n)).concat(o?"?".concat(o):""))}function E(e){var t=(0,u.fq)(e);return["","top","female-cams","male-cams","trans-cams","couple-cams","accounts/welcome"].includes(t)}function L(e){var t,n=null!=e?e:window.location.pathname;if(n.endsWith("/")||(n+="/"),E(n))return"/";var i=n.split("/"),r=null!==(t=i[i.length-2])&&void 0!==t?t:"";return(Boolean(r)&&v.BK.has(r)||(0,v.$p)(r)!==v.Y0.All)&&i.splice(-2,1),i.join("/")}Z.GenderSymbolToPluralCapsCategoryMap=new Map([[v.Y0.All,""],[v.Y0.Male,y.ag.menCAPS],[v.Y0.Female,y.ag.womenCAPS],[v.Y0.Couple,y.ag.couplesCAPS],[v.Y0.Trans,y.ag.transCAPS],[v.Y0.OldTrans,y.ag.transCAPS]])},3854:function(e,t,n){n.d(t,{j:function(){return h}});var i=n(8759),r=n(7693),o=n(3753),a=n(6767);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var l=10,c=60;function u(e){var t=e.getAttribute("data-cookie");null!==t&&"1"!==(0,a.ve)(t)&&(e.style.display="");var n=e.querySelectorAll("a.dismiss_notice_tfa_and_email"),i=e.querySelectorAll("a.dismiss_notice"),s=e.querySelectorAll("a.dismiss_notice_no_persist"),u=e.querySelectorAll("a.dismiss_notice_ajax");n.forEach((function(e){(0,r.j9)("click",e,(function(){p(e,l)}))})),i.forEach((function(e){(0,r.j9)("click",e,(function(){p(e,c)}))})),s.forEach((function(e){(0,r.j9)("click",e,(function(){p(e)}))})),u.forEach((function(e){(0,r.j9)("click",e,(function(){!function(e){var t=e.closest("div.dismissible_notice");if(null!==t){var n=t,i=e.getAttribute("data-dismiss-url");null!==i&&(0,o.I5)(i,{}),n.style.display="none"}}(e)}))}))}function h(){var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}(document.querySelectorAll("div.dismissible_notice"));try{for(t.s();!(e=t.n()).done;){var n=e.value;"ie-support-notice"===n.id&&(0,i.H$)()||u(n)}}catch(e){t.e(e)}finally{t.f()}}function p(e,t){var n=e.closest("div.dismissible_notice");if(null!==n){var i=n,r=i.getAttribute("data-cookie");null!==r&&void 0!==t&&(0,a.C)(r,"1",t),i.style.display="none"}}},180:function(e,t,n){n.d(t,{i:function(){return O},r:function(){return P}});var i=n(2951),r=n(1976),o=n(3243),a=n(7591),s=n(9492),l=n(7597),c=n(8759),u=n(7693),h=n(8263),p=n(1794),f=n(6921),d=n(3705),m=n(8871),v=n(6178),g=n(9760),y=n(9395);var k=182,b={display:"inline-block",position:"relative",cssFloat:"right",right:"15px",top:"3px",width:"",overflow:"",zIndex:2},w={width:"".concat(k,"px")},C={width:"18px",height:"20px",display:"none",position:"absolute",top:"2px",right:"20px"},R={display:"none",font:"12px UbuntuRegular, Arial, Helvetica, sans-serif",height:"21px",outline:"none",padding:"0px 40px 2px 5px",position:"absolute",marginTop:"0px",width:"".concat(k,"px")};function P(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=document.getElementById(e);if(null!==i){i.style.display="block";var r=new O(i,n);null===(t=i.parentElement)||void 0===t||t.insertBefore(r.element,i)}}var O=function(e){(0,a.Z)(P,e);var t,n,p=(t=P,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,s.Z)(this,e)});function P(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,i.Z)(this,P),(t=p.call(this)).searchIcon=e,t.pushSearches=n,t.isInputMinimized=!1,t.minimizedInputWidth=k,t.minInputStyle={width:"".concat(k,"px")},(0,h.Zs)(t.element,b),t.input.element.className="search_input",t.input.element.style["-webkit-tap-highlight-color"]="rgba(255, 255, 255, 0)",t.input.element.style["-webkit-focus-ring-color"]="rgba(255, 255, 255, 0)",(0,h.Zs)(t.input.element,R),(0,h.Zs)(t.delete.element,C);var r=function(){""!==t.input.element.value?t.onSubmitSearchInput():"none"===t.input.element.style.display?(t.showInputBar(),window.setTimeout((function(){t.input.element.focus()})),(0,c._1)()&&t.input.element.focus(),(0,d.fg)("SearchBarOpen")):(t.onSubmitSearchInput(),t.hideInputBar(),t.searchIcon.blur(),(0,d.fg)("SearchBarClose"))};return""!==t.input.element.value&&t.showInputBar(),t.searchIcon.onclick=r,t.searchIcon.onkeydown=function(e){(0,f.r$)(e)&&(e.preventDefault(),r())},t.searchIcon.onblur=function(e){y.K_.fire(e)},v.te.listen((function(e){e&&t.onInputBlur()})),(0,g.os)(995).listen((function(e){t.minimizedInputWidth=e?55:k,t.minInputStyle.width="".concat(t.minimizedInputWidth,"px"),t.isInputMinimized&&""!==t.input.element.value&&((0,h.Zs)(t.input.element,t.minInputStyle),P.searchInputWidthChanged.fire(t.minimizedInputWidth+47))})),""!==t.input.element.value&&t.minimizeInput(),P.searchKeywordValueUpdate.listen((function(e){t.input.element.value=e,""!==e&&t.showInputBar(),t.minimizeInput()})),(0,u.j9)("popstate",window,(function(){t.input.element.blur()})),m.Me.listen((function(){t.input.element.blur()})),t}return(0,r.Z)(P,[{key:"onSubmitSearchInput",value:function(){this.minimizeInput(),(0,o.Z)((0,l.Z)(P.prototype),"onSubmitSearchInput",this).call(this)}},{key:"onInputBlur",value:function(){(0,o.Z)((0,l.Z)(P.prototype),"onInputBlur",this).call(this),this.minimizeInput()}},{key:"onInputFocus",value:function(){(0,o.Z)((0,l.Z)(P.prototype),"onInputFocus",this).call(this),this.maximizeInput()}},{key:"onInputDeleteClick",value:function(e){(0,o.Z)((0,l.Z)(P.prototype),"onInputDeleteClick",this).call(this,e),(0,c._1)()&&this.maximizeInput()}},{key:"hideInputBar",value:function(){(0,o.Z)((0,l.Z)(P.prototype),"hideInputBar",this).call(this),P.searchInputWidthChanged.fire(0)}},{key:"maximizeInput",value:function(){this.isInputMinimized=!1,(0,h.Zs)(this.input.element,w),P.searchInputWidthChanged.fire(229)}},{key:"minimizeInput",value:function(){this.isInputMinimized=!0,""===this.input.element.value?"none"!==this.input.element.style.display&&this.hideInputBar():((0,h.Zs)(this.input.element,this.minInputStyle),P.searchInputWidthChanged.fire(this.minimizedInputWidth+47))}}]),P}(y.Mj);O.searchInputWidthChanged=new p.xB("searchInputWidthChanged"),O.searchKeywordValueUpdate=new p.xB("searchKeywordValueUpdate")},2145:function(e,t,n){n.d(t,{kO:function(){return a}});var i=n(6767),r=n(3705),o=5;function a(e){var t;void 0===(t=(0,i.RD)("pageaction_sample_id"))&&(function(){if(void 0===(0,i.RD)("pageaction_sample_id")){var e=Math.floor(100*Math.random())+1;(0,i.C)("pageaction_sample_id",e.toString(),30)}}(),t=(0,i.RD)("pageaction_sample_id")),void 0!==t&&t<=o&&document.addEventListener("click",(function(t){var n=t.target;"visible_genders"!==n.getAttribute("name")&&function(e,t){if(null!==t&&t.childNodes.length<=3){var n=function(e){var t=e.dataset.paction;if(void 0!==t)return t;for(;e.parentElement;){var n=(e=e.parentElement).dataset.paction;if(void 0!==n)return n}return""}(t);if(null!==n&&""!==n&&void 0!==n){var i=function(e){var t;return function(e){var t=e.dataset.pactionName;if(void 0!==t)return t;for(;e.parentElement;){var n=(e=e.parentElement).dataset.pactionName;if(void 0!==n)return n;if(null!==e.title)return e.title}return""}(e)||e.title||e.innerText||(null!==(t=e.getAttribute("value"))&&void 0!==t?t:"")||""}(t),o=t.parentElement;if(null!==o&&"true"===o.dataset.pactionSendPosition){var a=Array.prototype.indexOf.call(o.children,t),s=o.childElementCount;(0,r.fg)(e,{location:n,name:i,index:a,count:s})}else(0,r.fg)(e,{location:n,name:i})}}}(e,n)}),!0)}},1712:function(e,t,n){var i=n(2951),r=n(1976),o=n(3243),a=n(7591),s=n(9492),l=n(7597),c=n(4649),u=n(8759),h=n(7654),p=n(7693),f=n(7585),d=n(8263),m=n(6921),v=n(9165),g=n(6422),y=n(1809),k=n(47),b=n(1289),w=n(949),C=n(6698),R=n(9760),P=n(180),O=n(9395),S=n(3753),Z=n(391),T=n(9545),E=n(3543),L=n(9076);var I=function(e){(0,a.Z)(u,e);var t,n,c=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,s.Z)(this,e)});function u(e){var t;return(0,i.Z)(this,u),(t=c.call(this,e)).props=e,t.setState(e),C.Bb.getInstance().addOnLoadHandler((function(){t.updateState()})),t}return(0,r.Z)(u,[{key:"createElement",value:function(e){return(0,k.vz)("div",{className:"hashtag-ticker-container"})}},{key:"updateState",value:function(){var e=this;(0,o.Z)((0,l.Z)(u.prototype),"updateState",this).call(this);var t=this.state.genders.map((function(e){return e===v.Y0.Trans?v.Y0.OldTrans:e})),n=new URLSearchParams(t.map((function(e){return["genders",e]})));(0,S.Ue)("api/ts/hashtags/top_tags/?".concat(n)).then((function(t){var n=new Z.j(t.responseText).getStringList("all_tags");e.updateElement(n),Boolean(e.props.skipJoinOverlaySetup)||(0,g.Wk)(e.element)})).catch(T.Gr)}},{key:"updateElement",value:function(e){var t;null===(t=this.element.querySelector("#hashtag_ticker"))||void 0===t||t.remove(),e.length>0&&this.element.appendChild((0,k.vz)("div",{id:"hashtag_ticker","data-paction":"HomepageHashtag","data-paction-send-position":"true"},(0,k.vz)("a",{id:"more_hashtags_link",href:(0,L.p0)(this.getGender()),"data-floatingnav":""},E.ag.moreTags),this.tagsRow(e)))}},{key:"tagsRow",value:function(e){var t=this;return e.map((function(e){return(0,k.vz)("a",{className:"tag-link",href:(0,L.WX)(e,t.getGender()),onClick:t.props.onTagClick,"data-floatingnav":""},"#",e)}))}},{key:"getGender",value:function(){return this.state.genders.length>0?this.state.genders[0]:v.Y0.All}}]),u}(f.I);var M=function(e){(0,a.Z)(u,e);var t,n,c=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,s.Z)(this,e)});function u(e){var t,n,r;return(0,i.Z)(this,u),(r=c.call(this,e)).props=e,r.setState({gender:null!==(t=e.gender)&&void 0!==t?t:v.Y0.All,hashtag:null!==(n=e.hashtag)&&void 0!==n?n:""}),r}return(0,r.Z)(u,[{key:"createElement",value:function(e){return(0,k.vz)("div",{className:"remove-hashtag-filter"})}},{key:"updateState",value:function(){(0,o.Z)((0,l.Z)(u.prototype),"updateState",this).call(this),""!==this.state.hashtag?(this.element.textContent=E.ag.roomFilteredByHashtag(this.state.hashtag),this.element.appendChild((0,k.vz)("a",{href:(0,L.r5)(this.state.gender),onClick:this.props.onTagClick},E.ag.removeFilter)),this.element.style.display=""):this.element.style.display="none"}}]),u}(f.I),A=n(4918),j=n(8978),x=n(1612);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B=function(e){(0,a.Z)(u,e);var t,n,c=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,s.Z)(this,e)});function u(){return(0,i.Z)(this,u),c.apply(this,arguments)}return(0,r.Z)(u,[{key:"createElement",value:function(e){var t=this;return this.props=e,(0,k.vz)("link",_(_(_(_(_({rel:this.props.rel},void 0!==this.props.title&&""!==this.props.title&&{title:this.props.title}),void 0!==this.props.media&&""!==this.props.media&&{media:this.props.media}),void 0!==this.props.type&&""!==this.props.type&&{type:this.props.type}),void 0!==this.props.hreflang&&""!==this.props.hreflang&&{hrefLang:this.props.hreflang}),{},{href:this.props.href,bind:{href:function(){return t.state.href}}}))}},{key:"updateState",value:function(){(0,o.Z)((0,l.Z)(u.prototype),"updateState",this).call(this),void 0!==this.state.title&&""!==this.state.title?this.element.title=this.state.title:this.element.removeAttribute("title")}}]),u}(f.I);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=function(e){(0,a.Z)(c,e);var t,n,o=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,s.Z)(this,e)});function c(){return(0,i.Z)(this,c),o.apply(this,arguments)}return(0,r.Z)(c,[{key:"createElement",value:function(e){var t=this;return(0,k.vz)("meta",F(F(F({},void 0!==e.name&&""!==e.name&&{name:e.name}),void 0!==e.property&&{property:e.property}),{},{content:e.content,bind:{content:function(){return t.state.content}}}))}}]),c}(f.I);function U(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var H=function(){function e(){(0,i.Z)(this,e),this.replaceTags(),this.findRssAppendAfterElement()}return(0,r.Z)(e,[{key:"getMetaTitle",value:function(e,t,n){var i=(0,j.Qs)(x.w.siteName);return t?E.ag.metaTitlePremium(i):""!==n?E.ag.metaTitleHashtag(i,(0,j.Qs)(n)):e===A.Y0.Female?E.ag.metaTitleFemale(i):e===A.Y0.Male?E.ag.metaTitleMale(i):e===A.Y0.Couple?E.ag.metaTitleCouples(i):e===A.Y0.Trans||e===A.Y0.OldTrans?E.ag.metaTitleTrans(i):E.ag.metaTitleDefault(i)}},{key:"findRssAppendAfterElement",value:function(){var e,t=document.head.querySelector("[media='only screen and (max-width: 640px)']");this.rssAppendAfterElement=null!==t?t:null!==(e=document.head.querySelector("title"))&&void 0!==e?e:void 0}},{key:"getMetaContentCardDescription",value:function(e,t,n){return t?E.ag.metaContentCardDescriptionPremium:""!==n?E.ag.metaContentCardDescriptionHashtag((0,j.Qs)(n)):e===A.Y0.Female?E.ag.metaContentCardDescriptionFemale:e===A.Y0.Male?E.ag.metaContentCardDescriptionMale:e===A.Y0.Couple?E.ag.metaContentCardDescriptionCouples:e===A.Y0.Trans||e===A.Y0.OldTrans?E.ag.metaContentCardDescriptionTrans:E.ag.metaContentCardDescriptionDefault}},{key:"getMetaDescription",value:function(e,t){var n=[],i=(0,j.Qs)(window.location.hostname);return e===A.Y0.Female?n.push(E.ag.metaDescriptionFemale(i)):e===A.Y0.Male?n.push(E.ag.metaDescriptionMale(i)):e===A.Y0.Couple?n.push(E.ag.metaDescriptionCouples(i)):e===A.Y0.Trans||e===A.Y0.OldTrans?n.push(E.ag.metaDescriptionTrans(i)):n.push(E.ag.metaDescriptionDefault),t&&n.push(E.ag.metaDescriptionPremium),n.join("\n")}},{key:"getMetaKeywords",value:function(e,t,n){var i=[];return""!==n&&i.push(E.ag.metaKeywordsHashtag(n)),e===A.Y0.Female?i.push(E.ag.metaKeywordsFemale):e===A.Y0.Male?i.push(E.ag.metaKeywordsMale):e===A.Y0.Couple?i.push(E.ag.metaKeywordsCouple):e===A.Y0.Trans||e===A.Y0.OldTrans?i.push(E.ag.metaKeywordsTrans):t||i.push(E.ag.metaKeywordsDefault),t&&i.push(E.ag.metaKeywordsPremium),i.join(" ")}},{key:"getNewURLWithCurrentPathAndSearch",value:function(e){var t=new URL(e);return t.pathname=window.location.pathname,t.search=window.location.search,t.toString()}},{key:"createRssLinks",value:function(e,t){if(this.removeRssLinks(this.rssLinkComponents.map((function(e){return e.element}))),this.rssLinkComponents=[],t||e===A.Y0.All){var n={rel:"alternate",type:"application/rss+xml",href:this.getRssLinkHref(e,t),title:this.getRssLinkTitle(e,t)},i=new B(n);this.rssLinkComponents.push(i),void 0!==this.rssAppendAfterElement&&this.rssAppendAfterElement.insertAdjacentElement("afterend",i.element)}if(e!==A.Y0.All){var r={rel:"alternate",type:"application/rss+xml",href:this.getRssLinkHref(e,!1),title:this.getRssLinkTitle(e,!1)},o=new B(r);this.rssLinkComponents.push(o),void 0!==this.rssAppendAfterElement&&this.rssAppendAfterElement.insertAdjacentElement("afterend",o.element)}}},{key:"removeRssLinks",value:function(e){var t,n=U(e);try{for(n.s();!(t=n.n()).done;)t.value.remove()}catch(e){n.e(e)}finally{n.f()}}},{key:"getRssLinkHref",value:function(e,t){var n=new URLSearchParams;return e!==A.Y0.All&&n.set("gender",e),t&&n.set("premium","1"),"/feed/latest/?".concat(n.toString())}},{key:"getRssLinkTitle",value:function(e,t){var n=E.ag.featuredText,i=(0,j.Qs)(x.w.siteName);return t?n=E.ag.premiumShowsCaps:e===A.Y0.Female?n=E.ag.femaleText:e===A.Y0.Male?n=E.ag.maleText:e===A.Y0.Couple?n=E.ag.coupleText:e===A.Y0.Trans&&(n=E.ag.transText),E.ag.rssLinkTitle(n,i)}},{key:"replaceTags",value:function(){this.canonicalLinkComponent=this.getLinkComponentFromSelector("[rel='canonical']"),this.hreflangComponents=[],this.rssLinkComponents=[];var e,t=U(document.head.querySelectorAll("[hreflang]"));try{for(t.s();!(e=t.n()).done;){var n=e.value,i=this.getLinkComponentFromReplacedLinkTag(n);void 0!==i&&this.hreflangComponents.push(i)}}catch(e){t.e(e)}finally{t.f()}this.metaDescriptionComponent=this.getMetaComponentFromSelector("[name='description']"),this.metaKeywordsComponent=this.getMetaComponentFromSelector("[name='keywords']"),this.mediaLinkComponent=this.getLinkComponentFromSelector("[media='only screen and (max-width: 640px)']");var r,o=U(document.head.querySelectorAll("[type='application/rss+xml']"));try{for(o.s();!(r=o.n()).done;){var a=r.value,s=this.getLinkComponentFromReplacedLinkTag(a);void 0!==s&&this.rssLinkComponents.push(s)}}catch(e){o.e(e)}finally{o.f()}this.metaTitleComponent=this.getMetaComponentFromSelector("[property='og:title']"),this.metaContentCardDescriptionComponent=this.getMetaComponentFromSelector("[property='og:description']"),this.metaURLComponent=this.getMetaComponentFromSelector("[property='og:url']")}},{key:"getMetaComponentFromSelector",value:function(e){var t,n=document.head.querySelector(e);if(null!==n){var i={name:n.name,property:null!==(t=n.getAttribute("property"))&&void 0!==t?t:void 0,content:n.content},r=new z(i);return n.replaceWith(r.element),r}}},{key:"getLinkComponentFromSelector",value:function(e){var t=document.head.querySelector(e);return this.getLinkComponentFromReplacedLinkTag(t)}},{key:"getLinkComponentFromReplacedLinkTag",value:function(e){if(null!==e){var t={href:e.href,hreflang:e.hreflang,rel:e.rel,title:e.title,media:e.media,type:e.type},n=new B(t);return e.replaceWith(n.element),n}}},{key:"updateTags",value:function(e,t,n){var i=this.getNewURLWithCurrentPathAndSearch("https://".concat(x.D.CBAlias,"/")),r=new URLSearchParams(window.location.search),o=new URL(window.location.href);this.updateLinkComponent(this.canonicalLinkComponent,{href:i});var a,s=U(this.hreflangComponents);try{for(s.s();!(a=s.n()).done;){var l=a.value;"x-default"!==l.element.hreflang&&(r.set("language",l.element.hreflang),o.search=r.toString()),this.updateLinkComponent(l,{href:o.toString()})}}catch(e){s.e(e)}finally{s.f()}this.updateMetaComponent(this.metaDescriptionComponent,{content:this.getMetaDescription(e,t)}),this.updateMetaComponent(this.metaKeywordsComponent,{content:this.getMetaKeywords(e,t,n)}),this.updateLinkComponent(this.mediaLinkComponent,{href:this.getNewURLWithCurrentPathAndSearch("https://m.".concat(x.D.CBAlias,"/"))}),this.createRssLinks(e,t),this.updateMetaComponent(this.metaTitleComponent,{content:this.getMetaTitle(e,t,n)}),this.updateMetaComponent(this.metaContentCardDescriptionComponent,{content:this.getMetaContentCardDescription(e,t,n)}),this.updateMetaComponent(this.metaURLComponent,{content:i})}},{key:"updateMetaComponent",value:function(e,t){void 0!==e&&e.setState(t)}},{key:"updateLinkComponent",value:function(e,t){void 0!==e&&e.setState(t)}}]),e}(),W=n(9597),G=n(1794);function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,l.Z)(e);if(t){var r=(0,l.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,s.Z)(this,n)}}var q=function(e){(0,a.Z)(n,e);var t=K(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"createElement",value:function(e){return(0,k.vz)("div",{className:"followed_online_offline"},(0,k.vz)(V,{onlineFilter:!0,active:e.online,onFilterClick:e.onFilterClick}),(0,k.vz)(V,{onlineFilter:!1,active:!e.online,onFilterClick:e.onFilterClick}))}}]),n}(f.I),V=function(e){(0,a.Z)(n,e);var t=K(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"createElement",value:function(e){return(0,k.vz)("div",{className:"title".concat(e.active?" bold":"")},(0,k.vz)("p",null,(0,k.vz)("a",{href:(0,S.BN)("/followed-cams/".concat(e.onlineFilter?"online":"offline","/")),onClick:e.onFilterClick},e.onlineFilter?E.ag.onlineRooms:E.ag.offlineRooms)))}}]),n}(f.I),J=n(1436),$=n(126),X=n(5809),Q=n(7169),ee=n(3340),te=n(8945),ne=n(5755),ie=n(4707),re=n(4189);function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var se=function(){function e(t){(0,i.Z)(this,e),this.apiUrl=t.apiUrl,this.currentPage=t.currentPage,this.pageSize=t.pageSize}return(0,r.Z)(e,[{key:"setFilters",value:function(e){this.filters=e}},{key:"setPage",value:function(e){this.currentPage=e}},{key:"getPage",value:function(){return this.currentPage}},{key:"getCurrentFilters",value:function(e){var t;return e=null!==(t=e)&&void 0!==t?t:this.currentPage,ae(ae({},this.filters),(0,h.DT)(e,this.pageSize))}},{key:"fetchPage",value:function(e,t,n){var i,r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;t=null!==(i=t)&&void 0!==i?i:this.currentPage;var a=new URLSearchParams(ae(ae({},(0,h.R7)()),this.getCurrentFilters(t)));return a.sort(),(null!=n?n:(0,S.Ue)("".concat(this.apiUrl,"?").concat(a.toString())).then((function(e){return e.responseText}))).then((function(t){return r.parseResponse(t,e)})).catch((function(n){if(warn("SPA rooms fetch failed",{pageNum:t,attempt:o,reason:n}),o<5)return r.fetchPage(e,t,void 0,o+1);throw n}))}},{key:"parseResponse",value:function(e,t){var n=new Z.j(e);return{loadedRooms:n.getStringList("rooms").map((function(e){return(0,re.vx)(new Z.j(e))})),totalRooms:n.getNumber("total_count"),roomListId:n.getStringOrUndefined("room_list_id"),fetchId:t}}}]),e}(),le=n(9808);var ce=function(e){(0,a.Z)(u,e);var t,n,c=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,s.Z)(this,e)});function u(){return(0,i.Z)(this,u),c.apply(this,arguments)}return(0,r.Z)(u,[{key:"createElement",value:function(){var e=(0,k.vz)("p",{className:"roomlist-reload-msg"});return e.innerHTML=E.ag.unableToReloadErrorMessage,e.firstElementChild.onclick=function(){window.location.reload()},e}},{key:"showElement",value:function(){(0,o.Z)((0,l.Z)(u.prototype),"showElement",this).call(this,"inline-block")}}]),u}(f.I),ue=n(8871);function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,l.Z)(e);if(t){var r=(0,l.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,s.Z)(this,n)}}var de=function(e){(0,a.Z)(n,e);var t=fe(n);function n(e){var r,o,a;(0,i.Z)(this,n),(a=t.call(this,{roomListSource:"un",animate:e.animate,showLocation:e.showLocation,rooms:function(){return a.state.loadedRooms},hashtag:null!==(r=e.hashtag)&&void 0!==r?r:function(){return(0,h.SW)()},sourceInfo:null!==(o=e.sourceInfo)&&void 0!==o?o:function(e){return e.roomInfo.sourceInfo}})).fetchId=0,a.loadRooms=function(){var e=arguments.length>1?arguments[1]:void 0;arguments.length>0&&void 0!==arguments[0]&&arguments[0]||(a.hidePagination(),a.hideNoRoomsMessage(),a.showLoading()),a.fetchId+=1,a.roomsIterator.fetchPage(a.fetchId,void 0,e).then((function(e){var t=e.loadedRooms,n=e.totalRooms,i=e.roomListId;if(e.fetchId===a.fetchId){a.hideRoomLoadErrorMessage();var r=a.roomsIterator.getPage();a.pagination.setState({currentPage:r,totalItems:n}),a.setState(pe(pe({},a.state),{},{loadedRooms:t,roomListId:i})),n>0?t.length>0?(a.hideNoRoomsMessage(),n>a.props.pageSize?a.showPagination():a.hidePagination()):1!==r&&(a.resetPagination(),a.loadRooms()):(a.showNoRoomsMessage(),a.resetPagination())}})).catch((function(e){error("Failed to load roomlist page after retrying",e),a.showRoomLoadErrorMessage()})).finally((function(){a.hideLoading()}))},a.setPage=function(e){a.roomsIterator.setPage(e)},a.listeners.add(ee.WP.listen((function(e){void 0!==(0,b.dD)(window.location.search).join_overlay&&(0,ue.qh)()||window.location.assign("/".concat(e,"/"))}),!1)),a.categoryFilters={},a.filters={},a.props=e;var s=(0,h.FZ)(a.props.pageParam);return a.roomsIterator=new se({apiUrl:e.apiUrl,currentPage:s,pageSize:e.pageSize}),a.pagination=new ne.t({itemsPerPage:a.props.pageSize,initialPage:s,totalItems:0,onPageChange:a.handlePaginationClick.bind((0,Q.Z)(a)),reloadOnPageChange:!1,addLastPageAction:!0}),a.noRoomsMessage=new ie.B({}),a.noRoomsMessage.hideElement(),a.roomLoadErrorMessage=new ce({}),a.roomLoadErrorMessage.hideElement(),a.setState({loadedRooms:[],roomListId:void 0}),a}return(0,r.Z)(n,[{key:"addPlaceHolderLoadingRooms",value:function(){var e=90;this.rooms.length>0&&(e=this.rooms.length),this.removeAllChildren();for(var t=0;t<e;t++)this.addChild((0,re.dt)())}},{key:"createElement",value:function(){return(0,k.vz)("ul",{className:"list endless_page_template","data-href":"skip"})}},{key:"createRoomCard",value:function(e){return new me(e)}},{key:"getOptionalSourceInfo",value:function(e,t){var i=(0,o.Z)((0,l.Z)(n.prototype),"getOptionalSourceInfo",this).call(this,e,t);return void 0!==this.state.roomListId&&(i.roomListId=this.state.roomListId),i}},{key:"updateFilters",value:function(e,t){this.filters=e;var n=pe(pe({},this.filters),this.categoryFilters);this.roomsIterator.setFilters(n),void 0!==t&&this.setPage(t)}},{key:"setCategoryFilters",value:function(e){this.categoryFilters=e}},{key:"handlePaginationClick",value:function(e){this.setPage(e),this.loadRooms();var t=1===e?"":String(e);(0,b.Lm)(new Map([[this.props.pageParam,t]])),void 0!==this.props.onPageChange&&this.props.onPageChange(e)}},{key:"resetPagination",value:function(){(0,b.Vf)(new Map([[this.props.pageParam,""]])),this.setPage(1)}},{key:"showNoRoomsMessage",value:function(){var e,t=(0,h.SW)(),n=(0,h.Zv)(),i=(0,X.Z)(n,2),r=i[0],o=i[1];void 0!==t&&o.push(t);var a=[].concat((0,$.Z)(r),(0,$.Z)(o.map((function(e){return"#".concat(e)})))).join(" ");this.noRoomsMessage.updateMessage(a),null===(e=this.element.parentNode)||void 0===e||e.insertBefore(this.noRoomsMessage.element,this.element),this.noRoomsMessage.showElement()}},{key:"hideNoRoomsMessage",value:function(){this.noRoomsMessage.hideElement()}},{key:"showRoomLoadErrorMessage",value:function(){var e;null===(e=this.element.parentNode)||void 0===e||e.insertBefore(this.roomLoadErrorMessage.element,this.element),this.roomLoadErrorMessage.showElement()}},{key:"hideRoomLoadErrorMessage",value:function(){this.roomLoadErrorMessage.hideElement()}},{key:"showPagination",value:function(){var e;null===(e=this.props.paginationContainer)||void 0===e||e.appendChild(this.pagination.element)}},{key:"hidePagination",value:function(){var e;null===(e=this.pagination.element.parentNode)||void 0===e||e.removeChild(this.pagination.element)}},{key:"showLoading",value:function(){0===this.state.loadedRooms.length?this.addPlaceHolderLoadingRooms():this.element.classList.add("loading")}},{key:"hideLoading",value:function(){this.element.classList.remove("loading")}}]),n}(le.P),me=function(e){(0,a.Z)(n,e);var t=fe(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"createFollowStar",value:function(e){var t=this;return(0,k.vz)(te.X,{slug:e.roomInfo.room,isFollowing:e.roomInfo.isFollowing,classRef:function(e){return t.followStar=e},allowPropagation:!0})}}]),n}(re.jD);var ve=function(e){(0,a.Z)(c,e);var t,n,o=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,s.Z)(this,e)});function c(e){return(0,i.Z)(this,c),o.call(this,e)}return(0,r.Z)(c,[{key:"initUI",value:function(e){this.updateMessage(e)}},{key:"updateMessage",value:function(e){var t,n,i,r,o=null!==(t=e.categorySlug)&&void 0!==t?t:"",a="hidden-cams"===o,s="spy-on-cams"===o;n=["app","current_app_use"].includes(o)&&void 0!==e.appName?E.ag.usersRunningAppMessage(e.appName):null!==(r=ge[o])&&void 0!==r?r:"",a?i=E.ag.categoryDescriptionHidden:s&&(i=E.ag.categoryDescriptionPrivate(x.w.siteName)),this.removeAllDOMChildren(),this.element.appendChild((0,k.vz)("h2",null,n)),void 0!==i&&this.element.appendChild((0,k.vz)("p",{className:"premium-desc"},i))}},{key:"createElement",value:function(e){return(0,k.vz)("div",{className:"roomlist-msg"})}}]),c}(f.I),ge={"north-american-cams":E.ag.camCategoryNorthAmerica,"south-american-cams":E.ag.camCategorySouthAmerica,"asian-cams":E.ag.camCategoryAsia,"euro-russian-cams":E.ag.camCategoryEuroRussia,"other-region-cams":E.ag.camCategoryOtherRegion,"teen-cams":E.ag.camCategoryTeen,"18to20-cams":E.ag.camCategory18to20,"18to21-cams":E.ag.camCategory18to21,"20to30-cams":E.ag.camCategory20to30,"30to50-cams":E.ag.camCategory30to50,"21to35-cams":E.ag.camCategory21to35,"mature-cams":E.ag.camCategoryMature,"exhibitionist-cams":E.ag.camCategoryExhib,"spy-on-cams":E.ag.camCategoryPrivate,"hidden-cams":E.ag.camCategoryHidden,"new-cams":E.ag.camCategoryNewCams,"gaming-cams":E.ag.camCategoryGaming,"6-tokens-per-minute-private-cams":E.ag.camCategory6TkPerMin,"12-tokens-per-minute-private-cams":E.ag.camCategory12TkPerMin,"18-tokens-per-minute-private-cams":E.ag.camCategory18TkPerMin,"30-tokens-per-minute-private-cams":E.ag.camCategory30TkPerMin,"60-tokens-per-minute-private-cams":E.ag.camCategory60TkPerMin,"90-tokens-per-minute-private-cams":E.ag.camCategory90TkPerMin},ye=n(3515);var ke=function(e){(0,a.Z)(c,e);var t,n,o=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,s.Z)(this,e)});function c(e){var t;return(0,i.Z)(this,c),(t=o.call(this,e)).props=e,t}return(0,r.Z)(c,[{key:"createElement",value:function(e){var t,n=this;this.pageParam=null!==(t=e.pageParam)&&void 0!==t?t:"page",this.advancedSearchOptions=e.advancedSearchOptions;var i=(0,k.vz)("div",{id:"roomlist_pagination"});return(0,k.vz)("div",{className:"roomlist_container endless_page_styles"},(0,k.vz)(J.Z,{classRef:function(e){n.notVisibleRegions=e},advancedSearchOptions:this.advancedSearchOptions}),(0,k.vz)(ve,{classRef:function(e){n.roomlistMsg=e}}),(0,k.vz)(ye.G,{classRef:function(e){n.searchMsg=e}}),(0,k.vz)(de,{classRef:function(e){n.roomlist=e},animate:e.animate,showLocation:e.showLocation,apiUrl:h.$O,pageSize:h.B8,paginationContainer:i,pageParam:this.pageParam,onPageChange:this.handlePageChange.bind(this)}),i)}},{key:"initData",value:function(e){this.listeners=new G.mM,this.appName=e.appName}},{key:"initUI",value:function(e){this.listeners.add(this.advancedSearchOptions.regionsChanged.listen(this.handleAdvancedSearchOptionChange.bind(this))),this.listeners.add(O.Mj.onSubmit.listen(this.handleSearch.bind(this))),this.listeners.add(this.advancedSearchOptions.enableRecommendationsChanged.listen(this.handleAdvancedSearchOptionChange.bind(this)))}},{key:"dispose",value:function(){this.notVisibleRegions.dispose(),this.searchMsg.dispose(),this.roomlist.dispose(),this.listeners.removeAll()}},{key:"updateFollowedOnlineOfflineTab",value:function(e){void 0!==this.followedOnlineOfflineTab&&this.followedOnlineOfflineTab.element.remove(),this.followedOnlineOfflineTab=new q({online:e,onFilterClick:this.props.spaInterruptNavigation})}},{key:"handleRoomRefresh",value:function(){this.roomlist.loadRooms(!0)}},{key:"handleAdvancedSearchOptionChange",value:function(){this.roomlist.updateFilters((0,h.nA)()),this.roomlist.loadRooms()}},{key:"handleSearch",value:function(e){var t=(0,h.nA)(e);this.roomlist.updateFilters(t),this.roomlist.setPage(1),this.roomlist.loadRooms()}},{key:"handlePageChange",value:function(e){window.scrollTo(0,0)}},{key:"updateContainerFromUrl",value:function(){var e;this.notVisibleRegions.updateAlertMessage();var t=(0,h.un)();this.roomlistMsg.updateMessage({categorySlug:t,appName:this.appName});var n=null!==(e=new URLSearchParams(window.location.search).get("keywords"))&&void 0!==e?e:"";this.searchMsg.updateMessage(n);var i=(0,h.FZ)(this.pageParam),r=(0,h.vk)(),o=(0,h.nA)();this.roomlist.setCategoryFilters(r),this.roomlist.updateFilters(o,i)}},{key:"updateRooms",value:function(e){void 0!==e?this.roomlist.loadRooms(!1,e):this.roomlist.loadRooms()}}]),c}(f.I);var be=function(e){(0,a.Z)(u,e);var t,n,c=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,s.Z)(this,e)});function u(){return(0,i.Z)(this,u),c.apply(this,arguments)}return(0,r.Z)(u,[{key:"initUI",value:function(e){(0,o.Z)((0,l.Z)(u.prototype),"initUI",this).call(this,e),this.roomlistMsg.updateMessage({categorySlug:"hidden-cams"}),this.roomlist.setCategoryFilters({hidden:!0})}},{key:"updateContainerFromUrl",value:function(){var e;this.notVisibleRegions.updateAlertMessage();var t=null!==(e=new URLSearchParams(window.location.search).get("keywords"))&&void 0!==e?e:"";this.searchMsg.updateMessage(t);var n=(0,h.FZ)(this.pageParam),i=(0,h.nA)();this.roomlist.updateFilters(i,n)}},{key:"handlePageChange",value:function(e){this.element.scrollIntoView()}}]),u}(ke);var we=function(e){(0,a.Z)(c,e);var t,n,o=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,s.Z)(this,e)});function c(e){var t;return(0,i.Z)(this,c),(t=o.call(this,{onHide:ue.e2})).initialLink=e,t}return(0,r.Z)(c,[{key:"initWithoutAnchor",value:function(){var e=this,t=new g.dM(this.initialLink);t.initialHref=this.initialLink.href,this.initAndShow(t),this.registerLaterLink.onclick=function(t){t.preventDefault(),e.initialLink.click()}}}]),c}(g.be),Ce=n(6178);function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oe=C.Db*C.PK,Se="pageb",Ze=function(e){(0,a.Z)(f,e);var t,n,c=(t=f,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,s.Z)(this,e)});function f(){var e;return(0,i.Z)(this,f),(e=c.apply(this,arguments)).lastUserActivityTimestamp=0,e}return(0,r.Z)(f,[{key:"createElement",value:function(e){return this.props=e,document.querySelector("#roomlist_root")}},{key:"initUI",value:function(e){(0,o.Z)((0,l.Z)(f.prototype),"initUI",this).call(this,e),this.bindRoomlistNav(),this.roomlistMetaUpdate=new H;var t=!((0,h.I5)()||(0,h.RT)());(e.showTsRoomlist||t)&&this.addHashtagHeader(),e.showTsRoomlist?e.isTestbed||this.initRoomlist():this.bindTemplateRoomlistComponents(),this.makeRoomListResponsive(),this.bindRoomRefreshTimers(),this.addLastPageAttribute()}},{key:"initRoomlist",value:function(){var e=this;document.querySelectorAll(".placeholder_roomlist_container").forEach((function(e){e.remove()}));var t={advancedSearchOptions:this.advancedSearchOptions,animate:this.props.animateThumbnails,showLocation:this.props.showLocation,appName:this.props.appName,spaInterruptNavigation:function(t){e.spaInterceptOnClick(t)}};1===(0,h.FZ)()&&(0,b.Vf)(new Map([["page",""]])),1!==(0,h.FZ)(Se)&&(0,h.I5)()||(0,b.Vf)(new Map([[Se,""]])),this.roomlistContainer=new ke(t),this.addChild(this.roomlistContainer),this.bindRoomlistSpaHandlers(),this.handleSpaRouting()}},{key:"handleFollowedRoomlist",value:function(){(0,h.RT)()?(this.hashtagTicker.hideElement(),this.roomlistContainer.updateFollowedOnlineOfflineTab(!(0,h.W1)()),this.roomlistContainer.element.before(this.roomlistContainer.followedOnlineOfflineTab.element)):void 0!==this.roomlistContainer.followedOnlineOfflineTab&&this.roomlistContainer.followedOnlineOfflineTab.element.remove()}},{key:"handleSecondaryRoomlist",value:function(){var e=this;if((0,h.I5)()){if(void 0===this.secondaryContainer){var t={advancedSearchOptions:this.advancedSearchOptions,animate:(0,C.fr)(),roomListSource:this.props.roomListSource,showLocation:this.props.showLocation,pageParam:Se,spaInterruptNavigation:function(t){e.spaInterceptOnClick(t)}};this.secondaryContainer=new be(t),this.addChild(this.secondaryContainer)}this.secondaryContainer.updateContainerFromUrl(),this.secondaryContainer.updateRooms(),this.hashtagTicker.hideElement()}else void 0!==this.secondaryContainer&&(this.removeChild(this.secondaryContainer),this.secondaryContainer.dispose(),delete this.secondaryContainer),this.hashtagTicker.showElement()}},{key:"bindRoomlistSpaHandlers",value:function(){var e=this;(0,p.j9)("click",document,(function(t){e.spaInterceptOnClick(t,!0)})),void 0!==(0,b.dD)(window.location.search).join_overlay&&(0,p.j9)("mousedown",document,(function(t){2===t.button||e.showJoinOverlay(t)})),ue.k4.listen((function(t){e.spaInterceptOnClick(t)})),(0,p.j9)("popstate",window,this.handleSpaRouting.bind(this)),O.Mj.onSubmit.addListener((function(e){(0,b.Vf)(new Map([["page",""]])),window.scrollTo(0,0)}),this),(0,p.j9)("pageshow",window,this.handleSpaRouting.bind(this))}},{key:"showJoinOverlay",value:function(e){var t=(0,y.zw)(e.target);if(void 0!==t&&(0,ue.qh)(t)){var n=new we(t);window.scrollTo(0,0),n.initWithoutAnchor(),e.stopPropagation(),e.preventDefault()}}},{key:"spaInterceptOnClick",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,y.zw)(e.target);void 0!==n&&(e.ctrlKey||e.metaKey||e.shiftKey||t&&!n.hasAttribute(ue.Ek)||(window.history.pushState(void 0,"",n.href),window.scrollTo(0,0),e.preventDefault(),this.handleSpaRouting()))}},{key:"handleSpaRouting",value:function(){var e,t;window.document.title=(0,ue.$n)(),this.element.className=(0,h._A)()?"category_page":(0,h.I5)()?"private_shows":"main_roomlist",f.addMainClassnames(),this.genderTabs.renderTabs();var n=null!==(e=new URLSearchParams(window.location.search).get("keywords"))&&void 0!==e?e:"";P.i.searchKeywordValueUpdate.fire(n);var i=(0,v.ej)(),r=null!==(t=(0,h.SW)())&&void 0!==t?t:"";this.roomlistMetaUpdate.updateTags(i,(0,h.I5)(),r),this.hashtagTicker.setState({genders:i===v.Y0.All?[]:[i]}),this.removeHashtagLink.setState({gender:i,hashtag:r}),ue.Me.fire(i),this.roomlistContainer.updateContainerFromUrl();var o=window.prefetchPromise;void 0!==o?(this.roomlistContainer.updateRooms(o),delete window.prefetchPromise):this.roomlistContainer.updateRooms(),this.handleSecondaryRoomlist(),this.handleFollowedRoomlist(),ue.M4.fire()}},{key:"bindRoomlistNav",value:function(){var e=this,t=document.querySelector(".top-section"),n=this.props.showTsRoomlist&&!this.props.isTestbed,i=Pe({enableGenderedLinkUpdates:n,skipJoinOverlaySetup:this.props.showTsRoomlist},n&&{onTabClick:function(t){e.spaInterceptOnClick(t)}});if(this.genderTabs=new Ce.rT(i),t.appendChild(this.genderTabs.element),this.props.showTsRoomlist||(0,g.Wk)(this.genderTabs.element),this.props.showMobileSiteBannerLink){var r,o=new W.y;null===(r=t.parentElement)||void 0===r||r.prepend(o.element),o.show()}var a=this.props.showTsRoomlist;this.advancedSearchOptions=new w.Ld(!1,a)}},{key:"bindTemplateRoomlistComponents",value:function(){var e=this;document.querySelectorAll(".roomlist-msg").forEach((function(t){var n,i,r=new J.Z({advancedSearchOptions:e.advancedSearchOptions}),o=new ye.G({});null===(n=t.parentNode)||void 0===n||n.insertBefore(r.element,t),null===(i=t.parentNode)||void 0===i||i.insertBefore(o.element,t.nextSibling)})),this.debounceTemplateRoomCardLinks(),C.Bb.getInstance().addOnLoadHandler(this.debounceTemplateRoomCardLinks)}},{key:"debounceTemplateRoomCardLinks",value:function(){document.querySelectorAll(".roomCard a:not([href^='/tag/'])").forEach((function(e){(0,m.HK)(e)}))}},{key:"makeRoomListResponsive",value:function(){(0,u.sg)()||(0,u.z8)()||(document.body.style.minWidth="".concat(500-(0,d.np)(),"px"));var e=document.querySelector("#main .content");e instanceof HTMLElement&&(0,R.FR)(e,["margin-left","margin-right"],4,15,500,600)}},{key:"bindRoomRefreshTimers",value:function(){(0,h.I5)()?C.Bb.scheduleImageRefresh(15):C.Bb.scheduleImageRefresh(this.props.refreshFrequency),this.props.showTsRoomlist?((0,p.Zf)(["click","focusin","keydown","pointerdown","pointermove","scroll","visibilitychange"],document,this.setUserActivityTimestamp.bind(this)),window.setInterval(this.inactiveRefreshCheck.bind(this),Oe)):C.Bb.scheduleRefresh(C.Db)}},{key:"inactiveRefreshCheck",value:function(){var e;0!==this.lastUserActivityTimestamp&&(Date.now()-this.lastUserActivityTimestamp>=6e4?window.location.reload():(this.roomlistContainer.handleRoomRefresh(),null===(e=this.secondaryContainer)||void 0===e||e.handleRoomRefresh()))}},{key:"setUserActivityTimestamp",value:function(){this.lastUserActivityTimestamp=Date.now()}},{key:"addHashtagHeader",value:function(){var e=this,t=(0,v.ej)(),n=(0,h.SW)(),i=function(t){e.spaInterceptOnClick(t)};this.element.prepend((0,k.vz)("div",null,(0,k.vz)(I,Pe(Pe({},this.props.showTsRoomlist&&{onTagClick:i}),{},{genders:t===v.Y0.All?[]:[t],skipJoinOverlaySetup:this.props.showTsRoomlist,classRef:function(t){e.hashtagTicker=t}})),(0,k.vz)(M,Pe(Pe({},this.props.showTsRoomlist&&{onTagClick:i}),{},{hashtag:n,gender:t,classRef:function(t){e.removeHashtagLink=t}}))))}},{key:"addLastPageAttribute",value:function(){var e=document.querySelectorAll(".endless_page_link"),t=e[e.length-2];void 0!==t&&t instanceof HTMLElement&&(t.dataset.pactionName="LastPage")}}],[{key:"addMainClassnames",value:function(){var e=[null!=(0,h.ip)()&&"roomlist-category-region"],t=document.querySelector("#main");null!==t&&(t.className=e.join(" "))}}]),f}(f.I),Te=n(3854),Ee=n(2145),Le=n(5543);var Ie=function(e){(0,a.Z)(u,e);var t,n,c=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,l.Z)(t);if(n){var r=(0,l.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,s.Z)(this,e)});function u(){return(0,i.Z)(this,u),c.apply(this,arguments)}return(0,r.Z)(u,[{key:"init",value:function(){(0,o.Z)((0,l.Z)(u.prototype),"init",this).call(this);var e=this.context.showTsRoomlist;(0,P.r)("search_icon",e),(0,Te.j)(),this.bindRoomlistPage(),(0,Ee.kO)("UIClickHomepage"),u.bindAddGenderToSubjectLinks(),this.context.showTsRoomlist||C.Bb.getInstance().addOnLoadHandler(u.bindAddGenderToSubjectLinks)}},{key:"parseContext",value:function(e){(0,o.Z)((0,l.Z)(u.prototype),"parseContext",this).call(this,e),this.context.refreshFrequency=e.refreshFrequency,this.context.showMobileSiteBannerLink=!0===e.show_mobile_site_banner_link,this.context.isOfflineFollowed=e.isOfflineFollowed,this.context.roomListSource=(0,C.AY)(e.roomListSource),this.context.showTsRoomlist=!0===e.showTsRoomlist,this.context.appName=e.appName}},{key:"bindRoomlistPage",value:function(){null!==document.getElementById("roomlist_root")&&new Ze(this.context)}},{key:"setupJoinOverlay",value:function(){this.context.showTsRoomlist||(0,o.Z)((0,l.Z)(u.prototype),"setupJoinOverlay",this).call(this)}}],[{key:"bindAddGenderToSubjectLinks",value:function(){(0,C.Iu)(document.body)}}]),u}(Le.r);(0,Le.c)(Ie)}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[746,62],(function(){return t(569),t(4585),t(4487),t(1712)})),e.O()}]);
//# sourceMappingURL=roomlist-prod-1f87fd333cbe05e38bfe.js.map