/*! For license information please see app-254e2dbf.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[2143],{33096:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});const s={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","course-card-container":"_3rrla"}},68709:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});const s={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","_hoverable-cell":"_2SQMn","user-cell-minimal":"_1sqVC _2SQMn","user-popover":"xDwaU","user-popover-wrap":"_1MQUC","user-item":"_2VW9F","user-link":"cWZ7Q _1Jk5X","logged-out-topbar-wrap":"_14Q7T","splash-topbar-wrap":"CTX4w","logged-out-topbar":"_3ivb5","logged-out-logo-container":"_1Ubqd","logged-out-logo":"_2RvHF","right-header":"i4pWM","hidden-on-mobile":"lCCrq","ui-language-wrap":"_3-9no",_icon:"uctf0","get-started":"_1nmAo _2dZP2","login-button":"_2ilB5 _2dZP2","hidden-everywhere":"JFeyf","arrow-with-margin-gray":"_1Q5UA"}},67243:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});const s={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210",wrap:"_2TlMB","no-banner":"_38uiT",wallable:"_1azKr",overlay:"_9SDEF","wall-message":"_1w8x4",create:"_20yaC",section:"_1gB7x",hr:"_10rQH",shelf:"_8roiG","non-skill-icon":"hVpTU","_non-skill-sprite-icon":"Lp_tU hVpTU","icon-xp-boost":"_1fwMd Lp_tU hVpTU","icon-streak-freeze":"_36lJw Lp_tU hVpTU","icon-double":"AS1h6 Lp_tU hVpTU","icon-plushie":"KTGPB hVpTU","_icon-streak-repair":"_1xUSS hVpTU","icon-streak-repair":"_3Ogtk _1xUSS hVpTU","icon-streak-repair-used":"_4Dqft _1xUSS hVpTU","item-title":"_3g6lk","item-desc":"_2QQA_","item-desc-experiment":"_3gbtC","purchase-button":"_1gw-f _2HRY_","purchase-button-lingot":"_1bOpZ _1gw-f _2HRY_ _2lRGK","get-super-button":"zPWL6 _1gw-f _2HRY_","purchase-button-streak-freeze":"_2yTja _1gw-f _2HRY_","purchase-button-streak-freeze-lingot":"_24sBJ _1bOpZ _1gw-f _2HRY_ _2lRGK","purchase-button-label-desktop":"_3s-QM","purchase-button-label-mobile":"Pmkep","purchase-button-price-block":"_1m6Sq","_btn-lingot-positioning":"hxDaC","btn-lingot":"_1qMEe _3aUCN _1woVy hxDaC","btn-lingot-disabled":"_1bfVF _1ZFIx _1woVy hxDaC","_number-of-equipped-streak-freeze-base":"_1SReZ","number-of-equipped-streak-freeze-gray":"_3hso6 _1SReZ","number-of-equipped-streak-freeze-green":"_3_lqo _1SReZ","number-of-equipped-streak-freeze-container":"_1UNTe","horizontal-box":"_3RWEg","vertical-box":"NxWM0","btn-gem":"_2e5n6 vF_N4 _1woVy hxDaC",timer:"_38W_I"}},17383:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});const s={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210",_button:"_3wk8f","google-solid":"_2qpF4 _3wk8f","facebook-solid":"_1nI6A fb3uN _3wk8f",stroke:"_3aRi5 _3wk8f","account-icon":"B-KMN","account-text":"_2ird8"}},88528:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});const s={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210"}},40412:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var s=a(27378),n=a(88868),r=a(79465);const i=({location:e})=>(s.useEffect((()=>{(null==e?void 0:e.pathname)!==n.Oy&&(async()=>{await(0,r.j)("page_not_found",{},!1),await(0,n.Zs)(n.Oy,!0)})()}),[]),null)},47725:(e,t,a)=>{"use strict";a.d(t,{P:()=>d,Z:()=>u});var s=a(27378),n=a(95324),r=a(4289),i=a(17060),o=a(51158),l=a(88868),c=a(79465);class d extends s.Component{constructor(){super(...arguments),this.handleClick=e=>{var t;const{trackingScreen:a,trackingTarget:s}=this.props;"a"===(null===(t=e.target.tagName)||void 0===t?void 0:t.toLowerCase())&&(0,c.j)("click",{screen:a,target:s})}}render(){return s.createElement("span",{onClick:this.handleClick},this.props.children)}}const u=s.forwardRef(((e,t)=>{var a,{activeClassName:d,autoFocus:u,children:p,id:g,isRoutableUrl:m=l.Iw,onClick:h,locationState:_,replace:v,trackingScreen:f,trackingTarget:S}=e;const E=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(e,["activeClassName","autoFocus","children","id","isRoutableUrl","onClick","locationState","replace","trackingScreen","trackingTarget"]),y=s.useRef(null),b=s.useMemo((()=>(0,n.Z)([t,y])),[t,y]);(0,i.Z)({disabled:!g,id:g,offset:-100});const w=e=>{f&&S&&(0,c.j)("click",{screen:f,target:S}),null==h||h(e)};if(s.useEffect((()=>{var e;u&&(null===(e=y.current)||void 0===e||e.focus())}),[u]),"target"in E&&E.target&&"_blank"===E.target.toLowerCase()&&(E.rel="rel"in E&&E.rel&&"noopener"!==E.rel.toLowerCase()?`${E.rel} noopener`:"noopener"),!(null===(a=E.href)||void 0===a?void 0:a.startsWith("#"))&&E.href&&m(E.href)){E.href.startsWith("http")&&console.warn("Routable URL includes a protocol and domain");const{hash:e,pathname:t,search:a}=E.href.startsWith("http")?new URL(E.href):new URL(E.href,window.location.origin);return E.to={hash:e,pathname:t,search:a,state:_},delete E.href,s.createElement(r.OL,Object.assign({},E,{activeClassName:d||"",onClick:w,ref:b,replace:v}),p)}return void 0!==d&&(0,o.Kp)("activeClassName was set on a native anchor tag",{data:{href:E.href},once:!0}),s.createElement("a",Object.assign({},E,{onClick:w,ref:b,tabIndex:0}),p)}))},43670:(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});var s=a(60042),n=a.n(s),r=a(27378),i=a(4088),o=a(42659);var l=a(18804),c=a(79465),d=a(81621);const u={large:63,medium:48,xlarge:77},p=e=>{var t,a;const{forceNoPicture:s=!1,size:p,useSize:g=!0,user:m}=e,h=(0,l.Fx)(o.dY),_=(0,l.Fx)(o.gg),v=m.id===h,f=`${e.picture||m.picture}${g?`/${p}`:""}`,S=null!==(t=e.displaySize)&&void 0!==t?t:u[p];return(0,d.z_)(f)||s||_?r.createElement(i.Z,{className:n()(e.className,e.letterAvatarClassName,e.disableDefaultBorder?"_17g0s":void 0),id:m.id,name:m.name,size:null!=S?S:p,style:v&&!s?"ghost":"colored",username:m.username}):r.createElement("img",{alt:null!==(a=m.name)&&void 0!==a?a:m.username,className:n()(e.className,"_33LFc",c.qE),src:f,style:{height:S,width:S}})}},81928:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var s=a(27378),n=a(47725),r=a(30033),i=a(79465),o=a(2945);const l=({[r.m5]:e,children:t,className:a})=>{const l=(0,o.Gi)();return s.createElement(n.Z,Object.assign({className:a,href:l?`https://support.duolingo.com/hc/${l}`:"/help",onClick:()=>{(0,i.j)("help_center_tap",{})}},(0,r._q)(e)),t)}},22498:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});const s=(0,a(1398).Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(5314),a.e(3766),a.e(8449),a.e(1684),a.e(4128),a.e(3100)]).then(a.bind(a,88695)).then((e=>({default:e.LottieAnimation})))))},84119:(e,t,a)=>{"use strict";a.d(t,{Z:()=>v});var s=a(60042),n=a.n(s),r=a(27378),i=a(83063),o=a(97895),l=a(47725);const c=a.p+"images/28d1f7a89ba7b57d86c6c1b2e40d8f4e.svg",d=a.p+"images/17db14133432ce4e82a799e760bd3e0e.svg",u=a.p+"images/4a9f9204e7e5c1d3ed3b79b7b7af8568.svg",p={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210",_wrap:"_2SJZg","size-default":"_3_UBz","size-compact":"EY75l","size-icon":"_31mcG","size-medium":"_3KVdE",icon:"_2Gbos",text:"_1sq2h","wrap-macaw":"_1jqdJ _2SJZg _1vSRH","wrap-snow":"cB6Di _2SJZg _2mU94","wrap-snow-always-light":"_1yEEd _2SJZg _2_7Z1","wrap-snow-solid":"_2XelT _2SJZg _3qZKu","wrap-snow-solid-always-light":"_1M3EO _2SJZg Kc4d9"};var g=a(68903),m=a(8654),h=a(79465);const _=({children:e,className:t,href:a,image:s,onClick:c,size:d="default",style:u="snow"})=>r.createElement(l.Z,{className:n()((0,i.y)({variant:"macaw"===u||"snow-solid"===u||"snow-solid-always-light"===u?"solid":"stroke"}),p[`wrap-${u}`],p[`size-${d}`],t),href:a,onClick:c},r.createElement(o.Z,{className:p.icon,guaranteedSafeSrc:s}),r.createElement("span",{className:p.text},e)),v=e=>{var{type:t,via:a}=e,s=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(e,["type","via"]);switch(r.useEffect((()=>{a&&(0,h.j)("web_to_app_store_load",{via:a})}),[]),t){case"apple":return r.createElement(_,Object.assign({image:d},s),(0,m._i)(7893));case"china":return r.createElement(_,Object.assign({image:c},s),r.createElement("span",null,r.createElement("span",null,"下载请前往"),"360 手机助手"));case"google":return r.createElement(_,Object.assign({image:u},s),(0,m._i)(9328));default:return(0,g.RJ)(t),null}}},55107:(e,t,a)=>{"use strict";a.d(t,{Z:()=>S});var s=a(60042),n=a.n(s),r=a(27378),i=a(15094),o=a(36083),l=a(47725),c=a(42659);const d=a.p+"images/7ab97bf88f7cb74897e7b8e2acd77371.svg";var u=a(17833);const p={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","image-container":"_2_j-u","_course-card-base":"_1VVGH","_course-card":"_2R0Ah _1VVGH","course-card-snow":"_2bIJV _2R0Ah _1VVGH","course-card-transparent-always-light":"_3lPJU _2R0Ah _1VVGH","course-card-header":"_1_Kcg","badge-row":"Me8zZ",_badge:"mKWHt","hatching-badge-snow":"_2VU44 mKWHt","hatching-badge-transparent-always-light":"ffFrc mKWHt","learning-badge-container-snow":"_2qzIf mKWHt","learning-badge-container-transparent-always-light":"_2MVw3 _2qzIf mKWHt","learning-badge":"_1CUmr","beta-badge-snow":"_38Ra9 mKWHt","beta-badge-transparent-always-light":"gH5IY mKWHt","_language-name":"_2rOMB","language-name-snow":"oiAw- _2rOMB","language-name-transparent-always-light":"qmRtF _2rOMB","_learn-count":"V6RHD","learn-count-snow":"_22J27 V6RHD","learn-count-transparent-always-light":"__nHv V6RHD"};var g=a(30033),m=a(26886),h=a(67173),_=a(8654),v=a(93746),f=a(18804);const S=({className:e,course:t,headingTag:a="div",href:s,isLoggedIn:S=!1,learning:E=!1,onSelectCourse:y,style:b="snow"})=>{const w=(0,f.Fx)(c.Mb),I="dark"===(0,i.F)(),{fromLanguageId:T,learningLanguageId:k,numLearners:C,numLearnersString:R,phase:O,progress:L}=t;let P;const A=(0,m.s7)(w,T,S,k,O)&&O===v.AP.Active?v.AP.Beta:O;P=A===v.AP.Active?(0,_._i)(8380,{progress:L}):(0,_._i)(9517,{num_learners:C,num_learners_string:R});let N=null;if(E)N=r.createElement("div",{className:p[`learning-badge-container-${b}`]},r.createElement("img",{className:p["learning-badge"],src:I&&"snow"===b?d:u}));else switch(A){case v.AP.Active:N=r.createElement("span",{className:p[`hatching-badge-${b}`]},(0,_._i)(20972));break;case v.AP.Beta:N=r.createElement("span",{className:p[`beta-badge-${b}`]},(0,_._i)(20274))}const D=a||"div",x=()=>r.createElement("div",{className:p["image-container"]},r.createElement("div",{className:p["badge-row"]},N),r.createElement("div",{className:p["course-card-header"]},r.createElement(o.Z,{lang:k,size:88})),r.createElement(D,{className:p[`language-name-${b}`]},(0,_._i)(154,{language_name:(0,v.vY)(k)})),r.createElement("div",{className:p[`learn-count-${b}`]},P)),M=Object.assign({className:n()(p[`course-card-${b}`],e),onClick:y},(0,g._q)(h.V.LanguageCard,`language-${k}`));return s?r.createElement(l.Z,Object.assign({},M,{href:s}),x()):r.createElement("button",Object.assign({},M),x())}},75025:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(27378),n=a(92883);const r=({content:e})=>s.createElement(n.ql,null,s.createElement("meta",{content:e,id:"meta-description",name:"description"}),s.createElement("meta",{content:e,name:"twitter:description"}),s.createElement("meta",{content:e,name:"og:description"}))},54385:(e,t,a)=>{"use strict";a.d(t,{Fk:()=>E,SG:()=>S,ZP:()=>y});var s=a(27378),n=a(80715),r=a(83063),i=a(37325),o=a(9249),l=a(42659),c=a(74462),d=a(67243),u=a(30033),p=a(67173),g=a(11883),m=a(8654),h=a(71371),_=a(51158),v=a(18804),f=a(79465);const S=2,E=e=>e?200:10,y=(0,n.$j)((e=>({isPurchasingItem:(0,l.vw)(e),items:(0,l.__)(e),user:(0,l.np)(e)})))((({dispatch:e,expirationTime:t,hideButton:a,icon:n,isDesktop:l,isPurchasingItem:S,item:E,itemDescription:y,itemTitle:b,items:w,user:I,alternateButtonText:T,disable:k})=>{var C,R;const O=(0,g.Z)(),L=(0,v.Fx)(c.r0),P=L?I.gemsConfig.gems:I.lingots,{price:A=0}=E,N=P>=A,D="streak_freeze"===E.id,x=w.inventory.streak_freeze?w.inventory.streak_freeze.quantity:0,M=(null!==(R=null===(C=w.inventory.society_streak_freeze)||void 0===C?void 0:C.quantity)&&void 0!==R?R:0)+x,F=["gem_wager","rupee_wager"].includes(E.id),U=w.inventory[`${E.id}`],H=F&&U?U.wagerDay:void 0,j=(E.id in w.inventory||`${E.id}_${I.learningLanguage}`in w.inventory)&&(!D||M>=2);if("streak_repair"!==E.id&&L&&"XGM"!==E.currencyType)return(0,_.vU)("User incorrectly see shop items with lingots when useGem is true",{data:{item:E},once:!0}),null;A<=0&&!a&&!j&&(0,_.vU)("Invalid price",{data:{itemId:E.id,price:A},once:!0,sample:.01});const G=null!=T?T:j?s.createElement(s.Fragment,null," ",void 0===H?s.createElement("span",null,(0,m._i)(977)):(0,m._i)(20537,{wager_day:H})):s.createElement(s.Fragment,null,(0,m._i)(20237),s.createElement("span",{className:d.Z[N?L?"btn-gem":"btn-lingot":"btn-lingot-disabled"]}),A),B=s.createElement(r.Z,Object.assign({className:d.Z[L?"purchase-button":"purchase-button-lingot"]},(0,u._q)(p.V.PurchaseButton),{color:"macaw",disabled:j||void 0===A||!N||k,onClick:async()=>{S||(h.Z.start("purchase_item_in_shop"),(0,f.j)("shop_item_tapped",{item_name:E.id,num_purchased:1}),await e(o.xD(E,"store")),h.Z.finish("purchase_item_in_shop"))},variant:"stroke"}),G);if(D){const e=s.createElement("div",{className:x>1?d.Z["number-of-equipped-streak-freeze-green"]:d.Z["number-of-equipped-streak-freeze-gray"]},M<=2?(0,m._i)(21138,{num_equipped:M}):3===M?(0,m._i)(35636,{num:M}):4===M?(0,m._i)(35637,{num:M}):(0,m._i)(35638,{num:M}));return l?s.createElement("li",{className:d.Z.shelf},"string"==typeof n?s.createElement("span",{className:n}):n,B,s.createElement("div",{className:d.Z["horizontal-box"]},s.createElement("div",{className:d.Z["item-title"]},b),e),s.createElement("p",{className:d.Z["item-desc"]},y)):s.createElement("li",{className:d.Z.shelf},"string"==typeof n?s.createElement("span",{className:n}):n,s.createElement("div",{className:d.Z["item-title"]},b),s.createElement("div",{className:d.Z["vertical-box"]},s.createElement("p",{className:d.Z["item-desc-experiment"]},y),s.createElement("div",{className:d.Z["number-of-equipped-streak-freeze-container"]},e),B))}return s.createElement("li",{className:d.Z.shelf},"string"==typeof n?s.createElement("span",{className:n}):n,j?B:a?null:B,s.createElement("div",{className:d.Z["item-title"]},b),s.createElement("p",{className:d.Z["item-desc"]},y),t?s.createElement("div",{className:d.Z.timer},s.createElement(i.Z,{currentTime:O,hexColor:"bee",icon:"full",targetTime:t})):null)}))},37325:(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});var s=a(60042),n=a.n(s),r=a(27378),i=a(97895);const o=a.p+"images/b5fd2ab43e0921ef7acc5a9ae5e240ab.svg",l=a.p+"images/13378ed4ef98f1dcd8084133f2eba929.svg",c={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210",icon:"_3YmMc",text:"_29Ox2","text-icon":"edjiL _29Ox2","timer-bee":"YSucH","timer-eel":"_1yeAo","timer-fire-ant":"_3hXJY","timer-fox":"KqoN1","timer-camel":"_1pqEm"};var d=a(17135),u=a(8654);const p=({currentTime:e,hexColor:t,icon:a,targetTime:s,textClassName:p})=>{const{days:g,hours:m,minutes:h,seconds:_}=(0,d.zj)(Math.max(s-e,0)),v=t||(g||m?"bee":h?"fox":"fire-ant");return r.createElement("span",{className:c[`timer-${v}`],style:t?{color:t}:{}},void 0===a?null:r.createElement(i.Z,{className:c.icon,guaranteedSafeSrc:"empty"===a?o:l}),r.createElement("span",{className:n()(c[void 0===a?"text":"text-icon"],p)},g?(0,u._i)(25243,{num_days:g}):m?(0,u._i)(25244,{num_hours:m}):h?(0,u._i)(25250,{num_minutes:h}):(0,u._i)(25247,{num_seconds:_})))}},54452:(e,t,a)=>{"use strict";a.r(t),a.d(t,{APP_HOME_DEEP_LINK:()=>k,default:()=>C,isOnMobileEmailVerificationPage:()=>T});var s=a(60042),n=a.n(s),r=a(27378),i=a(80715),o=a(3620),l=a(13325),c=a(83063),d=a(47725),u=a(52976),p=a(68466),g=a(94144),m=a(98149);const h="j4Wd0";var _,v=a(77167),f=a(68903),S=a(53229),E=a(8654),y=a(88868),b=a(74597),w=a(16086);!function(e){e[e.VERIFYING=0]="VERIFYING",e[e.SUCCEEDED=1]="SUCCEEDED",e[e.FAILED=2]="FAILED"}(_||(_={}));class I extends r.Component{constructor(){super(...arguments),this.state={pageState:_.VERIFYING},this.renderVerifyingState=()=>r.createElement("div",{className:h},r.createElement(l.Z,{type:"screen-white"})),this.renderSucceededState=e=>r.createElement(r.Fragment,null,r.createElement("div",{className:h},e?r.createElement("img",{alt:"",className:"_2tFAK",src:m}):null,r.createElement("div",{className:"muLbj"},(0,E._i)(22104)),r.createElement("div",null,(0,E._i)(23690))),e?r.createElement("div",{className:"_6Zbky"},r.createElement(d.Z,{className:n()((0,c.y)({color:"macaw",variant:"solid"}),"_1Romf"),href:k,trackingScreen:"verification_page",trackingTarget:"mobile_app_open_or_install"},(0,E._i)(32344))):null),this.renderFailedState=()=>r.createElement("div",{className:h},r.createElement("div",{className:"_1fX8Z"},(0,E._i)(21553)),r.createElement("div",null,(0,E._i)(11554)))}async componentDidMount(){const{dispatch:e,history:t,match:{params:a},location:s}=this.props;let n,r,i=!1;try{n=(0,w.Jb)()}catch(e){n=void 0}if(r=parseInt((0,S.vl)(s.search).userId||"",10),!r&&n)r=n;else if(!r)return void this.setState({pageState:_.FAILED});n===r&&(i=!0);let o=!1;try{(await v.Vi.emailVerificationUpdate(r,a.token)).success?(i||this.setState({pageState:_.SUCCEEDED}),o=!0):this.setState({pageState:_.FAILED})}catch(e){this.setState({pageState:_.FAILED})}if(i){const a=e((0,g.eY)());o&&(await a,t.push(y.B6))}}render(){const{pageState:e}=this.state,t=T(this.props.match);return r.createElement(p.Z,{includeFooterLinks:!t},r.createElement(u.Z,{centerOnMobile:!0},(()=>{switch(e){case _.SUCCEEDED:return this.renderSucceededState(t);case _.FAILED:return this.renderFailedState();case _.VERIFYING:return this.renderVerifyingState();default:return(0,f.RJ)(e),null}})()))}}const T=e=>"/verify/:token"===e.path&&b.Z.hasMobileApp&&!(0,w.Pc)(),k=b.Z.android?"https://app.adjust.com/z5vyqb?deep_link=duolingo%3A%2F%2Fhome":"https://af4a.adj.st/home?adj_t=r4yebem&adj_redirect_ios=https%3A%2F%2Fapps.apple.com%2Fus%2Fapp%2Fduolingo-language-lessons%2Fid570060128&adj_redirect_android=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dcom.duolingo",C=(0,o.EN)((0,i.$j)()(I))},52976:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var s=a(27378);const n=({centerOnMobile:e,children:t})=>s.createElement("div",{className:e?"_3g1v_ _1f1Nr":"_1f1Nr"},t)},51900:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var s=a(60042),n=a.n(s),r=a(27378),i=a(31542),o=a(24448);var l=a(30033);const c=e=>{var{className:t}=e,a=l.m5,s=e[a],{portalToOverlays:c,secondaryOverlayType:d}=e,u=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(e,["className","symbol"==typeof a?a:a+"","portalToOverlays","secondaryOverlayType"]);const p=r.createElement(o.Z,Object.assign({},(0,l._q)(s),{className:n()("modal"===d?"_3uW-E":"drawer"===d?"_1Z19a":"_36g-h",t)},u));return c?(0,i.createPortal)(p,document.getElementById("overlays")):p}},94434:(e,t,a)=>{"use strict";a.d(t,{Z:()=>v});var s=a(60042),n=a.n(s),r=a(27378),i=a(47725),o=a(8121);var l=a(30033),c=a(80388),d=a(67173),u=a(81149),p=a(8654),g=a(88868),m=a(79465),h=a(3800);const _=({children:e,href:t,linkClass:a,onClick:s,target:o})=>r.createElement("li",{className:"_1KXNm"},r.createElement(i.Z,{className:n()("_3KnwL _3yAjN",a),href:t,onClick:s,target:o},e)),v=({inLeftContent:e,linkStyle:t})=>r.createElement(r.Fragment,null,h.h||"experiment"===(0,u.j6)("gweb_redesigned_page_footer",void 0)?null:r.createElement("div",{className:n()("_3ky4c",{V9dBP:e})},r.createElement("hr",{className:"_2tnT1"}),r.createElement("ul",Object.assign({className:"_3dgVT"},(0,l._q)(d.V.FooterLinks)),r.createElement(_,{href:"/info",linkClass:t},(0,p._i)(7957)),g.Ql?r.createElement(_,{href:g.Ql,linkClass:t},(0,p._i)(14615)):null,r.createElement(_,{href:"https://schools.duolingo.com",linkClass:t},(0,p._i)(3984)),r.createElement(_,{href:"/mobile",linkClass:t},(0,p._i)(18971)),r.createElement(_,{href:"https://store.duolingo.com/",linkClass:t},(0,p._i)(15428)),r.createElement(_,{href:"/efficacy",linkClass:t,onClick:()=>(0,m.j)("web_footer_efficacy_cta",{})},(0,p._i)(30464)),r.createElement(_,{href:"/help",linkClass:t},(0,p._i)(2922)),r.createElement(_,{href:"/guidelines",linkClass:t},(0,p._i)(16027)),r.createElement(_,{href:"https://careers.duolingo.com",linkClass:t},(0,p._i)(5919)),r.createElement(_,{href:"https://investors.duolingo.com",linkClass:t},(0,p._i)(30108)),r.createElement(_,{href:"/terms",linkClass:t},(0,p._i)(22838)),r.createElement(_,{href:"/privacy",linkClass:t},(0,p._i)(19704)))),(0,c.J9)()?r.createElement(o.Z,null):null)},25132:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var s=a(27378);var n=a(8649),r=a(42464),i=a(79465);const o=({disabled:e=!1,onClick:t,style:a})=>{const o=s.useRef(null),[l,c]=s.useState(!1);return s.useEffect((()=>{(0,n.d)()}),[]),(0,r.Z)((()=>{window.google&&n.m&&c(!0)}),l||e?void 0:10),s.useLayoutEffect((()=>{var a;l&&!e&&window.google.accounts.id.renderButton(o.current,{click_listener:t,width:null===(a=o.current)||void 0===a?void 0:a.offsetWidth})}),[l,e,t]),e?null:s.createElement("div",{className:"azhQX",onClick:()=>l?void 0:(0,i.j)("sign_in_tap",{target:"google_not_loaded"}),ref:o,style:a})}},29264:(e,t,a)=>{"use strict";a.d(t,{Z:()=>D});var s=a(60042),n=a.n(s),r=a(27378),i=a(3620),o=a(83063),l=a(47725),c=a(54452);var d=a(8654),u=a(35160),p=a(79465);class g extends r.Component{constructor(){super(...arguments),this.handleLogin=()=>{const{dispatch:e,redirectPath:t,trackingScreen:a,via:s}=this.props;(0,p.j)("click",{screen:a,target:"login"}),e({options:{allowLanguagelessUser:!0,isSignIn:!0,name:u.t.SignInUp,redirectPath:t,removeFooter:!0,via:s},type:"TOGGLE_MODAL"})}}render(){const{buttonClassName:e,className:t,text:a}=this.props;return r.createElement("div",{className:n()("_1R3fw",t)},r.createElement(o.Z,{className:n()("_1dzAz _2pIQ_",e),id:"sign-in-btn",onClick:this.handleLogin,variant:"solid"},(0,d._i)(a||9109)))}}var m=a(29973),h=a(4141),_=a(25011);const v=()=>r.createElement(_.Z,{modalName:u.t.PickUiLanguage},(()=>r.createElement(h.Z,{singleColumn:!0})));var f=a(83537);const S="_2-EEb",E="_2EUSW _1Jk5X";var y=a(88528),b=a(53229),w=a(93746),I=a(64865),T=a(74597);class k extends r.Component{constructor(){super(...arguments),this.state={displayPopover:!1},this.handleUiLanguageChange=()=>{"splash"===this.props.trackingScreen&&(0,p.j)("splash_tap",{target:"hamburger_switch_language"}),this.props.dispatch({options:{name:u.t.PickUiLanguage},type:"TOGGLE_MODAL"})}}componentDidMount(){(0,I.VF)({via:"mobile_menu"})&&(0,p.j)("web_to_app_store_load",{via:"mobile_menu"})}render(){const{via:e}=(0,b.vl)(),t=(0,I.VF)({via:"share_profile"===e?"share_profile":"mobile_menu"}),a=r.createElement(f.Z,{className:"IqgUt",onToggle:()=>this.setState((e=>({displayPopover:!e.displayPopover})),(()=>{if(this.state.displayPopover)switch(this.props.trackingScreen){case"splash":(0,p.j)("splash_tap",{target:"hamburger"});break;case"course_picker":(0,p.j)("course_picker_tap",{target:"hamburger",via:"onboarding"})}}))});return r.createElement("div",{className:"kbGl0"},a,this.state.displayPopover?r.createElement(m.Z,{direction:"down",offset:-40,onClick:()=>this.setState({displayPopover:!1}),onRequestClose:()=>this.setState({displayPopover:!1}),zIndex:parseInt(y.Z["z-index-popover"],10)},r.createElement("ul",null,r.createElement("li",{className:S},r.createElement(l.Z,{className:E,href:"/log-in",onClick:()=>{"splash"===this.props.trackingScreen&&(0,p.j)("splash_tap",{target:"hamburger_login"})}},(0,d._i)(1032))),r.createElement("li",{className:S},r.createElement(l.Z,{className:E,href:"/register",onClick:()=>{(0,p.j)("click",{which:"topbar get started"}),"splash"===this.props.trackingScreen&&(0,p.j)("splash_tap",{target:"hamburger_get_started"})}},(0,d._i)(18550))),t?r.createElement("li",{className:S},r.createElement(l.Z,{className:E,href:t,onClick:()=>{(0,p.j)("web_to_app_store_tap",{target:T.Z.ios?"apple":"google_or_China",via:"mobile_menu"})}},(0,d._i)(17779))):null,r.createElement("li",{className:S},r.createElement("button",{className:"MpS4m _1Jk5X",onClick:this.handleUiLanguageChange},(0,d._i)(18889)," ",(0,d._i)(154,{language_name:(0,w.vY)(w.h9)}))))):null,r.createElement(v,null))}}const C=k;var R=a(16494),O=a(87122),L=a(68709),P=a(30033),A=a(67173),N=a(50548);const D=({children:e,dispatch:t,isSplashPage:a,showButtons:s,trackingScreen:u,via:m})=>{const h=(0,N.TH)(),_=(0,i.$B)(),v=(0,c.isOnMobileEmailVerificationPage)(_);return r.createElement("header",Object.assign({className:n()(L.Z["logged-out-topbar-wrap"],{[L.Z["splash-topbar-wrap"]]:a})},(0,P._q)(A.V.LoggedOutTopbar)),r.createElement("div",{className:L.Z["logged-out-topbar"]},r.createElement(l.Z,{className:L.Z["logged-out-logo-container"],href:v?c.APP_HOME_DEEP_LINK:"/",onClick:()=>(0,p.j)("topbar_logo_tapped",{via:m})},r.createElement("img",{alt:(0,d.H8)(23227),className:L.Z["logged-out-logo"],src:O})),v?null:r.createElement("div",{className:L.Z["right-header"]},r.createElement(R.Z,{className:n()(L.Z["ui-language-wrap"],L.Z["hidden-on-mobile"]),style:a?"snow-always-light":"snow",trackingScreen:u}),e,r.createElement(g,{buttonClassName:L.Z["login-button"],className:void 0===s||s?L.Z["hidden-on-mobile"]:L.Z["hidden-everywhere"],dispatch:t,redirectPath:"/join-beta"===h.pathname||"/stories"===h.pathname?h.pathname:void 0,trackingScreen:u,via:m}),a?null:r.createElement(l.Z,{className:n()((0,o.y)({color:"owl",variant:"solid"}),L.Z["get-started"]),href:"/register",onClick:()=>(0,p.j)("click",{which:"topbar get started"})},(0,d._i)(18550)),a?null:r.createElement(C,{dispatch:t,trackingScreen:u}))))}},62827:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var s=a(60042),n=a.n(s),r=a(27378),i=a(94434);const o=({children:e,className:t,includeFooterLinks:a=!0})=>r.createElement(r.Fragment,null,r.createElement("div",{className:n()(t,"_2PVaI")},e),a?r.createElement(i.Z,null):null)},68466:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(27378),n=a(62827);const r=({children:e,includeFooterLinks:t})=>s.createElement("div",{className:"_31BK0"},s.createElement(n.Z,{className:"_11Uc5",includeFooterLinks:t},e))},36011:(e,t,a)=>{"use strict";a.d(t,{Mk:()=>n,ZP:()=>i});var s=a(27378);const n=s.createContext(void 0);class r{constructor(){this.refCallbacks={gemsInHomepage:[],heartsInSession:[]},this.setHeartsStatInLessonRef=e=>{this.heartsStatInLessonRef=e,this.triggerCallbacks("heartsInSession")},this.getHeartsStatInLessonRef=()=>this.heartsStatInLessonRef,this.setGemsHomepageRef=e=>{this.gemsHomepageRef=e,this.triggerCallbacks("gemsInHomepage")},this.getGemsHomepageRef=()=>this.gemsHomepageRef}addCallback(e,t){this.refCallbacks[e].push(t)}removeCallback(e,t){this.refCallbacks[e]=this.refCallbacks[e].filter((e=>e!==t))}triggerCallbacks(e){this.refCallbacks[e].forEach((e=>e()))}}const i=({children:e})=>{const[t]=s.useState((()=>new r));return s.createElement(n.Provider,{value:t},e)}},4141:(e,t,a)=>{"use strict";a.d(t,{Z:()=>g});var s=a(60042),n=a.n(s),r=a(27378),i=a(80254),o=a(36083),l=a(47725);const c={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","single-column":"WU2c8","double-column":"_2bJUZ","ui-language-item":"_1L4sH","always-light":"_1pQTl","ui-language-link":"tcPoF","ui-language-flag":"_24Zlo"};var d=a(93746),u=a(79465);const p=i.XP(d.Jl),g=({className:e,singleColumn:t,style:a,trackingScreen:s,via:i})=>r.createElement("ul",{className:n()(e,c[(t?"single":"double")+"-column"],{[c["always-light"]]:"always-light"===a})},p.map((e=>{const{pathname:t,search:a,hash:n}=window.location,p=`//${"zh"===e?"zh-CN":e}.duolingo.com${t}${a}${n}`;return r.createElement("li",{className:c["ui-language-item"],key:e},r.createElement(l.Z,{className:c["ui-language-link"],href:p,onClick:()=>{(async e=>{"splash"!==s&&"course_picker"!==s&&"courses_page"!==s&&"course_splash"!==s||await(0,u.j)("language_selector_tap",{fromLanguage:d.h9,toLanguage:e,via:i})})(e),(async()=>{"splash"===s&&await(0,u.j)("splash_tap",{target:"switch_language"})})()}},r.createElement(o.Z,{className:c["ui-language-flag"],lang:e,size:24}),(0,d.lx)(e)))})))},16494:(e,t,a)=>{"use strict";a.d(t,{Z:()=>y});var s=a(27378),n=a(31542),r=a(15094),i=a(83063),o=a(4141),l=a(29531),c=a(44629),d=a(52761);const u=a.p+"images/splash/ca207386f803360434a992c33872c226.svg",p=a.p+"images/splash/c6eae48dd48246c89e415b89f9e55282.svg",g=a.p+"images/splash/255ee21b76e98df868332c509534e531.svg",m=a.p+"images/splash/936d5abdc28aa4f6f7219f6784691930.svg",h={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210",_button:"_235VO _3yAjN","button-hare":"F_9RU _235VO _3yAjN","button-hare-always-light":"aZZ-b _235VO _3yAjN","button-snow":"_33Egi _235VO _3yAjN","button-snow-always-light":"M9G5O _235VO _3yAjN",caret:"_2myug",inner:"_29txQ",_popover:"_1ghmk","popover-hare":"sbzSU _1ghmk","popover-snow":"_9zYuM _1ghmk","popover-hare-always-light":"_3KsSl","popover-snow-always-light":"_2r9dh"};var _=a(88528),v=a(68903),f=a(8654),S=a(93746);const E=parseFloat(_.Z["margin-popover"])+parseFloat(_.Z["margin-popover-text"]),y=({className:e,trackingScreen:t,style:a="snow"})=>{const[y,b]=s.useState(!1),w=(0,l.f)({modifiers:[{name:"offset",options:{offset:[0,E]}}],placement:"bottom-end"}),I="dark"===(0,r.F)(),T="splash"===t?"splash":"course_picker"===t?"splash_course_picker":"courses_page"===t?"courses_logged_out_top_bar":"course_splash"===t?"course_splash":void 0;return s.createElement(c.Z,{className:e,customOffset:E,isOpen:y,onClose:()=>b(!1),onOpen:()=>b(!0),onToggle:()=>b(!y),popoverState:w.props.state,ref:w.setElementRef},s.createElement(i.Z,{className:h[`button-${a}`]},s.createElement("span",null,(0,f._i)(18889)," ",(0,f._i)(154,{language_name:(0,S.vY)(S.h9)})),s.createElement("img",{alt:"",className:h.caret,src:(()=>{switch(a){case"hare":return I?u:p;case"hare-always-light":return p;case"snow":return I?g:m;case"snow-always-light":return m;default:return void(0,v.RJ)(a)}})()})),y?(0,n.createPortal)(s.createElement(d.Z,{className:h[`popover-${a}`],innerClassName:h.inner,onRequestClose:()=>b(!1),popperProps:w.props,ref:w.setPopoverRef,stemContainerRef:w.setArrowRef,zIndex:parseInt(_.Z["z-index-popover"],10)},s.createElement(o.Z,{singleColumn:!1,style:"hare-always-light"===a||"snow-always-light"===a?"always-light":void 0,trackingScreen:t,via:T})),document.getElementById("overlays")):null)}},44451:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var s=a(27378),n=a(42659);var r=a(18804),i=a(79465);const o=e=>{var t,a,o,l;const c=(0,r.Fx)(n.Mb),d=null!==(a=null===(t=c.featureFlags)||void 0===t?void 0:t.web_frame_metrics_sampling_rate)&&void 0!==a?a:0,u=null!==(l=null===(o=c.featureFlags)||void 0===o?void 0:o.web_frame_metrics_slow_frame_threshold)&&void 0!==l?l:Math.ceil(1e3/60);s.useEffect((()=>{if(Math.random()<d){const t=new class{constructor(e,{resetEvery:t,slowFrameThreshold:a}){this.isObserving=!1,this.slowFrames=0,this.slowFramesDuration=0,this.totalDuration=0,this.totalFrames=0,this.disconnect=()=>{void 0!==this.requestAnimationFrameId&&(cancelAnimationFrame(this.requestAnimationFrameId),this.requestAnimationFrameId=void 0),this.isObserving=!1},this.flush=()=>{this.report(),this.reset()},this.observe=()=>{this.isObserving=!0,this.lastFrame=void 0,this.requestFrame()},this.frame=e=>{var t;this.requestAnimationFrameId=void 0;const a=this.lastFrame?Math.min(e-this.lastFrame,1e4):void 0;this.lastFrame=e,void 0!==a&&(this.slowestFrame=Math.max(null!==(t=this.slowestFrame)&&void 0!==t?t:0,a),this.totalDuration+=a,this.totalFrames++,a>=this.slowFrameThreshold&&(this.slowFrames++,this.slowFramesDuration+=a),void 0!==this.resetEvery&&this.totalDuration>=this.resetEvery&&this.flush()),this.requestFrame()},this.report=()=>{void 0!==this.slowestFrame&&this.callback({slowFrames:this.slowFrames,slowFramesDuration:this.slowFramesDuration,slowestFrame:this.slowestFrame,totalDuration:this.totalDuration,totalFrames:this.totalFrames})},this.requestFrame=()=>{this.isObserving&&void 0===this.requestAnimationFrameId&&(this.requestAnimationFrameId=requestAnimationFrame(this.frame))},this.reset=()=>{this.lastFrame=void 0,this.slowFrames=0,this.slowFramesDuration=0,this.slowestFrame=void 0,this.totalDuration=0,this.totalFrames=0},this.callback=e,this.resetEvery=t,this.slowFrameThreshold=a}}((t=>{e?(0,i.j)("app_performance_frames",{sampling_rate:d,slow_frame_count:t.slowFrames,slow_frame_duration_total:Math.round(t.slowFramesDuration),slow_frame_max_duration:t.slowestFrame>=u?Math.round(t.slowestFrame):void 0,slow_frame_session_duration:Math.round(t.totalDuration),slow_frame_session_name:e,slow_frame_threshold:u,total_frame_count:t.totalFrames}):(0,i.j)("app_performance_frames_aggregated",{sampling_rate:d,slow_frame_count_agg:t.slowFrames,slow_frame_duration_total_agg:Math.round(t.slowFramesDuration),slow_frame_max_duration_agg:t.slowestFrame>=u?Math.round(t.slowestFrame):void 0,slow_frame_session_duration_agg:Math.round(t.totalDuration),slow_frame_threshold:u,total_frame_count_agg:t.totalFrames})}),{resetEvery:36e5,slowFrameThreshold:u}),a=()=>{"hidden"===document.visibilityState?(t.disconnect(),t.flush()):t.observe()};return document.addEventListener("visibilitychange",a),a(),()=>{document.removeEventListener("visibilitychange",a),t.disconnect(),t.flush()}}}),[])}},31801:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(27378);var n=a(10391);const r=e=>{const[t,a]=s.useState(),r=((e,t)=>{const a=s.useRef(),n=s.useRef(null),r=s.useRef();return s.useLayoutEffect((()=>{a.current=e})),s.useLayoutEffect((()=>{const e=new IntersectionObserver((e=>{var t;return null===(t=a.current)||void 0===t?void 0:t.call(a,e[0])}),t);return n.current&&e.observe(n.current),r.current=e,()=>e.disconnect()}),[null==t?void 0:t.root,null==t?void 0:t.rootMargin]),s.useCallback((e=>{var t,a;n.current&&(null===(t=r.current)||void 0===t||t.unobserve(n.current)),e&&(null===(a=r.current)||void 0===a||a.observe(e)),n.current=e}),[])})((e=>a(e.isIntersecting)),e),i=s.useRef(null);return s.useLayoutEffect((()=>{var t;if(!i.current)return;const s=(0,n.jL)(null==e?void 0:e.rootMargin),r=(0,n.iY)((0,n.tW)(null!==(t=null==e?void 0:e.root)&&void 0!==t?t:null),s),o=i.current.getBoundingClientRect(),l=(0,n.mH)(r,o);a(void 0!==l)}),[]),[t,s.useCallback((e=>{r(e),i.current=e}),[])]}},69755:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var s=a(73790);const n=()=>(0,s.Z)()>0},58034:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i,y:()=>r});var s=a(27378),n=a(18804);const r=async()=>{try{return(await navigator.permissions.query({name:"microphone"})).state}catch(e){return"prompt"}},i=()=>{const e=(0,n.tX)();s.useEffect((()=>{let t=!1;return(async()=>{const a=await r();t||e({type:"MICROPHONE_PERMISSION",value:a})})(),()=>{t=!0}}),[])}},15746:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(70220),n=a(18804);const r=()=>(0,n.Fx)((e=>e.browserSettings.prefersReducedMotion))||s.H},73790:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(27378),n=a(17818);const r=()=>{const[e,t]=s.useState((()=>n.O.y));return s.useLayoutEffect((()=>{const e=()=>t(n.O.y);return n.O.addEventListener("scroll",e),()=>{n.O.removeEventListener("scroll",e)}}),[]),e}},17060:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var s=a(27378),n=a(17818);let r=!1;const i=({disabled:e,id:t,offset:a=0}={})=>{s.useEffect((()=>{if(!e&&!r&&window.location.hash.length>1){const e=window.location.hash.slice(1);if(t&&e!==t)return;const s=document.getElementById(e);s&&(n.O.scrollTo(0,n.O.y+s.getBoundingClientRect().top+a),r=!0)}}),[])}},75671:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(27378);const n=(e,t)=>t?e*(1e3/t):0,r=(e,t={})=>{t=Object.assign({damping:26,mass:1,stiffness:170},t);const a=s.useRef(),r=s.useRef(),i=s.useRef(),o=s.useRef(),l=s.useRef(),c=s=>{var d,u,p;const g=s-(null!==(d=r.current)&&void 0!==d?d:s);r.current=s;const m=(({damping:e=10,from:t,mass:a=1,restDistance:s=.5,restSpeed:r=2,stiffness:i=100,to:o,velocity:l=0})=>{l/=1e3;const c=o-t,d=Math.sqrt(i/a)/1e3,u=((e,t,a)=>t/(2*Math.sqrt(e*a)))(i,e,a),p=(()=>{if(u<1){const e=d*Math.sqrt(1-u*u);return t=>o-Math.exp(-u*d*t)*((u*d*c-l)/e*Math.sin(e*t)+c*Math.cos(e*t))}return e=>o-Math.exp(-d*e)*(c+(d*c-l)*e)})();return e=>{const a=p(e),i=0===e?l:((e,t,a)=>{const s=Math.max(t-5,0);return n(a-e(s),t-s)})(p,e,a),c=t<o&&a>=o||t>o&&a<=o||t===o,d=Math.abs(o-a)<=s,u=Math.abs(i)<=r;return{current:a,done:d&&u,hasReachedTarget:c,target:o,velocity:i}}})(Object.assign(Object.assign({},t),{from:null!==(u=a.current)&&void 0!==u?u:0,to:null!==(p=o.current)&&void 0!==p?p:1,velocity:l.current}))(g);a.current=m.current,l.current=m.velocity,m.hasReachedTarget&&t.clamp&&(m.done=!0),m.done?i.current=void 0:i.current=window.requestAnimationFrame(c),e(m)},d=s.useCallback((()=>void 0!==i.current),[]),u=s.useCallback(((e,s)=>{a.current=e,r.current=void 0,o.current=s,l.current=t.velocity,void 0!==i.current&&window.cancelAnimationFrame(i.current),i.current=window.requestAnimationFrame(c)}),[t.velocity]),p=s.useCallback((()=>{void 0!==i.current&&(window.cancelAnimationFrame(i.current),i.current=void 0)}),[]),g=s.useCallback((e=>o.current=e),[]);return{isAnimating:d,start:u,stop:p,target:o,update:g}}},13026:(e,t,a)=>{"use strict";a.d(t,{Ue:()=>M,ZP:()=>H,gs:()=>D});var s=a(60042),n=a.n(s),r=a(27378),i=a(36083),o=a(83063),l=a(43670),c=a(42659);const d=a.p+"images/leagues/5642e1e72813a88e8973b551a2004c7f.svg",u=a.p+"images/leagues/f12703218fc80de76a63e650726f742e.svg",p=a.p+"images/leagues/9fadb349c2ece257386a0e576359c867.svg",g=a.p+"images/leagues/a8e5c18e80054228b2c61168846ff643.svg",m=a.p+"images/leagues/6b8a8db5ac7f847e7e87efe97c8b451a.svg",h=a.p+"images/leagues/535fc27de224cc7d311dbb5de4f33be6.svg",_=a.p+"images/leagues/2ceb401cae52712705b66a77df83ce40.svg",v=a.p+"images/leagues/beb0df263d0f696bc7095d56b448ca78.svg",f=a.p+"images/leagues/573de2bc90b2499eeb2b3738cff90133.svg",S=a.p+"images/leagues/6df6337370e45c1b9a5029e78211d114.svg",E=a.p+"images/leagues/a35f1db4398fd29e66f1abc33a0d11a2.svg",y=a.p+"images/leagues/2439bac00452e99ba7bf6a7ed0b04196.svg",b=a.p+"images/leagues/22df4cb957e6cf2d7198b6e5449a342e.svg",w="_28T-y _2WS1S",I="_3Wtvm _3eRjX";var T=a(68903),k=a(93746),C=a(87471),R=a(18804);const O=k.Dz.map((e=>`FLAG,${e}`)),L=e=>e.slice(5),P=["NONE","ANGRY","SUNGLASSES","CAT","DUMPSTER_FIRE","EYES","FLEX","ONE_HUNDRED","POOP","POPCORN","POPPER","TROPHY",...O],A=["ANGRY","SUNGLASSES"],N={ANGRY:u,CAT:h,DUMPSTER_FIRE:p,EYES:g,FLEX:m,ONE_HUNDRED:d,POOP:v,POPCORN:f,POPPER:_,SUNGLASSES:y,TROPHY:b},D=(0,T.p)(P),x=(0,T.p)(O),M=({className:e,isEmphasizing:t=!1,isSmall:a,reaction:s,returnPlaceholder:o=!1})=>{const[l,c]=r.useState("NONE"),[d,u]=r.useState("NONE"===s?l:s),[p,g]=r.useState(!1);if(r.useEffect((()=>{"NONE"===s?(g(!0),u(l)):(g(!1),u(s),c(s))}),[s]),"NONE"===s){if(o)return r.createElement("div",{className:n()(e,a?"_2zWeL _2WS1S":w)},r.createElement("img",{className:a?"_3vDrb":"fte9h",src:a?S:E}));if("NONE"===l)return null}const m=x(d),h=A.includes(d),_=(()=>{if(!m)return h?a?"_2-VJ3":"_2wqd1":a?"MG9r_":"_2_mIU"})(),v=m?a?"_2Dohv":"_1KIMq":void 0,f=h?a?"_258ba _2WS1S":"_1U1N1 _28T-y _2WS1S":a?"_2WS1S":w,y=n()(e,f,t?"_3MbJK":void 0,p?"_2DkB8":void 0);return r.createElement("div",{className:y},m?r.createElement(i.Z,{className:v,lang:L(d),size:a?22:38}):r.createElement("img",{className:_,src:N[d]}))},F=(e,t)=>P.includes(e)?A.includes(e)?e===t?"YW-x5 _2YJm6 _3eRjX":"_2YJm6 _3eRjX":e===t?"AZ9bq _3eRjX":I:I,U=({activeReaction:e,onReactionClick:t,reactions:a})=>r.createElement("div",{className:"_1V6a-",style:{gridTemplateColumns:`repeat(${a.length}, 1fr)`}},a.map(((a,s)=>r.createElement(o.Z,{className:F(a,e),key:s,onClick:()=>t(a),variant:"stroke"},x(a)?r.createElement(i.Z,{lang:L(a),size:38}):r.createElement("img",{className:"kC7Wi",src:N[a]}))))),H=({displayedReaction:e,isEmphasizing:t,onReactionClick:a,type:s})=>{var n;const i=(0,R.Fx)(c.Oz),o=(0,R.Fx)(c.np),d=["SUNGLASSES","POPPER","FLEX","EYES","POPCORN","FLAG,".concat(i.learningLanguage)];return r.createElement("div",{className:"_323mI"},r.createElement("div",{className:"panel"===s?"_3pNi3":"_2bN71 _3pNi3"},r.createElement(l.Z,{displaySize:80,forceNoPicture:(0,C.dt)(o),picture:o.picture,size:"xxlarge",user:{id:o.id,name:null!==(n=o.name)&&void 0!==n?n:o.username}}),r.createElement(M,{isEmphasizing:!1,isSmall:!1,reaction:"NONE",returnPlaceholder:!0}),r.createElement(M,{isEmphasizing:t,isSmall:!1,reaction:e}),r.createElement("span",{className:"_18J-r"})),r.createElement(U,{activeReaction:e,onReactionClick:a,reactions:d}),r.createElement(U,{activeReaction:e,onReactionClick:a,reactions:["ANGRY","ONE_HUNDRED","POOP","TROPHY","DUMPSTER_FIRE","CAT"]}))}},98071:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var s=a(27378),n=a(59815),r=a(51158),i=a(79465);class o extends s.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){if(!(0,n.Wp)(e)){const a=(0,r.vU)(e,{data:t});(0,i.j)("app_crash",{crash_message:e.message,crash_type:e.name,rollbar_uuid:null==a?void 0:a.uuid})}}render(){return this.state.hasError?null:s.createElement(s.Suspense,{fallback:null},this.props.children)}}const l=o},25011:(e,t,a)=>{"use strict";a.d(t,{Z:()=>T});var s=a(60042),n=a.n(s),r=a(27378),i=a(31542),o=a(2580),l=a(94856),c=a(15094),d=a(59073),u=a(42659);const p=a.p+"images/48b38c250a652878bc0c779a07f2ca48.svg";var g=a(45633);const m={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","style-super":"eQGGV","style-white":"_3lUbm",container:"_8_UHb","container-secondary-modal":"vhYh4",_content:"_13Rl7",content:"_1hEOp _13Rl7","content-fullscreen":"SBf4a _13Rl7",close:"FrL-W","close-fullscreen":"_2F37r","close-top-left":"_2gfp1 FrL-W","close-top-left-with-header":"_2OQnN _2gfp1 FrL-W"};var h=a(17818),_=a(9979),v=a(50498),f=a(30033),S=a(67173),E=a(68903),y=a(26506),b=a(35160),w=a(18804);const I=({animateOnMount:e,animation:t,children:a,className:s,closeStyle:i,fullscreen:b,isSecondaryModal:I=!1,isVisible:T,onDismiss:k,restoreScrollPosition:C})=>{const R=(0,w.Fx)(u.Sg),O=(0,w.Fx)(u.ep)&&!I,L=(0,w.Fx)((e=>e.ui.modalShouldWaitForOverlay)),[P,A]=r.useState(T?"visible":"invisible"),N=r.useRef(null);(0,l.Z)({disabled:"visible"!==P||R||O||b,onClick:k,ref:N}),(0,h.H)("invisible"!==P,C);const D="dark"===(0,c.F)();return r.useEffect((()=>{let e=!1;return T?(async()=>{switch(P){case"before-fade-in":await(0,_.Gg)(),e||A("overlay");break;case"fading-out":A("overlay");break;case"invisible":A("before-fade-in");break;case"overlay":"overlay-then-modal"===t&&!b&&L&&await(0,v._v)(_.nN),e||A("visible");break;case"visible":break;default:(0,E.RJ)(P)}})():(async()=>{switch(P){case"before-fade-in":A("invisible");break;case"fading-out":await(0,v._v)(_.nN),e||A("invisible");break;case"invisible":break;case"overlay":case"visible":A("fading-out");break;default:(0,E.RJ)(P)}})(),()=>{e=!0}}),[b,T,P]),r.useEffect((()=>{if(!R&&"visible"===P){const e=e=>{"Escape"===e.key&&k()};return y.U.disableListeners(),y._.disableListeners(),document.addEventListener("keydown",e),()=>{y.U.enableListeners(),y._.enableListeners(),document.removeEventListener("keydown",e)}}}),[R,k,P]),"invisible"===P?null:r.createElement(o.ZP,{autoFocus:!1,whiteList:e=>"com-1password-menu"!==e.localName},r.createElement(d.Z,{animateOnMount:e,isVisible:"visible"===P},r.createElement("div",{className:I?m["container-secondary-modal"]:m.container},r.createElement("div",{className:n()(m["content"+(b?"-fullscreen":"")],s),ref:N},"hidden"===i?null:r.createElement("div",Object.assign({},(0,f._q)(S.V.CloseButton),{className:b?m["close-fullscreen"]:"top-left"===i?m["close-top-left"]:"top-left-with-header"===i?m["close-top-left-with-header"]:m.close,onClick:k}),r.createElement("img",{src:D?p:g})),a))))},T=({animateOnMount:e,animation:t="overlay-then-modal",children:a,className:s,closeStyle:o,customStyle:l=b.W.White,isFullscreen:c=!1,isSecondaryModal:d=!1,modalName:u,onDismiss:p})=>{var g;const h=(0,w.tX)(),_=(0,w.Fx)((e=>e.ui.isModalReallyOpen)),v=(0,w.Fx)((e=>e.ui.modal)),f=(0,w.Fx)((e=>e.ui.secondaryModal)),S=(0,w.CC)(),[E,y]=r.useState(),T=(null==v?void 0:v.name)===u||d&&(null==f?void 0:f.name)===u,k=d?f:v;T&&k!==E&&y(k),r.useLayoutEffect((()=>(h({name:u,type:"MODAL_MOUNTED"}),()=>{h({name:u,type:"MODAL_UNMOUNTED"})})),[]),r.useEffect((()=>{if(T)return _||h({type:"MODAL_OPENED"}),()=>{var e;void 0===(null===(e=S.getState().ui.modal)||void 0===e?void 0:e.name)&&h({type:"MODAL_CLOSED"})}}),[T]);const C=()=>{p&&E?p({modalOptions:E}):h(d?{options:void 0,type:"TOGGLE_SECONDARY_MODAL"}:{options:void 0,type:"TOGGLE_MODAL"})};return(0,i.createPortal)(r.createElement(I,{animateOnMount:e,animation:t,className:n()(m[l],s),closeStyle:o,fullscreen:c,isSecondaryModal:d,isVisible:T,onDismiss:C,restoreScrollPosition:null===(g=null==E?void 0:E.restoreScrollPosition)||void 0===g||g},E?a({modalOptions:E,onDismiss:C}):null),document.getElementById("overlays"))}},22772:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v,getRemainingSessions:()=>h});var s=a(27378),n=a(86155),r=a(42659),i=a(93540),o=a(60752),l=a(23275),c=a(51158),d=a(89260),u=a(80820),p=a(18804),g=a(79465),m=a(64591);function*h(e,t){for(t||(t={level:e[0].levels[0],levelIndex:0,unitIndex:0,unitNumber:1});t;){if("unit_test"===t.level.state)return;for(let e=t.level.finishedSessions;e<t.level.totalSessions;e++)yield(0,m.$f)(t,["level"],{finishedSessions:e,state:"active"});t=(0,l.OE)(e,t)}}const _=async(e,t,a,s,n,r)=>{const i={pathLevelNumber:(e.levelIndex+1).toString(),pathUnitNumber:(e.unitIndex+1).toString(),type:"path-level"};return void 0===(await(0,d.u4)({dispatch:t.dispatch.bind(t),getState:t.getState.bind(t),includeFreeform:a,includeListening:s,includeSmartTips:n,includeSpeaking:r,levelData:e,params:i,sessionWillStartRightAway:!1})).sessionPrefetchedTimestamp},v=()=>{const e=(0,p.Fx)(r.$4),t=(0,p.Fx)(r.Xr),a=(0,p.Fx)(r.df),l=(0,p.CC)(),{includeListening:d,includeSpeaking:m}=(0,n.ZP)();return s.useEffect((()=>{t&&!a&&(async()=>{try{await(async(e,t,a,s,n)=>{const r=e.getState(),l=(0,i.cb)(r),d=(0,i.HF)(r);if(!l||!d)return;const p=await(0,o.b)(),[m,v]=((e,t)=>{const a=[];let s=!1;for(const n of h(e,t))if((0,u.tr)(n.level)){if(a.push(n),8===a.length)break}else if("chest"===n.level.type){if(s)return a.pop(),[a,!0];s=!0}return[a,!1]})(d,l),f=m.map((async n=>{try{return await _(n,e,s&&"story"===n.level.type,t,s&&"story"!==n.level.type,a)}catch(e){return(0,c.Kp)(e),"error"}})),S=await Promise.all(f);if(await(0,u._x)(e),await(0,u.rb)(e),Math.random()<.1){const e=S.filter((e=>!0===e)).length,t=S.filter((e=>"error"===e)).length,a=(await p.getAllKeys("prefetchedSessions")).length;(0,g.j)("prefetch_sessions_end",{download_time_seconds:Math.round((window.performance.now()-n)/1e3),num_sessions_downloaded:e,num_sessions_in_cache:a,num_sessions_remaining:t,prefetch_end_reason:t>0?"error":v?"multiple_chests":e>0?"finished":"nothing_to_download"})}})(l,d,m,e,window.performance.now())}catch(e){(0,c.Kp)(e)}})()}),[d,m,e,t,a]),null}},77888:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var s=a(42659),n=a(21791),r=a(18804);const i=()=>{const e=(0,r.Fx)(s.Oz);return(0,r.Fx)((t=>void 0===e?0:(0,n.L)(t)))}},83537:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var s=a(60042),n=a.n(s),r=a(27378);const i=r.forwardRef(((e,t)=>{var{children:a,className:s,onToggle:i,tabIndex:o}=e,l=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(e,["children","className","onToggle","tabIndex"]);return r.createElement("div",Object.assign({className:n()("_2eeKH",s),onClick:i,onKeyDown:e=>{["Enter"," "].includes(e.key)&&(i(),e.preventDefault())},onMouseUp:e=>{e.stopPropagation()},ref:t,role:"button",tabIndex:null!=o?o:0},l),a)}))},29531:(e,t,a)=>{"use strict";a.d(t,{R:()=>i,f:()=>c});var s=a(27378),n=a(97276),r=a(88528);const i="bottom",o=parseFloat(r.Z["juicy-length"]),l=e=>[{name:"arrow",options:{element:e,padding:parseFloat(r.Z["margin-popover-stem"])}},{name:"flip",options:{padding:o}},{name:"offset",options:{offset:[0,parseFloat(r.Z["margin-popover"])]}},{name:"preventOverflow",options:{padding:o}}],c=(e={})=>{var t,a,{modifiers:r=[]}=e,o=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(e,["modifiers"]);const[c,d]=s.useState(null),[u,p]=s.useState(null),[g,m]=s.useState(null),h=(0,n.D)(u,g,Object.assign({modifiers:[...l(null!=c?c:void 0),...r]},o));return{currentPlacement:null!==(a=null===(t=h.state)||void 0===t?void 0:t.placement)&&void 0!==a?a:i,props:h,setArrowRef:d,setElementRef:p,setPopoverRef:m}}},44629:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var s=a(60042),n=a.n(s),r=a(27378),i=a(29973),o=a(29531);const l={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210",_after:"_15ywt",wrap:"_34k_q","wrap-open-down":"fYaYB _15ywt _34k_q","wrap-open-left":"_1j0Jz _15ywt _34k_q","wrap-open-right":"JF6Vl _15ywt _34k_q","wrap-open-up":"_14-op _15ywt _34k_q"};const c=e=>null!==e&&"direction"in e,d=r.forwardRef(((e,t)=>{var a,{children:s,className:d,customOffset:u,isOpen:p,onClose:g,onOpen:m,onToggle:h,popoverState:_,tabIndex:v}=e,f=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(e,["children","className","customOffset","isOpen","onClose","onOpen","onToggle","popoverState","tabIndex"]);const S=c(_)?_.direction:(0,i.h)(null!==(a=null==_?void 0:_.placement)&&void 0!==a?a:o.R),E=()=>c(_)?_.ref.current:null==_?void 0:_.elements.popper;return r.createElement("div",Object.assign({className:n()(l["wrap"+(p?`-open-${S}`:"")],d),onClick:e=>{var t;(null===(t=E())||void 0===t?void 0:t.contains(e.target))||h()},onKeyDown:e=>{["Enter"," "].includes(e.key)&&(h(),e.preventDefault())},onMouseEnter:m,onMouseLeave:g,onMouseUp:e=>{e.stopPropagation()},onTouchEnd:e=>{var t;(null===(t=E())||void 0===t?void 0:t.contains(e.target))||(e.preventDefault(),h())},ref:t,style:void 0!==u&&u>=0?{"--offset":`${u}px`}:void 0,tabIndex:null!=v?v:0},f),s)}))},52761:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var s=a(27378),n=a(29973),r=a(29531),i=a(8654);const o=e=>"placement"in e,l=s.forwardRef(((e,t)=>{var a,l,{dir:c,popperProps:d,style:u}=e,p=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(e,["dir","popperProps","style"]);let g=(0,n.h)(o(d)?d.placement:null!==(l=null===(a=d.state)||void 0===a?void 0:a.placement)&&void 0!==l?l:r.R);const m="left"===g?90:"right"===g?-90:"up"===g?180:0,h=Object.assign({margin:0},o(d)?d.arrowProps.style:d.styles.arrow);h.transform&&(h.transform=`${h.transform} rotate(${m}deg)`);const _=Object.assign(Object.assign({margin:0},o(d)?d.style:d.styles.popper),u);return i.lw&&("left"===g?g="right":"right"===g&&(g="left")),s.createElement(n.Z,Object.assign({},p,{direction:g,manualPositioning:!0,ref:t,stemContainerStyle:h,style:_}))}))},33467:(e,t,a)=>{"use strict";var s;a.d(t,{K:()=>s}),function(e){e[e.Loading=0]="Loading",e[e.Login=1]="Login",e[e.Mistakes=2]="Mistakes",e[e.Features=3]="Features",e[e.Benefits=4]="Benefits",e[e.Timeline=5]="Timeline",e[e.Packages=6]="Packages",e[e.BillingInfo=7]="BillingInfo",e[e.Welcome=8]="Welcome"}(s||(s={}))},86155:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>c,eG:()=>l});var s=a(30427),n=a(42659),r=a(17135),i=a(68564),o=a(18804);const l=s.P1(n.jv,n.iH,n.Jw,n.np,((e,t,a,s)=>{const n=(0,r.Zo)(),o=s.enableMicrophone,l=s.enableSpeaker,c=e.listenDisabledUntil,d=a.microphonePermission,u=e.speakDisabledUntil,p=l&&c<n,g=u>=n,m=o&&u<n,h=["ar","ca","cs","cy","da","de","el","en","eo","es","fi","fr","ga","gd","gn","he","hi","ht","hu","hv","id","it","ja","la","nl-NL","no-BO","nv","pl","pt","ro","ru","sv","sw","tlh","tr","uk","vi","zh","zu"].includes(t),_=["de","en","es","fr","it","pt","nl-NL","da","sv","tr","no-BO","uk","ru"].includes(t)&&"denied"!==d&&i.c;return{includeListening:p&&h,includeSpeaking:m&&_,isListenEnabled:p,isListenSupported:h,isSpeakDisabledTemporarily:g,isSpeakEnabled:m,isSpeakSupported:_,microphonePermission:d,showSpeakingExercisesSetting:i.c}})),c=()=>{const e=(0,o.tX)(),t=(0,o.Fx)(l);return Object.assign(Object.assign({},t),{resetListenDisabledTemporarily:()=>e({type:"ENABLE_LISTEN"}),resetSpeakDisabledTemporarily:()=>e({type:"ENABLE_SPEAK"})})}},8121:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var s=a(60042),n=a.n(s),r=a(27378),i=a(47725);const o=a.p+"images/china/8ac5f69a53362c09584230c85b567ef7.png",l=({inSplash:e})=>r.createElement("div",{className:n()("_2CEvq",{_2UmiF:e})},r.createElement("div",{className:"FwftD"},r.createElement(i.Z,{href:"http://beian.miit.gov.cn"},"京ICP备14061397号-1"),r.createElement("span",null," • "),r.createElement("img",{src:o}),r.createElement(i.Z,{href:"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010102005866"},"京公网安备 11010102005866 号")))},16376:(e,t,a)=>{"use strict";a.d(t,{Z:()=>v});var s=a(60042),n=a.n(s),r=a(27378),i=a(80254),o=a(36083),l=a(47725),c=a(42659);const d="_1fESl _1G1lu",u="TNj94";var p=a(26886),g=a(8654),m=a(93746),h=a(18804);const _=["en","es","fr","de","it","pt","nl-NL","ja"],v=({className:e,disabled:t,onCarouselItemClick:a,trackingScreen:s})=>{const v=r.useRef(null),f=r.useRef([]),S=r.useRef(null),[E,y]=r.useState(),[b,w]=r.useState(0),{featureFlags:{linfra_hide_picker_web:I}}=(0,h.Fx)(c.Mb),T=r.useMemo((()=>{var e;return(null!==(e=m.Jl[m.h9])&&void 0!==e?e:[]).filter((e=>!(I&&(0,p.It)(e,m.h9))))}),[I]),k=_.filter((e=>T.includes(e))),C=i.jj([...k,...T]),R=(()=>{var e;for(let t=0;t<C.length;t++)if((null!==(e=null==E?void 0:E[t-1])&&void 0!==e?e:0)>=b)return t;return 0})(),O=null==E?void 0:E[E.length-1],L=()=>{var e;const t=null===(e=v.current)||void 0===e?void 0:e.getBoundingClientRect().width;return void 0===O||void 0===t?void 0:Math.max(O-t,0)},P=e=>{var t;return null!==(t=null==E?void 0:E[e-1])&&void 0!==t?t:0};return r.useLayoutEffect((()=>{var e,t;if(S.current){const a=S.current.getBoundingClientRect().left,s=[];for(let e=1;e<f.current.length;e++){const t=f.current[e];t&&(s[e-1]=t.getBoundingClientRect().left-a)}s[f.current.length-1]=s[f.current.length-2]+(null!==(t=null===(e=f.current[f.current.length-1])||void 0===e?void 0:e.getBoundingClientRect().width)&&void 0!==t?t:0),y(s)}}),[]),r.createElement("nav",{className:n()("fh7hk",e)},r.createElement("svg",{className:d,fill:"none",onClick:()=>{const e=L();if(void 0===e)return;const t=Math.max(P(R-2),0);w(t<b?t:e)},viewBox:"0 0 16 16"},r.createElement("path",{d:"M10 2L4 8L10 14",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})),r.createElement("div",{className:"kuc9r",ref:v},r.createElement("ul",{className:"_1NFpv",ref:S,style:{transform:`translateX(-${b}px)`}},C.map(((e,n)=>{return r.createElement("li",{key:e,ref:e=>f.current[n]=e},(i=r.createElement(r.Fragment,null,r.createElement(o.Z,{className:"_1v6Jc",lang:e,size:36}),r.createElement("span",{className:"w9lql"},(0,g._i)(154,{language_name:(0,m.vY)(e)}))),t?r.createElement("span",{className:u},i):r.createElement(l.Z,{className:u,href:(0,p.og)(e),onClick:a,trackingScreen:s,trackingTarget:"flag"},i)));var i})))),r.createElement("svg",{className:d,fill:"none",onClick:()=>{const e=L();if(void 0===e)return;const t=Math.min(P(R+2),e);w(t>b?t:0)},viewBox:"0 0 16 16"},r.createElement("path",{d:"M6 2L12 8L6 14",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})))}},98683:(e,t,a)=>{"use strict";a.d(t,{J:()=>f,Q:()=>S});var s=a(33467),n=a(9249),r=a(42659),i=a(80164),o=a(50548),l=a(8654),c=a(35160),d=a(2439),u=a(9832),p=a(32499),g=a(88868),m=a(18804),h=a(79465),_=a(16086),v=a(20028);const f=()=>{const e=(0,m.Fx)(i.y1);return(0,m.Fx)((e=>"alreadyHasSuper"===(0,i.gb)(e)))?(0,l._i)(34068):e?(0,l._i)(38413,{num:2}):(0,l._i)(34201)},S=({customStartStep:e=s.K.Packages,iapContext:t,onBeforeClose:a}={})=>{const l=(0,m.Fx)(i.y1),f=(0,u.ew)(),S=(0,o.k6)(),E=(0,m.Fx)((e=>(0,r.Mb)(e).ipCountry)),y=(0,m.Fx)(r.Lm),b=(0,o.TH)(),w=(0,m.Fx)(r.np),I=(0,m.tX)(),T=(0,m.CC)();return(s=!1)=>{const r="boolean"==typeof s&&s;if(y&&!(0,v.pN)(w))(0,d.j)(Object.assign({customStartStep:r?(0,p.$2)(e):e,didClickFreeTrial:l,onBeforeClose:a,trackingProps:{iap_context:null!=t?t:l?"plus_landing_page_trial":"plus_landing_page_no_trial"}},r?{defaultSubscriptionPlanType:p._r.FamilyPlan}:{}),I);else{const t=(0,_.Pc)()?"plus_landing_page_trial_user":"plus_landing_page_logged_out";(0,h.j)("premium_ad_click",{iap_context:t}),I({options:{allowLanguagelessUser:!0,closeModalOnLogin:!1,goBack:async s=>{switch(await Promise.all([I(n.ke()),I(n.Hm(E,f))]),(0,i.gb)(T.getState())){case"eligible":case"eligibleFreeTrial":(0,d.q)({customStartStep:e,didClickFreeTrial:l,onBeforeClose:a,restoreScrollPosition:!1,trackingProps:{iap_context:t}},I);break;case"alreadyHasSuper":null==s||s();break;case"ineligible":null==s||s(),S.push(g.B6)}},isSignIn:!1,limitRedirect:"ui-language-change",name:c.t.SignInUp,redirectPath:b.pathname||"/super",via:"plus_landing_page_start_free_trial"},type:"TOGGLE_MODAL"})}}}},14649:(e,t,a)=>{"use strict";a.d(t,{_:()=>o});var s=a(77167),n=a(79465),r=a(81621),i=a(20028);const o=()=>async(e,t)=>{const a=t(),{user:o,user:{fromLanguage:l,learningLanguage:c}}=a;if(c)try{const t=await s.I7.getAchievementsV3(o.id,l,c,(0,i.jq)(o),(0,r.rt)(o),(0,i.dE)(o),o.hasPlus);t.length>0?e({achievements:t,type:"UPDATE_USER_ACHIEVEMENTS_V3"}):s.I7.migrateToV3(o.id)}catch(e){(0,n.DT)("load_v3_user_achievements_failed","Failed to load V3 user achievements",e)}}},50791:(e,t,a)=>{"use strict";a.d(t,{i:()=>r});var s=a(77167),n=a(79465);const r=()=>async e=>{try{e({config:await s.Vi.getConfig(),type:"UPDATE_CONFIG"})}catch(e){(0,n.DT)("load_config_failed","Failed to load config",e)}}},14092:(e,t,a)=>{"use strict";a.d(t,{F:()=>i,Z:()=>o});var s=a(77167),n=a(93746),r=a(79465);const i=async(e,t,a,i)=>{await s._s.courseSubscribe(t,a,i);const o=(0,n.D3)(null!=a?a:n.h9);(0,r.j)("course subscribe",{from_language:o,learning_language:(0,n.D3)(t),logged_in:e})},o=async(e,t,a)=>{await s._s.courseUnsubscribe(e,t,a)}},61544:(e,t,a)=>{"use strict";a.d(t,{Fn:()=>u,GG:()=>i,HQ:()=>l,j1:()=>o,oh:()=>c,tD:()=>d,w7:()=>p});var s=a(42659),n=a(77167),r=a(81621);const i=()=>async(e,t)=>{const a=(0,s.np)(t());if(!(0,r.rt)(a))return;const i=(0,s.Mb)(t()),[o,l,c]=await Promise.all([n.i_.getFeed(a.id,a.fromLanguage,i),n.i_.getKudosAssets(i),n.i_.getKudosDrawer(a.id,a.fromLanguage,i)]);e({feed:o,type:"SET_FEED"}),e({assets:l,type:"SET_KUDOS_ASSETS"}),e({drawer:c,type:"SET_KUDOS_DRAWER"})},o=(e,t,a)=>async s=>{await n.i_.updateFeed(e,t,!1,a),await s(i())},l=(e,t,a)=>async s=>{await n.i_.sendKudos(e,t,a),await s(i())},c=e=>async t=>{await n.i_.unsendKudos(e),await t(i())},d=(e,t)=>async a=>{a({recommendationInfo:await n.i_.getFriendRecommendations(e,t),type:"SET_FOLLOW_SUGGESTIONS"})},u=(e,t)=>async a=>{const{filteredIds:s,rotatedIds:r}=await n.i_.updateFriendRecommendations(e,t);a({filteredIds:s,rotatedIds:r,type:"UPDATE_FOLLOW_SUGGESTIONS"})},p=(e,t)=>async a=>{await n.i_.deleteFriendRecommendation(e,t),a({deletedId:t,type:"DELETE_FOLLOW_SUGGESTION"})}},33:(e,t,a)=>{"use strict";a.d(t,{AG:()=>L,Ic:()=>w,Up:()=>b,b5:()=>y,kS:()=>R,lx:()=>C,mE:()=>I,pt:()=>k});var s=a(99369),n=a(80254),r=a(86155),i=a(9990),o=a(42659),l=a(73520),c=a(74462),d=a(93540),u=a(77167),p=a(17135),g=a(59249),m=a(94171),h=a(74311),_=a(68903),v=a(16689),f=a(51158),S=a(79465),E=a(55829);const y=()=>async(e,t)=>{var a,s,c,f,y,b;const w=t(),I=(0,o.np)(w),[k,C,R]=await Promise.all([u.JV.getQuestsData(I.id),u.JV.getQuestsSchema(I.fromLanguage),u.JV.getQuestProgress({timezone:I.timezone,uiLanguage:I.fromLanguage,userId:I.id})]),L=null!==(a=C.goals)&&void 0!==a?a:[],P=R.difficulty-1;e({payload:L,type:"SET_GOALS_SCHEMA"}),e({payload:R.goals.progress,type:"SET_GOALS_PROGRESS"}),e({payload:P,type:"SET_GOALS_DIFFICULTY"}),e({badges:C.badges,type:"SET_QUEST_BADGES"}),e({earnedBadges:null!==(s=R.badges.details)&&void 0!==s?s:[],type:"SET_EARNED_BADGES"});const A=(0,m.ed)(k),N=(0,g.ky)("debugFriendsQuestState");if(A){const t=n.HK(L,"goalId"),a=A.goalId,s=A.questState===E.S.ACTIVE?R.goals.details[a]:null===(f=null===(c=R.pastGoals)||void 0===c?void 0:c[0])||void 0===f?void 0:f.details;e(T({details:s,friendsQuestInfo:A,historicalStats:R.goals.historicalStats,schemaByGoalId:t}))}else e(N?{payload:(0,m.ET)(),type:"SET_FRIENDS_QUEST_DETAILS"}:{payload:void 0,type:"SET_FRIENDS_QUEST_DETAILS"});e(O(Date.now()));const{lastUpdated:D}=(0,l.oV)(w),x=(0,r.eG)(w),M=(0,d.HF)(w),{includeSpeaking:F,includeListening:U}=x,H={includeListening:U,includeSpeaking:F,learningLanguage:I.learningLanguage,path:M};if((0,g.ky)("debugRefreshDailyQuests")||!D||!(0,p.zk)((0,p.Gz)(D))){const t=(0,h.Ch)({assignedQuestGoalIds:[],questEligibilityParams:H,schema:L,slotType:"DAILY"}),a=(0,h.Ch)({assignedQuestGoalIds:t?[t]:[],questEligibilityParams:H,schema:L,slotType:"CORE"}),s=(0,h.Ch)({assignedQuestGoalIds:[t,a].filter(_.$K),questEligibilityParams:H,schema:L,slotType:"HARD"});e({payload:{coreQuest:a,dailyQuest:t,hardQuest:s,lastUpdated:Date.now()},type:"SET_DAILY_QUESTS"}),[a,t,s].forEach((e=>{e&&(0,S.j)("daily_quest_assigned",{daily_quest_difficulty:P,daily_quest_name:e})}))}const j=null!==(y=(0,g.ky)("debugChooseSpecificMonthlyChallenge"))&&void 0!==y?y:(0,v.$A)(L);e({payload:{updates:0},type:"SET_MONTHLY_CHALLENGE_PROGRESS_UPDATE"}),e({payload:j,type:"SET_MONTHLY_QUEST"}),e({monthlyQuestTheme:null===(b=C.themes)||void 0===b?void 0:b.filter((e=>e.themeId===j))[0],type:"SET_MONTHLY_QUEST_THEME"}),e((0,i._P)(I.id))},b=()=>(e,t)=>{const a=t(),s=(0,l.D_)(a),n=s.schema;if(n.length<1)return;const i=(0,l.oV)(a),o=(0,r.eG)(a),c=(0,d.HF)(a),{includeSpeaking:u,includeListening:p}=o,g={includeListening:p,includeSpeaking:u,path:c},{dailyQuest:m,coreQuest:v,hardQuest:f}=i,E=m&&(0,h.n0)(m,g)?m.goalId:(0,h.Ch)({assignedQuestGoalIds:[],questEligibilityParams:g,schema:n,slotType:"DAILY"}),y=v&&(0,h.n0)(v,g)?v.goalId:(0,h.Ch)({assignedQuestGoalIds:E?[E]:[],questEligibilityParams:g,schema:n,slotType:"CORE"}),b=f&&(0,h.n0)(f,g)?f.goalId:(0,h.Ch)({assignedQuestGoalIds:[y,E].filter(_.$K),questEligibilityParams:g,schema:n,slotType:"HARD"});e({payload:{coreQuest:y,dailyQuest:E,hardQuest:b,lastUpdated:Date.now()},type:"SET_DAILY_QUESTS"}),[y,E,b].forEach((e=>{e&&(0,S.j)("daily_quest_assigned",{daily_quest_difficulty:s.difficulty,daily_quest_name:e})}))},w=(e,t,a)=>{if(!a||!t||!(0,p.zk)((0,p.Gz)(a.timestamp)))return{updatedTotalProgress:t,updatedVisibleProgress:e.reduce(((e,a)=>(e[a.goalId]=t?t[a.goalId]:0,e)),{})};const n=(0,s.asMutable)(t),r=e.reduce(((e,s)=>{var n;return e[s.goalId]=Math.max(null!==(n=a.updates[s.goalId])&&void 0!==n?n:0,t?t[s.goalId]:0),e}),{});if(n)for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e]);return{updatedTotalProgress:n,updatedVisibleProgress:r}},I=e=>(t,a)=>{const s=(0,l.ey)(a());if(!s||!(0,m.Vz)(Date.now(),s))return;const{metric:n,ownProgress:r,threshold:i,totalProgress:o}=s,c=Math.max(0,i-o);for(const a of e.metricUpdates)a.metric===n&&t({ownProgress:r+Math.min(a.quantity,c),totalProgress:o+Math.min(a.quantity,c),type:"SET_FRIENDS_QUEST_PROGRESS"})},T=({details:e,friendsQuestInfo:t,historicalStats:a,schemaByGoalId:s})=>n=>{const r=t.goalId;n({payload:{acknowledged:t.acknowledged,friendProgress:e.socialProgress[0],goalId:r,metric:s[r].metric,ownProgress:e.progressIncrements.reduce(((e,t)=>e+t),0),questId:t.questId,questPoints:t.questPoints,status:t.questState,threshold:t.questThreshold,totalProgress:e.progress,winStreak:(0,m.Fy)(a)},type:"SET_FRIENDS_QUEST_DETAILS"})},k=()=>async(e,t)=>{const a=t(),s=(0,o.np)(a),n=(0,l.xm)(a);try{const[t,a]=await Promise.all([u.JV.getQuestsData(s.id),u.JV.getQuestProgress({timezone:s.timezone,uiLanguage:s.fromLanguage,userId:s.id})]),r=(0,m.ed)(t);if(r){const t=a.goals.details[r.goalId];e(T({details:t,friendsQuestInfo:r,historicalStats:a.goals.historicalStats,schemaByGoalId:n})),e(O(Date.now()))}}catch(e){(0,f.Kp)("Failed to load new friends quest data",{ex:e})}},C=e=>(t,a)=>{const s=(0,l.ey)(a()),n=(0,o.dY)(a());if(!s)return;const{friendProgress:r,metric:i,threshold:c,totalProgress:d}=s;u.i_.postFriendsQuestNudge({eventType:i,nudgeType:e,recipientId:r.userId,remainingEvents:Math.max(0,c-d),userId:n}),t({nudgeType:e,timestamp:Date.now(),type:"SET_LAST_SENT_FRIENDS_QUEST_NUDGE"})},R=({purchasingId:e,receivingId:t})=>(a,s)=>{a((0,c.r0)(s())?{gems:-m.py,type:"UPDATE_USER_GEMS"}:{lingots:-m.PD,type:"UPDATE_USER_LINGOTS"}),a({timestamp:Date.now(),type:"SET_LAST_SENT_FRIENDS_QUEST_GIFT_TIMESTAMP"}),u.Vi.purchaseShopItemGift({itemName:m.xH,purchasingId:e,receivingId:t})},O=e=>(t,a)=>{e>=(0,l.D_)(a()).lastSeenNextFriendsQuestStart&&t({lastSeenTotalProgress:0,type:"SET_LAST_SEEN_FRIENDS_QUEST_TOTAL_PROGRESS"})},L=e=>t=>{u.i_.sendTriggeredKudos([m.wS],[e]),t({type:"SET_FRIENDS_QUEST_HIGH_FIVE_TIMESTAMP",value:Date.now()})}},9249:(e,t,a)=>{"use strict";a.d(t,{Hm:()=>l,ZK:()=>c,ke:()=>o,w4:()=>u,xD:()=>d});var s=a(14649),n=a(42659),r=a(77167),i=a(79465);const o=()=>async e=>{try{e({items:await r.Vi.getShopItems(),type:"SET_SHOP_ITEMS"})}catch(e){(0,i.DT)("load_shop_items_failed","Failed to load shop items",e)}},l=(e,t)=>async a=>{try{const{currentPlan:s,subscriptionPlans:n}=await r.Vi.getSubscriptionPlans(e,t);a({currentPlan:s,subscriptionPlans:n,type:"SET_AVAILABLE_SUBSCRIPTION_PLANS"})}catch(e){(0,i.DT)("load_subscription_plans_failed","Failed to load available subscription plans",e)}},c=async({dispatch:e,fromMilestone:t=!1,fromStories:a=!1,quantity:s=1,shopItems:n})=>{const r=n.shop.misc.streak_freeze;if(r)try{await e(d(r,"item_offer",!0,s)),a||e({fromMilestone:t,gift:"streakFreeze",quantity:s,type:"RECEIVE_GIFT"})}catch(e){(0,i.DT)("streak_freeze_gifting_failed","Failed to gift the user a streak freeze",e,{fromMilestone:t,fromStories:a})}},d=(e,t,a=!1,o=1)=>async(l,c)=>{const d=(0,n.iH)(c()),u=a?{isFree:!0}:{};l({status:"START",type:"PURCHASE_ITEM"});try{const[n]=(await Promise.all(new Array(o).fill(null).map((()=>r.Vi.purchaseUserShopItem(e.id,Object.assign({learningLanguage:d},u)))))).map((e=>e.item));(0,i.j)("purchase_item",Object.assign({currency_type:e.currencyType,item_name:e.id,num_purchased:o,purchased_via:t},a?{is_free:!0}:{})),l({item:n,purchaseQuantity:o,status:"SUCCESS",type:"PURCHASE_ITEM"}),l(s._())}catch(e){(0,i.DT)("purchase_failed","Failed to purchase item",e),l({status:"FAIL",type:"PURCHASE_ITEM"})}},u=e=>async t=>{try{t({item:await r.Vi.getUserShopItem(e),type:"REFRESH_USER_ITEM"})}catch(e){(0,i.DT)("load_user_shop_item_failed","Failed to get user item",e)}}},44483:(e,t,a)=>{"use strict";a.d(t,{AB:()=>u,YC:()=>g,a1:()=>m,hD:()=>p});var s=a(99369),n=a(42659),r=a(51399),i=a(83936),o=a(77167),l=a(87471),c=a(12125),d=a(81621);const u=({leaderboardPositionState:e,leaderboard:t,userId:a,xpGained:n})=>r=>{var i,o,c;if(!(null==t?void 0:t.state.active))return;const d=(0,l.Tm)(t.state.active.cohort.rankings,a);if(-1!==d){const u=t.state.active.cohort.rankings,p=(0,l.TL)({rankings:u,score:u[d].score+n,userId:a}),g=(0,l.Tm)(p,a);r({leaderboardPositionState:{cohortId:t.state.active.cohort.id,lastPositionSeen:null!==(i=null==e?void 0:e.lastPositionSeen)&&void 0!==i?i:d,lastScoreSeen:null!==(o=null==e?void 0:e.lastScoreSeen)&&void 0!==o?o:u[d].score,placesMoved:(null!==(c=null==e?void 0:e.lastPositionSeen)&&void 0!==c?c:d)-g},type:"SET_LEADERBOARD_POSITION_STATE"});const m=(0,s.setIn)(t,["state","active","cohort","rankings"],p);r(Object.assign(Object.assign({},"classroom"===m.alias?{classroomLeaderboard:m}:{leagues:m}),{type:"UPDATE_LEADERBOARDS"}))}},p=(e,t)=>async(a,s)=>{const r=(0,n.np)(s());if("classroom"===e)a({type:"CLEAR_CLASSROOM_LEADERBOARD_ENDED"});else{if(!(0,d.Ud)(r)||!(0,l.ud)(r))return;a({type:"CLEAR_LEAGUES_ENDED"})}await o.dQ.patch("classroom"===e?o.dQ.SCHOOLS_CLASSROOM_LEADERBOARD_ID:o.dQ.LEAGUES_ID,r.id),(null==t?void 0:t.aborted)||await a(g({resetPlacesMoved:!0,signal:t}))},g=({resetPlacesMoved:e=!1,signal:t}={})=>async(a,s)=>{var r;const d=(0,n.np)(s()),u=(0,n.cQ)(s()).leaderboardPositionState,p=0===(0,i._C)(s()),[g,m,_]=await Promise.all([(0,l.ud)(d)?o.dQ.get(o.dQ.LEAGUES_ID,d.id,p):Promise.resolve(void 0),d.classroomLeaderboardsEnabled?o.dQ.get(o.dQ.SCHOOLS_CLASSROOM_LEADERBOARD_ID,d.id):Promise.resolve(void 0),d.classroomLeaderboardsEnabled?o.bu.getUserClassroomLeaderboardInfo(d.id):Promise.resolve(void 0)]);if(null==t?void 0:t.aborted)return;const v=null===(r=null!=m?m:g)||void 0===r?void 0:r.active;if(v){const t=v.cohort.rankings.findIndex((e=>e.userId===v.userId)),s=v.cohort.id;-1!==t&&(a({reaction:v.cohort.rankings[t].reaction,type:"SET_USER_REACTION"}),void 0!==u&&t===u.lastPositionSeen&&e&&a({leaderboardPositionState:{cohortId:s,lastPositionSeen:t,lastScoreSeen:v.cohort.rankings[t].score,placesMoved:0},type:"SET_LEADERBOARD_POSITION_STATE"}),a(h()))}else if((0,l.ud)(d)){const e=await o.dQ.getReactionUncohorted(o.dQ.LEAGUES_ID,d.id);if(null==t?void 0:t.aborted)return;a({reaction:e,type:"SET_USER_REACTION"})}let f;if(m&&_){if(m.active){const e=m.active.cohort.rankings.reduce(((e,t)=>(e[t.userId]=t,e)),{});m.active.cohort.rankings=(0,c.Y)(_.eligible_students.map((t=>{var a,s,n,r,i,o;return{avatarUrl:t.avatar_url,displayName:t.display_name,hasRecentActivity:null!==(s=null===(a=e[t.user_id])||void 0===a?void 0:a.hasRecentActivity)&&void 0!==s&&s,reaction:null!==(r=null===(n=e[t.user_id])||void 0===n?void 0:n.reaction)&&void 0!==r?r:"NONE",score:null!==(o=null===(i=e[t.user_id])||void 0===i?void 0:i.score)&&void 0!==o?o:0,userId:t.user_id}})))}f={alias:"classroom",classroomId:_.classroom_id,classroomName:_.classroom_name,learningLanguageId:_.learning_language_id,socialDisabledUsers:_.eligible_students.flatMap((e=>e.social_enabled?[]:[e.user_id])),state:m}}a({classroomLeaderboard:f,leagues:g?{alias:"leagues",state:g}:void 0,type:"UPDATE_LEADERBOARDS"})},m=({cohortId:e,reaction:t,userId:a})=>s=>{s({reaction:t,type:"SET_USER_REACTION"}),void 0===e?o.dQ.setReactionUncohorted(o.dQ.LEAGUES_ID,a,t).catch((e=>{var t;(0,o.IZ)(e)&&400===(null===(t=e.response)||void 0===t?void 0:t.status)?s(g()):Promise.reject(e)})):o.dQ.setReactionCohorted(e,a,t)},h=()=>async(e,t)=>{var a,s;const i=(0,n.Mb)(t()),l=(0,r.po)(t()),c=(0,r.Ug)(t());if(Math.random()>=(null!==(a=i.featureFlags.web_fetch_leaderboard_streak)&&void 0!==a?a:0))return;if(!(null===(s=null==c?void 0:c.state.active)||void 0===s?void 0:s.cohort.rankings))return;const d=(null==l?void 0:l.cohortId)!==c.state.active.cohort.id,u=c.state.active.cohort.rankings.map((e=>e.userId)),p=await Promise.all(u.map((e=>d||void 0===(null==l?void 0:l.streakLengths[e])?(async e=>{try{return(await o.Vi.userInfoPartial(e,["streak"])).streak}catch(e){return}})(e):l.streakLengths[e])));e({streaks:{cohortId:c.state.active.cohort.id,streakLengths:u.reduce(((e,t,a)=>(e[t]=p[a],e)),{})},type:"SET_LEADERBOARD_STREAKS"})}},17708:(e,t,a)=>{"use strict";a.d(t,{i:()=>c,t:()=>d});var s=a(42659),n=a(50231),r=a(77167),i=a(20041),o=a(51158),l=a(79465);const c=e=>async(t,a)=>{const n=(0,s.df)(a());t({name:e,timestamp:Date.now(),type:"DISMISS_HOME_MESSAGE"}),n?"maintenanceBreak"!==e&&(0,o.Kp)("Attempted to dismiss home message while in Zombie mode",{data:{name:e}}):i.Qd[e]&&await r.d0.dismissNotification(i.Qd[e])},d=(e,t)=>(a,c)=>{var d,u;const p=(0,s.df)(c());if(a({name:e,timestamp:Date.now(),type:"HOME_MESSAGE_SHOWN",uiType:t}),(0,i.pC)(e)){const a=(0,n.oG)(c()),s=null!==(u=null===(d=c().uiPersisted.sidebarHomeMessage)||void 0===d?void 0:d.count)&&void 0!==u?u:0;if((0,l.j)("home_message_shown",{home_message_tracking_id:a&&"trackingId"in a?a.trackingId:void 0,message_name:e,ui_type:t}),p||"sidebar"===t&&1!==s)"maintenanceBreak"!==e&&p&&(0,o.Kp)("Attempted to ACK home message while in Zombie mode",{data:{name:e}});else{let t={};"dynamic"===e&&a&&"id"in a?t={id:a.id}:(0,i.WZ)(e)&&a&&"payload"in a&&(t=a.payload);try{r.zi.ackHomeMessage(e,t)}catch(e){(0,l.DT)("ack_message_failed","Failed to acknowledge home message",e)}}}}},83178:(e,t,a)=>{"use strict";a.d(t,{d:()=>i,z:()=>r});var s=a(6986),n=a(20028);const r=e=>(t,a)=>{const r=a().user,i=!("username"in r)&&"username"in e&&(!("id"in e)||r.id===e.id);(0,s.yI)(a().config,(0,n.jq)(e),i)&&t({name:"marketingOptIn",type:"CREATE_HOME_MESSAGE"})},i=e=>t=>{t({name:"streakRepairApplied",type:"CAN_SHOW_HOME_MESSAGE"}),t({length:e,type:"CREATE_STREAK_REPAIRED_HOME_MESSAGE"})}},9990:(e,t,a)=>{"use strict";a.d(t,{AO:()=>l,LQ:()=>i,MS:()=>o,S8:()=>u,_P:()=>d,lc:()=>c});var s=a(59249),n=a(11908),r=a(37111);const i=e=>t=>{if((0,n.No)(n.Qt.REDUX_AgeRestrictedLeaderboardsIntro)){const a=(0,n.rV)(n.Qt.REDUX_AgeRestrictedLeaderboardsIntro)[e];void 0!==a&&t({isEligible:a,type:"SET_CAN_SHOW_AGE_RESTRICTED_LEADERBOARDS_INTRO"})}},o=e=>t=>{if((0,n.No)(n.Qt.REDUX_DailyQuests)){const a=(0,n.rV)(n.Qt.REDUX_DailyQuests)[e];void 0!==a&&t({payload:a,type:"SET_DAILY_QUESTS"})}},l=e=>t=>{if((0,n.No)(n.Qt.REDUX_DarkMode)){const a=(0,n.rV)(n.Qt.REDUX_DarkMode)[e];void 0!==a&&(t({type:"DARK_MODE",value:"boolean"==typeof a?a?"on":"off":a}),t({name:"darkMode",type:"DISABLE_HOME_MESSAGE"}))}},c=e=>t=>{if((0,n.No)(n.Qt.REDUX_FriendsQuestNextStart)){const a=(0,n.rV)(n.Qt.REDUX_FriendsQuestNextStart)[e];void 0!==a&&t({lastSeenNextFriendsQuestStart:a,type:"SET_LAST_SEEN_NEXT_FRIENDS_QUEST_START"})}},d=e=>t=>{if((0,n.No)(n.Qt.REDUX_LastSeenMonthlyChallengeId)){const a=(0,n.rV)(n.Qt.REDUX_LastSeenMonthlyChallengeId)[e];void 0!==a&&t({monthlyChallengeId:a,type:"SET_LAST_SEEN_MONTHLY_CHALLENGE_ID"})}},u=(e,t)=>a=>{var i;(0,s.gQ)("debugForceStreakSocietyEntry")?a({inductedIntoStreakSociety:!0,type:"SET_STREAK_SOCIETY_INDUCTION_STATE"}):(null!=t?t:0)<r.jL[0]?a({inductedIntoStreakSociety:!1,type:"SET_STREAK_SOCIETY_INDUCTION_STATE"}):(0,n.No)(n.Qt.REDUX_StreakSocietyInduction)&&a({inductedIntoStreakSociety:null!==(i=(0,n.rV)(n.Qt.REDUX_StreakSocietyInduction)[e])&&void 0!==i&&i,type:"SET_STREAK_SOCIETY_INDUCTION_STATE"})}},46644:(e,t,a)=>{"use strict";a.d(t,{P:()=>p,_:()=>g});var s=a(42659),n=a(51399),r=a(77167),i=a(17135),o=a(88868),l=a(79465),c=a(81621),d=a(16086),u=a(20028);const p=(e,t,a=!1)=>async(p,g)=>{const m=(0,s.NT)(g()),h=(0,s.np)(g()),_=(0,n.Ug)(g());if(!e&&!t)return;if(!a&&m&&(m.id===e||m.username===t))return m;p({type:"RESET_PROFILE"});const v=(()=>{var t;if("leagues"===(null==_?void 0:_.alias)){const a=null===(t=null==_?void 0:_.state.active)||void 0===t?void 0:t.cohort.rankings.find((t=>void 0!==e&&t.userId===e));if(void 0!==a)return{id:a.userId,isPrivate:!0,name:a.displayName,picture:a.avatarUrl,username:void 0}}})(),f=t?(await r.Vi.userSearch(t))[0]:e?await r.Vi.userProfileInfo(e).catch((e=>{var t;if((0,r.IZ)(e)&&404===(null===(t=e.response)||void 0===t?void 0:t.status)&&v)return v})):void 0;if(f&&"isPrivate"in f)return p({type:"LOAD_PRIVATE_PROFILE_USER",user:f}),f;f&&(f.streakData={currentStreak:{endDate:(0,i.zK)(0),length:f.streak,startDate:(0,i.zK)(0)},previousStreak:null});try{if(!f||void 0===f.username||!(0,c.rt)(f)&&(0,d.Jb)()!==f.id&&!(0,u.E4)(h)||(0,d.Pc)()&&h.blockerUserIds.includes(f.id))return v?(p({type:"LOAD_PRIVATE_PROFILE_USER",user:v}),v):((0,l.j)("page_not_found",{}),void await(0,o.Zs)(o.Oy,!0))}catch(e){return void await(0,o.Zs)(o.Oy,!0)}p({type:"LOAD_PROFILE_USER",user:f});const S=f.id,E=()=>{var e;return(null===(e=(0,s.NT)(g()))||void 0===e?void 0:e.id)===S};return(0,d.Pc)()?(async()=>{var e;const t=null!==(e=f.currentCourse)&&void 0!==e?e:f.courses.find((e=>e.id===f.currentCourseId));if(!t)return void p({achievements:{v2:[],v3:[]},type:"LOAD_ACHIEVEMENTS"});const a=await r.I7.getAchievementsV3(f.id,t.fromLanguage,t.learningLanguage,(0,u.jq)(h),(0,c.rt)(h),(0,u.dE)(h),f.hasPlus);E()&&p({achievements:{v2:[],v3:a},type:"LOAD_ACHIEVEMENTS"})})():p({achievements:{v2:[],v3:[]},type:"LOAD_ACHIEVEMENTS"}),(async()=>{const e=await r.Vi.getUserXPSummaries(S);if(!E())return;const t=e.map((({date:e,gainedXp:t})=>({time:e,xp:t})));p({summaries:t,type:"LOAD_PROFILE_XP"})})(),f},g=(e,t)=>async a=>{const s=await r.i_.getSocialProfile(e,5);a(t?{socialProfile:s,type:"LOAD_FIRST_PERSON_SOCIAL_PROFILE"}:{socialProfile:s,type:"LOAD_SOCIAL_PROFILE"})}},7924:(e,t,a)=>{"use strict";a.d(t,{VE:()=>l,nn:()=>o,uM:()=>c});var s=a(9249),n=a(42659),r=a(77167),i=a(79465);const o=(e,t,a,n)=>async o=>{var l;try{const c=await r.bu.joinClassroom(e);(0,i.j)("add_observer",{from_settings:t,with_classroom:!0}),o({classroom:c,type:"JOIN_CLASSROOM"}),o(s.ke()),o(s.Hm(a,n)),t||o({name:"schoolsJoinedClassroom",observerName:null!==(l=c.observer_name)&&void 0!==l?l:c.observer_username,type:"CREATE_HOME_MESSAGE"})}catch(e){(0,i.DT)("join_classroom_failed","Failed to add teacher",e)}},l=e=>async t=>{try{await r.bu.leaveClassroom(e),(0,i.j)("remove_observer",{}),t({classroomId:e,type:"LEAVE_CLASSROOM"})}catch(e){(0,i.DT)("leave_classroom_failed","Failed to leave classroom",e)}},c=(e,t)=>async(a,s)=>{const o=(0,n.np)(s());try{a({sessionActivities:await r.bu.getSessionActivitiesByUser(o.id,e,t),type:"UPDATE_SESSION_ACTIVITIES"})}catch(e){(0,i.DT)("update_session_activities_failed","Failed to update Schools session activities",e)}}},15879:(e,t,a)=>{"use strict";a.d(t,{SC:()=>v,SL:()=>_,Vw:()=>f});var s=a(94144),n=a(42659),r=a(77167),i=a(50498),o=a(94786),l=a(68903),c=a(60752),d=a(41364),u=a(44637),p=a(51158),g=a(89260),m=a(79465),h=a(16086);let _;const v=e=>async()=>{try{const t=await(0,c.b)(),a=await t.getAllKeys("submittableRequests"),s=[];for(const n of a){const a=await t.get("submittableRequests",n);if(void 0!==a)switch(a.type){case"experiment-treatment":s.push(S(n,a.request,e).catch((e=>{(0,p.vU)("Failed to sync stored experiment treatment",{data:a.request,ex:e})})));break;case"goals-progress":case"remove-heart":case"reward":case"session":case"story":break;default:(0,l.RJ)(a)}}await Promise.all(s)}catch(e){(0,p.vU)("Failed to sync stored requests",{ex:e})}},f=e=>(0,d.p)("SYNC_STORED_PROGRESS")((async(t,a)=>{_=(async()=>{try{const t=await(0,c.b)(),a=await t.getAllKeys("submittableRequests");for(const s of a){const a=await t.get("submittableRequests",s);if(void 0!==a)switch(a.type){case"experiment-treatment":break;case"goals-progress":await E(s,a.request,e);break;case"remove-heart":await y(s,e);break;case"reward":await b(s,a.rewardRequest,e);break;case"session":await w(s,a.session,a.sessionEndTrackingProperties,e);break;case"story":await I(s,a.session,a.sessionEndTrackingProperties,a.storyCompleteTrackingProperties,a.storyId);break;default:(0,l.RJ)(a)}}}catch(e){(0,p.vU)("Failed to sync stored progress",{ex:e})}(0,n.eI)(a())||(0,n.df)(a())||await t((0,s.eY)())})(),await _,_=void 0})),S=async(e,t,a)=>{const s=await(0,c.b)();let n=!1;try{await(0,i.XD)((()=>r.Vi.treatUser((0,h.Jb)(),t.experimentName,{contexts:t.contexts,treated:!0})),{retries:1,signal:a}),n=!0}catch(e){(0,m.DT)("treat_user_failed","Failed to treat user for experiment",e)}!n&&a.aborted||await s.delete("submittableRequests",e)},E=async(e,t,a)=>{const s=await(0,c.b)();let n=!1;try{await(0,i.XD)((()=>r.JV.sendBatchUpdate((0,h.Jb)(),t.batchUpdate,t.timestamp,t.timezone)),{retries:1,signal:a}),n=!0}catch(e){(0,m.DT)("update_goals_progress_failed","Failed to update goals progress",e)}!n&&a.aborted||await s.delete("submittableRequests",e)},y=async(e,t)=>{const a=await(0,c.b)();let s=!1;try{await(0,i.XD)((()=>r.Vi.removeHeart()),{retries:1,signal:t}),s=!0}catch(e){(0,m.DT)("remove_user_heart_failed","Failed to remove users' hearts",e)}!s&&t.aborted||await a.delete("submittableRequests",e)},b=async(e,t,a)=>{const s=await(0,c.b)();let n=!1;try{await(0,i.XD)((()=>r.Vi.consumeReward(t.userPartial,t.rewardId,t.pathLevelMetadata)),{retries:1,signal:a}),n=!0}catch(e){"path-chest"===t.source&&(0,m.DT)("consume_path_chest_reward_failed","Failed to consume path chest reward",e)}!n&&a.aborted||await s.delete("submittableRequests",e)},w=async(e,t,a,s)=>{const n=await(0,c.b)();let i=!1;try{(0,m.j)("session_end_attempt",{});const e=await r.Vi.sessionSubmit(t,{onError:e=>{(0,m.DT)("submit_session_failed","Failed to submit stored session",e)},signal:s});i=!0,(0,m.j)("session_end",Object.assign(Object.assign(Object.assign({},a),e.trackingProperties),{upload_timestamp:Date.now()}))}catch(e){(0,u.gZ)(e,(0,g.Xd)(t.type))}!i&&s.aborted||await n.delete("submittableRequests",e)},I=async(e,t,a,s,n)=>{const i=await(0,c.b)();try{const e=await r.Mw.postStoryComplete(n,t);(0,m.j)("session_end",Object.assign(Object.assign({},a),{upload_timestamp:Date.now()})),(0,m.j)("stories_story_complete",Object.assign(Object.assign({},s),e.trackingProperties))}catch(e){(0,m.DT)("stories_story_complete","Story complete request failed",e),(0,u.gZ)(e,o.Q.Stories)}await i.delete("submittableRequests",e)}},94144:(e,t,a)=>{"use strict";a.d(t,{DG:()=>V,DZ:()=>z,J0:()=>K,Kb:()=>Q,M$:()=>ee,TS:()=>Y,eY:()=>B,fN:()=>W,kS:()=>q,oQ:()=>J,rf:()=>Z,zv:()=>$});var s=a(80254),n=a(14649),r=a(50791),i=a(61544),o=a(33),l=a(9249),c=a(44483),d=a(83178),u=a(9990),p=a(46644),g=a(7924),m=a(15879),h=a(42659),_=a(73520),v=a(83936),f=a(80164),S=a(17818),E=a(51827),y=a(77167),b=a(70326),w=a(78939),I=a(54412),T=a(17135),k=a(59249),C=a(81149),R=a(15670),O=a(50548),L=a(60752),P=a(93746),A=a(36914),N=a(71371),D=a(67280),x=a(88787),M=a(51158),F=a(88868),U=a(11908),H=a(79465),j=a(16086),G=a(20028);const B=({forNewTrialUser:e,onUserRetrieved:t,urlForStringsReload:a}={})=>async(m,_)=>{var v;try{const f=await y.Vi.userInfo((0,j.Jb)(),!0!==e),S=Date.now();null==t||t(f),(0,H.XZ)(f.id),(0,E.N1)(f),m((0,d.z)(f));const b=(0,I.ej)(I.Vj.RedirectToPreview);(0,G.Sk)(f)?void 0===b&&(0,I.d8)(I.Vj.RedirectToPreview,"true"):"ENROLLED"===f.betaStatus?"true"!==b&&(0,I.d8)(I.Vj.RedirectToPreview,"true"):"true"!==b||(0,G.u)(f)||(0,I.nJ)(I.Vj.RedirectToPreview),f.learningLanguage||(0,F.v$)(window.location.pathname)||(f.courses.length>0&&m({type:"UPDATE_USER",user:f}),await(0,F.Zs)((0,A.lk)()?`/welcome?${A.lE}=coursePicker`:"/welcome",!0)),P.h9===f.fromLanguage||e||await(0,F.Zs)(a),(0,G.Go)(f)&&(0,k.R)(),m((0,u.AO)(f.id)),m((0,u.S8)(f.id,null===(v=f.streakData.currentStreak)||void 0===v?void 0:v.length)),m((0,u.LQ)(f.id)),m((0,u.lc)(f.id)),m((0,u.MS)(f.id)),m({type:"UPDATE_USER",user:f}),C.LK(),m({currentTimestampMs:S,heartsConfig:f.health,type:"UPDATE_HEARTS_STATE"}),document.hidden||"/reset_password"===window.location.pathname||((0,H.j)("user_active",{product:"learning_app"}),(0,H.Bf)({activity_trigger:"user_model_update"})),m(V());const R=_().notifications;let O=s.ZP.isEmpty(R);if(!O){const e=f.webNotificationIds||[],t=s.ZP.pluck(s.ZP.values(R),"id");O=!!s.ZP.difference(e,t).length}O||(0,H.j)("notification_bell_load",{has_unread_notifications:!1}),O&&(async()=>{try{const e=(await y.d0.getNotifications()).map((e=>Object.assign(Object.assign({},e),{id:`ev_${e.id}`,pretty_datetime:e.pretty_datetime.trim()})));(0,H.j)("notification_bell_load",{has_unread_notifications:s.ZP.where(e,{unseen:!0}).length>0}),m({notifications:s.ZP.indexBy(e,"id"),type:"SET_NOTIFICATIONS"})}catch(e){(0,H.DT)("load_user_notifications_failed","Failed to load web notifications",e)}})(),m(K());const L=(0,h.Mb)(_()).ipCountry,N=(0,D.Ay)((0,h.np)(_()).plusDiscounts,Date.now());if(m(l.ke()),m(l.Hm(L,N)),f.trackingProperties.has_observer){(async()=>{try{const e=await y.bu.getUserClassrooms();m({classrooms:e,type:"UPDATE_CLASSROOMS"})}catch(e){(0,H.DT)("load_user_classrooms_failed","Failed to load classrooms",e)}})();const e=Date.now(),t=e-1e3*(0,T.dz)({days:30});m(g.uM(t,e)),y.bu.autoFollowClassmates(f.id)}if("true"!==(0,I.ej)(I.Vj.Impersonate)){const e=(0,T.NP)();f.timezone!==e&&(console.log(`Changing time zone from ${f.timezone} to ${e}`),m(z({timezone:e})))}["fromLanguage","learningLanguage"].forEach((e=>{const t=f[e],a=`${U.Qt.LanguageTokens}.${t}`;(0,U.No)(a)||(async()=>{try{(0,U.LS)(a,await y._s.getLanguageTokens(t))}catch(e){(0,H.DT)("load_user_language_tokens_failed","Failed to load language tokens",e)}})()}));const x=async()=>{try{const e=await y.bG.requestGradingConfig();(0,w.tc)(e)}catch(e){(0,H.DT)("load_user_grading_config_failed","Failed to download client-side grading config.",e)}};(0,w.gE)()&&(e?x():await x()),m(r.i()),m(c.YC()),m(i.GG()),m(o.b5()),m(i.tD(f.id,window.duo.uiLanguage)),m(p._(f.id,!0)),m(n._())}catch(e){(0,H.DT)("load_user_failed","Failed to load user",e)}(0,H.hK)()},V=()=>async e=>{try{const t=await y.Vi.getUserXPSummaries((0,j.Jb)(),(0,T.zM)((0,T.RF)({days:365})));e({type:"SET_XP_SUMMARIES",xpSummaries:Object.fromEntries(t.map((e=>[(0,T.zK)(e.date),e])))})}catch(e){(0,H.DT)("load_xp_summaries_failed","Failed to load xp summaries",e)}},z=(e,t=!0,a=!1)=>async(n,r)=>{var i,c;const u=Object.assign({trackingProperties:!0},e);delete u.currentPassword,"facebookToken"in e&&(u.email=!0,u.facebookId=!0,u.hasFacebookId=!0,u.name=!0,delete u.facebookToken),"googleToken"in e&&(u.email=!0,u.googleId=!0,u.hasGoogleId=!0,u.name=!0,delete u.googleToken),"googleIdToken"in e&&(u.email=!0,u.googleId=!0,u.hasGoogleId=!0,u.name=!0,delete u.googleIdToken),e.learningLanguage&&(u.courses=!0,u.currentCourse=!0),"password"in e&&(u.name=!0,u.username=!0,delete u.password),"timezone"in e&&(u.timezoneOffset=!0),"age"in e&&(u.adsConfig=!0,u.privacySettings=!0,delete u.age);const p=a?await R.e("SIGNUP"):null,g=s.ZP.keys(u).sort();if(e.picture instanceof File){try{await y.d0.uploadAvatar(e.picture),(0,H.j)("profile_picture_activity_result",{is_success:!0})}catch(e){(0,H.j)("profile_picture_activity_result",{is_success:!1})}delete e.picture}if(void 0!==e.password)try{const t=await y.Vi.checkPasswordQuality({context:a?y.Vi.PasswordContext.SIGN_UP:y.Vi.PasswordContext.CHANGE_PASSWORD,password:e.password,uiLanguage:window.duo.uiLanguage});if(!t.allowed)throw new b.Wj(!1,{password:t.reason})}catch(e){if(e instanceof b.Wj)throw e;console.error(e)}try{const t=await y.Vi.userUpdate((0,j.Jb)(),Object.assign(Object.assign({},e),{picture:e.picture}),g,p);if(n((0,d.z)(t)),"age"in e){const e=(0,h.Mb)(r()).ipCountry,t=(0,D.Ay)((0,f.I9)(r()),Date.now());n(l.ke()),n(l.Hm(e,t))}if(n({type:"UPDATE_USER",user:Object.assign(Object.assign({},s.ZP.object(g.map((e=>[e,null])))),t)}),e.privacySettings&&(0,H.j)("privacy_settings_update",{public_profile:!e.privacySettings.includes("DISABLE_SOCIAL")}),(0,h.np)(r()).learningLanguage){const{dailyQuest:t,coreQuest:a,hardQuest:s}=(0,_.oV)(r()),i=[null==t?void 0:t.metric,null==a?void 0:a.metric,null==s?void 0:s.metric];(!1===e.enableMicrophone&&i.includes("SPEAK_CHALLENGES")||!1===e.enableSpeaker&&i.includes("LISTEN_CHALLENGES"))&&n(o.Up())}}catch(e){const a=t&&(0,y.IZ)(e)?null===(c=null===(i=e.response)||void 0===i?void 0:i.data)||void 0===c?void 0:c.details:void 0;throw t?a?(0,b.lV)(a):{}:e}},Z=e=>async(t,a)=>{const s=(0,h.np)(a()).blockedUserIds||[];s.includes(e)||(await y.i_.block(e),t({type:"UPDATE_USER",user:{blockedUserIds:[e,...s]}}),t(p._((0,j.Jb)(),!0)))},$=e=>async(t,a)=>{const s=(0,h.np)(a()).blockedUserIds||[];s.includes(e)&&(await y.i_.unblock(e),t({type:"UPDATE_USER",user:{blockedUserIds:s.filter((t=>t!==e))}}))},q=(e="/")=>async t=>{await t(W()),await(0,F.Zs)(e)},W=()=>async(e,t)=>{await(async(e,t)=>{const a=(0,h.df)(t());await(0,H.j)("sign_out",{},!1),e({type:"LOGOUT"}),(0,G.Sk)((0,h.np)(t()))||(0,U.cl)(U.Qt.LoggedOutExperiments);try{const e=await(0,L.b)();await e.clear("prefetchedSessions"),await e.clear("submittableRequests")}catch(e){(0,M.Kp)(e)}try{await(0,x.r1)(a)}catch(e){(0,M.Kp)("Failed to unsubscribe from push notifications",{ex:e})}})(e,t),(0,h.df)(t())||await y.d0.logout(),(0,y.ub)()},Q=(e,t)=>async a=>{try{if(await a(((e,t)=>async a=>{await(0,b.pK)(e,t),await a(B({forNewTrialUser:!0})),a((async e=>{try{e({type:"UPDATE_USER",user:{currentCourse:(await y.Vi.userInfoPartial((0,j.Jb)(),["currentCourse"])).currentCourse}})}catch(e){(0,M.Kp)(e)}})),(0,H.j)("welcome",{})})(e,t)),t&&t!==P.h9){(0,I.d8)(I.Vj.ShouldTrackWelcome,"true");const e=A.BA.findIndex((e=>"coursePicker"===e))+1;await(0,F.Zs)(`/welcome?${A.lE}=${A.BA[e]}`)}else O.m8.push("/welcome")}catch(e){}},Y=({courseId:e,fromLanguage:t,learningLanguage:a,redirectToHome:s,resetScrollPosition:n})=>async(r,i)=>{const l=window.location.pathname===F.B6&&(0,v.N9)(i())({fromLanguageId:t,learningLanguageId:a});l&&N.Z.start("language_switch");const c={from_language:t,learning_language:a};e&&(c.course_id=e),(0,H.j)("switch_language",c),r({type:"SWITCH_COURSE"}),r({name:"skillTreeMigration",type:"CAN_SHOW_HOME_MESSAGE"}),s&&window.location.pathname!==F.B6&&O.m8.push(F.B6),n&&S.O.scrollTo(0,0),await m.SL;try{r({type:"UPDATE_USER",user:await y.Vi.userUpdate((0,j.Jb)(),{fromLanguage:t,learningLanguage:a},["courses","currentCourse","fromLanguage","learningLanguage"])}),r(o.Up()),l&&N.Z.finish("language_switch"),t!==P.h9&&await(0,F.Zs)()}catch(e){(0,H.DT)("switch_course_failed","Failed to switch course",e)}finally{r({type:"SWITCH_COURSE_END"})}},J=(e,t,a,s)=>n=>{const r=(0,T.HR)(300);n(void 0===t?{mistakeCountInfo:void 0,type:"SET_MISTAKE_COUNT"}:{mistakeCountInfo:{courseId:e,expirationTime:r,includeListening:a,includeSpeaking:s,mistakeCount:t},type:"SET_MISTAKE_COUNT"}),n(X(e,r,a,s))},K=()=>async e=>{try{const t=await y.Vi.getUserInventory();e({inventory:s.ZP.indexBy(t,"itemName"),type:"UPDATE_INVENTORY"})}catch(e){(0,H.DT)("load_user_inventory_failed","Failed to load user inventory",e)}},X=(e,t,a,s)=>async n=>{const r=await y.wO.getMistakeCount(e,a,s);n({mistakeCountInfo:{courseId:e,expirationTime:t+1,includeListening:a,includeSpeaking:s,mistakeCount:r},type:"SET_MISTAKE_COUNT"})},ee=e=>async t=>{const a=await y.Vi.updatePrivacySettings(e);t({type:"UPDATE_USER",user:{privacySettings:a}}),(0,H.j)("privacy_settings_update",{public_profile:!a.includes("DISABLE_SOCIAL")})}},37993:(e,t,a)=>{"use strict";a.d(t,{I:()=>h,R:()=>p});var s=a(99369),n=a(80254),r=a(68903),i=a(8718),o=a(77042),l=a(18513),c=a(20662),d=a(43094),u=a(79465);const p=["monthlyChallengeComplete","streakSociety"],g={audio:{instructionId:0,playState:"PAUSE",seekTo:0,speed:1},baseXp:14,fromLanguage:void 0,learningLanguage:void 0,listenModeCharacterIds:[],masterVersion:!1,mode:"READ",speakingDisabledLineIndex:-1,storyAudioLoadState:"UNDEFINED",trackingProperties:{}},m=e=>setTimeout(e),h=(e=(0,s.from)(g),t)=>{var a,h,_,v,f,S,E,y,b,w,I,T,k,C,R,O,L,P,A,N,D,x,M,F,U,H,j,G,B,V,z,Z,$,q,W,Q,Y,J,K,X,ee,te,ae,se;switch(t.type){case"stories/UNLOAD_STORY":return e.audio&&"PLAY"===e.audio.playState&&(e=(0,s.merge)(e,{audio:(0,o.EU)({playState:"PAUSE"})(e.audio)})),e.storyElements&&(0,o.FG)(e.storyElements),(0,s.merge)(e,{audioPrefetchState:void 0,pendingAudio:void 0,storyAudioLoadState:"UNDEFINED",storyElements:void 0,storyId:void 0,storyRevision:void 0,storySession:void 0,trackingProperties:void 0});case"stories/SELECT_STORY":return(0,s.merge)(e,{masterVersion:t.masterVersion,storyId:t.storyId,storySession:void 0});case"stories/SET_STORY":return(0,s.merge)(e,{audioPrefetchState:t.audioPrefetchState,baseXp:t.baseXp,cefrLevel:t.cefrLevel,conversationModeListenCharacterIds:t.conversationModeListenCharacterIds,conversationModeSpeakCharacterIds:t.conversationModeSpeakCharacterIds,conversationModeSpeakLineIds:t.conversationModeSpeakLineIds,fallbackElements:t.fallbackElements,fromLanguage:t.storyFromLanguage,illustrations:t.illustrations,learningLanguage:t.storyLanguage,levelData:t.levelData,listenModeCharacterIds:t.listenModeCharacterIds,loadTime:t.startTime,mode:t.mode,multiPartInfo:t.multiPartInfo,showPromptsInTargetLanguage:t.showPromptsInTargetLanguage,speakingDisabledLineIndex:t.speakingDisabledLineIndex,storyAudioLoadState:"LOADING",storyElements:t.storyElements,storyFromLanguageName:t.fromLanguageName,storyId:t.storyId,storyRevision:t.storyRevision,storySession:void 0,trackingConstants:t.trackingConstants,trackingProperties:t.trackingProperties});case"stories/AUDIO_FOR_ELEMENT_PREFETCHED":return e.audioPrefetchState?(0,s.merge)(e,{audioPrefetchState:(0,s.merge)(e.audioPrefetchState,{[t.elementIndex]:!0})}):e;case"stories/UPDATE_STORY_AUDIO_FILE_LOAD_STATE":return(e=(0,s.merge)(e,{storyAudioLoadState:t.state})).pendingAudio&&(e=(0,s.merge)(e,{audio:e.pendingAudio,pendingAudio:void 0})),e;case"stories/START_STORY":{const n={elementIndex:(0,i.HD)(e),textIndex:0},r={completed:!1,furthestPosition:n,grammarCorrectionRequestStatus:"not-done",hintPosition:void 0,hintsUsed:[],maxScore:0,onboardingStep:void 0,score:0,selectedPosition:n,speakCount:0,startTime:null!==(a=e.loadTime)&&void 0!==a?a:Date.now(),status:"in-progress",storyCompleteRequestStatus:"ok",timeline:[{time:t.time/1e3,type:"line-start"}],viewedIntroCard:null===(h=e.storySession)||void 0===h?void 0:h.viewedIntroCard},l=null===(_=(e=(0,s.merge)(e,{storySession:r})).storyElements)||void 0===_?void 0:_[n.elementIndex],c=l&&(0,i.z_)(l);if(void 0===c)throw Error("Unexpected type for first element");const d=null!==(v=c.audioPrefix)&&void 0!==v?v:c.audio,u=(0,o.EU)({audioSyncModel:d,playState:"PLAY"})(e.audio),p="LOAD_SUCCESS"===e.storyAudioLoadState;return e=(0,s.merge)(e,{audio:p?u:e.audio,pendingAudio:p?void 0:u})}case"stories/AUTO_ADVANCE_STORY_POSITION":{const a=e.storySession,n=e.storyElements,r=null==n?void 0:n[t.position.elementIndex];if("HINT_ONBOARDING"===(null==r?void 0:r.type)&&0===(null==a?void 0:a.hintsUsed.length)&&(e=(0,s.merge)(e,{storySession:(0,s.merge)(a,{onboardingStep:"newUser"===r.onboardingType?"tap-translation-hint":void 0})})),(!(null==a?void 0:a.selectedPosition)||t.position.elementIndex>a.selectedPosition.elementIndex)&&r&&(0,i.P3)(r)){if(void 0===e.fromLanguage||void 0===e.learningLanguage)throw Error("From- or learning language cannot be undefined during story.");const a=(0,l.FE)(r,t.position.elementIndex,null!==(S=null===(f=e.storySession)||void 0===f?void 0:f.hintsUsed)&&void 0!==S?S:[],t.showLengthReducedMatchChallenge,e.fromLanguage,e.learningLanguage);e=(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:a})}),a&&(m((()=>(0,l.M6)(e,a))),e=(0,l.v5)(e))}return(0,d.DG)(e,t.position)}case"stories/AUDIO_STOPPED":return(0,s.merge)(e,{audio:Object.assign(Object.assign({},e.audio),{playState:"PAUSE"})});case"stories/SHOW_TRANSCRIPT_HINT":{const a=null===(E=e.storyElements)||void 0===E?void 0:E[t.position.elementIndex];return m((()=>(0,u.j)("LINE"===(null==a?void 0:a.type)?"stories_story_translation_hint":"stories_challenge_translation_hint",Object.assign(Object.assign(Object.assign({},e.trackingProperties),null==a?void 0:a.trackingProperties),{phrase:t.hint})))),(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{hintPosition:t.position,hintShownTime:t.time,hintText:t.hint,hintsUsed:[...null!==(b=null===(y=e.storySession)||void 0===y?void 0:y.hintsUsed)&&void 0!==b?b:[],{phrase:t.text,translation:t.hint}]})})}case"stories/DISMISS_HINT":{const a=e.storySession,n=200;return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{hintPosition:void 0,hintText:void 0,hintsUsed:(null==a?void 0:a.hintShownTime)&&t.time-a.hintShownTime<n?a.hintsUsed.slice(a.hintsUsed.length-1):null==a?void 0:a.hintsUsed})})}case"stories/REPLAY_LINE_AUDIO":{const a=e.storySession,n=e.storyElements,r=n&&n[(0,d.lo)(n,t.elementIndex,!0)];if(!r||!["LINE","HEADER","FREEFORM_WRITING_EXAMPLE_RESPONSE","FREEFORM_WRITING"].includes(r.type))throw Error("Tried to replay an element of type other than line, header, or example response");if(!(null==a?void 0:a.furthestPosition)||!n)throw Error("No story session found when replaying audio");let l=1;t.elementIndex===(null==a?void 0:a.previousReplayElementIndex)&&(l=.6);const c=(()=>{var s,o;switch(r.type){case"LINE":return r.line.content.audioPrefix&&n&&(0,d.O$)(n,(null==a?void 0:a.furthestPosition.elementIndex)||0)===t.elementIndex+1&&!(null===(o=null===(s=e.storySession)||void 0===s?void 0:s.challengeSession)||void 0===o?void 0:o.completed)?r.line.content.audioPrefix:r.line.content.audio;case"HEADER":return r.learningLanguageTitleContent.audio;case"FREEFORM_WRITING_EXAMPLE_RESPONSE":return(0,i.Au)(r);case"FREEFORM_WRITING":if(!a.freeformChallengeSubmittedResponseTtsUrl||!a.freeformChallengeSubmittedResponseWithHints)throw Error("No TTS or hints for user's response!");return(0,i.Au)({content:a.freeformChallengeSubmittedResponseWithHints,ttsURL:a.freeformChallengeSubmittedResponseTtsUrl})}throw Error(`No audio for "${r.type}" element`)})();return m((()=>(0,u.j)("stories_audio_replay",Object.assign(Object.assign(Object.assign({},e.trackingProperties),r.trackingProperties),{first_replay:t.elementIndex!==a.previousReplayElementIndex,furthest_line:(0,d.D5)(a.furthestPosition.elementIndex,n)})))),(0,s.merge)(e,{audio:(0,o.EU)({audioSyncModel:c,playState:"PLAY",speed:l})(e.audio),storySession:(0,s.merge)(a,{previousReplayElementIndex:t.elementIndex,selectedPosition:{elementIndex:t.elementIndex,textIndex:void 0}})})}case"stories/ADVANCE_STORY_POSITION":{e=(0,s.merge)(e,{audio:(0,s.merge)(e.audio,{playError:!1})}),e=(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{hintPosition:void 0})});const a=(e=(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{timeline:[...null!==(I=null===(w=e.storySession)||void 0===w?void 0:w.timeline)&&void 0!==I?I:[],{time:t.time/1e3,type:"line-start"}]})})).storyElements;if(!a)throw Error("No story element list found");const n=null===(T=e.storySession)||void 0===T?void 0:T.furthestPosition.elementIndex,r=t.position.elementIndex,u=a[r],p=a[(0,d.lo)(a,r,void 0!==(null===(k=e.storySession)||void 0===k?void 0:k.freeformChallengeSubmittedResponseTtsUrl))];(!n||r>n)&&(e=(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:void 0})}));const g="LINE"===u.type&&e.storyElements&&"CONVERSATION"===e.mode&&-1===e.speakingDisabledLineIndex&&"SPEAK"===(0,c.gu)({conversationModeSpeakCharacterIds:null!==(C=e.conversationModeSpeakCharacterIds)&&void 0!==C?C:[],conversationModeSpeakLineIds:null!==(R=e.conversationModeSpeakLineIds)&&void 0!==R?R:[],line:u.line,lineIndex:(0,i.IG)(u),listenModeCharacterIds:[],mode:e.mode,nextElement:a[r+1]});if(u&&(0,i.P3)(u)||g){if(void 0===e.fromLanguage||void 0===e.learningLanguage)throw Error("From- or learning language cannot be undefined during story.");const a=(0,l.FE)(u,r,null!==(L=null===(O=e.storySession)||void 0===O?void 0:O.hintsUsed)&&void 0!==L?L:[],t.showLengthReducedMatchChallenge,e.fromLanguage,e.learningLanguage);e=(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:a})}),a&&(m((()=>(0,l.M6)(e,a))),e=(0,l.v5)(e))}const h="LINE"===(null==u?void 0:u.type)?t.position:Object.assign(Object.assign({},t.position),{textIndex:"LINE"===(null==p?void 0:p.type)?p.line.content.text.length-1:0});e=(0,d.DG)(e,h);const _=a[h.elementIndex],v=(0,i.z_)(_);if(v){const a=null!==(P=v.audioPrefix)&&void 0!==P?P:v.audio;e=(0,s.set)(e,"audio",(0,o.EU)({audioSyncModel:a,playState:"PLAY",seekTo:(0,d.SU)(a,null!==(A=h.textIndex)&&void 0!==A?A:0),speed:t.playbackRate})(e.audio))}return e}case"stories/SELECT_MULTIPLE_CHOICE":{let a;if(!e.storySession)throw Error("No story session found");const n=e.storySession.furthestPosition,r=e.storySession.challengeSession;if("multiple-choice"!==(null==r?void 0:r.type))throw Error("Unexpected challenge type");const c=(0,s.set)(e.storySession,"challengeSession",(r=>{var i;const l=[...r.selectedIndices,t.index],c=void 0!==r.additionalCorrectAnswerIndices&&r.additionalCorrectAnswerIndices.length>0,d=c?r.additionalCorrectAnswerIndices.every((e=>l.includes(e)))&&l.includes(r.correctAnswerIndex):l.includes(r.correctAnswerIndex),u=null===(i=e.storyElements)||void 0===i?void 0:i[n.elementIndex-1];d&&"LINE"===(null==u?void 0:u.type)&&u.line.content.audioSuffix&&(a=(0,o.EU)({audioSyncModel:u.line.content.audioSuffix,playState:"PLAY"}));const p={mistakeCount:t.index===r.correctAnswerIndex||c&&r.additionalCorrectAnswerIndices.includes(t.index)?r.mistakeCount:r.mistakeCount+1,selectedIndices:l};return(0,s.merge)(r,p)})(r));e=(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,c)}),a&&(e=(0,s.set)(e,"audio",a(e.audio))),(0,i.Xq)(r.correctAnswerIndex,t.index,r.selectedIndices,r.additionalCorrectAnswerIndices)&&(e=(0,l.Q5)(e),m((()=>(0,l.S5)(e))));const d=null===(N=e.storySession)||void 0===N?void 0:N.challengeSession;return m((()=>(0,u.j)("stories_select_multiple_choice",Object.assign(Object.assign(Object.assign({},e.trackingProperties),r.trackingProperties),{select_method:t.selectMethod,success:!!d&&0===d.mistakeCount})))),e}case"stories/SELECT_PHRASE":{if("select-phrases"!==(null===(x=null===(D=e.storySession)||void 0===D?void 0:D.challengeSession)||void 0===x?void 0:x.type))throw Error("Unexpected type");const a=null===(M=e.storySession)||void 0===M?void 0:M.challengeSession,n=t.optionIndex===a.correctAnswerIndex?0:1;e=(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(e.storySession.challengeSession,{mistakeCount:e.storySession.challengeSession.mistakeCount+n,selectedIndices:[...e.storySession.challengeSession.selectedIndices,t.optionIndex]})})}),t.optionIndex===a.correctAnswerIndex&&(e=(0,l.Q5)(e),m((()=>(0,l.S5)(e))));const r=null===(F=e.storySession)||void 0===F?void 0:F.challengeSession;return m((()=>(0,u.j)("stories_select_multiple_choice",Object.assign(Object.assign(Object.assign({},e.trackingProperties),a.trackingProperties),{select_method:t.selectMethod,success:!!r&&0===r.mistakeCount})))),e}case"stories/SELECT_MATCH_TOKEN":{if("match"!==(null===(H=null===(U=e.storySession)||void 0===U?void 0:U.challengeSession)||void 0===H?void 0:H.type))throw Error("Challenge type is incorrect. It should be 'match'.");const a=e.storySession.challengeSession,r=n.cx(a.tokens,{status:"selected"}),i=a.tokens[r],o=a.tokens[t.index];if(t.index===r)e=(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(a,{tokens:a.tokens.map(((e,a)=>a===t.index?(0,s.set)(e,"status","initial"):e))})})});else if(i&&i.language!==o.language){const n=a.dictionary[`from:${i.text}`],c=o.text===n?"correct":"incorrect",d=a.tokens.map(((e,a)=>a===t.index||a===r?(0,s.set)(e,"status",c):e)),u="correct"===c&&d.every((e=>"correct"===e.status));e=(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(a,{mistakeCount:a.mistakeCount+("incorrect"===c?1:0),tokens:d})})}),u&&(e=(0,l.Q5)(e),m((()=>(0,l.S5)(e))))}else e=(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(a,{tokens:a.tokens.map(((e,a)=>a===t.index?(0,s.set)(e,"status","selected"):a===r||"incorrect"===e.status?(0,s.set)(e,"status","initial"):e))})})});return e}case"stories/SELECT_ARRANGE_PHRASE":{const a=null===(j=e.storySession)||void 0===j?void 0:j.challengeSession;if("arrange"!==(null==a?void 0:a.type))throw Error("Unexpected type");const n=null===(G=e.storySession)||void 0===G?void 0:G.furthestPosition,r=n?null===(B=e.storyElements)||void 0===B?void 0:B[n.elementIndex]:void 0;if("ARRANGE"!==(null==r?void 0:r.type))throw Error("Unexpected challenge type");if(r.selectablePhrases[t.index]===r.selectablePhrases[r.phraseOrder[a.arrangedPhrases]]){const n=[...a.phraseOrder];t.index!==r.phraseOrder[a.arrangedPhrases]&&(n[a.arrangedPhrases]=t.index,n[n.indexOf(t.index)]=r.phraseOrder[a.arrangedPhrases]);const i=a.arrangedPhrases+1;return e=(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(a,{arrangedPhrases:i,phraseOrder:n,selectedIncorrectIndices:[]})})}),i>=r.selectablePhrases.length&&(e=(0,l.Q5)(e),m((()=>(0,l.S5)(e)))),e}return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(a,{mistakeCount:a.selectedIncorrectIndices.includes(t.index)?a.mistakeCount:a.mistakeCount+1,selectedIncorrectIndices:[...a.selectedIncorrectIndices.filter((e=>e!==t.index)),t.index]})})})}case"stories/SET_STORY_COMPLETE_REQUEST_STATUS":return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{storyCompleteRequestStatus:t.status})});case"stories/SET_GRAMMAR_CORRECTION_REQUEST_STATUS":return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{grammarCorrectionRequestStatus:t.status,grammarCorrectionTimeTaken:t.timeTaken})});case"stories/COMPLETE_STORY":return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:void 0,nextMode:(0,s.from)(t.nextMode),onboardingStep:void 0,pendingStoryEndSections:(0,s.from)(t.storyEndSections),status:"story-end",storyCompleteRequestStatus:"ok",visibleStoryEndSections:(0,s.from)([])})});case"stories/SHOW_NEXT_STORY_END_SECTION":{if(!(null===(V=e.storySession)||void 0===V?void 0:V.furthestPosition))return e;if((0,d.DG)(e,e.storySession.furthestPosition),!e.storySession.pendingStoryEndSections)return e;if(e.storySession.pendingStoryEndSections.length<t.increment)return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{status:"completed"})});const a=e.storySession.pendingStoryEndSections[t.increment-1],n=e.storySession.pendingStoryEndSections.slice(t.increment);m((()=>{var t,s,n,r,i,o;(null===(s=null===(t=e.storySession)||void 0===t?void 0:t.pendingStoryEndSections)||void 0===s?void 0:s.length)&&(0,u.j)("stories_show_end_section",{end_section_position:null!==(r=null===(n=e.storySession.visibleStoryEndSections)||void 0===n?void 0:n.length)&&void 0!==r?r:0,end_section_type:a.type,total_end_sections:(null!==(o=null===(i=e.storySession.visibleStoryEndSections)||void 0===i?void 0:i.length)&&void 0!==o?o:0)+e.storySession.pendingStoryEndSections.length})}));const i=void 0!==e.storySession.fullscreenStoryEndSection,o=(0,r.p)(p)(a.type)?a:void 0;return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{fullscreenStoryEndSection:o,pendingStoryEndSections:n,status:0===n.length?"completed":"story-end",useImmediateScrolling:i,visibleStoryEndSections:[...null!==(z=e.storySession.visibleStoryEndSections)&&void 0!==z?z:[],a]})})}case"stories/SET_EDITING_TEXT":return(null===(Z=e.storySession)||void 0===Z?void 0:Z.challengeSession)?(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(e.storySession.challengeSession,{answer:t.text})})}):e;case"stories/SET_CORRECTED_TEXT":return"freeform-writing"!==(null===(q=null===($=e.storySession)||void 0===$?void 0:$.challengeSession)||void 0===q?void 0:q.type)?e:(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(e.storySession.challengeSession,{answer:t.correctedText,fetchedCorrection:t.correctedText}),freeformChallengeCorrectedResponse:t.correctedText,freeformChallengeCorrectionId:t.correctionId,freeformChallengeCorrectionModel:t.model,freeformChallengeCorrectionModelVersion:t.modelVersion,freeformChallengeOriginalResponse:t.originalText})});case"stories/RE_EDIT_TEXT":return(null===(W=e.storySession)||void 0===W?void 0:W.challengeSession)?(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(e.storySession.challengeSession,{allowEditAfterGrammarCheck:!0})})}):e;case"stories/DISMISS_CORRECTION":{const a=null===(Q=e.storySession)||void 0===Q?void 0:Q.challengeSession;return"freeform-writing"!==(null==a?void 0:a.type)?e:(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(a,{answer:t.text,numberOfCorrectionsDismissed:a.numberOfCorrectionsDismissed+1})})})}case"stories/START_CHALLENGE":{const a=null===(Y=e.storySession)||void 0===Y?void 0:Y.challengeSession;return a&&"freeform-writing"===a.type?(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(a,{startTime:t.startTime})})}):e}case"stories/DID_SCROLL_DURING_FREEFORM_CHALLENGE":{const t=null===(J=e.storySession)||void 0===J?void 0:J.challengeSession;return t&&"freeform-writing"===t.type?(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(t,{didScroll:!0})})}):e}case"stories/TYPE_TEXT_SUBMIT":return e=(0,l.vX)(e,t.gradingResult),e=(0,l.Q5)(e),m((()=>(0,l.S5)(e))),e;case"stories/FREEFORM_WRITING_SUBMIT":return e=(0,l.Om)(e),e=(0,l.Q5)(e),m((()=>(0,l.S5)(e))),(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{freeformChallengeSubmittedResponseWithHints:t.responseWithHints,responseTtsStatus:"done"})});case"stories/ONBOARDING_HINT_VIEWED":return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{onboardingStep:void 0})});case"stories/ANSWER_POINT_TO_PHRASE":{const a=null===(K=e.storySession)||void 0===K?void 0:K.challengeSession;if("point-to-phrase"!==(null==a?void 0:a.type))throw Error("Unexpected type");const r=a.correctAnswerIndex,o=a.additionalCorrectAnswerIndices,c=t.partIndex===a.correctAnswerIndex||(null==o?void 0:o.includes(t.partIndex));return e=(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(a,{mistakeCount:a.mistakeCount+(c?0:1),selectedIndices:n.G0(a.selectedIndices,[t.partIndex])})})}),(0,i.Xq)(r,t.partIndex,a.selectedIndices,o)&&(e=(0,l.Q5)(e),m((()=>(0,l.S5)(e)))),e}case"stories/SET_AUDIO_ERROR":return(0,s.setIn)(e,["audio","playError"],!0);case"stories/SET_LINE_AUDIO_DURATION":return(0,s.setIn)(e,["audio","duration"],t.duration);case"stories/SKIP_CHALLENGE":{const t=null===(X=e.storySession)||void 0===X?void 0:X.challengeSession;if("freeform-writing"!==(null==t?void 0:t.type))throw Error("Attempted to skip unskippable challenge");return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(t,{skipped:!0})})})}case"stories/SET_HOOTS_USER_PROPERTIES":return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{freeformUserProperties:t.properties})});case"stories/FREEFORM_WRITING_SET_TTS_URL":if("freeform-writing"!==(null===(te=null===(ee=e.storySession)||void 0===ee?void 0:ee.challengeSession)||void 0===te?void 0:te.type))throw Error("Unexpected challenge type");return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{freeformChallengeSubmittedResponseTtsUrl:t.url})});case"stories/FREEFORM_WRITING_PREPARE_SUBMIT":return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{responseTtsStatus:"in-progress"})});case"stories/USED_KEYBOARD_FOR_MATCH_CHALLENGE":return(0,s.setIn)(e,["storySession","usedKeyboardForMatchChallenge"],!0);case"stories/GRADE_SPEAK_LINE":{const a=null===(ae=e.storySession)||void 0===ae?void 0:ae.challengeSession;if("speak"!==(null==a?void 0:a.type))throw Error(`Unexpected speak challenge on ${null==a?void 0:a.type}`);return e=(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(a,{mistakeCount:t.correct||t.skipped?0:1,skipped:t.skipped})})}),e=(0,l.Q5)(e),m((()=>(0,l.S5)(e))),e}case"DISABLE_SPEAK":{if(void 0===e.storySession)return e;const t=e.storyElements,a=null===(se=e.storySession)||void 0===se?void 0:se.furthestPosition.elementIndex,n=t&&a?t[a]:void 0;if("LINE"!==(null==n?void 0:n.type))throw Error(`Unexpected switch to fall back ${null==n?void 0:n.type}`);const r=e.fallbackElements;if(!r)throw Error("No fallback elements");if(!t)throw Error("No elements");const o=(0,i.IG)(n),l=(0,i.BT)(o,t),c=t.slice(0,l),d=(0,i.BT)(o,r),u=[...c,...r.slice(d,r.length)];return(0,s.merge)(e,{speakingDisabledLineIndex:o,storyElements:u})}case"stories/VIEWED_INTRO_CARD":return(0,s.setIn)(e,["storySession","viewedIntroCard"],!0)}return e}},42659:(e,t,a)=>{"use strict";a.d(t,{$4:()=>z,B8:()=>V,Bk:()=>Z,Ch:()=>L,Cm:()=>oe,EQ:()=>g,EU:()=>b,Ec:()=>K,Fl:()=>X,Fp:()=>Q,J6:()=>ue,Jw:()=>x,KD:()=>ce,LR:()=>fe,Lm:()=>W,MY:()=>G,Mb:()=>d,NR:()=>me,NT:()=>J,Oz:()=>B,Rv:()=>p,SJ:()=>v,Sg:()=>m,Ss:()=>T,Xr:()=>y,Y2:()=>ge,Y4:()=>ee,YW:()=>f,__:()=>w,aQ:()=>se,bE:()=>E,bR:()=>l,cQ:()=>M,dE:()=>u,dY:()=>ne,df:()=>q,dz:()=>Y,eI:()=>ve,ep:()=>S,ez:()=>_,fn:()=>ie,gg:()=>re,gl:()=>he,hp:()=>C,hy:()=>H,iH:()=>k,iM:()=>j,ii:()=>c,is:()=>U,jv:()=>o,lA:()=>P,mk:()=>h,mu:()=>pe,np:()=>F,oe:()=>N,r8:()=>ae,rF:()=>R,rx:()=>_e,uZ:()=>te,vw:()=>$,w0:()=>A,wW:()=>D,yV:()=>O,yk:()=>le});var s=a(30427),n=a(59249),r=a(94171),i=a(97106);const o=e=>e.browserSettings,l=e=>e.ui.canShowAgeRestrictedLeaderboardsIntro,c=e=>e.charactersPersisted,d=e=>e.config,u=e=>e.courses,p=e=>e.user.fromLanguage,g=e=>e.ui.homeMessagingClientState,m=e=>void 0!==e.ui.drawer&&void 0!==e.ui.modal,h=e=>void 0!==e.ui.drawer||void 0!==e.ui.modal,_=e=>e.ui.isInventoryFresh,v=e=>void 0!==e.ui.modal,f=e=>e.ui.online,S=e=>void 0!==e.ui.secondaryModal,E=e=>e.ui.isShopItemsFresh,y=e=>e.ui.isUserModelFresh,b=e=>e.uiPersisted.streakSocietyNewRewardAvailable,w=e=>e.items,I=e=>e.profile,T=e=>{var t;return null===(t=e.leaderboards.leagues)||void 0===t?void 0:t.state},k=e=>e.user.learningLanguage,C=({},e)=>e.location,R=e=>e.ui.modal,O=e=>e.notifications,L=e=>e.paymentMethods,P=e=>e.player,A=e=>e.animations,N=e=>e.skills,D=e=>e.subscriptions,x=e=>e.ui,M=e=>e.uiPersisted,F=e=>e.user,U=s.P1(P,(e=>e.session)),H=s.P1(P,U,((e,t)=>t&&(e.currentIndex===t.challenges.length-1||e.endedEarly||t.heartsLeft<(e.sessionParams.isFinalLevel?1:0)))),j=s.P1(U,(e=>{var t;return null!==(t=null==e?void 0:e.challenges.filter((e=>{var t;return null===(t=e.gradingResult)||void 0===t?void 0:t.correct})))&&void 0!==t?t:[]})),G=s.P1(P,U,((e,t)=>null==t?void 0:t.challenges[e.currentIndex])),B=s.P1(u,F,((e,t)=>{var a,s;if(!t.currentCourseId)return;const n=e[t.currentCourseId];if((null!==(s=null===(a=n.pathSectioned)||void 0===a?void 0:a.length)&&void 0!==s?s:0)>0&&(void 0===n.path||0===n.path.length)){const e=n.pathSectioned.flatMap((e=>e.units));return Object.assign(Object.assign({},n),{path:e})}return e[t.currentCourseId]})),V=s.P1((e=>e.courseHistories),B,((e,t)=>e[t.id])),z=s.P1(x,(e=>e.viewportWidth>=700)),Z=s.P1(x,(e=>e.viewportWidth<530)),$=s.P1(x,(e=>!!e.purchasingItem)),q=s.P1((e=>e.brb.zombie.status),(e=>(0,n.gQ)("debugZombieMode")||"enabled"===e)),W=s.P1(F,(e=>!!e.id)),Q=s.P1(x,(e=>e.popoverId)),Y=s.P1(I,(e=>e.privateProfile)),J=s.P1(I,(e=>e.user)),K=s.P1(I,(e=>e.followers)),X=s.P1(I,(e=>e.following)),ee=s.P1(I,(e=>e.socialProfile)),te=s.P1(I,(e=>e.firstPersonSocialProfile)),ae=s.P1(I,(e=>e.achievements)),se=s.P1(I,(e=>e.xpEvents)),ne=s.P1(F,(e=>e.id)),re=s.P1(d,(e=>{var t,a,s,n;return"CN"===e.ipCountry&&null!==(a=null===(t=e.featureFlags)||void 0===t?void 0:t.disable_avatars_cn)&&void 0!==a&&a||null!==(n=null===(s=e.featureFlags)||void 0===s?void 0:s.disable_avatars_global)&&void 0!==n&&n})),ie=(s.P1(V,(e=>e.numSessionsWithMistakes)),s.P1(w,(e=>e.inventory.premium_subscription))),oe=s.P1(ie,(e=>null==e?void 0:e.subscriptionInfo)),le=s.P1(w,(e=>e.inventory.immersive_subscription)),ce=(s.P1(w,(e=>e.inventory.gold_subscription)),e=>(0,i.h0)(e.items.inventory)),de=s.P1([ce,w],((e,t)=>{var a;return e?null===(a=t.inventory[e])||void 0===a?void 0:a.purchaseDate:void 0})),ue=s.P1([ce,de],((e,t)=>void 0!==t&&void 0!==e&&void 0!==i.$Z[e]?1e3*t+i.$Z[e]:void 0)),pe=s.P1([ue,(e,t)=>t],((e,t)=>void 0!==e&&e>=t)),ge=s.P1(w,(e=>{var t,a;return null!==(a=null!==(t=e.inventory.premium_subscription)&&void 0!==t?t:e.inventory.gold_subscription)&&void 0!==a?a:e.inventory.immersive_subscription})),me=s.P1(w,(e=>{var t;return null!==(t=e.inventory.premium_subscription)&&void 0!==t?t:e.inventory.gold_subscription})),he=s.P1(P,(e=>{var t,a;return null!==(a=null===(t=e.sessionParams)||void 0===t?void 0:t.isGrammarSkill)&&void 0!==a&&a})),_e=e=>e.user.gemsConfig,ve=e=>!!e.stories.storySession||!!e.player.session,fe=e=>!!e.items.inventory[r.xH]},73520:(e,t,a)=>{"use strict";a.d(t,{Ap:()=>b,B$:()=>g,Cu:()=>h,D_:()=>o,EL:()=>d,MI:()=>I,Rc:()=>S,TE:()=>v,Ti:()=>y,ey:()=>u,gD:()=>E,jK:()=>m,kK:()=>_,oO:()=>f,oV:()=>c,uL:()=>w,x2:()=>p,xm:()=>l});var s=a(30427),n=a(80254),r=a(74311),i=a(16689);const o=e=>e.goals,l=s.P1(o,(e=>n.HK(e.schema,"goalId"))),c=s.P1(o,l,((e,t)=>({coreQuest:e.coreQuest?t[e.coreQuest]:void 0,dailyQuest:e.dailyQuest?t[e.dailyQuest]:void 0,difficulty:e.difficulty,hardQuest:e.hardQuest?t[e.hardQuest]:void 0,lastUpdated:e.lastUpdated}))),d=s.P1(o,(e=>e.progress)),u=s.P1(o,(e=>e.friendsQuest.details)),p=s.P1(o,(e=>e.friendsQuest.highFiveTimestamp)),g=s.P1(o,(e=>e.friendsQuest.lastSentGiftTimestamp)),m=s.P1(o,(e=>e.friendsQuest.lastSentNudge)),h=s.P1(u,(e=>null==e?void 0:e.winStreak)),_=s.P1(o,(e=>e.lastSeenNextFriendsQuestStart)),v=s.P1(o,(e=>e.monthlyQuestTheme)),f=s.P1(o,(e=>n.HK(e.badges,"badgeId"))),S=s.P1(o,f,((e,t)=>n.MR(e.earnedBadges,"earnedTimestamp").reverse().map((e=>Object.assign(Object.assign({},t[e.badgeId]),e))).filter((t=>void 0!==e.schema.find((e=>e.badgeId===t.badgeId)))))),E=s.P1(o,(e=>{var t;const a=e.schema,s=e.monthlyQuest;return null===(t=a.find((e=>e.goalId===s)))||void 0===t?void 0:t.badgeId})),y=s.P1(o,d,l,((e,t,a)=>[e.coreQuest,e.dailyQuest,e.hardQuest].filter((s=>{if(s&&t){const n=a[s];return t[s]>=(0,r.ng)(e.difficulty,n)}return!1})).length)),b=s.P1(o,l,((e,t)=>{var a;return e.monthlyQuest?null===(a=t[e.monthlyQuest])||void 0===a?void 0:a.threshold:30})),w=s.P1(o,d,b,((e,t,a)=>!(!e.monthlyQuest||!t)&&t[e.monthlyQuest]>=a)),I=s.P1(f,E,((e,t)=>t?(0,i.br)(e[t]):void 0))},74462:(e,t,a)=>{"use strict";a.d(t,{LG:()=>d,MQ:()=>c,q0:()=>i,r0:()=>o,su:()=>l});var s=a(30427),n=a(42659),r=a(1);const i=e=>e.heartsState,o=e=>(0,r.GQ)(e.user,e.heartsState),l=s.P1([n.np,i,n.Y2,n.Oz],((e,t,a,s)=>(0,r.Ef)(e,t,a,s))),c=s.P1([l],(e=>"free"===e)),d=s.P1([i,c],((e,t)=>t&&(0,r.is)(e)))},51399:(e,t,a)=>{"use strict";a.d(t,{L_:()=>r,Ug:()=>i,po:()=>o});var s=a(30427),n=a(42659);const r=e=>e.leaderboards.classroomLeaderboard,i=s.P1([n.np,e=>e.leaderboards.leagues,r],((e,t,a)=>e.classroomLeaderboardsEnabled?a:t)),o=e=>e.leaderboards.streaks},50231:(e,t,a)=>{"use strict";a.d(t,{Kh:()=>R,oG:()=>L,av:()=>P,fx:()=>O});var s=a(30427),n=a(80254),r=a(42659),i=a(93540),o=a(83936),l=a(15307),c=a(80164),d=a(35160),u=a(59249),p=a(20041),g=a(54385),m=a(16970),h=a(54412),_=a(1),v=a(37825),f=a(64865),S=a(25447),E=a(23275),y=a(67280),b=a(88787),w=a(88868),I=a(20028);const T={charactersTabCallout:({user:e})=>(0,m.S9)(e.learningLanguage,e.fromLanguage)&&!("ja"===e.learningLanguage&&"en"===e.fromLanguage),convertLingotsToGemsWeb:({user:e})=>(0,_.Pp)(e),darkMode:({homeMessagingClientStatePersisted:e,user:t})=>{var a;return!(null===(a=e.darkMode)||void 0===a?void 0:a.dontShow)&&!(0,I.pN)(t)},dogfoodingPreview:e=>(({homeMessagingClientState:e})=>e.dogfoodingPreview)(e)&&(0,I.u)(e.user)&&window.location.host!==w.Vb&&window.location.host!==w.a_&&void 0===(0,h.ej)(h.Vj.RedirectToPreview),dynamic:()=>!0,emailVerified:({isDesktop:e,user:t})=>t.persistentNotifications.includes(p.Qd.emailVerified)&&e&&!(0,I.pN)(t),guidebookCallout:({path:e,user:t})=>{var a;if(!e)return!1;const{unitIndex:s}=null!==(a=(0,E.Bm)(e))&&void 0!==a?a:{};return void 0!==s&&!!e[s].guidebook&&t.sessionCount>=3},immersivePlusPromo:({homeMessagingClientState:e,isDesktop:t,user:a})=>e.immersivePlusPromo&&t&&!(0,I.pN)(a),kudosOffer:({kudosDrawer:e,kudosAssets:t})=>!!e&&"OFFER"===e.notificationType&&void 0!==t[e.kudosIcon]&&void 0!==t[e.actionIcon],kudosReceive:({kudosDrawer:e,kudosAssets:t})=>!!e&&"RECEIVE"===e.notificationType&&void 0!==t[e.actionIcon],leaderboardsIntro:({sessionsToUnlockLeagues:e,user:t})=>t.persistentNotifications.includes(p.Qd.leaderboardsIntro)&&0===e,legendaryRebrandGoldColor:({path:e})=>(0,v.lZ)(e),maintenanceBreak:()=>!1,marketingOptIn:({homeMessagingClientState:e})=>e.marketingOptIn,mobileWebToAppConversion:({isDesktop:e,homeMessagingClientState:t})=>t.mobileWebToAppConversion&&(0,f.WV)(e),newYearsDiscount:({homeMessagingClientStatePersisted:e,user:t})=>(0,y.Ay)(t.plusDiscounts)&&e.newYearsDiscount,pathChange:({currentCourse:e,homeMessagingClientState:t,path:a})=>{var s;return!!a&&t.pathChange&&(null===(s=e.pathDetails)||void 0===s?void 0:s.clientNotifications.some((e=>"pathChange"===(0,S.c)(e).id)))},pathMigration:({currentCourse:e,homeMessagingClientState:t,path:a})=>{var s;return!!a&&t.pathMigration&&(null===(s=e.pathDetails)||void 0===s?void 0:s.clientNotifications.some((e=>"pathMigration"===(0,S.c)(e).id)))},pathSectionsCallout:({path:e})=>!!e,pathSkipping:({homeMessagingClientStatePersisted:e})=>e.pathSkipping,plusBadge:({homeMessagingClientState:e,user:t})=>t.hasPlus&&e.plusBadge,plusBadgeFamily:({homeMessagingClientState:e,user:t})=>t.hasPlus&&e.plusBadgeFamily,plusBadgeMigration:({homeMessagingClientStatePersisted:e,user:t})=>t.hasPlus&&e.plusBadgeMigration,reactivatedWelcome:({homeMessagingClientState:e,user:t})=>!(0,I.pN)(t)&&e.reactivatedWelcome,resurrectedWelcome:({homeMessagingClientState:e,user:t})=>!(0,I.pN)(t)&&e.resurrectedWelcome,schools201607Ad:({isDesktop:e,user:t})=>t.persistentNotifications.includes(p.Qd.schools201607Ad)&&e&&!(0,I.pN)(t),schoolsJoinedClassroom:({homeMessagingClientState:e})=>!!e.schoolsJoinedClassroom,shakeToReportAlert:({user:e})=>(0,I.ms)(e),skillTreeMigration:({user:e})=>e.persistentNotifications.includes(p.Qd.skillTreeMigration),streakFreezeRecurringOffer:({homeMessagingClientState:e,items:t,user:a})=>{var s,n;const r=(0,_.GQ)(a),i=(null!==(n=null===(s=a.streakData.currentStreak)||void 0===s?void 0:s.length)&&void 0!==n?n:0)>=3,o=(r?a.gemsConfig.gems:a.lingots)>=(0,g.Fk)(r),l=t.shop.misc.streak_freeze,c=l&&l.id in t.inventory;return e.streakFreezeRecurringOffer&&i&&o&&!c},streakFreezeUsed:({items:e,user:t})=>{var a,s,n,r;const i=(0,_.GQ)(t);if(!t.persistentNotifications.includes(p.Qd.streakFreezeUsed))return!1;const o=(null!==(s=null===(a=t.streakData.currentStreak)||void 0===a?void 0:a.length)&&void 0!==s?s:0)>1,l=(i?t.gemsConfig.gems:t.lingots)>=(0,g.Fk)(i),c=e.shop.misc.streak_freeze,d=null!==(r=null===(n=e.inventory.streak_freeze)||void 0===n?void 0:n.quantity)&&void 0!==r?r:0;return o&&l&&c&&d<2},streakRepairApplied:({homeMessagingClientStatePersisted:e,isDesktop:t})=>e.streakRepairApplied&&t,streakRepairOffer:({isDesktop:e,shouldOfferSuperDuolingo:t,user:a})=>e&&!a.hasPlus&&a.streakRepairOffer&&t,superPreviewEndingCallout:({homeMessagingClientState:{superPreviewEndingCallout:e}})=>!!e,turningNotificationsOn:e=>(({homeMessagingClientState:e})=>e.turningNotificationsOn)(e)&&(0,b.Hd)()&&"default"===Notification.permission,v2Intro:({currentCourse:e,user:t})=>{var a;return(null===(a=e.pathDetails)||void 0===a?void 0:a.clientNotifications.some((e=>"v2_intro"===(0,S.c)(e).id)))||t.creationDate<=1656979200},webToAppConversion:({homeMessagingClientState:e,isDesktop:t,user:a})=>!(0,I.pN)(a)&&e.webToAppConversion&&t,webToAppConversionAggressive:e=>void 0!==(0,f.TI)()&&(({homeMessagingClientState:e,isDesktop:t,user:a})=>!(0,I.pN)(a)&&e.webToAppConversionAggressive&&t)(e)},k=T;const C=s.zB({config:r.Mb,currentCourse:r.Oz,homeMessagingClientState:r.EQ,homeMessagingClientStatePersisted:e=>e.uiPersisted.homeMessagingClientState,isDesktop:r.$4,isShopItemsFresh:r.bE,isUserModelFresh:r.Xr,isZombieMode:r.df,items:r.__,kudosAssets:e=>e.friends.assets,kudosDrawer:e=>e.friends.drawer,path:i.HF,sessionsToUnlockLeagues:o._C,shouldOfferSuperDuolingo:c.tE,student:l.Bs,user:r.np}),R=s.P1(C,(e=>{var t,{isUserModelFresh:a,isZombieMode:s,path:n,shouldOfferSuperDuolingo:r,user:i}=e,o=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(e,["isUserModelFresh","isZombieMode","path","shouldOfferSuperDuolingo","user"]);return i.id&&a&&!s&&void 0!==n&&void 0!==r?[(t=Object.assign({isUserModelFresh:a,path:n,shouldOfferSuperDuolingo:r,user:i},o),p.Iu.filter((e=>(0,u.ky)("debugHomeMessage")===e||k[e](t)))),!0]:[[],!1]}),{memoizeOptions:{resultEqualityCheck:n.Xy}}),O=s.P1(r.w0,r.Jw,((e,t)=>e.some((e=>e.blocksHomeMessages))&&(!t.toast||!t.toastIsUhmManaged)||t.drawer&&!t.drawerIsUhmManaged||t.modal&&!t.modalIsUhmManaged||t.toast&&!t.toastIsUhmManaged?void 0:t.homeMessage)),L=s.P1(O,r.Jw,((e,t)=>void 0===e?void 0:t.homeMessageData)),P=s.P1(r.Jw,(e=>{var t;return(null===(t=e.modal)||void 0===t?void 0:t.name)===d.t.HomeMessage?e.modal.homeMessage:void 0}))},93540:(e,t,a)=>{"use strict";a.d(t,{DN:()=>C,Eh:()=>D,F8:()=>U,HF:()=>w,Iw:()=>R,MK:()=>O,T4:()=>H,Ti:()=>A,YM:()=>F,Zw:()=>x,cb:()=>N,iv:()=>P,md:()=>L,r6:()=>M});var s=a(30427),n=a(42659),r=a(93718),i=a(59249),o=a(99644),l=a(23275),c=a(89065),d=a(41631);const u=e=>{const t=(0,l.Bm)(e);return"alphabet_gate"===(null==t?void 0:t.level.type)&&(e=(0,o.yY)(e,!1,t)),e.map((e=>Object.assign(Object.assign({},e),{levels:e.levels.filter((e=>"alphabet_gate"!==e.type))})))},p=(e,t,a)=>{const s=(0,l.Bm)(e);if("alphabet_gate"===(null==s?void 0:s.level.type)){const{alphabetId:n,gateId:r}=s.level.pathLevelClientData;if(void 0!==r&&a.includes(r))return(0,o.yY)(e,!1,s);if(void 0===r&&t.includes(n))return(0,o.yY)(e,!1,s)}return e},g=e=>{const t=(0,l.Bm)(e);return"chest"===(null==t?void 0:t.level.type)&&(e=(0,o.yY)(e,!1,t)),e.map((e=>Object.assign(Object.assign({},e),{levels:e.levels.filter((e=>"chest"!==e.type))})))},m=s.P1(n.Oz,(e=>void 0!==(null==e?void 0:e.pathSectioned)&&e.pathSectioned.length>0?e.pathSectioned.flatMap((e=>e.units)):null==e?void 0:e.path)),h=s.P1(n.Oz,(e=>null==e?void 0:e.pathSectioned)),_=s.P1(n.Mb,(e=>!0===e.featureFlags.web_hide_alphabet_gates&&!(0,i.gQ)("debugAlphabetGates"))),v=s.P1(n.Mb,r.N,((e,t)=>!0===e.featureFlags.web_hide_path_rewards||!t)),f=s.P1(n.ii,n.Oz,((e,t)=>{var a;return void 0===t?[]:null!==(a=e.skippedAlphabetIds[t.id])&&void 0!==a?a:[]})),S=s.P1(n.ii,n.Oz,((e,t)=>{var a;return void 0===t?[]:null!==(a=e.skippedAlphabetGateIds[t.id])&&void 0!==a?a:[]})),E=s.P1(m,_,((e,t)=>t&&e?u(e):e)),y=s.P1(E,v,((e,t)=>t&&e?g(e):e)),b=s.P1(y,f,S,((e,t,a)=>void 0===e?e:p(e,t,a))),w=s.P1(b,(e=>e)),I=s.P1(h,_,((e,t)=>t&&e?e.map((e=>Object.assign(Object.assign({},e),{units:u(e.units)}))):e)),T=s.P1(I,v,((e,t)=>t&&e?e.map((e=>Object.assign(Object.assign({},e),{units:g(e.units)}))):e)),k=s.P1(T,f,S,((e,t,a)=>void 0===e?e:e.map((e=>Object.assign(Object.assign({},e),{units:p(e.units,t,a)}))))),C=s.P1(k,(e=>e)),R=s.P1(C,(e=>{var t,a;return null!==(a=null!==(t=null==e?void 0:e.find((e=>"active"===e.status)))&&void 0!==t?t:null==e?void 0:e[e.length-1])&&void 0!==a?a:void 0})),O=s.P1(C,R,(e=>e.ui.selectedPathSectionType),((e,t,a)=>{var s,n;return null!==(n=null!==(s=null==e?void 0:e.find((e=>e.type===a)))&&void 0!==s?s:t)&&void 0!==n?n:void 0})),L=s.P1(C,(e=>void 0===e?{}:Object.fromEntries(e.flatMap((e=>e.units.map((t=>[t.unitIndex,e]))))))),P=s.P1((e=>e.ui.shouldReturnToSections),(e=>e)),A=s.P1(C,O,((e,t)=>{var a;if(void 0===e||void 0===t)return;const s=(0,c.SJ)(t.type),n=s===d.t.DAILY_REFRESH&&e[e.length-1].type!==d.t.DAILY_REFRESH;return t.type===s||n?void 0:null!==(a=e.find((e=>e.type===s)))&&void 0!==a?a:e.find((e=>e.type===d.t.CHAMPION))})),N=s.P1(w,(e=>e?(0,l.Bm)(e):void 0)),D=s.P1(w,(e=>e?(0,l.d$)(e):void 0)),x=s.P1(C,(e=>e?Object.fromEntries(e.map((e=>[e.index,e.units[0].levels.find((e=>"unit_test"===e.state))]))):{})),M=s.P1(w,(e=>!!e&&e.every((e=>e.levels.every((e=>(0,l.Wc)(e.state)||void 0!==e.dailyRefreshInfo)))))),F=s.P1(n.df,w,((e,t)=>!e&&t&&t[0].levels[0].finishedSessions>0)),U=s.P1(w,(e=>void 0===e?{}:Object.fromEntries(e.map((e=>[e.unitIndex,e.unitNumber]))))),H=s.P1(N,w,O,(e=>e.ui.visibleUnitIndex),((e,t,a,s)=>{var n;if(!t)return;const r=(null!==(n=null==e?void 0:e.unitNumber)&&void 0!==n?n:1)-1;return a&&a.units.length>0?a.units[null!=s?s:r]:t[null!=s?s:r]}))},93718:(e,t,a)=>{"use strict";a.d(t,{N:()=>i});var s=a(30427),n=a(42659),r=a(90110);const i=s.P1(n.Lm,n.np,((e,t)=>{var a;if(!e)return;const s=(0,r.Zp)(t,"PATH_CHEST");return null===(a=null==s?void 0:s.rewards)||void 0===a?void 0:a.find((e=>!e.consumed))}))},83936:(e,t,a)=>{"use strict";a.d(t,{N9:()=>g,Rq:()=>h,WM:()=>m,Y_:()=>u,_C:()=>p});var s=a(30427),n=a(42659),r=a(40387),i=a(95332),o=a(16970),l=a(59249),c=a(37971),d=a(44637);const u=s.P1(n.jv,n.MY,n.$4,n.gl,n.iH,n.is,((e,t,a,s,n,r)=>t&&r?(0,i.eK)({browserSettings:e,challenge:t,isDesktop:a,isGrammar:s,learningLanguage:n,session:r}):{canToggleTyping:!1,isToggledToTyping:!1})),p=s.P1(n.Ss,(e=>void 0===e?void 0:e.numSessionsRemainingToUnlock)),g=(s.P1(n.Ss,(e=>void 0!==(null==e?void 0:e.ended)&&e.ended.length>0?e.ended:void 0)),s.P1(n.np,n.dE,((e,t)=>{const a=(e.courses||[]).map((e=>t[e])).map((e=>`${e.learningLanguage}_${e.fromLanguage}`));return e=>a.includes(`${e.learningLanguageId}_${e.fromLanguageId}`)}))),m=s.P1(n.Mb,(e=>e.clientExperiments)),h=s.P1(n.lA,n.hy,((e,t)=>{var a,s;if(!e.session)return;if(e.sessionParams.isFinalLevel){const[t,n]=(0,d.Dk)(e);return![c.c.PartialXpDuo,c.c.PartialXpDuoSliding].includes(e.status)&&void 0!==t&&t<e.challengeIdSections.length-1&&n===(null!==(s=null===(a=e.challengeIdSections[t])||void 0===a?void 0:a.length)&&void 0!==s?s:0)-1?"partialXpDuo":void 0}const n=[c.c.CoachDuo,c.c.CoachDuoSliding,c.c.SmartTip,c.c.SmartTipBlaming,c.c.SmartTipSliding,c.c.HardModeDuo,c.c.HardModeDuoSliding];let i=n.indexOf(e.status)<n.indexOf(c.c.CoachDuo)&&e.coachDuo.model&&!t;const u=n.indexOf(e.status)<n.indexOf(c.c.SmartTip)&&e.smartTipToShow&&!t,p=n.indexOf(e.status)<n.indexOf(c.c.HardModeDuo)&&((0,l.gQ)("hardModeDuo")||(0,r.IF)(e)||(0,o.Yt)(e));return i&&!u&&p&&(i=!1),i?"coachDuo":u?"smartTip":p?"hardModeDuo":void 0}))},27429:(e,t,a)=>{"use strict";a.d(t,{XL:()=>l,eE:()=>u,ek:()=>c,ix:()=>d});var s=a(30427),n=a(42659),r=a(74462),i=a(93540),o=a(23275);const l=s.P1(i.DN,i.HF,i.cb,n.hp,((e,t,a,s)=>{var n;if(!s)return;const r=null==s?void 0:s.pathname;if(!r.startsWith("/lesson"))return;const[,i,l,c,d,u]=r.split("/");void 0!==e&&e.length>0&&(t=e.flatMap((e=>e.units)));const p=e=>{var a,s;return(null===(a=null==t?void 0:t[e.unitIndex])||void 0===a?void 0:a.levels[e.levelIndex])?Object.assign(Object.assign({},e),{level:null===(s=t[e.unitIndex])||void 0===s?void 0:s.levels[e.levelIndex],unitNumber:t[e.unitIndex].unitNumber}):void 0},g=c?parseInt(c,10)-1:void 0;if("section"===l&&e&&t){if(void 0===g)return;const a=(0,o.E0)(e[g].units[0]),s=e[g].units[0].unitIndex;if(-1===a)return;return{level:null===(n=t[s])||void 0===n?void 0:n.levels[a],levelIndex:a,unitIndex:s,unitNumber:t[s].unitNumber}}const m=u?parseInt(u,10)-1:void 0;if("lesson"===i&&void 0!==t)switch(d){case"legendary":if(void 0===g)return;if(void 0===m)return;return p({levelIndex:m,unitIndex:g});case"level":if(void 0===g||void 0===m)return;return p({levelIndex:m,unitIndex:g});case"test":if(void 0===g)return;return p({levelIndex:(0,o.E0)(t[g]),unitIndex:g});default:return a}})),c=s.P1(i.cb,l,((e,t)=>void 0!==t&&void 0!==e&&e.unitIndex===t.unitIndex&&e.levelIndex===t.levelIndex)),d=s.P1(r.r0,n.lA,((e,t)=>{var a,s;if(void 0===t.sessionRouteParams)return!1;const n="legendary"===(null===(a=t.sessionRouteParams)||void 0===a?void 0:a.type)?"legendary":"regular",r=null===(s=t.levelData)||void 0===s?void 0:s.level;return e&&!!r&&!(0,o.qM)(r,n)})),u=s.P1(d,r.MQ,((e,t)=>e&&t))},21791:(e,t,a)=>{"use strict";a.d(t,{L:()=>_,Q:()=>h});var s=a(30427),n=a(22772),r=a(42659),i=a(93540),o=a(95351),l=a(89260),c=a(80820),d=a(11811);const u=r.$4,p=e=>e.sessionCache.keys,g=(e,t,a,s,n,r)=>i=>{if(!a&&!s)return!0;if("chest"===i.level.type)return!0;const u=(0,o.K)({currentCourseHistory:e,levelData:i,sessionType:d.FF.LevelReview});let p=!1;if("skill"===i.level.type){const{skillId:e}=i.level.pathLevelClientData;p=(0,l.Uj)(r,e)}const g=(0,c.gL)({generatorIdsOfRecentMistakes:null==u?void 0:u.map((e=>e.generatorId)),includeSmartTips:t&&"story"!==i.level.type,isExplanationSeen:p,pathLevel:i.level});return n.includes(g)},m=s.P1(r.B8,u,r.df,p,r.np,((e,t,a,s,n)=>g(e,t,a,!0,s,n))),h=s.P1(r.B8,u,r.df,p,r.np,((e,t,a,s,n)=>g(e,t,a,!1,s,n))),_=s.P1(i.cb,i.HF,m,((e,t,a)=>{if(void 0===t)return 0;let s=0;for(const r of(0,n.getRemainingSessions)(t,e)){if(!a(r))break;s++}return s}))},15307:(e,t,a)=>{"use strict";a.d(t,{Bs:()=>u,FF:()=>h,GP:()=>v,Yk:()=>m,jG:()=>E,pA:()=>S,x0:()=>p});var s=a(30427),n=a(99369),r=a(42659),i=a(93540),o=a(77167),l=a(68903),c=a(23275),d=a(12125);const u=e=>e.student,p=s.P1(r.Oz,(e=>{var t;return null===(t=null==e?void 0:e.assignments)||void 0===t?void 0:t.filter((t=>{const a=t.fromLanguageId===e.fromLanguage&&t.learningLanguageId===e.learningLanguage,s=t.type===o.bu.AssignmentType.SKILL&&null!==t.skillId&&null!==t.crownLevel,n=t.type!==o.bu.AssignmentType.SKILL;return a&&(s||n)}))})),g=s.P1(i.HF,(e=>{if(void 0===e)return;const t={},a={};return e.forEach((e=>{const{levels:s,unitIndex:n,unitNumber:r}=e;s.forEach(((e,s)=>{const i={level:e,levelIndex:s,unitIndex:n,unitNumber:r};switch(e.type){case"skill":{const{skillId:a}=e.pathLevelClientData;void 0===t[a]&&(t[a]=[]),t[a].push(i);break}case"story":{const{storyId:t}=e.pathLevelClientData;a[t]=i;break}}}))})),{skill:t,story:a}})),m=s.P1(p,g,((e,t)=>{if(void 0===e||void 0===t)return;const a={};return e.forEach((e=>{const{assignmentId:s,type:n}=e;switch(n){case o.bu.AssignmentType.SKILL:{const{crownLevel:n,skillId:r}=e;null!==n&&null!==r&&r in t.skill&&(a[s]=t.skill[r][n]);break}case o.bu.AssignmentType.STORY:e.storyId in t.story&&(a[s]=t.story[e.storyId]);break;case o.bu.AssignmentType.XP:case o.bu.AssignmentType.UNIT:break;default:throw(0,l.RJ)(n),Error(`Unexpected assignment type: ${n}`)}})),a})),h=s.P1(m,p,((e,t)=>{if(void 0===e||void 0===t)return;const a=t.filter((e=>(0,d.R0)(e.status)));return(0,n.asMutable)(a).sort(((t,a)=>{if(t.status===a.status){if(t.dueDateTs===a.dueDateTs){if(o.bu.CONTENT_SPECIFIC_ASSIGNMENT_TYPES.includes(t.type)&&o.bu.CONTENT_SPECIFIC_ASSIGNMENT_TYPES.includes(a.type)){const s=e[t.assignmentId],n=e[a.assignmentId];return(0,c.Nk)(s,n)}return t.openDateTs-a.openDateTs}return"missed"===t.status&&"missed"===a.status?a.dueDateTs-t.dueDateTs:t.dueDateTs-a.dueDateTs}return"missed"===t.status&&"active"===a.status?1:-1}))})),_=s.P1(h,(e=>{if(void 0===e)return;const t=e.filter((e=>[o.bu.AssignmentType.SKILL,o.bu.AssignmentType.STORY].includes(e.type)));return 0!==t.length?0===t.length?void 0:t:void 0})),v=s.P1(_,(e=>{if(void 0!==e)return e[0]})),f=s.P1(i.MK,_,m,((e,t,a)=>{if(void 0===e||void 0===a||void 0===t)return;const s=[e.units[0].unitIndex,e.units[e.units.length-1].unitIndex];return t.find((e=>{const t=a[e.assignmentId].unitIndex;return t>=s[0]&&t<=s[1]}))})),S=s.P1(m,v,((e,t)=>void 0===e||void 0===t?void 0:e[t.assignmentId])),E=s.P1(m,f,((e,t)=>void 0===e||void 0===t?void 0:e[t.assignmentId]))},80164:(e,t,a)=>{"use strict";a.d(t,{I3:()=>h,I9:()=>b,K_:()=>E,Oi:()=>g,QK:()=>S,SS:()=>_,dT:()=>m,gb:()=>w,jD:()=>v,tE:()=>f,y1:()=>y});var s=a(30427),n=a(42659),r=a(51827),i=a(59249),o=a(68903),l=a(25062),c=a(74541),d=a(32499),u=a(16086),p=a(20028);const g=s.P1(n.__,(e=>{var t;return null===(t=e.subscriptions)||void 0===t?void 0:t.isLoaded})),m=s.P1(n.__,(e=>{var t;return null===(t=e.subscriptions)||void 0===t?void 0:t.subscriptionPlans})),h=(s.P1(n.__,(e=>{var t;return(null===(t=e.subscriptions)||void 0===t?void 0:t.isLoaded)?e.subscriptions.currentPlan:void 0})),s.P1(m,(e=>null==e?void 0:e.find((e=>e.isFamilyPlan))))),_=s.P1(m,(e=>null==e?void 0:e.find((e=>e.planType===d._r.TwelveMonth)))),v=(s.P1(_,n.Mb,((e,t)=>e?(0,d.eh)(e,null==t?void 0:t.ipCountry):void 0)),s.P1(h,n.Mb,((e,t)=>e?(0,d.eh)(e,null==t?void 0:t.ipCountry):void 0)),s.P1(n.__,(e=>{var t,a,s;return null!==(a=null===(t=e.inventory.premium_subscription)||void 0===t?void 0:t.familyPlanInfo)&&void 0!==a?a:null===(s=e.inventory.gold_subscription)||void 0===s?void 0:s.familyPlanInfo})),s.P1(n.__,n.np,d.Wt)),f=s.P1(n.__,n.np,d.X0),S=s.P1(n.__,f,((e,t)=>{var a,s,n,r;return(0,i.gQ)("mockFreeTrialEligible")?"eligible"===(null===(a=(0,i.ky)("mockFreeTrialEligible"))||void 0===a?void 0:a.toLowerCase()):(null===(s=e.subscriptions)||void 0===s?void 0:s.isLoaded)?(t||e.inventory.immersive_subscription)&&(null===(r=null===(n=e.subscriptions)||void 0===n?void 0:n.subscriptionPlans)||void 0===r?void 0:r.some((e=>e.isFreeTrial))):void 0})),E=(s.P1(n.__,(e=>(0,r._H)(e))),s.P1(n.Mb,n.__,((e,t)=>(0,u.Pc)()?(0,r.BY)(t):e.ipCountry?(0,l.kk)(e.ipCountry):void 0))),y=s.P1(S,(e=>!1!==e)),b=s.P1(n.np,(e=>e.plusDiscounts)),w=s.P1(n.np,n.Lm,f,S,n.Y2,v,((e,t,a,s,n,r)=>{if(!t||(0,p.pN)(e))return"eligibleFreeTrial";const i=(0,c.l1)(n,"alreadyHasSuper","alreadyHasMax");if(i)return i;switch(a){case!0:return s?"eligibleFreeTrial":"eligible";case!1:return r?"eligibleToRedeem":"ineligible";case void 0:return;default:return void(0,o.RJ)(a)}}))},90806:(e,t,a)=>{"use strict";var s=a(39852),n=a(51158),r=a(79465);n.YJ((e=>{var t,a,s,n;return r.j("chunk_download_failure",{offline:!navigator.onLine,path:null!==(n=null===(s=/\n\((error: )?(.*?)\)$/.exec(null!==(a=null===(t=e.body.trace)||void 0===t?void 0:t.exception.message)&&void 0!==a?a:""))||void 0===s?void 0:s.slice(-1)[0])&&void 0!==n?n:""})})),n._b((e=>{var t,a,s,n,i;["Cannot load facebook SDK","Cannot load google SDK","Cannot load google sign in SDK"].includes(null===(t=e.body.trace)||void 0===t?void 0:t.exception.message)||(null===(s=null===(a=e.body.trace)||void 0===a?void 0:a.exception.message)||void 0===s?void 0:s.startsWith("Request failed with status code "))||r.j("app_crash",{crash_message:null===(n=e.body.trace)||void 0===n?void 0:n.exception.message,crash_type:null===(i=e.body.trace)||void 0===i?void 0:i.exception.class,rollbar_uuid:e.uuid})})),n.S1(),(0,s.JE)(),console.log(`On commit https://github.com/duolingo/duolingo-web/commit/${window.duo.version}`);var i=a(67899),o=(a(74971),a(91575),a(27378)),l=a(31542),c=a(92883),d=a(80715),u=a(3620),p=a(99369),g=a(80254),m=a(84389);const h=(0,p.from)({brb:{status:"disabled"},zombie:{status:"disabled"}});var _=a(34704),v=a(64591);const f=(0,p.from)({coachEnabled:!0,completeReverseTranslationTypingEnabled:!1,darkMode:"off",listenDisabledUntil:0,prefersReducedMotion:!1,speakDisabledUntil:0,transliterationsSettings:{"ja<en":Object.assign(Object.assign({},_.lL.romaji),{enabled:!0}),"zh<en":Object.assign(Object.assign({},_.lL.pinyin_all),{enabled:!0})},typingEnabled:!1}),S={activeAlphabetId:void 0,changedCharacters:void 0,characterChart:void 0,fromLanguage:void 0,learningLanguage:void 0,stagedCharacterChart:void 0},E={skippedAlphabetGateIds:{},skippedAlphabetIds:{}},y=JSON.parse('{"ageRestrictionLimit":13,"clientExperiments":{},"courses":{"ar":["en","fr","de","sv"],"cs":["en"],"de":["en","es","fr"],"el":["en"],"en":["es","fr","de","it","pt","nl-NL","ga","da","sv","tr","eo","no-BO","uk","ru","pl","cy"],"es":["en","fr","pt","de","it","ca"],"fr":["de","en","es","it"],"hi":["en"],"hu":["en"],"id":["en"],"it":["fr","en"],"ja":["en"],"ko":["en"],"nl-NL":["en"],"pl":["en"],"pt":["de","en","es","fr"],"ro":["en"],"ru":["en","de","fr","es"],"tr":["en","de"],"uk":["en"],"vi":["en"],"zh":["en"]},"dictionaryHost":"d2.duolingo.com","featureFlags":{},"speechHost":"speech.duolingo.com"}');var b=a(59249),w=a(17135),I=a(68903);const T=({history:e,updateTimestamp:t,values:a})=>e.filter((e=>t<e.expirationTimestamp)).filter((e=>!(0,I.cY)(a,e.value))),k=(0,w.dz)({days:28}),C=({challenges:e,history:t,levelId:a,updateTimestamp:s})=>{const n=e.filter((e=>void 0!==e.challengeGeneratorIdentifier)).map((e=>({generatorIdentifier:e.challengeGeneratorIdentifier})));return(({additionalData:e,history:t,ttl:a,unique:s,updateTimestamp:n,values:r})=>{let i=[...t,...r.map(((t,s)=>Object.assign(Object.assign({},(null==e?void 0:e[s])?{additionalData:null==e?void 0:e[s]}:{}),{expirationTimestamp:n+a,value:t})))].filter((e=>n<e.expirationTimestamp));if(s){const e=[];i.sort(((e,t)=>t.expirationTimestamp-e.expirationTimestamp)).forEach((t=>{(0,I.cY)(e.map((e=>e.value)),t.value)||e.push(t)})),i=e}return i.sort(((e,t)=>e.expirationTimestamp-t.expirationTimestamp))})({additionalData:a?n.map((()=>({levelId:a}))):void 0,history:t,ttl:k,unique:!0,updateTimestamp:s,values:n})},R=({challenges:e,history:t,updateTimestamp:a})=>{const s=e.filter((e=>void 0!==e.challengeGeneratorIdentifier)).map((e=>({generatorIdentifier:e.challengeGeneratorIdentifier})));return T({history:t,updateTimestamp:a,values:s})};var O=a(11811);const L=(e=(0,p.from)({globalPlacementSessionStarts:0,globalPracticeSessionEnds:0,globalPracticeSessionStarts:0,mistakeHistory:[],numSessionsWithMistakes:0}),t)=>{var a,s;switch(t.type){case"QUIT_SESSION":{const{isZombieMode:a,levelId:s,sessionParams:{generatorIdentifiersOfRecentMistakes:n},session:r,session:{challenges:i,startTime:o}}=t;return r.type!==O.FF.Lesson&&r.type!==O.FF.LexemePractice||a||(e=(0,p.set)(e,"mistakeHistory",C({challenges:i.filter((e=>{var t;return!1===(null===(t=e.gradingResult)||void 0===t?void 0:t.correct)})),history:e.mistakeHistory,levelId:s,updateTimestamp:o}))),n&&!a&&(e=(0,p.set)(e,"mistakeHistory",R({challenges:i.filter((e=>{var t;return!0===(null===(t=e.gradingResult)||void 0===t?void 0:t.correct)})),history:e.mistakeHistory,updateTimestamp:o}))),e}case"START_SESSION":{const{sessionParams:{generatorIdentifiersOfRecentMistakes:s},session:n,startTime:r}=t;return n.type===O.FF.GlobalPractice&&(e=(0,p.set)(e,"globalPracticeSessionStarts",e.globalPracticeSessionStarts+1)),n.type===O.FF.PlacementTest&&(e=(0,p.set)(e,"globalPlacementSessionStarts",(null!==(a=e.globalPlacementSessionStarts)&&void 0!==a?a:0)+1)),s&&(e=(0,p.set)(e,"mistakeHistory",(({challenges:e,generatorIdentifiers:t,history:a,updateTimestamp:s})=>{const n=e.filter((e=>void 0!==e.challengeGeneratorIdentifier)).map((e=>e.challengeGeneratorIdentifier)),r=t.filter((e=>!(0,I.cY)(n,e))).map((e=>({generatorIdentifier:e})));return T({history:a,updateTimestamp:s,values:r})})({challenges:n.challenges,generatorIdentifiers:s,history:e.mistakeHistory,updateTimestamp:r}))),e}case"RECORDED_SESSION":{const{levelId:a,requestSession:n,requestSession:{challenges:r,endTime:i},sessionParams:{generatorIdentifiersOfRecentMistakes:o}}=t;if(n.type===O.FF.GlobalPractice&&(e=(0,p.set)(e,"globalPracticeSessionEnds",e.globalPracticeSessionEnds+1)),n.type===O.FF.Lesson){const n=r.filter((e=>!1===e.correct));n.length>0&&(e=(0,p.set)(e,"numSessionsWithMistakes",(null!==(s=e.numSessionsWithMistakes)&&void 0!==s?s:0)+1)),t.isZombieMode||(e=(0,p.set)(e,"mistakeHistory",C({challenges:n,history:e.mistakeHistory,levelId:a,updateTimestamp:i})))}return o&&!t.isZombieMode&&(e=(0,p.set)(e,"mistakeHistory",R({challenges:r.filter((e=>void 0!==e.correct)),history:e.mistakeHistory,updateTimestamp:i}))),e}default:return e}};var P=a(89065);const A=(e,t,a)=>{const s=e.filter((e=>!t.includes(e.userId))),n=s.filter((e=>a.includes(e.userId)));return s.filter((e=>!a.includes(e.userId))).concat(n)},N=["health_refill_partial_1","health_refill_partial_2","health_refill_partial_3","health_refill_partial_4","health_refill","health_refill_reactive","health_refill_discounted","health_segment"],D=(e,t)=>e?1e3*e+t:void 0;var x=a(54385),M=a(37971),F=a(94778),U=a(56043),H=a(95332),j=a(7113);const G=[O.FF.Lesson,O.FF.LevelReview,O.FF.GlobalPractice,O.FF.LexemePractice,O.FF.LexemeSkillLevelPractice],B=(e,t)=>{const a=(0,j.w)(e.prompt).map(((e,a)=>({isBlank:a>=t.blankStartIndex&&a<t.blankEndIndex,text:e}))),s={challengeGeneratorIdentifier:e.challengeGeneratorIdentifier,challengeResponseTrackingProperties:{},character:e.character,explanation:e.explanation,id:e.id,indicatorType:O.A.PastMistake,metadata:e.metadata,newWords:void 0,solutionTranslation:e.solutionTranslation,trackingProperties:{},type:O.Sm.PartialListen};return Object.assign(Object.assign({},s),{displayTokens:a,grader:e.grader,prompt:e.prompt,slowTts:e.slowTts,tts:e.tts,type:O.Sm.PartialListen})},V=(e,t,a)=>{const s=e.map(((e,t)=>({isBlank:t===a.blankIndex,text:e}))),n={challengeGeneratorIdentifier:t.challengeGeneratorIdentifier,challengeResponseTrackingProperties:{},character:t.character,explanation:t.explanation,id:t.id,indicatorType:O.A.PastMistake,metadata:t.metadata,newWords:void 0,solutionTranslation:t.solutionTranslation,trackingProperties:{},type:O.Sm.PartialReverseTranslate},r={grader:t.grader};return Object.assign(Object.assign(Object.assign({},n),r),{displayTokens:s,prompt:t.prompt,slowTts:t.slowTts,tts:t.tts,type:O.Sm.ListenComplete})},z=(e,t,a)=>{const s=e.map(((e,t)=>({isBlank:t===a.blankIndex,text:e}))),n={challengeGeneratorIdentifier:t.challengeGeneratorIdentifier,challengeResponseTrackingProperties:{},character:t.character,explanation:t.explanation,id:t.id,indicatorType:O.A.PastMistake,metadata:t.metadata,newWords:void 0,solutionTranslation:t.solutionTranslation,trackingProperties:{},type:O.Sm.PartialReverseTranslate},r={grader:t.grader};return Object.assign(Object.assign(Object.assign({},n),r),{displayTokens:s,prompt:t.prompt,tokens:t.tokens,type:O.Sm.CompleteReverseTranslation})},Z=(e,t)=>{const a=(0,j.w)(e.correctSolutions[0]).map(((e,a)=>({isBlank:a>=t.blankStartIndex&&a<t.blankEndIndex,text:e}))),s={challengeGeneratorIdentifier:e.challengeGeneratorIdentifier,challengeResponseTrackingProperties:{},character:e.character,explanation:void 0,id:e.id,indicatorType:O.A.PastMistake,metadata:e.metadata,newWords:void 0,solutionTranslation:e.solutionTranslation,trackingProperties:{},type:O.Sm.PartialReverseTranslate};return Object.assign(Object.assign({},s),{displayTokens:a,grader:e.grader,prompt:e.prompt,tokens:e.tokens,type:O.Sm.PartialReverseTranslate})};var $=a(23275),q=a(44637),W=a(89260),Q=a(97106);const Y=(0,p.from)({challengeIdSections:[],challengeStates:[],coachDuo:{allCharacters:[],allShowReasons:[],currentCorrectStreak:0,currentIncorrectStreak:0},completedWithHeartsRemaining:!1,confidence:0,currentInLessonStreak:0,currentIndex:0,enableBonusPoints:!1,endedEarly:!1,inLessonTipResources:{},inLessonTipShowing:!1,isFinalLevel:!1,key:0,maxHearts:0,maxInLessonStreak:0,numInLessonTipOpens:0,numTimesTransliterationToggled:0,receivedGifts:{fromMilestone:!1,quantity:0,streakFreeze:!1},recycledMistakeIndexToOriginalMistakeIndex:{},session:void 0,sessionParams:void 0,sessionPrefetchedTimestamp:void 0,sessionRouteParams:void 0,sessionSubmitError:void 0,sessionSubmitted:!1,sessionSubmitting:!1,sessionTime:0,shownSmartTipIds:[],slideData:[],status:void 0,strength:0,useHearts:!1});var J=a(16086);const K=(0,p.from)({keys:[]}),X=(e,t)=>void 0===e.time[e.time.length-1][1]?(0,p.setIn)(e,["time",e.time.length-1,1],t):e;var ee=a(37993),te=a(35160);const ae=(0,p.from)({availableModals:[],b2bPricingData:void 0,canShowAgeRestrictedLeaderboardsIntro:!0,canShowHomeMessage:!0,drawer:void 0,drawerIsUhmManaged:!1,engagementOverride:void 0,homeMessage:void 0,homeMessageData:void 0,homeMessagingClientState:{dogfoodingPreview:!0,maintenanceBreak:!0,turningNotificationsOn:!0},inductedIntoStreakSociety:!1,isDimmedOverlayOpen:!1,isInventoryFresh:!1,isLoggingOut:!1,isModalReallyOpen:!1,isRequestingNotificationPermission:!1,isShopItemsFresh:!1,isSwitchingCourse:!1,isUserModelFresh:!1,microphonePermission:void 0,modal:void 0,modalIsUhmManaged:!1,modalShouldWaitForOverlay:!1,online:!0,purchasingItem:!1,secondaryModal:void 0,shouldUnmount:!1,spotlightType:void 0,toast:void 0,toastIsUhmManaged:!1,viewportHeight:window.innerHeight,viewportWidth:window.innerWidth,visibleUnitIndex:void 0}),se=(0,I.p)(["newYearsDiscount","pathSkipping","plusBadgeMigration"]);var ne=a(20041),re=a(59096);const ie=e=>({discountType:e.discountType,expirationTime:e.secondsUntilExpiration>0?(0,w.HR)(e.secondsUntilExpiration):0}),oe=e=>!(0,I.gB)(e,["adsConfig","experiments","referralInfo","trackingProperties"]);var le=a(18804);const ce=(e=>{const t=g.XP(e);return(a=(0,p.from)({}),s)=>t.reduce(((t,n)=>(0,p.set)(t,n,e[n](a[n],s))),a)})({achievementsV3:(e=(0,p.from)({}),t)=>{switch(t.type){case"PLAYER_INIT":e=(0,p.set)(e,"sessionStartAchievements",e.achievements);break;case"UPDATE_USER_ACHIEVEMENTS_V3":{const a=(0,m.H2)(t.achievements);e=(0,p.set)(e,"achievements",a);break}}return e},animations:(e=(0,p.from)([]),t)=>{switch(t.type){case"QUEUE_ANIMATIONS":e=e.concat(t.animations);break;case"DEQUEUE_ANIMATION":e=e.filter((e=>e.id!==t.id))}return e},brb:(e=h,t)=>{switch(t.type){case"brb/DISABLED":e=(0,p.setIn)(e,[t.mode,"resetAt"],void 0),e=(0,p.setIn)(e,[t.mode,"status"],"disabled");break;case"brb/ENABLED":e=(0,p.setIn)(e,[t.mode,"resetAt"],t.resetAt),e=(0,p.setIn)(e,[t.mode,"status"],"enabled");break;case"brb/IGNORED":e=(0,p.setIn)(e,[t.mode,"ignoreUntil"],t.ignoreUntil),e=(0,p.setIn)(e,[t.mode,"resetAt"],void 0),e=(0,p.setIn)(e,[t.mode,"status"],"disabled")}return e},browserSettings:(e=f,t)=>{switch(t.type){case"DARK_MODE":e=(0,p.set)(e,"darkMode",t.value);break;case"DISABLE_LISTEN":e=(0,p.set)(e,"listenDisabledUntil",t.listenDisabledUntil);break;case"DISABLE_REDUCED_MOTION":e=(0,p.set)(e,"prefersReducedMotion",!1);break;case"DISABLE_SPEAK":e=(0,p.set)(e,"speakDisabledUntil",t.speakDisabledUntil);break;case"ENABLE_LISTEN":e=(0,p.set)(e,"listenDisabledUntil",0);break;case"ENABLE_REDUCED_MOTION":e=(0,p.set)(e,"prefersReducedMotion",!0);break;case"ENABLE_SPEAK":e=(0,p.set)(e,"speakDisabledUntil",0);break;case"TOGGLE_COACH":e=(0,p.set)(e,"coachEnabled",!e.coachEnabled);break;case"TOGGLE_COMPLETE_REVERSE_TRANSLATION":e=(0,p.set)(e,"completeReverseTranslationTypingEnabled",!e.completeReverseTranslationTypingEnabled);break;case"TOGGLE_TAP":e=(0,p.set)(e,"typingEnabled",!e.typingEnabled);break;case"SET_TRANSLITERATIONS_SETTINGS":e=(0,v.FL)(e,["transliterationsSettings",(0,_.LP)(t.learningLanguage,t.fromLanguage)],t.setting)}return e},characters:(e=(0,p.from)(S),t)=>{switch(t.type){case"characters/UPDATE_CHARACTER_CHART":return(0,p.set)(e,"characterChart",t.characterChart);case"characters/SET_CHARACTER_CHART":return(0,p.merge)(e,{activeAlphabetId:t.activeAlphabetId,characterChart:t.characterChart,fromLanguage:t.fromLanguage,learningLanguage:t.learningLanguage});case"characters/SET_ACTIVE_TAB":return(0,p.set)(e,"activeAlphabetId",t.activeAlphabetId);case"characters/STAGE_CHART_UPDATE":return(0,p.merge)(e,{changedCharacters:t.changedCharacters,stagedCharacterChart:t.stagedCharacterChart})}return e},charactersPersisted:(e=(0,p.from)(E),t)=>{var a,s;if("characters/SKIP_ALPHABET_GATE"===t.type){if(void 0!==t.gateId){const s=null!==(a=e.skippedAlphabetGateIds[t.courseId])&&void 0!==a?a:[];return(0,p.setIn)(e,["skippedAlphabetGateIds",t.courseId],[...s,t.gateId])}const n=null!==(s=e.skippedAlphabetIds[t.courseId])&&void 0!==s?s:[];return(0,p.setIn)(e,["skippedAlphabetIds",t.courseId],[...n,t.alphabetId])}return e},config:(e=(0,p.from)(y),t)=>("UPDATE_CONFIG"===t.type&&(e=(0,b.gQ)("debugIpCountry")?Object.assign(Object.assign({},t.config),{ipCountry:(0,b.ky)("debugIpCountry")}):t.config),e),courseHistories:(e=(0,p.from)({}),t)=>{switch(t.type){case"QUIT_SESSION":case"START_SESSION":case"RECORDED_SESSION":{const{courseId:a}=t;return(0,p.set)(e,a,L(e[a],t))}case"UPDATE_USER":{const{user:a}=t;return a.courses&&(e=g.Ry(a.courses.map((a=>[a.id,L(e[a.id],t)])))),e}default:return e}},courses:(e=(0,p.from)({}),t)=>{switch(t.type){case"UPDATE_USER":{const{currentCourse:s,courses:n}=t.user;if(n&&(e=(0,p.from)(g.Ry(n.map((e=>[e.id,e]))))),s){let t=0;e=(0,p.set)(e,s.id,Object.assign(Object.assign({},s),{path:s.path.map((e=>Object.assign(Object.assign({},e),{unitNumber:e.unitIndex+1}))),pathSectioned:s.pathSectioned.map((e=>{const a=Object.assign(Object.assign({},e),{status:(0,P.df)(e),type:(0,P.U_)(e),units:e.units.map((e=>Object.assign(Object.assign({},e),{unitNumber:e.unitIndex-t+1})))});return t+=e.units.length,a})),skills:(a=s.skills,a.reduce(((e,t)=>(e.push(t.map((e=>e.id))),e)),[]))}))}break}}var a;return e},debug:(e=(0,p.from)({warnings:[]}),t)=>{switch(t.type){case"debug/ADD_UNIQUE_DEBUG_WARNING":e.warnings.some((e=>e.type===t.warning.type))||(e=(0,p.update)(e,"warnings",(e=>e.concat([t.warning]))));break;case"debug/PAGE_LOAD":e=(0,p.set)(e,"pageLoadTime",t.timestamp)}return e},friends:(e=(0,p.from)({assets:{},drawer:null,feed:null,recommendationInfo:null}),t)=>{switch(t.type){case"SET_FEED":e=(0,p.set)(e,"feed",t.feed);break;case"SET_KUDOS_ASSETS":e=(0,p.set)(e,"assets",t.assets);break;case"SET_KUDOS_DRAWER":e=(0,p.set)(e,"drawer",t.drawer);break;case"SET_FOLLOW_SUGGESTIONS":e=(0,p.set)(e,"recommendationInfo",t.recommendationInfo);break;case"UPDATE_FOLLOW_SUGGESTIONS":{if(null===e.recommendationInfo)break;const a=Object.assign(Object.assign({},e.recommendationInfo),{recommendations:A(e.recommendationInfo.recommendations,t.filteredIds,t.rotatedIds)});e=(0,p.set)(e,"recommendationInfo",a);break}case"DELETE_FOLLOW_SUGGESTION":{if(null===e.recommendationInfo)break;const a=Object.assign(Object.assign({},e.recommendationInfo),{recommendations:e.recommendationInfo.recommendations.filter((e=>e.userId!==t.deletedId))});e=(0,p.set)(e,"recommendationInfo",a);break}}return e},goals:(e=(0,p.from)({badges:[],coreQuest:void 0,dailyQuest:void 0,difficulty:0,earnedBadges:[],friendsQuest:{details:void 0,lastSeenTotalProgress:0},hardQuest:void 0,lastSeenMonthlyChallengeId:"",lastSeenNextFriendsQuestStart:0,lastUpdated:void 0,monthlyChallengeProgressUpdate:0,monthlyQuest:void 0,monthlyQuestTheme:void 0,pendingRewards:[],progress:void 0,progressUpdate:void 0,schema:[]}),t)=>{switch(t.type){case"ACKNOWLEDGE_FRIENDS_QUEST_COMPLETE":e=(0,p.setIn)(e,["friendsQuest","details","acknowledged"],!0);break;case"SET_FRIENDS_QUEST_DETAILS":e=(0,p.setIn)(e,["friendsQuest","details"],t.payload);break;case"SET_FRIENDS_QUEST_HIGH_FIVE_TIMESTAMP":e=(0,p.setIn)(e,["friendsQuest","highFiveTimestamp"],t.value);break;case"SET_FRIENDS_QUEST_PROGRESS":e=(0,p.setIn)(e,["friendsQuest","details","ownProgress"],t.ownProgress),e=(0,p.setIn)(e,["friendsQuest","details","totalProgress"],t.totalProgress);break;case"SET_GOALS_SCHEMA":e=(0,p.set)(e,"schema",t.payload);break;case"SET_GOALS_DIFFICULTY":e=(0,p.set)(e,"difficulty",t.payload);break;case"SET_GOALS_PROGRESS":e=(0,p.set)(e,"progress",t.payload);break;case"SET_GOALS_PROGRESS_UPDATE":e=(0,p.set)(e,"progressUpdate",t.payload);break;case"SET_MONTHLY_CHALLENGE_PROGRESS_UPDATE":e=(0,p.set)(e,"monthlyChallengeProgressUpdate",t.payload.updates);break;case"SET_LAST_SEEN_FRIENDS_QUEST_TOTAL_PROGRESS":e.friendsQuest&&(e=(0,p.setIn)(e,["friendsQuest","lastSeenTotalProgress"],t.lastSeenTotalProgress));break;case"SET_LAST_SENT_FRIENDS_QUEST_GIFT_TIMESTAMP":e.friendsQuest&&(e=(0,p.setIn)(e,["friendsQuest","lastSentGiftTimestamp"],t.timestamp));break;case"SET_LAST_SENT_FRIENDS_QUEST_NUDGE":e.friendsQuest&&(e=(0,p.setIn)(e,["friendsQuest","lastSentNudge"],{nudgeType:t.nudgeType,timestamp:t.timestamp}));break;case"SET_LAST_SEEN_NEXT_FRIENDS_QUEST_START":e=(0,p.set)(e,"lastSeenNextFriendsQuestStart",t.lastSeenNextFriendsQuestStart);break;case"SET_LAST_SEEN_MONTHLY_CHALLENGE_ID":e=(0,p.set)(e,"lastSeenMonthlyChallengeId",t.monthlyChallengeId);break;case"SET_PENDING_DAILY_QUEST_REWARDS":e=(0,p.set)(e,"pendingRewards",t.dailyQuestRewards);break;case"SET_DAILY_QUESTS":e=(0,p.set)(e,"coreQuest",t.payload.coreQuest),e=(0,p.set)(e,"dailyQuest",t.payload.dailyQuest),e=(0,p.set)(e,"hardQuest",t.payload.hardQuest),e=(0,p.set)(e,"lastUpdated",t.payload.lastUpdated);break;case"SET_MONTHLY_QUEST":e=(0,p.set)(e,"monthlyQuest",t.payload);break;case"SET_MONTHLY_QUEST_THEME":e=(0,p.set)(e,"monthlyQuestTheme",t.monthlyQuestTheme);break;case"SET_QUEST_BADGES":e=(0,p.set)(e,"badges",t.badges);break;case"SET_EARNED_BADGES":e=(0,p.set)(e,"earnedBadges",t.earnedBadges)}return e},heartsState:(e=(0,p.from)({eligibleForFreeRefill:!1,healthEnabled:!1,hearts:5,maxHearts:5,nextHeartRefillTimestampMs:void 0,overrideFreeHeartRefillLeft:0,overrideShowHeartsIntro:!1,secondsPerHeartSegment:18e3,unlimitedHeartsAvailable:!1}),t)=>{switch(t.type){case"UPDATE_HEARTS_STATE":{const a=t.heartsConfig.secondsUntilNextHeartSegment,s=Object.assign(Object.assign({},t.heartsConfig),{nextHeartRefillTimestampMs:D(a,t.currentTimestampMs),overrideFreeHeartRefillLeft:e.overrideFreeHeartRefillLeft,overrideShowHeartsIntro:e.overrideShowHeartsIntro});e=(0,p.merge)(e,s);break}case"INCREMENT_HEARTS":{const a=Math.min(e.hearts+t.amount,e.maxHearts),s=a===e.maxHearts?void 0:e.secondsUntilNextHeartSegment,n=void 0===s?void 0:e.nextHeartRefillTimestampMs;e=(0,p.merge)(e,{hearts:a,nextHeartRefillTimestampMs:n,secondsUntilNextHeartSegment:s});break}case"DECREMENT_ONE_HEART":{const a=e.hearts===e.maxHearts,s=Math.max(0,e.hearts-1);e=(0,p.set)(e,"hearts",s),a&&(e=(0,p.merge)(e,{nextHeartRefillTimestampMs:D(e.secondsPerHeartSegment,t.currentTimestampMs),secondsUntilNextHeartSegment:e.secondsPerHeartSegment}));break}case"HEARTS_REFILL":e=(0,p.merge)(e,{hearts:e.maxHearts,nextHeartRefillTimestampMs:void 0,secondsUntilNextHeartSegment:void 0});break;case"stories/COMPLETE_STORY":case"SESSION_SUBMIT_END":e=(0,p.merge)(e,{overrideFreeHeartRefillLeft:Math.max(0,e.overrideFreeHeartRefillLeft-1)});break;case"PURCHASE_ITEM":{if("SUCCESS"!==t.status)break;let a=0;switch(t.item.itemName){case"health_refill_reactive":case"health_refill_discounted":case"health_refill":a=e.maxHearts;break;case"health_refill_partial_1":a=1;break;case"health_refill_partial_2":a=2;break;case"health_refill_partial_3":a=3;break;case"health_refill_partial_4":a=4}if(a>0){const t=Math.min(e.maxHearts,e.hearts+a);e=(0,p.merge)(e,{hearts:t,nextHeartRefillTimestampMs:t===e.maxHearts?void 0:e.nextHeartRefillTimestampMs,secondsUntilNextHeartSegment:t===e.maxHearts?void 0:e.secondsUntilNextHeartSegment})}break}case"SET_OVERRIDE_HEARTS_INTRO":e=(0,p.set)(e,"overrideShowHeartsIntro",t.value);break;case"SET_EXISTING_USER_HEARTS_CONFIG":e=(0,p.merge)(e,{overrideFreeHeartRefillLeft:3,overrideShowHeartsIntro:!0})}return e},items:(e=(0,p.from)({inventory:{},shop:{in_app_purchase:[],isLoaded:!1,misc:{}},subscriptions:{currentPlan:void 0,isLoaded:!1,subscriptionPlans:void 0}}),t)=>{switch(t.type){case"PURCHASE_ITEM":{if("SUCCESS"!==t.status)break;const{item:a}=t;if(N.some((e=>e===a.itemName)))break;"streak_freeze"!==a.itemName?e=(0,p.setIn)(e,["inventory",a.itemName],a):t.purchaseQuantity&&(e=(0,p.setIn)(e,["inventory","streak_freeze","quantity"],e.inventory.streak_freeze?e.inventory.streak_freeze.quantity+t.purchaseQuantity:t.purchaseQuantity));break}case"REFILL_SOCIETY_STREAK_FREEZES":if(void 0===e.inventory.society_streak_freeze_refill){(0,n.Kp)("Tried to refill society streak freezes without the required item in inventory.",{data:e.inventory});break}e=void 0===(e=void 0===e.inventory.society_streak_freeze?(0,p.merge)(e,{inventory:Object.assign(Object.assign({},e.inventory),{society_streak_freeze:{itemName:"society_streak_freeze",purchaseDate:Date.now(),purchaseId:"",purchasePrice:0,quantity:t.maxQuantity},society_streak_freeze_refill:void 0})}):(0,p.setIn)(e,["inventory","society_streak_freeze","quantity"],t.maxQuantity)).inventory.streak_freeze?(0,p.merge)(e,{inventory:Object.assign(Object.assign({},e.inventory),{streak_freeze:{itemName:"streak_freeze",purchaseDate:Date.now(),purchaseId:"",purchasePrice:0,quantity:x.SG}})}):(0,p.setIn)(e,["inventory","streak_freeze","quantity"],x.SG);break;case"REFRESH_USER_ITEM":{const a=t.item;e=(0,p.set)(e,"inventory",Object.assign(Object.assign({},e.inventory),{[a.itemName]:a}));break}case"SET_AVAILABLE_SUBSCRIPTION_PLANS":e=(0,p.set)(e,"subscriptions",{currentPlan:t.currentPlan,isLoaded:!0,subscriptionPlans:t.subscriptionPlans});break;case"SET_SHOP_ITEMS":{const a={in_app_purchase:[],isLoaded:!1,misc:{}};t.items.forEach((e=>{switch(e.type){case"misc":a[e.type][e.id]=e;break;case"in_app_purchase":a[e.type].push(e);break;default:(0,I.RJ)(e)}})),a.isLoaded=!0,e=(0,p.set)(e,"shop",a);break}case"UPDATE_INVENTORY":e=(0,p.set)(e,"inventory",t.inventory)}return e},leaderboards:(e=(0,p.from)({}),t)=>{var a,s,n;switch(t.type){case"CLEAR_LEAGUES_ENDED":e=(0,p.setIn)(e,["leagues","state","ended"],[]);break;case"CLEAR_CLASSROOM_LEADERBOARD_ENDED":e=(0,p.setIn)(e,["classroomLeaderboard","state","ended"],[]);break;case"LEADERBOARD_SESSION_END_SHOWN":{const a=(()=>{var a,s;return"leaderboardMoveUpPrompt"===t.slideType?e.sessionEndData&&t.cohortId===e.sessionEndData.moveUpPrompts.cohortId?e.sessionEndData.moveUpPrompts.numShown+1:1:null!==(s=null===(a=e.sessionEndData)||void 0===a?void 0:a.moveUpPrompts.numShown)&&void 0!==s?s:0})();e=(0,p.set)(e,"sessionEndData",{lastShownDate:t.shownDate,moveUpPrompts:{cohortId:t.cohortId,numShown:a}});break}case"UPDATE_LEADERBOARDS":if(void 0!==t.leagues){const a=t.leagues,s=a.state.numSessionsRemainingToUnlock,n=e.leagues?e.leagues.state.numSessionsRemainingToUnlock:void 0,r=(0,p.setIn)(a,["state","numSessionsRemainingToUnlock"],void 0===n||void 0===s?s:Math.max(0,Math.min(n,s)));e=(0,p.set)(e,"leagues",r)}void 0!==t.classroomLeaderboard&&(e=(0,p.set)(e,"classroomLeaderboard",t.classroomLeaderboard));break;case"SET_USER_REACTION":e=(0,p.setIn)(e,["userReaction"],t.reaction);break;case"RECORDED_SESSION":void 0!==(null===(a=e.leagues)||void 0===a?void 0:a.state.numSessionsRemainingToUnlock)&&(null===(s=e.leagues)||void 0===s?void 0:s.state.numSessionsRemainingToUnlock)>=1&&(e=(0,p.setIn)(e,["leagues","state","numSessionsRemainingToUnlock"],e.leagues.state.numSessionsRemainingToUnlock-1));break;case"LEAVE_CLASSROOM":(null===(n=e.classroomLeaderboard)||void 0===n?void 0:n.classroomId)===t.classroomId&&(e=(0,p.set)(e,"classroomLeaderboard",void 0));break;case"SET_LEADERBOARD_STREAKS":e=(0,p.set)(e,"streaks",t.streaks)}return e},notifications:(e=(0,p.from)({}),t)=>{switch(t.type){case"MARK_NOTIFICATIONS_READ":e=g.Xc(e,(e=>Object.assign(Object.assign({},e),{unseen:!1})));break;case"SET_NOTIFICATIONS":e=t.notifications;break;case"UPDATE_FOLLOW_NOTIFICATION":e=g.Xc(e,(e=>e.id===t.notificationId?Object.assign(Object.assign({},e),{is_following:t.isFollowing}):e))}return e},paymentMethods:(e=(0,p.from)([]),t)=>("REFRESH_USER_PAYMENT_METHODS"===t.type&&(e=t.paymentMethods),e),player:(e=Y,t)=>{var a,s,n,r,i;switch(e=((e,t)=>{switch(t.type){case"SET_SMART_TIP_TO_SHOW":e=(0,p.set)(e,"shownSmartTipIds",[t.smartTipResource.identifier,...e.shownSmartTipIds]),e=(0,p.set)(e,"smartTipToShow",t.smartTipResource);break;case"UPDATE_GRADED_SMART_TIP":e=(0,p.set)(e,"status",M.c.SmartTipBlaming),e=(0,p.setIn)(e,["smartTipToShow","gradingResult"],{correct:t.correct})}return e})(e,t),t.type){case"PLAYER_INIT":e=(0,p.set)(e,"via",t.via);break;case"PLAYER_REMOUNT":e=(0,p.set)(e,"key",e.key+1);break;case"PLAYER_RESET":e=Y;break;case"RECEIVE_GIFT":e=(0,p.setIn)(e,["receivedGifts",t.gift],!0),e=(0,p.setIn)(e,["receivedGifts","quantity"],e.receivedGifts.quantity+t.quantity),e=(0,p.setIn)(e,["receivedGifts","fromMilestone"],t.fromMilestone);break;case"CLEAR_IN_LESSON_TIP":return(0,p.merge)(e,{inLessonTip:void 0,inLessonTipShowing:!1});case"CREATE_SESSION":{const{levelData:s,session:n,sessionParams:r,sessionPrefetchedTimestamp:i,sessionRouteParams:o,speakIneligibleReasons:l}=t,c=n.challenges[e.currentIndex],d=(0,F.BY)({challenge:c}),u=!r.isFinalLevel&&n.beginner?4:3,g=n.type,m=null!==(a=(()=>{switch(r.type){case O.FF.Lesson:return r.isFinalLevel?M.c.FinalLevelDuo:r.showGrammarSkillSplash?M.c.GrammarSkillSplash:void 0;case O.FF.Legendary:case O.FF.LegendaryLevel:case O.FF.LegendaryLexemePractice:return M.c.LegendaryDuo;case O.FF.LevelReview:return M.c.CapstoneReviewSplash;case O.FF.LexemePractice:return s&&(0,$.$)(s.level)?M.c.CapstoneReviewSplash:void 0;case O.FF.ListeningPractice:case O.FF.SpeakingPractice:case O.FF.TargetPractice:case O.FF.UnitRewind:return M.c.PracticeHubDuo;case O.FF.MistakesReview:return M.c.MistakesReviewDuo;case O.FF.PlacementTest:return M.c.PlacementSplash;case O.FF.SectionTest:return M.c.SectionTestSplash;case O.FF.UnitReview:return void 0===(null==s?void 0:s.level.dailyRefreshInfo)?M.c.UnitReviewSplash:void 0;case O.FF.UnitTest:return M.c.UnitTestSplash;default:return}})())&&void 0!==a?a:(0,q.ct)(c,d),h=r.isFinalLevel||(0,W.LJ)(g)&&!(0,W.l$)(g);e=(0,p.merge)(e,{challengeIdSections:(0,W.oT)(n.challenges,r.isFinalLevel?2:1),challengeStates:[d],levelData:s,maxHearts:u,session:Object.assign(Object.assign({},n),{heartsLeft:h?u:0}),sessionParams:r,sessionPrefetchedTimestamp:i,sessionRouteParams:o,speakIneligibleReasons:l,status:m,useHearts:h});break}case"EXTEND_SESSION":{e=(0,p.setIn)(e,["session","challenges"],[...e.session.challenges,...t.challenges]),e=(0,p.setIn)(e,["session","ttsAnnotations"],Object.assign(Object.assign({},e.session.ttsAnnotations),t.ttsAnnotations));const a=(0,p.asMutable)(e.challengeIdSections,{deep:!0});a[a.length-1].push(...t.challenges.map((e=>e.id))),e=(0,p.merge)(e,{challengeIdSections:a,confidence:t.confidence,progressScore:t.progressScore,status:M.c.Blaming});break}case"CHALLENGE_GUESS_CHANGE":e=e.status===M.c.SmartTip?(0,p.setIn)(e,["smartTipToShow","guess"],t.value):(0,p.setIn)(e,["challengeStates",e.currentIndex,"guess"],t.value);break;case"CHALLENGE_HAS_BROKEN_TTS":e=(0,p.setIn)(e,["challengeStates",e.currentIndex,"hasBrokenTts"],!0);break;case"CHALLENGE_STARTED":e=e.status===M.c.SmartTip?(0,p.setIn)(e,["smartTipToShow","startTime"],t.timestamp):(0,p.setIn)(e,["session","challenges",e.currentIndex,"startTime"],t.timestamp);break;case"CHALLENGE_WORLD_CHARACTER_SHOWN":e=(0,p.setIn)(e,["session","challenges",e.currentIndex,"worldCharacterShown"],t.wasShown);break;case"COACH_DUO_SHOWN":e=(0,p.updateIn)(e,["coachDuo","allCharacters"],(e=>[...e,t.model.template.character])),e=(0,p.updateIn)(e,["coachDuo","allShowReasons"],(e=>[...e,t.model.showReason]));break;case"CONTINUE_CURRENT_CHALLENGE":{const t=e.session.challenges[e.currentIndex],a=e.challengeStates[e.currentIndex],s=(0,F.uu)({challenge:t,challengeState:a});e=(0,p.setIn)(e,["challengeStates",e.currentIndex],s),e=(0,p.set)(e,"status",(0,F.j4)({challenge:t,challengeState:s})?M.c.Guessing:M.c.Showing);break}case"REPLACE_WITH_ADAPTIVE_CHALLENGES":{const a=(0,p.asMutable)(e.challengeIdSections,{deep:!0}),s=(0,p.asMutable)(e.session.challenges);let n=0,r=0;s.forEach(((i,o)=>{const l=o-e.currentIndex-1;if(l>=0&&l<t.challenges.length){const i=t.challenges[o-e.currentIndex-1];s[o]=i,a[n][r]=i.id}r<e.challengeIdSections[n].length?r++:(n++,r=0)})),e=(0,p.setIn)(e,["session","challenges"],s),e=(0,p.set)(e,"challengeIdSections",a);break}case"ADVANCE_SESSION":{const t=e.currentIndex+1;e=(0,p.setIn)(e,["challengeStates",t],(0,F.BY)({challenge:e.session.challenges[t]})),e=(0,p.setIn)(e,["coachDuo","model"],void 0),e=(0,p.set)(e,"currentIndex",t),e=(0,p.set)(e,"smartTipToShow",void 0),e=(0,p.set)(e,"status",M.c.Sliding);break}case"DISABLE_LISTEN":case"DISABLE_SPEAK":{if(void 0===e.session)return e;const a="DISABLE_LISTEN"===t.type?(0,W.tq)():(0,W.bc)();e=(0,p.setIn)(e,["session","adaptiveChallenges"],null===(s=e.session.adaptiveChallenges)||void 0===s?void 0:s.filter((e=>!a.includes(e.type))));const n=[],r=[],i=[];(0,q.L1)(e,(({challenge:t,challengeIndex:s,sectionIndex:o})=>{var l,c,d;const u=null!==(c=null===(l=e.session.adaptiveInterleavedChallenges)||void 0===l?void 0:l.speakOrListenReplacementIndices[s])&&void 0!==c?c:null;if((s<=e.currentIndex||!a.includes(t.type))&&(n.push(t),r[o]=r[o]||[],r[o].push(t.id),i.push(null!=u?u:null)),s>=e.currentIndex&&null!==u&&a.includes(t.type)){const t=null===(d=e.session.adaptiveInterleavedChallenges)||void 0===d?void 0:d.challenges[u];t&&(n.push(t),r[o]=r[o]||[],r[o].push(t.id),i.push(u))}return!1})),e=(0,p.setIn)(e,["session","challenges"],n),(e=(0,p.set)(e,"challengeIdSections",r)).session.adaptiveInterleavedChallenges&&(e=(0,p.setIn)(e,["session","adaptiveInterleavedChallenges","speakOrListenReplacementIndices"],i));break}case"ENABLE_BONUS_POINTS":e=(0,p.set)(e,"enableBonusPoints",!0);break;case"END_SESSION":{const{enableBonusPoints:a,endedEarly:s,maxInLessonStreak:n,progressScore:r,session:{heartsLeft:i},sessionParams:{isFinalLevel:o}}=e,l=e.useHearts&&i<(o?1:0),c=!s&&!l;e=(0,p.set)(e,"completedWithHeartsRemaining",c);const d={enableBonusPoints:a,endTime:t.timestamp,failed:!e.partialXpGiven&&l,maxInLessonStreak:n,progressScore:r,shouldLearnThings:!o||c,xpPromised:(0,Q.xc)(e)};e=(0,v.$f)(e,["session"],d);break}case"END_SESSION_EARLY":e=(0,p.set)(e,"endedEarly",!0);break;case"LOAD_IN_LESSON_TIP_RESOURCE":return(0,p.setIn)(e,["inLessonTipResources",t.url],t.explanationResource);case"QUIT_SESSION":e=(0,p.set)(e,"numTimesTransliterationToggled",0);break;case"SESSION_END_SLIDES":e=(0,p.set)(e,"nativeAd",t.nativeAd),e=(0,p.set)(e,"sessionSubmitted",!0),e=(0,p.set)(e,"slideData",t.slideData);break;case"SESSION_SUBMIT_END":e=(0,p.set)(e,"sessionSubmitting",!1);break;case"SESSION_SUBMIT_FAILED":e=(0,p.set)(e,"sessionSubmitError",t.error);break;case"SESSION_SUBMIT_START":e=(0,p.set)(e,"sessionSubmitting",!0);break;case"SET_COACH_DUO_MODEL":e=(0,p.setIn)(e,["coachDuo","model"],t.model);break;case"SET_IN_LESSON_TIP":return(0,p.set)(e,"inLessonTip",t.explanationResource);case"SET_PARTIAL_XP_GIVEN":e=(0,p.set)(e,"partialXpGiven",t.xpGiven);break;case"SET_PLAYER_STATUS":e=(0,p.set)(e,"status",t.status);break;case"SET_SELECTED_STREAK_GOAL":{const a=e.slideData[t.slideIndex];"earlyStreakMilestonePrompt"===a.type&&(e=(0,p.setIn)(e,["slideData",t.slideIndex],Object.assign(Object.assign({},a),{selectedStreakGoal:t.selectedStreakGoal})));break}case"SET_SESSION_TIME":e=(0,p.set)(e,"sessionTime",t.sessionTime);break;case"SET_TRANSLITERATIONS_SETTINGS":e=(0,p.set)(e,"numTimesTransliterationToggled",e.numTimesTransliterationToggled+1);break;case"SHOW_HINT":{if(void 0===e.challengeStates[e.currentIndex])break;const a=e.challengeStates[e.currentIndex].hintsShown;e=(0,p.setIn)(e,["challengeStates",e.currentIndex,"hintsShown"],void 0===a?[t.token]:[...a,t.token]);break}case"SPEECH_RECOGNIZER_FAILED":e=(0,p.setIn)(e,["challengeStates",e.currentIndex,"recognizerFailed"],!0);break;case"START_SESSION":{const{startTime:a}=t,{challengeStates:s,currentIndex:n,session:{challenges:r},status:i}=e,o=r[n];e=(0,p.setIn)(e,["coachDuo","model"],void 0),e=(0,p.setIn)(e,["session","startTime"],a),e=(0,p.set)(e,"status",i===M.c.CoachDuoSplash?M.c.Sliding:(0,q.ct)(o,s[n]));break}case"RECORDED_SESSION":e=(0,v.FL)(e,["session"],t.responseSession);break;case"TOGGLE_IN_LESSON_TIP":return(0,p.merge)(e,{inLessonTipShowing:t.shouldShow,numInLessonTipOpens:e.numInLessonTipOpens+(t.shouldShow?1:0)});case"UPDATE_GRADED_CHALLENGE":{e.status!==M.c.Grading||(0,W.l$)(e.session.type)||(e=(0,W.bc)().includes(t.challenge.type)&&(null!==(r=null===(n=t.challenge.gradingResult)||void 0===n?void 0:n.numRetriesLeft)&&void 0!==r?r:0)>0?(0,p.set)(e,"status",M.c.SpeakRetryBlaming):(0,p.set)(e,"status",M.c.Blaming)),e=(0,v.FL)(e,["session","challenges",e.currentIndex],t.challenge);const a=null===(i=t.challenge.gradingResult)||void 0===i?void 0:i.correct,s=t.challenge.skipped,o=()=>{s||(a?(e=(0,p.setIn)(e,["coachDuo","currentCorrectStreak"],e.coachDuo.currentCorrectStreak+1),e=(0,p.setIn)(e,["coachDuo","currentIncorrectStreak"],0)):(e=(0,p.setIn)(e,["coachDuo","currentCorrectStreak"],0),e=(0,p.setIn)(e,["coachDuo","currentIncorrectStreak"],e.coachDuo.currentIncorrectStreak+1)))};if(e.useHearts&&!a&&(e=(0,p.setIn)(e,["session","heartsLeft"],e.session.heartsLeft-1)),e.session.type===O.FF.PlacementTest||e.session.type===O.FF.SectionTest||e.session.type===O.FF.UnitTest||e.status===M.c.SpeakRetryBlaming)o();else if(!(0,W.LJ)(e.session.type)){const n=e.session.challenges[e.currentIndex],r=e.challengeStates[e.currentIndex],[i,l]=(0,q.Dk)(e);if(void 0===i||void 0===l)throw Error("Could not find current challenge in challengeIdSections; this is a bug.");if(!a&&!r.hasBrokenTts){const t=e.challengeIdSections[i].length,{challengeIndex:a}=(0,q.L1)(e,(({sectionChallengeIndex:e,sectionIndex:a})=>a===i&&e===t-1));if(void 0===a)throw Error("This should never happen.");const s=(0,p.asMutable)(e.session.challenges,{deep:!0}),r=G.includes(e.session.type)?((e,t)=>{const a=(()=>{switch(e.type){case O.Sm.Listen:return(e=>{var t;const a=(0,U.TK)(e.prompt,null===(t=e.gradingResult)||void 0===t?void 0:t.guess,.6);if("all"===a.rangeType)return e;if("one"===a.rangeType){const t=(0,j.w)(e.prompt);return V(t,e,a)}return B(e,a)})(e);case O.Sm.PartialReverseTranslate:return(e=>{const t=e.displayTokens.map((e=>e.text)).join(""),a=(0,j.w)(t),s=(e=>{var t,a;const s=e.displayTokens,n=null!==(a=null===(t=e.gradingResult)||void 0===t?void 0:t.guess)&&void 0!==a?a:"",r=s[1].isBlank,i=s[0].isBlank,o=e.displayTokens.filter(((t,a)=>!t.isBlank&&a>0&&a<e.displayTokens.length-1)).map((e=>e.text)).join(""),l=r?`${n}${o}`:`${o}${n}`;return`${i?"":s[0].text}${l}${s[s.length-1].text}`})(e),n=(0,U.TK)(t,s,.6);return"one"===n.rangeType?z(a,e,n):e})(e);case O.Sm.Translate:return(0,H.Dw)(e,t)&&!(0,H.vv)(e)?(e=>{var t;const a=(0,U.TK)(e.correctSolutions[0],null===(t=e.gradingResult)||void 0===t?void 0:t.guess,.6);if("all"===a.rangeType)return e;if("one"===a.rangeType){const t=(0,j.w)(e.correctSolutions[0]);return z(t,e,a)}return Z(e,a)})(e):e;default:return e}})(),s=g.CE((0,v.Xh)(a),"gradingResult","skipped");return s.indicatorType=O.A.PastMistake,s})(n,e.sessionParams.learningLanguage):n,o=g.CE(r,"gradingResult","skipped");s.splice(a+1,0,o),e=(0,p.setIn)(e,["recycledMistakeIndexToOriginalMistakeIndex",a+1],e.currentIndex),e=(0,p.setIn)(e,["session","challenges"],s);const l=(0,p.asMutable)(e.challengeIdSections,{deep:!0});l[i].push(n.id),e=(0,p.set)(e,"challengeIdSections",l)}const c=e.challengeIdSections.length,d=e.challengeIdSections[i].length,u=i+(l===d-1?1:0);let m=e.strength;const h=(i+1)/c-m,_=d-l,f=t.strengthFactor*h/_;m=Math.max(u/c,e.strength+f),m>t.strengthTarget&&(m=1),e=(0,p.set)(e,"strength",m),o();const S=s?0:1;e=(0,p.set)(e,"currentInLessonStreak",a?e.currentInLessonStreak+S:0),e=(0,p.set)(e,"maxInLessonStreak",Math.max(e.currentInLessonStreak,e.maxInLessonStreak))}break}}return e},profile:(e=(0,p.from)({}),t)=>{var a;switch(t.type){case"RESET_PROFILE":e={firstPersonSocialProfile:e.firstPersonSocialProfile};break;case"LOAD_ACHIEVEMENTS":{const{v2:a,v3:s}=t.achievements;e=(0,p.set)(e,"achievements",{v2:a,v3:(0,m.H2)(s)});break}case"LOAD_PRIVATE_PROFILE_USER":e=(0,p.set)(e,"privateProfile",t.user);break;case"LOAD_PROFILE_USER":e=(0,p.set)(e,"user",t.user);break;case"LOAD_PROFILE_XP":e=(0,p.set)(e,"xpEvents",t.summaries);break;case"LOAD_PROFILE_FOLLOWERS":e=(0,p.set)(e,"followers",t.followersData);break;case"LOAD_PROFILE_FOLLOWING":e=(0,p.set)(e,"following",t.followingData);break;case"LOAD_SOCIAL_PROFILE":e=(0,p.set)(e,"socialProfile",t.socialProfile);break;case"LOAD_FIRST_PERSON_SOCIAL_PROFILE":e=(0,p.set)(e,"firstPersonSocialProfile",t.socialProfile);break;case"UPDATE_USER":try{if((0,J.Jb)()===(null===(a=e.user)||void 0===a?void 0:a.id)){const a=(0,p.merge)(e.user,t.user,{deep:!0});e=(0,p.set)(e,"user",a)}}catch(e){}}return e},sessionCache:(e=K,t)=>{switch(t.type){case"sessionCache/INITIALIZE":e=(0,p.set)(e,"keys",t.keys);break;case"sessionCache/ADD":e=(0,p.set)(e,"keys",e.keys.concat(t.key));break;case"sessionCache/REMOVE":e=(0,p.set)(e,"keys",e.keys.filter((e=>e!==t.key)))}return e},sessionEnd:(e=(0,p.from)({slides:[]}),t)=>{var a,s,n;const r=e.slides.length-1;switch(t.type){case"sessionEnd/CTA_CLICK":r>-1&&(e=(0,p.setIn)(e,["slides",r,"action"],"cta"));break;case"sessionEnd/DISMISSED":r>-1&&(e=(0,p.setIn)(e,["slides",r,"action"],null!==(a=e.slides[r].action)&&void 0!==a?a:"dismiss"));break;case"sessionEnd/READY":e.nativeAd&&(e=(0,p.setIn)(e,["nativeAd","status"],"can-track")),e.nativeAd&&(e=(0,p.set)(e,"nativeAd",X(e.nativeAd,t.timestamp))),r>-1&&(e=(0,p.setIn)(e,["slides",r,"status"],"can-track"),e=(0,p.setIn)(e,["slides",r],X(e.slides[r],t.timestamp)));break;case"sessionEnd/RESET":e=(0,p.set)(e,"nativeAd",void 0),e=(0,p.set)(e,"slides",[]);break;case"sessionEnd/SLIDE_HIDDEN":"nativeAd"===t.slide.type&&e.nativeAd&&(e=(0,p.set)(e,"nativeAd",X(e.nativeAd,t.timestamp)));break;case"sessionEnd/SLIDE_SHOWN":"nativeAd"===t.slide.type?e=(0,p.set)(e,"nativeAd",{slide:t.slide,status:"pending",time:[...null!==(n=null===(s=e.nativeAd)||void 0===s?void 0:s.time)&&void 0!==n?n:[],[t.timestamp]],tracking:t.tracking}):(r>-1&&(e=(0,p.setIn)(e,["slides",r,"status"],"can-track"),e=(0,p.setIn)(e,["slides",r],X(e.slides[r],t.timestamp))),e=(0,p.set)(e,"slides",[...e.slides,{slide:t.slide,status:"pending",time:[[t.timestamp]],tracking:t.tracking}]));break;case"sessionEnd/TRACKED":e.nativeAd&&t.slides.some((e=>"nativeAd"===e.type))&&(e=(0,p.setIn)(e,["nativeAd","status"],"tracked")),e.slides.forEach(((a,s)=>{t.slides.includes(a.slide)&&(e=(0,p.setIn)(e,["slides",s,"status"],"tracked"))}))}return e},skills:(e=(0,p.from)({}),t)=>{switch(t.type){case"UPDATE_USER":{const{currentCourse:a}=t.user;if(a){const{fromLanguage:t,learningLanguage:s,skills:n}=a,r=n;e=g.Ry(r.map(((e,a)=>e.map((e=>[e.id,Object.assign(Object.assign({accessible:!1,decayed:!1,finishedLessons:0,finishedLevels:0,indicatingNewContent:!1,levels:0,strength:0},e),{fromLanguage:t,learningLanguage:s,row:a,urlName:encodeURIComponent(e.urlName)})])))).flat())}break}}return e},stories:ee.I,student:(e=(0,p.from)({classrooms:[],sessionActivities:[]}),t)=>{switch(t.type){case"JOIN_CLASSROOM":if(-1!==e.classrooms.findIndex((e=>e.classroom_id===t.classroom.classroom_id)))break;e=(0,p.set)(e,"classrooms",[...e.classrooms,t.classroom]);break;case"LEAVE_CLASSROOM":e=(0,p.set)(e,"classrooms",e.classrooms.filter((e=>e.classroom_id!==t.classroomId)));break;case"UPDATE_CLASSROOMS":e=(0,p.set)(e,"classrooms",t.classrooms);break;case"UPDATE_SESSION_ACTIVITIES":e=(0,p.set)(e,"sessionActivities",t.sessionActivities)}return e},subscriptions:(e=(0,p.from)({}),t)=>{switch(t.type){case"SET_SUBSCRIPTIONS":e=(0,p.from)(t.subscriptions);break;case"ADD_SUBSCRIPTION":e=(0,p.set)(e,`${t.followedUser.id}`,t.followedUser);break;case"REMOVE_SUBSCRIPTION":{const a=g.XP(e).filter((e=>e!==`${t.userId}`)).map((t=>e[t]));e=(0,p.from)(g.HK(a,"id"));break}}return e},ui:(e=ae,t)=>{var a;switch(t.type){case"APP_OFFSET":e=(0,p.set)(e,"appOffset",t.value);break;case"CAN_SHOW_HOME_MESSAGE":if(t.name&&(!0===e.canShowHomeMessage||Array.isArray(e.canShowHomeMessage)&&e.canShowHomeMessage.includes(t.name)))break;e=(0,p.set)(e,"canShowHomeMessage",!t.name||(Array.isArray(e.canShowHomeMessage)?[...e.canShowHomeMessage,t.name]:[t.name]));break;case"COME_ONLINE":e=(0,p.set)(e,"online",!0);break;case"CREATE_HOME_MESSAGE":switch(t.name){case"marketingOptIn":case"plusBadge":case"plusBadgeFamily":e=(0,p.setIn)(e,["homeMessagingClientState",t.name],!0);break;case"schoolsJoinedClassroom":e=(0,p.setIn)(e,["homeMessagingClientState",t.name],{observerName:t.observerName})}break;case"DIMMED_OVERLAY_CLOSED":e=(0,p.set)(e,"isDimmedOverlayOpen",!1);break;case"DIMMED_OVERLAY_OPENED":e=(0,p.set)(e,"isDimmedOverlayOpen",!0);break;case"DISABLE_HOME_MESSAGE":case"DISMISS_HOME_MESSAGE":"DISMISS_HOME_MESSAGE"===t.type&&("dogfoodingPreview"!==t.name&&(e=(0,p.set)(e,"canShowHomeMessage",!1)),e=(0,p.set)(e,"homeMessage",void 0),e=(0,p.set)(e,"homeMessageData",void 0)),e=(0,p.setIn)(e,["homeMessagingClientState",t.name],void 0);break;case"ENGAGEMENT_OVERRIDE":e=(0,p.set)(e,"engagementOverride",t.value);break;case"GO_OFFLINE":e=(0,p.set)(e,"online",!1);break;case"LOGOUT":e=(0,p.set)(e,"isLoggingOut",!0);break;case"MICROPHONE_PERMISSION":e=(0,p.set)(e,"microphonePermission",t.value);break;case"MODAL_CLOSED":e=(0,p.set)(e,"isModalReallyOpen",!1);break;case"MODAL_MOUNTED":e=(0,p.set)(e,"availableModals",[...e.availableModals,t.name]);break;case"MODAL_OPENED":e=(0,p.set)(e,"isModalReallyOpen",!0);break;case"MODAL_UNMOUNTED":(null===(a=(e=(0,p.set)(e,"availableModals",e.availableModals.filter((e=>e!==t.name)))).modal)||void 0===a?void 0:a.name)===t.name&&(e=(0,p.set)(e,"modal",void 0),e=(0,p.set)(e,"modalIsUhmManaged",!1),e=(0,p.set)(e,"isModalReallyOpen",!1));break;case"HOME_MESSAGE_MEETS_TIME_CRITERION":e=(0,p.setIn)(e,["homeMessagingClientState",t.name],!0);break;case"PURCHASE_ITEM":switch(t.status){case"FAIL":case"SUCCESS":e=(0,p.set)(e,"purchasingItem",!1);break;case"START":e=(0,p.set)(e,"purchasingItem",!0)}break;case"RESIZE_WINDOW":e=(0,p.merge)(e,{viewportHeight:t.height,viewportWidth:t.width});break;case"SET_CAN_SHOW_AGE_RESTRICTED_LEADERBOARDS_INTRO":e=(0,p.set)(e,"canShowAgeRestrictedLeaderboardsIntro",t.isEligible);break;case"SET_HOME_MESSAGE":e=(0,p.set)(e,"homeMessage",t.name),e=(0,p.set)(e,"homeMessageData",t.data);break;case"SET_POPOVER":e=(0,p.merge)(e,{popoverId:t.id});break;case"SET_HOME_PAGE_POPOVER":e=(0,p.merge)(e,{homePagePopoverId:void 0!==t.id&&void 0!==t.section?`${t.section}/${t.id}`:void 0});break;case"SET_SELECTED_PATH_SECTION":e=(0,p.set)(e,"selectedPathSectionType",t.selectedPathSectionType);break;case"SET_SHOULD_RETURN_TO_SECTIONS":e=(0,p.set)(e,"shouldReturnToSections",t.shouldReturnToSections);break;case"SET_SPOTLIGHT_FOR_MODAL":e=(0,p.set)(e,"spotlightType",t.spotlightType);break;case"SET_STREAK_SOCIETY_INDUCTION_STATE":e=(0,p.set)(e,"inductedIntoStreakSociety",t.inductedIntoStreakSociety);break;case"SET_VISIBLE_UNIT_INDEX":e=(0,p.set)(e,"visibleUnitIndex",t.index);break;case"RECORDED_SESSION":e=(0,p.setIn)(e,["homeMessagingClientState","resurrectedWelcome"],void 0),e=(0,p.setIn)(e,["homeMessagingClientState","reactivatedWelcome"],void 0);break;case"SWITCH_COURSE":e=(0,p.set)(e,"isSwitchingCourse",!0);break;case"SWITCH_COURSE_END":e=(0,p.set)(e,"isSwitchingCourse",!1);break;case"TOGGLE_DRAWER":t.options?(e=(0,p.merge)(e,{drawer:t.options,drawerIsUhmManaged:!0===t.isUhmManaged,secondaryModal:void 0,spotlightType:t.options.spotlightType,toast:void 0,toastIsUhmManaged:!1}),t.keepFullscreenModal||(e=(0,p.merge)(e,{modal:void 0,modalIsUhmManaged:!1}))):e=(0,p.merge)(e,{drawer:void 0,drawerIsUhmManaged:!1,spotlightType:void 0});break;case"TOGGLE_MODAL":if(t.options){if(!e.availableModals.includes(t.options.name)&&t.options.name!==te.t.HomeMessage)break;if(!1===t.replaceExisting&&e.modal)break;e=(0,p.merge)(e,{drawer:void 0,drawerIsUhmManaged:!1,modal:t.options,modalIsUhmManaged:!0===t.isUhmManaged,modalShouldWaitForOverlay:!e.isDimmedOverlayOpen,secondaryModal:void 0,spotlightType:t.options.spotlightType,toast:void 0,toastIsUhmManaged:!1})}else e=(0,p.merge)(e,{modal:void 0,modalIsUhmManaged:!1,secondaryModal:void 0,spotlightType:void 0});break;case"TOGGLE_SECONDARY_MODAL":if(void 0===t.options){e=(0,p.merge)(e,{secondaryModal:void 0});break}if(!e.availableModals.includes(t.options.name))break;e=(0,p.merge)(e,{drawer:void 0,drawerIsUhmManaged:!1,isDimmedOverlayOpen:!1,secondaryModal:t.options});break;case"TOGGLE_REQUEST_NOTIFICATION_PERMISSION":e=(0,p.set)(e,"isRequestingNotificationPermission",t.isVisible);break;case"TOGGLE_TOAST":e=t.options?(0,p.merge)(e,{drawer:void 0,drawerIsUhmManaged:!1,modal:void 0,modalIsUhmManaged:!1,toast:t.options,toastIsUhmManaged:!0===t.isUhmManaged}):(0,p.merge)(e,{toast:void 0,toastIsUhmManaged:!1});break;case"SET_SHOP_ITEMS":e=(0,p.set)(e,"isShopItemsFresh",!0);break;case"UNMOUNT":e=(0,p.set)(e,"shouldUnmount",!0);break;case"UPDATE_B2B_PRICING_DATA":e=(0,p.set)(e,"b2bPricingData",t.b2bPricingData);break;case"UPDATE_INVENTORY":e=(0,p.set)(e,"isInventoryFresh",!0);break;case"UPDATE_USER":e=(0,p.set)(e,"isUserModelFresh",!0)}return e},uiPersisted:(e=(0,p.from)({homeMessagingClientState:{},plusBannerShown:{count:0},reportedProfileUserIds:[],sessionEndPlusAdShown:{count:0}}),t)=>{var a,s,n,r,i,o,l,c,d,u,g,m,h,_,v;switch(t.type){case"CREATE_HOME_MESSAGE":se(t.name)&&(e=(0,p.setIn)(e,["homeMessagingClientState",t.name],!0));break;case"CREATE_STREAK_REPAIRED_HOME_MESSAGE":e=(0,p.setIn)(e,["homeMessagingClientState","streakRepairApplied"],{expirationTime:(0,w.mm)(),length:t.length});break;case"DISABLE_HOME_MESSAGE":switch(t.name){case"darkMode":e=(0,p.setIn)(e,["homeMessagingClientState",t.name,"dontShow"],!0);break;case"streakRepairApplied":e=(0,p.setIn)(e,["homeMessagingClientState",t.name],void 0)}break;case"DISMISS_HOME_MESSAGE":if(se(t.name))e=(0,p.setIn)(e,["homeMessagingClientState",t.name],!1);else switch(t.name){case"darkMode":e=(0,p.setIn)(e,["homeMessagingClientState",t.name,"dontShow"],!0);break;case"reactivatedWelcome":case"resurrectedWelcome":e=(0,p.setIn)(e,["homeMessagingClientState",t.name,"lastClosed"],t.timestamp);break;case"streakRepairApplied":e=(0,p.setIn)(e,["homeMessagingClientState",t.name],void 0)}break;case"HOME_MESSAGE_SHOWN":switch(t.name){case"mobileWebToAppConversion":case"pathChange":case"pathMigration":e=(0,p.setIn)(e,["homeMessagingClientState",t.name,"lastShown"],t.timestamp);break;case"streakFreezeRecurringOffer":case"webToAppConversion":case"webToAppConversionAggressive":{const a="webToAppConversionAggressive"===t.name?"webToAppConversion":t.name;e=(0,p.setIn)(e,["homeMessagingClientState",a,"lastShown"],t.timestamp),e=(0,p.updateIn)(e,["homeMessagingClientState",a,"shows"],(e=>(null!=e?e:0)+1));break}}"sidebar"===t.uiType&&e.sidebarHomeMessage&&(e=(0,p.setIn)(e,["sidebarHomeMessage","count"],e.sidebarHomeMessage.count+1),e=(0,p.setIn)(e,["sidebarHomeMessage","timestamp"],t.timestamp));break;case"PURCHASE_ITEM":"SUCCESS"===t.status&&"streak_freeze"===t.item.itemName&&(e=(0,p.setIn)(e,["homeMessagingClientState","streakFreezeRecurringOffer"],{shows:0}));break;case"UPDATE_USER":(null===(a=t.user.streakData)||void 0===a?void 0:a.currentStreak)&&t.user.streakData.currentStreak.length<3&&(e=(0,p.setIn)(e,["homeMessagingClientState","streakFreezeRecurringOffer"],{shows:0}));break;case"USED_TYPE_TO_SELECT_TOKEN":e=(0,p.setIn)(e,["typeToSelect","used"],!0);break;case"SET_LEADERBOARD_POSITION_STATE":e=(0,p.set)(e,"leaderboardPositionState",t.leaderboardPositionState);break;case"PLUS_BANNER_SHOWN":e=(0,p.set)(e,"plusBannerShown",{count:(null!==(n=null===(s=e.plusBannerShown)||void 0===s?void 0:s.count)&&void 0!==n?n:0)+1,lastShown:t.timestamp});break;case"SAVE_REPORTED_PROFILE_USER_ID":{const a=null!==(r=e.reportedProfileUserIds)&&void 0!==r?r:[];e=(0,p.set)(e,"reportedProfileUserIds",[t.profileUserId,...a.slice(0,32)]);break}case"SESSION_END_PLUS_AD_SHOWN":e=(0,p.set)(e,"sessionEndPlusAdShown",{count:(null!==(o=null===(i=e.sessionEndPlusAdShown)||void 0===i?void 0:i.count)&&void 0!==o?o:0)+1,lastShown:t.timestamp});break;case"SET_STREAK_SOCIETY_REWARD_AVAILABLE":e=(0,p.set)(e,"streakSocietyNewRewardAvailable",t.newRewardAvailable);break;case"SET_STREAK_SOCIETY_SHOW_RED_DOT":e=(0,p.set)(e,"streakSocietyShowRedDot",t.showRedDot);break;case"STREAK_NUDGE_SHOWN":e=(0,p.set)(e,"streakNudgeShown",{count:t.resurrectionTimestamp===(null===(l=e.streakNudgeShown)||void 0===l?void 0:l.resurrectionTimestamp)?(null!==(d=null===(c=e.streakNudgeShown)||void 0===c?void 0:c.count)&&void 0!==d?d:0)+1:1,lastShown:t.timestamp,resurrectionTimestamp:t.resurrectionTimestamp});break;case"SUPER_PREVIEW_ENDING_CALLOUT_SHOWN":e=(0,p.setIn)(e,["homeMessagingClientState","superPreviewEndingCallout"],{lastShown:t.shownTimestampInMs,lastShownPurchaseId:t.superPreviewPurchaseId});break;case"SUPER_VIDEO_PROMO_SHOWN":e=(0,p.set)(e,"superVideoPromoShown",{count:(null!==(g=null===(u=e.superVideoPromoShown)||void 0===u?void 0:u.count)&&void 0!==g?g:0)+1,hasSeenFamilyPlan:null!==(h=t.isFamilyPlan||(null===(m=e.superVideoPromoShown)||void 0===m?void 0:m.hasSeenFamilyPlan))&&void 0!==h&&h,hasSeenNewYears:null!==(v=t.isNewYears||(null===(_=e.superVideoPromoShown)||void 0===_?void 0:_.hasSeenNewYears))&&void 0!==v&&v,lastShownTimestamp:t.timestamp});break;case"TOGGLE_DRAWER":case"TOGGLE_MODAL":t.options&&t.isUhmManaged&&(e=(0,p.set)(e,"sidebarHomeMessage",void 0));break;case"TOGGLE_SIDEBAR_HOME_MESSAGE":e=t.messageName?(0,p.set)(e,"sidebarHomeMessage",{count:0,lastShown:void 0,messageName:t.messageName}):(0,p.set)(e,"sidebarHomeMessage",void 0)}return e},user:(e=(0,p.from)({coachRecords:{},explanationsSeen:{},gemsConfig:{gems:0,gemsPerSkill:0,useGems:!1},lingots:0,recentlySeenSmartTips:{},sessionsCompleted:0,streakData:{currentStreak:null,previousStreak:null}}),t)=>{var a,s,n,r,i,o,l,c,d,u,m;switch(t.type){case"MARK_NOTIFICATIONS_READ":e=(0,p.set)(e,"webNotificationIds",[]);break;case"DISABLE_HOME_MESSAGE":case"DISMISS_HOME_MESSAGE":ne.Qd[t.name]?e=(0,p.set)(e,"persistentNotifications",g.zu(e.persistentNotifications,ne.Qd[t.name])):("streakRepairOffer"===t.name&&(e=(0,p.set)(e,"streakRepairOffer",void 0)),"DISMISS_HOME_MESSAGE"===t.type&&"immersivePlusPromo"===t.name&&(e=(0,p.set)(e,"premiumExpirationTimestampSeconds",void 0)));break;case"ACTIVATE_SUPER":e=(0,p.set)(e,"premiumExpirationTimestampSeconds",t.premiumExpirationTimestampSeconds);break;case"ADD_SUPER_DISCOUNT":e=(0,p.setIn)(e,["plusDiscounts"],[ie(t.apiDiscount),...e.plusDiscounts]);break;case"REMOVE_SUPER_DISCOUNT":e=(0,p.setIn)(e,["plusDiscounts"],e.plusDiscounts.filter((e=>e.discountType!==t.discountType)));break;case"EXPLANATION_SHOWN":e=(0,p.setIn)(e,["explanationsSeen",t.explanationSkillId],t.timestamp);break;case"PURCHASE_ITEM":if("SUCCESS"!==t.status)break;e=e.gemsConfig.useGems?(0,p.setIn)(e,["gemsConfig","gems"],e.gemsConfig.gems-t.item.purchasePrice*(null!==(a=t.purchaseQuantity)&&void 0!==a?a:1)):(0,p.set)(e,"lingots",e.lingots-t.item.purchasePrice*(null!==(s=t.purchaseQuantity)&&void 0!==s?s:1));break;case"SET_STREAK_GOAL":e=(0,p.set)(e,"selectedStreakGoal",t.streakGoal);break;case"UPDATE_EXPERIMENT_RECORD":{const a=e.experiments[t.name];a&&(e=(0,v.$f)(e,["experiments",t.name],{condition:null!==(n=t.condition)&&void 0!==n?n:a.condition,contexts:t.context&&!a.contexts.includes(t.context)?[...a.contexts,t.context].sort():a.contexts,treated:t.treated}));break}case"REFRESH_PRACTICE_HUB":e=(0,v.$f)(e,["practiceHubInfo",t.courseId],t.practiceHubCourseInfo);break;case"COMPLETE_PRACTICE_HUB_FEATURED_STORY":e=(0,p.setIn)(e,["practiceHubInfo",t.courseId,"featuredStory","completed"],!0);break;case"COMPLETE_PRACTICE_HUB_SESSION":if(void 0===(null===(r=e.practiceHubInfo)||void 0===r?void 0:r[t.courseId]))throw Error("Tried to update practice hub session completion status in redux without practice hub data.");e=(0,p.setIn)(e,["practiceHubInfo",t.courseId,"sessions",t.sessionName,"completed"],!0);break;case"FAMILY_PLAN_REPORT_VISITED":e=(0,p.set)(e,"familyPlanWeeklyReportLastVisited",t.timestamp);break;case"MISTAKES_VISITED":if(void 0===(null===(i=e.practiceHubInfo)||void 0===i?void 0:i[t.courseId]))throw Error("Tried to update mistakes visited timestamp in redux without practice hub course info.");e=(0,p.setIn)(e,["practiceHubInfo",t.courseId,"timestampMistakesLastVisited"],t.timestamp);break;case"PRACTICE_HUB_VISITED":if(void 0===(null===(o=e.practiceHubInfo)||void 0===o?void 0:o[t.courseId]))throw Error("Tried to update practice hub tab visited timestamp in redux without practice hub course info.");e=(0,p.setIn)(e,["practiceHubInfo",t.courseId,"timestampTabLastVisited"],t.timestamp);break;case"RECORDED_SESSION":e=(0,p.set)(e,"lastSessionFinished",t.timestamp/1e3),e=(0,p.set)(e,"sessionCount",e.sessionCount+1),e=(0,p.set)(e,"sessionsCompleted",e.sessionsCompleted+1);break;case"UPDATE_USER_LINGOTS":e=(0,p.setIn)(e,["lingots"],e.lingots+t.lingots);break;case"UPDATE_USER_GEMS":e=(0,p.setIn)(e,["gemsConfig","gems"],e.gemsConfig.gems+t.gems);break;case"CONSUME_DAILY_GOAL_REWARD":{const t=(0,p.asMutable)(e.rewardBundles).map((e=>"DAILY_GOAL_DOUBLE"===e.rewardBundleType?(0,p.updateIn)(e,["rewards",0,"consumed"],(()=>!0)):e));e=(0,p.set)(e,"rewardBundles",t);break}case"CONSUME_DAILY_QUEST_REWARD":{const a=e.rewardBundles.map((e=>{const a=e.rewards.map((e=>e.id===t.rewardId?Object.assign(Object.assign({},e),{consumed:!0}):e));return Object.assign(Object.assign({},e),{rewards:a})}));e=(0,p.set)(e,"rewardBundles",a);break}case"CONSUME_FRIENDS_QUEST_GEMS":{const t=(0,p.asMutable)(e.rewardBundles).map((e=>"FRIENDS_QUEST_GEMS"===e.rewardBundleType?(0,p.setIn)(e,["rewards",0,"consumed"],!0):e));e=(0,p.set)(e,"rewardBundles",t);break}case"CONSUME_FRIENDS_QUEST_XP_BOOST":{const t=(0,p.asMutable)(e.rewardBundles).map((e=>"FRIENDS_QUEST_XP_BOOST"===e.rewardBundleType?(0,p.setIn)(e,["rewards",0,"consumed"],!0):e));e=(0,p.set)(e,"rewardBundles",t);break}case"COACH_DUO_SHOWN":{const a=t.model.showReason,s=null===(l=e.coachRecords)||void 0===l?void 0:l[a],n=void 0===s?0:(0,w.zk)((0,w.zM)(s.lastShown))?s.timesShownToday:0,r={lastShown:t.timestamp/1e3,timesShownToday:n+1};e=(0,p.setIn)(e,["coachRecords",a],r);break}case"RESET_COACH":e=(0,p.set)(e,"coachRecords",{});break;case"SET_MISTAKE_COUNT":(void 0===e.mistakeCountInfo||void 0===t.mistakeCountInfo||t.mistakeCountInfo.expirationTime>e.mistakeCountInfo.expirationTime)&&(e=(0,p.set)(e,"mistakeCountInfo",t.mistakeCountInfo));break;case"SET_SMART_TIP_TO_SHOW":{const a=Object.assign({},e.recentlySeenSmartTips);g.XP(a).forEach((e=>{a[e]<t.timestamp&&delete a[e]})),e=(0,p.set)(e,"recentlySeenSmartTips",a);const s=t.smartTipResource,n=(0,re.r8)(s),r=t.timestamp+(null!==(c=s.policy.minimumTimeBetweenShows)&&void 0!==c?c:re.U);e=(0,p.setIn)(e,["recentlySeenSmartTips",n],r);break}case"SET_SHOULD_TRACK_FIRST_PATH":e=(0,p.set)(e,"shouldTrackSeeFirstPath",!0);break;case"RESET_SHOULD_TRACK_FIRST_PATH":e=(0,p.set)(e,"shouldTrackSeeFirstPath",void 0);break;case"LEAVE_CLASSROOM":e=(0,p.set)(e,"classroomLeaderboardsEnabled",!1);break;case"SET_XP_SUMMARIES":e=(0,p.set)(e,"xpSummaries",t.xpSummaries);break;case"UPDATE_USER":{const a=t.user,{currentCourse:s,courses:n,health:r,plusDiscounts:i}=a,o=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(a,["currentCourse","courses","health","plusDiscounts"]),l=(0,v.Xh)(o);if(n&&(l.courses=n.map((e=>e.id))),s&&(l.currentCourseId=s.id),i){const t=Date.now();l.plusDiscounts=[...null!==(u=null===(d=e.plusDiscounts)||void 0===d?void 0:d.filter((e=>e.expirationTime>t&&(0,I.gB)(e.discountType,O.y1))))&&void 0!==u?u:[],...i.map((e=>ie(e)))]}(null===(m=l.lastStreak)||void 0===m?void 0:m.isAvailableForRepair)&&!(null==e?void 0:e.streakRepairOffer)?l.streakRepairOffer={expirationTime:(0,w.HR)(172800),length:l.lastStreak.length}:l.lastStreak&&!l.lastStreak.isAvailableForRepair&&(l.streakRepairOffer=void 0),e=((e,t)=>{for(const[a,s]of Object.entries(t)){const t="object"==typeof s&&null!=s&&!Array.isArray(s)&&void 0!==e[a]&&oe(a)?(0,p.merge)(e[a],s,{deep:!0}):s;e=(0,p.set)(e,a,t)}return e})(e,l),l.adsConfig&&(e=(0,p.set)(e,"adsConfig",l.adsConfig));break}}return e}});var de=a(78841),ue=a(54412),pe=a(80388),ge=a(50548),me=a(53229),he=a(2407),_e=a(60106);const ve=he.cn;let fe;var Se=a(89803),Ee=a(71371),ye=a(12301),be=a(88868),we=a(3800),Ie=a(20028);let Te;we.h&&console.log("Showing only plain info"),document.documentElement.lang=window.duo.uiLanguage,"true"!==(0,ue.ej)(ue.Vj.RedirectToPreview)||window.location.host===be.Vb||window.location.host===be.a_||b.NY()||(0,be.Zs)((0,be.gg)(window.location.href),!0),["join.duolingo.com","www-internal.duolingo.com"].includes(window.location.host)&&(0,be.Zs)(window.location.href.replace(window.location.host,be.Z2));try{Te=(0,J.Jb)()}catch(e){}ye.q.initialize((()=>({jotai:{},redux:(0,le.Gl)()})),(e=>void 0===Te?"No user credentials found":e.redux.user.id!==Te?"User credentials mismatch":void 0));const ke=(0,le.xC)({persister:ye.q.bindSubstate("redux"),rootReducer:(e=(0,le.Gl)(),t)=>("RESET_STATE"===t.type&&(e=(0,le.Gl)()),ce(e,t))});(({persister:e,reduxStore:t})=>{var a;if(void 0!==fe)throw Error("configureGlobalStore called twice");const s=(0,he.MT)(),n=ve(t.getState());t.subscribe((()=>{s.set(n,t.getState())}));const r=new _e.Z(null!==(a=e.get())&&void 0!==a?a:{});r.subscribe((()=>{e.set((()=>r.getAll()))})),fe={persister:r,reduxAtom:n,store:s}})({persister:ye.q.bindSubstate("jotai"),reduxStore:ke}),(0,Ie.Go)(ke.getState().user)&&b.R(),(()=>{const e=(0,ue.ej)(ue.Vj.JWT);e&&((0,ue.nJ)(ue.Vj.JWT),(0,ue.d8)(ue.Vj.JWT,e,!0,!(0,pe.J9)()))})(),(0,Se.vi)();const Ce=["/","/learn"].includes(window.location.pathname);if(Te)console.log("User is logged in"),Ce&&Ee.Z.start("splash_to_home");else{console.log("User is not logged in"),Ce&&Ee.Z.start("splash_to_intro");const e=(0,ue.ej)(ue.Vj.LoggedOutUUID);e&&r.XZ(e),(0,i.dl)()}const Re=(0,me.Lm)();r.d6(Re)&&r.Cm(Re),r.j("app_open",{}),r.Bf({activity_trigger:"app_foregrounded"}),(0,ue.ej)(ue.Vj.ShouldTrackWelcome)&&(r.j("welcome",{}),(0,ue.nJ)(ue.Vj.ShouldTrackWelcome)),(0,l.render)(o.createElement(d.zt,{store:ke},o.createElement(u.F0,{history:ge.m8},o.createElement(c.B6,null,o.createElement(de.xq,null)))),document.getElementById("root"))},78841:(e,t,a)=>{"use strict";a.d(t,{xq:()=>Xr,vH:()=>Cr,HL:()=>Qs,dr:()=>kr});var s=a(27378),n=a(3620),r=a(40412),i=a(61714),o=a(80254),l=a(3583),c=a(79129),d=a(85207),u=a(59073),p=a(59815),g=a(51158),m=a(11908),h=a(18804),_=a(79465);class v extends s.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}async componentDidCatch(e,t){if(console.warn("RedirectingErrorBoundary caught an error"),!(0,p.Wp)(e)){const a=(0,g.vU)(e,{data:Object.assign(Object.assign({},t),{isFromRedirectingErrorBoundary:!0})});await(0,_.j)("app_crash",{crash_message:e.message,crash_type:e.name,rollbar_uuid:null==a?void 0:a.uuid},!1)}(0,p.Wp)(e)||((0,m.cl)(m.Qt.State),this.props.dispatch({type:"UNMOUNT"}))}render(){return this.state.hasError?null:this.props.children}}const f=e=>{const t=(0,h.tX)();return s.createElement(v,Object.assign({dispatch:t},e))};var S=a(62183),E=a(51900),y=a(36011);const b=e=>{switch(e){case"heartsInSession":return 40;case"gemsInHomepage":return 30;default:return 0}},w=({spotlightType:e})=>{const t=s.useContext(y.Mk),[a,n]=s.useState(),r=s.useCallback((()=>{const a=(()=>{var a,s,n,r;switch(e){case"heartsInSession":return null===(s=null===(a=null==t?void 0:t.getHeartsStatInLessonRef)||void 0===a?void 0:a.call(t))||void 0===s?void 0:s.getBoundingClientRect();case"gemsInHomepage":return null===(r=null===(n=null==t?void 0:t.getGemsHomepageRef)||void 0===n?void 0:n.call(t))||void 0===r?void 0:r.getBoundingClientRect();default:return}})();if(a)return{cx:a.x+a.width/2,cy:a.y+a.height/2,height:window.innerHeight,r:Math.max(a.width,a.height)/2+b(e),width:window.innerWidth}}),[e,t]),i=s.useCallback((()=>{n(r())}),[n,r]);return s.useLayoutEffect((()=>{n(r())}),[]),s.useEffect((()=>(null==t||t.addCallback(e,r),()=>{null==t||t.removeCallback(e,r)})),[r,t,e]),s.useEffect((()=>(window.addEventListener("resize",i),()=>window.removeEventListener("resize",i))),[i]),void 0===a?s.createElement(E.Z,null):s.createElement(S.Z,Object.assign({direction:"down",isVisible:!0,zIndex:300},a))};var I=a(17818),T=a(50548),k=a(88868);const C=()=>{const e=(0,T.k6)(),t=(0,T.TH)(),a=s.useRef(),n=[k.B6,"/leaderboard"].includes(t.pathname)?"manual":"auto";return s.useLayoutEffect((()=>{window.history.scrollRestoration=n}),[n]),s.useLayoutEffect((()=>{if(t.pathname!==a.current){const a=[k.B6,"/leaderboard"].includes(t.pathname),s="POP"===e.action;a||s||I.O.scrollTo(0,0)}a.current=t.pathname})),null};var R=a(44451),O=a(77167),L=a(80388),P=a(17135);const A=e=>{const t=(0,h.tX)(),a=(0,h.Fx)((t=>t.brb[e].ignoreUntil)),n=(0,h.Fx)((t=>t.brb[e].resetAt)),r=(0,h.Fx)((t=>t.brb[e].status)),i=s.useRef(),l=s.useRef(r);i.current=async s=>{if(void 0!==a&&Date.now()<a)return;if("enabled"===r&&"visible"!==document.visibilityState)return;const i=(0,L.J9)()||(0,m.rV)(m.Qt.DisableBigRedButton)?"disabled":"brb"===e?await O.bG.getBrbStatus():await O.bG.getZombieStatus();s.aborted||(r!==i?"enabled"===i?(console.warn(`Enabling ${"brb"===e?"maintenance":"Zombie"} mode.`),t({mode:e,resetAt:Date.now()+1e3*(0,P.dz)({hours:5,minutes:o.MX(0,5)}),type:"brb/ENABLED"})):(console.warn(`Disabling ${"brb"===e?"maintenance":"Zombie"} mode.`),t({mode:e,type:"brb/DISABLED"})):void 0!==n&&Date.now()>=n&&(console.warn(`Disabling ${"brb"===e?"maintenance":"Zombie"} mode automatically after 5 hours.`),t({ignoreUntil:Date.now()+1e3*(0,P.dz)({hours:12}),mode:e,type:"brb/IGNORED"})))},l.current=r,s.useEffect((()=>{const e=new AbortController,t=e.signal,a=async()=>{var e;t.aborted||(await(null===(e=i.current)||void 0===e?void 0:e.call(i,t)),setTimeout(a,1e3*o.MX(30,"enabled"===l.current?300:60)))};return a(),()=>e.abort()}),[])};var N=a(58034),D=a(42659),x=a(39852),M=a(16086);var F=a(15746),U=a(88787);var H=a(27429);let j=Date.now();const G=3e5,B=["mousedown","keydown","touchstart"];var V=a(50791),z=a(15879),Z=a(94144);var $=a(83063),q=a(25011);var W=a(8654),Q=a(35160);const Y=()=>s.createElement(q.Z,{className:"_2fUdB",closeStyle:"hidden",customStyle:Q.W.Custom,modalName:Q.t.ChangeUiLanguage},(({onDismiss:e,modalOptions:{languageName:t,onSwitchLanguage:a}})=>s.createElement(s.Fragment,null,s.createElement("div",{className:"_31Q1X"},(0,W._i)(18428,{language_name:t})),s.createElement("div",{className:"_3-cmG"},(0,W._i)(21141,{language_name:t})),s.createElement($.Z,{className:"c_t7A",color:"macaw",onClick:()=>{e(),a()},variant:"solid"},(0,W._i)(30820,{language_name:t})),s.createElement($.Z,{className:"ee1sn",color:"macaw",onClick:e,variant:"text"},(0,W._i)(23427)))));var J=a(15094),K=a(47725),X=a(43670),ee=a(60042),te=a.n(ee),ae=a(31542),se=a(99021),ne=a(29531),re=a(44629),ie=a(52761);var oe=a(88528),le=a(30033);const ce=({[le.m5]:e,autoComplete:t,autoFocus:a,disabled:n,error:r,linkComponent:i,onBlur:o,onChange:l,onResetError:c,placeholder:d,suggestedUsernames:u,tooltip:p,type:g,value:m})=>{const h=s.useRef(null),[v,f]=s.useState(!1),S=(0,ne.f)();return s.useEffect((()=>{var e;a&&(null===(e=h.current)||void 0===e||e.focus())}),[]),s.createElement(se.Z,Object.assign({},(0,le._q)(e),{autoComplete:t,className:te()("_3MNft",_.qE),disabled:n,error:void 0!==r,helperText:null!=r?r:p,iconRef:S.setElementRef,linkComponent:i,onBlur:o,onChange:e=>l(e.target.value),placeholder:d,ref:h,renderIcon:(e,t)=>"error"===t||"info"===t?s.createElement(re.Z,{className:"_2mhcq",isOpen:v,onClose:()=>f(!1),onOpen:()=>f(!0),onToggle:()=>f(!v),popoverState:S.props.state,tabIndex:-1},e,v?(0,ae.createPortal)(s.createElement(ie.Z,{innerClassName:"XYk_i",onRequestClose:()=>f(!1),popperProps:S.props,ref:S.setPopoverRef,stemContainerRef:S.setArrowRef,zIndex:parseInt(oe.Z["z-index-modal"],10)+parseInt(oe.Z["z-index-popover"],10)},"error"===t?u?s.createElement("div",{className:"_2qX0a"},s.createElement("span",{className:"_1vVSc"},r),s.createElement("span",{className:"_3MrO1"},(0,W._i)(22391)),s.createElement("ul",{className:"_3FY0X"},u.map((e=>s.createElement("li",{key:e},s.createElement($.Z,{className:"_3tqFH",onClick:()=>{l(e),null==c||c()},type:"button"},e)))))):r:p),document.getElementById("overlays")):null):e,type:g,value:m}))};var de=a(67173);const ue=({children:e})=>e?s.createElement("div",Object.assign({},(0,le._q)(de.V.InvalidFormField),{className:"_1G8OV _14ezr"}),e):null,pe=({children:e})=>{const t=s.Children.toArray(e).filter((e=>!!e)).map(((e,t)=>s.createElement(ue,{key:t},e)));return t.length?s.createElement("div",{className:"_2pLas _14ezr"},t):null};var ge=a(25132),me=a(14649),he=a(44483);const _e=a.p+"images/ded9ca9461387f30221b67f627227388.svg";var ve=a(90778),fe=a(45437),Se=a(20750),Ee=a(9115),ye=a(13567);const be={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","modal-wrapper":"_3gyBG","right-controls":"_3Kwrp",modal:"_2z95t",table:"_3jeu0","link-container":"_8oBzi","link-container-stacked":"_2Jpfm _8oBzi","account-icon":"_3zB0T",button:"_2oW4v",header:"_2xBMb",title:"_2GC65","signin-error-message":"fJChu","last-login-name":"_2-N6b","blue-link":"_3WxKE _2__FI _1I0jE _3yAjN","blue-link-body":"_24PjM _2__FI _1I0jE _3yAjN","created-with-social-title":"_3SARz _2GC65","created-with-social-body":"_5vH8Z",google:"xijNL _1-mWU",facebook:"_3U3Uo _3kyUU","require-google-button":"_1_jR6 _1-mWU",footer:"_29viM","terms-and-privacy":"_29ZQh","no-account":"_1hKmP","no-account-link":"oRujQ",hr:"_7pBya","hr-bar":"_2_JcM","hr-text":"_36kWA _3yAjN","google-sign-in-up-header":"zKlGX","google-sign-in-up-title":"_2i91r","google-sign-in-up-subtitle":"_2IFvx"};var we=a(17383),Ie=a(70326),Te=a(41679),ke=a(8649),Ce=a(67574),Re=a(67899),Oe=a(53229),Le=a(36914),Pe=a(71371),Ae=a(6986),Ne=a(81621),De=a(20028),xe=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a};const Me=({dispatch:e,errors:t,focusPasswordField:a=!1,identifier:n,onIdentifierChange:r,onPasswordChange:i,password:o,showEmailField:l,submitting:c,via:d})=>s.createElement("div",{className:be.table},l?s.createElement(ce,Object.assign({autoComplete:"email",disabled:!!c,error:t.identifier,onChange:r,placeholder:(0,W.H8)(14299),type:"text",value:n},(0,le._q)(de.V.EmailInput))):null,s.createElement(ce,Object.assign({autoComplete:"current-password",autoFocus:a,disabled:!!c,error:t.password,linkComponent:s.createElement(K.Z,Object.assign({},(0,le._q)(de.V.ForgotPassword),{href:"/forgot_password",onClick:()=>{(0,_.j)("sign_in_tap",{target:"forgot_password",via:d}),e({options:void 0,type:"TOGGLE_MODAL"})},tabIndex:-1}),(0,W._i)(18857)),onChange:i,placeholder:(0,W.H8)(18716),type:"password",value:o},(0,le._q)(de.V.PasswordInput)))),Fe=({age:e,ageRestricted:t,hideAge:a,isUGCDisabled:n,email:r,errors:i,name:o,onAgeBlur:l,onAgeChange:c,onEmailChange:d,onNameChange:u,onPasswordChange:p,onResetError:g,onUsernameBlur:m,onUsernameChange:h,password:_,submitting:v,username:f})=>s.createElement("div",{className:be.table},a?null:s.createElement(ce,Object.assign({disabled:!!v,error:i.age,onBlur:l,onChange:c,placeholder:(0,W.H8)(15038),tooltip:(0,W._i)(19089),type:"text",value:e},(0,le._q)(de.V.AgeInput))),n?null:t?s.createElement(ce,Object.assign({autoComplete:"username",disabled:!!v,error:i.username,onBlur:m,onChange:h,onResetError:g,placeholder:(0,W.H8)(17475),suggestedUsernames:i.suggestedUsernames,type:"text",value:f},(0,le._q)(de.V.UsernameInput))):s.createElement(ce,Object.assign({autoComplete:"name",disabled:!!v,error:i.name,onChange:u,placeholder:(0,W.H8)(6101),type:"text",value:o},(0,le._q)(de.V.FullNameInput))),s.createElement(ce,Object.assign({autoComplete:"email",disabled:!!v,error:i.email,onChange:d,placeholder:t?(0,W.H8)(24103):(0,W.H8)(2928),type:"email",value:r},(0,le._q)(de.V.EmailInput))),s.createElement(ce,Object.assign({autoComplete:"new-password",disabled:!!v,error:i.password,onChange:p,placeholder:(0,W.H8)(18716),type:"password",value:_},(0,le._q)(de.V.PasswordInput)))),Ue=({onClick:e,platform:t,submitting:a})=>s.createElement($.Z,Object.assign({className:be[t],disabled:!1!==a&&a!==t,onClick:"google"===t?void 0:e,submitting:a===t,type:"button",unstyledDisabled:!0,variant:"stroke"},"facebook"===t?(0,le._q)(de.V.LoginWithFacebook):(0,le._q)(de.V.LoginWithGoogle)),s.createElement("img",{className:be["account-icon"],src:"facebook"===t?_e:Se}),(0,W._i)("facebook"===t?17511:11701),"google"===t?s.createElement(ge.Z,{onClick:e}):null),He=e=>{var{errors:t,header:a,lastLoginType:n,name:r="",onFacebookClick:i,onGoogleClick:o,onUseAnotherAccount:l,picture:c=Ne.tU,registerButton:d,signInErrors:u,submitting:p,title:g,via:m}=e,h=xe(e,["errors","header","lastLoginType","name","onFacebookClick","onGoogleClick","onUseAnotherAccount","picture","registerButton","signInErrors","submitting","title","via"]);return s.createElement("div",null,s.createElement("div",null,a?s.createElement("div",{className:be.header},a):null,s.createElement("h1",{className:be.title},g),s.createElement(X.Z,{size:"medium",user:{id:0,name:r,picture:c}}),s.createElement("div",{className:be["last-login-name"]},r),s.createElement("div",Object.assign({},(0,le._q)(de.V.UseAnotherAccount),{className:be["blue-link"],onClick:l}),s.createElement("span",null,(0,W._i)(2745)))),"email"===n?s.createElement("div",null,s.createElement(Me,Object.assign({errors:u?{}:t,showEmailField:!1,submitting:p,via:m},h)),u,d):"social"===n?s.createElement("p",{className:be["link-container-stacked"]},s.createElement(Ue,{onClick:i,platform:"facebook",submitting:p}),s.createElement(Ue,{onClick:o,platform:"google",submitting:p})):null)},je=({isSignIn:e,onGoogleClick:t,renderHeader:a,renderSubtitle:n,renderTitle:r,submitting:i})=>{var o;return s.createElement("div",null,s.createElement("div",{className:be["google-sign-in-up-header"]},void 0===a?null:s.createElement("div",{className:be["google-sign-in-up-header"]},a(e)),s.createElement("h1",{className:be["google-sign-in-up-title"]},null!==(o=null==r?void 0:r(e))&&void 0!==o?o:(0,W._i)(43395)),n?s.createElement("p",{className:be["google-sign-in-up-subtitle"]},n(e)):null),s.createElement($.Z,{className:be["require-google-button"],submitting:"google"===i,type:"button",variant:"stroke"},s.createElement("img",{className:we.Z["account-icon"],src:Se}),s.createElement("span",{className:we.Z["account-text"]},(0,W._i)(1327)),s.createElement(ge.Z,{onClick:t})))},Ge=({name:e,picture:t,platform:a,onFacebookClick:n,onGoogleClick:r,onUseAnotherAccount:i,submitting:o})=>{const l="dark"===(0,J.F)();return s.createElement("div",null,s.createElement("div",null,s.createElement("h1",{className:be["created-with-social-title"]},(0,W._i)("facebook"===a?23083:693)),s.createElement(X.Z,{size:"large",user:{id:0,name:e,picture:t}}),s.createElement("div",{className:be["last-login-name"]},e)),s.createElement("div",{className:be["created-with-social-body"]},s.createElement($.Z,Object.assign({},"facebook"===a?(0,le._q)(de.V.ContinueWithFacebook):(0,le._q)(de.V.ContinueWithGoogle),{className:we.Z[`${a}-solid`],onClick:"facebook"===a?n:void 0,submitting:o===a,type:"button",variant:"solid"}),s.createElement("img",{className:we.Z["account-icon"],src:"facebook"===a?l?ve:fe:l?Ee:ye}),s.createElement("span",{className:we.Z["account-text"]},(0,W._i)("facebook"===a?15620:1327)),"google"===a?s.createElement(ge.Z,{onClick:r}):null),s.createElement("div",{className:be["blue-link-body"],onClick:i},s.createElement("span",null,(0,W._i)(2745)))))},Be=e=>{var t,{errors:a,isFamilyPlan:n,ipCountry:r,isSignIn:i,onFacebookClick:o,onGoogleClick:l,renderHeader:c,renderTitle:d,registerButton:u,signInErrors:p,submitting:g}=e,m=xe(e,["errors","isFamilyPlan","ipCountry","isSignIn","onFacebookClick","onGoogleClick","renderHeader","renderTitle","registerButton","signInErrors","submitting"]);return s.createElement("div",null,void 0===c?null:s.createElement("div",{className:be.header},c(i)),s.createElement("h1",{className:be.title},null!==(t=null==d?void 0:d(i))&&void 0!==t?t:i?(0,W._i)(43395):(0,W._i)(14145)),i?s.createElement(Me,Object.assign({errors:p?{}:a,submitting:g},m)):s.createElement(Fe,Object.assign({errors:a,submitting:g},m)),p,u,!i&&(0,Le.m8)(r)?null:s.createElement(s.Fragment,null,s.createElement("div",{className:be.hr},s.createElement("div",{className:be["hr-bar"]}),s.createElement("div",{className:be["hr-text"]},(0,W._i)(18747)),s.createElement("div",{className:be["hr-bar"]})),s.createElement("p",{className:be["link-container"]},s.createElement(Ue,{onClick:o,platform:"facebook",submitting:g}),s.createElement(Ue,{onClick:l,platform:"google",submitting:g}))))};class Ve extends s.Component{constructor(){super(...arguments),this.state={ageRestricted:!1,alternateView:null,errors:{},fields:{age:"",email:"",identifier:"",name:"",password:"",username:""},isUsernameVerified:!1,loginAttempts:{count:0,emailSent:!1,lastEmailUsed:"",showEmailSentNotification:!1},submitting:!1,useImprovedErrorMessages:!1},this.memoizeUsernameValidate=o.HP(Ie.rV),this.mounted=!1,this.emailSignup=async(e,t)=>{const{dispatch:a,modalOptions:{allowLanguagelessUser:s}}=this.props,{ageRestricted:n}=this.state,r={};if(e.email.trim()||(r.email=(0,W.H8)(11696)),e.password.trim()||(r.password=(0,W.H8)(5030)),t||e.age.trim()||(r.age=(0,W.H8)(15012)),!o.xb(r))return Promise.reject(new Ie.Wj(!1,r));const i=Object.assign(Object.assign({},e),{age:e.age,name:n?null:e.name,username:n?e.username:null});if((0,M.Pc)())try{await a((0,Z.DZ)(i,!1,!0)),this.trackSuccessfulSignUp()}catch(e){this.handleSignUpFail(e)}else{s||(0,g.Kp)("Forced to create languageless user account despite being asked not to.");try{await(0,Ie.$C)(i),await a((0,Z.eY)()),this.trackSuccessfulSignUp()}catch(e){this.handleSignUpFail(e)}}},this.trackSuccessfulSignUp=async()=>{const{dispatch:e,modalOptions:{limitRedirect:t,via:a}}=this.props;(0,_.j)("register",{successful:!0,through:"email",via:a}),(0,Re.SX)({event:"sign_up"}),this.handleGeneralSuccess(!1,t),await e(me._()),await e(he.YC())},this.handleUseAnotherAccount=()=>{const{modalOptions:{via:e}}=this.props;(0,_.j)("sign_in_tap",{target:"use_another_account",via:e}),this.clearAlternateView()},this.handleSignUpFail=e=>{var t,a;const{modalOptions:{via:s}}=this.props;if((0,_.j)("register",{successful:!1,through:"email",via:s}),e instanceof Ie.Wj)throw e;const n=(0,O.IZ)(e)&&(null===(a=null===(t=e.response)||void 0===t?void 0:t.data)||void 0===a?void 0:a.details);throw n?(0,Ie.lV)(n):new Ie.Wj(!1,{})},this.facebookSignup=async()=>{const{dispatch:e,history:t,modalOptions:{allowLanguagelessUser:a,isSignIn:s,limitRedirect:n,redirectPath:r=k.B6,trackingProps:i,via:o}}=this.props;this.setState({errors:{},submitting:"facebook"});try{(0,_.j)(s?"sign_in_tap":"registration_tap",Object.assign({target:"facebook",via:o},i));const l=await(0,Te.k3)({allowLanguagelessUser:a,dispatch:e,history:t,onLoginSuccess:this.handleLoginSuccess,redirectPath:r,via:o});this.handleGeneralSuccess(l,n)}catch(e){this.setState({submitting:!1}),s||this.handleRegisterFailure("facebook")}},this.clearAlternateView=()=>{this.setState({alternateView:null}),(0,Ae.ub)()},this.googleSignup=async()=>{const{dispatch:e,modalOptions:{allowLanguagelessUser:t,isSignIn:a,limitRedirect:s,redirectPath:n=k.B6,trackingProps:r,via:i},history:o}=this.props;this.setState({errors:{},submitting:!1});try{(0,_.j)(a?"sign_in_tap":"registration_tap",Object.assign({target:"google",via:i},r));const l=await(0,Ce.F)({allowLanguagelessUser:t,dispatch:e,history:o,onLoginSuccess:this.handleLoginSuccess,redirectPath:n,setSubmitting:()=>this.setState({submitting:"google"}),via:i});this.handleGeneralSuccess(l,s)}catch(e){this.setState({errors:{social:(0,W.H8)(19737)},submitting:!1,useImprovedErrorMessages:!0}),a||this.handleRegisterFailure("google")}},this.handleAgeChange=()=>{this.setState({ageRestricted:parseInt(this.state.fields.age,10)<this.props.config.ageRestrictionLimit})},this.validateUsername=async()=>{if(!this.state.fields.username||!this.state.ageRestricted)return!0;const e=this.state.fields.username;try{if(await this.memoizeUsernameValidate(e),this.mounted)return this.setState((t=>{if(e===t.fields.username){const e=t.errors,{username:a}=e;return{errors:xe(e,["username"]),isUsernameVerified:!0}}return null})),!0}catch(t){if(t instanceof Ie.Wj)return this.mounted&&this.setState((a=>e===a.fields.username?{errors:t.errorFields,useImprovedErrorMessages:t.useImprovedErrorMessages}:null)),!1;throw t}},this.handleResetUsernameError=()=>{this.setState((e=>{const t=e.errors,{username:a}=t;return{errors:xe(t,["username"]),isUsernameVerified:!0}}))},this.handleFieldChange=(e,t)=>{this.setState((a=>({fields:Object.assign(Object.assign({},a.fields),{[e]:t}),isUsernameVerified:"username"!==e&&a.isUsernameVerified})))},this.handleGeneralSuccess=(e,t)=>{const{history:a,modalOptions:{closeModalOnLogin:s=!0,goBack:n,isSignIn:r}}=this.props;r||(0,_.j)("registration_tap",{}),this.mounted&&!r&&s&&this.finishSignInOrSignUp(),r&&(e||t||a.push("/welcome")),(!e||"no-redirects"!==t&&"no-update"!==t)&&(null==n||n(s?void 0:()=>this.finishSignInOrSignUp()))},this.finishSignInOrSignUp=()=>{const{dispatch:e}=this.props;e({options:void 0,type:"TOGGLE_MODAL"})},this.handleLogin=async e=>{const{dispatch:t,history:a,isOnline:s,modalOptions:{closeModalOnLogin:n=!0,goBack:r,redirectPath:i=k.B6,trackingProps:o,via:l,limitRedirect:c}}=this.props,{alternateView:d}=this.state,u=d&&"welcomeBack"===d.type&&this.prefilledLoginData&&this.prefilledLoginData.email?{identifier:this.prefilledLoginData.email,password:e.password}:e;this.setState({loginAttempts:Object.assign(Object.assign({},this.state.loginAttempts),{showEmailSentNotification:!1})}),await(0,_.j)("sign_in_tap",Object.assign({target:"sign_in",via:l},o));try{await(0,Ie.IS)(u,s),await t((0,Z.eY)({onUserRetrieved:e=>{(0,Ae.oV)("email",e)}})),n&&t({options:void 0,type:"TOGGLE_MODAL"}),c||(0,k.KE)(window.location.pathname)||a.push(i),null==r||r(n?void 0:()=>{t({options:void 0,type:"TOGGLE_MODAL"})})}catch(e){if(s&&u.identifier.trim()){const e=await(0,Ae.gT)(u.identifier);if(e&&(e.hasFacebook||e.hasGoogle)){const t=e.hasGoogle?"google":"facebook";return(0,_.j)("sign_in_load",Object.assign({screen:`sign_in_with_${t}`,via:l},o)),void this.setState({alternateView:{name:e.name,picture:e.picture,platform:t,type:"createdWithSocial"},submitting:!1})}}throw e}},this.handleLoginSuccess=()=>{const{dispatch:e,history:t,modalOptions:{closeModalOnLogin:a=!0,limitRedirect:s,redirectPath:n=k.B6}}=this.props;a&&e({options:void 0,type:"TOGGLE_MODAL"}),s||(0,k.KE)(window.location.pathname)||t.push(n)},this.handleRegisterFailure=e=>{const{modalOptions:{via:t}}=this.props;(0,_.j)("registration_tap",{target:"create_account"}),(0,_.j)("register",{successful:!1,through:e,via:t})},this.handleSubmit=async e=>{const{modalOptions:{hideAge:t,isSignIn:a}}=this.props;if(e.preventDefault(),!this.state.ageRestricted||this.state.isUsernameVerified||await this.validateUsername()){this.setState({errors:{},submitting:"email"});try{a?(Pe.Z.start("login_success_or_fail"),await this.handleLogin(this.state.fields)):(Pe.Z.start("registration_success_or_fail"),(0,_.j)("registration_tap",{target:"create_account"}),await this.emailSignup(this.state.fields,!0===t))}catch(e){if(this.setState({submitting:!1}),!(e instanceof Ie.Wj))throw e;this.setState({errors:e.errorFields,useImprovedErrorMessages:e.useImprovedErrorMessages})}finally{a?Pe.Z.finish("login_success_or_fail"):Pe.Z.finish("registration_success_or_fail")}}},this.handleToggleForm=()=>{const{dispatch:e,modalOptions:t}=this.props,{isSignIn:a,trackingProps:s,via:n}=t;a?(0,_.j)("sign_in_tap",Object.assign({target:"sign_up",via:n},s)):(0,_.j)("registration_tap",{target:"sign_in"}),e({options:Object.assign(Object.assign({},t),{isSignIn:!a}),type:"TOGGLE_MODAL"})}}componentDidMount(){(0,Te.L8)();const{history:e,modalOptions:{disableWelcomeBack:t,isFamilyPlan:a,isSignIn:s,trackingProps:n,via:r,limitRedirect:i}}=this.props;if(this.mounted=!0,s){this.prefilledLoginData=(0,Ae.MG)();const e=!t&&s&&!a&&!!this.prefilledLoginData;if(e){if("email"===this.prefilledLoginData.type)(0,_.j)("sign_in_load",Object.assign({screen:"email_prefilled",via:r},n));else if("social"===this.prefilledLoginData.type){const e=this.prefilledLoginData.hasGoogle&&this.prefilledLoginData.hasFacebook?"google_and_facebook":this.prefilledLoginData.hasGoogle?"google":"facebook";(0,_.j)("sign_in_load",Object.assign({screen:`sign_in_with_${e}`,via:r},n))}}else(0,_.j)("sign_in_load",Object.assign({screen:"sign_in_modal",via:r},n));this.setState({alternateView:e?{title:(0,W.H8)(1086),type:"welcomeBack"}:null})}else(0,_.j)("registration_load",{screen:"sign_in_modal"});const o=(0,Oe.Lm)();"true"!==o.isLoggingIn&&"no-update"!==i&&e.replace({pathname:window.location.pathname,search:(0,Oe.Vp)(Object.assign(Object.assign({},o),{isLoggingIn:!0}))})}componentWillUnmount(){this.mounted=!1;const{history:e,modalOptions:{isSignIn:t,onBeforeClose:a,via:s,limitRedirect:n}}=this.props;t?(0,_.j)("sign_in_tap",{target:"dismiss",via:s}):(0,_.j)("registration_tap",{target:"dismiss"}),null==a||a();const r=(0,Oe.Lm)(),{isLoggingIn:i}=r,o=xe(r,["isLoggingIn"]);"true"===i&&"no-update"!==n&&e.replace({pathname:window.location.pathname,search:(0,Oe.Vp)(o)})}render(){const{config:{ipCountry:e},dispatch:t,isDesktop:a,modalOptions:{allowLanguagelessUser:n,closeModalOnLogin:r=!0,goBack:i,hideAge:o=!1,isFamilyPlan:l,isSignIn:c,limitRedirect:d,redirectPath:u,removeSignUp:p,renderHeader:g,renderSubtitle:m,renderTitle:h,requireGoogle:v,trackingProps:f,via:S}}=this.props,{ageRestricted:E,alternateView:y,errors:b,fields:w,submitting:I,useImprovedErrorMessages:T}=this.state,k=(0,Ne.P_)(this.props.config),C=c&&y&&"welcomeBack"===y.type,R=C&&y.title||"",O=c&&y&&"createdWithSocial"===y.type,L=O&&y,P=C?1032:c?35497:11927,A=s.createElement($.Z,Object.assign({},(0,le._q)(de.V.RegisterButton),{className:be.button,disabled:C?void 0:!1!==I&&"email"!==I,key:P,submitting:"email"===I,type:"submit",unstyledDisabled:!C,variant:"solid"}),(0,W._i)(P)),N=c&&T&&(b.password||b.identifier||b.connectivity||b.social)?s.createElement(pe,null,b.identifier,b.password,b.connectivity,b.social):null,D=(()=>v?s.createElement(je,{isSignIn:c,onGoogleClick:this.googleSignup,renderHeader:g,renderSubtitle:m,renderTitle:h,submitting:I}):C&&this.prefilledLoginData?s.createElement(He,{dispatch:t,errors:b,header:null==g?void 0:g(!0),identifier:w.identifier,lastLoginType:this.prefilledLoginData.type,name:this.prefilledLoginData.name,onFacebookClick:this.facebookSignup,onGoogleClick:this.googleSignup,onIdentifierChange:e=>this.handleFieldChange("identifier",e),onPasswordChange:e=>this.handleFieldChange("password",e),onUseAnotherAccount:this.handleUseAnotherAccount,password:w.password,picture:this.prefilledLoginData.picture,registerButton:A,signInErrors:N,submitting:I,title:R,via:S}):O?s.createElement(Ge,{name:L.name,onFacebookClick:this.facebookSignup,onGoogleClick:this.googleSignup,onUseAnotherAccount:this.handleUseAnotherAccount,picture:L.picture,platform:L.platform,submitting:I}):s.createElement(Be,{age:w.age,ageRestricted:E,dispatch:t,email:w.email,errors:b,focusPasswordField:!1,hideAge:o,identifier:w.identifier,ipCountry:e,isFamilyPlan:l,isSignIn:c,isUGCDisabled:k,name:w.name,onAgeBlur:this.handleAgeChange,onAgeChange:e=>this.handleFieldChange("age",e),onEmailChange:e=>this.handleFieldChange("email",e),onFacebookClick:this.facebookSignup,onGoogleClick:this.googleSignup,onIdentifierChange:e=>this.handleFieldChange("identifier",e),onNameChange:e=>this.handleFieldChange("name",e),onPasswordChange:e=>this.handleFieldChange("password",e),onResetError:this.handleResetUsernameError,onUsernameBlur:this.validateUsername,onUsernameChange:e=>this.handleFieldChange("username",e),password:w.password,registerButton:A,renderHeader:g,renderTitle:h,showEmailField:!0,signInErrors:N,submitting:I,username:w.username,via:S}))(),x=c?(0,W._i)(19234):(0,W._i)(9109);return s.createElement(s.Fragment,null,a?s.createElement("div",{className:be["right-controls"]},p?null:s.createElement($.Z,Object.assign({},(0,le._q)(de.V.SignUpButton),{color:"macaw",onClick:this.handleToggleForm,variant:"stroke"}),x)):null,s.createElement("form",{className:be.modal,method:"POST",noValidate:!0,onSubmit:this.handleSubmit},D,s.createElement("div",{className:be.footer},s.createElement("div",{className:be["terms-and-privacy"]},(0,W._i)(18519)),s.createElement("div",{className:be["terms-and-privacy"]},(0,W._i)(42488)),a?null:c?s.createElement("div",{className:be["no-account"]},(0,W._i)(11114),s.createElement("span",Object.assign({},(0,le._q)(de.V.SignUpLink),{className:be["no-account-link"],onClick:()=>{(0,_.j)("sign_in_tap",Object.assign({target:"sign_up",via:S},f)),t({options:{allowLanguagelessUser:n,closeModalOnLogin:r,goBack:i,isSignIn:!1,limitRedirect:d,name:Q.t.SignInUp,redirectPath:u,renderHeader:g,renderSubtitle:m,renderTitle:h,via:S},type:"TOGGLE_MODAL"})}}),(0,W._i)(19234))):s.createElement("div",{className:be["no-account"]},(0,W._i)(6220),s.createElement("span",{className:be["no-account-link"],onClick:()=>{(0,_.j)("registration_tap",{target:"sign_in"}),t({options:{allowLanguagelessUser:n,closeModalOnLogin:r,goBack:i,isSignIn:!0,limitRedirect:d,name:Q.t.SignInUp,redirectPath:u,renderHeader:g,renderSubtitle:m,renderTitle:h,via:S},type:"TOGGLE_MODAL"})}},(0,W._i)(3830))))))}}const ze=()=>{const e=(0,h.Fx)(D.Mb),t=(0,h.Fx)(D.$4),a=(0,h.Fx)(D.YW),n=(0,h.Fx)(D.np),r=(0,h.tX)(),i=(0,T.k6)();return s.useEffect((()=>{(0,M.Pc)()&&!(0,De.pN)(n)||(0,ke.d)()}),[n]),s.createElement(q.Z,{className:be["modal-wrapper"],isFullscreen:!0,modalName:Q.t.SignInUp,onDismiss:({modalOptions:e})=>{var t;const a=(0,Oe.vl)(window.location.search);"no-update"!==e.limitRedirect&&i.replace({search:(0,Oe.Vp)(o.CE(a,["sign-in","sign-up","register"]))}),null===(t=e.onCloseButtonClick)||void 0===t||t.call(e),r({options:void 0,type:"TOGGLE_MODAL"})}},(({modalOptions:n,onDismiss:o})=>s.createElement(Ve,{config:e,dispatch:r,history:i,isDesktop:t,isOnline:a,modalOptions:n,onDismiss:o})))};var Ze=a(98071),$e=a(9979),qe=a(81149),We=a(68903),Qe=a(1398);const Ye=(0,Qe.Z)((()=>a.e(7384).then(a.bind(a,82791)))),Je=(0,Qe.Z)((()=>a.e(2732).then(a.bind(a,27510)))),Ke=(0,Qe.Z)((()=>a.e(3589).then(a.bind(a,83377)))),Xe=(0,Qe.Z)((()=>a.e(969).then(a.bind(a,30969)))),et=(0,Qe.Z)((()=>Promise.all([a.e(9981),a.e(230)]).then(a.bind(a,46809)))),tt=(0,Qe.Z)((()=>Promise.all([a.e(9981),a.e(3970)]).then(a.bind(a,75924)))),at=(0,Qe.Z)((()=>Promise.all([a.e(9981),a.e(9387)]).then(a.bind(a,4040)))),st=(0,Qe.Z)((()=>a.e(7495).then(a.bind(a,94871)))),nt=(0,Qe.Z)((()=>a.e(9559).then(a.bind(a,59858)))),rt=(0,Qe.Z)((()=>a.e(7733).then(a.bind(a,40736)))),it=(0,Qe.Z)((()=>Promise.all([a.e(4705),a.e(8284)]).then(a.bind(a,75281)))),ot=(0,Qe.Z)((()=>Promise.all([a.e(4705),a.e(1030)]).then(a.bind(a,62379)))),lt=(0,Qe.Z)((()=>Promise.all([a.e(9981),a.e(9933)]).then(a.bind(a,59996)))),ct=({modal:e})=>{const[,t]=s.useState(0),a=s.useRef(),n=(e=>{switch(e){case"convertLingotsToGemsWeb":return Ye;case"kudosOffer":case"kudosReceive":return rt;case"legendaryRebrandGoldColor":return Je;case"marketingOptIn":return Xe;case"pathChange":return"experiment"===(0,qe.j6)("path_web_path_change_notifications",void 0)?Ke:void 0;case"reactivatedWelcome":return lt;case"resurrectedWelcome":return tt;case"streakFreezeRecurringOffer":return at;case"streakFreezeUsed":return st;case"streakRepairOffer":return nt;case"turningNotificationsOn":return et;case"v2Intro":return;case"webToAppConversion":return it;case"webToAppConversionAggressive":return ot;case void 0:return;default:throw(0,We.RJ)(e),Error()}})(null!=e?e:a.current);return s.useEffect((()=>{if(void 0===e&&void 0!==a.current){const e=setTimeout((()=>{a.current=void 0,t((e=>e+1))}),$e.nN);return()=>clearTimeout(e)}void 0!==e&&(a.current=e)}),[e]),n?s.createElement(Ze.Z,null,s.createElement(n,{isModal:!0})):null};var dt=a(18201);const ut=({drawer:e})=>{const[t,a]=s.useState(0),n=s.useRef(),r=s.useRef(),i=(0,dt.Z)(null!=e?e:n.current);return s.useEffect((()=>{void 0!==e&&e===n.current&&void 0===r.current&&a((e=>e+1)),n.current=null!=e?e:n.current,r.current=e})),i?s.createElement(s.Suspense,{fallback:null},s.createElement(i,{key:t})):null},pt=(0,Qe.Z)((()=>a.e(555).then(a.bind(a,70555)))),gt=({toast:e})=>{const[t,a]=s.useState(0),n=s.useRef(),r=s.useRef(),i=(e=>{switch(e){case"emailVerified":return pt;case void 0:return;default:throw(0,We.RJ)(e),Error()}})(null!=e?e:n.current);return s.useEffect((()=>{void 0!==e&&e===n.current&&void 0===r.current&&a((e=>e+1)),n.current=null!=e?e:n.current,r.current=e})),i?s.createElement(s.Suspense,{fallback:null},s.createElement(i,{isToast:!0,key:t})):null};var mt=a(77888),ht=a(93890),_t=a(50231),vt=a(59249),ft=a(89803),St=a(4517);const Et=(0,Qe.Z)((()=>a.e(2146).then(a.bind(a,66592)))),yt={getConditionAndTreat:qe.j6},bt=({children:e})=>{const t=(0,h.tX)(),a=(0,h.Fx)((e=>e.ui.appOffset)),n=(0,h.Fx)((e=>e.browserSettings.darkMode)),r=(0,h.Fx)((e=>e.ui.drawer)),p=(0,h.Fx)(D.df),m=(0,h.Fx)(_t.av),v=(0,h.Fx)((e=>e.ui.spotlightType)),S=(0,h.Fx)((e=>e.ui.toast)),b=(0,h.Fx)(D.Lm),I=(0,h.Fx)((e=>e.ui.viewportHeight)),O=(0,h.Fx)((e=>"enabled"===e.brb.brb.status)),$=(0,h.Fx)((e=>(0,D.Sg)(e))),q=(0,h.Fx)((e=>(0,D.ep)(e))),W=(0,h.Fx)((e=>e.ui.isModalReallyOpen&&($||q))),Q=(0,h.Fx)((e=>void 0!==e.ui.drawer||void 0!==e.ui.modal&&e.ui.isModalReallyOpen||e.ui.isRequestingNotificationPermission)),J=(0,mt.Z)(),K=(0,F.Z)();(0,R.Z)(),A("brb"),A("zombie"),(0,N.Z)(),(()=>{const e=(0,h.CC)(),t=(0,T.k6)(),a=(0,T.TH)(),[n]=s.useState(Date.now());s.useEffect((()=>{let s=a;const r=t.listen((a=>{(0,x.si)(s,a);let r=a.pathname;const i=new URLSearchParams(a.search);if((0,k.fu)(r))return console.log("Path owned by old web; refreshing"),(0,g.um)("Path owned by old web; refreshing",{data:{nextPathname:r,prevPathname:s.pathname}}),void(0,k.Zs)();if((Date.now()-n)/P.zq>72)return console.log("Window too old; refreshing"),void(0,k.Zs)();if((0,M.Pc)()){let a=!1;const s=(0,D.Lm)(e.getState()),n=(0,D.iH)(e.getState());!s||n||(0,k.v$)(r)||(console.log(`Redirecting "${r}" to "/welcome" to select learning language`),r="/welcome",a=!0),i.has("isLoggingIn")&&(i.delete("isLoggingIn"),a=!0),a&&t.replace({pathname:r,search:i.toString()})}s=a}));return()=>{r()}}),[])})(),(()=>{const e=(0,h.Fx)(D.df),[t]=s.useState((()=>new AbortController));s.useEffect((()=>{let e=!1;return"serviceWorker"in navigator&&(async()=>{if(await navigator.serviceWorker.register("/gcm-service-worker.js"),!e&&!t.signal.aborted)try{await U.S1(t.signal)}catch(e){console.warn(e)}})(),()=>{e=!0}}),[]),s.useEffect((()=>{e&&t.abort("Zombie mode activated")}),[e])})(),(({disabled:e})=>{const t=s.useRef(),a=(0,T.TH)(),n=(0,h.Fx)((e=>e.ui.engagementOverride)),r=(0,h.Fx)((e=>(0,H.ek)(e,{location:a})));s.useEffect((()=>{const a=()=>{if(!e){const e=Date.now(),a=e-j;j=e,_.sF(a,t.current,r)}},s=o.P2(a,1e3,{trailing:!0});return n!==t.current&&(a(),t.current=n),document.addEventListener("mousedown",s),document.addEventListener("keydown",s),document.addEventListener("touchstart",s),()=>{document.removeEventListener("mousedown",s),document.removeEventListener("keydown",s),document.removeEventListener("touchstart",s)}}),[e,n,r]),s.useEffect((()=>{const t=o.P2((()=>{if(!e){const e={};let t=0;Object.entries(_.dU).forEach((([a,s])=>{"deepest_node_learning"!==a&&(t+=s),e[`engagement_type_${a}`]=Math.floor(s/1e3)})),e.total_time_spent=Math.floor(t/1e3),_.j("time_spent",e),_.zS()}}),6e4,{trailing:!0});return document.addEventListener("mousedown",t),document.addEventListener("keydown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("keydown",t),document.removeEventListener("touchstart",t)}}),[e])})({disabled:O||p&&!b}),(()=>{const e=s.useRef((0,P.Ml)()),t=s.useRef((0,P.Ml)()),[a,n]=s.useState((0,M.Pc)()),[r,i]=s.useState((0,M.Pc)());s.useEffect((()=>{const e=o.P2((()=>{(0,M.Pc)()&&"/reset_password"!==window.location.pathname&&_.j("user_active",{product:"learning_app"})}),G,{trailing:!1});return B.forEach((t=>{document.addEventListener(t,e)})),()=>{B.forEach((t=>{document.removeEventListener(t,e)}))}}),[]),s.useEffect((()=>{const t=()=>{setTimeout((()=>{_.Bf({activity_trigger:"user_interaction"})&&(e.current=(0,P.Ml)())}),500)},s=o.P2(t,G,{trailing:!1}),r=()=>{(0,P.Ml)()!==e.current&&t()},i=()=>{a!==(0,M.Pc)()&&(n((0,M.Pc)()),t())};return B.forEach((e=>{document.addEventListener(e,s),document.addEventListener(e,r),document.addEventListener(e,i)})),()=>{B.forEach((e=>{document.removeEventListener(e,s),document.removeEventListener(e,r),document.removeEventListener(e,i)}))}}),[a]),s.useEffect((()=>{const e=()=>{setTimeout((()=>{_.Bf({activity_trigger:"app_foregrounded"})&&(t.current=(0,P.Ml)())}),500)},a=o.P2(e,G,{trailing:!1}),s=()=>{(0,P.Ml)()!==t.current&&e()},n=()=>{r!==(0,M.Pc)()&&(i((0,M.Pc)()),s())};return document.addEventListener("visibilitychange",s),document.addEventListener("visibilitychange",a),document.addEventListener("visibilitychange",n),()=>{document.removeEventListener("visibilitychange",s),document.removeEventListener("visibilitychange",a),document.removeEventListener("visibilitychange",n)}}),[r])})(),(({disabled:e})=>{const t=(0,h.tX)(),a=(0,h.CC)();s.useEffect((()=>{if(!e){const e=(0,L.nC)((()=>{try{(0,M.Jb)()}catch(t){return void clearInterval(e)}const s=a.getState();(0,D.eI)(s)||void 0!==z.SL||(t((0,Z.eY)()),t((0,V.i)()))}),36e5);return()=>clearInterval(e)}}),[e])})({disabled:O||p});const[X,ee]=s.useState(O||p&&!b);return s.useLayoutEffect((()=>{if(void 0!==a)return document.documentElement.style.setProperty("--app-offset",`${a}px`),()=>{document.documentElement.style.removeProperty("--app-offset")}}),[a]),s.useLayoutEffect((()=>{if(K)return document.documentElement.setAttribute("reduced-motion",""),()=>document.documentElement.removeAttribute("reduced-motion")}),[K]),s.useLayoutEffect((()=>{if(void 0!==I&&!CSS.supports("(width: 1dvh)"))return document.documentElement.style.setProperty("--viewport-height",`${I}px`),()=>{document.documentElement.style.removeProperty("--viewport-height")}}),[I]),s.useEffect((()=>{if((0,M.Pc)()&&!p){const e=new AbortController;return t((0,z.SC)(e.signal)),t((0,z.Vw)(e.signal)),()=>{e.abort("Zombie mode activated")}}(0,_.hK)()}),[p]),s.useEffect((()=>{O||p||t((0,V.i)())}),[O,p]),s.useEffect((()=>{p&&b&&t(((e,t)=>{const a=(0,D.__)(t()),s=(0,D.np)(t()),n=(0,P.Zo)(),r=(0,ht.zK)(n,a,s),i=(0,ht.KA)(n,r,s),o=(0,ht.ul)(r,a,s);e({type:"UPDATE_USER",user:{streakData:i.streakData}}),e({type:"SET_XP_SUMMARIES",xpSummaries:i.xpSummaries});for(const t of o)e({item:t,type:"REFRESH_USER_ITEM"})}))}),[]),s.useEffect((()=>{(0,_.j)("web_supported_features",{web_features:window.duo.supportedFeatures})}),[]),s.useEffect((()=>{if(O||p&&!b)return ee(!0),()=>{(0,k.Zs)()}}),[O,p,b]),s.useEffect((()=>{p&&(0,_.j)("zombie_mode_activated",{num_offline_lessons_available:J})}),[p]),s.useEffect((()=>{if(Q)return t({type:"DIMMED_OVERLAY_OPENED"}),()=>{t({type:"DIMMED_OVERLAY_CLOSED"})}}),[Q]),s.useEffect((()=>{const e=()=>t({type:"GO_OFFLINE"}),a=()=>t({type:"COME_ONLINE"});return window.addEventListener("offline",e),window.addEventListener("online",a),()=>{window.removeEventListener("offline",e),window.removeEventListener("online",a)}}),[]),s.useEffect((()=>{const e=o.Ds((()=>t({height:window.innerHeight,type:"RESIZE_WINDOW",width:window.innerWidth})),250);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),s.useEffect((()=>(window.addEventListener("beforeunload",ft.u6),window.addEventListener("unload",ft.u6),()=>{window.removeEventListener("beforeunload",ft.u6),window.removeEventListener("unload",ft.u6)})),[]),X?s.createElement(s.Suspense,{fallback:null},s.createElement(Et,null)):s.createElement(f,null,s.createElement(i.aH,{client:St.E},s.createElement(vt.tc,null),s.createElement(l.Z.Provider,{value:yt},s.createElement(c.Z.Provider,{value:K},s.createElement(d.Z,{theme:(0,vt.gQ)("darkMode")||"on"===n?"dark":"off"===n?"light":void 0},s.createElement(y.ZP,null,s.createElement(C,null),e,s.createElement(u.Z,{animateOnMount:Q,isVisible:Q},void 0===v?s.createElement(E.Z,Object.assign({},(0,le._q)(de.V.DrawerBackdrop))):s.createElement(w,{spotlightType:v})),s.createElement(u.Z,{animateOnMount:W,isVisible:W},s.createElement(E.Z,{portalToOverlays:!0,secondaryOverlayType:$?"drawer":"modal"})),s.createElement(Y,null),s.createElement(ze,null),s.createElement(ut,{drawer:null==r?void 0:r.name}),s.createElement(ct,{modal:m}),s.createElement(gt,{toast:S})))))))};var wt=a(31801);const It=({data:e})=>(e["@context"]=e["@context"]||"http://schema.org",s.createElement("script",{type:"application/ld+json"},JSON.stringify(e,null,"\t"))),Tt=({crumbs:e})=>{const t={"@type":"BreadcrumbList",itemListElement:e.map(((e,t)=>({"@type":"ListItem",item:{"@id":e.url.toString(),name:e.label},position:t+1})))};return s.createElement(It,{data:t})};var kt=a(92883),Ct=a(75025),Rt=a(29264);const Ot=e=>{const{dispatch:t,trackingScreen:a="unknown",via:n}=e;return s.createElement($.Z,Object.assign({},(0,le._q)(de.V.HaveAccount),{className:"_3mSsk _32wa0",onClick:()=>{(0,_.j)("click",{screen:a,target:"has_account"}),(0,_.j)("splash_tap",{target:"has_account"}),t({options:{allowLanguagelessUser:!0,isSignIn:!0,name:Q.t.SignInUp,via:n},type:"TOGGLE_MODAL"})},variant:"stroke"}),(0,W._i)(20690))};var Lt=a(36083);const Pt={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","hero-wrap":"_2quRS",globe:"_2eTYC","hero-short":"_8p5dJ","hero-shorter":"QKdy5","globe-flag":"EZsOD"},At=({learningLanguageId:e,variant:t})=>{const a=e?s.createElement(Lt.Z,{className:Pt["globe-flag"],lang:e,size:88}):null;return s.createElement("div",{className:te()(Pt["hero-wrap"],{[Pt[`hero-${t}`]]:!!t})},s.createElement("div",{className:Pt.globe}),a)};At.VARIANTS={SHORT:"short",SHORTER:"shorter"};const Nt=At,Dt="_2O-uQ _1fbst whuSQ _2gwtT _1nlVc _2fOC9 t5wFJ _3dtSu _25Cnc _3yAjN UCrz7 yTpGk",xt={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210",body:"_2EAJQ",footer:"_1SrGE","_space-background":"_30_lR","splash-wrap-inner":"_2F5q9","_splash-header-base":"_2jDQw","full-height":"_3z5VG","splash-header":"_18cH1","splash-header-wrap":"_1RQS6 _30_lR _2jDQw","prevent-long-splash":"_1FMDq","cta-container":"_3wkBv",tagline:"_3bXAY","splash-cta":"_6TCdY _108yV","login-panel-wrap":"AsTXN","enter-details":"_2AyzT","content-section":"_338aW","content-section-divider":"DHwFZ","_content-wrap":"_8bBwZ","_content-wrap-row":"_2HZDe _8bBwZ","content-wrap-row-left":"RVdan _2HZDe _8bBwZ","content-wrap-row-right":"_3xrJa _2HZDe _8bBwZ","content-wrap-column":"_1gei2 _8bBwZ","_content-img":"kzV-q","_content-img-left":"_13IhJ","_content-img-right":"_2lVpu",h2:"_1AmUJ",h3:"_3aNhe","duo-img":"_22SOo kzV-q _13IhJ","efficacy-img":"_1sRIT kzV-q _13IhJ _1G1lu","plus-duo-img":"HBGBC kzV-q _13IhJ _1G1lu","super-duo-img":"FYfiY kzV-q _13IhJ _1G1lu","travel-img":"hmzIl kzV-q _2lVpu _1G1lu","school-img":"_1-lCk kzV-q _13IhJ _1G1lu","english-test-img":"_3hB7q kzV-q _2lVpu _1G1lu","content-description":"_2gzeH","content-description-small":"_1c0wn",link:"_1UbsT","play-video-icon":"_1e2pl","gamification-columns":"_2KQih","gamification-column":"_2XjE9","gamification-img":"_11DdV","gamification-img-top":"_2H12S _11DdV","small-content-wrap":"QDrP9","small-content-text-wrap":"_3_NlK",_icon:"_22sJd","check-icon":"_258Bh _22sJd","crown-icon":"My_aK _22sJd","streak-icon":"_2tMVK _22sJd","profile-icon":"_3KVV8 _22sJd","app-button-container":"_2UDuf","app-button":"_2xIzh","blue-link":"_1U0Kv _2__FI _1I0jE _3yAjN","footer-wrap":"_2_I80 _30_lR","footer-header":"_3yc4l","footer-tagline":"cWbmH","footer-cta":"_3H4pA _108yV","hidden-on-mobile":"LKK32","splash-bottom":"IvcaF","splash-cta-container":"liLLN","already-have-account-container":"_3uMJF",arrow:"_3cOeS d98MI _2jNpf","language-carousel":"_1u7qP","logged-out-logo":"_3s2_U","china-apk-download":"_1R_jZ","china-apk-download-qrcode":"F6uNr","china-apk-download-hint":"GXJ4O","china-apk-download-message":"_2QQDH"};class Mt extends s.Component{constructor(){super(...arguments),this.renderCourseHatchingForm=()=>{const{course:e,email:t,isEmailInputVisible:a,errorString:n,newlySubscribed:r,onEmailChange:i,onNotifyMeClick:o,onSubscribeClick:l}=this.props,{learningLanguageName:c,subscriberCount:d,userSubscribed:u}=e,p=u||r;return a?s.createElement("div",{className:"pguY_"},s.createElement("div",{className:"tF1i1"},s.createElement("input",{className:"IMg9F",onChange:e=>i(e.target.value),placeholder:(0,W.H8)(3980),value:t}),s.createElement("button",{className:"wa4cN _2O-uQ _1fbst whuSQ _2gwtT _1nlVc _2fOC9 t5wFJ _3dtSu _25Cnc _3yAjN UCrz7 yTpGk",onClick:l},(0,W._i)(19532))),s.createElement("div",{className:"_2WMsJ"},n)):s.createElement("div",null,p?s.createElement("span",{className:Dt},(0,W._i)(11141)):s.createElement("button",{className:Dt,onClick:o},(0,W._i)(9753)),s.createElement("div",{className:"_38yEk _2kE-G"},(0,W._i)(12826,{learning_language_name:c,num_users:d.toLocaleString()})))},this.renderHatchedForm=()=>{const{dispatch:e,isRegistering:t,onStartLearningClick:a,topElementRef:n}=this.props;return s.createElement("div",null,s.createElement("div",{className:"_2SQ3H",ref:n},s.createElement($.Z,{className:xt["splash-cta"],color:"owl",disabled:t,onClick:a,variant:"solid"},(0,W._i)(7709))),s.createElement("div",null,s.createElement(Ot,{dispatch:e,via:"course_page"})))},this.renderCTA=()=>{const{course:e,courseHatching:t,isDesktop:a,isEmailInputVisible:n}=this.props,{estimatedBetaDateString:r="",fromLanguageName:i,learningLanguageName:o}=e,l=t?(0,W._i)(8291,{from_language_name:i,learning_language_name:o}):(0,W._i)(a?18929:13834,{learning_language_name:o}),c=t&&r&&!n;return s.createElement("div",{className:xt["cta-container"],key:"cta-container"},c?s.createElement("h2",{className:"_2ooXi"},(0,W._i)(7261,{beta_launch_date:r})):null,s.createElement("div",{className:xt.headings},s.createElement("h1",{className:xt.tagline},l)),s.createElement("div",{className:"_3Lgvp",onClick:e=>e.stopPropagation()},t?this.renderCourseHatchingForm():this.renderHatchedForm()))},this.renderHeroElement=()=>s.createElement(s.Suspense,{fallback:null},s.createElement(Nt,{learningLanguageId:this.props.course.learningLanguageId}))}render(){return s.createElement("div",{className:te()(xt["splash-header-wrap"],xt["full-height"])},s.createElement("div",{className:xt["splash-header"]},this.renderHeroElement(),this.renderCTA()))}}const Ft=Mt;var Ut=a(14092);class Ht extends s.Component{constructor(){super(...arguments),this.state={email:"",errorString:"",isEmailInputVisible:!1,isRegistering:!1,newlySubscribed:!1},this.onSubscribeClick=async()=>{const{course:e}=this.props,{learningLanguageId:t,fromLanguageId:a}=e;try{await(0,Ut.F)(!1,t,a,this.state.email),this.setState({isEmailInputVisible:!1,newlySubscribed:!0})}catch(e){this.setState({errorString:(0,W.H8)(11696)})}},this.onStartLearningClick=async()=>{const{course:e,dispatch:t}=this.props,{learningLanguageId:a,fromLanguageId:s}=e;Pe.Z.start("trial_user_creation"),this.setState({isRegistering:!0}),await Promise.all([(0,_.j)("click",{screen:"course_splash",target:"get_started"}),(0,_.j)("course_splash_tap",{target:"get_started"})]),t((0,Z.Kb)(a,s))}}render(){const{clientExperiments:e,course:t,courseHatching:a,dispatch:n,isDesktop:r,topElementRef:i}=this.props,{email:o,errorString:l,isEmailInputVisible:c,isRegistering:d,newlySubscribed:u}=this.state;return s.createElement(Ft,{clientExperiments:e,course:t,courseHatching:a,dispatch:n,email:o,errorString:l,isDesktop:r,isEmailInputVisible:c,isRegistering:d,newlySubscribed:u,onEmailChange:e=>this.setState({email:e}),onNotifyMeClick:()=>this.setState({isEmailInputVisible:!0}),onStartLearningClick:this.onStartLearningClick,onSubscribeClick:this.onSubscribeClick,topElementRef:i})}}const jt=Ht,Gt=({children:e})=>{const t=s.createElement("div",{className:xt["content-section-divider"]}),a=s.Children.toArray(e),n=(a.length,a.filter((e=>!!e)).map(((e,a)=>s.createElement(s.Fragment,{key:a},0!==a?t:null,e,null))));return s.createElement("div",{className:xt["splash-content-wrap"]},n)};var Bt=a(8121);const Vt={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","footer-language-wrap":"_3CeMJ","footer-site-language-header":"_1OTYG","footer-ui-language-item":"_2WUal","footer-ui-language-link":"_9CAMy"},zt={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","width-tablet":"768px","footer-language-wrap":"IwiM9","footer-site-language-header":"_1RXV1","footer-ui-language":"_3iodW","footer-ui-language-item":"_30ib7","footer-ui-language-link":"_1FJ6K"};var Zt=a(93746);const $t=o.ZP.keys(Zt.Jl),qt=({isRedesign:e})=>{const t=e?zt:Vt;return s.createElement("div",{className:t["footer-language-wrap"]},s.createElement("div",{className:t["footer-site-language-header"]},(0,W._i)(18889)),s.createElement("ul",{className:t["footer-ui-language"]},$t.map((e=>s.createElement("li",{className:t["footer-ui-language-item"],key:e},s.createElement(K.Z,{className:t["footer-ui-language-link"],href:`//${(0,Zt.D3)(e)}.duolingo.com`},(0,Zt.lx)(e)))))))};var Wt=a(81928);const Qt={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","site-map-wrap":"_2-Hvl","site-map":"_1KUWD","column-header":"SP0EV",column:"_3wvOu",spacer:"_2vpsV"},Yt={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210","width-tablet":"768px","width-desktop":"1080px",column:"_13DLk","column-header":"twbwU","site-map":"_3TNCA"},Jt=()=>{const e=(()=>{switch(window.duo.uiLanguage){case"zh-CN":return"zs";case"zh-TW":return"zt";default:return(0,Zt.D3)(Zt.h9)}})();return Kt(e)?e:void 0},Kt=(0,We.p)(["de","en","es","fr","hi","hu","id","it","ja","ko","pt","ru","th","tr","uk","vi","zs","zt"]);var Xt=a(64865),ea=a(95975),ta=a(77747);const aa=(0,a(419).Q)(window.duo.uiLanguage),sa=parseFloat(Yt["width-desktop"]),na=parseFloat(Yt["width-tablet"]),ra=({isRedesign:e})=>{const t=(0,h.Fx)((e=>e.ui.viewportWidth)),a=e?Yt:Qt,n=Jt(),r="en"===window.duo.uiLanguage,{featureFlags:i}=(0,h.Fx)(D.Mb);s.useEffect((()=>{(0,_.j)("web_to_app_store_load",{via:"site_map"})}),[]);const o=s.createElement("div",null,s.createElement("div",{className:a["column-header"]},(0,W._i)(29912)),s.createElement("ul",null,s.createElement("li",null,s.createElement(K.Z,Object.assign({},(0,le._q)(de.V.CoursesLink),{href:"/courses"}),(0,W._i)(20631))),s.createElement("li",null,s.createElement(K.Z,{href:"/info"},(0,W._i)(17103))),s.createElement("li",null,s.createElement(K.Z,{href:"/approach"},(0,W._i)(6695))),s.createElement("li",null,s.createElement(K.Z,{href:"/efficacy"},(0,W._i)(29913))),s.createElement("li",null,s.createElement(K.Z,{href:"https://careers.duolingo.com/about"},(0,W._i)(11435))),s.createElement("li",null,s.createElement(K.Z,{href:"https://research.duolingo.com"},(0,W._i)(6746))),s.createElement("li",null,s.createElement(K.Z,{href:"https://careers.duolingo.com"},(0,W._i)(5919))),s.createElement("li",null,s.createElement(K.Z,{href:"https://design.duolingo.com"},(0,W._i)(29914))),s.createElement("li",null,s.createElement(K.Z,{href:"https://store.duolingo.com/"},(0,W._i)(15428))),s.createElement("li",null,s.createElement(K.Z,{href:"https://press.duolingo.com"},(0,W._i)(18072))),s.createElement("li",null,s.createElement(K.Z,{href:"https://investors.duolingo.com"},(0,W._i)(30107))),s.createElement("li",null,s.createElement(K.Z,{href:"/contact"},(0,W._i)(23037))))),l=s.createElement("div",null,s.createElement("div",{className:a["column-header"]},(0,W._i)(17225)),s.createElement("ul",null,s.createElement("li",null,s.createElement(K.Z,{href:"/"},(0,W._i)(23227))),(0,L.J9)()?null:s.createElement("li",null,s.createElement(K.Z,{href:"https://schools.duolingo.com"},(0,W._i)(13199))),s.createElement("li",null,s.createElement(K.Z,{href:`https://englishtest.duolingo.com/${null!=n?n:""}`},"Duolingo English Test")),"en"===window.duo.uiLanguage?s.createElement(s.Fragment,null,s.createElement("li",null,s.createElement(K.Z,{href:"https://www.duolingo.com/abc",isRoutableUrl:()=>!1},"Duolingo ABC")),s.createElement("li",null,s.createElement(K.Z,{href:"https://www.duolingo.com/math",isRoutableUrl:()=>!1},"Duolingo Math"))):null,s.createElement("li",null,s.createElement(K.Z,{href:ea.$},(0,W._i)(3735))),(0,ta.Ak)(i)?s.createElement("li",null,s.createElement(K.Z,{href:"/business",onClick:()=>(0,_.mh)(window.location.href,"/business","soft")},"Duolingo for Business")):null,s.createElement("li",null,s.createElement(K.Z,{href:"/super"},(0,W._i)(36712))),s.createElement("li",null,s.createElement(K.Z,{href:"/gift"},(0,W._i)(41073))))),c=s.createElement("div",null,s.createElement("div",{className:a["column-header"]},(0,W._i)(18971)),s.createElement("ul",null,s.createElement("li",null,s.createElement(K.Z,{href:(0,Xt.Ir)({via:"site_map"}),onClick:()=>{(0,_.j)("web_to_app_store_tap",{target:"google_or_China",via:"site_map"})}},(0,W._i)(7946))),s.createElement("li",null,s.createElement(K.Z,{href:(0,Xt.fy)({via:"site_map"}),onClick:()=>{(0,_.j)("web_to_app_store_tap",{target:"apple",via:"site_map"})}},(0,W._i)(24192))),"en"===window.duo.uiLanguage?s.createElement("li",null,s.createElement(K.Z,{href:"https://apps.apple.com/app/duolingo-abc-learn-to-read/id1440502568?pt=1374442&ct=Site%20map&mt=8"},"Duolingo ABC (iOS)")):null)),d=s.createElement("div",null,s.createElement("div",{className:a["column-header"]},(0,W._i)(29915)),s.createElement("ul",null,s.createElement("li",null,s.createElement(Wt.Z,Object.assign({},(0,le._q)(de.V.FaqLink)),(0,W._i)(12338))),(0,L.J9)()?null:s.createElement("li",null,s.createElement(K.Z,{href:"https://duolingoschools.zendesk.com/hc/en-us"},(0,W._i)(6932))),s.createElement("li",null,s.createElement(K.Z,{href:"https://englishtest.duolingo.com/faq"},(0,W._i)(20482,{test_name:"Duolingo English Test"}))),s.createElement("li",null,s.createElement(K.Z,{href:"https://status.duolingo.com/"},(0,W._i)(12464))))),u=s.createElement("div",null,s.createElement("div",{className:a["column-header"]},(0,W._i)(29916)),s.createElement("ul",null,s.createElement("li",null,s.createElement(K.Z,{href:"/guidelines"},(0,W._i)(29917))),s.createElement("li",null,s.createElement(K.Z,{href:"/terms"},(0,W._i)(22838))),s.createElement("li",null,s.createElement(K.Z,{href:"/privacy"},(0,W._i)(19704))),r?s.createElement("li",null,s.createElement(K.Z,{href:"/privacy#california"},'Respecting your "do not sell my personal information" rights')):null)),p=s.createElement("div",null,s.createElement("div",{className:a["column-header"]},(0,W._i)(16166)),s.createElement("ul",null,s.createElement("li",null,s.createElement(K.Z,{href:null!==k.Ql&&void 0!==k.Ql?k.Ql:"https://blog.duolingo.com"},(0,W._i)(14615))),(0,L.J9)()?null:s.createElement(s.Fragment,null,s.createElement("li",null,s.createElement(K.Z,{href:aa.instagram.link},(0,W._i)(616))),s.createElement("li",null,s.createElement(K.Z,{href:aa.facebook.link},(0,W._i)(17511))),s.createElement("li",null,s.createElement(K.Z,{href:aa.twitter.link},(0,W._i)(5061))),s.createElement("li",null,s.createElement(K.Z,{href:"https://www.youtube.com/user/duolingo"},"YouTube")))));return e?t>=sa?s.createElement("div",{className:Yt["site-map"]},s.createElement("div",{className:Yt.column},o),s.createElement("div",{className:Yt.column},l),s.createElement("div",{className:Yt.column},c),s.createElement("div",{className:Yt.column},d),s.createElement("div",{className:Yt.column},u,p)):t>=na?s.createElement("div",{className:Yt["site-map"]},s.createElement("div",{className:Yt.column},o,d),s.createElement("div",{className:Yt.column},l,u),s.createElement("div",{className:Yt.column},c,p)):s.createElement("div",{className:Yt["site-map"]},s.createElement("div",{className:Yt.column},o,l,c,d,u,p)):s.createElement("div",{className:Qt["site-map-wrap"]},s.createElement("div",{className:Qt["site-map"]},s.createElement("div",{className:Qt.column},o),s.createElement("div",{className:Qt.column},l),s.createElement("div",{className:Qt.column},c),s.createElement("div",{className:Qt.column},d),s.createElement("div",{className:Qt.column},u,s.createElement("div",{className:Qt.spacer}),p)))},ia=s.forwardRef((({ctaResource:e,trackingScreen:t},a)=>s.createElement("div",{className:xt["footer-wrap"],ref:a},s.createElement("div",{className:xt.footer},e?s.createElement("div",{className:xt["footer-header"]},s.createElement("h1",{className:xt["footer-tagline"]},(0,W._i)(e)),s.createElement(K.Z,{className:te()((0,$.y)({variant:"solid"}),xt["footer-cta"]),href:"/register",id:"signup-link",onClick:()=>{(0,_.j)("splash_tap",{target:"get_started"}),(0,_.j)("click",{which:"splash page get started bottom"})},trackingScreen:t,trackingTarget:"get_started"},(0,W._i)(18550))):null,s.createElement(ra,null),s.createElement(qt,null),(0,L.J9)()?s.createElement(Bt.Z,null):null)))),oa="_3hwU0 _108yV _2dZP2",la=e=>{const{className:t,dispatch:a,fromLanguageId:n,isRegistering:r,learningLanguageId:i,label:o=7709}=e;return s.createElement($.Z,{className:te()(t,oa),color:"owl",disabled:r,onClick:async()=>{Pe.Z.start("trial_user_creation"),await Promise.all([(0,_.j)("click",{which:"course splash page get started topbar"}),(0,_.j)("course_splash_tap",{target:"get_started"})]),a((0,Z.Kb)(i,n))},variant:"solid"},(0,W._i)(o))};var ca=a(84119),da=a(74597);const ua=({headingResource:e=4666,trackingScreen:t,via:a})=>s.createElement("section",{className:xt["content-section"]},s.createElement("div",{className:xt["content-wrap-row-right"]},s.createElement("div",{className:xt["content-text"]},s.createElement("h2",{className:xt.h2},(0,W._i)(e)),s.createElement("div",{className:xt["content-description"]},(0,W._i)(12387)),s.createElement("div",{className:xt["app-button-container"]},s.createElement(ca.Z,{className:xt["app-button"],href:da.Z.desktop?(0,W.H8)(22504,void 0,{addRightToLeftMark:!1}):(0,Xt.fy)({via:a}),onClick:()=>{(0,_.j)("click",{screen:t,target:"mobile_download_ios"}),(0,_.j)("click",{which:"mobile download ios"}),(0,_.j)("web_to_app_store_tap",{target:"apple",via:a})},style:"snow-always-light",type:"apple",via:a}),s.createElement(ca.Z,{className:xt["app-button"],href:da.Z.desktop?(0,Xt.A)({utmCampaign:"splash",utmContent:"download_button"}):(0,Xt.Ir)({via:a}),onClick:()=>{(0,_.j)("click",{screen:t,target:"mobile_download_android"}),(0,_.j)("click",{which:"mobile download android"}),(0,_.j)("web_to_app_store_tap",{target:"google_or_China",via:a})},style:"snow-always-light",type:(0,L.J9)()?"china":"google"}))),s.createElement("div",{className:xt["travel-img"]}))),pa=({description:e,iconClassName:t,onClick:a,title:n})=>s.createElement("div",{className:xt["small-content-wrap"],onClick:a},s.createElement("div",{className:t}),s.createElement("div",{className:xt["small-content-text-wrap"]},s.createElement("h3",{className:xt.h3},n),s.createElement("div",{className:xt["content-description-small"]},e))),ga=({headingResource:e=17123,learningLanguageName:t})=>s.createElement("section",{className:xt["content-section"]},s.createElement("div",{className:xt["content-wrap-column"]},s.createElement("div",{className:xt["gamification-img-top"]}),s.createElement("h2",{className:xt.h2},t?(0,W._i)(e,{learning_language_name:t}):(0,W._i)(29903)),s.createElement("div",{className:xt["gamification-columns"]},s.createElement("div",{className:xt["gamification-column"]},s.createElement(pa,{description:(0,W._i)(32749,{href:"/efficacy"},{preprocess:e=>(0,W.to)(e,xt.link)}),iconClassName:xt["streak-icon"],onClick:e=>{var t;"a"===(null===(t=e.target.tagName)||void 0===t?void 0:t.toLowerCase())&&(0,_.j)("duolingo_landing_efficacy_cta",{})},title:(0,W._i)(32748)}),s.createElement(pa,{description:(0,W._i)(29907),iconClassName:xt["check-icon"],title:(0,W._i)(29906)})),s.createElement("div",{className:xt["gamification-img"]}),s.createElement("div",{className:xt["gamification-column"]},s.createElement(pa,{description:(0,W._i)(29909),iconClassName:xt["crown-icon"],title:(0,W._i)(29908)}),s.createElement(pa,{description:(0,W._i)(29911),iconClassName:xt["profile-icon"],title:(0,W._i)(29910)}))))),ma=({learningLanguageName:e,trackingScreen:t})=>s.createElement("section",{className:xt["content-section"]},s.createElement("div",{className:xt["content-wrap-row-left"]},s.createElement("div",{className:xt["duo-img"]}),s.createElement("div",{className:xt["content-text"]},s.createElement("h2",{className:xt.h2},e?(0,W._i)(3721,{learning_language_name:e}):(0,W._i)(29901)),s.createElement("div",{className:xt["content-description"]},s.createElement(K.P,{trackingScreen:t,trackingTarget:"proof"},e?`${(0,W.H8)(20266,{learning_language_name:e})} `:(0,W._i)(29902),e?(0,W._i)(17300):null))))),ha=({trackingScreen:e})=>s.createElement("section",{className:xt["content-section"]},s.createElement("div",{className:xt["content-wrap-row-left"]},s.createElement("div",{className:xt["school-img"]}),s.createElement("div",{className:xt["content-text"]},s.createElement("h2",{className:xt.h2},(0,W._i)(13199)),s.createElement("div",{className:xt["content-description"]},(0,W._i)(29898)),s.createElement(K.Z,{className:xt["blue-link"],href:"https://schools.duolingo.com",onClick:()=>(0,_.j)("click",{which:"web splash schools"}),trackingScreen:e,trackingTarget:"schools"},(0,W._i)(14816)))));var _a=a(480);const va=()=>s.createElement("section",{className:xt["content-section"]},s.createElement("div",{className:xt["content-wrap-row-left"]},s.createElement("img",{className:xt["super-duo-img"],src:_a}),s.createElement("div",{className:xt["content-text"]},s.createElement("h2",{className:xt.h2},(0,W._i)(38674)),s.createElement("div",{className:xt["content-description"]},(0,W._i)(38675)),s.createElement(K.Z,Object.assign({},(0,le._q)(de.V.LearnWithPlus),{className:xt["blue-link"],href:k.wl}),(0,W._i)(38676)))));var fa=a(83936),Sa=a(68709);const Ea=({course:e,courseHatching:t,dispatch:a,isDesktop:n,showTopbarButtons:r,topElementRef:i})=>{const{fromLanguageId:o,learningLanguageId:l,learningLanguageName:c}=e,d=(0,h.Fx)(fa.WM),u=s.createElement(Gt,null,s.createElement(ma,{dispatch:a,learningLanguageName:c,trackingScreen:"course_splash"}),s.createElement(ga,{learningLanguageName:c}),s.createElement(va,null),s.createElement(ua,{headingResource:1150,trackingScreen:"course_splash",via:"course_splash"}),(0,L.J9)()?null:s.createElement(ha,{trackingScreen:"course_splash"}));return s.createElement(s.Fragment,null,s.createElement(Ct.Z,{content:(0,W.H8)(6807,{learning_language_name:c})}),s.createElement(kt.ql,null,s.createElement("title",null,`${(0,W.H8)(3053,{learning_language_name:c})} - ${(0,W.H8)(23227)}`),s.createElement("body",{className:xt.body})),s.createElement(Rt.Z,{dispatch:a,isSplashPage:!0,showButtons:r,trackingScreen:"course_splash",via:"course_splash"},s.createElement(la,{className:te()(r?Sa.Z["hidden-on-mobile"]:Sa.Z["hidden-everywhere"]),dispatch:a,fromLanguageId:o,isRegistering:!1,label:18550,learningLanguageId:l})),s.createElement(jt,{clientExperiments:d,course:e,courseHatching:t,dispatch:a,isDesktop:n,topElementRef:i}),u,s.createElement(ia,{trackingScreen:"course_splash"}))};var ya=a(26886);const ba=({history:e,location:t,match:{params:a}})=>{const n=(0,h.tX)(),r=(0,h.Fx)(D.Mb),i=(0,h.Fx)(D.$4),[o,l]=s.useState(),[c,d]=(0,wt.Z)();if(s.useEffect((()=>{let s=!0;(0,ft.Bf)(t,"course_splash");const{fromLanguageId:n=Zt.h9,learningLanguageId:r}=a;(async()=>{const e=await O._s.courseShow(r,n);s&&(l(e),(0,_.j)("course splash",{course_id:`${e.learningLanguageId}<-${e.fromLanguageId}`,logged_in:!1}))})();const i=(0,ya.og)(r,n);return t.pathname!==i&&e.push({pathname:i,search:t.search}),()=>{s=!1}}),[]),!o)return null;const{fromLanguageId:u,learningLanguageId:p,phase:g}=o,m=g===Zt.AP.Active&&!(0,ya.s7)(r,u,!1,p,g);return s.createElement(s.Fragment,null,s.createElement(Ea,{course:o,courseHatching:m,dispatch:n,isDesktop:i,showTopbarButtons:!c,topElementRef:d}),s.createElement(Tt,{crumbs:[{label:(0,W.H8)(23227),url:new URL(`${window.location.protocol}//${window.location.host}`)},{label:(0,W.H8)(20631),url:new URL(`${window.location.protocol}//${window.location.host}/courses`)}]}))};var wa=a(13325),Ia=a(80715),Ta=a(55107),ka=a(33096);const Ca={"duration-fade":"0.3s","duration-slide":"0.4s","height-tabbar-mobile":"90px","juicy-bee":"rgb(var(--color-bee))","juicy-length":"8px","juicy-margin":"24px","margin-popover":"8px","margin-popover-stem":"15px","margin-popover-text":"5px","z-index-modal":"310","z-index-overlay":"300","z-index-popover":"150","z-index-topbar":"210",wrap:"_3l_Dd","language-chooser-header":"_1Ii2h","from-language-chooser-list":"_1N6uu","from-language-item":"_2IaY3","from-language-flag":"_3g9Q_","from-language-bottom":"kkmpJ","white-stroke-transparent":"_3r8CI _1fbst whuSQ _2gwtT _1nlVc _2fOC9 t5wFJ _3dtSu _25Cnc _3yAjN UCrz7 yTpGk","loading-container":"_1JZrk"},Ra={de:4,es:0,fr:3,pt:1,ru:2},Oa=({availableCourses:e,isNavigating:t,isSelectingFromLanguage:a,onChooseAnotherCourseClick:n,onFromLanguageClick:r,onSelectCourse:i,selectedLearningLanguage:l,uiLanguageId:c})=>{let d=!1;const u=e.filter((e=>{const{fromLanguageId:t,learningLanguageId:a}=e;return t===c||"en"===c&&"en"===a&&!d&&(d=!0,!0)})).map((e=>{const{learningLanguageId:t}=e;return"en"===c&&"en"===t?Object.assign(Object.assign({},e),{numLearners:479e4,numLearnersString:`${4.79.toPrecision(3)}M`}):e}));return s.createElement("div",{className:Ca.wrap},s.createElement("h1",{className:Ca["language-chooser-header"],key:"header"},a?l?"What language do you speak?":(0,W._i)(16916):(0,W._i)(13091)),t?s.createElement("div",{className:Ca["loading-container"]},s.createElement(wa.Z,{theme:"light",type:"screen"})):s.createElement(s.Fragment,null,a?s.createElement("ul",{className:Ca["from-language-chooser-list"]},o.MR(e.filter((({learningLanguage:e})=>!l||e===l)),(e=>e.fromLanguage in Ra?Ra[e.fromLanguage]:1/0)).map((({fromLanguageId:e})=>s.createElement("li",{className:Ca["from-language-item"],key:e,onClick:t=>r(t,e)},s.createElement(Lt.Z,{className:Ca["from-language-flag"],lang:e,size:40}),(0,Zt.lx)(e))))):s.createElement("ul",{className:ka.Z["course-card-container"]},o.MR(u,(e=>-e.numLearners)).map((e=>{const t="en"===c&&"en"===e.learningLanguageId;return s.createElement(Ta.Z,{className:Ca["choose-language"],course:e,"data-language":(0,Zt.D3)(e.learningLanguageId),headingTag:"h2",key:"en"===c&&"en"===e.learningLanguageId?"english-placeholder":e.learningLanguageId,onSelectCourse:a=>{i(e,t,a)},style:"transparent-always-light"})}))),a?s.createElement("div",{className:Ca["from-language-bottom"]},s.createElement("p",null,"Don’t see the language you speak? We’re still working on an English course for you. Coming soon!"),s.createElement("button",{className:Ca["white-stroke-transparent"],onClick:n},"Choose another course")):null))};class La extends s.Component{constructor(){super(...arguments),this.state={isNavigating:!1,isSelectingFromLanguage:!1},this.onFromLanguageClick=async({},e)=>{const{dispatch:t,location:a}=this.props,s=window.performance.now();if(this.state.selectedLearningLanguage)(0,_.j)("course_picker_tap",{from_language:(0,Zt.D3)(e),learning_language:"en",target:"course",via:"onboarding"}),I.O.scrollTo(0,0),this.setState({isNavigating:!0}),(0,Oe.vl)(a.search).short?await(0,k.Zs)(`//${e}.duolingo.com/welcome/${this.state.selectedLearningLanguage}?short=1`):(Pe.Z.start("trial_user_creation",{startTime:s}),t((0,Z.Kb)(this.state.selectedLearningLanguage,e)));else{await(0,_.j)("ui_picker_screen_tap",{});const t=`//${"zh"===e?"zh-CN":e}.duolingo.com/register`;await(0,k.Zs)(t)}},this.onChooseAnotherCourseClick=()=>{this.setState({isSelectingFromLanguage:!1,selectedLearningLanguage:void 0})},this.onSelectCourse=(e,t)=>{const{dispatch:a,history:s,location:n,trackingScreen:r}=this.props,i=window.performance.now();(0,_.j)("click",{screen:r,target:"flag"}),(0,_.j)("course_selected",{learning_language:(0,Zt.D3)(e.learningLanguageId),ui_language:(0,Zt.D3)(Zt.h9)}),a({type:"SET_SHOULD_TRACK_FIRST_PATH"}),(0,_.j)("course_picker_tap",{from_language:(0,Zt.D3)(Zt.h9),learning_language:(0,Zt.D3)(e.learningLanguageId),target:"course",via:"onboarding"}),t?this.setState({isSelectingFromLanguage:!0,selectedLearningLanguage:e.learningLanguageId}):(I.O.scrollTo(0,0),this.setState({isNavigating:!0,selectedLearningLanguage:e.learningLanguageId}),(0,Oe.vl)(n.search).short?s.push(`/welcome/${e.learningLanguageId}?short=1`):(Pe.Z.start("trial_user_creation",{startTime:i}),this.props.dispatch((0,Z.Kb)(e.learningLanguageId))))}}componentDidMount(){(0,_.j)("course_picker_load",{ui_language:Zt.h9,via:"onboarding"})}render(){const{availableCourses:e}=this.props,{isNavigating:t,isSelectingFromLanguage:a,selectedLearningLanguage:n}=this.state;return s.createElement(Oa,{availableCourses:e,isNavigating:t,isSelectingFromLanguage:a,onChooseAnotherCourseClick:this.onChooseAnotherCourseClick,onFromLanguageClick:this.onFromLanguageClick,onSelectCourse:this.onSelectCourse,selectedLearningLanguage:n,uiLanguageId:Zt.h9})}}const Pa=(0,n.EN)((0,Ia.$j)()(La));var Aa=a(16376);const Na=a.p+"images/china/apkDownload/5ef61d69c243695da18ce19c73f94070.svg",Da=a.p+"images/china/21b33a54c8c2740c65ee912c85192032.png",xa=a.p+"images/china/9848d6e63324acbd351ada20dc172d48.png",Ma=a.p+"images/china/af0b5b34d654273593e11499dc7bc3fa.png",Fa=s.forwardRef((({children:e,dispatch:t,trackingScreen:a},n)=>{const r=(0,Oe.vl)().via,i="WeChat"===r?xa:"DET"===r?Da:Ma,o=()=>{(0,_.j)("splash_tap",{target:"get_started"}),(0,_.j)("click",{which:"splash page get started top"})};let l=e;if(!l){const e=s.createElement(K.Z,Object.assign({className:te()((0,$.y)({variant:"solid"}),xt["splash-cta"]),href:"/register",id:"signup-link"},(0,le._q)(de.V.GetStartedTop),{onClick:o,trackingScreen:a,trackingTarget:"get_started"}),(0,W._i)(18550)),n=["zh","zh-CN"].includes(window.duo.uiLanguage)&&da.Z.desktop&&(0,L.J9)()?s.createElement("div",{className:xt["china-apk-download"]},s.createElement("img",{className:xt["china-apk-download-qrcode"],src:i}),s.createElement("div",{className:xt["china-apk-download-hint"],onClick:()=>(0,Xt.ci)("splash-page")},s.createElement("div",{className:xt["china-apk-download-message"]},"扫一扫下载 APP"),s.createElement("img",{src:Na}))):null;l=s.createElement(s.Fragment,null,s.createElement(Nt,{variant:da.Z.android?Nt.VARIANTS.SHORT:Nt.VARIANTS.SHORTER}),s.createElement("div",{className:xt["cta-container"],key:"cta-container"},s.createElement("h1",{className:xt.tagline},(0,W._i)(29896)),s.createElement("div",{className:xt["splash-cta-container"]},e),s.createElement("div",{className:xt["already-have-account-container"]},s.createElement(Ot,{dispatch:t,trackingScreen:a,via:"onboarding"})),s.createElement("div",{className:xt["china-apk-download-button-container"]},n)))}return s.createElement("div",{className:te()(xt["splash-header-wrap"],e?xt["full-height"]:xt["prevent-long-splash"]),ref:n},s.createElement("div",{className:xt["splash-header"]},l),e?null:s.createElement("div",{className:xt["splash-bottom"]},s.createElement(Aa.Z,{className:te()(xt["language-carousel"],xt["hidden-on-mobile"]),onCarouselItemClick:()=>(0,_.j)("click",{which:"splash page flag"}),trackingScreen:a})))}));var Ua=a(13707);const Ha=()=>{var e;const t=(0,h.tX)(),{featureFlags:{linfra_hide_picker_web:a}}=(0,h.Fx)(D.Mb),n=null!==(e=(0,Ua.Z)("courseList",(()=>O._s.courseList(!0===a))))&&void 0!==e?e:[],r=s.useMemo((()=>n.filter((({phase:e})=>e>Zt.AP.Active))),[n]);return s.useEffect((()=>{(0,_.j)("screen_load",{screen:"course_picker"})}),[]),s.createElement("div",{className:xt["splash-wrap"]},s.createElement("div",{className:xt["splash-wrap-inner"]},s.createElement(Ct.Z,{content:(0,W.H8)(1100)}),s.createElement(kt.ql,null,s.createElement("title",null,`${(0,W.H8)(15785)} - ${(0,W.H8)(23227)}`),s.createElement("body",{className:xt.body})),s.createElement(Rt.Z,{dispatch:t,isSplashPage:!0,showButtons:!1,trackingScreen:"course_picker",via:"onboarding"}),s.createElement(Fa,{dispatch:t,trackingScreen:"course_picker"},s.createElement(Pa,{availableCourses:r,trackingScreen:"course_picker"}))))},ja=()=>{const e=(0,h.tX)(),t=(0,T.k6)(),a=(0,T.TH)(),r=(0,M.Pc)();s.useEffect((()=>{const e=(0,Oe.vl)(a.search);if("/referred"===a.pathname)if(r){const a=e.inviter_id;a?t.replace(`/u/${a}?via=referral`):t.replace(k.B6)}else{(0,_.j)("referral click",{});const t=e.user_invite;t&&(async()=>{await O.xr.trackSplashLoad(t),(0,m.LS)(m.Qt.InviteCode,t)})()}else r&&((0,_.mh)(window.location.href,"/welcome","soft"),t.replace({pathname:"/welcome",search:a.search}))}),[r]);const i=(0,n.$B)("/register/:languageId"),o=!r&&null!==i;return s.useEffect((()=>{if(o){const{params:{languageId:a}}=i;(0,Zt.jO)(a)?e((0,Z.Kb)(a)):t.replace("/")}}),[o]),r?null:o?s.createElement(wa.Z,{type:"screen-white"}):s.createElement(Ha,null)},Ga="CA8O7 _2ciGU _1DGat",Ba=({isRedesign:e})=>{const[t,a]=s.useState(!0);return s.useEffect((()=>{t&&((0,_.j)("android_banner_load",{}),(0,_.j)("web_to_app_store_load",{via:"Android_banner"}))}),[t]),t?s.createElement("div",{className:e?"_1MzaW _15MEM":"_15MEM"},s.createElement("div",{className:"_2BbZ4 _96iJP _1TSHz _1G1lu"}),s.createElement("div",{className:"pZc1g"},s.createElement("div",null,s.createElement("div",{className:"_3xdYT"},(0,W._i)(20861)),s.createElement("span",{className:"_33TRp"},"4.5"),s.createElement("span",{className:Ga}),s.createElement("span",{className:Ga}),s.createElement("span",{className:Ga}),s.createElement("span",{className:Ga}),s.createElement("span",{className:"nqTry _2ciGU _1DGat"},s.createElement("span",{className:"_7EH26 CA8O7 _2ciGU _1DGat",style:{width:"50%"}})),s.createElement("span",{className:"_2HDbl"},"15,300,000+")),s.createElement("div",{className:"_1E3JA"},s.createElement("span",{className:"_2Jt9X _1DGat"}),s.createElement(K.Z,{className:"qdLIR",href:(0,Xt.A)({isAndroidBanner:!0,utmCampaign:"splash_mobile_banner",utmContent:"mobile_banner"}),onClick:()=>{(0,_.j)("click",{which:"mobile banner android"}),(0,_.j)("android_banner_tap",{target:"install"}),(0,_.j)("web_to_app_store_tap",{target:"google_or_China",via:"Android_banner"})},target:"_blank"},(0,W._i)(4441))),s.createElement("button",{className:"N3mdh _2kfEr _1nlVc _2fOC9 UCrz7 t5wFJ _1DGat",onClick:()=>{(0,_.j)("android_banner_tap",{target:"dismiss"}),a(!1)}}))):null};var Va=a(42158);const za=({isRedesign:e})=>{const t=(0,Oe.vl)().via;return s.useEffect((()=>{(0,_.j)("china_apk_banner_load",{})}),[]),s.createElement("div",{className:e?"_1Mpqe _3Dcul":"_3Dcul"},s.createElement("img",{className:"_11VYN",src:Va}),s.createElement("div",null,s.createElement("div",{className:"_23wYk"},"下载多邻国 APP 开始免费学习")),s.createElement("div",{className:"_2Qvim",onClick:()=>{da.Z.android?(0,Xt.ci)(`splash-banner-${t}`):(0,k.Zs)(`${Xt.JN}?adjust_label=${t}`,!0)}},"去下载"))},Za=({logo:e,name:t,sameAs:a,url:n})=>{const r={"@type":"Organization",logo:e,name:t,sameAs:a,url:n};return s.createElement(It,{data:r})},$a=a.p+"images/f2a2e608c854822ad2563a09595e7827.png",qa=({sameAs:e})=>s.createElement(Za,{logo:$a,name:"Duolingo",sameAs:e,url:"https://www.duolingo.com/"}),Wa=e=>{const{className:t="",trackingScreen:a}=e;return s.createElement(K.Z,{className:te()(t,(0,$.y)({variant:"solid"}),oa),href:"/register",id:"signup-link",onClick:()=>{(0,_.j)("splash_tap",{target:"get_started"}),(0,_.j)("click",{which:"splash page get started topbar"})},trackingScreen:a,trackingTarget:"get_started"},(0,W._i)(18550))},Qa=()=>{const e=(0,T.TH)(),[t,a]=s.useMemo((()=>"/log-in"===e.pathname?[`${(0,W.H8)(18855)} - ${(0,W.H8)(23227)}`,(0,W.H8)(28228)]:[`${(0,W.H8)(23227)} - ${(0,W.H8)(10751)}`,(0,W.H8)(19956)]),[e.pathname]);return s.createElement(s.Fragment,null,s.createElement(Ct.Z,{content:a}),s.createElement(kt.ql,null,s.createElement("title",null,t)))},Ya=({trackingScreen:e})=>s.createElement("section",{className:xt["content-section"]},s.createElement("div",{className:xt["content-wrap-row-right"]},s.createElement("div",{className:xt["content-text"]},s.createElement("h2",{className:xt.h2},(0,W._i)(14855)),s.createElement("div",{className:xt["content-description"]},(0,W._i)(29899)),s.createElement(K.Z,{className:xt["blue-link"],href:"https://englishtest.duolingo.com",onClick:()=>(0,_.j)("click",{which:"web splash det"}),trackingScreen:e,trackingTarget:"det"},(0,W._i)(29900))),s.createElement("div",{className:xt["english-test-img"]}))),Ja=()=>s.createElement("section",{className:xt["content-section"]},s.createElement("div",{className:xt["content-wrap-row-left"]},s.createElement("div",{className:xt["efficacy-img"]}),s.createElement("div",{className:xt["content-text"]},s.createElement("h2",{className:xt.h2},(0,W._i)(32750)),s.createElement("div",{className:xt["content-description"]},(0,W._i)(32751)),s.createElement(K.Z,{className:xt["blue-link"],href:"/efficacy",onClick:()=>(0,_.j)("duo_plus_efficacy_cta",{})},(0,W._i)(32752))))),Ka=()=>{const e=(0,h.tX)(),t=(0,T.TH)(),{featureFlags:{linfra_hide_picker_web:a}}=(0,h.Fx)(D.Mb);(0,Ua.Z)("courseList",(()=>O._s.courseList(!0===a)));const n="/"===t.pathname;s.useEffect((()=>{Pe.Z.finishOptional("splash_to_intro")}),[]),s.useEffect((()=>{(0,_.j)("screen_load",{screen:"splash"})}),[]),s.useEffect((()=>{n&&(0,ft.Bf)(t,"splash")}),[n]),s.useEffect((()=>{window.location.host.startsWith("join")&&e({options:{goBack:()=>(0,k.Zs)(void 0,!0),isSignIn:!0,name:Q.t.SignInUp,via:"onboarding"},type:"TOGGLE_MODAL"})}),[]),s.useEffect((()=>{"/log-in"===t.pathname&&((0,_.j)("sign_in_load",{screen:"splash_login_page",via:"onboarding"}),e({options:{allowLanguagelessUser:!0,isSignIn:!0,name:Q.t.SignInUp,via:"onboarding"},type:"TOGGLE_MODAL"}))}),[t.pathname])},Xa=()=>{const e=(0,h.tX)();Ka();const[t,a]=(0,wt.Z)(),[n,r]=(0,wt.Z)(),i=!0===t||!0===n,o=Zt.Jl[Zt.h9],l=1===(null==o?void 0:o.length)&&"en"===(null==o?void 0:o[0]);return s.createElement("div",{className:xt["splash-wrap"]},s.createElement("div",{className:xt["splash-wrap-inner"]},s.createElement(Qa,null),s.createElement(kt.ql,null,s.createElement("body",{className:xt.body})),s.createElement(Rt.Z,{dispatch:e,isSplashPage:!0,showButtons:!i,trackingScreen:"splash",via:"onboarding"},s.createElement(Wa,{className:te()(i?Sa.Z["hidden-everywhere"]:Sa.Z["hidden-on-mobile"]),trackingScreen:"splash"})),s.createElement(Fa,{dispatch:e,ref:a,trackingScreen:"splash"}),s.createElement(Gt,null,s.createElement(ma,{dispatch:e,trackingScreen:"splash"}),s.createElement(ga,null),s.createElement(va,null),s.createElement(ua,{trackingScreen:"splash",via:"splash_page"}),(0,L.J9)()?null:s.createElement(ha,{trackingScreen:"splash"}),s.createElement(Ya,{trackingScreen:"splash"}),s.createElement(Ja,null)),s.createElement(ia,{ctaResource:l?1521:591,ref:r,trackingScreen:"splash"}),da.Z.silk?null:(0,L.J9)()?s.createElement(za,null):da.Z.android?s.createElement(Ba,null):null,s.createElement(qa,{sameAs:["https://www.youtube.com/duolingo","https://twitter.com/duolingo","https://www.facebook.com/duolingo","https://www.linkedin.com/company/duolingo/","https://www.instagram.com/duolingo/","https://www.twitch.tv/Duolingo"]})))};var es=a(75671);var ts=a(76578);const as=s.createContext(void 0),ss=s.createContext((()=>{})),ns=({children:e})=>{const[t,a]=s.useState({}),n=s.useCallback(((e,t)=>a((a=>Object.assign(Object.assign({},a),{[e]:t})))),[]),r=(()=>{let e,a;for(const[s,n]of Object.entries(t))(void 0===e||n<=e)&&(e=n,a=s);return a})();return s.createElement(ss.Provider,{value:n},s.createElement(as.Provider,{value:r},e))},rs=a.p+"lottie/splash/aea5aff1143a9410b81448245ad7c839.json",is=a.p+"lottie/splash/71b01cd301b53ec9879f2d06eb85f5db.json",os=a.p+"lottie/splash/82f26795696242931a7b905b4918eb1e.json",ls=a.p+"lottie/splash/e97b1cde32a58c629a0193eea36ddaab.json";var cs=a(22498);const ds="_1zJY7 _1G1lu",us=(e,{onCleanup:t,onInvisible:a}={})=>{const n=s.useRef(),r=s.useRef(null),[i,o]=(0,wt.Z)();return s.useLayoutEffect((()=>{n.current=e})),s.useLayoutEffect((()=>{if(!i)return;const e=()=>{var e,t;const a=null===(e=r.current)||void 0===e?void 0:e.getBoundingClientRect();if(a){const e=new DOMRect(0,0,window.innerWidth,window.innerHeight);null===(t=n.current)||void 0===t||t.call(n,{rootBounds:e,targetRect:a})}};return e(),I.O.addEventListener("scroll",e),()=>{I.O.removeEventListener("scroll",e),null==t||t()}}),[i]),s.useLayoutEffect((()=>{!1===i&&(null==a||a())}),[i]),s.useCallback((e=>{r.current=e,o(e)}),[])},ps=e=>{const t=s.useContext(as),a=s.useContext(ss),[n,r]=(0,wt.Z)(),i=us((t=>{const s=t.rootBounds.height/2,n=t.targetRect.top<s&&t.targetRect.bottom>s?0:Math.min(Math.abs(t.targetRect.top-s),Math.abs(t.targetRect.bottom-s));a(e,n)})),o=s.useCallback((e=>{var t,a;i(null!==(t=null==e?void 0:e.container)&&void 0!==t?t:null),r(null!==(a=null==e?void 0:e.container)&&void 0!==a?a:null)}),[]);return{forceLoop:!1,isPlaying:t===e&&n,ref:o}},gs=({animation:e,cta:t,flip:a,loopSegment:n,text:r,title:i})=>{const o=(0,F.Z)(),{forceLoop:l,isPlaying:c,ref:d}=ps(e);return s.createElement("section",{className:a?"_1aB2F wE_iv":"wE_iv"},s.createElement("div",{className:"_3ja81"},s.createElement("h2",{className:"sOFre"},i),s.createElement("p",{className:"Lylke"},r),t),s.createElement(s.Suspense,{fallback:s.createElement("div",{className:ds})},s.createElement(cs.Z,{className:ds,isPlaying:c&&!o,loop:!0,loopSegment:n,mainSegment:l?n:void 0,path:e,ref:d,renderSubframes:!1})))},ms=()=>s.createElement("section",{className:"_1BpSw"},s.createElement(gs,{animation:rs,loopSegment:[291,450],text:(0,W._i)(43079,{url:"/efficacy"},{preprocess:e=>(0,W.to)(e,"_1GV-Q")}),title:(0,W._i)(43080)}),s.createElement(gs,{animation:is,flip:!0,loopSegment:[190,532],text:(0,W._i)(43082),title:(0,W._i)(43081)}),s.createElement(gs,{animation:os,loopSegment:[200,300],text:(0,W._i)(43087),title:(0,W._i)(43086)}),s.createElement(gs,{animation:ls,flip:!0,loopSegment:[188,376],text:(0,W._i)(43085),title:(0,W._i)(43084)})),hs=({children:e})=>s.createElement("span",{className:"Eg_1d"},e),_s=a.p+"lottie/splash/44a604a8b57fe256f299aee33fa976a1.json",vs=a.p+"lottie/splash/d69c05e332d40f318009fefd85bfcd43.json",fs=a.p+"lottie/splash/76f61a943cfc8aa61dd79aea33db7a62.json",Ss=a.p+"lottie/splash/6ffec1cd2fa38b8106598e250d1b990b.json";const Es=e=>{var{children:t}=e,a=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(e,["children"]);return s.createElement(K.Z,Object.assign({className:te()((0,$.y)({variant:"stroke"}),"_3gKLK _2zs7L")},a),s.createElement(hs,null,t))},ys=()=>{const e=Jt();return s.createElement("section",{className:"FHbp1"},s.createElement(gs,{animation:_s,cta:s.createElement(Es,{href:`https://englishtest.duolingo.com/${null!=e?e:""}`,onClick:()=>(0,_.j)("click",{which:"web splash det"}),trackingScreen:"splash",trackingTarget:"det"},(0,W._i)(43090)),loopSegment:[0,115],text:(0,W._i)(43091),title:(0,W._i)(43092)}),s.createElement(gs,{animation:vs,cta:s.createElement(Es,{href:"https://schools.duolingo.com",onClick:()=>(0,_.j)("click",{which:"web splash schools"}),trackingScreen:"splash",trackingTarget:"schools"},(0,W._i)(43097)),flip:!0,loopSegment:[0,308],text:(0,W._i)(43098),title:(0,W._i)(43099)}),s.createElement(gs,{animation:fs,cta:s.createElement(Es,{href:"/abc",onClick:()=>(0,_.j)("click",{which:"web splash abc"}),trackingScreen:"splash",trackingTarget:"abc"},(0,W._i)(43093)),loopSegment:[240,480],text:(0,W._i)(43094),title:(0,W._i)(43095)}),s.createElement(gs,{animation:Ss,cta:s.createElement(Es,{href:"https://www.duolingo.com/math",isRoutableUrl:()=>!1,onClick:()=>(0,_.j)("click",{which:"web splash math"}),trackingScreen:"splash",trackingTarget:"math"},(0,W._i)(43101)),flip:!0,loopSegment:[0,360],text:(0,W._i)(43102),title:(0,W._i)(43103)}))},bs=a.p+"lottie/splash/9b9c41cb3a201cad24a2f18f90f4d564.json",ws=a.p+"lottie/splash/98fa4e2fa26d365936333da24aba7e36.json",Is="_1uduP",Ts="_3_Zp2",ks=({onRegisterClick:e})=>{const t=s.useRef(null),[a,n]=s.useState(0),[r,i]=s.useState(!1),[o,l]=s.useState(!1),c=s.useContext(as),d=s.useContext(ss),u=(0,F.Z)(),p=us((e=>{const t=(0,ts.bA)(e.targetRect.top,e.rootBounds.bottom,e.rootBounds.bottom-e.targetRect.height,0,45,!0);g.isAnimating()?g.update(t):g.start(a,t),d(ws,e.targetRect.top>e.rootBounds.bottom?1/0:-1)}),{onCleanup:()=>d(ws,1/0)}),g=(0,es.Z)((e=>n(e.done?e.target:e.current)),{clamp:!0});return s.useEffect((()=>{if(r&&!u){const e=setTimeout((()=>l(!0)),100);return()=>{clearTimeout(e),l(!1)}}}),[r,u]),s.createElement("section",{className:"PuGUO"},s.createElement("div",{className:Is}),s.createElement("div",{className:"_1lCOp"},s.createElement("div",{className:"_3CTAY"},s.createElement("h1",{className:"_2c15x"},(0,W._i)(43100)),s.createElement(K.Z,{className:te()((0,$.y)({variant:"solid"}),"_3CT_ _108yV"),href:"/register",onClick:e,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),ref:t,trackingScreen:"splash",trackingTarget:"get_started"},s.createElement(hs,null,(0,W._i)(18550)))),s.createElement("div",{className:"_1u6nm"},s.createElement(s.Suspense,{fallback:null},s.createElement(cs.Z,{className:Ts,isPlaying:c===ws&&!u,loop:!0,path:bs,renderSubframes:!1}),s.createElement(cs.Z,{className:Ts,isPlaying:!0,loop:o,mainSegment:o?[46,62]:[a,a+1],path:ws,renderSubframes:!1})),s.createElement("div",{className:"koAyD"}),s.createElement("div",{className:"S4hWo",ref:p}))),s.createElement("div",{className:Is}))},Cs=()=>s.createElement("footer",{className:"_24WTx"},s.createElement(ra,{isRedesign:!0}),s.createElement("hr",{className:"_36ayj"}),s.createElement(qt,{isRedesign:!0}),(0,L.J9)()?s.createElement(Bt.Z,{inSplash:!0}):null);var Rs=a(16494),Os=a(69755);const Ls=a.p+"images/splash/f92d5f2f7d56636846861c458c0d0b6c.svg",Ps=a.p+"lottie/splash/50bda50231c0bce1584e982cebfe8f33.json",As=({className:e})=>s.createElement("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 1080 1080"},s.createElement("defs",null,s.createElement("mask",{id:"splash/HeroImage_cn","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_a"})),s.createElement("mask",{id:"splash/HeroImage_cl","mask-type":"alpha"},s.createElement("g",{filter:"url(#splash/HeroImage_b)"},s.createElement("use",{xlinkHref:"#splash/HeroImage_c"}))),s.createElement("mask",{id:"splash/HeroImage_ck","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_d"})),s.createElement("mask",{id:"splash/HeroImage_cj","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_e"})),s.createElement("mask",{id:"splash/HeroImage_ch","mask-type":"alpha"},s.createElement("g",{filter:"url(#splash/HeroImage_f)"},s.createElement("use",{xlinkHref:"#splash/HeroImage_g"}))),s.createElement("mask",{id:"splash/HeroImage_cf","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_h"})),s.createElement("mask",{id:"splash/HeroImage_cd","mask-type":"alpha"},s.createElement("g",{filter:"url(#splash/HeroImage_i)"},s.createElement("use",{xlinkHref:"#splash/HeroImage_j"}))),s.createElement("mask",{id:"splash/HeroImage_cc","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_k"})),s.createElement("mask",{id:"splash/HeroImage_cb","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_l"})),s.createElement("mask",{id:"splash/HeroImage_bZ","mask-type":"alpha"},s.createElement("g",{filter:"url(#splash/HeroImage_m)"},s.createElement("use",{xlinkHref:"#splash/HeroImage_n"}))),s.createElement("mask",{id:"splash/HeroImage_bX","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_o"})),s.createElement("mask",{id:"splash/HeroImage_bV","mask-type":"alpha"},s.createElement("g",{filter:"url(#splash/HeroImage_p)"},s.createElement("use",{xlinkHref:"#splash/HeroImage_q"}))),s.createElement("mask",{id:"splash/HeroImage_bU","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_r"})),s.createElement("mask",{id:"splash/HeroImage_bT","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_s"})),s.createElement("mask",{id:"splash/HeroImage_bR","mask-type":"alpha"},s.createElement("g",{filter:"url(#splash/HeroImage_t)"},s.createElement("use",{xlinkHref:"#splash/HeroImage_u"}))),s.createElement("mask",{id:"splash/HeroImage_bH","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_v"})),s.createElement("mask",{id:"splash/HeroImage_bG","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_w"})),s.createElement("mask",{id:"splash/HeroImage_bE","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_x"})),s.createElement("mask",{id:"splash/HeroImage_bD","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_y"})),s.createElement("mask",{id:"splash/HeroImage_bB","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_z"})),s.createElement("mask",{id:"splash/HeroImage_bA","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_A"})),s.createElement("mask",{id:"splash/HeroImage_by","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_B"})),s.createElement("mask",{id:"splash/HeroImage_bx","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_C"})),s.createElement("mask",{id:"splash/HeroImage_bu","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_D"})),s.createElement("mask",{id:"splash/HeroImage_bv","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_E"})),s.createElement("mask",{id:"splash/HeroImage_br","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_F"})),s.createElement("mask",{id:"splash/HeroImage_bs","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_G"})),s.createElement("mask",{id:"splash/HeroImage_bo","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_H"})),s.createElement("mask",{id:"splash/HeroImage_bp","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_I"})),s.createElement("mask",{id:"splash/HeroImage_bl","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_J"})),s.createElement("mask",{id:"splash/HeroImage_bm","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_K"})),s.createElement("mask",{id:"splash/HeroImage_bh","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_L"})),s.createElement("mask",{id:"splash/HeroImage_bd","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_M"})),s.createElement("mask",{id:"splash/HeroImage_aZ","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_N"})),s.createElement("mask",{id:"splash/HeroImage_aX","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_O"})),s.createElement("mask",{id:"splash/HeroImage_aW","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_P"})),s.createElement("mask",{id:"splash/HeroImage_aV","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_Q"})),s.createElement("mask",{id:"splash/HeroImage_aT","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_R"})),s.createElement("mask",{id:"splash/HeroImage_aS","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_S"})),s.createElement("mask",{id:"splash/HeroImage_aR","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_T"})),s.createElement("mask",{id:"splash/HeroImage_aP","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_U"})),s.createElement("mask",{id:"splash/HeroImage_aO","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_V"})),s.createElement("mask",{id:"splash/HeroImage_aN","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_W"})),s.createElement("mask",{id:"splash/HeroImage_aL","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_X"})),s.createElement("mask",{id:"splash/HeroImage_aK","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_Y"})),s.createElement("mask",{id:"splash/HeroImage_aJ","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_Z"})),s.createElement("mask",{id:"splash/HeroImage_aG","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_aa"})),s.createElement("mask",{id:"splash/HeroImage_aF","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_ab"})),s.createElement("mask",{id:"splash/HeroImage_aE","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_ac"})),s.createElement("mask",{id:"splash/HeroImage_aC","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_ad"})),s.createElement("mask",{id:"splash/HeroImage_az","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_ae"})),s.createElement("mask",{id:"splash/HeroImage_ay","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_af"})),s.createElement("mask",{id:"splash/HeroImage_ax","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_ag"})),s.createElement("mask",{id:"splash/HeroImage_av","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_ah"})),s.createElement("mask",{id:"splash/HeroImage_as","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_ai"})),s.createElement("mask",{id:"splash/HeroImage_ar","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_aj"})),s.createElement("mask",{id:"splash/HeroImage_aq","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_ak"})),s.createElement("mask",{id:"splash/HeroImage_ao","mask-type":"alpha"},s.createElement("use",{xlinkHref:"#splash/HeroImage_al"})),s.createElement("clipPath",{id:"splash/HeroImage_am"},s.createElement("path",{d:"M0 0h1080v1080H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_cg"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_cm"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_ci"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bY"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_ce"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_ca"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bQ"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bW"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bS"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bP"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bO"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bN"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bM"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bL"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bK"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bJ"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bI"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bF"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bC"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bz"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bw"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bt"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bq"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bn"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bk"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bg"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bi"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_bc"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_be"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_aY"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_ba"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_aU"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_aQ"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_aM"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_aI"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_aB"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_aH"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_aD"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_au"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_aA"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_aw"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_an"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_at"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("clipPath",{id:"splash/HeroImage_ap"},s.createElement("path",{d:"M0 0h1920v1079H0z"})),s.createElement("path",{fill:"#FFF",d:"M417.282-239.018c9.82 103.73 232.12-521.78 246.127-392.97 2.29 21.056-1.03 35.089-25.598 34.308C579.475-599.534-474.306-352.811-542.757-356c-19.992-.931-32.638-5.554-41.553-20.711-57.369-97.54 273.023 350.483 372.968 190.244 6.619-10.613 112.579-70.911 115.818-79.402 5.292-13.87 22.173-23.063 48.437-23.234 104.499-.682 314.125-10.343 409.022-13.477 30.279-1 52.529 33.796 55.347 63.562z",transform:"matrix(-.5494 -.086 .086 -.5494 1622.22 780.829)",style:{display:"block"},id:"splash/HeroImage_q"}),s.createElement("path",{fill:"#DB8D74",d:"M431.079 338.492c3.758 36.37-5.144 49.227-17.954 80.525-12.513 30.467-2.174 59.613 23.296 67.222 31.828 9.736 59.328-3.404 73.764-46.726 13.09-38.962 18.125-69.661 11.792-114.595-11.209-78.484-96.913-44.208-90.898 13.574z",transform:"rotate(22.5 -131.847 3549.945)",style:{display:"block"},id:"splash/HeroImage_o"}),s.createElement("path",{fill:"#FFCBA3",d:"M214.911-406.123c-15.719-8.703-43.885-4.032-56.858 18.506-12.413 21.56-5.358 48.218 16.487 61.532 3.993 2.525 9.48 5.777 14.104 8.034 10.375-14.704 50.055-68.302 41.022-79.374-3.887-2.632-14.755-8.698-14.755-8.698z",transform:"rotate(11.503 -2472.413 5637.844) scale(1.08627)",style:{display:"block"},id:"splash/HeroImage_B"}),s.createElement("path",{fill:"#B23232",d:"m193.505-387.295.753 1.713c1.624 3.285.26 7.256-3.048 8.869-3.307 1.613-7.306.258-8.93-3.027l-.753-1.714c-1.624-3.285-.259-7.255 3.048-8.869 3.308-1.613 7.305-.257 8.93 3.028z",transform:"rotate(11.503 -2556.067 5682.86) scale(1.08627)",style:{display:"block"},id:"splash/HeroImage_C"}),s.createElement("path",{fill:"#50C800",d:"M-33.852-109.247H99.656c34.191 0 59.6 37.853 53.498 65.49-7.182 32.531-25.38 89.14-34.27 121.621-9.079 33.172-29.752 47.586-59.572 47.586-29.82 0-103.203-.074-132.006-.074-48.143 0-64.347-41.105-54.652-78.558 8.428-32.56 21.554-73.657 30.392-103.537 8.412-28.439 33.749-52.528 63.102-52.528z",transform:"rotate(-1 33645.183 -81234.865) scale(1.08)",style:{display:"block"},id:"splash/HeroImage_J"}),s.createElement("path",{fill:"#FFC7B8",d:"M663.878-74.736c-15.712-9.442-22.917-13.352-38.271-16.411-38.11-7.593-88.912 7.908-135.03 34.11-14.809 8.414-17.146 16.657-16.116 28.315 1.835 20.775 2.533 25.712 4.202 47.463.713 9.292 10.388 17.692 21.305 27.403 17.895 15.918 49.393 36.287 71.847 49.786 14.447 8.685 24.747-7.705 35.576-16.302 11.976-9.507 23.382-23.529 44.664-28.959 6.523-1.664 13.248-.917 18.267-5.161 21.003-17.763 36.226-38.226 45.549-58.626 5.74-12.561.103-23.389-10.439-31.393-21.023-15.962-32.09-24.538-41.554-30.225z",transform:"rotate(-44.75 1759.676 -945.154) scale(.77853)",style:{display:"block"},id:"splash/HeroImage_N"}),s.createElement("path",{fill:"#CC348D",d:"M745.232-224.137c-.304-28.44 22.505-51.741 50.945-52.045 28.44-.304 51.741 22.506 52.045 50.946.304 28.44-22.505 51.74-50.945 52.044-28.44.304-51.741-22.505-52.045-50.945z",transform:"rotate(-155 1413.888 80.768) scale(1.2)",style:{display:"block"},id:"splash/HeroImage_X"}),s.createElement("path",{fill:"#0084C2",d:"M732.862-124.382c4.759-25.473 29.266-42.264 54.739-37.505s42.265 29.265 37.506 54.738-29.266 42.265-54.739 37.506-42.265-29.266-37.506-54.739z",transform:"matrix(1.15 0 0 1.15 829.652 633.365)",style:{display:"block"},id:"splash/HeroImage_Y"}),s.createElement("path",{fill:"#FFF",d:"M412.599 78.212c-6.132 3.04-7.257 9.111-7.45 10.036l-2.078 9.955c-.804 3.852 1.678 7.626 5.543 8.43l7.348 1.528c7.924 1.648 15.683-3.417 17.331-11.313.495-2.371 3.308-16.424 3.308-16.424s-16.193-6.083-24.002-2.212zm-14.702-3.734c3.902 5.915 3.593 9.268 3.279 11.761-.411 3.262-1.961 10.655-1.961 10.655-.863 4.124-4.939 6.767-9.102 5.904l-7.271-1.508c-8.179-1.696-13.434-9.638-11.738-17.74.661-3.158 3.897-16.189 3.897-16.189s19.186 1.492 22.896 7.117z",transform:"matrix(0 0 -.03402 .6491 1636.956 664.083)",style:{display:"block"},id:"splash/HeroImage_aj"}),s.createElement("path",{fill:"#FFF",d:"M412.599 78.212c-6.132 3.04-7.257 9.111-7.45 10.036l-2.078 9.955c-.804 3.852 1.678 7.626 5.543 8.43l7.348 1.528c7.924 1.648 15.683-3.417 17.331-11.313.495-2.371 3.308-16.424 3.308-16.424s-16.193-6.083-24.002-2.212zm-14.702-3.734c3.902 5.915 3.593 9.268 3.279 11.761-.411 3.262-1.961 10.655-1.961 10.655-.863 4.124-4.939 6.767-9.102 5.904l-7.271-1.508c-8.179-1.696-13.434-9.638-11.738-17.74.661-3.158 3.897-16.189 3.897-16.189s19.186 1.492 22.896 7.117z",transform:"matrix(0 0 -.03402 .6491 1636.956 664.083)",style:{display:"block"},id:"splash/HeroImage_ak"}),s.createElement("filter",{id:"splash/HeroImage_b",filterUnits:"objectBoundingBox",x:"0%",y:"0%",width:"100%",height:"100%"},s.createElement("feComponentTransfer",{in:"SourceGraphic"},s.createElement("feFuncA",{type:"table",tableValues:"1.0 0.0"}))),s.createElement("filter",{id:"splash/HeroImage_f",filterUnits:"objectBoundingBox",x:"0%",y:"0%",width:"100%",height:"100%"},s.createElement("feComponentTransfer",{in:"SourceGraphic"},s.createElement("feFuncA",{type:"table",tableValues:"1.0 0.0"}))),s.createElement("filter",{id:"splash/HeroImage_i",filterUnits:"objectBoundingBox",x:"0%",y:"0%",width:"100%",height:"100%"},s.createElement("feComponentTransfer",{in:"SourceGraphic"},s.createElement("feFuncA",{type:"table",tableValues:"1.0 0.0"}))),s.createElement("filter",{id:"splash/HeroImage_m",filterUnits:"objectBoundingBox",x:"0%",y:"0%",width:"100%",height:"100%"},s.createElement("feComponentTransfer",{in:"SourceGraphic"},s.createElement("feFuncA",{type:"table",tableValues:"1.0 0.0"}))),s.createElement("filter",{id:"splash/HeroImage_p",filterUnits:"objectBoundingBox",x:"0%",y:"0%",width:"100%",height:"100%"},s.createElement("feComponentTransfer",{in:"SourceGraphic"},s.createElement("feFuncA",{type:"table",tableValues:"1.0 0.0"}))),s.createElement("filter",{id:"splash/HeroImage_t",filterUnits:"objectBoundingBox",x:"0%",y:"0%",width:"100%",height:"100%"},s.createElement("feComponentTransfer",{in:"SourceGraphic"},s.createElement("feFuncA",{type:"table",tableValues:"1.0 0.0"}))),s.createElement("linearGradient",{id:"splash/HeroImage_bj",spreadMethod:"pad",gradientUnits:"userSpaceOnUse"},s.createElement("stop",null),s.createElement("stop",null),s.createElement("stop",null)),s.createElement("linearGradient",{id:"splash/HeroImage_bf",spreadMethod:"pad",gradientUnits:"userSpaceOnUse"},s.createElement("stop",null),s.createElement("stop",null),s.createElement("stop",null)),s.createElement("linearGradient",{id:"splash/HeroImage_bb",spreadMethod:"pad",gradientUnits:"userSpaceOnUse",x1:"542.181",y1:"38.77",x2:"594.279",y2:"167.238"},s.createElement("stop",{offset:"0%",stopColor:"#FFA75F"}),s.createElement("stop",{offset:"50%",stopColor:"#FFB78B"}),s.createElement("stop",{offset:"100%",stopColor:"#FFC7B8"}))),s.createElement("g",{clipPath:"url(#splash/HeroImage_am)"},s.createElement("g",{clipPath:"url(#splash/HeroImage_an)",transform:"matrix(-1 0 0 1 1916 -23.5)",style:{display:"block"}},s.createElement("g",{style:{display:"block"}},s.createElement("path",{fill:"#58CC02",d:"M1681.457 320.208c-12.538 54.456-106.878 481.498-125.468 564.221-1.022 4.548-2.148 9.037-3.462 13.395-3.404 11.291-8.068 21.697-15.445 29.926-9.958 11.108-24.858 18.25-48.274 18.25-36.776 0-292.497-6.849-327.725-6.849-12.383 0-22.016-6.309-27.946-16.038-.378-.621-21.615-38.648-21.921-39.316-4.748-10.373-6.57-22.86-2.947-37.253 24.84-98.693 119.597-486.725 137.44-565.604 1.885-8.335 4.816-16.412 8.7-23.828 4.404-8.409 10.033-15.969 16.751-22.095 10.802-9.849 24.42-15.99 40.293-15.99h287.02c14.334 0 25.578 5.972 33.13 15.054.879 1.057 41.935 44.299 42.713 45.436 7.746 11.319 10.439 26.367 7.141 40.691z"}),s.createElement("path",{stroke:"#58CC02",strokeWidth:13,d:"M1681.457 320.208c-12.538 54.456-106.878 481.498-125.468 564.221-1.022 4.548-2.148 9.037-3.462 13.395-3.404 11.291-8.068 21.697-15.445 29.926-9.958 11.108-24.858 18.25-48.274 18.25-36.776 0-292.497-6.849-327.725-6.849-12.383 0-22.016-6.309-27.946-16.038-.378-.621-21.615-38.648-21.921-39.316-4.748-10.373-6.57-22.86-2.947-37.253 24.84-98.693 119.597-486.725 137.44-565.604 1.885-8.335 4.816-16.412 8.7-23.828 4.404-8.409 10.033-15.969 16.751-22.095 10.802-9.849 24.42-15.99 40.293-15.99h287.02c14.334 0 25.578 5.972 33.13 15.054.879 1.057 41.935 44.299 42.713 45.436 7.746 11.319 10.439 26.367 7.141 40.691z",fill:"none"}),s.createElement("path",{fill:"#FFF",d:"M1641.23 278.067c-12.538 54.456-110.709 481.142-129.299 563.865-7.243 32.232-19.721 61.572-67.181 61.572-36.776 0-268.552.149-303.78.149-26.121 0-40.009-28.074-32.701-57.109 24.84-98.693 119.597-486.725 137.44-565.604 7.46-32.977 31.29-61.913 65.744-61.913h287.02c32.614 0 49.232 30.916 42.757 59.04z"}),s.createElement("path",{stroke:"#9DEEC7",strokeWidth:13,d:"M1641.23 278.067c-12.538 54.456-110.709 481.142-129.299 563.865-7.243 32.232-19.721 61.572-67.181 61.572-36.776 0-268.552.149-303.78.149-26.121 0-40.009-28.074-32.701-57.109 24.84-98.693 119.597-486.725 137.44-565.604 7.46-32.977 31.29-61.913 65.744-61.913h287.02c32.614 0 49.232 30.916 42.757 59.04z",fill:"none"}))),s.createElement("g",{clipPath:"url(#splash/HeroImage_bk)",transform:"matrix(-1 0 0 1 1976 -43.5)",style:{display:"block"}},s.createElement("g",{mask:"url(#splash/HeroImage_bl)",style:{display:"block"}},s.createElement("path",{fill:"#50C800",d:"m1384.254 457.488 144.166-2.516c36.921-.645 65.072 39.751 59.004 69.71-7.142 35.263-25.726 96.735-34.714 131.976-9.178 35.992-31.23 51.946-63.43 52.508-32.201.562-111.444 1.865-142.547 2.408-51.986.908-70.259-43.173-60.496-83.8 8.487-35.318 21.887-79.943 30.867-112.375 8.548-30.868 35.453-57.358 67.15-57.911z"}),s.createElement("path",{fill:"#8EE000",d:"M1561.288 610.003c5.14-18.424 9.149-32.246 12.886-49.66 3.568-16.632-8.951-34.893-14.28-40.087 2.625-9.372 5.548-28.175-2.12-30.679-7.667-2.503-19.31 12.632-19.36 12.608 6.479-26.997-4.97-29.835-14.024-22.352-11.258 9.304-31.789 30.28-50.203 45.6-18.414 15.319-44.513 9.774-56.255-3.465-12.569-14.171-21.69-33.818-30.832-44.844-9.141-11.025-22.11 12.33-22.073 26.459-.074.026-2.176-2.997-6.706-8.786-6.639-8.486-17.043-2.969-20.442 18.304-22.656 11.602-30.359 28.738-33.886 39.968 0 0-9.316 26.5-10.08 52.761-.697 23.909 23.058 47.663 49.675 47.198 25.124-.438 51.666-11.467 60.284-31.583 8.62-.2 34.442-.72 39.136-.802 2.71 17.3 23.039 35.96 53.251 35.433 42.027-.733 60.884-31.21 65.029-46.073z"}),s.createElement("path",{fill:"#FFF",d:"M1372.718 525.2c25.155-.44 36.313 18.16 32.401 40.82-1.734 10.045-3.06 16.729-5.032 24.966-5.905 24.68-27.477 41.984-50.74 42.39-22.946.4-38.26-18.48-33.444-40.92 1.942-9.048 4.616-20.095 6.057-25.906 5.61-22.632 25.603-40.911 50.758-41.35zm148.365 3.654c25.205-.44 36.386 18.197 32.466 40.901-1.738 10.066-3.067 16.764-5.043 25.017-5.917 24.73-27.53 42.067-50.84 42.474-22.991.401-38.337-18.516-33.511-41.001 1.946-9.066 4.626-20.134 6.07-25.958 5.622-22.676 25.652-40.993 50.858-41.433z"}),s.createElement("path",{fill:"#4B4B4B",d:"M1501.191 552.847c-9.21-3.833-19.202.694-21.317 11.598-2.336 12.036-4.934 21.96-5.068 27.345-.182 7.335 2.82 20.21 16.097 20.09 11.704-.106 17.471-5.756 19.785-13.142 2.508-8.011 4.222-19.361 4.774-22.707-6.088.219-11.338-1.782-14.592-6.448-3.87-5.55-1.08-12.408.321-16.736zm-122.218-5.06c-9.273-3.672-18.7 1.455-21.175 12.386-2.423 10.702-2.986 15.003-4.032 20.338-2.1 10.716-2.713 21.548 10.482 26.06 11.126 3.803 22.15-3.99 24.507-12.703 2.213-8.18 4.573-19.732 5.078-23.116-5.015.842-11.4-.346-15.448-5.795-4.044-5.445-2.76-13.456.588-17.17z"}),s.createElement("path",{fill:"#8EE000",d:"M1374.367 518.17c-46.003.302-51.565 25.403-51.565 25.403s.191-.262.57-.73c3.306-4.086 20.945-23.892 51.038-22.174 33.54 1.915 38.932 24.324 67.462 25.827 28.531 1.502 56.552-23.993 79.113-22.884 24.801 1.219 36.595 19.378 39.95 25.665.709 1.326 1.041 2.124 1.041 2.124s-5.55-31.408-42.043-30.771c-36.495.637-40.12 22.203-77.623 22.357-37.503.155-21.941-25.12-67.943-24.818zm50.085 93.108c28.684-.5 39.004 35.908 67.64 37.825 29.993 2.008 50.2-6.908 51.193-22.537-7.9 5.811-13.687 19.882-45.727 16.957-32.04-2.926-46.163-32.112-73.13-33.483-29.699-1.51-43.898 32.04-77.925 31.666-27.488-.304-35.18-18.03-35.18-18.03s-1.428 23.779 33.582 23.168c36.698-.64 50.865-35.065 79.547-35.566z"}),s.createElement("path",{fill:"#F48000",d:"M1446.278 622.454c-2.659 15.765-12.302 23.187-25.182 23.412-11.825.207-20.343-10.41-18.023-22.273.367-1.877.88-3.494 1.523-4.89 3.474-7.533 10.76-8.598 19.511-9.183 9.31-.622 22.015-3.035 22.504 8.439.055 1.309-.047 2.8-.333 4.495z"}),s.createElement("path",{fill:"#B16900",d:"M1444.562 608.13c-2.334 12.411-10.725 18.268-21.918 18.464-10.277.18-17.664-8.165-15.631-17.505.322-1.478-.033 1.388.528.29 3.03-5.936 9.364-6.785 16.97-7.258 8.09-.503 19.136-2.418 19.544 6.611.046 1.031.758-1.937.507-.603z"}),s.createElement("path",{fill:"#FFB8D1",d:"M1444.562 608.13c-2.334 12.411-10.725 18.268-21.918 18.464-5.961.104-10.949-2.659-13.69-6.82-1.987-3.014 35.859-12.979 35.608-11.645z"}),s.createElement("path",{fill:"#FFC200",d:"M1396.101 618.567c3.998-15.708 15.795-21.4 31.136-21.668 13.956-.244 27.466 7.88 27.52 22.206a2.72 2.72 0 0 1-1.98 2.635c-1.153.318-29.522 6.193-29.522 6.193s-24.016-6.636-25.272-6.825c-1.257-.188-2.414-.451-1.882-2.54z"}),s.createElement("path",{fill:"#FFE747",d:"M1421.383 599.647c4.944-1.021 10.276-.84 14.98.377 3.205.83 4.884 3.374 3.977 5.511-.862 2.028-3.51 3.386-6.361 2.373-4.062-1.445-9.936-1.342-13.753-.596-3.006.587-4.986-1.652-4.767-3.381.362-2.847 3.47-3.776 5.924-4.284z"}))))),Ns=[130,290],Ds=({animateTopbar:e,hideTopbar:t,onLogInClick:a,onRegisterClick:n})=>{const r=(0,Os.Z)(),i=(0,F.Z)(),{forceLoop:o,isPlaying:l,ref:c}=ps(Ps),[d,u]=(0,wt.Z)({rootMargin:"-72px 0px 0px 0px"}),p=(0,Oe.vl)().via,g="WeChat"===p?xa:"DET"===p?Da:Ma,[m,h]=s.useState(!1);return s.createElement("header",{className:"_2thjR"},s.createElement("div",{className:te()("_1zfw8",{_24nfK:e,_4dkCo:t,_1T2iN:r})},s.createElement("nav",{className:d?"_28EpS":"_26tUM _28EpS"},s.createElement(K.Z,{href:"/"},s.createElement("img",{alt:"Duolingo",className:"_3vO_M",src:Ls})),d?s.createElement(Rs.Z,{className:"_3cBul",style:"hare-always-light",trackingScreen:"splash"}):s.createElement(K.Z,{className:te()((0,$.y)({variant:"solid"}),"_3a4qh _108yV _2dZP2"),href:"/register",onClick:()=>n("topbar"),trackingScreen:"splash",trackingTarget:"get_started"},s.createElement(hs,null,(0,W._i)(18550))))),s.createElement("div",{className:"_14HGC"},s.createElement("div",{className:"_12Box"},s.createElement(As,{className:m?"_292Pu _16fn_ _1El9H _1G1lu":"_16fn_ _1El9H _1G1lu"}),s.createElement(s.Suspense,{fallback:null},s.createElement(cs.Z,{className:"p2RWU _1El9H _1G1lu",isPlaying:l&&!i,loop:!0,loopSegment:Ns,mainSegment:o?Ns:void 0,onEnterFrame:()=>{m||h(!0)},path:Ps,ref:c,renderSubframes:!1,renderer:"svg"}))),s.createElement("div",{className:"rorWK"},s.createElement("h1",{className:"_2WUmm"},(0,W._i)(29896)),s.createElement("div",{className:"rfeYA"},s.createElement(K.Z,Object.assign({},(0,le._q)(de.V.GetStartedTop),{className:te()((0,$.y)({variant:"solid"}),"_2BmYA _108yV"),href:"/register",onClick:()=>n("top"),ref:u,trackingScreen:"splash",trackingTarget:"get_started"}),s.createElement(hs,null,(0,W._i)(18550))),s.createElement($.Z,Object.assign({},(0,le._q)(de.V.HaveAccount),{className:"_3kqMC _2zs7L",onClick:()=>a("top"),variant:"stroke"}),s.createElement(hs,null,(0,W._i)(20690)))),["zh","zh-CN"].includes(window.duo.uiLanguage)&&da.Z.desktop&&(0,L.J9)()?s.createElement("div",{className:"_1F_l_"},s.createElement("img",{className:"_2m66c",src:g}),s.createElement($.Z,{className:"GaxSt",onClick:()=>(0,Xt.ci)("splash-page")},s.createElement("span",{className:"_3ypo5"},s.createElement("span",{className:"_3GVMw"},"扫一扫下载 APP"),s.createElement("img",{src:Na})))):null)),s.createElement("div",{className:"xwdTG"},s.createElement(Aa.Z,{className:"_2RRTY",onCarouselItemClick:()=>(0,_.j)("click",{which:"splash page flag"}),trackingScreen:"splash"})))},xs=a.p+"lottie/splash/c16e90b93e35750c893be4b58720cef2.json",Ms=a.p+"lottie/splash/c02b5f75d9ec48815e6a964f641a9fe2.json",Fs="_1xgnW",Us=s.forwardRef((({},e)=>{const t=s.useRef(),a=s.useRef(null),n=s.useContext(as),r=s.useContext(ss),i=(0,F.Z)(),o=us((e=>{var a;let s=(0,ts.bA)(e.targetRect.top,e.rootBounds.bottom,-e.targetRect.height,0,450);r(xs,s>=0&&s<=450?-1:1/0),s=Math.min(Math.max(s,0),450),l.isAnimating()?l.update(s):l.start(null!==(a=t.current)&&void 0!==a?a:s,s)}),{onCleanup:()=>r(xs,1/0)}),l=(0,es.Z)((e=>{var s;const n=e.done?e.target:e.current;t.current=n,(null===(s=a.current)||void 0===s?void 0:s.animation)&&a.current.animation.goToAndStop(n,!0)}),{clamp:!0});return s.createElement("section",{className:"_2jThV",ref:e},s.createElement("div",{className:"_31XTb"},s.createElement("div",{className:"_1ibwG"},s.createElement("h1",{className:"_2FNP1"},(0,W._i)(43096)),s.createElement("div",{className:"U4gVg"},s.createElement(ca.Z,{href:da.Z.desktop?(0,W.H8)(22504,void 0,{addRightToLeftMark:!1}):(0,Xt.fy)({via:"splash_page"}),onClick:()=>{(0,_.j)("click",{screen:"splash",target:"mobile_download_ios"}),(0,_.j)("click",{which:"mobile download ios"}),(0,_.j)("web_to_app_store_tap",{target:"apple",via:"splash_page"})},size:"medium",style:"snow-always-light",type:"apple",via:"splash_page"}),s.createElement(ca.Z,{href:da.Z.desktop?(0,Xt.A)({utmCampaign:"splash",utmContent:"download_button"}):(0,Xt.Ir)({via:"splash_page"}),onClick:()=>{(0,_.j)("click",{screen:"splash",target:"mobile_download_android"}),(0,_.j)("click",{which:"mobile download android"}),(0,_.j)("web_to_app_store_tap",{target:"google_or_China",via:"splash_page"})},size:"medium",style:"snow-always-light",type:(0,L.J9)()?"china":"google"}))),s.createElement("div",{className:"_1shi2"},s.createElement(s.Suspense,{fallback:s.createElement("div",{className:Fs})},s.createElement(cs.Z,{className:Fs,isPlaying:n===xs&&!i,loop:!0,path:Ms,renderSubframes:!1}),s.createElement(cs.Z,{className:Fs,isPlaying:!1,path:xs,ref:a,renderSubframes:!1}),s.createElement("div",{className:"_1MLHY",ref:o})))))}));var Hs=a(98683);const js=a.p+"images/splash/3a733db6d6873e1a915f70cf72554ce3.svg",Gs=a.p+"images/splash/dd7453522d3192d4df06d4652508b8bc.svg",Bs=a.p+"lottie/splash/904f242fe2ab5477e3b97928d3e1cb89.json",Vs="_1ZP4R _1G1lu",zs=[35,156],Zs=parseFloat("768px"),$s=s.forwardRef((({},e)=>{const t=(0,F.Z)(),{forceLoop:a,isPlaying:n,ref:r}=ps(Bs),i=(0,Hs.Q)({iapContext:"splash"});return s.createElement("section",{className:"_3G_zn",ref:e},s.createElement("div",{className:"_1oRMA"},s.createElement(s.Suspense,{fallback:s.createElement("div",{className:Vs})},s.createElement(cs.Z,{className:Vs,fillMode:"forwards",isPlaying:n&&!t,loop:!0,loopSegment:zs,mainSegment:a?zs:void 0,path:Bs,ref:r,renderSubframes:!1})),s.createElement("div",{className:"_3zkDL"},s.createElement("picture",null,s.createElement("source",{height:91,media:`(min-width: ${Zs}px)`,srcSet:js,width:605}),s.createElement("img",{alt:(0,W.H8)(36712),className:"_1k0Xw",height:55,src:Gs,width:339})),s.createElement($.Z,{className:"gQU52 _1Rcu8",onClick:i,variant:"solid"},s.createElement(hs,null,(0,W._i)(43088))))))})),qs=()=>{const e=(0,h.tX)(),t=s.useRef(),a=s.useRef(null),n=s.useRef(null),r=s.useRef(null),[i,o]=s.useState(!1),[l,c]=s.useState(!1),[d,u]=s.useState(!1);(0,R.Z)("SplashPageRedesign"),Ka();const p=(0,es.Z)((e=>{const s=e.done?e.target:e.current;if(t.current=s,a.current){const e=(0,ts.bA)(s,0,100,0,1,!0);a.current.style.setProperty("opacity",`${e}`)}}),{clamp:!0}),g=us((e=>{var a,s;const i=null===(a=n.current)||void 0===a?void 0:a.getBoundingClientRect();if(!i)return;(e=>{var a;p.isAnimating()?p.update(e):p.start(null!==(a=t.current)&&void 0!==a?a:e,e)})((0,ts.bA)(i.top,e.rootBounds.bottom,e.rootBounds.top,0,100,!0));const o=null===(s=r.current)||void 0===s?void 0:s.getBoundingClientRect();o&&(c(i.top-96<e.rootBounds.top&&o.bottom>e.rootBounds.top),u(!0))}),{onInvisible:()=>u(!0)}),m=e=>{(0,_.j)("splash_tap",{target:"get_started"}),(0,_.j)("click",{which:`splash page get started ${e}`})};return s.useEffect((()=>{d&&o(!0)})),s.createElement("div",{className:"_1aPn6",ref:g},s.createElement(Qa,null),s.createElement(qa,{sameAs:["https://www.youtube.com/duolingo","https://twitter.com/duolingo","https://www.facebook.com/duolingo","https://www.linkedin.com/company/duolingo/","https://www.instagram.com/duolingo/","https://www.twitch.tv/Duolingo"]}),s.createElement(kt.ql,null,s.createElement("body",{className:"_2lFJu"})),s.createElement(ns,null,s.createElement(Ds,{animateTopbar:i,hideTopbar:l,onLogInClick:()=>{(0,_.j)("click",{screen:"splash",target:"has_account"}),(0,_.j)("splash_tap",{target:"has_account"}),e({options:{allowLanguagelessUser:!0,isSignIn:!0,name:Q.t.SignInUp,via:"onboarding"},type:"TOGGLE_MODAL"})},onRegisterClick:m}),"full"===window.duo.dotcomRedesign?s.createElement("main",null,s.createElement("div",{className:"_3E7tX"},s.createElement("div",{className:"_1CGry _27f-k",ref:a}),s.createElement(ms,null),s.createElement(Us,{ref:n})),s.createElement($s,{ref:r}),s.createElement(ys,null),s.createElement(ks,{onRegisterClick:()=>m("bottom")})):null,s.createElement(Cs,null)),da.Z.silk?null:(0,L.J9)()?s.createElement(za,{isRedesign:!0}):da.Z.android?s.createElement(Ba,{isRedesign:!0}):null)},Ws=e=>"string"==typeof e?e:[e.pathname,e.search,e.hash].join(""),Qs=e=>{const t=(0,T.TH)();return s.useEffect((()=>{(0,_.mh)(Ws(t),Ws(e.to),"soft")}),[]),s.createElement(n.l_,Object.assign({},e))},Ys=(...e)=>e,Js=({children:e,location:t,match:{params:a}})=>{return(0,M.Pc)()?s.createElement(Qs,{to:{pathname:(n=["/enroll",a.learningLanguageId,a.fromLanguageId,a.slug],n.reduceRight(((e,t)=>t?e?`${t}/${e}`:t:""),"")),search:t.search}}):s.createElement(s.Fragment,null,e);var n};var Ks=a(29134);const Xs=(0,Qe.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(2668),a.e(5314),a.e(3766),a.e(8449),a.e(4128),a.e(8327),a.e(2987),a.e(5268),a.e(9879),a.e(4253),a.e(1343),a.e(853),a.e(1182),a.e(5467)]).then(a.bind(a,14079)))),en=(0,Qe.Z)((()=>Promise.all([a.e(2668),a.e(5314),a.e(3766),a.e(2185),a.e(1684),a.e(9788),a.e(2987),a.e(2956),a.e(4253),a.e(1343),a.e(1350),a.e(4011),a.e(3016),a.e(853),a.e(6098),a.e(950),a.e(2131),a.e(4104),a.e(7507)]).then(a.bind(a,4293)))),tn=(0,Qe.Z)((()=>a.e(1436).then(a.bind(a,61436)))),an=(0,Qe.Z)((()=>a.e(2980).then(a.bind(a,81603)))),sn=(0,Qe.Z)((()=>a.e(2177).then(a.bind(a,12177)))),nn=(0,Qe.Z)((()=>a.e(8962).then(a.bind(a,76692)))),rn=(0,Qe.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(2274),a.e(2987),a.e(5268),a.e(2659),a.e(2956),a.e(5404),a.e(494),a.e(1350),a.e(4011),a.e(345)]).then(a.bind(a,80306)))),on=(0,Qe.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(2274),a.e(2987),a.e(5268),a.e(2659),a.e(2956),a.e(5404),a.e(494),a.e(1350),a.e(4011),a.e(6541)]).then(a.bind(a,98968)))),ln=(0,Qe.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(2987),a.e(5268),a.e(2659),a.e(2956),a.e(5404),a.e(494),a.e(7424)]).then(a.bind(a,2072)))),cn=(0,Qe.Z)((()=>Promise.all([a.e(5809),a.e(2987),a.e(7660)]).then(a.bind(a,9708)))),dn=(0,Qe.Z)((()=>Promise.all([a.e(2668),a.e(4253),a.e(1343),a.e(3479),a.e(881)]).then(a.bind(a,47190)))),un=(0,Qe.Z)((()=>Promise.all([a.e(2668),a.e(5314),a.e(3766),a.e(2185),a.e(1684),a.e(9788),a.e(2987),a.e(2956),a.e(4253),a.e(1343),a.e(1350),a.e(4011),a.e(3016),a.e(853),a.e(6098),a.e(950),a.e(2131),a.e(4104),a.e(7507)]).then(a.bind(a,58310)))),pn=(0,Qe.Z)((()=>Promise.all([a.e(2668),a.e(5314),a.e(3766),a.e(407),a.e(2185),a.e(7493),a.e(1684),a.e(9788),a.e(2987),a.e(2956),a.e(4253),a.e(1343),a.e(1350),a.e(4011),a.e(3016),a.e(853),a.e(6098),a.e(950),a.e(3860),a.e(2131),a.e(7187),a.e(4104),a.e(2223),a.e(5993)]).then(a.bind(a,45993)))),gn=(0,Qe.Z)((()=>Promise.all([a.e(2668),a.e(5314),a.e(3766),a.e(2185),a.e(1684),a.e(9788),a.e(2987),a.e(2956),a.e(4253),a.e(1343),a.e(1350),a.e(4011),a.e(3016),a.e(853),a.e(6098),a.e(950),a.e(2131),a.e(4104),a.e(7507)]).then(a.bind(a,65637)))),mn=(0,Qe.Z)((()=>a.e(9199).then(a.bind(a,69199)))),hn=(0,Qe.Z)((()=>Promise.all([a.e(2668),a.e(5314),a.e(3766),a.e(2185),a.e(1684),a.e(9788),a.e(2987),a.e(2956),a.e(4253),a.e(1343),a.e(1350),a.e(4011),a.e(3016),a.e(853),a.e(6098),a.e(950),a.e(2131),a.e(4104),a.e(7507)]).then(a.bind(a,89267)))),_n=(0,Qe.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(2987),a.e(5268),a.e(2659),a.e(2956),a.e(5404),a.e(494),a.e(6885)]).then(a.bind(a,10296)))),vn=(0,Qe.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(2987),a.e(5268),a.e(2659),a.e(2956),a.e(5404),a.e(494),a.e(1876)]).then(a.bind(a,84212)))),fn=(0,Qe.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(2987),a.e(5268),a.e(2659),a.e(2956),a.e(5404),a.e(494),a.e(6086)]).then(a.bind(a,91097)))),Sn=(0,Qe.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(2987),a.e(5268),a.e(2659),a.e(5404),a.e(2389)]).then(a.bind(a,5847)))),En=(0,Qe.Z)((()=>Promise.all([a.e(5314),a.e(3766),a.e(1182),a.e(1014)]).then(a.bind(a,13745)))),yn=(0,Qe.Z)((()=>a.e(1348).then(a.bind(a,41348)))),bn=(0,Qe.Z)((()=>a.e(726).then(a.bind(a,53020)))),wn=(0,Qe.Z)((()=>a.e(5862).then(a.bind(a,5862)))),In=(0,Qe.Z)((()=>a.e(1958).then(a.bind(a,33790)))),Tn=(0,Qe.Z)((()=>a.e(4772).then(a.bind(a,4772)))),kn=(0,Qe.Z)((()=>a.e(8788).then(a.bind(a,43029)))),Cn=(0,Qe.Z)((()=>a.e(7451).then(a.bind(a,27451)))),Rn=(0,Qe.Z)((()=>a.e(6782).then(a.bind(a,26782)))),On=(0,Qe.Z)((()=>Promise.all([a.e(8449),a.e(130)]).then(a.bind(a,57725)))),Ln=(0,Qe.Z)((()=>a.e(5146).then(a.bind(a,20629)))),Pn=(0,Qe.Z)((()=>a.e(4850).then(a.bind(a,20590)))),An=(0,Qe.Z)((()=>Promise.all([a.e(1229),a.e(7281)]).then(a.bind(a,33513)))),Nn=(0,Qe.Z)((()=>Promise.all([a.e(1229),a.e(1218)]).then(a.bind(a,44352)))),Dn=(0,Qe.Z)((()=>Promise.all([a.e(1229),a.e(512),a.e(1954)]).then(a.bind(a,95907)))),xn=(0,Qe.Z)((()=>Promise.all([a.e(2668),a.e(4253),a.e(3547),a.e(4152)]).then(a.bind(a,54345)))),Mn=(0,Qe.Z)((()=>a.e(5249).then(a.bind(a,25249)))),Fn=(0,Qe.Z)((()=>a.e(7182).then(a.bind(a,97182)))),Un=(0,Qe.Z)((()=>a.e(4001).then(a.bind(a,4001)))),Hn=(0,Qe.Z)((()=>a.e(4702).then(a.bind(a,24702)))),jn=(0,Qe.Z)((()=>a.e(6202).then(a.bind(a,56202)))),Gn=(0,Qe.Z)((()=>a.e(3827).then(a.bind(a,83827)))),Bn=(0,Qe.Z)((()=>a.e(7957).then(a.bind(a,97957)))),Vn=(0,Qe.Z)((()=>a.e(3473).then(a.bind(a,13473)))),zn=(0,Qe.Z)((()=>Promise.resolve().then(a.bind(a,54452)))),Zn=(0,Qe.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(1548),a.e(2987),a.e(5268),a.e(2659),a.e(9879),a.e(9687),a.e(9838)]).then(a.bind(a,76738)))),$n=(0,Qe.Z)((()=>Promise.all([a.e(9879),a.e(2915)]).then(a.bind(a,91380)))),qn=(0,Qe.Z)((()=>Promise.all([a.e(9879),a.e(2432)]).then(a.bind(a,85180)))),Wn=(0,Qe.Z)((()=>a.e(6811).then(a.bind(a,4224)))),Qn=(0,Qe.Z)((()=>a.e(5258).then(a.bind(a,5793)))),Yn=(0,Qe.Z)((()=>Promise.all([a.e(9879),a.e(1066)]).then(a.bind(a,58921)))),Jn=(0,Qe.Z)((()=>a.e(5473).then(a.bind(a,18)))),Kn=(0,Qe.Z)((()=>Promise.all([a.e(9879),a.e(6285)]).then(a.bind(a,16855)))),Xn=(0,Qe.Z)((()=>Promise.all([a.e(9879),a.e(5893)]).then(a.bind(a,15390)))),er=(0,Qe.Z)((()=>Promise.all([a.e(2668),a.e(1548),a.e(9284),a.e(4253),a.e(1343),a.e(3479),a.e(411)]).then(a.bind(a,61370)))),tr=(0,Qe.Z)((()=>a.e(7606).then(a.bind(a,67606)))),ar=(0,Qe.Z)((()=>Promise.all([a.e(5314),a.e(3766),a.e(407),a.e(2185),a.e(7493),a.e(1350),a.e(3016),a.e(853),a.e(6098),a.e(950),a.e(3860),a.e(2131),a.e(7187),a.e(2223),a.e(1605)]).then(a.bind(a,19449)))),sr=(0,Qe.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(2987),a.e(5268),a.e(2659),a.e(2956),a.e(5404),a.e(494),a.e(6803)]).then(a.bind(a,58628)))),nr=(0,Qe.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(1008),a.e(2987),a.e(5268),a.e(2659),a.e(2956),a.e(5404),a.e(494),a.e(1350),a.e(4011),a.e(324)]).then(a.bind(a,59709)))),rr=(0,Qe.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(2987),a.e(5268),a.e(2659),a.e(2956),a.e(5404),a.e(494),a.e(2160)]).then(a.bind(a,94740)))),ir=(0,Qe.Z)((()=>a.e(1099).then(a.bind(a,22470)))),or=(0,Qe.Z)((()=>a.e(70).then(a.bind(a,20343)))),lr=(0,Qe.Z)((()=>a.e(6274).then(a.bind(a,65595)))),cr=(0,Qe.Z)((()=>a.e(3841).then(a.bind(a,59177)))),dr=(0,Qe.Z)((()=>Promise.all([a.e(2668),a.e(4253),a.e(1343),a.e(7014)]).then(a.bind(a,7096)))),ur=(0,Qe.Z)((()=>a.e(940).then(a.bind(a,90940)))),pr=(0,Qe.Z)((()=>a.e(3162).then(a.bind(a,1271)))),gr=(0,Qe.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(2987),a.e(5268),a.e(2659),a.e(5404),a.e(9879),a.e(9687),a.e(4843)]).then(a.bind(a,42164)))),mr=(0,Qe.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(2987),a.e(5268),a.e(2659),a.e(2956),a.e(5404),a.e(494),a.e(8833)]).then(a.bind(a,96708)))),hr=(0,Qe.Z)((()=>Promise.all([a.e(8250),a.e(148),a.e(2987),a.e(5268),a.e(2659),a.e(2956),a.e(5404),a.e(494),a.e(8833)]).then(a.bind(a,42754)))),_r=e=>{const t=({children:t})=>s.createElement(pr,{feature:e},t);return t.displayName=`UnavailableInZombieMode feature="${e}"`,t},vr=e=>e.flatMap((e=>{if(void 0===e.subroutes)return e;const{components:t=[],exact:a=!1,path:s="",props:n={}}=e;return vr(e.subroutes).map((({components:e=[],exact:r=!1,path:i="",props:o={}})=>({components:[...t,...e],exact:a||r,path:`${s}${i}`,props:Object.assign(Object.assign({},n),o)})))})),fr=!0,Sr=!0,Er={noMobileTabbar:fr,noMobileTopbar:Sr},yr={noDesktopTopbar:!0,noMobileTabbar:fr,noMobileTopbar:Sr},br={noContainer:!0,noDesktopTopbar:!0,noMobileTabbar:fr,noMobileTopbar:Sr},wr=({appProps:e,components:t,routerProps:a})=>{const n=s.useMemo((()=>{const e=[Xs,...t].filter(Qe.N).filter((e=>!e.hasLoaded()));return 0===e.length?void 0:Promise.all(e.map((e=>e.preload())))}),[t]),r=(0,Ks.Z)([],(async()=>(await n,t)),[n]),i=void 0===n?t:r,o=(()=>{if(t===i)return t;const e=t.findIndex(((e,t)=>e!==i[t]));return 0!==i.length&&-1===e?t:t.slice(0,e)})();return s.createElement(Xs,Object.assign({},a,e),o.reduceRight(((e,t)=>s.createElement(t,Object.assign({},a),e)),null))},Ir=(0,Qe.Z)((()=>Promise.all([a.e(8250),a.e(8449),a.e(8792),a.e(7105)]).then(a.bind(a,7761)))),Tr="/business/admin",kr=e=>`${Tr}/${e}`,Cr=kr("learners"),Rr=[s.createElement(Qs,{exact:!0,from:Tr,key:"route",to:Cr}),s.createElement(n.AW,{component:e=>s.createElement(Ir,Object.assign({},e)),key:"route",path:`${Tr}/:page`})],Or=({target:e})=>(s.useLayoutEffect((()=>{(0,k.Zs)(e,!0)}),[]),null),Lr=[s.createElement(n.AW,{key:"route",path:"/404",render:()=>s.createElement(Or,{target:k.Oy})}),s.createElement(n.AW,{key:"route",path:"/blog",render:()=>s.createElement(Or,{target:null!==k.Ql&&void 0!==k.Ql?k.Ql:"https://blog.duolingo.com"})}),s.createElement(n.AW,{key:"route",path:["/careers","/jobs"],render:()=>s.createElement(Or,{target:"https://careers.duolingo.com"})}),s.createElement(n.AW,{key:"route",path:"/design",render:()=>s.createElement(Or,{target:"https://design.duolingo.com/"})}),s.createElement(n.AW,{key:"route",path:"/events",render:()=>s.createElement(Or,{target:"https://events.duolingo.com?source=main"})}),s.createElement(n.AW,{key:"route",path:"/press",render:()=>s.createElement(Or,{target:"https://press.duolingo.com"})}),s.createElement(n.AW,{key:"route",path:["/effectiveness-study","/research"],render:()=>s.createElement(Or,{target:"https://research.duolingo.com"})}),s.createElement(n.AW,{key:"route",path:["/school","/schools"],render:()=>s.createElement(Or,{target:"https://schools.duolingo.com?source=main"})}),s.createElement(n.AW,{key:"route",path:"/team",render:()=>s.createElement(Or,{target:"https://careers.duolingo.com/about"})}),s.createElement(n.AW,{key:"route",path:"/abc",render:e=>s.createElement(Or,{target:`https://abc.duolingo.com${e.location.search}`})})],Pr=(0,Qe.Z)((()=>Promise.all([a.e(512),a.e(6689)]).then(a.bind(a,62802)))),Ar=(0,Qe.Z)((()=>Promise.all([a.e(3547),a.e(9808)]).then(a.bind(a,49304)))),Nr=(0,Qe.Z)((()=>a.e(7402).then(a.bind(a,48012)))),Dr=(0,Qe.Z)((()=>Promise.all([a.e(1285),a.e(1607)]).then(a.bind(a,35906)))),xr=(0,Qe.Z)((()=>Promise.all([a.e(1285),a.e(2944)]).then(a.bind(a,87159)))),Mr=(0,Qe.Z)((()=>Promise.all([a.e(1285),a.e(229)]).then(a.bind(a,70964)))),Fr=(0,Qe.Z)((()=>a.e(4662).then(a.bind(a,94325)))),Ur=(0,Qe.Z)((()=>Promise.all([a.e(1285),a.e(5390)]).then(a.bind(a,96441)))),Hr=(0,Qe.Z)((()=>a.e(6350).then(a.bind(a,79260)))),jr=(0,Qe.Z)((()=>a.e(1674).then(a.bind(a,71221)))),Gr=(0,Qe.Z)((()=>a.e(6734).then(a.bind(a,65305)))),Br=(0,Qe.Z)((()=>a.e(6850).then(a.bind(a,30850)))),Vr=(0,Qe.Z)((()=>a.e(8825).then(a.bind(a,34017)))),zr=(0,Qe.Z)((()=>Promise.all([a.e(1548),a.e(961),a.e(5986)]).then(a.bind(a,44330)))),Zr=(0,Qe.Z)((()=>Promise.all([a.e(961),a.e(5820)]).then(a.bind(a,51285)))),$r=[s.createElement(n.AW,{component:Gr,key:"route",path:"/2022-campaigns"}),s.createElement(n.AW,{component:Nr,key:"route",path:"/apk-download"}),s.createElement(n.AW,{component:Ar,key:"route",path:"/business/checkout"}),s.createElement(n.AW,{component:Pr,exact:!0,key:"route",path:"/business"}),s.createElement(n.AW,{component:Ur,key:"route",path:"/duocon"}),s.createElement(n.AW,{component:Dr,key:"route",path:"/duocon2019"}),s.createElement(n.AW,{component:xr,key:"route",path:"/duocon2020"}),s.createElement(n.AW,{component:Mr,key:"route",path:"/duocon2021"}),s.createElement(n.AW,{component:Fr,key:"route",path:"/duocon2022"}),s.createElement(n.AW,{component:Hr,key:"route",path:"/duoversary"}),s.createElement(n.AW,{component:jr,key:"route",path:"/efficacy/:tab?"}),s.createElement(n.AW,{component:Vr,key:"route",path:"/share/sm"}),s.createElement(n.AW,{component:Vr,key:"route",path:"/share-direct/sm"}),s.createElement(n.AW,{component:Br,key:"route",path:"/valyriansteel"}),s.createElement(n.AW,{component:zr,key:"route",path:"/weekly-report"}),s.createElement(n.AW,{component:Zr,key:"route",path:"/year-in-review/2023"})],qr=()=>{var e;return null!==(e=(0,m.rV)(m.Qt.LastAppCrashes,{useSessionStorage:!0}))&&void 0!==e?e:[]},Wr=(0,Qe.Z)((()=>a.e(6557).then(a.bind(a,36557)))),Qr=(0,Qe.Z)((()=>a.e(6710).then(a.bind(a,56710)))),Yr=(0,Qe.Z)((()=>a.e(7017).then(a.bind(a,57017)))),Jr=e=>e?Ys("/p"):Ys("/p","/leaderboard"),Kr=Ys("/","/log-in","/register_user"),Xr=()=>{const e=(0,T.TH)(),t=(()=>{const e=(0,h.Fx)((e=>e.ui.shouldUnmount));return s.useEffect((()=>{if(!e)return;(()=>{const e=qr();e.push(Date.now()),(0,m.LS)(m.Qt.LastAppCrashes,e.slice(-3),{useSessionStorage:!0})})();const t=async e=>{await(0,_.mh)(window.location.href,e,"hard",!1),await(0,k.Zs)(e)};if((()=>{const e=Date.now()-6e4;return 3===qr().filter((t=>t>e)).length})())return(0,m.cl)(m.Qt.LastAppCrashes,{useSessionStorage:!0}),void t("/errors/500.html");if("visible"===document.visibilityState)return void t((0,k.cd)());const a=()=>{"visible"===document.visibilityState&&t((0,k.cd)())};return document.addEventListener("visibilitychange",a),()=>document.removeEventListener("visibilitychange",a)}),[e]),e})(),a=(0,M.Pc)(),i=s.useMemo((()=>(e=>vr((e=>[...e?[{components:[({location:e})=>s.createElement(Qs,{to:{pathname:k.B6,search:e.search}})],exact:!0,path:"/"}]:[],{props:{userMustBeLoggedIn:!0},subroutes:[{components:[ln],subroutes:[{components:[cn],path:k.B6},{components:[_r("shop"),dn],path:"/shop"}]},{components:[rr],exact:!0,path:"/alphabets/:languageAbbrev/tips",props:Er},{components:[nr],path:"/alphabets/:languageAbbrev/tips/:groupIndex/:tipIndex",props:Er},{components:[nr],path:"/alphabets/:languageAbbrev/:alphabetSessionId/tips",props:yr},{components:[_r("alphabet-lessons"),sr],path:"/characters"},{components:[_r("mistakes"),vn],exact:!0,path:"/practice-hub/mistakes"},{components:[_r("practice-hub"),fn],exact:!0,path:"/practice-hub/stories"},{components:[gn,un],props:yr,subroutes:[{path:"/alphabets/:languageAbbrev/:alphabetSessionId"},{path:"/placement/:languageAbbrev"},{path:"/practice"},{path:"/practice-hub/:practiceType"},{path:"/preview/:skillId/:lesson"}]},{components:[en,pn],props:yr,subroutes:[{exact:!0,path:"/lesson"},{path:"/lesson/section/:pathSectionNumber/test"},{path:"/lesson/unit/:pathUnitNumber/level/:pathLevelNumber"},{path:"/lesson/unit/:pathUnitNumber/legendary/:pathLevelNumber"},{path:"/lesson/unit/:pathUnitNumber/test"}]},{components:[rn],exact:!0,path:"/guidebook/:languageAbbrev/:unitNumber",props:Er},{components:[hr],exact:!0,path:"/sections/details/:pathSectionNumber",props:Er},{components:[on],path:"/guidebook/preview/:fromLanguageAbbrev/:learningLanguageAbbrev/:unitNumber",props:Er},{components:[hn,un],path:"/mistakes-review",props:yr},{components:[_r("practice-hub"),_n],path:"/practice-hub"},{components:[ur,er],path:"/settings"},{components:[Tn],path:"/admin_tools"},{components:[_r("profiles"),Yn],path:"/user-search",props:Er},{components:[Jn],exact:!0,path:"/friend-updates"},{components:[Kn],path:"/friend-updates/:kudosFilter"},{components:[En],path:"/welcome/:linkCode?",props:yr},{components:[_r("leaderboards"),Sn],path:"/leaderboard",props:{noMobileTopbar:Sr}},{components:[_r("quests"),gr],path:"/quests",props:{noMobileTopbar:Sr}},{components:[mr],exact:!0,path:"/sections"}]},{components:[yn],subroutes:[{components:[bn],path:"/approach"},{components:[wn],path:"/contact"},{components:[In],path:"/info"}]},{components:[tn],path:"/login-page",props:br},{components:[Bn],path:"/abc-privacy"},{components:[_r("courses"),Cn],path:"/courses/:fromLanguageId?"},{components:[sn],path:"/forgot_password"},{components:[Vn],path:"/remove/:token/:email"},{components:[Rn],path:"/guidelines"},{components:[On],path:"/help",props:br},{components:[kn],path:"/join-beta"},{components:[Ln],path:"/mobile"},{components:[Pn],path:"/participation"},...k.a9.map((e=>({components:[An],path:e,props:br}))),{components:[xn],path:"/gift/checkout",props:br},{components:[Dn],path:"/gift",props:br},{components:[Nn],path:"/redeem",props:br},{components:[nn],path:"/reset_password/:client_abbrev?"},{components:[Mn],path:"/attribution"},{components:[Hn],path:"/privacy"},{components:[jn],path:"/terms"},{components:[Fn],path:"/auto-renewal-agreement"},{components:[Un],path:"/cross-border-data-transfer-agreement"},{components:[Gn],path:"/cookies"},{components:[zn],path:"/verify/:token"},{components:[tr],exact:!0,path:"/stories"},{components:[mn,ar],path:"/stories/:storyId",props:yr},{components:[_r("profiles"),$n],path:"/profile/:username",subroutes:[{path:"/followers"},{path:"/following"}]},{components:[_r("profiles"),Wn],path:"/profile/:username/achievements"},{components:[_r("profiles"),Xn],path:"/profile/:username/friends-in-common"},{components:[_r("profiles"),qn],path:"/friend-suggestions"},{components:[Qn],path:"/profile/:username/courses"},{components:[_r("courses"),an],path:"/enroll/:learningLanguageId/:fromLanguageId?/:slug?"},{components:[ir],path:"/family",props:br},{components:[or],props:br,subroutes:[{path:"/family-plan"},{path:"/share-family-plan"},{path:"/family-plan-user-invite"}]},{components:[lr],exact:!0,props:br,subroutes:[{path:"/classroom"},{path:"/classroom/:classroomCode"}]},{components:[cr],path:"/bango/:reseller/:token",props:br},{components:[dr],path:"/purchase",props:br},{props:{noMobileTopbar:e},subroutes:[{components:[_r("profiles"),Zn],path:"/profile/:username"},{components:[_r("profiles"),Zn],path:"/u/:userId"}]}])(e)).map((({exact:e,path:t,props:a,components:r=[]})=>s.createElement(n.AW,{exact:e,key:"route",path:t,render:e=>s.createElement(wr,{appProps:null!=a?a:{},components:r,routerProps:e})}))))(a)),[a]),l=s.useMemo((()=>(e=>o.ZP.keys(Zt.Jl).map((e=>`/${(0,Zt.D3)(e)}`)).map((t=>s.createElement(Qs,{exact:!0,from:t,key:"route",to:(0,k.cd)(e)}))))(a)),[a]),[c,d]=s.useState(!1);if(t)return null;if(!c){const t=(0,k.o_)(e);if(t.pathname!==e.pathname||t.search!==e.search)return s.createElement(Qs,{to:t});d(!0)}const u=(0,k.cd)(a);return s.createElement(bt,null,s.createElement(s.Suspense,{fallback:null},s.createElement(n.rs,null,s.createElement(Qs,{from:"/comment",to:"/"}),s.createElement(Qs,{from:"/discussion",to:"/"}),s.createElement(Qs,{from:"/topic",to:"/"}),s.createElement(Qs,{from:"/Luis",to:"/profile/Luis"}),s.createElement(Qs,{from:"/beta-app",to:"/join-beta"}),s.createElement(Qs,{from:"/c",to:u}),s.createElement(Qs,{from:"/download",to:"/mobile"}),s.createElement(Qs,{from:"/words",to:u}),s.createElement(Qs,{from:"/english",to:"/course/en"}),s.createElement(Qs,{from:"/french",to:"/course/fr"}),s.createElement(Qs,{from:"/home",to:u}),s.createElement(Qs,{from:"/italian",to:"/course/it"}),s.createElement(Qs,{from:"/join",to:"/classroom"}),s.createElement(Qs,{from:"/kids",to:"/abc"}),s.createElement(Qs,{from:"/labs",to:u}),s.createElement(Qs,{from:"/learningseason",to:"/2022-campaigns"}),s.createElement(Qs,{from:"/learning-season",to:"/2022-campaigns"}),s.createElement(Qs,{from:"/login",to:"/log-in"}),s.createElement(Qs,{from:"/nocuesta",to:"/2022-campaigns"}),s.createElement(Qs,{exact:!0,from:"/o",to:"/classroom"}),s.createElement(Qs,{from:"/o/:classroomCode",to:"/classroom/:classroomCode"}),s.createElement(Qs,{from:"/plus_view",to:"/settings/super"}),s.createElement(Qs,{from:"/reddem",to:{pathname:"/redeem",search:e.search}}),s.createElement(Qs,{from:"/redem",to:{pathname:"/redeem",search:e.search}}),s.createElement(Qs,{from:"/reedeem",to:{pathname:"/redeem",search:e.search}}),s.createElement(Qs,{from:"/reedem",to:{pathname:"/redeem",search:e.search}}),s.createElement(Qs,{from:"/show_store",to:"/shop"}),s.createElement(Qs,{from:"/sign-up",to:"/register"}),s.createElement(Qs,{from:"/signup",to:"/register"}),s.createElement(Qs,{from:"/spanish",to:"/course/es"}),s.createElement(Qs,{from:"/start",to:"/register"}),s.createElement(Qs,{from:"/summer2020",to:"/2022-campaigns"}),s.createElement(Qs,{from:"/troubleshooting",to:"/help"}),a?Kr.filter((e=>"/"!==e)).map((t=>s.createElement(Qs,{from:t,key:"route",to:{pathname:k.B6,search:e.search}}))):s.createElement(Qs,{from:k.B6,to:{pathname:"/",search:e.search}}),...Lr,...l,...$r,...Rr,(0,vt.Au)()?s.createElement(n.l_,{from:"/lottie",to:"/debug/components/controls/LottieAnimationLazy"}):null,(0,vt.Au)()?s.createElement(n.AW,{component:Wr,path:"/debug/:splat*"}):null,s.createElement(n.AW,{component:Qr,path:Jr(a)}),s.createElement(n.AW,{path:"/course/:learningLanguageId/:fromLanguageId?/:slug?",render:e=>s.createElement(Js,Object.assign({},e),s.createElement(ba,Object.assign({},e)))}),s.createElement(n.AW,{component:Yr,path:"/logout"}),s.createElement(n.AW,{component:ja,exact:!0,path:["/referred","/register","/register/:languageId"]}),...i,s.createElement(n.AW,{component:void 0===window.duo.dotcomRedesign?Xa:qs,exact:!0,path:Kr}),(0,vt.Au)()?s.createElement(n.AW,{component:qs,path:"/dotcom"}):null,s.createElement(n.AW,{component:r.Z}))))}},17818:(e,t,a)=>{"use strict";a.d(t,{O:()=>l,H:()=>o});var s=a(27378);const n="_270mD".split(" "),r=()=>document.getElementById("root"),i=()=>({x:window.scrollX,y:window.scrollY}),o=(e,t)=>{s.useLayoutEffect((()=>{if(e){const e=l.lock();return()=>{t||l.scrollTo(0,0),e.release()}}}),[e])},l=new class{constructor(){this.locks=new Set,this.addEventListener=(e,t)=>{document.addEventListener("scroll",t),r().addEventListener("scroll",t)},this.clampY=e=>Math.min(Math.max(e,this.minY),this.maxY),this.lock=()=>{const e={release:()=>{this.locks.delete(e),0===this.locks.size&&(()=>{const e=r(),{scrollLeft:t,scrollTop:a}=e;e.classList.remove(...n),window.scrollTo(t,a)})()}};return this.locks.add(e),1===this.locks.size&&(()=>{const e=r(),{x:t,y:a}=i();e.classList.add(...n),e.scrollLeft=t,e.scrollTop=a,window.scrollTo(0,0)})(),e},this.removeEventListener=(e,t)=>{document.removeEventListener("scroll",t),r().removeEventListener("scroll",t)},this.scrollTo=(e,t)=>{if(this.isLocked){const a=r();a.scrollLeft=e,a.scrollTop=t}else window.scrollTo(e,t)},this.scrollToY=e=>{this.scrollTo(this.x,e)},this.getCurrentOffset=()=>{if(this.isLocked){const e=r();return{x:e.scrollLeft,y:e.scrollTop}}return i()}}get isLocked(){return this.locks.size>0}get isScrollable(){return this.scrollHeight>window.innerHeight}get maxY(){return this.scrollHeight-window.innerHeight}get minY(){return 0}get scrollHeight(){return this.isLocked?r().scrollHeight:document.documentElement.scrollHeight}get x(){return this.getCurrentOffset().x}get y(){return this.getCurrentOffset().y}}},60106:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(80254);class n{constructor(e){this.listeners=[],this.subscribe=e=>(this.listeners.push(e),()=>{this.listeners=this.listeners.filter((t=>t!==e))}),this.get=()=>this.value(),this.set=e=>{this.value=s.IH(e),this.notifyListeners()},this.notifyListeners=()=>{this.listeners.forEach((e=>e()))},this.value=s.IH(e)}}class r{constructor(e){this.listeners=[],this.substate=e=>{var t;return null!==(t=this.substates[e])&&void 0!==t?t:this.makeSubstate(e,(()=>{}))},this.subscribe=e=>(this.listeners.push(e),()=>{this.listeners=this.listeners.filter((t=>t!==e))}),this.get=e=>this.substate(e).get(),this.getAll=()=>Object.fromEntries(Object.entries(this.substates).map((([e,t])=>[e,t.get()]))),this.set=(e,t)=>{this.substate(e).set(t)},this.makeSubstate=(e,t)=>{const a=new n(t);return a.subscribe(this.notifyListeners),this.substates[e]=a,a},this.notifyListeners=()=>{this.listeners.forEach((e=>e()))},this.substates={};for(const[t,a]of Object.entries(e))this.makeSubstate(t,(()=>a))}}},40472:(e,t,a)=>{"use strict";a.d(t,{M:()=>g,y:()=>i});const s=[["...","…"]],n=["ca","cs","cy","da","de","en","eo","es","fi","fr","ga","gd","ht","hu","hv","hw","id","it","la","mi","nl-NL","no-BO","pl","pt","ro","sv","sw","tl","tr","vi","xx-ZB","yu"],r=(e,t)=>{for(let a=0;a<e.length;a++)if(e[a]!==t[a])return a;return e.length},i=e=>n.includes(e),o=[['[’\\"´‘`′ʻ́̀´]',"'"],["¡","!"],["¿","?"]];class l{constructor(e,t={}){this.match=(e,t)=>{e=this.normalize(e);const a=null!=t?t:this.originalTokens,s=t?t.map((e=>this.normalize(e))):this.tokens;let n,r=0;return{highlights:s.map(((t,s)=>{const i=this.matchToken(t,e);return i.index>0&&(i.isComposing?n=-1:void 0===n?n=s:n>-1&&this.normalizeWithoutAccents(a[n])!==this.normalizeWithoutAccents(a[s])&&(n=-1),r++),i})),match:null!=n?n:-1,partialMatches:r}},this.matchAlias=(e,t)=>{var a,s;const n=null!==(s=null===(a=this.options.aliases)||void 0===a?void 0:a.filter((([,t])=>t===e)))&&void 0!==s?s:[];let i;for(const[e]of n){const a=r(e,t);a>0&&(!i||a>i.length)&&(i={isComposing:a<e.length,length:a})}return i},this.matchToken=(e,t)=>{const a={index:0,isComposing:!1};for(let s=0,n=0;s<t.length;s++,n++){if(t[s]===e[n]){a.index++;continue}const r=this.matchAlias(e[n],t.slice(s));if(!r||r.isComposing&&r.length!==t.length-s)return{index:0,isComposing:!1};a.index++,a.isComposing=r.isComposing,s+=r.length-1}return a},this.normalize=e=>(e=this.normalizeAccents(e),e=this.normalizeCase(e),this.normalizePatterns(e)),this.normalizeAccents=e=>{const{accentedCharacterMap:t}=this.options;return t&&(e=e.split("").map((e=>{var a;return null!==(a=t[e])&&void 0!==a?a:e})).join("")),e},this.normalizeCase=e=>{const{ignoreCase:t}=this.options;return t?e.toLowerCase():e},this.normalizePatterns=e=>{const{normalizationData:t}=this.options;return null==t||t.forEach((([t,a])=>{e=e.replace(new RegExp(t,"g"),a)})),e},this.normalizeWithoutAccents=e=>(e=this.normalizeCase(e),this.normalizePatterns(e)),this.options=Object.assign({normalizationData:o},t),this.originalTokens=e,this.tokens=e.map((e=>this.normalize(e)))}}class c extends l{constructor(e,t={}){var a;super(e,Object.assign(Object.assign({},t),{aliases:[["ae","æ"],...null!==(a=t.aliases)&&void 0!==a?a:s]}))}}class d extends l{constructor(e,t={}){var a;super(e,Object.assign(Object.assign({},t),{aliases:null!==(a=t.aliases)&&void 0!==a?a:s}))}}class u extends l{constructor(e,t={}){var a;super(e,Object.assign(Object.assign({},t),{aliases:[["ae","æ"],["oe","œ"],...null!==(a=t.aliases)&&void 0!==a?a:s]}))}}class p extends l{constructor(e,t={}){var a;super(e,Object.assign(Object.assign({},t),{aliases:[["ss","ß"],...null!==(a=t.aliases)&&void 0!==a?a:s]}))}}const g=e=>{switch(e){case"da":case"no-BO":return(...e)=>new c(...e);case"de":return(...e)=>new p(...e);case"fr":return(...e)=>new u(...e);default:return(...e)=>new d(...e)}}},70220:(e,t,a)=>{"use strict";a.d(t,{H:()=>s});const s=matchMedia("(prefers-reduced-motion: reduce)").matches},84389:(e,t,a)=>{"use strict";a.d(t,{$9:()=>_,A9:()=>d,ET:()=>h,H2:()=>c,Kv:()=>u,Mw:()=>p,an:()=>g,vO:()=>m});var s=a(99369),n=a(77167),r=a(8654),i=a(76022),o=a(35160);const l={champion:{displayString:7018,getCompletedDescription:(e,t,a)=>{const s=e-1;if(0===s)return(0,r.H8)(t?27195:15352,{name:a});const n=(0,r.H8)(i.Vq[s]);return(0,r.H8)(t?27196:5667,{league:n,name:a})},getDescription:e=>{const t=e-1;if(0===t)return(0,r.H8)(18931);const a=(0,r.H8)(i.Vq[t]);return(0,r.H8)(9836,{league:a})},position:4},conqueror:{displayString:6676,getCompletedDescription:(e,t,a)=>(0,r.H8)(t?27197:17870,{name:a,number:e}),getDescription:e=>(0,r.H8)(24339,{number:e}),position:6},friendly:{displayString:2148,getCompletedDescription:(e,t,a)=>(0,r.H8)(t?27198:21686,{name:a}),getDescription:()=>(0,r.H8)(6105),position:10},legendary:{displayString:31855,getCompletedDescription:(e,t,a)=>(0,r.H8)(t?27199:7181,{name:a}),getDescription:()=>(0,r.H8)(13781),position:8},overtime:{displayString:19748,getCompletedDescription:(e,t,a)=>(0,r.H8)(t?27200:11321,{name:a}),getDescription:()=>(0,r.H8)(10191),position:11},photogenic:{displayString:20036,getCompletedDescription:(e,t,a)=>(0,r.H8)(t?27201:22947,{name:a}),getDescription:()=>(0,r.H8)(19790),position:12},regal:{displayString:9220,getCompletedDescription:(e,t,a)=>(0,r.H8)(t?27202:4438,{name:a,number_1:e}),getDescription:e=>(0,r.H8)(15694,{number_1:e}),position:3},sage:{displayString:20797,getCompletedDescription:(e,t,a)=>(0,r.H8)(t?27203:21311,{name:a,number_1:e}),getDescription:e=>(0,r.H8)(20170,{number_1:e}),position:1},scholar:{displayString:7357,getCompletedDescription:(e,t,a)=>(0,r.H8)(t?27204:1301,{name:a,number_of_words:e}),getDescription:e=>(0,r.H8)(22639,{number_of_words:e}),position:2},sharpshooter:{displayString:2932,getCompletedDescription:(e,t,a)=>(0,r.H8)(t?27205:17946,{name:a,number_1:e}),getDescription:e=>(0,r.H8)(19943,{number_1:e}),position:5},strategist:{displayString:7441,earn:e=>{n.I7.earnTipsAchievement(e)},getCompletedDescription:(e,t,a)=>(0,r.H8)(t?27206:18657,{name:a}),getDescription:()=>(0,r.H8)(8963),position:9},wildfire:{displayString:6641,getCompletedDescription:(e,t,a)=>(0,r.H8)(t?27207:20666,{name:a,number_1:e}),getDescription:e=>(0,r.H8)(5551,{number_1:e}),position:0},winner:{displayString:14814,getCompletedDescription:(e,t,a)=>(0,r.H8)(t?27208:19806,{name:a}),getDescription:()=>(0,r.H8)(14009),position:7}},c=e=>(0,s.from)((0,s.asMutable)(e).sort(((e,t)=>l[e.name].position-l[t.name].position))),d=(e,t,a,s)=>{const n=t?Math.max(0,e.tier-1):e.tier,r=l[e.name],i=e.tierCounts[n];return t?r.getCompletedDescription(i,a,s):r.getDescription(i)},u=e=>{const t=l[e.name];return(0,r.H8)(t.displayString)},p=e=>e.tierCounts[e.tier]||0,g=e=>Math.max(1,e.tier<e.tierCounts.length?e.tier+1:e.tier),m=e=>e.count>=p(e),h=e=>e.reduce(((e,t)=>(e[t.name]=t,e)),{}),_=(e,t,a,s)=>{e({options:{achievement:t,achieverName:s,name:o.t.Achievement,thirdPerson:a},replaceExisting:!1,type:"TOGGLE_MODAL"})}},51827:(e,t,a)=>{"use strict";a.d(t,{BY:()=>O,N1:()=>y,Nq:()=>L,OE:()=>k,Ph:()=>H,Tu:()=>I,UG:()=>j,XT:()=>U,Z7:()=>w,ZD:()=>s,_H:()=>R,as:()=>F,eu:()=>C,i1:()=>P,j2:()=>T,kN:()=>G,nc:()=>b,qc:()=>B,sb:()=>D});var s,n=a(80254),r=a(17135),i=a(59249),o=a(53229),l=a(37825),c=a(74971),d=a(5934),u=a(32499),p=a(51158),g=a(11908),m=a(79465),h=a(16086),_=a(20028);!function(e){e.SessionEnd="SESSION_END",e.Tree="TREE"}(s||(s={}));const v=n.IH((()=>(0,o.lh)("//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js")));let f,S=!0;const E=new Promise((e=>{f=e})),y=e=>{S=e.privacySettings.includes("DISABLE_PERSONALIZED_ADS"),f()},b=async()=>{await v(),await E;const e=(0,h.Pc)()?S:!(0,c.Xb)("targeting");(window.adsbygoogle=window.adsbygoogle||[]).requestNonPersonalizedAds=e?1:0,console.log((e?"Disable":"Enable")+" personalized ads"),(window.adsbygoogle=window.adsbygoogle||[]).push({})},w=(e,t)=>{var a,s;if((0,i.gQ)("disableAds")||(s=window.location.href,decodeURIComponent(s).includes("@"))||(0,_.pN)(e))return null;if(void 0===(null===(a=e.adsConfig)||void 0===a?void 0:a.units))return null;const n=e.adsConfig.units[t];if(void 0===n||""===n.id)return null;if(e.hasPlus)return(0,p.Kp)(`Premium user was inappropriately provided ads unit for placement '${t}'`),null;if((e=>(0,_.jq)(e)||(0,_.dE)(e))(e)&&!n.familySafe)return(0,p.Kp)(`User was inappropriately provided non-family safe ads unit (id='${n.id}') for placement '${t}'`,{once:!0}),null;const[r,o]=n.id.split("/");return{client:r,familySafe:n.familySafe,slot:o}},I=(e,t)=>`${e.toLowerCase()}_ad${"showing"===t?"":`_${t}`}`,T=e=>void 0!==e&&["session_end_ad","session_end_ad_blocked","session_end_ad_showing","tree_ad","tree_ad_blocked","tree_ad_showing"].includes(e),k=(e,t,a,s)=>{(0,m.j)(e,{ad_network:"adsense",ad_placement:t.toLowerCase(),ad_type:"banner",ad_unit:a,family_safe:s})},C=e=>{var t,a,s;return(null===(t=e.subscriptions)||void 0===t?void 0:t.isLoaded)?null===(s=null===(a=e.subscriptions)||void 0===a?void 0:a.subscriptionPlans)||void 0===s?void 0:s.some((e=>e.isFreeTrial&&!e.isNewYears)):void 0},R=e=>{var t,a;return(null===(t=e.subscriptions)||void 0===t?void 0:t.isLoaded)?null===(a=e.subscriptions.subscriptionPlans)||void 0===a?void 0:a.some((e=>e.isWinback)):void 0},O=e=>{var t,a,s;if(!(null===(t=e.subscriptions)||void 0===t?void 0:t.isLoaded))return;const n=null===(s=null===(a=e.subscriptions)||void 0===a?void 0:a.subscriptionPlans)||void 0===s?void 0:s.find((e=>(0,u.kY)(e)));return void 0===n?"USD":n.planCurrency},L=(e,t)=>e&&t,P=e=>e,A={"practice-hub-promo":"duo.internalAds.sessionEnd.practiceHubPromo",standard:"duo.internalAds.sessionEnd.plus","super-video":"duo.internalAds.sessionEnd.superVideo"},N=e=>(0,g.rV)(A[e]),D=(e,t)=>{let a;return(0,g.No)(A[e])?a=N(e):(a=null!=t?t:{lastShowTimestamp:0,showCount:0},x(e,a)),a},x=(e,t)=>{(0,g.LS)(A[e],t)},M=({isDesktop:e,items:t,user:a})=>!(!(0,u.X0)(t,a)||!e||(0,_.pN)(a)||1e3*a.creationDate>Date.now()-1728e5),F=({isDesktop:e,items:t,user:a})=>{if(!M({isDesktop:e,items:t,user:a}))return!1;const s=D("standard",{lastSessionCount:a.sessionCount,lastShowTimestamp:0,showCount:0}),n=Math.min(s.showCount,7)*(0,r.dz)({days:1})*1e3;return 0===s.showCount||Date.now()>s.lastShowTimestamp+n},U=({isDesktop:e,items:t,user:a})=>{if(!M({isDesktop:e,items:t,user:a}))return!1;if(1e3*a.creationDate>Date.now()-1728e5)return!1;if(D("super-video",{lastSessionCount:a.sessionCount,lastShowTimestamp:0,showCount:0}).lastSessionCount===a.sessionCount-1)return!1;const s=N("standard"),n=void 0===(null==s?void 0:s.lastSessionCount)?void 0:a.sessionCount-s.lastSessionCount;return 2===n||void 0!==n&&n>=5&&Math.random()<.1},H=(e,t="standard",a)=>{var s;const n=D(t);x(t,{lastSessionCount:e,lastShowTimestamp:Date.now(),showCount:n.showCount+1,subtypesShown:a?[a].concat(null!==(s=n.subtypesShown)&&void 0!==s?s:[]):void 0})},j=({isDesktop:e,items:t,user:a})=>{var s,n;if(!(0,u.X0)(t,a)||!(e=>{var t,a;return e.shop.isLoaded?null===(a=null===(t=e.shop)||void 0===t?void 0:t.in_app_purchase)||void 0===a?void 0:a.some((({productId:e})=>(0,u.RD)(e))):void 0})(t)||!e||(0,_.pN)(a))return!1;const r=null!==(n=null===(s=a.streakData.currentStreak)||void 0===s?void 0:s.length)&&void 0!==n?n:0;return 7===r||r>0&&r%50==0},G=({items:e,path:t,user:a})=>{const s=(0,u.X0)(e,a),n=(0,d.Hk)(t,(0,d.yi)(t,s,a));if(!s||!n)return!1;const i=D("practice-hub-promo",{lastShowTimestamp:0,showCount:0,subtypesShown:[]}),o=1e3*(0,r.dz)({days:5}),l=Date.now()>i.lastShowTimestamp+o,c=i.subtypesShown,p=!!c&&c.length<4;return 0===i.showCount||l&&p},B=({levelData:e})=>void 0!==e&&(0,l.d)(e.level.type)&&"passed"===e.level.state},40387:(e,t,a)=>{"use strict";a.d(t,{IF:()=>o,hM:()=>r,jJ:()=>i,qz:()=>l});var s=a(80254),n=a(11811);const r=e=>{const{currentIndex:t,session:a,session:{adaptiveChallenges:r,challenges:o}}=e;if(!r)return;if(i(a))return;const l=o.slice(0,t+1),c=o.slice(t+1),d=l.every((e=>{var t;return null===(t=e.gradingResult)||void 0===t?void 0:t.correct}))&&c.length===r.length,u=s.jj(o,!1,(e=>e.id)),p=u[u.length-1],g=1===l.filter((e=>{var t;return!1===(null===(t=e.gradingResult)||void 0===t?void 0:t.correct)})).length&&t+1===o.indexOf(p)&&p.type!==n.Sm.Speak;switch(a.type){case n.FF.GlobalPractice:return d?r:g?[r[0]]:void 0;case n.FF.Lesson:return d?r:void 0;default:return}},i=({adaptiveChallenges:e,challenges:t})=>e&&s.jV(t.map((e=>e.id)),e.map((e=>e.id))).length>0,o=e=>{const{currentIndex:t,session:{adaptiveChallenges:a,challenges:n}}=e;if(void 0===a)return!1;const r=a.map((e=>e.id)),i=n.slice(0,t+1).map((e=>e.id)),o=n[t+1];return 0===s.jV(i,r).length&&r.includes(null==o?void 0:o.id)},l=(e,t)=>{var a,s,n,r;e.adaptiveChallenges=null===(a=e.adaptiveChallenges)||void 0===a?void 0:a.filter((e=>!t.includes(e.type)));const i=[],o=[];for(let a=0;a<e.challenges.length;a++){const l=e.challenges[a],c=null!==(n=null===(s=e.adaptiveInterleavedChallenges)||void 0===s?void 0:s.speakOrListenReplacementIndices[a])&&void 0!==n?n:null;if(t.includes(l.type)){const t=null===(r=e.adaptiveInterleavedChallenges)||void 0===r?void 0:r.challenges[null!=c?c:-1];t&&(i.push(t),o.push(null))}else i.push(l),o.push(c)}return e.challenges=i,e.adaptiveInterleavedChallenges&&(e.adaptiveInterleavedChallenges.speakOrListenReplacementIndices=o),e}},9979:(e,t,a)=>{"use strict";a.d(t,{AX:()=>i,Gg:()=>c,Vv:()=>o,jt:()=>u,nN:()=>l,q8:()=>d});var s=a(88528),n=a(50498),r=a(59815);const i="cubic-bezier(0.32, 0, 0.67, 0)",o="cubic-bezier(0.5, 1, 0.89, 1)",l=1e3*parseFloat(s.Z["duration-fade"]),c=()=>new Promise((e=>{requestAnimationFrame((()=>requestAnimationFrame(e)))})),d={EaseInOutCubic:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,EaseInOutQuad:e=>e<.5?2*e*e:(4-2*e)*e-1,EaseInOutQuart:e=>e<.5?8*e*e*e*e:1-8*--e*e*e*e,EaseInOutQuint:e=>e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e,EaseInQuad:e=>e*e,EaseInQuart:e=>e*e*e*e,EaseInQuint:e=>e*e*e*e*e,EaseOutCubic:e=>--e*e*e+1,EaseOutExpo:e=>1-Math.pow(2,-10*e),EaseOutQuad:e=>e*(2-e),EaseOutQuart:e=>1- --e*e*e*e,EaseOutQuint:e=>1+--e*e*e*e*e,Linear:e=>e},u=async({animationDelay:e=0,animationDuration:t,easingFunction:a=d.Linear,onAnimate:s,signal:i})=>{if(e>0&&await(0,n._v)(e),null==i?void 0:i.aborted)throw new r.$K;const o=Date.now(),l=o+t;return new Promise(((e,t)=>{const n=async()=>{await new Promise((e=>{requestAnimationFrame(e)})),(null==i?void 0:i.aborted)&&t(new r.$K);const c=Date.now();if(c<l){const e=a((c-o)/(l-o));s(e),n()}else s(1),e()};n()}))}},56043:(e,t,a)=>{"use strict";a.d(t,{SK:()=>c,TK:()=>d});var s=a(76986),n=a(78939),r=a(51158),i=a(43006),o=a(7113);const l=s,c=(e,t,a)=>{const s=(0,o.J)(e),n=(0,o.J)(t),r=u(s.map((e=>e.word)),n.map((e=>e.word)));if(void 0===r)return;const{firstIncorrectIndex:i,lastIncorrectIndex:l}=r;return s.map(((e,t)=>t>=i&&t<=l?e.word.length:0)).reduce(((e,t)=>e+t))>a*e.length||!s[i]||!s[l]?void 0:[s[i].startIndexWithinSentence,s[l].endIndexWithinSentence]},d=(e,t,a)=>{const s=(0,o.J)(e),n=(0,o.J)(t),r=u(s.map((e=>e.word)),n.map((e=>e.word)));if(void 0===r)return{rangeType:"all"};const{firstIncorrectIndex:i,lastIncorrectIndex:l}=r,c=m(s[0].word)?0:1,d=m(s[s.length-1].word)?s.length-1:s.length-2,p=Math.max(i,c),g=Math.min(l,d);if(p===g)return{blankIndex:p,highlightEndIndex:s[p].endIndexWithinSentence,highlightStartIndex:s[p].startIndexWithinSentence,rangeType:"one"};const h={blankEndIndex:g+1,blankStartIndex:c},_={blankEndIndex:d+1,blankStartIndex:p},v=s.map(((e,t)=>t>=h.blankStartIndex&&t<h.blankEndIndex?e.word.length:0)).reduce(((e,t)=>e+t)),f=s.map(((e,t)=>t>=_.blankStartIndex&&t<_.blankEndIndex?e.word.length:0)).reduce(((e,t)=>e+t));return Math.min(v,f)>a*s.map((e=>e.word)).join("").length?{rangeType:"all"}:v<f?Object.assign(Object.assign({},h),{highlightEndIndex:s[h.blankEndIndex].endIndexWithinSentence,highlightStartIndex:s[h.blankStartIndex].startIndexWithinSentence,rangeType:"partial"}):Object.assign(Object.assign({},_),{highlightEndIndex:s[_.blankEndIndex].endIndexWithinSentence,highlightStartIndex:s[_.blankStartIndex].startIndexWithinSentence,rangeType:"partial"})},u=(e,t)=>{const a=p(e,t),s=g(e,t);if(void 0===a||void 0===s)return;const n=s<a,i=n?s:a,o=n?a:s;if(i<=o)return{firstIncorrectIndex:i,lastIncorrectIndex:o};(0,r.Kp)("Something went wrong trying to determine the guess's incorrect range.",{data:{bestSolutionTokens:e,detectedRange:{firstDivergenceMaybeReversed:i,lastDivergenceMaybeReversed:o},guessTokens:t}})},p=(e,t)=>{const a=h(e),s=h(t);for(let e=0;e<a.length;e++)if(void 0===s[e]||(0,n.GS)((0,n.lG)(l,a[e].element))!==(0,n.GS)((0,n.lG)(l,s[e].element)))return a[e].index;if(a.length!==s.length)return a.length<s.length?e.length:a[s.length].index},g=(e,t)=>{const a=h(e).reverse(),s=h(t).reverse();for(let e=0;e<a.length;e++)if(void 0===s[e]||(0,n.GS)((0,n.lG)(l,a[e].element))!==(0,n.GS)((0,n.lG)(l,s[e].element)))return a[e].index;if(a.length!==s.length)return a.length<s.length?-1:a[a.length-s.length-1].index},m=e=>!(0===(0,i.Dg)(e).length),h=e=>e.map(((e,t)=>m(e)?{element:e,index:t}:{element:"",index:t})).filter((e=>0!==e.element.length))},77167:(e,t,a)=>{"use strict";a.d(t,{Sl:()=>j,eN:()=>H,I7:()=>s,d0:()=>b,_s:()=>w,Vi:()=>I,rn:()=>k,XY:()=>r,zQ:()=>i,ub:()=>q,bG:()=>o,mJ:()=>l,i_:()=>c,JV:()=>d,lB:()=>u,IZ:()=>W,qF:()=>p,dQ:()=>g,zi:()=>m,wO:()=>h,xr:()=>_,s3:()=>o,bu:()=>v,PA:()=>f,uf:()=>S,yG:()=>E,Mw:()=>y,a1:()=>n,w1:()=>T,AL:()=>C});var s={};a.r(s),a.d(s,{claimAchievement:()=>K,earnTipsAchievement:()=>X,getAchievementsV3:()=>J,migrateToV3:()=>ee});var n={};a.r(n),a.d(n,{createInvoice:()=>se,getB2BPricingData:()=>ae,submitInvoice:()=>re,updateInvoice:()=>ne});var r={};a.r(r),a.d(r,{B2B_UNIVERSAL_CLOCK_CODE_PREFIX:()=>oe,downloadCodes:()=>_e,getCodes:()=>ue,getOrganizations:()=>le,getPurchases:()=>de,getSubscriptions:()=>pe,redeemCode:()=>fe,removeCode:()=>ge,removeSubscription:()=>me,sendCodes:()=>he,updateOrganization:()=>ce,validateCode:()=>ve});var i={};a.r(i),a.d(i,{getCharacterChart:()=>ye,sessionCreate:()=>we,sessionSubmit:()=>be});var o={};a.r(o),a.d(o,{getBrbStatus:()=>ke,getCefrContent:()=>Oe,getExplanation:()=>Ce,getGrammarConcept:()=>Le,getGuidebook:()=>Re,getLottieAnimation:()=>Pe,getSmartTip:()=>Ne,getZombieStatus:()=>De,requestGradingConfig:()=>xe});var l={};a.r(l),a.d(l,{addModerator:()=>Be,isSpecialForumTopic:()=>Ue,listAllMods:()=>Ge,listMods:()=>je,listTopics:()=>He,removeModerator:()=>Ve,undeleteComment:()=>Fe});var c={};a.r(c),a.d(c,{block:()=>dt,deleteFriendRecommendation:()=>at,facebookToDuolingo:()=>pt,follow:()=>lt,getFeed:()=>$e,getFollowers:()=>it,getFollowing:()=>rt,getFriendRecommendations:()=>et,getFriendsInCommon:()=>ot,getKudosAssets:()=>We,getKudosDrawer:()=>Qe,getKudosReactions:()=>qe,getSocialProfile:()=>nt,postFriendsQuestNudge:()=>gt,searchUsers:()=>st,sendKudos:()=>Ye,sendTriggeredKudos:()=>Je,unblock:()=>ut,unfollow:()=>ct,unsendKudos:()=>Ke,updateFeed:()=>Xe,updateFriendRecommendations:()=>tt});var d={};a.r(d),a.d(d,{getQuestProgress:()=>_t,getQuestsData:()=>vt,getQuestsSchema:()=>ht,postQuestComplete:()=>ft,sendBatchUpdate:()=>St});var u={};a.r(u),a.d(u,{submitDuoconForm:()=>yt,submitHighValyrianForm:()=>bt});var p={};a.r(p),a.d(p,{lV:()=>It,Y4:()=>kt,LE:()=>Tt});var g={};a.r(g),a.d(g,{LEAGUES_ID:()=>Ot,SCHOOLS_CLASSROOM_LEADERBOARD_ID:()=>Lt,get:()=>Ut,getReactionUncohorted:()=>Bt,patch:()=>jt,post:()=>Ht,setReactionCohorted:()=>Gt,setReactionUncohorted:()=>Vt});var m={};a.r(m),a.d(m,{ackHomeMessage:()=>Zt,ackSessionEndMessages:()=>$t,getHomeMessages:()=>qt,getSessionEndMessages:()=>Wt});var h={};a.r(h),a.d(h,{clearUngeneratableMistakes:()=>Xt,getMistakeCount:()=>Jt,getMistakes:()=>Kt});var _={};a.r(_),a.d(_,{trackSplashLoad:()=>ta});var v={};a.r(v),a.d(v,{AssignmentType:()=>aa,CONTENT_SPECIFIC_ASSIGNMENT_TYPES:()=>sa,autoFollowClassmates:()=>ua,getClassroomByCode:()=>oa,getSessionActivitiesByUser:()=>pa,getUserClassroomLeaderboardInfo:()=>da,getUserClassrooms:()=>ia,joinClassroom:()=>la,leaveClassroom:()=>ca});var f={};a.r(f),a.d(f,{detectDuplicates:()=>ma,fullyConnectDuplicates:()=>ha,getSlackReportTypes:()=>_a,getSuggestedFeatures:()=>va,reportIssue:()=>fa});var S={};a.r(S),a.d(S,{sendDownloadSMS:()=>Ea});var E={};a.r(E),a.d(E,{ReportReason:()=>wa,reportProfileUser:()=>Ia});var y={};a.r(y),a.d(y,{getPracticeHubStories:()=>Pa,getStory:()=>ka,postStoryComplete:()=>Ca,recordUserReply:()=>Ra});var b={};a.r(b),a.d(b,{dismissNotification:()=>Ma,getDeleteModLog:()=>Fa,getNotifications:()=>Da,getShadowbannedUsers:()=>Ua,getSocialCurrencyStats:()=>Ga,logout:()=>Na,shadowbanUser:()=>Ha,unshadowbanUser:()=>ja,uploadAvatar:()=>xa});var w={};a.r(w),a.d(w,{convertRemoteLanguageId:()=>qa,courseList:()=>Ya,courseShow:()=>Ja,courseSubscribe:()=>ts,courseUnsubscribe:()=>as,getLanguageTokens:()=>Ka,legacyLanguageId:()=>Wa,registerDevice:()=>Xa,unregisterDevice:()=>es,userBan:()=>$a});var I={};a.r(I),a.d(I,{ChallengeReports:()=>Gs,EventType:()=>hs,PasswordContext:()=>Ss,acceptFamilyPlanDirectInvite:()=>on,acceptFamilyPlanInviteCode:()=>rn,addUserStripePaymentMethod:()=>Ys,attachUserStripePaymentMethod:()=>Ks,challengeCreate:()=>Hs,challengeGrade:()=>js,checkPasswordQuality:()=>Es,consumeReward:()=>Sn,createPaymentMethodSetup:()=>Js,createUserSuperDiscount:()=>yn,emailVerificationSend:()=>ks,emailVerificationUpdate:()=>Cs,forgotPassword:()=>vn,getConfig:()=>gn,getCustomAcquisitionSurveyResponses:()=>En,getFamilyPlanUserInvites:()=>sn,getPackageNameFromPromoCodeRaw:()=>_s,getShopItems:()=>Vs,getSubscriptionPlans:()=>zs,getUnfilteredPrivacySettings:()=>hn,getUnitOfTimeFromPromoCodeRaw:()=>vs,getUserInventory:()=>Qs,getUserPaymentMethods:()=>Ws,getUserShopItem:()=>Zs,getUserXPSummaries:()=>Ns,login:()=>fs,patchUserShopItem:()=>$s,purchaseShopItemGift:()=>tn,purchaseUserShopItem:()=>en,registerTrackingStatus:()=>fn,rejectFamilyPlanDirectInvite:()=>ln,removeEmailUpdate:()=>Rs,removeHeart:()=>wn,removeUserFromFamilyPlan:()=>cn,reportSentence:()=>Bs,resetPassword:()=>ys,sessionCreate:()=>Fs,sessionSubmit:()=>Us,subscribeToBangoPlan:()=>pn,subscriptionOrderCreate:()=>Xs,treatUser:()=>bn,updatePrivacySettings:()=>_n,updateUserStripePaymentMethod:()=>qs,useUserShopItem:()=>mn,userCreate:()=>bs,userDeleteCourse:()=>Ms,userInfo:()=>ws,userInfoPartial:()=>Ts,userMessage:()=>xs,userModeratedEvents:()=>Ds,userProfileInfo:()=>Is,userSearch:()=>Ls,userSearchByEmail:()=>Ps,userUpdate:()=>As,usernameValidate:()=>Os,validateBangoToken:()=>un,validateFamilyInviteToken:()=>nn,validatePromoCode:()=>an});var T={};a.r(T),a.d(T,{getReport:()=>Tn});var k={};a.r(k),a.d(k,{getReport:()=>On,getReportId:()=>Rn});var C={};a.r(C),a.d(C,{postRequest:()=>Nn,postUploadFile:()=>An});var R=a(42659),O=a(54412),L=a(51158),P=a(18804),A=a(16086),N=a(20028),D=a(53229);const x=e=>encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]");var M=a(59815);class F extends M.pY{get name(){return"HttpClientError"}static from(e,{method:t,url:a}){var s;if(e instanceof F)return e;const n=new F(e.message);return n.code=(null!==(s=e.code)&&void 0!==s?s:"AbortError"===e.name)?"ECONNABORTED":void 0,n.method=t,n.response=e.response,n.url=a,n}}const U=F,H=class{constructor(e){this.addCacheBuster=!1,this.errorInterceptors=[],this.interceptors=[],this.useFormEncoding=!1,this.withCredentials=!1,this.getAdditionalHeaders=e=>({}),this.parseJsonResponse=e=>e.text().then((e=>e?JSON.parse(e):void 0)),this.baseUrl=(null==e?void 0:e.startsWith("/"))?`${window.location.origin}${e}`:null!=e?e:""}addErrorInterceptor(e){return this.errorInterceptors.push(e),this}addResponseInterceptor(e){return this.interceptors.push(e),this}delete(e,t,a){return this.request("DELETE",e,t,a)}enableCacheBuster(){return this.addCacheBuster=!0,this}enableCredentials(){return this.withCredentials=!0,this}enableFormEncoding(){return this.useFormEncoding=!0,this}get(e,t){return this.request("GET",e,void 0,t)}getBlob(e,t){return this.request("GET",e,void 0,t,"blob")}download(e,t,a,s){return this.request(e,t,a,s,"blob").then((e=>{const t=window.URL.createObjectURL(e.data);window.location.assign(t)}))}getBuffer(e,t){return this.request("GET",e,void 0,t,"arraybuffer")}getText(e,t){return this.request("GET",e,void 0,t,"text")}patch(e,t,a){return this.request("PATCH",e,t,a)}post(e,t,a){return this.request("POST",e,t,a)}put(e,t,a){return this.request("PUT",e,t,a)}async request(e,t,a,s={},n="json"){const r=Object.assign(Object.assign({},s.headers),this.getAdditionalHeaders(t)),i=s.params instanceof URLSearchParams?new URLSearchParams(s.params):Object.assign({},s.params);this.addCacheBuster&&"GET"===e&&(i instanceof URLSearchParams?i.set("_",`${Date.now()}`):i._=Date.now()),!this.useFormEncoding||!a||a instanceof FormData||(a=(0,D.Vp)(a),r["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8");let o=((e,t)=>{let a;if(t instanceof URLSearchParams)a=t.toString();else{const e=[];for(const[a,s]of Object.entries(t)){if(null==s)continue;const t=Array.isArray(s)?`${a}[]`:a,n=Array.isArray(s)?s:[s];for(const a of n){const s=a instanceof Date?a.toISOString():"object"==typeof a&&null!==a?JSON.stringify(a):a;e.push(`${x(t)}=${x(s)}`)}}a=e.join("&")}return a&&(e+=(e.includes("?")?"&":"?")+a),e})(t,i);o=(0,D.qy)(o.startsWith("//")?o:o.startsWith("/")?`${this.baseUrl}${o}`:o),"json"===n&&(r.Accept="application/json; charset=UTF-8");const l=(async()=>{var t;void 0===a||a instanceof FormData||(null==r?void 0:r["Content-Type"])||(r["Content-Type"]="application/json; charset=UTF-8");const i=new AbortController;void 0!==s.timeout&&setTimeout((()=>i.abort()),s.timeout);const l=await fetch(o,{body:a instanceof FormData||this.useFormEncoding?a:JSON.stringify(a),credentials:this.withCredentials?"include":"same-origin",headers:r,method:e,signal:i.signal}),c=!0===s.forceJsonDecoding||(null===(t=l.headers.get("content-type"))||void 0===t?void 0:t.split(";").some((e=>"application/json"===e.trim()))),d={data:await("arraybuffer"===n?l.arrayBuffer():"blob"===n?l.blob():"text"===n?l.text():c?this.parseJsonResponse(l):void 0),headers:Object.fromEntries(l.headers.entries()),status:l.status,statusText:l.statusText};if(!l.ok){const t=new U(`Request failed with status code ${l.status}`);throw t.method=e,t.response=d,t.url=o,t}return d})();try{const e=await l;return this.interceptors.forEach((t=>t(e))),e}catch(a){const s=U.from(a,{method:e,url:o});throw this.errorInterceptors.forEach((e=>e(t,s))),s}}},j=class extends H{constructor(e){super(e),this.addBearer=!1,this.addTraceHeaders=!1,this.serviceMap={},this.getAdditionalHeaders=e=>{var t,a;const s={},n=(0,O.ej)(O.Vj.JWT);if(this.addBearer&&n&&(s.Authorization=`Bearer ${n}`),this.addTraceHeaders){if(n){const e=null===(t=null===P.qg||void 0===P.qg?void 0:(0,P.qg)())||void 0===t?void 0:t.user,r=null!==(a=(0,A.MJ)(n))&&void 0!==a?a:0;e&&(0,N.Sk)(e)&&(s["Jaeger-Debug-Id"]=`${r}`),s["X-Amzn-Trace-Id"]=`User=${r}`}else s["X-Amzn-Trace-Id"]="User=0";"/deactivate"!==e&&"/logout"!==e&&(s["X-Requested-With"]="XMLHttpRequest")}const r=Object.entries(this.serviceMap);return r.length&&(s["x-duolingo-service-map"]=r.map((([e,t])=>`${e}=${t}`)).join(";")),s},super.enableCredentials()}enableBearer(){return this.addBearer=!0,this}enableTraceHeaders(){return this.addTraceHeaders=!0,this}setServiceEnvironment(e,t){return t?this.serviceMap[e]=t:delete this.serviceMap[e],this}async request(e,t,a,s={},n="json"){const r=(0,P.qg)();return r&&(0,R.df)(r)&&!t.startsWith("/admin_tools")&&((0,L.Kp)("Performing backend request while Zombie mode is enabled",{data:{method:e,url:t}}),console.trace()),super.request(e,t,a,s,n)}};var G=a(80254),B=a(59249),V=a(11908);const z=e=>new j(e).addErrorInterceptor(((e,{response:t})=>{})).addResponseInterceptor((e=>{})).enableBearer().enableCacheBuster().enableTraceHeaders(),Z=(e="")=>{const t=(0,B.pL)(),a=(0,B.gQ)("edgeGatewayStaging")?"www-stage":"www";return void 0!==t?z(`https://${a}.duolingo.com${e}`).setServiceEnvironment("monolith",`next-${t}`):/[^.]*api[^.]*.duolingo.(com|cn)/.test(window.location.host)?z(`https://www.duolingo.com${e}`):z(e)},$=e=>z(e).enableFormEncoding(),q=()=>{G.VO(O.Vj).forEach((e=>(0,O.nJ)(e))),(0,V.cl)(V.Qt.State);try{new Promise((e=>{window.FB?window.FB.logout((()=>e())):e()}))}catch(e){}},W=e=>e instanceof U,Q=["champion","conqueror","friendly","legendary","overtime","photogenic","regal","sage","scholar","sharpshooter","strategist","wildfire","winner"],Y=z("https://duolingo-achievements-prod.duolingo.com"),J=async(e,t,a,s,n,r,i)=>{const o=`/users/${e}/achievements`;if(!t||!a)return[];const l={fromLanguage:t,hasPlus:i?1:0,isAgeRestricted:s?1:0,isProfilePublic:n?1:0,isSchools:r?1:0,learningLanguage:a};return(c=(await Y.get(o,{params:l})).data,null!==(d=c.achievements)&&void 0!==d?d:[]).filter((({name:e})=>Q.includes(e)));var c,d},K=async(e,t)=>{const a=`/users/${t}/${e.name}/${e.tier}/claim`;await Y.post(a,{})},X=async e=>{const t=`/users/${e}/update`;await Y.post(t,{tip_read:!0})},ee=async(e,t=!0)=>{const a=`/users/${e}/migrate`;await Y.post(a,{async:t,dryRun:!1})},te=new j("https://www.duolingo.com").addErrorInterceptor(((e,{response:t})=>{})).addResponseInterceptor((e=>{})).enableCacheBuster().enableTraceHeaders(),ae=async e=>(await te.get("/b2b/pricing/",{params:{country_code:e}})).data,se=async e=>(await te.post("/subscription-codes/invoices/",e)).data,ne=async(e,t)=>(await te.patch(`/subscription-codes/invoices/${e}/`,t)).data,re=async e=>(await te.post(`/subscription-codes/invoices/${e}/finalize/`)).data,ie=Z(),oe="B_",le=async()=>(await ie.get(`/b2b/users/${(0,A.Jb)()}/organizations`)).data,ce=async(e,t)=>{await ie.put(`/b2b/organizations/${e}`,t)},de=async e=>(await ie.get(`/b2b/organizations/${e}/purchases`)).data,ue=async e=>(await ie.get(`/b2b/purchases/${e}/codes`)).data,pe=async e=>(await ie.get(`/b2b/purchases/${e}/subscriptions`)).data,ge=async e=>200===(await ie.delete(`/b2b/codes/${e}`)).status,me=async e=>200===(await ie.delete(`/b2b/subscriptions/${e}`)).status,he=async(e,t)=>(await ie.post(`/b2b/purchases/${e}/codes/send`,t)).data,_e=e=>ie.download("POST",`/b2b/purchases/${e}/codes/download`),ve=async e=>(await ie.get(`/b2b/codes/${e}`)).data,fe=async e=>{await ie.post(`/b2b/codes/${e}/redeem`)};var Se=a(88868);z(`https://${window.location.host===Se.a_?Se.a_:"www.duolingo.com"}/2017-06-30/beta-program`);const Ee=z("https://www-prod.duolingo.com/2017-06-30/alphabets"),ye=async(e,t)=>(await Ee.get(`/courses/${e}/${t}`)).data,be=async e=>Ee.put(`/sessions/${e.learningLanguage}/${e.fromLanguage}/${e.id}`,e),we=async(e,t,a)=>Ee.post(`/sessions/${e}/${t}`,a);var Ie=a(17135);const Te=new H,ke=async()=>void 0===(await Ae("brb")).brb_version?"disabled":"enabled",Ce=async e=>(await Te.get(e)).data,Re=async e=>(await Te.get(e)).data,Oe=async e=>(await Te.get(e)).data,Le=async e=>(await Te.get(e)).data,Pe=async e=>(await Te.get(e)).data,Ae=async e=>{let t;try{t=(0,A.Jb)()}catch(e){t=0}const a=t%100;try{return(await Te.get(`https://${e}.duolingo.com/${a}/web.json?user=${t}&ts=${(0,Ie.Zo)()}&tzoffset=${(0,Ie.pQ)()/-60}`,{forceJsonDecoding:!0,timeout:1e4})).data}catch(e){return{}}},Ne=async e=>(await Te.get(e)).data,De=async()=>!0===(await Ae("zombie")).enforce_offline?"enabled":"disabled",xe=async()=>(await Te.get("https://d3kwyfyztuo0xs.cloudfront.net/config/latest/0.9.6",{forceJsonDecoding:!0})).data,Me=(z("https://explanations.duolingo.com"),$("https://forum-api.duolingo.com")),Fe=e=>Me.post(`/comments/${e}/undelete`),Ue=e=>null===e.learning_language,He=async()=>(await Me.post("/diagnostics/topic_moderators/list_topics")).data,je=async e=>(await Me.post("/diagnostics/topic_moderators/list_mods",{topic_id:e})).data,Ge=async()=>(await Me.post("/diagnostics/topic_moderators/list_mods")).data,Be=async(e,t)=>(await Me.post("/diagnostics/topic_moderators/add",{topic_id:e,user_id:t})).data,Ve=async(e,t)=>(await Me.post("/diagnostics/topic_moderators/remove",{topic_id:e,user_id:t})).data,ze={LESSONS:"lessons",NINETY_ACCURACY_LESSONS:"ninetyPercentLessons",PERFECT_LESSONS:"perfectLessons",XP:"xp"},Ze=Z("/2017-06-30/friends"),$e=async(e,t,a,s)=>{var n;return(null===(n=null==a?void 0:a.featureFlags)||void 0===n?void 0:n.friends_microservice_web_client)?(await Ze.get(`/users/${e}/feed`,{params:Object.assign({uiLanguage:t},void 0===s?{}:{after:s})})).data:{feed:[],kudosConfig:{reactions:[],shareLabel:""}}},qe=async(e,t,a,s,n)=>{var r;if(null===(r=null==a?void 0:a.featureFlags)||void 0===r?void 0:r.friends_microservice_web_client){const a=void 0===n?{pageSize:s}:{pageAfter:n,pageSize:s};return(await Ze.get(`/kudos/${e}/reactions/${t}`,{params:a})).data}return{cursor:null,userReactions:[]}},We=async e=>{var t;if(null===(t=null==e?void 0:e.featureFlags)||void 0===t?void 0:t.friends_microservice_web_client){const e=(await Ze.get("/kudos/assets")).data;return Object.assign(Object.assign({},e.kudosFeedAssets),e.kudosDrawerAssets)}return{}},Qe=async(e,t,a)=>{var s;if(null===(s=null==a?void 0:a.featureFlags)||void 0===s?void 0:s.friends_microservice_web_client){const a=(await Ze.get(`/kudos/${e}/drawer`,{params:{uiLanguage:t}})).data.kudosDrawer;return a?a.isSystemGenerated?null:a:null}return null},Ye=async(e,t,a)=>{await Ze.post("/kudos",{eventIds:e,reactionType:t,screen:a})},Je=async(e,t)=>{await Ze.post("/kudos",{triggerTypes:e,triggerUserIds:t})},Ke=async e=>{await Ze.delete(`/kudos/${e}`)},Xe=async(e,t,a,s)=>{await Ze.patch(`/users/${e}/feed`,{eventIds:t,isInteractionEnabled:a,screen:s})},et=async(e,t)=>{const a={filterUsers:!0,pageSize:50,uiLanguage:t};return(await Ze.get(`/users/${e}/recommendations`,{params:a})).data},tt=async(e,t)=>(await Ze.patch(`/users/${e}/recommendations`,{userIds:t})).data,at=async(e,t)=>{await Ze.delete(`/users/${e}/recommendations/${t}`)},st=async(e,t,a)=>{const s={cursor:a,pageSize:e,query:t,searchType:"QUERY"};return(await Ze.get("/users",{params:s})).data},nt=async(e,t)=>(await Ze.get(`/users/${e}/profile`,{params:{pageSize:t}})).data,rt=async(e,t,a)=>(await Ze.get(`/users/${e}/following`,{params:Object.assign({pageSize:t},a?{pageAfter:a}:void 0)})).data.following,it=async(e,t,a)=>(await Ze.get(`/users/${e}/followers`,{params:Object.assign({pageSize:t},a?{pageAfter:a}:void 0)})).data.followers,ot=async(e,t,a)=>(await Ze.get(`/users/${e}/friends-in-common`,{params:Object.assign({pageSize:t},a?{pageAfter:a}:void 0)})).data.friendsInCommon,lt=async(e,t,a,s,n)=>{const r={component:t,follow_reason:a,follow_suggestion_score:n,suggested_reason:s};await Ze.post(`/users/${(0,A.Jb)()}/follow/${e}`,r)},ct=async e=>{await Ze.delete(`/users/${(0,A.Jb)()}/follow/${e}`)},dt=async e=>{await Ze.post(`/users/${(0,A.Jb)()}/block/${e}`)},ut=async e=>{await Ze.delete(`/users/${(0,A.Jb)()}/block/${e}`)},pt=async(e,t)=>(await Ze.post("/facebook-connect",{facebookFriends:JSON.stringify(t.map((e=>({id:e})))),facebookId:e})).data.users,gt=async({eventType:e,expirationTime:t,nudgeType:a,recipientId:s,remainingEvents:n,shouldSendPush:r,userId:i,winStreak:o})=>{await Ze.post(`/users/${i}/friends-quests/${s}/nudge`,{eventType:ze[e],expirationTime:t,nudgeType:a,remainingEvents:n,shouldSendPush:r,winStreak:o})},mt=z("https://goals-api.duolingo.com"),ht=async e=>(await mt.get(`/schema?ui_language=${e}`)).data,_t=async({timezone:e,uiLanguage:t,userId:a})=>(await mt.get(`/users/${a}/progress`,{params:{timezone:e,ui_language:t}})).data,vt=async e=>(await mt.get(`/users/${e}/quests`)).data,ft=async({goalId:e,questId:t,questSlot:a,timestamp:s,timezone:n,userId:r})=>{await mt.post(`/users/${r}/quest`,{goal_id:e,quest_id:t,quest_slot:a,timestamp:s.toISOString(),timezone:n})},St=async(e,t,a,s)=>{await mt.post(`/users/${e}/progress/batch`,{metric_updates:t.metricUpdates,timestamp:null==a?void 0:a.toISOString(),timezone:s})},Et=new H("https://api.hsforms.com"),yt=e=>wt("42546705","ba5f77b7-5cd8-4ac1-bbb3-0c93011e0d78",[{name:"email",value:e}]),bt=(e,t)=>wt("22404983","48a49871-198d-470d-a32f-a959d7b72c44",[{name:"email",value:e},{name:"username",value:t}]),wt=(e,t,a)=>Et.post(`/submissions/v3/integration/submit/${e}/${t}`,{context:{pageUri:window.location.href},fields:a});var It,Tt,kt;!function(e){e.SUPER="premium_subscription",e.MAX="gold_subscription",e.IMMERSIVE_SUPER="immersive_subscription"}(It||(It={})),function(e){e.IOS="APPLE",e.Schools="DUOLINGO_SCHOOLS",e.Stripe="DUOLINGO",e.Android="GOOGLE_PLAY",e.ImmersivePlus="IMMERSIVE_PLUS",e.Admin="NONE"}(Tt||(Tt={})),function(e){e.Standard="STANDARD",e.NewYears2023="NEW_YEARS_2023"}(kt||(kt={}));var Ct=a(13026);const Rt=z("https://duolingo-leaderboards-prod.duolingo.com"),Ot="7d9f5dd1-8423-491a-91f2-2532052038ce",Lt="b7f7f746-212e-42a2-aa70-54beacad9011",Pt=e=>"TROPHY,winner"===e?"TROPHY":(0,Ct.gs)(e)?e:"NONE",At=e=>({itemId:e.item_id,itemQuantity:e.item_quantity,rank:e.rank,rewardType:e.reward_type,tier:e.tier}),Nt=e=>({cohortSize:e.cohort_size,cohortType:e.cohort_type,numDemoted:e.num_demoted,numLosers:e.num_losers,numPromoted:e.num_promoted,numWinners:e.num_winners,rewards:e.rewards.map(At),scoreType:e.score_type}),Dt=e=>({contestEnd:Date.parse(e.contest_end),contestStart:Date.parse(e.contest_start),contestState:e.contest_state,registrationEnd:Date.parse(e.registration_end),registrationStart:Date.parse(e.registration_start),registrationState:e.registration_state,ruleset:Nt(e.ruleset)}),xt=e=>({avatarUrl:e.avatar_url,displayName:e.display_name,hasRecentActivity:e.has_recent_activity_15,reaction:Pt(e.reaction),score:e.score,userId:e.user_id}),Mt=e=>({creationDate:Date.parse(e.creation_date),id:e.cohort_id,rankings:e.rankings.map(xt),tier:e.tier}),Ft=e=>({cohort:Mt(e.cohort),complete:e.complete,contest:Dt(e.contest),score:e.score,userId:e.user_id}),Ut=async(e,t,a=!1)=>{const s=`/leaderboards/${e}/users/${t}`,n={};return a&&(n.client_unlocked=!0),n.get_reactions=!0,(e=>{const t={streakInTier:e.streak_in_tier,tier:e.tier,topThreeFinishes:e.top_three_finishes};return void 0!==e.num_sessions_remaining_to_unlock&&(t.numSessionsRemainingToUnlock=e.num_sessions_remaining_to_unlock),void 0!==e.active&&(t.active=null===e.active?null:Ft(e.active)),void 0!==e.ended&&("result"===(0,B.ky)("debugLeaderboards")&&e.active?t.ended=[Ft(e.active)]:t.ended=e.ended.map(Ft)),void 0!==e.leaderboard&&(t.leaderboard=(e=>({activeContest:e.active_contest?Dt(e.active_contest):null,nextContestStart:e.next_contest_start?Date.parse(e.next_contest_start):null}))(e.leaderboard)),t})((await Rt.get(s,{params:n})).data)},Ht=async(e,t)=>{const a=`/leaderboards/${e}/users/${t}`;await Rt.post(a)},jt=async(e,t)=>{const a=`/leaderboards/${e}/users/${t}`;await Rt.patch(a)},Gt=async(e,t,a)=>{const s=`/reactions/${e}/users/${t}`,n={reaction:a};await Rt.patch(s,n)},Bt=async(e,t)=>{const a=`/reactions/uncohorted/${e}/users/${t}`;return Pt((await Rt.get(a)).data.reaction)},Vt=async(e,t,a)=>{const s=`/reactions/uncohorted/${e}/users/${t}`,n={reaction:a};await Rt.patch(s,n)},zt=z("https://www.duolingo.com/2017-06-30/messaging"),Zt=(e,t={})=>zt.post("/ack-message/",{messageId:{[e]:t},userId:(0,A.Jb)()}),$t=e=>zt.post("/ack-messages/",{sessionEndMessageLogs:e.map((({ctaWasClicked:e,messageId:t,timestamp:a})=>({ctaWasClicked:e,sessionEndMessageId:{[t]:{}},timestamp:a}))),userId:(0,A.Jb)()}),qt=async(e,t)=>(await zt.post("/get-messages/",{potentialMessageIds:e.map((e=>({[e]:{}}))),useOnboardingBackend:t,userId:(0,A.Jb)()})).data,Wt=async(e,t)=>(await zt.post("/get-messages/",{sessionEndPotentialMessageIds:e.map((e=>({[e]:{}}))),useOnboardingBackend:t,userId:(0,A.Jb)()})).data,Qt=z("https://www.duolingo.com/v2/mistakes");var Yt;!function(e){e[e.ADD=0]="ADD",e[e.RESOLVE_INBOX=1]="RESOLVE_INBOX",e[e.RESOLVE_LEARNING=2]="RESOLVE_LEARNING"}(Yt||(Yt={}));const Jt=async(e,t,a)=>(await Qt.get(`/users/${(0,A.Jb)()}/courses/${e}/count`,{params:{includeListening:t,includeSpeaking:a}})).data.numberMistakes,Kt=async({countLimit:e,courseId:t,includeListening:a,includeSpeaking:s})=>(await Qt.get(`/users/${(0,A.Jb)()}/courses/${t}`,{params:{includeListening:a,includeSpeaking:s,limit:e,requestType:"INBOX"}})).data.mistakes,Xt=async({courseId:e,expectedMistakes:t,session:a})=>{var s;const n=null===(s=null==a?void 0:a.challenges)||void 0===s?void 0:s.map((e=>e.challengeGeneratorIdentifier)).filter((e=>void 0!==e)),r=null==n?void 0:n.map((e=>e.generatorId)),i=null==t?void 0:t.filter((e=>!(null==r?void 0:r.includes(e.generatorId)))),o=null==i?void 0:i.map((e=>({challengeIdentifier:e,patchType:Yt.RESOLVE_INBOX})));void 0!==o&&0!==o.length&&await Qt.patch(`/users/${(0,A.Jb)()}/courses/${e}`,{incomingMistakes:o})},ea=z("https://invite.duolingo.com"),ta=e=>ea.post("/user/splash-load",{invite_code:e});var aa;!function(e){e.SKILL="SKILL",e.STORY="STORY",e.XP="XP_CHALLENGE",e.UNIT="UNIT"}(aa||(aa={}));const sa=[aa.SKILL,aa.STORY],na=z("https://schools.duolingo.com/api/1"),ra=z("https://schools.duolingo.com/api/2"),ia=async()=>(await na.get("/observers/list_settings_classrooms")).data.classrooms,oa=async e=>(await na.get("/observers/get_observer_for_code",{params:{link_code:e}})).data,la=async e=>(await na.post("/observers/join_classroom_by_code",{link_code:e})).data,ca=async e=>{await na.post("/observers/leave_classroom",{classroom_id:e})},da=async e=>(await ra.get(`/leaderboards/${e}/classroom_info`,{params:{user_id:e}})).data,ua=e=>ra.post(`/students/${e}/auto_follow`),pa=async(e,t,a)=>(await ra.get("/activities",{params:{end_time:a,start_time:t,user_ids:[e].join(",")}})).data[e],ga=(z("https://www.duolingo.com/v1/score"),z("https://jeeves.duolingo.com")),ma=async e=>(await ga.get("/api/1/detect_duplicates",{params:{issue_key:e}})).data,ha=e=>ga.post("/api/1/fully_connect_duplicates",{issue_keys:e}),_a=async()=>(await ga.get("/api/2/shakira/slack_report_types")).data,va=async e=>(await ga.get("/api/2/shakira/suggested_features",{params:e})).data,fa=async(e,t)=>{const a=new FormData;return a.set("issueData",JSON.stringify(e)),t.forEach((([e,t])=>a.set(e,t))),(await ga.post("/api/2/shakira/report_issue",a)).data},Sa=Z(""),Ea=async e=>{await Sa.post("/d",{phoneNumber:e})};var ya=a(50498);const ba=z("https://spam-control-api.duolingo.com");var wa;!function(e){e.BAD_BEHAVIOR="bad_behavior",e.BAD_NAME="bad_name",e.NUDITY="nudity",e.SPAM="spam",e.SOMETHING_ELSE="something_else"}(wa||(wa={}));const Ia=async(e,t)=>{const{name:a="(Unknown)",picture:s,username:n="(Unknown)",id:r}=e;await(0,ya.XD)((async()=>ba.post("/reports/user_profiles",{name:a,picture:`https:${s}/xlarge`,reason:t,user_id:r,username:n})),{retries:1})};const Ta=z("https://stories.duolingo.com"),ka=async e=>{var{storyId:t}=e,a=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(e,["storyId"]);return(await Ta.get(`/api2/stories/${t}`,{params:a})).data},Ca=async(e,t)=>(await Ta.post(`/api2/stories/${e}/complete`,t)).data,Ra=async e=>(await Ta.post("/api/userReply",e)).data;let Oa,La=0;const Pa=async(e,t,a)=>{if(void 0===Oa||Oa+1e4<Date.now())La=1,Oa=Date.now();else if(La+=1,La>=5)return(0,B.Au)()&&alert("Practice hub stories has been refreshed too frequently - please contact a developer."),void(0,L.vU)("Practice hub stories has been refreshed too many times",{data:{practiceHubStoryApiCount:La}});return(await Ta.get("/api2/practiceHubStories",{params:{featuredStoryId:e,fromLanguage:t,illustrationFormat:"svg",learningLanguage:a}})).data},Aa=$(""),Na=async()=>{await Aa.post("/logout")},Da=async()=>(await Aa.get("/notifications")).data,xa=async e=>{const t=new FormData;t.append("image",e),await Aa.post("/avatars",t)},Ma=async e=>{await Aa.post("/dismiss_notification",{message:e.toLowerCase()})},Fa=async e=>(await Aa.get("/admin_tools",{params:{log_type:"deletes",page:e}})).data,Ua=async()=>(await Aa.get("/admin_tools/shadow_banned")).data,Ha=async e=>{const t=(await Aa.post("/admin_tools/shadow_banned/add",{username:e})).data;if(t.error)throw t.error;return t},ja=async e=>{const t=(await Aa.post("/admin_tools/shadow_banned/remove",{user_id:e})).data;if(t.error)throw t.error;return t},Ga=async()=>(await Aa.get("/admin_tools/social_currency_stats")).data;var Ba=a(26886),Va=a(93746),za=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a};const Za=$("/api/1"),$a=async(e,t,a,s)=>{const n=new FormData;n.append("user_id",`${e}`),n.append("username",t),s&&n.append("image",s),a.length&&n.append("ban_description",a),await Za.post("/shadowban_user",n)},qa=e=>"zh-CN"===e?"zh":e,Wa=e=>"zh"===e?"zh-CN":e,Qa=e=>{var{from_language:t,from_language_id:a,from_language_name:s,learning_language:n,learning_language_id:r,learning_language_name:i,num_learners:o,num_learners_string:l}=e,c=za(e,["from_language","from_language_id","from_language_name","learning_language","learning_language_id","learning_language_name","num_learners","num_learners_string"]);return Object.assign({fromLanguage:t,fromLanguageId:qa(a),fromLanguageName:s,learningLanguage:n,learningLanguageId:qa(r),learningLanguageName:i,numLearners:o,numLearnersString:l},c)},Ya=async e=>(await Za.get("/courses/list")).data.map(Qa).filter((({fromLanguageId:t,learningLanguageId:a})=>((0,Va.nV)(a,t)||(0,Ba.yO)(t,a))&&!(e&&(0,Ba.It)(a,t)))),Ja=async(e,t=Va.h9,a=Va.h9)=>(e=>{var{beta_date:t,estimated_beta_date:a,estimated_beta_date_string:s,from_language:n,from_language_name:r,from_language_id:i,learning_language:o,learning_language_id:l,learning_language_name:c,num_learners:d,num_learners_string:u,released_date:p,released_date_string:g,start_date:m,subscriber_count:h,user_subscribed:_}=e,v=za(e,["beta_date","estimated_beta_date","estimated_beta_date_string","from_language","from_language_name","from_language_id","learning_language","learning_language_id","learning_language_name","num_learners","num_learners_string","released_date","released_date_string","start_date","subscriber_count","user_subscribed"]);return Object.assign({betaDate:t,estimatedBetaDate:a,estimatedBetaDateString:s,fromLanguage:n,fromLanguageId:qa(i),fromLanguageName:r,learningLanguage:o,learningLanguageId:qa(l),learningLanguageName:c,numLearners:d,numLearnersString:u,releasedDate:p,releasedDateString:g,startDate:m,subscriberCount:h,userSubscribed:_},v)})((await Za.get(`/courses/${Wa(e)}/${Wa(t)}/show`,{params:{ui_language_abbrev:(0,Va.D3)(a)}})).data),Ka=G.HP((async e=>(await Za.get("/get_language_tokens",{params:{language:e}})).data.tokens||[])),Xa=async(e,t)=>{await Za.post("/me/register_device",{registration_id:e,subscription:t})},es=async e=>{await Za.post("/me/unregister_device",{registration_id:e})},ts=async(e,t,a)=>{const s={};a&&(s.email=a),await Za.post(`/courses/${Wa(e)}/${Wa(null!=t?t:Va.h9)}/subscribe`,s)},as=async(e,t,a)=>{const s={};a&&(s.email=a),await Za.post(`/courses/${Wa(e)}/${Wa(null!=t?t:Va.h9)}/unsubscribe`,s)};var ss=a(16324),ns=a(46435),rs=a(41364),is=a(71371),os=a(25062),ls=a(32499),cs=a(54448),ds=a(79465),us=a(11811);const ps=Z("/2017-06-30"),gs="Idempotency-Key";ps.addErrorInterceptor(((e,{response:t})=>{if(401===(null==t?void 0:t.status)&&!e.includes("login")){if((0,A.Pc)())return(0,L.um)("Requiring logged-out user to log in again",{sample:.1}),q(),(0,Se.Zs)();(0,L.vU)("Attempted authenticated call while logged-out")}})),(0,B.gQ)("debugStripe")&&ps.setServiceEnvironment("purchasing-backend","staging").setServiceEnvironment("shop-backend","staging-1").setServiceEnvironment("subscriptions-backend","staging-1"),(0,B.gQ)("monolithStaging")&&ps.setServiceEnvironment("monolith",`next-${(0,B.ky)("monolithStaging")}`);const ms=(e=!0)=>["acquisitionSurveyReason","adsConfig","betaStatus","blockedUserIds","blockerUserIds","canUseModerationTools","classroomLeaderboardsEnabled","courses","creationDate","currentCourseId","email","emailAnnouncement","emailAssignment","emailAssignmentComplete","emailClassroomJoin","emailClassroomLeave","emailEditSuggested","emailEventsDigest","emailFollow","emailPass","emailPromotion","emailResearch","emailWeeklyProgressReport","emailSchoolsAnnouncement","emailSchoolsNewsletter","emailSchoolsProductUpdate","emailSchoolsPromotion","emailStreamPost","emailVerified","emailWeeklyReport","enableMicrophone","enableSoundEffects","enableSpeaker",`experiments{${ns.rn}}`,"facebookId","fromLanguage","gemsConfig","globalAmbassadorStatus","googleId","hasFacebookId","hasGoogleId","hasPlus","health","id","inviteURL","joinedClassroomIds","lastResurrectionTimestamp","lastStreak{isAvailableForRepair,length}","learningLanguage","lingots","location","monthlyXp","name","observedClassroomIds","optionalFeatures","persistentNotifications","picture","plusDiscounts","practiceReminderSettings","privacySettings","referralInfo","rewardBundles","roles","sessionCount","streak","streakData{currentStreak,previousStreak}","timezone","timezoneOffset","totalXp","trackingProperties","username","webNotificationIds","weeklyXp","xpGains","xpGoal","zhTw"].concat(e?["currentCourse"]:[]);var hs;!function(e){e.COMMENT="COMMENT",e.FOLLOW="FOLLOW",e.LESSON="LESSON",e.MASTER="MASTER",e.PASS="PASS",e.PRACTICE="PRACTICE",e.STREAM_POST="STREAM_POST",e.TEST="TEST",e.TRANSLATION="TRANSLATION",e.WELCOME="WELCOME"}(hs||(hs={}));const _s=e=>{if("PREPAID"===e.couponType&&e.packageInfo){if("premium"===e.packageInfo[0].subscriptionType)return e.packageInfo[0].isFamilyPlan?"Super Family":"Super";if("gold"===e.packageInfo[0].subscriptionType)return e.packageInfo[0].isFamilyPlan?"Max Family":"Max";throw Error("Invalid Subscription Type from Coupon")}if("B2B_UNIVERSAL_CLOCK"===e.couponType||"TRIAL"===e.couponType)return"Super";throw Error("Invalid couponType")},vs=e=>{if("PREPAID"===e.couponType&&e.packageInfo){if("WEEK"===e.packageInfo[0].unitOfTime)return"WEEK";if("MONTH"===e.packageInfo[0].unitOfTime)return"MONTH"}return"MONTH"},fs=async(e,t=!0,a=null,s)=>{await ps.post(s?"/login-experiment":"/login",Object.assign({distinctId:(0,ds.kG)(),signal:a},e),{params:{fields:t?ms().join(","):""}})};var Ss;!function(e){e.CHANGE_PASSWORD="CHANGE_PASSWORD",e.RESET_PASSWORD="RESET_PASSWORD",e.SIGN_UP="SIGN_UP"}(Ss||(Ss={}));const Es=async e=>(await ps.post("/password-quality/check",Object.assign({},e))).data,ys=async(e,t)=>{await ps.post(t?"/login-experiment":"/login",Object.assign({distinctId:(0,ds.kG)()},e),{params:{fields:""}})},bs=async(e,t)=>(await ps.post("/users",Object.assign({distinctId:(0,ds.kG)(),signal:t},e),{forceJsonDecoding:!0,params:{fields:"id"}})).data,ws=(0,rs.p)("GET_USER")((async(e,t=void 0)=>await Ts(e,ms(t)))),Is=(0,rs.p)("GET_USER")((async e=>await Ts(e,["courses","creationDate","currentCourse","currentCourseId","gemsConfig","globalAmbassadorStatus","hasPlus","id","lingots","name","picture","privacySettings","roles","streak","streakData{currentStreak,previousStreak}","totalXp","username"]))),Ts=async(e,t)=>(await ps.get(`/users/${e}`,{params:{fields:t.join(",")}})).data,ks=e=>ps.post(`/users/${e}/email-verifications`),Cs=async(e,t)=>(await ps.patch(`/users/${e}/email-verifications/${t}`,{verified:!0})).data,Rs=async(e,t)=>(await ps.post("/email-removals",{email:e,token:t})).data,Os=async e=>(await ps.get("/onboarding/validate-username",{params:{username:e}})).data,Ls=async e=>{const t={fields:`users{${["courses","creationDate","currentCourse","currentCourseId","gemsConfig","globalAmbassadorStatus","hasPlus","id","lingots","name","picture","privacySettings","roles","streak","streakData{currentStreak,previousStreak}","totalXp","username"].join(",")}}`};return(await ps.get("/users",{params:Object.assign({username:e},t)})).data.users},Ps=async e=>(await ps.get("/users",{params:{email:e}})).data.users,As=async(e,t,a,s=null)=>{const n=a?{fields:a.join(",")}:{};return(await ps.patch(`/users/${e}`,Object.assign({signal:s},t),{forceJsonDecoding:!0,params:n})).data},Ns=async(e,t)=>{const a=t?(0,Ie.zK)((0,Ie.g8)(t)):void 0;return(await ps.get(`/users/${e}/xp_summaries`,{params:{startDate:a}})).data.summaries},Ds=async(e,t,a)=>(await ps.get(`/users/${e}/moderated-events`,{params:{limit:a,types:t.join(",")}})).data.events,xs=async(e,t)=>{await ps.post(`/users/${e}/messages`,{message:t})},Ms=e=>ps.delete(`/users/${(0,A.Jb)()}/courses/${e}`,{}),Fs=async e=>{const t=(e.type===us.FF.AlphabetLesson&&(0,B.NY)()?await we(e.learningLanguage,e.fromLanguage,e):await ps.post("/sessions",e)).data;if(!Array.isArray(t.challenges))throw Error("No challenges present in session");return t},Us=(e,{onError:t,signal:a}={})=>{const s=new AbortController;return(0,ya.XD)((async()=>{try{let t;if(t=e.type===us.FF.AlphabetLesson?await be(e):await ps.put(`/sessions/${e.id}`,Object.assign({},e),{headers:{"Idempotency-Key":e.id},timeout:1e4}),202===t.status)throw Error("Session has been accepted but not yet processed.");return t.data}catch(e){throw is.Z.remove("session_end_grade"),null==t||t(e),e.response&&(e.response.status>=500&&e.response.status<600&&!e.response.headers["no-retry"]||s.abort()),e}}),{backoffFn:e=>{const t=.75+2*Math.random()*.25;return 250*Math.pow(2,e-1)*t},retries:1/0,signal:a?(0,ya.yv)(s.signal,a):s.signal,stopAtTime:Date.now()+24e4})},Hs=async e=>(await ps.post(`/sessions/${e.id}/challenges`,Object.assign({},e))).data,js=async e=>G.ei((await ps.put(`/challenges/${e.id}`,Object.assign({},e))).data,"blameMessage","blameType","closestSolution","correct","gradingMetadata","guess","highlights"),Gs={BAD_AUDIO:"BAD_AUDIO",BAD_HINTS:"BAD_HINTS",BAD_IMAGE:"BAD_IMAGE",BAD_OPTION:"BAD_OPTION",BAD_PROMPT:"BAD_PROMPT",CHARACTER_DISPLAY:"CHARACTER_DISPLAY",MISSING_AUDIO:"MISSING_AUDIO",MISSING_HINTS:"MISSING_HINTS",MISSING_IMAGE:"MISSING_IMAGE",NOT_ACCEPTED:"NOT_ACCEPTED",OFFENSIVE_OPTION:"OFFENSIVE_OPTION",OTHER_ISSUE:"OTHER_ISSUE",WRONG_ACCEPTED:"WRONG_ACCEPTED"},Bs=async(e,t)=>{const a={challenge:(0,cs.g)(e),problems:t};await ps.post(`/challenges/${e.id}/reports`,a)},Vs=async()=>(await ps.get("/shop-items")).data.shopItems,zs=async(e="US",t)=>{const a=t?kt.NewYears2023:kt.Standard,s=(await ps.get(`/users/${(0,A.Jb)()}/subscription-plans`,{params:{countryCode:e,supportedLayouts:a}})).data,n=t=>void 0===t.planCurrency?"UNDEFINED":(0,os.T4)(Math.floor(t.priceInCents/t.periodLengthInMonths),t.planCurrency,e),r=t=>void 0===t.planCurrency?"UNDEFINED":(0,os.T4)(t.priceInCents,t.planCurrency,e),i=s.plusPackageViewModels.find((e=>1===e.periodLengthInMonths)),o=t=>t===ls._r.TwelveMonth&&i?(0,os.T4)(12*i.priceInCents,i.planCurrency,e):void 0,l=e=>{const a=1===(s=e).periodLengthInMonths?ls._r.OneMonth:s.isFamilyPlan?ls._r.FamilyPlan:ls._r.TwelveMonth;var s;return Object.assign(Object.assign({},e),{formattedHypotheticalYearlyPrice:o(a),formattedMonthlyPrice:n(e),formattedPrice:r(e),isFreeTrial:e.trialPeriodInDays>0,isNewYears:t&&a===ls._r.TwelveMonth,planType:a,type:"subscription"})};return{currentPlan:s.currentPlan?l(s.currentPlan):void 0,subscriptionPlans:s.plusPackageViewModels.map(l)}},Zs=async e=>(await ps.get(`/users/${(0,A.Jb)()}/shop-items/${e}`)).data,$s=async(e,t)=>ps.patch(`/users/${(0,A.Jb)()}/shop-items/${e}`,t),qs=async(e,t,a,s)=>(await ps.put(`/users/${(0,A.Jb)()}/payment-methods/${e}`,{product:t,stripeToken:a},{headers:{[gs]:s}})).data,Ws=async()=>(await ps.get(`/users/${(0,A.Jb)()}`,{params:{fields:"paymentMethods"}})).data.paymentMethods,Qs=async()=>(await ps.get(`/users/${(0,A.Jb)()}`,{params:{fields:"shopItems{familyPlanInfo{inviteToken,ownerId,secondaryMembers},itemName,purchaseDate,purchaseId,purchasePrice,quantity,subscriptionInfo{currency,expectedExpiration,extendedFreeTrialLength,isFreeTrialPeriod,periodLength,price,renewer,renewing,vendorPurchaseId},wagerDay}"}})).data.shopItems,Ys=async(e,t)=>(await ps.post(`/users/${(0,A.Jb)()}/payment-methods`,{product:os.hp.Duolingo,stripeToken:e},{headers:{[gs]:t}})).data,Js=async(e,t)=>(await ps.post(`/users/${(0,A.Jb)()}/create-setup`,{paymentMethodId:e,product:os.hp.Duolingo},{headers:{[gs]:t}})).data,Ks=async(e,t)=>(await ps.post(`/users/${(0,A.Jb)()}/attach-payment-method`,{paymentMethodId:e,product:os.hp.Duolingo},{headers:{[gs]:t}})).data,Xs=async({email:e,idempotencyKey:t,languageCode:a,productId:s,promoCode:n})=>{const r={couponCode:n,email:e,languageCode:a,productId:s,stripeAccount:"DUOLINGO_GENERAL"+((0,B.gQ)("debugStripe")?"_TEST":""),vendor:"VENDOR_STRIPE"};return(0,ss.EV)((await ps.post(`/users/${(0,A.Jb)()}/create-order`,(0,ss.Ed)(r),{headers:{[gs]:t}})).data)},en=async(e,t,a)=>{const s=new AbortController;let n=0;return(0,ya.XD)((async()=>{try{return{item:(await ps.post(`/users/${(0,A.Jb)()}/shop-items`,Object.assign({itemName:e},t),{headers:a?{[gs]:a}:void 0})).data,numRetries:n}}catch(e){throw e.response&&(e.response.status>=500&&e.response.status<600&&!e.response.headers["no-retry"]?n++:s.abort()),e}}),{retries:1,signal:s.signal})},tn=async({itemName:e,purchasingId:t,receivingId:a})=>(await ps.post(`/users/${t}/gifts/${a}`,{itemName:e})).data,an=async e=>(await ps.get(`/plus-coupon-codes/${e}`)).data,sn=async()=>(await ps.get(`/users/${(0,A.Jb)()}/family-plan/invites`)).data,nn=async e=>(await ps.get(`/family-plan/invite/${e}`)).data,rn=async e=>(await ps.post(`/users/${(0,A.Jb)()}/family-plan/members/invite/${e}`,{})).data,on=async e=>(await ps.patch(`/users/${(0,A.Jb)()}/family-plan/invites/${e}`,{status:"ACCEPTED"})).data,ln=async e=>(await ps.patch(`/users/${(0,A.Jb)()}/family-plan/invites/${e}`,{status:"REJECTED"})).data,cn=(e,t)=>ps.delete(`/users/${e}/family-plan/members/${t}`,{}),dn=["ageRestrictionLimit",`clientExperiments{${ns.Sg}}`,"featureFlags","ipCountry","speechHost"],un=async e=>200===(await ps.get(`/bango/invite/${e}`)).status,pn=async e=>200===(await ps.post(`/users/${(0,A.Jb)()}/activate-bango-subscription`,{inviteToken:e})).status,gn=async()=>(await ps.get("/config",{params:{fields:dn.join(",")}})).data,mn=async e=>{await ps.delete(`/users/${(0,A.Jb)()}/shop-items`,{itemName:e})},hn=async()=>(await ps.get(`/users/${(0,A.Jb)()}/privacy-settings`)).data.privacySettings.map((e=>Object.assign(Object.assign({},e),{id:e.id.toUpperCase()}))),_n=async e=>(await ps.patch(`/users/${(0,A.Jb)()}/privacy-settings`,e,{params:{fields:"privacySettings"}})).data.privacySettings,vn=e=>ps.post("/password-reset",{email:e}),fn=async(e,t)=>{await ps.post("/tracking-status",{distinctId:t,enabled:e})},Sn=async({id:e,fromLanguage:t,learningLanguage:a},s,n)=>{await ps.patch(`/users/${e}/rewards/${s}`,{consumed:!0,fromLanguage:t,learningLanguage:a,pathLevelSpecifics:n})},En=async e=>(await ps.get(`/attribution/survey/custom?uiLanguage=${e}`)).data.responses,yn=async e=>(await ps.post(`/users/${(0,A.Jb)()}/plus-discounts`,{discountType:e})).data,bn=(e,t,a)=>ps.patch(`/users/${e}/experiments/${t}`,a),wn=async()=>{await ps.put(`/users/${(0,A.Jb)()}/remove-heart`)},In=z("https://www.duolingo.com/2017-06-30"),Tn=async()=>{var e;if(null===(e=window.webkit)||void 0===e?void 0:e.messageHandlers)return new Promise((e=>{window.weekly_data_callback=t=>{window.user_model_callback=a=>{if(t.current_streak=a.streakData.length,t.current_learning_language=a.currentCourse.learningLanguage,a.currentCourse.skills){const e=a.currentCourse.skills;let s=0,n=0;e.forEach((e=>{e.forEach((({finishedLevels:e})=>{s+=1,e>0&&(n+=1)}))})),t.current_course_progress=n/s}e(t)},window.webkit.messageHandlers.observer.postMessage({get_user_model:{callback:"user_model_callback",fields:["currentCourse","streakData"]}})},window.webkit.messageHandlers.observer.postMessage({get_weekly_report_info:{callback:"weekly_data_callback"}})}));const{data:t}=await In.get("/weekly-report-info");return t},kn=z("https://www.duolingo.com"),Cn=z("https://yir.duolingo.com"),Rn=()=>{const e=(0,D.vl)().id;return e?Promise.resolve(e):kn.get("/2017-06-30/year-in-review-info").then((e=>{var t;return(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.report_url)?(0,D.vl)(e.data.report_url.split("?")[1]).id:""})).catch((e=>(window.location.href="https://www.duolingo.com",e)))},On=e=>Cn.get(`/2023/user_stats_${e}.json`,{forceJsonDecoding:!0}).then((e=>e.data)),Ln=(0,a(80388).J9)()?"zendesk.duolingo.cn":"duolingotest.zendesk.com",Pn=new H(`https://${Ln}/api/v2`),An=async(e,t)=>(await fetch(`https://${Ln}/api/v2/uploads?filename=${e}`,{body:t,headers:{"Content-Type":t.type},method:"POST"})).json(),Nn=async e=>{const t={request:{comment:{body:e.description,uploads:e.uploadTokens},requester:{email:e.email,name:e.email},subject:e.subject,tags:[e.tag]}};return(await Pn.post("/requests",t)).data}},50498:(e,t,a)=>{"use strict";a.d(t,{XD:()=>l,_v:()=>c,f:()=>o,p4:()=>i,yv:()=>r});var s=a(80254),n=a(59815);const r=(...e)=>{const t=new AbortController,a=()=>{t.abort();for(const t of e)t.removeEventListener("abort",a)};for(const t of e){if(t.aborted){a();break}t.addEventListener("abort",a)}return t.signal},i=async e=>{const t={};try{return await Promise.race([e,t])===t?"pending":"fulfilled"}catch(e){return"rejected"}},o=s.IH((()=>new Promise((()=>{})))),l=async(e,{backoffFn:t,retries:a,signal:s,stopAtTime:r})=>{let i,o=0;for(;o<a+1;){if(o>0){const e=t?t(o):Math.round(Math.min(1e3*o,3e4)*(Math.random()+1));console.log(`Backing off for ${e}ms before retrying`),await c(e)}if((null==s?void 0:s.aborted)||r&&Date.now()>=r)break;try{return await e(o)}catch(e){i=e}if(o++,null==s?void 0:s.aborted)break}throw null!=i?i:new n.$K},c=e=>new Promise((t=>{window.setTimeout(t,e)}))},97236:(e,t,a)=>{"use strict";a.d(t,{Tc:()=>b,cq:()=>P,IZ:()=>D,a1:()=>x,GN:()=>M,nU:()=>F,Ap:()=>U,N$:()=>L,Ms:()=>G});var s=a(91367),n=a(80254);const r=a.p+"sounds/7abe057dc8446ad325229edd6d8fd250.mp3",i=a.p+"sounds/2aae0ea735c8e9ed884107d6f0a09e35.mp3",o=a.p+"sounds/421d48c53ad6d52618dba715722278e0.mp3",l=a.p+"sounds/37d8f0b39dcfe63872192c89653a93f6.mp3",c=a.p+"sounds/0a27c1ee63dd220647e8410a0029aed2.mp3",d=a.p+"sounds/a28ff0a501ef5f33ca78c0afc45ee53e.mp3",u=a.p+"sounds/2e4669d8cf839272f0731f8afa488caf.mp3",p=a.p+"sounds/f0b6ab4396d5891241ef4ca73b4de13a.mp3";var g=a(50498),m=a(80388),h=a(71371),_=a(51158),v=a(18804),f=a(79465);const S=s.Howler._setup;s.Howler._setup=()=>{const e=null===s.Howler._navigator?null:new Proxy(s.Howler._navigator,{get:(e,t)=>"userAgent"===t?e.userAgent.replace(/OPR\/(\d{3})/,"OPR/99"):e[t]});return s.Howler._navigator=e,S()};const E={BONUS:{url:r,volume:.5},CORRECT:{url:l,volume:.35},FAILED:{url:o,volume:.5},INCORRECT:{url:p,volume:.35},PASSED:{url:i,volume:.5},TEST:{url:d,volume:.4},TIMER:{url:u,volume:.6}},y=Symbol("SOUND_OPTIONS_KEY"),b=n.Xc(E,(e=>e.url)),w=n.Ry(n.VO(E).map((({url:e,volume:t})=>[e,t]))),I=[],T={},k={};let C,R=!1;const O=({failureReason:e,source:t,timeTaken:a,url:s})=>{const n=(0,m.J9)()?.005:5e-4;if(Math.random()<n){const r=new URL(H(s));(0,f.j)("tts_play_finished",{failure_reason:e,host:r.host,path:r.pathname,sampling_rate:n,successful:void 0===e,time_taken:a,tts_source:t})}},L=({text:e,url:t})=>{const a=(0,m.J9)()?.1:.01;Math.random()<a&&(0,f.j)("tts_download_failure",{offline:!navigator.onLine,path:t?H(t):"",text:e})},P=()=>I.length>0||R,A=e=>{var t;return new s.Howl({format:["mp3"],html5:!0,onloaderror:(t,a)=>(0,_.vU)("Failed to load audio",{data:{errorCode:a,url:e},sample:1e-4}),onplayerror:(t,a)=>(0,_.vU)("Failed to play audio",{data:{errorCode:a,url:e},sample:1e-4}),preload:!0,src:[e],volume:null!==(t=w[e])&&void 0!==t?t:1})},N=e=>{switch(e){case"ended":return"end";case"error":return"loaderror";default:return e}},D=e=>{if(!e)return Promise.reject();if(e=H(e),!T[e]){const t=A(e);T[e]=new Promise(((e,a)=>{t.on("load",e),t.on("loaderror",a)})),k[e]=t}return T[e]},x=(e,{requestedAt:t},a)=>{var s;if(!e)return(0,_.Kp)("TTS URL is null"),void O({failureReason:"empty_url",source:"network",timeTaken:0,url:""});const n=T[e];let r="network";(async()=>{const e=n?await(0,g.p4)(n):"empty";r="fulfilled"===e?"cache":"pending"===e?"pending-cache":"network"})();const i=window.performance.now();return M(e,Object.assign(Object.assign({},a),{eventListeners:[...null!==(s=null==a?void 0:a.eventListeners)&&void 0!==s?s:[],["error",()=>O({failureReason:"load_error",source:r,timeTaken:window.performance.now()-i,url:e})],["play",()=>{const a=window.performance.now();h.Z.start("tts_play",{startTime:t}),h.Z.finish("tts_play"),O({failureReason:void 0,source:r,timeTaken:a-i,url:e})}],["playerror",()=>O({failureReason:"play_promise_rejected",source:r,timeTaken:window.performance.now()-i,url:e})]]}))},M=(e,t={})=>{var a,s,r,i,o,l;if(!e)return void(0,_.Kp)("TTS URL is null");const c=H(e);if(n.VO(b).includes(c)&&!(null===(a=(0,v.qg)())||void 0===a?void 0:a.user.enableSoundEffects))return;if(!t.overlay&&C&&C.howl.playing()&&C.options.forceListen&&C.url!==c&&C.url!==t.allowInterrupt)return;const d=null!==(s=k[c])&&void 0!==s?s:A(c),u=d[y];return d[y]=t,null===(r=null==u?void 0:u.eventListeners)||void 0===r||r.forEach((([e,t])=>d.off(N(e),t))),null===(i=t.eventListeners)||void 0===i||i.forEach((([e,t])=>d.on(N(e),t))),k[c]||d.on("end",(()=>j(d))),t.overlay||(U(),C={howl:d,options:t,url:c}),d.seek(null!==(o=t.currentTime)&&void 0!==o?o:0),d.rate(null!==(l=t.playbackRate)&&void 0!==l?l:1),d.play(),{get currentTime(){return"unloaded"===d.state()?0:d.seek()},get duration(){return d.duration()},get paused(){return!d.playing()},get src(){return c}}},F=n.IH((()=>{try{const e=new s.Howl({src:[c]});e.on("unlock",(()=>{e.unload(),R=!0}))}catch(e){(0,_.vU)("Howler failed to unlock audio",{ex:e})}})),U=()=>null==C?void 0:C.howl.stop(),H=e=>e.replace("http://static.duolingo.com","https://d7mj4aqfscim2.cloudfront.net"),j=e=>{var t;const a=e[y];null===(t=null==a?void 0:a.eventListeners)||void 0===t||t.forEach((([t,a])=>e.off(N(t),a))),e[y]=void 0,e.unload()},G=e=>{e&&(e=H(e),T[e]&&(delete T[e],j(k[e]),delete k[e]))}},70326:(e,t,a)=>{"use strict";a.d(t,{$C:()=>y,IS:()=>w,Wj:()=>f,lV:()=>k,pK:()=>E,rV:()=>T,x4:()=>b});var s=a(80254),n=a(77167),r=a(54412),i=a(17135),o=a(59815),l=a(81149),c=a(41679),d=a(15670),u=a(8654),p=a(93746),g=a(51158),m=a(11908),h=a(18804),_=a(79465),v=a(16086);class f extends o.pY{constructor(e,t){super(),this.useImprovedErrorMessages=e,this.errorFields=t}}const S=async e=>{var t;const a={timezone:(0,i.NP)()};try{const a=c.E6()&&(null===(t=await c.Jb())||void 0===t?void 0:t.accessToken);a&&(e.facebookToken=a)}catch(e){}const s=(0,m.rV)(m.Qt.InviteCode);s&&(e.inviteCode=s,(0,m.cl)(m.Qt.InviteCode));const o=(0,r.ej)(r.Vj.LandingURL);o!==r.m_&&(e.landingUrl=o);const l=(0,r.ej)(r.Vj.InitialReferrer);l!==r.m_&&(e.initialReferrer=l),e.lastReferrer=(0,r.ej)(r.Vj.LastReferrer),(0,r.d8)(r.Vj.LastReferrer,"");const u=await d.e("SIGNUP"),p=await n.Vi.userCreate(Object.assign(Object.assign({},a),e),u),g=p.id;return await(0,_.bm)(g),(0,_.XZ)(g),p},E=async(e,t=p.h9)=>{if(e===t)throw(0,g.vU)("Tried to create trial user with same from and learning languages",{data:{fromLanguage:t,learningLanguage:e}}),Error("learningLanguage and fromLanguage cannot be the same");return await S({fromLanguage:t,learningLanguage:e})},y=async(e={},t=p.h9)=>{await S(Object.assign({fromLanguage:t},e))},b=async(e,t=!0)=>{var a;const s=(0,r.ej)(r.Vj.LandingURL);s!==r.m_&&(e.landingUrl=s),e.lastReferrer=(0,r.ej)(r.Vj.LastReferrer),(0,r.d8)(r.Vj.LastReferrer,"");const i=await d.e("LOGIN"),o=null===(a=(0,h.qg)())||void 0===a?void 0:a.config.clientExperiments,c=void 0!==o&&"experiment"===(0,l.cu)("web_login_migration_v2",null,o);await n.Vi.login(e,t,i,c);const u=(0,v.Jb)();(0,_.XZ)(u)},w=async(e,t=!0)=>{const a={},n={identifier:e.identifier.trim(),password:e.password};if(n.identifier||(a.identifier=(0,u.H8)(11696)),n.password.trim()||(a.password=(0,u.H8)(5030)),!s.xb(a))throw new f(!1,a);try{await b(s.ei(n,"identifier","password"),!1)}catch(e){if(t){const e=await I(n.identifier);a.password=e?(0,u.H8)(6852):void 0,a.identifier=e?void 0:(0,u.H8)(17234,{email_or_username:n.identifier})}else a.connectivity=(0,u.H8)(19737);throw new f(!0,a)}},I=async e=>{const[t,a]=await Promise.all([n.Vi.userSearchByEmail(e),n.Vi.userSearch(e)]);return t.length>0||a.length>0},T=async e=>{const t=await n.Vi.usernameValidate(e),a={};if(t.suggestedUsernames&&t.suggestedUsernames.length>0)throw a.suggestedUsernames=t.suggestedUsernames,a.username=t.isUsernameTaken?(0,u.H8)(6284):(0,u.H8)(14591),new f(!0,a)},k=e=>new f(!1,Object.assign({},...e.map((e=>{switch(e){case"AGE_INVALID":return{age:(0,u._i)(15012)};case"EMAIL_INVALID":return{email:(0,u._i)(11696)};case"EMAIL_TAKEN":return{email:(0,u._i)(1760)};case"NAME_INVALID":return{name:(0,u._i)(24091)};case"PASSWORD_INCORRECT":return{currentPassword:(0,u._i)(8182)};case"PASSWORD_INVALID":return{password:(0,u._i)(5030)};case"USERNAME_INVALID":return{username:(0,u._i)(14591)};case"USERNAME_TAKEN":return{username:(0,u._i)(6284)};default:return}}))))},30033:(e,t,a)=>{"use strict";a.d(t,{Aq:()=>i,_q:()=>o,m5:()=>r});var s=a(80254),n=a(39852);const r="data-test",i=(e,t)=>{console.log(`${e}${JSON.stringify(t)}`,n.$U)},o=(...e)=>{const t=s.jj(s.oA(e).map((e=>e.split(" "))).flat()).sort();return t.length?{[r]:t.join(" ")}:{}}},83719:(e,t,a)=>{"use strict";a.d(t,{Oj:()=>s,ub:()=>l,ul:()=>c,zD:()=>o});var s,n=a(80254);!function(e){e.Accent="accent",e.ExtraSpace="extra_space",e.MissingSpace="missing_space",e.MissingWord="missing_word",e.Typo="typo",e.WrongWord="wrong_word"}(s||(s={}));const r=[12244,9366,748,6198,12541,9987,1358,11280,22136,11684],i=[1547,8153,10795,15212,8539],o="Nice! You’re building your writing skills!",l=()=>n.UP(r),c=e=>e?n.UP(i):15039},80388:(e,t,a)=>{"use strict";a.d(t,{J9:()=>n,lS:()=>r,nC:()=>l,vQ:()=>i});var s=a(17135);const n=()=>window.location.host.endsWith(".cn"),r=()=>"zh-CN"===navigator.language,i=async e=>{navigator.clipboard?await navigator.clipboard.writeText(e):o(e)},o=e=>{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select();try{if(!document.execCommand("copy"))throw Error('Cannot execute "copy" command')}finally{document.body.removeChild(t)}},l=(e,t)=>{const a=t/1e3;let n=(0,s.Zo)();return window.setInterval((()=>{const t=(0,s.Zo)();t-n<a||(n=t,e())}),1e4)}},16324:(e,t,a)=>{"use strict";a.d(t,{EV:()=>i,Ed:()=>o,TD:()=>s});const s=e=>e.toLowerCase().split("_").reduce(((e,t,a)=>e+(a?(e=>e[0].toUpperCase()+e.slice(1))(t):t))),n=e=>e.split(/(?=[A-Z])/).join("_").toLowerCase(),r=(e,t)=>((e,t)=>Object.fromEntries(Object.entries(e).map((e=>t(e)))))(e,(([e,a])=>[t(e),null===a||"object"!=typeof a||a instanceof Function?a:Array.isArray(a)?a.slice():r(a,t)])),i=e=>r(e,s),o=e=>r(e,n)},95332:(e,t,a)=>{"use strict";a.d(t,{Dw:()=>T,F:()=>h,SJ:()=>m,Tu:()=>p,cf:()=>b,eK:()=>E,j$:()=>_,j6:()=>w,jc:()=>y,nT:()=>f,qD:()=>k,r1:()=>S,rF:()=>v,vv:()=>I,yH:()=>g});var s=a(80254),n=a(40472),r=a(37590),i=a(68903),o=a(8654),l=a(93746),c=a(51158),d=a(43006),u=a(11811);const p=3,g=[u.Sm.Assist,u.Sm.CompleteReverseTranslation,u.Sm.Dialogue,u.Sm.Form,u.Sm.GapFill,u.Sm.Judge,u.Sm.Listen,u.Sm.ListenComplete,u.Sm.ListenIsolation,u.Sm.ListenSpeak,u.Sm.ListenTap,u.Sm.PartialListen,u.Sm.PartialReverseTranslate,u.Sm.SelectPronunciation,u.Sm.SelectTranscription,u.Sm.Speak,u.Sm.SyllableTap,u.Sm.Translate],m={[u.Sm.Assist]:"assist",[u.Sm.CharacterIntro]:"character_intro",[u.Sm.CharacterMatch]:"character_match",[u.Sm.CharacterPuzzle]:"character_puzzle",[u.Sm.CharacterSelect]:"character_select",[u.Sm.CharacterTrace]:"character_trace",[u.Sm.CompleteReverseTranslation]:"complete_reverse_translation",[u.Sm.Definition]:"definition",[u.Sm.Dialogue]:"dialogue",[u.Sm.Form]:"form",[u.Sm.FreeResponse]:"free_response",[u.Sm.GapFill]:"gap_fill",[u.Sm.Judge]:"judge",[u.Sm.Listen]:"listen",[u.Sm.ListenComplete]:"listen_complete",[u.Sm.ListenComprehension]:"listen_comprehension",[u.Sm.ListenIsolation]:"listen_isolation",[u.Sm.ListenMatch]:"listen_match",[u.Sm.ListenSpeak]:"listen_speak",[u.Sm.ListenTap]:"listen_tap",[u.Sm.Match]:"match",[u.Sm.Name]:"name",[u.Sm.PartialListen]:"partial_listen",[u.Sm.PartialReverseTranslate]:"partial_reverse_translate",[u.Sm.PatternTapComplete]:"pattern_tap_complete",[u.Sm.ReadComprehension]:"read_comprehension",[u.Sm.Select]:"select",[u.Sm.SelectPronunciation]:"select_pronunciation",[u.Sm.SelectTranscription]:"select_transcription",[u.Sm.SyllableListenTap]:"syllable_listen_tap",[u.Sm.SyllableTap]:"syllable_tap",[u.Sm.Speak]:"speak",[u.Sm.TapCloze]:"tap_cloze",[u.Sm.TapClozeTable]:"tap_cloze_table",[u.Sm.TapComplete]:"tap_complete",[u.Sm.TapCompleteTable]:"tap_complete_table",[u.Sm.TapDescribe]:"tap_describe",[u.Sm.Translate]:"translate",[u.Sm.Transliterate]:"transliterate",[u.Sm.TypeCloze]:"type_cloze",[u.Sm.TypeClozeTable]:"type_cloze_table",[u.Sm.TypeCompleteTable]:"type_complete_table",[u.Sm.WriteComprehension]:"write_comprehension"},h={Bea:"bea",Duo:"duo",Eddy:"eddy",Falstaff:"falstaff",Junior:"junior",Lily:"lily",Lin:"lin",Lucy:"lucy",Oscar:"oscar",Vikram:"vikram",Zari:"zari"},_=e=>{const t=[];return e.forEach(((e,a,s)=>{e.isBlank&&a>0&&s[a-1].isBlank?t[t.length-1].text+=e.text:t.push(Object.assign({},e))})),t},v=e=>[!0,void 0].includes(e.grader.whitespaceDelimited)?" ":"",f=(e,t)=>{e.length!==t.length&&(0,c.Kp)("Mismatch between text sequence lengths",{data:{differentTexts:t,originalTexts:e}});let a=0;const s=[];for(let n=0;n<Math.min(e.length,t.length);n++){const r=e[n];r!==t[n]&&s.push([a,a+r.length]),a+=r.length}return s},S=e=>{var t,a;switch(e.type){case u.Sm.Assist:case u.Sm.CharacterIntro:case u.Sm.CharacterPuzzle:case u.Sm.CharacterSelect:case u.Sm.CharacterTrace:case u.Sm.CompleteReverseTranslation:case u.Sm.Judge:case u.Sm.Listen:case u.Sm.ListenSpeak:case u.Sm.ListenComplete:case u.Sm.ListenTap:case u.Sm.Name:case u.Sm.PartialListen:case u.Sm.PatternTapComplete:case u.Sm.Select:case u.Sm.SyllableListenTap:case u.Sm.SyllableTap:case u.Sm.Speak:case u.Sm.Translate:case u.Sm.Transliterate:return[e.prompt];case u.Sm.CharacterMatch:return[e.pairs.map((e=>e.character)).join(", ")];case u.Sm.Definition:return[e.displayTokens.map((e=>e.text)).join(""),(0,o.H8)(1831,{string_1:e.phraseToDefine})];case u.Sm.Dialogue:{const t=e.dialogue.map((e=>{const t=_(e.displayTokens).map((e=>e.isBlank?d.qv:e.text)).join("");return(0,o.H8)(20248,{message:t,speaker:e.speaker})}));return e.promptTokens&&t.push(e.promptTokens.map((e=>e.value)).join("")),t}case u.Sm.Form:return[`${e.promptPieces[0]} ${d.qv} ${e.promptPieces[1]}`];case u.Sm.FreeResponse:return[null!==(t=e.prompt)&&void 0!==t?t:""];case u.Sm.GapFill:return[_(e.displayTokens).map((e=>e.isBlank?d.qv:e.text)).join("")];case u.Sm.ListenComprehension:return[e.prompt,e.question?e.question:(0,o.H8)(2005)];case u.Sm.ListenMatch:return[e.pairs.map((e=>e.translation)).join(", ")];case u.Sm.Match:return[e.pairs.map((e=>e.learningToken)).join(", ")];case u.Sm.PartialReverseTranslate:return[e.prompt];case u.Sm.ReadComprehension:return[e.passage,null!==(a=e.question)&&void 0!==a?a:(0,o.H8)(2005)];case u.Sm.SelectPronunciation:case u.Sm.SelectTranscription:return[e.choices[e.correctIndex].text];case u.Sm.TapCloze:case u.Sm.TapClozeTable:case u.Sm.TapCompleteTable:case u.Sm.TypeCloze:case u.Sm.TypeClozeTable:case u.Sm.TypeCompleteTable:return[(0,r.JH)(e)];case u.Sm.TapComplete:return[e.displayTokens.map((e=>e.isBlank?d.qv:e.text)).join("")];case u.Sm.TapDescribe:return[e.correctSolutions[0]];case u.Sm.ListenIsolation:return[e.solutionTranslation];case u.Sm.WriteComprehension:return[e.passage,e.question?e.question:(0,o.H8)(2005)];default:throw(0,i.RJ)(e),Error(`Cannot get prompt for ${e.type} challenge`)}},E=({browserSettings:e,challenge:t,isDesktop:a,isGrammar:s,learningLanguage:n,session:r})=>{if(r.type===u.FF.PlacementTest)return t.type===u.Sm.Translate?{canToggleTyping:!1,isToggledToTyping:!I(t)}:{canToggleTyping:!1,isToggledToTyping:!1};if(r.type===u.FF.AlphabetLesson)return{canToggleTyping:!1,isToggledToTyping:!1};switch(t.type){case u.Sm.CompleteReverseTranslation:return{canToggleTyping:!0,isToggledToTyping:e.completeReverseTranslationTypingEnabled&&!s};case u.Sm.ListenTap:return a?{canToggleTyping:!0,isToggledToTyping:e.typingEnabled}:{canToggleTyping:!1,isToggledToTyping:!1};case u.Sm.Translate:return I(t)?k(t,n)?{canToggleTyping:!1,isToggledToTyping:!1}:{canToggleTyping:!0,isToggledToTyping:e.typingEnabled}:{canToggleTyping:!1,isToggledToTyping:!0};default:return{canToggleTyping:!1,isToggledToTyping:!0}}},y=e=>(0,n.y)(e),b=(e,t,a)=>{const s=2*a,n=e*a+t;return s<10?n+1:(n+1)%s},w=(e,t,a=[])=>{if((0,l.k4)(e))return t.map(((e,t)=>a.includes(e.value)?t:void 0)).filter((e=>void 0!==e));const n=t.map((({value:e})=>e)).join("");return a.reduce(((e,t)=>{const a=n.indexOf(t);return e.concat(s.DZ(t.length,(e=>e+a)))}),[])},I=e=>void 0!==e.choices&&void 0!==e.correctIndices&&e.choices.length>0&&e.correctIndices.length>0,T=(e,t)=>!k(e,t),k=(e,t)=>e.sourceLanguage===t},94778:(e,t,a)=>{"use strict";a.d(t,{KT:()=>q,uu:()=>K,uZ:()=>Q,w6:()=>Y,sS:()=>se,Q5:()=>J,j4:()=>X,Gs:()=>ee,BY:()=>te,w4:()=>ae});var s=a(80254),n=a(76986),r=a(93540),i=a(77167),o=a(83719),l=a(95332),c=a(18675),d=a(78939),u=a(33037),p=a(37590),g=a(8654),m=a(23275);const h=a.p+"rive/22b0f8df605624bae776f4b6b6372904.riv",_=a.p+"rive/316f1939c9601ad9a07aeffc401bd86d.riv",v=a.p+"rive/26757eeb54483468f7d24d3247c921e4.riv",f=a.p+"rive/16d5291f7f7c6ef8a05a83d187c3417a.riv",S=a.p+"rive/48a518bc044faae47a88d413ddeb2113.riv",E=a.p+"rive/c6ff57285bb71c61fe1bc00ad042695a.riv",y=a.p+"rive/49d354d11868306b4c7c1c0c9a92651e.riv",b=a.p+"rive/d73e180ee82ba9d2f9bfafb42738d324.riv",w=a.p+"rive/5e6bde7d1737406b10c7c405d1e2e94e.riv",I=a.p+"rive/d6ea005cd489006994de7ca326900eec.riv",T=(e,t)=>({artBoardName:"Character",correctStateName:"Correct",incorrectStateName:"Incorrect",notSetStateName:"Reset",outfit:t,outfitInputName:"Outfit",stateMachineName:"InLesson",url:e}),k=T(h),C=T(_),R=T(v),O=T(f),L=T(S),P=T(E),A=T(y),N=T(b),D=T(w),x=T(I);var M=a(51158),F=a(89260),U=a(59096),H=a(18804),j=a(43006),G=a(11811);const B=n,V=({challenge:e,challengeState:t})=>{var a,s;const n=(0,j.Dg)(null!==(s=null===(a=t.guess)||void 0===a?void 0:a.map((t=>e.choices[t].text)).join(""))&&void 0!==s?s:"",""),r=e.type===G.Sm.SyllableTap?e.correctSolutions.map((e=>(0,j.Dg)(e,""))):[(0,j.Dg)(e.correctIndices.map((t=>e.choices[t].text)).join(""))];return Promise.resolve({correct:r.includes(n),guess:n})},z=({challenge:e,challengeState:t})=>{var a,s,n;const r=null!==(a=t.guess)&&void 0!==a?a:[],i={BOTH:["left","right"],LEFT:["left"],NEITHER:[],RIGHT:["right"]};for(let t=0;t<r.length;t++){const a=e.choices[r[t]],o=t>0?e.choices[r[t-1]]:void 0,l=t+1<r.length?e.choices[r[t+1]]:void 0,c=i[null!==(s=null==l?void 0:l.damagePosition)&&void 0!==s?s:"NEITHER"],d=i[null!==(n=null==o?void 0:o.damagePosition)&&void 0!==n?n:"NEITHER"];if("NEITHER"!==a.damagePosition)if("LEFT"===a.damagePosition){if(!d.includes("right"))return!1}else if("RIGHT"===a.damagePosition){if(!c.includes("left"))return!1}else if(!("BOTH"!==a.damagePosition||d.includes("right")&&c.includes("left")))return!1}return!0};class Z{continueChallenge({challengeState:e}){return Object.assign({},e)}prepareChallenge({challenge:e}){const t=Object.assign({},e);return t.character&&!t.character.image&&delete t.character,t.character&&(t.character=Object.assign(Object.assign({},t.character),{riveAnimation:"BEA"===t.character.name?k:"EDDY"===t.character.name?C:"FALSTAFF"===t.character.name?R:"JUNIOR"===t.character.name?O:"LILY"===t.character.name?L:"LIN"===t.character.name?P:"LUCY"===t.character.name?A:"OSCAR"===t.character.name?N:"VIKRAM"===t.character.name?D:"ZARI"===t.character.name?x:void 0})),t}}const $={[G.Sm.Assist]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.NOT_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.options.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.text,url:e.tts}))),this.grade=({challenge:e,challengeState:t})=>Promise.resolve({correct:t.guess===e.correctIndex,guess:t.guess}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[G.Sm.CharacterIntro]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.CHARACTER_DISPLAY,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>[{autoplay:!0,required:!1,text:e.prompt,url:e.tts}],this.grade=({challenge:e,challengeState:t})=>Promise.resolve({correct:t.guess===e.correctIndex,guess:`${t.guess}`}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[G.Sm.CharacterMatch]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.CHARACTER_DISPLAY,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.pairs.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.character,url:e.tts}))),this.grade=({challengeState:e})=>Promise.resolve({correct:void 0!==e.guess,guess:e.guess}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[G.Sm.CharacterPuzzle]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.BAD_OPTION,i.Vi.ChallengeReports.CHARACTER_DISPLAY,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA([...e.choices.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.text,url:e.tts})),{autoplay:!0,required:!1,text:e.correctSolutions[0],url:e.tts}]),this.grade=({challenge:e,challengeState:t})=>{var a;const s=null===(a=t.guess)||void 0===a?void 0:a.choices.map((t=>t>=0?e.choices[t].text:"")).join(""),n=e.correctIndices.map((t=>e.choices[t].text)).join("");return Promise.resolve({correct:s===n,guess:s})},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challenge:e,challengeState:t})=>{var a,s;return(null===(s=null===(a=t.guess)||void 0===a?void 0:a.choices)||void 0===s?void 0:s.filter((e=>e>=0)).length)===e.correctIndices.length}}},[G.Sm.CharacterSelect]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.BAD_OPTION,i.Vi.ChallengeReports.CHARACTER_DISPLAY,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.choices.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.character,url:e.tts}))),this.grade=({challenge:e,challengeState:t})=>Promise.resolve({correct:t.guess===e.correctIndex,guess:`${t.guess}`}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[G.Sm.CharacterTrace]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.MISSING_AUDIO],this.getTts=({challenge:e})=>e.tts?[{autoplay:!0,required:!1,text:e.prompt,url:e.tts}]:[],this.grade=({challenge:e,challengeState:t})=>{var a;return Promise.resolve({correct:(null!==(a=t.guess)&&void 0!==a?a:0)>=e.strokes.length,guess:t.guess})},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challenge:e,challengeState:t})=>{var a;return(null!==(a=t.guess)&&void 0!==a?a:0)>=e.strokes.length}}},[G.Sm.CompleteReverseTranslation]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_PROMPT,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_HINTS,i.Vi.ChallengeReports.MISSING_HINTS,i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.tokens.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))),this.grade=async({challenge:e,challengeState:t,challengeToggleState:a})=>{if(a.isToggledToTyping){const s=this.getTypedSentence(t);return(0,u.wM)({allowTypoBlame:!0,challenge:e,guess:s,isTypingInLearningLanguage:a.isToggledToTyping})}const n=this.getTypedWords(e,t),r=this.getAllWords(e,t).join(""),i=e.displayTokens.filter((e=>e.isBlank)).map((e=>e.text));if(s.Xy(n,i))return Promise.resolve({correct:!0,guess:r});const o=await(0,u.wM)({allowTypoBlame:!0,challenge:e,guess:r,isTypingInLearningLanguage:a.isToggledToTyping});return o.correct||delete o.blameMessage,o},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({guess:{translatedWords:e.displayTokens.map((()=>""))},type:e.type}),this.validate=({challenge:e,challengeState:t,challengeToggleState:a})=>a.isToggledToTyping?this.getTypedSentence(t).length>0:this.getTypedWords(e,t).every((e=>e)),this.getTypedWords=(e,t)=>{var a,s;const n=null!==(s=null===(a=t.guess)||void 0===a?void 0:a.translatedWords)&&void 0!==s?s:[];return e.displayTokens.flatMap(((e,t)=>e.isBlank?n[t]:[]))},this.getAllWords=(e,t)=>{const{displayTokens:a}=e;let s=0;const n=this.getTypedWords(e,t);return a.map((e=>e.isBlank?n[s++]:e.text))},this.getTypedSentence=e=>{var t,a;return(null!==(a=null===(t=e.guess)||void 0===t?void 0:t.translatedSentence)&&void 0!==a?a:"").trim()}}},[G.Sm.Definition]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_PROMPT,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.BAD_HINTS,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.MISSING_HINTS,i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA([...e.displayTokens.map((e=>e.hintToken.tts&&{autoplay:!1,required:!1,text:e.text,url:e.hintToken.tts})),e.tts&&{autoplay:!0,required:!1,text:e.displayTokens.map((e=>e.text)).join(""),url:e.tts}]),this.grade=({challenge:e,challengeState:t})=>Promise.resolve({correct:t.guess===e.correctIndex,guess:t.guess}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[G.Sm.Dialogue]:new class extends Z{constructor(){super(...arguments),this.continueChallenge=({challengeState:e})=>Object.assign(Object.assign({},e),{currentDialogueIndex:e.currentDialogueIndex+1}),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_PROMPT,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_HINTS,i.Vi.ChallengeReports.MISSING_HINTS,i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>{var t;return s.oA([...e.dialogue.map((e=>e.hintTokens)).flat(),...null!==(t=e.promptTokens)&&void 0!==t?t:[]].map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts})))},this.grade=({challenge:e,challengeState:t})=>Promise.resolve({correct:t.guess===e.correctIndex,guess:`${t.guess}`}),this.isReadyForGuessing=({challenge:e,challengeState:t})=>{const{dialogue:a}=e,{currentDialogueIndex:s}=t;return s>=a.length},this.prepareChallengeState=({challenge:e})=>({currentDialogueIndex:0,type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[G.Sm.Form]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_PROMPT,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=()=>[],this.grade=({challenge:e,challengeState:t})=>Promise.resolve({correct:t.guess===e.correctIndex,gradingMetadata:(0,U.u5)(e,t.guess),guess:`${t.guess}`}),this.isReadyForGuessing=()=>!0,this.prepareChallenge=e=>{const t=super.prepareChallenge(e);return t.options||(t.options=t.choices.map((e=>({text:e})))),t},this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[G.Sm.FreeResponse]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_PROMPT,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[],this.getTts=()=>[],this.grade=({challengeState:e})=>Promise.resolve({correct:""!==this.getResponse(e),guess:this.getResponse(e)}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challenge:e,challengeState:t})=>{const{maxGuessLength:a}=e,s=this.getResponse(t);return s.length>0&&s.length<=a},this.getResponse=e=>{var t;return(null!==(t=e.guess)&&void 0!==t?t:"").trim()}}},[G.Sm.GapFill]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_PROMPT,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_HINTS,i.Vi.ChallengeReports.MISSING_HINTS,i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.tokens.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))),this.grade=({challenge:e,challengeState:t})=>Promise.resolve({closestSolution:e.displayTokens.map((e=>e.text)).join(""),correct:t.guess===e.correctIndex,guess:void 0===t.guess?void 0:e.choices[t.guess]}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[G.Sm.Judge]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_PROMPT,i.Vi.ChallengeReports.BAD_OPTION,i.Vi.ChallengeReports.OFFENSIVE_OPTION,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=()=>[],this.grade=({challenge:e,challengeState:t})=>(e.correctIndices.length>1&&(0,M.vU)(`Judge has more than one right answer: ${e.prompt}`),Promise.resolve({correct:void 0!==t.guess&&e.correctIndices.includes(t.guess),guess:t.guess})),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[G.Sm.Listen]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA([e.slowTts&&{autoplay:!1,required:!1,text:e.prompt,url:e.slowTts},{autoplay:!0,required:!0,text:e.prompt,url:e.tts}]),this.grade=({challenge:e,challengeState:t,learningLanguage:a})=>(0,u.wM)({allowTypoBlame:!0,challenge:e,guess:this.getGuess(t),isTypingInLearningLanguage:e.grader.language===a}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>!!this.getGuess(e),this.getGuess=e=>{var t;return(null!==(t=e.guess)&&void 0!==t?t:"").trim()}}},[G.Sm.ListenComplete]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA([e.slowTts&&{autoplay:!1,required:!1,text:e.prompt,url:e.slowTts},{autoplay:!0,required:!0,text:e.prompt,url:e.tts}]),this.grade=({challenge:e,challengeState:t,learningLanguage:a})=>(0,u.wM)({allowTypoBlame:!0,challenge:e,guess:this.getUserInput(e,t,!0).join(""),isTypingInLearningLanguage:e.grader.language===a}),this.isReadyForGuessing=()=>!0,this.prepareChallenge=e=>{const t=super.prepareChallenge(e);return t.prompt=t.displayTokens.map((e=>e.text)).join(""),t},this.prepareChallengeState=({challenge:e})=>({guess:e.displayTokens.map((()=>"")),type:e.type}),this.validate=({challenge:e,challengeState:t})=>this.getUserInput(e,t,!1).every((e=>e)),this.getUserInput=(e,t,a)=>{var s;const n=null!==(s=t.guess)&&void 0!==s?s:[];return e.displayTokens.flatMap(((e,t)=>{const s=a?e.text:[];return e.isBlank?n[t]:s}))}}},[G.Sm.ListenMatch]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.CHARACTER_DISPLAY,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.pairs.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.translation,url:e.tts}))),this.grade=({challengeState:e})=>Promise.resolve({correct:void 0!==e.guess,guess:e.guess}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[G.Sm.Match]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.pairs.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.learningToken,url:e.tts}))),this.grade=({challengeState:e})=>Promise.resolve({correct:void 0!==e.guess,guess:e.guess}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[G.Sm.Name]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_IMAGE,i.Vi.ChallengeReports.MISSING_IMAGE,i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=()=>[],this.grade=({challenge:e,challengeState:t,session:a})=>{var s;const n=[this.getTranslation(t)],i=this.getArticle(e,t);if(i&&n.unshift(i),e.grader){const t=null!==(s=(0,c.K)(n))&&void 0!==s?s:"",a=Object.assign(Object.assign({},e),{grader:e.grader});return(0,u.wM)({allowTypoBlame:!0,challenge:a,guess:t,isTypingInLearningLanguage:!0})}const o=(e.correctSolutions||[]).map((e=>(0,d.lG)(B,e)));if(o.includes((0,d.lG)(B,n.join(" ")))||o.includes((0,d.lG)(B,n.join(""))))return Promise.resolve({correct:!0,guess:n});const l=(0,H.qg)();let p=!1;if(l){const e=(0,r.HF)(l),t=a.skillId;t&&e&&(p=void 0!==(0,m.m8)(e,(e=>"skill"===e.type&&e.pathLevelClientData.skillId===t&&"custom_intro"===e.subtype)))}return p?Promise.resolve({correct:!1,guess:n}):(0,u.EZ)(Object.assign(Object.assign({},e),{guess:n}))},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challenge:e,challengeState:t})=>(!e.articles||this.getArticle(e,t).length>0)&&this.getTranslation(t).length>0,this.getArticle=(e,t)=>{var a,s,n,r;return null!==(r=(null!==(a=e.articles)&&void 0!==a?a:[])[null!==(n=null===(s=t.guess)||void 0===s?void 0:s.article)&&void 0!==n?n:-1])&&void 0!==r?r:""},this.getTranslation=e=>{var t,a;return(null!==(a=null===(t=e.guess)||void 0===t?void 0:t.translation)&&void 0!==a?a:"").trim()}}},[G.Sm.ListenComprehension]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.BAD_PROMPT,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>{var t;return s.oA([e.slowTts&&{autoplay:!1,required:!1,text:e.prompt,url:e.slowTts},{autoplay:!0,required:!0,text:e.prompt,url:e.tts},...(null!==(t=e.questionTokens)&&void 0!==t?t:[]).map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))])},this.grade=({challenge:e,challengeState:t})=>Promise.resolve({correct:t.guess===e.correctIndex,guess:`${t.guess}`}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[G.Sm.ListenIsolation]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.BAD_PROMPT,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>{var t,a;return s.oA([{autoplay:!0,required:!0,text:e.tokens.map((e=>e.value)).join(""),url:e.tts},...(null!==(t=e.options)&&void 0!==t?t:[]).map((e=>e.tts&&{autoplay:!1,required:!0,text:e.text,url:e.tts})),...(null!==(a=e.tokens)&&void 0!==a?a:[]).map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))])},this.grade=({challenge:e,challengeState:t})=>Promise.resolve({correct:t.guess===e.correctIndex,guess:`${t.guess}`}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[G.Sm.ListenSpeak]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.BAD_PROMPT,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>[{autoplay:!0,required:!1,text:e.prompt,url:e.tts}],this.grade=({challenge:e,challengeState:t})=>{var a,s,n,r;const i=(null!==(s=null===(a=t.guess)||void 0===a?void 0:a.score)&&void 0!==s?s:0)>=e.threshold;return Promise.resolve({correct:i,guess:t.guess,numRetriesLeft:i||void 0===(null===(n=t.guess)||void 0===n?void 0:n.usedGuesses)?0:l.Tu-(null===(r=t.guess)||void 0===r?void 0:r.usedGuesses)})},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=()=>!1}},[G.Sm.ListenTap]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.BAD_PROMPT,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA([e.slowTts&&{autoplay:!1,required:!1,text:e.prompt,url:e.slowTts},{autoplay:!0,required:!0,text:e.prompt,url:e.tts},...e.choices.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.text,url:e.tts}))]),this.grade=async({challenge:e,challengeState:t,challengeToggleState:a})=>{if(a.isToggledToTyping)return(0,u.wM)({allowTypoBlame:!0,challenge:e,guess:this.getTranscription(t),isTypingInLearningLanguage:a.isToggledToTyping});const n=(0,l.rF)(e),r=this.getTapTranscriptions(e,t),i=r.join(n),o=e.correctIndices.map((t=>e.choices[t].text));if(s.Xy(o,r))return Promise.resolve({correct:!0,guess:i});const c=await(0,u.wM)({allowTypoBlame:!1,challenge:e,guess:i,isTypingInLearningLanguage:a.isToggledToTyping});return c.correct?c:Promise.resolve({correct:c.correct,guess:i})},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challenge:e,challengeState:t,challengeToggleState:a})=>a.isToggledToTyping?this.getTranscription(t).length>0:this.getTapTranscriptions(e,t).length>0,this.getTapTranscriptions=(e,t)=>{var a,s,n;return null!==(n=null===(s=null===(a=t.guess)||void 0===a?void 0:a.tapTranscriptions)||void 0===s?void 0:s.map((t=>e.choices[t].text)))&&void 0!==n?n:[]},this.getTranscription=e=>{var t,a;return(null!==(a=null===(t=e.guess)||void 0===t?void 0:t.transcription)&&void 0!==a?a:"").trim()}}},[G.Sm.PartialListen]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.BAD_PROMPT,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=()=>[],this.grade=async({challenge:e,challengeState:t,challengeToggleState:a})=>{var n;const r=e.displayTokens,i=r.findIndex((e=>e.isBlank)),o=e.displayTokens.map((e=>e.text)).join(""),l=null!==(n=t.guess)&&void 0!==n?n:"",c=r.map(((e,t)=>e.isBlank?t===i?l:"":e.text)).join("");if(s.Xy(c,o))return Promise.resolve({correct:!0,guess:l});const d=await(0,u.wM)({allowTypoBlame:!0,challenge:e,guess:c,isTypingInLearningLanguage:a.isToggledToTyping});return d.guess=l,d.correct||delete d.blameMessage,d},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>!!e.guess}},[G.Sm.PartialReverseTranslate]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_PROMPT,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA([...e.tokens.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))]),this.grade=async({challenge:e,challengeState:t,challengeToggleState:a})=>{var n;const r=e.displayTokens,i=r.findIndex((e=>e.isBlank)),o=e.displayTokens.map((e=>e.text)).join(""),l=null!==(n=t.guess)&&void 0!==n?n:"",c=r.map(((e,t)=>e.isBlank?t===i?l:"":e.text)).join("");if(s.Xy(c,o))return Promise.resolve({correct:!0,guess:l});const d=await(0,u.wM)({allowTypoBlame:!0,challenge:e,guess:c,isTypingInLearningLanguage:a.isToggledToTyping});return d.guess=l,d.correct||delete d.blameMessage,d},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>!!e.guess}},[G.Sm.PatternTapComplete]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.BAD_PROMPT,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=()=>[],this.grade=async({challenge:e,challengeState:t})=>Promise.resolve({correct:e.correctIndex===t.guess,guess:void 0===t.guess?"":e.choices[t.guess]}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[G.Sm.ReadComprehension]:new class extends Z{constructor(){super(...arguments),this.continueChallenge=({challengeState:e})=>Object.assign(Object.assign({},e),{finishedPassage:!0}),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_PROMPT,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>{var t,a;return s.oA([...null!==(t=e.passageTokens)&&void 0!==t?t:[],...null!==(a=e.questionTokens)&&void 0!==a?a:[]].map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts})))},this.grade=({challenge:e,challengeState:t})=>Promise.resolve({correct:t.guess===e.correctIndex,guess:`${t.guess}`}),this.isReadyForGuessing=({challengeState:e})=>e.finishedPassage,this.prepareChallengeState=({challenge:e})=>({finishedPassage:!1,type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[G.Sm.Select]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_IMAGE,i.Vi.ChallengeReports.BAD_OPTION,i.Vi.ChallengeReports.BAD_PROMPT,i.Vi.ChallengeReports.MISSING_IMAGE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.choices.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.phrase,url:e.tts}))),this.grade=({challenge:e,challengeState:t})=>Promise.resolve({correct:t.guess===e.correctIndex,guess:`${t.guess}`}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[G.Sm.SelectPronunciation]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>e.choices.map(((t,a)=>({autoplay:a===e.correctIndex,required:!0,text:t.text,url:t.tts}))),this.grade=({challenge:e,challengeState:t})=>Promise.resolve({correct:t.guess===e.correctIndex,guess:`${t.guess}`}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[G.Sm.SelectTranscription]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA([{autoplay:!0,required:!0,text:e.choices[e.correctIndex].text,url:e.tts},...e.choices.map((e=>e.tts&&{autoplay:!1,required:!0,text:e.text,url:e.tts}))]),this.grade=({challenge:e,challengeState:t})=>Promise.resolve({correct:t.guess===e.correctIndex,guess:`${t.guess}`}),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}},[G.Sm.SyllableTap]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.BAD_PROMPT,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA([{autoplay:!1,required:!0,text:e.prompt,url:e.tts},...e.choices.map((e=>e.tts&&{autoplay:!1,required:!0,text:e.text,url:e.tts}))]),this.grade=e=>V(e),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=e=>z(e)}},[G.Sm.SyllableListenTap]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.BAD_PROMPT,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA([{autoplay:!1,required:!0,text:e.prompt,url:e.tts},...e.choices.map((e=>e.tts&&{autoplay:!1,required:!0,text:e.text,url:e.tts}))]),this.grade=e=>V(e),this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=e=>z(e)}},[G.Sm.Speak]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.BAD_PROMPT,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>[{autoplay:!0,required:!1,text:e.prompt,url:e.tts}],this.grade=({challenge:e,challengeState:t})=>{var a,s,n,r;const i=(null!==(s=null===(a=t.guess)||void 0===a?void 0:a.score)&&void 0!==s?s:0)>=e.threshold;return Promise.resolve({correct:i,guess:t.guess,numRetriesLeft:i||void 0===(null===(n=t.guess)||void 0===n?void 0:n.usedGuesses)?0:l.Tu-(null===(r=t.guess)||void 0===r?void 0:r.usedGuesses)})},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=()=>!1}},[G.Sm.TapCloze]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.BAD_HINTS,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.MISSING_HINTS,i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.tokens.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))),this.grade=({challenge:e,challengeState:t})=>{const a=this.getGuessedTexts(e,t),n=(0,p.Ub)(e);return Promise.resolve({correct:s.Xy(a,n),guess:a.join(""),highlights:this.getHighlights(e,t)})},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({guess:(0,p.jL)(e.displayTokens),type:e.type}),this.validate=({challenge:e,challengeState:t})=>this.getGuesses(e,t).every((e=>void 0!==e)),this.getGuessedTexts=(e,t)=>{const{displayTokens:a}=e;let s=0;const n=this.getGuesses(e,t);return a.map((e=>{if(void 0===e.damageStart)return e.text;const t=n[s++];return void 0===t?e.text.slice(0,e.damageStart):`${e.text.slice(0,e.damageStart)}${t}`}))},this.getHighlights=(e,t)=>{const a=this.getGuessedTexts(e,t),s=(0,p.Ub)(e);return(0,l.nT)(s,a)},this.getGuesses=(e,t)=>{const{displayTokens:a}=e;return t.guess?t.guess.map((e=>e.guess)):(0,p.jL)(a).map((()=>{}))}}},[G.Sm.TapClozeTable]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.BAD_HINTS,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.MISSING_HINTS,i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.tableTokens.flat(2).map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))),this.grade=({challenge:e,challengeState:t})=>{const a=this.getGuessedTexts(e,t),n=(0,p.Ub)(e);return Promise.resolve({correct:s.Xy(a,n),guess:a.join(""),highlights:this.getHighlights(e,t)})},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({guess:(0,p.Xh)(e.displayTableTokens),type:e.type}),this.validate=({challenge:e,challengeState:t})=>this.getGuesses(e,t).every((e=>void 0!==e.guess)),this.getGuessedTexts=(e,t)=>{const{displayTableTokens:a,headers:s}=e,n=this.getGuesses(e,t);return(0,p.x6)(a,s,((e,t,a)=>{if(void 0===a.damageStart)return a.text;const s=n.find((a=>a.colIndex===e&&a.rowIndex===t));return(null==s?void 0:s.guess)?`${a.text.slice(0,a.damageStart)}${s.guess}`:a.text.slice(0,a.damageStart)}))},this.getHighlights=(e,t)=>{const a=this.getGuessedTexts(e,t),s=(0,p.Ub)(e);return(0,l.nT)(s,a)},this.getGuesses=(e,t)=>{var a;const{displayTableTokens:s}=e;return null!==(a=t.guess)&&void 0!==a?a:(0,p.Xh)(s)}}},[G.Sm.TapComplete]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.BAD_HINTS,i.Vi.ChallengeReports.BAD_IMAGE,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.MISSING_HINTS,i.Vi.ChallengeReports.MISSING_IMAGE,i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.tokens.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))),this.grade=({challenge:e,challengeState:t})=>{const a=this.getGuesses(e,t),n=a.values(),r=e.displayTokens.map((t=>{if(t.isBlank){const t=n.next().value;return null===t?"":e.choices[t].text}return t.text})).join("");return Promise.resolve({closestSolution:e.displayTokens.map((e=>e.text)).join(""),correct:s.Xy(a,e.correctIndices),guess:r,highlights:this.getHighlights(e,t)})},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challenge:e,challengeState:t})=>this.getGuesses(e,t).filter((e=>null!==e)).length===e.correctIndices.length,this.getGuesses=(e,t)=>t.guess?t.guess:new Array(e.correctIndices.length).fill(null),this.getHighlights=(e,t)=>{const a=this.getGuesses(e,t).values();return(0,l.nT)(e.displayTokens.map((e=>e.text)),e.displayTokens.map((t=>{if(t.isBlank){const t=a.next().value;return null===t?"":e.choices[t].text}return t.text})))}}},[G.Sm.TapCompleteTable]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.BAD_HINTS,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.MISSING_HINTS,i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.tableTokens.flat(2).map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))),this.grade=({challenge:e,challengeState:t})=>{const a=this.getGuessedTexts(e,t),n=(0,p.Ub)(e);return Promise.resolve({correct:s.Xy(a,n),guess:a.join(""),highlights:this.getHighlights(e,t)})},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({guess:(0,p.Xh)(e.displayTableTokens),type:e.type}),this.validate=({challenge:e,challengeState:t})=>this.getGuesses(e,t).every((e=>void 0!==e.guess)),this.getGuessedTexts=(e,t)=>{const{displayTableTokens:a,headers:s}=e,n=this.getGuesses(e,t);return(0,p.x6)(a,s,((e,t,a)=>{if(!a.isBlank)return a.text;const s=n.find((a=>a.colIndex===e&&a.rowIndex===t));return(null==s?void 0:s.guess)?s.guess:""}))},this.getHighlights=(e,t)=>{const a=this.getGuessedTexts(e,t),s=(0,p.Ub)(e);return(0,l.nT)(s,a)},this.getGuesses=(e,t)=>{var a;const{displayTableTokens:s}=e;return null!==(a=t.guess)&&void 0!==a?a:(0,p.Xh)(s)}}},[G.Sm.TapDescribe]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_IMAGE,i.Vi.ChallengeReports.MISSING_IMAGE,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.choices.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.text,url:e.tts}))),this.grade=async({challenge:e,challengeState:t})=>{const a=this.getGuess(e,t),s=await(0,u.wM)({allowTypoBlame:!1,challenge:e,guess:a,isTypingInLearningLanguage:!1});return s.correct?s:{correct:s.correct,guess:a}},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challenge:e,challengeState:t})=>this.getChoices(t).length===e.correctIndices.length,this.getChoices=e=>{var t;return null!==(t=e.guess)&&void 0!==t?t:[]},this.getGuess=(e,t)=>{const a=(0,l.rF)(e);return this.getChoices(t).map((t=>e.choices[t].text)).join(a)}}},[G.Sm.Translate]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.BAD_HINTS,i.Vi.ChallengeReports.BAD_IMAGE,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.MISSING_HINTS,i.Vi.ChallengeReports.MISSING_IMAGE,i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e,learningLanguage:t,session:a})=>s.oA([e.tts&&{autoplay:e.sourceLanguage===t,required:!1,text:e.prompt,url:e.tts},...e.choices.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.text,url:e.tts})),...e.tokens.map((e=>e.tts&&!(0,F.LJ)(a.type)&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))]),this.grade=async({challenge:e,challengeState:t,challengeToggleState:a,learningLanguage:n})=>{if(a.isToggledToTyping)return(0,u.wM)({allowTypoBlame:a.isToggledToTyping,challenge:e,guess:this.getTranslation(t),isTypingInLearningLanguage:a.isToggledToTyping&&e.grader.language===n});const r=(0,l.rF)(e),i=this.getTapTranslations(e,t),c=i.join(r),d=e.correctIndices.map((t=>e.choices[t].text));if(s.Xy(d,i))return Promise.resolve({correct:!0,guess:c});const p=await(0,u.wM)({allowTypoBlame:a.isToggledToTyping,challenge:e,guess:c,isTypingInLearningLanguage:a.isToggledToTyping&&e.grader.language===n});return p.correct?p.blameType===o.Oj.ExtraSpace?{correct:p.correct,guess:c}:p:Promise.resolve({correct:p.correct,guess:c,mistakesRecyclingHighlights:p.mistakesRecyclingHighlights})},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challenge:e,challengeState:t,challengeToggleState:a})=>a.isToggledToTyping?this.getTranslation(t).length>0:this.getTapTranslations(e,t).length>0,this.getTapTranslations=(e,t)=>{var a,s,n;return null!==(n=null===(s=null===(a=t.guess)||void 0===a?void 0:a.tapTranslations)||void 0===s?void 0:s.map((t=>e.choices[t].text)))&&void 0!==n?n:[]},this.getTranslation=e=>{var t,a;return(null!==(a=null===(t=e.guess)||void 0===t?void 0:t.translation)&&void 0!==a?a:"").trim()}}},[G.Sm.Transliterate]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=()=>[],this.grade=({challenge:e,challengeState:t})=>{const a=this.getTransliteration(t),s=(e.correctSolutions||[]).map((e=>(0,d.lG)(B,e))).map((e=>e.replace(" ",""))),n=(0,d.lG)(B,a).replace(" ",""),r=s.includes(n);return Promise.resolve({correct:r,guess:a})},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>this.getTransliteration(e).length>0,this.getTransliteration=e=>{var t,a;return(null!==(a=null===(t=e.guess)||void 0===t?void 0:t.transliteration)&&void 0!==a?a:"").trim()}}},[G.Sm.TypeCloze]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.BAD_HINTS,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.MISSING_HINTS,i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.tokens.map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))),this.grade=async({challenge:e,challengeState:t,learningLanguage:a})=>{const n=this.getGuessedTexts(e,t),r=(0,p.Ub)(e),i=await(0,d.C3)(a);return Promise.resolve({correct:s.Xy(n.map((e=>(0,d.PW)(i.accentedCharacterMap,i.normalizationData,e))),r.map((e=>(0,d.PW)(i.accentedCharacterMap,i.normalizationData,e)))),guess:n.join(""),highlights:this.getHighlights(e,t)})},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({guess:(0,p.jL)(e.displayTokens),type:e.type}),this.validate=({challenge:e,challengeState:t})=>this.getGuesses(e,t).every((e=>void 0!==e)),this.getGuessedTexts=(e,t)=>{const{displayTokens:a}=e;let s=0;const n=this.getGuesses(e,t);return a.map((e=>{if(void 0===e.damageStart)return e.text;const t=n[s++];return void 0===t?e.text.slice(0,e.damageStart):`${e.text.slice(0,e.damageStart)}${t}`}))},this.getHighlights=(e,t)=>{const a=this.getGuessedTexts(e,t),s=(0,p.Ub)(e);return(0,l.nT)(s,a)},this.getGuesses=(e,t)=>{const{displayTokens:a}=e;return t.guess?t.guess.map((e=>e.guess)):(0,p.jL)(a).map((()=>{}))}}},[G.Sm.TypeClozeTable]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.BAD_HINTS,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.MISSING_HINTS,i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.tableTokens.flat(2).map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))),this.grade=async({challenge:e,challengeState:t,learningLanguage:a})=>{const n=this.getGuessedTexts(e,t),r=(0,p.Ub)(e),i=await(0,d.C3)(a);return{correct:s.Xy(n.map((e=>(0,d.PW)(i.accentedCharacterMap,i.normalizationData,e))),r.map((e=>(0,d.PW)(i.accentedCharacterMap,i.normalizationData,e)))),guess:n.join(""),highlights:this.getHighlights(e,t)}},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({guess:(0,p.Xh)(e.displayTableTokens),type:e.type}),this.validate=({challenge:e,challengeState:t})=>this.getGuesses(e,t).every((e=>void 0!==e.guess)),this.getGuessedTexts=(e,t)=>{const{displayTableTokens:a,headers:s}=e,n=this.getGuesses(e,t);return(0,p.x6)(a,s,((e,t,a)=>{if(void 0===a.damageStart)return a.text;const s=n.find((a=>a.colIndex===e&&a.rowIndex===t));return(null==s?void 0:s.guess)?`${a.text.slice(0,a.damageStart)}${s.guess}`:a.text.slice(0,a.damageStart)}))},this.getHighlights=(e,t)=>{const a=this.getGuessedTexts(e,t),s=(0,p.Ub)(e);return(0,l.nT)(s,a)},this.getGuesses=(e,t)=>{const{displayTableTokens:a}=e;return t.guess?t.guess:(0,p.Xh)(a)}}},[G.Sm.TypeCompleteTable]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_AUDIO,i.Vi.ChallengeReports.BAD_HINTS,i.Vi.ChallengeReports.MISSING_AUDIO,i.Vi.ChallengeReports.MISSING_HINTS,i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>s.oA(e.tableTokens.flat(2).map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts}))),this.grade=async({challenge:e,challengeState:t,learningLanguage:a})=>{const n=this.getGuessedTexts(e,t),r=(0,p.Ub)(e),i=await(0,d.C3)(a);return{correct:s.Xy(n.map((e=>(0,d.PW)(i.accentedCharacterMap,i.normalizationData,e))),r.map((e=>(0,d.PW)(i.accentedCharacterMap,i.normalizationData,e)))),guess:n.join(""),highlights:this.getHighlights(e,t)}},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({guess:(0,p.Xh)(e.displayTableTokens),type:e.type}),this.validate=({challenge:e,challengeState:t})=>this.getGuesses(e,t).every((e=>void 0!==e.guess)),this.getGuessedTexts=(e,t)=>{const{displayTableTokens:a,headers:s}=e,n=this.getGuesses(e,t);return(0,p.x6)(a,s,((e,t,a)=>{if(!a.isBlank)return a.text;const s=n.find((a=>a.colIndex===e&&a.rowIndex===t));return(null==s?void 0:s.guess)?s.guess:""}))},this.getHighlights=(e,t)=>{const a=this.getGuessedTexts(e,t),s=(0,p.Ub)(e);return(0,l.nT)(s,a)},this.getGuesses=(e,t)=>{const{displayTableTokens:a}=e;return t.guess?t.guess:(0,p.Xh)(a)}}},[G.Sm.WriteComprehension]:new class extends Z{constructor(){super(...arguments),this.getAlwaysDisplayedReportTypes=()=>[i.Vi.ChallengeReports.BAD_PROMPT,i.Vi.ChallengeReports.OTHER_ISSUE],this.getConditionallyDisplayedReportTypes=()=>[i.Vi.ChallengeReports.NOT_ACCEPTED,i.Vi.ChallengeReports.WRONG_ACCEPTED],this.getTts=({challenge:e})=>{var t,a;return s.oA([...null!==(t=e.passageTokens)&&void 0!==t?t:[],...null!==(a=e.questionTokens)&&void 0!==a?a:[]].map((e=>e.tts&&{autoplay:!1,required:!1,text:e.value,url:e.tts})))},this.grade=async({challenge:e,challengeState:t,learningLanguage:a})=>{var s;const n=await(0,u.wM)({allowTypoBlame:!0,challenge:e,guess:null!==(s=t.guess)&&void 0!==s?s:"",isTypingInLearningLanguage:e.grader.language===a});return{blameMessage:n.correct?void 0:(0,g.H8)(30063),correct:n.correct,guess:n.guess}},this.isReadyForGuessing=()=>!0,this.prepareChallengeState=({challenge:e})=>({type:e.type}),this.validate=({challengeState:e})=>void 0!==e.guess}}},q=s.XP($),W=e=>t=>{const a=t.challenge.type;if(!(a in $))throw Error(`Unknown challenge type: ${a}`);return $[a][e](t)},Q=W("getAlwaysDisplayedReportTypes"),Y=W("getConditionallyDisplayedReportTypes"),J=e=>{const{challenge:t,challengeState:a,session:s}=e;if(t.skipped&&(!(0,F.LJ)(s.type)||s.type===G.FF.UnitTest||s.type===G.FF.SectionTest)){if(a.hasBrokenTts)return Promise.resolve({correct:!0,guess:""});if((0,F.tq)().includes(t.type))return Promise.resolve({blameMessage:(0,g.H8)(4469),blameSubtext:(0,g.H8)(35006),correct:!0,guess:""});if((0,F.bc)().includes(t.type)){const e=a.recognizerFailed?(0,g.H8)(7768):(0,g.H8)(35006);return Promise.resolve({blameMessage:(0,g.H8)(12946),blameSubtext:e,correct:!0,guess:""})}}return W("grade")(e)},K=W("continueChallenge"),X=W("isReadyForGuessing"),ee=W("prepareChallenge"),te=W("prepareChallengeState"),ae=W("validate"),se=W("getTts")},18675:(e,t,a)=>{"use strict";a.d(t,{K:()=>p,w:()=>f});var s=a(80254),n=a(5219),r=a(95332),i=a(59249),o=a(68903),l=a(39852),c=a(11811);const d=s.IH((()=>{n.setDebug((0,i.Au)())})),u=(e,t,a)=>a.challenges.slice(0,t.currentIndex).filter((t=>t.id===e.id&&t.type===e.type)).length,p=e=>"string"==typeof e?e:e[0].endsWith("'")?e.join(""):e.join(" "),g=(e,t)=>{var a;const s=t.guess;switch(e.type){case c.Sm.CharacterMatch:case c.Sm.CharacterPuzzle:case c.Sm.CharacterTrace:case c.Sm.ListenMatch:case c.Sm.ListenSpeak:case c.Sm.Match:case c.Sm.Speak:return;case c.Sm.Assist:return null===(a=e.options[s])||void 0===a?void 0:a.text;case c.Sm.CharacterIntro:return e.choices[s];case c.Sm.CharacterSelect:return((e,t)=>{var a;return null===(a=e.choices[t])||void 0===a?void 0:a.character})(e,s);case c.Sm.Judge:return e.choices[s];case c.Sm.Select:return((e,t)=>{var a;return null===(a=e.choices[t])||void 0===a?void 0:a.phrase})(e,s);case c.Sm.SelectPronunciation:case c.Sm.SelectTranscription:return((e,t)=>{var a;return null===(a=e.choices[t])||void 0===a?void 0:a.text})(e,s);case c.Sm.TapCloze:case c.Sm.TypeCloze:case c.Sm.TapClozeTable:case c.Sm.TypeClozeTable:case c.Sm.TapCompleteTable:case c.Sm.TypeCompleteTable:case c.Sm.CompleteReverseTranslation:case c.Sm.FreeResponse:case c.Sm.Listen:case c.Sm.ListenComplete:case c.Sm.ListenIsolation:case c.Sm.ListenTap:case c.Sm.PartialListen:case c.Sm.PartialReverseTranslate:case c.Sm.SyllableListenTap:case c.Sm.SyllableTap:case c.Sm.TapComplete:case c.Sm.TapDescribe:case c.Sm.Translate:case c.Sm.Transliterate:case c.Sm.WriteComprehension:return s;case c.Sm.Definition:case c.Sm.Dialogue:case c.Sm.ListenComprehension:case c.Sm.PatternTapComplete:case c.Sm.ReadComprehension:return e.choices[s];case c.Sm.Form:return((e,t)=>{if(e.promptPieces.length<2||!(t in e.options)||!("text"in e.options[t]))return;const a=e.options[t].text;return e.promptPieces[0]+a+e.promptPieces[1]})(e,s);case c.Sm.GapFill:return((e,t)=>e.displayTokens.map((e=>e.isBlank?t:e.text)).join(""))(e,s);case c.Sm.Name:return p(s);default:throw(0,o.RJ)(e),Error("Unexpected challenge type for computing tracked response guess in computeGuess.")}},m=e=>{var t,a,s;switch(e.type){case c.Sm.CompleteReverseTranslation:case c.Sm.GapFill:case c.Sm.ListenIsolation:case c.Sm.ListenSpeak:case c.Sm.PartialReverseTranslate:case c.Sm.Speak:case c.Sm.SyllableTap:case c.Sm.TapCloze:case c.Sm.TapComplete:case c.Sm.Translate:case c.Sm.TypeCloze:return null!==(t=e.tokens)&&void 0!==t?t:[];case c.Sm.Definition:return e.displayTokens.map((e=>e.hintToken));case c.Sm.Dialogue:return e.dialogue.flatMap((e=>e.hintTokens));case c.Sm.ReadComprehension:case c.Sm.WriteComprehension:return[...null!==(a=e.passageTokens)&&void 0!==a?a:[],...null!==(s=e.questionTokens)&&void 0!==s?s:[]];case c.Sm.TapClozeTable:case c.Sm.TapCompleteTable:case c.Sm.TypeClozeTable:case c.Sm.TypeCompleteTable:return e.tableTokens.flat(2);case c.Sm.Assist:case c.Sm.CharacterIntro:case c.Sm.CharacterMatch:case c.Sm.CharacterPuzzle:case c.Sm.CharacterSelect:case c.Sm.CharacterTrace:case c.Sm.Form:case c.Sm.FreeResponse:case c.Sm.Judge:case c.Sm.Listen:case c.Sm.ListenComprehension:case c.Sm.ListenComplete:case c.Sm.ListenMatch:case c.Sm.ListenTap:case c.Sm.Match:case c.Sm.Name:case c.Sm.PartialListen:case c.Sm.Select:case c.Sm.SelectPronunciation:case c.Sm.SelectTranscription:case c.Sm.TapDescribe:case c.Sm.Transliterate:case c.Sm.SyllableListenTap:case c.Sm.PatternTapComplete:return[];default:throw(0,o.RJ)(e),Error("Unexpected challenge type for computing tracked response prompt tokens in computePromptTokens.")}},h=e=>{const t=e.challengeStates[e.currentIndex].hintsShown;return void 0===t?[]:t.map((e=>e.value)).slice(0,128)},_=e=>{var t,a;return null!==(a=null===(t=e.challengeGeneratorIdentifier)||void 0===t?void 0:t.specificType)&&void 0!==a?a:r.SJ[e.type]},v=e=>{var t;return e.worldCharacterShown&&(null===(t=e.character)||void 0===t?void 0:t.name)?[r.F[e.character.name]]:void 0},f=(e,t,a,s,r,i,o)=>{var p;const f=e.challenges[a.currentIndex],S=Object.assign(Object.assign({app_version:window.duo.version},{app_version_hash:window.duo.versionHash}),{challenge_response_tracking_properties:f.challengeResponseTrackingProperties,closest_solution:s.closestSolution,compact_translations:f.compactTranslations,content_id:null===(p=f.challengeGeneratorIdentifier)||void 0===p?void 0:p.generatorId,correct:r?void 0:s.correct,distractors:f.wrongTokens,from_language:a.sessionParams.fromLanguage,guess:g(f,s),hinted_words:h(a),item_type:_(f),learning_language:a.sessionParams.learningLanguage,level_index:a.sessionParams.levelIndex,num_hints_tapped:h(a).length,order_index:a.currentIndex,previous_mistake_order_index:a.recycledMistakeIndexToOriginalMistakeIndex[a.currentIndex],prompt:f.prompt,prompt_tokens:(E=m(f),E.filter((e=>void 0!==e.hintTable)).map((e=>{var t,a;return{hints:null!==(a=null===(t=e.hintTable)||void 0===t?void 0:t.rows.flatMap((e=>e.flatMap((e=>{var t;return null!==(t=e.hint)&&void 0!==t?t:[]})))))&&void 0!==a?a:[],value:e.value}}))),repetition_number:u(f,a,e),responded_by_typing:o.canToggleTyping&&o.isToggledToTyping,session_id:e.type===c.FF.AlphabetLesson?e.trackingProperties.alphabet_static_session_id:e.trackingProperties.activity_uuid,session_type:e.type.toLowerCase(),skill_id:e.skillId,skill_tree_id:e.trackingProperties.skill_tree_id,skipped:r,tagged_kc_ids:f.metadata.lexeme_ids_to_update,time_taken:i,tree_row:f.metadata.depth,user_id:t.id,world_characters_shown:v(f)});var E;d(),n.track(S,(()=>(0,l.bP)("track","challenge response",[{data:S,name:"properties"}],{excludeFromRollbarTelemetry:!0})))}},16970:(e,t,a)=>{"use strict";a.d(t,{AX:()=>g,S9:()=>o,YR:()=>p,Yt:()=>d,hN:()=>l,w:()=>c});var s=a(81149),n=a(93746),r=a(11811);const i=[["ja<en",void 0],["ru<en",void 0],["uk<en",void 0],["he<en",void 0],["yi<en",void 0],["el<en",void 0],["hi<en",void 0],["ar<en",void 0],["ko<en",void 0]],o=(e,t)=>{const a=`${e}<${t}`;for(const[e,t]of i)if(e===a&&(!t||"experiment"===(0,s.j6)(t,void 0)))return!0;return!1},l=(e,t)=>{var a;return!(null!==(a=null==t?void 0:t.featureFlags.alphabets_web_maintenance)&&void 0!==a&&a)&&o(e.learningLanguage,e.fromLanguage)},c=({learningLanguage:e,fromLanguage:t})=>"ja"===e&&"en"===t,d=e=>{const{currentIndex:t,session:{challenges:a}}=e;if(a.slice(0,t+1).some((e=>e.indicatorType===r.A.LimitedTts)))return!1;const s=a[t+1];return(null==s?void 0:s.indicatorType)===r.A.LimitedTts},u=["ja"],p=e=>u.includes(e)?"characters":"letters",g=e=>`Learn ${(0,n.vY)(e)} ${p(e)} here!`},78939:(e,t,a)=>{"use strict";a.d(t,{sd:()=>E,C3:()=>h,YK:()=>b,PW:()=>f,GS:()=>I,tc:()=>g,gE:()=>p,lG:()=>S});var s=a(87251),n=a.n(s),r=a(80254);const i=JSON.parse('{"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","×":"x","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","÷":"/","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Ĉ":"C","ĉ":"c","Ċ":"C","ċ":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"D","đ":"d","Ē":"E","ē":"e","Ĕ":"E","ĕ":"e","Ė":"E","ė":"e","Ę":"E","ę":"e","Ě":"E","ě":"e","Ĝ":"G","ĝ":"g","Ğ":"G","ğ":"g","Ġ":"G","ġ":"g","Ģ":"G","ģ":"g","Ĥ":"H","ĥ":"h","Ħ":"H","ħ":"h","Ĩ":"I","ĩ":"i","Ī":"I","ī":"i","Ĭ":"I","ĭ":"i","Į":"I","į":"i","İ":"I","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","ĺ":"l","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ŀ":"L","ŀ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","Ō":"O","ō":"o","Ŏ":"O","ŏ":"o","Ő":"O","ő":"o","Ŕ":"R","ŕ":"r","Ŗ":"R","ŗ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ŝ":"S","ŝ":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ŧ":"T","ŧ":"t","Ũ":"U","ũ":"u","Ū":"U","ū":"u","Ŭ":"U","ŭ":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","Ơ":"O","ơ":"o","Ư":"U","ư":"u","Ș":"S","ș":"s","Ț":"T","ț":"t","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ό":"Ο","Ύ":"Υ","Ώ":"Ω","ΐ":"ι","Ϊ":"Ι","Ϋ":"Υ","ά":"α","έ":"ε","ή":"η","ί":"ι","ΰ":"υ","ϊ":"ι","ϋ":"υ","ό":"ο","ύ":"υ","ώ":"ω","Ạ":"A","ạ":"a","Ả":"A","ả":"a","Ấ":"A","ấ":"a","Ầ":"A","ầ":"a","Ẩ":"A","ẩ":"a","Ẫ":"A","ẫ":"a","Ậ":"A","ậ":"a","Ắ":"A","ắ":"a","Ằ":"A","ằ":"a","Ẳ":"A","ẳ":"a","Ẵ":"A","ẵ":"a","Ặ":"A","ặ":"a","Ẹ":"E","ẹ":"e","Ẻ":"E","ẻ":"e","Ẽ":"E","ẽ":"e","Ế":"E","ế":"e","Ề":"E","ề":"e","Ể":"E","ể":"e","Ễ":"E","ễ":"e","Ệ":"E","ệ":"e","Ỉ":"I","ỉ":"i","Ị":"I","ị":"i","Ọ":"O","ọ":"o","Ỏ":"O","ỏ":"o","Ố":"O","ố":"o","Ồ":"O","ồ":"o","Ổ":"O","ổ":"o","Ỗ":"O","ỗ":"o","Ộ":"O","ộ":"o","Ớ":"O","ớ":"o","Ờ":"O","ờ":"o","Ở":"O","ở":"o","Ỡ":"O","ỡ":"o","Ợ":"O","ợ":"o","Ụ":"U","ụ":"u","Ủ":"U","ủ":"u","Ứ":"U","ứ":"u","Ừ":"U","ừ":"u","Ử":"U","ử":"u","Ữ":"U","ữ":"u","Ự":"U","ự":"u","Ỳ":"Y","ỳ":"y","Ỵ":"Y","ỵ":"y","Ỷ":"Y","ỷ":"y","Ỹ":"Y","ỹ":"y"}');var o=a(76986),l=a(77167),c=a(83719),d=a(11908);const u=o,p=()=>{const e=d.Qt.GradingConfig;if(!(0,d.No)(e))return!0;const t=d.Qt.GradingConfigTimestamp;let a=0;return(0,d.No)(t)&&(a=(0,d.rV)(t)),Date.now()-a>108e5||a<16969464e5},g=e=>{(0,d.LS)(d.Qt.GradingConfig,e),(0,d.LS)(d.Qt.GradingConfigTimestamp,Date.now())},m=r.HP((e=>(0,d.rV)(`${d.Qt.LanguageTokens}.${e}`)||[])),h=async e=>{var t,a,s,n;let r=i,o=u;if(e){const i=await(async()=>{if(!p())return(0,d.rV)(d.Qt.GradingConfig);const e=await l.bG.requestGradingConfig();return g(e),e})();r=Object.assign(Object.assign({},i.language_data.default.accented_character_map),null!==(a=null===(t=i.language_data[e])||void 0===t?void 0:t.accented_character_map)&&void 0!==a?a:{}),o=[...i.language_data.default.normalization_data,...null!==(n=null===(s=i.language_data[e])||void 0===s?void 0:s.normalization_data)&&void 0!==n?n:[]]}return{accentedCharacterMap:r,normalizationData:o}},_={Accent:[c.Oj.Accent,1e-12],ExtraSpace:[c.Oj.ExtraSpace,.002],MissingSpace:[c.Oj.MissingSpace,.001],MissingWord:[c.Oj.MissingWord,.6],Typo:[c.Oj.Typo,1e-6],WrongWord:[c.Oj.WrongWord,.6]},v=r.Ry(r.VO(_)),f=(e,t,a)=>S(t,a).split("").map((t=>{var a;return null!==(a=e[t])&&void 0!==a?a:t})).join(""),S=(e,t)=>e.reduce(((e,[t,a])=>e.replace(new RegExp(t,"g"),a)),t.toLowerCase()),E=(e,t)=>{if(!e)return null!=t?t.length:Number.MAX_VALUE;if(!t)return e.length;const a=[];let s,n;for(s=0;s<=t.length;s++)a[s]=[s];for(n=0;n<=e.length;n++)a[0][n]=n;for(s=1;s<=t.length;s++)for(n=1;n<=e.length;n++)t.charAt(s-1)===e.charAt(n-1)?a[s][n]=a[s-1][n-1]:a[s][n]=Math.min(a[s-1][n-1]+1,Math.min(a[s][n-1]+1,a[s-1][n]+1));return a[t.length][e.length]};class y{constructor({accentedCharacterMap:e={},allowTypoBlame:t,isTypingInLearningLanguage:a,isWhitespaceDelimited:s=!0,language:n,submittedValue:r,vertices:i}){if(this.startState=()=>[0,0],this.isEndState=([e,t])=>e===this.vertices.length-1&&t===this.submittedValue.length,this.iterEdges=e=>{const t=[],a=(e,[t,a])=>Object.assign(Object.assign({},e),{type:t,weight:a+(e.auto?1e-4:0)}),[s,n]=e;if(n>this.submittedValue.length)throw Error('"pos" must be less than the length of "submittedValue".');const r=this.submittedValue.slice(n);return this.vertices[s].forEach((e=>{let s,i;const o=e.lenient;if(!o.length)return void t.push([e,[e.to,n]]);if(" "===o)return void(r.startsWith(" ")?t.push([e,[e.to,n+1]]):""===r?t.push([e,[e.to,n]]):(i=this.isWhitespaceDelimited?a(e,_.MissingSpace):e,t.push([i,[i.to,n]])));if(this.isWhitespaceDelimited){let l=!0,c=0;o.split("").some((e=>{for(;c<r.length&&" "===r[c];)c+=1;return c===r.length||e!==r[c]?(l=!1,!0):(c+=1,!1)})),l&&(i=a(e,_.ExtraSpace),s=n+c,t.push([i,[i.to,s]]))}const l=r.indexOf(" "),c=l<0?r:r.slice(0,l);if(s=n+c.length,o===c)t.push([e,[e.to,s]]);else if(this.isWhitespaceDelimited&&c.length){const n=((e,t,a)=>((e,t,a=((e,t)=>e===t))=>{if(Math.abs(e.length-t.length)>1)return 2;t.length>e.length&&([e,t]=[t,e]);const s=e.length,n=t.length;let r=0;for(;r<n&&a(e[r],t[r]);)r+=1;if(r===n)return s>n?1:0;let i=0;for(;i<n&&a(e[s-1-i],t[n-1-i]);)i+=1;return r+i+1>=s||s===n&&r+1<s&&a(e[r],t[r+1])&&a(e[r+1],t[r])&&r+i+2===s?1:2})(e,t,((e,t)=>{var s,n;return(null!==(s=a[e])&&void 0!==s?s:e)===(null!==(n=a[t])&&void 0!==n?n:t)})))(o,c,this.accentedCharacterMap);if(0===n)i=a(e,_.Accent),t.push([i,[i.to,s]]);else if(1===n){const n=this.isValidToken(c),r=!this.allowTypoBlame||n&&this.isTypingInLearningLanguage?_.WrongWord:_.Typo;return i=a(e,r),void t.push([i,[i.to,s]])}}c.startsWith(o)&&t.push([e,[e.to,n+o.length]]),!this.isWhitespaceDelimited&&c.startsWith(o)||(i=a(e,_.MissingWord),this.isWhitespaceDelimited&&(i=this.spaceSkippingEdge(i)),t.push([i,[i.to,n]]),c.length&&(i=a(e,_.WrongWord),t.push([i,[i.to,s]])))})),t},this.edgeWeight=e=>void 0===e.weight?0:e.weight,this.isValidToken=e=>this.languageTokens.includes(e),this.spaceSkippingEdge=e=>{const t=Object.assign({},e),a=this.vertices[e.to];return 1===a.length&&" "===a[0].lenient&&(t.to=a[0].to,t.lenient+=" ","orig"in t&&(t.orig+=" ")),t},i[i.length-1].length)throw Error("Malformed vertices array: Last element is not empty.");this.accentedCharacterMap=e,this.isWhitespaceDelimited=s,this.isTypingInLearningLanguage=a,this.languageTokens=m(n),this.submittedValue=r,this.vertices=i,this.allowTypoBlame=t}}const b=({accentedCharacterMap:e,allowTypoBlame:t,compiledNormalizationData:a,gradingData:s,isTypingInLearningLanguage:i,submittedValue:o})=>{var l;if(0!==s.version)throw Error("Client-side grading version incompatible");const d=new y({accentedCharacterMap:e,allowTypoBlame:t,isTypingInLearningLanguage:i,isWhitespaceDelimited:null===(l=s.whitespaceDelimited)||void 0===l||l,language:s.language,submittedValue:S(a,o),vertices:s.vertices}),[u,p]=((e,t,a,s,i)=>{const o=new(n())(((e,t)=>e.weight-t.weight||e.tieBreaker-t.tieBreaker));o.push({path:[],state:e,tieBreaker:0,weight:0});const l={};for(;o.size();){const e=r.Fp(o.toArray().map((({tieBreaker:e})=>e)))+1,{path:n,state:i,weight:c}=o.pop();if(!l[`${i}`]){if(l[`${i}`]=!0,c>1)return[null,null];if(t(i))return[n,c];a(i).forEach((([t,a],r)=>{const l=s(t);if(l<0)throw Error("Negative weight edge in solution DAG");o.push({path:[...n,[i,t]],state:a,tieBreaker:e+r,weight:c+l})}))}}return[null,null]})(d.startState(),d.isEndState,d.iterEdges,d.edgeWeight);if(null===u||null===p)return{correct:!1};const g=w(u);if(void 0!==g)return{correct:!1,gradingMetadata:g};const m=p<=.5,h={};let _="";u.forEach((([{},e])=>{var t;let a=e.type;a=void 0===a?"correct":a;let s=e.orig;if(s=void 0===s?e.lenient:s,"correct"!==a){const e=_.length;let n=e+s.length;a===c.Oj.MissingWord&&s.endsWith(" ")&&(n-=1);const r=null!==(t=h[a])&&void 0!==t?t:[];r.push([e,n]),h[a]=r}_+=s}));const f=r.xb(h)?void 0:r.Fp(r.XP(h),(e=>v[e])),E=m&&f===c.Oj.Accent&&!i?void 0:f,b=E?h[E]:void 0;return{blameType:E,closestSolution:_,correct:m,highlights:b}},w=e=>{const t=e.filter((([{},e])=>e.lenient.trim().length>0)).map((([{},e])=>e.metadata)),a=t.filter((e=>void 0!==e));if(0!==a.length&&a.length===t.length)return a[0].filter((e=>a.every((t=>t.some((t=>r.Xy(e,t)))))))},I=e=>e.normalize("NFD").replace(/\p{Diacritic}/gu,"")},54412:(e,t,a)=>{"use strict";a.d(t,{Vj:()=>n,d8:()=>o,ej:()=>i,m_:()=>c,nJ:()=>l});var s=a(67921);const n={CSRFToken:"csrf_token",Impersonate:"impersonate",InitialReferrer:"initial_referrer",JWT:(window.location.host.includes("testbed")?"testbed_":"")+"jwt_token",LandingPage:"lp",LandingURL:"lu",LastReferrer:"lr",LoggedIn:"logged_in",LoggedOutUUID:"logged_out_uuid",RedirectToPreview:"redirect_to_preview",ShouldTrackWelcome:"should_track_welcome",Test:"test",TimeSiteLoaded:"tsl",UTMParameters:"utm_parameters"},r=window.location.host.includes("duolingo.com")?".duolingo.com":window.location.host.includes("duolingo.cn")?".duolingo.cn":window.location.host.includes("githubpreview.dev")?window.location.host:"localhost",i=e=>s.get(e),o=(e,t,a,n)=>{const i={domain:r,expires:365};a&&(i.SameSite="Lax"),n&&(i.secure=!0),s.set(e,t,i)},l=e=>{s.remove(e),s.remove(e,{domain:"duolingo.com"}),s.remove(e,{domain:"www.duolingo.com"}),s.remove(e,{domain:r})},c="N/A"},26886:(e,t,a)=>{"use strict";a.d(t,{Eb:()=>p,It:()=>v,jP:()=>S,og:()=>g,s7:()=>_,yO:()=>h});var s=a(72538),n=a(81149),r=a(53229),i=a(8654),o=a(93746),l=a(16086);const c={},d=[["eo","es"],["eo","fr"],["eo","pt"],["gn","es"]],u={AR_BLURB:11241,AR_DESCRIPTION:4909,CA_BLURB:8506,CA_DESCRIPTION:21183,CS_BLURB:20024,CS_DESCRIPTION:18066,CY_BLURB:10701,CY_DESCRIPTION:10429,DA_BLURB:9800,DA_DESCRIPTION:9178,DE_BLURB:6542,DE_DESCRIPTION:7582,EL_BLURB:18561,EL_DESCRIPTION:20429,EN_BLURB:1646,EN_DESCRIPTION:16668,EO_BLURB:23473,EO_DESCRIPTION:2491,ES_BLURB:7319,ES_DESCRIPTION:19850,FI_BLURB:void 0,FI_DESCRIPTION:11646,FR_BLURB:9723,FR_DESCRIPTION:17267,GA_BLURB:4364,GA_DESCRIPTION:22122,GD_BLURB:void 0,GD_DESCRIPTION:18683,GN_BLURB:24569,GN_DESCRIPTION:11938,HE_BLURB:15278,HE_DESCRIPTION:15586,HI_BLURB:8016,HI_DESCRIPTION:10589,HT_BLURB:void 0,HT_DESCRIPTION:33373,HU_BLURB:12368,HU_DESCRIPTION:11959,HV_BLURB:3675,HV_DESCRIPTION:18996,HW_BLURB:4934,HW_DESCRIPTION:11500,ID_BLURB:12109,ID_DESCRIPTION:16127,IT_BLURB:3816,IT_DESCRIPTION:13241,JA_BLURB:16465,JA_DESCRIPTION:14968,KO_BLURB:617,KO_DESCRIPTION:12438,LA_BLURB:void 0,LA_DESCRIPTION:3495,NL_NL_BLURB:7666,NL_NL_DESCRIPTION:3564,NO_BO_BLURB:10523,NO_BO_DESCRIPTION:1378,NV_BLURB:3404,NV_DESCRIPTION:23224,PL_BLURB:2749,PL_DESCRIPTION:11727,PT_BLURB:1296,PT_DESCRIPTION:17196,RO_BLURB:10940,RO_DESCRIPTION:18512,RU_BLURB:17561,RU_DESCRIPTION:5413,SV_BLURB:16903,SV_DESCRIPTION:14282,SW_BLURB:13815,SW_DESCRIPTION:2071,TLH_BLURB:17152,TLH_DESCRIPTION:13015,TR_BLURB:5007,TR_DESCRIPTION:10435,UK_BLURB:11573,UK_DESCRIPTION:4802,VI_BLURB:14762,VI_DESCRIPTION:13549,YI_BLURB:void 0,YI_DESCRIPTION:26696,ZH_BLURB:20640,ZH_DESCRIPTION:6308,ZH_HK_BLURB:void 0,ZH_HK_DESCRIPTION:3e4,ZU_BLURB:void 0,ZU_DESCRIPTION:37399},p=e=>{const t=u[`${(e=>e.toUpperCase().replace("-","_"))(e)}_DESCRIPTION`];return void 0===t?void 0:(0,i._i)(t)},g=(e,t=o.h9)=>{const a=(0,r.lV)((0,i.H8)(2471,{learning_language_name:(0,o.vY)(e)}));return`/${(0,l.Pc)()?"enroll":"course"}/${e}/${t}/${a}`},m=(e,t)=>`${t}<-${e}`,h=(e,t)=>m(e,t)in c,_=(e,t,a,s,r)=>{var i;if(r>=o.AP.Beta)return!0;const l=c[m(t,s)];return!!l&&!!((null===(i=e.featureFlags)||void 0===i?void 0:i[l.featureFlag])||a&&"experiment"===(0,n.j6)(l.experiment,void 0))},v=(e,t)=>d.some((([a,s])=>a===e&&s===t)),f=(e,t)=>{var a;return(null===(a=t.currentCourseId)||void 0===a?void 0:a.endsWith("ZH-CN"))&&t.zhTw?t.currentCourseId===e||t.currentCourseId.replace("ZH-CN","ZH-TW")===e:t.currentCourseId===e},S=(e,t)=>t.courses.filter((a=>f(a,t)||e[a].xp)).map((a=>((e,t,a)=>{var n;const r=e[a].fromLanguage,i=e[a].learningLanguage,l=(0,o.vI)(r,t.zhTw);return{courseId:a,fromLanguageId:r,isCurrent:f(a,t),learningLanguageId:i,learningLanguageName:null===(n=s[l])||void 0===n?void 0:n[i]}})(e,t,a)))},95351:(e,t,a)=>{"use strict";a.d(t,{K:()=>i});var s=a(23275),n=a(11811);const r={[n.FF.GlobalPractice]:{maxLength:16,minLength:10,nthSessionStart:4,requiredSessionEnds:2}},i=({currentCourseHistory:e,levelData:t,sessionType:a,timestamp:i})=>{if(void 0===e)return;const{globalPracticeSessionEnds:o,globalPracticeSessionStarts:l,mistakeHistory:c}=e;if(t&&(0,s.$)(t.level)){const e=c.filter((e=>{var a;return t.level.id===(null===(a=e.additionalData)||void 0===a?void 0:a.levelId)})).map((e=>e.value.generatorIdentifier)).slice(0,10);return e.length>=0?e:void 0}if(a===n.FF.GlobalPractice){if(void 0===i)throw Error("timestamp should not be undefined for Global Practice SessionType");const e=c.filter((e=>i<e.expirationTimestamp)).map((e=>e.value)),t=r[a];return l%t.nthSessionStart==0&&o>=t.requiredSessionEnds&&e.length>=t.minLength?e.map((e=>e.generatorIdentifier)).slice(0,t.maxLength):void 0}}},17135:(e,t,a)=>{"use strict";a.d(t,{ee:()=>E,PG:()=>f,wD:()=>S,Mb:()=>w,zq:()=>b,Nf:()=>y,v4:()=>G,g8:()=>L,NP:()=>F,zM:()=>P,M:()=>x,zK:()=>o,cz:()=>r,i_:()=>h,Qe:()=>m,zO:()=>k,Ux:()=>I,zS:()=>T,$$:()=>ae,ji:()=>j,t8:()=>X,Ij:()=>W,dz:()=>J,zj:()=>K,Ml:()=>R,Zo:()=>C,RF:()=>O,fv:()=>$,L3:()=>q,mm:()=>V,J8:()=>ee,Z2:()=>z,oE:()=>se,Zm:()=>Z,F:()=>g,kJ:()=>p,Ko:()=>Q,T6:()=>B,HR:()=>N,pQ:()=>M,VV:()=>U,vw:()=>_,WJ:()=>te,pY:()=>D,zk:()=>H,Gz:()=>A,iN:()=>c,$I:()=>i,Rw:()=>d});var s=a(51158),n=a(80254);const r=e=>{const t=e.getFullYear().toString();let a=(e.getMonth()+1).toString(),s=e.getDate().toString();return a.length<2&&(a=`0${a}`),s.length<2&&(s=`0${s}`),[t,a,s].join("-")},i=e=>{const[t,a,s]=e.split("-");return new Date(parseInt(t,10),parseInt(a,10)-1,parseInt(s,10))},o=e=>new Date(1e3*e).toISOString().slice(0,10),l=[["s",1e3],["m",6e4],["h",36e5],["d",864e5]],c=e=>{var t;if(e.includes(":"))return e.split(":").reverse().reduce(((e,t,a)=>e+parseInt(t,10)*l[a][1]),0);const a=e.trim().charAt(e.length-1),s=null===(t=l.find((([e])=>e===a)))||void 0===t?void 0:t[1];return void 0===s?NaN:parseInt(e,10)*s},d=n.ZP.memoize((e=>{let t;try{t=parseInt(e,10)}catch(a){(0,s.Kp)("Invalid timezoneOffset",{data:{timezoneOffset:e}}),t=parseInt(f,10)}const a=Math.sign(t);return t=Math.abs(t),a*(Math.floor(t/100)+t%100/60)}));var u=a(8654);const p=(e,t,a)=>($(e,t)-a+7)%7,g=(e,t,a=0)=>{const s=Z(e,t),n=p(e,t,a);return Math.ceil((s+n)/7)},m=(e,t,a=0)=>{const s=(t+1)%12,n=t<11?e:e+1,r=(t-1+12)%12,i=t>0?e:e-1,o=Z(e,t),l=Z(i,r),c=p(e,t,a),d=[],u=Math.ceil((o+c)/7);for(let a=0;a<u;a++){const u=[];for(let d=0;d<7;d++){const p=7*a+d-c,g=p<0?r:p>=o?s:t,m=(p<0?l+p:p%o)+1,h=g===r?i:g===s?n:e;u.push(ae(h,g,m))}d.push(u)}return d},h=({month:e,year:t})=>(0,u.T$)(new Date(t,e),{month:"long",year:"numeric"}),_=e=>{const t=new Date,a=7*e,s=(t.getDay()-(0,u.k8)()+7)%7,n=new Date(t.setDate(t.getDate()-s-a)),r=new Date(t.setDate(t.getDate()+6));return`${(0,u.T$)(n)} - ${n.getMonth()===r.getMonth()?r.getDate():(0,u.T$)(r)}`},v="America/New_York",f="-500",S=2147483647,E=7,y=86400,b=36e5,w=864e5,I=()=>new Date,T=e=>new Date(e),k=e=>new Date(1e3*e),C=()=>Math.floor(Date.now()/1e3),R=()=>Math.floor(Date.now()/b),O=e=>Math.floor(Date.now()/1e3)-J(e),L=e=>Math.floor(e.getTime()/1e3),P=(e,t="000")=>new Date(1e3*e+36e5*d(t)),A=e=>new Date(e),N=e=>Date.now()+1e3*e,D=e=>Date.now()>=e,x=(e,t)=>(t-1e3*e)/w,M=()=>(new Date).getTimezoneOffset(),F=()=>{try{return Intl.DateTimeFormat().resolvedOptions().timeZone||((0,s.Kp)("Got empty time zone from browser API",{once:!0,sample:.1}),v)}catch(e){(0,s.Kp)("Failed to detect time zone",{ex:e,once:!0})}return v},U=e=>(void 0===e?new Date:new Date(e.getTime())).setUTCHours(0,0,0,0),H=e=>e.toDateString()===I().toDateString(),j=(e=f)=>P(Date.now()/1e3,e).getUTCDay(),G=(e,t)=>{const a=new Date(e.setDate(e.getDate()+t));return U(a)/1e3},B=()=>{const e=new Date;return e.setHours(0,0,0,0),e},V=()=>{const e=new Date;return e.setDate(e.getDate()+1),e.setHours(0,0,0,0)},z=()=>{const e=new Date;return e.setDate(1),e.setHours(0,0,0,0),e.setMonth(e.getMonth()+1),e},Z=(e,t)=>new Date(e,t+1,0).getDate(),$=(e,t)=>new Date(e,t).getDay(),q=(e=f)=>{const t=Math.floor(23-I().getUTCHours()-d(e));return Y(t,24)},W=e=>{const t=P(e);return Z(t.getUTCFullYear(),t.getUTCMonth())-t.getUTCDate()},Q=(e=f)=>{const t=I(),a=3600*(t.getUTCHours()+d(e))+60*t.getUTCMinutes()+t.getUTCSeconds();return Y(a,y)},Y=(e,t)=>(e+t)%t,J=e=>{const{days:t=0,hours:a=0,minutes:s=0,seconds:n=0}=e;return t*y+3600*a+60*s+n},K=e=>{if(e<0)throw RangeError("The argument must be greater than or equal to 0.");const t=e/1e3,a=t/60,s=a/60,n=s/24,r=Math.floor(n),i=24*r,o=Math.floor(s-i),l=60*(i+o),c=Math.floor(a-l),d=60*(l+c);return{days:r,hours:o,hoursTotal:o+24*r,minutes:c,seconds:Math.floor(t-d)}},X=(e,t,a="floor")=>{const s=new Date(e),n=new Date(t),r=Date.UTC(s.getFullYear(),s.getMonth(),s.getDate()),i=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate());switch(a){case"round":return Math.round((i-r)/w);case"ceil":return Math.ceil((i-r)/w);default:return Math.floor((i-r)/w)}},ee=(e,t)=>{const a=12*e.getFullYear()+e.getMonth();return 12*t.getFullYear()+t.getMonth()-a},te=(e,t)=>{const a=7*e,s=(I().getDay()-t+7)%7;return G(I(),0-s-a)},ae=(...e)=>{const t=e.indexOf(void 0);return new Date(...e.slice(0,-1===t?e.length:t))},se=({currentTime:e,targetHour:t,targetWeekday:a})=>{const s=new Date(e),n=s.getUTCDay();let r=0;return n===a?s.getUTCHours()>=t&&(r=E):r=n>a?E-n+a:a-n,s.setUTCDate(s.getUTCDate()+r),s.setUTCHours(t,0,0,0),s.getTime()}},59249:(e,t,a)=>{"use strict";a.d(t,{tc:()=>u,Vl:()=>b,R:()=>S,ky:()=>w,nn:()=>h,pL:()=>f,gQ:()=>I,Au:()=>E,oj:()=>_,NY:()=>v,Sz:()=>k,Wi:()=>c});var s=a(99369),n=a(50498),r=a(53229),i=a(11908),o=a(18804),l=a(27378);let c;const d=(0,a(1398).Z)((()=>a.e(8801).then(a.bind(a,97464)).then((e=>({default:e.ReactQueryDevtools}))))),u=()=>{const[e,t]=l.useReducer((e=>!e),!1);return l.useEffect((()=>(c=t,()=>{c===t&&(c=void 0)})),[]),e?l.createElement(l.Suspense,{fallback:null},l.createElement(d,{initialIsOpen:!0})):null};let p,g=!1,m=!1;const h=()=>{var e;return null!==(e=null==p?void 0:p())&&void 0!==e?e:0},_=()=>/^(next-1|preview)\./.test(window.location.host),v=()=>/^next-\d+\./.test(window.location.host),f=()=>{const e=/^next-(\d+)\./.exec(window.location.host);return e?parseInt(e[1],10):void 0},S=()=>{m||(m=!0,console.log("Enabled debug mode"),C())},E=()=>v()||m,y=()=>Object.assign(Object.assign(Object.assign({},(0,r.vl)((0,i.rV)(i.Qt.DebugFlags))),(0,r.vl)((0,i.rV)(i.Qt.BrowserSessionDebugFlags,{useSessionStorage:!0}))),(0,r.vl)(window.location.search)),b=()=>Object.keys(y()).length>0,w=e=>E()?y()[e]:void 0,I=e=>void 0!==w(e),T=e=>void 0!==e&&""!==e&&"false"!==e,k=(e,t)=>{var a;if(!E())throw Error("Tried to set a debug flag with debug mode disabled.");const n=null!==(a=(0,i.rV)(i.Qt.BrowserSessionDebugFlags,{useSessionStorage:!0}))&&void 0!==a?a:{};if(T(t)?n[e]===t:!(e in n))return;const r=T(t)?(0,s.set)(n,e,t):(0,s.without)(n,e);(0,i.LS)(i.Qt.BrowserSessionDebugFlags,r,{useSessionStorage:!0}),console.log(`Set debugFlag ${e} to ${t}`)},C=()=>{g||((async()=>{const[e,t]=await Promise.all([a.e(1711).then(a.bind(a,23339)),a.e(1711).then(a.bind(a,4485))]);e.checkCourseData(),p=t.getDebugOffset})(),R(),g=!0)},R=async()=>{let e;await(0,n._v)(1),(0,o.A5)({timestamp:Date.now(),type:"debug/PAGE_LOAD"});const t=()=>{var a,s;Date.now()>(null!==(s=null===(a=(0,o.qg)())||void 0===a?void 0:a.debug.pageLoadTime)&&void 0!==s?s:Date.now())+864e5?(0,o.A5)({type:"debug/ADD_UNIQUE_DEBUG_WARNING",warning:{type:"stale-page"}}):e=window.setTimeout(t,1e4)};document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState?window.clearTimeout(e):e=window.setTimeout(t,600)})),t()};E()&&C()},37971:(e,t,a)=>{"use strict";var s;a.d(t,{c:()=>s}),function(e){e.Blaming="BLAMING",e.CapstoneReviewSplash="CAPSTONE_REVIEW_SPLASH",e.CoachDuo="COACH_DUO",e.CoachDuoSplash="COACH_DUO_SPLASH",e.CoachDuoSliding="COACH_DUO_SLIDING",e.CoachDuoSubmitting="COACH_DUO_SUBMITTING",e.EndCarousel="END_CAROUSEL",e.FinalLevelDuo="FINAL_LEVEL_DUO",e.Grading="GRADING",e.GrammarSkillSplash="GRAMMAR_SKILL_SPLASH",e.Guessing="GUESSING",e.HardModeDuo="HARD_MODE_DUO",e.HardModeDuoSliding="HARD_MODE_DUO_SLIDING",e.LegendaryDuo="LEGENDARY_DUO",e.MistakesReviewDuo="MISTAKES_REVIEW_DUO",e.PartialXpDuo="PARTIAL_XP_DUO",e.PartialXpDuoSliding="PARTIAL_XP_DUO_SLIDING",e.PlacementSplash="PLACEMENT_SPLASH",e.PracticeHubDuo="PRACTICE_HUB_DUO",e.SectionTestSplash="SECTION_TEST_SPLASH",e.Showing="SHOWING",e.Sliding="SLIDING",e.SmartTip="SMART_TIP",e.SmartTipBlaming="SMART_TIP_BLAMING",e.SmartTipSliding="SMART_TIP_SLIDING",e.SpeakRetryBlaming="SPEAK_RETRY_BLAMING",e.Submitting="SUBMITTING",e.UnitReviewSplash="UNIT_REVIEW_SPLASH",e.UnitTestSplash="UNIT_TEST_SPLASH"}(s||(s={}))},94786:(e,t,a)=>{"use strict";var s;a.d(t,{Q:()=>s}),function(e){e.AlphabetLesson="alphabet_lesson",e.FinalLevelLesson="final_level_lesson",e.GlobalPractice="practice",e.Legendary="legendary",e.LegendaryLevel="legendary_level",e.LegendaryLexemePractice="legendary_lexeme_practice",e.Lesson="lesson",e.LevelReview="level_review",e.LexemePractice="lexeme_practice",e.LexemeSkillLevelPractice="lexeme_skill_level_practice",e.ListeningPractice="listen_up",e.MistakesReview="mistakes_review",e.PlacementTest="placement_test",e.SectionTest="section_test",e.SpeakingPractice="perfect_pronounciation",e.Stories="stories",e.TargetPractice="target_practice",e.UnitReview="unit_review",e.UnitRewind="unit_rewind",e.UnitTest="unit_test"}(s||(s={}))},67173:(e,t,a)=>{"use strict";var s;a.d(t,{V:()=>s}),function(e){e.AccountNotFound="account-not-found",e.AchievementV3Slide="achievementV3-slide",e.AcquisitionSurvey="acquisitionSurvey",e.AddFamilyMember="add-family-member",e.AgeInput="age-input",e.AllowButton="allow-button",e.AppStoreButtons="app-store-buttons",e.AudioButton="audio-button",e.BackArrow="back-arrow",e.BigRedButton="big-red-button",e.Blame="blame",e.BlameCorrect="blame-correct",e.BlameIncorrect="blame-incorrect",e.BlockButton="block-button",e.CancelEditFamily="cancel-edit-family",e.CcBillingInfoForm="cc-billing-info-form",e.CcBillingInfoRejected="cc-billing-info-rejected",e.CcCancelButton="cc-cancel-button",e.CcExpirationInput="cc-expiration-input",e.CcExpirationLabel="cc-expiration-label",e.CcNameInput="cc-name-input",e.CcNameLabel="cc-name-label",e.CcNumberInput="cc-number-input",e.CcNumberLabel="cc-number-label",e.CcPostalCodeInput="cc-postal-code-input",e.CcPostalCodeLabel="cc-postal-code-label",e.CcRejectedImage="cc-rejected-image",e.CcSecurityInput="cc-security-input",e.CcSecurityLabel="cc-security-label",e.CcSubmitButton="cc-submit-button",e.CcTermsConditionsLabel="cc-terms-conditions-label",e.CcTermsConditionsLink="cc-terms-conditions-link",e.Challenge="challenge",e.ChallengeChoice="challenge-choice",e.ChallengeHeader="challenge-header",e.ChallengeJudgeText="challenge-judge-text",e.ChallengeTapToken="challenge-tap-token",e.ChallengeTapTokenText="challenge-tap-token-text",e.ChallengeTextInput="challenge-text-input",e.ChallengeTranslateInput="challenge-translate-input",e.ChinesePrivacy="chinese-privacy",e.ChineseTerms="chinese-terms",e.ChoosePlanHeader="choose-plan-header",e.CloseButton="close-button",e.CloseButtonInviteFamily="close-button-invite-family",e.CloseButtonStories="close-button-stories",e.ContinueWithFacebook="continue-with-facebook",e.ContinueWithGoogle="continue-with-google",e.CoursesLink="courses-link",e.CoursesMenu="courses-menu",e.CourseStartButton="course-start-button",e.CreateProfile="create-profile",e.CreateProfileJuicy="create-profile-juicy",e.CreateProfileLater="create-profile-later",e.DailyQuestProgressSlide="daily-quest-progress-slide",e.DailyQuestRewardSlide="daily-quest-reward-slide",e.DailyReminder="daily-reminder",e.DailyReminderContinueButton="daily-reminder-continue-button",e.DrawerBackdrop="drawer-backdrop",e.EditFamily="edit-family",e.EmailField="email-field",e.EmailInput="email-input",e.EnglishPrivacy="english-privacy",e.EnglishTerms="english-terms",e.FamilyMember="family-member",e.FaqLink="faq-link",e.FooterLinks="footer-links",e.ForgotPassword="forgot-password",e.ForgotPasswordThankYou="forgot-password-thank-you",e.FriendAddButton="friend-add-button",e.FriendAddedButton="friend-added-button",e.FriendEntry="friend-entry",e.FriendFollowersList="friend-followers-list",e.FriendFollowingList="friend-following-list",e.FriendUpdatesHeader="friend-updates-header",e.FullNameInput="full-name-input",e.GetStartedTop="get-started-top",e.GlobalPractice="global-practice",e.GoalCasual="daily-goal-10",e.GoalIntense="daily-goal-50",e.GoalRegular="daily-goal-20",e.GoalSerious="daily-goal-30",e.GuidebookButton="guidebook-button",e.HaveAccount="have-account",e.HdyhauFriends="hdyhau-friendsOrFamily",e.HdyhauNews="hdyhau-newsArticleOrBlog",e.HdyhauOnline="hdyhau-onlineAds",e.HdyhauOther="hdyhau-other",e.HdyhauRadio="hdyhau-radio",e.HdyhauSearch="hdyhau-webSearch",e.HdyhauSocial="hdyhau-socialMedia",e.HdyhauTv="hdyhau-tv",e.HeartsIntroContinueButton="hearts-intro-continue-button",e.HeartsMenu="hearts-menu",e.HintPopover="hint-popover",e.HintToken="hint-token",e.Home="home",e.IntroPopover="intro-popover",e.InvalidFormField="invalid-form-field",e.LanguageCard="language-card",e.Leaderboard="leaderboard",e.LeaderboardsLocked="leaderboards-locked",e.LeaderboardsOpenButton="leaderboards-open",e.LeaderboardsPopover="leaderboards-popover",e.LearnWithPlus="learn-with-plus",e.LegendaryLeveledUpSlide="legendary-leveled-up-slide",e.LegendaryPaywallLingotsCTA="legendary-paywall-lingots-cta",e.LegendaryStartButton="legendary-start-button",e.LingotMenu="lingot-menu",e.LingotStat="lingot-stat",e.LoggedOutTopbar="logged-out-topbar",e.LoginWithFacebook="login-with-facebook",e.LoginWithGoogle="login-with-google",e.LongscrollTitle="longscroll-title",e.MilestoneStreakFreezeSlide="milestone-streak-freeze-slide",e.MobileApps="mobile-apps",e.NotificationButton="notification-button",e.NotificationDrawerNoThanksButton="notification-drawer-no-thanks-button",e.NotNow="not-now",e.NyButton="ny-button",e.NyPromo="ny-promo",e.PasswordInput="password-input",e.PlayerNext="player-next",e.PlayerPracticeAgain="player-practice-again",e.PlayerSkip="player-skip",e.PlayerToggleKeyboard="player-toggle-keyboard",e.PlusChecklistTitle="plus-checklist-title",e.PlusCloseX="plus-close-x",e.PlusContinue="plus-continue",e.PlusNoThanks="plus-no-thanks",e.PlusOfferButton="plus-offer-button",e.PlusOfferLogo="plus-offer-logo",e.PlusPlans="plus-plans",e.PlusTimelineIcon="plus-timeline-icon",e.PlusViewAllPlans="plus-view-all-plans",e.PodcastSlide="podcast-slide",e.PracticeHubAdContinueButton="practice-hub-ad-continue-button",e.PracticeHubAdNoThanksButton="practice-hub-ad-no-thanks-button",e.PracticeHubFeatureSessionCTA="practice-hub-feature-session-cta",e.PrivacyPersonalizedAds="privacy-personalized-ads",e.PrivacyPublicProfile="privacy-public-profile",e.ProfileHeaderBlockButton="profile-header-block-button",e.ProfileHeaderPopover="profile-header-popover",e.ProfileHeaderUnblockButton="profile-header-unblock-button",e.ProfileUsername="profile-username",e.PurchaseButton="purchase-button",e.PurchaseStepActive="purchase-step-active",e.QuitButton="quit-button",e.RegisterButton="register-button",e.RemoveMember="remove-member",e.Reset="reset",e.ResetPassword="reset-password",e.RewardSlide="reward-slide",e.SaveButton="save-button",e.SelectMemberCheckbox="select-member-checkbox",e.SessionCompleteSlide="session-complete-slide",e.SessionDuo="session-duo",e.SessionSplashTitle="session-splash-title",e.SetGoal="set-goal",e.SetHdyhau="set-hdyhau",e.SettingsAccount="settings-account",e.SettingsChooseFile="settings-choose-file",e.SettingsCoach="settings-coach",e.SettingsCourses="settings-courses",e.SettingsNotifications="settings-notifications",e.SettingsPassword="settings-password",e.SettingsPrivacy="settings-privacy",e.SettingsProfilePictureLabel="settings-profile-picture-label",e.SettingsSchools="settings-schools",e.SettingsSound="settings-sound",e.SettingsSuper="settings-super",e.ShopSection="shop-section",e.SignInJuicy="sign-in-juicy",e.SignUpButton="sign-up-button",e.SignUpLink="sign-up-link",e.SkillPath="skill-path",e.SkillPathLevel="skill-path-level",e.SkillPathLevelLockedButton="skill-path-level-locked-button",e.SkillPathState="skill-path-state",e.SkillPathTooltipUnitTest="skill-path-tooltip-unit-test",e.SkillPathUnit="skill-path-unit",e.SkillPathUnitTest="skill-path-unit-test",e.PathCompleteTrophy="path-complete-trophy",e.SocialPanelFacebook="social-panel-facebook",e.SocialPanelFindFriends="social-panel-find-friends",e.SocialPanelInviteFriends="social-panel-invite-friends",e.SoundSettings="sound-settings",e.StartBasics="start-basics",e.StartPlacement="start-placement",e.StoriesChoice="stories-choice",e.StoriesElement="stories-element",e.StoriesPlayerContinue="stories-player-continue",e.StoriesPlayerDone="stories-player-done",e.StoriesTextInput="stories-text-input",e.StoryStart="story-start",e.StoryStartButton="story-start-button",e.StoryTitle="story-title",e.StreakFreezeSlide="streak-freeze-slide",e.StreakGoalTitle="streak-goal-title",e.StreakMenu="streak-menu",e.StreakPanel="streak-panel",e.StreakSlide="streak-slide",e.StreakStat="streak-stat",e.StreakWagerSlide="streak-wager-slide",e.Submit="submit",e.SuperMenu="super-menu",e.SurveyBrain="brain",e.SurveyCulture="culture",e.SurveyFamily="family",e.SurveyFun="fun",e.SurveyOther="other",e.SurveySchool="school",e.SurveyTravel="travel",e.SurveyWork="work",e.TrialReminder="trial-reminder",e.UnitTestResultsSlide="unit-test-results-slide",e.UseAnotherAccount="use-another-account",e.UseAnotherCardRadio="use-another-card",e.UsernameInput="username-input",e.UserSearchEmptyState="user-search-empty-state",e.WordBank="word-bank"}(s||(s={}))},59815:(e,t,a)=>{"use strict";a.d(t,{$K:()=>n,Di:()=>i,Wp:()=>o,pY:()=>s,w:()=>r});class s extends Error{constructor(e){const t=new.target.prototype;super(e),Object.setPrototypeOf(this,t)}}class n extends s{constructor(){super("Aborted by user")}}class r extends s{}class i extends s{constructor(){super("Encountered stale data")}}const o=e=>"CSS_CHUNK_LOAD_FAILED"===e.code||"ChunkLoadError"===e.name},46435:(e,t,a)=>{"use strict";a.d(t,{RM:()=>h,Sg:()=>_,rn:()=>g,fv:()=>m});var s=a(80254);const n=e=>e.toString();class r{constructor(e={}){this.conditions=["control","experiment"],this.isActive=!1,this.isSticky=!1,this.urlModifier=r.URL_MODIFIERS.DEFAULT,Object.entries(e).forEach((([e,t])=>this[e]=t))}}r.URL_MODIFIERS={COURSE_ID:e=>{const t=e.pathname.split("/");return`${t[1]}_${t[2]}`},DEFAULT:n,FULL_ABSOLUTE_URL:n,LEXEME_ID:e=>e.pathname.split("/")[4],SUBDOMAIN_AND_PATHNAME:e=>`${e.hostname.split(".")[0]}-${e.pathname}`};const i=new r,o={conditions:["control","experiment"],contexts:[void 0]},l={connect_friends_quests_gifting_2:{conditions:["control","experiment","experiment_copy"],contexts:[void 0]},delight_lesson_taps_web:Object.assign(Object.assign({},o),{contexts:["view",void 0]}),ginfra_web_disable_social_registration:o,gweb_capstone_xp_boost_reward_v2:o,gweb_friends_quests_main_v2:Object.assign(Object.assign({},o),{contexts:["home","profile","quests_tab","session_end"]}),gweb_migrate_legendary_drawers:o,gweb_migrate_marketing_opt_in_drawers_v2:o,gweb_migrate_session_quit_drawers:o,gweb_mistake_progress_bar:o,gweb_redesign_onboarding_v3:o,gweb_redesign_red_dot:o,gweb_redesigned_page_footer:o,gweb_streak_nudge_session_end:o,gweb_tiered_daily_quests_v2:o,gweb_time_spent_daily_quest:o,mcoach_family_weekly_report_dev:o,mcoach_web_mistakes_list:o,minfra_web_stripe_setup_intent:o,path_web_guidebook_phrasebook_hints:o,path_web_path_change_notifications:o,path_web_sections:o,path_web_sections_overview:o,path_web_sections_v2:{conditions:["control","sections_only","sections_and_persistent"],contexts:[void 0]},spack_web_fp_init_page:o,spack_web_hearts_new_users:o,spack_web_hearts_new_users_launch:o,spack_web_immersive_super_pf:o,spack_web_purchase_flow_redesign_23Q1:o,spack_web_purchase_flow_zero_cta:o,spack_web_registration_softwall_v2:o,web_hintable_text_rewrite_v3:o},c={conditions:["control","experiment"],contexts:[null]},d={conditions:["control","experiment"],contexts:[null]},u={placeholder_experiment:c,web_login_migration_v2:c},p={placeholder_experiment:d,sfeat_web_clientside_experiment_test_fam:d,sfeat_web_clientside_experiment_test_fam_v2:c},g=s.XP(l).sort().join(","),m={placeholder_experiment:Object.assign(Object.assign({},i),{isSticky:!0,urlModifier:r.URL_MODIFIERS.SUBDOMAIN_AND_PATHNAME})},h=[...s.XP(p),...s.XP(u),...s.XP(m)].filter((e=>"placeholder_experiment"!==e)),_=h.join(",")},81149:(e,t,a)=>{"use strict";a.d(t,{LK:()=>y,Uy:()=>k,cu:()=>R,j6:()=>b,nY:()=>I,xz:()=>C});var s=a(5029),n=a(42659),r=a(77167),i=a(54412),o=a(17135),l=a(59249),c=a(46435),d=a(53229),u=a(60752),p=a(93746),g=a(39852),m=a(51158),h=a(11908),_=a(18804),v=a(79465),f=a(16086);a(20028);const S=e=>(t,...a)=>{var s;if((0,l.Au)()){const e=(0,d.vl)();if(e[t])return(0,g.qr)(e[t],t,void 0,{queryOverride:!0}),e[t];const a=null===(s=(0,h.rV)(h.Qt.DebugExperimentOverrides))||void 0===s?void 0:s[t];if(a)return(0,g.qr)(a,t,void 0,{localOverride:!0}),`${a}`}return e(t,...a)};let E={};const y=()=>{E={}},b=S(((e,t)=>{const a=`${e} ${t}`;if(a in E){const[s,n]=E[a];if((0,o.Zo)()<n)return(0,g.qr)(s,e,t,{cache:!0}),s}const s=((e,t)=>{const a=t,s=(null!==(o=null===(i=(0,_.qg)())||void 0===i?void 0:i.user.experiments)&&void 0!==o?o:{})[e];var i,o;if(!s)return"control";if(!s.eligible)return s.condition;const l=void 0!==a&&!s.contexts.includes(a);if(!s.treated||l){const t=(0,_.qg)();t&&(0,n.df)(t)?(async()=>{const t=await(0,u.b)();await t.add("submittableRequests",{request:{contexts:a?[a]:[],experimentName:e},type:"experiment-treatment"})})():r.Vi.treatUser((0,f.Jb)(),e,{contexts:a?[a]:[],treated:!0}),window.setTimeout((()=>(0,_.A5)({context:a,name:e,treated:!0,type:"UPDATE_EXPERIMENT_RECORD"})),0),(0,v.j)("treatment_record_updated",{experiment_name:e})}return s.condition})(e,t);return E[a]=[s,(0,o.Zo)()+30],(0,g.qr)(s,e,t),s})),w=e=>{const t=(0,s.sha256)(e);return parseInt(t.slice(t.length-8),16)},I=(e,t,a=[null])=>{const s=C(),n=s[e]||{condition:t,contexts:a};n.condition=t,s[e]=n,(0,h.LS)(h.Qt.LoggedOutExperiments,s)},T=(e,t,a,s=[null])=>{I(e,t,s),(0,v.j)("counterfactuals_client_treat",{condition:t,context:a,experiment_name:e,is_owner_only:void 0})},k=e=>{const t=C();delete t[e],(0,h.LS)(h.Qt.LoggedOutExperiments,t)},C=()=>(0,h.rV)(h.Qt.LoggedOutExperiments)||{},R=S(((e,t,a,s)=>{(0,f.Pc)()&&console.warn(`Logged in users should not usually be treated for logged out experiments! (${e})`);const n=C()[e],r=a[e];if(!r&&!n)return(0,g.qr)(null!=s?s:"control",e,t,{default:!0,loggedOut:!0}),null!=s?s:"control";if(r&&void 0!==r.condition)return(0,g.qr)(r.condition,e,t,{loggedOut:!0}),r.condition;if(n){const a=n.contexts;return a.includes(t)||T(e,n.condition,t,[...a,t]),(0,g.qr)(n.condition,e,t,{loggedOut:!0}),n.condition}const o=r.conditions;if(!(w(`${(0,i.ej)(i.Vj.LoggedOutUUID)}-${e}`)/2**32<r.rollout)){const a=o[0];return(0,g.qr)(a,e,t,{loggedOut:!0,notInRollout:!0}),a}const l=o[w(`${(0,i.ej)(i.Vj.LoggedOutUUID)}-${e}-condition`)%o.length];return T(e,l,t,[t]),(0,g.qr)(l,e,t,{loggedOut:!0}),l})),O={},L=(S(((e,t,a=new URL(window.location.href))=>{const s=t[e];if(!s)return(0,g.qr)("control",e,void 0,{default:!0,url:!0}),"control";const{conditions:n,rollout:r}=s,{isSticky:i,urlModifier:o}=c.fv[e],l=o(a),d=i?e:`${e}-${l}`;if(O[d])return(0,g.qr)(O[d],e,void 0,{cache:!0,url:!0}),O[d];const u=w(`${e}-${l}-rollout`)/2**32<r?n[w(`${e}-${l}`)%n.length]:n[0];return(0,f.Pc)()||(0,v.j)("url_experiment_treat",{condition:u,experiment_name:e,ui_language:(0,p.D3)(p.h9)}),O[d]=u,(0,g.qr)(u,e,void 0,{url:!0}),u})),(e,t,a,s,n=[null])=>{I(e,t,n),(0,v.j)("counterfactuals_client_treat",{condition:t,context:a,experiment_name:e,is_owner_only:!1}),(0,v.u9)("counterfactuals_client_treat",{condition:t,context:a,distinct_id:s,experiment_name:e,is_owner_only:!0,user_id:s})});S(((e,t,a,s,n,r,i)=>{const o=C()[e],l=a[e];if(void 0===n||void 0===s)return(0,m.vU)(`Users not in a family plan should not usually be treated for family plan experiments! (${e})`,{data:{experimentName:e},once:!0}),l.conditions[0];if(!l&&!o)return(0,g.qr)(null!=i?i:"control",e,t,{default:!0,loggedOut:!0,user_id:r}),null!=i?i:"control";if(l&&void 0!==l.condition)return l.condition;if(o){const a=o.contexts;return a.includes(t)||L(e,o.condition,t,n,[...a,t]),o.condition}const c=w(`${e}_${s}`)%65536;if(!(c/65536<l.rollout)){const a=l.conditions[0];return(0,g.qr)(a,e,t,{loggedOut:!0,notInRollout:!0,user_id:r}),a}const d=l.conditions[c%l.conditions.length];return L(e,d,t,n,[t]),(0,g.qr)(d,e,t,{loggedOut:!0,notInRollout:!1,user_id:r}),d}))},41679:(e,t,a)=>{"use strict";a.d(t,{E6:()=>h,Jb:()=>_,L8:()=>p,Vr:()=>E,hP:()=>g,k3:()=>S});var s=a(80254),n=a(94144),r=a(77167),i=a(70326),o=a(67899),l=a(53229),c=a(6986),d=a(79465),u=a(16086);const p=s.IH((()=>new Promise(((e,t)=>{window.fbAsyncInit=async()=>{window.FB.init({appId:"234536436609303",version:"v7.0",xfbml:!0}),window.FB.AppEvents.logPageView(),await _(),e()},(async()=>{try{await(0,l.lh)("//connect.facebook.net/en_US/sdk.js","facebook-jssdk")}catch(e){t(Error("Cannot load facebook SDK"))}})()})))),g=async()=>(await p(),(await v()).accessToken);let m=!1;const h=()=>m,_=()=>new Promise((e=>{window.FB.getLoginStatus((t=>{"connected"===t.status?(console.log("User already granted Facebook-access"),e(t.authResponse)):(console.log("User didn't grant Facebook-access yet"),e(void 0))}))})),v=async(e=[],t=!1)=>{if(m=!0,!t){const e=await _();if(e)return e}return new Promise(((t,a)=>{window.FB.login((e=>{e.authResponse?(console.log("Facebook-access granted"),t(e.authResponse)):(console.log("User closed Facebook popup or denied access"),a())}),{scope:["email",...e].join(",")})}))},f=()=>new Promise((e=>{window.FB.api("/me",{fields:"name,email,id"},e)})),S=async({allowLanguagelessUser:e=!1,dispatch:t,history:a,onLoginSuccess:s,redirectPath:l,via:p})=>{var m,h;const _=await g();try{return await(async({dispatch:e,facebookToken:t,history:a,onLoginSuccess:s,redirectPath:r})=>{await(0,i.x4)({facebookToken:t});const o=e((0,n.eY)({onUserRetrieved:e=>{(0,c.oV)("social",e)},urlForStringsReload:r}));return console.log("Logging into existing account"),await o,s?s():a.push(r),!0})({dispatch:t,facebookToken:_,history:a,onLoginSuccess:s,redirectPath:l})}catch(a){if(!(0,r.IZ)(a)||401!==(null===(m=a.response)||void 0===m?void 0:m.status)&&403!==(null===(h=a.response)||void 0===h?void 0:h.status))throw a;if((0,u.Pc)()){const e=await f();await t((0,n.DZ)({email:e.email,facebookToken:_,name:e.name})),await t((0,n.eY)()),(0,d.j)("register",{successful:!0,through:"facebook",via:p}),(0,o.SX)({event:"sign_up"})}else if(e){const e=await f();await(0,i.$C)({email:e.email,name:e.name}),await t((0,n.eY)()),(0,d.j)("register",{successful:!0,through:"facebook",via:p}),(0,o.SX)({event:"sign_up"})}return!1}},E=async e=>{await p();const t=(await v(["user_friends"])).userID,a=(await new Promise((e=>{window.FB.api("/me/friends",{fields:"id,installed,name,picture",limit:"500"},e)}))).data||[],n=await r.i_.facebookToDuolingo(t,s.jg(a,"id")),i=a.filter((e=>e.id in n)).map((e=>({contextString:`@${n[e.id].username}`,id:n[e.id].id,isFollowing:n[e.id].isFollowing,name:e.name,picture:e.picture.data.is_silhouette?`${n[e.id].picture}/medium`:e.picture.data.url,username:n[e.id].username}))).filter((t=>(e&&!t.isFollowing||!e)&&t.username));return s.MR(i,(e=>e.name))}},94171:(e,t,a)=>{"use strict";a.d(t,{Nh:()=>A,wS:()=>N,Dw:()=>H,py:()=>x,PD:()=>M,xH:()=>F,Mb:()=>P,RL:()=>R,rl:()=>O,fw:()=>U,N7:()=>L,ed:()=>$,ET:()=>j,Ck:()=>Z,qh:()=>Q,WV:()=>W,Fy:()=>q,_Q:()=>G,ML:()=>B,qt:()=>Y,Vz:()=>z,JD:()=>V});const s=a.p+"images/goals/7170947038eaa6cba13c7ee7d6c14e35.svg",n=a.p+"images/goals/b5dc107d1cf9cea867391174a8f3185b.svg",r=a.p+"images/goals/2f657380071df22fcb537fd294a42ae7.svg",i=a.p+"images/goals/645d8ee266b41bb009986bcf057bdddd.svg",o=a.p+"images/goals/d50a64c07d6a558abecc5eaf8481cd80.svg";var l=a(20770);const c=a.p+"images/goals/f874b6952352c8466b192d0a0d6ddc28.svg",d=a.p+"images/goals/daa802c6eebc41858b704ee001d05f0c.svg",u=a.p+"images/goals/5ac5f9a9c076d81536ee0f85ac88e4c2.svg",p=a.p+"images/goals/d8e2b76c5f925390f22c39c17f752e84.svg",g=a.p+"images/goals/b39589bb4696d406be1ec194e3550d29.svg",m=a.p+"images/goals/81ee0dbf33ffd889da4f899c2ec6f36b.svg",h=a.p+"images/goals/a9dcc1aaf98e3e6a030e243415a28850.svg",_=a.p+"images/goals/e0d5a67550d87239e9b604e7ba9603b6.svg",v=a.p+"images/goals/00b59b3190fddbc40ae4eb1a1b81765f.svg",f=a.p+"images/goals/6c46b3c45da29cd15b5c797f908e07d3.svg",S=a.p+"images/goals/59de0be96dd57b30e3e44f9e1396827e.svg",E=a.p+"images/goals/dd8f074a2a72986c2c0b115623c6dc57.svg";var y=a(17135),b=a(59249),w=a(81149),I=a(68903),T=a(8654),k=a(55829),C=a(81621);const R=216e5,O=216e6,L=["hiFlex","hiDreamTeam","hiHighFive","hiAllStar"],P=["nudgeFlex","nudgeClaws","nudgeHighFive","nudgeSadDuo"],A=30,N="friends_quest_complete",D="FRIENDS_QUESTS",x=20,M=1,F="xp_boost_15_gift",U=2,H={avatarUrl:C.tU,displayName:"Sample User",historicalStats:[{goalCategory:"FRIENDS_QUEST",streak:2}],progressIncrements:[100,0,0,0,0],userId:0},j=()=>{const e=(0,b.ky)("debugFriendsQuestState");if(e&&Object.values(k.S).some((t=>t===e)))return{friendProgress:H,goalId:"sample_xp_goal",metric:"XP",ownProgress:150,questId:"sample_xp_quest",questPoints:5,status:e,threshold:500,totalProgress:250,winStreak:1}},G=e=>(0,y.oE)({currentTime:e,targetHour:17,targetWeekday:0}),B=e=>(0,y.oE)({currentTime:e,targetHour:17,targetWeekday:2}),V=e=>G(e)<B(e),z=(e,t)=>void 0!==t&&V(e)&&t.totalProgress<t.threshold,Z=(e,t)=>void 0!==e?"control"===(0,w.j6)("gweb_friends_quests_main_v2","quests_tab")?"none":e.totalProgress>=e.threshold||e.status===k.S.FINISHED?"belowDailyQuest":"aboveDailyQuest":0!==t&&"experiment"===(0,w.j6)("gweb_friends_quests_main_v2","quests_tab")?"belowDailyQuest":"none",$=e=>{var t;return null===(t=null==e?void 0:e.quests)||void 0===t?void 0:t.find((e=>e.goalCategory===D&&[k.S.ACTIVE,k.S.FINISHED].includes(e.questState)))},q=e=>{var t,a;return null!==(a=null===(t=e.find((e=>e.goalCategory===D)))||void 0===t?void 0:t.streak)&&void 0!==a?a:0},W=(e,t)=>{switch(e){case"LESSONS":return(0,T._i)(30518,{threshold:t});case"NINETY_ACCURACY_LESSONS":return(0,T._i)(35010,{threshold:t});case"PERFECT_LESSONS":return(0,T._i)(35007,{threshold:t});case"XP":return(0,T._i)(35008,{threshold:t});default:throw(0,I.RJ)(e),Error("Unsupported friends quest metric")}},Q=(e,t)=>{switch(e){case"LESSONS":case"NINETY_ACCURACY_LESSONS":return(0,T._i)(35909,{num:t});case"PERFECT_LESSONS":return(0,T._i)(35759,{num:t});case"XP":return(0,T._i)(28544,{num:t});default:throw(0,I.RJ)(e),Error("Unsupported friends quest metric")}},Y=({isActive:e=!0,isDark:t=!1,nudgeType:a})=>{switch(a){case"hiAllStar":return e?u:t?c:d;case"hiDreamTeam":return e?m:t?p:g;case"hiFlex":case"nudgeFlex":return e?r:t?s:n;case"hiHighFive":case"nudgeHighFive":return e?l:t?i:o;case"nudgeClaws":return e?v:t?h:_;case"nudgeSadDuo":return e?E:t?f:S;default:return(0,I.RJ)(a),""}}},94358:(e,t,a)=>{"use strict";a.d(t,{IM:()=>d,JI:()=>l,sT:()=>u});var s=a(41461),n=a(93746),r=a(79465);let i,o=!1,l=!1;const c=new Promise((e=>{i=e}));window._fs_ready=()=>i();const d=async e=>{s.S1({debug:!1,devMode:!1,orgId:"QZHJ3"}),o=!0,s.yV(`${e}`,{ui_language_str:n.h9}),s.ur(),l=!0,await c;const t=s.Hr();t&&(0,r.j)("fullstory_record_start",{url:t})},u=()=>{o&&(s.IG(),l=!1)}},74311:(e,t,a)=>{"use strict";a.d(t,{bf:()=>I,xD:()=>T,Ch:()=>A,Oj:()=>k,oh:()=>C,VR:()=>Z,gl:()=>D,wn:()=>B,wh:()=>M,ng:()=>N,uT:()=>F,FF:()=>R,cV:()=>W,Ul:()=>Q,Oy:()=>Y,wU:()=>G,iL:()=>$,n0:()=>O,ie:()=>x,B_:()=>J,i3:()=>j});var s=a(80254),n=a(73520);const r=a.p+"images/goals/39f13d2de304cad2ac2f88b31a7e2ff4.svg",i=a.p+"images/goals/2b5a211d830a24fab92e291d50f65d1d.svg",o=a.p+"images/goals/1cadcf84c054b52aa7eaaa794a7d64bf.svg",l=a.p+"images/goals/a0cb3348a6747c752f7c8270b0af0b69.svg",c=a.p+"images/goals/974e284761265b0eb6c9fd85243c5c4b.svg",d=a.p+"images/goals/b519a0beabb2deedd5767f987e3f0a74.svg",u=a.p+"images/goals/62bb241121ae018b28240eebffb9fc4a.svg";var p=a(17135),g=a(59249),m=a(81149),h=a(68903),_=a(8654),v=a(23275),f=a(51158),S=a(89260),E=a(79465),y=a(81621),b=a(97106);const w=["XP","LESSONS","NINETY_ACCURACY_LESSONS","PERFECT_LESSONS","QUESTS","EIGHTY_ACCURACY_LESSONS","COMBO_XP","FIVE_CORRECT_IN_A_ROW","TEN_CORRECT_IN_A_ROW","SPEAK_CHALLENGES","LISTEN_CHALLENGES","EXTEND_STREAK","START_STREAK","SECONDS_SPENT_LEARNING"],I=["DAILY_QUEST_FIRST","DAILY_QUEST_SECOND","DAILY_QUEST_THIRD"],T=["DAILY","CORE","HARD"],k=(e,t)=>{const a={metricUpdates:[]};return w.forEach((s=>{const n=((e,t,a)=>{const s=e.challenges.filter((e=>!e.skipped)),n=(r=s).reduce(((e,t)=>e+(t.correct?1:0)),0)/r.length*100;var r;switch(t){case"XP":case"QUESTS":return;case"LESSONS":return{metric:t,quantity:1};case"NINETY_ACCURACY_LESSONS":return n>=90?{metric:t,quantity:1}:void 0;case"EIGHTY_ACCURACY_LESSONS":return n>=80?{metric:t,quantity:1}:void 0;case"PERFECT_LESSONS":return n>=100?{metric:t,quantity:1}:void 0;case"COMBO_XP":return e.maxInLessonStreak?{metric:t,quantity:(0,b.CT)(e.challenges.length,e.maxInLessonStreak)}:void 0;case"FIVE_CORRECT_IN_A_ROW":return e.maxInLessonStreak&&e.maxInLessonStreak>=5?{metric:t,quantity:1}:void 0;case"TEN_CORRECT_IN_A_ROW":return e.maxInLessonStreak&&e.maxInLessonStreak>=10?{metric:t,quantity:1}:void 0;case"SPEAK_CHALLENGES":{const e=(0,S.bc)();return{metric:t,quantity:s.filter((t=>e.includes(t.type)&&t.correct)).length}}case"LISTEN_CHALLENGES":{const e=(0,S.tq)();return{metric:t,quantity:s.filter((t=>e.includes(t.type)&&t.correct)).length}}case"EXTEND_STREAK":return a.streakExtended?{metric:t,quantity:1}:void 0;case"START_STREAK":return a.streakStarted?{metric:t,quantity:1}:void 0;case"SECONDS_SPENT_LEARNING":return a.timeSpent?{metric:t,quantity:a.timeSpent}:void 0;default:return void(0,h.RJ)(t)}})(e,s,t);n&&a.metricUpdates.push(n)})),a},C=(e,t)=>{const a={metricUpdates:[]},s=e.score/e.maxScore*100;return a.metricUpdates=w.map((e=>{switch(e){case"LESSONS":return{metric:e,quantity:1};case"EIGHTY_ACCURACY_LESSONS":return{metric:e,quantity:s>=80?1:0};case"NINETY_ACCURACY_LESSONS":return{metric:e,quantity:s>=90?1:0};case"PERFECT_LESSONS":return{metric:e,quantity:s>=100?1:0};case"EXTEND_STREAK":return t.streakExtended?{metric:e,quantity:1}:void 0;case"START_STREAK":return t.streakStarted?{metric:e,quantity:1}:void 0;case"SECONDS_SPENT_LEARNING":return t.timeSpent?{metric:e,quantity:t.timeSpent}:void 0;case"XP":case"QUESTS":case"COMBO_XP":case"FIVE_CORRECT_IN_A_ROW":case"TEN_CORRECT_IN_A_ROW":case"SPEAK_CHALLENGES":case"LISTEN_CHALLENGES":return;default:return void(0,h.RJ)(e)}})).filter(h.$K),a},R=e=>{if(void 0!==e.period.oneOff){const t=(0,p.Ux)(),a=(0,p.$$)(e.period.oneOff.start.year,e.period.oneOff.start.month-1,e.period.oneOff.start.day),s=(0,p.$$)(e.period.oneOff.end.year,e.period.oneOff.end.month-1,e.period.oneOff.end.day);if(a<=t&&s>t)return!0}else if(e.period.recurring){const t=(0,p.Ux)(),a=(0,p.$$)(e.period.recurring.start.year,e.period.recurring.start.month-1,e.period.recurring.start.day),s=(0,p.$$)(e.period.recurring.until.year,e.period.recurring.until.month-1,e.period.recurring.until.day);if(a<=t&&s>t)return!0}return!1},O=(e,{includeListening:t,includeSpeaking:a,path:s})=>{switch(e.metric){case"XP":case"LESSONS":case"PERFECT_LESSONS":case"NINETY_ACCURACY_LESSONS":case"EIGHTY_ACCURACY_LESSONS":case"COMBO_XP":case"FIVE_CORRECT_IN_A_ROW":case"TEN_CORRECT_IN_A_ROW":case"SECONDS_SPENT_LEARNING":return!0;case"SPEAK_CHALLENGES":return a&&void 0!==s&&(0,v.U8)({path:s})>0;case"LISTEN_CHALLENGES":return t;case"QUESTS":case"EXTEND_STREAK":case"START_STREAK":return!1;default:return(0,h.RJ)(e.metric),!1}},L=e=>e[Math.floor(Math.random()*e.length)].goalId,P=e=>{switch(e){case"time_spent_core_daily_quest":case"time_spent_hard_daily_quest":return"experiment"===(0,m.j6)("gweb_time_spent_daily_quest",void 0);default:return!0}},A=({assignedQuestGoalIds:e,questEligibilityParams:t,schema:a,slotType:s})=>{const n=(({assignedQuestGoalIds:e,questEligibilityParams:t,schema:a,slotType:s})=>{const n=e.flatMap((e=>U(e)));return a.filter((a=>"DAILY_QUESTS"===a.category&&O(a,t)&&R(a)&&!e.some((e=>a.goalId===e))&&!n.some((e=>e===a.goalId))&&H(s).some((e=>e===a.goalId))))})({assignedQuestGoalIds:e,questEligibilityParams:t,schema:a,slotType:s});if(0===n.length)return void(0,f.Kp)(`No eligible quests found for slot type ${s}`);if((0,g.gQ)("debugChooseSpecificDailyQuest")){const e=(0,g.ky)("debugChooseSpecificDailyQuest");if(n.some((t=>t.goalId===e)))return e}let r=L(n);for(;!P(r);)r=L(n);return r},N=(e,t)=>{var a,s;return null!==(s=null===(a=t.difficultyTiers)||void 0===a?void 0:a[e].tiers[0])&&void 0!==s?s:t.threshold},D=({availableQuests:e,oldProgress:t,difficulty:a,updatedProgress:s})=>{const{newlyCompletedQuests:n,totalCompletedQuests:r}=B({difficulty:a,oldProgress:t,progress:s,quests:e}),i={availableQuests:e,difficulty:a,oldProgress:t};return n>0?Object.assign(Object.assign({},i),{numQuestsCompleted:r,type:"dailyQuestComplete"}):e.some((e=>{var n,r;const i=N(a,e);return x(e.goalId,null!==(n=s[e.goalId])&&void 0!==n?n:0)>=i/2&&x(e.goalId,null!==(r=t[e.goalId])&&void 0!==r?r:0)<i/2}))?Object.assign(Object.assign({},i),{numQuestsCompleted:0,type:"dailyQuestHalfway"}):e.every((e=>{var a;return 0===x(e.goalId,null!==(a=t[e.goalId])&&void 0!==a?a:0)}))&&e.some((e=>{var t;return x(e.goalId,null!==(t=s[e.goalId])&&void 0!==t?t:0)>0}))?Object.assign(Object.assign({},i),{numQuestsCompleted:0,type:"dailyQuestFirst"}):void 0},x=(e,t)=>["time_spent_core_daily_quest","time_spent_hard_daily_quest"].includes(e)?Math.floor(t/60):t,M=e=>{switch(e){case"XP":case"COMBO_XP":return i;case"LESSONS":return o;case"FIVE_CORRECT_IN_A_ROW":case"TEN_CORRECT_IN_A_ROW":return c;case"PERFECT_LESSONS":case"NINETY_ACCURACY_LESSONS":case"EIGHTY_ACCURACY_LESSONS":return r;case"SPEAK_CHALLENGES":return d;case"LISTEN_CHALLENGES":return l;case"SECONDS_SPENT_LEARNING":return u;case"QUESTS":case"EXTEND_STREAK":case"START_STREAK":return;default:return(0,h.RJ)(e)}},F=(e,t)=>{switch(e.metric){case"XP":return(0,_._i)(35008,{threshold:t});case"LESSONS":return(0,_._i)(30518,{threshold:t});case"PERFECT_LESSONS":return(0,_._i)(35007,{threshold:t});case"NINETY_ACCURACY_LESSONS":return(0,_._i)(35010,{threshold:t});case"EIGHTY_ACCURACY_LESSONS":return(0,_._i)(38216,{num:t,threshold:t});case"COMBO_XP":return(0,_._i)(38217,{num:t,threshold:t});case"FIVE_CORRECT_IN_A_ROW":return(0,_._i)(38218,{num:t,threshold:t});case"TEN_CORRECT_IN_A_ROW":return(0,_._i)(38305,{num:t,threshold:t});case"SPEAK_CHALLENGES":return(0,_._i)(30522,{threshold:t});case"LISTEN_CHALLENGES":return(0,_._i)(30521,{threshold:t});case"SECONDS_SPENT_LEARNING":return(0,_._i)(39357,{num:Math.floor(t/60)});case"QUESTS":case"EXTEND_STREAK":case"START_STREAK":return;default:return void(0,f.vU)("Unsupported quest metric",{data:{metric:(0,h.RJ)(e.metric)},once:!0})}},U=e=>{switch(e){case"daily_goal_daily_quest":case"speak_challenges_hard_daily_quest":case"listen_challenges_hard_daily_quest":return[e];case"perfect_lessons_core_daily_quest":case"perfect_lessons_hard_daily_quest":case"ninety_accuracy_lessons_core_daily_quest":case"ninety_accuracy_lessons_hard_daily_quest":case"eighty_accuracy_lessons_core_daily_quest":case"eighty_accuracy_lessons_hard_daily_quest":return["perfect_lessons_core_daily_quest","perfect_lessons_hard_daily_quest","ninety_accuracy_lessons_core_daily_quest","ninety_accuracy_lessons_hard_daily_quest","eighty_accuracy_lessons_core_daily_quest","eighty_accuracy_lessons_hard_daily_quest"];case"combo_xp_core_daily_quest":case"combo_xp_hard_daily_quest":case"five_in_a_row_core_daily_quest":case"five_in_a_row_hard_daily_quest":case"ten_in_a_row_hard_daily_quest":return["combo_xp_core_daily_quest","combo_xp_hard_daily_quest","five_in_a_row_core_daily_quest","five_in_a_row_hard_daily_quest","ten_in_a_row_hard_daily_quest"];case"time_spent_core_daily_quest":case"time_spent_hard_daily_quest":return["time_spent_core_daily_quest","time_spent_hard_daily_quest"];default:return(0,f.vU)("Unsupported quest",{data:{goalId:(0,h.RJ)(e)},once:!0}),[]}},H=e=>{switch(e){case"DAILY":return["daily_goal_daily_quest"];case"CORE":return["perfect_lessons_core_daily_quest","ninety_accuracy_lessons_core_daily_quest","eighty_accuracy_lessons_core_daily_quest","combo_xp_core_daily_quest","five_in_a_row_core_daily_quest","time_spent_core_daily_quest"];case"HARD":return["perfect_lessons_hard_daily_quest","ninety_accuracy_lessons_hard_daily_quest","eighty_accuracy_lessons_hard_daily_quest","combo_xp_hard_daily_quest","five_in_a_row_hard_daily_quest","ten_in_a_row_hard_daily_quest","speak_challenges_hard_daily_quest","listen_challenges_hard_daily_quest","time_spent_hard_daily_quest"];default:return(0,f.vU)("Unsupported daily quest slot type",{data:{slotType:(0,h.RJ)(e)},once:!0}),[]}},j=({difficulty:e,progress:t,oldProgress:a,quests:s})=>{s.forEach((s=>{var n;const r=N(e,s);void 0!==t&&void 0!==a&&(null!==(n=t[s.goalId])&&void 0!==n?n:0)>=r&&a[s.goalId]<r&&(0,E.j)("daily_quest_completed",{daily_quest_difficulty:e,daily_quest_name:s.goalId})}))},G=({difficulty:e,oldProgress:t,progress:a,quest:s})=>{var n;const r=N(e,s);return void 0!==a&&void 0!==t&&(null!==(n=a[s.goalId])&&void 0!==n?n:0)>=r&&t[s.goalId]<r},B=({difficulty:e,progress:t,oldProgress:a,quests:s})=>s.reduce(((s,n)=>{var r,i,o;const l=N(e,n);return{newlyCompletedQuests:void 0!==t&&void 0!==a&&(null!==(r=t[n.goalId])&&void 0!==r?r:0)>=l&&a[n.goalId]<l?s.newlyCompletedQuests+1:s.newlyCompletedQuests,totalCompletedQuests:(null!==(i=null==t?void 0:t[n.goalId])&&void 0!==i?i:0)>=l||(null!==(o=null==a?void 0:a[n.goalId])&&void 0!==o?o:0)>=l?s.totalCompletedQuests+1:s.totalCompletedQuests}}),{newlyCompletedQuests:0,totalCompletedQuests:0}),V=(e,t)=>t?e[t.goalId].metric:void 0,z=(e,t)=>e[t].quantity,Z=(e,t)=>{const{dailyQuest:a,coreQuest:s,hardQuest:n}=e;return($(t)?[a,s,n]:[a]).filter(h.$K)},$=e=>{const t=(0,y.i5)(e),a=(0,y.i5)(e)<30;if((0,g.ky)("debugAllDailyQuestsUnlocked")||!a&&!(0,y.EO)(e))return!0;const s=(0,y.pu)(e);return a?t>=6:s>=4},q=e=>(0,p.zM)(e).getUTCMonth()===(0,p.Ux)().getMonth()&&(0,p.Ij)(e)<4,W=e=>{if(!(0,y.EO)(e))return!1;const t=s.VO(e.xpSummaries).filter((e=>void 0!==e&&e.gainedXp>0)).sort(((e,t)=>t.date-e.date));if(t.length<6)return!0;const a=t[5].date;return q(a)},Q=e=>{if((0,y.i5)(e)>=30)return!1;if((0,y.i5)(e)<7)return!0;const t=(0,p.v4)((0,p.zM)(e.lastResurrectionTimestamp),6),a=s.VO(e.xpSummaries).filter((e=>void 0!==e&&e.date>=t&&e.gainedXp>0)).sort(((e,t)=>e.date-t.date));if(a.length<2)return!0;const n=a[1].date;return q(n)},Y=e=>!W(e)&&!Q(e),J=e=>(t,a)=>{const{dailyQuest:r,coreQuest:i,hardQuest:o}=(0,n.oV)(a()),l=(0,n.xm)(a()),c=(({currentProgress:e,dailyQuest:t,coreQuest:a,hardQuest:n,metricUpdatesWithXp:r,schema:i})=>{var o,l,c;const d={},u=s.HK(r,"metric"),p=V(i,t),g=V(i,a),m=V(i,n);return t&&p&&u[p]&&(d[t.goalId]=z(u,p)+(null!==(o=null==e?void 0:e[t.goalId])&&void 0!==o?o:0)),a&&g&&u[g]&&(d[a.goalId]=z(u,g)+(null!==(l=null==e?void 0:e[a.goalId])&&void 0!==l?l:0)),n&&m&&u[m]&&(d[n.goalId]=z(u,m)+(null!==(c=null==e?void 0:e[n.goalId])&&void 0!==c?c:0)),d})({coreQuest:i,currentProgress:(0,n.EL)(a()),dailyQuest:r,hardQuest:o,metricUpdatesWithXp:e.metricUpdates,schema:l});t({payload:{timestamp:Date.now(),updates:c},type:"SET_GOALS_PROGRESS_UPDATE"})}},8649:(e,t,a)=>{"use strict";a.d(t,{d:()=>l,m:()=>o});var s=a(80254),n=a(53229),r=a(51158);const i="onGoogleLibraryLoad";let o=!1;const l=s.IH((()=>new Promise(((e,t)=>{window[i]=()=>{try{window.google.accounts.id.initialize({callback:({credential:t})=>{e(t)},client_id:"450298686065.apps.googleusercontent.com"}),o=!0}catch(e){t(Error("Cannot initialize google sign in SDK"))}},(async()=>{try{await(0,n.lh)("https://accounts.google.com/gsi/client",i)}catch(e){(0,r.Kp)("Cannot load google sign in SDK"),t()}})()}))))},67574:(e,t,a)=>{"use strict";a.d(t,{F:()=>p});var s=a(80231),n=a(94144),r=a(77167),i=a(70326),o=a(8649),l=a(67899),c=a(6986),d=a(79465),u=a(16086);const p=async({allowLanguagelessUser:e=!1,dispatch:t,history:a,onLoginSuccess:p,redirectPath:g,setSubmitting:m,via:h})=>{var _,v;const f=await(0,o.d)();m&&m();try{return await(async({dispatch:e,googleIdToken:t,history:a,redirectPath:s,onLoginSuccess:r})=>{await(0,i.x4)({googleIdToken:t});const o=e((0,n.eY)({onUserRetrieved:e=>{(0,c.oV)("social",e)},urlForStringsReload:s}));return console.log("Logging into existing account"),await o,r?r():a.push(s),!0})({dispatch:t,googleIdToken:f,history:a,onLoginSuccess:p,redirectPath:g})}catch(a){if(!(0,r.IZ)(a)||401!==(null===(_=a.response)||void 0===_?void 0:_.status)&&403!==(null===(v=a.response)||void 0===v?void 0:v.status))throw a;const o=(S=f,JSON.parse(s.DS.decode(S.split(".")[1])));return(0,u.Pc)()?(await t((0,n.DZ)({email:o.email,googleIdToken:f,name:o.name})),await t((0,n.eY)()),(0,d.j)("register",{successful:!0,through:"google",via:h}),(0,l.SX)({event:"sign_up"})):e&&(await(0,i.$C)({email:o.email,googleIdToken:f,name:o.name}),await t((0,n.eY)()),(0,d.j)("register",{successful:!0,through:"google",via:h}),(0,l.SX)({event:"sign_up"})),!1}var S}},67899:(e,t,a)=>{"use strict";a.d(t,{KU:()=>l,Nf:()=>d,SX:()=>r,dl:()=>u,zu:()=>p});var s=a(80254),n=a(53229);window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"gtm.js","gtm.start":Date.now()}),window.dataLayer.push({cookie_domain:window.location.hostname});const r=e=>{window.dataLayer.push(e)},i=window.setInterval((()=>{var e;const t=window;if(!(null===(e=t.ga)||void 0===e?void 0:e.getAll))return;const[a]=t.ga.getAll().filter((e=>"UA-21595814-1"===e.get("trackingId")));a&&(window.clearInterval(i),new t.gaplugins.UrlChangeTracker(a))}),200),o=["card_entry_accept","card_entry_reject","plus_landing_page_load","premium_ad_click","premium_ad_dismiss","premium_ad_show","premium_purchase_cancel","premium_purchase_failure","premium_purchase_page_dismiss","premium_purchase_page_show","premium_purchase_start","premium_purchase_success","premium_trial_offer_click","premium_trial_offer_dismiss","premium_trial_offer_show","registration_load","sign_in_load","web_to_app_store_tap"],l=(e,t)=>{if(!o.includes(e))return;const a=s.ei(t,["free_trial_period","iap_context","subscription_tier"]);r(Object.assign(Object.assign({},a),{event:e}))};let c;const d=()=>c,u=async()=>{try{await(0,n.lh)("https://www.googletagmanager.com/gtm.js?id=GTM-TX6Z97C"),c=!!window.google_tag_manager}catch(e){c=!1}},p="gtm-attribution-link"},33037:(e,t,a)=>{"use strict";a.d(t,{EZ:()=>E,LN:()=>_,tx:()=>f,wM:()=>S,zn:()=>v});var s=a(56043),n=a(77167),r=a(83719),i=a(78939),o=a(37590),l=a(68903),c=a(8654),d=a(93746),u=a(43006),p=a(79465),g=a(11811);const m={[r.Oj.Accent]:18634,[r.Oj.ExtraSpace]:4476,[r.Oj.MissingSpace]:18757,[r.Oj.MissingWord]:8435,[r.Oj.Typo]:4081,[r.Oj.WrongWord]:576},h=e=>{if(m[e])return(0,c.H8)(m[e])},_=e=>{switch(e.type){case g.Sm.Assist:{const{correctIndex:t,options:a}=e;return[a[t].text]}case g.Sm.CharacterIntro:{const{choices:t,correctIndex:a}=e;return[t[a]]}case g.Sm.CharacterPuzzle:return[e.correctSolutions[0]];case g.Sm.CharacterTrace:return[e.prompt];case g.Sm.CharacterMatch:case g.Sm.FreeResponse:case g.Sm.ListenMatch:case g.Sm.Match:return[];case g.Sm.CharacterSelect:{const{choices:t,correctIndex:a}=e;return[t[a].character]}case g.Sm.CompleteReverseTranslation:{const{displayTokens:t}=e;return[t.map((e=>e.text)).join("")]}case g.Sm.Definition:{const{choices:t,correctIndex:a}=e;return[t[a]]}case g.Sm.Dialogue:{const{choices:t,correctIndex:a}=e;return[t[a]]}case g.Sm.Form:{const{options:t,correctIndex:a}=e;return[t[a].text]}case g.Sm.GapFill:{const{choices:t,correctIndex:a}=e;return[t[a]]}case g.Sm.Judge:{const{choices:t,correctIndices:a}=e;return a.map((e=>t[e]))}case g.Sm.Listen:case g.Sm.ListenComplete:return[e.prompt];case g.Sm.ListenComprehension:{const{choices:t,correctIndex:a}=e;return[t[a]]}case g.Sm.ListenIsolation:{const{tokens:t}=e;return[t.map((e=>e.value)).join("")]}case g.Sm.ListenSpeak:case g.Sm.ListenTap:return[e.prompt];case g.Sm.Name:return e.correctSolutions;case g.Sm.PartialListen:case g.Sm.PartialReverseTranslate:return[e.displayTokens.map((e=>e.text)).join("")];case g.Sm.PatternTapComplete:return[e.choices[e.correctIndex]];case g.Sm.ReadComprehension:{const{choices:t,correctIndex:a}=e;return[t[a]]}case g.Sm.Select:{const{choices:t,correctIndex:a}=e;return[t[a].phrase]}case g.Sm.SelectPronunciation:case g.Sm.SelectTranscription:{const{choices:t,correctIndex:a}=e;return[t[a].text]}case g.Sm.SyllableListenTap:return[e.correctIndices.map((t=>e.choices[t].text)).join("")];case g.Sm.SyllableTap:return e.correctSolutions;case g.Sm.Speak:return[e.prompt];case g.Sm.TapCloze:case g.Sm.TapClozeTable:return[(0,o.Ub)(e).join("")];case g.Sm.TapComplete:{const{displayTokens:t}=e;return[t.map((e=>e.text)).join("")]}case g.Sm.TapCompleteTable:return[(0,o.Ub)(e).join("")];case g.Sm.TapDescribe:case g.Sm.Translate:case g.Sm.Transliterate:return e.correctSolutions;case g.Sm.TypeCloze:case g.Sm.TypeClozeTable:case g.Sm.TypeCompleteTable:return[(0,o.Ub)(e).join("")];case g.Sm.WriteComprehension:return[e.exampleSolution];default:throw(0,l.RJ)(e),Error(`Unexpected challenge type: ${e.type}`)}},v=e=>{var t,a,s,n;switch(e.type){case g.Sm.ListenTap:return e.promptTransliteration;case g.Sm.Select:return e.choices[e.correctIndex].phraseTransliteration;case g.Sm.Translate:return null===(t=e.correctSolutionTransliterations)||void 0===t?void 0:t[0];case g.Sm.CharacterIntro:return null===(a=e.choiceTransliterations)||void 0===a?void 0:a[e.correctIndex];case g.Sm.Form:return e.options[e.correctIndex].textTransliteration;case g.Sm.Judge:return null===(s=e.choiceTransliterations)||void 0===s?void 0:s[e.correctIndices[0]];case g.Sm.SyllableListenTap:return e.promptTransliteration;case g.Sm.SyllableTap:return null===(n=e.correctSolutionTransliterations)||void 0===n?void 0:n[0];default:return}},f=(e,t,a,s)=>e&&a&&s.length&&!s.includes(a)&&(0,u.Dg)(t)!==(0,u.Dg)(s[0]),S=async({challenge:e,guess:t,isTypingInLearningLanguage:a,allowTypoBlame:n})=>{var r;const o=Date.now(),l=null===(r=e.grader)||void 0===r?void 0:r.language,c=await(0,i.C3)(l),d=!!e.smartTipsGraderV2,u=(0,i.YK)({accentedCharacterMap:c.accentedCharacterMap,allowTypoBlame:n,compiledNormalizationData:c.normalizationData,gradingData:d?e.smartTipsGraderV2:e.grader,isTypingInLearningLanguage:a,submittedValue:t}),{blameType:p,closestSolution:m,correct:v,gradingMetadata:f,highlights:S}=u;let E;if(!1!==e.grader.whitespaceDelimited&&(e.type===g.Sm.Translate||e.type===g.Sm.PartialReverseTranslate)){const a=(0,s.SK)(_(e)[0],t,.5);E=a?[a]:void 0}return y(e,v,o,d),{blameMessage:p?h(p):void 0,blameType:p,closestSolution:m,correct:v,gradingMetadata:f,guess:t,highlights:S,mistakesRecyclingHighlights:E}},E=async e=>{console.log("Attempting server grade");const t=await n.Vi.challengeGrade(e);return Object.assign(Object.assign({},t),{blameMessage:t.blameType?h(t.blameType):void 0})},y=async(e,t,a,s)=>{Math.random()>.001||await(0,p.j)("challenge_grade",{challenge_type:e.type,correct:t,from_language:d.h9,grading_method:s?"client_library_smart_tips":"client_library",sampling_rate:.001,target_language:e.grader.language,time_spent_grading:Date.now()-a})}},37590:(e,t,a)=>{"use strict";a.d(t,{JH:()=>p,Ub:()=>u,Xh:()=>c,ao:()=>d,jL:()=>l,tl:()=>m,x6:()=>o});var s=a(68903),n=a(51158),r=a(43006),i=a(11811);const o=(e,t,a=(({},{},e)=>e.text))=>g(e,a).slice(t?1:0).flatMap((e=>[", ",...e.flatMap((e=>[" ",e])).slice(1)])).slice(1),l=e=>e.flatMap(((e,t)=>void 0===e.damageStart?[]:{index:t})),c=e=>e.flatMap(((e,t)=>e.flatMap(((e,a)=>e.filter((e=>"isBlank"in e&&e.isBlank||"damageStart"in e)).length?[{colIndex:a,rowIndex:t}]:[])))),d=e=>{const t=c(e)[0];return{colIndex:t.colIndex,rowIndex:t.rowIndex}},u=e=>{switch(e.type){case i.Sm.TapCloze:case i.Sm.TypeCloze:return e.displayTokens.map((e=>e.text));case i.Sm.TapClozeTable:case i.Sm.TypeClozeTable:case i.Sm.TapCompleteTable:case i.Sm.TypeCompleteTable:{const{displayTableTokens:t,headers:a}=e;return o(t,a)}default:throw(0,s.RJ)(e),Error(`Tried to call getGrammarChallengeCorrectTexts on an unsupported challenge type: ${e.type}`)}},p=e=>{switch(e.type){case i.Sm.TapCloze:case i.Sm.TypeCloze:return e.displayTokens.map((e=>void 0===e.damageStart?e.text:`${e.text.slice(0,e.damageStart)}${r.qv}`)).join("");case i.Sm.TapClozeTable:case i.Sm.TypeClozeTable:case i.Sm.TapCompleteTable:case i.Sm.TypeCompleteTable:{const{displayTableTokens:t,headers:a}=e;return o(t,a).join("")}default:throw(0,s.RJ)(e),Error(`Tried to call getGrammarChallengePrompt on an unsupported challenge type: ${e.type}`)}},g=(e,t=(({},{},e)=>e.text))=>e.map(((e,a)=>e.map(((e,s)=>e.map((e=>t(s,a,e))).join(""))))),m=(e,t,a)=>e.map(((s,r)=>s.map(((s,i)=>s.map(((s,o)=>{let l;try{l=t[r][i][o]}catch(t){(0,n.vU)("No matching token found for display token in table challenge",{data:{displayTableTokens:e}})}return a({colIndex:i,rowIndex:r},s,l,o)}))))))},15670:(e,t,a)=>{"use strict";a.d(t,{e:()=>o});var s=a(50498),n=a(79465);let r=!1;const i=e=>new Promise((t=>{var a,s;r||(r=!0,window.grecaptcha?(0,n.j)("abuse_req_cls_init_success",{}):(0,n.j)("abuse_req_cls_init_fail",{abuse_client_error_cause:"script_not_loaded"})),null===(s=null===(a=window.grecaptcha)||void 0===a?void 0:a.enterprise)||void 0===s||s.ready((async()=>{var a,s;const n=await(null===(s=null===(a=window.grecaptcha)||void 0===a?void 0:a.enterprise)||void 0===s?void 0:s.execute("6LcLOdsjAAAAAFfwGusLLnnn492SOGhsCh-uEAvI",{action:e}));t(n)}))})),o=async e=>{try{const t=await Promise.race([i(e),(async()=>(await(0,s._v)(10100),null))()]);return t?((0,n.j)("abuse_req_cls_sig_measure_success",{}),{siteKey:"6LcLOdsjAAAAAFfwGusLLnnn492SOGhsCh-uEAvI",token:t,vendor:2}):((0,n.j)("abuse_req_cls_sig_measure_fail",{abuse_client_error_cause:"report_timeout"}),null)}catch(e){(0,n.j)("abuse_req_cls_sig_measure_fail",{abuse_client_error_cause:"report_error"})}return null}},1:(e,t,a)=>{"use strict";a.d(t,{Ef:()=>p,GQ:()=>g,In:()=>E,PH:()=>y,Pp:()=>w,_u:()=>v,c$:()=>h,e_:()=>S,is:()=>_,mE:()=>f,qv:()=>b,vZ:()=>m});var s=a(17135),n=a(59249),r=a(81149),i=a(8654),o=a(93746),l=a(35160),c=a(23275),d=a(20028);const u=["premium","schools","beta course","revenue paused","free","ineligible"],p=(e,t,a,s)=>{const r=(0,n.ky)("heartsGroupType");return r&&(i=r,u.includes(i))?r:g(e,t)?a?"premium":(0,d.d1)(e)?"schools":t.unlimitedHeartsAvailable?"revenue paused":void 0!==s&&(0,o.TS)(s)?"beta course":"free":"ineligible";var i},g=(e,t)=>{var a,s;return(0,n.gQ)("forceHeartsAndGems")||null!==(a=null==t?void 0:t.healthEnabled)&&void 0!==a&&a||null!==(s=null==e?void 0:e.gemsConfig.useGems)&&void 0!==s&&s},m=e=>["schools","beta course","revenue paused"].includes(e),h=e=>e.hearts===e.maxHearts,_=e=>e.hearts<=0,v=e=>{const t=Date.now();if(t>e)return null;const{hours:a,minutes:n,seconds:r}=(0,s.zj)(e-t);return a>0?(0,i._i)(25240,{num_hours:a}):n>0?(0,i._i)(25241,{num_minutes:n}):(0,i._i)(25242,{num_seconds:r})},f={currencyType:"XGM",id:"health_refill",localizedDescription:"",name:"Health Refill",price:0,type:"misc"},S={currencyType:"XGM",id:"health_refill",localizedDescription:"",name:"Health Refill",price:350,type:"misc"},E={currencyType:"XGM",id:"health_refill_reactive",localizedDescription:"",name:"Health Refill Reactive",price:450,type:"misc"},y=(e,t)=>e.sessionCount<3||t.overrideFreeHeartRefillLeft>0||(0,n.gQ)("debugFreeHeartRefill"),b=(e,t,a,s)=>{var r;const i=null===(r=a.levelData)||void 0===r?void 0:r.level;(g(e)&&t&&0===e.sessionCount&&i&&!(0,c.qM)(i,"regular")&&0===a.currentIndex||(0,n.gQ)("debugHeartsIntro"))&&s({options:{name:l.t.HeartsIntro,spotlightType:"heartsInSession"},type:"TOGGLE_MODAL"})},w=e=>"control"===(0,r.j6)("spack_web_hearts_new_users_launch",void 0)&&"control"===(0,r.j6)("spack_web_hearts_new_users",void 0)&&e.gemsConfig.useGems},68903:(e,t,a)=>{"use strict";a.d(t,{$K:()=>l,OM:()=>r,RJ:()=>n,cY:()=>i,gB:()=>o,p:()=>c,rw:()=>d});var s=a(80254);const n=e=>e,r=e=>[e,e],i=(e,t)=>e.some((e=>s.Xy(e,t))),o=(e,t)=>t.includes(e),l=e=>void 0!==e,c=e=>t=>e.includes(t),d=(e,t)=>{let a;return(...s)=>{void 0===a&&(a=setTimeout((()=>{a=void 0,e(...s)}),t))}}},50548:(e,t,a)=>{"use strict";a.d(t,{TH:()=>v,ZY:()=>h,k6:()=>_,m8:()=>m});var s=a(92534),n=a(27378),r=a(3620),i=a(81149),o=a(35160),l=a(51158),c=a(18804);const d=[],u=[],p=[],g=[],m=(0,s.lX)({getUserConfirmation:(e,t)=>{var a,s;null===(a=p[0])||void 0===a||a.call(p);const{isDesktop:n,via:r}=null!==(s=g[0])&&void 0!==s?s:{};n&&"experiment"===(0,i.j6)("gweb_migrate_session_quit_drawers",void 0)?(0,c.A5)({options:{message:e,name:o.t.Confirm,onClose:()=>{var e;null===(e=u[0])||void 0===e||e.call(u),t(!1)},onConfirm:()=>{var e,a;const{shouldCancelRouteChange:s=!1}=null!==(a=null===(e=d[0])||void 0===e?void 0:e.call(d))&&void 0!==a?a:{};t(!s)},via:r},type:"TOGGLE_MODAL"}):(0,c.A5)({options:{message:e,name:"CONFIRM",onClose:()=>{var e;null===(e=u[0])||void 0===e||e.call(u),t(!1)},onConfirm:()=>{var e,a;const{shouldCancelRouteChange:s=!1}=null!==(a=null===(e=d[0])||void 0===e?void 0:e.call(d))&&void 0!==a?a:{};t(!s)}},type:"TOGGLE_DRAWER"})}}),h=(e,t,a,s)=>{n.useEffect((()=>(d.length>0&&(0,l.Kp)("Adding ConfirmedRouteChangeHandler when another handler is already present",{once:!0}),d.unshift(e),u.unshift(t),p.unshift(a),g.unshift(s),()=>{const n=d.indexOf(e);n>=0&&d.splice(n,1);const r=u.indexOf(t);r>=0&&u.splice(r,1);const i=p.indexOf(a);i>=0&&p.splice(i,1);const o=g.indexOf(s);o>=0&&g.splice(o,1)})),[e,t,a,g])},_=()=>(0,r.k6)(),v=()=>(0,r.TH)()},29134:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var s=a(27378);const n=(e,t,a)=>{const[n,r]=s.useState(e);return s.useEffect((()=>{const e=new AbortController,a=e.signal;return(async()=>{const e=await t(a);a.aborted||r(e)})(),()=>{e.abort()}}),a),n}},11883:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var s=a(27378),n=a(59249),r=a(42464);const i=(e=1e3)=>{const[t,a]=s.useState(Date.now()+(0,n.nn)());return(0,r.Z)((()=>a(Date.now()+(0,n.nn)())),e),t}},42464:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var s=a(27378);const n=(e,t)=>{const a=s.useRef(e);s.useEffect((()=>{a.current=e}),[e]),s.useEffect((()=>{if(void 0!==t){const e=setInterval((()=>a.current()),t);return()=>clearInterval(e)}}),[t])}},13707:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(27378);const n=new Map,r=(e,t)=>{const[a,r]=s.useState();return s.useLayoutEffect((()=>{let a=!1;return(async()=>{var s;const i=null!==(s=n.get(e))&&void 0!==s?s:t();n.has(e)||n.set(e,i);const o=await i;a||r(o)})(),()=>{a=!0}}),[]),a}},53229:(e,t,a)=>{"use strict";a.d(t,{Lm:()=>i,Vp:()=>o,lV:()=>c,lh:()=>l,qy:()=>d,sZ:()=>r,vl:()=>n});var s=a(80254);const n=(e=window.location.search)=>Object.fromEntries(new URLSearchParams(e).entries()),r=(e,t,a)=>{const s=new URLSearchParams(a.location.search);s.set(e,t),a.replace({search:s.toString()})},i=(e=window.location.search)=>n(e.replace(/\+/g,"%2B")),o=e=>s.XP(e).sort().map((t=>[t,e[t]].map(encodeURIComponent).join("="))).join("&"),l=s.HP(((e,t)=>new Promise(((a,s)=>{const n=document.createElement("script");n.async=!0,n.id=null!=t?t:`duo${`${Math.random()}`.split(".")[1]}_${Date.now()}`,n.onerror=s,n.onload=a,n.src=e,n.type="text/javascript";const r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r)})))),c=e=>encodeURIComponent(e.replace(/[!"#$%&'()*+,\-./:;<=>?@[\]^_`{|}~ \b\f\n\r\t\v¿]+/g," ").trim().replace(" ","-")),d=e=>e},8654:(e,t,a)=>{"use strict";a.d(t,{H8:()=>E,Hy:()=>R,Q7:()=>C,T$:()=>P,Ti:()=>A,VG:()=>O,_i:()=>S,ip:()=>k,k8:()=>x,k_:()=>b,lw:()=>h,mD:()=>L,pu:()=>M,sS:()=>N,to:()=>D,yL:()=>T});var s=a(27378),n=a(37803),r=a(80254),i=a(59249),o=a(93746),l=a(51158);const c=/\{\{#_iv\}\}(.+?)\{\{\/_iv\}\}/g,d=/\{\{#_ivar\}\}(.+?)\{\{\/_ivar\}\}/g,u=/\{\{#pluralize\}\}(.+?)\{\{\/pluralize\}\}/g,p=/\{\{(\w+?)\}\}/g,g=/<[a-z].*?>/i,m={'"le/l\'"':'\\"le/l\'\\"','"lowercase"':'\\"lowercase\\"','("of")':'(\\"of\\")'},h="rtl"===(()=>{if(document.dir)return document.dir;return document.documentElement.getAttribute("dir")||"ltr"})(),_=r.HP((e=>new Function("n",`return ${(0,o.EU)(e)};`))),v=e=>"number"==typeof e?`${e}`:`placeholder_${e.project}`,f=r.HP((e=>{(0,l.vU)(`Showing placeholder string for project ${e.project}`,{data:{placeholderText:e.text}})}),(e=>e.project)),S=(e,t={},a={})=>{try{return((e,t,a)=>{var n,S,E,y,b,w;const I=v(e);if((0,i.gQ)("renderStringIds"))return`string_${I}`;let T;if("number"==typeof e){let t=null===(E=null===(S=window.duo.l10n.strings[null!==(n=a.lang)&&void 0!==n?n:window.duo.uiLanguage])||void 0===S?void 0:S[e])||void 0===E?void 0:E[0];if(void 0===t){const a=null===(b=null===(y=window.duo.l10n.strings.en)||void 0===y?void 0:y[e])||void 0===b?void 0:b[0];if(void 0===a)throw Error(`Missing localization for string ${e}.`);(0,l.vU)(`Could not find string ${e}, falling back to en text`),t=a}T=t[1]}else(0,i.Au)()||f(e),T=e.text;(null!==(w=a.addRightToLeftMark)&&void 0!==w?w:h)&&(T=`‏${T}`),T=a.preprocess?a.preprocess(T):T,T=T.replace(u,(({},e)=>{let a;try{let t=e;Object.entries(m).forEach((([e,a])=>t=t.split(e).join(a))),a=JSON.parse(t)}catch(t){a=e.split(",")}const s=t[a.pop().slice(2,-2)];return a[_(o.h9)(s)]})),T=T.replace(d,(({},e)=>`{{#_iv}}{{${e}}}{{/_iv}}`));const k=g.test(T);T=T.replace(p,(({},e)=>{if(!(e in t))return(0,l.vU)(`Missing variable: ${e} for string ID ${I}`,{once:!0}),"";const a=t[e];return"string"!=typeof a&&"number"!=typeof a?((0,l.vU)(`Invalid variable value for: ${e} for string ID ${I}`,{data:{localizedString:T},once:!0,sample:.01}),""):k?r.YU(`${a}`):`${a}`})),T=T.replace(c,(({},e)=>{var t;const s=window.duo.l10n.undeclared[null!==(t=a.lang)&&void 0!==t?t:window.duo.uiLanguage];return s&&e in s?s[e]:e.split("||")[0]}));const{postprocess:C=(e=>e)}=a;if(a.stripTags&&(T=(e=>{if(!g.test(e))return e;try{const t=document.createElement("div");for(t.innerHTML=e;t.firstElementChild;)t.removeChild(t.firstElementChild);if(null===t.textContent)throw Error();return t.textContent}catch(t){return e.replace(/<([^>]+?)([^>]*?)>(.*?)<\/\1>/gi,"")}})(T)),T=C(T),"fr"===window.duo.uiLanguage&&(T=T.replace(/(\u00AB) | ([?!:;\u00BB])/g,"$1 $2")),(0,i.gQ)("longStrings")&&(T=`${T} ${T}`),a.exportTags)return T;let R=k?s.createElement("span",{dangerouslySetInnerHTML:{__html:T}}):T;return(0,i.gQ)("stringIdTooltips")&&(R=s.createElement("span",{title:`string_${I}`},R)),R})(e,t,a)}catch(e){return(0,l.vU)("Localization failed",{ex:e}),""}},E=(e,t={},a={})=>{const s=S(e,t,a);if("number"==typeof s||"string"==typeof s)return s.toString();try{const t=document.createElement("div");return t.innerHTML=n.uS(s),(0,i.gQ)("stringIdTooltips")?`${t.innerText} (string_${v(e)})`:t.innerText}catch(t){return(0,l.vU)("Failed to convert ReactElement to string",{data:{stringId:e}}),""}},y=["AT","BE","BG","CY","CZ","DK","DE","EE","EL","ES","FI","FR","GB","HR","HU","IE","IT","LT","LU","LV","MT","NL","PL","PT","RO","SE","SI","SK","UK"],b=e=>!!e.ipCountry&&y.includes(e.ipCountry);var w;!function(e){e.DEFAULT=", ",e.zh="、",e.ar="، ",e.ja="・"}(w||(w={}));const I=["ar","el","en","hi","ko","zh"],T=e=>I.includes(o.h9)?`${e%12||12}${e<12?"am":"pm"}`:`${e}:00`,k=()=>[E(18415),E(11602),E(667),E(974),E(21780),E(19860),E(14040)],C=()=>[E(30377),E(30378),E(30379),E(30380),E(30381),E(30382),E(30383)],R=()=>[E(34912),E(34913),E(34914),E(34915),E(34916),E(34917),E(34918)],O=()=>[E(36297),E(36298),E(36299),E(36300),E(36301),E(36302),E(36303),E(36304),E(36305),E(36306),E(36307),E(36308)],L=()=>[E(30384),E(30385),E(30386),E(30387),E(30388),E(30389),E(30390),E(30391),E(30392),E(30393),E(30394),E(30395)],P=(e,t={day:"numeric",month:"long"})=>new Intl.DateTimeFormat((0,o.M$)(window.duo.uiLanguage),t).format(e),A=["zh-CN","zh-TW","ja","ko","th"].includes(window.duo.uiLanguage),N=async(e,t)=>{const s=await a(55081)(`./${e}.duostrings`);window.duo.l10n.strings[e]=Object.assign(Object.assign({},window.duo.l10n.strings[e]),t?r.ei(s.sources,t):s.sources)},D=(e,t,a)=>e.replace(/<a href="(.*?)">/g,`<a class="${t}" href="$1"${void 0===a?"":`target="${a}"`}>`),x=()=>{var e,t;const a=(0,o.BE)(),s=/^([a-z]{2,3})(?:-([a-z]{3})(?=$|-))?(?:-([a-z]{4})(?=$|-))?(?:-([a-z]{2}|\d{3})(?=$|-))?/i.exec(a);return((e,t)=>{const a="AEAFBHDJDZEGIQIRJOKWLYOMQASDSY".match(/../g),s="AGARASAUBDBRBSBTBWBZCACNCODMDOETGTGUHKHNIDILINJMJPKEKHKRLAMHMMMOMTMXMZNINPPAPEPHPKPRPTPYSASGSVTHTTTWUMUSVEVIWSYEZAZW".match(/../g),n="amasbndzengnguhehiidjajvkmknkolomhmlmrmtmyneomorpapssdsmsnsutatethtnurzhzu".match(/../g);return e?(null==s?void 0:s.includes(e))?0:(null==a?void 0:a.includes(e))?6:1:(null==n?void 0:n.includes(t))?0:["ar","arq","arz","fa"].includes(t)?6:1})(null!==(e=null==s?void 0:s[4])&&void 0!==e?e:null,null!==(t=null==s?void 0:s[1])&&void 0!==t?t:"en")},M=e=>{let t;return null===(t=/(.*)<([\w]+)>(.*)<\/\2>(.*)/g.exec(e))||void 0===t?["","",""]:[t[1],t[3],t[4]]}},60752:(e,t,a)=>{"use strict";a.d(t,{b:()=>g});var s=a(47987),n=a(50498),r=a(51158),i=a(18804),o=a(79465);const l="duolingo";let c,d=!1;const u=()=>(0,i.A5)({type:"UNMOUNT"}),p=(e,t)=>{switch(t){case 0:{const t=e;t.createObjectStore("prefetchedSessions"),t.createObjectStore("submittableSessions",{keyPath:"id"})}case 1:e.deleteObjectStore("prefetchedSessions"),e.createObjectStore("prefetchedSessions");case 2:{const t=e;t.deleteObjectStore("submittableSessions"),t.createObjectStore("submittableRequests",{autoIncrement:!0})}case 3:e.deleteObjectStore("prefetchedSessions"),e.createObjectStore("prefetchedSessions");case 4:e.deleteObjectStore("submittableRequests"),e.createObjectStore("submittableRequests",{autoIncrement:!0});case 5:e.deleteObjectStore("prefetchedSessions"),e.createObjectStore("prefetchedSessions");case 6:case 7:e.deleteObjectStore("submittableRequests"),e.createObjectStore("submittableRequests",{autoIncrement:!0});case 8:e.deleteObjectStore("prefetchedSessions"),e.createObjectStore("prefetchedSessions")}},g=async()=>(c||(c=m()),c),m=async()=>{try{const e=await(0,s.X3)(l,9,{blocked:(e,t)=>{(0,o.j)("indexeddb_connection_blocked",{indexeddb_requested_version:t,indexeddb_version:e})},blocking:(t,a)=>{e.close(),d||((0,o.j)("indexeddb_connection_blocking",{indexeddb_requested_version:a,indexeddb_version:t}),d=!0,u())},terminated:()=>{(0,r.Kp)("IndexedDB connection was terminated abnormally",{once:!0}),c=void 0},upgrade:p});return e}catch(e){if("VersionError"===e.name){const e=(await indexedDB.databases()).find((e=>e.name===l));(0,o.j)("indexeddb_version_conflict",{indexeddb_requested_version:9,indexeddb_version:null==e?void 0:e.version}),u(),await(0,n.f)()}throw e}}},93746:(e,t,a)=>{"use strict";a.d(t,{AP:()=>i,h9:()=>A,Py:()=>_,vI:()=>c,M$:()=>d,b7:()=>u,Jl:()=>S,lx:()=>b,vY:()=>y,BE:()=>p,EU:()=>w,Ux:()=>I,k4:()=>D,D3:()=>v,TS:()=>E,zp:()=>O,nV:()=>L,jO:()=>T,OK:()=>C,vx:()=>P,Dz:()=>f});var s=a(80254);const n=JSON.parse('[{"from_language_id":"ar","learning_language_id":"de","phase":3},{"from_language_id":"ar","learning_language_id":"en","phase":3},{"from_language_id":"ar","learning_language_id":"es","phase":1},{"from_language_id":"ar","learning_language_id":"fr","phase":3},{"from_language_id":"ar","learning_language_id":"sv","phase":3},{"from_language_id":"bn","learning_language_id":"en","phase":3},{"from_language_id":"cs","learning_language_id":"en","phase":3},{"from_language_id":"de","learning_language_id":"en","phase":3},{"from_language_id":"de","learning_language_id":"es","phase":3},{"from_language_id":"de","learning_language_id":"fr","phase":3},{"from_language_id":"de","learning_language_id":"it","phase":3},{"from_language_id":"el","learning_language_id":"en","phase":3},{"from_language_id":"en","learning_language_id":"ar","phase":3},{"from_language_id":"en","learning_language_id":"cs","phase":3},{"from_language_id":"en","learning_language_id":"cy","phase":3},{"from_language_id":"en","learning_language_id":"da","phase":3},{"from_language_id":"en","learning_language_id":"de","phase":3},{"from_language_id":"en","learning_language_id":"el","phase":3},{"from_language_id":"en","learning_language_id":"eo","phase":3},{"from_language_id":"en","learning_language_id":"es","phase":3},{"from_language_id":"en","learning_language_id":"fi","phase":3},{"from_language_id":"en","learning_language_id":"fr","phase":3},{"from_language_id":"en","learning_language_id":"ga","phase":3},{"from_language_id":"en","learning_language_id":"gd","phase":3},{"from_language_id":"en","learning_language_id":"he","phase":3},{"from_language_id":"en","learning_language_id":"hi","phase":3},{"from_language_id":"en","learning_language_id":"ht","phase":3},{"from_language_id":"en","learning_language_id":"hu","phase":3},{"from_language_id":"en","learning_language_id":"hv","phase":3},{"from_language_id":"en","learning_language_id":"hw","phase":3},{"from_language_id":"en","learning_language_id":"id","phase":3},{"from_language_id":"en","learning_language_id":"it","phase":3},{"from_language_id":"en","learning_language_id":"ja","phase":3},{"from_language_id":"en","learning_language_id":"ko","phase":3},{"from_language_id":"en","learning_language_id":"la","phase":3},{"from_language_id":"en","learning_language_id":"mi","phase":1},{"from_language_id":"en","learning_language_id":"nl-NL","phase":3},{"from_language_id":"en","learning_language_id":"no-BO","phase":3},{"from_language_id":"en","learning_language_id":"nv","phase":3},{"from_language_id":"en","learning_language_id":"pl","phase":3},{"from_language_id":"en","learning_language_id":"pt","phase":3},{"from_language_id":"en","learning_language_id":"ro","phase":3},{"from_language_id":"en","learning_language_id":"ru","phase":3},{"from_language_id":"en","learning_language_id":"sv","phase":3},{"from_language_id":"en","learning_language_id":"sw","phase":3},{"from_language_id":"en","learning_language_id":"tlh","phase":2},{"from_language_id":"en","learning_language_id":"tr","phase":3},{"from_language_id":"en","learning_language_id":"uk","phase":3},{"from_language_id":"en","learning_language_id":"vi","phase":3},{"from_language_id":"en","learning_language_id":"yi","phase":3},{"from_language_id":"en","learning_language_id":"zh","phase":3},{"from_language_id":"en","learning_language_id":"zu","phase":3},{"from_language_id":"es","learning_language_id":"ca","phase":3},{"from_language_id":"es","learning_language_id":"de","phase":3},{"from_language_id":"es","learning_language_id":"en","phase":3},{"from_language_id":"es","learning_language_id":"eo","phase":3},{"from_language_id":"es","learning_language_id":"fr","phase":3},{"from_language_id":"es","learning_language_id":"gn","phase":3},{"from_language_id":"es","learning_language_id":"it","phase":3},{"from_language_id":"es","learning_language_id":"pt","phase":3},{"from_language_id":"es","learning_language_id":"qc","phase":1},{"from_language_id":"es","learning_language_id":"ru","phase":3},{"from_language_id":"es","learning_language_id":"sv","phase":3},{"from_language_id":"es","learning_language_id":"yu","phase":1},{"from_language_id":"fr","learning_language_id":"de","phase":3},{"from_language_id":"fr","learning_language_id":"en","phase":3},{"from_language_id":"fr","learning_language_id":"eo","phase":2},{"from_language_id":"fr","learning_language_id":"es","phase":3},{"from_language_id":"fr","learning_language_id":"it","phase":3},{"from_language_id":"fr","learning_language_id":"pt","phase":3},{"from_language_id":"hi","learning_language_id":"en","phase":3},{"from_language_id":"hu","learning_language_id":"de","phase":3},{"from_language_id":"hu","learning_language_id":"en","phase":3},{"from_language_id":"id","learning_language_id":"en","phase":3},{"from_language_id":"it","learning_language_id":"de","phase":3},{"from_language_id":"it","learning_language_id":"en","phase":3},{"from_language_id":"it","learning_language_id":"es","phase":3},{"from_language_id":"it","learning_language_id":"fr","phase":3},{"from_language_id":"ja","learning_language_id":"en","phase":3},{"from_language_id":"ja","learning_language_id":"fr","phase":3},{"from_language_id":"ja","learning_language_id":"ko","phase":3},{"from_language_id":"ja","learning_language_id":"zh","phase":3},{"from_language_id":"ko","learning_language_id":"en","phase":3},{"from_language_id":"ko","learning_language_id":"zh","phase":1},{"from_language_id":"nl-NL","learning_language_id":"de","phase":3},{"from_language_id":"nl-NL","learning_language_id":"en","phase":3},{"from_language_id":"nl-NL","learning_language_id":"fr","phase":3},{"from_language_id":"pa","learning_language_id":"en","phase":1},{"from_language_id":"pl","learning_language_id":"en","phase":3},{"from_language_id":"pt","learning_language_id":"de","phase":3},{"from_language_id":"pt","learning_language_id":"en","phase":3},{"from_language_id":"pt","learning_language_id":"eo","phase":3},{"from_language_id":"pt","learning_language_id":"es","phase":3},{"from_language_id":"pt","learning_language_id":"fr","phase":3},{"from_language_id":"pt","learning_language_id":"it","phase":3},{"from_language_id":"ro","learning_language_id":"en","phase":3},{"from_language_id":"ru","learning_language_id":"de","phase":3},{"from_language_id":"ru","learning_language_id":"en","phase":3},{"from_language_id":"ru","learning_language_id":"es","phase":3},{"from_language_id":"ru","learning_language_id":"fr","phase":3},{"from_language_id":"ru","learning_language_id":"sv","phase":1},{"from_language_id":"ru","learning_language_id":"uk","phase":1},{"from_language_id":"te","learning_language_id":"en","phase":3},{"from_language_id":"th","learning_language_id":"en","phase":3},{"from_language_id":"tl","learning_language_id":"en","phase":3},{"from_language_id":"tr","learning_language_id":"de","phase":3},{"from_language_id":"tr","learning_language_id":"en","phase":3},{"from_language_id":"tr","learning_language_id":"fr","phase":1},{"from_language_id":"tr","learning_language_id":"ru","phase":3},{"from_language_id":"uk","learning_language_id":"en","phase":3},{"from_language_id":"vi","learning_language_id":"en","phase":3},{"from_language_id":"vi","learning_language_id":"zh","phase":3},{"from_language_id":"zh","learning_language_id":"de","phase":1},{"from_language_id":"zh","learning_language_id":"en","phase":3},{"from_language_id":"zh","learning_language_id":"es","phase":2},{"from_language_id":"zh","learning_language_id":"fr","phase":3},{"from_language_id":"zh","learning_language_id":"it","phase":2},{"from_language_id":"zh","learning_language_id":"ja","phase":3},{"from_language_id":"zh","learning_language_id":"ko","phase":2},{"from_language_id":"zh","learning_language_id":"zh-HK","phase":3}]'),r=JSON.parse('{"ar":{"abbrev":"ar","label":"العربية","name":"Arabic","plural_forms":["zero","one","two","few","many","other"],"plural_rule":"n === 0 ? 0 : n === 1 ? 1 : n === 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5","script_direction":"rtl"},"bn":{"abbrev":"bn","label":"বাংলা","name":"Bengali","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"ca":{"abbrev":"ca","label":"català","name":"Catalan","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"cs":{"abbrev":"cs","label":"Čeština","name":"Czech","plural_forms":["one","few","other"],"plural_rule":"(n === 1) ? 0 : (n >= 2 && n <= 4) ? 1 : 2","script_direction":"ltr"},"cy":{"abbrev":"cy","label":"Cymraeg","name":"Welsh","plural_forms":["one","two","other","many"],"plural_rule":"(n === 1) ? 0 : (n === 2) ? 1 : (n !== 8 && n !== 11) ? 2 : 3","script_direction":"ltr"},"da":{"abbrev":"da","label":"dansk","name":"Danish","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"de":{"abbrev":"de","label":"Deutsch","name":"German","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"el":{"abbrev":"el","label":"Ελληνικά","name":"Greek","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"en":{"abbrev":"en","label":"English","name":"English","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"eo":{"abbrev":"eo","label":"Esperanto","name":"Esperanto","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"es":{"abbrev":"es","label":"Español","name":"Spanish","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"fi":{"abbrev":"fi","label":"suomen kieli","name":"Finnish","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"fr":{"abbrev":"fr","label":"Français","name":"French","plural_forms":["one","other"],"plural_rule":"(n > 1) ? 1 : 0","script_direction":"ltr"},"ga":{"abbrev":"ga","label":"Gaeilge","name":"Irish","plural_forms":["one","two","few","many","other"],"plural_rule":"n === 1 ? 0 : n === 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4","script_direction":"ltr"},"gd":{"abbrev":"gd","label":"Gàidhlig","name":"Scottish Gaelic","plural_forms":["one","two","few","other"],"plural_rule":"(n === 1 || n === 11) ? 0 : (n === 2 || n === 12) ? 1 : (n !== 0 && n < 20) ? 2 : 3","script_direction":"ltr"},"gn":{"abbrev":"gn","label":"Avañe\'ẽ","name":"Guarani","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"he":{"abbrev":"he","label":null,"name":"Hebrew","plural_forms":["one","two","many","other"],"plural_rule":"(n === 1) ? 0 : (n === 2) ? 1 : (n > 10 && n % 10 === 0) ? 2 : 3","script_direction":"rtl"},"hi":{"abbrev":"hi","label":"हिंदी","name":"Hindi","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"ht":{"abbrev":"ht","label":"Kreyòl ayisyen","name":"Haitian Creole","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"hu":{"abbrev":"hu","label":"Magyar","name":"Hungarian","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"hv":{"abbrev":"hv","label":"Valyria","name":"High Valyrian","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"hw":{"abbrev":"hw","label":"Ōlelo Hawaiʻi","name":"Hawaiian","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"id":{"abbrev":"id","label":"Bahasa Indonesia","name":"Indonesian","plural_forms":["other"],"plural_rule":"0","script_direction":"ltr"},"it":{"abbrev":"it","label":"Italiano","name":"Italian","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"ja":{"abbrev":"ja","label":"日本語","name":"Japanese","plural_forms":["other"],"plural_rule":"0","script_direction":"ltr"},"ko":{"abbrev":"ko","label":"한국어","name":"Korean","plural_forms":["other"],"plural_rule":"0","script_direction":"ltr"},"la":{"abbrev":"la","label":"Lingua latīna","name":"Latin","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"mi":{"abbrev":"mi","label":null,"name":"Māori","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"nl-NL":{"abbrev":"dn","label":"Nederlands","name":"Dutch","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"no-BO":{"abbrev":"nb","label":"bokmål","name":"Norwegian (Bokmål)","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"nv":{"abbrev":"nv","label":"Diné bizaad","name":"Navajo","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"pa":{"abbrev":"pa","label":"ਪੰਜਾਬੀ","name":"Punjabi (Gurmukhi)","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"pl":{"abbrev":"pl","label":"Polski","name":"Polish","plural_forms":["one","few","many"],"plural_rule":"n === 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2","script_direction":"ltr"},"pt":{"abbrev":"pt","label":"Português","name":"Portuguese","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"qc":{"abbrev":"qc","label":null,"name":"K\'iche\'","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"ro":{"abbrev":"ro","label":"Română","name":"Romanian","plural_forms":["one","few","other"],"plural_rule":"n === 1 ? 0 : (n === 0 || (n % 100 > 0 && n % 100 < 20)) ? 1 : 2","script_direction":"ltr"},"ru":{"abbrev":"ru","label":"Русский","name":"Russian","plural_forms":["one","few","many"],"plural_rule":"n % 10 === 1 && n % 100 !== 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2","script_direction":"ltr"},"sv":{"abbrev":"sv","label":"svenska","name":"Swedish","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"sw":{"abbrev":"sw","label":"Kiswahili","name":"Swahili","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"te":{"abbrev":"te","label":"తెలుగు","name":"Telugu","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"th":{"abbrev":"th","label":"ภาษาไทย","name":"Thai","plural_forms":["other"],"plural_rule":"0","script_direction":"ltr"},"tl":{"abbrev":"tl","label":"Tagalog","name":"Tagalog","plural_forms":["one","other"],"plural_rule":"(n % 10 === 4 || n % 10 === 6 || n % 10 === 9) ? 1 : 0","script_direction":"ltr"},"tlh":{"abbrev":"kl","label":"tlhIngan Hol","name":"Klingon","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"tr":{"abbrev":"tr","label":"Türkçe","name":"Turkish","plural_forms":["one","other"],"plural_rule":"(n > 1) ? 1 : 0","script_direction":"ltr"},"uk":{"abbrev":"uk","label":"Українською","name":"Ukrainian","plural_forms":["one","few","many"],"plural_rule":"n % 10 === 1 && n % 100 !== 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2","script_direction":"ltr"},"vi":{"abbrev":"vi","label":"Tiếng Việt","name":"Vietnamese","plural_forms":["other"],"plural_rule":"0","script_direction":"ltr"},"xx-ZB":{"abbrev":"xz","label":"Español","name":"Spanish","plural_forms":["other"],"plural_rule":"0","script_direction":"ltr"},"yi":{"abbrev":"yi","label":"ייִדיש","name":"Yiddish","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"rtl"},"yu":{"abbrev":"yu","label":null,"name":"Yucatec","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"},"zh":{"abbrev":"zs","label":"中文","name":"Chinese","plural_forms":["other"],"plural_rule":"0","script_direction":"ltr"},"zh-HK":{"abbrev":"zc","label":"廣東話","name":"Chinese (Cantonese)","plural_forms":["other"],"plural_rule":"0","script_direction":"ltr"},"zu":{"abbrev":"zu","label":"isiZulu","name":"Zulu","plural_forms":["one","other"],"plural_rule":"(n != 1) ? 1 : 0","script_direction":"ltr"}}');var i,o=a(68903),l=a(51158);!function(e){e[e.Active=1]="Active",e[e.Beta=2]="Beta",e[e.Inactive=0]="Inactive",e[e.Released=3]="Released"}(i||(i={}));const c=(e,t)=>"zh"===e?t?"zh-TW":"zh-CN":C(e)?e:"en",d=e=>e.startsWith("zh")?"zh":e.startsWith("nl")?"nl":k(e)?e:((0,l.vU)("UI language not able to be converted to LanguageId.",{data:{languageId:e}}),"en"),u=e=>["bn","hi","ko","pa","ta","te","te","tl","uk","vi"].includes(e)?"auto":"nl-NL"===e?"nl":"zh-CN"===e?"zh":e,p=()=>{var e;return(null===(e=navigator.languages)||void 0===e?void 0:e[0])||navigator.language||"en"},g=s.Xc(r,(e=>e.abbrev)),m=s.U_(g),h=s.jj(n.filter((e=>e.phase>=i.Active)).flatMap((e=>"zh"===e.from_language_id?["zh-CN","zh-TW"]:e.from_language_id))),_=e=>m[e],v=e=>g[e],f=Object.keys(r),S=s.Xc(s.vM(n.filter((e=>e.phase>=i.Beta)),"from_language_id"),(e=>s.jg(e,"learning_language_id").sort())),E=e=>{if(void 0===e)throw Error("Course is undefined when checking if it is a beta course. It could be caused by the user being languageless.");return"BETA"===e.status},y=e=>r[e].name,b=e=>r[e].label,w=e=>r[e].plural_rule,I=e=>r[e].script_direction,T=(0,o.p)(f),k=((0,o.p)(s.XP(m)),(0,o.p)(["ar","bn","cs","de","el","en","es","fr","hi","hu","id","it","ja","ko","nl","pa","pl","pt","ro","ru","ta","te","th","tl","tr","uk","vi","zh"])),C=(0,o.p)(h),R=s.Xc(s.vM(n,"from_language_id"),(e=>s.jg(e,"learning_language_id").sort())),O=(e,t)=>{var a;return!0===(null===(a=R[t])||void 0===a?void 0:a.includes(e))},L=(e,t)=>{var a;return!0===(null===(a=S[t])||void 0===a?void 0:a.includes(e))},P=e=>["zh-CN","zh-TW","zs"].includes(e),A=(N=window.duo.uiLanguage).startsWith("zh")?"zh":T(N)?N:((0,l.vU)("UI language not able to be converted to LanguageId.",{data:{languageId:N}}),"en");var N;const D=e=>!["ja","th","zh","zh-HK"].includes(e)},1398:(e,t,a)=>{"use strict";a.d(t,{N:()=>n,Z:()=>r});var s=a(27378);const n=e=>"preload"in e,r=e=>{let t,a,n="uninitialized";const r=async()=>{t=e(),n="pending";try{a=(await t).default,n="resolved"}catch(e){a=e,n="rejected"}},i=s.forwardRef(((e,i)=>{if("uninitialized"===n&&r(),"resolved"===n)return s.createElement(a,Object.assign(Object.assign({},e),{ref:i}));throw null!=a?a:t}));return i.hasLoaded=()=>"resolved"===n,i.getError=()=>"rejected"===n?a:void 0,i.isLoading=()=>"pending"===n,i.preload=async()=>{"uninitialized"===n&&r(),await t},i}},87471:(e,t,a)=>{"use strict";a.d(t,{Ep:()=>f,NO:()=>v,PR:()=>g,TL:()=>w,Tm:()=>b,XU:()=>y,ZL:()=>h,c$:()=>S,dt:()=>T,em:()=>E,fY:()=>I,hn:()=>m,rj:()=>p,u4:()=>_,ud:()=>k});var s=a(99369),n=a(65908),r=a(66586),i=a(25324),o=a(80388),l=a(17135),c=a(59249),d=a(81621),u=a(20028);const p=(e,t)=>t.filter((t=>"CURRENCY"===t.rewardType&&(t.tier===e||null===t.tier))).reduce(((e,t)=>(e[t.rank]=t.itemQuantity,e)),{}),g=(e,t)=>{if(!(null===t||e>=t.length))return t[e]},m=(e,t)=>{if(null!==t&&0!==e)return t[e-1]},h=(e,t)=>!!t&&e<t,_=(e,t,a)=>!!a&&t-e-1<a,v=(e,t)=>{const a=t.map((({cohort:{rankings:e}})=>e.map((({userId:e})=>e)))),s=t.map((({cohort:{tier:e}})=>e)),n=t.map((({contest:{ruleset:{rewards:e}}})=>e)),r=a.map((t=>t.indexOf(e))),i=r[r.length-1],o=s[s.length-1],l=t[t.length-1].contest.ruleset,c=l.cohortSize,d=g(o,l.numPromoted),u=m(o,l.numDemoted),v=h(i,d),f=_(i,c,u);return{lingots:t.map((({},e)=>p(s[e],n[e])[r[e]]||0)).reduce(((e,t)=>e+t),0),rank:v?"PROMOTED":f?"DEMOTED":"STAY"}},f=(e,t,a,s,n)=>0===e?"GOLD":1===e?"SILVER":2===e?"BRONZE":h(e,s)?"GREEN":_(e,t,a)?"RED":n?"GRAY":"WHITE",S=(e,t,a)=>{var s,n,r,i;if((null===(s=null==e?void 0:e.leaderboard)||void 0===s?void 0:s.activeContest)&&e.active){const{cohortSize:s,numDemoted:o,numPromoted:c,numLosers:d,numWinners:u}=e.leaderboard.activeContest.ruleset,p=null!==(n=e.active.cohort.tier)&&void 0!==n?n:e.tier,v=e.active.cohort.rankings,f=b(v,e.active.userId),S=p!==e.tier,E=Date.now(),y=S&&p===(null==c?void 0:c.length)?u:g(p,c),w=S&&0===p?d:m(p,o);if(e.ended&&e.ended.length>=1&&e.active.cohort.rankings.length>=5)return{lastPositionSeen:void 0,lastScoreSeen:void 0,type:"leaderboardJoin"};if(t&&t.placesMoved>=1){if(f<=2&&t.lastPositionSeen>=3)return{lastPositionSeen:t.lastPositionSeen,lastScoreSeen:t.lastScoreSeen,type:"leaderboardTopThree"};if(!h(t.lastPositionSeen,y)&&h(f,y))return{lastPositionSeen:t.lastPositionSeen,lastScoreSeen:t.lastScoreSeen,type:"leaderboardPromoZone"};if(_(t.lastPositionSeen,s,w)&&!_(f,s,w))return{lastPositionSeen:t.lastPositionSeen,lastScoreSeen:t.lastScoreSeen,type:"leaderboardDemoZone"};if(t.placesMoved>=3)return{lastPositionSeen:t.lastPositionSeen,lastScoreSeen:t.lastScoreSeen,type:"leaderboardRankIncreaseLarge"};if(t.placesMoved>0&&t.placesMoved<3)return{lastPositionSeen:t.lastPositionSeen,lastScoreSeen:t.lastScoreSeen,type:"leaderboardRankIncreaseSmall"}}else if(f>=1&&v[f-1].score-v[f].score<=10&&v[f-1].score-v[f].score>0&&(0,l.t8)(e.active.cohort.creationDate,E)>=1&&(0,l.t8)(null!==(r=null==a?void 0:a.lastShownDate)&&void 0!==r?r:0,E)>=1&&(null!==(i=null==a?void 0:a.moveUpPrompts.numShown)&&void 0!==i?i:0)<4)return{lastPositionSeen:void 0,lastScoreSeen:void 0,type:"leaderboardMoveUpPrompt"}}},E=e=>{if(!e)return"default";const t=(0,c.ky)("debugLeaderboards");if(t&&["wait","register","maintenance","locked"].includes(t))return t;const{active:a,ended:s,leaderboard:n,numSessionsRemainingToUnlock:r,tier:i}=e;if(!(null==n?void 0:n.activeContest)||!(null==a?void 0:a.contest)&&!(null==s?void 0:s.length)&&0===r&&-1===i)return"maintenance";const{activeContest:{registrationState:o}}=n;if(void 0!==r&&r>0)return"locked";if(!a&&"CLOSED"===o)return"wait";if(!a&&"OPEN"===o)return"register";if(a)return"contest";throw Error("No view applicable for current league state")},y=e=>{switch(e){case 0:return r;case 1:return i;case 2:return n;default:return}},b=(e,t)=>e.findIndex((e=>e.userId===t)),w=({forceFinalRank:e,rankings:t,score:a,userId:n})=>{const r=b(t,n),i=(0,s.setIn)(t,[r,"score"],a),o=(0,s.asMutable)(i);if(void 0!==e&&e>=0&&e<t.length){if(e===r)return o;const t=Math.min(e,r),a=Math.max(e,r),s=e===t?-1:1;return o.map(((n,o)=>o===e?i[r]:o<t||o>a?n:i[o+s]))}return o.sort(((e,t)=>e.score>t.score?-1:e.score<t.score?1:0))},I=e=>(0,u.jq)(e)&&!(0,d.rt)(e),T=e=>!(0,o.J9)()&&I(e)&&!e.classroomLeaderboardsEnabled,k=e=>(0,d.rt)(e)||(0,d.Ud)(e)&&!e.classroomLeaderboardsEnabled},76022:(e,t,a)=>{"use strict";a.d(t,{gj:()=>C,WP:()=>w,Vq:()=>k,L:()=>I,nw:()=>T});const s=a.p+"images/leagues/7f895707cd44583692d20481dcd9e0d0.svg";var n=a(39631);const r=a.p+"images/leagues/192181672ada150becd83a74a4266ae9.svg";var i=a(80869);const o=a.p+"images/leagues/afe5c7067cd5fb7de936d3928ea7add6.svg";var l=a(92902);const c=a.p+"images/leagues/f480e032c5222395e73dac88ce3592bb.svg";var d=a(83831);const u=a.p+"images/leagues/0e249b5f869b806da7406b815f4d60c6.svg";var p=a(8466);const g=a.p+"images/leagues/57f0c6b260d33493a0cddc4ab38d6833.svg";var m=a(8146);const h=a.p+"images/leagues/f902954eeaa88fd2cb12f9168b4f68cb.svg";var _=a(79815);const v=a.p+"images/leagues/74d6ab6e5b6f92e7d16a4a6664d1fafd.svg";var f=a(9175);const S=a.p+"images/leagues/3ced84eb1f0274ec0f02b24ae6e3d29b.svg";var E=a(40301);const y=a.p+"images/leagues/8148b17e32d8706a82c02688f559e9ef.svg";var b=a(26858);const w=["bronze","silver","gold","sapphire","ruby","emerald","amethyst","pearl","obsidian","diamond"],I=[r,y,u,S,v,c,s,h,g,o],T=[i,b,p,E,f,d,n,_,m,l],k=[321,21153,6276,10705,2028,3777,23232,11453,14693,9894],C=[3726,2804,10599,2970,9356,5746,16491,19007,12827,10357]},37825:(e,t,a)=>{"use strict";a.d(t,{Hl:()=>l,M_:()=>i,b2:()=>c,d:()=>r,lZ:()=>o,z:()=>n});var s=a(23275);const n=3,r=e=>["practice","skill","story"].includes(e),i=e=>e.includes("/legendary"),o=e=>(0,s.Ol)({levelType:"unit_review",path:e}).some((e=>e.finishedSessions>0)),l=e=>{switch(e){case"practice":return"path_practice";case"skill":return"path_skill";case"story":return"path_story";default:return"path_level"}},c=e=>{switch(e){case"practice":return"promo_practice";case"skill":return"promo_skill";default:return"session_end"}}},26506:(e,t,a)=>{"use strict";a.d(t,{U:()=>n,_:()=>r});class s{constructor(){this.disabled=!1,this.handlers=new WeakMap}addListener(e,t,a,s){var n;const r=null!==(n=this.handlers.get(a))&&void 0!==n?n:e=>{this.disabled||a(e)};this.handlers.set(a,r),e.addEventListener(t,r,s)}removeListener(e,t,a,s){const n=this.handlers.get(a);n&&(this.handlers.delete(a),e.removeEventListener(t,n,s))}enableListeners(){this.disabled=!1}disableListeners(){this.disabled=!0}}const n=new s,r=new s},41364:(e,t,a)=>{"use strict";a.d(t,{U:()=>o,p:()=>c});var s=a(80254);let n,r=0;const i=e=>{null==n||n(e),r=e},o=e=>{n=e},l={GET_USER:1e4,SYNC_STORED_PROGRESS:2e4},c=e=>t=>async(...a)=>{let n,o;const c=s.IH((()=>{n&&window.clearInterval(n),o&&window.clearTimeout(o),i(0)})),d=Date.now(),u=!r;if(u){i(.001);const t=l[e];n=window.setInterval((()=>{const e=(Date.now()-d)/t,a=1-Math.exp(-e);i(a)}),200),o=window.setTimeout(c,2e4)}let p,g;try{g=await t(...a)}catch(e){p=e}u&&c();const m=Date.now()-d;if(l[e]=m,p)throw p;return g}},39852:(e,t,a)=>{"use strict";a.d(t,{$U:()=>c,JE:()=>y,ar:()=>h,bP:()=>v,cM:()=>m,qr:()=>_,s1:()=>g,si:()=>S});var s=a(99369),n=a(80254),r=a(17135),i=a(59249),o=a(51158);const l={debug:"debug",error:"error",group:"info",groupCollapsed:"info",info:"info",log:"info",warn:"warning"},c=Symbol("EXCLUDE_FROM_ROLLBAR_TELEMETRY"),d=[],u={},p=e=>{d.push(e),d.length>100&&d.shift()},g=()=>{let e=!1;return d.map((t=>"action"===t.type?e?n.CE(t,"state"):(e=!0,t):t))},m=(e,t,a)=>f("log",e,t,a),h=(e,t,a,n)=>{var l;if((0,i.Au)()){const i=null!==(l=null==n?void 0:n.timestamp)&&void 0!==l?l:(0,r.Ux)();v("action",t.type,[{data:(0,s.asMutable)(e),name:"prev state"},{data:t,name:"action"},{data:(0,s.asMutable)(a),name:"next state"}],Object.assign(Object.assign({},n),{excludeFromRollbarTelemetry:!0,timestamp:i})),p({action:t,state:a,timestamp:i,type:"action"})}o.cj(t)},_=(e,t,a,s={})=>{const n=s.localOverride?`Condition ${e} overridden from experiment ${t} in HOF local override`:s.queryOverride?`Condition ${e} overridden from experiment ${t} in HOF query string`:s.url?s.cache?`Condition ${e} retrieved from cache for URL experiment ${t}`:s.default?`Condition control queried from URL experiment ${t}, but experiment record not found`:`Condition ${e} queried from URL experiment ${t}`:`Condition ${e} queried from ${s.loggedOut?"logged out experiment":"experiment"} ${t} in context ${a}${s.cache?", provided by cache":s.default?", but record not found":s.notInRollout?", but user not in rollout":""}`;u[t]!==n&&((0,i.Au)()&&v("condition",`${t} in ${e}`,[{data:n,name:"detail"}],{excludeFromRollbarTelemetry:!0}),u[t]=n)},v=(e,t,a,s)=>{f("groupCollapsed",e,t,s),(0,i.Au)()&&(a.forEach((({name:e,data:t})=>b.log(`%c${e}:`,"font-weight: 700;",t))),b.groupEnd())},f=(e,t,a,s)=>{var n,c;if((0,i.Au)()){const i=((e,t,a,s)=>{const n=[];return"other"!==e&&n.push(e),n.push(`%c${t}`,`%c@ ${a}`),void 0!==s&&n.push(`%c(in ${s.toFixed(2)}ms)`),n.join(" ")})(t,a,(c=null!==(n=null==s?void 0:s.timestamp)&&void 0!==n?n:(0,r.Ux)(),`${E(c.getHours(),2)}:${E(c.getMinutes(),2)}:${E(c.getSeconds(),2)}.${E(c.getMilliseconds(),3)}`),null==s?void 0:s.duration);b[e](`%c${i}`,...((e,t)=>{const a=[];return"other"!==e&&a.push("color: gray; font-weight: lighter;"),a.push("font-weight: 700;","color: gray; font-weight: lighter;"),void 0!==(null==t?void 0:t.duration)&&a.push("color: gray; font-weight: lighter;"),a})(t,s))}l[e]&&!(null==s?void 0:s.excludeFromRollbarTelemetry)&&o.LZ(`[${t}] ${a}`,l[e])},S=(e,t,a)=>{var s;const n=`${e.pathname}${e.search}`,l=`${t.pathname}${t.search}`;if((0,i.Au)()){const i=null!==(s=null==a?void 0:a.timestamp)&&void 0!==s?s:(0,r.Ux)();v("route",`${n} → ${l}`,[{data:e,name:"from"},{data:t,name:"to"}],Object.assign(Object.assign({},a),{excludeFromRollbarTelemetry:!0,timestamp:i})),p({timestamp:i,to:t,type:"navigation"})}o.GN(n,l)},E=(e,t)=>`${e}`.padStart(t,"0"),y=()=>n.XP(console).forEach((e=>{if("function"==typeof console[e]){const t=console[e].bind(console);console[e]=(...a)=>{(0,i.Au)()&&t(...n.zu(a,c)),l[e]&&!a.includes(c)&&o.LZ(a[0],l[e])},b[e]=t}else b[e]=console[e]})),b={}},76578:(e,t,a)=>{"use strict";a.d(t,{KH:()=>s,TE:()=>n,bA:()=>r});const s=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),n=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),r=(e,t,a,s,n,r=!1)=>{const i=(e-t)*(n-s)/(a-t)+s;return r?Math.min(Math.max(i,s),n):i}},64865:(e,t,a)=>{"use strict";a.d(t,{A:()=>h,Ir:()=>v,JN:()=>u,TI:()=>g,VF:()=>m,WV:()=>S,ci:()=>f,fi:()=>p,fy:()=>_});var s=a(80388),n=a(53229),r=a(8654),i=a(93746),o=a(79465),l=a(74597);const c="https://af4a.adj.st/?adjust_t=mfg8p8a",d="https://af4a.adj.st/?adjust_t=ewm3ujy",u="https://app.adjust.com/u0fwvk3",p="https://app.adjust.com/hwy9on0",g=(...e)=>l.Z.android?h(...e):l.Z.ios?(0,r.H8)(22504,void 0,{addRightToLeftMark:!1}):l.Z.windowsPhone?(0,r.H8)(14998):void 0,m=({via:e})=>l.Z.android?v({via:e}):l.Z.ios?_({via:e}):l.Z.windowsPhone?(0,r.H8)(14998):void 0,h=({isAndroidBanner:e,utmCampaign:t,utmContent:a}={isAndroidBanner:!1,utmCampaign:"",utmContent:""})=>e?(0,s.J9)()?"http://zhushou.360.cn/detail/index/soft_id/361348":`${c}&adjust_label=android_banner`:(0,s.J9)()?"http://zhushou.360.cn/detail/index/soft_id/361348":`//play.google.com/store/apps/details?${(0,n.Vp)({hl:i.h9,id:"com.duolingo",referrer:`utm_source=duolingo.com&utm_medium=duolingo_web&utm_content=${a}&utm_campaign=${t}`})}`,_=({via:e})=>(0,s.J9)()?`https://app.adjust.com/u0fwvk3?&redirect=http%3A%2F%2Fa.app.qq.com%2Fo%2Fsimple.jsp%3Fpkgname%3Dcom.duolingo&campaign=${e}`:l.Z.hasMobileApp||"mobile_web_to_app_conversion"===e?"share_profile"===e?`${d}`:`${c}&adjust_label=${e}`:(0,r.H8)(22504,void 0,{addRightToLeftMark:!1}),v=({isAndroidBanner:e,via:t})=>e?(0,s.J9)()?"http://zhushou.360.cn/detail/index/soft_id/361348":`${c}&adjust_label=android_banner`:(0,s.J9)()?"http://zhushou.360.cn/detail/index/soft_id/361348":l.Z.hasMobileApp?"share_profile"===t?`${d}`:`${c}&adjust_label=${t}`:h({utmCampaign:t,utmContent:"download_button"}),f=e=>{const t=document.createElement("a");t.href="https://android-release.duolingo.cn/Duo.latest.apk",t.download="duolingo.apk",t.click(),(0,o.j)("china_apk_download",{via:e}),window.URL.revokeObjectURL(t.href)},S=e=>!e&&(l.Z.ios||l.Z.android)},35160:(e,t,a)=>{"use strict";var s,n;a.d(t,{W:()=>n,t:()=>s}),function(e){e.Achievement="ACHIEVEMENT",e.AgeRestrictedLeaderboardsIntro="AGE_RESTRICTED_LEADERBOARDS_INTRO",e.Alert="ALERT",e.AllowMicrophone="ALLOW_MICROPHONE",e.B2bDownloadCodes="B2B_DOWNLOAD_CODES",e.B2bRemoveLearner="B2B_REMOVE_LEARNER",e.B2bSendCodes="B2B_SEND_CODES",e.CardUpdate="CARD_UPDATE",e.ChangeUiLanguage="CHANGE_UI_LANGUAGE",e.Confirm="CONFIRM",e.Debug="DEBUG",e.DiamondTournamentEntry="DIAMOND_TOURNAMENT_ENTRY",e.DownloadText="DOWNLOAD_TEXT",e.EditFamily="EDIT_FAMILY",e.EfficacyPageMenu="EFFICACY_PAGE_MENU",e.EmailVerification="EMAIL_VERIFICATION",e.EmptyHearts="EMPTY_HEARTS",e.EmptyLegendaryHearts="EMPTY_LEGENDARY_HEARTS",e.FriendsQuestComplete="FRIENDS_QUEST_COMPLETE",e.FriendsQuestGift="FRIENDS_QUEST_GIFT",e.FriendsQuestIntro="FRIENDS_QUEST_INTRO",e.HeartsIntro="HEARTS_INTRO",e.HomeMessage="HOME_MESSAGE",e.InviteFamily="INVITE_FAMILY",e.InviteFriends="INVITE_FRIENDS",e.JoinClassroomConfirmation="JOIN_CLASSROOM_CONFIRMATION",e.LeaveClassroomConfirmation="LEAVE_CLASSROOM_CONFIRMATION",e.LegendaryPurchase="LEGENDARY_PURCHASE",e.LegendarySplash="LEGENDARY_SPLASH",e.MessageUser="MESSAGE_USER",e.MonthlyBadges="MONTHLY_BADGES",e.MonthlyChallengeIntro="MONTHLY_CHALLENGE_INTRO",e.NewCourseFork="NEW_COURSE_FORK",e.Notifications="NOTIFICATIONS",e.PickUiLanguage="PICK_UI_LANGUAGE",e.PremiumChange="PLUS_CHANGE",e.PremiumPurchase="PLUS_PURCHASE",e.PremiumPurchaseSecondary="PREMIUM_PURCHASE_SECONDARY",e.PremiumUnlimitedHearts="PREMIUM_UNLIMITED_HEARTS",e.ProfileCourses="PROFILE_COURSES",e.ProfileFollowSuggestions="PROFILE_FOLLOW_SUGGESTIONS",e.ProfileFriends="PROFILE_FRIENDS",e.ProfileFriendsInCommon="PROFILE_FRIENDS_IN_COMMON",e.ReportProfileUser="REPORT_PROFILE_USER",e.ReportSentence="REPORT_SENTENCE",e.SendNudge="SEND_NUDGE",e.SessionReview="SESSION_REVIEW",e.ShadowbanList="SHADOWBAN_LIST",e.ShadowbanUser="SHADOWBAN_USER",e.ShakeToReport="SHAKE_TO_REPORT",e.SignInUp="SIGN_IN_UP",e.StreakSocietyRewards="STREAK_SOCIETY_REWARDS",e.TestingTools="TESTING_TOOLS",e.TransliterationSettings="TRANSLITERATION_SETTINGS",e.TrialWall="TRIAL_WALL",e.V2Intro="V2_INTRO"}(s||(s={})),function(e){e.Custom="style-custom",e.Super="style-super",e.White="style-white"}(n||(n={}))},16689:(e,t,a)=>{"use strict";a.d(t,{$A:()=>n,R8:()=>o,br:()=>l,oe:()=>r,oo:()=>i,te:()=>d,uP:()=>c});var s=a(74311);const n=e=>{var t;return null===(t=e.filter((e=>"MONTHLY_CHALLENGES"===e.category&&(0,s.FF)(e)))[0])||void 0===t?void 0:t.goalId},r=e=>{const t=null==e?void 0:e.images.find((e=>"CHALLENGE_HEADER"===e.component));return null==t?void 0:t.image.lightMode.svg},i=e=>e.illustrations.challengeSessionEnd.lightMode.svg,o=e=>{const t=null==e?void 0:e.text.find((e=>"CHALLENGE_HEADER"===e.component));return null==t?void 0:t.options[0].text.uiString},l=e=>{var t;return null===(t=e.icon)||void 0===t?void 0:t.enabled.lightMode.svg},c=e=>null==e?void 0:e.displayTexts.challengeIntro.uiString,d=e=>null==e?void 0:e.illustrations.challengeIntro.lightMode.svg},20041:(e,t,a)=>{"use strict";a.d(t,{Iu:()=>r,Qd:()=>o,WZ:()=>p,Z3:()=>v,Zw:()=>_,dS:()=>h,fu:()=>i,ky:()=>m,oI:()=>l,pC:()=>g});var s=a(81149),n=a(68903);const r=["convertLingotsToGemsWeb","charactersTabCallout","darkMode","dogfoodingPreview","dynamic","emailVerified","guidebookCallout","immersivePlusPromo","kudosOffer","kudosReceive","leaderboardsIntro","legendaryRebrandGoldColor","maintenanceBreak","marketingOptIn","mobileWebToAppConversion","newYearsDiscount","pathChange","pathMigration","pathSectionsCallout","pathSkipping","plusBadge","plusBadgeFamily","plusBadgeMigration","reactivatedWelcome","resurrectedWelcome","schools201607Ad","schoolsJoinedClassroom","shakeToReportAlert","skillTreeMigration","streakFreezeRecurringOffer","streakFreezeUsed","streakRepairOffer","streakRepairApplied","superPreviewEndingCallout","turningNotificationsOn","v2Intro","webToAppConversion","webToAppConversionAggressive"],i=["dogfoodingPreview","superPreviewEndingCallout"],o={emailVerified:"EMAIL_VERIFIED",leaderboardsIntro:"WEB_LEADERBOARDS_INTRODUCTION",schools201607Ad:"SCHOOLS_2016_07_AD",skillTreeMigration:"NEW_TREE_CHANGE_V2",streakFreezeUsed:"STREAK_FREEZE_USED"},l=(0,n.p)(["CONFIRM","CONFIRM_SKIP_ALPHABET_GATE","FRIENDS_QUEST_GIFT","GENERIC_NOTIFICATION","LEGENDARY_WITH_LINGOTS","PRACTICE_HUB_SESSION_NOTIFICATION","REACTIONS","SEND_NUDGE","STREAK_SOCIETY_REWARDS","SUPER_OFFBOARDING","convertLingotsToGemsWeb","darkMode","dogfoodingPreview","dynamic","emailVerified","immersivePlusPromo","legendaryRebrandGoldColor","kudosOffer","kudosReceive","maintenanceBreak","marketingOptIn","mobileWebToAppConversion","newYearsDiscount","pathChange","reactivatedWelcome","resurrectedWelcome","shakeToReportAlert","schools201607Ad","schoolsJoinedClassroom","skillTreeMigration","streakFreezeRecurringOffer","streakFreezeUsed","streakRepairApplied","streakRepairOffer","turningNotificationsOn","webToAppConversion","webToAppConversionAggressive"]),c=(0,n.p)(["kudosOffer","kudosReceive","legendaryRebrandGoldColor","marketingOptIn","pathChange","reactivatedWelcome","resurrectedWelcome","streakFreezeRecurringOffer","streakFreezeUsed","streakRepairOffer","turningNotificationsOn","v2Intro","webToAppConversion","webToAppConversionAggressive","convertLingotsToGemsWeb"]),d=(0,n.p)(["streakRepairApplied"]),u=(0,n.p)(["emailVerified"]),p=(0,n.p)(["pathChange","pathMigration"]),g=e=>!i.includes(e),m=e=>e.every((e=>g(e))),h=(e,t)=>{if("pathChange"===e&&"control"===(0,s.j6)("path_web_path_change_notifications",void 0))return!0;if(!l(e)||!c(e)||!t)return!1;switch(e){case"kudosOffer":case"kudosReceive":case"legendaryRebrandGoldColor":case"pathChange":case"reactivatedWelcome":case"resurrectedWelcome":case"streakFreezeRecurringOffer":case"streakFreezeUsed":case"streakRepairOffer":case"turningNotificationsOn":case"webToAppConversion":case"webToAppConversionAggressive":case"convertLingotsToGemsWeb":return!0;case"marketingOptIn":return"experiment"===(0,s.j6)("gweb_migrate_marketing_opt_in_drawers_v2",void 0);default:return!1}},_=(e,t)=>!!(l(e)&&d(e)&&t)&&"streakRepairApplied"===e,v=(e,t)=>!!(l(e)&&u(e)&&t)&&"emailVerified"===e},18201:(e,t,a)=>{"use strict";a.d(t,{Z:()=>z});var s=a(81149),n=a(68903),r=a(1398),i=a(51158);const o=e=>{const t=(0,r.Z)(e);t.preload();const a=window.performance.now();return e=>(t.hasLoaded()||(0,i.Kp)(`Drawer ${e} was not preloaded at time of use`,{data:{isLoading:t.isLoading(),timeSincePreloadMS:window.performance.now()-a},ex:t.getError(),once:!0}),t)},l=o((()=>a.e(5137).then(a.bind(a,35137)))),c=o((()=>a.e(9272).then(a.bind(a,6729)))),d=(0,r.Z)((()=>a.e(638).then(a.bind(a,27032)))),u=(0,r.Z)((()=>a.e(9583).then(a.bind(a,62848)))),p=(0,r.Z)((()=>a.e(6333).then(a.bind(a,66333)))),g=(0,r.Z)((()=>a.e(555).then(a.bind(a,70555)))),m=(0,r.Z)((()=>a.e(3289).then(a.bind(a,40711)))),h=o((()=>a.e(8159).then(a.bind(a,8159)))),_=(0,r.Z)((()=>Promise.all([a.e(2668),a.e(4253),a.e(1343),a.e(614)]).then(a.bind(a,78631)))),v=o((()=>a.e(7198).then(a.bind(a,82384)))),f=(0,r.Z)((()=>a.e(3589).then(a.bind(a,83377)))),S=(0,r.Z)((()=>a.e(2732).then(a.bind(a,27510)))),E=(0,r.Z)((()=>a.e(969).then(a.bind(a,30969)))),y=(0,r.Z)((()=>a.e(7136).then(a.bind(a,47136)))),b=(0,r.Z)((()=>a.e(648).then(a.bind(a,30648)))),w=(0,r.Z)((()=>a.e(9494).then(a.bind(a,91779)))),I=(0,r.Z)((()=>a.e(7915).then(a.bind(a,51930)))),T=(0,r.Z)((()=>a.e(5537).then(a.bind(a,85537)))),k=(0,r.Z)((()=>a.e(9400).then(a.bind(a,79400)))),C=(0,r.Z)((()=>Promise.all([a.e(9981),a.e(230)]).then(a.bind(a,46809)))),R=(0,r.Z)((()=>Promise.all([a.e(9981),a.e(3970)]).then(a.bind(a,75924)))),O=(0,r.Z)((()=>a.e(6995).then(a.bind(a,93809)))),L=(0,r.Z)((()=>a.e(7087).then(a.bind(a,67087)))),P=(0,r.Z)((()=>a.e(9522).then(a.bind(a,59522)))),A=(0,r.Z)((()=>Promise.all([a.e(9981),a.e(9387)]).then(a.bind(a,4040)))),N=(0,r.Z)((()=>a.e(7495).then(a.bind(a,94871)))),D=(0,r.Z)((()=>a.e(9559).then(a.bind(a,59858)))),x=(0,r.Z)((()=>Promise.all([a.e(7034),a.e(4269)]).then(a.bind(a,77485)))),M=(0,r.Z)((()=>a.e(350).then(a.bind(a,59457)))),F=(0,r.Z)((()=>a.e(1359).then(a.bind(a,61359)))),U=(0,r.Z)((()=>a.e(7733).then(a.bind(a,40736)))),H=(0,r.Z)((()=>Promise.all([a.e(4705),a.e(1030)]).then(a.bind(a,62379)))),j=(0,r.Z)((()=>Promise.all([a.e(4705),a.e(8284)]).then(a.bind(a,75281)))),G=(0,r.Z)((()=>Promise.all([a.e(9981),a.e(9933)]).then(a.bind(a,59996)))),B=(0,r.Z)((()=>a.e(9888).then(a.bind(a,82131)))),V=(0,r.Z)((()=>a.e(7384).then(a.bind(a,82791)))),z=e=>{switch(e){case"CONFIRM":return l(e);case"CONFIRM_SKIP_ALPHABET_GATE":return c(e);case"FRIENDS_QUEST_GIFT":return m;case"GENERIC_NOTIFICATION":return h(e);case"LEGENDARY_WITH_LINGOTS":return v(e);case"PRACTICE_HUB_SESSION_NOTIFICATION":return I;case"REACTIONS":return T;case"SEND_NUDGE":return P;case"STREAK_SOCIETY_REWARDS":return M;case"SUPER_OFFBOARDING":return F;case"charactersTabCallout":return;case"convertLingotsToGemsWeb":return V;case"darkMode":return d;case"dogfoodingPreview":return u;case"dynamic":return p;case"emailVerified":return g;case"guidebookCallout":return;case"immersivePlusPromo":return _;case"kudosOffer":case"kudosReceive":return U;case"leaderboardsIntro":return;case"legendaryRebrandGoldColor":return S;case"maintenanceBreak":return B;case"marketingOptIn":return E;case"mobileWebToAppConversion":return y;case"newYearsDiscount":return w;case"pathChange":return"experiment"===(0,s.j6)("path_web_path_change_notifications",void 0)?f:void 0;case"pathMigration":case"pathSectionsCallout":case"pathSkipping":case"plusBadge":case"plusBadgeFamily":case"plusBadgeMigration":return;case"reactivatedWelcome":return G;case"resurrectedWelcome":return R;case"schools201607Ad":return O;case"schoolsJoinedClassroom":return L;case"shakeToReportAlert":return k;case"skillTreeMigration":return b;case"streakFreezeRecurringOffer":return A;case"streakFreezeUsed":return N;case"streakRepairApplied":return x;case"streakRepairOffer":return D;case"superPreviewEndingCallout":return;case"turningNotificationsOn":return C;case"v2Intro":return;case"webToAppConversion":return j;case"webToAppConversionAggressive":return H;case void 0:return;default:throw(0,n.RJ)(e),Error()}}},25447:(e,t,a)=>{"use strict";a.d(t,{c:()=>s});const s=e=>{const t=Object.entries(e.message)[0],a=t[0],s=t[1];return{displayText:e.displayText,id:a,payload:s}}},99644:(e,t,a)=>{"use strict";a.d(t,{_u:()=>o,g2:()=>l,yY:()=>i});var s=a(99369),n=a(68903),r=a(11811);const i=(e,t,a)=>{const n=e[a.unitIndex].levels[a.levelIndex];if("active"!==n.state)return e;let r=e;t&&(r=(0,s.setIn)(r,[a.unitIndex,"levels",a.levelIndex,"finishedSessions"],n.totalSessions)),r=(0,s.setIn)(r,[a.unitIndex,"levels",a.levelIndex,"state"],"passed");const i=e[a.unitIndex].levels.length-1===a.levelIndex,o=a.unitIndex+(i?1:0);if(o<e.length){const e=i?0:a.levelIndex+1;return(0,s.setIn)(r,[o,"levels",e,"state"],"active")}return r},o=(e,t,a)=>{let o=a;switch(e){case r.FF.Legendary:case r.FF.LegendaryLevel:case r.FF.LegendaryLexemePractice:case r.FF.Lesson:case r.FF.LexemePractice:case r.FF.LevelReview:case"story":{const a=Math.min(t.level.totalSessions,Math.max(t.level.finishedSessions,t.level.finishedSessions+1));o=a===t.level.totalSessions?(0,n.gB)(e,[r.FF.Legendary,r.FF.LegendaryLevel,r.FF.LegendaryLexemePractice])?(0,s.setIn)(o,[t.unitIndex,"levels",t.levelIndex,"state"],"legendary"):i(o,!0,t):(0,s.setIn)(o,[t.unitIndex,"levels",t.levelIndex,"finishedSessions"],a);break}case r.FF.UnitReview:o=i(o,!0,t);break;default:throw Error(`Offline path update not implemented for session type ${e}`)}return o},l=(e,t,a)=>{if(void 0===e.skillId)return a;let n=a[e.skillId];return void 0===n?a:(t.level.finishedSessions+1===t.level.totalSessions?(n=(0,s.set)(n,"finishedLevels",n.finishedLevels+1),n=(0,s.set)(n,"finishedLessons",0)):n=(0,s.set)(n,"finishedLessons",n.finishedLessons+1),Object.assign(Object.assign({},a),{[e.skillId]:n}))}},93890:(e,t,a)=>{"use strict";a.d(t,{KA:()=>l,m3:()=>d,ul:()=>r,zK:()=>o});var s=a(80254),n=a(17135);const r=(e,t,a)=>{const s=c(a.xpSummaries),n=[],r=t.inventory.society_streak_freeze,i=u(r,s,a.timezoneOffset),o=Math.min(i,e);void 0!==r&&o>0&&n.push(Object.assign(Object.assign({},r),{quantity:r.quantity-o}));const l=e-o,d=t.inventory.streak_freeze,p=u(d,s,a.timezoneOffset),g=Math.min(p,l);if(void 0!==d&&g>0&&n.push(Object.assign(Object.assign({},d),{quantity:d.quantity-g})),o+g!==e)throw Error("Streak freezes consumed does not match streak freezes to use");return n},i=(e,t)=>{const a=(0,n.zM)(e,t);return(0,n.VV)(a)/1e3},o=(e,t,a)=>{const s=c(a.xpSummaries);if(void 0===s)return 0;const r=i(e,a.timezoneOffset),o=Math.max(0,(0,n.t8)(1e3*s,1e3*r)-1),l=u(t.inventory.society_streak_freeze,s,a.timezoneOffset),d=u(t.inventory.streak_freeze,s,a.timezoneOffset);return Math.min(o,l+d)},l=(e,t,a)=>{const{streakData:s,xpSummaries:r}=a;if(!s.currentStreak)return{streakData:s,xpSummaries:r};const o=c(r);if(void 0===o)return{streakData:s,xpSummaries:r};const l=(0,n.zM)(o),d={dailyGoalXp:a.xpGoal,frozen:!1,gainedXp:0,numSessions:0,repaired:!1,streakExtended:!1,userId:a.id},u={};for(let e=0;e<t;e++){l.setDate(l.getDate()+1);const e=Object.assign(Object.assign({},d),{date:(0,n.g8)(l),frozen:!0});u[(0,n.zK)(e.date)]=e}const p=i(e,a.timezoneOffset);return{streakData:Math.max(0,(0,n.t8)(1e3*(0,n.g8)(l),1e3*p)-1)<1?{currentStreak:Object.assign(Object.assign({},s.currentStreak),{endDate:(0,n.zK)((0,n.g8)(l))}),previousStreak:s.previousStreak}:{currentStreak:null,previousStreak:s.currentStreak},xpSummaries:Object.assign(Object.assign({},r),u)}},c=e=>{const t=s.VO(e).filter((e=>void 0!==e&&(e.frozen||e.repaired||e.streakExtended)));if(0!==t.length)return Math.max(...t.map((e=>e.date)))},d=(e,t)=>{var a,s;const{streakData:r,xpSummaries:o}=t,l=c(o),d=i(e.time,t.timezoneOffset),u=Math.max(0,(0,n.t8)(1e3*(null!=l?l:0),1e3*d)),p=(0,n.zK)(d),g=o[p],m=void 0===g?{dailyGoalXp:t.xpGoal,date:d,frozen:!1,gainedXp:e.xp,numSessions:0,repaired:!1,streakExtended:!0,userId:t.id}:Object.assign(Object.assign({},g),{gainedXp:(null!==(a=null==g?void 0:g.gainedXp)&&void 0!==a?a:0)+e.xp}),h=Object.assign(Object.assign({},o),{[p]:m});return{streakData:u>1||null===r.currentStreak?{currentStreak:{endDate:p,length:1,startDate:p},previousStreak:r.currentStreak}:u>0?{currentStreak:Object.assign(Object.assign({},r.currentStreak),{endDate:p,length:(null===(s=r.currentStreak)||void 0===s?void 0:s.length)+1}),previousStreak:r.previousStreak}:r,xpSummaries:h}},u=(e,t,a)=>{if(void 0===e)return 0;const s=i(e.purchaseDate,a);return t&&s>t?0:e.quantity}},36914:(e,t,a)=>{"use strict";a.d(t,{BA:()=>d,iR:()=>_,kL:()=>p,lE:()=>g,lk:()=>v,m8:()=>f,qB:()=>h,u$:()=>u,xc:()=>m});var s=a(59249),n=a(81149),r=a(68903),i=a(8654),o=a(93746),l=a(79465),c=a(16086);const d=["hi","getStarted","coursePicker","hdyhau","learningReason","proficiency","courseOverview","dailyGoal","notificationPrimer","accountLink","choosePath","pathReactionOptional","pathReaction"],u=(0,r.p)(["hi","getStarted","pathReactionOptional","pathReaction"]);var p;!function(e){e[e.Casual=10]="Casual",e[e.Intense=50]="Intense",e[e.Regular=20]="Regular",e[e.Serious=30]="Serious"}(p||(p={}));const g="welcomeStep",m=(e,t={})=>{var a,s;switch(e){case"hi":return(0,i.H8)(38600);case"getStarted":return(0,i.H8)(38601);case"coursePicker":return(0,i.H8)(38599);case"hdyhau":return(0,i.H8)(25725);case"learningReason":switch(t.learningReason){case void 0:return(0,i.H8)(34656,{language_name:null!==(a=t.languageName)&&void 0!==a?a:""});case"brain":return(0,i.H8)(38581);case"fun":return(0,i.H8)(38585);case"family":return(0,i.H8)(38580);case"school":return(0,i.H8)(38582);case"travel":return(0,i.H8)(38584);case"work":return(0,i.H8)(38583);default:return(0,i.H8)(38586)}case"proficiency":switch(t.proficiency){case void 0:return(0,i.H8)(29828,{language_name:null!==(s=t.languageName)&&void 0!==s?s:""});case 1:return(0,i.H8)(38590);case 2:return(0,i.H8)(38591);case 3:return(0,i.H8)(38592);default:return(0,i.H8)(38589)}case"courseOverview":return(0,i.H8)(38587);case"dailyGoal":switch(t.dailyGoal){case void 0:return(0,i.H8)(38579);case p.Regular:return(0,i.H8)(43420,{num:50},{exportTags:!0});case p.Serious:return(0,i.H8)(43420,{num:75},{exportTags:!0});case p.Intense:return(0,i.H8)(43420,{num:100},{exportTags:!0});default:return(0,i.H8)(43420,{num:25},{exportTags:!0})}case"notificationPrimer":return(0,i.H8)(38578);case"accountLink":return(0,i.H8)(20676);case"choosePath":return(0,i.H8)(38572);case"pathReactionOptional":return(0,i.H8)(38866);case"pathReaction":return"start"===t.pathChoice?(0,i.H8)(38867):(0,i.H8)(38573);default:return(0,r.RJ)(e),""}},h=(e,t,a)=>{if("en"===t)return(0,i._i)(43008);const s=a.find((a=>a.fromLanguageId===e&&a.learningLanguageId===t));if(!s)return;const n=(0,o.vY)(t),r=s.numLearners;if(r<1e6)return(0,i._i)(42628,{language_name:n,num:(1e3*Math.floor(r/1e3)).toLocaleString()});const l=Math.floor(r/1e6);return l<10?(0,i._i)(42665,{language_name:n,num:l}):l<100?(0,i._i)(42666,{language_name:n,num:l}):(0,i._i)(42667,{language_name:n,num:l})},_=(e,t,a={})=>{switch(e){case"hi":(0,l.j)("duo_introduction_tap",{target:t});break;case"getStarted":(0,l.j)("journey_introduction_tap",{target:t});break;case"coursePicker":(0,l.j)("course_picker_tap",{target:t,via:"onboarding"});break;case"hdyhau":(0,l.j)("acquisition_survey_reason_tap","continue"===t?{selected_value:a.surveyChoice,target:t}:{target:t});break;case"learningReason":(0,l.j)("learning_reason_tap","continue"===t?{selected_value:a.learningReason,target:t}:{target:t});break;case"proficiency":(0,l.j)("prior_proficiency_tap",{target:t});break;case"courseOverview":(0,l.j)("continue"===t?"course_preview_next_click":"course_preview_back_click",{});break;case"dailyGoal":(0,l.j)("daily_goal_tap","continue"===t?{selected_value:a.dailyGoal,target:t}:{target:t});break;case"notificationPrimer":(0,l.j)("notification_primer_tap",{target:t});break;case"accountLink":(0,l.j)("welcome_signup_tap",{target:"continue"===t?"skip":"back"});break;case"choosePath":(0,l.j)("welcome_fork_tap","continue"===t?{selected_value:"start"===a.pathChoice?"basics":"placement",target:t}:{target:t});break;case"pathReactionOptional":case"pathReaction":break;default:(0,r.RJ)(e)}},v=()=>!!(0,s.gQ)("debugOnboarding")||"experiment"===(0,n.j6)("gweb_redesign_onboarding_v3",void 0),f=e=>(0,c.Pc)()&&void 0!==e&&!["CN","IN"].includes(e)&&"experiment"===(0,n.j6)("ginfra_web_disable_social_registration",void 0)},89803:(e,t,a)=>{"use strict";a.d(t,{Bf:()=>p,VB:()=>d,o7:()=>u,u6:()=>g,vi:()=>c});var s=a(80254),n=a(54412),r=a(53229),i=a(93746),o=a(79465),l=a(16086);const c=s.IH((()=>{if((0,n.d8)(n.Vj.TimeSiteLoaded,Date.now().toString()),(0,l.Pc)())(0,n.ej)(n.Vj.LandingPage)||(0,n.d8)(n.Vj.LandingPage,n.m_),(0,n.ej)(n.Vj.LandingURL)||(0,n.d8)(n.Vj.LandingURL,n.m_),(0,n.ej)(n.Vj.InitialReferrer)||(0,n.d8)(n.Vj.InitialReferrer,n.m_);else if((0,n.ej)(n.Vj.LandingURL)||(0,n.d8)(n.Vj.LandingURL,window.location.href),(0,n.ej)(n.Vj.InitialReferrer)||(0,n.d8)(n.Vj.InitialReferrer,window.document.referrer||"$direct"),!(0,n.ej)(n.Vj.LastReferrer)){const e=document.referrer;/duolingo\.(cn|com)/.test(e)||(0,n.d8)(n.Vj.LastReferrer,document.referrer)}})),d=e=>{let t=!0;(0,n.ej)(n.Vj.LandingPage)?t=!1:(0,n.d8)(n.Vj.LandingPage,e),(0,o.j)("landing_page_load",{initial_landing:t,page:e,ui_language:(0,i.D3)(i.h9)})},u=e=>{const t=(0,r.vl)(e.search),a=t.email_type;if(a){const e=t.day_offset;(0,o.j)("email_tap",{day_offset:e?parseInt(e,10):void 0,email_type:a,target:t.target})}},p=(e,t)=>{(0,o.j)("splash load",Object.assign(Object.assign(Object.assign({},(0,o.OD)("acquisition_")),(0,o.OD)("latest_")),{has_cookie:!!(0,n.ej)(n.Vj.LoggedOutUUID),subpage:t,use_nweb:!0})),d(t),u(e)},g=s.IH((()=>{const e=(0,n.ej)(n.Vj.TimeSiteLoaded),t={};if(e)try{const a=parseInt(e,10);t.time_since_open=Math.round((Date.now()-a)/1e3)}catch(e){}(0,o.j)("app_close",t)}))},74971:(e,t,a)=>{"use strict";a.d(t,{JZ:()=>p,U9:()=>o,Xb:()=>u,ZX:()=>g});var s=a(50548),n=a(79465),r=a(74597),i=a(16086);const o=void 0!==window.OptanonWrapper,l="onetrust-banner-sdk";const c=()=>{var e,t,a;return!((0,i.Pc)()||null!==(a=null===(t=null===(e=window.OneTrust)||void 0===e?void 0:e.IsAlertBoxClosed)||void 0===t?void 0:t.call(e))&&void 0!==a&&a)};o&&new class{constructor(){this.updateBannerVisibility=()=>{const e=!r.Z.desktop&&window.location.pathname.startsWith("/year-in-review/"),t=!r.Z.desktop&&window.location.pathname.startsWith("/weekly-report"),a=(0,i.Pc)()||e||t;void 0===this.hidingStyleComponent?a&&(this.hidingStyleComponent=(e=>{const t=document.createElement("style");return t.textContent=e,document.head.append(t),t})(`#${l} { display: none !important; }`)):a||(this.hidingStyleComponent.remove(),this.hidingStyleComponent=void 0)},this.updateBannerHeight=()=>{var e;const t=document.getElementById(l),a=null!==(e=null==t?void 0:t.clientHeight)&&void 0!==e?e:0;document.body.style.setProperty("--onetrust-banner-height",`${a}px`)},this.startWatchingForBannerUpdates=(e=!1)=>{if(window.clearInterval(this.bannerUpdateInterval),!c()&&!e)return;let t=20;this.bannerUpdateInterval=window.setInterval((()=>{this.updateBannerHeight(),t-=1,0===t&&window.clearInterval(this.bannerUpdateInterval)}),100)},s.m8.listen(this.updateBannerVisibility),window.OptanonWrapper=()=>{this.startWatchingForBannerUpdates(!0),window.OnetrustActiveGroups&&(0,n.j)("cookie_consent_updated",{cookie_consent_groups:window.OnetrustActiveGroups})},window.addEventListener("resize",(()=>this.startWatchingForBannerUpdates())),this.updateBannerVisibility(),this.startWatchingForBannerUpdates()}};const d={targeting:"C0004"},u=e=>{var t,a;return!o||null!==(a=null===(t=window.OnetrustActiveGroups)||void 0===t?void 0:t.includes(`,${d[e]},`))&&void 0!==a&&a},p=()=>{var e,t;null===(t=null===(e=window.OneTrust)||void 0===e?void 0:e.ToggleInfoDisplay)||void 0===t||t.call(e)},g=()=>{var e,t,a;return null!==(a=null===(t=null===(e=window.OneTrust)||void 0===e?void 0:e.GetDomainData)||void 0===t?void 0:t.call(e).CookieSettingButtonText)&&void 0!==a?a:"Cookie Settings"}},23275:(e,t,a)=>{"use strict";a.d(t,{$:()=>j,B9:()=>y,Bm:()=>h,E0:()=>F,Eb:()=>Y,G7:()=>V,II:()=>f,Ib:()=>W,Kq:()=>M,Mj:()=>B,Nc:()=>z,Nk:()=>m,OE:()=>R,Ol:()=>E,P6:()=>O,TH:()=>G,U8:()=>b,Wc:()=>H,cy:()=>x,d$:()=>_,dN:()=>q,e4:()=>Q,eK:()=>N,f:()=>X,f2:()=>P,kL:()=>D,m8:()=>k,mH:()=>Z,mo:()=>w,pG:()=>L,qM:()=>K,s6:()=>U,sz:()=>ee,tX:()=>A,tr:()=>T,u6:()=>I,w1:()=>C,xV:()=>J,xY:()=>$,yP:()=>g});var s=a(80254),n=a(77167),r=a(59249),i=a(81149),o=a(68903),l=a(8654),c=a(93746),d=a(37825),u=a(12125),p=a(97106);const g=500,m=(e,t)=>e.unitIndex!==t.unitIndex?e.unitIndex-t.unitIndex:e.levelIndex-t.levelIndex,h=e=>k(e,(e=>"active"===e.state)),_=e=>k(e,(e=>["active","passed"].includes(e.state)&&v(e)),void 0,{findLast:!0}),v=e=>["skill","story","practice"].includes(e.type)||"unit_review"===e.type&&!H(e.state),f=({levelType:e,path:t})=>t.flatMap((e=>e.levels)).some((t=>t.type===e)),S=({levelType:e,path:t})=>t.flatMap(((e,t)=>e.levels.map((e=>Object.assign({unitIndex:t},e))))).filter((t=>!e||t.type===e)),E=({levelType:e,path:t})=>{const a=h(t),s=null==a?void 0:a.unitIndex,n=t.slice(0,void 0===s?-1:s+1);return S({levelType:e,path:n}).filter((e=>H(e.state)))},y=({section:e})=>S({path:e}).filter((e=>H(e.state))).length,b=({levelType:e,path:t})=>{const a=h(t),s=null==a?void 0:a.unitIndex,n=t.slice(0,void 0===s?-1:s+1);return S({levelType:e,path:n}).map((e=>e.finishedSessions)).reduce(((e,t)=>e+t),0)},w=(e,t=-1)=>{const a=(e=>{const t=E({levelType:"skill",path:e}).map((e=>{const t=e.pathLevelClientData;return{levelId:e.id,skillId:t.skillId,unitIndex:e.unitIndex}})),a=h(e),n=[...a?[...t,{levelId:null==a?void 0:a.level.id,skillId:(null==a?void 0:a.level.pathLevelClientData).skillId,unitIndex:null==a?void 0:a.unitIndex}]:t].reverse();return s.jj(n,!1,s.Cb("skillId"))})(e).slice(0,t);return a[s.MX(0,a.length-1)]},I=(e,{alignment:t,blocksHomeMessages:a,focus:s,id:n,isPathVisible:r,offset:i}={})=>{const o=[{alignment:t,behavior:r?"smooth":void 0,blocksHomeMessages:null==a||a,id:n,ignoreBlocker:!r,levelId:e,name:"PATH_LEVEL_CENTER",offset:i}];return s&&o.push({blocksHomeMessages:!0,levelId:e,name:"PATH_LEVEL_FOCUS"}),o},T=e=>k(e,(e=>"passed"===e.state&&(0,d.d)(e.type))),k=(e,t,a,s)=>{var n;if(a){const s=null===(n=e[a.unitIndex])||void 0===n?void 0:n.levels[a.levelIndex];if(s&&t(s))return Object.assign(Object.assign({},a),{level:e[a.unitIndex].levels[a.levelIndex],unitNumber:e[a.unitIndex].unitNumber})}if(null==s?void 0:s.findLast){for(let a=e.length-1;a>=0;a--)for(let s=e[a].levels.length-1;s>=0;s--)if(t(e[a].levels[s]))return{level:e[a].levels[s],levelIndex:s,unitIndex:a,unitNumber:e[a].unitNumber}}else for(let a=0;a<e.length;a++)for(let s=0;s<e[a].levels.length;s++)if(t(e[a].levels[s]))return{level:e[a].levels[s],levelIndex:s,unitIndex:a,unitNumber:e[a].unitNumber}},C=e=>{var t;const a=Z(e);if((0,r.gQ)("lessonIndex"))return parseInt(null!==(t=(0,r.ky)("lessonIndex"))&&void 0!==t?t:"",10);if((0,u.R0)(null==a?void 0:a.status)&&void 0!==(null==a?void 0:a.lessonsCompleted))return Math.min(a.lessonsCompleted,e.totalSessions);if(("grammar"===e.subtype||"practice"===e.type)&&H(J(e))){const t=e.totalSessions-(e.hasLevelReview?1:0);return s.MX(t-1)}return e.finishedSessions},R=(e,t)=>{const a=e[t.unitIndex].levels[t.levelIndex+1],s=e[t.unitIndex].unitNumber;if(a)return{level:a,levelIndex:t.levelIndex+1,unitIndex:t.unitIndex,unitNumber:s};const n=e[t.unitIndex+1];return n?{level:n.levels[0],levelIndex:0,unitIndex:t.unitIndex+1,unitNumber:n.unitNumber}:void 0},O=(e,t,a={})=>{const s=[...I(e.id,a),{blocksHomeMessages:!0,delay:a.isPathVisible?void 0:g,levelId:e.id,name:"PATH_LEVEL_STATE",prevState:"active"}];return t&&(s.push(...I(t.id,{focus:!0,isPathVisible:!0})),s.push({blocksHomeMessages:!0,levelId:t.id,name:"PATH_LEVEL_STATE",prevState:"locked"}),"practice"!==t.type&&"skill"!==t.type||s.push({blocksHomeMessages:!0,levelId:t.id,name:"PATH_LEVEL_PROGRESS_FADE"}),s.push({blocksHomeMessages:!0,levelId:t.id,name:"PATH_LEVEL_TOOLTIP_FADE"})),s},L=(e,t,a={})=>{const s=[...I(e.id,a),{blocksHomeMessages:!0,delay:a.isPathVisible?void 0:g,levelId:e.id,name:"PATH_LEVEL_STATE",prevIsActiveAssignment:!0,prevState:"active"}];return t&&(s.push(...I(t.id,{focus:!0,isPathVisible:!0})),"skill"===t.type&&s.push({blocksHomeMessages:!0,levelId:t.id,name:"PATH_LEVEL_PROGRESS_FADE"}),s.push({blocksHomeMessages:!0,levelId:t.id,name:"PATH_LEVEL_TOOLTIP_FADE"})),s},P=e=>[...I(e.levels[0].id,{alignment:"top"}),{blocksHomeMessages:!0,delay:g,name:"PATH_UNIT_STATE",prevState:"passed",unitIndex:e.unitIndex},...e.levels.map((e=>({blocksHomeMessages:!0,levelId:e.id,name:"PATH_LEVEL_STATE",prevState:"passed"})))],A=({level:e,levelIndex:t,unitIndex:a,isLegendary:s=!1,isSectionTest:n=!1,sectionIndex:i=0})=>{if("alphabet_gate"===e.type)return"/characters";const o=(0,r.gQ)("debugPath"),l=void 0!==Z(e);if(s)return`/lesson/unit/${a+1}/legendary/${t+1}`;if(n&&void 0!==i)return`/lesson/section/${i+1}/test`;if(o||H(e.state)||l)return`/lesson/unit/${a+1}/level/${t+1}${o?"?debugPath=1":""}`;switch(e.state){case"active":return"/lesson";case"unit_test":return`/lesson/unit/${a+1}/test`;default:throw Error(`Unable to retrieve URL for ${e.state} level.`)}},N=e=>{let t=0,a=0,s=0,n=0,r=0,i=!1;for(const o of e){n++;let e=!0,l=!0;for(const s of o.levels){const n=H(s.state);i||void 0===s.dailyRefreshInfo||(i=!0),n&&(t++,"skill"===s.type&&a++),e=e&&n,l=l&&"legendary"===s.state}e&&s++,l&&r++}return{num_levels_completed:t,num_skill_levels_completed:a,num_units_completed:s,num_units_legendary:r,path_complete:i?s>=n-1:s===n}},D=e=>{var t,a;return null!==(a=null!==(t=h(e))&&void 0!==t?t:T(e))&&void 0!==a?a:(e=>{const t=e[e.length-1],a=t.levels.length-1;return{level:t.levels[a],levelIndex:a,unitIndex:e.length-1,unitNumber:t.unitNumber}})(e)},x=e=>[...I(e.id,{focus:!0}),{blocksHomeMessages:!0,delay:g,levelId:e.id,name:"PATH_LEVEL_STATE",prevState:"unit_test"},{blocksHomeMessages:!0,levelId:e.id,name:"PATH_LEVEL_PROGRESS_FADE"},{blocksHomeMessages:!0,levelId:e.id,name:"PATH_LEVEL_TOOLTIP_FADE"}],M=(e,t)=>t.findIndex((t=>t.units.some((t=>t.unitIndex===e)))),F=e=>e.levels.findIndex((e=>"unit_test"===e.state)),U=e=>e.every((e=>e.levels.every((e=>H(e.state))))),H=e=>!!e&&["legendary","passed"].includes(e),j=e=>e.hasLevelReview&&C(e)===e.totalSessions-1,G=e=>"unit_test"===e.state,B=e=>e?"isPathExtension"in e.pathLevelClientData&&e.pathLevelClientData.isPathExtension:void 0,V=e=>"skill"===(null==e?void 0:e.type)?e.pathLevelClientData.crownLevelIndex:void 0,z=(e,t,a)=>{if(H(a.level.state))return!1;const n=((e,t)=>{const a=[],{unitIndex:s,levelIndex:n}=t;for(let r=s;r<e.length;r++)for(let i=r===s?n:0;i<e[r].levels.length;i++){const s=e[r].levels[i];if(s.id!==t.level.id){if(s.isInProgressSequence)return a;a.push(s.id)}}return a})(e,a);if(0===n.length)return!1;const r=E({path:e}).map((e=>e.id)),i=E({path:t}).map((e=>e.id)),o=s.e5(i,r),l=[a.level.id,...n];return!!s.Xy(o,l)},Z=e=>{let t;switch(e.type){case"skill":case"story":t=e.pathLevelClientData.assignmentInfo}return null!=t?t:void 0},$=e=>{const t=Z(e);return!(void 0===t||!(0,u.R0)(t.status))&&0!==t.lessonsCompleted&&t.lessonsCompleted<t.lessonsToComplete},q=e=>{const t=Z(e);return!(void 0===t||!(0,u.R0)(t.status)||t.type!==n.bu.AssignmentType.SKILL)&&t.lessonsCompleted===t.lessonsToComplete-1},W=(e,t)=>void 0!==t&&void 0!==e&&t.assignmentId===e.assignmentId,Q=(e,t,a)=>{switch(e.type){case"alphabet_gate":case"chest":return;case"practice":return(0,l.H8)(39844);case"skill":{const t=(0,c.M$)(window.duo.uiLanguage),a="teachingObjective"in e.pathLevelClientData?e.pathLevelClientData.teachingObjective:void 0;return a?a[0].toLocaleUpperCase(t)+a.slice(1):H(e.state)?(0,l.H8)(36805):(0,l.H8)(39121)}case"story":return"storyName"in e.pathLevelClientData?e.pathLevelClientData.storyName:void 0;case"unit_review":return a?(0,l.H8)(43037):(0,l.H8)(38614,{unit_num:t});default:return void(0,o.RJ)(e.type)}},Y=e=>{const t=Z(e);return(0,u.Zv)(null==t?void 0:t.status)&&!["unit_test","active"].includes(e.state)},J=e=>{const t=Z(e),a=(0,u.R0)(null==t?void 0:t.status),s=(0,u.Zv)(null==t?void 0:t.status)&&!["unit_test","active"].includes(e.state);return a?"assigned":s?"passed":e.state},K=(e,t)=>"unit_test"===e.state||!!(0,d.d)(e.type)&&"legendary"===t,X=e=>"unit_review"===e.type?p.mX:H(J(e))?p.ix:"story"===e.type&&"fixedXpAward"in e.pathLevelClientData?e.pathLevelClientData.fixedXpAward:j(e)?p.pu:p.Lu,ee=()=>["experiment"===(0,i.j6)("path_web_sections",void 0)||"control"!==(0,i.j6)("path_web_sections_v2",void 0),"experiment"===(0,i.j6)("path_web_sections",void 0)||"sections_and_persistent"===(0,i.j6)("path_web_sections_v2",void 0)]},89065:(e,t,a)=>{"use strict";a.d(t,{Fz:()=>l,SJ:()=>g,U_:()=>c,X7:()=>u,df:()=>d,uu:()=>o,y2:()=>p});var s=a(68903),n=a(8654),r=a(23275),i=a(41631);const o=[i.t.ROOKIE,i.t.EXPLORER,i.t.TRAVELER,i.t.TRAILBLAZER,i.t.ADVENTURER,i.t.DISCOVERER,i.t.DAREDEVIL,i.t.NAVIGATOR,i.t.CHAMPION,i.t.DAILY_REFRESH],l=6,c=e=>{var t;return"personalized_practice"===e.type?i.t.CHAMPION:"daily_refresh"===e.type?i.t.DAILY_REFRESH:null!==(t=o[e.index])&&void 0!==t?t:i.t.CHAMPION},d=e=>{const t=e.units.flatMap((e=>e.levels.map((e=>e.state))));return t.includes("active")?"active":t.every((e=>(0,r.Wc)(e)))?"complete":"locked"},u=e=>{switch(e){case i.t.ROOKIE:return(0,n.H8)(42986);case i.t.EXPLORER:return(0,n.H8)(42987);case i.t.TRAVELER:return(0,n.H8)(42988);case i.t.TRAILBLAZER:return(0,n.H8)(27636);case i.t.ADVENTURER:return(0,n.H8)(42990);case i.t.DISCOVERER:return(0,n.H8)(42991);case i.t.DAREDEVIL:return(0,n.H8)(42992);case i.t.NAVIGATOR:return(0,n.H8)(42993);case i.t.CHAMPION:return(0,n.H8)(42994);case i.t.DAILY_REFRESH:return(0,n.H8)(42995);default:throw(0,s.RJ)(e),Error(`Unexpected Path Section type: ${e}`)}},p=(e,t)=>{switch(e){case i.t.ROOKIE:return(0,n.H8)(40024);case i.t.EXPLORER:return(0,n.H8)(40025);case i.t.TRAVELER:return(0,n.H8)(40026);case i.t.TRAILBLAZER:return(0,n.H8)(40027);case i.t.ADVENTURER:return(0,n.H8)(40028);case i.t.DISCOVERER:return(0,n.H8)(40029);case i.t.DAREDEVIL:return(0,n.H8)(40030);case i.t.NAVIGATOR:return(0,n.H8)(40031);case i.t.DAILY_REFRESH:return(0,n.H8)(42996);case i.t.CHAMPION:return(0,n.H8)(40032,{language_name:t});default:throw(0,s.RJ)(e),Error(`Unexpected Path Section type: ${e}`)}},g=e=>{var t;const a=o.findIndex((t=>t===e));return null!==(t=o[a+1])&&void 0!==t?t:i.t.CHAMPION}},71371:(e,t,a)=>{"use strict";a.d(t,{Z:()=>_});var s=a(59249),n=a(39852),r=a(12301),i=a(51158),o=a(18804),l=a(79465);const c={challenge_continue:800,challenge_grade:300,challenge_typing:60,character_animation_play:300,explanation_open:3e3,language_switch:1e3,lesson_start:3e3,login_success_or_fail:1e3,open_leaderboard_profile:300,open_profile:300,purchase_item_in_shop:1e3,registration_success_or_fail:3e3,session_end_grade:1e3,speech_grade:300,splash_to_home:3e3,splash_to_intro:5e3,story_completion_delay:3e3,story_start:3e3,stripe_elements_load:3e3,subscription_delivery:3e3,trial_user_creation:3e3,tts_play:50,welcome_fork_to_session_start:3e3},d={stripe_elements_load:1,subscription_delivery:1},u={},p=e=>{if(!m(e))return void((0,s.Au)()&&console.warn(`Timer event "${e}" finished but it was never started. Please make sure you start the timer on all relevant code paths. If the timer was intentionally removed or you reloaded the page you can ignore this warning.`));const t=window.performance.now(),a=t-u[e];a>=0?g(e,a):(0,i.Kp)(`Performance timer negative for ${e}`,{data:{duration:a,endTime:t,startTime:u[e]}}),h(e)},g=(e,t)=>{var a,u,p,g;t=Math.round(t),(0,s.Au)()&&t>c[e]&&((0,n.cM)("timer",`${e}`,{duration:t}),console.warn(`Timer event "${e}" took ${t}ms. This exceeds the allowed event duration of ${c[e]}ms.`));try{const s=null!==(p=null!==(a=d[e])&&void 0!==a?a:null===(u=(0,o.qg)())||void 0===u?void 0:u.config.featureFlags.web_timer_tracker_sampling_rate)&&void 0!==p?p:0;if(Math.random()<s){const a=null===(g=(0,o.qg)())||void 0===g?void 0:g.player,n=r.q.getPersistedStateVersion();(0,l.j)("app_performance_timer",{challenge_index:(null==a?void 0:a.session)?a.currentIndex:void 0,challenge_type:(null==a?void 0:a.session)?a.session.challenges[a.currentIndex].type:void 0,millisecond_duration:t,performance_timer_subtype:e,restored_state_version:"state-persisted"===n.type?`${n.version}`:void 0,sampling_rate:s})}}catch(t){(0,i.vU)(`Failed to track performance timer for ${e}`,{ex:t})}},m=e=>void 0!==u[e],h=e=>delete u[e],_={finish:p,finishOptional:e=>{m(e)&&p(e)},has:m,remove:h,start:(e,{startTime:t}={})=>u[e]=null!=t?t:window.performance.now()}},12301:(e,t,a)=>{"use strict";a.d(t,{q:()=>i});var s=a(60106),n=a(68903),r=a(11908);const i=new class{constructor(e,t){this.initialize=(e,t)=>{if(void 0!==this.substateCache)throw Error("initialize called twice");const a=t=>(console.log(`${t}; using new blank state`),this.didUsePersistedState=!1,e()),r=(()=>{const e=this.storage.get();if(!e)return a("No local state found");if(e.version!==this.supportedVersion)return a("Local state outdated");const s=null==t?void 0:t(e.state);return void 0!==s?a(s):(console.log("Using locally persisted state"),this.didUsePersistedState=!0,e.state)})();this.substateCache=new s.Z(r),this.substateCache.subscribe((0,n.rw)((()=>{this.storage.set((()=>({state:this.getSubstateCache().getAll(),version:this.supportedVersion})))}),100))},this.bindSubstate=e=>this.getSubstateCache().substate(e),this.getCurrentState=()=>this.getSubstateCache().getAll(),this.getPersistedStateVersion=()=>void 0===this.didUsePersistedState?{type:"unknown"}:this.didUsePersistedState?{type:"state-persisted",version:this.supportedVersion}:{type:"state-was-reset"},this.persistState=(e,t)=>{this.getSubstateCache().substate(e).set(t)},this.getSubstateCache=()=>{if(void 0===this.substateCache)throw Error("Persister not initialized");return this.substateCache},this.supportedVersion=e,this.storage=t}}(63,{get:()=>(0,r.rV)(r.Qt.State),set:e=>(0,r.LS)(r.Qt.State,e())})},44637:(e,t,a)=>{"use strict";a.d(t,{Dk:()=>y,GR:()=>S,Ks:()=>b,L1:()=>f,SB:()=>T,UV:()=>v,ct:()=>E,gZ:()=>k,vx:()=>C,yn:()=>I});var s=a(80254),n=a(42659),r=a(93540),i=a(88528),o=a(95332),l=a(94778),c=a(17135),d=a(37971),u=a(68903),p=a(23275),g=a(89260),m=a(79465),h=a(34704),_=a(11811);const v=1e3*parseFloat(i.Z["duration-slide"]),f=(e,t)=>{let a=0,s=0;for(let n=0;n<e.session.challenges.length;n++){const r={challenge:e.session.challenges[n],challengeIndex:n,sectionChallengeIndex:s,sectionIndex:a};if(t(r))return r;s<e.challengeIdSections[a].length-1?s++:(a++,s=0)}return{challenge:void 0,challengeIndex:void 0,sectionChallengeIndex:void 0,sectionIndex:void 0}},S=e=>{const[t]=y(e),a=[],s=e.sessionParams.isFinalLevel&&!e.session.failed&&!e.session.shouldLearnThings;return f(e,(({challenge:e,sectionIndex:n})=>!(void 0!==e.gradingResult&&(!s||void 0===t||t>n)&&(a.push(e),1)))),a},E=(e,t)=>(0,l.j4)({challenge:e,challengeState:t})?d.c.Guessing:d.c.Showing,y=e=>{const{sectionIndex:t,sectionChallengeIndex:a}=f(e,(({challengeIndex:t})=>t===e.currentIndex));return[t,a]},b=e=>{const t=(0,n.jv)(e),a=(0,n.B8)(e),s=(0,n.mu)(e,Date.now()),i=(0,r.HF)(e),l=(0,n.lA)(e),d=(0,h.hg)(e),{coachDuo:u,completedWithHeartsRemaining:m,numInLessonTipOpens:v,levelData:f,session:{challenges:S,startTime:E},sessionParams:{isFinalLevel:y},sessionPrefetchedTimestamp:b,speakIneligibleReasons:I=[],via:T}=l,{globalPlacementSessionStarts:k}=a,C=S.some((e=>(0,g.tq)().includes(e.type))),R=S.some((e=>(0,g.bc)().includes(e.type)));return Object.assign(Object.assign({},w({path:i,player:l})),{already_completed:(0,p.Wc)(null==f?void 0:f.level.state),coach_shown:u.allShowReasons.length>0,contained_listen_challenge:C,contained_speak_challenge:R,did_complete_all_segments:y?m:void 0,disabled_listen_challenges:E<t.listenDisabledUntil&&C,disabled_speak_challenges:E<t.speakDisabledUntil&&R,num_challenges_skipped:S.filter((e=>e.skipped)).length,num_characters_shown:S.map((e=>o.yH.includes(e.type)?e.type===_.Sm.Dialogue?e.dialogue.filter((e=>{var t;return void 0!==(null===(t=e.character)||void 0===t?void 0:t.avatarIconImage)})).length:e.character?1:0:0)).reduce(((e,t)=>e+t),0),num_explanation_opens:v,num_placement_starts:null!=k?k:0,num_times_transliteration_toggled:l.numTimesTransliterationToggled,offlined_session:void 0!==b,offlined_session_timestamp:b,speak_count:(0,g.A2)(S),speak_ineligible:I.length>0,speak_ineligible_reasons:I.join(","),time:(0,c.Zo)(),transliteration_setting:d?d.enabled?d.trackingName:"off":void 0,upload_timestamp:0,via:T,xp_boost_equipped:s})},w=({path:e,player:t})=>{var a,n,r,i,o,l,c;const{currentIndex:d,sessionParams:g,session:{adaptiveChallenges:m,challenges:h}}=t,_=h.slice(0,d+1),v=m?s.ZP.intersection(m.map((e=>e.id)),_.map((e=>e.id))).length:0,f=null!==(a=null==g?void 0:g.generatorIdentifiersOfRecentMistakes)&&void 0!==a?a:[],S=_.filter((e=>{var t;return null===(t=e.gradingResult)||void 0===t?void 0:t.correct})).filter((e=>e.challengeGeneratorIdentifier)).map((e=>e.challengeGeneratorIdentifier)),E=f.filter((e=>(0,u.cY)(S,e))).length;return Object.assign(Object.assign({},s.ZP.pick((0,p.eK)(e),"num_levels_completed","num_skill_levels_completed","num_units_completed","path_complete")),{contained_adaptive_challenge:v>0,level_index:g.levelIndex,level_index_in_unit:null===(n=t.levelData)||void 0===n?void 0:n.levelIndex,level_session_index:g.levelSessionIndex,num_adaptive_challenges:v,num_mistakes_completed:E,path_extension:!!(0,p.Mj)(null===(r=t.levelData)||void 0===r?void 0:r.level),path_level_id:null===(o=null===(i=t.levelData)||void 0===i?void 0:i.level)||void 0===o?void 0:o.id,session_is_legendary:g.isFinalLevel,session_subtype:g.isGrammarSkill?"grammar":void 0,skill_id:g.skillId,skill_ids:null===(l=g.skillIds)||void 0===l?void 0:l.join(","),unit_index:null===(c=t.levelData)||void 0===c?void 0:c.levelIndex})},I=({challenge:e,challengeState:t,isDesktop:a,session:s,sessionParams:n})=>{if([_.FF.AlphabetLesson,_.FF.GlobalPractice,_.FF.MistakesReview,_.FF.Legendary,_.FF.LegendaryLevel,_.FF.LegendaryLexemePractice,_.FF.Lesson,_.FF.LevelReview,_.FF.LexemePractice,_.FF.LexemeSkillLevelPractice,_.FF.SectionTest,_.FF.UnitReview,_.FF.UnitTest].includes(s.type)){if(t.hasBrokenTts)return"broken-tts";if((0,g.bc)().includes(e.type))return"cant-speak";if((0,g.tq)().includes(e.type))return"cant-listen";if(n.isGrammarSkill||n.isFinalLevel||s.type===_.FF.Legendary||s.type===_.FF.LegendaryLevel||s.type===_.FF.LegendaryLexemePractice||s.type===_.FF.SectionTest||s.type===_.FF.UnitTest||s.type===_.FF.UnitReview)return;if(a)return"skip"}if(s.type===_.FF.PlacementTest)return"skip"},T=e=>e>=11?"fox":e>=6?"bee":"owl",k=(e,t)=>{var a;const s=(()=>{if(e.response){switch(e.response.status){case 401:return"authentication_error";case 403:return"forbidden_error";case 404:return"not_found_error";case 410:return"route_gone_error"}return e.response.status>=500&&e.response.status<600?"server_error":"unknown_error"}return"ECONNABORTED"===e.code?"timeout_error":"network_error"})();(0,m.j)("session_end_fail",{http_status_code:null===(a=e.response)||void 0===a?void 0:a.status,request_error_type:s,type:t})},C=({currentCourseHistory:e,hasXpBoost:t,path:a,player:s,transliterationSetting:n})=>{const{currentIndex:r,levelData:i,session:o,session:{challenges:l,challengeTimeTakenCutoff:c},speakIneligibleReasons:d=[]}=s,{globalPlacementSessionStarts:u}=e,h=l.map((e=>e.timeTaken?Math.min(c,e.timeTaken)/1e3:0)).reduce(((e,t)=>e+t)),_=l.slice(0,r+1);(0,m.j)("session_quit",Object.assign(Object.assign(Object.assign({},w({path:a,player:s})),o.trackingProperties),{already_completed:(0,p.Wc)(null==i?void 0:i.level.state),num_challenges_at:l.length,num_challenges_ct:s.session.challenges.filter((e=>{var t;return null===(t=e.gradingResult)||void 0===t?void 0:t.correct})).length,num_challenges_skipped:l.filter((e=>e.skipped)).length,num_placement_starts:null!=u?u:0,num_times_transliteration_toggled:s.numTimesTransliterationToggled,speak_count:(0,g.A2)(_),speak_ineligible:d.length>0,speak_ineligible_reasons:d.join(","),sum_time_taken:h,transliteration_setting:n?n.enabled?n.trackingName:"off":void 0,xp_boost_equipped:t}))}},95975:(e,t,a)=>{"use strict";a.d(t,{$:()=>i,S:()=>r});var s=a(20028);const n=[["en","es"],["en","fr"],["es","en"],["pt","en"]],r=(e,t,a)=>a.creationDate<Date.now()-604800&&!(0,s.pN)(a)&&void 0!==e&&e>=3&&t%7==0&&n.some((e=>e[0]===a.fromLanguage&&e[1]===a.learningLanguage)),i="https://podcast.duolingo.com"},5934:(e,t,a)=>{"use strict";a.d(t,{dY:()=>f,Fb:()=>v,Am:()=>O,Dk:()=>g,hz:()=>H,$7:()=>S,pj:()=>y,az:()=>m,sU:()=>h,tL:()=>N,qv:()=>T,W7:()=>M,Jk:()=>V,gw:()=>x,a8:()=>E,d0:()=>D,IP:()=>B,gv:()=>L,rK:()=>A,Mn:()=>G,z8:()=>w,Hk:()=>R,yi:()=>C,Lf:()=>b,qL:()=>I,J_:()=>k,T8:()=>F});var s=a(80254),n=a(17135),r=a(59249),i=a(59815),o=a(68903),l=a(8654),c=a(23275),d=a(11811),u=a(77167),p=a(79465);const g="READ",m=e=>(e?(0,c.Ol)({levelType:"story",path:e}):[]).map((e=>e.pathLevelClientData.storyId)),h=async(e,t,a,n)=>{var r,i;const o=M(n);if(void 0===o)throw Error("Tried to update practice hub stories without practice hub data.");const l=null===(r=null==o?void 0:o.featuredStory)||void 0===r?void 0:r.storyId;if(void 0!==l){const n=await(async({featuredStoryId:e,fromLanguage:t,learningLanguage:a})=>{try{return await u.Mw.getPracticeHubStories(e,t,a)}catch(e){(0,p.DT)("stories_listing_update","Failed to fetch practice hub stories",e)}})({featuredStoryId:l,fromLanguage:t,learningLanguage:a}),r=s.HK(null!==(i=null==n?void 0:n.stories)&&void 0!==i?i:[],"id");if(void 0!==n)return{featuredStory:n.featuredStory,featuredStoryId:l,libraryStories:e.flatMap((e=>{const t=r[e];return void 0===t?[]:[t]}))}}return{featuredStory:void 0,featuredStoryId:"",libraryStories:[]}};var _=a(51158);const v=10,f=30,S=async({countLimit:e,courseId:t,includeListening:a,includeSpeaking:s})=>{if(void 0===t)return[];const n=await u.wO.getMistakes({countLimit:e,courseId:t,includeListening:a,includeSpeaking:s});return null!=n?n:[]},E=async({courseId:e,cutOffTimestamp:t=0,includeListening:a,includeSpeaking:s})=>void 0!==e?(await u.wO.getMistakes({courseId:e,includeListening:a,includeSpeaking:s})).filter((e=>e.inInboxSinceTimestamp/1e3>t)):[],y=e=>{const t=e.challengeIdentifier.specificType,a=e.prompt;switch(t){case"assist":return(0,l._i)(19598,{word:a});case"character_intro":return(0,l._i)(15437);case"character_select":return(0,l._i)(25329,{string_1:a});case"complete_reverse_translation":return(0,l._i)(21271);case"definition":return(0,l._i)(1831,{string_1:a});case"form":return(0,l._i)(20300);case"judge":return(0,l._i)(8914);case"listen":return(0,l._i)(6961);case"listen_comprehension":return(0,l._i)(8769);case"listen_tap":return(0,l._i)(10461);case"name":return(0,l._i)(24291,{word:a});case"select":return(0,l._i)(28895);case"select_pronunciation":case"select_transcription":return(0,l._i)(21070);case"speak":return(0,l._i)(11803);case"tap":case"tap_gap":case"translate":case"reverse_tap":case"reverse_translate":return(0,l._i)(9221);case"transliterate":return(0,l._i)(20190);default:return void(0,_.Kp)(`Unsupported mistakes challenge specific type ${t} was returned`,{once:!0})}},b=e=>{const t=e.challengeIdentifier.specificType;return!["assist","character_select","definition","name"].includes(t)},w=e=>{switch(e.challengeIdentifier.specificType){case"assist":case"character_select":case"definition":case"form":case"name":case"select":case"select_pronunciation":case"select_transcription":return void 0!==y(e);case"character_intro":case"complete_reverse_translation":case"judge":case"listen":case"listen_comprehension":case"listen_tap":case"speak":case"tap":case"tap_gap":case"translate":case"reverse_tap":case"reverse_translate":return void 0!==y(e)&&null!==e.prompt;default:return!1}},I=(e,t)=>{const a=1e3*t;return 0!==a&&a<e.inInboxSinceTimestamp},T=({isListenEnabled:e,isSpeakEnabled:t,sessionType:a})=>{switch(a){case d.FF.ListeningPractice:if(!e)return"listen-disabled";break;case d.FF.SpeakingPractice:if(!t)return"speak-disabled";case d.FF.TargetPractice:case d.FF.UnitRewind:}},k=({dispatch:e,isListenEnabled:t,isSpeakEnabled:a,sessionName:s})=>{const n=T({isListenEnabled:t,isSpeakEnabled:a,sessionType:D(s)});return void 0!==n&&(e({options:{allowSwitchSession:!1,name:"PRACTICE_HUB_SESSION_NOTIFICATION",sessionName:s,type:n},type:"TOGGLE_DRAWER"}),!0)},C=(e,t,a)=>void 0!==e&&(!!(0,r.gQ)("forceShowPracticeHub")||!(!a.hasPlus&&!t)&&(0,c.Ol)({levelType:"skill",path:e}).length>=1),R=(e,t)=>t&&void 0!==e,O=["listen-up","perfect-pronunciation","target-practice","unit-rewind"],L=(0,o.p)(O),P=(0,o.p)(["listening-practice","speaking-practice"]),A=e=>[d.FF.ListeningPractice,d.FF.SpeakingPractice,d.FF.TargetPractice,d.FF.UnitRewind].includes(e),N=e=>{switch(e){case d.FF.ListeningPractice:return"listen-up";case d.FF.SpeakingPractice:return"perfect-pronunciation";case d.FF.TargetPractice:return"target-practice";case d.FF.UnitRewind:return"unit-rewind";default:throw Error(`Unrecognized practice hub session type: ${e}`)}},D=e=>{switch(e){case"listen-up":case"listening-practice":return d.FF.ListeningPractice;case"perfect-pronunciation":case"speaking-practice":return d.FF.SpeakingPractice;case"target-practice":return d.FF.TargetPractice;case"unit-rewind":return d.FF.UnitRewind;default:throw(0,o.RJ)(e),Error(`Unrecognized practice hub session path name: ${e}`)}},x=e=>{switch(e){case"listen-up":return"listening_practice";case"perfect-pronunciation":return"speaking_practice";case"target-practice":return"target_practice";case"unit-rewind":return"unit_rewind";case"mistakes-review":return"mistakes_review_collections";case"listening-practice":return"listening_practice_collections";case"speaking-practice":return"speaking_practice_collections";default:throw(0,o.RJ)(e),Error(`Unrecognized practice hub session path name: ${e}`)}},M=e=>{var t;const a=e.currentCourseId;return null===(t=e.practiceHubInfo)||void 0===t?void 0:t[null!=a?a:""]},F=({dispatch:e,forceRefresh:t,isListenSupported:a,isSpeakSupported:r,path:i,user:o})=>{const l=o.currentCourseId,d=M(o),u=null==d?void 0:d.timestampGenerated;if(!t&&u&&(0,n.zk)((0,n.zM)(u)))return;if(void 0===l||void 0===i||(0,c.U8)({levelType:"skill",path:i})<1)return;const p=U({isListenSupported:a,isSpeakSupported:r,path:i}),g=j({isListenSupported:a,isSpeakSupported:r,path:i,practiceType:p});if(void 0===p||void 0===g)throw Error("Tried to refresh practice hub featured session when no practice types are eligible");var h;e({courseId:l,practiceHubCourseInfo:{courseId:l,featuredSession:{completed:!1,sessionParams:g},featuredStory:{completed:!1,storyId:(h=m(i),s.UP(h.slice(Math.max(h.length-30,0))))},timestampGenerated:Date.now()/1e3},type:"REFRESH_PRACTICE_HUB"})},U=({excludedSessions:e,isListenSupported:t,isSpeakSupported:a,path:n})=>{const r=O.filter((s=>!(null==e?void 0:e.includes(s))&&G({isListenSupported:t,isSpeakSupported:a,path:n,sessionType:D(s)})));return s.UP(r)},H=({dispatch:e,isListenSupported:t,isSpeakSupported:a,path:s,practiceType:n,user:r})=>{if(!r.hasPlus)throw new i.w(`Non subscriber user tried to load ${n} session`);if(P(n)){const e=j({isListenSupported:t,isSpeakSupported:a,path:s,practiceType:n});if(void 0===e)throw Error(`Tried to load ${n} session when unavailable`);return e}F({dispatch:e,isListenSupported:t,isSpeakSupported:a,path:s,user:r});const o=M(r);if(void 0===o)throw Error("Failed to update and save practice hub sessions for the current course");const l=o.featuredSession;if(void 0===l)throw Error(`Tried to load ${n} featured session when unavailable`);return l.sessionParams},j=({isListenSupported:e,isSpeakSupported:t,path:a,practiceType:s})=>{if(G({isListenSupported:e,isSpeakSupported:t,path:a,sessionType:D(s)}))switch(s){case"listen-up":case"listening-practice":return{skillId:(0,c.mo)(a,10).skillId,type:d.FF.ListeningPractice};case"perfect-pronunciation":case"speaking-practice":return{skillId:(0,c.mo)(a,10).skillId,type:d.FF.SpeakingPractice};case"target-practice":{const e=(0,c.mo)(a,10);return{skillIds:[e.skillId],type:d.FF.TargetPractice,unitIndex:e.unitIndex}}case"unit-rewind":return B(a);default:throw(0,o.RJ)(s),Error(`Unrecognized practice hub session type: ${s}`)}},G=({isListenSupported:e,isSpeakSupported:t,path:a,sessionType:s})=>{const n=(0,c.Bm)(a),r=null==n?void 0:n.unitIndex;switch(s){case d.FF.ListeningPractice:return e;case d.FF.SpeakingPractice:return t;case d.FF.TargetPractice:return!0;case d.FF.UnitRewind:return r&&r>=1||(0,c.Ol)({path:a}).length>1;default:throw Error(`Unrecognized practice hub session type: ${s}`)}},B=e=>{var t,a;const n=(0,c.Ol)({path:e}),r=null!==(a=null===(t=n[n.length-1])||void 0===t?void 0:t.unitIndex)&&void 0!==a?a:0,i=s.MX(Math.max(r-3,0),r-1),o=e[i].levels;return{skillIds:o[o.length-1].pathLevelClientData.skillIds,type:d.FF.UnitRewind,unitIndex:i}},V=e=>{switch(e){case d.FF.ListeningPractice:return(0,l._i)(39413,{num:10});case d.FF.SpeakingPractice:return(0,l._i)(31472,{num:10});case d.FF.TargetPractice:return(0,l._i)(39368,{num:10});case d.FF.UnitRewind:return(0,l._i)(39371,{num:10});default:throw Error(`Unrecognized practice hub session type: ${e}`)}}},2439:(e,t,a)=>{"use strict";a.d(t,{j:()=>r,q:()=>i});var s=a(35160),n=a(79465);const r=(e,t)=>{(0,n.j)("premium_ad_click",e.trackingProps),i(e,t)},i=(e,t,a)=>{t({options:Object.assign(Object.assign({},e),{name:a?s.t.PremiumPurchaseSecondary:s.t.PremiumPurchase}),type:a?"TOGGLE_SECONDARY_MODAL":"TOGGLE_MODAL"})}},67280:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>c,p4:()=>l,xp:()=>o});var s=a(59249),n=a(68903),r=a(11811);const i=e=>void 0!==e&&(0,n.gB)(e.discountType,r.SP),o=e=>(0,s.gQ)("debugNypDisabled")||null==e?void 0:e.find(i),l=(e,t)=>{const a=o(e);return a&&t<a.expirationTime?a:void 0},c=(e,t=Date.now())=>void 0!==l(e,t)},77747:(e,t,a)=>{"use strict";a.d(t,{AW:()=>i,Ak:()=>d,BY:()=>r,m6:()=>l,sP:()=>c,zh:()=>u});var s=a(77167),n=a(79465);const r=10,i=1e3,o="https://forms.gle/6S9RV1pyxZBZQ28M6",l=e=>({ar:"https://forms.gle/s9G48vL74JHABGiWA",bn:o,cs:"https://forms.gle/Qp7R8kVhvg6Y9n6u5",de:"https://forms.gle/6FsEyLmecYH5nviA7",el:"https://forms.gle/iJvbmQziwriaJgfP6",en:o,es:"https://forms.gle/Ep43BcZyn8Mz5m2H7",fr:"https://forms.gle/brGLWurDEubHijSE6",hi:"https://forms.gle/GjDnx9es4r7GBDgN8",hu:"https://forms.gle/H8ens9JVNh5NMVtF9",id:"https://forms.gle/BnCiKkkEfzsSAeED6",it:"https://forms.gle/ZmTRJi3ewWot7KjUA",ja:"https://forms.gle/SAbMtGDZG9ZDmKkV7",ko:"https://forms.gle/k7oC7tFwVc3iZkc48","nl-NL":"https://forms.gle/Zwmwywphainrux3x7",pa:o,pl:"https://forms.gle/EVsSmifCJb5Uuy1J6",pt:"https://forms.gle/zswjrRH6KBY6VR8E8",ro:"https://forms.gle/vsmCw6taXvxYmdTs7",ru:"https://forms.gle/xSmogNiMiFMXrtJr8",te:o,th:"https://forms.gle/PB6EeexbfJyPAdQw7",tl:"https://forms.gle/G9hDUwW8xxfpcNCh8",tr:"https://forms.gle/dXhLaHkSoAkJixRY9",uk:"https://forms.gle/1dJxFALxadvDS2LP9",vi:"https://forms.gle/aiRf8jEJ1rzYdkXA9","zh-CN":"https://forms.gle/TFpQd2zvya3Sch8W9","zh-TW":"https://forms.gle/TFpQd2zvya3Sch8W9"}[null!=e?e:"en"]),c="business_landing_page",d=e=>{var t;return null===(t=e.web_enable_b2b_page)||void 0===t||t},u=async e=>{let t;try{t=await s.a1.getB2BPricingData(e)}catch(a){(0,n.DT)("b2b_pricing_failed","Unable to fetch B2B pricing data from subscriptions-backend",a,{queryParams:{countryCode:e},response:t})}return t}},9832:(e,t,a)=>{"use strict";a.d(t,{Lm:()=>E,N2:()=>D,h:()=>x,z:()=>H,Pr:()=>j,ZQ:()=>O,UZ:()=>L,op:()=>A,Sz:()=>w,ew:()=>P,r:()=>M,Nh:()=>U});var s=a(27378),n=a(33467),r=a(9249),i=a(17708),o=a(77167),l=a(42659),c=a(80164),d=a(50498),u=a(17135),p=a(59249),g=a(8654),m=a(2439),h=a(67280),_=a(51158),v=a(18804),f=a(11811),S=a(81621);const E=60,y=["debugNypExpiresAt","debugNypExpiresIn"],b=()=>!(0,p.gQ)("debugNypDisabled")&&y.some((e=>(0,p.gQ)(e))),w=()=>{const[e,t]=s.useState(Date.now()+(0,p.nn)()),a=()=>t(Date.now()+(0,p.nn)());return s.useEffect((()=>(C(a),()=>R(a))),[]),e};let I,T,k=[];const C=e=>{k.push(e),I||T||(T=setTimeout((()=>{I=setInterval((()=>k.forEach((e=>e()))),1e3)}),1e3-(0,u.Ux)().getMilliseconds()))},R=e=>{k=k.filter((t=>t!==e)),0===k.length&&(T&&(clearTimeout(T),T=void 0),I&&(clearInterval(I),I=void 0))},O=()=>{const e=(0,v.Fx)(c.I9),t=(0,v.Fx)(c.tE),[a,n]=s.useState((()=>t?(0,h.p4)(e,Date.now()):void 0));return s.useEffect((()=>{n(t?(0,h.p4)(e,Date.now()):void 0)}),[e,t]),s.useEffect((()=>{if(a){const e=setTimeout((()=>{n(void 0)}),a.expirationTime-Date.now());return()=>clearTimeout(e)}}),[a]),a},L=()=>{const e=O(),[t,a]=s.useState((()=>void 0!==e&&((e,t)=>e.expirationTime-t<1e3*(0,u.dz)({hours:24}))(e,Date.now())));return s.useEffect((()=>{if(e){const t=e.expirationTime-1e3*(0,u.dz)({hours:24})-Date.now();if(!(t<=0)){const e=setTimeout((()=>{a(!0)}),t);return()=>clearTimeout(e)}a(!0)}else a(!1)}),[e]),t},P=()=>void 0!==O(),A=()=>{const e=(0,v.tX)(),t=(0,v.Fx)(l.Mb),a=(0,v.Fx)((e=>(0,l.cQ)(e).homeMessagingClientState.newYearsDiscount)),n=(0,v.Fx)(l.bE),g=(0,v.Fx)(l.Xr),m=(0,v.Fx)(l.__),S=(0,v.Fx)(c.tE),E=(0,v.Fx)(l.np),w=s.useRef(!1);s.useEffect((()=>{const s=(0,h.xp)(E.plusDiscounts);if((null==s?void 0:s.discountType)!==f.tm.NewYears2023Fake||b())if(a&&!s)e((0,i.i)("newYearsDiscount"));else if(void 0!==s||w.current||!((e,t,a)=>e&&t&&a)(n,g,!0===S)||a||(0,p.gQ)("debugNypDisabled")||!b()){if(void 0!==s&&Date.now()<s.expirationTime){const a=setTimeout((()=>{e(r.Hm(t.ipCountry,!1))}),s.expirationTime-Date.now());return()=>clearTimeout(a)}}else(async()=>{var a;w.current=!0,b()?e((async e=>{const t=(()=>{if((0,p.gQ)("debugNypExpiresAt")){const e=(0,p.ky)("debugNypExpiresAt");return void 0!==e?Date.parse(e)-Date.now():NaN}if((0,p.gQ)("debugNypExpiresIn")){const e=(0,p.ky)("debugNypExpiresIn");return e?(0,u.iN)(e):void 0}})();var a;void 0!==t&&((isNaN(t)||t<0)&&(0,_.vU)(`Invalid expiration when trying to create fake NYP discount with ${a=y.find((e=>(0,p.gQ)(e))),a&&`${a}: ${(0,p.ky)(a)}`}`,{once:!0}),e({apiDiscount:{discountType:f.tm.NewYears2023Fake,secondsUntilExpiration:t/1e3},type:"ADD_SUPER_DISCOUNT"}),await(0,d._v)(100))})):(await e((a=f.tm.NewYears2023,async e=>{e({apiDiscount:await o.Vi.createUserSuperDiscount(a),type:"ADD_SUPER_DISCOUNT"})})),await e(r.Hm(t.ipCountry,!0))),N(e,E),w.current=!1})();else e({discountType:f.tm.NewYears2023Fake,type:"REMOVE_SUPER_DISCOUNT"}),e(r.Hm(t.ipCountry,!1))}),[a,n,g,m,E])},N=(e,t)=>{!(0,S.P2)(t)&&!(0,S.eU)(t)&&e({name:"newYearsDiscount",type:"CREATE_HOME_MESSAGE"})},D=({discount:e,product:t,step:a,withPlusContext:s})=>{const r=a&&[n.K.Packages,n.K.BillingInfo].includes(a);switch(e?r?"package-selection":"default-new-years":"default-plus"){case"package-selection":return(null==t?void 0:t.isNewYears)?(0,g._i)(34149,{discount:E}):(0,g._i)(34199);case"default-new-years":return s?(0,g._i)(34149,{discount:E}):(0,g._i)(1819,{discount:E});default:return(0,g._i)(34199)}},x=(e,t)=>{if(!e)return null;const{hoursTotal:a,minutes:s,seconds:n}=F(e,t),r=a<=0&&s<=0?(0,g.H8)(27121,{minutes:s,seconds:n}):(0,g.H8)(2519,{hours:a,minutes:s});return(0,g._i)(27637,{duration:r})},M=()=>{const e=w(),t=(0,v.Fx)(c.I9);return((e,t)=>[(0,g._i)(11586),x(e,t)])((0,h.p4)(t,e),e)},F=(e,t)=>(0,u.zj)(e.expirationTime-t),U=()=>{const e=(0,v.Fx)(c.I9),t=w(),a=(0,h.p4)(e,t);return a?((e,t)=>{const{hoursTotal:a,minutes:s,seconds:n}=(0,u.zj)(e.expirationTime-t);return`${a<10?"0":""}${a}:${s<10?"0":""}${s}:${n<10?"0":""}${n}`})(a,t):""},H=e=>["new_years_home_drawer","new_years_shop_banner"].includes(e)?n.K.Benefits:n.K.Features,j=(e,t)=>()=>{(0,m.j)({customStartStep:H(t),trackingProps:{iap_context:t}},e)}},25062:(e,t,a)=>{"use strict";a.d(t,{B5:()=>w,G$:()=>S,H7:()=>s,J_:()=>h,Rg:()=>E,T4:()=>b,XL:()=>n,eV:()=>m,hp:()=>_,k0:()=>y,kk:()=>g,uJ:()=>f});var s,n,r=a(61079),i=a(80254),o=a(77167),l=a(59249),c=a(93746),d=a(51158),u=a(79465);!function(e){e.AmericanExpress="AMERICAN_EXPRESS",e.DinersClub="DINERS_CLUB",e.Discover="DISCOVER",e.JCB="JCB",e.MasterCard="MASTERCARD",e.Unknown="UNKNOWN",e.Visa="VISA"}(s||(s={})),function(e){e.StripeVendor="STRIPE"}(n||(n={}));const p={AT:"EUR",AU:"AUD",BE:"EUR",BR:"BRL",CA:"CAD",CY:"EUR",DE:"EUR",EE:"EUR",ES:"EUR",FI:"EUR",FR:"EUR",GB:"GBP",GR:"EUR",IE:"EUR",IT:"EUR",JP:"JPY",LT:"EUR",LU:"EUR",LV:"EUR",MX:"MXN",NL:"EUR",PT:"EUR",SI:"EUR",SK:"EUR",US:"USD"},g=e=>{var t;return null!==(t=p[e])&&void 0!==t?t:"USD"},m=(s.AmericanExpress,s.DinersClub,s.Discover,s.JCB,s.MasterCard,s.Visa,{[s.AmericanExpress]:"amex",[s.DinersClub]:"diners",[s.Discover]:"discover",[s.JCB]:"jcb",[s.MasterCard]:"mastercard",[s.Visa]:"visa"}),h={[s.AmericanExpress]:"American Express",[s.DinersClub]:"Diners Club",[s.Discover]:"Discover",[s.JCB]:"JCB",[s.MasterCard]:"MasterCard",[s.Visa]:"Visa"};var _;!function(e){e.Schools="DUOLINGO_SCHOOLS",e.Duolingo="DUOLINGO"}(_||(_={}));const v=async(e,t)=>{const a=(0,l.gQ)("debugStripe")?t:e;r.loadStripe.setLoadParameters({advancedFraudSignals:!1});const s=await(0,r.loadStripe)(a,{betas:["elements_enable_deferred_intent_beta_1"]});if(null===s)throw Error("stripe could not be loaded");return s},f=i.IH((async()=>await v("pk_live_wGV2ziRFq7KJLNaVUAJgrzDf","pk_test_bpwxgxXy49mckw94PW2hhVnS"))),S=i.IH((async()=>await v("pk_live_51LsRThCLCQAemjDAxnfWuDhC82PfhQ4l7iOkoytUPpkDEiNEpDge4l8umm5BZHtCTTfAtBjIULU5ft0G3MNVSlk000nW3pIJse","pk_test_51LsRThCLCQAemjDAJSRyXRbH24iEVGIUBnK5VKr34QEO5MTwJn9Cub0RLzJ3jC7nXXky2Ie8KT5dhxTVh1jCGfEM005g2c0iKg"))),E=i.IH((async()=>{const e=await f(),t=window.ApplePaySession;if(t&&(t.canMakePaymentsWithActiveCard=()=>Promise.resolve(t.canMakePayments())),e){const t=e.paymentRequest({country:"US",currency:"usd",total:{amount:1e3,label:"Test Amount"}}),a=await t.canMakePayment();(0,u.j)("supported_web_payment_options",{supported_web_payment_options:a?a.applePay?"ApplePay":"PaymentRequestAPI":"None"})}})),y=async(e,t,a)=>{var s;if(!e)throw Error("no cardNumberElement provided");{const n=await f(),{token:r,error:i}=await n.createToken(e,Object.assign({name:t},a&&{address_zip:a}));if(i)throw Error(null!==(s=i.code)&&void 0!==s?s:"unknown error creating token");if(r)return r.id}throw Error("unknown error creating token")},b=(e,t,a,s)=>{const n=`${(0,c.M$)(window.duo.uiLanguage)}-${null!=a?a:"US"}`,r=Intl.NumberFormat.supportedLocalesOf(n,{localeMatcher:"lookup"}).length>0?n:(0,c.BE)(),i=s?{maximumFractionDigits:0,minimumFractionDigits:0}:{};if(""===t)return(0,d.Kp)("formatPrice called with empty currency",{data:{country:a,price:e},once:!0}),`$${new Intl.NumberFormat(r,Object.assign({currency:"USD",style:"currency"},i)).format(e/100).replace(/[A-Z]*/,"")}`;const o=new Intl.NumberFormat(r,Object.assign({currency:t,style:"currency"},i)).format(e/100);return"AUD"!==t||o.includes("A")?"CAD"!==t||o.includes("CA")?"MXN"!==t||o.includes("MX")?"USD"!==t||o.includes("US")?o:`${o} USD`:`${o} MXN`:`${o} CAD`:`${o} AUD`},w=e=>[o.qF.LE.Admin,o.qF.LE.IOS,o.qF.LE.Android].includes(e)},74541:(e,t,a)=>{"use strict";a.d(t,{$M:()=>r,l1:()=>n});var s=a(77167);const n=(e,t,a)=>{switch(null==e?void 0:e.itemName){case s.qF.lV.SUPER:case s.qF.lV.IMMERSIVE_SUPER:return t;case s.qF.lV.MAX:return a;default:return}},r=e=>(null==e?void 0:e.itemName)===s.qF.lV.MAX},32499:(e,t,a)=>{"use strict";a.d(t,{$2:()=>B,DK:()=>Z,G4:()=>L,Jc:()=>C,Nf:()=>b,RD:()=>A,SY:()=>f,Wt:()=>S,X0:()=>E,_A:()=>M,_C:()=>T,_r:()=>w,b1:()=>O,dR:()=>x,dY:()=>D,eA:()=>y,eh:()=>I,ek:()=>H,fE:()=>k,gD:()=>F,hJ:()=>U,jF:()=>R,kI:()=>V,kY:()=>N,oi:()=>z,tA:()=>j,tJ:()=>P,vM:()=>G});var s=a(33467),n=a(9249),r=a(77167),i=a(17135),o=a(81149),l=a(1),c=a(68903),d=a(93746),u=a(2439),p=a(25062),g=a(51158),m=a(88868),h=a(79465),_=a(16086),v=a(20028);const f=(e,t)=>{var a;if(!e)return!1;const s=null!==(a=e.subscriptionInfo)&&void 0!==a?a:{renewer:void 0,renewing:void 0},i=s.renewer,o=i&&(i!==r.qF.LE.Stripe||void 0!==s.renewing);return o||t(n.w4(e.purchaseId)),!!o},S=(e,t)=>!e.inventory.premium_subscription&&!e.inventory.gold_subscription&&!e.inventory.schools_pro_subscription&&!(0,v.d1)(t)&&(!(0,v.jq)(t)||(0,l.GQ)(t))&&!(0,v.pN)(t),E=(e,t)=>{var a;return S(e,t)&&!e.inventory.immersive_subscription&&!window.duo.disableMonetization&&((null===(a=e.subscriptions)||void 0===a?void 0:a.subscriptionPlans)?e.subscriptions.subscriptionPlans.length>0:void 0)},y="com.duolingo.subscription.premium.prepaid",b="com.duolingo.subscription.premium.b2b_universal_clock";var w;!function(e){e[e.OneMonth=0]="OneMonth",e[e.TwelveMonth=1]="TwelveMonth",e[e.FamilyPlan=2]="FamilyPlan"}(w||(w={}));const I=(e,t)=>(0,p.T4)(Math.ceil(e.priceInCents/e.periodLengthInMonths),e.planCurrency,t),T=(e,t)=>(0,p.T4)(e.priceInCents,e.planCurrency,t),k=14,C=2,R=(e,t)=>{var a;return null!==(a=e.find((e=>e.planType===(null!=t?t:w.TwelveMonth))))&&void 0!==a?a:e[0]},O=e=>void 0===e?0:e.length,L=e=>void 0!==e&&["PREPAID","B2B_UNIVERSAL_CLOCK"].includes(e.type),P="com.duolingo.immersive_free_trial_subscription",A=e=>e===P,N=e=>"USD"!==e.planCurrency,D=e=>{var t,a,s,n,r,o,l;const c=null!==(a=null===(t=e.subscriptionInfo)||void 0===t?void 0:t.expectedExpiration)&&void 0!==a?a:i.wD,d=null!==(n=null===(s=e.subscriptionInfo)||void 0===s?void 0:s.extendedFreeTrialLength)&&void 0!==n?n:(0,i.dz)({days:k}),u=e.purchaseDate+d<=c;return u!==(null===(r=e.subscriptionInfo)||void 0===r?void 0:r.isFreeTrialPeriod)&&(0,g.Kp)("Unexpected difference between isFreeTrialPeriod and manually calculated free trial period",{data:{subscription:e},once:!0}),null!==(l=null===(o=e.subscriptionInfo)||void 0===o?void 0:o.isFreeTrialPeriod)&&void 0!==l?l:u},x=e=>!!e.subscriptionInfo&&e.subscriptionInfo.renewer===r.qF.LE.Stripe,M=e=>!!e.familyPlanInfo,F=e=>e.subscriptionInfo?(0,i.zM)(e.subscriptionInfo.expectedExpiration).toLocaleString((0,d.M$)(window.duo.uiLanguage),{day:"numeric",month:"short",year:"numeric"}):"",U=(e,t)=>{if(!t.subscriptionInfo)return 0;const a=t.subscriptionInfo.expectedExpiration;return(0,i.t8)(e,1e3*a,"ceil")},H=(e,t)=>{if(!t.subscriptionInfo)return;const a=(0,i.zM)(t.subscriptionInfo.expectedExpiration);return(0,i.J8)(e,a)},j=async(e,t)=>{await r.Vi.patchUserShopItem(e.purchaseId,{subscriptionInfo:{renewing:!0}}),await t(n.w4(e.purchaseId))},G=e=>{switch(e.periodLengthInMonths){case 1:return"one_month";case 6:return"six_month";case 12:return"twelve_month";default:throw Error(`Unknown premium product period length ${(0,c.RJ)(e.periodLengthInMonths)}`)}},B=e=>(0,_.Pc)()&&"experiment"===(0,o.j6)("spack_web_fp_init_page",void 0)?s.K.Features:e,V=(e,t,a,n)=>{(0,h.j)("premium_ad_show",{iap_context:"registration_soft_wall"}),(0,u.q)({customStartStep:s.K.Benefits,didClickFreeTrial:!0,onBeforeClose:a,trackingProps:{iap_context:"registration_soft_wall"},welcomeRedirect:()=>{e.push(m.B6),t({options:void 0,type:"TOGGLE_MODAL"})}},t,n)},z=(e,t,a,s,n)=>s&&n&&"experiment"===(0,o.j6)("spack_web_registration_softwall_v2",void 0)?{closeModalOnLogin:!1,goBack:()=>V(e,t,a,!0)}:{},Z=2},88787:(e,t,a)=>{"use strict";a.d(t,{Hd:()=>S,S1:()=>f,ZK:()=>v,eV:()=>E,og:()=>y,r1:()=>_});var s=a(77167),n=a(50498),r=a(51158),i=a(79465),o=a(74597),l=a(16086);let c,d=!1,u=null;const p=e=>{const t=e.endpoint;return t.startsWith("https://android.googleapis.com/gcm/send")&&e.subscriptionId&&!t.includes(e.subscriptionId)?e.subscriptionId:t.split("/").pop()},g=()=>{if(void 0===c)throw Error("Push notifications not initialized yet");return c},m=async e=>{try{return void await h()}catch(e){(0,r.Kp)("Failed to subscribe to push notifications",{ex:e})}try{if(await _(!1),null==e?void 0:e.aborted)return;await h()}catch(e){(0,r.Kp)("Failed to update notification subscription",{ex:e})}},h=async()=>{const e=g(),t=(e=>{const t=(e+"=".repeat(1)).replace(/-/g,"+").replace(/_/g,"/"),a=atob(t),s=new Uint8Array(a.length);for(let e=0;e<a.length;++e)s[e]=a.charCodeAt(e);return s})("BOfu40JfHSmIGu-08T0bvngwcoDkpA3hwdQiQnQxyCHQTpZjI5v_bNND-ERl5UYNZ9l4S2VCmEjKSgTeZxDsHgk"),a=await e.pushManager.subscribe({applicationServerKey:t,userVisibleOnly:!0});console.log("Subscribed to push notifications"),s._s.registerDevice(p(a),JSON.stringify(a)),u=a},_=async e=>{if(null===u)return;const t=g(),a=await t.pushManager.getSubscription();a&&(await a.unsubscribe(),console.log("Unsubscribed from push notifications"),e||s._s.unregisterDevice(p(a)).catch((e=>(0,i.DT)("unregister_device_failed","Failed to unregister device",e))),u=null)},v=async e=>{(0,i.j)("chrome_notification_dialog_load",{via:e});const t=(async()=>{const t=await new Promise((e=>{try{Notification.requestPermission().then(e)}catch(t){Notification.requestPermission(e)}}));(0,i.j)("chrome_notification_dialog_tap",{target:{default:"close",denied:"deny",granted:"allow"}[t],via:e}),m()})();if(!o.Z.safari){const a=new AbortController,s=a.signal;(0,n._v)(1e4).then((()=>{s.aborted||(0,r.Kp)("requestPermission is taking a long time (10+ seconds)",{data:{userAgent:navigator.userAgent,via:e}})})),await t,a.abort()}},f=async e=>{if(null===u){if(!("serviceWorker"in navigator))throw Error("Browser doesn't support service workers");c=await navigator.serviceWorker.getRegistration(),await navigator.serviceWorker.ready,e.aborted||await(async e=>{if(!("showNotification"in window.ServiceWorkerRegistration.prototype))throw Error("Notifications unsupported");const t=window.Notification.permission;if("denied"!==t){if(!("PushManager"in window))throw Error("Push messaging unsupported");console.log("Push notifications initialized"),d=!0,"granted"===t&&(0,l.Pc)()&&await m(e)}else console.log("User denied notification permission")})(e)}else console.log("Push notifications already initialized")},S=()=>d,E=async e=>{e({isVisible:!0,type:"TOGGLE_REQUEST_NOTIFICATION_PERMISSION"});try{await v("notification_primer")}catch(e){console.error(e)}e({isVisible:!1,type:"TOGGLE_REQUEST_NOTIFICATION_PERMISSION"})},y=e=>e&&S()&&"default"===window.Notification.permission},4517:(e,t,a)=>{"use strict";a.d(t,{E:()=>s});const s=new(a(58525).S)},30004:(e,t,a)=>{"use strict";a.d(t,{Lw:()=>r,wQ:()=>i});var s=a(42783),n=a(4517);const r=e=>(0,s.h)({queries:e}),i=(e,t={})=>{var{exact:a=!0}=t,s=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(t,["exact"]);return n.E.getQueryData(e,Object.assign({exact:a},s))}},90110:(e,t,a)=>{"use strict";a.d(t,{G1:()=>N,GH:()=>U,Gq:()=>H,OC:()=>G,Pe:()=>x,Se:()=>D,Sk:()=>w,Zp:()=>y,be:()=>M,f7:()=>F,gW:()=>b,kl:()=>I,vI:()=>j});var s=a(80254),n=a(94144),r=a(42659),i=a(73520),o=a(74462),l=a(77167),c=a(17135),d=a(81149),u=a(74311),p=a(68903),g=a(60752),m=a(51551),h=a(88675),_=a(79465),v=a(86073),f=a(97106);const S=({goals:e,monthlyChallengeThreshold:t,progress:a,user:s})=>(n,r)=>{n({payload:{updates:a},type:"SET_MONTHLY_CHALLENGE_PROGRESS_UPDATE"});const o=e.progress&&e.monthlyQuest?e.progress[e.monthlyQuest]:void 0,l=void 0===o?void 0:o+a,d=(0,i.gD)(r());void 0!==o&&o<t&&void 0!==l&&a>=t&&d&&n({earnedBadges:[...e.earnedBadges,{badgeId:d,earned:!0,earnedTimestamp:(0,c.Ux)().toISOString(),earnedTimezone:s.timezone}],type:"SET_EARNED_BADGES"})},E=async({isZombieMode:e,progress:t,user:a})=>{if(e){const e=await(0,g.b)();await e.add("submittableRequests",{request:{batchUpdate:{metricUpdates:[{metric:"QUESTS",quantity:t}]},timestamp:(0,c.Ux)(),timezone:a.timezone},type:"goals-progress"})}else await l.JV.sendBatchUpdate(a.id,{metricUpdates:[{metric:"QUESTS",quantity:t}]},(0,c.Ux)(),a.timezone)},y=(e,t)=>e.rewardBundles.find((e=>e.rewardBundleType===t)),b=e=>{const t=y(e,"DAILY_GOAL_DOUBLE");if(void 0!==t&&t.rewards.length>0)return t.rewards[0]},w=(e,t,a)=>{l.Vi.consumeReward(t,a.id),a.currency===v.bP?e({gems:a.amount,type:"UPDATE_USER_GEMS"}):e({lingots:a.amount,type:"UPDATE_USER_LINGOTS"}),e({type:"CONSUME_DAILY_GOAL_REWARD"})},I=({availableQuests:e,goals:t,items:a,monthlyChallengeThreshold:s,updateLocally:n=!0,user:i})=>(o,l)=>{var c;const p=l(),g=(0,r.df)(p),m=(0,r.mu)(p,Date.now()),h=null===(c=t.progressUpdate)||void 0===c?void 0:c.updates,{totalCompletedQuests:_}=(0,u.wn)({difficulty:t.difficulty,oldProgress:t.progress,progress:h,quests:e});(0,u.i3)({difficulty:t.difficulty,oldProgress:t.progress,progress:h,quests:e});const v="experiment"===(0,d.j6)("gweb_tiered_daily_quests_v2",void 0),f=v?e.flatMap(((e,a)=>(0,u.wU)({difficulty:t.difficulty,oldProgress:t.progress,progress:h,quest:e})?[u.xD[a]]:[])):void 0,E=v&&f?k({hasXpBoost:m,items:a,slotsCompleted:f,user:i}):C({hasXpBoost:m,items:a,questsCompleted:_,user:i});o({dailyQuestRewards:E,type:"SET_PENDING_DAILY_QUEST_REWARDS"});const y=E.map((e=>e.reward));n&&y.forEach((e=>{o(N(e))}));const b=y.length;o(S({goals:t,monthlyChallengeThreshold:s,progress:b,user:i})),T({dispatch:o,isZombieMode:g,rewards:y,user:i})},T=async({dispatch:e,isZombieMode:t,rewards:a,user:s})=>{if(t){const e=await(0,g.b)();for(const t of a)await e.add("submittableRequests",{rewardRequest:{rewardId:t.id,source:"daily-quest",userPartial:{fromLanguage:s.fromLanguage,id:s.id,learningLanguage:s.learningLanguage}},type:"reward"})}else a.forEach((e=>l.Vi.consumeReward(s,e.id))),a.some((e=>M(e)))&&e((0,n.J0)());a.length>0&&E({isZombieMode:t,progress:a.length,user:s})},k=({hasXpBoost:e,items:t,slotsCompleted:a,user:s})=>{const n=[],r=[];for(const i of a){let a;switch(i){case"DAILY":a=y(s,u.bf[0]);break;case"CORE":a=y(s,u.bf[1]);break;case"HARD":a=y(s,u.bf[2]);break;default:(0,p.RJ)(i)}if(a){const o=R(a,{hasXpBoost:e,items:t,rewardsSoFar:n,user:s});o&&(n.push(o),r.push({reward:o,slotType:i}))}}return r},C=({hasXpBoost:e,questsCompleted:t,user:a,items:s})=>{const n=((e,t)=>{const a=u.bf.map((t=>y(e,t))).filter(p.$K),s=t+a.reduce(((e,t)=>t.rewards.some((e=>e.consumed))?e:e+1),0)-u.bf.length;return a.slice(0,Math.max(0,s))})(a,t),r=[];return n.forEach((t=>{const n=R(t,{hasXpBoost:e,items:s,rewardsSoFar:r,user:a});n&&r.push(n)})),r.map((e=>({reward:e,slotType:void 0})))},R=(e,{hasXpBoost:t,items:a,rewardsSoFar:s,user:n})=>{const r=e.rewardBundleType;switch(r){case"DAILY_QUEST_FIRST":{const t=L(e,{items:a,rewardsSoFar:s,user:n});return void 0!==t?t:O(e)}case"DAILY_QUEST_SECOND":return O(e);case"DAILY_QUEST_THIRD":{const r=L(e,{ignoreProbability:!0,items:a,rewardsSoFar:s,user:n});if(void 0!==r)return r;if(!t&&"experiment"===(0,d.j6)("gweb_tiered_daily_quests_v2",void 0)){const t=A(e);if(void 0!==t)return t}return O(e)}default:return void(0,p.RJ)(r)}},O=e=>s.MR(e.rewards.filter((e=>D(e))),(e=>e.amount))[0],L=(e,{ignoreProbability:t,items:a,rewardsSoFar:s,user:n})=>{var r,i;const o=P(e);if(o&&!s.find((e=>"STREAK_FREEZE"===e.itemId))&&!(0,h.pS)(null!==(i=null===(r=n.streakData.currentStreak)||void 0===r?void 0:r.length)&&void 0!==i?i:0)&&(0,m.RB)(a,n,t))return o},P=e=>{const t=e.rewards.filter((e=>"STREAK_FREEZE"===e.itemId));return t.length>0?t[0]:void 0},A=e=>{const t=e.rewards.filter((e=>e.itemId===f.zL.ITEM_NAME_15_MIN));return t.length>0?t[0]:void 0},N=e=>t=>{D(e)&&(e.currency===v.bP?t({gems:e.amount,type:"UPDATE_USER_GEMS"}):t({lingots:e.amount,type:"UPDATE_USER_LINGOTS"})),t({rewardId:e.id,type:"CONSUME_DAILY_QUEST_REWARD"})},D=e=>"currency"in e&&[v.bB,v.bP].includes(e.currency),x=e=>"itemId"in e&&e.itemId===v.qU,M=e=>"itemId"in e&&Object.values(f.zL).some((t=>t===e.itemId)),F=e=>y(e,"SKILL_COMPLETION"),U=({receivingBoost:e,user:t})=>async(a,s)=>{if((0,r.mu)(s(),Date.now())||e){const e=y(s().user,"SKILL_COMPLETION");if(e){const s=e.rewards[0];await l.Vi.consumeReward(t,s.id),s.currency===v.bP?a({gems:s.amount,type:"UPDATE_USER_GEMS"}):a({lingots:s.amount,type:"UPDATE_USER_LINGOTS"})}}else try{await l.Vi.purchaseUserShopItem(f.zL.ITEM_NAME_15_MIN,{isFree:!0,learningLanguage:t.learningLanguage}),await a((0,n.J0)())}catch(e){(0,_.DT)("purchase_user_shop_item_failed",`Failed to purchase xp boost item ${f.zL.ITEM_NAME_15_MIN}`,e)}},H=()=>(e,t)=>{var a;const s=(0,i.D_)(t()),d=(0,i.Ap)(t()),u=(0,r.np)(t()),p=(0,o.r0)(t()),m=u.rewardBundles.find((e=>"FRIENDS_QUEST_GEMS"===e.rewardBundleType)),h=u.rewardBundles.find((e=>"FRIENDS_QUEST_XP_BOOST"===e.rewardBundleType)),_=(0,r.df)(t()),v=j(u);if(!(null===(a=s.friendsQuest)||void 0===a?void 0:a.details)||!(null==m?void 0:m.rewards.length)||!(null==h?void 0:h.rewards.length)||m.rewards.some((e=>e.consumed))||h.rewards.some((e=>e.consumed))||void 0===v)return;const{goalId:f,questId:y,questPoints:b}=s.friendsQuest.details;e({type:"ACKNOWLEDGE_FRIENDS_QUEST_COMPLETE"}),e(p?{gems:v,type:"UPDATE_USER_GEMS"}:{lingots:v,type:"UPDATE_USER_LINGOTS"}),e(S({goals:s,monthlyChallengeThreshold:d,progress:b,user:u})),E({isZombieMode:_,progress:b,user:u}),_?(async()=>{const e=await(0,g.b)();await e.add("submittableRequests",{rewardRequest:{rewardId:m.rewards[0].id,source:"friends-quest",userPartial:{fromLanguage:u.fromLanguage,id:u.id,learningLanguage:u.learningLanguage}},type:"reward"}),await e.add("submittableRequests",{rewardRequest:{rewardId:h.rewards[0].id,source:"friends-quest",userPartial:{fromLanguage:u.fromLanguage,id:u.id,learningLanguage:u.learningLanguage}},type:"reward"})})():(l.Vi.consumeReward(u,m.rewards[0].id),l.JV.postQuestComplete({goalId:f,questId:y,questSlot:"FRIENDS",timestamp:(0,c.Ux)(),timezone:u.timezone,userId:u.id}),(async()=>{await G((0,r.__)(t()),"Friends Quest Reward"),await l.Vi.consumeReward(u,h.rewards[0].id),e((0,n.J0)())})(),e({type:"CONSUME_FRIENDS_QUEST_GEMS"}),e({type:"CONSUME_FRIENDS_QUEST_XP_BOOST"}))},j=e=>{var t,a,s;const n=null===(s=null===(a=null===(t=e.rewardBundles.find((e=>"FRIENDS_QUEST_GEMS"===e.rewardBundleType)))||void 0===t?void 0:t.rewards[0])||void 0===a?void 0:a.items)||void 0===s?void 0:s[0];if(void 0!==n&&("GEM"===n.itemType||"LINGOT"===n.itemType))return n.count},G=async(e,t)=>{for(const a of Object.values(f.zL))if(void 0!==e.inventory[a])try{await l.Vi.useUserShopItem(a)}catch(e){(0,_.DT)("use_user_shop_item_failed",`Failed to delete xp boost item ${a} from ${t}`,e)}}},51158:(e,t,a)=>{"use strict";a.d(t,{fZ:()=>k,cj:()=>M,LZ:()=>F,GN:()=>U,vU:()=>j,c2:()=>H,um:()=>G,S1:()=>A,yB:()=>N,YJ:()=>y,_b:()=>b,av:()=>D,Kp:()=>B});var s=a(59118),n=a.n(s),r=a(85078),i=a.n(r),o=a(74053),l=a.n(o),c=a(37847),d=a.n(c),u=a(58866),p=a.n(u),g=a(80254),m=a(77167),h=a(17135),_=a(59249),v=a(11908);const f=(e,t=1)=>{if(e&&"object"==typeof e){if(Array.isArray(e)){if(t>0){const a=e.map((e=>f(e,t-1)));return a.length?`[${a.join(", ")}]`:"[]"}return e.length?`Array(${e.length})`:"[]"}if(t>0){const a=Object.entries(e).map((([e,a])=>(/^[a-zA-Z$_][a-zA-Z$_\d]*$/.test(e)||(e=`'${e}'`),[e,f(a,t-1)])));return a.length?`{ ${a.map((([e,t])=>`${e}: ${t}`)).join(", ")} }`:"{}"}return Object.keys(e).length?"{…}":"{}"}return"string"==typeof e?`'${e}'`:`${e}`};let S=null,E=null;const y=e=>{S=e},b=e=>{E=e},w=["d35aaqx5ub95lt\\.cloudfront\\.net","duolingo\\.com","localhost","webpack://","webpack-internal://"],I=["CHALLENGE_GUESS_CHANGE","MODAL_MOUNTED","MODAL_UNMOUNTED"],T=[".cloudfront.net/smart_tip_",".doubleclick.net",".fullstory.com",".google-analytics.com",".px-cloud.net","://brb.duolingo.com","://zombie.duolingo.com"],k=[429,500,502,503,504],C=RegExp(["Access is denied|Acceso denegado","Empty session","file://","Network Error","[Nn]etwork ?[Ee]rror","NS_ERROR","reactInternalInstance",`Request failed with status code (${k.join("|")})`,"sascdn","SecurityError: The operation is insecure\\.","[Ss]cript error","setData","SSTIEd|sssied","\\btimeout of \\d+ms exceeded\\b","zaloJSV2"].join("|"),"m");let R=0,O=0;const L={};let P;n().setComponents({instrumenter:i(),scrub:l(),telemeter:d(),truncation:p()});const A=()=>{var e;return P=n().init({accessToken:"4616870b92be48ed9d9971e11a435814",autoInstrument:{log:!1,navigation:!1},captureUncaught:!0,captureUnhandledRejections:!0,checkIgnore:(e,t,a)=>{var s,n,r,i,o,l;try{const c=Array.from(t).find(m.IZ);if(c&&(a.custom=null!==(s=a.custom)&&void 0!==s?s:{},a.custom.request={code:c.code,method:c.method,responseData:null===(n=c.response)||void 0===n?void 0:n.data,status:null===(r=c.response)||void 0===r?void 0:r.status,url:c.url}),!navigator.onLine)return!0;if(c&&void 0===c.response)return!0;if(a.body.trace){const e=null===(i=a.body.trace.frames.slice(-1)[0])||void 0===i?void 0:i.filename;if(!new RegExp(w.join("|")).test(e))return!0;if(/Loading( CSS)? chunk .+? failed\./.test(null!==(o=a.body.trace.exception.message)&&void 0!==o?o:""))return null==S||S(a),!0}if(C.test(JSON.stringify(a.body)))return!0;if((()=>{if((0,_.NY)())return!1;try{let e=(0,v.rV)(v.Qt.RollbarThrottling);return void 0===e||e.firstErrorTimestamp<(0,h.HR)(-300)?e={errorCount:1,firstErrorTimestamp:Date.now()}:e.errorCount++,(0,v.LS)(v.Qt.RollbarThrottling,e),e.errorCount>10}catch(e){try{(0,v.cl)(v.Qt.RollbarThrottling)}catch(e){}return!1}})())return console.log("Ignoring because throttling limit reached:",a),!0;if(e){if(null==E||E(a),O>=5)return console.log("Ignoring because item reporting limit reached:",a),!0;O++,a.custom=null!==(l=a.custom)&&void 0!==l?l:{},a.custom.isUncaught=!0}}catch(e){console.error(e)}return!1},enabled:!!(null===(e=window.duo.l10n)||void 0===e?void 0:e.strings),filterTelemetry:e=>"network"===e.type&&("xhr"===e.body.subtype||"fetch"===e.body.subtype)&&T.some((t=>e.body.url.includes(t))),hostBlockList:[],hostSafeList:w,ignoredMessages:["script error"],payload:{client:{javascript:{code_version:window.duo.versionHash,guess_uncaught_frames:!0,source_map_enabled:!0}},environment:(0,_.oj)()?"preview":(0,_.NY)()?"staging":"production"},verbose:(0,_.Au)(),wrapGlobalEventHandlers:!1})},N=e=>{var t;const a=Object.assign(Object.assign({},null===(t=P.options.payload)||void 0===t?void 0:t.custom),{isZombieMode:e});P.configure({payload:{custom:a}})},D=e=>{var t;const a=Object.assign(Object.assign({},null===(t=P.options.payload)||void 0===t?void 0:t.custom),{experiments:e.experiments?Object.fromEntries(g.XP(e.experiments).filter((t=>e.experiments[t].treated)).map((t=>[t,e.experiments[t].condition]))):void 0}),s={id:e.id,username:e.username};P.configure({payload:{custom:a,person:s}})},x=(e,t=5)=>(a,s={})=>{let n=a instanceof Error?[a.name,a.message].filter((e=>e)).join(": "):a;if(R>=t)return void console.log("Ignoring because item reporting limit reached:",n);const{data:r,ex:i,once:o=!1,sample:l=1}=s;if(o){if(L[n])return void console.log("Ignoring because reported already:",n);L[n]=!0}if(l<1){if(Math.random()>l)return void console.log("Ignoring due to sampling:",n);n=`${n} (sampled at ${100*l}%)`}const c=[n];return a instanceof Error&&c.push(a),"object"!=typeof r&&"string"!=typeof r||c.push(r),a instanceof Error||void 0===i||(i instanceof Error?c.push(i):console.error("Tried to report non-Error as Error:",i)),R+=1,e(...c)},M=e=>{if(!I.includes(e.type))try{const t="QUEUE_ANIMATIONS"===e.type&&e.animations.some((e=>e.name.startsWith("PATH_")))?3:1;P.captureEvent("log",{message:`dispatch(${f(e,t)})`},"debug")}catch(e){}},F=(e,t)=>P.captureEvent("log",{message:e},t),U=(e,t)=>P.captureEvent("navigation",{from:e,to:t},"info"),H=()=>{var e,t;return null!==(t=null===(e=P.telemeter)||void 0===e?void 0:e.queue)&&void 0!==t?t:[]},j=(e,t)=>x(P.error.bind(P))(e,t),G=(e,t)=>x(P.info.bind(P))(e,t),B=(e,t)=>x(P.warning.bind(P))(e,t)},88868:(e,t,a)=>{"use strict";a.d(t,{B6:()=>p,Eg:()=>f,Eq:()=>v,Iw:()=>L,KE:()=>y,Oy:()=>T,Ql:()=>c,UG:()=>S,Vb:()=>d,Z2:()=>u,Zs:()=>k,a9:()=>_,a_:()=>I,cd:()=>R,fu:()=>O,gg:()=>C,o_:()=>P,sg:()=>g,v$:()=>w,wl:()=>h});var s=a(3620),n=a(80254),r=a(50498),i=a(53229),o=a(51158),l=a(16086);const c={de:"https://blog.duolingo.com/de",en:"https://blog.duolingo.com",es:"https://blog.duolingo.com/es",pt:"https://blog.duolingo.com/pt"}[window.duo.uiLanguage],d="incubator-testbed.duolingo.com",u="www.duolingo.com",p="/learn",g="/sections",m=window.duo.oldWebUrlWhitelist.map((e=>new RegExp(e))),h="/super",_=["/plus","/getplus","/youtubeplus",h],v="/practice-hub",f="/practice-hub/stories",S="/practice-hub/mistakes",E=[..._,"/family-plan","/redeem","/settings/super","/settings/family-report","/welcome","/classroom/:classroomCode","/bango/:reseller/:token","/family","/business/checkout","/business/admin/:page","/lesson","/lesson/unit/:pathUnitNumber/level/:pathLevelNumber","/stories/:storyId"],y=e=>E.some((t=>(0,s.LX)(e,{exact:!0,path:t}))),b=[..._,"/attribution","/auto-renewal-agreement","/bango/:reseller/:token","/classroom/:classroomCode","/cookies","/cross-border-data-transfer-agreement","/duocon","/duocon2022","/duocon2021","/duocon2020","/duocon2019","/family","/family-plan","/privacy","/redeem","/register","/terms","/welcome","/business/checkout","/business/admin/:page"],w=e=>b.some((t=>(0,s.LX)(e,{exact:!0,path:t}))),I="preview.duolingo.com",T=["","/errors/404.html"].join(""),k=async(e,t)=>{void 0===e?window.location.reload(!0):t?window.location.replace(e):window.location.href=e,await(0,r.f)()},C=e=>e.replace(window.location.host,I),R=(e=(0,l.Pc)())=>e?p:"/",O=n.HP((e=>m.some((t=>t.test(e))))),L=n.HP(((e,t=!0)=>{if(e.startsWith("javascript:")||e.startsWith("//"))return!1;try{const a=document.createElement("a");return a.href=e,!(a.origin!==window.location.origin||O(a.pathname)&&(t&&(0,o.um)("Routable URL is owned by old web",{data:{url:e},once:!0}),1))}catch(e){return!1}})),P=(e,t=!0)=>{let{pathname:a}=e,s=new URLSearchParams(e.search);const n=a,r=e.hash;if(r&&"/"===a&&(a=r.replace(/^#\/*(.*)/,"/$1"),console.log("Removed # from URL"),t&&(0,o.um)("Removed # from URL",{data:{hash:r,originalPathname:n,pathname:a,searchParams:s}})),a.includes("$")&&a.includes("=")&&!a.includes("?")&&(a=a.replace("$","?"),console.log("Replaced $ with ? in URL"),t&&(0,o.um)("Replaced $ with ? in URL",{data:{hash:r,originalPathname:n,pathname:a,searchParams:s}})),a.includes("?")){const e=a.split("?");a=e[0],s=new URLSearchParams((0,i.Lm)(e[1])),t&&(0,o.um)("Split ? from new path",{data:{hash:r,originalPathname:n,pathname:a,searchParams:s}})}(0,l.Pc)()&&s.delete("isLoggingIn");const c=s.toString();return{pathname:a,search:0===c.length?"":`?${c}`}}},12125:(e,t,a)=>{"use strict";a.d(t,{wn:()=>c,Qs:()=>h,YN:()=>g,XU:()=>m,Nx:()=>d,R0:()=>_,Zv:()=>v,S2:()=>u,Y:()=>p});var s=a(80254);const n=a.p+"images/schools/leaderboards/0e0f9617bdef7c1e2e6f82363e093eb7.svg",r=a.p+"images/schools/leaderboards/7417a8ffc61c46d8ea49c3a209f2bf81.svg",i=a.p+"images/schools/leaderboards/8d3ba3746a937cee2a89b1b71b586980.svg";var o=a(17135),l=a(8654);const c=6,d=(e,t,a)=>s.MR(t.map((t=>t.userId===e?Object.assign(Object.assign({},t),{score:t.score+a}):t)),"score").reverse(),u=(e,t,a)=>{if(!(null==t?void 0:t.active)||a<=0)return!1;const s=p(t.active.cohort.rankings),n=s.findIndex((t=>t.userId===e));return 0!==n&&-1!==n&&s[n].score+a>s[n-1].score},p=e=>[...e].sort(((e,t)=>e.score===t.score?e.displayName.localeCompare(t.displayName,void 0,{sensitivity:"base"}):e.score<t.score?1:-1)),g=e=>{switch(e){case 0:return"GOLD";case 1:return"SILVER";case 2:return"BRONZE";default:return"GREEN"}},m=e=>{switch(e){case 0:return n;case 1:return r;case 2:return i;default:return}},h=e=>{const t=(0,o.pY)(e),a=(0,o.Gz)(e);if(t)return(0,l._i)(30308,{date:a.getDate(),day:(0,l.Q7)()[a.getDay()],month:(0,l.mD)()[a.getMonth()]});const{days:s,hours:n}=(0,o.zj)(e-Date.now());return s>0?(0,l._i)(30308,{date:a.getDate(),day:(0,l.Q7)()[a.getDay()],month:(0,l.mD)()[a.getMonth()]}):(0,l._i)(30309,{num:n})},_=e=>void 0!==e&&"completed"!==e&&"late"!==e,v=e=>void 0!==e&&("completed"===e||"late"===e)},89260:(e,t,a)=>{"use strict";a.d(t,{A2:()=>B,LJ:()=>T,TD:()=>$,Uj:()=>D,VC:()=>G,Xd:()=>j,ZX:()=>O,bc:()=>R,l$:()=>k,oT:()=>Z,tq:()=>C,u4:()=>L});var s=a(80254),n=a(86155),r=a(42659),i=a(93540),o=a(40387),l=a(77167),c=a(94778),d=a(95351),u=a(17135),p=a(59249),g=a(94786),m=a(68903),h=a(53229),_=a(23275),v=a(5934),f=a(51158),S=a(80820),E=a(59096),y=a(68564),b=a(36571),w=a(79465),I=a(11811);const T=e=>[I.FF.PlacementTest,I.FF.SectionTest,I.FF.UnitTest].includes(e),k=e=>[I.FF.PlacementTest].includes(e),C=()=>[I.Sm.Listen,I.Sm.ListenComplete,I.Sm.ListenComprehension,I.Sm.ListenMatch,I.Sm.ListenIsolation,I.Sm.ListenSpeak,I.Sm.ListenTap,I.Sm.SelectPronunciation,I.Sm.SelectTranscription],R=()=>[I.Sm.Speak,I.Sm.ListenSpeak],O=e=>[I.FF.GlobalPractice,I.FF.Lesson,I.FF.LevelReview,I.FF.LexemePractice,I.FF.LexemeSkillLevelPractice,I.FF.ListeningPractice,I.FF.PlacementTest,I.FF.SectionTest,I.FF.TargetPractice,I.FF.UnitTest,I.FF.UnitRewind].includes(e),L=async({dispatch:e,getState:t,includeFreeform:a,includeListening:s,includeSmartTips:c,includeSpeaking:g,params:m,levelData:h,sessionWillStartRightAway:_})=>{const v=t(),E=(0,r.Oz)(v),y=(0,r.B8)(v),T=(0,r.df)(v),k=(0,r.oe)(v),O=(0,r.np)(v),{fromLanguage:L,learningLanguage:M}=O,F=(0,u.Zo)(),U=(0,i.DN)(v),j=(0,i.HF)(v),{isListenSupported:G,isSpeakSupported:B}=(0,n.eG)(v),V="mistakes-review"===m.type?(await l.wO.getMistakes({countLimit:10,courseId:E.id,includeListening:s,includeSpeaking:g})).map((e=>e.challengeIdentifier)):void 0;let z;"practice"===m.type?z=(0,d.K)({currentCourseHistory:y,sessionType:I.FF.GlobalPractice,timestamp:F}):"path-level"===m.type&&(z=(0,d.K)({currentCourseHistory:y,levelData:h,sessionType:I.FF.LevelReview}));let Z=!1;if(h&&"skill"===h.level.type){const{skillId:e}=h.level.pathLevelClientData;Z=D(O,e)}const $=P(),q=await A($),W=N(),Q=(0,p.ky)("levelIndex"),Y=(0,p.ky)("skillId"),J=x({crowns:E.crowns,debugChallengeTypes:$,debugChallenges:q,debugGeneratorIds:W,debugLevelIndex:Q,debugSkillId:Y,dispatch:e,flattenedPath:j,fromLanguage:L,generatorIdentifiersOfRecentMistakes:z,includeSmartTips:c,isExplanationSeen:Z,isListenSupported:G,isSpeakSupported:B,learningLanguage:M,levelData:h,mistakeGeneratorIds:V,params:m,sectionedPath:U,skills:k,user:O}),K=$.length>0||q.length>0||W.length>0||void 0!==Q||void 0!==Y||(0,p.gQ)("latest")||(0,p.gQ)("debugShowAllStoryChallenges")||(0,p.gQ)("debugShowStoriesOnboarding"),X=h&&(0,S.tr)(h.level)?(0,S.gL)({generatorIdsOfRecentMistakes:null==z?void 0:z.map((e=>e.generatorId)),includeSmartTips:c,isExplanationSeen:Z,pathLevel:h.level}):void 0;let ee,te,ae;if(X&&!K)try{[ee,te,ae]=await(0,S.vS)(X)}catch(e){(0,f.Kp)("Unable to retrieve cached session",{ex:e})}if(!ee||ae&&!T){if(T)throw Error("Cannot fetch a new session in Zombie mode");try{const t="story"===J.type?l.Mw.getStory(J):l.Vi.sessionCreate(J);_||!X||K||await(0,S.fB)(X,t,(0,u.Zo)(),e),ee=await t,"type"in ee&&ee.type===I.FF.SectionTest&&J.type===I.FF.SectionTest&&void 0!==J.sectionIndex&&(ee.sectionIndex=J.sectionIndex-1),"type"in ee&&ee.type===I.FF.MistakesReview&&l.wO.clearUngeneratableMistakes({courseId:E.id,expectedMistakes:V,session:ee})}catch(e){throw"story"===J.type?(0,w.DT)("stories_load_story","Failed to load story",e):((0,w.DT)("create_session_failed","Failed to create session",e),"mistakes-review"===m.type&&l.wO.clearUngeneratableMistakes({courseId:E.id,expectedMistakes:V,session:void 0})),e}}else void 0!==X&&!ae&&_&&await(0,S.yI)(X);const se="story"===J.type?{session:ee,sessionParams:J,sessionPrefetchedTimestamp:te,type:"story"}:{session:ee,sessionParams:J,sessionPrefetchedTimestamp:te,type:"regular"};return"regular"===se.type?(T&&(se.session.challenges=se.session.challenges.filter((e=>e.type!==I.Sm.Name))),s||(se.session=(0,o.qz)(se.session,C())),g||(se.session=(0,o.qz)(se.session,R())),se.session.type===I.FF.GlobalPractice&&(null==z?void 0:z.length)&&(se.session.isMistakesGlobalPractice=!0),await H({debugChallengeTypes:$,debugChallenges:q,debugGeneratorIds:W,levelData:h,session:se.session,sessionParams:se.sessionParams})):"story"!==se.type||a&&!T||(se.session.elements=se.session.elements.filter((e=>!(0,b.Eo)(e)))),se},P=()=>{let e=[];return(0,p.gQ)("type")&&(e=(0,h.vl)().type.split(",").filter((e=>c.KT.includes(e))),e.length||console.warn("Unknown debug challenge type(s)")),e},A=async e=>{var t;const s=(0,p.ky)("sampleSession");return s?(await a(63198)(`./sampleChallenges${null!==(t={ar_puzzle:"PuzzleArabic",es:"Spanish",ja:"Japanese",ko:"Korean",ko_puzzle:"PuzzleKorean",speak:"Speak",trace:"Trace"}[s])&&void 0!==t?t:""}.json`)).default.filter((t=>0===e.length||e.includes(t.type))):[]},N=()=>{const e=(0,p.ky)("generatorId");return e?e.split(","):[]},D=(e,t)=>{const{explanationsSeen:a}=e;return!!(null==a?void 0:a[t])},x=({crowns:e,debugChallengeTypes:t,debugChallenges:a,debugGeneratorIds:s,debugLevelIndex:n,debugSkillId:r,dispatch:i,flattenedPath:o,fromLanguage:l,generatorIdentifiersOfRecentMistakes:d,includeSmartTips:u,isExplanationSeen:p,isListenSupported:g,isSpeakSupported:h,learningLanguage:f,levelData:S,mistakeGeneratorIds:y,params:b,sectionedPath:w,skills:T,user:k})=>{const C=(0,_.Wc)(null==S?void 0:S.level.state);let R;switch(void 0!==w&&w.length>0&&(o=w.flatMap((e=>e.units))),b.type){case"alphabets":R={alphabetSessionId:b.alphabetSessionId,type:I.FF.AlphabetLesson};break;case"legendary":R=U(e,null==S?void 0:S.level);break;case"mistakes-review":R={generatorIdentifiersOfRecentMistakes:y,type:I.FF.MistakesReview};break;case"placement":R={type:I.FF.PlacementTest};break;case"practice":R={generatorIdentifiersOfRecentMistakes:d,type:I.FF.GlobalPractice};break;case"practice-hub":if(!o)throw Error("Missing path information for practice hub session request.");R=(0,v.hz)({dispatch:i,isListenSupported:g,isSpeakSupported:h,path:o,practiceType:b.practiceType,user:k});break;case"preview":R={lessonIndex:b.lesson?parseInt(b.lesson,10):0,levelIndex:0,skillId:b.skillId,type:I.FF.Lesson};break;case"path-level":if(!S)throw Error("Missing level information for V2 session request.");if("story"===S.level.type){const{mode:t,storyId:a}=S.level.pathLevelClientData;return F({crowns:e,mode:t.toUpperCase(),storyId:a})}R=M({debugLevelIndex:n?parseInt(n,10):void 0,flattenedPath:o,fromLanguage:l,generatorIdentifiersOfRecentMistakes:d,isExplanationSeen:p,isRedoingPassedNode:C,learningLanguage:f,levelData:S,sectionedPath:w,skills:T});break;case"story":return F({crowns:e,mode:b.mode,storyId:b.storyId});default:throw(0,m.RJ)(b),Error("Unknown session type.")}const O=/^zh-(hant|hk|mo|tw)/.exec(navigator.language.toLowerCase())?"zt":/^zh-(cn|hans|my|sg)/.exec(navigator.language.toLowerCase())?"zs":void 0,L={};return!a.length&&s.length&&(L.challengeIds=s,L.forceChallengeTypes=!0),!a.length&&t.length&&(L.challengeTypes=t,L.forceChallengeTypes=!0),!a.length&&r&&(L.skillId=r),Object.assign(Object.assign({challengeTypes:c.KT,fromLanguage:l,isFinalLevel:!1,isV2:!0,juicy:!0,learningLanguage:f,locale:O,smartTipsVersion:u?E.fH:void 0},R),L)},M=({debugLevelIndex:e,flattenedPath:t,fromLanguage:a,generatorIdentifiersOfRecentMistakes:s,isExplanationSeen:n,isRedoingPassedNode:r,learningLanguage:i,levelData:o,sectionedPath:l,skills:c})=>{var d,u;const p=o.level,g=(0,_.w1)(p),h="assigned"===(0,_.xV)(p);let v;if((0,_.TH)(p)&&!h&&t){const{skillIds:e}=p.pathLevelClientData;if(l&&l.length>0&&"locked"===l[(0,_.Kq)(o.unitIndex,l)].status){const t=(0,_.Kq)(o.unitIndex,l);v={sectionIndex:t,sectionType:l[t].type,skillIds:e,type:I.FF.SectionTest}}else v={skillIds:e,type:I.FF.UnitTest}}else switch(p.type){case"alphabet_gate":case"chest":case"story":throw Error(`Tried to create regular session params for unsupported level type: ${p.type}`);case"practice":{const{finishedSessions:e,hasLevelReview:t,pathLevelClientData:a,totalSessions:n}=p,{skillIds:r}=a;v={generatorIdentifiersOfRecentMistakes:s,lexemePracticeType:t&&e===n-1?"practice_level_review":"practice_level",skillIds:r,type:I.FF.LexemePractice};break}case"skill":{const{skillId:t,crownLevelIndex:l}=p.pathLevelClientData,g=null!=e?e:l,m=c[t],f="custom_intro"===p.subtype,S="grammar"===p.subtype,E=r&&S,y=(0,_.Eb)(p);v=(0,_.$)(p)?{generatorIdentifiersOfRecentMistakes:s,levelIndex:g,skillId:t,type:I.FF.LevelReview}:!S&&(r&&!h||y)?{levelIndex:g,skillIds:[t],type:I.FF.LexemeSkillLevelPractice}:{isCustomIntroSkill:f,isGrammarSkill:S,levelIndex:g,showGrammarSkillSplash:V({hasExplanation:!!(null===(d=m.explanation)||void 0===d?void 0:d.url),isExplanationSeen:n,isGrammarSkill:S,isRedoingGrammarSkill:E,pathLevelState:p.state})||z({fromLanguage:a,hasExplanation:!!(null===(u=m.explanation)||void 0===u?void 0:u.url),isCustomIntroSkill:f,isExplanationSeen:n,learningLanguage:i,levelData:o}),skillId:t,type:I.FF.Lesson};break}case"unit_review":{const{skillIds:e}=p.pathLevelClientData;if("passed"===p.state)throw Error("Tried to create session for passed unit_review level");v={skillIds:e,type:I.FF.UnitReview};break}default:throw(0,m.RJ)(p.type),Error(`Unrecognized level type: ${p.type}`)}return Object.assign(Object.assign({},v),{levelSessionIndex:g})},F=({crowns:e,isLegendaryMode:t=!1,mode:a,storyId:s})=>({crowns:e,debugShowAllChallenges:(0,p.gQ)("debugShowAllStoryChallenges"),debugShowOnboarding:(0,p.gQ)("debugShowStoriesOnboarding")?"newUser":void 0,illustrationFormat:"svg",isDesktop:!0,isLegendaryMode:t,masterVersion:"true"===(0,p.ky)("latest"),mode:a,storyId:s,supportedElements:(0,b.b5)().join(","),type:"story"}),U=(e,t)=>{if(void 0===t)throw Error("Tried to create legendary per node session params for undefined level");if("passed"!==t.state)throw Error("Tried to create legendary per node session params for non-passed node");switch(t.type){case"alphabet_gate":case"chest":case"unit_review":throw Error(`Tried to create legendary per node session params for unsupported level type: ${t.type}`);case"practice":{const{skillIds:e}=t.pathLevelClientData;return{isFinalLevel:!0,skillIds:e,type:I.FF.LegendaryLexemePractice}}case"skill":{const{skillId:e,crownLevelIndex:a}=t.pathLevelClientData;return{isFinalLevel:!0,levelIndex:a,skillId:e,type:I.FF.LegendaryLevel}}case"story":{const{mode:a,storyId:s}=t.pathLevelClientData;return F({crowns:e,isLegendaryMode:!0,mode:a.toUpperCase(),storyId:s})}default:throw(0,m.RJ)(t.type),Error(`Unrecognized legendary per node level type: ${t.type}`)}},H=async({debugChallengeTypes:e,debugChallenges:t,debugGeneratorIds:n,levelData:r,session:i,sessionParams:o})=>{var l,c,d;const u=t.length?(0,p.gQ)("adaptiveChallenges")&&"0"!==(0,p.ky)("adaptiveChallenges")?"force":"remove":(0,p.gQ)("adaptiveChallenges")?"0"===(0,p.ky)("adaptiveChallenges")?"remove":"force":"preserve";let g,m="force"===u?(await a.e(1711).then(a.t.bind(a,40430,19))).default:[];switch(e.length&&(m=m.filter((t=>e.includes(t.type)))),t.length&&(i.challenges=t),u){case"force":i.adaptiveChallenges=m;break;case"preserve":break;case"remove":i.adaptiveChallenges=void 0}if(n.length&&(i.challenges=i.challenges.filter((e=>{var t;const a=null===(t=e.challengeGeneratorIdentifier)||void 0===t?void 0:t.generatorId;return a&&n.includes(a)}))),e.length&&(i.challenges.sort(((t,a)=>e.indexOf(t.type)-e.indexOf(a.type))),null===(l=i.adaptiveChallenges)||void 0===l||l.sort(((t,a)=>e.indexOf(t.type)-e.indexOf(a.type)))),(0,p.gQ)("length")){const e=parseInt(null!==(c=(0,p.ky)("length"))&&void 0!==c?c:"-1",10);e>0&&(i.challenges=i.challenges.slice(0,o.isFinalLevel?Math.max(2,e):e))}if((0,p.gQ)("debugCharacters"))if("0"===(0,p.ky)("debugCharacters"))i.challenges=i.challenges.map((e=>Object.assign(Object.assign({},e),{character:void 0})));else{const e=(await a.e(1711).then(a.t.bind(a,88877,19))).default;i.challenges=i.challenges.map(((t,a)=>Object.assign(Object.assign({},t),{character:e[a%e.length]})))}if([i.challenges,g]=s.uK(i.challenges,(e=>(0,p.gQ)("sampleSession")?e.type!==I.Sm.Speak||y.c:o.challengeTypes.includes(e.type))),g.length){const e=s.jj(s.jg(g,"type")).sort();(0,f.vU)("Received unwanted challenge types",{data:{levelType:null===(d=null==r?void 0:r.level)||void 0===d?void 0:d.type,sessionType:i.type,types:e},sample:.01})}},j=e=>{switch(e){case I.FF.AlphabetLesson:return g.Q.AlphabetLesson;case I.FF.GlobalPractice:return g.Q.GlobalPractice;case I.FF.Lesson:return g.Q.Lesson;case I.FF.MistakesReview:return g.Q.MistakesReview;case I.FF.PlacementTest:return g.Q.PlacementTest;case I.FF.SpeakingPractice:return g.Q.SpeakingPractice;case I.FF.Legendary:return g.Q.Legendary;case I.FF.LegendaryLevel:return g.Q.LegendaryLevel;case I.FF.LegendaryLexemePractice:return g.Q.LegendaryLexemePractice;case I.FF.LevelReview:return g.Q.LevelReview;case I.FF.LexemePractice:return g.Q.LexemePractice;case I.FF.LexemeSkillLevelPractice:return g.Q.LexemeSkillLevelPractice;case I.FF.ListeningPractice:return g.Q.ListeningPractice;case I.FF.SectionTest:return g.Q.SectionTest;case I.FF.TargetPractice:return g.Q.TargetPractice;case I.FF.UnitReview:return g.Q.UnitReview;case I.FF.UnitRewind:return g.Q.UnitRewind;case I.FF.UnitTest:return g.Q.UnitTest;default:return(0,m.RJ)(e),g.Q.Lesson}},G=e=>e.type===I.FF.MistakesReview?-e.challenges.filter((e=>e.correct)).length:[I.FF.Lesson,I.FF.LexemePractice,I.FF.GlobalPractice,I.FF.LevelReview].includes(e.type)?s.jj(e.challenges.filter((e=>!e.correct)),!1,(e=>e.id)).length:0,B=e=>s.jj(e.filter((e=>!e.skipped&&R().includes(e.type))),!1,(e=>e.id)).length,V=({hasExplanation:e,isExplanationSeen:t,isGrammarSkill:a,isRedoingGrammarSkill:s,pathLevelState:n})=>a&&e&&!t&&!(0,_.Wc)(n)&&!s,z=({fromLanguage:e,hasExplanation:t,isCustomIntroSkill:a,isExplanationSeen:s,learningLanguage:n,levelData:r})=>a&&"ja"===n&&"en"===e&&t&&0===r.level.finishedSessions&&r.unitIndex<7&&!s,Z=(e,t)=>{const a=Math.floor(e.length/t),s=new Array(t),n=e.length%t;let r=t-1,i=0;for(let o=e.length-1;o>=0;o--){const l=e[o];(s[r]=s[r]||[]).unshift(l.id),i++,i>=a+(n>0&&t-r>=n?1:0)&&(r--,i=0)}return s},$=e=>{var t;return{activity_uuid:e.session.trackingProperties.activity_uuid,skill_id:e.session.skillId,skill_name:e.session.trackingProperties.skill_name,skill_tree_id:e.session.trackingProperties.skill_tree_id,type:e.session.type,unit_index:null===(t=e.levelData)||void 0===t?void 0:t.unitIndex}}},80820:(e,t,a)=>{"use strict";a.d(t,{_x:()=>m,fB:()=>g,gL:()=>v,rb:()=>y,tr:()=>f,vS:()=>_,yI:()=>S});var s=a(80715),n=a(42659),r=a(93540),i=a(17135),o=a(68903),l=a(60752),c=a(23275),d=a(51158);const u=(0,i.dz)({days:30}),p={},g=async(e,t,a,s)=>{const n=t.then((async t=>{try{const n=await(0,l.b)();await n.add("prefetchedSessions",{prefetchTimestamp:a,session:t,stale:!1},e),s({key:e,type:"sessionCache/ADD"})}catch(e){(0,d.Kp)("Unable to store prefetched session",{ex:e})}return t}));p[e]=n,await n,delete p[e]},m=async e=>{const t=e.dispatch.bind(e),a=(0,r.cb)(e.getState()),s=(0,n.Rv)(e.getState()),o=(0,n.iH)(e.getState()),d=(0,r.HF)(e.getState()),p=await(0,l.b)();let g=await p.transaction("prefetchedSessions").store.openCursor();const m=e=>{if(!d)throw Error("Cannot determine level position without path");if(!a)return!0;const t=(0,c.m8)(d,(t=>t.id===e));return!t||(0,c.Nk)(t,a)<0},_=[];for(;g;)((0,i.pY)(1e3*(g.value.prefetchTimestamp+u))||g.value.session.fromLanguage!==s||g.value.session.learningLanguage!==o||m(E(g.key).pathLevel.id))&&_.push(h(g.key,t)),g=await g.continue();await Promise.all(_)},h=async(e,t)=>{const a=await(0,l.b)();await a.delete("prefetchedSessions",e),t({key:e,type:"sessionCache/REMOVE"})},_=async e=>{const t=p[e];if(void 0!==t)return[await t,void 0,!1];const a=await(0,l.b)(),s=await a.get("prefetchedSessions",e);return[null==s?void 0:s.session,null==s?void 0:s.prefetchTimestamp,null==s?void 0:s.stale]},v=({generatorIdsOfRecentMistakes:e,includeSmartTips:t,isExplanationSeen:a,pathLevel:s})=>JSON.stringify({generatorIdsOfRecentMistakes:e,includeSmartTips:t,isExplanationSeen:a,pathLevelFinishedSessions:s.finishedSessions,pathLevelId:s.id,pathLevelState:s.state}),f=e=>"active"===e.state&&(0,o.gB)(e.type,["practice","skill","story","unit_review"]),S=async e=>{const t=await(0,l.b)(),a=await t.get("prefetchedSessions",e);a&&await t.put("prefetchedSessions",Object.assign(Object.assign({},a),{stale:!0}),e)},E=e=>{const{generatorIdsOfRecentMistakes:t,includeSmartTips:a,isExplanationSeen:s,pathLevelFinishedSessions:n,pathLevelId:r,pathLevelState:i}=JSON.parse(e);return{generatorIdsOfRecentMistakes:t,includeSmartTips:a,isExplanationSeen:s,pathLevel:{finishedSessions:n,id:r,state:i}}},y=async e=>{const t=e.dispatch.bind(e),a=e.getState().sessionCache.keys,n=await(0,l.b)(),r=await n.getAllKeys("prefetchedSessions");(0,s.dC)((()=>{const e=r.filter((e=>!a.includes(e)));for(const a of e)t({key:a,type:"sessionCache/ADD"});const s=a.filter((e=>!r.includes(e)));for(const e of s)t({key:e,type:"sessionCache/REMOVE"})}))}},51551:(e,t,a)=>{"use strict";a.d(t,{K:()=>S,N4:()=>g,PR:()=>m,RB:()=>_,cy:()=>f,sz:()=>v});var s=a(54385),n=a(17135),r=a(59249),i=a(1),o=a(11908),l=a(88675),c=a(97106);const d="web_streak_wager_session_end";var u;!function(e){e[e.SUNDAY=0]="SUNDAY",e[e.MONDAY=1]="MONDAY",e[e.TUESDAY=2]="TUESDAY",e[e.WEDNESDAY=3]="WEDNESDAY",e[e.THURSDAY=4]="THURSDAY",e[e.FRIDAY=5]="FRIDAY",e[e.SATURDAY=6]="SATURDAY"}(u||(u={}));const p=(e,t)=>`duo.experiments.${t}.last_shown_${e}`,g=e=>{((e,t)=>{const a=p(e,t),s=(0,n.Zo)();(0,o.LS)(a,s)})(e,d)},m=(e,t,a)=>{var s,r;const l=(0,i.GQ)(t),u=l?void 0===e.inventory.gem_wager:void 0===e.inventory.rupee_wager,g=l?e.shop.misc.gem_wager:e.shop.misc.rupee_wager,m=l?t.gemsConfig.gems:t.lingots,h=!!g&&g.price<=m,{timezoneOffset:_,xpGains:v,xpGoal:f}=t,S=(0,c.ab)(_,v)+a>=f,E=((e,t)=>{const a=p(e,t),s=(0,o.rV)(a);return"number"==typeof s&&(0,n.zk)((0,n.zM)(s))})(t.id,d);return(null!==(r=null===(s=t.streakData.currentStreak)||void 0===s?void 0:s.length)&&void 0!==r?r:0)<7&&u&&!!g&&h&&S&&!E},h=(e,t=1)=>{const a=e.shop.misc.streak_freeze,s=a?e.inventory[a.id]:void 0;return!!s&&s.quantity>=t},_=(e,t,a=!1)=>{var n,i;return!h(e,s.SG)&&(!!(0,r.gQ)("dailyGoalStreakFreeze")||(null!==(i=null===(n=t.streakData.currentStreak)||void 0===n?void 0:n.length)&&void 0!==i?i:0)>=2&&(a||Math.random()<.75))},v=(e,t)=>!h(e)&&1===t,f=e=>e.shop.misc.final_level_attempt,S=(e,t)=>{var a,n,r;if(!(0,l.pS)(e)||!(null===(a=t.shop.misc.streak_freeze)||void 0===a?void 0:a.id)||h(t,s.SG))return 0;const i=s.SG-(null!==(r=null===(n=t.inventory.streak_freeze)||void 0===n?void 0:n.quantity)&&void 0!==r?r:0);return Math.max(i,0)}},6986:(e,t,a)=>{"use strict";a.d(t,{MG:()=>d,gT:()=>c,oV:()=>o,ub:()=>i,yI:()=>u});var s=a(77167),n=a(8654),r=a(11908);const i=()=>(0,r.cl)(r.Qt.LastLogin),o=(e,t)=>{const a=l(e,t);(0,r.LS)(r.Qt.LastLogin,a)},l=(e,t)=>t.email?{email:t.email,hasFacebook:"social"===e?!!t.facebookId:void 0,hasGoogle:"social"===e?!!t.googleId:void 0,name:"email"===e&&t.email?t.email:t.name,picture:t.picture,type:e}:null,c=async e=>{var t,a;const n=await s.Vi.userSearchByEmail(e),r=n&&n.length>0?n[0]:null;return r?{hasFacebook:!!r.hasFacebookId,hasGoogle:!!r.hasGoogleId,name:null!==(a=null!==(t=r.name)&&void 0!==t?t:r.username)&&void 0!==a?a:"",picture:r.picture}:null},d=()=>(0,r.rV)(r.Qt.LastLogin),u=(e,t,a)=>a&&!t&&(0,n.k_)(e)},59096:(e,t,a)=>{"use strict";a.d(t,{C8:()=>v,P9:()=>f,RZ:()=>T,U:()=>g,b0:()=>_,cz:()=>E,fH:()=>p,pT:()=>y,qj:()=>S,r8:()=>h,u5:()=>I});var s=a(80254),n=a(77167),r=a(83719),i=a(17135),o=a(68903),l=a(30004),c=a(51158),d=a(79465),u=a(11811);const p=2,g=86400,m=[u.Sm.CompleteReverseTranslation,u.Sm.Form,u.Sm.GapFill,u.Sm.Translate],h=e=>y(e.identifier,e.trigger.smart_tip.variables),_=e=>((0,l.Lw)([...e.smartTips].map((e=>({queryFn:async()=>{try{return await n.s3.getSmartTip(e.url)}catch(t){throw console.warn(`Failed to download Smart Tip ${e.smartTipId}.`),t}},queryKey:["smartTip",e],staleTime:108e5})))),null),v=(e,t,a,n,o,p)=>{const{session:{type:g},sessionParams:{levelIndex:_,skillId:v},shownSmartTipIds:f}=n;if(!m.includes(t.type))return;if(!a||0===a.length)return;if(e&&[r.Oj.MissingWord,r.Oj.WrongWord].includes(e))return void(0,d.j)("smart_tips_rules_fired",{blame:e,challenge_type:t.type,did_match_any_rule:!1,fired_rules:"[]",has_content:!0,number_of_matched_rules:0,probably_tap:t.type===u.Sm.Translate&&t.choices.length>0,type:g});const S=a,E=S.map((e=>{const t=(a=e.smart_tip.id,(0,l.wQ)(["smartTip"],{exact:!1,predicate:({queryKey:e})=>e[1].smartTipId===a}));var a;if(t)return Object.assign(Object.assign({},t),{correctSolution:y(t.correctSolution,e.smart_tip.variables),trigger:e});(0,d.j)("smart_tip_failure",{reason:"no_content_was_fetched",rule_id:e.smart_tip.id})})).filter((e=>void 0!==e)).filter((e=>b(e)));if((0,d.j)("smart_tips_rules_fired",{blame:e,challenge_type:t.type,did_match_any_rule:S.length>0,fired_rules:JSON.stringify(S.map((e=>e.smart_tip.id))),has_content:E.length>0,number_of_matched_rules:S.length,probably_tap:t.type===u.Sm.Translate&&t.choices.length>0,type:g}),0===E.length||f.length>3||void 0===_||void 0===v)return;const w=o[v].row,I=E.filter((e=>!f.includes(e.identifier))).filter((e=>{var t,a;return e.policy.allowedSkillLevels.includes(_)&&w>=(null!==(t=e.policy.earliestRow)&&void 0!==t?t:0)&&w<=(null!==(a=e.policy.latestRow)&&void 0!==a?a:Number.MAX_VALUE)})).filter((e=>{var t;const a=h(e);return!(null===(t=p.recentlySeenSmartTips)||void 0===t?void 0:t[a])||p.recentlySeenSmartTips[a]>(0,i.Zo)()}));if(0===I.length)return;const T=I[0],k=T.elements.filter((e=>"challenge"===e.type));if(1!==k.length)return void(0,c.vU)("Smart Tip doesn't have exactly one challenge.",{data:{smartTipId:T.identifier}});const C=k[0].element.options.map((e=>y(e.text,T.trigger.smart_tip.variables)));if(2===C.length)if(C.length===s.jj(C).length){if(T)return(0,d.j)("smart_tip_will_show",{blame:e,challenge_type:t.type,for_rule_with_id:T.identifier,level_index:_,method:"graph_based",num_tips_shown_so_far:f.length,probably_tap:t.type===u.Sm.Translate&&t.choices.length>0,smart_tip_id:T.identifier,smart_tip_name:T.name,tree_level:v?o[v].row:void 0,type:g}),T}else(0,c.vU)("Smart Tip challenge options are not unique.",{data:{challengeId:t.id,smartTipId:T.identifier}});else(0,c.vU)("Smart Tip challenge has incorrect number of options.",{data:{numOptions:C.length,smartTipId:T.identifier}})},f=e=>{const t=e.elements.filter((e=>"challenge"===e.type));if(1!==t.length)return(0,c.vU)("Smart Tip that doesn't have exactly one challenge",{data:{smartTipId:e.identifier}}),0;const a=t[0].element.options.findIndex((e=>e.isCorrect));return-1===a?((0,c.vU)("Smart Tip that doesn't have a correct answer",{data:{smartTipId:e.identifier}}),0):a},S=new RegExp("({{ .*? }})","g"),E=e=>`{{ ${e.name} }}`,y=(e,t)=>{if(void 0===t)return e;let a=e;return t.forEach((e=>{a=a.replace(new RegExp(E(e),"g"),e.value)})),a},b=e=>{const t=e.trigger.smart_tip.variables.map((e=>E(e))),a=[e.correctSolution,...e.elements.map((e=>w(e))).flat()].every((e=>{var a;return(null!==(a=e.match(S))&&void 0!==a?a:[]).every((e=>t.includes(e)))}));return a||(0,d.j)("smart_tip_failure",{reason:"template_filling_failed",rule_id:e.identifier}),a},w=e=>{const t=e=>{var t;return[e.text.styledString.text,...e.subtext?[null===(t=e.subtext)||void 0===t?void 0:t.styledString.text]:[]]};switch(e.type){case"audioSample":return[e.element.sampleText.text,e.element.description.styledString.text];case"captionedImage":return[e.element.text.styledString.text];case"challenge":return e.element.options.map((e=>e.text));case"dialogue":return e.element.phrases.flatMap((e=>t(e)));case"example":return t(e.element);case"exampleCaptionedImage":return e.element.examples.map(t).flat();case"expandable":return e.element.elements.map(w).flat();case"pathSectionsCefrTable":case"verticalSpace":return[];case"table":return e.element.cells.map((e=>e.map((e=>e.styledString.text)))).flat();case"text":return[e.element.styledString.text];default:throw(0,o.RJ)(e),Error(`Unexpected explanation item type "${e.type}"`)}},I=(e,t)=>{var a,s;return null===(s=null===(a=e.options.find((({},e)=>t===e)))||void 0===a?void 0:a.smartTips)||void 0===s?void 0:s.map((e=>({smart_tip:e})))},T=(e,t)=>{switch(e){case u.FF.LexemeSkillLevelPractice:return!0;case u.FF.GlobalPractice:case u.FF.Lesson:case u.FF.LexemePractice:case u.FF.MistakesReview:case u.FF.UnitReview:return!t.isFinalLevel;case u.FF.AlphabetLesson:case u.FF.LevelReview:case u.FF.Legendary:case u.FF.LegendaryLevel:case u.FF.LegendaryLexemePractice:case u.FF.ListeningPractice:case u.FF.PlacementTest:case u.FF.SectionTest:case u.FF.SpeakingPractice:case u.FF.TargetPractice:case u.FF.UnitTest:case u.FF.UnitRewind:return!1;default:return(0,o.RJ)(e),void(0,c.vU)("Received invalid session type",{data:e})}}},419:(e,t,a)=>{"use strict";a.d(t,{Q:()=>s});const s=e=>{const t={link:"https://www.facebook.com/duolingo"},a={link:"https://www.instagram.com/duolingo"},s={link:"https://www.tiktok.com/@duolingo"},n={link:"https://twitter.com/duolingo"};switch(e){case"de":return{facebook:{link:"https://www.facebook.com/DuolingoDeutschland"},instagram:{link:"https://www.instagram.com/duolingodeutschland/"},tiktok:s,twitter:n};case"es":return{facebook:{link:"https://www.facebook.com/duolingoespanol"},instagram:{link:"https://www.instagram.com/duolingoespanol/"},tiktok:s,twitter:{link:"https://twitter.com/duolingoespanol"}};case"fr":return{facebook:{link:"https://www.facebook.com/duolingofrance"},instagram:{link:"https://www.instagram.com/duolingofrance"},tiktok:s,twitter:{link:"https://twitter.com/duolingofrance"}};case"hi":return{facebook:{link:"https://www.facebook.com/Duolingo-India-108456034999544"},instagram:{link:"https://www.instagram.com/duolingo_india/"},tiktok:s,twitter:{link:"https://twitter.com/duolingoindia"}};case"ja":return{facebook:t,instagram:a,tiktok:s,twitter:{link:"https://twitter.com/Duolingo_Japan"}};case"pt":return{facebook:{link:"https://www.facebook.com/duolingobrasil"},instagram:{link:"https://www.instagram.com/duolingobrasil"},tiktok:{link:"https://www.tiktok.com/@duolingobrasil"},twitter:{link:"https://twitter.com/duolingobrasil"}};default:return{facebook:t,instagram:a,tiktok:s,twitter:n}}}},68564:(e,t,a)=>{"use strict";a.d(t,{c:()=>n});var s=a(74597);const n=!!window.webkitSpeechRecognition&&(s.Z.chrome||s.Z.edge)},11908:(e,t,a)=>{"use strict";a.d(t,{LS:()=>u,No:()=>c,Qt:()=>s,cl:()=>d,rV:()=>o});var s,n=a(51158);!function(e){e.REDUX_AgeRestrictedLeaderboardsIntro="duo.ageRestrictedLeaderboards",e.REDUX_DailyQuests="duo.dailyQuests",e.REDUX_DarkMode="duo.darkMode",e.REDUX_FriendsQuestNextStart="duo.friendsQuestNextStart",e.REDUX_LastSeenMonthlyChallengeId="duo.lastSeenMonthlyChallengeId",e.REDUX_StreakSocietyInduction="duo.streakSocietyInduction",e.BrowserSessionDebugFlags="duo.sessionDebugFlags",e.DebugExperimentOverrides="duo.experimentOverrides",e.DebugFlags="duo.persistentDebugFlags",e.DisableBigRedButton="duo.disableBrb",e.GradingConfig="duo.clientSideGradingConfig",e.GradingConfigTimestamp="duo.clientSideGradingConfig.timestamp",e.InviteCode="duo.inviteCode",e.LanguageTokens="duo.languageTokens",e.LastAppCrashes="duo.lastAppCrashes",e.LastLogin="duo.lastLogin",e.LoggedOutExperiments="duo.loggedOutExperiments",e.RollbarThrottling="duo.rollbarThrottling",e.State="duo.state"}(s||(s={}));const r=(()=>{const e=new Map;return{clear:()=>e.clear(),getItem:t=>{var a;return null!==(a=e.get(t))&&void 0!==a?a:null},key:t=>Array.from(e.keys())[t],get length(){return e.size},removeItem:t=>e.delete(t),setItem:(t,a)=>e.set(t,a)}})();let i=!1;const o=(e,t)=>{try{const a=l(t).getItem(e);return a?JSON.parse(a):void 0}catch(e){return}},l=e=>(null==e?void 0:e.useSessionStorage)?sessionStorage:localStorage||(i||((0,n.um)("localStorage unavailable. Falling back to memoryStorage."),i=!0),r),c=(e,t)=>{try{return e in l(t)}catch(e){return!1}},d=(e,t)=>{try{l(t).removeItem(e)}catch(e){}},u=(e,t,a)=>{const s=JSON.stringify(t);try{l(a).setItem(e,s)}catch(t){let a;try{a=localStorage["duo.state"].length}catch(e){a="error accessing localStorage"}(0,n.Kp)("Failed to set localStorage item",{data:{localStorageKey:e,localStorageSize:a,message:t.message,newItemSize:s.length},once:!0,sample:.001})}}},18804:(e,t,a)=>{"use strict";a.d(t,{A5:()=>v,CC:()=>w,Fx:()=>b,Gl:()=>_,qg:()=>f,tX:()=>y,xC:()=>I});var s=a(80715),n=a(45106),r=a(35870),i=a(99369),o=a(80254),l=a(9990),c=a(42659),d=a(17135),u=a(59249),p=a(39852),g=a(51158),m=a(11908);const h=["achievementsV3","brb","browserSettings","charactersPersisted","config","courseHistories","courses","friends","goals","items","leaderboards","notifications","paymentMethods","sessionCache","skills","student","subscriptions","uiPersisted","user","heartsState"],_=()=>(0,i.from)({}),v=e=>null==S?void 0:S.dispatch(e),f=()=>null==S?void 0:S.getState();let S;const E=(e,t,a,s=((e,t)=>e===t))=>{let n;const r=()=>{const r=t(e.getState());s(n,r)||a(r),n=r},i=e.subscribe(r);return r(),i},y=()=>(0,s.I0)(),b=(0,s.gR)(),w=(0,s.fw)(),I=({persister:e,rootReducer:t})=>{var a;const s=(0,u.Au)()&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||n.qC,i=(0,n.MT)(t,e.get(),s((0,n.md)(r.Z,(e=>t=>a=>{const s=e.getState(),n=(0,d.Ux)();let r,i;try{r=t(a)}catch(e){i=e}if((0,p.ar)(s,a,e.getState(),{duration:(0,d.Ux)().getTime()-n.getTime(),timestamp:n}),i)throw i;return r})))),_=(0,c.np)(i.getState()),v=(0,c.dY)(i.getState());return void 0!==v&&(i.dispatch((0,l.AO)(v)),i.dispatch((0,l.S8)(v,null===(a=_.streakData.currentStreak)||void 0===a?void 0:a.length)),i.dispatch((0,l.LQ)(v))),E(i,(e=>o.ei(e,h)),(t=>e.set((()=>t))),((e,t)=>void 0!==e&&o.BD(e,t))),E(i,c.df,(e=>g.yB(e))),E(i,c.np,(e=>g.av(e))),E(i,(e=>[(0,c.dY)(e),e.browserSettings.darkMode]),(([e,t])=>{e&&(0,m.LS)(m.Qt.REDUX_DarkMode,Object.assign(Object.assign({},(0,m.rV)(m.Qt.REDUX_DarkMode)),{[e]:t}))}),o.Xy),E(i,(e=>[(0,c.dY)(e),e.ui.inductedIntoStreakSociety]),(([e,t])=>{e&&(0,m.LS)(m.Qt.REDUX_StreakSocietyInduction,Object.assign(Object.assign({},(0,m.rV)(m.Qt.REDUX_StreakSocietyInduction)),{[e]:t}))}),o.Xy),E(i,(e=>[(0,c.dY)(e),e.goals.lastSeenMonthlyChallengeId]),(([e,t])=>{e&&t&&(0,m.LS)(m.Qt.REDUX_LastSeenMonthlyChallengeId,Object.assign(Object.assign({},(0,m.rV)(m.Qt.REDUX_LastSeenMonthlyChallengeId)),{[e]:t}))}),o.Xy),E(i,(e=>[(0,c.dY)(e),e.ui.canShowAgeRestrictedLeaderboardsIntro]),(([e,t])=>{e&&(0,m.LS)(m.Qt.REDUX_AgeRestrictedLeaderboardsIntro,Object.assign(Object.assign({},(0,m.rV)(m.Qt.REDUX_AgeRestrictedLeaderboardsIntro)),{[e]:t}))}),o.Xy),E(i,(e=>[(0,c.dY)(e),e.goals.lastSeenNextFriendsQuestStart]),(([e,t])=>{e&&0!==t&&(0,m.LS)(m.Qt.REDUX_FriendsQuestNextStart,Object.assign(Object.assign({},(0,m.rV)(m.Qt.REDUX_FriendsQuestNextStart)),{[e]:t}))}),o.Xy),E(i,(e=>[(0,c.dY)(e),{coreQuest:e.goals.coreQuest,dailyQuest:e.goals.dailyQuest,hardQuest:e.goals.hardQuest,lastUpdated:e.goals.lastUpdated}]),(([e,{coreQuest:t,dailyQuest:a,hardQuest:s,lastUpdated:n}])=>{[t,a,s,n,e].some((e=>void 0===e))||(0,m.LS)(m.Qt.REDUX_DailyQuests,Object.assign(Object.assign({},(0,m.rV)(m.Qt.REDUX_DailyQuests)),{[e]:{coreQuest:t,dailyQuest:a,hardQuest:s,lastUpdated:n}}))}),o.Xy),S=i,i}},8718:(e,t,a)=>{"use strict";a.d(t,{Au:()=>y,BT:()=>C,Bc:()=>L,C7:()=>k,E$:()=>D,HD:()=>_,IG:()=>R,JW:()=>f,P3:()=>u,UZ:()=>P,WF:()=>S,Xq:()=>O,YL:()=>h,_L:()=>p,aJ:()=>T,dM:()=>N,e:()=>w,f1:()=>E,sB:()=>v,yy:()=>I,z$:()=>g,z_:()=>b});var s=a(80254),n=a(59249),r=a(68903),i=a(93746),o=a(51158),l=a(37111);const c=["ARRANGE","SELECT_PHRASE","TYPE_TEXT","SUBHEADING","HINT_ONBOARDING"],d=["ARRANGE","FREEFORM_WRITING","MATCH","MULTIPLE_CHOICE","POINT_TO_PHRASE","SELECT_PHRASE","TYPE_TEXT"],u=e=>void 0!==e&&d.includes(e.type),p=e=>{if(!u(e))return!1;switch(e.type){case"ARRANGE":case"POINT_TO_PHRASE":case"SELECT_PHRASE":case"TYPE_TEXT":return!0;case"MULTIPLE_CHOICE":return!e.question;case"MATCH":case"FREEFORM_WRITING":return!1;default:return(0,r.RJ)(e),!1}},g=e=>void 0!==e&&c.includes(e.type)||(e=>"MULTIPLE_CHOICE"===(null==e?void 0:e.type)&&void 0===e.question)(e),m=["POINT_TO_PHRASE","MULTIPLE_CHOICE","FREEFORM_WRITING"],h=e=>void 0!==e&&m.includes(e.type),_=e=>{var t,a;let r=1;if(!e.storyElements)return r;const i=null===(t=e.storyElements)||void 0===t?void 0:t.filter((e=>"LINE"===e.type)).length,o=(0,n.gQ)("debugSkipToStoryLine")?parseInt(null!==(a=(0,n.ky)("debugSkipToStoryLine"))&&void 0!==a?a:"",10):void 0;return void 0!==o?o>=1&&o<=i?r=o:console.error(`Cannot skip to lineIndex ${o} because it's out of bounds.`):(0,n.gQ)("debugSkipToLastStoryLine")&&(r=i),((e,t)=>{let a=0;return s.cx(t,(t=>["LINE","HEADER"].includes(t.type)&&++a===e))})(r,e.storyElements)},v=(e,t)=>{var a,n;const r=e.text,i=e.hints,o=s.MR(e.hintMap,(e=>e.rangeFrom)).filter((e=>!t||t.every((t=>e.rangeTo<t.start||e.rangeFrom>t.end)))),l=[];let c=0,d=0;for(;c<r.length;){let e;o[d]&&c>=o[d].rangeFrom?(e=Math.min(o[d].rangeTo,r.length-1),l.push({hint:i[o[d].hintIndex],rangeFrom:c,rangeTo:e,text:r.slice(c,e+1)}),d++):(e=(null!==(n=null===(a=o[d])||void 0===a?void 0:a.rangeFrom)&&void 0!==n?n:r.length)-1,l.push({rangeFrom:c,rangeTo:e,text:r.slice(c,e+1)})),c=e+1}return l},f=(e,t)=>((0,n.gQ)("debugSlides")||(e.some((e=>"streakFreezeChestReward"===e.type))&&(e=e.filter((e=>"chestLingotsReward"!==e.type))),-1===e.findIndex((e=>"streakSociety"===e.type))&&t!==l.fI&&(e=e.filter((e=>"streakSocietyWelcomeChest"!==e.type))),e.some((e=>"streakSocietyFreezes"===e.type))&&(e=e.filter((e=>"milestoneStreakFreeze"!==e.type)))),e),S=e=>e.flatMap((e=>"attachedSlides"in e?[e,...e.attachedSlides]:[e])),E=(e,t)=>{if(e.length>0)for(let a=0;a<e.length;a++)if((null==t?void 0:t[a].type)!==e[a].type)return(0,o.Kp)("Expected attached slides to follow main slide, but found a mismatch",{data:{expected:e[a],found:null==t?void 0:t[a]}}),!1;return!0},y=e=>({keypoints:[{audioStart:0,rangeEnd:e.content.text.length}],url:e.ttsURL}),b=e=>{switch(e.type){case"HEADER":return e.learningLanguageTitleContent;case"LINE":return e.line.content;case"FREEFORM_WRITING_EXAMPLE_RESPONSE":return Object.assign(Object.assign({},e.content),{audio:y(e)});default:return}},w=e=>e?"custom":"generic",I=(e,t)=>{const a=e.elementIndex-t;return a>0?{elementIndex:t+1}:a<0?{elementIndex:t-1}:e},T=(e,t)=>{var a,s;if(e){const n=e.filter((e=>"MATCH"===e.type))[0];if("MATCH"===(null==n?void 0:n.type)){const e=null===(a=n.matches)||void 0===a?void 0:a.map((e=>e.phrase)).filter((e=>t.toLowerCase().includes(e.toLowerCase())));return null!==(s=null==e?void 0:e.length)&&void 0!==s?s:0}}return 0},k=e=>{if(e){const t=e.filter((e=>"FREEFORM_WRITING"===e.type))[0];if("FREEFORM_WRITING"===(null==t?void 0:t.type))return{custom_prompt_option:t.customPromptOption,custom_prompt_type:t.customPromptType,generic_prompt_type:t.genericPromptType,has_freeform_writing_examples:t.hasExamples,prompt_type:w(t.customPrompt)}}return[]},C=(e,t)=>t.findIndex((t=>"LINE"===t.type&&R(t)===e+1)),R=e=>{if("LINE"===e.type)return e.trackingProperties.line_index;throw Error(`Tried to get line index for ${e.type} element`)},O=(e,t,a,s)=>{const n=[e,...null!=s?s:[]],r=[t,...a];return n.includes(t)&&n.every((e=>r.includes(e)))},L=e=>{const t=[];let a=null;for(const s of e){if("CHALLENGE_PROMPT"===(null==a?void 0:a.type)&&"LINE"===s.type&&s.line.content.imageUrl){const e={imageUrl:s.line.content.imageUrl,trackingProperties:s.trackingProperties,type:"ILLUSTRATION"};t.splice(t.length-1,0,e);const a=Object.assign({},s);a.line.content.imageUrl=void 0,t.push(a)}else t.push(s);a=s}return t},P=e=>e.maxScore-e.score,A=e=>{if(0===e.length)return!1;return e.split("").some((e=>e.charCodeAt(0)>=1536&&e.charCodeAt(0)<=1791))},N=(e,t,a)=>{var s,n,r,o,l;if(!e||!t||!a)return!1;switch(null==e?void 0:e.type){case"type-text":case"freeform-writing":return A(e.answer);case"multiple-choice":return A(null!==(n=null===(s=e.answers[0])||void 0===s?void 0:s.text)&&void 0!==n?n:"");case"select-phrases":return A(null!==(r=e.answers[0])&&void 0!==r?r:"");case"point-to-phrase":return A(null!==(l=null===(o=e.parts[0])||void 0===o?void 0:o.text)&&void 0!==l?l:"");case"match":return"rtl"===(0,i.Ux)(a);default:return"rtl"===(0,i.Ux)(t)}},D=e=>{const t=x(e);return t.filter((e=>A(e))).length/t.length>.5},x=e=>e.map((e=>e.text)).join(" ").replace(/[\p{P}\p{S}]/gu,"").split(" ").filter((e=>e.trim().length>0))},77042:(e,t,a)=>{"use strict";a.d(t,{EU:()=>i,FG:()=>r,xL:()=>n});var s=a(97236);const n=(e,t)=>{const a=Date.now(),n=e,r=a;for(const e of n){if(a!==r)return;const n={};for(const i of e.audioInfos){const o=()=>{n[i.url]=!0,e.audioInfos.every((({url:e})=>n[e]))&&a===r&&t(e.elementIndex)};(async()=>{try{await(0,s.IZ)(i.url)}catch(e){throw(0,s.N$)(i),e}o()})()}if(a!==r)return}},r=e=>{e.forEach((e=>{if("LINE"===e.type){const t=e.line.content;(0,s.Ms)(t.audio.url),t.audioPrefix&&(0,s.Ms)(t.audioPrefix.url),t.audioSuffix&&(0,s.Ms)(t.audioSuffix.url)}}))},i=e=>t=>({audioSyncModel:e.audioSyncModel,duration:e.duration,fadeDown:e.fadeDown,instructionId:t.instructionId+1,playState:e.playState,seekTo:e.seekTo,speed:e.speed})},18513:(e,t,a)=>{"use strict";a.d(t,{Ag:()=>C,Bv:()=>L,FE:()=>E,M6:()=>u,Om:()=>T,PH:()=>S,Q5:()=>y,S5:()=>b,WF:()=>O,a3:()=>w,pg:()=>k,tE:()=>R,v5:()=>p,vX:()=>I});var s=a(99369),n=a(80254),r=a(83719),i=a(68903),o=a(8654),l=a(51158),c=a(8718),d=a(79465);const u=(e,t)=>{(0,d.j)("stories_challenge_start",Object.assign(Object.assign({},e.trackingProperties),t.trackingProperties))},p=e=>{var t,a;return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{timeline:[...null!==(a=null===(t=e.storySession)||void 0===t?void 0:t.timeline)&&void 0!==a?a:[],{time:Date.now()/1e3,type:"challenge-start"}]})})},g=e=>e.replace(/\([^()]*\)\s*/g,"").trim(),m=e=>g(e).toLowerCase(),h=e=>/^\d+$/.test(e),_=e=>e?13:19,v=(e,t,a)=>(t=n.XP(t).reduce(((e,t)=>(e[m(t)]=!0,e)),{}),e.map((e=>Object.assign(Object.assign({},e),{translation:g(e.translation)}))).filter((e=>{const s=_(a);if(e.phrase.length>s||e.translation.length>s)return!1;const n=m(e.phrase),r=m(e.translation);return!(h(n)||h(r)||t[n]||t[r]||(t[n]=!0,t[r]=!0,0))}))),f=(e,t)=>{if("POINT_TO_PHRASE"!==e.type)return-1;let a=-1;return n.cx(e.transcriptParts,(e=>(e.selectable&&a++,a===t)))},S=(e,t)=>{var a,s;const n=null===(a=e.storySession)||void 0===a?void 0:a.hintsUsed;if("POINT_TO_PHRASE"!==(null==t?void 0:t.type)||!n||0===n.length)return!1;const r=null===(s=t.transcriptParts[f(t,t.correctAnswerIndex)])||void 0===s?void 0:s.text;return!r||n.some((e=>e.phrase===r))},E=(e,t,a,s,r,i)=>{const o={completed:!1,elementIndex:t,mistakeCount:0,trackingProperties:e.trackingProperties};return(()=>{var t,l;switch(e.type){case"ARRANGE":return Object.assign(Object.assign({},o),{arrangedPhrases:0,phraseOrder:e.phraseOrder,selectedIncorrectIndices:[],shuffledPhrases:e.selectablePhrases,type:"arrange"});case"MATCH":{const l=5;let c=[];const d=_(s),u=null===(t=e.matches)||void 0===t?void 0:t.filter((e=>e.phrase.length<=d&&e.translation.length<=d));if(u&&u.length>=l)c=n.TV([...u]).slice(0,l);else{c=n.TV(v([...a],{},s)).slice(0,l);const t=[...e.fallbackHints];if(c.length<l){const e={};c.forEach((t=>{e[t.phrase]=!0,e[t.translation]=!0}));const a=n.TV(v(t,e,s)).slice(0,l-c.length);c=[...c,...a]}}const p={},g=[];return c.forEach((e=>{p[`from:${e.phrase}`]=e.translation,p[`from:${e.translation}`]=e.phrase,g.push({language:i,status:"initial",text:e.phrase}),g.push({language:r,status:"initial",text:e.translation})})),Object.assign(Object.assign({},o),{dictionary:p,tokens:n.TV(g),type:"match"})}case"MULTIPLE_CHOICE":return Object.assign(Object.assign({},o),{additionalCorrectAnswerIndices:e.additionalCorrectAnswerIndices,answers:e.answers,correctAnswerIndex:e.correctAnswerIndex,question:e.question,selectedIndices:[],type:"multiple-choice"});case"POINT_TO_PHRASE":{let t=0;const a=e.transcriptParts.map((e=>(t+=e.text.length,Object.assign(Object.assign({},e),{rangeTo:t})))),s=f(e,e.correctAnswerIndex),n=[];return null===(l=e.additionalCorrectAnswerIndices)||void 0===l||l.forEach((t=>n.push(f(e,t)))),Object.assign(Object.assign({},o),{additionalCorrectAnswerIndices:n,correctAnswerIndex:s,parts:a,question:e.question,selectedIndices:[],type:"point-to-phrase"})}case"SELECT_PHRASE":return Object.assign(Object.assign({},o),{answers:e.answers,correctAnswerIndex:e.correctAnswerIndex,selectedIndices:[],type:"select-phrases"});case"TYPE_TEXT":return Object.assign(Object.assign({},o),{answer:"",grading:e.grading,text:e.text,type:"type-text"});case"FREEFORM_WRITING":return Object.assign(Object.assign({},o),{answer:"",characterMinimum:e.characterCount,customPrompt:e.customPrompt,customPromptType:e.customPromptType,didScroll:!1,genericPromptType:e.genericPromptType,hasExamples:e.hasExamples,numberOfCorrectionsDismissed:0,prompt:e.promptContent.prompt,showPrompt:e.showPrompt,skipped:!1,starterPhrases:e.promptContent.starterPhrases,type:"freeform-writing"});case"LINE":return Object.assign(Object.assign({},o),{skipped:!1,type:"speak"});default:return void console.error("no setup for challenge type: ",e.type)}})()},y=e=>{var t,a,s;if(null===(a=null===(t=e.storySession)||void 0===t?void 0:t.challengeSession)||void 0===a?void 0:a.completed)throw Error("Challenge already completed");if(!(null===(s=e.storySession)||void 0===s?void 0:s.challengeSession))throw Error("No challenge session found when grading challenge");const n=e.storySession.challengeSession;if(null==n?void 0:n.completed)throw Error("Challenge already completed");const r=0!==n.mistakeCount||("speak"===n.type||"freeform-writing"===n.type)&&n.skipped?0:1;let i=e.storySession.speakCount;"speak"===n.type&&i++;const o="freeform-writing"===n.type?{customPromptType:n.customPromptType,freeformChallengePrompt:n.prompt.text,freeformChallengePromptType:(0,c.e)(n.customPrompt),freeformChallengeSubmittedResponse:n.answer,freeformChallengeSumTimeTaken:(Date.now()-n.startTime)/1e3,genericPromptType:n.genericPromptType,hasExamples:n.hasExamples}:{};return Object.assign(Object.assign({},e),{storySession:Object.assign(Object.assign(Object.assign({},e.storySession),o),{challengeSession:Object.assign(Object.assign({},n),{completed:!0}),completedBonusChallenge:"freeform-writing"===n.type||e.storySession.completedBonusChallenge,maxScore:e.storySession.maxScore+1,score:e.storySession.score+r,speakCount:i})})},b=e=>{var t,a,s,n,r,i,o;const l=null===(t=e.storySession)||void 0===t?void 0:t.score;return(0,d.j)("stories_challenge_complete",Object.assign(Object.assign(Object.assign({},e.trackingProperties),null===(s=null===(a=e.storySession)||void 0===a?void 0:a.challengeSession)||void 0===s?void 0:s.trackingProperties),{challenge_type:null===(r=null===(n=e.storySession)||void 0===n?void 0:n.challengeSession)||void 0===r?void 0:r.type,success:!l||!!(null===(i=e.storySession)||void 0===i?void 0:i.score)&&e.storySession.score>l,used_keyboard:null===(o=e.storySession)||void 0===o?void 0:o.usedKeyboardForMatchChallenge})),e},w=e=>{var t;if(e.completed)switch(e.type){case"freeform-writing":return{correct:!0,sticky:!1,title:r.zD};case"arrange":case"match":return{correct:!0,sticky:!1,title:(0,o.H8)((0,r.ub)())};case"multiple-choice":case"point-to-phrase":case"select-phrases":return 0===e.mistakeCount?{correct:!0,sticky:!1,title:(0,o.H8)((0,r.ub)())}:void 0;case"type-text":{const a=e.gradingResult;if(a){let s,n=null!==(t=a.closestSolution)&&void 0!==t?t:e.text,i=a.correct||!1;const l=a.highlights;if(a.blameType)switch(a.blameType){case"accent":s=18634;break;case"missing_word":i=!1,s=8435;break;case"wrong_word":i=!1,s=576;break;case"missing_space":i=!0,s=18757;break;case"extra_space":i=!0,s=4476;break;case"typo":s=4081;break;default:return}else a.correct?(i=!0,s=(0,r.ub)(),n=void 0):(i=!1,s=23926);return{blame:n,blameHighlight:l,correct:i,sticky:!0,title:(0,o.H8)(s)}}return void(0,l.vU)("Missing Stories type challenge grading information")}case"speak":if(e.skipped)return{blame:(0,o.H8)(15747),correct:void 0,skipped:!0,sticky:!1,title:(0,o.H8)(12946)};if(0===e.mistakeCount)return;return{correct:!1,sticky:!1,title:(0,o.H8)(6840)};default:return void(0,i.RJ)(e)}},I=(e,t)=>{var a,n;const r=null===(a=e.storySession)||void 0===a?void 0:a.challengeSession;if("type-text"!==(null==r?void 0:r.type))throw Error("Unexpected type");if(!(null===(n=r.grading)||void 0===n?void 0:n.automaton))throw Error("No grading automaton found for type text challenge");return(0,s.merge)(e,{storySession:(0,s.merge)(e.storySession,{challengeSession:(0,s.merge)(r,{editDistance:t.highlights&&"accent"!==t.blameType?t.highlights.length:0,gradingResult:t,mistakeCount:t.correct?0:1})})})},T=e=>{var t;const a=null===(t=e.storySession)||void 0===t?void 0:t.challengeSession;if("freeform-writing"!==(null==a?void 0:a.type))throw Error("Unexpected type");return e},k=300,C=60,R=e=>{switch(e){case 50:case 60:return 10;case 70:case 80:case 90:return 15;default:return 20}},O=e=>e.trim().split(/\s+/).filter((e=>""!==e)).length,L=e=>{const t=e.answer,a=O(t),s=e.characterMinimum;return a>=R(s)&&a<=C}},20662:(e,t,a)=>{"use strict";a.d(t,{Bu:()=>i,IN:()=>l,YE:()=>r,gu:()=>o});var s=a(68903),n=a(8718);const r=e=>{switch(e){case"READ":return"normal";case"LISTEN":return"listen";case"CONVERSATION":return"conversation";default:throw(0,s.RJ)(e),Error(`Unexpected line mode "${e}"`)}},i=e=>{switch(e){case"READ":return 0;case"LISTEN":return 1;case"REVIEW":case"CONVERSATION":return 2;default:throw(0,s.RJ)(e),Error(`Unexpected story mode "${e}"`)}},o=({mode:e,listenModeCharacterIds:t,conversationModeSpeakCharacterIds:a,line:s,nextElement:r,lineIndex:i,conversationModeSpeakLineIds:o})=>"READ"===e||"CHARACTER"!==s.type||(0,n._L)(r)?"READ":o.includes(i)&&a.includes(s.characterId)?"SPEAK":(({listenModeCharacterIds:e,line:t,nextElement:a})=>!("CHARACTER"!==t.type||!e.includes(t.characterId)||(0,n._L)(a)))({line:s,listenModeCharacterIds:t,nextElement:r})?"LISTEN":"READ",l=({storyId:e,mode:t,practiceHubStoryType:a})=>{const s=a?`&practiceHubStory=${a}`:"";return`/stories/${e}?mode=${t.toLowerCase()}${s}`}},36571:(e,t,a)=>{"use strict";a.d(t,{Eo:()=>d,b5:()=>o,cG:()=>l,fC:()=>c});var s=a(59249);const n=["FREEFORM_WRITING","FREEFORM_WRITING_EXAMPLE_RESPONSE","FREEFORM_WRITING_PROMPT"],r=["ARRANGE","CHALLENGE_PROMPT","DUO_POPUP",...n,"HEADER","HINT_ONBOARDING","LINE","MATCH","MULTIPLE_CHOICE","POINT_TO_PHRASE","SECTION_HEADER","SELECT_PHRASE","SENDER_RECEIVER","SUBHEADING","TYPE_TEXT"],i=["ILLUSTRATION","SENDER_RECEIVER"],o=()=>(0,s.gQ)("debugSkipStoriesFinalMatchChallenge")?r.filter((e=>"MATCH"!==e)):r,l=e=>void 0!==e&&r.includes(e.type),c=e=>void 0!==e&&i.includes(e.type),d=e=>void 0!==e&&n.includes(e.type)||"DUO_POPUP"===(null==e?void 0:e.type)&&"BONUS_XP"===e.popupType},43094:(e,t,a)=>{"use strict";a.d(t,{D5:()=>u,DG:()=>c,Nh:()=>l,O$:()=>p,SU:()=>g,cw:()=>i,lo:()=>d,tl:()=>o});var s=a(99369),n=a(80254),r=a(8718);const i=(e,t)=>!e&&!t||!(!e||!t)&&e.elementIndex===t.elementIndex&&e.textIndex===t.textIndex,o=(e,t)=>{const a=e=>void 0===e?-1:e;return!(!e||t&&(e.elementIndex<t.elementIndex||!(e.elementIndex>t.elementIndex||a(e.textIndex)>a(t.textIndex))))},l=(e,t)=>o(t,e),c=(e,t)=>{let a=(0,s.merge)(e.storySession,{selectedPosition:t});return a&&o(t,a.furthestPosition)&&(a=(0,s.set)(a,"furthestPosition",t)),(0,s.set)(e,"storySession",a)},d=(e,t,a)=>{for(let s=t;s>=0;s--){if(["LINE","FREEFORM_WRITING_EXAMPLE_RESPONSE"].includes(e[s].type))return s;if("FREEFORM_WRITING"===e[s].type&&a)return s}return 0},u=(e,t)=>t.filter(((t,a)=>"LINE"===t.type&&a<=e)).length-1,p=(e,t)=>n.cx(e.slice(t),r.P3)+t,g=(e,t)=>{var a;const s=e.keypoints.find((e=>e.rangeEnd>=t));return null!==(a=null==s?void 0:s.audioStart)&&void 0!==a?a:e.keypoints.slice(-1)[0].audioStart}},88675:(e,t,a)=>{"use strict";a.d(t,{Fd:()=>_,Iv:()=>v,NE:()=>b,Yt:()=>c,cA:()=>f,eU:()=>y,gm:()=>E,lw:()=>u,pS:()=>p,wW:()=>S});var s=a(80254),n=a(17135),r=a(81149),i=a(8654),o=a(97106);const l=e=>{const t=Math.max(1,Math.min(d.length,e))-1,a=d[t];return(0,i.H8)(a.stringId,a.variables)},c=5,d=[{stringId:14029,variables:void 0},{stringId:22012,variables:{days:3}},{stringId:8314,variables:{days:5}},{stringId:22012,variables:{days:5}},{stringId:8314,variables:{days:7}},{stringId:22012,variables:{days:7}},{stringId:13734,variables:void 0}],u=e=>{const t={days:e,streak:e,streak_plus_one:e+1},a={title:(0,i.H8)(17672,t),titleID:"session_end_miltstone_title_lower_no_dash"},n=s.UP([Object.assign(Object.assign({},a),{body:(0,i.H8)(26206),bodyID:"session_end_explain_streak_body_1"}),Object.assign(Object.assign({},a),{body:(0,i.H8)(26205),bodyID:"session_end_explain_streak_body_2"}),Object.assign(Object.assign({},a),{body:(0,i.H8)(26204),bodyID:"session_end_explain_streak_body_3"})]),r=[Object.assign(Object.assign({},a),{body:l(e),bodyID:"session_end_one_day_from_streak"}),Object.assign(Object.assign({},a),{body:l(e),bodyID:"session_end_two_days_from_streak"})][e%2],o=s.UP([Object.assign(Object.assign({},a),{body:(0,i.H8)(20415,t),bodyID:"session_end_streak_body_6"}),Object.assign(Object.assign({},a),{body:(0,i.H8)(21798,t),bodyID:"session_end_streak_body_7"}),Object.assign(Object.assign({},a),{body:(0,i.H8)(296,t),bodyID:"session_end_streak_body_8"}),{body:(0,i.H8)(10404,t),bodyID:"session_end_streak_body_9",title:(0,i.H8)(20343,t),titleID:"session_end_streak_title_2"},{body:(0,i.H8)(19216,t),bodyID:"session_end_streak_body_10",title:(0,i.H8)(23641,t),titleID:"session_end_streak_title_4"}]),c=Object.assign(Object.assign({},a),{body:(0,i.H8)(1916,t),bodyID:"session_end_streak_body_milestone"});return p(e)?c:e<=3?n:e<7?r:o},p=e=>e<=365?[7,14,30,50,75,100,125,150,200,250,300,365].includes(e):e%100==0,g=[31379,31380,31381,31382,31383,31384,31385],m=[31386,31387,31388,31389,31390,31391,31392],h=[{minutes:180,resetTime:">3hrs"},{minutes:120,resetTime:">2hrs"},{minutes:60,resetTime:">1hrs"},{minutes:45,resetTime:">45min"},{minutes:30,resetTime:">30min"},{minutes:15,resetTime:">15min"},{minutes:-1,resetTime:"<15min"}],_=(e,t,a)=>{const s=(0,n.Ko)(a),r=n.Nf-s,o=Math.floor(r/60),l=h.findIndex((e=>o>e.minutes)),c=h[l].resetTime,d=t?g[l]:m[l];return{body:(0,i._i)(d,{num:e}),resetTime:c}},v=(e,t,a)=>e>0&&!t&&(0,n.L3)(a)<4,f=(e,t,a)=>{const s=(0,i.k8)(),n=(e.getDay()-s+7)%7,r=t.slice(0,n).every(o.Qb);return r&&a?n+1:r?n:0},S=(e,t)=>t?(0,i._i)(30433):6===e?(0,i._i)(30432):3===e?(0,i._i)(30431):(0,i._i)(30430),E=(e,t)=>{const a=(0,i.k8)(),s=(e.getDay()-a+7)%7,n=t.slice(0,s).findIndex((e=>!(0,o.Qb)(e)));return-1!==n&&t.slice(n,s).every((e=>!(0,o.Qb)(e)))},y=e=>{const t={streak_length:e+1,streak_number:e+1},[a,n]=s.UP([[(0,i.H8)(43650,t),"se_streak_nudge_title_1"],[(0,i.H8)(43651,t),"se_streak_nudge_title_2"],[(0,i.H8)(43652,t),"se_streak_nudge_title_3"]]),[r,o]=s.UP([[(0,i.H8)(43653,t),"se_streak_nudge_body_1"],[(0,i.H8)(43654,t),"se_streak_nudge_body_2"],[(0,i.H8)(43655,t),"se_streak_nudge_body_3"]]);return{body:r,bodyID:o,title:a,titleID:n}},b=(e,t,a,s,n)=>!e&&t>=1&&t<=3&&((null!=a?a:0)<3||s!==n)&&"experiment"===(0,r.j6)("gweb_streak_nudge_session_end",void 0)},37111:(e,t,a)=>{"use strict";a.d(t,{E6:()=>g,ME:()=>l,P5:()=>_,TK:()=>o,fI:()=>r,jL:()=>c,kA:()=>h,mx:()=>i,wD:()=>m});var s=a(68903),n=a(8654);const r=30,i=100,o=3,l=365,c=[r,i,l],d=[15,7,3],u=[49,21,10,5],p=[182,30,21,14,7,3],g=e=>e>=l,m=e=>{if(void 0!==e&&0!==e)return e>=l?(0,n._i)(38404,{num:Math.floor(e/l)}):void 0},h=e=>{const t=l-e;if((0,s.p)(p)(t))switch(t){case 182:return(0,n._i)(35596);case 30:return(0,n._i)(35597,{num:1});case 21:case 14:case 7:return(0,n._i)(35598,{num:Math.floor(t/7)});case 3:return(0,n._i)(35599,{num:t});default:return void(0,s.RJ)(t)}const a=i-e;if((0,s.p)(u)(a))switch(a){case 49:return(0,n._i)(35594);case 21:return(0,n._i)(39578,{num:3});case 10:case 5:return(0,n._i)(35595,{num:a});default:return void(0,s.RJ)(a)}const o=r-e;if((0,s.p)(d)(o))switch(o){case 15:return(0,n._i)(35591);case 7:return(0,n._i)(35592,{num:1});case 3:return(0,n._i)(35593,{num:o});default:return void(0,s.RJ)(o)}},_=(e,t,a)=>void 0!==a&&a>=l||void 0!==t&&e.some((e=>{var a;return(null!==(a=t[e.userId])&&void 0!==a?a:0)>=l}))},43006:(e,t,a)=>{"use strict";a.d(t,{Dg:()=>i,HZ:()=>l,RF:()=>c,ls:()=>r,nx:()=>n,qv:()=>s});const s="___",n="-\\'!*()_|\\\\~=`{}\\[\\]:\";?,.‐¡¿·«»“”„–▶’。，、､‚｡；：「」『』（）？！─…《》〈〉．～،؟।—‧",r=`${n}@#$%^&+<>\\/`,i=(e,t=" ")=>e.replace(new RegExp(`[${r}]`,"g"),t).replace(/\s+/g,t).trim().toLowerCase(),o=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,l=e=>o.test(e.toLowerCase()),c=e=>[...e].length},54448:(e,t,a)=>{"use strict";a.d(t,{G:()=>n,g:()=>r});var s=a(64591);const n=(e,t,a,s)=>{const n=t.map(r);return Object.assign(Object.assign(Object.assign({},e),{challenges:n,dailyRefreshInfo:null==a?void 0:a.dailyRefreshInfo,pathLevelSpecifics:null==a?void 0:a.pathLevelMetadata}),s?{hasBoost:s,xpPromised:void 0}:{})},r=e=>{var t;const a=(0,s.Xh)(e);null===(t=a.gradingResult)||void 0===t||delete t.blameSubtext,delete a.startTime,!1===a.skipped&&delete a.skipped;const n=a.gradingResult?Object.assign(Object.assign({},a),a.gradingResult):Object.assign(Object.assign({},a),{correct:void 0});return delete n.gradingResult,"grader"in n&&delete n.grader,"smartTipsGraderV2"in n&&delete n.smartTipsGraderV2,n}},7113:(e,t,a)=>{"use strict";a.d(t,{J:()=>r,w:()=>n});var s=a(43006);const n=e=>{const t=e.match(/"[^"]*"|[^\s"]+/g),a=[];return null==t||t.forEach(((e,s)=>{let n=e;i(n[0])&&(a.push(n[0]),n=n.slice(1)),i(n[n.length-1])?(n.length>1&&a.push(n.slice(0,n.length-1)),a.push(n[n.length-1])):n.length>0&&a.push(n),s!==t.length-1&&a.push(" ")})),a},r=e=>{const t=e.match(/"[^"]*"|[^\s"]+/g),a=[];let s=0;return null==t||t.forEach(((e,n)=>{let r=e;i(r[0])&&(a.push({endIndexWithinSentence:s+1,startIndexWithinSentence:s,word:r[0]}),r=r.slice(1),s+=1),i(r[r.length-1])?(r.length>1&&(a.push({endIndexWithinSentence:s+r.length-1,startIndexWithinSentence:s,word:r.slice(0,r.length-1)}),s+=r.length-1),a.push({endIndexWithinSentence:s+1,startIndexWithinSentence:s,word:r[r.length-1]}),s+=1):r.length>0&&(a.push({endIndexWithinSentence:s+r.length,startIndexWithinSentence:s,word:r}),s+=r.length),n!==t.length-1&&(a.push({endIndexWithinSentence:s+1,startIndexWithinSentence:s,word:" "}),s+=1)})),a},i=e=>s.ls.includes(e)},79465:(e,t,a)=>{"use strict";a.d(t,{qE:()=>I,sF:()=>Q,bm:()=>N,d6:()=>M,OD:()=>H,kG:()=>L,zS:()=>Y,Cm:()=>F,XZ:()=>O,hK:()=>C,dU:()=>W,j:()=>j,DT:()=>B,Gv:()=>Z,u9:()=>G,mh:()=>z,Bf:()=>$});var s=a(80254),n=a(70488),r=a(42659),i=a(70220),o=a(77167),l=a(54412),c=a(17135),d=a(94358),u=a(67899),p=a(1),g=a(68903),m=a(39852);const h="app-info://platform/microsoft-store";var _=a(51158),v=a(18804),f=a(88675),S=a(74597),E=a(16086),y=a(20028),b=a(97106);const w=["DISABLE_PERSONALIZED_ADS","DISABLE_THIRD_PARTY_TRACKING"],I="fs-exclude";let T;const k=new Promise((e=>{T=e})).then((e=>(console.log("Received fresh user model; tracking begins now"),e))),C=()=>{const e=(0,v.qg)();if(!e)throw Error("Store should be initialized set before calling startTracking.");const t=(0,r.Mb)(e),a=(0,r.df)(e),s=(0,r.np)(e),n=(0,r.Lm)(e);if(!a){const e="1"===navigator.doNotTrack;o.Vi.registerTrackingStatus(!e,L())}(()=>{const e=(0,v.qg)();return(e&&(0,r.np)(e).privacySettings?(0,r.np)(e).privacySettings:w).some((e=>w.includes(e)))})()||(0,u.dl)(),n&&!(0,y.jq)(s)&&(t.featureFlags.is_fullstory_recording_enabled||(0,y.ms)(s)||(0,y.Sk)(s))?d.IM(s.id):d.sT(),T()},R=s.IH((()=>{n.init(),n.setDebug(!1)})),O=e=>{R(),console.log(`Set distinct user id ${e}`),n.identify(`${e}`),(0,l.d8)(l.Vj.LoggedOutUUID,`${e}`),(0,E.Pc)()&&(0,l.d8)(l.Vj.LoggedIn,"true")},L=()=>(R(),`${n.getDistinctId()}`),P=async e=>{if(e)try{(0,E.Jb)(),await k}catch(e){}return(0,v.qg)()?!window.location.search.includes("dnt=1")&&(R(),!0):((0,_.vU)("Failed to track event: no store provided"),!1)},A=(e,t)=>(0,m.bP)("track",e,[{data:t,name:"properties"}],{excludeFromRollbarTelemetry:!0}),N=async e=>{if(await P(!1)){const t=n.getDistinctId();A("$create_alias",{alias:e,distinct_id:t}),n.alias(`${e}`)}},D={utm_campaign:"campaign_name",utm_content:"campaign_content",utm_medium:"campaign_medium",utm_source:"campaign_source",utm_term:"campaign_keywords"},x=s.XP(D),M=e=>s.jV(s.XP(e),x).length>0,F=e=>{const t=s.ei(e,...x);(0,l.d8)(l.Vj.UTMParameters,JSON.stringify(t))},U=(0,g.p)(x),H=e=>{const t={},a=(0,l.ej)(l.Vj.UTMParameters);if(void 0!==a){const n=JSON.parse(a);for(const[a,r]of Object.entries(n))U(a)&&(t[(s=a,`${e}${D[s]}`)]=r)}var s;const n={referrer:/"\$initial_referrer":[ ]*"(.+?)"/,referring_domain:/"\$initial_referring_domain":[ ]*"(.+?)"/};return document.cookie.split(";").forEach((a=>{a=decodeURIComponent(a),/ ?mp_.+?_mixpanel=/.test(a)&&Object.entries(n).forEach((([s,n])=>{const r=n.exec(a);r&&(t[e+s]=r[1])}))})),t},j=async(e,t,a=!0)=>{const s=(0,v.qg)();if(await P(a)&&s){const a=Object.assign(Object.assign({},(e=>{const t=(0,c.Zo)(),a={$app_version:window.duo.version,$current_url:window.location.href,Client:"web",app_version_hash:window.duo.versionHash,client_utc_datetime:t,cn_extension:!1,current_hearts_segments:(0,p.GQ)(e.user,e.heartsState)?e.heartsState.hearts:null,from_internet_org:!1,is_from_microsoft_store:(0,l.ej)(l.Vj.InitialReferrer)===h||document.referrer===h,is_pwa:window.matchMedia("(display-mode: standalone)").matches,is_zombie_mode:(0,r.df)(e),logged_in:(0,E.Pc)(),mobile:!1,mobile_web_view:S.Z.mobile,prefers_reduced_motion:e.browserSettings.prefersReducedMotion||i.H,product:"learning_app",streak_extended:(0,b.ab)(e.user.timezoneOffset,e.user.xpGains)>0,time:t,user_agent:navigator.userAgent};window.location.hash&&(a.location_hash=window.location.hash.slice(1));const s=navigator.connection||navigator.mozConnection||navigator.webkitConnection;"object"==typeof s&&("downlink"in s&&(a.network_downlink=1e3*s.downlink),"effectiveType"in s&&(a.network_quality=s.effectiveType));const n=(0,u.Nf)();void 0!==n&&(a.is_google_tag_manager_enabled=n);const o=(0,r.np)(e);Object.assign(a,o.trackingProperties);const d=(0,r.Oz)(e);d&&Object.assign(a,d.trackingProperties),o.creationDate&&(a.creation_age=Date.now()-1e3*o.creationDate),a.email_opt_out=!o.emailPromotion;const g=(0,r.Mb)(e);return g.ipCountry&&(a.billing_country_code=g.ipCountry),a})(s)),t);return(0,u.KU)(e,a),A(e,a),new Promise((t=>{n.track(e,a,t)}))}},G=async(e,t)=>{const a=t;return((e,t)=>{(0,m.bP)("track",e,[{data:t,name:"properties"}],{excludeFromRollbarTelemetry:!0})})(e,a),new Promise((t=>{n.track(e,a,t)}))},B=(e,t,a,s,n)=>{var r;(0,o.IZ)(a)&&void 0!==(null===(r=a.response)||void 0===r?void 0:r.status)&&_.fZ.includes(a.response.status)?console.warn("Not reporting unactionable server error to Rollbar"):navigator.onLine&&((0,_.Kp)(t,Object.assign({data:s,ex:a},n)),j("api_error",{reason:e}))},V=e=>{let t;if(e instanceof URL)t=e;else try{t=new URL(e)}catch(a){t=new URL(e,new URL(window.location.href).origin)}return t},z=(e,t,a,s=!0)=>{const n=V(e);n.search="";const r=V(t);return r.search="",j("client_side_redirection",{from_url:n.toString(),redirection_type:a,to_url:r.toString()},s)},Z=e=>{var t,a;const s=(0,b.ab)(e.timezoneOffset,e.xpGains)>0,n=(0,f.Iv)(null!==(a=null===(t=e.streakData.currentStreak)||void 0===t?void 0:t.length)&&void 0!==a?a:0,s,e.timezoneOffset);j("show home",{is_dark_mode:window.matchMedia("(prefers-color-scheme: dark)").matches,streak_icon:n}),j("user_active",{product:"learning_app"})},$=e=>{const t=(0,E.Pc)(),a=document.hidden,s=window.location.pathname;if(a||!t||"/reset_password"===s)return!1;const n={activity_screen:s,activity_trigger:null,is_foregrounded:!a,logged_in:t,product:"learning_app"},r=Object.assign(Object.assign({},n),e);return j("user_active_2022",r),!0},q=[["admin",[/^debug\//,/^enroll/,/^o\//,/^logout$/,/^pearson$/,/^partner/,/^settings/,/^welcome/,/^admin_tools$/,/^juicy$/,/^courses/,/^course\//,/^referred$/,/^register_user$/,/^log-in/,/^register/]],["ads",[/^placeholderRegex/]],["game",[/^show_store/,/^shop/]],["learning",[/^guidebook\//,/^lesson($|\/)/,/^placement\//,/^practice\//,/^preview\//,/^new-comment$/,/^words$/,/^skill\//,/^stories/]],["loading",[/^placeholderRegex/]],["promos",[/^duocon/,/^abc(-privacy)?$/,/^redeem/,/^plus$/,/^getplus$/,/^youtubeplus$/]],["social",[/^profile\//]],["tree",[/^learn/]]],W={admin:0,ads:0,deepest_node_learning:0,game:0,learning:0,loading:0,promos:0,social:0,tree:0,unknown:0},Q=(e,t,a)=>{const s=t||((e=window.location.pathname)=>{const t=q.find((([{},t])=>t.find((t=>t.test(e.slice(1))))));return t?t[0]:"unknown"})();W[s]+=e,"learning"===s&&a&&(W.deepest_node_learning+=e)},Y=()=>{s.XP(W).forEach((e=>{W[e]=0}))}},34704:(e,t,a)=>{"use strict";a.d(t,{LP:()=>i,_G:()=>c,dN:()=>l,hg:()=>d,iZ:()=>o,lL:()=>u});var s=a(42659),n=(a(81149),a(11811));const r=["ja<en","zh<en"],i=(e,t)=>`${e}<${t}`,o=(e,t)=>{var a;return null===(a=e.transliterationTexts.find((e=>e.type===t)))||void 0===a?void 0:a.text},l=(e,t,a,s=!1)=>!(!a||!((e,t)=>!!r.includes(i(e,t)))(e,t))&&(a.enabled||s),c=e=>![n.FF.AlphabetLesson,n.FF.PlacementTest,n.FF.SectionTest,n.FF.UnitTest].includes(e),d=e=>{const t=(0,s.iH)(e),a=(0,s.Rv)(e);return e.browserSettings.transliterationsSettings[i(t,a)]},u={hiragana:{trackingName:"hiragana",transliterateNewWordsOnly:!1,type:"hiragana"},pinyin_all:{trackingName:"pinyin_all",transliterateNewWordsOnly:!1,type:"pinyin"},pinyin_new:{trackingName:"pinyin_new",transliterateNewWordsOnly:!0,type:"pinyin"},romaji:{trackingName:"romaji",transliterateNewWordsOnly:!1,type:"romaji"}}},11811:(e,t,a)=>{"use strict";var s,n,r;a.d(t,{A:()=>n,FF:()=>l,O4:()=>c,SP:()=>i,Sm:()=>s,tm:()=>r,y1:()=>o}),function(e){e.Assist="assist",e.CharacterIntro="characterIntro",e.CharacterMatch="characterMatch",e.CharacterPuzzle="characterPuzzle",e.CharacterSelect="characterSelect",e.CharacterTrace="characterTrace",e.CompleteReverseTranslation="completeReverseTranslation",e.Definition="definition",e.Dialogue="dialogue",e.Form="form",e.FreeResponse="freeResponse",e.GapFill="gapFill",e.Judge="judge",e.Listen="listen",e.ListenComplete="listenComplete",e.ListenComprehension="listenComprehension",e.ListenIsolation="listenIsolation",e.ListenMatch="listenMatch",e.ListenSpeak="listenSpeak",e.ListenTap="listenTap",e.Match="match",e.Name="name",e.PartialListen="partialListen",e.PartialReverseTranslate="partialReverseTranslate",e.PatternTapComplete="patternTapComplete",e.ReadComprehension="readComprehension",e.Select="select",e.SelectPronunciation="selectPronunciation",e.SelectTranscription="selectTranscription",e.SyllableListenTap="syllableListenTap",e.SyllableTap="syllableTap",e.Speak="speak",e.TapCloze="tapCloze",e.TapClozeTable="tapClozeTable",e.TapComplete="tapComplete",e.TapCompleteTable="tapCompleteTable",e.TapDescribe="tapDescribe",e.Translate="translate",e.Transliterate="transliterate",e.TypeCloze="typeCloze",e.TypeClozeTable="typeClozeTable",e.TypeCompleteTable="typeCompleteTable",e.WriteComprehension="writeComprehension"}(s||(s={})),function(e){e.HardChallenge="HARD_CHALLENGE",e.LimitedTts="LIMITED_TTS",e.NewPattern="NEW_PATTERN",e.NewWord="NEW_WORD",e.PastMistake="PAST_MISTAKE",e.ReviewChallenge="REVIEW_CHALLENGE"}(n||(n={})),function(e){e.NewYears2020Percent50="NEW_YEARS_2020_50",e.NewYears2020Percent60="NEW_YEARS_2020_60",e.NewYears2020Percent50Intro="NEW_YEARS_2020_50_INTRO",e.NewYears2020Percent60Intro="NEW_YEARS_2020_60_INTRO",e.NewYears2021Percent60="NEW_YEARS_2021",e.NewYears2021FT90="NEW_YEARS_2021_3MO",e.NewYears2022="NEW_YEARS_2022",e.NewYears2022FT="NEW_YEARS_2022_FT",e.NewYears2023="NEW_YEARS_2023_60",e.NewYears2023Fake="NEW_YEARS_2023_FAKE",e.Student="STUDENT_DISCOUNT_50",e.Winback25="WINBACK_25"}(r||(r={}));const i=[r.NewYears2023,r.NewYears2023Fake],o=[r.NewYears2023Fake];var l,c;!function(e){e.AlphabetLesson="ALPHABET_LESSON",e.GlobalPractice="GLOBAL_PRACTICE",e.Lesson="LESSON",e.MistakesReview="MISTAKES_REVIEW",e.PlacementTest="PLACEMENT_TEST",e.Legendary="LEGENDARY",e.LegendaryLevel="LEGENDARY_LEVEL",e.LegendaryLexemePractice="LEGENDARY_LEXEME_PRACTICE",e.LevelReview="LEVEL_REVIEW",e.LexemeSkillLevelPractice="LEXEME_SKILL_LEVEL_PRACTICE",e.LexemePractice="LEXEME_PRACTICE",e.ListeningPractice="LISTENING_PRACTICE",e.SectionTest="SECTION_TEST",e.SpeakingPractice="SPEAKING_PRACTICE",e.TargetPractice="TARGET_PRACTICE",e.UnitReview="UNIT_REVIEW",e.UnitRewind="UNIT_REWIND",e.UnitTest="UNIT_TEST"}(l||(l={})),function(e){e[e.Green=1]="Green",e[e.Gold=2]="Gold"}(c||(c={}))},86073:(e,t,a)=>{"use strict";a.d(t,{bB:()=>s,bP:()=>n,qU:()=>r});const s="LINGOTS",n="GEMS",r="STREAK_FREEZE"},55829:(e,t,a)=>{"use strict";var s;a.d(t,{S:()=>s}),function(e){e.ACTIVE="ACTIVE",e.FINISHED="FINISHED",e.NOT_STARTED="NOT_STARTED"}(s||(s={}))},41631:(e,t,a)=>{"use strict";var s;a.d(t,{t:()=>s}),function(e){e.ROOKIE="rookie",e.EXPLORER="explorer",e.TRAVELER="traveler",e.TRAILBLAZER="trailblazer",e.ADVENTURER="adventurer",e.DISCOVERER="discoverer",e.DAREDEVIL="daredevil",e.NAVIGATOR="navigator",e.CHAMPION="champion",e.DAILY_REFRESH="daily_refresh"}(s||(s={}))},3800:(e,t,a)=>{"use strict";a.d(t,{N:()=>s,h:()=>n});const s={autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1},n=window.location.search.includes("wantsPlainInfo=1")},81621:(e,t,a)=>{"use strict";a.d(t,{EO:()=>f,Lf:()=>d,Nr:()=>g,P2:()=>_,P_:()=>p,Ud:()=>u,eU:()=>v,i5:()=>y,nY:()=>b,pu:()=>S,rt:()=>c,sL:()=>m,tU:()=>o,z_:()=>l});var s=a(80254),n=a(17135),r=a(16086),i=a(20028);const o="//s3.amazonaws.com/duolingo-images/avatar/default_2",l=e=>e.includes("default_"),c=e=>!(e.privacySettings||[]).includes("DISABLE_SOCIAL")&&!(0,i.pN)(e),d=e=>!(e.privacySettings||[]).includes("DISABLE_MATURE_WORDS"),u=e=>!(e.privacySettings||[]).includes("DISABLE_LEADERBOARDS"),p=e=>{var t,a;return"CN"===e.ipCountry&&null!==(a=null===(t=e.featureFlags)||void 0===t?void 0:t.china_compliance_control)&&void 0!==a&&a},g=(e,t)=>{const a=[{streakFreezeUsed:!1}];e[e.length-1]>0&&t--;for(let s=e.length-2;s>=0&&t>0;s--){const n=0===e[s];a.unshift({streakFreezeUsed:n}),n||t--}return a},m=e=>e,h=e=>{var t;return Math.max(...(null!==(t=e.xpGains)&&void 0!==t?t:[]).filter((e=>e.xp>0)).map((e=>e.time)))},_=e=>{const t=h(e),a=(0,n.M)(t,Date.now());return a>=7&&a<30},v=e=>{const t=h(e),a=(0,n.M)(t,Date.now());return e.xpGains&&e.xpGains.length>0&&a>=30},f=e=>(0,n.t8)(1e3*e.creationDate,Date.now())<=30,S=e=>E(e,Date.now()),E=(e,t)=>s.VO(e.xpSummaries).filter((e=>void 0!==e&&(0,n.M)(e.date,t)<=30&&e.gainedXp>0)).length,y=e=>{const t=e.lastResurrectionTimestamp;return t?(0,n.M)(t,Date.now()):Number.MAX_SAFE_INTEGER},b=(e,t)=>e.sort(((e,a)=>{let s=!1,n=!1;try{const t=(0,r.Jb)();s=t===e.id,n=t===a.id}catch(e){}const i=!!t[e.id]||s,o=!!t[a.id]||n;return i===o?a.totalXp-e.totalXp:(o?0:1)-(i?0:1)}))},74597:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});const s=a(23630).getParser(navigator.userAgent),n=void 0!==navigator.brave,r={android:"Android"===s.getOSName(),chrome:"Chrome"===s.getBrowserName()&&!n,desktop:"desktop"===s.getPlatformType(),edge:"Microsoft Edge"===s.getBrowserName(),firefox:"Firefox"===s.getBrowserName(),hasMobileApp:"iOS"===s.getOSName()||"Android"===s.getOSName()&&"Amazon Silk"!==s.getBrowserName(),inwechat:navigator.userAgent.toLowerCase().includes("micromessenger"),ios:"iOS"===s.getOSName(),macOS:"macOS"===s.getOSName(),mobile:"mobile"===s.getPlatformType(),safari:"Safari"===s.getBrowserName(),silk:"Amazon Silk"===s.getBrowserName(),windowsPhone:"Windows Phone"===s.getOSName()}},16086:(e,t,a)=>{"use strict";a.d(t,{Jb:()=>o,MJ:()=>i,Pc:()=>l});var s=a(80231),n=a(54412),r=a(51158);const i=e=>{try{return parseInt(JSON.parse(s.DS.decode(e.split(".")[1])).sub,10)}catch(t){return void(0,r.vU)("Failed to parse saved JWT",{data:{jwt:e},once:!0})}},o=()=>{const e=(0,n.ej)(n.Vj.JWT),t=e?i(e):void 0;if(!t)throw Error("JWT missing");return t},l=()=>{try{return o(),!0}catch(e){return!1}}},20028:(e,t,a)=>{"use strict";a.d(t,{AE:()=>p,B8:()=>v,E4:()=>_,GJ:()=>n,Go:()=>h,Jd:()=>d,Sk:()=>l,d1:()=>g,dE:()=>u,jq:()=>r,ms:()=>o,pN:()=>m,u:()=>c,vb:()=>i});var s=a(80254);const n=e=>(e.roles||[]).includes("admin"),r=e=>{var t;return(null!==(t=e.privacySettings)&&void 0!==t?t:[]).includes("AGE_RESTRICTED")},i=e=>(e.roles||[]).includes("community-admin"),o=e=>"ENROLLED"===e.betaStatus||c(e),l=e=>(e.roles||[]).some((e=>"admin"===e||"engineering-contractor"===e)),c=e=>!s.xb(e.globalAmbassadorStatus),d=e=>(e.roles||[]).includes("moderators"),u=e=>!s.xb(e.joinedClassroomIds),p=e=>!s.xb(e.observedClassroomIds),g=e=>u(e)||p(e),m=e=>!e.username,h=e=>{var t;return l(e)||(null===(t=e.roles)||void 0===t?void 0:t.some((e=>"ios-builds-download"===e||"localization-translator"===e)))},_=e=>!!e.canUseModerationTools,v=e=>n(e)||i(e)},64591:(e,t,a)=>{"use strict";a.d(t,{$f:()=>i,FL:()=>o,Xh:()=>r});var s=a(99369),n=a(80254);const r=e=>JSON.parse(JSON.stringify(e)),i=(e,t,a,r)=>{if(!t.length)return(0,s.merge)(e,a,r);const i=t.reduce(((e,t)=>{var a;return null!==(a=e[t])&&void 0!==a?a:{}}),e);return(0,s.setIn)(e,t,n.xb(i)?a:(0,s.merge)(i,a,r))},o=(e,t,a)=>i(e,t,a,{deep:!0})},97106:(e,t,a)=>{"use strict";a.d(t,{$Z:()=>F,BX:()=>S,CT:()=>p,Cz:()=>k,Ig:()=>g,JE:()=>x,K3:()=>I,Lu:()=>_,MR:()=>R,Ms:()=>E,Qb:()=>A,R7:()=>h,Zy:()=>C,a$:()=>D,ab:()=>m,dp:()=>d,dr:()=>y,fu:()=>T,g3:()=>H,h0:()=>U,ix:()=>w,jB:()=>c,mX:()=>f,nF:()=>b,o6:()=>u,pu:()=>v,tV:()=>N,uD:()=>P,xc:()=>O,zL:()=>M});var s=a(42659),n=(a(77167),a(17135)),r=a(11883),i=a(8654),o=a(23275),l=a(18804);const c=9e5,d=18e5,u=(e,t)=>{for(const a of[1,2,5])if(Math.ceil(e/a)<=t)return a;return 10*Math.ceil(e/t/10)},p=(e,t)=>void 0===t?0:Math.ceil(5*t/e),g=(e,t,a)=>{const{enableBonusPoints:s,maxInLessonStreak:n,session:r}=e,i=r.xpGain;return{bonusXp:s&&e.completedWithHeartsRemaining?p(r.challenges.length,n):0,hasXpBoost:a,totalXpThisSession:i,totalXpToday:t}},m=(e,t)=>h(e,t)[6],h=(e,t,a="0")=>{const s=[0,0,0,0,0,0,0];if(!t)return s;const r=(0,n.Ko)(e),i=-1*(0,n.Rw)(a)*3600,o=(0,n.Zo)();for(const e of t){const t=o-r+86400-1,a=Math.floor((t-(e.time+i))/86400);a>=0&&a<=6&&(s[6-a]+=e.xp)}return s},_=10,v=20,f=40,S=40,E=S/2,y=4,b=3,w=5,I=2,T=20,k=10,C=20,R=5,O=e=>{var t,a;return(null===(t=e.levelData)||void 0===t?void 0:t.level)&&(0,o.$)(e.levelData.level)?v+p(e.session.challenges.length,e.maxInLessonStreak):(0,o.Wc)(null===(a=e.levelData)||void 0===a?void 0:a.level.state)&&["LEXEME_PRACTICE","LESSON"].includes(e.session.type)?w+p(e.session.challenges.length,e.maxInLessonStreak):e.sessionParams.isFinalLevel?!e.completedWithHeartsRemaining&&e.partialXpGiven||S+(e.enableBonusPoints?p(e.session.challenges.length,e.maxInLessonStreak):0):void 0},L=(e,t)=>{const a=(0,n.cz)(e);return null==t?void 0:t[a]},P=(e,t)=>{const a=e.getFullYear(),s=e.getMonth(),r=e.getDate(),o=(0,n.kJ)(a,s,(0,i.k8)()),l=7*Math.floor((r-1+o)/7)-o+1,c=[];for(let e=0;e<7;++e)c.push(L((0,n.$$)(a,s,l+e),t));return c},A=e=>{var t;return null!==(t=null==e?void 0:e.streakExtended)&&void 0!==t&&t},N=e=>!!e&&(e.streakExtended||e.frozen||e.repaired),D=(e,t,a,s)=>{const r=P((0,n.$$)(e,t,a),s),i=r.every(A),o=r.some(A),l=r.every((e=>void 0===e));return i?"yes":o?"no":l?"none":"no_streak"},x=(e,t)=>e.map((e=>{const a=e[0],s=a.getFullYear(),r=a.getMonth(),i=a.getDate(),o=(0,n.$$)(s,r,i-1),l=(0,n.$$)(s,r,i+7);return[L(o,t),...e.map((e=>L(e,t))),L(l,t)]}));var M;!function(e){e.ITEM_NAME_15_MIN="xp_boost_15",e.ITEM_NAME_30_MIN="general_xp_boost"}(M||(M={}));const F={[M.ITEM_NAME_15_MIN]:c,[M.ITEM_NAME_30_MIN]:d},U=e=>{const t=Object.entries(F).map((([t,a])=>{var s;const n=null===(s=e[t])||void 0===s?void 0:s.purchaseDate;return[t,void 0===n?void 0:1e3*n+a]})).filter((([,e])=>void 0!==e));return t.length>0?t.sort((([,e],[,t])=>t-e))[0][0]:void 0},H=()=>{const e=(0,r.Z)(1e4);return(0,l.Fx)((t=>(0,s.mu)(t,e)))}},2945:(e,t,a)=>{"use strict";a.d(t,{Gi:()=>r,z9:()=>n}),a(88868);const s={ar:"ar",cs:"cs",de:"de",el:"el",en:"en-us",es:"es",fr:"fr",hi:"hi",hu:"hu",id:"id",it:"it",ja:"ja",ko:"ko","nl-NL":"nl",pl:"pl",pt:"pt-br",ro:"ro",ru:"ru",th:"th",tr:"tr",uk:"uk",vi:"vi","zh-CN":"zh-cn"},n=e=>{const t=r();return t?`https://support.duolingo.com/hc/${t}/articles/${e}`:"/help"},r=()=>s[window.duo.uiLanguage]},10391:(e,t,a)=>{"use strict";a.d(t,{iY:()=>n,jL:()=>i,mH:()=>s,tW:()=>r});const s=(e,t)=>{const a=Math.max(e.top,t.top),s=Math.min(e.bottom,t.bottom),n=Math.max(e.left,t.left),r=Math.min(e.right,t.right)-n,i=s-a;if(!(r<0||i<0))return new DOMRect(n,a,r,i)},n=(e,t)=>{const a=t.map(((t,a)=>"px"===t.unit?t.value:t.value*(a%2?e.width:e.height)/100)),s=e.bottom+a[2],n=e.left-a[3],r=e.right+a[1],i=e.top-a[0];return new DOMRect(n,i,r-n,s-i)},r=e=>e instanceof Element?e.getBoundingClientRect():new DOMRect(0,0,window.innerWidth,window.innerHeight),i=(e="0px")=>{const t=e.split(/\s+/).map((e=>{const t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw Error("rootMargin must be specified in pixels or percent");return{unit:t[2],value:parseFloat(t[1])}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t}},63198:(e,t,a)=>{var s={"./sampleChallenges.json":[48033,223,5314,75],"./sampleChallengesJapanese.json":[89437,5770],"./sampleChallengesKorean.json":[66265,407,3860,5905],"./sampleChallengesPuzzleArabic.json":[18451,407,7493,3860,7187,7764],"./sampleChallengesPuzzleKorean.json":[56158,3016,950,3869],"./sampleChallengesSpanish.json":[90337,4099],"./sampleChallengesSpeak.json":[19872,3016,6098,7253],"./sampleChallengesTrace.json":[54731,5123]};function n(e){if(!a.o(s,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],n=t[0];return Promise.all(t.slice(1).map(a.e)).then((()=>a.t(n,19)))}n.keys=()=>Object.keys(s),n.id=63198,e.exports=n},55081:(e,t,a)=>{var s={"./ar.duostrings":[99135,9135],"./bn.duostrings":[17464,7464],"./cs.duostrings":[96102,6102],"./de.duostrings":[82867,2867],"./el.duostrings":[49495,9495],"./en.duostrings":[39819,9819],"./es.duostrings":[12579,2579],"./experiments.duostrings":[69295,9295],"./fr.duostrings":[34970,4970],"./hi.duostrings":[40620,620],"./hu.duostrings":[39666,9666],"./id.duostrings":[71062,1062],"./it.duostrings":[87490,7490],"./ja.duostrings":[43162,7854],"./ko.duostrings":[15750,5750],"./language_string_mapping.duostrings":[91307,1307],"./metadata.duostrings":[84309,4309],"./nl-NL.duostrings":[67674,7674],"./pl.duostrings":[17716,7716],"./pt.duostrings":[37763,7763],"./ro.duostrings":[37292,7292],"./ru.duostrings":[25529,5529],"./te.duostrings":[87274,7274],"./th.duostrings":[39943,9943],"./tl.duostrings":[8324,821],"./tr.duostrings":[7396,7396],"./uk.duostrings":[78374,8374],"./vi.duostrings":[89036,9036],"./zh-CN.duostrings":[85189,5189],"./zh-TW.duostrings":[74615,4615]};function n(e){if(!a.o(s,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],n=t[0];return a.e(t[1]).then((()=>a.t(n,19)))}n.keys=()=>Object.keys(s),n.id=55081,e.exports=n},91575:(e,t,a)=>{!function(){var e="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,a){if(a.get||a.set)throw new TypeError("ES3 does not support getters and setters.");e!=Array.prototype&&e!=Object.prototype&&(e[t]=a.value)},t="undefined"!=typeof window&&window===this?this:void 0!==a.g&&null!=a.g?a.g:this;function s(){s=function(){},t.Symbol||(t.Symbol=r)}var n=0;function r(e){return"jscomp_symbol_"+(e||"")+n++}function i(){s();var a=t.Symbol.iterator;a||(a=t.Symbol.iterator=t.Symbol("iterator")),"function"!=typeof Array.prototype[a]&&e(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return o(this)}}),i=function(){}}function o(e){var a=0;return function(e){return i(),(e={next:e})[t.Symbol.iterator]=function(){return this},e}((function(){return a<e.length?{done:!1,value:e[a++]}:{done:!0}}))}function l(e){if(!(e instanceof Array)){i();var t=e[Symbol.iterator];e=t?t.call(e):o(e);for(var a=[];!(t=e.next()).done;)a.push(t.value);e=a}return e}var c=[];function d(e,t){var a=this;this.context=e,this.h=t,this.f=(this.c=/Task$/.test(t))?e.get(t):e[t],this.a=[],this.b=[],this.g=function(e){for(var t=[],s=0;s<arguments.length;++s)t[s-0]=arguments[s];return a.b[a.b.length-1].apply(null,[].concat(l(t)))},this.c?e.set(t,this.g):e[t]=this.g}function u(e,t){-1<(t=e.a.indexOf(t))&&(e.a.splice(t,1),0<e.a.length?p(e):-1<(t=c.indexOf(e))&&(c.splice(t,1),e.c?e.context.set(e.h,e.f):e.context[e.h]=e.f))}function p(e){e.b=[];for(var t,a=0;t=e.a[a];a++){var s=e.b[a-1]||e.f.bind(e.context);e.b.push(t(s))}}function g(e){var t=history,a=c.filter((function(a){return a.context==t&&a.h==e}))[0];return a||(a=new d(t,e),c.push(a)),a}var m,h,_,v=Object.assign||function(e,t){for(var a=[],s=1;s<arguments.length;++s)a[s-1]=arguments[s];s=0;for(var n=a.length;s<n;s++){var r,i=Object(a[s]);for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},f={l:1,m:2,o:3,u:4,v:5,w:6,A:7,B:8,j:9,s:10},S=Object.keys(f).length;function E(e,t){var a=f.j;e.set("&_av","2.4.1");var s=e.get("&_au");if((s=parseInt(s||"0",16).toString(2)).length<S)for(var n=S-s.length;n;)s="0"+s,n--;a=S-a,s=s.substr(0,a)+1+s.substr(a+1),e.set("&_au",parseInt(s||"0",2).toString(16)),history.pushState&&window.addEventListener&&(this.b=v({shouldTrackUrlChange:this.shouldTrackUrlChange,trackReplaceState:!1,fieldsObj:{},hitFilter:null},t),this.g=e,this.i=location.pathname+location.search,this.c=this.c.bind(this),this.f=this.f.bind(this),this.a=this.a.bind(this),e=this.c,(t=g("pushState")).a.push(e),p(t),e=this.f,(t=g("replaceState")).a.push(e),p(t),window.addEventListener("popstate",this.a))}function y(e,t){setTimeout((function(){var a=e.i,s=location.pathname+location.search;a!=s&&e.b.shouldTrackUrlChange.call(e,s,a)&&(e.i=s,e.g.set({page:s,title:document.title}),(t||e.b.trackReplaceState)&&e.g.send("pageview",function(e,t,a){var s={transport:"beacon"};if("function"==typeof a){var n=t.get("buildHitTask");return{buildHitTask:function(t){t.set(s,null,!0),t.set(e,null,!0),a(t,void 0,void 0),n(t)}}}return v({},s,e)}(e.b.fieldsObj,e.g,e.b.hitFilter)))}),0)}E.prototype.c=function(e){var t=this;return function(a){for(var s=[],n=0;n<arguments.length;++n)s[n-0]=arguments[n];e.apply(null,[].concat(l(s))),y(t,!0)}},E.prototype.f=function(e){var t=this;return function(a){for(var s=[],n=0;n<arguments.length;++n)s[n-0]=arguments[n];e.apply(null,[].concat(l(s))),y(t,!1)}},E.prototype.a=function(){y(this,!0)},E.prototype.shouldTrackUrlChange=function(e,t){return!(!e||!t)},E.prototype.remove=function(){var e=this.c;u(g("pushState"),e),e=this.f,u(g("replaceState"),e),window.removeEventListener("popstate",this.a)},m="urlChangeTracker",h=E,_=window.GoogleAnalyticsObject||"ga",window[_]=window[_]||function(e){for(var t=[],a=0;a<arguments.length;++a)t[a-0]=arguments[a];(window[_].q=window[_].q||[]).push(t)},window.gaDevIds=window.gaDevIds||[],0>window.gaDevIds.indexOf("i5iSjo")&&window.gaDevIds.push("i5iSjo"),window[_]("provide",m,h),window.gaplugins=window.gaplugins||{},window.gaplugins[m.charAt(0).toUpperCase()+m.slice(1)]=h}()},17833:(e,t,a)=>{"use strict";e.exports=a.p+"images/512eb76d3f55365106b6553583884c81.svg"},98149:(e,t,a)=>{"use strict";e.exports=a.p+"images/1fab4a7428381cbb290d8f591d7934fb.svg"},42158:(e,t,a)=>{"use strict";e.exports=a.p+"images/617c9bcf01673a55c983c7d0a14a6bd4.svg"},90778:(e,t,a)=>{"use strict";e.exports=a.p+"images/68388f00ef865490c5b79b3a7238a791.svg"},45437:(e,t,a)=>{"use strict";e.exports=a.p+"images/c29a13c4b115e8a9000ba1b6ac2e1918.svg"},20770:(e,t,a)=>{"use strict";e.exports=a.p+"images/goals/235433119ddbb9e7a011fce8d725610e.svg"},20750:(e,t,a)=>{"use strict";e.exports=a.p+"images/7da752378a3b1b8bbcd94a4d4f10561e.svg"},9115:(e,t,a)=>{"use strict";e.exports=a.p+"images/b294c1b7e661d8039b723d450e12a91e.svg"},13567:(e,t,a)=>{"use strict";e.exports=a.p+"images/9249183104c6fcd338c3dc70fe33612c.svg"},39631:(e,t,a)=>{"use strict";e.exports=a.p+"images/leagues/b2cfacfc26adff8e547866db1b4d2249.svg"},80869:(e,t,a)=>{"use strict";e.exports=a.p+"images/leagues/838ba65643baef4c8442317df514cab5.svg"},92902:(e,t,a)=>{"use strict";e.exports=a.p+"images/leagues/020eeff7a4bb54d62dc430445102de8f.svg"},83831:(e,t,a)=>{"use strict";e.exports=a.p+"images/leagues/50e20c051d41d8446f13d5fae10f8797.svg"},8466:(e,t,a)=>{"use strict";e.exports=a.p+"images/leagues/80fecb328c5aefd400db229794fd7a08.svg"},8146:(e,t,a)=>{"use strict";e.exports=a.p+"images/leagues/58454634c8fdf43d606b85832102eb9b.svg"},79815:(e,t,a)=>{"use strict";e.exports=a.p+"images/leagues/fc303539a465de810900b8bf9101df5b.svg"},9175:(e,t,a)=>{"use strict";e.exports=a.p+"images/leagues/b7c96323c16272efa6794d33791686d2.svg"},40301:(e,t,a)=>{"use strict";e.exports=a.p+"images/leagues/8b3ff5d2a2b0ec2ff7cec8ebd639a5ab.svg"},26858:(e,t,a)=>{"use strict";e.exports=a.p+"images/leagues/968f56b566887d7718898cf8b5e74f40.svg"},65908:(e,t,a)=>{"use strict";e.exports=a.p+"images/leagues/eef523c872b71178ef5acb2442d453a2.svg"},66586:(e,t,a)=>{"use strict";e.exports=a.p+"images/leagues/9e4f18c0bc42c7508d5fa5b18346af11.svg"},25324:(e,t,a)=>{"use strict";e.exports=a.p+"images/leagues/cc7b8f8582e9cfb88408ab851ec2e9bd.svg"},87122:(e,t,a)=>{"use strict";e.exports=a.p+"images/dca3b978d07a7dfc05adb1d5526e9e21.svg"},480:(e,t,a)=>{"use strict";e.exports=a.p+"images/super/8183c77cba99daf1e900fb5f9b0cc671.svg"},45633:(e,t,a)=>{"use strict";e.exports=a.p+"images/ed25a8cf69261b0c1e25b147f369f74a.svg"},76986:e=>{"use strict";e.exports=JSON.parse('[["[’\\\\\\"´‘`′ʻ́̀´]","\'"],["[\\\\[\\\\]\\\\{\\\\}\\\\<\\\\>\\\\)\\\\(\\\\^\\\\~\\\\_\\\\-\\\\‐\\\\;\\\\!\\\\¡\\\\|\\\\?\\\\¿\\\\/\\\\·\\\\\\"\\\\«\\\\»\\\\“\\\\”\\\\„\\\\–\\\\:\\\\,\\\\.\\\\▶\\\\*\\\\+\\\\’\\\\。\\\\，\\\\、\\\\､\\\\‚\\\\｡\\\\；\\\\：\\\\「\\\\」\\\\『\\\\』\\\\（\\\\）\\\\？\\\\！\\\\─\\\\…\\\\《\\\\》\\\\〈\\\\〉\\\\．\\\\～\\\\،\\\\؟\\\\।\\\\—\\\\‧]",""],["\\\\s+"," "],["^ | $",""]]')},72538:e=>{"use strict";e.exports=JSON.parse('{"ar":{"de":"الألمانية","en":"الإنجليزية","fr":"الفرنسية","sv":"السويدية"},"bn":{"en":"ইংরেজি"},"cs":{"en":"Angličtina"},"de":{"en":"Englisch","es":"Spanisch","fr":"Französisch","it":"Italienisch"},"el":{"en":"Αγγλικά"},"en":{"ar":"Arabic","cs":"Czech","cy":"Welsh","da":"Danish","de":"German","el":"Greek","eo":"Esperanto","es":"Spanish","fi":"Finnish","fr":"French","ga":"Irish","gd":"Scottish Gaelic","he":"Hebrew","hi":"Hindi","ht":"Haitian Creole","hu":"Hungarian","hv":"High Valyrian","hw":"Hawaiian","id":"Indonesian","it":"Italian","ja":"Japanese","ko":"Korean","la":"Latin","nl-NL":"Dutch","no-BO":"Norwegian (Bokmål)","nv":"Navajo","pl":"Polish","pt":"Portuguese","ro":"Romanian","ru":"Russian","sv":"Swedish","sw":"Swahili","tlh":"Klingon","tr":"Turkish","uk":"Ukrainian","vi":"Vietnamese","yi":"Yiddish","zh":"Chinese","zu":"Zulu"},"es":{"ca":"Catalán","de":"Alemán","en":"Inglés","eo":"Esperanto","fr":"Francés","gn":"Guaraní","it":"Italiano","pt":"Portugués","ru":"Ruso","sv":"Sueco"},"fr":{"de":"Allemand","en":"Anglais","eo":"Espéranto","es":"Espagnol","it":"Italien","pt":"Portugais"},"hi":{"en":"इंग्लिश"},"hu":{"de":"Német","en":"Angol"},"id":{"en":"Bahasa Inggris"},"it":{"de":"Tedesco","en":"Inglese","es":"Spagnolo","fr":"Francese"},"ja":{"en":"英語","fr":"フランス語","ko":"韓国語","zh":"中国語"},"ko":{"en":"영어"},"nl-NL":{"de":"Duits","en":"Engels","fr":"Frans"},"pl":{"en":"Angielski"},"pt":{"de":"Alemão","en":"Inglês","eo":"Esperanto","es":"Espanhol","fr":"Francês","it":"Italiano"},"ro":{"en":"Engleză"},"ru":{"de":"Немецкий","en":"Английский","es":"Испанский","fr":"Французский"},"te":{"en":"ఆంగ్లము"},"th":{"en":"ภาษาอังกฤษ"},"tl":{"en":"Ingles"},"tr":{"de":"Almanca","en":"İngilizce","ru":"Rusça"},"uk":{"en":"Англійська"},"vi":{"en":"Tiếng Anh","zh":"Tiếng Hoa"},"zh-CN":{"en":"英语","es":"西班牙语","fr":"法语","it":"意大利语","ja":"日语","ko":"韩语","zh-HK":"中文（粤语）"},"zh-TW":{"en":"英語","es":"西班牙語","fr":"法語","it":"義大利語","ja":"日語","ko":"韓語","zh-HK":"中文（粵語）"}}')}},e=>{e.O(0,[4492],(()=>(90806,e(e.s=90806)))),e.O()}]);