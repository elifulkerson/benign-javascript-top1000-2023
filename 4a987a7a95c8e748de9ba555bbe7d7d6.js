function loadDesktopAds(){if(!(window.desktopAdsLoaded||$(window).width()<992)){window.desktopAdsLoaded=!0;var e=document.getElementById("prLoader");$(e).html()||postscribe(e,'<script src="//a.orbsrv.com/ad_track.js"><\/script>',{done:function(){loadDesktopAdsNormal()}})}}function loadMobileAds(){if(!(window.mobileAdsLoaded||$(window).width()>991)){window.mobileAdsLoaded=!0;var e=document.getElementById("prLoader");$(e).html()||postscribe(e,'<script src="//a.orbsrv.com/ad_track.js"><\/script>',{done:function(){loadMobileAdsNormal()}})}}function loadDesktopAdsNormal(){function e(){if(!($(window).width()<992)){var e=$("#content").height()-250*s;if(e>0)for(var t=0;t<Math.ceil(e/250);t++)s++,postscribe(o,'<script src="//a.orbsrv.com/ads.js"><\/script>')}}var t;if(t=document.getElementById("desktopHeaderPr"),null!==t&&$(t).is(":visible")&&($(t).html(""),dachCountry()?$(t).html('<iframe src="https://widgets.guppy.live/camFrame.aspx?GUID=14bece70345b4b2683a7443a5ee81b7d" allowtransparency=true width=960 height=75 frameborder=0 marginheight=0 marginwidth=0 scrolling=no></iframe>'):postscribe(t,'<iframe src="//a.orbsrv.com/iframe.php?idzone=1927736&size=728x90&sub='+(Storages.cookieStorage.get("subId")?Storages.cookieStorage.get("subId"):"1")+"&tags="+$("meta[name='keywords']").attr("content")+'" width="728" height="90" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe>')),null!==(t=document.getElementById("desktopBlackFridayPr"))&&$(t).is(":visible"))if($(t).html(""),$(t).width()<1323){var i=Math.round(100*$(t).width()/1323)/100;$(t).css("height",110*i),postscribe(t,'<iframe style="zoom: '+i+'"  width="1323" height="110" scrolling="no" frameborder="0" src="https://a.adtng.com/get/10012902?time=1634827047532" allowtransparency="true" marginheight="0" marginwidth="0" name="spot_id_10012902"></iframe>')}else postscribe(t,'<iframe width="1323" height="110" scrolling="no" frameborder="0" src="https://a.adtng.com/get/10012902?time=1634827047532" allowtransparency="true" marginheight="0" marginwidth="0" name="spot_id_10012902"></iframe>');if(t=document.getElementById("desktopFooterPr"),null!==t&&$(t).is(":visible")&&($(t).html(""),Math.random()<parseFloat(window.config.ads.exoNativeAds)?postscribe(t,'<script type="text/javascript" data-idzone="3012382" src="//a.orbsrv.com/nativeads.js"><\/script>'):window.config.ads.exoMultiAds?postscribe(t,'<ins class="adsbyexoclick" data-zoneid="4271606" data-keywords="'+$("meta[name='keywords']").attr("content")+'"></ins>'):postscribe(t,'<script>var ad_idzone = "3054390", ad_width = "900", ad_height = "250", ad_sub = (Storages.cookieStorage.get("subId") ? Storages.cookieStorage.get("subId") : "1"), ad_tags = $("meta[name=\'keywords\']").attr(\'content\');<\/script><script src="//a.orbsrv.com/ads.js"><\/script>')),window.config.ads.exoMultiAds?($("#desktopNtvAPr").hide(),$("#desktopNtvBPr").hide(),null!==(t=document.getElementById("desktopNtvPr"))&&$(t).is(":visible")&&($(t).html(""),postscribe(t,'<ins class="adsbyexoclick" data-zoneid="4350842" data-keywords="'+$("meta[name='keywords']").attr("content")+'"></ins>'))):($("#desktopNtvPr").hide(),t=document.getElementById("desktopNtvAPr"),null!==t&&$(t).is(":visible")&&($(t).html(""),postscribe(t,'<script>var ad_idzone = "2060859", ad_width = "300", ad_height = "250", ad_sub = (Storages.cookieStorage.get("subId") ? Storages.cookieStorage.get("subId") : "1"), ad_tags = $("meta[name=\'keywords\']").attr(\'content\');<\/script><script src="//a.orbsrv.com/ads.js"><\/script>')),null!==(t=document.getElementById("desktopNtvBPr"))&&$(t).is(":visible")&&($(t).html(""),postscribe(t,'<script>var ad_idzone = "2060861", ad_width = "300", ad_height = "250", ad_sub = (Storages.cookieStorage.get("subId") ? Storages.cookieStorage.get("subId") : "1"), ad_tags = $("meta[name=\'keywords\']").attr(\'content\');<\/script><script src="//a.orbsrv.com/ads.js"><\/script>'))),t=document.getElementById("desktopRecoPr"),null!==t&&$(t).is(":visible")&&($(t).html(""),postscribe(t,'<script>var ad_idzone = "698087", ad_width = "300", ad_height = "250", ad_sub = (Storages.cookieStorage.get("subId") ? Storages.cookieStorage.get("subId") : "1"), ad_tags = $("meta[name=\'keywords\']").attr(\'content\');<\/script><script src="//a.orbsrv.com/ads.js"><\/script>'),postscribe(t,'<script>var ad_idzone = "698087", ad_width = "300", ad_height = "250", ad_sub = (Storages.cookieStorage.get("subId") ? Storages.cookieStorage.get("subId") : "1"), ad_tags = $("meta[name=\'keywords\']").attr(\'content\');<\/script><script src="//a.orbsrv.com/ads.js"><\/script>'),postscribe(t,'<script>var ad_idzone = "698087", ad_width = "300", ad_height = "250", ad_sub = (Storages.cookieStorage.get("subId") ? Storages.cookieStorage.get("subId") : "1"), ad_tags = $("meta[name=\'keywords\']").attr(\'content\');<\/script><script src="//a.orbsrv.com/ads.js"><\/script>')),null!==(t=document.getElementById("desktopRightCubePr"))&&$(t).is(":visible")){$(t).html("");var s;postscribe(t,'<script>var ad_idzone = "1929934", ad_width = "300", ad_height = "250", ad_sub = (Storages.cookieStorage.get("subId") ? Storages.cookieStorage.get("subId") : "1"), ad_tags = $("meta[name=\'keywords\']").attr(\'content\');<\/script><script src="//a.orbsrv.com/ads.js"><\/script>'),postscribe(t,'<script>var ad_idzone = "1929936", ad_width = "300", ad_height = "250", ad_sub = (Storages.cookieStorage.get("subId") ? Storages.cookieStorage.get("subId") : "1"), ad_tags = $("meta[name=\'keywords\']").attr(\'content\');<\/script><script src="//a.orbsrv.com/ads.js"><\/script>'),postscribe(t,'<script>var ad_idzone = "1929936", ad_width = "300", ad_height = "250", ad_sub = (Storages.cookieStorage.get("subId") ? Storages.cookieStorage.get("subId") : "1"), ad_tags = $("meta[name=\'keywords\']").attr(\'content\');<\/script><script src="//a.orbsrv.com/ads.js"><\/script>'),s=3;var o=t;e(),$(window).on("resize",e)}t=document.getElementById("desktopSkinnyTowerPr"),null!==t&&$(t).is(":visible")&&($(t).html(""),postscribe(t,'<script>var ad_idzone = "3031472", ad_width = "160", ad_height = "600", ad_sub = (Storages.cookieStorage.get("subId") ? Storages.cookieStorage.get("subId") : "1"), ad_tags = $("meta[name=\'keywords\']").attr(\'content\');<\/script><script src="//a.orbsrv.com/ads.js"><\/script>')),window.config.ads.desktopPopunder&&"chrome"!==navigator.browser.name&&null!==(t=document.getElementById("popunderPrs"))&&$(t).is(":visible")&&postscribe(t,'<script>var ad_idzone = "1931806", ad_frequency_period = 720, ad_frequency_count = 1, ad_popup_in_chrome68 = true, ad_trigger_method = 2, ad_tags = "'+$("meta[name='keywords']").attr("content")+'", ad_trigger_class = "video-thumb";<\/script><script src="//a.pemsrv.com/popunder1000.js"><\/script>'),window.config.ads.desktopPopunderChrome2&&"chrome"===navigator.browser.name&&null!==(t=document.getElementById("popunderPrs"))&&$(t).is(":visible")&&($(".related-thumb").on("mousedown",function(){Storages.cookieStorage.get("zone-cap-4277242")||$(".exo-ipp-container").hide()}),postscribe(t,'<script type="application/javascript" data-idzone="4277242" data-ad_frequency_count="1"  data-ad_frequency_period="720" data-type="desktop" data-browser_settings="1" data-ad_trigger_method="2" data-ad_trigger_class="related-thumb" src="//a.pemsrv.com/fp-interstitial.js"  data-ad_tags="'+$("meta[name='keywords']").attr("content")+'"><\/script>')),window.config.ads.exoIMDesktop&&null!==(t=document.getElementById("exoIMPrs"))&&$(t).is(":visible")&&($(t).html()||postscribe(t,'<ins class="adsbyexoclick" data-zoneid="4485813" data-keywords="'+$("meta[name='keywords']").attr("content")+'"></ins>')),t=document.getElementById("relatedThumbPr"),null!==t&&$(t).is(":visible")&&($(t).html(""),postscribe(t,'<ins class="adsbyexoclick" data-zoneid="4904762" data-keywords="'+$("meta[name='keywords']").attr("content")+'"></ins>'),$(t).css("transform","scale("+9*$(t).parent().width()/16/250+")")),window.config.ads.exoMultiAds&&null!==(t=document.getElementById("triggerExoMultiPrs"))&&$(t).is(":visible")&&postscribe(t,'<script>(AdProvider = window.AdProvider || []).push({"serve": {}});<\/script>')}function loadMobileAdsNormal(){var e;if(e=document.getElementById("mobileHeaderPr"),null!==e&&$(e).is(":visible")&&($(e).html(""),postscribe(e,'<iframe src="//a.orbsrv.com/iframe.php?idzone=1927770&size=300x100&sub='+(Storages.cookieStorage.get("subId")?Storages.cookieStorage.get("subId"):"1")+"&tags="+$("meta[name='keywords']").attr("content")+'" width="300" height="100" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe>'),$(e).width()>=600&&postscribe(e,'<iframe src="//a.orbsrv.com/iframe.php?idzone=1927770&size=300x100&sub='+(Storages.cookieStorage.get("subId")?Storages.cookieStorage.get("subId"):"1")+"&tags="+$("meta[name='keywords']").attr("content")+'" width="300" height="100" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe>')),null!==(e=document.getElementById("mobileBlackFridayPr"))&&$(e).is(":visible"))if($(e).html(""),$(e).width()<=600){var t=Math.round(100*$(e).width()/600)/100;$(e).css("height",300*t),postscribe(e,'<iframe style="zoom: '+t+'" width="600" height="300" scrolling="no" frameborder="0" src="https://a.adtng.com/get/10013328?time=1647308876270" allowtransparency="true" marginheight="0" marginwidth="0" name="spot_id_10013328"></iframe>')}else postscribe(e,'<iframe width="600" height="300" scrolling="no" frameborder="0" src="https://a.adtng.com/get/10013328?time=1647308876270" allowtransparency="true" marginheight="0" marginwidth="0" name="spot_id_10013328"></iframe>');e=document.getElementById("mobileFooterPr"),null!==e&&$(e).is(":visible")&&($(e).html(""),Math.random()<parseFloat(window.config.ads.exoNativeAds)?postscribe(e,'<script type="text/javascript" data-idzone="3012384" src="//a.orbsrv.com/nativeads.js"><\/script>'):window.config.ads.exoMultiAds?postscribe(e,'<ins class="adsbyexoclick" data-zoneid="4271602" data-keywords="'+$("meta[name='keywords']").attr("content")+'"></ins>'):(postscribe(e,'<iframe src="//a.orbsrv.com/iframe.php?idzone=1927772&size=300x250&sub='+(Storages.cookieStorage.get("subId")?Storages.cookieStorage.get("subId"):"1")+"&tags="+$("meta[name='keywords']").attr("content")+'" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe>'),$(e).width()>=600&&postscribe(e,'<iframe src="//a.orbsrv.com/iframe.php?idzone=1927772&size=300x250&sub='+(Storages.cookieStorage.get("subId")?Storages.cookieStorage.get("subId"):"1")+"&tags="+$("meta[name='keywords']").attr("content")+'" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe>'))),e=document.getElementById("underPlayerPr"),null!==e&&$(e).is(":visible")&&($(e).html(""),postscribe(e,'<iframe src="//a.orbsrv.com/iframe.php?idzone=1927802&size=300x250&sub='+(Storages.cookieStorage.get("subId")?Storages.cookieStorage.get("subId"):"1")+"&tags="+$("meta[name='keywords']").attr("content")+'" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe>')),window.config.ads.mobileIM&&null!==(e=document.getElementById("imPrs"))&&$(e).is(":visible")&&($(e).html()||postscribe(e,'<script src="//s.zlinkd.com/d.php?z=1927774&type=12&capping=0&sub='+(Storages.cookieStorage.get("subId")?Storages.cookieStorage.get("subId"):"1")+'"><\/script>')),window.config.ads.mobilePopunder&&"chrome"!==navigator.browser.name&&null!==(e=document.getElementById("popunderPrs"))&&$(e).is(":visible")&&(window.config.ads.mobileStreamatePopunder&&englishCountry()?postscribe(e,'<script src="'+window.config.cdn.static+'js/popunderMobStreamate.js"><\/script>'):postscribe(e,'<script>var ad_idzone = "1927776", ad_frequency_period = 1080, ad_frequency_count = 1, ad_popup_in_chrome68 = true, ad_trigger_method = 2, ad_tags="'+$("meta[name='keywords']").attr("content")+'", ad_trigger_class = "video-thumb";<\/script><script src="//a.pemsrv.com/popunder1000.js"><\/script>')),window.config.ads.mobilePopunderChrome2&&"chrome"===navigator.browser.name&&null!==(e=document.getElementById("popunderPrs"))&&$(e).is(":visible")&&postscribe(e,'<script type="application/javascript" data-idzone="4277330"  data-ad_frequency_count="1"  data-ad_frequency_period="1440"  data-type="mobile" data-browser_settings="1" data-ad_trigger_method="2" data-ad_trigger_class="related-thumb" src="//a.pemsrv.com/fp-interstitial.js" data-ad_tags="'+$("meta[name='keywords']").attr("content")+'"><\/script>'),window.config.ads.exoIMMobile&&2==(sessionStorage.getItem("relatedCount")||0)&&(Storages.sessionStorage.set("relatedCount",3),null!==(e=document.getElementById("exoIMPrs"))&&$(e).is(":visible")&&postscribe(e,'<ins class="adsbyexoclick" data-zoneid="4485813" data-keywords="'+$("meta[name='keywords']").attr("content")+'"></ins><script>(AdProvider = window.AdProvider || []).push({"serve": {}});<\/script>')),e=document.getElementById("relatedThumbPr"),null!==e&&$(e).is(":visible")&&($(e).html(""),postscribe(e,'<ins class="adsbyexoclick" data-zoneid="4904760" data-keywords="'+$("meta[name='keywords']").attr("content")+'"></ins>'),$(e).css("transform","scale("+9*$(e).parent().width()/16/250+")")),window.config.ads.exoMultiAds&&null!==(e=document.getElementById("triggerExoMultiPrs"))&&$(e).is(":visible")&&postscribe(e,'<script>(AdProvider = window.AdProvider || []).push({"serve": {}});<\/script>')}function cleanFileName(e){return e.replace(/[^a-zA-Z0-9_.]+/g,"-").replace("/-+/g","-").replace(/^\-\.(.+)/,getRandomString(16)+".$1")}function dataURItoBlob(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var i=e.split(",")[0].split(":")[1].split(";")[0],s=new Uint8Array(t.length),o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return new Blob([s],{type:i})}function integerHint(e){return e=parseInt(e),!e||e<=0?0:e<999?e:e<999999?parseInt(e/1e3)+"K":e<999999999?parseInt(e/1e6)+"M":"1B+"}function clearUserInfo(){window.config.app.debug&&console.log("Clear user info"),Storages.cookieStorage.remove("token");var e=[];Storages.sessionStorage.isSet("like")&&(e=Storages.sessionStorage.get("like").slice()),Storages.sessionStorage.removeAll(),e.length>0&&Storages.sessionStorage.set("like",e)}function checkUser(){var e=jQuery.Deferred();return Storages.sessionStorage.isEmpty("user")?$.get("/api/auth/check").then(function(t){Storages.sessionStorage.set("user",t),e.resolve(t)}):e.resolve(Storages.sessionStorage.get("user")),e.promise()}function checkProfile(){var e=jQuery.Deferred();return $.when(window.userPromise).then(function(t){t&&t.id?Storages.sessionStorage.isEmpty("profile")?$.get("/api/profile").then(function(t){var i=t.data;Storages.sessionStorage.set("profile",i),window.config.features.emailVerification&&i.record_num>25716861&&i.email&&i.email!=i.email_verification&&!Storages.localStorage.get("yj-emailUnverifiedReminder")&&(Storages.localStorage.set("yj-emailUnverifiedReminder",!0),noty({layout:"bottom",type:"error",timeout:5e3,maxVisible:1,killer:!0,text:"Your email: "+i.email+" has not been verified.  Please go to Profile > Email section and follow the verification steps. If you choose not to <a>skip</a> verification then resetting your password will not be possible."})),window.config.features.partnerPaysite&&i.partner?$.get("/api/profile/paysites").then(function(t){Storages.sessionStorage.set("paysites",t),e.resolve(i)},function(t){console.log("CheckProfile",t),e.reject()}):e.resolve(i)}):e.resolve(Storages.sessionStorage.get("profile")):e.reject()}),e.promise()}function checkFavorites(){var e=jQuery.Deferred();return $.when(window.userPromise).then(function(t){t&&t.id?Storages.sessionStorage.isSet(t.id+"_favorites")?e.resolve(Storages.sessionStorage.get(t.id+"_favorites")):$.getJSON("/api/favorites",function(i){Storages.sessionStorage.set(t.id+"_favorites",i),e.resolve(i)}):e.resolve([])}),e.promise()}function checkCanAutoplay(){var e=jQuery.Deferred();if(navigator.userAgent.match(/iPhone|iPad|iPod/i))Storages.sessionStorage.set("canAutoplay",!1),e.resolve(!1);else if(Storages.sessionStorage.get("canAutoplay"))e.resolve(!0);else{window.config.app.debug&&console.log("Autoplay will check");try{var t="data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAA7RtZGF0AAACrAYF//+o3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE1MiByMTkgYmEyNDg5OSAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTcgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0xIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDM6MHgxMTMgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTEgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz0zIGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MyBiX3B5cmFtaWQ9MiBiX2FkYXB0PTEgYl9iaWFzPTAgZGlyZWN0PTEgd2VpZ2h0Yj0xIG9wZW5fZ29wPTAgd2VpZ2h0cD0yIGtleWludD0yNTAga2V5aW50X21pbj0yNSBzY2VuZWN1dD00MCBpbnRyYV9yZWZyZXNoPTAgcmNfbG9va2FoZWFkPTQwIHJjPWNyZiBtYnRyZWU9MSBjcmY9MjguMCBxY29tcD0wLjYwIHFwbWluPTAgcXBtYXg9NjkgcXBzdGVwPTQgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAACpliIQAJ//+8dzwKZrlxoFv6nFTjrH/8I5IvpuR7wM+8DluLAAQcGNdwkEAAAAKQZokbEJ/8yAHLAAAAAhBnkJ4jf8JeQAAAAgBnmF0Rf8KSAAAAAgBnmNqRf8KSQAAABBBmmhJqEFomUwIR//kQBXxAAAACUGehkURLG8JeQAAAAgBnqV0Rf8KSQAAAAgBnqdqRf8KSAAAAA9BmqxJqEFsmUwI/4cAU8AAAAAJQZ7KRRUsbwl5AAAACAGe6XRF/wpIAAAACAGe62pF/wpIAAAADkGa70moQWyZTAi/AAJPAAAACUGfDUUVLG8JeQAAAAgBny5qRf8KSQAAA8ptb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAACFwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAC9HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAEAAAAAAAACFwAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAoAAAAFoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAhcAAAMAAAEAAAAAAmxtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAACzgAAAYAFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAIXbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAB13N0YmwAAACXc3RzZAAAAAAAAAABAAAAh2F2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAoABaAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAxYXZjQwFkAAv/4QAYZ2QAC6zZQo35IQAAAwAMAAADAs4PFCmWAQAGaOviSyLAAAAAGHN0dHMAAAAAAAAAAQAAABAAAAGAAAAAFHN0c3MAAAAAAAAAAQAAAAEAAACIY3R0cwAAAAAAAAAPAAAAAQAAAwAAAAABAAAHgAAAAAEAAAMAAAAAAQAAAAAAAAABAAABgAAAAAEAAAeAAAAAAQAAAwAAAAABAAAAAAAAAAEAAAGAAAAAAQAAB4AAAAABAAADAAAAAAEAAAAAAAAAAQAAAYAAAAABAAAGAAAAAAIAAAGAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAAQAAAAAQAAAFRzdHN6AAAAAAAAAAAAAAAQAAAC3gAAAA4AAAAMAAAADAAAAAwAAAAUAAAADQAAAAwAAAAMAAAAEwAAAA0AAAAMAAAADAAAABIAAAANAAAADAAAABRzdGNvAAAAAAAAAAEAAAAwAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ny43Ny4xMDA=",i=$('<video src="'+t+'" loop autoplay playsinline muted width="5" height="5" style="position:fixed;z-index:1000;top:0;left:0"></video>'),s=$('<video src="'+t+'" loop autoplay playsinline width="5" height="5" style="position:fixed;z-index:1000;top:0;left:0"></video>');$("body").prepend(i),$("body").prepend(s),i[0].load(),s[0].load(),s[0].oncanplay=function(){window.config.app.debug&&console.log("Autoplay on can play");var t=setTimeout(function(){s[0].paused&&i[0].paused?(window.config.app.debug&&console.log("Autoplay on timeout paused"),Storages.sessionStorage.set("canAutoplay",!1),e.reject()):s[0].paused&&!i[0].paused?(window.config.app.debug&&console.log("Autoplay on timeout paused sound video but playing muted"),Storages.sessionStorage.set("canAutoplay",!1),e.resolve(!1)):(window.config.app.debug&&console.log("Autoplay on timeout playing"),Storages.sessionStorage.set("canAutoplay",!0),e.resolve(!0)),i[0].pause(),i.remove(),s[0].pause(),s.remove()},3e3);s[0].onplay=function(){navigator.userAgent.match(/safari|iPhone|iPad|iPod/i)?(window.config.app.debug&&console.log("Autoplay on ios always muted"),Storages.sessionStorage.set("canAutoplay",!1),e.resolve(!1)):(window.config.app.debug&&console.log("Autoplay on playing"),Storages.sessionStorage.set("canAutoplay",!0),e.resolve(!0)),clearTimeout(t),i[0].pause(),i.remove(),s[0].pause(),s.remove()}}}catch(t){window.config.app.debug&&console.log("Autoplay on error",t),Storages.sessionStorage.set("canAutoplay",!1),e.reject()}}return e.promise()}function formatViews(e){return e>999999?(e/1e6).toFixed(1)+"M":e>999?(e/1e3).toFixed(0)+"K":e}function adjustHeightInMultiples(){$(".height-in-multiples").each(function(){var e=Math.ceil(Number($($(this).data("element")).height())/Number($(this).data("multiples"))*Number($(this).data("multiples")));e>Number($(this).attr("height"))&&$(this).height(e)})}function getParameterByName(e,t){var i=window.location.href;e=e.replace(/[\[\]]/g,"\\$&");var s=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),o=s.exec(i);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):t||"":t||null}function checkCookie(){if(navigator.cookieEnabled)return!0;document.cookie="cookietest=1";var e=-1!=document.cookie.indexOf("cookietest=");return document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",e}function getRandomString(e){var t="";do{t+=Math.random().toString(36).substr(2)}while(t.length<e);return t=t.substr(0,e)}function setupVideoPreviews(){window.config.features.videoPreviews&&(window.config.app.debug&&console.log("Setup previews"),$("a.frame.video").each(function(){var e=document.createElement("video");e.setAttribute("webkit-playsinline",""),e.setAttribute("playsinline",""),e.setAttribute("muted",""),e.muted=!0,e.autoplay=!0,e.preload="auto",window.config.features.videoPreviewsPreload&&(e.src=$(this).attr("data-clip")),e.style.display="none",$(this).append(e)}),$("a.frame.video").on("mouseover touchmove",function(e){lastVideo&&($(lastVideo).hide(),lastVideo.loop=!1),$("a.frame.video .preload-line").removeClass("active");var t=e.target,i=t.querySelector(".preload-line");i.classList.add("active"),lastVideo=t.querySelectorAll("video")[0],$(lastVideo).on("play",function(){i.classList.remove("active")}),window.config.features.videoPreviewsPreload||(lastVideo.src=t.getAttribute("data-clip")),$(lastVideo).show(),lastVideo.loop=!0,lastVideo.load()}),$("a.frame.video").on("mouseleave",function(e){lastVideo&&($(lastVideo).hide(),lastVideo.loop=!1),$("a.frame.video .preload-line").removeClass("active")}),"safari"==navigator.browser.name&&($("a.frame.video").on("touchstart",function(e){lastTouch=e.target}),$("a.frame.video").on("touchend",function(e){lastTouch!==e.target||$(e.target.querySelectorAll("video")[0]).is(":visible")||(window.location=$(this).attr("href"))})))}function resizeIframe(e){e.style.height=e.contentWindow.document.body.scrollHeight+"px",$(".max-height-pr").css("max-height",e.contentWindow.document.body.scrollHeight+"px")}function translate(e){return translations[e]}function slugUrl(e){return rawurlencode(e).replace(/%20/g,"-").replace(/ /g,"-").replace(/'/g,"").replace(/"/g,"").replace(/&/g,"and").toLowerCase()}function htmlspecialchars(e){return e.replace&&e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")||e}function rawurlencode(e){var t={},i=e.toString(),s=function(e,t,i){var s=[];return s=i.split(e),s.join(t)};t["'"]="%27",t["("]="%28",t[")"]="%29",t["*"]="%2A",t["~"]="%7E",t["!"]="%21",i=encodeURIComponent(i),i=s("%20"," ",i);for(search in t)replace=t[search],i=s(search,replace,i);return i.replace(/(\%([a-z0-9]{2}))/g,function(e,t,i){return"%"+i.toUpperCase()})}function urldecode(e){return decodeURIComponent((e+"").replace(/%(?![\da-f]{2})/gi,function(){return"%25"}).replace(/\+/g,"%20"))}function setSetting(e,t){$.ajax({url:"/api/admin/settings/"+e,type:"PUT",data:{value:t},success:function(t){noty({layout:"bottom",type:"success",timeout:5e3,maxVisible:1,killer:!0,text:"Setting "+e+" saved! allow 3 mins for it to sync accross servers"})},error:function(){noty({layout:"bottom",type:"error",timeout:5e3,maxVisible:1,killer:!0,text:"Setting could not be saved"})}})}function preloadImages(){for(var e=0;e<arguments.length;e++)preloadedImages[e]=new Image,preloadedImages[e].src=arguments[e]}function preloadVastVideo(e){var t=new XMLHttpRequest;t.open("GET",e,!0),t.onload=function(){if(200===this.status){var t=this.responseXML.getElementsByTagName("MediaFile"),i=t.length&&t[0].innerHTML,s=new XMLHttpRequest;s.open("GET",i,!0),s.responseType="blob",s.onload=function(){if(200===this.status){var t=this.response,i=URL.createObjectURL(t);preloadedVideos[e]=i}},s.onerror=console.log,s.send()}},t.onerror=console.log,t.send()}function eventFire(e,t){if(e.fireEvent)e.fireEvent("on"+t);else{var i=document.createEvent("Events");i.initEvent(t,!0,!1),e.dispatchEvent(i)}}function forgotPassword(e){var t=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;if(!$(e).find("input#email").val().match(t))return void noty({layout:"bottom",type:"error",timeout:5e3,maxVisible:1,killer:!0,text:"Valid email is required"});$(e).find('input[type="submit"]').attr("disabled","disabled"),$.post("/api/resetPassword",{email:$(e).find("input#email").val(),token:btoa(Storages.cookieStorage.get("passPhrase"))}).then(function(){noty({layout:"bottom",type:"success",timeout:5e3,killer:!0,text:"A password reset link has been sent"}),setTimeout(function(){window.location="/"},2e3)},function(e){var t="Something went wrong, reset password could not be processed at this time";429==e.status?t="Too many requests, please try later":403==e.status?t="User account is suspended":408==e.status?t="Please wait for few seconds":409==e.status&&(t="Email is not verified"),noty({layout:"bottom",type:"error",timeout:5e3,maxVisible:1,killer:!0,text:t}),setTimeout(function(){window.location="/"},2e3)})}function resetPassword(e){return $(e).find("input#password").val().length<6?(noty({layout:"bottom",type:"error",timeout:5e3,maxVisible:1,killer:!0,text:"Password (min 6 chars) is required"}),!1):$(e).find("input#password").val()!=$(e).find("input#confirm").val()?(noty({layout:"bottom",type:"error",timeout:5e3,maxVisible:1,killer:!0,text:"Confirm password does not match"}),!1):($(e).find('input[type="submit"]').attr("disabled","disabled"),void $.ajax({type:"PUT",url:"/api/resetPassword",data:{password:$(e).find("input#password").val(),token:$(e).find("input#token").val()}}).then(function(){noty({layout:"bottom",type:"success",timeout:5e3,killer:!0,text:"Password changed successfully"}),setTimeout(function(){window.location="/login"},2e3)},function(e){var t="Something went wrong, reset password could not be processed at this time";408==e.status&&(t="Token expired, please retry"),noty({layout:"bottom",type:"error",timeout:5e3,maxVisible:1,killer:!0,text:t}),setTimeout(function(){window.location="/forgot-password"},2e3)}))}function englishCountry(){return window.config.country.match(new RegExp(window.config.ads.englishCountries,"i"))&&"en"==(navigator.language||navigator.userLanguage||"en").substr(0,2)}function dachCountry(){return window.config.country.match(new RegExp(window.config.ads.dachCountries,"i"))}function peakCountry(){var e=new Date,t=3600*e.getUTCHours()+60*e.getUTCMinutes()+e.getUTCSeconds();return t>=window.config.features.hls.peakStart&&t<=window.config.features.hls.peakEnd&&window.config.country.match(new RegExp(window.config.features.hls.peakCountries,"i"))}function addLike(e){var t=[];Storages.localStorage.isSet("like")&&(t=Storages.localStorage.get("like")),existsLike(e[0])||t.unshift(e),Storages.localStorage.set("like",t),$(".addLike").hide(),$(".removeLike").show(),$(".addLikeDiv").hide()}function addLikeToFavorite(e){var t=jQuery.Deferred();return existsLikeInFavorites(e[0])?t.resolve():$.post("/api/favorites",{videoId:e[0],views:e[1],rating:e[2],length:e[3]}).then(function(){var i=Storages.sessionStorage.get(Storages.sessionStorage.get("user").id+"_favorites");i.unshift(e),Storages.sessionStorage.set(Storages.sessionStorage.get("user").id+"_favorites",i),t.resolve()},function(){t.reject()}),t.promise()}function existsLike(e){var t=[];Storages.localStorage.isSet("like")&&(t=Storages.localStorage.get("like"));var i=!1;return t.forEach(function(t,s){t[0]==e&&(i=!0)}),i}function existsLikeInFavorites(e){var t=Storages.sessionStorage.get(Storages.sessionStorage.get("user").id+"_favorites"),i=!1;return t.forEach(function(t,s){t[0]==e&&(i=!0)}),i}function removeLikeVideo(e){for(var t=Storages.localStorage.get("like"),i=[],s=0;s<t.length;s++)t[s][0]!=e&&i.push(t[s]);Storages.localStorage.set("like",i),$(".addLike").show(),$(".removeLike").hide()}function submitterSubscriptions(){var e=jQuery.Deferred();return $.when(window.userPromise).then(function(t){t&&t.id?Storages.sessionStorage.isSet("submitterSubscriptions")?e.resolve(Storages.sessionStorage.get("submitterSubscriptions")):$.get("/api/submitterSubscriptions").then(function(t){Storages.sessionStorage.set("submitterSubscriptions",t),e.resolve(t)},function(){Storages.sessionStorage.set("submitterSubscriptions",[]),e.resolve([])}):(Storages.sessionStorage.set("submitterSubscriptions",[]),e.resolve([]))}),e.promise()}function addSubmitterScriptions(e){var t=jQuery.Deferred();return $.when(window.userPromise).then(function(i){i&&i.id&&$.post("/api/submitterSubscriptions",{submitter_id:e}).then(function(){Storages.sessionStorage.remove("submitterSubscriptions"),t.resolve()},function(){t.reject()})}),t.promise()}function removeSubmitterScriptions(e){var t=jQuery.Deferred();return $.when(window.userPromise).then(function(i){i&&i.id&&$.ajax({url:"/api/submitterSubscriptions",method:"DELETE",data:{submitter_id:e}}).then(function(){Storages.sessionStorage.remove("submitterSubscriptions"),t.resolve()},function(){t.reject()})}),t.promise()}function closeMenus(){$(".menu-main").removeClass("open"),$(".menu-filter").removeClass("open"),$(".menu-user").removeClass("open"),$(".menu-search").removeClass("open"),$("body").removeClass("main-hide-scroll"),$("body").removeClass("user-hide-scroll"),$(".profile-lhs").removeClass("open")}function suggestionInsert(e){$(e.target).parents(".search-form").find(".tt-input").val($(e.target).attr("data")).focus().trigger("input"),e.stopPropagation()}window.location.origin.match(new RegExp(atob("eW91aml6ei5jb20="),"i"))||(window.location.hostname=atob("d3d3LnlvdWppenouY29t"));var lastTime=(new Date).getTime(),checkInterval=3e5;setInterval(function(){var e=(new Date).getTime();e>lastTime+2*checkInterval&&window.location.reload(),lastTime=e},checkInterval),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{enumerable:!1,value:function(e){return this.filter(function(t){return t==e}).length>0}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw TypeError('"this" is null or not defined');var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw TypeError("predicate must be a function");for(var s=arguments[1],o=0;o<i;){var r=t[o];if(e.call(s,r,o,t))return r;o++}},configurable:!0,writable:!0}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){e.extend(e.fn,{validate:function(t){if(!this.length)return void(t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var i=e.data(this[0],"validator");return i||(this.attr("novalidate","novalidate"),i=new e.validator(t,this[0]),e.data(this[0],"validator",i),i.settings.onsubmit&&(this.on("click.validate",":submit",function(t){i.settings.submitHandler&&(i.submitButton=t.target),e(this).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==e(this).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.on("submit.validate",function(t){function s(){var s,o;return!i.settings.submitHandler||(i.submitButton&&(s=e("<input type='hidden'/>").attr("name",i.submitButton.name).val(e(i.submitButton).val()).appendTo(i.currentForm)),o=i.settings.submitHandler.call(i,i.currentForm,t),
i.submitButton&&s.remove(),void 0!==o&&o)}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,s()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):s():(i.focusInvalid(),!1)})),i)},valid:function(){var t,i,s;return e(this[0]).is("form")?t=this.validate().form():(s=[],t=!0,i=e(this[0].form).validate(),this.each(function(){(t=i.element(this)&&t)||(s=s.concat(i.errorList))}),i.errorList=s),t},rules:function(t,i){if(this.length){var s,o,r,a,n,l,c=this[0];if(t)switch(s=e.data(c.form,"validator").settings,o=s.rules,r=e.validator.staticRules(c),t){case"add":e.extend(r,e.validator.normalizeRule(i)),delete r.messages,o[c.name]=r,i.messages&&(s.messages[c.name]=e.extend(s.messages[c.name],i.messages));break;case"remove":return i?(l={},e.each(i.split(/\s/),function(t,i){l[i]=r[i],delete r[i],"required"===i&&e(c).removeAttr("aria-required")}),l):(delete o[c.name],r)}return a=e.validator.normalizeRules(e.extend({},e.validator.classRules(c),e.validator.attributeRules(c),e.validator.dataRules(c),e.validator.staticRules(c)),c),a.required&&(n=a.required,delete a.required,a=e.extend({required:n},a),e(c).attr("aria-required","true")),a.remote&&(n=a.remote,delete a.remote,a=e.extend(a,{remote:n})),a}}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){var i=e(t).val();return null!==i&&!!e.trim(""+i)},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,i){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=i,this.init()},e.validator.format=function(t,i){return 1===arguments.length?function(){var i=e.makeArray(arguments);return i.unshift(t),e.validator.format.apply(this,i)}:void 0===i?t:(arguments.length>2&&i.constructor!==Array&&(i=e.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),e.each(i,function(e,i){t=t.replace(new RegExp("\\{"+e+"\\}","g"),function(){return i})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(t,i){var s=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===i.which&&""===this.elementValue(t)||-1!==e.inArray(i.keyCode,s)||(t.name in this.submitted||t.name in this.invalid)&&this.element(t)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,i,s){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(s):e(t).addClass(i).removeClass(s)},unhighlight:function(t,i,s){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(s):e(t).removeClass(i).addClass(s)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}."),step:e.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var i=e.data(this.form,"validator"),s="on"+t.type.replace(/^validate/,""),o=i.settings;o[s]&&!e(this).is(o.ignore)&&o[s].call(i,this,t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i,s=this.groups={};e.each(this.settings.groups,function(t,i){"string"==typeof i&&(i=i.split(/\s/)),e.each(i,function(e,i){s[i]=t})}),i=this.settings.rules,e.each(i,function(t,s){i[t]=e.validator.normalizeRule(s)}),e(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable]",t).on("click.validate","select, option, [type='radio'], [type='checkbox']",t),this.settings.invalidHandler&&e(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler),e(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){var i,s,o=this.clean(t),r=this.validationTargetFor(o),a=this,n=!0;return void 0===r?delete this.invalid[o.name]:(this.prepareElement(r),this.currentElements=e(r),s=this.groups[r.name],s&&e.each(this.groups,function(e,t){t===s&&e!==r.name&&(o=a.validationTargetFor(a.clean(a.findByName(e))))&&o.name in a.invalid&&(a.currentElements.push(o),n=n&&a.check(o))}),i=!1!==this.check(r),n=n&&i,this.invalid[r.name]=!i,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),e(t).attr("aria-invalid",!i)),n},showErrors:function(t){if(t){var i=this;e.extend(this.errorMap,t),this.errorList=e.map(this.errorMap,function(e,t){return{message:e,element:i.findByName(t)[0]}}),this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var t=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(t)},resetElements:function(e){var t;if(this.settings.unhighlight)for(t=0;e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,""),this.findByName(e[t].name).removeClass(this.settings.validClass);else e.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,i=0;for(t in e)e[t]&&i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,i={};return e(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var s=this.name||e(this).attr("name");return!s&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.hasAttribute("contenteditable")&&(this.form=e(this).closest("form")[0]),!(s in i||!t.objectLength(e(this).rules()))&&(i[s]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return e(this.settings.errorElement+"."+t,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([])},reset:function(){this.resetInternals(),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var i,s,o=e(t),r=t.type;return"radio"===r||"checkbox"===r?this.findByName(t.name).filter(":checked").val():"number"===r&&void 0!==t.validity?t.validity.badInput?"NaN":o.val():(i=t.hasAttribute("contenteditable")?o.text():o.val(),"file"===r?"C:\\fakepath\\"===i.substr(0,12)?i.substr(12):(s=i.lastIndexOf("/"),s>=0?i.substr(s+1):(s=i.lastIndexOf("\\"),s>=0?i.substr(s+1):i)):"string"==typeof i?i.replace(/\r/g,""):i)},check:function(t){t=this.validationTargetFor(this.clean(t));var i,s,o,r=e(t).rules(),a=e.map(r,function(e,t){return t}).length,n=!1,l=this.elementValue(t);if("function"==typeof r.normalizer){if("string"!=typeof(l=r.normalizer.call(t,l)))throw new TypeError("The normalizer should return a string value.");delete r.normalizer}for(s in r){o={method:s,parameters:r[s]};try{if("dependency-mismatch"===(i=e.validator.methods[s].call(this,l,t,o.parameters))&&1===a){n=!0;continue}if(n=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!i)return this.formatAndAdd(t,o),!1}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+o.method+"' method.",e),e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+t.id+", check the '"+o.method+"' method."),e}}if(!n)return this.objectLength(r)&&this.successList.push(t),!0},customDataMessage:function(t,i){return e(t).data("msg"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase())||e(t).data("msg")},customMessage:function(e,t){var i=this.settings.messages[e];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(t,i){var s=this.findDefined(this.customMessage(t.name,i.method),this.customDataMessage(t,i.method),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[i.method],"<strong>Warning: No message defined for "+t.name+"</strong>"),o=/\$?\{(\d+)\}/g;return"function"==typeof s?s=s.call(this,i.parameters,t):o.test(s)&&(s=e.validator.format(s.replace(o,"{$1}"),i.parameters)),s},formatAndAdd:function(e,t){var i=this.defaultMessage(e,t);this.errorList.push({message:i,element:e,method:t.method}),this.errorMap[e.name]=i,this.submitted[e.name]=i},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t,i;for(e=0;this.errorList[e];e++)i=this.errorList[e],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var s,o,r,a,n=this.errorsFor(t),l=this.idOrName(t),c=e(t).attr("aria-describedby");n.length?(n.removeClass(this.settings.validClass).addClass(this.settings.errorClass),n.html(i)):(n=e("<"+this.settings.errorElement+">").attr("id",l+"-error").addClass(this.settings.errorClass).html(i||""),s=n,this.settings.wrapper&&(s=n.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(s):this.settings.errorPlacement?this.settings.errorPlacement(s,e(t)):s.insertAfter(t),n.is("label")?n.attr("for",l):0===n.parents("label[for='"+this.escapeCssMeta(l)+"']").length&&(r=n.attr("id"),c?c.match(new RegExp("\\b"+this.escapeCssMeta(r)+"\\b"))||(c+=" "+r):c=r,e(t).attr("aria-describedby",c),(o=this.groups[t.name])&&(a=this,e.each(a.groups,function(t,i){i===o&&e("[name='"+a.escapeCssMeta(t)+"']",a.currentForm).attr("aria-describedby",n.attr("id"))})))),!i&&this.settings.success&&(n.text(""),"string"==typeof this.settings.success?n.addClass(this.settings.success):this.settings.success(n,t)),this.toShow=this.toShow.add(n)},errorsFor:function(t){var i=this.escapeCssMeta(this.idOrName(t)),s=e(t).attr("aria-describedby"),o="label[for='"+i+"'], label[for='"+i+"'] *";return s&&(o=o+", #"+this.escapeCssMeta(s).replace(/\s+/g,", #")),this.errors().filter(o)},escapeCssMeta:function(e){return e.replace(/([\\!"#$%&'()*+,.\/:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),e(t).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+this.escapeCssMeta(t)+"']")},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return e("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(t,i){return!!e(t,i.form).length},function:function(e,t){return e(t)}},optional:function(t){var i=this.elementValue(t);return!e.validator.methods.required.call(this,i,t)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,e(t).addClass(this.settings.pendingClass),this.pending[t.name]=!0)},stopRequest:function(t,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],e(t).removeClass(this.settings.pendingClass),i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t,i){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,{method:i})})},destroy:function(){this.resetForm(),e(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor===String?this.classRuleSettings[t]=i:e.extend(this.classRuleSettings,t)},classRules:function(t){var i={},s=e(t).attr("class");return s&&e.each(s.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(i,e.validator.classRuleSettings[this])}),i},normalizeAttributeRule:function(e,t,i,s){/min|max|step/.test(i)&&(null===t||/number|range|text/.test(t))&&(s=Number(s),isNaN(s)&&(s=void 0)),s||0===s?e[i]=s:t===i&&"range"!==t&&(e[i]=!0)},attributeRules:function(t){var i,s,o={},r=e(t),a=t.getAttribute("type");for(i in e.validator.methods)"required"===i?(s=t.getAttribute(i),""===s&&(s=!0),s=!!s):s=r.attr(i),this.normalizeAttributeRule(o,a,i,s);return o.maxlength&&/-1|2147483647|524288/.test(o.maxlength)&&delete o.maxlength,o},dataRules:function(t){var i,s,o={},r=e(t),a=t.getAttribute("type");for(i in e.validator.methods)s=r.data("rule"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase()),this.normalizeAttributeRule(o,a,i,s);return o},staticRules:function(t){var i={},s=e.data(t.form,"validator");return s.settings.rules&&(i=e.validator.normalizeRule(s.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return e.each(t,function(s,o){if(!1===o)return void delete t[s];if(o.param||o.depends){var r=!0;switch(typeof o.depends){case"string":r=!!e(o.depends,i.form).length;break;case"function":r=o.depends.call(i,i)}r?t[s]=void 0===o.param||o.param:(e.data(i.form,"validator").resetElements(e(i)),delete t[s])}}),e.each(t,function(s,o){t[s]=e.isFunction(o)&&"normalizer"!==s?o(i):o}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){var i;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(i=t[this].replace(/[\[\]]/g,"").split(/[\s,]+/),t[this]=[Number(i[0]),Number(i[1])]))}),e.validator.autoCreateRanges&&(null!=t.min&&null!=t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),null!=t.minlength&&null!=t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var i={};e.each(t.split(/\s/),function(){i[this]=!0}),t=i}return t},addMethod:function(t,i,s){e.validator.methods[t]=i,e.validator.messages[t]=void 0!==s?s:e.validator.messages[t],i.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,i,s){if(!this.depend(s,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var o=e(i).val();return o&&o.length>0}return this.checkable(i)?this.getLength(t,i)>0:t.length>0},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},minlength:function(t,i,s){var o=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||o>=s},maxlength:function(t,i,s){var o=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||s>=o},rangelength:function(t,i,s){var o=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||o>=s[0]&&o<=s[1]},min:function(e,t,i){return this.optional(t)||e>=i},max:function(e,t,i){return this.optional(t)||i>=e},range:function(e,t,i){return this.optional(t)||e>=i[0]&&e<=i[1]},step:function(t,i,s){var o=e(i).attr("type"),r="Step attribute on input type "+o+" is not supported.",a=["text","number","range"],n=new RegExp("\\b"+o+"\\b");if(o&&!n.test(a.join()))throw new Error(r);return this.optional(i)||t%s==0},equalTo:function(t,i,s){var o=e(s);return this.settings.onfocusout&&o.not(".validate-equalTo-blur").length&&o.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){e(i).valid()}),t===o.val()},remote:function(t,i,s,o){if(this.optional(i))return"dependency-mismatch";o="string"==typeof o&&o||"remote";var r,a,n,l=this.previousValue(i,o);return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),l.originalMessage=l.originalMessage||this.settings.messages[i.name][o],this.settings.messages[i.name][o]=l.message,s="string"==typeof s&&{url:s}||s,n=e.param(e.extend({data:t},s.data)),l.old===n?l.valid:(l.old=n,r=this,this.startRequest(i),a={},a[i.name]=t,e.ajax(e.extend(!0,{mode:"abort",port:"validate"+i.name,dataType:"json",data:a,context:r.currentForm,success:function(e){var s,a,n,c=!0===e||"true"===e;r.settings.messages[i.name][o]=l.originalMessage,c?(n=r.formSubmitted,r.resetInternals(),r.toHide=r.errorsFor(i),r.formSubmitted=n,r.successList.push(i),r.invalid[i.name]=!1,r.showErrors()):(s={},a=e||r.defaultMessage(i,{method:o,parameters:t}),s[i.name]=l.message=a,r.invalid[i.name]=!0,r.showErrors(s)),l.valid=c,r.stopRequest(i,c)}},s)),"pending")}}});var t,i={};e.ajaxPrefilter?e.ajaxPrefilter(function(e,t,s){var o=e.port;"abort"===e.mode&&(i[o]&&i[o].abort(),i[o]=s)}):(t=e.ajax,e.ajax=function(s){var o=("mode"in s?s:e.ajaxSettings).mode,r=("port"in s?s:e.ajaxSettings).port;return"abort"===o?(i[r]&&i[r].abort(),i[r]=t.apply(this,arguments),i[r]):t.apply(this,arguments)})}),$.fn.scrollToTop=function(e,t){e=e||100,t=t||300;var i=this;navigator.userAgent.match(/iPhone|iPad|iPod/i)?$(window).bind("touchend touchcancel touchleave",function(s){$(this).scrollTop()>e?i.fadeIn(t):i.fadeOut(t)}):$(window).scroll(function(){$(this).scrollTop()>e?i.fadeIn(t):i.fadeOut(t)}),i.click(function(e){return e.preventDefault(),$("html, body").animate({scrollTop:0},t),!1})},"undefined"==typeof SwJs&&(SwJs={}),void 0===SwJs.Preview&&(SwJs.Preview={running:!1,index:-1,first_thumb:-1,flasher:!1,object_aref:null,object1:null,object_x:0,object_y:0,object_ticks:null,object_frames:null,object_ul:null,basename:null,extension:null,timer_start:null,image:null,timer:null,run_delay:500,preload_index:1,timeout:0,cache:{},preloaded_images:0,bBusy:!1,lineup:!1,ul:-1,Init:function(){if(!this.bBusy){this.bBusy=!0;var e=$("a.frame.image"),t=$(".frame-wrapper"),i=$(".frame-wrapper .rotator li");e.off("mouseenter mouseleave touchstart"),t.off("mouseenter mouseleave"),i.off("mouseenter mouseleave"),e.on("mouseenter mouseleave touchstart",function(e){switch(e.type){case"mouseenter":SwJs.Preview.Stop(),SwJs.Preview.reinitUl(-1),SwJs.Preview.Start_obj(this,e);break;case"mouseleave":SwJs.Preview.Stop();break;case"touchstart":SwJs.Preview.Stop(),SwJs.Preview.Start_obj(this,e)}}),t.on("mouseenter mouseleave touchstart",function(e){switch(e.type){case"mouseenter":$(this).find(".rotator").css("visibility","visible");break;case"mouseleave":$(this).find(".rotator").css("visibility","hidden");break;case"touchstart":$(".frame-wrapper .rotator").css("visibility","hidden"),$(this).find(".rotator").css("visibility","visible")}}),i.on("mouseenter mouseleave",function(e){switch(e.type){case"mouseenter":SwJs.Preview.Stop(),SwJs.Preview.reinitUl($(this).attr("data-rang")),SwJs.Preview.Start_obj($(this).closest(".frame-wrapper").find("a.frame").get(0),e);break;case"mouseleave":SwJs.Preview.reinitUl(-1),SwJs.Preview.Stop()}}),this.bBusy=!1}},reinitUl:function(e){this.ul=e},Start_obj:function(e,t){this.object_aref=e;var i=this.object_aref.getElementsByTagName("img");this.object_ul=this.object_aref.parentNode.getElementsByTagName("ul")[0];var s=i[0].getAttribute("data-original");s||(s=i[0].src);var o=s.lastIndexOf("-");if(!(o<0)){o++,this.basename=s.substring(0,o);var r=s.lastIndexOf(".");this.extension=s.substring(r);var a=i[0].getAttribute("data-lineup");if(a&&(this.lineup=a.split(",")),1==i.length){this.first_thumb=parseInt(s.substring(o,o+1)),(this.first_thumb<0||isNaN(this.first_thumb))&&(this.first_thumb=1),this.index=this.first_thumb-1,this.object1=i[0],this.object_frames=new Array,this.object_frames[this.first_thumb-1]=this.object1;for(var n=0;n<=7;n++)if(n!=this.index){var l=document.createElement("img");l.className="img-responsive",l.style.display="none",this.object_aref.appendChild(l),this.object_frames[n]=l}this.cache[this.basename]={object_frames:this.object_frames,first_thumb:this.first_thumb},this.preload_index=this.index+1,this.preloaded_images=0;var c=this;setTimeout(function(){c.PreloadImage()},5)}else{var d=this.cache[this.basename];d&&(this.object_frames=d.object_frames,this.first_thumb=d.first_thumb,-1==this.ul?this.index=this.first_thumb-1:(window.config.app.debug&&console.log("UL loading"),this.index=this.ul))}this.object_ticks=this.object_aref.parentNode.getElementsByTagName("li");for(var u=0;u<this.object_ticks.length;u++)this.object_ticks[u].className="";this.object_ticks[this.index]&&(this.object_ticks[this.index].className="active"),this.timeout=0,this.running=!1,this.Track(e,t)}},PreloadImage:function(){try{var e=this;if(this.preloaded_images<8){this.preloaded_images++;var t=this.preload_index;++this.preload_index>7&&(this.preload_index=0),t>=0&&t<=7&&""==this.object_frames[t].src?(this.lineup?this.object_frames[t].src=this.lineup[t]:this.object_frames[t].src=this.basename+(t+1)+this.extension,setTimeout(function(){e.PreloadImage()},50)):e.PreloadImage()}}catch(e){alert("Run error: "+e)}},Run:function(){try{if(null==this.object1)return;if(this.image=this.object_frames[this.index],""==this.image.src&&(this.lineup?this.image.src=this.lineup[idx]:this.image.src=this.basename+(this.index+1)+this.extension),this.timer_start=(new Date).getTime(),this.running){null!=this.timer&&clearTimeout(this.timer);var e=this;this.timer=setTimeout(function(){e.RunImage()},this.timeout),this.timeout=this.run_delay}else this.timer=null,this.RunImage()}catch(e){}},RunImage:function(){try{if(null==this.object1)return;if(!this.image.complete){if(!this.running){this.flasher=!this.flasher;for(var e=0;e<8;e++)this.flasher&&this.index==e?this.object_ticks[e].className="active":this.object_ticks[e].className=""}null!=this.timer&&clearTimeout(this.timer);var t=this;return void(-1==this.ul&&(this.timer=setTimeout(function(){t.RunImage()},20)))}if(0==this.image.width)return void this.Stop();if(this.Activate(),!this.running)return;-1==this.ul&&++this.index>7&&(this.index=0),null!=this.timer&&-1==this.ul&&clearTimeout(this.timer),t=this,-1==this.ul&&(this.timer=setTimeout(function(){t.Run()},0))}catch(e){}},Activate:function(){try{for(k1=0;k1<this.object_ticks.length;k1++)this.index==k1?(this.object_ticks[k1].className="active",this.object_frames[k1].style.display="block"):(this.object_ticks[k1].className="",this.object_frames[k1].style.display="none")}catch(e){}},Track:function(e,t){try{if(this.object_aref!=e)return;this.running||(this.running=!0,this.Run())}catch(e){alert("Track error: "+e)}},Stop:function(){null!=this.object1&&(null!=this.timer&&(clearTimeout(this.timer),this.timer=null),this.object_aref=null,this.index=this.first_thumb-1,this.running=!1,this.Activate())}}),window.thLoc=encodeURI($("meta[name='keywords']").attr("content").replace(/,/g,"+")),$(function(){loadDesktopAds(),loadMobileAds(),$(window).on("resize",function(){!window.desktopAdsLoaded&&$(window).width()>=992&&(window.desktopAdsLoaded=!0,loadDesktopAdsNormal()),!window.mobileAdsLoaded&&$(window).width()<=991&&(window.mobileAdsLoaded=!0,loadMobileAdsNormal())})}),Date.prettyDate=function(e,t){e=new Date(e),t=t?new Date(t):new Date;var i=Math.floor((t.getTime()-e.getTime())/1e3);return i<60?"just now":i<3600?Math.floor(i/60)+" min(s) ago":i<86400?Math.floor(i/3600)+" hour(s) ago":i<604800?Math.floor(i/86400)+" day(s) ago":i<2678400?Math.floor(i/604800)+" week(s) ago":i<31536e3?Math.floor(i/2678400)+" month(s) ago":i>=31536e3?Math.floor(i/31536e3)+" year(s) ago":e.toDateString()},Object.defineProperty(navigator,"browser",{get:function(){var e=[["firefox",/Firefox\/([0-9.]+)(?:\s|$)/],["opera",/Opera\/([0-9.]+)(?:\s|$)/],["opera",/OPR\/([0-9.]+)(:?\s|$)$/],["yandex",/YaBrowser\/([0-9._]+)/],["uc",/UCBrowser\/([0-9._]+)/],["chrome",/CriOS\/([0-9.]+)(:?\s|$)/],["edge",/Edge?\/([0-9._]+)/],["ie",/Trident\/7\.0.*rv:([0-9.]+)\).*Gecko$/],["ie",/MSIE\s([0-9.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["chrome",/Chrom(?:e|ium)\/([0-9.]+)(:?\s|$)/],["safari",/Version\/([0-9._]+).*Safari/],["bb10",/BB10;\sTouch.*Version\/([0-9.]+)/]],t=!this.userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile|WebOS|Windows Phone/i),i=this.userAgent.match(/Android/i),s=this.userAgent.match(/iPhone|iPad|iPod/i);for(var o in e){var r=e[o];if(r[1].test(this.userAgent)){var a=r[1].exec(this.userAgent),n=a&&a[1].split(/[._]/).slice(0,3),l=Array.prototype.slice.call(n,1).join("")||"0";return n&&n.length<3&&Array.prototype.push.apply(n,1===n.length?[0,0]:[0]),{name:r[0],version:n.join("."),versionNumber:parseFloat(n[0]+"."+l),isDesktop:t,isAndroid:i,isIos:s}}}return{name:"other",version:"1.0",versionNumber:1,isDesktop:t,isAndroid:i,isIos:s}}}),$.fn.formatViews=function(){return this.each(function(){var e=$(this);e.hasClass("formated-views")||(e.addClass("formated-views"),e.text(formatViews(Number(e.text()))))})},$.fn.prettyDate=function(){return this.each(function(){var e=$(this);e.hasClass("pretified-date")||(e.addClass("pretified-date"),e.text(Date.prettyDate(e.text())))})};var sessionStorage_transfer=function(e){if(e||(e=window.event),e.newValue)if("getSessionStorage"==e.key)localStorage.setItem("sessionStorage",JSON.stringify(sessionStorage)),localStorage.removeItem("sessionStorage");else if("sessionStorage"==e.key&&!sessionStorage.length){var t=JSON.parse(e.newValue);for(var i in t)sessionStorage.setItem(i,t[i])}},lastVideo,lastTouch,translations={loginRequired:"You need to login",alreadyRated:"You have already rated this video"},preloadedImages=[],preloadedVideos={};jQuery.fn.putCursorAtEnd=function(){return this.each(function(){var e=$(this),t=this;if(e.is(":focus")||e.focus(),t.setSelectionRange){var i=2*e.val().length;setTimeout(function(){t.setSelectionRange(i,i)},1)}else e.val(e.val());this.scrollTop=999999})},function(){if(window.localCookieStorage&&window.localCookieStorage.setPath&&window.localCookieStorage.setPath("/"),window.sessionCookieStorage&&window.sessionCookieStorage.setPath&&window.sessionCookieStorage.setPath("/"),window.addEventListener?window.addEventListener("storage",sessionStorage_transfer,!1):window.attachEvent("onstorage",sessionStorage_transfer),checkCookie()&&!sessionStorage.length)try{localStorage.setItem("getSessionStorage","trigger"),localStorage.removeItem("getSessionStorage","trigger")}catch(e){window.config.app.debug&&console.log(e.message)}Storages.cookieStorage.setPath("/");var e=window.location.pathname;0!==e.length&&"/"!==e||checkCookie()&&Storages.cookieStorage.get("yjFilter")&&Storages.cookieStorage.get("yjFilter")!==getParameterByName("filter","straight")&&(window.location="/?filter="+Storages.cookieStorage.get("yjFilter")),$("span.format-views").formatViews(),$("span.pretty-date").prettyDate(),window.userPromise=checkUser(),window.profilePromise=checkProfile(),window.favoritesPromise=checkFavorites(),window.canAutoplayPromise=checkCanAutoplay(),$(".desktop-homepage li."+(Storages.cookieStorage.get("yjHomepage")?Storages.cookieStorage.get("yjHomepage"):"popular")).addClass("selected"),$(".desktop-filters li."+(Storages.cookieStorage.get("yjFilter")?Storages.cookieStorage.get("yjFilter"):"straight")).addClass("selected"),$(".menu-user li."+(Storages.cookieStorage.get("yjHomepage")?Storages.cookieStorage.get("yjHomepage"):"popular")).addClass("selected"),$(".menu-filter li."+(Storages.cookieStorage.get("yjFilter")?Storages.cookieStorage.get("yjFilter"):"straight")).addClass("selected"),Storages.sessionStorage.isSet("yj_hd")||Storages.sessionStorage.set("yj_hd",window.config.features.searchHD),
void 0!==SwJs.Preview&&SwJs.Preview.Init(),$("img.lazy").lazyload(),$("img[default-src]").on("error",function(){$(this).attr("src",$(this).attr("default-src"))}),$(window).on("resize",adjustHeightInMultiples),$.when(window.userPromise).then(function(e){e&&e.id?($(".hide-user").hide(),$(".hide-user-block").hide(),$(".hide-guest").css("display","inline-block"),$(".hide-guest-block").css("display","block"),$(".user-info").show(),$(".loading").hide(),$(".guest-info").hide(),$(".user-info .user-name").text(e.name),window.config.features.notifications&&(Storages.sessionStorage.isSet("yj-notify")&&Storages.sessionStorage.get("yj-notify")&&($(".notifications-on").show(),$(".notifications-count").html(Storages.sessionStorage.get("yj-notify")),$(".notifications-off").hide()),setInterval(function(){$.get("/api/pushNotifications").then(function(e){e.length>0&&(Storages.sessionStorage.set("yj-notify",e.length),$(".notifications-on").show(),$(".notifications-count").html(Storages.sessionStorage.get("yj-notify")),$(".notifications-off").hide())},function(e){window.config.app.debug&&console.log("Error",e)})},1e3*window.config.features.notificationPolling)),Storages.cookieStorage.get("yj-sessionVideos")||(["recent","views","rating","length"].forEach(function(e){Storages.sessionStorage.remove(Storages.sessionStorage.get("user").id+"_socialVideos_"+e),Storages.sessionStorage.remove(Storages.sessionStorage.get("user").id+"_userVideos_"+e)}),Storages.cookieStorage.setExpires(1/48).set("yj-sessionVideos",!0))):($(".hide-guest").hide(),$(".hide-guest-block").hide(),$(".hide-user").css("display","inline-block"),$(".hide-user-block").css("display","block"),$(".user-info").hide(),$(".loading").hide(),$(".guest-info").show())}),$(document).on("change",".jump-mobile",function(){var e=$(this).val(),t=$(this).attr("data-url"),i=t.replace("page.html",e+".html");window.location=i}),$("a#adTowerClose").on("click",function(e){if(e.preventDefault(),$("div.left-content,div.left-content .margin-right,div.contentRight").addClass("adTowerClosed"),!0===window.config.ads.adTowerClose)document.cookie="adTower=closed; path=/";else{var t=new Date;t.setTime(t.getTime()+3600*window.config.ads.adTowerClose*1e3),document.cookie="adTower=closed; expires="+t.toUTCString()+"; path=/"}}),Storages.localStorage.get("yj-auto-play")&&($(".autoPlaySwitch").html("ON"),$(".autoPlaySwitch").attr("title","Turn OFF")),$(".autoPlaySwitch").on("click",function(){Storages.localStorage.get("yj-auto-play")?($(this).html("OFF"),$(this).attr("title","Turn ON"),Storages.localStorage.set("yj-auto-play",!1)):($(this).html("ON"),$(this).attr("title","Turn OFF"),Storages.localStorage.set("yj-auto-play",!0))})}(),$(function(){$(".progress").hide(),$(".progress").css("opacity","1"),adjustHeightInMultiples(),window.config.features.showMore&&($("div.xxs-xs-only.more").is(":visible")&&$("div.xxs-xs-only.more").nextAll().hide(),$(".xxs-xs-only.more button").click(function(){$(".xxs-xs-only.more").nextAll("div").show(),$(".xxs-xs-only.more").hide(),loadMobileAds(),loadXxsXsAds()})),window.config.features.videoPreviews&&setupVideoPreviews();var e=document.getElementById("countrySwitch"),t=$(".countrySwitchBtn"),i=document.getElementsByClassName("close")[0];t.on("click",function(){e.style.display="block"}),i.onclick=function(){e.style.display="none"},window.onclick=function(t){t.target==e&&(e.style.display="none")},$(".more-categories").on("click",function(){$(".footer-menu-links").css({overflow:"visible",height:"auto"}),$(".more-categories").hide(),$(".less-categories").show()}),$(".less-categories").on("click",function(){$(".footer-menu-links").css({overflow:"hidden",height:"30px"}),$(".more-categories").show(),$(".less-categories").hide()});var s=0,o=$(".mobile-header");$(document).on("scroll",function(){var e=$(this).scrollTop();e>100&&e>s+4?o.addClass("mobile-header-hidden"):(e<5||e<s-4)&&o.removeClass("mobile-header-hidden"),s=e}),$(".related-thumb").on("click",function(){Storages.sessionStorage.set("relatedCount",parseInt(Storages.sessionStorage.get("relatedCount")||0)+1)}),window.config.app.admin&&$("a.admin-only").css("display","inline")}),function(){var e=parseInt($("#checkVideoFavorite").attr("data-video-id")||"0"),t=parseInt($("#checkVideoFavorite").attr("data-views")||"0"),i=parseFloat($("#checkVideoFavorite").attr("data-rating")||"0"),s=parseInt($("#checkVideoFavorite").attr("data-length")||"0");i=i||5;var o;$.when(window.favoritesPromise).then(function(t){o=t||[],t&&t.find&&t.find(function(t){return t[0]==e})?$(".userAddFavorite").hide():$(".userGotoFavorites").hide()}),$(".userAddFavorite").click(function(){var r=this;$(r).addClass("off"),$.post("/api/favorites",{videoId:e,views:t,rating:i,length:s}).then(function(){$(r).hide(),$(".userGotoFavorites").css("display","inline-block"),o.unshift([e,t,i,s]),Storages.sessionStorage.set(Storages.sessionStorage.get("user").id+"_favorites",o),noty({layout:"bottom",type:"success",timeout:5e3,killer:!0,text:window.i18next.t("commonjs.favorites.addedError")})},function(e){$(r).removeClass("off"),noty({layout:"bottom",type:"error",timeout:5e3,maxVisible:1,killer:!0,text:window.i18next.t("commonjs.favorites.notaddError")}),window.config.app.debug&&console.log("Error adding fav:",e)})})}();var videoPreview=[parseInt($("#checkVideoFavorite").attr("data-video-id")||"0"),parseInt($("#checkVideoFavorite").attr("data-views")||"0"),parseFloat($("#checkVideoFavorite").attr("data-rating")||"5"),parseInt($("#checkVideoFavorite").attr("data-length")||"0")];$(function(){window.config.features.like&&($.when(window.userPromise).then(function(e){e&&e.id?($(".addLikeDiv").hide(),$(".open-menu-like").attr("href","/profile/my/favorites")):existsLike(videoPreview[0])?($(".addLike").hide(),$(".removeLike").show()):($(".addLike").show(),$(".removeLike").hide(),$(".addLikeDiv").show())}),$(".addLike").click(function(){addLike(videoPreview),noty({layout:"bottom",type:"success",timeout:5e3,maxVisible:1,killer:!0,text:window.i18next.t("commonjs.like.addedlikeError")})}),$(".removeLike").click(function(){removeLikeVideo(videoPreview[0]),noty({layout:"bottom",type:"success",timeout:5e3,maxVisible:1,killer:!0,text:window.i18next.t("commonjs.like.removedlikeError")})}))});var subscriptions_count,subscribeState=null;!function(){window.config.features.submitterSubscriptions&&submitterSubscriptions().then(function(e){var t=$(".submitterSubscribe"),i=t.attr("data-submitter-id"),s=Storages.sessionStorage.get("user")?Storages.sessionStorage.get("user").id:null;if(subscriptions_count=parseInt(t.attr("data-subscriptions-count")||0),t.html(integerHint(subscriptions_count)+" subscribers"),s&&i&&i!=s){e.find(function(e){return e.submitter_id==i})?(t.attr("title","Unsubscribe"),t.html(integerHint(subscriptions_count)+' subscribers&nbsp;<i class="fa fa-rss" aria-hidden="true"></i>'),subscribeState="unsubscribe"):(t.attr("title","Subscribe"),subscribeState="subscribe")}else s||(t.attr("title","Login"),subscribeState="login");t.on("click",function(){switch(subscribeState){case"subscribe":subscriptions_count+=1,t.attr("title","Unsubscibe"),t.html(integerHint(subscriptions_count)+' subscribers&nbsp;<i class="fa fa-rss" aria-hidden="true"></i>'),subscribeState=null,addSubmitterScriptions(i).then(function(){subscribeState="unsubscribe",noty({layout:"bottom",type:"success",timeout:5e3,maxVisible:1,killer:!0,text:"Subscribed successfully"}),submitterSubscriptions()},function(){noty({layout:"bottom",type:"error",timeout:5e3,maxVisible:1,killer:!0,text:"Could not subscribe at this time"})});break;case"unsubscribe":subscriptions_count-=1,t.attr("title","Subscibe"),t.html(integerHint(subscriptions_count)+" subscribers"),subscribeState=null,removeSubmitterScriptions(i).then(function(){subscribeState="subscribe",noty({layout:"bottom",type:"success",timeout:5e3,maxVisible:1,killer:!0,text:"Unsubscribed successfully"}),submitterSubscriptions()},function(){noty({layout:"bottom",type:"error",timeout:5e3,maxVisible:1,killer:!0,text:"Could not unsubscribe at this time"})});break;case"login":window.location.href="/login"}})})}(),function(){function e(e,t,i){$.ajax({method:"POST",url:"/api/rating/"+e.data("id"),data:{vote:i,userid:t&&t.id?t.id:null,units:5}}).then(function(s){var o=s.rating_info.total_votes?parseFloat(s.rating_info.total_value/s.rating_info.total_votes).toFixed(2):i;e.barrating("clear"),$(".rating-value").text(o),$(".rating-total-votes").text(s.rating_info.total_votes+" cast"),e.attr("data-value",parseFloat(o)),e.barrating("set",parseFloat(o));var r=Storages.localStorage.isSet((t&&t.id?t.id:"")+"_rated_ids")?Storages.localStorage.get((t&&t.id?t.id:"")+"_rated_ids"):[];r.push(e.data("id")),Storages.localStorage.set((t&&t.id?t.id:"")+"_rated_ids",r),noty({layout:"bottom",type:"success",timeout:5e3,maxVisible:1,killer:!0,text:window.i18next.t("commonjs.ratings.ratingError")})},function(e){window.config.app.debug&&console.log("Fail",e)})}$.when(window.userPromise).then(function(t){var i=$("select.video-bar-rating");i.barrating({theme:"fontawesome-stars-o",initialRating:i.data("value"),fastClicks:!0,silent:!0,onSelect:function(s){if(Storages.localStorage.isSet((t&&t.id?t.id:"")+"_rated_ids")&&Storages.localStorage.get((t&&t.id?t.id:"")+"_rated_ids").indexOf(i.data("id"))>=0)noty({layout:"bottom",type:"error",timeout:5e3,maxVisible:1,killer:!0,text:window.i18next.t("commonjs.ratings.alreadyratedError")}),window.config.app.debug&&console.log("Rated video ids",Storages.localStorage.get((t&&t.id?t.id:"")+"_rated_ids"));else{var o=this.$elem;window.config.features.ratingCaptchaSkip>=0&&window.config.features.ratingCaptchaSkip<=parseInt(Storages.sessionStorage.get("yj-ratingCaptchaSkipped")||0)?(o.parent().parent().find("div.checkbox").show(),o.parent().parent().find("input").on("change",function(){this.checked&&(this.checked=!1,Storages.sessionStorage.set("yj-ratingCaptchaSkipped",0),o.parent().parent().find("div.checkbox").hide(),e(o,t,s))})):(Storages.sessionStorage.set("yj-ratingCaptchaSkipped",parseInt(Storages.sessionStorage.get("yj-ratingCaptchaSkipped")||0)+1),e(o,t,s))}}}),$(i).css("visibility","visible"),$("select.video-bar-rating-view").each(function(e){$(this).css("visibility","visible"),$(this).barrating({theme:"fontawesome-stars-o",initialRating:$(this).data("value"),readonly:!0})})})}(),function(){$(".menu-user-menu #thumb-large").on("click",function(){Storages.cookieStorage.setExpires(365).set("xs-thumbs","large"),$(".menu-user-menu #thumb-large").parent().addClass("selected"),$(".menu-user-menu #thumb-small").parent().removeClass("selected"),$("body").addClass("video-thumb-large"),closeMenus()}),$(".menu-user-menu #thumb-small").on("click",function(){Storages.cookieStorage.setExpires(365).set("xs-thumbs","small"),$(".menu-user-menu #thumb-small").parent().addClass("selected"),$(".menu-user-menu #thumb-large").parent().removeClass("selected"),$("body").removeClass("video-thumb-large"),closeMenus()}),"zh-CN"==Storages.localStorage.get("i18nextLng")?($(".menu-user-menu .lang-ch").parent().addClass("selected"),$(".menu-user-menu .lang-en").parent().removeClass("selected")):($(".menu-user-menu .lang-en").parent().addClass("selected"),$(".menu-user-menu .lang-ch").parent().removeClass("selected")),$(document).click(function(e){if($(e.target).hasClass("open-menu-main"))return void($(".menu-main").hasClass("open")?closeMenus():(closeMenus(),$(".menu-main").addClass("open")));if(!$(e.target).hasClass("menu-main")&&!$(e.target).parents(".menu-main").length){if($(e.target).hasClass("open-menu-filter"))return void($(".menu-filter").hasClass("open")?closeMenus():(closeMenus(),$(".menu-filter").addClass("open")));if(!$(e.target).hasClass("menu-filter")&&!$(e.target).parents(".menu-filter").length){if($(e.target).hasClass("open-menu-user"))return void($(".menu-user").hasClass("open")?closeMenus():(closeMenus(),$(".menu-user").addClass("open")));if(!$(e.target).hasClass("menu-user")&&!$(e.target).parents(".menu-user").length){if($(e.target).hasClass("open-menu-search"))return void($(".menu-search").hasClass("open")?closeMenus():(closeMenus(),$(".menu-search").addClass("open"),$(".menu-search .search-form .tt-input").putCursorAtEnd().focus()));if(!$(e.target).hasClass("menu-search")&&!$(e.target).parents(".menu-search").length)return $(e.target).hasClass("profile-open")||$(e.target).parents(".profile-open").length?(closeMenus(),void $(".profile-lhs").addClass("open")):void closeMenus()}}}}),$(".menu-main-wrapper li:has(ul)").click(function(){$("ul",this).toggle("slow"),$(".menu-main-wrapper i.fa").toggleClass("open")})}(),function(){function e(e){var t=window.config.app.bannedWords.split("|").map(function(e){return"\\b"+e+"\\b"}).filter(function(e){return e.length}).join("|");return e.replace(new RegExp(t,"ig"),"")}function t(e){$(e).val().length?$(".search-form .cancel").show():$(".search-form .cancel").hide()}var i=$(".search-form");i.on("submit",function(t){$(this).find("input[name='q']").val()&&(window.location="/search/"+e($(this).find("input[name='q']").val()).replace(/[\W_]+/g,"-")+"-1.html?"+(Storages.cookieStorage.get("yjFilter")&&"straight"!=Storages.cookieStorage.get("yjFilter")?"filter="+Storages.cookieStorage.get("yjFilter")+"&":"")+(window.config.features.searchHD&&Storages.sessionStorage.get("yj_hd")?"hd=1&":"")),t.preventDefault()}),i.find("input[name='q']").typeahead({hint:!1,highlight:!0,minLength:2},{name:"words",limit:1/0,source:function(e,t,i){$.get("/searchWords",{q:e.toLowerCase()},function(e){i(e)})},templates:{suggestion:function(e){return"<div><span class='suggestion-text'>"+e+"</span><i class='suggestion-insert fa fa-rotate-45 fa-arrow-left pull-right' data='"+e+"' onclick='suggestionInsert(event);'></i></div>"}}}),i.find("input[name='q']").bind("typeahead:select",function(t,i){window.location="/search/"+e(i).replace(/[\W_]+/g,"-")+"-1.html?"+(Storages.cookieStorage.get("yjFilter")&&"straight"!=Storages.cookieStorage.get("yjFilter")?"filter="+Storages.cookieStorage.get("yjFilter")+"&":"")+(window.config.features.searchHD&&Storages.sessionStorage.get("yj_hd")?"hd=1&":""),t.preventDefault()}),i.find("input[name='q']").bind("typeahead:beforeopen",function(){return $(this).attr("data-last")!=$(this).val()}),t($(".search-form .tt-input").eq(0)),$(".search-form .tt-input").on("input",function(){t(this)}),$(".search-form .cancel").on("click",function(){$(this).parents(".search-form").find(".tt-input").val("").focus().trigger("input")}),$(window).width()>=992&&$(".header .search-form .tt-input").putCursorAtEnd().focus(),window.config.features.searchHD&&($("input[type='checkbox'][name='hd']").prop("checked",!!Storages.sessionStorage.get("yj_hd")),$("input[type='checkbox'][name='hd']").on("change",function(e){Storages.sessionStorage.set("yj_hd",e.target.checked),$("input[type='checkbox'][name='hd']").prop("checked",e.target.checked)}))}(),function(){function e(e){var t=String(e).match(/_(.*)$/);return t&&t.length&&t.length>=2?t[1]:null}function t(e){var t=String(e).match(/(.*)_.*$/);return t&&t.length&&t.length>=2?t[1]:e}function i(e){var t="Something went wrong, comment action cannot be performed at this time";if(408==e.status)t=window.i18next.t("commonjs.comments.pleasewaitforfewsecs");else if(429==e.status)t=window.i18next.t("commonjs.comments.toomanyrequests");else if(413==e.status)t=window.i18next.t("commonjs.comments.commentistoolong");else if(400==e.status)t=window.i18next.t("commonjs.comments.messagecontainsspam");else if(401==e.status)return!1;return noty({layout:"bottom",type:"error",timeout:5e3,maxVisible:1,killer:!0,text:t}),!0}function s(t,i,s){var o=[];return s.forEach(function(s){s.comment==t&&s.replyid==i.record_num&&o.push(s.userid||e(s.name))}),o}function o(e){var t=jQuery.Deferred();return $.get("/api/comments/"+e).then(function(e){var i=[];e.forEach(function(e){(!e.replyid||"like"!=e.comment&&"dislike"!=e.comment)&&i.push(e)}),i.forEach(function(t){t.actions={like:s("like",t,e),dislike:s("dislike",t,e)}}),t.resolve(i)},function(e){t.reject(e)}),t.promise()}function r(){var i=[],s="";if(g&&g.length){$(".show-comments").find("span.count").html("("+g.length+")"),s='<div class="row"><div class="col-md-6"><h5>'+window.i18next.t("video.description.comments")+" ("+g.length+')</h5></div><div class="col-md-6 text-right"><label>SORT: </label><ul class="breadcrumb"><li class="'+("recent"==f?"selected":"")+'"><a href="#" data-order="recent">New</a></li><li class="'+("likes"==f?"selected":"")+'"><a href="#" data-order="likes">Top</a></li><li class="'+("old"==f?"selected":"")+'"><a href="#" data-order="old">OLD</a></li><li class="'+("dislikes"==f?"selected":"")+'"><a href="#" data-order="dislikes">WORST</a></li></ul></div></div>',p<h&&(p=h),p>g.length&&(p=g.length);for(var o=0;o<p;o++){var r=g[o];-1==i.indexOf(r.userid)&&r.userid>0&&i.push(r.userid);var a=!1;a=Storages.sessionStorage.get("user").id?window.config.app.admin||Storages.sessionStorage.get("user").id==r.userid:Storages.cookieStorage.get("sessionId")==e(r.name),s+='<div class="row comment"><div class="col-xs-3 col-sm-2">',r.userid&&"Anonymous"!=r.name?s+='<img class="img-responsive avatar" src="'+window.config.api.url+"/avatar/"+r.userid+'" default-src="/app/images/avatar/'+(3==r.gender?"o":2==r.gender?"f":"m")+parseInt(r.userid)%10+'.jpeg" data-userid="'+r.userid+'" /></div><div class="col-xs-9 col-sm-10"><a href="/profile/user/'+r.userid+'"><label>'+htmlspecialchars(r.name)+"</label></a>":s+='<img class="img-responsive avatar" src="/app/images/user_smallicon.png" /></div><div class="col-xs-9 col-sm-10"><label>'+htmlspecialchars("Guest"==t(r.name)?r.name:t(r.name))+"</label>";var n=urldecode(htmlspecialchars(r.comment.toString())).replace("\n","<br/>");r.urls&&r.urls.length&&r.urls.forEach(function(e){n=n.replace(/\[url\]/,e)}),n.replace(/\[url\]/g,""),n=emojione.shortnameToImage(n),s+='&nbsp;<span class="tiny-font">'+Date.prettyDate(1e3*r.timestamp)+"</span><div>"+n,a&&(s+="&nbsp;(&nbsp;<span class='comment-delete'><button data-id='"+r.record_num+"' title='remove comment' alt='remove comment' class='action fa fa-trash'></button></span>&nbsp;)"),s+="</div><div>",s+='<span class="comment-like"><button class="action fa fa-thumbs-up'+(c("like",r)?" selected":"")+'" data-id="'+r.record_num+'"></button>&nbsp;<span class="count">'+r.actions.like.length+'</span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment-dislike"><button class="action fa fa-thumbs-down'+(c("dislike",r)?" selected":"")+'" data-id="'+r.record_num+'"></button>&nbsp;<span class="count">'+r.actions.dislike.length+"</span>&nbsp;&nbsp;&nbsp;&nbsp;</span>",s+="</div>",s+="</div></div></div>"}g.length>p&&(s+='<div class="padding-top text-center"><button class="yj-btn comments-more">Load more</button>&nbsp;<button class="yj-btn comments-all">Load all</button></div>')}else o||($(".show-comments").find("span.count").html(""),s="<h5>"+window.i18next.t("video.comments.nocomments")+"</h5>");return s}function a(){$("#comments .list").html(r()),$("img[default-src]").on("error",function(){$(this).attr("src",$(this).attr("default-src"))}),$(".comments-more").off("click"),$(".comments-more").on("click",function(){$(this).hide(),$(this).next().hide(),p+=h,a()}),$(".comments-all").one("click",function(){$(this).hide(),$(this).prev().hide(),p=g.length,a()}),$(".comment-like .action").one("click",function(e){d("like",this)}),$(".comment-dislike .action").one("click",function(e){d("dislike",this)}),$(".comment-delete .action").one("click",function(e){n(this)}),$("#comments .breadcrumb a").on("click",function(e){f=$(e.target).attr("data-order"),"likes"==f?g.sort(function(e,t){return(t.actions.like.length||0)-(e.actions.like.length||0)}):"dislikes"==f?g.sort(function(e,t){return(t.actions.dislike.length||0)-(e.actions.dislike.length||0)}):"old"==f?g.sort(function(e,t){return e.record_num-t.record_num}):g.sort(function(e,t){return t.record_num-e.record_num}),a(),e.preventDefault()})}function n(e){var t=$(e).attr("data-id");g=g.filter(function(e){return e.record_num!=t}),a(),$.ajax({url:"/api/comments/"+$("#comments").attr("data-videoid"),type:"DELETE",data:{commentId:t}}).then(function(){},function(e){i(e),u()})}function l(t){function s(){$.post("/api/comments/"+$("#comments").attr("data-videoid"),{token:btoa(Storages.cookieStorage.get("commentPhrase")),comment:o,name:n&&n.checked?"Anonymous":Storages.localStorage.get("guestName")||"Guest",replyid:null}).then(function(e){g.unshift(Object.assign({actions:{like:[],dislike:[]}},e)),$("#commentName").val(""),window.config.features.commentEmojis?$("#commentTextarea")[0].emojioneArea.setText(""):$("#commentTextarea").val(""),l.removeAttr("disabled"),a()},function(e){i(e)||401!=e.status||s(),l.removeAttr("disabled")})}var o=$("#commentTextarea").val().trim();if(window.config.features.commentName&&!Storages.sessionStorage.get("user").id){var r=$("#commentName").val().trim();r&&(Storages.localStorage.set("guestName",r),$("#comments .user .comment-name").html(r))}if(o)if(g.length&&(Storages.sessionStorage.get("user").id&&Storages.sessionStorage.get("user").id==g[0].userid||!Storages.sessionStorage.get("user").id&&Storages.cookieStorage.get("sessionId")==e(g[0].name))&&g[0].comment==o)noty({layout:"bottom",type:"error",timeout:5e3,maxVisible:1,killer:!0,text:window.i18next.t("commonjs.comments.duplicateError")});else{var n=document.getElementById("anonymousChecked"),l=$("#comments .comment-submit");l.attr("disabled","disabled"),s()}else noty({layout:"bottom",type:"error",timeout:5e3,maxVisible:1,killer:!0,text:window.i18next.t("commonjs.comments.emptyError")})}function c(e,t){return Storages.sessionStorage.get("user").id?t.actions[e].includes(parseInt(Storages.sessionStorage.get("user").id||0)):t.actions[e].includes(Storages.cookieStorage.get("sessionId"))}function d(t,s){var o="like"==t?"dislike":"like",r=g.find(function(e){return e.record_num==$(s).attr("data-id")});if(Storages.sessionStorage.get("user").id&&Storages.sessionStorage.get("user").id==r.userid||!Storages.sessionStorage.get("user").id&&Storages.cookieStorage.get("sessionId")==e(r.name))return noty({layout:"bottom",type:"error",timeout:5e3,maxVisible:1,killer:!0,text:"You cannot perform this action on your own comments"}),!1;c(o,r)&&(r.actions[o]=r.actions[o].filter(function(e){return!(Storages.sessionStorage.get("user").id&&Storages.sessionStorage.get("user").id==e||!Storages.sessionStorage.get("user").id&&Storages.cookieStorage.get("sessionId")==e)}),$(s).parent().parent().find(".comment-"+o+" i.fa").removeClass("selected"),$(s).parent().parent().find(".comment-"+o+" .count").html(r.actions[o].length||0)),c(t,r)?(r.actions[t]=r.actions[t].filter(function(e){return!(Storages.sessionStorage.get("user").id&&Storages.sessionStorage.get("user").id==e||!Storages.sessionStorage.get("user").id&&Storages.cookieStorage.get("sessionId")==e)}),$(s).parent().find("i.fa").removeClass("selected"),$(s).parent().find(".count").html(r.actions[t].length||0),t="clean"):(r.actions[t].push(parseInt(Storages.sessionStorage.get("user").id)||Storages.cookieStorage.get("sessionId")),$(s).parent().find("i.fa").addClass("selected"),$(s).parent().find(".count").html(r.actions[t].length||0)),a(),$.post("/api/comments/"+$("#comments").attr("data-videoid")+"/"+t,{name:Storages.localStorage.get("guestName")||"Guest",replyid:$(s).attr("data-id")}).then(function(e){},function(e){i(e),u()})}function u(){window.config.features.commentName&&!Storages.sessionStorage.get("user").id&&$("#commentName").parent().parent().show(),window.config.features.commentEmojis&&(emojione.sprites=!0,emojione.ascii=!0,preloadImages(window.config.cdn.static+"images/emojione.sprites.png"),$("#commentTextarea").emojioneArea({focus:!0,hideSource:!0,sprite:!0,searchPlaceholder:"Search",useInternalCDN:!1,shortnames:!0,saveEmojisAs:"shortname",attributes:{autocomplete:"on",autocorrect:"on",spellcheck:!0},textcomplete:{maxCount:10}})),$("#related").addClass("col-md-7"),$("#comments").show(),o($("#comments").attr("data-videoid")).then(function(e){g=e,$("#comments .comments-loading").hide(),$("#comments .list").show(),$("#comments .user").show(),a()},function(e){i(e)})}function m(){$("#related").removeClass("col-md-7"),$("#comments").hide()}var g,h=10,p=h,f="recent";$(".show-comments").on("click",function(e){$("#comments").is(":visible")?m():(u(),$("html, body").animate({scrollTop:$("#comments").offset().top},200))}),$.when(window.userPromise).then(function(){$("#comments .comment-submit").on("click",l),Storages.sessionStorage.get("user")&&Storages.sessionStorage.get("user").id?($("#comments .user .avatar").attr("src",window.config.api.url+"/avatar/"+Storages.sessionStorage.get("user").id),$("#comments .user .avatar").attr("default-src","/app/images/avatar/"+(3==Storages.sessionStorage.get("user").gender?"o":2==Storages.sessionStorage.get("user").gender?"f":"m")+parseInt(Storages.sessionStorage.get("user").id)%10+".jpeg"),$("#comments .user .avatar").attr("data-userid",Storages.sessionStorage.get("user").id),$("#comments .user .comment-name").html(Storages.sessionStorage.get("user").name)):($("#comments .user .avatar").attr("src","/app/images/user_smallicon.png"),$("#comments .user .comment-name").html(Storages.localStorage.get("guestName")||"Guest")),$("img[default-src]").on("error",function(){$(this).attr("src",$(this).attr("default-src"))})})}(),$(function(){$(".playlistbtn").click(function(){var e=$(this).attr("data-url");""!=e&&(window.location=e)})}),function(){var e=$("#video-report");e.find(".yj-btn").on("click",function(){var t=e.find('[name="comment"]').val().trim();t.length>5?$.post("/api/video-report/"+e.attr("data-id"),{reason:e.find('[name="reason"]:checked').val(),email:"",comment:t}).then(function(){e.collapse("hide"),e.find('[name="comment"]').val(""),noty({layout:"bottom",type:"success",timeout:5e3,maxVisible:1,killer:!0,text:window.i18next.t("commonjs.videoReport.thanksError")})},function(){noty({layout:"bottom",type:"error",timeout:5e3,maxVisible:1,killer:!0,text:window.i18next.t("commonjs.videoReport.momentError")})}):noty({layout:"bottom",type:"error",timeout:5e3,maxVisible:1,killer:!0,text:window.i18next.t("commonjs.videoReport.detailsError")})})}(),$(function(){$("#signup-form").validate({submitHandler:function(e){var t=$(e).find("input#email").val(),i=$(e).find('input[type="submit"]');i.attr("disabled","disabled"),clearUserInfo(),$.post("/api/signup",{username:$(e).find("input#username").val(),password:$(e).find("input#password").val(),email:t,token:btoa(Storages.cookieStorage.get("passPhrase"))}).then(function(e){noty({layout:"bottom",type:"success",timeout:5e3,killer:!0,text:"Signup successful"}),window.config.features.emailVerification&&t?$.post("/api/emailVerify",{id:e.userid}).then(function(){noty({layout:"bottom",type:"success",timeout:5e3,killer:!0,text:"Please check your email inbox for verification link"}),setTimeout(function(){window.location="/"},2e3)},function(e){i.removeAttr("disabled");var t="Something went wrong, email verification link could not be sent";403==e.status?t="User account is suspended":404==e.status&&(t="Please check account or email details"),noty({layout:"bottom",type:"error",timeout:5e3,maxVisible:1,killer:!0,text:t})}):setTimeout(function(){window.location="/"},2e3)},function(e){i.removeAttr("disabled");var t="Something went wrong, signup could not be processed at this time";429==e.status?t="Too many requests, please try later":400==e.status?t="Signup request could not be processed, please provide valid username and password":404==e.status?t="Signup request could not be processed, please try using another username and/or email":409==e.status?t="Signup request could not be processed, please try using another username and/or email":408==e.status&&(t="Please wait for few seconds"),noty({layout:"bottom",type:"error",timeout:5e3,maxVisible:1,killer:!0,text:t})})}})}),window.getStatusWords=function(){return["Available","Busy","At work","Sleeping","At meeting","Urgent calls only"]},$(function(){function e(){Storages.localStorage.keys().forEach(function(e){var t=e.match(/^yj-timeline-(\d+)$/);if(t&&2==t.length){var i="send"==Storages.localStorage.get(e+"-session")?1:0;i&&Storages.localStorage.set(e+"-session","sent");var s=Storages.localStorage.get(e);$.post("/api/timeline/"+parseInt(t[1]),{is_session:i,thumbnails:s}).then(function(){},function(e){window.config.app.debug&&console.log(e)}),Storages.localStorage.remove(e)}})}e(),setInterval(function(){e()},9e4)}),$(function(){$("form.dmca").on("submit",function(e){var t=e.currentTarget;$(t).find('input[type="submit"]').attr("disabled","disabled");for(var i=$(t).find('input[name="url"]'),s=$(t).find('input[name="reason"]'),o=$(t).find("span.success"),r=$(t).find("span.errors"),a=[],n=0;n<i.length;n++)a.push(new Promise(function(e,a){var l=n;$.post("/api/dmca-form",{url:$(i[l]).val(),reason:$(s[l]).val(),email:$(t).find('input[name="email"]').val(),token:btoa(Storages.cookieStorage.get("passPhrase"))}).then(function(){$(o[l]).text("Submitted successfully"),e()},function(e){$(r[l]).text(e.responseText),a()})}));return Promise.all(a).then(function(){noty({layout:"bottom",type:"success",timeout:5e3,killer:!0,text:"Dmca requests have been sent succesfully"}),setTimeout(function(){window.location="/dmca-form"},2e3)},function(){noty({layout:"bottom",type:"error",timeout:5e3,killer:!0,text:"Please check urls again"})}),!1}),$("form.dmca .url-add").on("click",function(){var e=$("form.dmca .urls .url").first().clone().appendTo("form.dmca .urls");$(e).find('input[name="url"]:last-child').val(""),$(e).find('textarea[name="reason"]:last-child').val(""),$(e).find("span.success:last-child").text(""),$(e).find("span.errors:last-child").text("")})});