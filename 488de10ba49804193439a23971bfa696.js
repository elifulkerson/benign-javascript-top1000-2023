!function(){"use strict";var e,t,n,r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function i(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function a(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||t)}function u(e){var n=d(e.name);if(!n)return{matched:!1};var r=n.filters;if(n.type===t.Group){var i=l(n.data.group);if(!function(e){if(!e.length)return console.warn("触发器组为空，请检查触发器配置!"),!1;var t=e[0].type,n=e.every((function(e){return e.type===t}));return n?!!n&&t:(console.warn("触发器组内的类型不一致，请检查触发器配置!"),!1)}(i)||!i.length)return{matched:!1};r=i.reduce((function(e,t){return t.filters&&e.push.apply(e,a([],o(t.filters))),e}),[]),n=i[0]}return{matched:c(r),trigger:n}}function c(e){return!e||!e.length||e.every((function(e){return function(e){var t=r(r({},window.stm.internalVariables),window.stm.customVariables),i=e.type,o=e.key,a=e.not,u=void 0!==a&&a,c=e.caseSensitive,l=void 0===c||c,d=String(e.value);if(!t[o])return!1;var f=u,s=String(t[o]);return l||(s=s.toLowerCase(),d=d.toLowerCase()),i===n.Contain&&(f=s.includes(d)),i===n.Equal&&(f=s===d),i===n.Regex&&(f=new RegExp(d).test(s)),u?!f:f}(e)}))}function l(e){return e.reduce((function(e,n){var r=d(n.name);if(!r)return e;if(r.type===t.Group){var i=l(r.data.group);e.push.apply(e,a([],o(i)))}return e.push(r),e}),[])}function d(e){var t=window.stm.config.triggers.triggers.filter((function(t){return t.name===e}));return t.length<=0&&console.warn("找不到 "+e+" 对应的触发器，请检查配置!"),t[0]}Object.create,Object.create,function(e){e.Const="Const"}(e||(e={})),function(e){e.PageView="PageView",e.DocumentEvent="DocumentEvent",e.Group="Group"}(t||(t={})),function(e){e.Contain="Contain",e.Equal="Equal",e.Regex="Regex"}(n||(n={}));var f,s={};function v(e,t){void 0===t&&(t={});var n=t.async,r=void 0!==n&&n,i=t.defer,o=void 0!==i&&i,a=t.head,u=void 0!==a&&a,c=e.name,l=e.scripts,d=e.scriptContent;if(!s[c]){if(l&&l.length>0)l.forEach((function(e){if(u)document.write('<script src="'+e+'"><\/script>');else if(document.body){var t=document.createElement("script");t.setAttribute("data-from-stm","1"),t.src=e.replace(/\{__SM_CDN_HOST__\}/,window.__SM_CDN_HOST__),t.async=r,t.defer=o,document.body.appendChild(t)}}));else if(d)if(u)document.write("<script>"+d+"<\/script>");else if(document.body){var f=document.createElement("script");f.setAttribute("data-from-stm","1"),f.innerHTML=d,document.body.appendChild(f)}s[c]=!0,window.stm.loaded||(window.stm.loaded=[]),window.stm.loaded.push(e)}}window.stm&&(function(){var e,t,n=(window.stm.config.variables||{}).variables,o=void 0===n?[]:n,a=function(){var e=window.location,t=e.host,n=e.href,i=e.pathname;return r(r({},window.stm.lizardViewVariables),{pageURL:n,pageHost:t,pagePath:i,userAgent:window.navigator.userAgent})}(),u=o.filter((function(e){return!!e.isBuiltIn})).map((function(e){return e.name})),c={};try{for(var l=i(u),d=l.next();!d.done;d=l.next()){var f=d.value;c[f]=a[f]}}catch(t){e={error:t}}finally{try{d&&!d.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}window.stm.internalVariables=c}(),function(){var t,n,r=(window.stm.config.variables||{}).variables,o=(void 0===r?[]:r).filter((function(e){return!e.isBuiltIn})),a={};try{for(var u=i(o),c=u.next();!c.done;c=u.next()){var l=c.value,d=l.name,f=l.data;f.type===e.Const&&(a[d]=f.value)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}window.stm.customVariables=a}(),(f=window.stm.config.tags.tags)&&f.forEach((function(e){if(e){var n=e.triggers,i=void 0===n?[]:n,o=e.head,a=void 0!==o&&o,c=e.data,l=void 0===c?{}:c;i.forEach((function(n){if(n){var i=u(n);if(i.matched)if(a)v(e,r(r({},l),{head:!0}));else{var o=i.trigger;if(o.type===t.DocumentEvent){var c=o,d=c.data,f=c.event,s=function(e){setTimeout(e,1e3)};window[f.element].addEventListener?window[f.element].addEventListener(f.name,s(v.bind(window,e,d))):window[d.element].attachEvent?window[d.element].attachEvent("on"+d.event,s(v.bind(window,e,d))):window[d.element]["on"+d.event]=s(v.bind(window,e,d))}o.type===t.PageView&&(d=o.data,v(e,r({},d)))}}}))}})))}();