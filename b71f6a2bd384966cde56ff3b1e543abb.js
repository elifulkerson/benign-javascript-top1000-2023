if (!window.__PHS) var __PHS = {};

			(function (s) {
				const loginOptions = {
					project: 'home'
					, app_id_mytracker : '58519'
				}

				s.loginOptions = loginOptions;
				s.exp = {};
				
				s.lang = "ru_RU";
				s.logDetails = true;
				s.maxAccounts = 20;
				s.botTimer = 700;
				s.eid = '';
				s.id = 31132326;
				s.settingsId = +'37570690';
				s.siteid = +'169';
				s.sitezone = +'0';
				s.pv = '2';
				s.region = 'Вашингтон';
				s.loginLink = 'https://r.mail.ru/cls951827/e.mail.ru/login?lang=ru_RU&page=';
				s.authFormExtDomainsEnabled = false;
				s.portalAuthEnabled = true;
				s.authFormEnabled = true;
				
				s.disableGamesCounter = false;
				s.loginLinkXName = 'clb1126064';
				s.registerBackUrl = false;
				s.bizLinks = false;
				s.enableLoveCounter = true;
				s.enableOkCounter = true;
				s.mailEvents = false;
				s.disableIFCheck = false;
				s.mailSplashUpdate = false;
				s.settingsText = false;
				s.appIdMytracker = "58519";
				s.settingsPage = false;
				s.showPassword = false;
				s.showVK = true;
				s.hideOK = false;
				s.isDuplicateCounters = false;
				s.isDuplicateProjectsCounters = false;
				s.isShowDot = false;
				s.xhrEnabledOK = false;
				s.enableTargetBlank = false;
				s.loginFromProject = false;
				s.pauseUpdate = false;
				s.pauseUpdateTime = 0;
				s.authGate = true;
				s.isAuthGateMobileRedirect = false;
				s.authGateJS = "https://img.imgsmail.ru/hb/e.mail.ru/auth.gate/2.10.0/authGate.js";
				s.securitySettingsLink = "https://id.mail.ru/security";
				s.authGateJSHasVer = true;
				
				s.devAuth = /(^|\.)devmail\.ru$/.test(window.location.hostname);
				if (!s.socialAuth) s.socialAuth = false;s.externalJS = 'https://img.imgsmail.ru/ph/0.65.31/external.min.js';
				s.jsonpEnabled=+'';
				s.project='home';
				s.projectsMenu={"projects": [{"items": [{"title": "Авто","url": "https://trk.mail.ru/c/lfmn59"},{"title": "Гороскопы","url": "https://trk.mail.ru/c/sxmg92"},{"title": "Дети","url": "https://trk.mail.ru/c/c6g5d9"},{"title": "Добро","url": "https://trk.mail.ru/c/t2emd6"},{"title": "Дом","url": "https://trk.mail.ru/c/x1nl75"},{"title": "Задачи","url": "https://trk.mail.ru/c/oug674"},{"title": "Звонки","url": "https://trk.mail.ru/c/s8c2j6"},{"title": "Здоровье","url": "https://trk.mail.ru/c/vm65i6"},{"title": "Календарь","url": "https://trk.mail.ru/c/yr65t1"},{"title": "Кино","url": "https://trk.mail.ru/c/qjeng8"},{"title": "Леди","url": "https://trk.mail.ru/c/p7wpt2"},{"title": "Мой Мир","url": "https://trk.mail.ru/c/dinvz3"},{"title": "Облако","url": "https://trk.mail.ru/c/t46eg7"},{"title": "Ответы","url": "https://trk.mail.ru/c/nep4a7"},{"title": "Питомцы","url": "https://trk.mail.ru/c/x8pj79"},{"title": "Погода","url": "https://trk.mail.ru/c/qtcyh9"},{"title": "Спорт","url": "https://trk.mail.ru/c/kz5jj1"},{"title": "ТВ программа","url": "https://trk.mail.ru/c/k7q398"},{"title": "Центр оплат","url": "https://trk.mail.ru/c/l9hhf8"},{"title": "Штрафы","url": "https://trk.mail.ru/c/bmhxg9"},{"title": "Hi-Tech","url": "https://trk.mail.ru/c/jmokx4"}]},{"title": "Для бизнеса","items": [{"title": "Облако для бизнеса","url": "https://trk.mail.ru/c/bxhvk9"},{"title": "Облако для рабочих групп","url": "https://trk.mail.ru/c/z20ob3"},{"title": "Почта для бизнеса","url": "https://trk.mail.ru/c/yq1mk3"},{"title": "Почта для образования","url": "https://trk.mail.ru/c/dytax4"},{"title": "Рейтинг сайтов","url": "https://trk.mail.ru/c/q8nfv2"},{"title": "Ситимобил для бизнеса","url": "https://trk.mail.ru/c/kt82h7"},{"title": "myTarget","url": "https://trk.mail.ru/c/h81ug4"},{"title": "VK Teams","url": "https://trk.mail.ru/c/ed8rn1"}]},{"title": "Другие проекты","items": [{"title": "Агент Mail.Ru","url": "https://trk.mail.ru/c/fdgvb5", "img": "https://r.mradx.net/pictures/93/70C072.png", "imgWidth": "16", "imgHeight": "16", "img_2x": "https://r.mradx.net/pictures/77/BE8BD6.png"},{"title": "Браузер Atom","url": "https://trk.mail.ru/c/myxgm4", "img": "https://r.mradx.net/pictures/51/C14885.png", "imgWidth": "16", "imgHeight": "16", "img_2x": "https://r.mradx.net/pictures/DC/C4532A.png"},{"title": "Все аптеки","url": "https://trk.mail.ru/c/ovs2x1", "img": "https://r.mradx.net/pictures/D1/2955CE.png", "imgWidth": "16", "imgHeight": "16", "img_2x": "https://r.mradx.net/pictures/C0/2B3AA1.png"},{"title": "Капсула","url": "https://trk.mail.ru/c/wc5bb1", "img": "https://r.mradx.net/pictures/0D/196D4C.png", "imgWidth": "16", "imgHeight": "16", "img_2x": "https://r.mradx.net/pictures/2C/F0E95C.png"},{"title": "Ситимобил","url": "https://trk.mail.ru/c/dzlnq7", "img": "https://r.mradx.net/pictures/50/66B617.png", "imgWidth": "16", "imgHeight": "16", "img_2x": "https://r.mradx.net/pictures/84/E079D1.png"},{"title": "ТамТам","url": "https://trk.mail.ru/c/iglmp1", "img": "https://r.mradx.net/pictures/B9/380E74.png", "imgWidth": "16", "imgHeight": "16", "img_2x": "https://r.mradx.net/pictures/A9/AC7A85.png"},{"title": "Юла","url": "https://trk.mail.ru/c/j6hdy3", "img": "https://r.mradx.net/pictures/33/2CDE9B.png", "imgWidth": "16", "imgHeight": "16", "img_2x": "https://r.mradx.net/pictures/AA/FEE215.png"},{"title": "VK Combo","url": "https://trk.mail.ru/c/jqzqe2", "img": "https://r.mradx.net/pictures/13/DFC1EB.png", "imgWidth": "16", "imgHeight": "16", "img_2x": "https://r.mradx.net/img/89/EC664D.png"},{"title": "Delivery Club","url": "https://trk.mail.ru/c/puh439", "img": "https://r.mradx.net/pictures/B3/DA3AFC.png", "imgWidth": "16", "imgHeight": "16", "img_2x": "https://r.mradx.net/pictures/88/E397FC.png"},{"title": "Hi-chef","url": "https://trk.mail.ru/c/kvgew3", "img": "https://r.mradx.net/pictures/A4/7FFE0A.png", "imgWidth": "16", "imgHeight": "16", "img_2x": "https://r.mradx.net/pictures/A5/66133D.png"},{"title": "ICQ New","url": "https://trk.mail.ru/c/btb6p6", "img": "https://r.mradx.net/pictures/E1/12DFA2.png", "imgWidth": "16", "imgHeight": "16", "img_2x": "https://r.mradx.net/pictures/5B/E9A966.png"},{"title": "VK Работа","url": "https://trk.mail.ru/c/u8mv76", "img": "https://r.mradx.net/pictures/11/7DCCA2.png", "imgWidth": "16", "imgHeight": "16", "img_2x": "https://r.mradx.net/pictures/64/33467D.png"}]}], "links": [{"title": "Список всех проектов","url": "https://trk.mail.ru/c/uym884"}]};
				s.user='';
			})(window.__PHS);(function(d,m){function Da(a,e){return a.bind.apply(a,P.call(arguments,1))}function ba(a){for(var a=a||{},e=1,c=arguments.length;e<c;e++){var b=arguments[e],d;for(d in b)b.hasOwnProperty(d)&&(a[d]=b[d])}return a}function Ea(a,e){for(var b in e)Object.prototype.hasOwnProperty.call(e,b)&&!Object.prototype.hasOwnProperty.call(a,b)&&(a[b]=e[b]);return a}function ca(a){return document.getElementById(a)}function Fa(a,e,b,f){var d="",g=[],j=0;if("string"===typeof a)g.push([a,e]),j+=e,"object"==typeof b&&
(f=b,b=H);else{for(var k in a)a.hasOwnProperty(k)&&(g.push([k,a[k]]),j+=a[k]);"string"==typeof e?(f=b,b=e):"object"==typeof e&&(f=e,b=H)}void 0===b&&(b=H);a=0;for(e=g.length;a<e;a++)g[a]=g[a].join(":");"object"==typeof f&&("string"==typeof f.rlog&&f.rlog.length&&Array.isArray(f.rlog_message)&&f.rlog_message.length)&&(d="&rlog="+f.rlog+"&rlog_message="+f.rlog_message.join(",")+(f.email?"&email="+f.email:""));(new Image).src="//stat.radar.imgsmail.ru/update?p=headline&t="+b+"&v="+j+"&i="+g.join(",")+
(document.referrer?"&r="+escape(document.referrer):"")+d+"&rnd="+Math.random()}function Ga(a,e,b){function f(){a();g||(d=Q(f,e))}var d,g;b&&a();d=Q(f,e);return function(){g=!0;da(d)}}function Ha(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;a.preventDefault?a.preventDefault():a.returnValue=!1}function Ia(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function ea(a,e,b,f){if(e)if(e.addEventListener)e[a?"addEventListener":"removeEventListener"](b,f,!1);else e[a?"attachEvent":"detachEvent"]("on"+
b,f)}function y(a){return a&&1==a.nodeType}function fa(a){(function(){for(var a,b=arguments,f=b.length;f--;){a=b[f].split(",");for(var i=a.length;i--;){var g=a[i],j=void 0,k=parseInt(1E9*Math.random()),n=void 0;if(j=g.match(/^(?:cl([bn])|([adgin]))(\d+)(?:sz(\d+))?/))j[1]?n="s"+j[1]:"n"==j[2]?n="nc":("i"==j[2]&&(k=null),n=j[2]),n+=j[3]+".gif?",j[4]&&(n+="sz="+j[4]),k&&(n+="&rnd="+k),d.settings.eid&&(n+="&test_id="+d.settings.eid),(new Image).src="//rs.mail.ru/"+n}}})(a)}function Ja(a){ea(1,a,"mousedown",
function(a){a||(a=window.event);for(a=a.target||a.srcElement;a;)a.getAttribute&&a.getAttribute("xname")&&fa(a.getAttribute("xname")),a=a.parentNode})}function Ka(a,e){var b;b=y(e)?function(a,e){return a==e}:function(a,e){return I(a,e)};for(var f=a.parentNode;f;){if(b(f,e))return f;f=f.parentNode}return!1}function La(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function I(a,e){return y(a)&&J?a.classList.contains(e):!!~(" "+a.className+" ").indexOf(" "+e+" ")}function R(a,e){if(y(a))if(J)for(var e=
e.split(" "),b=0;b<e.length;b++)a.classList.add(e[b]);else!I(a,e)&&(a.className+=" "+e)}function ga(a,e){y(a)&&(J?a.classList.remove(e):a.className=a.className.replace(RegExp("(^|\\s)"+e+"(\\s|$)","g"),"$1"))}function Ma(a,e){if(!y(a))return J?a.classList.toggle(e):I(a,e)?(ga(a,e),!1):(R(a,e),!0)}function Na(a){if("string"!==typeof a||!a)return null;try{return JSON.parse(a)}catch(e){throw e;}}function Oa(){return!!b.SCookie.getGlobal(ha)}function Pa(a){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},
b=[],f;for(f in e)b.push(f);b="["+b.join("")+"]";f=function(a){return e[a]};return"string"===typeof a&&RegExp(b).test(a)?a.replace(RegExp(b,"g"),f):null==a?"":a}function ia(){this._invocations=[];this._context=this._fn=null}function u(){}function S(a){this._node=b.byId(a);this._container=this._node.parentNode}function Qa(a){this._counters=a;for(var e in this._counters)this._counters.hasOwnProperty(e)&&(this._counters[e]=new S(this._counters[e]));this.update=function(a,e){if("string"==typeof a){var b=
{};b[a]=e;this.update(b)}else for(b in a)a.hasOwnProperty(b)&&(this._counters[b].update(a[b]),this._counters[b]._isAnim=d.activeUser())}}function l(a){l.__all.push(this);this._opts=a;this._open=this._open.bind(this);this._baseClass=a.baseClass;this._rootNode=a.rootNode;this._dropdown=a.dropdown;this._button=a.button;this._openCounter=a.openCounter||null;this._hideTimeout=null;this._orientation=this._opts.orientation;this._openClass=this._baseClass+"_open";this._rightClass=this._openClass+"_right";
this._leftClass=this._openClass+"_left";this._inited=!!this._dropdown;this._triggerHideOnInit=this._triggerShowOnInit=!1;b.event(1,this._button,"click",this.show.bind(this))}function s(a,e){e=e||{};this._url=a;this._encoding=e.encoding;this._JSONPCallbackParam=e.JSONPCallbackParam||"callback";this._xhrEnabled=!__PHS.jsonpEnabled&&!e.jsonpEnabled;this._processing=!1;this._requestSource=e.requestSource;this._xhr2Supported=!1;try{XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&(this._xhr2Supported=
!0)}catch(b){}}function Ra(a){function e(){g!==(g=location.hash.replace(/^#/,"")||null)&&f()}this._userEmail=a.userEmail;this.____user=this._userEmail.innerHTML||void 0;var c="string"==typeof this.____user&&this.____user.length;this._user=d.settings.loginFromProject&&"mail"==b.project&&c?this.____user:null;this._updateByTimeout=a.updateByTimeout;this.updateLastRequest=0;this._noAuthView=a.noAuthView;this._authView=a.authView;this.updateAccountInfo();var f=b.bind(this.updateAccountInfo,this),i=!1;
if(!this._updateByTimeout)if(window.jsHistory&&window.jsHistory.change)window.jsHistory.change(function(){i&&f();i=!0});else if("onhashchange"in window)b.event(1,window,"hashchange",f);else{var g=location.hash.replace(/^#/,"")||null;b.setIntervalByTimeout(e,50)}}function ja(a,e){var b=document.createElement("script"),f=document.getElementsByTagName("head")[0];"undefined"!==typeof e&&(b.defer="defer",b.async="async");b.type="text/javascript";b.src=a;!("opera"in window)||"complete"===document.readyState?
f.appendChild(b):window.addEventListener("DOMContentLoaded",function(){f.appendChild(b)},!1)}function v(a,e){e=e?e+","+d.settings.project+":1":d.settings.project+":1";(new Image).src="//stat.radar.imgsmail.ru/update?p=headline&t="+a+"&i="+e+"&v=1&rnd="+Math.random()}if(!d){var b={};m.swaDomain="//portal.mail.ru";m.authDomain="https://auth.mail.ru";/^https?:\/\/[^/]*?\.dev\.mail\.ru($|\/\S*)/i.test(location.href)?(m.swaDomain="//portal.dev.mail.ru",m.authDomain="https://auth.dev.mail.ru"):/^https?:\/\/[^/]*?\.devmail\.ru($|\/\S*)/i.test(location.href)&&
(m.swaDomain="//portal.devmail.ru",m.authDomain="https://auth.devmail.ru");m.swaTest&&(m.swaDomain="//portal.test.mail.ru",m.authDomain="https://test.auth.mail.ru");window.__PH=d={_:b,experiments:m.exp};delete m.exp;d.settings=m;var P=Array.prototype.slice;void 0===Function.prototype.bind&&(Function.prototype.bind=function(a){var e=P.call(arguments,1),b=this;return function(){return b.apply(a,e.concat(P.call(arguments,0)))}});Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});
var H="home",Q=window.setTimeout,da=window.clearTimeout,ka=ca("portal-headline"),T=!1,J="classList"in document.documentElement,Sa=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b)}:function(a,b){for(var c=0,f=a.length;c<f;c++)if(a[c]==b)return c;return-1},la=window.devicePixelRatio,Ta=void 0!=document.createElement("div").style.backgroundSize&&1<la,ha="s_c",ma={},Ua=function(a){return a.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()}).replace(/^ms-/,
"-ms-")},Va=function(a){return a.replace(/([a-z])-([a-z])/g,function(a,b,f){return b+f.toUpperCase()}).replace(/^-/,"")},na=function(a,b){var c=a.charAt(0).toUpperCase()+a.slice(1);a:{var c=(a+" "+Wa.join(c+" ")+c).split(" "),f;b:if(f=c.length,"CSS"in window&&"supports"in window.CSS){for(;f--;)if(window.CSS.supports(Ua(c[f]),b)){f=!0;break b}f=!1}else f=void 0;if(void 0!==f)c=f;else{var d,g;d=c.length;for(f=0;f<d;f++)if(g=c[f],~(""+g).indexOf("-")&&(g=Va(g)),void 0!==Xa[g]){c=!0;break a}c=!1}}return c},
Wa=["Moz","O","ms","Webkit"],D=[],p=[],Xa=function(){return"function"!==typeof document.createElement?document.createElement(arguments[0]):"svg"===document.documentElement.nodeName.toLowerCase()?document.createElementNS.call(document,"http://www.w3.org/2000/svg",arguments[0]):document.createElement.apply(document,arguments)}("testelem").style,t=navigator.userAgent;-1!=t.indexOf("Firefox")?p.push("ff"):-1!=t.indexOf("Opera")?p.push("opera"):-1!=t.indexOf("Chrome/40")&&p.push("chrome40");if(-1!=t.indexOf("iPad")||
-1!=t.indexOf("iPhone")||-1!=t.indexOf("iPod"))p.push("ios"),T=!0;-1!=t.indexOf("Mac OS")&&!T?p.push("mac"):-1!=t.indexOf("Windows")?p.push("win"):p.push("not-desk");"ontouchstart"in window?p.push("touch"):p.push("no-touch");D.push({name:"csstransforms",fn:function(){return-1===navigator.userAgent.indexOf("Android 2.")&&na("transform","scale(1)",!0)},options:void 0});var Ya=na("boxShadow","1px 1px",!0);D.push({name:"boxshadow",fn:Ya,options:void 0});var K,z,U,L,V,W;for(W in D)if(D.hasOwnProperty(W)){K=
[];z=D[W];z.name&&K.push(z.name.toLowerCase());U="function"===typeof z.fn?z.fn():z.fn;for(L=0;L<K.length;L++)V=K[L],ma[V]=U,p.push((U?"":"no-")+V)}R(ka,"x-ph-"+p.join(" x-ph-"));var oa=1*new Date+"",Za=oa.substring(oa.length-2),$a=b,ab=H,bb=/\s*(\S+)\s*/g,cb=!/\[native\s+code\]/i.test(document.getElementsByClass+""),db=/\./g;ba($a,{timers:{},percent:function(a){return Za<a},supports:ma,extend:ba,append:Ea,dpr:la,retina:Ta,project:ab,setTimeout:function(a,b){return Q(a,b)},clearTimeout:function(a){return da(a)},
rootNode:ka,byId:ca,byClassName:function(a,b,c){var f,d;"string"===typeof a&&(c=b,b=a,a=document);c=c||"";if(!a||null==b)return[];b=b.replace(/\s+/gi,".");"."!=b[0]&&(b="."+b);if("querySelectorAll"in a){c=a.querySelectorAll(c+b);if(cb){f=-1;for(a=[];d=c[++f];)a.push(d);return a}return c}c=a.getElementsByTagName(c||"*");b&&(b=b.replace(db," "),b=RegExp(b.replace(bb,"(?=(^|.*\\s)$1(\\s|$))")));f=-1;for(a=[];d=c[++f];)1===d.nodeType&&(!b||b.test(d.className))&&a.push(d);return a},radar:Fa,bind:Da,setIntervalByTimeout:Ga,
eventCancel:Ha,eventPreventDefault:Ia,event:ea,isNode:y,emptyNode:La,count:fa,countEl:Ja,hasParent:Ka,hasClass:I,removeClass:ga,addClass:R,toggleClass:Ma,ArrayIndexOf:Sa,parseJson:Na,isCorp:Oa,isCorpCookie:ha,iOs:T,replaceUnsafeSymbols:Pa});var q,M=function(a,b,c){if(void 0!==b){var f,c=c||{};null===b&&(b="",c.expires=-1);b+="";document.cookie=a+"="+b+(c.expires&&(f="number"==typeof c.expires&&(f=new Date),f.setTime(f.getTime()+864E5*c.expires),f||"toUTCString"in c.expires&&c.expires)&&"; expires="+
f.toUTCString()||"")+(c.path?"; path="+c.path:"")+(c.domain?"; domain="+c.domain:"")+(c.samesite?"; SameSite="+c.samesite:"")+(c.secure?"; secure":"");return b}if(""!==(document.cookie||""))return b=(document.cookie.match(RegExp("(?:^|; ?)"+a+"\\=(\\S*?)(?:; ?|$)"))||[])[1],void 0===b?void 0:b};"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(a,b){var c=arguments;if(null==a)throw new TypeError("Cannot convert undefined or null to object");for(var f=Object(a),
d=1;d<arguments.length;d++){var g=c[d];if(null!=g)for(var j in g)Object.prototype.hasOwnProperty.call(g,j)&&(f[j]=g[j])}return f},writable:!0,configurable:!0});Array.from||(Array.from=function(a){var b=[];if(!a)return b;switch(a.constructor.name){case "Object":return Array.prototype.slice.call(a);case "Set":return a.forEach(function(a){b.push(a)}),b;case "Map":return a.forEach(function(a,f){b.push([f,a])}),b;default:return[]}});var eb=function(){var a;a=navigator.userAgent;a=!/Version\/.* Safari\//.test(a)||
/Chrom(e|ium)/.test(a)?!1:(a=a.match(/\(Macintosh;.*Mac OS X (\d+)_(\d+)[_\d]*.*\) AppleWebKit\//))&&"10"===a[1]&&"14"===a[2];a||(a=(a=navigator.userAgent.match(/\(iP.+; CPU .*OS (\d+)[_\d]*.*\) AppleWebKit\//))&&"12"===a[1]);if(a)return"";document.cookie="_s_test=1;path=/;SameSite=None;Secure";return(a=document.cookie.match(RegExp("(?:^|; )"+"_s_test".replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))&&decodeURIComponent(a[1])?(document.cookie="_s_test=1;path=/;max-age=-1;SameSite=None;Secure",
";SameSite=None;Secure"):""},pa=/(^|\.)devmail\.ru$/.test(window.location.hostname),h={_S_cookie_set_get_remove:function(a,b,c,f){var d,g,j=RegExp("(^|\\|)("+c+"=)(.*?)(\\||$)"),b=Object.assign({domain:b,expires:365,path:"/"},";SameSite=None;Secure"===eb()&&{samesite:"None",secure:!0});if(c){d=M(a)||"";g=(d.match(j)||[])[3];var k=null;void 0!==f?(c=void 0!==g||null===f?k=d.replace(j,null===f?function(a,b,e,c,f,d){return 0===d?"":f}:"$1$2"+f+"$4"):(d?d+"|":"")+c+"="+f,M(a,c,b),""===k&&M(a,null,b)):
f=g;return f}},_throw_noValue_Error:function(){throw Error("need value");},__prefix:null,__domain:pa?".devmail.ru":".mail.ru",setProject:function(a,b){if(!a||!b)throw Error("project is not valid");"."!==b.substr(0,1)&&(b="."+b);h.__prefix=a;pa&&(b=b.replace(/.[a-z0-9\-]*.[a-z0-9]*$/,".devmail.ru"));h.__domain=b},_getPrefix:function(a){a||(a={});a.prefix=a.prefix||h.__prefix;a.domain=a.domain||h.__domain;if(!a.prefix||!a.domain)throw Error("run setProject before");return a},getGlobal:function(a){return h._S_cookie_set_get_remove("s",
h.__domain,a)},setGlobal:function(a,b){void 0===b&&h._throw_noValue_Error();h._S_cookie_set_get_remove("s",h.__domain,a,b);return h.getGlobal(a)},removeGlobal:function(a){var b=h.getGlobal(a);h._S_cookie_set_get_remove("s",h.__domain,a,null);return b},getLocal:function(a,b){b=h._getPrefix(b);return h._S_cookie_set_get_remove("s_"+b.prefix,b.domain,a)},setLocal:function(a,b,c){c=h._getPrefix(c);void 0===b&&h._throw_noValue_Error();h._S_cookie_set_get_remove("s_"+c.prefix,c.domain,a,b);return h.getLocal(a,
c)},removeLocal:function(a,b){var b=h._getPrefix(b),c=h.getLocal(a,b);h._S_cookie_set_get_remove("s_"+b.prefix,b.domain,a,null);return c}};q=b.SCookie=h;ia.prototype={getQuery:function(){var a=this.invoke.bind(this);a.replace=this.replace.bind(this);return a},invoke:function(){this._fn?this._fn.apply(this._context,arguments):this._invocations.push(arguments)},replace:function(a,b){if(!this._fn){for(var b=b||window,c=0,f=this._invocations.length;c<f;c++)a.apply(b,this._invocations[c]);delete this._invocations;
this._fn=a;this._context=b}}};b.extend(b,{DeferredQuery:ia});u.prototype={emit:function(a,b,c){function f(){--g||c&&c()}void 0==b&&(b={});var d=this.listeners(a);if(d)for(var d=d.slice(),a=new u.Event(a,b),g=d.length,b=0,j=g;b<j;b++){var k=d[b];if("function"===typeof k)try{k.call(this,a,f)}catch(h){f()}}else c&&c()},listeners:function(a){return this._events&&this._events[a]&&this._events[a].length&&this._events[a]},addListener:function(a,b){if("function"!==typeof b)throw Error("invalid argument");
this._events||(this._events={});this._events[a]||(this._events[a]=[]);this._events[a].push(b);this.emit("newlistener",{type:a});return this},once:function(a,b){function c(){this.removeListener(a,c);b.apply(this,arguments)}if("function"!==typeof b)throw Error("invalid argument");this.on(a,c);return this},removeListener:function(a,e){if("function"!==typeof e)throw Error("invalid argument");if(!this._events[a])return this;var c=this._events[a],f=b.ArrayIndexOf(c,e);if(0>f)return this;c.splice(f,1);0===
c.length&&delete this._events[a];return this}};u.prototype.on=u.prototype.addListener;u.Event=function(a,b){this.type=a;this.data=b};u.relay=function(a,b,c){for(var f=0,d=a.length;f<d;f++){var g=a[f];b.on(g,function(a){return function(){c.emit(a)}}(g))}};b.EventEmitter=u;var A=function(){var a=q.getGlobal(qa),b;if(!a)return E(0,0,{id:0,current:0}),{id:0,current:0};b=parseInt(a.substr(0,3),16);a=parseInt(a.substr(3,6),16);return{id:b,current:a}},E=function(a,b,c){(c=c||A())||(c={});void 0!==a&&(c.id=
a);c.id=void 0!=c.id&&c.id.toString(16);switch(c.id.length){case 1:c.id="00"+c.id;break;case 2:c.id="0"+c.id}void 0!==b&&(c.current=b);c.current=void 0!=c.current&&c.current.toString(16);switch(c.current.length){case 1:c.current="00"+c.current;break;case 2:c.current="0"+c.current}q.setGlobal(qa,c.id+c.current)},G=function(a,e){function c(a){N!==a&&(N=a,d.emit("visibilitychange",{hidden:a,visible:!a}))}var f;if(e)f=e.hidden,c(f);else if(f="focus"==a.type||"focusin"==a.type?!1:"blur"==a.type||"focusout"==
a.type?!0:!!document[F],"focusout"==a.type)r=b.setTimeout(function(){r=void 0;c(f)},0);else if("focusin"==a.type)void 0!==r?b.clearTimeout(r):c(f),r=void 0;else if((ra||sa)&&!B)if(f)r=b.setTimeout(function(){r=void 0;try{A().current===w||c(f)}catch(a){b.radar("cookieError",1)}},200);else{try{A().current!==w&&(E(void 0,w),c(f))}catch(i){b.radar("cookieError",1)}b.clearTimeout(r);r=void 0}else c(f)},F,r,N=!1,B,X={hidden:"visibilitychange",mozHidden:"mozvisibilitychange",webkitHidden:"webkitvisibilitychange",
msHidden:"msvisibilitychange",oHidden:"ovisibilitychange"};for(F in X)if(X.hasOwnProperty(F)&&F in document){B=X[F];break}var C=navigator.userAgent,ta=-1<C.indexOf("iPad")||-1<C.indexOf("iPhone")||-1<C.indexOf("iPod"),ra=!B&&-1<C.indexOf("Opera"),sa=0<C.indexOf("Safari")&&-1===C.indexOf("Chrome"),fb=(ra||ta||sa)&&!B,qa="t";try{if(fb){var w,O=A();O.id++;var Y=O.id;4095<Y&&(Y=0);E(Y);O=A();w=O.id;E(void 0,w)}}catch(kb){b.radar("cookieError",1)}if(B)b.event(1,document,B,G);else if(ta){var ua=new Date,
va=function(){b.clearTimeout(50);b.setTimeout(va,50);var a=new Date;100<a.getTime()-ua.getTime()&&A().current!==w&&(E(void 0,w),N=!1,G({},{hidden:!0}),N=!0,G({},{hidden:!1}));ua=a};b.setTimeout(va,50)}else b.event(1,window,"focus",G),b.event(1,window,"blur",G);S.prototype={visibleClass:"x-ph__link_ext",show:function(){b.addClass(this._container,this.visibleClass);b.clearTimeout(this._animTimeout);b.clearTimeout(this._animResetTimeout);this._anim&&this._isAnim&&(this._animTimeout=b.setTimeout(function(){b.addClass(this._node,
"x-ph-animated_flash");this._animResetTimeout=b.setTimeout(function(){b.removeClass(this._node,"x-ph-animated_flash")}.bind(this),1E3)}.bind(this),100))},hide:function(){b.removeClass(this._container,this.visibleClass)},value:function(a){void 0!==a&&(this._node.innerHTML=this.prepare(a));return parseInt(this._node.innerHTML,10)||void 0},prepare:function(a){a=parseInt(a);return 0<a?a:0},update:function(a){var e=this.value();b.clearTimeout(this._updateTimeout);this._updateTimeout=b.setTimeout(function(){a=
this.value(a);if(void 0!==e&&a>e||d.activeUser()!=this._isAnim)this._anim=!0;this[a?"show":"hide"]();this._anim=!1}.bind(this),100)}};b.Counters=Qa;b.Counter=S;l.__all=[];l.resetShowOnInit=function(a){for(var b=0,c=l.__all.length;b<c;b++){var f=l.__all[b];if(!a||f!==a)f._triggerShowOnInit=!1,f._triggerHideOnInit=!1}};l.hideAll=function(){for(var a=0,b=l.__all.length;a<b;a++){var c=l.__all[a];c._triggerShowOnInit=!1;c._triggerHideOnInit=!1;c.hide()}};b.extend(l.prototype,b.EventEmitter.prototype,{init:function(a){!this._dropdown&&
a&&(this._dropdown=a,this._rootNode.appendChild(a),this._inited=!0,this._triggerShowOnInit&&this.show(),this._triggerHideOnInit&&this.hide(),this._triggerHideOnInit=this._triggerShowOnInit=!1)},_mouseIn:function(){b.clearTimeout(this._hideTimeout)},_mouseOut:function(){b.clearTimeout(this._hideTimeout);this._hideTimeout=b.setTimeout(this.hide.bind(this),4E3)},isVisible:function(){return b.hasClass(this._rootNode,this._openClass)},show:function(a){b.clearTimeout(this._hideTimeout);a&&b.eventPreventDefault(a);
this._inited?this.isVisible()||this.emit("show",{},function(){this.__toggle(!0)}.bind(this)):(this._triggerShowOnInit=!0,l.resetShowOnInit(this))},hide:function(){this._inited?this.isVisible()&&this.emit("hide",{},function(){this.__toggle(!1)}.bind(this)):this._triggerShowOnInit=!this._triggerShowOnInit},_hideOther:function(){for(var a=0,b=l.__all.length;a<b;a++){var c=l.__all[a];c!=this&&c.isVisible()&&c.hide();c._triggerShowOnInit=!1}},_click:function(a){var e=a.target||a.srcElement;e==this._dropdown||
b.hasParent(e,this._dropdown)?this.emit("click",{clickEvent:a},b.bind(this.hide,this)):"click"==a.type&&(b.hasParent(e,this._rootNode)&&b.eventPreventDefault(a),this.hide())},_open:function(){b.clearTimeout(this._openTimeout);this._openTimeout=b.setTimeout(function(){if(this._orientation)b.addClass(this._rootNode,this._openClass),b.addClass(this._rootNode,this["_"+this._orientation+"Class"]);else{var a=this._dropdown.clientWidth,e=this._rootNode.offsetLeft,c=a+(this._rootNode.offsetParent==b.rootNode?
e:1E4),f=document.body.offsetWidth;b.addClass(this._rootNode,this._openClass);b.removeClass(this._rootNode,c<=f?this._rightClass:this._leftClass);b.addClass(this._rootNode,c>f?this._rightClass:this._leftClass);this._dropdown.style.right=e+this._rootNode.clientWidth<a&&c>f?-(a-(e+this._rootNode.clientWidth)+10)+"px":""}a=function(){if(window.URL||window.webkitURL)this._dropdown.style.width=this._dropdown.clientWidth+1+"px",this._dropdown.style.width=null}.bind(this);a();b.setTimeout(a,0)}.bind(this),
0)},__toggle:function(a){b.clearTimeout(this.__eventsTimeout);this.__eventsTimeout=b.setTimeout(function(){b.event(a,document,"click",this.__click||(this.__click=this._click.bind(this)));b.event(a,this._rootNode,"mouseout",this.__mouseOut||(this.__mouseOut=this._mouseOut.bind(this)));b.event(a,this._rootNode,"mouseover",this.__mouseIn||(this.__mouseIn=this._mouseIn.bind(this)))}.bind(this),10);a?(this._openCounter&&b.count(this._openCounter),"block"!==this._dropdown.style.display&&(this._dropdown.style.display=
"block"),this._open(),b.event(1,window,"resize",this._open)):(b.removeClass(this._rootNode,this._openClass),b.removeClass(this._rootNode,this._leftClass),b.removeClass(this._rootNode,this._rightClass),b.event(0,window,"resize",this._open))}});b.Menu=l;var wa=document.getElementsByTagName("head")[0];s.prototype={get:function(a){a=b.extend({encoding:this._encoding,params:{},complete:function(){}},a);this.cancel();return this[this._isXHR2()?"_getXHR":"_getScript"](this._url,a)},_isXHR2:function(){return this._xhrEnabled&&
this._xhr2Supported},_getUrl:function(a,b){var c=!!~a.indexOf("?");b.rnd=(new Date).getTime();for(var f in b)if(b.hasOwnProperty(f)){var d=b[f];"function"==typeof d&&(d=d(b));void 0!==d&&(a+=(c?"&":"?")+f+"="+encodeURIComponent(d),c=!0)}return a},_getXHR:function(a,e){var c=new XMLHttpRequest;this._processing=!0;b.clearTimeout(this._xhrTimeout);e.timeout&&(this._xhrTimeout=b.setTimeout(function(){this._processing&&(b.clearTimeout(this._xhrTimeout),this._processing=!1,this.cancel(),e.complete({status:"error",
errorType:"timeout"}))}.bind(this),e.timeout));c.onreadystatechange=function(){if(this._processing){var a;if(4===c.readyState){b.clearTimeout(this._xhrTimeout);this._processing=!1;var d;if(200==c.status){try{d=b.parseJson(c.responseText)}catch(g){a=!!g}if("object"!==typeof d||!d)a=!0}!a&&200==c.status?(a=d,a.error&&!a.errorType&&(a.errorType="serverError")):a=a?{status:"error",errorType:"parseError"}:200!=c.status?{status:"error",errorType:"netError"}:{status:"error"};this._requestSource&&(a.requestSource=
this._requestSource);e.complete(a)}}}.bind(this);c.open("get",this._getUrl(a,e.params),!0);c.withCredentials=!0;c.send(null);this._xhr=c},_getScript:function(a,e){function c(){wa.appendChild(i);b.setTimeout(function(){wa.removeChild(i)},6E4)}var d=this._cbName="__PHJSONPCallback_"+s.getUuid(),i=document.createElement("script"),g,j=e.timeout;e.params[this._JSONPCallbackParam]=d;a=this._getUrl(a,e.params);window[d]=function(a){b.clearTimeout(g);window[d]=s.__PHEmptyCallback;this._cbName=null;this._processing=
!1;this._requestSource&&(a.requestSource=this._requestSource);a.error&&!a.errorType&&(a.errorType="serverError");"cancel"!=a.status&&e.complete(a)}.bind(this);i.defer="defer";i.async="async";i.type="text/javascript";e.encoding&&(i.charset=e.encoding);i.src=a;!("opera"in window)||"complete"===document.readyState?(this._processing=!0,c()):window.addEventListener("DOMContentLoaded",b.bind(function(){this._processing=!0;c()},this),!1);j&&(g=b.setTimeout(b.bind(function(){window[this._cbName]({status:"error",
errorType:"timeout"})},this),j))},isProcessing:function(){return this._processing},cancel:function(){this._isXHR2()?this._cancelXHR():this._cancelScript()},_cancelXHR:function(){this._xhr&&this._xhr.abort()},_cancelScript:function(){this._cbName&&window[this._cbName]&&window[this._cbName]({status:"cancel"})}};s.__uuid=0;s.getUuid=function(){return s.__uuid++};s.__PHEmptyCallback=function(){};b.extend(b,{Transport:s});b.AccountManager=Ra;b.extend(b.AccountManager.prototype,b.EventEmitter.prototype,
{activeUser:function(){return this._user},updateLogin:function(a,b){this._user=a;this._userEmail.innerHTML=this.drawName(a,b);a?(this._noAuthView.style.display="none",this._authView.style.display=""):(this._authView.style.display="none",this._noAuthView.style.display="")},isCorp:b.isCorp,isCorpCookie:b.isCorpCookie,setCorp:function(a){for(var e=0,c=a.length;e<c;e++)if("corp.mail.ru"===a[e].split("@")[1])return b.SCookie.setGlobal(this.isCorpCookie,(new Date).getTime()),!0;if((a=b.SCookie.getGlobal(this.isCorpCookie))&&
(new Date).getTime()>1*a+864E5)return b.SCookie.removeGlobal(this.isCorpCookie),!1},drawName:function(a,e){var c="";"string"!=typeof e?(this._userEmail.className=d.settings.multiAuthEnabled?"x-ph__menu__button__text x-ph__menu__button__text_auth":"x-ph__auth__user__text",c=a):(b.addClass(this._userEmail,"x-ph-ico x-ph-ico_"+this.getSocialId(a)+"_small"),c="&nbsp;"+e);return c},getSocialId:function(a){a=a.match(/^[0-9]+@(vk|ok|fb)$/);return null==a?void 0:a[1]}});var xa=!1;b.extend(b.AccountManager.prototype,
{updateCounters:function(a){var e={},a=a||{};if("mail"!=b.project&&!("home"==b.project&&d.settings.mailSplashUpdate)||!xa&&"mail"==b.project&&!d.settings.mailEvents)e.mail=a.mail_cnt||0;xa=!0;e.my=a.my_cnt||0;d.settings.disableGamesCounter||(e.games=a.games_cnt||0);this.updateNotifier(a);b.counters.update(e)},updateNotifier:function(a){var e=b.byId("PH_authMenu"),a=a.mail_notifier?parseInt(a.mail_notifier,10):0;b[(0==a?"remove":"add")+"Class"](e,"x-ph__menu_auth_unread")},_sendError:function(a){var e=
{updateError:1},c=d.settings.logDetails?{rlog:"navidata_errors",email:d.activeUser(),rlog_message:[]}:null;a.errorType&&(e["updateError_"+a.errorType]=1,c&&c.rlog_message.push(a.errorType));a.requestSource&&(e["updateError_"+a.requestSource]=1,c&&c.rlog_message.push(a.requestSource),a.errorType&&(e["updateError_"+a.errorType+"_"+a.requestSource]=1,c&&c.rlog_message.push(a.errorType)));c?b.radar(e,c):b.radar(e);this.emit("updateError")},_PHUpdater:function(a,e,c){function f(a){"ok"!=b.project&&d.settings.portalAuthEnabled&&
this.updateLogin(k,m);this.updateCounters(g);"function"===typeof a&&a()}var i=a.status,e=e||function(){};if("error"==i)this._sendError(a),e();else{var g=a.data,j=g.action,k=g.email,h=g.requestedLogin,l=b.bind(f,this),m="undefined"!==typeof g.soc_name?b.replaceUnsafeSymbols(g.soc_name):void 0;this.setCorp(g.list||[]);d.settings.portalAuthEnabled?"switch"==j?"disabled"==i?c?(b.radar({disabledUser:1,disabledUserRestore:1}),e()):(this.emit("disabledUser"),d.emit("disabledUser",a.data,function(){b.radar({disabledUser:1,
disabledUserSendToLogin:1});window.location="https://e.mail.ru/login?fail=1&d1&page="+encodeURIComponent(location.href)+"&email="+encodeURIComponent(k)})):"ok"==i&&k!=this.activeUser()?(this.emit("authChange"),(new Image).src="//r3.mail.ru/k?auth=1&rnd="+Math.random(),d.listeners("authChange")?(b.radar("authChange",1),!k||void 0!==g.mail_cnt?d.emit("authChange",a.data,function(){l(e)}):this.loadAccountInfo(b.bind(function(a){"error"==a.status?(this._sendError(a),e()):(g=b.extend(a.data,g),d.emit("authChange",
g,function(){l(e)}))},this),k)):c?(b.radar("authChangeReloadDis",1),!k||void 0!==g.mail_cnt?l(e):this.loadAccountInfo(b.bind(function(a){"error"==a.status?(this._sendError(a),e()):(g=b.extend(a.data,g),l(e))},this),k)):(b.radar("authChangeReload",1),b.setTimeout(function(){location.reload()},10))):"noauth"==i&&k!=this.activeUser()?("home"===b.project&&(i=[],i.push("headlineAuthLost"),i.push("mpop="+(d.cookie("Mpop")?"1":"0")),i.push("activeEmail="+this.activeUser()),i.push("newEmail="+k),(new Image).src=
"//gstat.imgsmail.ru/gstat?ua=1&logme="+encodeURIComponent(i.join(";"))+"&rnd="+(new Date).getTime()+Math.random()),-1!==g.list.indexOf(h)?__PH.authForm.show({type:"choice",email:h}):(b.radar("authLost",1),this.emit("authLost"),i=function(){a.status="ok";a.data.action="switch";this._PHUpdater(a,e,c)}.bind(this),d.emit("authLost",a.data,i))):(b.radar("authRestore",1),"function"===typeof e&&e()):"list"==j&&("____user"in this&&(this.____user!==k&&"mail"===b.project&&((new Image).src="//gstat.imgsmail.ru/gstat?logme="+
encodeURIComponent("headlineFail;headlineEmail="+k+";projectEmail="+this.____user)+"&rnd="+(new Date).getTime()+Math.random(),h={userMismatch:1},h["userMismatch_"+(k?"":"no")+"HeadlineUser"]=1,h["userMismatch_"+(this.____user?"":"no")+"ProjectUser"]=1,h["userMismatch_"+(this.____user?"":"no")+"PUser_"+(k?"":"no")+"HUser"]=1,b.radar(h)),delete this.____user),null===this.activeUser()?(d.settings.enableUpdateRadars&&b.radar("update",1),this.emit("update"),d.emit("update",a.data,function(){l(e)})):k==
this.activeUser()?((h=d.cookie("Mpop"))&&("ok"==i&&this.activeUser()&&-1==h.indexOf(this.activeUser()))&&b.count("d1409289"),d.settings.enableUpdateRadars&&b.radar("update",1),this.emit("update"),d.emit("update",a.data,function(){l(e)})):(a.data.action="switch",this._PHUpdater(a,e,!0))):(d.settings.enableUpdateRadars&&b.radar("update",1),this.emit("update"),d.emit("update",a.data,function(){l(e)}))}}});b.extend(b.AccountManager.prototype,{_authTransport:new b.Transport(d.settings.authDomain+"/cgi-bin/auth?mac=1",
{JSONPCallbackParam:"JSONP_call",requestSource:"auth"}),switchAccount:function(a,b,c){var d={};if(a){d.Login=a;var i=this.updateResume(b||function(){}),b=function(b){b.data&&(b.data.requestedLogin=a);this._PHUpdater(b,i,c)}.bind(this);this._authTransport.get({params:d,complete:b,timeout:3E4})}},_logoutTransport:new b.Transport(d.settings.authDomain+"/cgi-bin/logout?mac=1",{JSONPCallbackParam:"JSONP_call",requestSource:"logout"}),logoutAccount:function(a,b){var c={};if(a&&a!==this.activeUser())c.Login=
a;else throw Error("Can not logout. Not active account expected.");this._logoutTransport.get({params:c,complete:b})}});var Z=!1,ya;b.extend(b.AccountManager.prototype,{_accountInfoTransport:new b.Transport(d.settings.swaDomain+"/NaviData?mac=1&gamescnt=1&Socials=1",{JSONPCallbackParam:"JSONP_call",requestSource:"accountInfo"}),loadAccountInfo:function(a,b){var c={};if(b=!d.settings.multiAuthEnabled?void 0:b||this.activeUser())c.Login=b;this._accountInfoTransport.get({params:c,complete:function(b){"function"===
typeof a&&a(b)},timeout:3E4})},updateAccountInfo:function(a,b){if(!Z){var c=+new Date;if(this._updateByTimeout||!this._updateByTimeout&&this.updateLastRequest<c-this.updateRequestTimeout||b)!this._updateByTimeout&&this.updateLastRequest&&((new Image).src="//rs.mail.ru/d"+"31132326".replace("%","")+".gif?"+c),this.updateLastRequest=c,c=function(b){this._PHUpdater(b,a)}.bind(this),c=this.updateResume(c),this.loadAccountInfo(c)}},updateRequestTimeout:6E4,updateReset:function(a){this._updateByTimeout&&(a?
(a=this.updateRequestTimeout-(new Date).getTime()+this.updateLastRequest,0>a&&(a=0)):a=this.updateRequestTimeout,b.clearTimeout(this._listAccountTimeout),this._listAccountTimeout=b.setTimeout(b.bind(this.updateAccountInfo,this),a))},updateResume:function(a){if(this._updateByTimeout){var e=this._accountInfoTransport.isProcessing();this._accountInfoTransport.cancel();this.updateReset();var c=!1;this.once("authChange",function(a,b){c=!0;"function"===typeof b&&b()})}return b.bind(function(b){this._updateByTimeout&&
(e?c?this.updateReset():this.updateAccountInfo():c?this.updateReset():this.updateReset(!0));"function"==typeof a&&a(b)},this)},pauseUpdate:function(a,b){a?ya=setTimeout(function(){Z=!0},b):(clearTimeout(ya),Z=!1)}});Event.prototype.composedPath||(Event.prototype.composedPath=function(){for(var a=this.target,b=[];null!==a;)b.push(a),a=a.parentNode;return b});b.SCookie[(b.retina?"set":"remove")+"Global"]("rt",1);b.SCookie[(b.retina?"set":"remove")+"Global"]("dpr",b.dpr);d.settings.enableUpdateRadars=
b.percent(1);d.settings.multiAuthEnabled=d.settings.portalAuthEnabled;b.rbCounters=d.settings.isDuplicateCounters?{projectMenuOpen:"d61021872"}:{projectMenuOpen:"d23623877"};var za=!1,x=navigator.userAgent;if(~x.indexOf("Opera")&&(!~x.indexOf("Opera/9.8")||~x.indexOf("Version/10")||~x.indexOf("Version/11")||~x.indexOf("Opera/10")||~x.indexOf("Opera 10"))||window.____________ie7||~x.indexOf("Firefox/3."))d.settings.multiAuthEnabled=!1,d.settings.authFormEnabled=!1,za=!0;b.byId("PH_singleuser").style.display=
d.settings.multiAuthEnabled?"none":"block";b.byId("PH_miltiuser").style.display=d.settings.multiAuthEnabled?"block":"none";d.settings.projectsMenuEnabled=!1;za||(d.settings.projectsMenuEnabled=!0,b.byId("PH_projectsMenu").style.display="inline-block",b.byId("PH_allProjects").style.display="none",b.projectsMenuOpen=(new b.DeferredQuery).getQuery(),b.event(1,b.byId("PH_projectsMenu_button"),"click",b.projectsMenuOpen));d.settings.bizLinks&&(b.byId("PH_projectsMenu").style.display="none",b.byId("PH_allProjects").style.display=
"none");b.countEl(b.byId("PH_logoutLink"));b.event(1,b.byId("PH_logoutLink"),"mousedown",function(){b.count("clb75068944")});b.countEl(b.byId("PH_loginLink")||b.byId("PH_authLink"));b.extend(d,b.EventEmitter.prototype,{cookie:M});d.cookie.s={};b.extend(d.cookie.s,{getLocal:q.getLocal,setLocal:q.setLocal,removeLocal:q.removeLocal,getGlobal:q.getGlobal,setGlobal:q.setGlobal,removeGlobal:q.removeGlobal,setProject:q.setProject});var Aa="mail"!==b.project;b.accountManager=new b.AccountManager({noAuthView:b.byId("PH_noAuthView"),
authView:b.byId("PH_authView"),userEmail:b.byId(d.settings.multiAuthEnabled?"PH_user-email":"PH_user-email_disabled"),updateByTimeout:Aa});b.counters=new b.Counters({mail:"g_mail_events",my:"g_my_events",ok:"g_ok_events",games:"g_games_events",love:"g_love_events"});d.updateCounter=function(a){"sting"===typeof a||"number"===typeof a||void 0===a||null===a?b.counters._counters[b.project]&&b.counters.update(b.project,a):b.counters.update(a);Aa||b.accountManager.updateAccountInfo()};"mail"==b.project&&
window.jQuery&&window.jQuery(window).bind("updatemessagescount",function(a,b){d.updateCounter(b)});d.isMultiAuth=function(){return d.settings.multiAuthEnabled};d.activeUser=function(){if(d.settings.portalAuthEnabled){var a=b.accountManager.activeUser();return null===a?b.accountManager.____user:a}return b.byId("PH_user-email_disabled").innerHTML||void 0};d.settings.portalAuthEnabled&&(d.isCorp=function(){var a=d.activeUser();return"corp.mail.ru"==(a&&a.split("@")[1])},d.switchAccount=function(a,e){b.accountManager.switchAccount(a,
e)},d.logoutAccount=function(a,e){b.accountManager.logoutAccount(a,function(){b.accountManager.loadAccountsList(e)})});if(d.settings.multiAuthEnabled){var Ba=d.settings.eid?"_"+d.settings.eid:"";d.loadAccountsList=(new b.DeferredQuery).getQuery();v("extra_block_show"+Ba);if(performance.now){var gb=performance.now(),hb="time:"+Math.round(gb);v("app_init",hb)}d.settings.user||(v("login_counter_show"+Ba),b.timers.noAuthRender=1*new Date);d.on("visibilitychange",function(a){a.data.hidden?d.settings.pauseUpdate&&
b.accountManager.pauseUpdate(!0,d.settings.pauseUpdateTime||36E5):(null!==b.accountManager.activeUser()&&b.accountManager.activeUser()?b.accountManager.switchAccount(b.accountManager.activeUser(),null,!0):b.accountManager.updateAccountInfo(function(){},!0),d.settings.pauseUpdate&&b.accountManager.pauseUpdate())})}b.authMenu=new b.Menu({baseClass:"x-ph__menu",orientation:"right",rootNode:b.byId("PH_authMenu"),button:b.byId("PH_authMenu_button"),openCounter:"home"==b.project?"d1126003":"mail"==b.project?
"d1126002":"my"==b.project?"d1270901":"d1126005"});d.authMenu=new b.EventEmitter;d.authForm=new b.EventEmitter;var $=b.byId("PH_authMenu");$&&$.addEventListener("mousedown",function(a){var e=b.byId("PH_privateData"),c=b.byId("PH_passwordAndSecurity"),d=b.byId("PH_loginAnotherLink"),a=a.path||a.composedPath(),h;Array.prototype.forEach.call(a,function(a,b){a===$&&(h=b)});a=a.slice(0,h+1);0<=a.indexOf(e)?b.count("clb75068936"):0<=a.indexOf(c)?b.count("clb75068940"):0<=a.indexOf(d)&&b.count("home"==b.project?
"clb1126064":"mail"==b.project?"clb1126061":"my"==b.project?"clb1270902":"clb1126067")});d.settings.multiAuthEnabled&&(d.authMenu.show=b.authMenu.show.bind(b.authMenu),d.authMenu.hide=b.authMenu.hide.bind(b.authMenu));d.settings.authFormEnabled?(b.showQuery=(new b.DeferredQuery).getQuery(),d.authForm.show=function(){b.timers.render=1*new Date;b.showQuery.apply(this,arguments)},d.authForm.hide=(new b.DeferredQuery).getQuery(),d.authForm.insert=(new b.DeferredQuery).getQuery(),d.authForm.isVisible=
function(){return!1}):(d.authForm.show=function(a){var e=[];a||(a={});a.login&&a.domain&&e.push("email="+a.login+"@"+a.domain);a.successPage?e.push("page="+a.successPage):e.push("page="+("mail"==b.project||"home"==b.project?"https://e.mail.ru/messages/inbox?back=1":window.location.href));window.location="https://e.mail.ru/login?"+e.join("&")},d.authForm.hide=function(){},d.authForm.isVisible=function(){return b.authForm?b.authForm.isVisible():!1});b.authLinkClickHandler=function(a){var e=d.listeners("loginRequest"),
c=d.settings.eid?"_"+d.settings.eid:"",f=1*new Date-b.timers.noAuthRender<=(d.settings.botTimer||500);e?(b.eventPreventDefault(a),d.emit("loginRequest")):d.settings.authFormEnabled&&(b.eventPreventDefault(a),d.authForm.show());b.count("clb75068996");v("login_counter_click"+c);f&&v("bot_login_counter"+c)};b.event(1,b.byId("PH_authLink"),"click",b.authLinkClickHandler);b.registerLinkClickHandler=function(a){d.listeners("registerRequest")&&(b.eventPreventDefault(a),d.authForm.hide(),d.emit("registerRequest"));
b.count("clb75068995")};b.event(1,b.byId("PH_regLink"),"click",b.registerLinkClickHandler);d.isAuthFormEnabled=function(){return d.settings.authFormEnabled};if(d.settings.projectsMenuEnabled||d.settings.multiAuthEnabled||d.settings.authFormEnabled)d.settings.authGate&&ja(d.settings.authGateJS+(d.settings.authGateJSHasVer?"":"?_="+Math.random())),ja(d.settings.externalJS,!0);if(d.settings.isDuplicateCounters){var ib=[61021854,61021856,61021857,61021858,61021859,61021860,61021861,61021862,61021863,
61021866,61944424],jb=document.querySelector(".w-x-ph .w-x-ph__col_left");Array.from(jb.querySelectorAll(".x-ph__link")).filter(function(a){if("none"!=a.style.display)return!0}).forEach(function(a,e){var c=ib[e];b.event(1,a,"mousedown",function(){b.count("clb"+c)})})}d.settings.isShowDot&&(b.count("d80556828"),b.event(1,b.byId("PH_dot"),"mousedown",function(){b.count("clb80556828")}));v("hit");var Ca,aa=null;Ca=function(){var a=aa;aa=Date.now();(!a||1E4<aa-a)&&v("document_dragenter")};document.addEventListener("dragenter",
function(a){if(a=a.dataTransfer&&a.dataTransfer.types){var b=!1,c=!1;a.forEach(function(a){~a.indexOf("text")&&(c=!0);~a.indexOf("File")&&(b=!0)});b&&!c&&Ca()}},!0)}})(window.__PH,window.__PHS); //# sourceURL=https://img.imgsmail.ru/ph/0.65.31/inline.js