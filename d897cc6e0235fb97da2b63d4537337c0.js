/* >>> file start: js/lib/underscore.min.js */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};(function(){var n=this,t=n._,r={},e=Array.prototype,u=Object.prototype,i=Function.prototype,o=e.push,a=e.slice,c=e.concat,l=u.toString,f=u.hasOwnProperty,s=e.forEach,p=e.map,h=e.reduce,v=e.reduceRight,d=e.filter,y=e.every,m=e.some,g=e.indexOf,b=e.lastIndexOf,_=Array.isArray,x=Object.keys,j=i.bind,w=function z(n){return n instanceof z?n:this instanceof z?void(this._wrapped=n):new z(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=w),exports._=w):n._=w,w.VERSION="1.4.4";var A=w.each=w.forEach=function(n,t,e){if(null!=n)if(s&&n.forEach===s)n.forEach(t,e);else if(n.length===+n.length){for(var u=0,i=n.length;i>u;u++)if(t.call(e,n[u],u,n)===r)return}else for(var o in n)if(w.has(n,o)&&t.call(e,n[o],o,n)===r)return};w.map=w.collect=function(n,t,r){var e=[];return null==n?e:p&&n.map===p?n.map(t,r):(A(n,function(n,u,i){e[e.length]=t.call(r,n,u,i)}),e)};var O="Reduce of empty array with no initial value";w.reduce=w.foldl=w.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),h&&n.reduce===h)return e&&(t=w.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(A(n,function(n,i,o){u?r=t.call(e,r,n,i,o):(r=n,u=!0)}),!u)throw new TypeError(O);return r},w.reduceRight=w.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),v&&n.reduceRight===v)return e&&(t=w.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(i!==+i){var o=w.keys(n);i=o.length}if(A(n,function(a,c,l){c=o?o[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0)}),!u)throw new TypeError(O);return r},w.find=w.detect=function(n,t,r){var e;return E(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},w.filter=w.select=function(n,t,r){var e=[];return null==n?e:d&&n.filter===d?n.filter(t,r):(A(n,function(n,u,i){t.call(r,n,u,i)&&(e[e.length]=n)}),e)},w.reject=function(n,t,r){return w.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},w.every=w.all=function(n,t,e){t||(t=w.identity);var u=!0;return null==n?u:y&&n.every===y?n.every(t,e):(A(n,function(n,i,o){return(u=u&&t.call(e,n,i,o))?void 0:r}),!!u)};var E=w.some=w.any=function(n,t,e){t||(t=w.identity);var u=!1;return null==n?u:m&&n.some===m?n.some(t,e):(A(n,function(n,i,o){return u||(u=t.call(e,n,i,o))?r:void 0}),!!u)};w.contains=w.include=function(n,t){return null==n?!1:g&&n.indexOf===g?-1!=n.indexOf(t):E(n,function(n){return n===t})},w.invoke=function(n,t){var r=a.call(arguments,2),e=w.isFunction(t);return w.map(n,function(n){return(e?t:n[t]).apply(n,r)})},w.pluck=function(n,t){return w.map(n,function(n){return n[t]})},w.where=function(n,t,r){return w.isEmpty(t)?r?null:[]:w[r?"find":"filter"](n,function(n){for(var r in t)if(t[r]!==n[r])return!1;return!0})},w.findWhere=function(n,t){return w.where(n,t,!0)},w.max=function(n,t,r){if(!t&&w.isArray(n)&&n[0]===+n[0]&&65535>n.length)return Math.max.apply(Math,n);if(!t&&w.isEmpty(n))return-1/0;var e={computed:-1/0,value:-1/0};return A(n,function(n,u,i){var o=t?t.call(r,n,u,i):n;o>=e.computed&&(e={value:n,computed:o})}),e.value},w.min=function(n,t,r){if(!t&&w.isArray(n)&&n[0]===+n[0]&&65535>n.length)return Math.min.apply(Math,n);if(!t&&w.isEmpty(n))return 1/0;var e={computed:1/0,value:1/0};return A(n,function(n,u,i){var o=t?t.call(r,n,u,i):n;e.computed>o&&(e={value:n,computed:o})}),e.value},w.shuffle=function(n){var t,r=0,e=[];return A(n,function(n){t=w.random(r++),e[r-1]=e[t],e[t]=n}),e};var k=function(n){return w.isFunction(n)?n:function(t){return t[n]}};w.sortBy=function(n,t,r){var e=k(t);return w.pluck(w.map(n,function(n,t,u){return{value:n,index:t,criteria:e.call(r,n,t,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return n.index<t.index?-1:1}),"value")};var F=function(n,t,r,e){var u={},i=k(t||w.identity);return A(n,function(t,o){var a=i.call(r,t,o,n);e(u,a,t)}),u};w.groupBy=function(n,t,r){return F(n,t,r,function(n,t,r){(w.has(n,t)?n[t]:n[t]=[]).push(r)})},w.countBy=function(n,t,r){return F(n,t,r,function(n,t){w.has(n,t)||(n[t]=0),n[t]++})},w.sortedIndex=function(n,t,r,e){r=null==r?w.identity:k(r);for(var u=r.call(e,t),i=0,o=n.length;o>i;){var a=i+o>>>1;u>r.call(e,n[a])?i=a+1:o=a}return i},w.toArray=function(n){return n?w.isArray(n)?a.call(n):n.length===+n.length?w.map(n,w.identity):w.values(n):[]},w.size=function(n){return null==n?0:n.length===+n.length?n.length:w.keys(n).length},w.first=w.head=w.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:a.call(n,0,t)},w.initial=function(n,t,r){return a.call(n,0,n.length-(null==t||r?1:t))},w.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:a.call(n,Math.max(n.length-t,0))},w.rest=w.tail=w.drop=function(n,t,r){return a.call(n,null==t||r?1:t)},w.compact=function(n){return w.filter(n,w.identity)};var S=function C(n,t,r){return A(n,function(n){w.isArray(n)?t?o.apply(r,n):C(n,t,r):r.push(n)}),r};w.flatten=function(n,t){return S(n,t,[])},w.without=function(n){return w.difference(n,a.call(arguments,1))},w.uniq=w.unique=function(n,t,r,e){w.isFunction(t)&&(e=r,r=t,t=!1);var u=r?w.map(n,r,e):n,i=[],o=[];return A(u,function(r,e){(t?e&&o[o.length-1]===r:w.contains(o,r))||(o.push(r),i.push(n[e]))}),i},w.union=function(){return w.uniq(c.apply(e,arguments))},w.intersection=function(n){var t=a.call(arguments,1);return w.filter(w.uniq(n),function(n){return w.every(t,function(t){return w.indexOf(t,n)>=0})})},w.difference=function(n){var t=c.apply(e,a.call(arguments,1));return w.filter(n,function(n){return!w.contains(t,n)})},w.zip=function(){for(var n=a.call(arguments),t=w.max(w.pluck(n,"length")),r=Array(t),e=0;t>e;e++)r[e]=w.pluck(n,""+e);return r},w.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},w.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=w.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}if(g&&n.indexOf===g)return n.indexOf(t,r);for(;u>e;e++)if(n[e]===t)return e;return-1},w.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(b&&n.lastIndexOf===b)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},w.range=function(n,t,r){1>=arguments.length&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=Array(e);e>u;)i[u++]=n,n+=r;return i},w.bind=function(n,t){if(n.bind===j&&j)return j.apply(n,a.call(arguments,1));var r=a.call(arguments,2);return function(){return n.apply(t,r.concat(a.call(arguments)))}},w.partial=function(n){var t=a.call(arguments,1);return function(){return n.apply(this,t.concat(a.call(arguments)))}},w.bindAll=function(n){var t=a.call(arguments,1);return 0===t.length&&(t=w.functions(n)),A(t,function(t){n[t]=w.bind(n[t],n)}),n},w.memoize=function(n,t){var r={};return t||(t=w.identity),function(){var e=t.apply(this,arguments);return w.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},w.delay=function(n,t){var r=a.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},w.defer=function(n){return w.delay.apply(w,[n,1].concat(a.call(arguments,1)))},w.throttle=function(n,t){var r,e,u,i,o=0,a=function(){o=new Date,u=null,i=n.apply(r,e)};return function(){var c=new Date,l=t-(c-o);return r=this,e=arguments,0>=l?(clearTimeout(u),u=null,o=c,i=n.apply(r,e)):u||(u=setTimeout(a,l)),i}},w.debounce=function(n,t,r){var e,u;return function(){var i=this,o=arguments,a=function(){e=null,r||(u=n.apply(i,o))},c=r&&!e;return clearTimeout(e),e=setTimeout(a,t),c&&(u=n.apply(i,o)),u}},w.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}},w.wrap=function(n,t){return function(){var r=[n];return o.apply(r,arguments),t.apply(this,r)}},w.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},w.after=function(n,t){return 0>=n?t():function(){return 1>--n?t.apply(this,arguments):void 0}},w.keys=x||function(n){if(n!==Object(n))throw new TypeError("Invalid object");var t=[];for(var r in n)w.has(n,r)&&(t[t.length]=r);return t},w.values=function(n){var t=[];for(var r in n)w.has(n,r)&&t.push(n[r]);return t},w.pairs=function(n){var t=[];for(var r in n)w.has(n,r)&&t.push([r,n[r]]);return t},w.invert=function(n){var t={};for(var r in n)w.has(n,r)&&(t[n[r]]=r);return t},w.functions=w.methods=function(n){var t=[];for(var r in n)w.isFunction(n[r])&&t.push(r);return t.sort()},w.extend=function(n){return A(a.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},w.pick=function(n){var t={},r=c.apply(e,a.call(arguments,1));return A(r,function(r){r in n&&(t[r]=n[r])}),t},w.omit=function(n){var t={},r=c.apply(e,a.call(arguments,1));for(var u in n)w.contains(r,u)||(t[u]=n[u]);return t},w.defaults=function(n){return A(a.call(arguments,1),function(t){if(t)for(var r in t)null==n[r]&&(n[r]=t[r])}),n},w.clone=function(n){return w.isObject(n)?w.isArray(n)?n.slice():w.extend({},n):n},w.tap=function(n,t){return t(n),n};var R=function P(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof w&&(n=n._wrapped),t instanceof w&&(t=t._wrapped);var u=l.call(n);if(u!=l.call(t))return!1;switch(u){case"[object String]":return n==t+"";case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=("undefined"==typeof n?"undefined":_typeof(n))||"object"!=("undefined"==typeof t?"undefined":_typeof(t)))return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;r.push(n),e.push(t);var o=0,a=!0;if("[object Array]"==u){if(o=n.length,a=o==t.length)for(;o--&&(a=P(n[o],t[o],r,e)););}else{var c=n.constructor,f=t.constructor;if(c!==f&&!(w.isFunction(c)&&c instanceof c&&w.isFunction(f)&&f instanceof f))return!1;for(var s in n)if(w.has(n,s)&&(o++,!(a=w.has(t,s)&&P(n[s],t[s],r,e))))break;if(a){for(s in t)if(w.has(t,s)&&!o--)break;a=!o}}return r.pop(),e.pop(),a};w.isEqual=function(n,t){return R(n,t,[],[])},w.isEmpty=function(n){if(null==n)return!0;if(w.isArray(n)||w.isString(n))return 0===n.length;for(var t in n)if(w.has(n,t))return!1;return!0},w.isElement=function(n){return!(!n||1!==n.nodeType)},w.isArray=_||function(n){return"[object Array]"==l.call(n)},w.isObject=function(n){return n===Object(n)},A(["Arguments","Function","String","Number","Date","RegExp"],function(n){w["is"+n]=function(t){return l.call(t)=="[object "+n+"]"}}),w.isArguments(arguments)||(w.isArguments=function(n){return!(!n||!w.has(n,"callee"))}),"function"!=typeof/./&&(w.isFunction=function(n){return"function"==typeof n}),w.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},w.isNaN=function(n){return w.isNumber(n)&&n!=+n},w.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==l.call(n)},w.isNull=function(n){return null===n},w.isUndefined=function(n){return void 0===n},w.has=function(n,t){return f.call(n,t)},w.noConflict=function(){return n._=t,this},w.identity=function(n){return n},w.times=function(n,t,r){for(var e=Array(n),u=0;n>u;u++)e[u]=t.call(r,u);return e},w.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};I.unescape=w.invert(I.escape);var M={escape:RegExp("["+w.keys(I.escape).join("")+"]","g"),unescape:RegExp("("+w.keys(I.unescape).join("|")+")","g")};w.each(["escape","unescape"],function(n){w[n]=function(t){return null==t?"":(""+t).replace(M[n],function(t){return I[n][t]})}}),w.result=function(n,t){if(null==n)return null;var r=n[t];return w.isFunction(r)?r.call(n):r},w.mixin=function(n){A(w.functions(n),function(t){var r=w[t]=n[t];w.prototype[t]=function(){var n=[this._wrapped];return o.apply(n,arguments),D.call(this,r.apply(w,n))}})};var N=0;w.uniqueId=function(n){var t=++N+"";return n?n+t:t},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var T=/(.)^/,q={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;w.template=function(n,t,r){var e;r=w.defaults({},r,w.templateSettings);var u=RegExp([(r.escape||T).source,(r.interpolate||T).source,(r.evaluate||T).source].join("|")+"|$","g"),i=0,o="__p+='";n.replace(u,function(t,r,e,u,a){return o+=n.slice(i,a).replace(B,function(n){return"\\"+q[n]}),r&&(o+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(o+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),u&&(o+="';\n"+u+"\n__p+='"),i=a+t.length,t}),o+="';\n",r.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{e=Function(r.variable||"obj","_",o)}catch(a){throw a.source=o,a}if(t)return e(t,w);var c=function(n){return e.call(this,n,w)};return c.source="function("+(r.variable||"obj")+"){\n"+o+"}",c},w.chain=function(n){return w(n).chain()};var D=function(n){return this._chain?w(n).chain():n};w.mixin(w),A(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=e[n];w.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],D.call(this,r)}}),A(["concat","join","slice"],function(n){var t=e[n];w.prototype[n]=function(){return D.call(this,t.apply(this._wrapped,arguments))}}),w.extend(w.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);
/* <<< file end: js/lib/underscore.min.js */

//# map link was there [underscore.min.js.map]
/* >>> file start: js/lib/backbone.min.js */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(){var t,e=this,i=e.Backbone,n=[],s=n.push,r=n.slice,o=n.splice;t="undefined"!=typeof exports?exports:e.Backbone={},t.VERSION="1.0.0";var a=e._;a||"undefined"==typeof require||(a=require("underscore")),t.$=e.jQuery||e.Zepto||e.ender||e.$,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var h=t.Events={on:function(t,e,i){if(!c(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,i){if(!c(this,"once",t,[e,i])||!e)return this;var n=this,s=a.once(function(){n.off(t,s),e.apply(this,arguments)});return s._callback=e,this.on(t,s,i)},off:function(t,e,i){var n,s,r,o,h,u,l,d;if(!this._events||!c(this,"off",t,[e,i]))return this;if(!t&&!e&&!i)return this._events={},this;for(o=t?[t]:a.keys(this._events),h=0,u=o.length;u>h;h++)if(t=o[h],r=this._events[t]){if(this._events[t]=n=[],e||i)for(l=0,d=r.length;d>l;l++)s=r[l],(e&&e!==s.callback&&e!==s.callback._callback||i&&i!==s.context)&&n.push(s);n.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=r.call(arguments,1);if(!c(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&l(i,e),n&&l(n,arguments),this},stopListening:function(t,e,i){var n=this._listeners;if(!n)return this;var s=!e&&!i;"object"===("undefined"==typeof e?"undefined":_typeof(e))&&(i=this),t&&((n={})[t._listenerId]=t);for(var r in n)n[r].off(e,i,this),s&&delete this._listeners[r];return this}},u=/\s+/,c=function(t,e,i,n){if(!i)return!0;if("object"===("undefined"==typeof i?"undefined":_typeof(i))){for(var s in i)t[e].apply(t,[s,i[s]].concat(n));return!1}if(u.test(i)){for(var r=i.split(u),o=0,a=r.length;a>o;o++)t[e].apply(t,[r[o]].concat(n));return!1}return!0},l=function(t,e){var i,n=-1,s=t.length,r=e[0],o=e[1],a=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,o);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,o,a);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e)}},d={listenTo:"on",listenToOnce:"once"};a.each(d,function(t,e){h[e]=function(e,i,n){var s=this._listeners||(this._listeners={}),r=e._listenerId||(e._listenerId=a.uniqueId("l"));return s[r]=e,"object"===("undefined"==typeof i?"undefined":_typeof(i))&&(n=this),e[t](i,n,this),this}}),h.bind=h.on,h.unbind=h.off,a.extend(t,h);var f=t.Model=function(t,e){var i,n=t||{};e||(e={}),this.cid=a.uniqueId("c"),this.attributes={},a.extend(this,a.pick(e,p)),e.parse&&(n=this.parse(n,e)||{}),(i=a.result(this,"defaults"))&&(n=a.defaults({},n,i)),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)},p=["url","urlRoot","collection"];a.extend(f.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return a.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return a.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,i){var n,s,r,o,h,u,c,l;if(null==t)return this;if("object"===("undefined"==typeof t?"undefined":_typeof(t))?(s=t,i=e):(s={})[t]=e,i||(i={}),!this._validate(s,i))return!1;r=i.unset,h=i.silent,o=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=a.clone(this.attributes),this.changed={}),l=this.attributes,c=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(n in s)e=s[n],a.isEqual(l[n],e)||o.push(n),a.isEqual(c[n],e)?delete this.changed[n]:this.changed[n]=e,r?delete l[n]:l[n]=e;if(!h){o.length&&(this._pending=!0);for(var d=0,f=o.length;f>d;d++)this.trigger("change:"+o[d],this,l[o[d]],i)}if(u)return this;if(!h)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,a.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,a.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!a.isEmpty(this.changed):a.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?a.clone(this.changed):!1;var e,i=!1,n=this._changing?this._previousAttributes:this.attributes;for(var s in t)a.isEqual(n[s],e=t[s])||((i||(i={}))[s]=e);return i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return a.clone(this._previousAttributes)},fetch:function(t){t=t?a.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,i=t.success;return t.success=function(n){return e.set(e.parse(n,t),t)?(i&&i(e,n,t),void e.trigger("sync",e,n,t)):!1},R(this,t),this.sync("read",this,t)},save:function(t,e,i){var n,s,r,o=this.attributes;if(null==t||"object"===("undefined"==typeof t?"undefined":_typeof(t))?(n=t,i=e):(n={})[t]=e,n&&(!i||!i.wait)&&!this.set(n,i))return!1;if(i=a.extend({validate:!0},i),!this._validate(n,i))return!1;n&&i.wait&&(this.attributes=a.extend({},o,n)),void 0===i.parse&&(i.parse=!0);var h=this,u=i.success;return i.success=function(t){h.attributes=o;var e=h.parse(t,i);return i.wait&&(e=a.extend(n||{},e)),a.isObject(e)&&!h.set(e,i)?!1:(u&&u(h,t,i),void h.trigger("sync",h,t,i))},R(this,i),s=this.isNew()?"create":i.patch?"patch":"update","patch"===s&&(i.attrs=n),r=this.sync(s,this,i),n&&i.wait&&(this.attributes=o),r},destroy:function(t){t=t?a.clone(t):{};var e=this,i=t.success,n=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(s){(t.wait||e.isNew())&&n(),i&&i(e,s,t),e.isNew()||e.trigger("sync",e,s,t)},this.isNew())return t.success(),!1;R(this,t);var s=this.sync("delete",this,t);return t.wait||n(),s},url:function(){var t=a.result(this,"urlRoot")||a.result(this.collection,"url")||U();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},a.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=a.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return i?(this.trigger("invalid",this,i,a.extend(e||{},{validationError:i})),!1):!0}});var g=["keys","values","pairs","invert","pick","omit"];a.each(g,function(t){f.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.attributes),a[t].apply(a,e)}});var v=t.Collection=function(t,e){e||(e={}),e.url&&(this.url=e.url),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,a.extend({silent:!0},e))},m={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};a.extend(v.prototype,h,{model:f,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return t.sync.apply(this,arguments)},add:function(t,e){return this.set(t,a.defaults(e||{},y))},remove:function(t,e){t=a.isArray(t)?t.slice():[t],e||(e={});var i,n,s,r;for(i=0,n=t.length;n>i;i++)r=this.get(t[i]),r&&(delete this._byId[r.id],delete this._byId[r.cid],s=this.indexOf(r),this.models.splice(s,1),this.length--,e.silent||(e.index=s,r.trigger("remove",r,this,e)),this._removeReference(r));return this},set:function(t,e){e=a.defaults(e||{},m),e.parse&&(t=this.parse(t,e)),a.isArray(t)||(t=t?[t]:[]);var i,n,r,h,u,c=e.at,l=this.comparator&&null==c&&e.sort!==!1,d=a.isString(this.comparator)?this.comparator:null,f=[],p=[],g={};for(i=0,n=t.length;n>i;i++)(r=this._prepareModel(t[i],e))&&((h=this.get(r))?(e.remove&&(g[h.cid]=!0),e.merge&&(h.set(r.attributes,e),l&&!u&&h.hasChanged(d)&&(u=!0))):e.add&&(f.push(r),r.on("all",this._onModelEvent,this),this._byId[r.cid]=r,null!=r.id&&(this._byId[r.id]=r)));if(e.remove){for(i=0,n=this.length;n>i;++i)g[(r=this.models[i]).cid]||p.push(r);p.length&&this.remove(p,e)}if(f.length&&(l&&(u=!0),this.length+=f.length,null!=c?o.apply(this.models,[c,0].concat(f)):s.apply(this.models,f)),u&&this.sort({silent:!0}),e.silent)return this;for(i=0,n=f.length;n>i;i++)(r=f[i]).trigger("add",r,this,e);return u&&this.trigger("sort",this,e),this},reset:function(t,e){e||(e={});for(var i=0,n=this.models.length;n>i;i++)this._removeReference(this.models[i]);return e.previousModels=this.models,this._reset(),this.add(t,a.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,a.extend({at:this.length},e)),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,a.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(t,e){return this.models.slice(t,e)},get:function(t){return null!=t?this._byId[null!=t.id?t.id:t.cid||t]:void 0},at:function(t){return this.models[t]},where:function(t,e){return a.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),a.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(a.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},sortedIndex:function(t,e,i){e||(e=this.comparator);var n=a.isFunction(e)?e:function(t){return t.get(e)};return a.sortedIndex(this.models,t,n,i)},pluck:function(t){return a.invoke(this.models,"get",t)},fetch:function(t){t=t?a.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,i=this;return t.success=function(n){var s=t.reset?"reset":"set";i[s](n,t),e&&e(i,n,t),i.trigger("sync",i,n,t)},R(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?a.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var i=this,n=e.success;return e.success=function(s){e.wait&&i.add(t,e),n&&n(t,s,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof f)return t.collection||(t.collection=this),t;e||(e={}),e.collection=this;var i=new this.model(t,e);return i._validate(t,e)?i:(this.trigger("invalid",this,t,e),!1)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var _=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];a.each(_,function(t){v.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.models),a[t].apply(a,e)}});var b=["groupBy","countBy","sortBy"];a.each(b,function(t){v.prototype[t]=function(e,i){var n=a.isFunction(e)?e:function(t){return t.get(e)};return a[t](this.models,n,i)}});var w=t.View=function(t){this.cid=a.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},x=/^(\S+)\s*(.*)$/,E=["model","collection","el","id","attributes","className","tagName","events"];a.extend(w.prototype,h,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,i){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=a.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var i=t[e];if(a.isFunction(i)||(i=this[t[e]]),i){var n=e.match(x),s=n[1],r=n[2];i=a.bind(i,this),s+=".delegateEvents"+this.cid,""===r?this.$el.on(s,i):this.$el.on(s,r,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(t){this.options&&(t=a.extend({},a.result(this,"options"),t)),a.extend(this,a.pick(t,E)),this.options=t},_ensureElement:function(){if(this.el)this.setElement(a.result(this,"el"),!1);else{var e=a.extend({},a.result(this,"attributes"));this.id&&(e.id=a.result(this,"id")),this.className&&(e["class"]=a.result(this,"className"));var i=t.$("<"+a.result(this,"tagName")+">").attr(e);this.setElement(i,!1)}}}),t.sync=function(e,i,n){var s=S[e];a.defaults(n||(n={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var r={type:s,dataType:"json"};if(n.url||(r.url=a.result(i,"url")||U()),null!=n.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(r.contentType="application/json",r.data=JSON.stringify(n.attrs||i.toJSON(n))),n.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),n.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){r.type="POST",n.emulateJSON&&(r.data._method=s);var o=n.beforeSend;n.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",s),o?o.apply(this,arguments):void 0}}"GET"===r.type||n.emulateJSON||(r.processData=!1),"PATCH"!==r.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var h=n.xhr=t.ajax(a.extend(r,n));return i.trigger("request",i,h,n),h};var S={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var k=t.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},$=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,H=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;a.extend(k.prototype,h,{initialize:function(){},route:function(e,i,n){a.isRegExp(e)||(e=this._routeToRegExp(e)),a.isFunction(i)&&(n=i,i=""),n||(n=this[i]);var s=this;return t.history.route(e,function(r){var o=s._extractParameters(e,r);n&&n.apply(s,o),s.trigger.apply(s,["route:"+i].concat(o)),s.trigger("route",i,o),t.history.trigger("route",s,i,o)}),this},navigate:function(e,i){return t.history.navigate(e,i),this},_bindRoutes:function(){if(this.routes){this.routes=a.result(this,"routes");for(var t,e=a.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(A,"\\$&").replace($,"(?:$1)?").replace(T,function(t,e){return e?t:"([^/]+)"}).replace(H,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return a.map(i,function(t){return t?decodeURIComponent(t):null})}});var I=t.History=function(){this.handlers=[],a.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},N=/^[#\/]|\s+$/g,P=/^\/+|\/+$/g,O=/msie [\w.]+/,C=/\/$/;I.started=!1,a.extend(I.prototype,h,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var i=this.root.replace(C,"");t.indexOf(i)||(t=t.substr(i.length))}else t=this.getHash();return t.replace(N,"")},start:function(e){if(I.started)throw new Error("Backbone.history has already been started");I.started=!0,this.options=a.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),n=document.documentMode,s=O.exec(navigator.userAgent.toLowerCase())&&(!n||7>=n);this.root=("/"+this.root+"/").replace(P,"/"),s&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(i)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var r=this.location,o=r.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!o?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&o&&r.hash&&(this.fragment=this.getHash().replace(N,""),this.history.replaceState({},document.title,this.root+this.fragment+r.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),I.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(t){var e=this.fragment=this.getFragment(t),i=a.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0});return i},navigate:function(t,e){if(!I.started)return!1;if(e&&e!==!0||(e={trigger:e}),t=this.getFragment(t||""),this.fragment!==t){this.fragment=t;var i=this.root+t;if(this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}e.trigger&&this.loadUrl(t)}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),t.history=new I;var j=function(t,e){var i,n=this;i=t&&a.has(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)},a.extend(i,n,e);var s=function(){this.constructor=i};return s.prototype=n.prototype,i.prototype=new s,t&&a.extend(i.prototype,t),i.__super__=n.prototype,i};f.extend=v.extend=k.extend=w.extend=I.extend=j;var U=function(){throw new Error('A "url" property or function must be specified')},R=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}}}).call(this);
/* <<< file end: js/lib/backbone.min.js */

//# map link was there [backbone.min.js.map]
/* >>> file start: js/mainpage/ljtoday.js */
//= require js/lib/underscore.min.js
//= require js/lib/backbone.min.js
!function(e,t,i){"use strict";var n,d;n=i.Model.extend({defaults:{index:0},validate:function(e){var t=this.get("total")-1;return e.index>t?(this.set("index",0),!0):e.index<0?(this.set("index",t),!0):void 0}}),d=i.View.extend({events:{"click .b-ljtoday-nav-prev":"previous","click .b-ljtoday-nav-next":"next"},initialize:function(){var e=this.$(".b-ljtoday-item");this.model.set("total",e.length),e.hide().eq(0).show(),this.model.on("change:index",function(t,i){e.eq(t.previous("index")).fadeOut().end().eq(i).fadeIn()},this)},previous:function(){this.model.set({index:this.model.get("index")-1},{validate:!0})},next:function(){this.model.set({index:this.model.get("index")+1},{validate:!0})}}),e(function(){new d({model:new n,el:".b-ljtoday"})})}(jQuery,_,Backbone);
/* <<< file end: js/mainpage/ljtoday.js */

//# map link was there [ljtoday.js.map]
/* >>> file start: js/mainpage/promo.js */
!function(t){return t}(),function(t,e,i){window.Promo=i.Model.extend({defaults:{index:0,total:1,preload:4,location:LiveJournal.parseGetArgs().rating||LJ.get("rating_locale")},validate:function(t){var e=this;return this.get("animating")?!0:t.index<this.get("lastIndex")||t.index<=-30?(this.set("end",!0),!0):this.get("total")+t.index<=0?(this.fetch({success:function(){e.set("total",e.get("total")+e.get("slots").length),t.index&&e.get("slots").length>0&&e.set("index",t.index)}}),!0):void 0},rpc:{self:"selfpromo.get_list",comm:"commpromo.get_list"},sync:function(t,e,i){var o=this;o.set("loading",!0),LJ.Api.call(this.rpc[this.get("type")],{region:this.get("location"),type:"entry",offset:-this.get("total"),limit:0===this.get("total")?-1:-2},function(t){i.success(t),o.set("loading",!1)})},parse:function(t){return t.slots.forEach(function(t){t.overbet=t.buyout}),t},initialize:function(){this.on("change:slots",function(t,e){0===e.length&&(this.set("lastIndex",this.get("index")),this.set("end",!0))},this)}}),window.PromoView=i.View.extend({events:{"click .b-ljpromo-nav-prev":"previous","click .b-ljpromo-nav-next":"next"},initialize:function(){t(window).on("resize",this.update.bind(this)),this.model.on("change:total",this.render,this),this.model.on("change:index",function(t,e){var i=this,o=e-t.previous("index");this.model.set("animating",!0),this.$(".b-ljpromo-items").animate({"margin-left":(0>o?"+=":"-=")+this.blockWidth},function(){setTimeout(function(){i.model.set("animating",!1)},0)}),this.$el.toggleClass("b-ljpromo-start",0===e)},this),this.model.on("change:loading",function(t,e){this.$el.toggleClass("b-ljpromo-loading",e)},this),this.model.on("change:end",function(t){this.$el.toggleClass("b-ljpromo-end",this.model.get("end"))},this),this.model.on("change:location",function(){var t=this;this.model.set("locationSwitched",!0),t.$el.addClass("b-ljpromo-preloading"),t.$(".b-ljpromo-items").empty(),t.model.set({total:0,index:0},{silent:!0}),t.model.unset("lastIndex"),t.model.unset("end"),t.model.fetch({success:function(){var e=t.model.get("slots").length&&"free"===t.model.get("slots")[0].state;t.$el.toggleClass("b-ljpromo-start",!0),t.$el.toggleClass("b-ljpromo-empty",e),e||t.model.set("total",t.model.get("total")+t.model.get("slots").length),t.$el.removeClass("b-ljpromo-preloading")}})},this),this.trackGoogleAnalytics()},updatePosition:function(){var t=this.model.get("total")+this.model.get("index")-1;this.$(".b-ljpromo-items").css("margin-left",-this.blockWidth*t)},updateWidth:function(){this.$(".b-ljpromo-item").css("width",this.blockWidth)},update:function(){var t=this.$(".b-ljpromo-container");t.is(":visible")&&(this.blockWidth=t.width(),this.updateWidth(),this.updatePosition())},previous:function(){this.model.get("animating")||this.model.get("loading")||this.model.set({index:this.model.get("index")-1},{validate:!0})},next:function(){return this.model.get("end")?void this.model.set("end",!1):void(this.model.get("animating")||this.model.get("loading")||this.model.set({index:this.model.get("index")+1}))},ml:{self:"selfpromo",comm:"calendarpromo"},render:function(){var e=this,i=this.model.get("slots");i.forEach(function(i){"free"!==i.state&&e.$(".b-ljpromo-items").prepend(jQuery("<li/>",{"class":"b-ljpromo-item"}).append(LJ.UI.template("templates-Widgets-entryunit",LJ.Flags.isEnabled("homepage_v3")?t.extend({},i.object[0],{homepage_version:3}):i.object[0])))}),this.model.get("locationSwitched")&&(this.model.get("is_cyr_user")&&this.$el.find(".b-ljpromo-stat").html(LJ.ml("main.promo.footer."+this.ml[this.model.get("type")]+("self"===this.model.get("type")?"."+this.model.get("location"):""),i[0])),this.model.set("locationSwitched",!1)),this.$el.addClass("b-ljpromo-scroll"),this.update()},trackGoogleAnalytics:function(){var e=this;this.$el.on("click",".b-entryunit-title",function(){var i=e.$el.find(".b-ljpromo-items").children(),o=i.index(t(this).closest(".b-ljpromo-item"));-1!==o&&LJ.Track.event("Homepage","Promo click",[e.model.get("type"),e.model.get("location"),i.length-o].join("-"))})}}),window.MustRead=i.Model.extend({sync:function(t,e,i){var o=this;this.set("loading",!0),LJ.Api.call("homepage.get_mustread",{locale:this.get("location")},function(t){i.success(t),o.set("loading",!1)})},initialize:function(){this.on("change:location",function(){this.fetch({reset:!0})})},hide:function(){this.trigger("hide")}}),window.MustReadView=i.View.extend({initialize:function(){this.model.on("change:body",this.render,this),this.model.on("change:loading",function(t,e){this.$el.toggleClass("b-ljmustread-preloading",e)},this),this.model.on("hide",function(){this.$el.addClass("b-ljmustread-hidden")},this)},render:function(){var t=this.model.get("body");this.$(".b-ljmustread-wrapper").html(t),this.$el.toggleClass("b-ljmustread-hidden",0===t.length)}})}(jQuery,_,Backbone);
/* <<< file end: js/mainpage/promo.js */

//# map link was there [promo.js.map]
/* >>> file start: js/core/angular/activity.js */
!function(){"use strict";function t(t,n){function c(){return u}function e(t){u=t}function i(){n.cancel(o),e(!0),o=n(e.bind(this,!1),9e5)}var u,o;return i(),t.on("click touchstart touchend keydown mousemove mousewheel",LJ.Function.debounce(i,100,!0)),{isActive:c}}angular.module("LJ.Activity",[]),angular.module("LJ.Activity").factory("Activity",t),t.$inject=["$document","$timeout"]}();
/* <<< file end: js/core/angular/activity.js */

//# map link was there [activity.js.map]
/* >>> file start: js/core/angular/api.js */
//!= require js/core/angular/messages.js
//= require js/core/angular/activity.js
!function(){"use strict";function e(e,t,n,c,r,i){function s(e,t){return"undefined"==typeof t?e:e+angular.toJson(a(t))}function a(e){var t;return angular.isObject(e)?(t={},Object.keys(e).sort().forEach(function(n){t[n]=a(e[n])}),t):e}function o(e,t){f.remove(s(e,t))}function u(t,a,o,u){var g,l,p=c.defer(),d={cache:!1,silent:!1,meta:!1},m=!1;return i.isActive()?(angular.isObject(a)&&null!==a||(a={}),angular.isObject(o)&&(u=o,o=null),u=angular.extend(d,u||{}),l=s(t,a),u.cache&&(g=f.get(l),g&&(m=!0)),m||(g=p.promise,LJ.Api.call(t,a,function(t){e(function(){t.error?p.reject(t.error):p.resolve(t),n.$apply()},0)}),u.cache&&f.put(l,g)),LJ.Event.trigger("api:request:change",t,!0),g.then(function(){LJ.Event.trigger("api:request:change",t,!1)}),u.silent||g.then(function(e){if(!u.silentSuccess){var t={};"undefined"!=typeof e.message&&(angular.isString(e.message)?(t.body=e.message,t.type="success"):(t.body=e.message.content,t.type="success"),r.add(t))}},function(e){"undefined"!=typeof e.message&&1!==e.code&&r.error({body:e.message})}),u.meta&&(g=g.then(function(e){return{response:e,fromCache:m}})),angular.isFunction(o)&&g.then(o),g):(p.reject(),p.promise)}var g={call:u,invalidate:o},f=t("LJApiPromises");return g}e.$inject=["$timeout","$cacheFactory","$rootScope","$q","Messages","Activity"],angular.module("LJ.Api",["LJ.Messages","LJ.Activity"]).factory("Api",e),e.$inject=["$timeout","$cacheFactory","$rootScope","$q","Messages","Activity"]}();
/* <<< file end: js/core/angular/api.js */

//# map link was there [api.js.map]
/* >>> file start: js/core/angular/options.js */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};angular.module("LJ.Options",[]).factory("Options",[function(){return{create:function(t){function n(n,o){"undefined"==typeof o?angular.extend(t,n):t[n]=o}function o(n){return t[n]}function e(){return t}if("undefined"==typeof t&&(t={}),"object"!==("undefined"==typeof t?"undefined":_typeof(t)))throw new TypeError("Options should be an object.");return{set:n,get:o,raw:e}}}}]);
/* <<< file end: js/core/angular/options.js */

//# map link was there [options.js.map]
/* >>> file start: js/core/angular/users.js */
//= require js/core/angular/api.js
//= require js/core/angular/options.js
!function(e){return e}(),function(){"use strict";angular.module("Users",["LJ.Api","LJ.Options"]).factory("Relations",["$q","$timeout","UsersCache",function(e,n,r){function t(t,i,u){var a=e.defer(),s={addFriend:{is_invite_sent:!0},removeFriend:{is_friend:!1},subscribe:{is_subscribedon:!0},unsubscribe:{is_subscribedon:!1},join:{is_invite_sent:!0},leave:{is_member:!1},setBan:{is_banned:!0},setUnban:{is_banned:!1}},o={addFriend:{is_invite_sent:!1},removeFriend:{is_friend:!0},subscribe:{is_subscribedon:!1},unsubscribe:{is_subscribedon:!0},join:{is_invite_sent:!1},leave:{is_member:!0},setBan:{is_banned:!1},setUnban:{is_banned:!0}},c=angular.copy(r.get(t)||{});return angular.isUndefined(u)&&(u={}),u.wait||r.update(t,s[i]||{}),LJ.Event.trigger("relations.change",{username:t,action:i,callback:function(e){n(function(){if(e.error)return u.wait||r.update(t,angular.extend(o[i],c)),void a.reject(e.error.message);var n=LJ.Object.pick(e,"is_banned","is_friend","is_member","is_subscriber","is_subscribedon","is_friend_of","is_invite_sent");r.update(t,n),a.resolve(e)})}}),a.promise}function i(e,n,i){var u=t(e,n?"subscribe":"unsubscribe",i);return n||u.then(function(){r.update(e,{filtermask:0})}),u}function u(e,n,r){return t(e,n?"addFriend":"removeFriend",r)}function a(e,n,r){return t(e,n?"join":"leave",r)}function s(e,n,r){return t(e,n?"setBan":"setUnban",r)}function o(e,n,r){return t(e,n?"banEverywhere":"unbanEverywhere",r)}return{toggleFriend:u,toggleSubscription:i,toggleMember:a,toggleBan:s,toggleBanEverywhere:o}}]).factory("Mask",function(){function e(e){return e>>>0}var n={};return n.change=function(n,r){var t=r.add,i=r.remove;return angular.isDefined(t)&&(angular.isArray(t)||(t=[t]),n=t.reduce(function(n,r){return e(n|Math.pow(2,r))},n)),angular.isDefined(i)&&(angular.isArray(i)||(i=[i]),n=i.reduce(function(n,r){var t=Math.pow(2,32)-1-Math.pow(2,r);return e(n&t)},n)),n},n.check=function(e,n){var r=Math.pow(2,n);return Boolean(e&r)},n}).factory("UsersCache",["$q","$cacheFactory","Options",function(e,n,r){function t(e){if(!angular.isUndefined(e)){var n=l.get(f.get("journal"))||{},r=e;return angular.isArray(e)||(e=[e]),e.forEach(function(e){if(e&&angular.isObject(e)&&!angular.isUndefined(e.username)){var r=e.username||e.display_username,t=n[r];n[r]=t?angular.extend(t,e):e}}),l.put(f.get("journal"),n),r}}function i(e){var n=l.get(f.get("journal"));return Boolean(n[e])}function u(e){var n;if(angular.isString(e)){if(n=l.get(f.get("journal")),n&&!n[e]){var r=Object.values(n).find(function(n){return n.display_name===e});if(r)return r}return n&&n[e]?n[e]:null}if(angular.isFunction(e))return s(e);if(angular.isUndefined(e))return s();throw new TypeError("Incorrect argument passed.")}function a(e){var n=l.get(f.get("journal"));return n||angular.isObject(n)?Object.keys(n).reduce(function(r,t){return String(n[t].id)===String(e)?n[t]:r},null):null}function s(e){var n,r=l.get(f.get("journal")),t=[];for(n in r)if(r.hasOwnProperty(n)){if(e&&!e(r[n]))continue;t.push(r[n])}return t}function o(e,n){var r=u(e)||{username:e};return angular.extend(r,n),t(r),r}var c,l=n("users"),f=r.create({journal:LJ.get("remoteUser")});return c={add:t,update:o,set:f.set,get:u,getById:a,exists:i}}]).factory("Users",["$q","$timeout","Api","Mask","UsersCache","Options",function(e,n,r,t,i,u){function a(e){return k[C.get("type")][e]}function s(e){return"subscriptions"===C.get("type")?Boolean(e.is_subscribedon):!0}function o(e,n){return angular.isUndefined(n)?e[c()]||1:void(e[c()]=n)}function c(){return"subscriptions"===C.get("type")?"filtermask":"groupmask"}function l(e,n,t){return r.call("user.get",{target:e,fields:n},t).then(function(e){var n=e.user;return i.add(n),n})}function f(e,n,t){return r.call("user.get",{targetid:e,fields:n},t).then(function(e){var n=e.user;return i.add(n),n})}function d(e,n){return r.call("relations.list_friends",{journal:C.get("journal"),fields:e},n).then(_("is_friend"))}function g(e){return r.call("groups.list_users",{journal:C.get("journal"),fields:e}).then(function(e){return i.add(e.users),e})}function p(e){return r.call("relations.list_subscriptions",{journal:C.get("journal"),fields:e}).then(_("is_subscribedon"))}function b(e){return r.call("relations.list_banned",{journal:C.get("journal"),fields:e}).then(_("is_banned"))}function _(e){return function(n){var r=n.users;return r.forEach(LJ.Function.set(e,!0)),i.add(r),r}}function v(e){return r.call("relations."+e+"_count").then(function(e){return e.count})}function h(n){return angular.isArray(n)||(n=[n]),0===n.length?e.reject("You should provide users to sync."):r.call(a("update"),{users:n,journal:C.get("journal")}).then(function(e){return i.add(e.users),e})}function m(e,n){var r=i.get(e);return r?t.check(o(r),n):!1}function j(e){return e.filter(i.exists).map(i.get).filter(s)}function y(e){var n=(e.filter||"").toLowerCase(),r=i.get(function(r){return s(r)&&t.check(o(r),e.id)?!n||-1!==r.display_username.toLowerCase().indexOf(n):!1});return e.limit&&(r=r.slice(0,e.limit)),r}function U(e){var n=(e.filter||"").toLowerCase(),r=i.get(function(r){return s(r)?t.check(o(r),e.id)?!1:!n||-1!==r.display_username.toLowerCase().indexOf(n):!1});return e.limit&&(r=r.slice(0,e.limit)),r}function w(e,n){angular.isArray(n)||(n=[n]);var r;return r="subscriptions"===C.get("type")?j(n):n.map(function(e){return i.get(e)||{username:e}}),r.forEach(function(n){o(n,t.change(o(n),{add:e}))}),h(r)}function L(e,n,r){angular.isArray(n)||(n=[n]);var i=j(n);return i.forEach(function(n){o(n,t.change(o(n),{remove:e}))}),r&&r.silent?void 0:h(i)}function O(e,n){return i.update(e,{alias:n}),r.call("user.alias_set",{target:e,alias:n})}function E(e){return function(n,r){return n[e].toLowerCase().localeCompare(r[e].toLowerCase())}}function F(){var e,n=C.get("journal");C.set.apply(null,arguments),e=C.get("journal"),e!==n&&i.set("journal",e)}var k={friends:{read:"relations.list_friends",readOne:"relations.get_friend",update:"groups.update_users"},subscriptions:{read:"relations.list_subscriptions",readOne:"relations.get_subscription",update:"filters.update_users"}},C=u.create({type:"friends",journal:LJ.get("remoteUser")});return{USERHEAD_FIELDS:{alias:1,journal_url:1,profile_url:1,userhead_url:1,is_invisible:1,journaltype:1},set:F,get:C.get,Cache:i,fetchUser:l,fetchUserById:f,fetchBanned:b,fetchFriends:d,fetchGroupUsers:g,fetchSubscriptions:p,fetchCount:v,sync:h,alias:O,isUserInGroup:m,getExisting:j,fromGroup:y,outOfGroup:U,addToGroup:w,removeFromGroup:L,comparator:E}}])}();
/* <<< file end: js/core/angular/users.js */

//# map link was there [users.js.map]
/* >>> file start: js/core/angular/ljUser.js */
//= require js/core/angular/api.js
//= require js/core/angular/users.js
Site.page.template['angular/ljUser.ng.tmpl'] = '<span\n    class=\"\n        ljuser\n        i-ljuser\n        i-ljuser-type-{{user.journaltype}}\n        \"\n    ng-class=\"{\n        \'i-ljuser-deleted\': user.is_invisible,\n        \'i-ljuser-nopopup noctxpopup\': user.noctxpopup,\n        \'i-ljuser-withalias\': user.alias,\n        \'i-ljuser-showalias\': user.showalias\n    }\"\n    data-ljuser=\"{{user.username}}\"\n    lj:user=\"{{user.username}}\"\n    ><!--\n\n    Userhead\n    --><a\n        class=\"i-ljuser-profile\"\n        ng-href=\"{{user.profile_url}}\"\n        ng-attr-target=\"{{user.target ? user.target : \'_self\'}}\"\n        ><!--\n        --><img\n            class=\"i-ljuser-userhead\"\n            ng-src=\"{{user.userhead_url}}\"\n            ><!--\n    --></a><!--\n\n    Username\n    --><a\n        class=\"i-ljuser-username\"\n        ng-href=\"{{user.journal_url}}\"\n        ng-attr-title=\"{{user.display_username || user.alias}}\"\n        ng-attr-target=\"{{user.target ? user.target : \'_self\'}}\"\n        ><b ng-bind=\"user.display_name || user.display_username\"></b></a><!--\n\n    Alias\n    --><span\n        class=\"i-ljuser-alias\"\n        ng-bind=\"user.alias\"\n        ></span><!--\n\n--></span>\n';
!function(){"use strict";function e(e){e.errorOnUnhandledRejections(!1)}function r(e,r,n,t,a,s,c){function u(e){var r=n.defer(),t=c.Cache.get(e);return t&&t.userhead_url?(r.resolve(t),r.promise):c.fetchUser(e,c.USERHEAD_FIELDS,{cache:!0,silent:!0})}function i(e){var r=n.defer(),t=c.Cache.getById(e);return t&&t.userhead_url?(r.resolve(t),r.promise):c.fetchUserById(e,c.USERHEAD_FIELDS,{cache:!0,silent:!0})}function l(r,t){var i=n.defer(),l=e.$new();return u(r).then(function(){var e;l.user=angular.extend({},c.Cache.get(r),t||{}),e=a(d)(l),s(function(){i.resolve(p.empty().append(e).html()),l.$destroy()})}),i.promise}function o(r,t){var u=n.defer(),l=e.$new();return i(r).then(function(){var e;l.user=angular.extend({},c.Cache.getById(r),t||{}),e=a(d)(l),s(function(){u.resolve(p.empty().append(e).html()),l.$destroy()})}),u.promise}var p=angular.element("<div />"),d=t.get("ljUser.ng.tmpl");return{prepare:u,prepareById:i,getById:o,get:l}}function n(e,r,n){return{templateUrl:"ljUser.ng.tmpl",replace:!0,scope:!0,compile:function(t,a){var s=e(a.ljUserDynamic),c=e(a.ljUserDynamicOptions);return function(e,t){var a=c(e);e.$watch(function(){return s(e)},function(t){var s=t;e.user=angular.extend({username:s,display_username:s},a||{}),n.prepare(s).then(function(){e.$watch(function(){return r.Cache.get(s)},function(r){angular.extend(e.user,r),a&&angular.isFunction(a.adjustData)&&(e.user=a.adjustData(e.user))},!0)})})}}}}function t(e,r,n){return{template:'<img class="{{user.class}}" src="https://l-userpic.livejournal.net/default/{{user.id}}" alt="" />',scope:!0,compile:function(t,a){return function(t){var s=e(a.ljUserAvatarImg)(t),c=e(a.ljUserAvatarImgOptions)(t),u=+s;return NaN!==u&&s.toString().length===u.toString().length?void(t.user=angular.extend({id:s},c||{})):(function(e){return e}(),t.user=angular.extend({username:s},c||{}),void n.prepare(s).then(function(e){t.$watch(function(){return r.Cache.get(s)},function(e){angular.extend(t.user,e)},!0)}))}}}}function a(e,r,n){return{templateUrl:"ljUser.ng.tmpl",replace:!0,scope:!0,compile:function(t,a){return function(t){var s=e(a.ljUserById)(t),c=e(a.ljUserByIdOptions)(t);t.user=angular.extend({username:"user-"+s,display_username:"user-"+s},c||{}),n.prepareById(s).then(function(){t.$watch(function(){return r.Cache.getById(s)},function(e){angular.extend(t.user,e)},!0)})}}}}function s(e){var r="https:",n=function(e,n){return e.journal_url?e.journal_url:n.indexOf(".")>-1?"".concat(r,"//").concat(n):"".concat(r,"//").concat(n,".livejournal.com")};return{templateUrl:"ljUser.ng.tmpl",replace:!0,scope:!0,compile:function(t,a){var s=e(a.ljUserStatic),c=e(a.ljUserStaticId),u=e(a.ljUserStaticJournalUrl),i=e(a.ljUserStaticOptions);return function(e){var t=s(e),a=c(e),l=i(e)||{},o=u(e)||n(l,t),p="".concat(o,"/profile");e.user={alias:"",display_name:l.display_name||t,display_username:l.display_username||t,id:a,is_invisible:!1,journal_url:o,journaltype:"P",profile_url:p,userhead_url:"".concat(r,"//l-files.livejournal.net/userhead/default/").concat(a),username:t,noctxpopup:l.noctxpopup}}}}}function c(e,r){var n="https:";return{template:'\n        <img\n          class="{{user.class}}"\n          ng-src="'.concat(n,'//l-userpic.livejournal.net/default/{{user.id}}"\n          alt=""\n        />'),scope:!0,compile:function(r,n){var t=e(n.ljUserAvatarStaticId),a=e(n.ljUserAvatarStaticOptions);return function(e){var r=t(e),n=a(e);e.user={id:r,"class":n["class"]||""}}}}}c.$inject=["$parse","$location"],s.$inject=["$parse"],t.$inject=["$parse","Users","ljUser"],n.$inject=["$parse","Users","ljUser"],a.$inject=["$parse","Users","ljUser"],r.$inject=["$rootScope","Api","$q","$templateCache","$compile","$timeout","Users"],e.$inject=["$qProvider"],angular.module("LJ.User",["LJ.Api","LJ.Templates","Users"]),angular.module("LJ.User").config(e).factory("ljUser",r).directive("ljUserById",a).directive("ljUserDynamic",n).directive("ljUserAvatarImg",t).directive("ljUserStatic",s).directive("ljUserAvatarStatic",c),r.$inject=["$rootScope","Api","$q","$templateCache","$compile","$timeout","Users"],n.$inject=["$parse","Users","ljUser"],t.$inject=["$parse","Users","ljUser"],a.$inject=["$parse","Users","ljUser"]}();
/* <<< file end: js/core/angular/ljUser.js */

//# map link was there [ljUser.js.map]
/* >>> file start: js/core/angular/ref.js */
!function(e){return e}(),function(){"use strict";angular.module("LJ.Ref",[]).factory("Ref",function(){function e(e,n){return f[e]?void console.error("Ref element with id `%s` has been registered before.",e):void(f[e]=n)}function n(e){f[e]&&delete f[e]}function o(e){var n=f[e];return n||console.error("Ref `%s` not found.",e),n}function r(e,n){"undefined"==typeof n&&(n={});var r=o(e),f=angular.element("html, body");if(!r)return void console.error("Could not scroll to the ref `%s` that has not been already defined.",e);var l=r.offset().top;n.onlyUp&&angular.element(window).scrollTop()<=l||n.onlyOutOfScreen&&!t(r)||(n.toParent&&(f=r.parent(),l=0),f.animate({scrollTop:l}))}function t(e){var n=angular.element(window),o=n.scrollTop(),r=o+n.height(),t=e.offset().top;return t>r-100||o>t}var f={};return{add:e,remove:n,get:o,scrollTo:r}}).directive("ljRef",["Ref",function(e){return{restrict:"A",scope:!0,link:function(n,o,r){var t=r.ljRef;e.add(t,o),n.$on("$destroy",function(){e.remove(t)})}}}])}();
/* <<< file end: js/core/angular/ref.js */

//# map link was there [ref.js.map]
/* >>> file start: js/core/angular/bubble.js */
//= require js/core/angular/ref.js
Site.page.template['Widgets/ljBubble.tmpl'] = '<div\n    class=\"\n        b-popup\n        bubble-node\n        b-popup-withclosecontrol\n        b-bubble-{{bubble.name}}\n        \"\n    ng-show=\"show\"\n    lj-switch-off=\"show\"\n    lj-switch-off-action=\"bubble.close()\"\n    lj-switch-off-ignore-sticky=true\n    ng-style=\"{ left: position.x, top: position.y, visibility: visibility }\"\n    ng-class=\"{\n        \'b-popup-noclosecontrol\': !bubble.options.closeControl\n    }\"\n    lj-switch-off-skip>\n    <div class=\"b-popup-outer\">\n        <div class=\"b-popup-inner\">\n            <i\n                class=\"i-popup-arr\"\n                ng-class=\"arrowClass()\"\n                ng-show=\"getShouldShowArrow()\"\n            >\n                <i class=\"i-popup-arr-brdr-outer\">\n                    <i class=\"i-popup-arr-brdr-inner\">\n                        <i class=\"i-popup-arr-bg\"></i>\n                    </i>\n                </i>\n            </i>\n            <div ng-include src=\"template\"></div>\n            <i\n                class=\"i-popup-close\"\n                ng-click=\"bubble.close()\"\n                ng-show=\"getShowCloseBtn()\"\n            ></i>\n        </div>\n    </div>\n</div>\n';
Site.page.template['angular/confirm.bubble.ng.tmpl'] = '<div class=\"b-popup-content b-popup-options-centered\">\n  <div class=\"b-popup-content-header\">\n    <span>{{ bubble.options.header }}</span>\n  </div>\n  <div class=\"b-popup-content-confirm\" ng-bind-html=\"bubble.options.text\"></div>\n  <div class=\"b-popup-submit-options\">\n    <button class=\"b-popup-btn b-flatbutton b-flatbutton-simple\" ng-click=\"bubble.options.confirm()\">{{ bubble.options.yes }}</button>\n    <button class=\"b-popup-cancel b-flatbutton b-flatbutton-simple b-flatbutton-neutral\" ng-click=\"bubble.close()\">{{ bubble.options.no }}</button>\n  </div>\n</div>\n';
//= require_ml confirm.bubble.yes
//= require_ml confirm.bubble.no
!function(){"use strict";function e(e,o,t,n,r){return{scope:!0,link:function(i,l,a){function u(){var e=i.arrow.vertical,o=i.arrow.horizontal,t=S.aside,r=H.innerWidth<=650;i.visibility="hidden",S.keepInitialWidth&&!S.widthSaved&&(S.widthSaved=!0,L.width(L.width())),p(),d()&&!r&&(i.arrow.vertical="b"===e?f("alwaysTop")?"b":"t":f("alwaysBottom")?"t":"b",p(),h()&&!f("alwaysTop")&&(i.arrow.vertical="t",p())),w()&&!r&&(i.arrow.horizontal="l"===o?f("alwaysRight")||m()?"l":"r":f("alwaysLeft")||v()?"r":"l"),!r&&w()&&i.arrow.horizontal===o&&c()&&(S.aside=!0),r||i.arrow.horizontal===o&&i.arrow.vertical===e&&S.aside===t?i.visibility="visible":n(s),setTimeout(function(){LJ.Event.trigger("popup::positionChanged",{popupType:"ngBubble",name:S.name,popupNode:l[0]})})}function s(){return p(),w()&&c()?(S.aside=!0,i.$apply(),void s()):w()&&!f("aside")&&i.arrow.horizontal?(i.arrow.horizontal="",void s()):void(i.visibility="visible")}function c(){return!f("aside")&&f("tryAsideIfNoHorizSpace")}function f(e){return i.bubble.options[e]||S[e]}function p(){var o=e.node||l,t=o.offset().left+Math.floor(o.outerWidth()/2),n=i.bubble.options.forceX||0,r=i.bubble.options.forceY||0;if(f("aside"))i.position.x="r"===i.arrow.horizontal?o.offset().left-L.outerWidth()-x.outerWidth()+n:o.offset().left+o.outerWidth()+x.outerWidth()+n,i.position.y=o.offset().top-x.position().top+(o.outerHeight()-x.outerHeight())/2+r;else{if("center"===i.arrow.horizontal){var a;a=x.is(":visible")?x.position().left:L.outerWidth()/2,i.position.x=t-a+n}else i.position.x=i.arrow.horizontal?t-x.position().left-Math.floor(x.outerWidth()/2)-2+n:t-L.outerWidth()/2-Math.floor(x.outerWidth()/4)-2+n;i.position.y="t"===i.arrow.vertical?o.offset().top+o.outerHeight()+x.outerHeight()+r:o.offset().top-x.outerHeight()-L.outerHeight()+r}}function b(){i.position.x=-9999}function d(){return h()?!0:i.position.y+L.outerHeight()>H.scrollTop()+H.outerHeight()}function h(){return i.position.y<H.scrollTop()}function w(){return m()||v()}function m(){return i.position.x<H.scrollLeft()}function v(){return i.position.x+L.outerWidth()>H.scrollLeft()+H.outerWidth()}function g(o){o.preventDefault(),e.current!==S.name&&n(function(){e.open(S.name)})}function y(){$(),O&&(C=n(e.close,O))}function $(){n.cancel(C)}function z(){var o=S.name,t=e.current;o===t&&($(),e.close(),i.$apply())}function B(){i.show&&n(W)}var C,S=o(a.ljBubble)(i),j=S.name,L=t(r.get("ljBubble.tmpl"))(i),W=LJ.Function.throttle(u,50),x=L.find(".i-popup-arr"),H=angular.element(window),J=S.eventType||"click",O=Number(S.autoClose||0);i.show=!1,e._register(j,S),i.template=S.template||j+".html",i.bubble={name:j,close:e.close,options:e.options(j)},i.clear=function(){i.arrow={vertical:S.arrowInitialVertical||"t",horizontal:S.arrowInitialHorizontal||"l"}},i.position={x:-9999,y:-9999},i.visibility="hidden",i.arrowClass=function(){var e,o=i.bubble.options,t=i.arrow.vertical;return e="center"===i.arrow.horizontal?"":i.arrow.horizontal,o.aside||S.aside?"i-popup-arr"+e+t:"i-popup-arr"+t+e},i.getShouldShowArrow=function(){return angular.isDefined(i.bubble.options.showArrow)?i.bubble.options.showArrow:angular.isDefined(S.showArrow)?S.showArrow:!0},i.getShowCloseBtn=function(){return angular.isDefined(i.bubble.options.showCloseBtn)?i.bubble.options.showCloseBtn:angular.isDefined(S.showCloseBtn)?S.showCloseBtn:!0},i.$on("bubble:reposition:"+j,function(){n(W)}),i.$watch(function(){return e.current},function(e){b(),n(function(){i.show=e===j,e&&i.show&&(i.clear(),n(W))})},!0),S.disableClick||l.on(J,g),S.disableResizeListener||H.on("resize",B),S.recalculateOnOrientationChange&&H.on("orientationchange",function(){B(),H.on("resize",B),n(function(){H.off("resize",B)},1e3)}),S.recalculateOnScroll&&H.on("scroll",B),S.closeOnScroll&&H.on("scroll",z),angular.element("body").append(L),l.on("mouseleave",y),L.on("mouseenter",$),L.on("mouseleave",y),i.clear(),i.$on("$destroy",function(){l.off(J,g),H.off("resize",B),H.off("scroll",B),H.off("scroll",e.close),l.off("mouseleave",y),L.off("mouseenter",$),L.off("mouseleave",y),e._unregister(j),L.remove()})}}}function o(e,o,n,r,i,l){var a={},u={};return a.current=null,a.node=null,a.register=function(){function t(t,i){var a,u,s;return t&&t.name&&t.template?(a=t.name,t.disableClick=!0,r[a]?(r[a].count+=1,n.bind(null,a)):(u=angular.element("<div />").attr("lj-bubble",angular.toJson(t)),s="undefined"==typeof i,s&&(i=e.$new(!0)),u.appendTo("body"),o(u)(i),r[a]={count:1,node:u,scope:i,isScopeCreated:s},n.bind(null,a))):void l.error("Incorrect bubble options. You should provide name and template.",t)}function n(e){var o=r[e];o&&(o.count-=1,0===o.count&&(o.isScopeCreated||o.scope.$destroy(),o.node.remove(),delete r[e]))}var r={};return t}(),a.exists=function(e){return u.hasOwnProperty(e)},a._register=function(e,o){var t;return u.hasOwnProperty(e)?void console.warn('Bubble with name "'.concat(e,'" has already been registered')):(t=angular.isDefined(o)?angular.copy(o):{},t=angular.extend({closeControl:!0},t),void(u[e]=Object.create(t)))},a._unregister=function(e){delete u[e],a.current===e&&(a.current=null)},a.confirm=function(e){function o(){i.scrollBy(0,1),i.scrollBy(0,-1)}var t=LJ.ml("confirm.bubble.yes"),n=LJ.ml("confirm.bubble.no"),l={closeControl:!1,confirm:e.confirm,header:e.header,text:e.text,yes:e.yes||t,no:e.no||n};a.open(e.id,l),r(o),r(o,100),r(o,200),r(o,300)},a.open=function(o,r,i){return u.hasOwnProperty(o)?(r instanceof jQuery&&(i=r,r={}),angular.isString(r)&&(i=n.get(r),r={}),angular.isObject(r)&&a.options(o,r),i instanceof jQuery&&(a.node instanceof jQuery&&!a.node.is(i)&&e.$broadcast("bubble:reposition:"+o),a.node=i),angular.isString(i)&&(a.node=n.get(i)),a.current=o,e.$broadcast("bubble:open",o,r,i),e.$broadcast("bubble:open:"+o,o,r,i),void angular.element("body").addClass(t)):void l.error("Bubble `"+o+"` can't be opened, it has not been registered yet.")},a.close=function(){var o,n=a.current,r=u[n];e.$broadcast("bubble:close",n,r,a.node),e.$broadcast("bubble:close:"+n,n,r,a.node);for(o in r)r.hasOwnProperty(o)&&delete r[o];a.current=null,a.node=null,angular.element("body").removeClass(t)},a.options=function(e,o){return"undefined"==typeof o||o===u[e]?u[e]:void angular.copy(o,u[e])},a}e.$inject=["Bubble","$parse","$compile","$timeout","$templateCache"],o.$inject=["$rootScope","$compile","Ref","$timeout","$window","$log"],angular.module("LJ.Bubble",["LJ.Templates","LJ.Directives","LJ.Ref"]),angular.module("LJ.Bubble").factory("Bubble",o).directive("ljBubble",e);var t="p-openpopup";e.$inject=["Bubble","$parse","$compile","$timeout","$templateCache"],o.$inject=["$rootScope","$compile","Ref","$timeout","$window","$log"]}();
/* <<< file end: js/core/angular/bubble.js */

//# map link was there [bubble.js.map]
/* >>> file start: js/widgets/likus.js */
function ownKeys(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function _objectSpread(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ownKeys(Object(t),!0).forEach(function(n){_defineProperty(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function _defineProperty(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}
//= require js/core/angular/ljUser.js
//= require js/core/angular/api.js
//= require js/core/angular/bubble.js
Site.page.template['angular/widgets/likus/likusMain.ng.tmpl'] = '<a\n    class=\"ljlikus-button ljlikus--like\"\n    ng-class=\"{\'ljlikus--like-active\': likus.liked}\"\n    ng-href=\"#\"\n    ng-click=\"likus.vote($event)\"\n    ng-if=\"likus.show && !likus.link\"\n    ><span class=\"ljlikus-icon\" lj-svg-icon=\"flaticon--like\"></span></a>\n<a\n    class=\"ljlikus-action\"\n    ng-href=\"#\"\n    ng-if=\"likus.show && likus.count && !likus.link\"\n    ng-click=\"likus.countClick($event)\"\n    ng-mouseover=\"likus.countHover($event)\"\n    ><span class=\"ljlikus-counter\">{{likus.formattedCount || likus.count}}</span></a>\n\n<!-- no actions, link -->\n<a\n    class=\"ljlikus--like ljlikus-no-action\"\n    ng-href=\"{{likus.link}}\"\n    ng-if=\"likus.show && likus.noActions && likus.link\"\n    target=\"{{ likus.linkTarget }}\"\n    >\n    <span class=\"ljlikus-icon\" lj-svg-icon=\"flaticon--like\"></span>\n    <span\n        class=\"ljlikus-counter\"\n        ng-if=\"likus.show && likus.link && likus.count\"\n        >{{likus.formattedCount || likus.count}}</span>\n</a>\n';
Site.page.template['angular/widgets/likus/likusUsers.ng.tmpl'] = '<ul class=\"ljlikus-list\">\n    <li class=\"ljlikus__item\" ng-repeat=\"user in users.slice(0, 5)\">\n        <span lj-user-by-id=\"user\" lj-user-by-id-options=\"{ noctxpopup: true }\" />\n    </li>\n    <li\n        ng-if=\"count > 5\"\n        class=\"ljlikus__item ljlikus--more\"\n        >\n        <a href=\"#\" class=\"ljlikus__item--more\" ng-click=\"more($event)\">\n            <span lj-ml=\"likus.users.add_more\" lj-ml-resolve=\"{count: count - 5}\" />\n        </a>\n    </li>\n</ul>\n';
Site.page.template['angular/widgets/likus/likusBubble.ng.tmpl'] = '<!-- Bubble -->\n<div class=\"ljlikus-bubble\">\n\n    <!-- header -->\n    <header class=\"ljlikus-bubble__header\">\n        <span class=\"ljlikus-bubble__title\" lj-ml=\"likus.users.title\"></span>\n        <span class=\"ljlikus-counter\">{{likusBubble.count}}</span>\n        <span\n            class=\"ljlikus-bubble__close\"\n            lj-svg-icon=\"flaticon--cross\"\n            ng-click=\"likusBubble.close($event)\"\n        ></span>\n    </header> <!-- /header -->\n\n    <!-- body -->\n    <div class=\"ljlikus-bubble__body\">\n\n        <!-- list -->\n        <ul class=\"ljlikus-list ljlikus-list--full\">\n            <li ng-repeat=\"user in likusBubble.users\" class=\"ljlikus__item\">\n                <span class=\"ljlikus__item-userpic\">\n                    <img ng-src=\"{{likusBubble.getUserImage(user)}}\" alt=\"\" >\n                </span>\n                <div class=\"ljlikus__item-meta\">\n                    <span lj-html=\"user.entry_title\" />\n                    <p class=\"ljlikus__item-usertitle\">{{user.title}}</p>\n                </div>\n                <div class=\"ljlikus__friends-wrap\">\n                    <button class=\"ljlikus__friends\n                                    ljlikus__friends--add\n                                    flatbutton\n                                    flatbutton--small\n                                    flatbutton--neutral\"\n                          ng-class=\"{ \'ljlikus__friends--hide\': user.is_friend }\"\n                          ng-disabled=\"user.updating\"\n                          ng-click=\"likusBubble.toggleFriend(user, true)\"\n                          lj-ml=\"likus.users.add.friends\"\n                    ></button>\n                    <button class=\"ljlikus__friends\n                                    ljlikus__friends--list\n                                    flatbutton\n                                    flatbutton--small\n                                    flatbutton--neutral\"\n                          ng-class=\"{ \'ljlikus__friends--hide\': !user.is_friend }\"\n                          ng-disabled=\"user.updating\"\n                          ng-click=\"likusBubble.toggleFriend(user, false)\">\n                        <span class=\"ljlikus__friends--list-span\"\n                              lj-ml=\"likus.users.friend.list\"\n                        ></span>\n                        <span lj-ml=\"likus.users.friend.remove\"\n                              class=\"ljlikus__friends--remove\"\n                        ></span>\n                    </button>\n                </div>\n            </li>\n            <li\n                class=\"ljlikus__item ljlikus__item--more\"\n                ng-if=\"likusBubble.hasMore\"\n                >\n                <a\n                    class=\"b-flatbutton b-flatbutton-simple\"\n                    href=\"#\"\n                    ng-click=\"likusBubble.loadMore($event)\"\n                    lj-ml=\"likus.users.show.more\"\n                ></a><!--\n            --></li>\n            <li\n                class=\"ljlikus__item ljlikus__item--loading\"\n                ng-if=\"likusBubble.loading\"\n                >\n                <span class=\"svgpreloader-16 svgpreloader-tag\"></span>\n            </li>\n        </ul> <!-- /list -->\n\n    </div> <!-- /body -->\n</div> <!-- /bubble -->\n';
//= require_ml likus.users.add_more
//= require_ml likus.users.sc
//= require_ml likus.users.add.friends
//= require_ml likus.users.friend.list
//= require_ml likus.users.friend.remove
//= require_ml likus.users.title
!function(){"use strict";function e(){return{scope:{noActions:"@ljLikusNoActions",count:"@ljLikusCount",medius:"@ljLikusMedius",journal:"@ljLikusJournal",item:"@ljLikusItem",token:"@ljLikusToken",uri:"@ljLikusUri",href:"@ljLikusHref",linkTarget:"@ljLikusLinkTarget"},templateUrl:"likusMain.ng.tmpl",controllerAs:"likus",controller:n}}function n(e,n,t,r,i,o,u,s){function l(e){e.preventDefault(),u.close("likus-users"),angular.isFunction(f)&&f(),o.showUsers(_objectSpread({},d),{likes_signature:y})}function c(e){d={journal:e.journal,item:e.item,uniq:"".concat(e.journal,"-").concat(e.item)},g.count=parseInt(e.count)||0,g.liked=Boolean(e.liked),g.formattedCount=e.short_count,v||Promise.all(e.users.map(function(e){return s.prepareById(e)})).then(function(n){a=[].concat(e.users)})}var a,d,f,p,g=this,v=e.noActions||!1,m=parseInt(e.count)||0,k=e.medius,b=e.journal,j=e.item,h=e.uri||r.LJ.get("currentEntry"),y=e.token||r.LJ.get("likes_signature"),L=r.LJ.Flags.isEnabled("likes"),w=r.LJ.Flags.isEnabled("medius"),$=r.LJ.Flags.isEnabled("likes_display"),O=r.LJ.Flags.isDisabled("homepage_v3"),S=r.LJ.get("remote");angular.element("body");if(e.noActions&&e.href&&(v=e.href),!L)return void n.remove();if(O)return void n.remove();if(k&&!w&&"/"==location.pathname)return void n.remove();b&&j&&(d={journal:b,item:j,uniq:""+b+"-"+j}),!d&&h&&(d={uri:h,uniq:h});var J;J=angular.isDefined(m)?!0:!(!d||!y),J&&($&&n.removeClass("lj-likus--hidden"),g.show=$,g.count=m,g.liked=!1,g.link=v,g.noActions=e.noActions,g.linkTarget=e.linkTarget,d&&y&&o.getVote(d,{token:y,type:v?"short":"full",count:m&&v?m:!1},c).then(c),g.vote=function(e){return e.preventDefault(),S?p?void i.log("You don't want to vote so quickly!"):(LJ.Event.emit("likeReaction::userReactionSelect",{source:"ljLikus",journalID:d.journal,postID:d.item,setsLike:!g.liked,URL:h,itemUrl:h}),p=!0,void o.setVote(_objectSpread({},d),{mark:+g.liked}).then(c).then(function(){p=!1},function(){p=!1})):void LJ.Util.Action.login(e)},g.users=function(n){var r=t.$new();r.users=a,r.count=this.count,r.more=l,f=u.register({name:"likus-users",template:"likusUsers.ng.tmpl",closeControl:!1,closeOnScroll:!0,autoClose:200,tryAsideIfNoHorizSpace:!0},r),u.open("likus-users",angular.element(n.currentTarget)),e.$on("bubble:close:likus-users",f)},g.countHover=function(e){return r.innerWidth<=650?void e.preventDefault():void g.users(e)},g.countClick=function(e){e.preventDefault(),r.innerWidth>650||g.users(e)})}function t(){return{scope:!0,templateUrl:"likusBubble.ng.tmpl",controllerAs:"likusBubble",controller:r}}function r(e,n,t,r){function i(){return t.showUsers()}function o(e){return e?(f.addClass(a),s.count=t.getCached(e),void u(e)):(f.removeClass(a),s.users=[],s.count=0,void(c=null))}function u(e){s.loading=!0,s.hasMore=!1,t.getUsers(e,{limit:l,lastid:c}).then(function(e){var n=e.res,t=e.count;s.count=t,s.loading=!1,c=(n[l-1]||{}).id,s.hasMore=!1,s.users=s.users.concat(s.lastid?n.slice(1):n)})}var s=this,l=100,c=null,a="ljlikus-bubble--full",d=n.LJ.Flags.isEnabled("likes"),f=angular.element("body");d&&(s.loading=!1,s.hasMore=!1,s.users=[],s.count=0,s.fader=angular.element(".b-fader"),s.fader.on("click",function(n){s.close(n),e.$apply()}),s.getUserImage=function(e){return e.userpic||LJ.get("siteroot")+"/img/userpics/userpic-user.png"},s.close=function(e){e&&e.preventDefault(),t.showUsers(!1)},s.loadMore=function(e){e.preventDefault(),u(t.showUsers())},s.toggleFriend=function(e,n){e.updating=!0,r.call(n?"relations.addfriend":"relations.removefriend",{target:e.username},{silent:!0}).then(function(){e.updating=!1,e.is_friend=n})},e.$watch(i,o))}function i(e){function n(n){return i[n]=i[n]||new Promise(function(t){var r=e.document.createElement("iframe");r.style.cssText="display: none; width: 0; height: 0; border: 0;",r.frameBorder=0,r.src="".concat(LJ.get("statprefix"),"/??plain/storage.html?key=").concat(n,"&v=").concat(LJ.get("v")),e.document.body.appendChild(r),r.onload=function(){t(r)}}),i[n]}function t(e,t){n(e).then(function(e){e.contentWindow.postMessage(angular.toJson(t),"*")})}function r(n,t){e.addEventListener("message",function(e){if(e.origin===LJ.get("statprefix")){var n;try{n=angular.fromJson(e.data||"{}")||{}}catch(r){n={}}t(n)}})}var i={};return{push:t,listen:r}}function o(e,n,t,r,i,o){function u(t,r,i){var o=n.defer(),u=r.token+"#"+r.type;if(r.count){var s=_objectSpread(_objectSpread({},t),{},{count:r.count,liked:!1,users:[]});return k[t.uniq]=r.count,f(s),p(t.uniq,i),o.resolve(s),o.promise}return m.hasOwnProperty(u)||(m[u]={},e(l.bind(null,u),50)),m[u][t.uniq]?m[u][t.uniq].listeners.push(i):m[u][t.uniq]={entity:t,params:r,listeners:[i],resolve:o.resolve,reject:o.reject},o.promise}function s(e,n){var t=Object.assign({},e,n);return i.call("likes.vote",t).then(function(e){return e.result?(k[t.uniq]=e.result.count,f([e.result]),e.result):(LJ.Messages.error("An error has occurred."),{})})}function l(e){var n,r,o,u=e.split("#")[0],s=e.split("#")[1];return m.hasOwnProperty(e)?(n=m[e],delete m[e],r=Object.keys(n).map(function(e){return n[e].entity}),o={entities:r,mode:"feed",type:s,likes_signature:u},void i.call("likes.get_votes",o,{silent:!0}).then(function(e){var r=e.result;return angular.isArray(r)?(f(r),void r.map(function(e){var t=n[e.uniq];k[e.uniq]=e.count,t&&p("".concat(e.journal,"-").concat(e.item),t.listeners),t&&t.resolve(e)})):void t.log("Unexpected response [getVotes / ljkus]")})):void t.log("Unhandled error [getVotes / ljkus]")}function c(e){return k[e.uniq]||0}function a(e,n){var t=Object.assign({},e,n);return i.call("likes.get_users",t).then(function(n){return f([{count:n.count,item:e.item,journal:e.journal}]),{res:n.result,count:n.count}})}function d(e,n){return angular.isDefined(e)&&!e&&(b=!1),angular.isObject(e)&&(b=Object.assign({},e,n)),b}function f(e){if(!angular.isArray(e))return[];var n=Object.values(h).filter(function(e){return e&&e.expire>(new Date).getTime()}),t=n.concat(e).reduce(function(e,n){var t="".concat(n.journal,"-").concat(n.item);return _objectSpread(_objectSpread({},e),{},_defineProperty({},t,_objectSpread(_objectSpread(_objectSpread({},e[t]),n),{},{users:n.users&&n.users.length?n.users:e[t]&&e[t].users||[],expire:new Date((new Date).getTime()+864e5).getTime(),dataType:"lj-likus"})))},{});return o.push(v,t),t}function p(e,n){Array.isArray(n)||(n=[n]);var t=n.filter(function(e){return angular.isFunction(e)});t.length&&j.push({uniq:e,callbackFunctions:t})}function g(e){h=_objectSpread({},e),j.forEach(function(n){e.hasOwnProperty(n.uniq)&&n.callbackFunctions.forEach(function(t){return t(e[n.uniq])})})}var v="lj-likus",m={},k={},b=!1,j=[],h={};return o.listen(v,g),{getVote:u,setVote:s,getCached:c,getUsers:a,showUsers:d}}r.$inject=["$scope","$window","LikusService","Api"],n.$inject=["$scope","$element","$rootScope","$window","$log","LikusService","Bubble","ljUser"],o.$inject=["$timeout","$q","$log","$window","Api","SyncService"],i.$inject=["$window"],angular.module("LJ.Likus",["LJ.Directives","LJ.User","LJ.Bubble","LJ.Api"]).run(function(){LJ.Flags.isEnabled("likes_display")&&(angular.element("body").addClass("j-p-likus"),angular.element("[ng-app]").append("<div lj-likus-bubble></div>"))}).factory("SyncService",i).factory("LikusService",o).directive("ljLikus",e).directive("ljLikusBubble",t),n.$inject=["$scope","$element","$rootScope","$window","$log","LikusService","Bubble","ljUser"],r.$inject=["$scope","$window","LikusService","Api"]}();
/* <<< file end: js/widgets/likus.js */

//# map link was there [likus.js.map]
/* >>> file start: js/feed/promoControl.js */
//= require js/core/angular/api.js
Site.page.template['angular/widgets/promo/promoControl.ng.tmpl'] = '<!-- Feed control -->\n<span\n  class=\"feedpromo-control\"\n  ng-if=\"promoControl.params.class === \'feedpromo\' || promoControl.params.class === \'ratings\'\"\n  >\n  <span class=\"feedpromo-control__title\" lj-ml=\"feedpromo.complaint.title\"></span>\n  <span class=\"feedpromo-control__items\">\n    <span class=\"feedpromo-control__item feedpromo-control__item--why\" lj-ml=\"feedpromo.complaint.help\"></span>\n      <span\n        ng-if=\"promoControl.profileInfo\"\n        class=\"feedpromo-control__item feedpromo-control__item--hide\"\n        lj-ml=\"feedpromo.complaint.hide\"\n        ng-click=\"promoControl.showComplaintForm()\"\n      ></span>\n      <span class=\"feedpromo-control__item feedpromo-control__item--buy\" lj-ml=\"feedpromo.complaint.buy\"></span>\n  </span>\n</span>\n\n<!-- Grant control -->\n<span class=\"grant-control\" ng-if=\"promoControl.params.class === \'grants\'\">\n  <span class=\"grant-control__title\" lj-ml=\"{{ promoControl.promoTitleMl }}\"></span>\n</span>';
Site.page.template['angular/widgets/promo/complaintForm.ng.tmpl'] = '<div\n    class=\"\n        feedpromo-complaint\n        \"\n    ng-class=\"{\n        \'feedpromo-complaint--hidden\': !complaintForm.shown(),\n    }\"\n    style=\"display: none\"\n    ng-cloak\n    >\n    <form class=\"feedpromo-complaint__form\">\n        <span\n            class=\"feedpromo-complaint__close\"\n            ng-click=\"complaintForm.hide()\"\n            ><svg class=\"svgicon\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" width=\"30px\" height=\"30px\" viewBox=\"0 0 30 30\"><polygon points=\"30,2.728 27.272,0 15,12.273 2.727,0 0,2.728 12.272,15 0,27.273 2.727,30 15,17.728 27.272,30 30,27.273 17.727,15\"></polygon></svg></span>\n        <h3\n            class=\"feedpromo-complaint__title\"\n            lj-ml=\"feedpromo.complaint.popup.title\"\n            ></h3>\n        <fieldset class=\"form__field\">\n            <label class=\"form__label\">\n                <input\n                    class=\"\n                        radio\n                        custom--label-input\n                        \"\n                    id=\"reason-1\"\n                    type=\"radio\"\n                    name=\"complaint\"\n                    value=\"1\"\n                    ng-model=\"complaintForm.reason\"\n                    >\n                <span\n                    class=\"\n                        custom--label\n                        custom--label-huge\n                        custom--label-blue\n                        custom--label-bold\n                        \"\n                    for=\"reason-1\"\n                    lj-ml=\"feedpromo.complaint.reason.1\"\n                    ></span>\n            </label>\n        </fieldset>\n        <fieldset class=\"form__field\">\n            <label class=\"form__label\">\n                <input\n                    class=\"\n                        radio\n                        custom--label-input\n                        \"\n                    id=\"reason-2\"\n                    type=\"radio\"\n                    name=\"complaint\"\n                    value=\"2\"\n                    ng-model=\"complaintForm.reason\"\n                    >\n                <span\n                    class=\"\n                        custom--label\n                        custom--label-huge\n                        custom--label-blue\n                        custom--label-bold\n                        \"\n                    for=\"reason-2\"\n                    lj-ml=\"feedpromo.complaint.reason.2\"\n                    ></span>\n            </label>\n        </fieldset>\n        <fieldset class=\"form__field\">\n            <label class=\"form__label\">\n                <input\n                    class=\"\n                        radio\n                        custom--label-input\n                        \"\n                    id=\"reason-3\"\n                    type=\"radio\"\n                    name=\"complaint\"\n                    value=\"3\"\n                    ng-model=\"complaintForm.reason\"\n                    >\n                <span\n                    class=\"\n                        custom--label\n                        custom--label-huge\n                        custom--label-blue\n                        custom--label-bold\n                        \"\n                    for=\"reason-3\"\n                    lj-ml=\"feedpromo.complaint.reason.3\"\n                    ></span>\n            </label>\n        </fieldset>\n        <button\n            class=\"\n                flatbutton\n                flatbutton--max\n                flatbutton--bold\n                flatbutton--large\n                flatbutton--neutral-blue\n                \"\n            ng-click=\"complaintForm.complain()\"\n            lj-ml=\"feedpromo.complaint.delete\"\n            ></button>\n    </form>\n</div>\n';
Site.page.template['angular/widgets/promo/closedPromo.ng.tmpl'] = '<div\n    class=\"feedpromo-closed\"\n    lj-ml=\"feedpromo.complaint.hidden\"\n    ></div>\n';
//= require_ml feedpromo.complaint.title
//= require_ml feedpromo.complaint.buy
//= require_ml feedpromo.complaint.help
//= require_ml feedpromo.complaint.hide
//= require_ml feedpromo.complaint.popup.title
//= require_ml feedpromo.complaint.delete
//= require_ml feedpromo.complaint.reason.1
//= require_ml feedpromo.complaint.reason.2
//= require_ml feedpromo.complaint.reason.3
//= require_ml feedpromo.complaint.hidden
//= require_ml grants.post_plaque.title
//= require_ml grants.post_education.title
//= require_ml grants.post_consumption.title
//= require_ml grants.post_interesting_comm.title
!function(o){return o}(),function(){"use strict";function o(o){function t(t,n){function e(e,l){if(this.promoId&&this.journalId){var a="".concat(this.journalId,"-").concat(this.promoId);r.hasOwnProperty(a)||(e&&l.preventDefault(),r[a]=!0,LJ.Api.call(i.ADD_STAT,{promoid:this.promoId,type:"click","class":t["class"]||"feedpromo"}).done(function(){e&&(o.location.href=n.attr("href"))}))}}n.on("click",function(o){t.noRedirects||o.metaKey||o.ctrlKey?e.call(t):e.call(t,!0,o)}).on("mousedown",function(o){1!==o.which&&e.call(t)}).on("keydown",function(o){13===o.keyCode&&e.call(t,!0,o)})}var r={};return{link:t,scope:{promoId:"=ljPromoClickPromoId",journalId:"=ljPromoClickJournalId","class":"@ljPromoClickClass",noRedirects:"=ljPromoClickNoRedirects"}}}function t(o,t){function n(r,n,e,l){if(r&&r["class"]&&"grants"===r["class"]){var i=angular.element(".ljcut-link-expand",n.parents("article"));i&&!i.attr("lj-promo-click")&&(i.attr("lj-promo-click",""),i.attr("lj-promo-click-promo-id",r.promoId),i.attr("lj-promo-click-journal-id",r.journalId),i.attr("lj-promo-click-no-redirects",!0),i.attr("lj-promo-click-class","grants"),i.replaceWith(t(i.clone())(r)))}l.setParams({promoId:r.promoId,itemId:r.itemId,journalId:r.journalId,"class":r["class"]||"feedpromo",grantsParams:r.grantsParams,noHtmlMutations:r.noHtmlMutations});var a=!0;angular.isDefined(r.sendStatsOnLink)&&(a=r.sendStatsOnLink),a&&l.sendViewStat(),o.addElement(r.promoId,n.closest(r.entrySelector))}return{link:n,scope:{promoId:"=ljPromoControlPromoId",itemId:"=ljPromoControlItemId",journalId:"=ljPromoControlJournalId","class":"@ljPromoControlClass",entrySelector:"@ljPromoControlEntrySelector",sendStatsOnLink:"=controlSendStatsOnLink",grantsParams:"=ljPromoControlGrantsParams",noHtmlMutations:"=ljPromoControlNoHtmlMutations"},templateUrl:"promoControl.ng.tmpl",controller:r,controllerAs:"promoControl"}}function r(o,t,r,n){var e=this;e.profileInfo=Site.remote,e.showComplaintForm=function(){o.showForm(e.params);var t=!!o.complaintFormInited,l=!!LJ.Page.NgPromoComplaintForm;if(!t&&l){var i;null===(i=LJ.Page.NgPromoComplaintForm.service)||void 0===i?void 0:i.addElement(e.params.promoId,r.closest(n.entrySelector)),LJ.Page.NgPromoComplaintForm.show(e.params)}},e.setParams=function(o){e.params=o,e.getPromoMl()},e.sendViewStat=function(){e.params.promoId&&t.call(i.ADD_STAT,{promoid:e.params.promoId,"class":e.params["class"],type:"view"},{silent:!0})},e.getPromoMl=function(){var o=e.params.grantsParams,t=void 0===o?{}:o;if(t.isGrant)return!t.isInterestingComm||t.isConsumption||t.isEducation?void(t.isConsumption&&!t.isEducation?e.promoTitleMl="grants.post_consumption.title":t.isEducation&&!t.isConsumption?e.promoTitleMl="grants.post_education.title":e.promoTitleMl="grants.post_plaque.title"):void(e.promoTitleMl="grants.post_interesting_comm.title")}}function n(){return{templateUrl:"complaintForm.ng.tmpl",controller:e,controllerAs:"complaintForm"}}function e(o,t){var r=this;t[0].querySelector(".feedpromo-complaint").style.display="",r.reason=1,r.shown=o.formShown,r.complain=function(){return o.complain(r.reason)},r.hide=o.hideForm,o.complaintFormInited=!0,LJ.Page.NgPromoComplaintForm={show:o.showForm,service:o}}function l(o,t,r,n){function e(o,t){P[o]=t}function l(o){c=o.promoId,s=o.itemId,p=o.journalId,d=o.noHtmlMutations,u=!0,n()}function i(){u=!1}function a(o){i(),m(),Promise.all([r.call("friendsfeed.complain_promo",{reason:o,promoid:c}),r.call("friendsfeed.hide_promo",{journal:p,itemid:s,promoid:c})])}function m(){var o=P[c];LJ.Event.trigger("requestReplacePromo",{element:o}),d||(null===o||void 0===o?void 0:o.replaceWith(f))}var c,s,p,d,u=!1,f=o(t.get("closedPromo.ng.tmpl"))({}),P={};return{formShown:function(){return u},showForm:l,hideForm:i,complain:a,addElement:e}}o.$inject=["$window"],t.$inject=["complaintService","$compile"],e.$inject=["complaintService","$element"],r.$inject=["complaintService","Api","$element","$scope"],l.$inject=["$compile","$templateCache","Api","$timeout"],angular.module("LJ.PromoControl",["LJ.Api","LJ.Templates"]),angular.module("LJ.PromoControl").run(function(){angular.element("[ng-app]").append("<div promo-complaint-form></div>")}).factory("complaintService",l).controller("ljPromoControlCtrl",r).controller("complaintFormCtrl",e).directive("ljPromoControl",t).directive("ljPromoClick",o).directive("promoComplaintForm",n);var i={ADD_STAT:"promo.add_stat"};!function(o){return o}()}();
/* <<< file end: js/feed/promoControl.js */

//# map link was there [promoControl.js.map]
/* >>> file start: js/widgets/angular/promo.js */
function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
//= require js/core/angular/api.js
//= require js/feed/promoControl.js
LJ.UI.registerTemplate('templates-Widgets-entryunit-v3-entryunit', " <article class=\" entryunit js--entryunit {{if $data.selfpromo}} entryunit--promo entryunit--selfpromo {{/if}} {{if $data.commpromo}} entryunit--promo entryunit--commpromo {{/if}} {{if $data.mustread}} entryunit--mustread {{/if}} {{if $data.discoverypost}} entryunit--discovery {{/if}} {{if $data.delta}} {{if $data.delta < 0}} entryunit--state-down {{else}} entryunit--state-up {{/if}} {{/if}} {{if ($data.position == 1) || ($data.position == 2) || ($data.position == 3)}} js--state-topthree {{/if}} \" {{if $data.is_new_ratings}} ng-controller=\"ArticleCtrl as article\" {{/if}} lj-screenable=\"social:widgets:parse\"> <div class=\"entryunit__meta meta-entryunit\"> <ul class=\"meta-entryunit__items\">{{if $data.position}}<li class=\" meta-entryunit__item meta-entryunit__item--position \" title=\" {{if $data.delta}} {{html LJ.mltext(\'entryunit.updown\', \'delta_abs\', $data.delta_abs)}} {{else}} {{html LJ.mltext(\'entryunit.static.position\')}} {{/if}} \" ><span class=\"entryunit__position position-entryunit\"> {{if $data.delta}} {{if $data.delta < 0}} <span lj-svg-icon=\"flaticon--arrow-rounded-down\"></span> {{else}} <span lj-svg-icon=\"flaticon--arrow-rounded-up\"></span> {{/if}} {{/if}} <span class=\" position-entryunit__number js--position-number \">{{html $data.position}} </span></span></li>{{/if}}{{if $data.label}}<li class=\" meta-entryunit__item meta-entryunit__item--labels \" ><span class=\"b-entryunit-label\">{{html $data.label}}</span></li>{{else}}<li class=\" meta-entryunit__item meta-entryunit__item--labels \" ><ul class=\"entryunit__labels labels-entryunit\"> {{if $data.selfpromo}} <li class=\" labels-entryunit__item labels-entryunit__item--selfpromo \"><a class=\" promo-label promo-label--selfpromo \" href=\"{{html $data.siteroot}}/shop/selfpromo.bml?country={{html $data.country}}\" target=\"_blank\" >{{html LJ.mltext(\'main.promo.head\')}}</a></li> {{else $data.commpromo}} <li class=\" labels-entryunit__item labels-entryunit__item--commpromo \"><a class=\" promo-label promo-label--commpromo\" href=\"{{html $data.siteroot}}/shop/commpromo.bml?country={{html $data.country}}\" target=\"_blank\" >{{html LJ.mltext(\'main.promo.head\')}}</a></li> {{/if}} <li class=\" labels-entryunit__item labels-entryunit__item--mustread \"><span class=\" promo-label promo-label--mustread\">{{html LJ.mltext(\'main.mustread.head\')}}</span></li> <li class=\" labels-entryunit__item labels-entryunit__item--discovery \"><span class=\" promo-label promo-label--discovery\">{{html LJ.mltext(\'main.discovery.head\')}}</span></li> </ul> </li>{{/if}}{{if $data.ljuser}}<li class=\" meta-entryunit__item meta-entryunit__item--author \" ><span class=\"entryunit__author author-entryunit\">{{each ($value.ljuser || $data.ljuser)}}{{if ($value.amp || $data.amp)}}<span class=\"ljuser {{if !(($value.inline_css || $data.inline_css))}} i-ljuser {{if ($value.striked || $data.striked)}} i-ljuser-deleted {{/if}} i-ljuser-type-{{html ($value.journaltype || $data.journaltype)}} {{/if}} {{if ($value.noctxpopup || $data.noctxpopup)}} noctxpopup i-ljuser-nopopup {{/if}} {{if ($value.alias || $data.alias)}} with-alias i-ljuser-withalias {{/if}} {{if ($value.side_alias || $data.side_alias)}} with-alias-value i-ljuser-showalias {{/if}} \">{{if ($value.show_userhead || $data.show_userhead)}}<a href=\"{{html ($value.profile_url || $data.profile_url)}}\" class=\"i-ljuser-profile\" ><amp-img class=\"i-ljuser-userhead\" src=\"{{html ($value.userhead_url || $data.userhead_url)}}\" width=\"16\" height=\"16\" ></amp-img></a>{{/if}}<a href=\"{{html ($value.journal_url || $data.journal_url)}}\" class=\"i-ljuser-username\" ><b>{{html ($value.journal || $data.journal)}}</b></a></span>{{else}}<span {{if ($value.inline_css || $data.inline_css)}} style=\" white-space:nowrap; {{if ($value.striked || $data.striked)}} text-decoration:line-through; {{/if}} \" {{/if}} class=\"ljuser {{if !(($value.inline_css || $data.inline_css))}} i-ljuser {{if ($value.striked || $data.striked)}} i-ljuser-deleted {{/if}} i-ljuser-type-{{html ($value.journaltype || $data.journaltype)}} {{/if}} {{if ($value.noctxpopup || $data.noctxpopup)}} noctxpopup i-ljuser-nopopup {{/if}} {{if ($value.alias || $data.alias)}} with-alias i-ljuser-withalias {{/if}} {{if ($value.side_alias || $data.side_alias)}} with-alias-value i-ljuser-showalias {{/if}} \" {{html ($value.attrs || $data.attrs)}} data-ljuser=\"{{html ($value.username || $data.username)}}\" lj:user=\"{{html ($value.username || $data.username)}}\" >{{if ($value.show_userhead || $data.show_userhead)}}<a href=\"{{html ($value.profile_url || $data.profile_url)}}\" {{if ($value.target || $data.target)}} target=\"{{html ($value.target || $data.target)}}\" {{/if}} class=\"i-ljuser-profile\" ><img {{if ($value.inline_css || $data.inline_css)}} width=\"16\" height=\"16\" style=\"vertical-align:text-bottom;border:0;padding-right:1px;\" {{else}} class=\"i-ljuser-userhead\" {{/if}} src=\"{{html ($value.userhead_url || $data.userhead_url)}}\" /></a>{{/if}}<a href=\"{{html ($value.journal_url || $data.journal_url)}}\" class=\"i-ljuser-username\" {{if ($value.color || $data.color)}} style=\"color:{{html ($value.color || $data.color)}};\" {{/if}} {{if ($value.target || $data.target)}} target=\"{{html ($value.target || $data.target)}}\" {{/if}} {{if ($value.alias || $data.alias)}} title=\"{{html ($value.user_alias || $data.user_alias)}}\" {{/if}} >{{if ($value.inline_css || $data.inline_css)}}{{if ($value.bold || $data.bold)}}<b>{{/if}}{{html ($value.journal || $data.journal)}}{{if ($value.alias || $data.alias)}}<span class=\"useralias-value\">*</span>{{/if}}{{if ($value.bold || $data.bold)}}</b>{{/if}}{{else}}{{if ($value.bold || $data.bold)}}<b>{{/if}}{{html ($value.journal || $data.journal)}}{{if ($value.bold || $data.bold)}}</b>{{/if}}{{/if}}</a>{{if ($value.alias || $data.alias) && ($value.side_alias || $data.side_alias)}}<span class=\"alias-value i-ljuser-alias\">{{html ($value.user_alias || $data.user_alias)}}</span>{{/if}}</span>{{/if}} {{/each}}</span></li>{{/if}}{{if $data.time}}<li class=\" meta-entryunit__item meta-entryunit__item--date \" ><time datetime=\"{{html $data.pub_date}}\" pubdate class=\"entryunit__date\" >{{html $data.time}}</time></li>{{/if}} </ul> </div> <header class=\"entryunit__head\"> <h3 class=\" entryunit__title js--entryunit-title \"><a class=\"entryunit__link\" href=\"{{html $data.post_url}}\" target=\"_blank\" title=\"{{html $data.full_subject}}\" >{{html $data.subject}}</a></h3> </header> <div class=\"entryunit__body\"> {{if $data.media}} <div class=\"entryunit__video video-entryunit\"> {{html $data.media}} </div> {{/if}} {{if $data.image_size}} {{if ($data.image_size == 2)}} <figure class=\"entryunit__photo photo-entryunit\"> <a href=\"{{html $data.post_url}}\" target=\"_blank\" ><img src=\"{{html $data.image_url}}\" alt=\"\" class=\"photo-entryunit__pic\"></a> </figure> {{/if}} {{if ($data.image_size == 3)}} <figure class=\"entryunit__panorama panorama-entryunit\"> <a href=\"{{html $data.post_url}}\" target=\"_blank\" style=\"background-image: url({{html $data.image_url}});\" class=\"panorama-entryunit__pic\" ><img src=\"{{html $data.image_url}}\" alt=\"\" class=\"panorama-entryunit__pic--print\"></a> </figure> {{/if}} {{/if}} <div class=\"entryunit__text\">{{html $data.body}}</div> <div class=\"entryunit__stat entryunit-stat\"> <ul class=\"stat-entryunit__list entryunit-stat-list\"> {{if $data.comments_allowed}} <li class=\" entryunit-stat-list__item entryunit-stat-list-item entryunit-stat-list-item--likes \" lj-likus lj-likus-medius=\"true\" lj-likus-no-actions=\"{{html $data.post_url}}\" lj-likus-journal=\"{{html $data.journal_id}}\" lj-likus-item=\"{{html $data.ditem_id}}\" lj-likus-token=\"{{html $data.likes_signature}}\" > </li> {{/if}} <li class=\" entryunit-stat-list__item entryunit-stat-list-item entryunit-stat-list-item--comments \"> <a class=\" entryunit-stat-list-item__link entryunit-stat-list-item-link \" href=\" {{if $data.reply_count == \'0\'}} {{html $data.post_url}}?mode=reply#add_comment {{else}} {{html $data.post_url}}?view=comments#comments {{/if}} \" target=\"_blank\" > <span class=\" entryunit-stat-list-item__icon entryunit-stat-list-item-icon \"> <span lj-svg-icon=\"flaticon--medius-comments\"></span> </span> <span class=\" entryunit-stat-list-item__value entryunit-stat-list-item-value \"> {{if $data.reply_count == \'0\'}} {{html LJ.mltext(\'entryunit.comments.none\')}} {{else}} {{html LJ.mltext(\'entryunit.comments.numbersonly\', \'reply_count\', $data.reply_count)}} {{/if}} </span> </a> </li> </ul> </div> </div> <footer class=\"entryunit__footer\"> <div class=\"entryunit__toolbar entryunit-toolbar\"> {{if $data.comments_allowed}} <div class=\" entryunit-toolbar__item entryunit-toolbar__item--comments \" > <a {{if $data.reply_count == \'0\'}} href=\"{{html $data.post_url}}?mode=reply#add_comment\" {{else}} href=\"{{html $data.post_url}}?view=comments#comments\" {{/if}} target=\"_blank\" class=\"entryunit-toolbar__link\" > <svg width=\"17\" height=\"16\" class=\"svgicon flaticon flaticon--comments-bold\"> <use xlink:href=\"#flaticon--comments-bold\"/> </svg> <span class=\"entryunit-toolbar__link-text\"> {{if $data.reply_count == \'0\'}} {{html LJ.mltext(\'entryunit.comments.none\')}} {{else}} {{html LJ.mltext(\'entryunit.comments.numbersonly\', \'reply_count\', $data.reply_count)}} {{/if}} </span> </a> </div> {{/if}} {{if $data.comments_allowed}} <div class=\" entryunit-toolbar__item entryunit-toolbar__item--likes \" lj-likus lj-likus-no-actions=\"{{html $data.post_url}}\" lj-likus-journal=\"{{html $data.journal_id}}\" lj-likus-item=\"{{html $data.ditem_id}}\" lj-likus-token=\"{{html $data.likes_signature}}\" ></div> {{/if}} </div> {{if !($data.hide_actions)}} <div class=\"entryunit__controls controls-entryunit\"> <ul class=\"controls-entryunit__items\"> <li class=\" controls-entryunit__item controls-entryunit__item--read \"> <a href=\"javascript:void(0)\" class=\"controls-entryunit__link\" ><span class=\"controls-entryunit__icon\"><span lj-svg-icon=\"flaticon--check\"></span></span><span class=\" controls-entryunit__tooltip tooltip-entryunit tooltip-entryunit--read-read \">{{html LJ.mltext(\'entryunit.read\')}}</span><span class=\" controls-entryunit__tooltip tooltip-entryunit tooltip-entryunit--read-unread \">{{html LJ.mltext(\'entryunit.unread\')}}</span></a> </li> <li class=\" controls-entryunit__item controls-entryunit__item--hide \"> <a href=\"javascript:void(0)\" class=\"controls-entryunit__link\" ><span class=\"controls-entryunit__icon\"><span lj-svg-icon=\"flaticon--hide\"></span></span><span class=\" controls-entryunit__tooltip tooltip-entryunit tooltip-entryunit--hide-hide \">{{if $data.is_community}}{{html LJ.mltext(\'entryunit.hide.community\')}}{{else}}{{html LJ.mltext(\'entryunit.hide\')}}{{/if}}</span><span class=\" controls-entryunit__tooltip tooltip-entryunit tooltip-entryunit--hide-show \">{{if $data.is_community}}{{html LJ.mltext(\'entryunit.show.community\')}}{{else}}{{html LJ.mltext(\'entryunit.show\')}}{{/if}}</span></a> </li> </ul> </div> {{/if}} </footer> {{if !($data.mustread)}} <div class=\" entryunit__mark-control entryunit-mark-control \" ng-click=\"article.toggleControl($event)\" > <span lj-svg-icon=\"flaticon--arrow-dropdown\"></span> </div> <div class=\" b-popup entryunit-mark-popup \" ng-class=\"{\'entryunit-mark-popup--visible\': article.controlsVisible}\" > <div class=\"b-popup-outer\"> <div class=\"b-popup-inner\"> <i class=\"i-popup-arr i-popup-arrtr\"> <i class=\"i-popup-arr-brdr-outer\"> <i class=\"i-popup-arr-brdr-inner\"> <i class=\"i-popup-arr-bg\"></i> </i> </i> </i> <ul class=\" entryunit__mark entryunit-mark \" > <li class=\" controls-entryunit__item--read entryunit-mark__item entryunit-mark-item entryunit-mark-item--read \"> <span lj-svg-icon=\"flaticon--check\"></span> <span class=\" entryunit-mark-item__title entryunit-mark-item-title entryunit-mark-item-title--on \"> {{html LJ.mltext(\'entryunit.read\')}} </span> <span class=\" entryunit-mark-item__title entryunit-mark-item-title entryunit-mark-item-title--off \"> {{html LJ.mltext(\'entryunit.unread\')}} </span> </li> <li class=\" controls-entryunit__item--hide entryunit-mark__item entryunit-mark-item entryunit-mark-item--hide \"> <span lj-svg-icon=\"flaticon--hide\"></span> <span class=\" entryunit-mark-item__title entryunit-mark-item-title entryunit-mark-item-title--on \"> {{if $data.is_community}} {{html LJ.mltext(\'entryunit.hide.community\')}} {{else}} {{html LJ.mltext(\'entryunit.hide\')}} {{/if}} </span> <span class=\" entryunit-mark-item__title entryunit-mark-item-title entryunit-mark-item-title--off \"> {{if $data.is_community}} {{html LJ.mltext(\'entryunit.show.community\')}} {{else}} {{html LJ.mltext(\'entryunit.show\')}} {{/if}} </span> </li> </ul> </div> </div> </div> {{/if}} </article> ", 'JQuery.stat');
Site.page.template['angular/widgets/promo/selfpromo.ng.tmpl'] = '<!-- promoblock (selfpromo) -->\n<div\n    class=\"\n        b-ljpromo\n        b-ljpromo--{{type}}\n        \"\n    ng-class=\"{\n        \'b-ljpromo-empty\':      !promo.state.preloading && promo.state.isFree(),\n        \'b-ljpromo-preloading\': promo.state.preloading,\n        \'b-ljpromo-scroll\':     promo.items.length > 1,\n        \'b-ljpromo-loading\':    promo.state.loading,\n\n        \'b-ljpromo-start\': promo.state.start,\n        \'b-ljpromo-end\':   !promo.state.preloading && promo.state.end,\n        \'b-ljpromo--homepage-v2\': !Site.flags.homepage_v3\n    }\"\n    ng-show=\"(promo.state.isFree() || promo.state.isBought()) && (promo.isCyr || (type === \'selfpromo\' && promo.isNoncyrSelfpromoEnabled) || (type === \'commpromo\' && promo.isNoncyrCommpromoEnabled))\"\n    >\n    <!-- container -->\n    <div class=\"b-ljpromo-container\">\n        <!-- wrapper for carousel -->\n        <div class=\"b-ljpromo-wrapper\">\n\n            <!-- items -->\n            <ul\n                class=\"b-ljpromo-items\"\n                ng-style=\"{ marginTop: -promo.index * promo.height }\"\n                >\n                <li\n                    class=\"b-ljpromo-item\"\n                    data-current=\"{{promo.index}}\"\n                    ng-repeat=\"item in promo.items\"\n                    lj-entry=\"promo.ljEntryParams(item, $index)\"\n                ></li>\n            </ul><!-- /items -->\n\n            <!-- link for more items -->\n            <p class=\"b-ljpromo-more\"><!--\n                --><span class=\"b-ljpromo-more-inner\"><!--\n                    --><span ng-if=\"type === \'selfpromo\'\" class=\"b-ljpromo-more-inner-inner\" lj-ml=\"main.promo.more.selfpromo\"></span><!--\n                    --><span ng-if=\"type === \'commpromo\'\" class=\"b-ljpromo-more-inner-inner\" lj-ml=\"main.promo.more.calendarpromo\"></span><!--\n                --></span><!--\n            --></p>\n\n            <!-- dummy loader -->\n            <div class=\"b-ljpromo-dummy\" ng-if=\"Site.flags.homepage_v3\">\n                <div class=\"b-ljpromo-dummy-meta\">\n                    <a\n                        class=\"b-ljpromo-dummy-promo\"\n                        ng-href=\"{{promo.siteroot}}/shop/{{type}}.bml\"\n                        target=\"_blank\"\n                        lj-ml=\"main.promo.head\"\n                        ></a>\n                    <span class=\"b-ljpromo-dummy-block\"></span>\n                </div>\n                <div class=\"b-ljpromo-dummy-head\">\n                    <span class=\"b-ljpromo-dummy-block\"></span>\n                </div>\n                <div class=\"b-ljpromo-dummy-body\">\n                    <span class=\"b-ljpromo-dummy-block\"></span>\n                    <span class=\"b-ljpromo-dummy-block\"></span>\n                </div>\n            </div>\n\n\n        </div><!-- /wraper -->\n\n        <!-- promoblock navigation -->\n        <a\n            href=\"javascript:void(0);\"\n            lj-ml=\"main.promo.nav.prev\"\n            lj-ml-attr=\"title\"\n            class=\"b-ljpromo-nav b-ljpromo-nav-prev\"\n            ng-click=\"promo.prev()\"\n            ng-if=\"promo.showListNavigation()\"\n            >\n            <span\n                class=\"b-ljpromo-icon-prev\"\n                lj-svg-icon=\"flaticon--arrow-down\"><!-- prev entry --></span>\n        </a>\n        <a\n            href=\"javascript:void(0);\"\n            lj-ml=\"main.promo.nav.next\"\n            lj-ml-attr=\"title\"\n            class=\"b-ljpromo-nav b-ljpromo-nav-next\"\n            ng-click=\"promo.next()\"\n            ng-if=\"promo.showListNavigation()\"\n            >\n            <span\n                class=\"b-ljpromo-icon-next\"\n                lj-svg-icon=\"flaticon--arrow-up\"><!-- next entry --></span>\n        </a>\n\n        <!-- empty message -->\n        <div class=\"b-ljpromo-emptiness\">\n            <!-- entryunit -->\n            <article class=\"\n                        entryunit\n                        entryunit--promo\n                        entryunit--{{type}}\n                        entryunit--emptypromo\n                        \">\n                <!-- meta -->\n                <div class=\"entryunit__meta meta-entryunit\">\n                    <!-- meta-items -->\n                    <ul class=\"meta-entryunit__items\">\n                        <li class=\"meta-entryunit__item\">\n                            <ul class=\"entryunit__labels labels-entryunit\">\n                                <li\n                                    class=\"\n                                        labels-entryunit__item\n                                        promo-label\n                                        promo-label--selfpromo\"\n                                    >\n                                        <span\n                                            class=\"rating-label\"\n                                            lj-ml=\"main.promo.head\"\n                                        ></span>\n                                    </li>\n                                <li\n                                    class=\"\n                                        labels-entryunit__item\n                                        promo-label\n                                        promo-label--commpromo\"\n                                    >\n                                    <span\n                                        class=\"rating-label\"\n                                        lj-ml=\"main.promo.head\"\n                                     ></span>\n                                </li>\n                            </ul>\n                        </li>\n                    </ul><!-- /meta-items -->\n                </div> <!-- /meta -->\n\n                <!-- body -->\n                <div class=\"entryunit__body\">\n                    <a\n                        target=\"_blank\"\n                        class=\"promo-label promo-label--selfpromo\"\n                        lj-ml=\"main.promo.head\"\n                        href=\"{{promo.siteroot}}/shop/selfpromo.bml?country={{region}}\"\n                    ></a>\n                    <!-- entry text -->\n                    <span\n                        class=\"entryunit__text\"\n                        lj-ml=\"{\n                            \'main.promo.empty.selfpromo\':     type === \'selfpromo\',\n                            \'main.promo.empty.calendarpromo\': type === \'commpromo\',\n                        }\"\n                    ></span>\n                </div><!-- /body -->\n            </article><!-- /entryunit -->\n        </div><!-- /empty message -->\n    </div><!-- /container -->\n\n    <!-- promoblock footer (if promo only) -->\n    <p\n            class=\"b-ljpromo-stat\"\n            ng-if=\"type === \'selfpromo\' && promo.items[0]\"\n            ><!--\n        --><span\n            lj-ml=\"main.promo.footer.selfpromo\"\n            lj-ml-resolve=\"{\n                timeleft_hours: promo.items[0].timeleft_hours,\n                timeleft_minutes: promo.items[0].timeleft_minutes,\n                overbet: promo.items[0].buyout,\n                country: region\n            }\"\n            lj-ml-compile\n            ng-if=\"promo.items[0].timeleft_hours > 0\"\n            ></span><!--\n        --><span\n            lj-ml=\"main.promo.footer.selfpromo.short\"\n            lj-ml-resolve=\"{\n                timeleft_minutes: promo.items[0].timeleft_minutes,\n                overbet: promo.items[0].buyout,\n                country: region\n            }\"\n            lj-ml-compile\n            ng-if=\"promo.items[0].timeleft_hours == 0\"\n            ></span><!--\n    --></p>\n\n</div>\n';
Site.page.template['angular/ljPromoEntryA.ng.tmpl'] = '<!-- NG version of templates/Widgets/entryunit/v3/entryunit.tmpl -->\n<article\n  class=\"\n    entryunit\n    js--entryunit\n    entryunit--promo\n    entryunit--feedpromo\n  \"\n  lj-screenable=\"social:widgets:parse\"\n  ng-if=\"!entryCtrl.isOldDesign\"\n>\n  <div class=\"entryunit__meta meta-entryunit\">\n    <ul class=\"meta-entryunit__items\">\n      <li\n        class=\"\n          meta-entryunit__item\n          meta-entryunit__item--author\n        \"\n      >\n        <span class=\"entryunit__author author-entryunit\"\n        >\n          <span\n            class=\"ljuser i-ljuser  i-ljuser-type-P\"\n          ><!--\n         --><a\n              ng-href=\"{{ entryData.ljuser[0].profile_url }}\"\n              target=\"_blank\"\n              class=\"i-ljuser-profile\"\n            ><!--\n           --><img\n                class=\"i-ljuser-userhead ContextualPopup ContextualPopup ContextualPopup ContextualPopup\"\n                ng-src=\"{{ entryData.ljuser[0].userhead_url }}\"\n                loading=\"lazy\"\n              ><!--\n         --></a><!--\n         --><a\n              ng-href=\"{{ entryData.ljuser[0].journal_url }}\"\n              class=\"i-ljuser-username\"\n              target=\"_blank\"\n            ><!--\n           --><b>{{ entryData.ljuser[0].journal }}</b><!--\n         --></a>\n          </span>\n        </span>\n      </li>\n      <li class=\" meta-entryunit__item meta-entryunit__item--date \">\n          <time\n            datetime=\"{{ entryData.pub_date }}\"\n            pubdate=\"\"\n            class=\"entryunit__date\"\n          >{{ entryData.time }}</time>\n      </li>\n      <li\n        class=\"\n          meta-entryunit__item\n          meta-entryunit__item--labels\n          meta-entryunit__item--feedpromo\n        \"\n      >\n        <span\n          lj-promo-control\n          lj-promo-control-promo-id=\"entryData.promo_id\"\n          lj-promo-control-item-id=\"entryData.ditem_id\"\n          lj-promo-control-journal-id=\"entryData.journal_id\"\n          lj-promo-control-class=\"{{ entryData.feed_promo_class }}\"\n          lj-promo-control-entry-selector=\".entryunit\"\n          lj-promo-control-grants-params=\"{ isConsumption: entryData.is_consumption, isEducation: entryData.is_education, isInterestingComm: entryData.is_interesting, isGrant: entryData.is_grants_promo }\"\n          control-send-stats-on-link=\"promoControlParams.sendStatsOnLink\"\n        ></span>\n      </li>\n    </ul>\n  </div>\n  <header class=\"entryunit__head\">\n    <h3\n      class=\"\n        entryunit__title\n        js--entryunit-title\n      \"\n    >\n      <a\n        class=\"entryunit__link ng-isolate-scope\"\n        lj-html=\"entryData.subject\"\n        ng-href=\"{{ entryData.post_url }}\"\n        ng-title=\"{{ entryData.full_subject }}\"\n        target=\"_blank\"\n        lj-promo-click=\"\"\n        lj-promo-click-promo-id=\"entryData.promo_id\"\n        lj-promo-click-journal-id=\"entryData.journal_id\"\n        lj-promo-click-class=\"{{ entryData.feed_promo_class }}\"\n      ></a>\n    </h3>\n  </header>\n\n  <div class=\"entryunit__body\">\n    <div class=\"entryunit__text\" lj-html=\"entryData.body\"></div>\n    <div class=\"entryunit__stat entryunit-stat\">\n      <ul class=\"stat-entryunit__list entryunit-stat-list\">\n        <li\n          class=\"\n            entryunit-stat-list__item\n            entryunit-stat-list-item\n            entryunit-stat-list-item--likes\n          \"\n          lj-likus=\"\"\n          lj-likus-medius=\"true\"\n          lj-likus-no-actions=\"{{ entryData.post_url }}\"\n          lj-likus-journal=\"{{ entryData.journal_id }}\"\n          lj-likus-item=\"{{ entryData.ditem_id }}\"\n          lj-likus-token=\"{{ entryData.likes_signature }}\"\n        ></li>\n        <li\n          class=\"\n            entryunit-stat-list__item\n            entryunit-stat-list-item\n            entryunit-stat-list-item--comments\n          \"\n        >\n          <a\n            class=\"\n              entryunit-stat-list-item__link\n              entryunit-stat-list-item-link\n            \"\n\n            lj-promo-click\n            lj-promo-click-promo-id=\"entryData.promo_id\"\n            lj-promo-click-journal-id=\"entryData.journal_id\"\n            lj-promo-click-class=\"{{ entryData.feed_promo_class }}\"\n            target=\"_blank\"\n            ng-href=\"{{ entryCtrl.getReplyHref() }}\"\n          >\n            <span\n              class=\"\n                entryunit-stat-list-item__icon\n                entryunit-stat-list-item-icon\n              \"\n            ><span lj-svg-icon=\"flaticon--medius-comments\"></span> </span>\n\n            <span\n              class=\"\n                entryunit-stat-list-item__value\n                entryunit-stat-list-item-value\n              \"\n            >{{ entryCtrl.getReplyStatCaption() }}</span>\n          </a>\n        </li>\n      </ul>\n    </div>\n  </div>\n</article>\n\n<!-- For old design -->\n<article\n  class=\"\n    b-entryunit\n    js--entryunit\n    entryunit--promo\n    entryunit--feedpromo\n  \"\n  lj-screenable=\"social:widgets:parse\"\n  ng-if=\"entryCtrl.isOldDesign\"\n>\n\n  <!-- head -->\n  <header class=\"b-entryunit-head\">\n    <h3\n      class=\"\n        b-entryunit-title\n        js--entryunit-title\n        \">\n      <a\n        ng-href=\"{{ entryData.post_url }}\"\n        class=\"ng-isolate-scope\"\n        ng-title=\"{{ entryData.full_subject }}\"\n        target=\"_blank\"\n        lj-promo-click=\"\"\n        lj-promo-click-promo-id=\"entryData.promo_id\"\n        lj-promo-click-journal-id=\"entryData.journal_id\"\n        lj-promo-click-class=\"{{ entryData.feed_promo_class }}\"\n        >\n        {{ entryData.subject }}\n      </a>\n    </h3>\n    <span class=\"b-entryunit-author\">\n      <span\n        class=\"ljuser i-ljuser i-ljuser-type-P noctxpopup i-ljuser-nopopup\"\n      ><a\n        ng-href=\"{{ entryData.ljuser[0].profile_url }}\"\n        target=\"_blank\"\n        class=\"i-ljuser-profile\"\n        >\n        <img\n          class=\"i-ljuser-userhead\"\n          ng-src=\"{{ entryData.ljuser[0].userhead_url }}\"\n          width=\"16\"\n          height=\"16\"\n          />\n      </a>\n      <a\n        ng-href=\"{{ entryData.ljuser[0].journal_url }}\"\n        class=\"i-ljuser-username\"\n        target=\"_blank\"\n      ><b>{{ entryData.ljuser[0].journal }}</b></a>\n      </span>\n    </span>\n    <time\n      datetime=\"{{ entryData.pub_date }}\"\n      pubdate\n      class=\"b-entryunit-date\"\n      >\n    {{ entryData.time }}</time>\n    &nbsp;\n    <span\n      class=\"\n        meta-entryunit__item\n        meta-entryunit__item--labels\n        meta-entryunit__item--feedpromo\n      \"\n    >\n      <span\n        lj-promo-control\n        lj-promo-control-promo-id=\"entryData.promo_id\"\n        lj-promo-control-item-id=\"entryData.ditem_id\"\n        lj-promo-control-journal-id=\"entryData.journal_id\"\n        lj-promo-control-class=\"{{ entryData.feed_promo_class }}\"\n        lj-promo-control-entry-selector=\".entryunit\"\n        lj-promo-control-grants-params=\"{ isConsumption: entryData.is_consumption, isEducation: entryData.is_education, isInterestingComm: entryData.is_interesting, isGrant: entryData.is_grants }\"\n        control-send-stats-on-link=\"promoControlParams.sendStatsOnLink\"\n      ></span>\n    </span>\n  </header>\n  <!-- /head -->\n\n  <!-- body -->\n  <div class=\"b-entryunit-body\">\n    <!-- etnry text -->\n    <div class=\"b-entryunit-article\">\n      {{ entryData.body }}\n    </div>\n  </div>\n  <!-- /body -->\n\n<!-- meta -->\n  <div class=\"b-entryunit-meta\">\n    <ul class=\"b-entryunit-menu\">\n      <!-- comments -->\n      <li class=\"b-entryunit-menu-item b-entryunit-menu-comments\">\n        <a\n          lj-promo-click\n          lj-promo-click-promo-id=\"entryData.promo_id\"\n          lj-promo-click-journal-id=\"entryData.journal_id\"\n          lj-promo-click-class=\"{{ entryData.feed_promo_class }}\"\n          target=\"_blank\"\n          ng-href=\"{{ entryCtrl.getReplyHref() }}\"\n        >\n        <span class=\"b-entryunit-icon b-entryunit-icon-comments\"></span>\n        {{ entryCtrl.getReplyStatCaption() }}\n        </a>\n      </li>\n    </ul>\n  </div>\n  <!-- /meta -->\n</article>';
//= require_ml main.promo.head
//= require_ml main.promo.more.selfpromo
//= require_ml main.promo.more.calendarpromo
//= require_ml main.promo.nav.prev
//= require_ml main.promo.nav.next
//= require_ml main.promo.empty.selfpromo.head
//= require_ml main.promo.empty.selfpromo
//= require_ml main.promo.empty.calendarpromo
//= require_ml main.promo.empty.calendarpromo.head
//= require_ml main.promo.footer.selfpromo
//= require_ml main.promo.footer.selfpromo.short
//= require_ml entryunit.comments.none
//= require_ml entryunit.comments.numbersonly
!function(e){return e}(),function(){"use strict";function e(e){function t(t,n){var r={ratingFeedPromo:"ratings",grants:"grants"};return t in r?e.call("promo.get_list",_objectSpread({"class":r[t]},n)):e.call(t+".get_list",n)}var n={};return n.request=t,n}function t(e){var t=this;t.isOldDesign=LJ.Flags.isDisabled("homepage_v3"),t.getReplyHref=function(){var t=e.entryData;return t?t.reply_count?"".concat(t.post_url,"#comments"):"".concat(t.post_url,"?mode=reply#add_comment"):null},t.getReplyStatCaption=function(){var t=e.entryData;return t?t.reply_count?LJ.ml("entryunit.comments.numbersonly",{reply_count:t.reply_count}):LJ.ml("entryunit.comments.none"):null}}function n(e,t){function n(n,r,o){function i(){return o.current}function a(e,t){e!==t&&Number(e)===l.itemIndex&&LJ.Track.event(n.type,"show",l.subject,{nonInteraction:1}),LJ.Event.trigger("social:widgets:parse",r[0])}function s(e){angular.element(e.target).parent().is(".js--entryunit-title")&&LJ.Track.event(n.type,"click",l.subject)}var l=n.$eval(o.ljEntry);n.entryData=l,n.promoControlParams={},"ratings"===l.feed_promo_class&&(n.promoControlParams.sendStatsOnLink=!1),"grants"===l.feed_promo_class&&(n.promoControlParams.sendStatsOnLink=!1);var c;c=l.useNgTmpl?e(t.get("ljPromoEntryA.ng.tmpl"))(n):e(LJ.UI.template("templates-Widgets-entryunit-v3-entryunit",l))(n),r.append(c),n.$watch(i,a),r.on("click",s),a(0,null)}return{scope:!0,controller:"ljEntryCtrl",controllerAs:"entryCtrl",link:n}}function r(e,t,n,r,o,i,a){function s(e,n){var r=e.object&&e.object[0]||{},o={country:t.region,itemIndex:n,promo_id:r.promo_id||r.promoID};O&&(o.is_feed_promo=!0,o.feed_promo_class="ratings",o.useNgTmpl=!0),x&&(o.is_grants_promo=!0,o.is_consumption=e.is_consumption,o.is_education=e.is_education,o.is_interesting=e.is_interesting,o.feed_promo_class="grants",o.useNgTmpl=!0);var i=angular.extend({},r,o);return i}function l(){function e(){return b.items.length&&b.items[0].object}function t(){return b.items.length&&"free"===b.items[0].state}return b.state={preloading:!0,loading:!1,end:!1,start:!0,isFree:t,isBought:e},b.items=[],P=!1,b.index=0,_({limit:-1,offset:0}).then(function(e){return u(),b.state.preloading=!1,e})}function c(){return b.index===b.items.length&&P?void 0:b.index!==b.items.length-1||P?void b.animate("prev"):_({limit:-w,offset:-b.items.length+1}).then(function(e){e.length<w&&(P=!0),n(function(){b.animate("prev")})})}function m(){b.index&&(b.state.end&&(b.state.end=!1),b.animate("next"))}function p(e,t){e!==t&&u()}function u(){b.state.end=b.index>b.items.length-1,b.state.start=0===b.index}function g(e){e>=L&&(P=!0)}function d(e){b._list=e.find(".b-ljpromo-items"),b._wrapper=e.find(".b-ljpromo-wrapper"),b.height=b._wrapper.height()}function f(){b.height=b._wrapper&&b._wrapper.height()}function y(e,t){e!==t&&b.reset()}function _(n){return n=angular.extend({region:t.region,type:"entry"},n),b.isCyr="noncyr"!==t.region,b.isNoncyrSelfpromoEnabled=LJ.Flags.isEnabled("selfpromo_noc"),b.isNoncyrCommpromoEnabled=LJ.Flags.isEnabled("commercial_promo_noc"),b.state.loading=!0,e.request(t.type,n).then(function(e){return Array.prototype.push.apply(b.items,e.slots),angular.isArray(e.slots)&&e.slots.forEach(function(t){angular.isArray(t.object)&&t.object.forEach(function(n){n.likes_signature=e.likes_signature,n.ditem_id=n.post_id,n.promoID=t.promo_id})}),b.state.loading=!1,e.slots})}function j(e){var n=b.index,r="prev"===e?n+1:n-1;b._list.animate({marginTop:-b.height*r},"normal",function(){b.index=r,t.$apply()})}var h,v,b=this,P=!1,w=5,L=25;b.siteroot=LJ.get("siteroot"),b.ljEntryParams=s,b.reset=l,b.prev=c,b.next=m,b.timeleft="",b.element=d,b.animate=j,b._list=v,b._wrapper=h,b.showListNavigation=function(){return-1===["ratingFeedPromo","grants"].indexOf(t.type)},t.$watch(function(){return b.index},p),t.$watch(function(){return b.items.length},g),t.$watch("region",y),angular.element(window).on("resize",f);var O="ratingFeedPromo"===t.type,x="grants"===t.type;b.reset().then(function(){if(b.items&&b.items.length){O?(LJ.Event.trigger("ratingFeedPromo::promoItemsUpdated",{promoItems:b.items}),LJ.Event.trigger("ratingFeedPromo::activePromoChanged",{index:b.index})):x&&(LJ.Event.trigger("grantsPromo::promoItemsUpdated",{promoItems:b.items}),LJ.Event.trigger("grantsPromo::activePromoChanged",{index:b.index}));var e=b.items[b.index];a[0].dataset.promoId=e.promo_id,a[0].dataset.promotedJournalId=e.object[0].journal_id,a[0].dataset.promotedPostId=e.object[0].ditem_id}})}function o(){function e(e,t,n,r){r.element(t)}return{controller:"ljWidgetPromoCtrl",controllerAs:"promo",templateUrl:"selfpromo.ng.tmpl",scope:{region:"=ljWidgetPromoRegion",type:"@ljWidgetPromo"},link:e}}n.$inject=["$compile","$templateCache"],t.$inject=["$scope"],r.$inject=["ljPromoService","$scope","$timeout","Api","$compile","$rootScope","$element"],e.$inject=["Api"],angular.module("LJ.Widget.Promo",["LJ.Api","LJ.Directives","LJ.Templates","LJ.PromoControl"]),angular.module("LJ.Widget.Promo").factory("ljPromoService",e).controller("ljWidgetPromoCtrl",r).controller("ljEntryCtrl",t).directive("ljEntry",n).directive("ljWidgetPromo",o)}();
/* <<< file end: js/widgets/angular/promo.js */

//# map link was there [promo.js.map]
/* >>> file start: js/ratings/inPromo.js */
//= require js/widgets/angular/promo.js
!function(){var t={};LJ.define("LJ.Misc.InRatingPromo"),LJ.Misc.InRatingPromo=t;var e,n,i,o,r=LJ.Util.getDocument(),a=LJ.Util.getWindow(),d=!1,c=!1,g=!1,l=!1,u=[],m=[],s=[],v=[],f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={ratingItemsCheckLimit:t.ratingItemsCheckLimit||10},n=u.slice(0,e.ratingItemsCheckLimit),i=m.filter(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(t.object||[])[0],i=n.find(function(t){return"".concat(t.ditem_id)==="".concat(e.ditem_id)&&"".concat(t.journal_id)==="".concat(e.journal_id)});return!!i});return i},p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={ratingItemsCheckLimit:t.ratingItemsCheckLimit||10},n=u.slice(0,e.ratingItemsCheckLimit),i=s.filter(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(t.object||[])[0],i=n.find(function(t){return"".concat(t.ditem_id)==="".concat(e.ditem_id)&&"".concat(t.journal_id)==="".concat(e.journal_id)});return!!i});return i},h=function(){if(!d||!e)return!1;var t=e.getBoundingClientRect(),n=a.innerHeight;return!(t.top>n||t.bottom<0)},L=function(){if(!c||!n)return!1;var t=n.getBoundingClientRect(),e=a.innerHeight;return!(t.top>e||t.bottom<0)},J=function(){if(i&&h()){var t=i.promo_id;if(!(v.indexOf(t)>-1)){var e=((i||{}).object||[])[0];e&&(v.push(t),LJ.Api.call("promo.add_stat",{promoid:t,"class":"ratings",type:"view"}).fail(function(){}))}}},b=function(){if(o&&L()){var t=o.promo_id;if(!(v.indexOf(t)>-1)){var e=((o||{}).object||[])[0];e&&(v.push(t),LJ.Api.call("promo.add_stat",{promoid:t,"class":"grants",type:"view"}).fail(function(){}))}}},j=function(){e&&(d=!1,e.style.display="none")},w=function(){n&&(c=!1,n.style.display="none")},y=function(){e&&(d=!0,e.style.display="")},I=function(){n&&(c=!0,n.style.display="")};LJ.Event.on("ratingFeedPromo::promoItemsUpdated",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m=t.promoItems,f().length===m.length&&w()}),LJ.Event.on("ratingFeedPromo::activePromoChanged",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m&&(i=m[t.index],d&&b())}),LJ.Event.on("grantsPromo::promoItemsUpdated",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s=t.promoItems,p().length===s.length&&w()}),LJ.Event.on("grantsPromo::activePromoChanged",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s&&(o=s[t.index],c&&b())});var P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.homepageObj,i=t.listViewObj,o=t.ngBootstrapper;if(-1!==n.get("category")){var a=n.get("output")||{};u=(a.models||[]).map(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.attributes});var d=7,c=a.models[d-1];if(!c)return void j();if(e&&m.length&&f().length===m.length)return void j();var l,s=i.viewOrder[c.id][0],v=a.models[d];v&&(l=i.viewOrder[v.id][0]),e||(e=r.createElement("div"),e.classList.add("js--feedPromo"),e.setAttribute("lj-widget-promo","ratingFeedPromo"),e.setAttribute("lj-widget-promo-region","homepage.region")),s.parentNode.insertBefore(e,l),y(),J(),g||(o(angular.element(e),["LJ.Widget.Promo","LJ.Directives","LJ.Likus"]),g=!0)}},_=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.homepageObj,i=t.listViewObj,o=t.ngBootstrapper;if(-1!==e.get("category")){var a=e.get("output")||{};u=(a.models||[]).map(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.attributes});var d=12,c=a.models[d-1];if(!c)return void w();if(n&&s.length&&p().length===s.length)return void w();var g,m=i.viewOrder[c.id][0],v=a.models[d];v&&(g=i.viewOrder[v.id][0]),n||(n=r.createElement("div"),n.setAttribute("lj-widget-promo","grants"),n.setAttribute("lj-widget-promo-region","homepage.region")),m.parentNode.insertBefore(n,g),I(),b(),l||(o(angular.element(n),["LJ.Widget.Promo","LJ.Directives","LJ.Likus"]),l=!0)}};t.onListViewCheckDone=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};P(t),_(t)};var C=function(){J(),b()},O=LJ.Function.debounce(C,300);a.addEventListener("scroll",O)}();
/* <<< file end: js/ratings/inPromo.js */

//# map link was there [inPromo.js.map]
/* >>> file start: js/misc/topStrip.js */
!function(t){return t}(),function(){function t(t,n){return{link:function(t,n,o){var i=n.find(".top-strip__close"),e=LJ.get("remote"),r=o.topstripProp,c=LJ.Cookie.get("prop_"+r);r&&(!c&&e?LJ.Prop.get(r).then(function(t){t||n.show()}):"1"!==c&&n.show(),i.click(function(){LJ.Prop.set(r,1).then(function(t){n.hide()})}))}}}t.$inject=["$document","$window"],angular.module("TopStrip",[]).directive("topstrip",t)}();
/* <<< file end: js/misc/topStrip.js */

//# map link was there [topStrip.js.map]
/* >>> file start: js/mainpage/main.js */
//= require js/lib/underscore.min.js
//= require js/lib/backbone.min.js
//= require js/mainpage/promo.js
//= require js/widgets/likus.js
//= require js/ratings/inPromo.js
//= require js/misc/topStrip.js
LJ.UI.registerTemplate('templates-Widgets-HomePage-top_promo', "{{if $data.homepage_version == 3}} <div class=\"b-topten-promo-outer\"> <div class=\"b-topten-promo-inner\"> <h4 class=\"b-topten-promo-title\"> {{html LJ.mltext(\'main.top.promo\')}} </h4> {{if $data.data_selfpromo}} {{each ($value.data_selfpromo || $data.data_selfpromo)}} {{each ($value.object || $data.object)}} {{each ($value.ljuser || $data.ljuser)}}{{if ($value.amp || $data.amp)}}<span class=\"ljuser {{if !(($value.inline_css || $data.inline_css))}} i-ljuser {{if ($value.striked || $data.striked)}} i-ljuser-deleted {{/if}} i-ljuser-type-{{html ($value.journaltype || $data.journaltype)}} {{/if}} {{if ($value.noctxpopup || $data.noctxpopup)}} noctxpopup i-ljuser-nopopup {{/if}} {{if ($value.alias || $data.alias)}} with-alias i-ljuser-withalias {{/if}} {{if ($value.side_alias || $data.side_alias)}} with-alias-value i-ljuser-showalias {{/if}} \">{{if ($value.show_userhead || $data.show_userhead)}}<a href=\"{{html ($value.profile_url || $data.profile_url)}}\" class=\"i-ljuser-profile\" ><amp-img class=\"i-ljuser-userhead\" src=\"{{html ($value.userhead_url || $data.userhead_url)}}\" width=\"16\" height=\"16\" ></amp-img></a>{{/if}}<a href=\"{{html ($value.journal_url || $data.journal_url)}}\" class=\"i-ljuser-username\" ><b>{{html ($value.journal || $data.journal)}}</b></a></span>{{else}}<span {{if ($value.inline_css || $data.inline_css)}} style=\" white-space:nowrap; {{if ($value.striked || $data.striked)}} text-decoration:line-through; {{/if}} \" {{/if}} class=\"ljuser {{if !(($value.inline_css || $data.inline_css))}} i-ljuser {{if ($value.striked || $data.striked)}} i-ljuser-deleted {{/if}} i-ljuser-type-{{html ($value.journaltype || $data.journaltype)}} {{/if}} {{if ($value.noctxpopup || $data.noctxpopup)}} noctxpopup i-ljuser-nopopup {{/if}} {{if ($value.alias || $data.alias)}} with-alias i-ljuser-withalias {{/if}} {{if ($value.side_alias || $data.side_alias)}} with-alias-value i-ljuser-showalias {{/if}} \" {{html ($value.attrs || $data.attrs)}} data-ljuser=\"{{html ($value.username || $data.username)}}\" lj:user=\"{{html ($value.username || $data.username)}}\" >{{if ($value.show_userhead || $data.show_userhead)}}<a href=\"{{html ($value.profile_url || $data.profile_url)}}\" {{if ($value.target || $data.target)}} target=\"{{html ($value.target || $data.target)}}\" {{/if}} class=\"i-ljuser-profile\" ><img {{if ($value.inline_css || $data.inline_css)}} width=\"16\" height=\"16\" style=\"vertical-align:text-bottom;border:0;padding-right:1px;\" {{else}} class=\"i-ljuser-userhead\" {{/if}} src=\"{{html ($value.userhead_url || $data.userhead_url)}}\" /></a>{{/if}}<a href=\"{{html ($value.journal_url || $data.journal_url)}}\" class=\"i-ljuser-username\" {{if ($value.color || $data.color)}} style=\"color:{{html ($value.color || $data.color)}};\" {{/if}} {{if ($value.target || $data.target)}} target=\"{{html ($value.target || $data.target)}}\" {{/if}} {{if ($value.alias || $data.alias)}} title=\"{{html ($value.user_alias || $data.user_alias)}}\" {{/if}} >{{if ($value.inline_css || $data.inline_css)}}{{if ($value.bold || $data.bold)}}<b>{{/if}}{{html ($value.journal || $data.journal)}}{{if ($value.alias || $data.alias)}}<span class=\"useralias-value\">*</span>{{/if}}{{if ($value.bold || $data.bold)}}</b>{{/if}}{{else}}{{if ($value.bold || $data.bold)}}<b>{{/if}}{{html ($value.journal || $data.journal)}}{{if ($value.bold || $data.bold)}}</b>{{/if}}{{/if}}</a>{{if ($value.alias || $data.alias) && ($value.side_alias || $data.side_alias)}}<span class=\"alias-value i-ljuser-alias\">{{html ($value.user_alias || $data.user_alias)}}</span>{{/if}}</span>{{/if}} {{/each}} {{/each}} {{/each}} {{else}} <span class=\"b-topten-promo-empty\"> {{if $data.what == \'users\'}} {{html LJ.mltext(\'main.top.promo.empty.users\')}} {{else}} {{html LJ.mltext(\'main.top.promo.empty.communities\')}} {{/if}} </span> {{/if}} </div> </div> {{if $data.data_selfpromo}} {{each ($value.data_selfpromo || $data.data_selfpromo)}} <div class=\"b-topten-promo-stat\">{{if ($value.what || $data.what) == \'users\'}}{{if ($value.view_type || $data.view_type) == \'cyr\'}}{{html LJ.mltext(\'main.top.promo.stat.users.cyr\', \'buyout\', ($value.buyout || $data.buyout), \'timeleft_hours\', ($value.timeleft_hours || $data.timeleft_hours), \'timeleft_minutes\', ($value.timeleft_minutes || $data.timeleft_minutes))}}{{else ($value.view_type || $data.view_type) == \'ua\'}}{{html LJ.mltext(\'main.top.promo.stat.users.ua\', \'buyout\', ($value.buyout || $data.buyout), \'timeleft_hours\', ($value.timeleft_hours || $data.timeleft_hours), \'timeleft_minutes\', ($value.timeleft_minutes || $data.timeleft_minutes))}}{{/if}}{{else}}{{if ($value.view_type || $data.view_type) == \'cyr\'}}{{html LJ.mltext(\'main.top.promo.stat.communities.cyr\', \'buyout\', ($value.buyout || $data.buyout), \'timeleft_hours\', ($value.timeleft_hours || $data.timeleft_hours), \'timeleft_minutes\', ($value.timeleft_minutes || $data.timeleft_minutes))}}{{else ($value.view_type || $data.view_type) == \'ua\'}}{{html LJ.mltext(\'main.top.promo.stat.communities.ua\', \'buyout\', ($value.buyout || $data.buyout), \'timeleft_hours\', ($value.timeleft_hours || $data.timeleft_hours), \'timeleft_minutes\', ($value.timeleft_minutes || $data.timeleft_minutes))}}{{/if}}{{/if}}</div> {{/each}} {{/if}} {{else}} <div class=\"b-topten-promo-outer\"> <div class=\"b-topten-promo-inner\"> <h4 class=\"b-topten-promo-title\"> {{html LJ.mltext(\'main.top.promo\')}} </h4> {{if $data.data_selfpromo}} {{each ($value.data_selfpromo || $data.data_selfpromo)}} {{each ($value.object || $data.object)}} {{each ($value.ljuser || $data.ljuser)}}{{if ($value.amp || $data.amp)}}<span class=\"ljuser {{if !(($value.inline_css || $data.inline_css))}} i-ljuser {{if ($value.striked || $data.striked)}} i-ljuser-deleted {{/if}} i-ljuser-type-{{html ($value.journaltype || $data.journaltype)}} {{/if}} {{if ($value.noctxpopup || $data.noctxpopup)}} noctxpopup i-ljuser-nopopup {{/if}} {{if ($value.alias || $data.alias)}} with-alias i-ljuser-withalias {{/if}} {{if ($value.side_alias || $data.side_alias)}} with-alias-value i-ljuser-showalias {{/if}} \">{{if ($value.show_userhead || $data.show_userhead)}}<a href=\"{{html ($value.profile_url || $data.profile_url)}}\" class=\"i-ljuser-profile\" ><amp-img class=\"i-ljuser-userhead\" src=\"{{html ($value.userhead_url || $data.userhead_url)}}\" width=\"16\" height=\"16\" ></amp-img></a>{{/if}}<a href=\"{{html ($value.journal_url || $data.journal_url)}}\" class=\"i-ljuser-username\" ><b>{{html ($value.journal || $data.journal)}}</b></a></span>{{else}}<span {{if ($value.inline_css || $data.inline_css)}} style=\" white-space:nowrap; {{if ($value.striked || $data.striked)}} text-decoration:line-through; {{/if}} \" {{/if}} class=\"ljuser {{if !(($value.inline_css || $data.inline_css))}} i-ljuser {{if ($value.striked || $data.striked)}} i-ljuser-deleted {{/if}} i-ljuser-type-{{html ($value.journaltype || $data.journaltype)}} {{/if}} {{if ($value.noctxpopup || $data.noctxpopup)}} noctxpopup i-ljuser-nopopup {{/if}} {{if ($value.alias || $data.alias)}} with-alias i-ljuser-withalias {{/if}} {{if ($value.side_alias || $data.side_alias)}} with-alias-value i-ljuser-showalias {{/if}} \" {{html ($value.attrs || $data.attrs)}} data-ljuser=\"{{html ($value.username || $data.username)}}\" lj:user=\"{{html ($value.username || $data.username)}}\" >{{if ($value.show_userhead || $data.show_userhead)}}<a href=\"{{html ($value.profile_url || $data.profile_url)}}\" {{if ($value.target || $data.target)}} target=\"{{html ($value.target || $data.target)}}\" {{/if}} class=\"i-ljuser-profile\" ><img {{if ($value.inline_css || $data.inline_css)}} width=\"16\" height=\"16\" style=\"vertical-align:text-bottom;border:0;padding-right:1px;\" {{else}} class=\"i-ljuser-userhead\" {{/if}} src=\"{{html ($value.userhead_url || $data.userhead_url)}}\" /></a>{{/if}}<a href=\"{{html ($value.journal_url || $data.journal_url)}}\" class=\"i-ljuser-username\" {{if ($value.color || $data.color)}} style=\"color:{{html ($value.color || $data.color)}};\" {{/if}} {{if ($value.target || $data.target)}} target=\"{{html ($value.target || $data.target)}}\" {{/if}} {{if ($value.alias || $data.alias)}} title=\"{{html ($value.user_alias || $data.user_alias)}}\" {{/if}} >{{if ($value.inline_css || $data.inline_css)}}{{if ($value.bold || $data.bold)}}<b>{{/if}}{{html ($value.journal || $data.journal)}}{{if ($value.alias || $data.alias)}}<span class=\"useralias-value\">*</span>{{/if}}{{if ($value.bold || $data.bold)}}</b>{{/if}}{{else}}{{if ($value.bold || $data.bold)}}<b>{{/if}}{{html ($value.journal || $data.journal)}}{{if ($value.bold || $data.bold)}}</b>{{/if}}{{/if}}</a>{{if ($value.alias || $data.alias) && ($value.side_alias || $data.side_alias)}}<span class=\"alias-value i-ljuser-alias\">{{html ($value.user_alias || $data.user_alias)}}</span>{{/if}}</span>{{/if}} {{/each}} <span class=\"b-topten-journaltitle\">{{html ($value.title || $data.title)}}</span> {{/each}} {{/each}} {{else}} <span class=\"b-topten-promo-empty\"> {{if $data.what == \'users\'}} {{html LJ.mltext(\'main.top.promo.empty.users\')}} {{else}} {{html LJ.mltext(\'main.top.promo.empty.communities\')}} {{/if}} </span> {{/if}} </div> </div> {{if $data.data_selfpromo}} {{each ($value.data_selfpromo || $data.data_selfpromo)}} <div class=\"b-topten-promo-stat\">{{if ($value.what || $data.what) == \'users\'}}{{if ($value.view_type || $data.view_type) == \'cyr\'}}{{html LJ.mltext(\'main.top.promo.stat.users.cyr\', \'buyout\', ($value.buyout || $data.buyout), \'timeleft_hours\', ($value.timeleft_hours || $data.timeleft_hours), \'timeleft_minutes\', ($value.timeleft_minutes || $data.timeleft_minutes))}}{{else ($value.view_type || $data.view_type) == \'ua\'}}{{html LJ.mltext(\'main.top.promo.stat.users.ua\', \'buyout\', ($value.buyout || $data.buyout), \'timeleft_hours\', ($value.timeleft_hours || $data.timeleft_hours), \'timeleft_minutes\', ($value.timeleft_minutes || $data.timeleft_minutes))}}{{/if}}{{else}}{{if ($value.view_type || $data.view_type) == \'cyr\'}}{{html LJ.mltext(\'main.top.promo.stat.communities.cyr\', \'buyout\', ($value.buyout || $data.buyout), \'timeleft_hours\', ($value.timeleft_hours || $data.timeleft_hours), \'timeleft_minutes\', ($value.timeleft_minutes || $data.timeleft_minutes))}}{{else ($value.view_type || $data.view_type) == \'ua\'}}{{html LJ.mltext(\'main.top.promo.stat.communities.ua\', \'buyout\', ($value.buyout || $data.buyout), \'timeleft_hours\', ($value.timeleft_hours || $data.timeleft_hours), \'timeleft_minutes\', ($value.timeleft_minutes || $data.timeleft_minutes))}}{{/if}}{{/if}}</div> {{/each}} {{/if}} {{/if}} ", 'JQuery.stat');
LJ.UI.registerTemplate('templates-Widgets-entryunit', "{{if $data.homepage_version == 3}} <article class=\" entryunit js--entryunit {{if $data.selfpromo}} entryunit--promo entryunit--selfpromo {{/if}} {{if $data.commpromo}} entryunit--promo entryunit--commpromo {{/if}} {{if $data.mustread}} entryunit--mustread {{/if}} {{if $data.discoverypost}} entryunit--discovery {{/if}} {{if $data.delta}} {{if $data.delta < 0}} entryunit--state-down {{else}} entryunit--state-up {{/if}} {{/if}} {{if ($data.position == 1) || ($data.position == 2) || ($data.position == 3)}} js--state-topthree {{/if}} \" {{if $data.is_new_ratings}} ng-controller=\"ArticleCtrl as article\" {{/if}} lj-screenable=\"social:widgets:parse\"> <div class=\"entryunit__meta meta-entryunit\"> <ul class=\"meta-entryunit__items\">{{if $data.position}}<li class=\" meta-entryunit__item meta-entryunit__item--position \" title=\" {{if $data.delta}} {{html LJ.mltext(\'entryunit.updown\', \'delta_abs\', $data.delta_abs)}} {{else}} {{html LJ.mltext(\'entryunit.static.position\')}} {{/if}} \" ><span class=\"entryunit__position position-entryunit\"> {{if $data.delta}} {{if $data.delta < 0}} <span lj-svg-icon=\"flaticon--arrow-rounded-down\"></span> {{else}} <span lj-svg-icon=\"flaticon--arrow-rounded-up\"></span> {{/if}} {{/if}} <span class=\" position-entryunit__number js--position-number \">{{html $data.position}} </span></span></li>{{/if}}{{if $data.label}}<li class=\" meta-entryunit__item meta-entryunit__item--labels \" ><span class=\"b-entryunit-label\">{{html $data.label}}</span></li>{{else}}<li class=\" meta-entryunit__item meta-entryunit__item--labels \" ><ul class=\"entryunit__labels labels-entryunit\"> {{if $data.selfpromo}} <li class=\" labels-entryunit__item labels-entryunit__item--selfpromo \"><a class=\" promo-label promo-label--selfpromo \" href=\"{{html $data.siteroot}}/shop/selfpromo.bml?country={{html $data.country}}\" target=\"_blank\" >{{html LJ.mltext(\'main.promo.head\')}}</a></li> {{else $data.commpromo}} <li class=\" labels-entryunit__item labels-entryunit__item--commpromo \"><a class=\" promo-label promo-label--commpromo\" href=\"{{html $data.siteroot}}/shop/commpromo.bml?country={{html $data.country}}\" target=\"_blank\" >{{html LJ.mltext(\'main.promo.head\')}}</a></li> {{/if}} <li class=\" labels-entryunit__item labels-entryunit__item--mustread \"><span class=\" promo-label promo-label--mustread\">{{html LJ.mltext(\'main.mustread.head\')}}</span></li> <li class=\" labels-entryunit__item labels-entryunit__item--discovery \"><span class=\" promo-label promo-label--discovery\">{{html LJ.mltext(\'main.discovery.head\')}}</span></li> </ul> </li>{{/if}}{{if $data.ljuser}}<li class=\" meta-entryunit__item meta-entryunit__item--author \" ><span class=\"entryunit__author author-entryunit\">{{each ($value.ljuser || $data.ljuser)}}{{if ($value.amp || $data.amp)}}<span class=\"ljuser {{if !(($value.inline_css || $data.inline_css))}} i-ljuser {{if ($value.striked || $data.striked)}} i-ljuser-deleted {{/if}} i-ljuser-type-{{html ($value.journaltype || $data.journaltype)}} {{/if}} {{if ($value.noctxpopup || $data.noctxpopup)}} noctxpopup i-ljuser-nopopup {{/if}} {{if ($value.alias || $data.alias)}} with-alias i-ljuser-withalias {{/if}} {{if ($value.side_alias || $data.side_alias)}} with-alias-value i-ljuser-showalias {{/if}} \">{{if ($value.show_userhead || $data.show_userhead)}}<a href=\"{{html ($value.profile_url || $data.profile_url)}}\" class=\"i-ljuser-profile\" ><amp-img class=\"i-ljuser-userhead\" src=\"{{html ($value.userhead_url || $data.userhead_url)}}\" width=\"16\" height=\"16\" ></amp-img></a>{{/if}}<a href=\"{{html ($value.journal_url || $data.journal_url)}}\" class=\"i-ljuser-username\" ><b>{{html ($value.journal || $data.journal)}}</b></a></span>{{else}}<span {{if ($value.inline_css || $data.inline_css)}} style=\" white-space:nowrap; {{if ($value.striked || $data.striked)}} text-decoration:line-through; {{/if}} \" {{/if}} class=\"ljuser {{if !(($value.inline_css || $data.inline_css))}} i-ljuser {{if ($value.striked || $data.striked)}} i-ljuser-deleted {{/if}} i-ljuser-type-{{html ($value.journaltype || $data.journaltype)}} {{/if}} {{if ($value.noctxpopup || $data.noctxpopup)}} noctxpopup i-ljuser-nopopup {{/if}} {{if ($value.alias || $data.alias)}} with-alias i-ljuser-withalias {{/if}} {{if ($value.side_alias || $data.side_alias)}} with-alias-value i-ljuser-showalias {{/if}} \" {{html ($value.attrs || $data.attrs)}} data-ljuser=\"{{html ($value.username || $data.username)}}\" lj:user=\"{{html ($value.username || $data.username)}}\" >{{if ($value.show_userhead || $data.show_userhead)}}<a href=\"{{html ($value.profile_url || $data.profile_url)}}\" {{if ($value.target || $data.target)}} target=\"{{html ($value.target || $data.target)}}\" {{/if}} class=\"i-ljuser-profile\" ><img {{if ($value.inline_css || $data.inline_css)}} width=\"16\" height=\"16\" style=\"vertical-align:text-bottom;border:0;padding-right:1px;\" {{else}} class=\"i-ljuser-userhead\" {{/if}} src=\"{{html ($value.userhead_url || $data.userhead_url)}}\" /></a>{{/if}}<a href=\"{{html ($value.journal_url || $data.journal_url)}}\" class=\"i-ljuser-username\" {{if ($value.color || $data.color)}} style=\"color:{{html ($value.color || $data.color)}};\" {{/if}} {{if ($value.target || $data.target)}} target=\"{{html ($value.target || $data.target)}}\" {{/if}} {{if ($value.alias || $data.alias)}} title=\"{{html ($value.user_alias || $data.user_alias)}}\" {{/if}} >{{if ($value.inline_css || $data.inline_css)}}{{if ($value.bold || $data.bold)}}<b>{{/if}}{{html ($value.journal || $data.journal)}}{{if ($value.alias || $data.alias)}}<span class=\"useralias-value\">*</span>{{/if}}{{if ($value.bold || $data.bold)}}</b>{{/if}}{{else}}{{if ($value.bold || $data.bold)}}<b>{{/if}}{{html ($value.journal || $data.journal)}}{{if ($value.bold || $data.bold)}}</b>{{/if}}{{/if}}</a>{{if ($value.alias || $data.alias) && ($value.side_alias || $data.side_alias)}}<span class=\"alias-value i-ljuser-alias\">{{html ($value.user_alias || $data.user_alias)}}</span>{{/if}}</span>{{/if}} {{/each}}</span></li>{{/if}}{{if $data.time}}<li class=\" meta-entryunit__item meta-entryunit__item--date \" ><time datetime=\"{{html $data.pub_date}}\" pubdate class=\"entryunit__date\" >{{html $data.time}}</time></li>{{/if}} </ul> </div> <header class=\"entryunit__head\"> <h3 class=\" entryunit__title js--entryunit-title \"><a class=\"entryunit__link\" href=\"{{html $data.post_url}}\" target=\"_blank\" title=\"{{html $data.full_subject}}\" >{{html $data.subject}}</a></h3> </header> <div class=\"entryunit__body\"> {{if $data.media}} <div class=\"entryunit__video video-entryunit\"> {{html $data.media}} </div> {{/if}} {{if $data.image_size}} {{if ($data.image_size == 2)}} <figure class=\"entryunit__photo photo-entryunit\"> <a href=\"{{html $data.post_url}}\" target=\"_blank\" ><img src=\"{{html $data.image_url}}\" alt=\"\" class=\"photo-entryunit__pic\"></a> </figure> {{/if}} {{if ($data.image_size == 3)}} <figure class=\"entryunit__panorama panorama-entryunit\"> <a href=\"{{html $data.post_url}}\" target=\"_blank\" style=\"background-image: url({{html $data.image_url}});\" class=\"panorama-entryunit__pic\" ><img src=\"{{html $data.image_url}}\" alt=\"\" class=\"panorama-entryunit__pic--print\"></a> </figure> {{/if}} {{/if}} <div class=\"entryunit__text\">{{html $data.body}}</div> <div class=\"entryunit__stat entryunit-stat\"> <ul class=\"stat-entryunit__list entryunit-stat-list\"> {{if $data.comments_allowed}} <li class=\" entryunit-stat-list__item entryunit-stat-list-item entryunit-stat-list-item--likes \" lj-likus lj-likus-medius=\"true\" lj-likus-no-actions=\"{{html $data.post_url}}\" lj-likus-journal=\"{{html $data.journal_id}}\" lj-likus-item=\"{{html $data.ditem_id}}\" lj-likus-token=\"{{html $data.likes_signature}}\" > </li> {{/if}} <li class=\" entryunit-stat-list__item entryunit-stat-list-item entryunit-stat-list-item--comments \"> <a class=\" entryunit-stat-list-item__link entryunit-stat-list-item-link \" href=\" {{if $data.reply_count == \'0\'}} {{html $data.post_url}}?mode=reply#add_comment {{else}} {{html $data.post_url}}?view=comments#comments {{/if}} \" target=\"_blank\" > <span class=\" entryunit-stat-list-item__icon entryunit-stat-list-item-icon \"> <span lj-svg-icon=\"flaticon--medius-comments\"></span> </span> <span class=\" entryunit-stat-list-item__value entryunit-stat-list-item-value \"> {{if $data.reply_count == \'0\'}} {{html LJ.mltext(\'entryunit.comments.none\')}} {{else}} {{html LJ.mltext(\'entryunit.comments.numbersonly\', \'reply_count\', $data.reply_count)}} {{/if}} </span> </a> </li> </ul> </div> </div> <footer class=\"entryunit__footer\"> <div class=\"entryunit__toolbar entryunit-toolbar\"> {{if $data.comments_allowed}} <div class=\" entryunit-toolbar__item entryunit-toolbar__item--comments \" > <a {{if $data.reply_count == \'0\'}} href=\"{{html $data.post_url}}?mode=reply#add_comment\" {{else}} href=\"{{html $data.post_url}}?view=comments#comments\" {{/if}} target=\"_blank\" class=\"entryunit-toolbar__link\" > <svg width=\"17\" height=\"16\" class=\"svgicon flaticon flaticon--comments-bold\"> <use xlink:href=\"#flaticon--comments-bold\"/> </svg> <span class=\"entryunit-toolbar__link-text\"> {{if $data.reply_count == \'0\'}} {{html LJ.mltext(\'entryunit.comments.none\')}} {{else}} {{html LJ.mltext(\'entryunit.comments.numbersonly\', \'reply_count\', $data.reply_count)}} {{/if}} </span> </a> </div> {{/if}} {{if $data.comments_allowed}} <div class=\" entryunit-toolbar__item entryunit-toolbar__item--likes \" lj-likus lj-likus-no-actions=\"{{html $data.post_url}}\" lj-likus-journal=\"{{html $data.journal_id}}\" lj-likus-item=\"{{html $data.ditem_id}}\" lj-likus-token=\"{{html $data.likes_signature}}\" ></div> {{/if}} </div> {{if !($data.hide_actions)}} <div class=\"entryunit__controls controls-entryunit\"> <ul class=\"controls-entryunit__items\"> <li class=\" controls-entryunit__item controls-entryunit__item--read \"> <a href=\"javascript:void(0)\" class=\"controls-entryunit__link\" ><span class=\"controls-entryunit__icon\"><span lj-svg-icon=\"flaticon--check\"></span></span><span class=\" controls-entryunit__tooltip tooltip-entryunit tooltip-entryunit--read-read \">{{html LJ.mltext(\'entryunit.read\')}}</span><span class=\" controls-entryunit__tooltip tooltip-entryunit tooltip-entryunit--read-unread \">{{html LJ.mltext(\'entryunit.unread\')}}</span></a> </li> <li class=\" controls-entryunit__item controls-entryunit__item--hide \"> <a href=\"javascript:void(0)\" class=\"controls-entryunit__link\" ><span class=\"controls-entryunit__icon\"><span lj-svg-icon=\"flaticon--hide\"></span></span><span class=\" controls-entryunit__tooltip tooltip-entryunit tooltip-entryunit--hide-hide \">{{if $data.is_community}}{{html LJ.mltext(\'entryunit.hide.community\')}}{{else}}{{html LJ.mltext(\'entryunit.hide\')}}{{/if}}</span><span class=\" controls-entryunit__tooltip tooltip-entryunit tooltip-entryunit--hide-show \">{{if $data.is_community}}{{html LJ.mltext(\'entryunit.show.community\')}}{{else}}{{html LJ.mltext(\'entryunit.show\')}}{{/if}}</span></a> </li> </ul> </div> {{/if}} </footer> {{if !($data.mustread)}} <div class=\" entryunit__mark-control entryunit-mark-control \" ng-click=\"article.toggleControl($event)\" > <span lj-svg-icon=\"flaticon--arrow-dropdown\"></span> </div> <div class=\" b-popup entryunit-mark-popup \" ng-class=\"{\'entryunit-mark-popup--visible\': article.controlsVisible}\" > <div class=\"b-popup-outer\"> <div class=\"b-popup-inner\"> <i class=\"i-popup-arr i-popup-arrtr\"> <i class=\"i-popup-arr-brdr-outer\"> <i class=\"i-popup-arr-brdr-inner\"> <i class=\"i-popup-arr-bg\"></i> </i> </i> </i> <ul class=\" entryunit__mark entryunit-mark \" > <li class=\" controls-entryunit__item--read entryunit-mark__item entryunit-mark-item entryunit-mark-item--read \"> <span lj-svg-icon=\"flaticon--check\"></span> <span class=\" entryunit-mark-item__title entryunit-mark-item-title entryunit-mark-item-title--on \"> {{html LJ.mltext(\'entryunit.read\')}} </span> <span class=\" entryunit-mark-item__title entryunit-mark-item-title entryunit-mark-item-title--off \"> {{html LJ.mltext(\'entryunit.unread\')}} </span> </li> <li class=\" controls-entryunit__item--hide entryunit-mark__item entryunit-mark-item entryunit-mark-item--hide \"> <span lj-svg-icon=\"flaticon--hide\"></span> <span class=\" entryunit-mark-item__title entryunit-mark-item-title entryunit-mark-item-title--on \"> {{if $data.is_community}} {{html LJ.mltext(\'entryunit.hide.community\')}} {{else}} {{html LJ.mltext(\'entryunit.hide\')}} {{/if}} </span> <span class=\" entryunit-mark-item__title entryunit-mark-item-title entryunit-mark-item-title--off \"> {{if $data.is_community}} {{html LJ.mltext(\'entryunit.show.community\')}} {{else}} {{html LJ.mltext(\'entryunit.show\')}} {{/if}} </span> </li> </ul> </div> </div> </div> {{/if}} </article> {{else}} <article class=\" b-entryunit js--entryunit {{if $data.delta != 0}} {{if $data.delta < 0}} b-entryunit-state-down {{else}} b-entryunit-state-up {{/if}} {{/if}} {{if ($data.position == 1) || ($data.position == 2) || ($data.position == 3)}} js--state-topthree {{/if}} {{if $data.mustread}} entryunit--mustread {{/if}} {{if $data.discoverypost}} entryunit--discovery {{/if}} \"> {{if !($data.recommends)}} <header class=\"b-entryunit-head\"> <span class=\" b-entryunit-icon b-entryunit-icon-promo b-entryunit-promoicon\" title=\"{{html LJ.mltext(\'entryunit.expromo\')}}\" ></span> {{if $data.position}} <span class=\"b-entryunit-position\"> <span class=\"b-entryunit-position-inner\"> <span class=\" b-entryunit-icon b-entryunit-updown \" title=\"{{html LJ.mltext(\'entryunit.updown\', \'delta_abs\', $data.delta_abs)}}\" ></span><span class=\" b-entryunit-position-number js--position-number \">{{html $data.position}}.</span></span> </span> {{/if}} <h3 class=\" b-entryunit-title js--entryunit-title \"> <a href=\"{{html $data.post_url}}\" target=\"_blank\" > {{html $data.subject}} </a> </h3> {{if $data.ljuser}} <span class=\"b-entryunit-author\"> &mdash; {{each ($value.ljuser || $data.ljuser)}}{{if ($value.amp || $data.amp)}}<span class=\"ljuser {{if !(($value.inline_css || $data.inline_css))}} i-ljuser {{if ($value.striked || $data.striked)}} i-ljuser-deleted {{/if}} i-ljuser-type-{{html ($value.journaltype || $data.journaltype)}} {{/if}} {{if ($value.noctxpopup || $data.noctxpopup)}} noctxpopup i-ljuser-nopopup {{/if}} {{if ($value.alias || $data.alias)}} with-alias i-ljuser-withalias {{/if}} {{if ($value.side_alias || $data.side_alias)}} with-alias-value i-ljuser-showalias {{/if}} \">{{if ($value.show_userhead || $data.show_userhead)}}<a href=\"{{html ($value.profile_url || $data.profile_url)}}\" class=\"i-ljuser-profile\" ><amp-img class=\"i-ljuser-userhead\" src=\"{{html ($value.userhead_url || $data.userhead_url)}}\" width=\"16\" height=\"16\" ></amp-img></a>{{/if}}<a href=\"{{html ($value.journal_url || $data.journal_url)}}\" class=\"i-ljuser-username\" ><b>{{html ($value.journal || $data.journal)}}</b></a></span>{{else}}<span {{if ($value.inline_css || $data.inline_css)}} style=\" white-space:nowrap; {{if ($value.striked || $data.striked)}} text-decoration:line-through; {{/if}} \" {{/if}} class=\"ljuser {{if !(($value.inline_css || $data.inline_css))}} i-ljuser {{if ($value.striked || $data.striked)}} i-ljuser-deleted {{/if}} i-ljuser-type-{{html ($value.journaltype || $data.journaltype)}} {{/if}} {{if ($value.noctxpopup || $data.noctxpopup)}} noctxpopup i-ljuser-nopopup {{/if}} {{if ($value.alias || $data.alias)}} with-alias i-ljuser-withalias {{/if}} {{if ($value.side_alias || $data.side_alias)}} with-alias-value i-ljuser-showalias {{/if}} \" {{html ($value.attrs || $data.attrs)}} data-ljuser=\"{{html ($value.username || $data.username)}}\" lj:user=\"{{html ($value.username || $data.username)}}\" >{{if ($value.show_userhead || $data.show_userhead)}}<a href=\"{{html ($value.profile_url || $data.profile_url)}}\" {{if ($value.target || $data.target)}} target=\"{{html ($value.target || $data.target)}}\" {{/if}} class=\"i-ljuser-profile\" ><img {{if ($value.inline_css || $data.inline_css)}} width=\"16\" height=\"16\" style=\"vertical-align:text-bottom;border:0;padding-right:1px;\" {{else}} class=\"i-ljuser-userhead\" {{/if}} src=\"{{html ($value.userhead_url || $data.userhead_url)}}\" /></a>{{/if}}<a href=\"{{html ($value.journal_url || $data.journal_url)}}\" class=\"i-ljuser-username\" {{if ($value.color || $data.color)}} style=\"color:{{html ($value.color || $data.color)}};\" {{/if}} {{if ($value.target || $data.target)}} target=\"{{html ($value.target || $data.target)}}\" {{/if}} {{if ($value.alias || $data.alias)}} title=\"{{html ($value.user_alias || $data.user_alias)}}\" {{/if}} >{{if ($value.inline_css || $data.inline_css)}}{{if ($value.bold || $data.bold)}}<b>{{/if}}{{html ($value.journal || $data.journal)}}{{if ($value.alias || $data.alias)}}<span class=\"useralias-value\">*</span>{{/if}}{{if ($value.bold || $data.bold)}}</b>{{/if}}{{else}}{{if ($value.bold || $data.bold)}}<b>{{/if}}{{html ($value.journal || $data.journal)}}{{if ($value.bold || $data.bold)}}</b>{{/if}}{{/if}}</a>{{if ($value.alias || $data.alias) && ($value.side_alias || $data.side_alias)}}<span class=\"alias-value i-ljuser-alias\">{{html ($value.user_alias || $data.user_alias)}}</span>{{/if}}</span>{{/if}} {{/each}} </span> {{/if}} {{if $data.time}} <time datetime=\"{{html $data.pub_date}}\" pubdate class=\"b-entryunit-date\" >{{html $data.time}}</time> {{/if}} {{if $data.category}} <a href=\"{{html $data.category_url}}\" class=\"b-entryunit-topic\" >{{html $data.category}}</a> {{/if}} </header> {{/if}} <div class=\"b-entryunit-body\"> {{if $data.media}} <div class=\"b-entryunit-video\"> {{html $data.media}} </div> {{/if}} {{if $data.image_size}} {{if ($data.image_size == 1)}} <figure class=\"b-entryunit-thumbnail\"> <a href=\"{{html $data.post_url}}\" target=\"_blank\" ><img src=\"{{html $data.image_url}}\" alt=\"\" class=\"b-entryunit-thumbnail-pic\"></a> </figure> {{/if}} {{if ($data.image_size == 2)}} <figure class=\"b-entryunit-photo\"> <a href=\"{{html $data.post_url}}\" target=\"_blank\" ><img src=\"{{html $data.image_url}}\" alt=\"\" class=\"b-entryunit-photo-pic\"></a> </figure> {{/if}} {{if ($data.image_size == 3)}} <figure class=\"b-entryunit-panorama\"> <a href=\"{{html $data.post_url}}\" target=\"_blank\" style=\"background-image: url({{html $data.image_url}});\" class=\"b-entryunit-panorama-pic\" ></a> </figure> {{/if}} {{/if}} <div class=\"b-entryunit-article\">{{html $data.body}}</div> </div> <div class=\"b-entryunit-meta\"> <ul class=\"b-entryunit-menu\"> {{if !($data.recommends)}} {{if $data.comments_allowed}} <li class=\"b-entryunit-menu-item b-entryunit-menu-comments\"> <a {{if $data.reply_count == \'0\'}} href=\"{{html $data.post_url}}?mode=reply#add_comment\" {{else}} href=\"{{html $data.post_url}}?view=comments#comments\" {{/if}} target=\"_blank\" > <span class=\"b-entryunit-icon b-entryunit-icon-comments\"></span> {{if $data.reply_count == \'0\'}} {{html LJ.mltext(\'entryunit.comments.none\')}} {{else}} {{html LJ.mltext(\'entryunit.comments\', \'reply_count\', $data.reply_count)}} {{/if}} </a> </li> {{/if}} {{/if}} {{if !($data.hide_actions)}} <li class=\" b-entryunit-menu-item b-entryunit-menu-hide \"> <a href=\"javascript:void(0)\"><span class=\"b-entryunit-menu-hide-hide\">{{if $data.is_community}}{{html LJ.mltext(\'entryunit.hide.community\')}}{{else}}{{html LJ.mltext(\'entryunit.hide\')}}{{/if}}</span><span class=\"b-entryunit-menu-hide-show\">{{if $data.is_community}}{{html LJ.mltext(\'entryunit.show.community\')}}{{else}}{{html LJ.mltext(\'entryunit.show\')}}{{/if}}</span></a> </li> <li class=\" b-entryunit-menu-item b-entryunit-menu-read \"> <a href=\"javascript:void(0)\"><span class=\"b-entryunit-menu-read-read\">{{html LJ.mltext(\'entryunit.read\')}}</span><span class=\"b-entryunit-menu-read-unread\">{{html LJ.mltext(\'entryunit.unread\')}}</span></a> </li> {{/if}} </ul> </div> </article> {{/if}} ", 'JQuery.stat');
//= require_ml adfox.noads
LJ.Page={},LJ.Page.Ratings={},LJ.Page.Ratings.friendlist=LJ.get("rating_friendlist")||[],LJ.Page.Ratings.blacklist=LJ.get("rating_blacklist")||[],LJ.Page.Ratings.readlist=LJ.get("rating_readlist")||[],function(e,t,i){"use strict";function n(e,t,i){var n=new RegExp("^"+t+"-");e.removeClass(function(e,t){var i=t.trim().split(/\s+/),o="";return i.forEach(function(e){n.test(e)&&(o+=e)}),o}).addClass(t+"-"+i)}function o(){var e=LiveJournal.parseGetArgs().rating;return e?e:LJ.get("remote")?LJ.get("rating_locale"):LJ.Cookie.get("homepage_rating")||LJ.get("rating_locale")}var a="promo-complaint-form",s=angular.element("body");s.append("<div ".concat(a,"></div>"));var r=s.find("[".concat(a,"]"));angular.bootstrap(r,["LJ.Widget.Promo","LJ.Directives","LJ.Likus"]);var l=r.injector();LJ.Api.authInitPromise.then(function(){angular.bootstrap("[topstrip]",["TopStrip"])}),LJ.Event.on("blacklist:add",function(e){LJ.get("remoteUser")&&LJ.Api.call("ratings.blacklist_add",{user:e},function(e){e.error&&(LJ.Messages.add({type:"warning",body:e.error.message}),console.warn("Error occured during blacklisting user: "+e.error.message))})});var g=i.Model.extend({defaults:{page:0,html:"",loading:!1},sync:function(t,i,n){var o=this,a=d.get("categoryName"),s=0===this.get("page");s&&o.trigger("loading",!0),i.set("loading",!0),LJ.Api.call(this.get("rpc"),e.extend({page:this.get("page")},this.get("params")||{}),function(e){d.get("categoryName")===a&&(o.set("html",o.get("html")+e.body),o.set("hasMore",e.has_more),o.trigger("loading",!1),i.set("loading",!1),n.success())})},initialize:function(){var e=this;this.get("parent").on("change:categoryName",function(t,i){i===this.get("categoryName")&&this.fetch({reset:!0,success:function(){e.trigger("refresh")}})},this),this.on("change:page",function(){this.fetch({preloader:!1,success:function(){e.trigger("refresh")}})},this)}}),c=i.Model.extend({defaults:{location:o(),showFriends:Boolean(LJ.get("show_from_friends_v2")),returnEntries:Boolean(LJ.get("show_hidden_items")),uniqueAuthors:Boolean(LJ.get("show_unique_items")),page:0,output:new i.Collection,outputSize:50,perPage:50,maxSize:2e3,hasMore:!1,scroll:!LJ.Support.isMobile()},rpc_prop:{showFriends:"show_from_friends_v2",returnEntries:"show_hidden_items",uniqueAuthors:"show_unique_items"},validate:function(e){e.location&&"noncyr"===e.location&&0!==this.get("category")&&this.set("category",0)},syncLocalstorage:function(){LJ.Storage.setItem("readEntries",this.readEntries),LJ.Storage.setItem("hiddenEntries",this.hiddenEntries)},loadFromLocalStorage:function(){this.readEntries=LJ.Storage.getItem("readEntries")||{},this.hiddenEntries=LJ.Storage.getItem("hiddenEntries")||{},this.set("uniqueAuthors",Boolean(LJ.Storage.getItem("uniqueAuthors"))),this.set("returnEntries",Boolean(LJ.Storage.getItem("returnEntries")))},isHome:function(){return void 0===this.get("categoryName")},isSpecial:function(){var e,t=this,i=LJ.get("homepage.categories")||[];return e=i.find(function(e){return e.keyword===t.get("categoryName")}),e?!!e.is_special:!1},hasMoreEntries:function(){return this.get("output").models.length<window.list.filtered().slice(0,this.get("outputSize")+50).length||this.get("hasMore")},initialize:function(){var e=this;LJ.get("remote")?(LJ.Page.Ratings.friendlist.forEach(function(t){e.friends[t]=1}),LJ.Page.Ratings.blacklist.forEach(function(t){e.hiddenEntries[t]=1}),LJ.Page.Ratings.readlist.forEach(function(t){e.readEntries[t[0]+"-"+t[1]]=1})):this.loadFromLocalStorage(),this.get("output").comparator=function(e){return e.order()},this.on("change:showFriends change:returnEntries change:uniqueAuthors",function(e,t){for(var i in e.changedAttributes())LJ.get("remote")?LJ.Api.call("homepage.set_homepage_flag",{flag:this.rpc_prop[i],value:t?1:0}):LJ.Storage.setItem(i,d.get(i))},this),this.editors=new g({categoryName:"editors",rpc:"homepage.editors_page",parent:this}),this.editorsUA=new g({categoryName:"editors_ua",rpc:"homepage.editors_page",params:{ua:1},parent:this}),this.memes=new g({categoryName:"memes",rpc:"homepage.memes_page",parent:this}),this.editors.on("loading",function(e){this.set("ratingLoading",e)},this),this.editorsUA.on("loading",function(e){this.set("ratingLoading",e)},this),this.memes.on("loading",function(e){this.set("ratingLoading",e)},this),this.on("change:location",function(e,t){LJ.Cookie.set("homepage_rating",t,{domain:window.location.host.replace("www","")}),this.set("outputSize",this.get("perPage")),this.set("page",0),this.mustRead.set({location:t}),this.selfPromo.set({location:t}),this.commPromo.set({location:t})},this),this.on("change:categoryName change:location",function(e){var t=e.get("location"),i=e.get("categoryName"),n=LJ.get("rating_subscriptions")?LJ.get("rating_subscriptions")[t]:"";n&&(n=(n[i]||n.home)[0],this.set("subscriptions",n),this.set("categoryTitle",n.title))},this),this.trackGoogleAnalytics()},friends:{},readEntries:{},hiddenEntries:{},returnedEntries:{},mustRead:new window.MustRead({}),selfPromo:new window.Promo({type:"self"}),commPromo:new window.Promo({type:"comm"}),trackGoogleAnalytics:function(){var e={uniqueAuthors:1,showFriends:1,returnEntries:1,location:1};this.on("change",function(){var t=this.changedAttributes();for(var i in t)if(t.hasOwnProperty(i)){if(!e[i]||!t.hasOwnProperty(i))return;LJ.Track.event("Homepage","Settings",i+" "+String(this.get(i)))}},this)}}),d=new c;window.homepage=d;var h=i.View.extend({events:e.extend({"click .b-entryunits-more-ratings":"moreEntries","click .b-entryunit-toggle-link":"toggleVideoClick","click .b-mainpage-mystat-toggle":"toggleStatistics","click .b-mainpage-scrolltop-inner":"scrollToTop","click .b-mainpage-settingsswitch-inner":"toggleSettings","click .b-mainpage-menuswitch-inner":"toggleMenu"},LJ.Flags.isEnabled("homepage_v3")?{"click .l-flatslide-scrolltop":"scrollToTop"}:{}),scrollToTop:function(){var t=this.$(".l-flatslide-scrolltop").attr("data-target"),i=t&&e(t).length?e(t).offset().top:this.$el.offset().top,n=this.$(".b-mainpage-updates");t||(n.length>0?i+=n.height():i-=this.$(".b-mainpage-banner").is(":hidden")?0:22),e("html,body").animate({scrollTop:i})},moreEntries:function(e){e.preventDefault(),window.listView.more()},toggleVideo:function(t){var i=this.$(".b-entryunit-fridayvideo");i.find(".b-entryunit-toggle").toggleClass("b-entryunit-toggle-expanded",t).toggleClass("b-entryunit-toggle-collapsed",!t);var n=i.find(".b-entryunit-toggle").hasClass("b-entryunit-toggle-expanded");if(!n){var o=e(window).scrollTop(),a=i.offset().top;o>a&&e("html,body").animate({scrollTop:a})}Site.remoteUser&&LJ.Api.call("homepage.set_homepage_flag",{flag:"show_video_post",value:n?1:0})},toggleVideoClick:function(e){this.toggleVideo(),e.preventDefault()},initialize:function(){var i=this;this.model.get("scroll")&&this.$(".b-entryunits-more-button").hide(),this.model.on("change:categoryName",function(){this.$el.toggleClass("b-mainpage-state-home",this.model.isHome()).toggleClass("b-mainpage-state-category",!this.model.isHome()&&!this.model.isSpecial()).toggleClass("b-mainpage-state-special",this.model.isSpecial()),n(this.$el,"b-mainpage-type",this.model.get("categoryName"))},this),this.model.on("change:categoryTitle",function(e,t){var i=this.model.isHome()?"":t;document.title=i?i+" - "+LJ.get("homepage_title"):LJ.get("homepage_title")},this),this.model.on("change:outputSize",function(){this.$el.toggleClass("b-mainpage-scrollmore",this.model.get("outputSize")>25)},this),this.model.on("change:ratingLoading",function(e,t){this.$el.toggleClass("b-mainpage-state-rating-loading",t)},this),this.model.on("change:ratingLoadingMore",function(e,t){this.$el.toggleClass("b-mainpage-state-rating-loading-more",t)},this),this.model.get("output").on("check:done",function(){this.$el.toggleClass("b-mainpage-state-rating-less",!d.hasMoreEntries()),this.$el.toggleClass("b-mainpage-state-empty",0===d.get("output").models.length)},this),this.model.on("change:location",function(e,t){this.$el.removeClass("b-mainpage-state-view-"+e.previous("location")),this.$el.addClass("b-mainpage-state-view-"+t)},this),e(window).on("scroll",LJ.Function.throttle(function(){if(i.model.get("scroll")&&!d.get("ratingLoading")&&!d.get("ratingLoadingMore")){var t=e(document).scrollTop(),n=e(".b-entryunits-more",i.el).is(":hidden")?e(i.el).height():e(".b-entryunits-more",i.el).offset().top;if(t+e(window).height()+200>n){if(d.isSpecial())return;(d.get("outputSize")<d.get("maxSize")||-1===d.get("category"))&&(d.set("outputSize",d.get("outputSize")+25),d.get("output").trigger("check"))}}},200)),this.model.on("change:scroll",function(t,i){e("body").toggleClass("p-nofooter",i)}),d.on("change:subscriptions",function(t,i){this.$(".b-mainpage-settings-follow-head").text(i.name),this.$(".b-mainpage-settings-follow-item").each(function(){var t=e(this).data("site"),n=Boolean(i["is_"+t+"_disabled"])||!i[t+"_link"]||!i[t+"_name"];e(this).toggleClass("b-mainpage-settings-follow-item-disabled",n).find("a").attr(t?{href:i[t+"_link"],title:i[t+"_sub_name"]}:null)}),this.$(".b-mainpage-settings-follow-item-livejournal").toggleClass("b-mainpage-settings-follow-item-unfriend",-1!==LJ.Page.Ratings.friendlist.indexOf(i.livejournal_id)).find("a").attr(Site.remoteUser?{href:"/friends/add.bml?user="+i.livejournal_name}:{})},this),this.model.on("change:categoryTitle",function(e,t){this.$(".b-mainpage-intro-head").text(t)},this);var o=this.$(".l-mainpage-body"),a=this.$(".l-mainpage-aside");this.model.on("updateHeight",t.debounce(function(){this.startOffset=o.offset().top,this.absoluteBodyHeight=this.startOffset+o.height(),a.length>0&&(this.absoluteSidebarHeight=a.offset().top+a.height()),e(window).trigger("scroll")},100,!0),this)},toggleStatistics:function(){var e=this.$(".b-mainpage-mystat");e.toggleClass("b-mainpage-mystat-expanded b-mainpage-mystat-collapsed"),e.hasClass("b-mainpage-mystat-expanded")&&LJ.Track.event("Homepage","Statistics","Expand")},toggleMenu:function(){this.$el.toggleClass("b-mainpage-state-menu")},toggleSettings:function(){this.$el.toggleClass("b-mainpage-state-settings")},toggleUpButton:function(e){this.$el.toggleClass("b-mainpage-state-rating-scroll",e)}}),u=i.Model.extend({order:function(){return Number(this.id.split("-").pop())},user:function(){return this.attributes.ljuser[0].username},fromFriend:function(){return d.friends[this.get("journal_id")]},rpc:{read:"ratings.readlist_add",unread:"ratings.readlist_remove"},read:function(e){var t=this.get("journal_id")+"-"+this.get("post_id");return"undefined"==typeof e?Boolean(d.readEntries[t]):(d.readEntries[t]=Boolean(e),d.syncLocalstorage(),LJ.get("remote")&&LJ.Api.call(e?this.rpc.read:this.rpc.unread,{entries:[[Number(this.get("journal_id")),Number(this.get("post_id"))]]},function(e){e.error&&console.warn("Error occured during changing read property: "+e.error.message)}),void 0)},hide:function(){d.hiddenEntries[this.get("journal_id")]=1,d.syncLocalstorage(),this.trigger("hidden")},isHidden:function(){return Boolean(d.hiddenEntries[this.get("journal_id")])},bringBack:function(){delete d.hiddenEntries[this.get("journal_id")],d.syncLocalstorage(),LJ.get("remote")&&LJ.Api.call("ratings.blacklist_remove",{user:this.user()},function(e){e.error&&console.warn("Error occured during de-blacklisting user: "+e.error.message)})},returned:function(){this.trigger("hidden")},isPromo:function(){return LJ.get("commpromo")&&LJ.get("selfpromo")?this.attributes.post_id===LJ.get("selfpromo.post_id")&&this.attributes.journal_id===LJ.get("selfpromo.journal_id")||this.attributes.post_id===LJ.get("commpromo.post_id")&&this.attributes.journal_id===LJ.get("commpromo.journal_id"):!1}}),m=i.View.extend({delay:200,render:function(){return this.$el=LJ.UI.template("templates-Widgets-entryunit",LJ.Flags.isEnabled("homepage_v3")?e.extend({},this.model.attributes,{homepage_version:3}):this.model.attributes),this.el=this.$el.get(0),this.$el.data("cid",this.model.id),this.model.trigger("hidden"),this},initialize:function(){this.model.on("remove",this.hide.bind(this)),this.model.on("add",this.show.bind(this)),this.model.on("hidden",function(){this.$el.toggleClass("js--state-restored",d.get("returnEntries")&&(this.model.isHidden()||this.model.read())).toggleClass("js--state-restored-author",d.get("returnEntries")&&this.model.isHidden()).toggleClass("js--state-restored-entry",d.get("returnEntries")&&this.model.read())},this)},show:function(){this.$el.fadeTo("fast",1).show(this.delay,function(){d.trigger("updateHeight")}),this.model.trigger("hidden")},hide:function(){var t=this;e(t.el).fadeTo("fast",0,function(){e(this).slideUp("fast",function(){d.trigger("updateHeight")})})}}),p=i.Collection.extend({model:u,initialize:function(){var e=this;d.on("change:location",function(t,i){LJ.Api.call("homepage.set_location",{locale:i}),"/"===window.location.pathname&&e.fetch({reset:!0})}),d.on("change:returnEntries",function(){if(d.get("returnEntries")){var i=e.filter(function(e){return e.isHidden()});t.invoke(i,"returned",1)}else t.invoke(e.models,"returned",0);e.trigger("entriesReturned")})},filtered:function(){var e=this.uniqueItems(),t=this.filter(function(t){return!((d.get("showFriends")?0:t.fromFriend())||(d.get("returnEntries")?0:t.isHidden())||(d.get("uniqueAuthors")?0:e[t.user()]!==t.id)||(d.get("returnEntries")?0:t.read())||t.isPromo())});return t},postsByAuthor:function(e){return this.filter(function(t){return t.user()===e.user()})},uniqueItems:function(){var e={};return this.forEach(function(t){var i=t.user();e[i]||(e[i]=t.id)}),e},switchCategory:function(e,t){d.set("outputSize",50),d.set("page",0),d.set({category:e},{validate:!0}),d.set("categoryName",t),this.fetch({reset:!0})},fetchRating:function(e,t){d.set("hasMore",!0),LJ.Track.timingOnce("Homepage","Rating"+(d.get("categoryName")?" "+d.get("categoryName"):""),Date.now()-t)},fetchLatest:function(e,t){"no"!==e.status&&e.params&&e.params.homepage_latest&&(e.rating=e.params.homepage_latest.slice(0,e.params.count_of_latest),t||d.set("hasMore",0!==e.params.first_timepost),d.set("firstTimepost",Number(e.params.first_timepost)),(0===d.get("page")||t)&&d.set("lastTimepost",Number(e.params.last_timepost)))},sync:function(e,t,i){var n,o=this,a=d.get("category"),s=d.get("categoryName"),r=0===d.get("page")?"ratingLoading":"ratingLoadingMore",l=Date.now();d.set(r,!0),"noncyr"===d.get("location")&&(a=0);var g={ratings:{name:"homepage.get_rating",params:{country:d.get("location"),category_id:a,page:d.get("page"),pagesize:d.get("perPage")},handler:function(e){o.fetchRating(e,l)}},choice:{name:"medius.get_homepage_items",params:{page:d.get("page"),pagesize:d.get("perPage")},handler:function(e){e.rating=e.items,delete e.items,o.fetchRating(l)}},latest:{name:"latest.get_entries",params:{first_timepost:0===d.get("page")?120*Math.floor(Site.server_time/120):d.get("firstTimepost")},handler:function(e){o.fetchLatest(e)}},latest_new:{name:"latest.get_entries",params:{last_timepost:d.get("lastTimepost")},handler:function(e){o.fetchLatest(e,i.addToTop)}}};return n=g.ratings,-1===a&&(n=g.latest),-2!==a&&"choice"!==s||(n=g.choice),i.addToTop&&(d.set("page",d.get("page")+1),n=g.latest_new),LJ.Api.call(n.name,n.params,function(e){d.get("categoryName")===s&&("homepage.get_rating"===n.name&&angular.isArray(e.rating)&&e.rating.forEach(function(t){t.likes_signature=e.likes_signature||"homepage"}),n.handler(e),i.success(e,i.addToTop),d.set(r,!1))})},_offset:0,parse:function(e){e&&e.rating||console.error("Data error"),e=e.rating,e||(e=[]);for(var t=0;t<e.length;t++)e[t].id=d.get("category")+"-"+d.get("location")+"-"+(1e4*d.get("page")+t);return e}}),f=i.View.extend({events:LJ.Flags.isEnabled("homepage_v3")?{"click .controls-entryunit__item--read":"toggleRead","click .controls-entryunit__item--hide":"toggleAuthor"}:{"click .b-entryunit-menu-read-read":"toggleRead","click .b-entryunit-menu-read-unread":"toggleRead","click .b-entryunit-menu-hide-hide":"toggleAuthor","click .b-entryunit-menu-hide-show":"toggleAuthor"},initialize:function(){function t(e,t){a?a.invoke(["$compile",function(t){t(e)(e.scope())}]):angular.bootstrap(e,t)}var i=this,n=[],o=!1,a=angular.element(".b-mainpage").injector(),s=d.get("output");LJ.Event.on("blacklist:add",function(e){var t=i.collection;t.each(function(t){t.user()===e&&t.hide()}),s.trigger("check"),t.trigger("hidden")}),this.collection.on("reset",function(){-1!==d.get("category")&&(i.viewOrder={},n=[],o=!1,s.trigger("check",!0))}),s.on("check",function(e){if(-1!==d.get("category")&&!d.get("ratingLoadingMore")){var t=i.collection.filtered().slice(0,d.get("outputSize"));if(d.get("hasMore")&&i.collection.length&&d.get("outputSize")>i.collection.length)return d.set("page",d.get("page")+1),d.set("ratingLoadingMore",!0),void window.list.fetch({remove:!1,success:function(e,t){d.set("hasMore",0!==t.rating.length),d.set("ratingLoadingMore",!1),d.get("output").trigger("check")}});s.set(t),e?i.renderAll():i.render(),s.trigger("check:done")}}),s.on("add:banners",function(){s.forEach(function(e,o){function a(a){var s=i.viewOrder[e.id],r=angular.element(document.createElement("div")).addClass("ljsale ljsale--empty ljsale--raiting "+(a.exClass||"")).attr("lj0sale",a.slot).attr("lj0sale0type",a.type).attr("lj0sale0custom0id",a.customId).attr("lj0sale0close0less",a.closeLess).attr("lj0sale0crop0sizes",a.cropSizes).attr("lj0sale0on0scroll",a.onScroll).attr("lj0sale0window0min",a.windowMin).attr("lj0sale0window0max",a.windowMax).attr("lj0sale0listing",a.listing);s.before(r),n.push(o),t(r,["LJ.Sale"])}-1===n.indexOf(o)&&(LJ.Flags.isDisabled("adv_adfox_ssp_mobile")?(0===o&&a({slot:"adfox_mobile_inpost_homepage",closeLess:!0,windowMin:"320",windowMax:"1000",listing:"listing1"}),3===o&&a({slot:"adfox_inread_mobile_inpost",type:"in-read",closeLess:!0,windowMin:"320",windowMax:"1000"}),o>=6&&o%3===0&&a({slot:"adfox_mobile_inpost_homepage",closeLess:!0,windowMin:"320",windowMax:"1000",onScroll:!0,listing:"listing"+((o/3-1)%10+1)})):(0===o&&a({slot:"adfox_mobile_inpost_listing_1",closeLess:!0,windowMin:"320",windowMax:"1000",listing:"listing1"}),3===o&&a({slot:"adfox_inread_mobile_inpost",type:"in-read",closeLess:!0,windowMin:"320",windowMax:"1000"}),o>=6&&o%3===0&&a({slot:"adfox_mobile_inpost_listing_".concat(Math.min(o/3,4)),closeLess:!0,windowMin:"320",windowMax:"1000",onScroll:!0})),o>=5&&o%5===0&&a({slot:"google_mobile_inpost_homepage",exClass:"ljsale-google",closeLess:!0,windowMin:"320",windowMax:"1000",onScroll:!0,cropSizes:!0}),3===o&&a({slot:"adfox_100x240_inpost",windowMin:"1001",windowMax:"9999"}),6===o&&a({slot:"adfox_inread_inpost",type:"in-read",customId:"in_read",closeLess:!0,windowMin:"1001",windowMax:"9999"}),o>=10&&o%5===0&&a({slot:"adfox_inpost_homepage",windowMin:"1001",windowMax:"9999",onScroll:!0}),5===o&&a({slot:"google_video_homepage",type:"google_video_inline_267277916",closeLess:!0,exClass:"ljsale-google",windowMin:"1001",windowMax:"9999"}),o>=10&&o%5===0&&a({slot:"google_inpost_homepage",exClass:"ljsale-google",windowMin:"1001",windowMax:"9999",onScroll:!0,cropSizes:!0,listing:o/5-1}))})},this),s.on("add:discovery",function(){var e=s.models[5],n=e&&i.viewOrder[e.id];!o&&n&&!d.get("categoryName")&&LJ.get("remote_is_sup")&&LJ.Flags.isEnabled("lj_magazine_post_in_rating")&&(o=!0,LJ.Api.call("discovery.get_announce_in_rating",null,function(e){if(e&&e.item&&!e.error){var i=e.item,o=LJ.Flags.isEnabled("homepage_v3"),a=LJ.UI.template("templates-Widgets-entryunit",o?Object.assign({discoverypost:!0},i,{homepage_version:3}):i);n.before(a),t(a,["LJ.Directives"])}}))},this),s.on("check:done",function(){-1!==d.get("category")&&(s.forEach(function(e,n){var o=i.viewOrder[e.id];o.toggleClass("js--state-topthree",3>n).find(".js--position-number").text(n+1+"."),e.get("directivesInitiated")||(t(o,["LJ.Directives","LJ.Likus"]),e.set("directivesInitiated",!0))}),e(".entryunit--mustread").insertAfter(e(".b-entryunits > .js--entryunit:visible").slice(0,25).last()),s.trigger("add:discovery"),s.trigger("add:banners"),d.trigger("updateHeight"))},this);var g=function(e,i){return l?l.invoke(["$compile",function(t){t(e)(r.scope())}]):t(e,i)};s.on("check:done",function(){LJ.Misc.InRatingPromo.onListViewCheckDone({homepageObj:d,listViewObj:i,ngBootstrapper:g})},this),d.on("change:showFriends",function(){s.trigger("check")}),d.on("change:uniqueAuthors",function(){s.trigger("check")}),this.collection.on("entriesReturned",function(){s.trigger("check")}),function(){var t=+new Date;i.$el.on("click",".js--entryunit-title a",function(){var i=e(this).closest(".js--entryunit"),n=parseInt(i.find(".js--position-number").text(),10);n&&LJ.Track.event("Homepage","Entry click","Entry "+n,Math.ceil((+new Date-t)/1e3))})}()},scrollTo:function(t){if(t){var i=this.viewOrder[t.id];i&&e(document.body).animate({scrollTop:i.offset().top-10})}},toggleRead:function(t){var i=e(t.target).closest(".js--entryunit").data("cid"),n=this.collection.get(i);n.read(!n.read()),n.trigger("hidden"),d.get("output").trigger("check")},toggleAuthor:function(t){var i=e(t.target).closest(".js--entryunit").data("cid"),n=this.collection.get(i);n.isHidden()?(n.bringBack(),this.collection.postsByAuthor(n).forEach(function(e){e.trigger("hidden")})):LJ.Event.trigger("blacklist:add",n.user())},viewOrder:{},renderAll:function(){console.time("Render all");var e=this,t=this.$el,i=document.createDocumentFragment();d.get("output").forEach(function(t){var n=new m({model:t});i.appendChild(n.render().el),e.viewOrder[t.id]=n.$el}),t.children().not(".entryunit--mustread").remove(),t.append(i),console.timeEnd("Render all")},render:function(){var e=this,t=this.$el;d.get("output").forEach(function(i){if(e.viewOrder[i.id])e.viewOrder[i.id].show();else{var n,o,a=new m({model:i}),s=!1;for(n=i.order();n>=0;n--)if(o=e.viewOrder[d.get("category")+"-"+d.get("location")+"-"+n]){o.after(a.render().el),s=!0;break}s||t.prepend(a.render().el),i.set("rendered",a),e.viewOrder[i.id]=a.$el}})},more:function(){d.set("outputSize",d.get("outputSize")+25),d.get("output").trigger("check")}});window.list=new p,e(function(){LJ.Api.setInactivityInterval(15e5),window.homepageView=new h({el:".b-mainpage",model:window.homepage}),window.listView=new f({el:".b-entryunits",collection:window.list}),window.latestView=new J({el:".b-entryunits",collection:window.list}),window.categoryView=new b({el:".b-mainpage-menu",model:window.list}),LJ.Flags.isDisabled("homepage_v3")&&(window.settingsView=new v({el:".b-mainpage-settings",model:window.homepage}),new _({el:".b-mainpage-mystat-more"})),new y({el:".b-entryunits",model:window.homepage.editors}),new y({el:".b-entryunits",model:window.homepage.editorsUA}),new y({el:".b-entryunits",model:window.homepage.memes}),LJ.Flags.isDisabled("homepage_v3")&&(new window.PromoView({el:".b-ljpromo-selfpromo",model:d.selfPromo}),new window.PromoView({el:".b-ljpromo-commpromo",model:d.commPromo})),new MustReadView({el:".entryunit--mustread",model:d.mustRead}),i.history.start({pushState:!0,root:history.pushState||"/welcome"!==window.location.pathname?"/":"/welcome"}),new L({el:".b-mainpage-banner-head",model:d,width:970,height:250,type:"top"}),new L({el:".b-mainpage-banner-aside:eq(0)",model:d,disableRefresh:!0,width:300,height:250}),new L({el:".b-mainpage-banner-aside:eq(1)",model:d,disableRefresh:!0,width:300,height:250}),new L({el:".adfox-aside",model:d,disableRefresh:!0,width:300,height:250}),d.on("change:categoryName change:location",function(){"function"==typeof window.adfox_reloadBanner&&window.adfox_reloadBanner()}),d.on("change:categoryName",function(){"function"==typeof window.xt_click&&(LJ.ATI.page=LJ.ATI.page.split("::").slice(0,-1).concat(encodeURIComponent(location.host+location.pathname)).join("::"),LJ.ATI.params.f1=d.get("location"),LJ.ATI.params.f2=d.get("returnEntries")?1:2,LJ.ATI.params.f3=d.get("showFriends")?1:2,LJ.ATI.params.f4=d.get("uniqueAuthors")?1:2,LJ.ATI.params.tag="["+d.get("categoryName")+"]",window.xt_click(window,"F",LJ.ATI.level2id,LJ.ATI.page+"&"+LiveJournal.constructUrl("",LJ.ATI.params).replace("?","")))})});var w=i.Router.extend({routes:{"":"category","category/:name":"category","ratings/category/:name":"category",editors:"editors",editors_ua:"editors_ua",memes:"memes",latest:"latest",welcome:"category"}}),b=i.View.extend({events:LJ.Flags.isEnabled("homepage_v3")?{"click .l-flatslide-menu-link":"switchCategory"}:{"click .b-mainpage-menu-link":"switchCategory"},router:new w,initialize:function(){var t=this,i=window.homepageView;this.router.on({"route:latest":function(){t.router.trigger("route:category","latest")},"route:category":function(e){t.model.switchCategory(t.$el.find('[data-name="'+e+'"]').data("id"),e)},"route:editors":function(){d.set("categoryName","editors")},"route:editors_ua":function(){d.set("categoryName","editors_ua")},"route:memes":function(){d.set("categoryName","memes")}});var n=e(".l-mainpage-aside"),o=e(".b-mainpage-menu"),a=e(".l-mainpage-wrapper"),s=o.height(),r=14,l=100;i.startOffset=a.offset().top,e(window).on("scroll",function(){var t=e(this).scrollTop(),a=(i.absoluteBodyHeight||1e3)-s;LJ.Flags.isDisabled("homepage_v3")&&(t<i.startOffset-r?o.css("position","static"):o.css({top:r-Math.max(0,t-a+l),position:"fixed"})),i.toggleUpButton(t>i.absoluteSidebarHeight&&n.length>0)}),d.on("change:location",function(){this.router.navigate("/",{trigger:!0})},this),d.on("change:categoryName change:location",function(){var e=d.get("categoryName")||"";LJ.Flags.isEnabled("homepage_v3")?this.$('.l-flatslide-menu-link[data-name="'+e+'"]').parent().addClass("l-flatslide-menu-active").siblings().removeClass("l-flatslide-menu-active"):this.$('.b-mainpage-menu-link[data-name="'+e+'"]').parent().addClass("b-mainpage-menu-active").siblings().removeClass("b-mainpage-menu-active")},this)},switchCategory:function(e){e.ctrlKey||e.metaKey&&LJ.Support.isMac||(e.preventDefault(),this.router.navigate(e.currentTarget.pathname,{trigger:!0}),window.homepageView.scrollToTop())}}),v=i.View.extend({events:{"click .b-mainpage-settings-different":"switchDifferent","click .b-mainpage-settings-friends":"switchFriends","click .b-mainpage-settings-hidden":"switchHidden","click .b-mainpage-settings-location-item":"switchLocation","click .b-mainpage-settings-location-body":"handleLocationDropdown"},initialize:function(){var t=this;d.on("change:uniqueAuthors change:showFriends change:returnEntries change:location init",function(e){n(this.$el.find(".b-mainpage-settings-different"),"b-mainpage-settings-different",e.get("uniqueAuthors")?"shown":"hidden"),n(this.$el.find(".b-mainpage-settings-friends"),"b-mainpage-settings-friends",e.get("showFriends")?"shown":"hidden"),n(this.$el.find(".b-mainpage-settings-hidden"),"b-mainpage-settings-hidden",e.get("returnEntries")?"shown":"hidden"),n(this.$el.find(".b-mainpage-settings-location"),"b-mainpage-settings-location",e.get("location"))},this),e(document).on("click",function(e){t.handleLocationDropdown(e)}),d.trigger("init",d)},switchLocation:function(t){t.preventDefault();var i=e(t.currentTarget),n=i.data("location"),o=i.text();this.$(".b-mainpage-settings-location-current").text(o),this.model.set("location",n,{validate:!0})},handleLocationDropdown:function(t){var i;if(e(t.currentTarget).hasClass("b-mainpage-settings-location-body"))i=!0;else{if(e(t.target).hasClass("b-mainpage-settings-location-current"))return;i=!1}this.$el.toggleClass("b-mainpage-settings-location-selection",i)},switchFriends:function(e){e.preventDefault(),this.model.set("showFriends",!d.get("showFriends"))},switchHidden:function(e){e.preventDefault(),d.set("returnEntries",!d.get("returnEntries"))},switchDifferent:function(e){e.preventDefault(),d.set("uniqueAuthors",!d.get("uniqueAuthors"))}}),_=i.View.extend({events:{"click .b-mainpage-mystat-toggle":"toggleState"},initialize:function(){var t=this;e(document).on("click",function(){t.clicked?t.opened?(t.$el.removeClass("b-dropover-open"),t.opened=!1):(t.$el.addClass("b-dropover-open"),t.opened=!0):(t.$el.removeClass("b-dropover-open"),t.opened=!1),t.clicked=!1})},toggleState:function(){this.clicked=!0}}),y=i.View.extend({events:{"click .b-entryunits-more-special":"nextPage"},initialize:function(){var t=this.$el,i=e(window),n=this;d.get("scroll")&&i.on("scroll",LJ.Function.throttle(function(){var e=i.scrollTop(),o=e+i.height(),a=t.offset().top+t.height();o>a&&a>e&&n.nextPage()},300)),this.model.on("refresh",function(){d.get("categoryName")===this.model.get("categoryName")&&this.render()},this),this.on("render:done",function(){var e=this.$(".b-entryunits-more-special");e.hide(),!d.get("scroll")&&this.model.get("hasMore")&&e.last().show()},this)},nextPage:function(){d.get("categoryName")===this.model.get("categoryName")&&this.model.get("hasMore")&&(this.model.get("loading")||this.model.set("page",this.model.get("page")+1))},render:function(){this.$el.children().not(".entryunit--mustread").remove(),this.$el.prepend(e("<div/>",{html:this.model.get("html")})),this.trigger("render:done")}}),L=i.View.extend({events:{"click .b-mainpage-banner-close":"close"},close:function(){if(this.model.set("bannerClosed",!0),this.$el.hide(),d.trigger("updateHeight"),Site.remoteUser)LJ.Api.call("homepage.set_homepage_flag",{flag:"show_top_banner",value:0});else if("0"!==LJ.Cookie.get("show_top_banner")){var e=new Date,t=e.getTimezoneOffset();e.setDate(e.getDate()+1),e.setHours(4,t,0,0),LJ.Cookie.set("show_top_banner",0,{domain:location.host.replace("www",""),expires:e})}},initialize:function(){var e=this.$(".b-mainpage-banner-inner"),t=e.find("script").html();if(0!==e.length&&t){if(!Site.remoteUser){if("top"===this.options.type&&"0"===LJ.Cookie.get("show_top_banner"))return;this.$el.removeClass("b-mainpage-banner-hidden")}this.$el.length>0&&this.checkBanner()}},checkBanner:function(){var e=this,t=this.$(".b-mainpage-banner-inner"),i=3e3,n=500,o=null,a=2e4;setTimeout(function(){!function i(){if(!e.model.get("bannerClosed")&&!e.model.get("noCheck")){var a=0!==t.find("object, iframe, embed, yatag").length,s=t.find("img"),r=s.length>0,l=r&&/transparent\.gif$/.test(s.attr("src"));l?e.$el.toggle(!1):e.$el.toggle(a||r),o=setTimeout(i,n)}}()},i),setTimeout(function(){clearTimeout(o)},a)}}),J=f.extend({events:{},initialize:function(){function e(e,t){i?i.invoke(["$compile",function(t){t(e)(e.scope())}]):angular.bootstrap(e,t)}var t=this,i=angular.element(".b-mainpage").injector(),n=d.get("output");this.latestUpdateButtonView=new k({el:".b-mainpage-uprating"}),this.collection.on("reset",function(){-1===d.get("category")&&(t.viewOrder={},n.trigger("check",!0),d.set("hasMore",!0))}),n.on("check",function(e,i,o){if(-1===d.get("category")){var a,s,r;if(i?(s=t.collection.slice(-o),r=n.models,a=s.concat(r)):a=t.collection.slice(0,d.get("outputSize")),d.get("hasMore")&&a.length<d.get("outputSize")&&!i&&(d.set("page",d.get("page")+1),!e&&d.hasMoreEntries()))return void window.list.fetch({remove:!1,success:function(e,t){d.set("hasMore",0!==t.rating.length),n.trigger("check")}});n.set(a),e?t.renderAll():t.render(i),n.trigger("check:done")}}),n.on("check:done",function(){d.trigger("updateHeight")}),n.on("initDirectives",function(){n.forEach(function(i){i.get("directivesInitiated")||(e(t.viewOrder[i.id],["LJ.Directives","LJ.Likus"]),i.set("directivesInitiated",!0))})})},getFirstEntry:function(){return e(this.$el).children().first()},render:function(e){var t=this,i=this.$el,n=this.getFirstEntry();d.get("output").forEach(function(o){if(t.viewOrder[o.id])t.viewOrder[o.id].show();else{var a=new m({model:o}),s=!1;if(e)n.before(a.render().el);else{for(var r=o.order();r>=0;r--){var l=t.viewOrder[d.get("category")+"-"+d.get("location")+"-"+r];if(l&&!l.wasAddedToTop){l.after(a.render().el),s=!0;break}}s||i.prepend(a.render().el)}o.set("rendered",a),t.viewOrder[o.id]=a.$el,e&&(t.viewOrder[o.id].wasAddedToTop=!0)}}),d.get("output").trigger("initDirectives")},renderAll:function(){this.constructor.__super__.renderAll.call(this),d.get("output").trigger("initDirectives")}}),k=i.View.extend({events:{"click .b-mainpage-uprating-inner":"updateLatest"},time:12e4,timeout:!1,isActive:!1,isVisible:!1,toggleScroll:function(t){e(".b-mainpage").toggleClass("b-mainpage-state-rating-scroll",t);
},initialize:function(){var t,i=this,n=e(".b-mainpage");e(window).on("scroll",function(){if(i.isVisible){var o=e(i.$el).offset().top,a=e(document).scrollTop(),s=n.hasClass("b-mainpage-state-rating-scroll"),r=s?a>t:a>o;!s&&r?(i.toggleScroll(!0),t=o):s&&!r&&i.toggleScroll(!1)}}),d.on("change:categoryName",function(e,t){"latest"===t?i.startTimer():i.stopTimer()})},startTimer:function(){var e,t,i=this;return this.isActive=!0,!d.get("lastTimepost")||d.get("ratingLoading")||d.get("ratingLoadingMore")?void(i.timeout=setTimeout(function(){i.startTimer()},i.time)):(e=new Date,t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()),void LJ.Api.call("latest.get_entries",{last_timepost:d.get("lastTimepost"),random_timestamp:120*Math.floor(t.getTime()/12e4)},function(e){i.toggle("yes"===e.status),i.isActive&&(i.timeout=setTimeout(function(){i.isActive&&i.startTimer()},i.time))}))},stopTimer:function(){var e=this;this.isActive=!1,clearTimeout(e.timeout),this.toggle(!1)},toggle:function(t){e(".b-mainpage").toggleClass("b-mainpage-state-rating-updates",t),this.isVisible=t},toggleSpinner:function(t){e(".b-mainpage").toggleClass("b-mainpage-state-rating-loading-top",t)},updateLatest:function(e){e.preventDefault();var t=this;t.toggle(!1),window.homepageView.scrollToTop(),t.toggleSpinner(!0),window.list.fetch({remove:!1,addToTop:!0,success:function(e,i){i.rating&&(d.get("output").trigger("check",!1,!0,i.rating.length),t.toggle(!1),t.toggleSpinner(!1))}})}})}(jQuery,_,Backbone);
/* <<< file end: js/mainpage/main.js */

//# map link was there [main.js.map]
/* >>> file start: js/core/angular/pills.js */
!function(i){return i}(),function(){"use strict";angular.module("LJ.Pills",[]).factory("Pills",function(){var i={};return{group:function(n,t){return"undefined"==typeof t?i[n]:void(i[n]=t)}}}).directive("ljPillsGroup",["Pills",function(i){return{restrict:"A",link:function(n,t,l){var r=l.ljPillsGroupActive||"b-menu-item-active";n.$watch(function(){return i.group(l.ljPillsGroup)},function(i){t.find("[data-pill]").removeClass(r).filter('[data-pill="'+i+'"]').addClass(r)})}}}])}();
/* <<< file end: js/core/angular/pills.js */

//# map link was there [pills.js.map]
/* >>> file start: js/widgets/angular/topJournals.js */
//= require js/core/angular/pills.js
//= require js/core/angular/api.js
//= require js/core/angular/ljUser.js
//= require js/core/angular/options.js
//= require js/core/angular/users.js
Site.page.template['angular/widgets/topJournals/top.ng.tmpl'] = '<!-- top 10 users or communities (see templates/Widgets/HomePage/sidebar.tmpl for more information) -->\n\n<div\n    class=\"b-topten l-flatslide-aside-block\"\n    ng-if=\"widget.state.initialized\"\n    ng-class=\"{\n        \'b-topten-loading\': widget.state.loading,\n        \'b-topten-users\':   widget.options.type === \'users\',\n        \'b-topten-comm\':    widget.options.type === \'communities\'\n    }\"\n    >\n\n    <!-- head -->\n    <header class=\"b-topten-head\">\n\n        <!-- title -->\n        <h3\n            class=\"b-topten-title\"\n            lj-ml=\"main.top.{{widget.options.type}}\"\n            ></h3>\n\n        <!-- time switcher -->\n        <ul class=\"b-topten-switcher\"\n            lj-pills-group=\"{{widget.options.type === \'users\' ? \'widget-top-journals\' : \'widget-top-communities\'}}\"\n            lj-pills-group-active=\"b-topten-switcher-item-active\"\n            ><!--\n\n            24 hours\n            --><li\n                class=\"b-topten-switcher-item\"\n                ng-class=\"{\n                    \'b-topten-switcher-item-day-users\': widget.options.type === \'users\',\n                    \'b-topten-switcher-item-day-comm\':  widget.options.type === \'communities\'\n                }\"\n                data-pill=\"visitors\"\n                ng-click=\"widget.switchTo(\'visitors\')\"\n                >\n                <a\n                    href=\"javascript:void(0);\"\n                    class=\"b-pseudo\"\n                    lj-ml=\"main.top.aday\"\n                    ></a>\n            </li><!--\n\n            all time\n            --><li\n                class=\"b-topten-switcher-item\"\n                ng-class=\"{\n                    \'b-topten-switcher-item-alltime-users\': widget.options.type === \'users\',\n                    \'b-topten-switcher-item-alltime-comm\':  widget.options.type === \'communities\'\n                }\"\n                data-pill=\"authority\"\n                ng-click=\"widget.switchTo(\'authority\')\"\n                >\n                <a\n                    href=\"javascript:void(0);\"\n                    class=\"b-pseudo\"\n                    lj-ml=\"main.top.alltime\"\n                    ></a>\n            </li><!--\n\n        --></ul>\n\n    </header><!-- /head -->\n\n    <!-- preloader -->\n    <div\n        class=\"\n            b-topten-preloader-container\n            \">\n        <span\n            class=\"\n                b-topten-preloader\n                svgpreloader\n                svgpreloader-tag\n                svgpreloader-30\n                \"></span><!-- /preloader -->\n    </div>\n\n    <!-- body -->\n    <div class=\"b-topten-body\">\n\n        <!-- promo -->\n        <div\n            class=\"b-topten-promo\"\n            ng-include=\"\'topPromo.ng.tmpl\'\"\n            ng-if=\"widget.options.country !== \'noncyr\' || widget.isNoncyrSelfpromoEnabled\"\n            ></div>\n        <!-- /promo -->\n\n        <!-- items in top -->\n        <ul\n            class=\"b-topten-items\"\n            ng-class=\"{\n                \'b-topten-items-users\': widget.options.type === \'users\',\n                \'b-topten-items-comm\':  widget.options.type === \'communities\'\n            }\"\n            >\n            <li ng-repeat=\"journal in widget.journals\"\n                class=\"b-topten-item\"\n                ng-class=\"{\n                    \'b-topten-item-down\': journal.delta && journal.delta < 0,\n                    \'b-topten-item-up\':   journal.delta && journal.delta > 0\n                }\"\n                ng-attr-title=\"{{journal.title}}\"\n                >\n                <span class=\"b-topten-position\"><!--\n                    position\n                    --><span class=\"b-topten-position-number\" ng-bind=\"journal.position\"></span><!--\n                    up/down arrow\n                    --><span\n                        class=\"b-topten-updown\"\n                        lj-ml=\"main.top.updown\"\n                        lj-ml-attr=\"title\"\n                        ></span><!--\n                --></span>\n\n                <!-- user -->\n                <span\n                    lj-user-dynamic=\"journal.username\"\n                    lj-user-dynamic-options=\"{\n                        target: \'_blank\'\n                    }\"\n                    ></span>\n\n                <!-- journal title -->\n                <span class=\"b-topten-journaltitle\" lj-html=\"journal.title\"></span>\n\n                <!-- weight -->\n                <span class=\"b-topten-weight\" ng-bind=\"journal.value\" ng-if=\"widget.options.country !== \'noncyr\'\"></span>\n            </li>\n        </ul><!-- /items -->\n\n    </div><!-- /body -->\n\n    <!-- footer -->\n    <footer class=\"b-topten-footer\">\n        <a\n            ng-href=\"{{widget.siteroot}}/ratings/{{widget.options.type === \'users\' ? \'users\' : \'community\'}}?country={{widget.options.country}}\"\n            lj-ml=\"main.top.all{{widget.options.type}}\"\n            ng-class=\"{\n                \'b-topten-footer-users\': widget.options.type === \'users\',\n                \'b-topten-footer-comm\':  widget.options.type === \'communities\'\n            }\"\n            target=\"_blank\"\n            ></a>\n    </footer>\n</div>\n';
Site.page.template['angular/widgets/topJournals/topPromo.ng.tmpl'] = '<!-- promo -->\n<div\n    class=\"b-topten-promo-outer\"\n    ng-class=\"{\n        \'b-topten-promo-users\' : widget.options.type === \'users\',\n        \'b-topten-promo-comm\' :  widget.options.type === \'communities\'\n    }\"\n    >\n    <div class=\"b-topten-promo-inner\">\n\n        <!-- title -->\n        <h4 class=\"b-topten-promo-title\">\n            <a\n                class=\"promo-label promo-label--topten\"\n                target=\"_blank\"\n                ng-href=\"{{widget.siteroot}}/shop/selfpromo.bml?type={{widget.options.type === \'users\' ? \'journal\' : \'community\'}}&amp;country={{widget.options.country}}\"\n                lj-ml=\"main.top.promo\"\n                ></a>\n        </h4>\n\n        <!-- if promo in top ten empty -->\n        <span\n            ng-if=\"widget.selfpromo\"\n            lj-user-dynamic=\"widget.selfpromo.user.username\"\n            lj-user-dynamic-options=\"{\n                \'target\': \'_blank\'\n            }\"\n            ></span>\n\n        <span\n            class=\"b-topten-promo-empty\"\n            lj-ml=\"main.top.promo.empty.{{widget.options.type}}\"\n            lj-ml-resolve=\"{ country: widget.options.country }\"\n            ng-if=\"!widget.selfpromo\"\n            ></span>\n    </div>\n</div>\n';
//= require_ml main.top.aday
//= require_ml main.top.allcommunities
//= require_ml main.top.alltime
//= require_ml main.top.allusers
//= require_ml main.top.communities
//= require_ml main.top.updown
//= require_ml main.top.users
//= require_ml main.top.promo
//= require_ml main.top.promo.empty.communities
//= require_ml main.top.promo.empty.users
angular.module("LJ.Widget.TopJournals",["LJ.Templates","LJ.Directives","LJ.Pills","LJ.Api","LJ.User","LJ.Options","Users"]).controller("ljWidgetTopCtrl",["$scope","Options","Pills","Api","Users",function(t,e,o,i,n){function r(){var t={what:s.get("type"),country:s.get("country"),sort:o.group(s.get("pills"))},e=Date.now();l.state.loading=!0,i.call("ratings.journals_top",t,{cache:!0,meta:!0}).then(function(t){var o=t.response;LJ.Track.timingOnce("Homepage","Top "+s.get("type"),Date.now()-e),t.fromCache||(n.Cache.add(o.journals.map(LJ.Function.get("user"))),o.selfpromo&&n.Cache.add(o.selfpromo.user)),l.journals=o.journals.map(function(t){return t.username=t.user.username,t}),l.selfpromo=o.selfpromo,l.state.loading=!1})}var l=this,s=e.create();this.options=s.raw(),this.siteroot=LJ.get("siteroot"),this.isNoncyrSelfpromoEnabled=LJ.Flags.isEnabled("selfpromo_noc"),this.state={loading:!0,initialized:!1},this.switchTo=function(t){o.group(s.get("pills"),t)},this.set=s.set.bind(s),this.init=function(e){o.group(s.get("pills"),LJ.get(s.get("flag"))||"visitors"),r(),t.$watch(function(){return o.group(s.get("pills"))},function(t,e){t!==e&&(LJ.Api.call("homepage.set_homepage_flag",{flag:s.get("flag"),value:t}),r())}),t.$watch(e,function(t,e){t!==e&&(s.set("country",t),r())}),l.state.initialized=!0}}]).directive("ljWidgetTopJournals",["$parse",function(t){return{controller:"ljWidgetTopCtrl",controllerAs:"widget",templateUrl:"top.ng.tmpl",scope:!0,compile:function(e,o){var i=t(o.ljWidgetTopJournals);return function(t,e,o,n){n.set({pills:"widget-top-journals",flag:"user_top_type",type:"users",country:i(t)}),n.init(i)}}}}]).directive("ljWidgetTopCommunities",["$parse",function(t){return{controller:"ljWidgetTopCtrl",controllerAs:"widget",templateUrl:"top.ng.tmpl",scope:!0,compile:function(e,o){var i=t(o.ljWidgetTopCommunities);return function(t,e,o,n){n.set({pills:"widget-top-communities",flag:"comm_top_type",type:"communities",country:i(t)}),n.init(i)}}}}]);
/* <<< file end: js/widgets/angular/topJournals.js */

//# map link was there [topJournals.js.map]
/* >>> file start: js/widgets/angular/today.js */
//= require js/core/angular/api.js
//= require js/core/angular/users.js
//= require js/core/angular/ljUser.js
Site.page.template['angular/widgets/todayLJ/todayLJ.ng.tmpl'] = '<!-- today lj (discovery) -->\n\n<div\n    class=\"\n        b-todaylj\n        l-flatslide-aside-block\n        js-elem-bordercolor\n        \"\n    ng-class=\"{\n        \'b-todaylj-loading\': isLoading\n    }\"\n    ng-if=\"isSup || type === \'homepage\'\"\n    >\n\n    <!-- head -->\n    <header\n        class=\"\n            b-todaylj-head\n            flatwidget__head\"\n        >\n        <h3\n            class=\"\n                b-todaylj-title\n                js-elem-color\n                \"\n            lj-ml=\"main.todaylj.head\"\n            ng-if=\"type === \'homepage\'\"\n            >\n        </h3>\n        <h3\n            class=\"\n                b-todaylj-title\n                js-elem-color\n                \"\n            lj-ml=\"discovery.todaylj.head\"\n            ng-if=\"type === \'discovery\'\"\n            >\n        </h3>\n    </header>\n\n    <!-- body -->\n    <div\n        class=\"\n            b-todaylj-body\n            flatwidget__body\n            js-link-color--a\"\n        >\n\n        <!-- items -->\n        <ul class=\"b-todaylj-items\">\n\n            <!-- item -->\n            <li\n                class=\"b-todaylj-item\"\n                ng-repeat=\"item in items\"\n                >\n\n                <!-- pic -->\n                <figure\n                    class=\"b-todaylj-figure\"\n                    ng-if=\"item.image\"\n                    >\n                    <a\n                        target=\"{{target}}\"\n                        ng-href=\"{{item.url}}\"\n                        >\n                        <img\n                            ng-src=\"{{item.image}}\"\n                            alt=\"\"\n                            class=\"b-todaylj-pic\"\n                            >\n                    </a>\n                </figure>\n\n                <!-- caption -->\n                <h4\n                    class=\"\n                        b-todaylj-caption\n                        js-sidebar-color--a-novisited\">\n                    <a\n                        ng-href=\"{{item.url}}\"\n                        target=\"{{target}}\"\n                        lj-html=\"item.subject_clean\"\n                        >\n                    </a>\n                </h4>\n\n                <!-- meta -->\n                <p\n                    class=\"b-todaylj-meta\"\n                    ng-if=\"item.user\"\n                    >\n                    <span class=\"b-todaylj-username\">\n                        <span\n                            ng-if=\"item.user\"\n                            lj-user-dynamic=\"item.user.username\"\n                            lj-user-dynamic-options=\"{target: \'_blank\'}\"\n                            ></span>\n                    </span>\n                    <span\n                        class=\"b-todaylj-comments\"\n                        ng-if=\"item.comments_url && item.comments_cnt > 0\"\n                        >\n                        <a\n                            target=\"{{target}}\"\n                            ng-href=\"{{item.comments_url}}\"\n                            >\n                             <span\n                                class=\"\n                                    b-todaylj-comments-icon\n                                    js-elem-color--svgicon\n                                    \"\n                                lj-svg-icon=\"flaticon--comments-bold\"\n                                ></span>\n                             <span\n                                class=\"b-todaylj-comments-inner\"\n                                >\n                                <span\n                                    ng-hide=\"item.comments_cnt === 0\"\n                                    lj-ml=\"entryunit.comments.numbersonly\"\n                                    lj-ml-resolve=\"{reply_count: item.comments_cnt}\"\n                                    ></span>\n                            </span>\n                        </a>\n                    </span>\n                </p>\n\n            </li><!-- /item -->\n\n        </ul><!-- /items -->\n\n        <!-- dummy loader -->\n        <ul\n            class=\"\n                b-todaylj-dummy\n                flatwidget__load\n                load-flatwidget\n                \">\n            <li\n                class=\"\n                    b-todaylj-dummy-item\n                    load-flatwidget__item\n                    js-elem-bgcolor--pseudos\n                    \">\n            </li>\n            <li\n                class=\"\n                    b-todaylj-dummy-item\n                    load-flatwidget__item\n                    js-elem-bgcolor--pseudos\n                    \">\n            </li>\n            <li\n                class=\"\n                    b-todaylj-dummy-item\n                    load-flatwidget__item\n                    js-elem-bgcolor--pseudos\n                    \">\n            </li>\n        </ul><!-- /dummy -->\n\n    </div><!-- /body -->\n\n</div><!-- /todaylj -->\n\n\n';
Site.page.template['angular/widgets/popularLJ/popularLJ.ng.tmpl'] = '<h3\n    lj-ml=\"main.intro.discovery.popular\"\n    class=\"\n        discovery-popular__title\n        \"></h3>\n<span\n  ng-class=\"{\'svgpreloader-show\': popular.loading}\"\n  class=\"\n    svgpreloader\n    svgpreloader-tag\n    svgpreloader-30\n  \"\n  ></span>\n<ul\n    class=\"\n        discovery-popular__list\n        \">\n    <li\n        ng-repeat=\"item in popular.items\"\n        ng-class=\"{\n            \'popular-item--big\': item.main_post,\n            \'popular-item--image-disable\': !item.image\n        }\"\n        class=\"\n            discovery-popular-list__item\n            popular-item\n            \">\n        <a\n            data-track-event=\"LJMag:Sidebar:OpenPopularPost:{{item.main_post ? \'big\' : \'small\'}}\"\n            href=\"{{item.url}}\"\n            target=\"_self\"\n            >\n            <div\n                ng-style=\"{\'background-image\':\'url({{item.image}})\'}\"\n                class=\"\n                    popular-item__image\n                    \">\n                <img\n                    ng-src=\"{{item.image}}\"\n                    alt=\"\"\n                    />\n            </div>\n            <h3\n                class=\"\n                    popular-item__title\n                    \"><!--\n             -->{{item.subject}}<!--\n             --></h3>\n        </a>\n    </li>\n</ul>\n\n';
LJ.injectStyle('/* >>> file start: stc/widgets/todaylj.css */\n.b-todaylj{text-align:left}.b-todaylj-head{margin:0 0 1rem;padding:0}.b-feedwidgets .b-todaylj-head{margin:0 0 .8125rem}.b-todaylj-body,.b-todaylj-items,.b-todaylj-title{margin:0;padding:0}.b-todaylj-title{font-style:normal;font-weight:400;font-size:1.25rem;text-transform:uppercase}.flatwidget--default-theme .b-todaylj-title{color:#829399}.b-feedwidgets .b-todaylj-body{font-size:.875rem}.b-todaylj-items{list-style:none}.b-todaylj-item{margin:1rem 0 0;padding:0}.b-todaylj-item:first-child{margin-top:0}.b-todaylj-figure{margin:0 0 1rem;padding:0}.b-todaylj-pic{max-width:100%;height:auto;margin:0;vertical-align:top}.b-feedwidgets .b-todaylj-figure{display:none}.b-todaylj-caption{margin:0 0 .3rem;padding:0;font-weight:400;font-size:1.125rem;line-height:1.2}.b-todaylj-caption A{display:inline-block}.flatwidget--default-theme .b-discoveryarticle .b-todaylj-caption A:link,.flatwidget--default-theme .b-discoveryarticle .b-todaylj-caption A:visited,.flatwidget--default-theme .b-todaylj-caption A:link,.flatwidget--default-theme .b-todaylj-caption A:visited{color:#242F33}.flatwidget--default-theme .b-discoveryarticle .b-todaylj-caption A:active,.flatwidget--default-theme .b-discoveryarticle .b-todaylj-caption A:hover,.flatwidget--default-theme .b-todaylj-caption A:active,.flatwidget--default-theme .b-todaylj-caption A:hover,.flatwidget--default-theme .b-todaylj-meta A:link,.flatwidget--default-theme .b-todaylj-meta A:visited{color:#00A3D9}.b-feedwidgets .b-todaylj-caption{margin:0;font-size:1em;line-height:1.4}.b-todaylj-meta{margin:0;padding:0}.b-mainpage .b-todaylj-meta{letter-spacing:.05rem;text-transform:uppercase;font-family:ProximaNova,Tahoma,Arial,sans-serif;font-weight:600;font-size:.875rem}.flatwidget--default-theme .b-todaylj-meta A:active,.flatwidget--default-theme .b-todaylj-meta A:hover{color:#0086B3}.b-todaylj-username{margin:0 1rem 0 0}.b-todaylj-username .story--author-users .i-ljuser-profile{display:none}.b-todaylj-comments{position:relative;display:inline-block;margin:0 1rem 0 0}.b-todaylj-comments-icon{display:inline-block;width:17px;height:16px;margin:0;padding:0;background:url(/img/icons/unit_v3.png?v=42878) 0 -17px no-repeat;font:0/0 serif;vertical-align:middle;color:#7A9199}.b-todaylj-comments-icon .svgicon{width:17px;height:16px}.b-todaylj-comments-inner{vertical-align:middle}.b-feedsettings-on .b-todaylj-comments-icon{background:0 0}.b-todaylj-loading .b-todaylj-body{min-height:300px}.b-todaylj-loading .b-todaylj-dummy{display:block}.b-todaylj-loading .b-todaylj-items{visibility:hidden}@media all and (max-width:1000px){.b-discoveryarticle .b-todaylj{width:auto;max-width:650px;margin:0 auto;padding-left:0}}@media all and (max-width:800px){.b-discoveryarticle .b-todaylj{width:300px}.b-todaylj-items{-webkit-column-count:auto;-moz-column-count:auto;column-count:auto;-webkit-column-gap:normal;-moz-column-gap:normal;column-gap:normal}}@media all and (max-width:650px){.b-discoveryarticle .b-todaylj{width:auto;max-width:300px;padding-left:0;padding-right:0}}\n/* <<< file end: stc/widgets/todaylj.css */\n\n/*# map link was there [todaylj.css.map] */\n');
//= require_ml main.intro.discovery.popular
//= require_ml main.todaylj.head,
//= require_ml discovery.todaylj.head,
//= require_ml entryunit.comments.numbersonly,
//= require_ml entryunit.comments.none
angular.module("LJ.Widget.Discovery",["LJ.Templates","LJ.Api","LJ.Directives","LJ.User","Users"]).directive("ljWidgetDiscoveryPopular",["Api","Users",function(e,t){return{templateUrl:"popularLJ.ng.tmpl",link:function(i){var n={};i.popular=n,e.call("discovery.popular",null,{cache:!0}).then(function(e){n.items=[].concat(e.items.filter(LJ.Function.get("main_post",1))).concat(e.items.filter(LJ.Function.get("main_post",0))),t.Cache.add(n.items.map(LJ.Function.get("user"))),n.loading=!1})}}}]).directive("ljWidgetDiscovery",["Api","Users",function(e,t){return{templateUrl:"todayLJ.ng.tmpl",link:function(i,n,a){i.type="discovery",i.isLoading=!0,i.target=angular.isDefined(a.ljWidgetDiscoveryTarget)?a.ljWidgetDiscoveryTarget:"_blank",e.call("discovery.today",null,{cache:!0}).then(function(e){i.items=e.items,t.Cache.add(i.items.map(LJ.Function.get("user"))),i.isLoading=!1}),i.isSup=LJ.get("remote_is_sup")}}}]),angular.module("LJ.Widget.Top",["LJ.Templates","LJ.Api","LJ.Directives","LJ.User","Users"]).directive("ljWidgetTop",["Api","Users","$q",function(e,t,i){return{templateUrl:"todayLJ.ng.tmpl",link:function(n,a,r){function s(){return e.call("ratings.show_flags",{cache:!0})}function o(){return e.call("ratings.blacklist_get",{cache:!0}).then(function(e){return e.blacklist.map(LJ.Function.get("user"))})}function l(e){var t=[];return e.filter(function(e){var i=e.user.display_name;return t.push(i),!!(-1===u.indexOf(i)||g.show_unique_items&&-1===t.indexOf(i))})}function c(i){var a=5,r=5;return i=i||0,e.call("homepage.today",{page:i},{cache:!0}).then(function(e){var s=l(e.items);return Array.prototype.push.apply(p,s),p.length<a&&r>i?c(i+1):(t.Cache.add(p.map(LJ.Function.get("user"))),n.isLoading=!1,p.slice(0,a))})}var u=[],g={},p=[];LJ.get("remote")?i.all({settings:s(),names:o()}).then(function(e){angular.extend(g,e.settings),u=e.names,c().then(function(e){n.items=e})}):c().then(function(e){n.items=e}),n.type="homepage",n.isLoading=!0,n.items=[],n.target=angular.isDefined(r.ljWidgetTopTarget)?r.ljWidgetTopTarget:"_blank",n.isSup=LJ.get("remote_is_sup")}}}]);
/* <<< file end: js/widgets/angular/today.js */

//# map link was there [today.js.map]
/* >>> file start: js/core/angular/checked.js */
angular.module("LJ.Checked",[]).factory("checkedGroup",[function(){function e(){this._models={}}function t(t){return r[t]?r[t]:(r[t]=new e,r[t])}var r={};return e.prototype.reset=function(e){var t,r=this.models();for(t in r)r.hasOwnProperty(t)&&delete r[t];return angular.isObject(e)&&angular.extend(r,e),this},e.prototype.length=function(){return Object.keys(this.models()).length},e.prototype.count=function(){var e,t=this.models(),r=0;for(e in t)t.hasOwnProperty(e)&&t[e]&&(r+=1);return r},e.prototype.models=function(){return this._models},e.prototype.toggle=function(e,t){var r=this.models(),n="undefined"!=typeof t;Array.isArray(e)||(e=[e]),e.forEach(function(e){r[e]=n?t:!Boolean(r[e])})},e.prototype.isChecked=function(e){return Boolean(this.models()[e])},e.prototype.isAllChecked=function(e){var t=this.models();return"undefined"==typeof e?this.count()===this.length():(Array.isArray(e)||(e=[e]),e.every(function(e){return t[e]}))},e.prototype.isNoneChecked=function(e){var t=this.models();return"undefined"==typeof e?0===this.count():(Array.isArray(e)||(e=[e]),e.every(function(e){return!t[e]}))},e.prototype.getChecked=function(e){var t,r=this.models(),n=[];for(t in r)r.hasOwnProperty(t)&&r[t]&&n.push(t);return"undefined"!=typeof e&&(Array.isArray(e)||(e=[e]),e=e.map(String),n=n.filter(function(t){return-1!==e.indexOf(t)})),n},t}]);
/* <<< file end: js/core/angular/checked.js */

//# map link was there [checked.js.map]
/* >>> file start: js/core/angular/privacy.js */
//= require js/core/angular/api.js
//= require js/core/angular/checked.js
Site.page.template['angular/privacy.ng.tmpl'] = ' <span>\n\n  <select\n          class=\"sharp-select\"\n          name=\"privacy\"\n          ng-model=\"model.privacy\"\n          ng-attr-tabindex=\"{{tab}}\"\n          ng-options=\"item.value as item.title for item in privacy.all\"\n          ng-disabled=\"disabled\"\n  ></select>\n\n  <ul class=\"privacy-list\" ng-if=\"model.privacy === \'custom\'\">\n    <li class=\"privacy-item\" ng-repeat=\"group in privacy.groups track by group.id\">\n        <label>\n          <input type=\"checkbox\" ng-model=\"privacy.selected[group.id]\" name=\"custom_bit_{{group.id}}\" ng-attr-tabindex=\"{{tab}}\">\n          <span ng-bind=\"group.name\"></span>\n        </label>\n    </li>\n  </ul>\n\n</span>\n';
//= require_ml flatmedia.security
//= require_ml admin.writers_block.answer.private
//= require_ml admin.writers_block.answer.public
//= require_ml admin.writers_block.answer.custom
//= require_ml admin.writers_block.answer.friends
//= require_ml admin.writers_block.answer.default
//= require_ml admin.writers_block.answer.members
//= require_ml admin.writers_block.answer.maintainers
!function(e){return e}(),function(){"use strict";angular.module("LJ.Privacy",["LJ.Templates","LJ.Api","LJ.Checked"]).factory("Privacy",["Api",function(e){function t(t){return e.call("user.get_privacy_list",t,{cache:!0}).then(function(e){return e.list})}function n(t){return t=t||{},e.call("groups.list",t,{cache:!0}).then(function(e){return e.groups})}return{getGroups:n,getPrivacyList:t}}]).directive("ljPrivacy",["$timeout","Privacy","checkedGroup",function(e,t,n){return{scope:{model:"=ljPrivacy",scope:"=ljPrivacyScope",user:"=ljPrivacyUser",tab:"=ljPrivacyTabindex",init:"=ljPrivacyInit",disabled:"=ljPrivacyDisabled"},templateUrl:"privacy.ng.tmpl",controllerAs:"privacy",controller:["$scope","$attrs",function(r,i){function c(){r.$watchCollection(function(){return a.getChecked()},function(e){r.model.groupids=e.map(Number)})}function o(){l&&""!==r.user&&(u.selected=a.models(),t.getPrivacyList({scope:r.scope,user:r.user}).then(function(e){if(u.all=[],e.forEach(function(e){u.all.push({title:LJ.ml("admin.writers_block.answer."+e),value:e})}),i.hasOwnProperty("ljPrivacyDeafult")&&u.all.unshift({title:LJ.ml("admin.writers_block.answer.default"),value:""}),!r.communityChanged)var t=u.all.find(function(e){return e.value===r.model.privacy});t||(r.model.privacy=u.all[0].value)}),t.getGroups({journal:r.user}).then(function(e){u.groups=e,a.toggle(r.model.groupids,!0),c()}))}var u=this,a=n("custom"),l=!0;i.hasOwnProperty("ljPrivacyInit")&&r.$watch("init",function(t){t&&(l=t,e(o))}),r.$watch("user",o),r.$watchCollection("model.groupids",function(){a.toggle(r.model.groupids,!0)}),r.$on("privacy:customGroups:reset",function(){a.reset()}),LJ.Event.on("community:change",function(){r.needStateRestore?r.needStateRestore=!1:r.communityChanged=!0}),LJ.Event.on("state_restore",function(){r.needStateRestore=!0})}]}}])}();
/* <<< file end: js/core/angular/privacy.js */

//# map link was there [privacy.js.map]
/* >>> file start: js/widgets/angular/answerForTheQuestionOfTheDay.js */
//= require js/core/angular/api.js
//= require js/core/angular/privacy.js
Site.page.template['angular/widgets/flatquestion/answer.ng.tmpl'] = '<a\n   ng-href=\"{{directive.siteroot}}/writersblock/answer?qid={{questionId}}\"\n   class=\"flatquestion-item-reply\"\n   ng-click=\"$event.preventDefault();directive.show()\"\n   lj-ml=\"widget.flatquestion.reply\"\n   >\n</a>\n\n<!-- flatquestion reply popup (add .p-flatquestion-reply at BODY to show) -->\n<div\n  class=\"\n    flatquestion-popup\n    flatquestion-reply\n  \"\n  ng-class=\"{\n    \'flatquestion-popup-sending\'      : directive.state.sending,\n    \'flatquestion-popup-successfully\' : directive.state.success,\n    \'flatquestion-reply-active\'       : directive.state.active\n  }\"\n  ng-if=\"directive.state.active\"\n  >\n\n  <!-- header -->\n  <header class=\"flatquestion-popup-header\">\n\n    <!-- head -->\n    <h3\n    class=\"flatquestion-popup-head\"\n    lj-ml=\"widget.flatquestion.popup.reply.head\"\n    ></h3>\n\n    <!-- close button -->\n    <span\n    tabindex=\"50\"\n    class=\"i-iconus flatquestion-popup-close\"\n    ng-click=\"directive.state.active = false\"\n    ></span>\n\n  </header>\n\n  <!-- body -->\n  <div class=\"flatquestion-popup-body\">\n\n    <form class=\"flatquestion-popup-form\">\n\n      <!-- answer -->\n      <div class=\"flatquestion-popup-field\">\n        <textarea\n        name=\"flatquestion_reply_aswer\"\n        cols=\"25\"\n        rows=\"5\"\n        tabindex=\"50\"\n        class=\"flatquestion-popup-textarea\"\n        lj-ml=\"widget.flatquestion.popup.reply.answer\"\n        lj-ml-attr=\"placeholder\"\n        ng-model=\"directive.post.text\"\n        ></textarea>\n      </div>\n\n      <!-- post to journal -->\n      <div class=\"flatquestion-popup-field\" ng-if=\"!directive.isIdentity\">\n        <input\n          type=\"checkbox\"\n          name=\"flatquestion_reply_post\"\n          id=\"flatquestion_reply_post\"\n          tabindex=\"50\"\n          ng-model=\"directive.post.is_without_post\"\n          ng-checked=\"!directive.post.is_without_post\"\n          class=\"flatquestion-popup-checkbox\"\n          ng-disabled=\"true\"\n          ng-show=\"false\"\n        >\n        <label\n          for=\"flatquestion_reply_post\"\n          class=\"flatquestion-popup-label\"\n          lj-ml=\"widget.flatquestion.popup.reply.post\"\n        ></label>\n        <span lj-privacy=\"directive.post\"></span>\n  </div>\n\n  <!-- anonymity -->\n  <div class=\"flatquestion-popup-field\" ng-show=\"directive.showQestionAtPage\">\n    <input\n    type=\"checkbox\"\n    name=\"flatquestion_reply_name\"\n    id=\"flatquestion_reply_name\"\n    tabindex=\"50\"\n    class=\"flatquestion-popup-checkbox\"\n    ng-model=\"directive.post.is_visible\"\n    ng-checked=\"directive.post.is_visible\"\n    ng-disabled=\"directive.isIdentity\"\n    >\n    <label\n    for=\"flatquestion_reply_name\"\n    class=\"flatquestion-popup-label\"\n    lj-ml=\"widget.flatquestion.popup.reply.name\"\n    ></label>\n  </div>\n\n  <!-- submit -->\n  <div class=\"flatquestion-popup-submitbox\">\n    <div\n      class=\"\n        flatquestion-popup-submitbox-inner\n        svgpreloader\n        svgpreloader-pseudo\n        svgpreloader-16\n        \">\n      <!--\n      <button\n      name=\"submit\"\n      tabindex=\"50\"\n      class=\"b-flatbutton\"\n      ng-click=\"directive.send()\"\n      ng-disabled=\"directive.isDisabled()\"\n      lj-ml=\"widget.flatquestion.popup.reply.submit\"\n      ></button> -->\n      <lj-flatbutton lj-flatbutton=\"[\'submit\', \'widget.flatquestion.popup.reply.submit\', \'b-flatbutton\', \'name\', \'submit\', \'tabindex\', \'50\', \'ng-click\', \'directive.send()\', \'ng-disabled\', \'directive.isDisabled()\']\">\n        </lj-flatbutton>\n    </div>\n  </div>\n\n  </form>\n\n  <!-- success message -->\n  <div class=\"flatquestion-popup-success\">\n    <p\n    class=\"flatquestion-popup-success-text\"\n    lj-ml=\"widget.flatquestion.popup.reply.success\"\n    ></p>\n    <p class=\"flatquestion-popup-success-button\">\n      <!--\n      <a\n      ng-href=\"{{directive.post.url}}\"\n      class=\"b-flatbutton b-flatbutton-simple\"\n      lj-ml=\"widget.flatquestion.popup.reply.success.button\"\n      ></a> -->\n      <lj-flatbutton lj-flatbutton=\"[\'a\', \'widget.flatquestion.popup.reply.success.button\', \'b-flatbutton b-flatbutton-simple\', \'ng-href\', \'{{directive.post.url}}\']\">\n        </lj-flatbutton>\n    </p>\n  </div>\n\n  </div><!-- /body -->\n\n</div>\n';
LJ.injectStyle('/* >>> file start: stc/widgets/flatquestion.css */\n.flatwidget--default-theme .flatquestion{color:#242F33}.flatquestion-head{position:relative;margin:0 0 .8125rem;padding:0}.flatquestion-title{margin:0;padding:0;font-style:normal;font-weight:400;font-size:20px;font-size:1.25rem;text-transform:uppercase}.flatwidget--default-theme .flatquestion-title,.flatwidget--default-theme .flatquestion-title A:link,.flatwidget--default-theme .flatquestion-title A:visited{color:#829399}.flatwidget--default-theme .flatquestion-title A:active,.flatwidget--default-theme .flatquestion-title A:hover{color:#00A3D9}.flatquestion-body{position:relative;margin:0 0 1em;padding:0 0 1em;border-bottom:1px solid #DAE3E6}.flatquestion-nav{position:absolute;top:2px;right:2px;margin:0;color:#7A9199}.flatquestion-nav-next,.flatquestion-nav-prev{display:inline-block;width:16px;height:16px;cursor:pointer}.flatquestion-nav-next .svgicon,.flatquestion-nav-prev .svgicon{width:16px;height:16px}.flatquestion-nav-disabled{filter:alpha(opacity=50);opacity:.5;cursor:default;pointer-events:none}.flatquestion-items{margin:0;padding:0;list-style:none}.flatquestion-item{margin:0;padding:0}.flatquestion-item-meta{margin:0}.flatquestion-item-date{display:block;margin:0}.flatwidget--default-theme .flatquestion-item-date{color:#829399}.flatquestion-item-user{margin:0}.flatquestion-item-question{position:relative;margin:20px 0 1em;padding:1em;border-radius:.5em;background:#DAE3E6}.flatquestion-item-question:after{content:\" \";overflow:hidden;position:absolute;top:-15px;left:20px;width:34px;height:16px;margin:0;padding:0;background-image:url(\'data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20id%3D%222-Layer_1%22%20height%3D%2216%22%20viewBox%3D%220%200%2033.999%2015.999%22%20width%3D%2234%22%20version%3D%221.1%22%20y%3D%220px%22%20x%3D%220px%22%3E%3Cpath%20d%3D%22m12%200c-0.45-0.096%207.339%2014.482-12%2014.975v1.023h33.999v-1.027c-14.672-0.582-16.643-13.83-21.999-14.971z%22%20fill%3D%22%23DAE3E6%22%2F%3E%3C%2Fsvg%3E\');background-repeat:no-repeat;background-position:0 0;font:0/0 a}.flatquestion-item-subject{margin:0 0 .3rem;padding:0;line-height:1.2;font-size:1.125rem;font-weight:600;font-family:ProximaNova,Tahoma,Arial,sans-serif}.flatquestion-item-subject A{display:inline-block}.flatwidget--default-theme .flatquestion-item-subject A:link,.flatwidget--default-theme .flatquestion-item-subject A:visited{color:#242F33}.flatwidget--default-theme .flatquestion-item-controls A:link,.flatwidget--default-theme .flatquestion-item-controls A:visited,.flatwidget--default-theme .flatquestion-item-subject A:active,.flatwidget--default-theme .flatquestion-item-subject A:hover{color:#00A3D9}.flatquestion-item-controls,.flatquestion-item-text{margin:0}.flatquestion-item-controls:after{content:\"\";display:table;border-collapse:collapse;clear:both}.flatwidget--default-theme .flatquestion-item-controls A:active,.flatwidget--default-theme .flatquestion-item-controls A:hover{color:#0086b3}.flatwidget--default-theme .flatquestion-item-controls .b-flatbutton:active,.flatwidget--default-theme .flatquestion-item-controls .b-flatbutton:hover,.flatwidget--default-theme .flatquestion-item-controls .b-flatbutton:link,.flatwidget--default-theme .flatquestion-item-controls .b-flatbutton:visited{color:#FFF}.flatquestion-item-reply{float:right;margin:0;text-transform:uppercase}.flatquestion-item-answers{float:left;margin:0}.flatquestion-item-answers-icon{display:inline-block;vertical-align:-3px;color:#7A9199}.flatquestion-item-answers-icon .svgicon{width:17px;height:16px}.flatquestion-dummy{display:none;margin:0}.flatquestion-dummy-item{background:#F8F9FB;-webkit-animation:loading-mysocial 1s infinite;animation:loading-mysocial 1s infinite}.flatquestion-dummy-user{width:40%;height:25px;margin:0 0 1em;padding:0}.flatquestion-dummy-content{height:90px;margin:0 0 1em;padding:0}.flatquestion-dummy-comments{width:30%;height:25px;margin:0 0 0 auto;padding:0}@-webkit-keyframes loading-mysocial{0%{opacity:.8}50%{opacity:.9}100%{opacity:1}}@keyframes loading-mysocial{0%{opacity:.8}50%{opacity:.9}100%{opacity:1}}.flatquestion-erroneous{display:none;margin:0;padding:0;font-size:1.2307em;color:#D92B2B}.flatquestion-emptiness{display:none;margin:0;padding:2em 0 0;font-size:1.2307em;color:#829399}.flatquestion-footer{margin:0;font-size:.875rem}.flatquestion-footer-items{margin:0;padding:0;list-style:none;text-align:right}.flatquestion-footer-item{display:inline;margin:0}.flatquestion-footer-item:before{content:\"|\";margin:0}.flatwidget--default-theme .flatquestion-footer-item:before{color:#242F33}.flatquestion-footer-item:first-child:before{content:none;display:none}.flatwidget--default-theme .flatquestion-footer-item A:link,.flatwidget--default-theme .flatquestion-footer-item A:visited{color:#00A3D9}.flatwidget--default-theme .flatquestion-footer-item A:active,.flatwidget--default-theme .flatquestion-footer-item A:hover{color:#0086b3}.flatquestion-empty .flatquestion-emptiness{display:block}.flatquestion-empty .flatquestion-dummy,.flatquestion-empty .flatquestion-erroneous,.flatquestion-empty .flatquestion-items{display:none}.flatquestion-loading .flatquestion-nav{display:block}.flatquestion-loading .flatquestion-items{display:block;pointer-events:none;filter:alpha(opacity=30);opacity:.3}.flatquestion-loading .flatquestion-dummy,.flatquestion-loading .flatquestion-emptiness,.flatquestion-loading .flatquestion-erroneous{display:none}.flatquestion-preloading .flatquestion-dummy{display:block}.flatquestion-preloading .flatquestion-emptiness,.flatquestion-preloading .flatquestion-erroneous,.flatquestion-preloading .flatquestion-items,.flatquestion-preloading .flatquestion-nav{display:none}.flatquestion-error .flatquestion-erroneous{display:block}.flatquestion-error .flatquestion-dummy,.flatquestion-error .flatquestion-emptiness,.flatquestion-error .flatquestion-items,.flatquestion-error .flatquestion-nav{display:none}.flatquestion-popup{display:none;position:fixed;top:50%;left:50%;z-index:5001;width:510px;margin:-280px 0 0 -255px;padding:0;background:#FFF;color:#242F33}.flatquestion-popup-header{margin:0;padding:15px 25px;background:#09C;color:#FFF}.b-text .flatquestion-popup-head,.flatquestion-popup-head{margin:0;padding:0;text-transform:uppercase;font:300 21px/1 ProximaNova,Helvetica,Arial,sans-serif;font:300 1.3125rem/1 ProximaNova,Helvetica,Arial,sans-serif;color:#FFF}.flatquestion-popup-header .i-iconus{position:absolute;width:30px;height:30px;right:12px;top:12px;background-image:url(/img/schemius/s-icons.svg?v=40651);background-position:-62px 6px;background-repeat:no-repeat;cursor:pointer}.flatquestion-popup-body{overflow:auto;position:relative;max-height:400px;padding:25px;font-size:.8125rem}.flatquestion-popup-input,.flatquestion-popup-textarea{width:100%;padding:13px;box-sizing:border-box;background:#F7F9FA;color:#242F33}.flatquestion-popup-field{margin:0 0 1em}.flatquestion-popup-input{margin:0;border:1px solid #CED6D9;font:400 18px/1 ProximaNova,Helvetica,Arial,sans-serif;font:400 1.125rem/1 ProximaNova,Helvetica,Arial,sans-serif}.flatquestion-popup-input:focus{border-color:#00A3D9}.flatquestion-popup-textarea{height:6em;margin:0;border:1px solid #CED6D9;resize:vertical;font:400 18px/1 ProximaNova,Helvetica,Arial,sans-serif;font:400 1.125rem/1 ProximaNova,Helvetica,Arial,sans-serif}.flatquestion-popup-textarea:focus{border-color:#00A3D9}.flatquestion-popup-checkbox,.flatquestion-popup-label,.flatquestion-popup-select{margin:0}.flatquestion-popup-friendsgroups{list-style:none;margin:.2em 0 0 1.4em;padding:0}.flatquestion-popup-friendsgroups-item{margin:0;padding:0}.flatquestion-popup-submitbox{margin:0;text-align:right}.flatquestion-popup-submitbox-inner{position:relative;display:inline-block;padding:0 0 0 30px}.flatquestion-popup-submitbox-inner.svgpreloader:after{position:absolute;top:50%;left:0;display:none;margin-top:-8px}.flatquestion-popup-success{display:none;margin:0}.flatquestion-popup-success-text{margin:0;text-align:center;font-size:1.2em}.flatquestion-popup-success-button{margin:1em 0 0;text-align:center}.b-lenta .flatquestion-popup-success A:active,.b-lenta .flatquestion-popup-success A:hover,.b-lenta .flatquestion-popup-success A:link,.b-lenta .flatquestion-popup-success A:visited,.b-mainpage-state-discovery .flatquestion-popup-success A:active,.b-mainpage-state-discovery .flatquestion-popup-success A:hover,.b-mainpage-state-discovery .flatquestion-popup-success A:link,.b-mainpage-state-discovery .flatquestion-popup-success A:visited{color:#FFF}.flatquestion-popup-block{display:none;margin:0}.flatquestion-popup-block-text{margin:0;text-align:center;font-size:1.2em;color:#C00}.flatquestion-popup-sending .flatquestion-popup-checkbox,.flatquestion-popup-sending .flatquestion-popup-friendsgroups-checkbox,.flatquestion-popup-sending .flatquestion-popup-input,.flatquestion-popup-sending .flatquestion-popup-select,.flatquestion-popup-sending .flatquestion-popup-textarea{opacity:.5;pointer-events:none}.flatquestion-popup-sending .flatquestion-popup-submitbox-inner.svgpreloader:after,.flatquestion-popup-successfully .flatquestion-popup-success{display:block}.flatquestion-popup-successfully .flatquestion-popup-error,.flatquestion-popup-successfully .flatquestion-popup-form{display:none}.flatquestion-popup-blocked{margin-top:-100px}.flatquestion-popup-blocked .flatquestion-popup-block{display:block}.flatquestion-popup-blocked .flatquestion-popup-error,.flatquestion-popup-blocked .flatquestion-popup-form{display:none}.flatquestion-reply.flatquestion-reply-active,.p-flatquestion-suggest .flatquestion-suggest{display:block}.p-flatquestion-suggest .b-fader{display:block!important}@media screen and (max-height:700px){.flatquestion-popup{top:50px;margin-top:0}.flatquestion-popup-blocked{top:150px}}@media screen and (max-height:500px){.flatquestion-popup{top:30px}.flatquestion-popup-blocked{top:100px}}@media screen and (max-height:300px){.flatquestion-popup-body{max-height:200px}}.flatquestion-nojs{width:510px;margin:2em auto;border:1px solid #DAE3E6}.flatquestion-nojs .flatquestion-popup-body{max-height:none;margin:0;padding:25px;font-size:1em}.flatquestion-nojs .flatquestion-popup-success{display:block}.flatquestion-nojs-friendsgroups{margin:.3em 0 0 1.2em}#js .flatquestion-nojs-friendsgroups{display:none}.flatquestion-nojs-field{margin:0}\n/* <<< file end: stc/widgets/flatquestion.css */\n\n/*# map link was there [flatquestion.css.map] */\n');
//= require_ml widget.flatquestion.popup.reply.success
//= require_ml widget.flatquestion.popup.reply.success.button
//= require_ml widget.flatquestion.popup.reply.security.public
//= require_ml widget.flatquestion.popup.reply.security.friends
//= require_ml widget.flatquestion.popup.reply.security.private
//= require_ml widget.flatquestion.popup.reply.security.custom
//= require_ml widget.flatquestion.popup.reply.head
//= require_ml widget.flatquestion.popup.reply.answer
//= require_ml widget.flatquestion.popup.reply.post
//= require_ml widget.flatquestion.popup.reply.submit
//= require_ml widget.flatquestion.popup.reply.submit.post
//= require_ml widget.flatquestion.popup.reply.submit.name
//= require_ml widget.flatquestion.popup.reply.submit.postname
//= require_ml widget.flatquestion.popup.reply.name
//= require_ml widget.flatquestion.reply
!function(t){return t}(),function(){"use strict";angular.module("LJ.Widget.AnswerForTheQuestionOfTheDay",["LJ.Templates","LJ.Directives","LJ.Api","LJ.Privacy"]).factory("Reply",["Api",function(t){var e={};return e.send=function(e){return t.call("writers_block.make_answer",e)},e.validate=function(t){return t.text&&0!==t.text.length?"custom"!==t.privacy||0!==t.groupids.length:!1},e}]).directive("ljQuestionReply",["Reply",function(){return{restrict:"A",scope:{questionId:"=ljQuestionReply"},templateUrl:"answer.ng.tmpl",controllerAs:"directive",controller:["$scope","$element","$document","Reply",function(t,e,n,i){function s(e){27===e.which&&t.$apply(o.hide)}var o=this;o.isIdentity=LJ.get("remote.is_identity");var c={id:null,text:null,is_without_post:!1,privacy:"public",groupids:[],is_visible:!!o.isIdentity};o.siteroot=LJ.get("siteroot"),o.post=angular.copy(c),o.groups=[],o.state={sending:!1,success:!1,active:!1},o.send=function(){o.state.sending=!0,i.send(o.post).then(function(t){o.post.url=t.url,o.state.sending=!1,o.state.success=!0})},o.isDisabled=function(){return!i.validate(o.post)},o.show=function(){o.state.active=!0,o.post=angular.copy(c)},o.hide=function(){o.state.active=!1},t.$watch(function(){return o.post.privacy},function(t){o.showQestionAtPage="public"===t}),t.$watch(function(){return o.state.active},function(t){t||(o.state.sending=!1,o.state.success=!1),angular.element("body").toggleClass("p-fader",t)}),t.$watch("questionId",function(t){c.id=t}),n.on("keydown",s),t.$on("$destroy",function(){n.off("keydown",s)})}]}}])}();
/* <<< file end: js/widgets/angular/answerForTheQuestionOfTheDay.js */

//# map link was there [answerForTheQuestionOfTheDay.js.map]
/* >>> file start: js/widgets/angular/questionOfTheDay.js */
//= require js/core/angular/api.js
//= require js/core/angular/ljUser.js
//= require js/core/angular/users.js
//= require js/widgets/angular/answerForTheQuestionOfTheDay.js
Site.page.template['angular/widgets/flatquestion/flatquestion.ng.tmpl'] = '<!-- Question Of The Day (flat version, LJSUP-19210) -->\n\n<div\n    class=\"\n        flatquestion\n        l-flatslide-aside-block\n        js-elem-bordercolor\n        \"\n    ng-class=\"{\n        \'flatquestion-empty\':      widget.questions.length === 0,\n        \'flatquestion-error\':      widget.state.error,\n        \'flatquestion-loading\':    widget.state.loading,\n        \'flatquestion-preloading\': !widget.state.initialized,\n        \'flatquestion-anon\':       !widget.currentQuestion.author\n    }\"\n    >\n\n\n\n    <!-- head -->\n    <header\n        class=\"\n            flatquestion-head\n            flatwidget__head\"\n        >\n        <h3\n            class=\"\n                flatquestion-title\n                js-elem-color--a\"\n            >\n            <a\n                ng-href=\"{{widget.writersBlockCommunity}}\"\n                target=\"_blank\"\n                lj-ml=\"widget.flatquestion.head\"\n                ></a>\n        </h3>\n    </header>\n\n    <!-- body -->\n    <div\n        class=\"\n            flatquestion-body\n            flatwidget__body\n            js-elem-bordercolor\"\n        >\n\n        <!-- navigation -->\n        <span\n            class=\"\n                flatquestion-nav\n                js-elem-color--svgicon\n                \">\n            <span\n                class=\"flatquestion-nav-prev\"\n                lj-ml=\"widget.flatquestion.nav.prev\"\n                lj-ml-attr=\"title\"\n                ng-click=\"widget.prev()\"\n                ng-class=\"{\n                    \'flatquestion-nav-disabled\': widget.currentQuestionIndex === widget.questions.length - 1\n                }\"\n                >\n                <span lj-svg-icon=\"flaticon--arrow-left\"></span>\n            </span>\n            <span\n                class=\"flatquestion-nav-next flatquestion-nav-disabled\"\n                ng-class=\"{\n                    \'flatquestion-nav-disabled\': widget.currentQuestionIndex === 0\n                }\"\n                lj-ml=\"widget.flatquestion.nav.next\"\n                lj-ml-attr=\"title\"\n                ng-click=\"widget.next()\"\n                >\n                <span lj-svg-icon=\"flaticon--arrow-right\"></span>\n            </span>\n        </span>\n\n        <!-- items -->\n        <ul\n            class=\"flatquestion-items\"\n            ng-if=\"widget.currentQuestion\"\n            >\n\n            <!-- item -->\n            <li class=\"flatquestion-item\">\n\n                <!-- meta -->\n                <div class=\"flatquestion-item-meta\">\n                    <time\n                        class=\"flatquestion-item-date\"\n                        ng-bind=\"widget.currentQuestion.datetime\"\n                        ></time>\n                    <span\n                        class=\"\n                            flatquestion-item-user\n                             js-link-color--a\n                             \"\n                        lj-user-dynamic=\"widget.currentQuestion.author.username\"\n                        ng-if=\"widget.currentQuestion.author\"\n                        ></span>\n                </div>\n\n                <!-- question -->\n                <div class=\"flatquestion-item-question\">\n                    <h4\n                        class=\"\n                            flatquestion-item-subject\n                            js-link-color--a\"\n                        ng-if=\"widget.currentQuestion.subject\"\n                        >\n                        <a\n                            ng-href=\"{{widget.siteroot}}/writersblock/question?qid={{widget.currentQuestion.id}}\"\n                            target=\"_blank\"\n                            lj-html-live=\"widget.currentQuestion.subject\"\n                            ></a>\n                    </h4>\n                    <div\n                        class=\"flatquestion-item-text\"\n                        lj-html-live=\"widget.currentQuestion.text\"\n                        ></div>\n                </div>\n\n                <!-- controls -->\n                <div class=\"flatquestion-item-controls\">\n                    <a\n                        ng-href=\"{{widget.siteroot}}/writersblock/question?qid={{widget.currentQuestion.id}}\"\n                        target=\"_blank\"\n                        class=\"\n                            flatquestion-item-answers\n                            js-link-color\n                            \"\n                        >\n                        <span\n                            class=\"\n                                flatquestion-item-answers-icon\n                                js-elem-color--svgicon\n                                \"\n                            lj-svg-icon=\"flaticon--comments-bold\"\n                            ></span>\n                        <span\n                            class=\"flatquestion-item-answers-inner\"\n                            ng-bind=\"widget.currentQuestion.comments_cnt\"\n                            ></span>\n                    </a>\n                    <span\n                        lj-question-reply=\"widget.currentQuestion.id\"\n                        class=\"js-link-color--a-novisited\"\n                        ></span>\n                </div>\n            </li><!-- /item -->\n\n        </ul><!-- /items -->\n\n        <!-- dummy loader -->\n        <div class=\"flatquestion-dummy\">\n            <div class=\"flatquestion-dummy-item flatquestion-dummy-user\"></div>\n            <div class=\"flatquestion-dummy-item flatquestion-dummy-content\"></div>\n            <div class=\"flatquestion-dummy-item flatquestion-dummy-comments\"></div>\n        </div>\n\n        <!-- erroneous message -->\n        <p\n            class=\"flatquestion-erroneous\"\n            lj-ml=\"widget.flatquestion.error\"\n            ></p>\n\n        <!-- emptiness message -->\n        <p\n            class=\"flatquestion-emptiness\"\n            lj-ml=\"widget.flatquestion.empty\"\n            ></p>\n\n    </div><!-- /body -->\n\n\n\n    <!-- footer -->\n    <footer\n        class=\"\n            flatquestion-footer\n            flatwidget__footer\n            js-link-color--a-novisited\"\n        >\n\n        <!-- items -->\n        <ul class=\"flatquestion-footer-items\">\n            <li\n                class=\"\n                    flatquestion-footer-item\n                    js-sidebar-color--before\n                    \">\n                <a\n                    ng-href=\"{{widget.siteroot}}/writersblock/suggest\"\n                    ng-click=\"widget.showSuggestion($event)\"\n                    lj-ml=\"widget.flatquestion.suggest\"\n                    ></a>\n            </li>\n            <li\n                class=\"\n                    flatquestion-footer-item\n                    js-sidebar-color--before\n                    \">\n                <a\n                    ng-href=\"{{widget.siteroot}}/friends/add.bml?user=writersblock\"\n                    target=\"_blank\"\n                    lj-ml=\"widget.flatquestion.subscribe\"\n                    ></a>\n            </li>\n            <li\n                class=\"\n                    flatquestion-footer-item\n                    js-sidebar-color--before\n                    \">\n                <a\n                    ng-href=\"{{widget.writersBlockCommunity}}\"\n                    target=\"_blank\"\n                    lj-ml=\"widget.flatquestion.all\"\n                    ></a>\n            </li>\n        </ul><!-- /items -->\n\n    </footer><!-- /footer -->\n\n\n\n</div><!-- /flatquestion -->\n\n\n<!-- flatquestion suggest popup (add .p-flatquestion-suggest at BODY to show) -->\n<div\n    class=\"\n        flatquestion-popup\n        flatquestion-suggest\n        \"\n    ng-class=\"{\n      \'flatquestion-popup-sending\': suggest.state.sending,\n      \'flatquestion-popup-successfully\': suggest.state.success,\n      \'flatquestion-popup-blocked\': suggest.state.blocked\n    }\"\n\n    ng-if=\"widget.state.suggest\"\n    ng-controller=\"QuestionSuggestCtrl as suggest\"\n    >\n\n    <!-- header -->\n    <header class=\"flatquestion-popup-header\">\n\n        <!-- head -->\n        <h3\n            class=\"flatquestion-popup-head\"\n            lj-ml=\"widget.flatquestion.popup.suggest.head\"\n            ></h3>\n\n        <!-- close button -->\n        <span\n            tabindex=\"50\"\n            class=\"i-iconus flatquestion-popup-close\"\n            ng-click=\"widget.state.suggest = false\"\n            ></span>\n\n    </header>\n\n    <!-- body -->\n    <div class=\"flatquestion-popup-body\">\n\n        <form class=\"flatquestion-popup-form\">\n\n            <!-- subject -->\n            <div class=\"flatquestion-popup-field\">\n                <input\n                    type=\"text\"\n                    name=\"flatquestion_suggest_subject\"\n                    id=\"flatquestion_suggest_subject\"\n                    size=\"30\"\n                    tabindex=\"50\"\n                    value=\"\"\n                    class=\"flatquestion-popup-input\"\n                    lj-ml=\"widget.flatquestion.popup.suggest.subject\"\n                    lj-ml-attr=\"placeholder\"\n                    ng-model=\"suggest.question.subject\"\n                    >\n            </div>\n\n            <!-- suggest -->\n            <div class=\"flatquestion-popup-field\">\n                <textarea\n                    name=\"flatquestion_suggest_question\"\n                    id=\"flatquestion_suggest_question\"\n                    cols=\"25\"\n                    rows=\"5\"\n                    tabindex=\"50\"\n                    class=\"flatquestion-popup-textarea\"\n                    lj-ml=\"widget.flatquestion.popup.suggest.question\"\n                    lj-ml-attr=\"placeholder\"\n                    ng-model=\"suggest.question.body\"\n                    ></textarea>\n            </div>\n\n            <!-- anonymity -->\n            <div class=\"flatquestion-popup-field\">\n                <input\n                    type=\"checkbox\"\n                    name=\"flatquestion_suggest_name\"\n                    id=\"flatquestion_suggest_name\"\n                    tabindex=\"50\"\n                    class=\"flatquestion-popup-checkbox\"\n                    ng-model=\"suggest.question.show_name\"\n                    >\n                <label\n                    for=\"flatquestion_suggest_name\"\n                    class=\"flatquestion-popup-label\"\n                    lj-ml=\"widget.flatquestion.popup.suggest.name\"\n                    ></label>\n            </div>\n\n            <!-- submit -->\n            <div class=\"flatquestion-popup-submitbox\">\n                <div\n                    class=\"\n                        flatquestion-popup-submitbox-inner\n                        svgpreloader\n                        svgpreloader-pseudo\n                        svgpreloader-16\n                        \">\n                    <!--\n                    <button\n                        name=\"submit\"\n                        tabindex=\"50\"\n                        class=\"b-flatbutton\"\n                        ng-disabled=\"suggest.isDisabled()\"\n                        ng-click=\"suggest.send()\"\n                        lj-ml=\"widget.flatquestion.popup.suggest.submit\"\n                        ></button> -->\n                    <lj-flatbutton lj-flatbutton=\"[\'button\', \'widget.flatquestion.popup.suggest.submit\', \'b-flatbutton\', \'name\', \'submit\', \'tabindex\', \'50\', \'ng-disabled\', \'suggest.isDisabled()\', \'ng-click\', \'suggest.send()\']\">\n                        </lj-flatbutton>\n                </div>\n            </div>\n\n        </form>\n\n        <!-- success message -->\n        <div class=\"flatquestion-popup-success\">\n            <p\n                class=\"flatquestion-popup-success-text\"\n                lj-ml=\"widget.flatquestion.popup.suggest.success\"\n                ></p>\n            <p class=\"flatquestion-popup-success-button\">\n                <!--\n                <a\n                    class=\"b-flatbutton b-flatbutton-simple\"\n                    ng-click=\"suggest.reset()\"\n                    lj-ml=\"widget.flatquestion.popup.suggest.success.button\"\n                    ></a> -->\n                <lj-flatbutton lj-flatbutton=\"[\'a\', \'widget.flatquestion.popup.suggest.success.button\', \'b-flatbutton b-flatbutton-simple\', \'ng-click\', \'suggest.reset()\']\">\n                    </lj-flatbutton>\n            </p>\n        </div>\n\n        <!-- block message -->\n        <div class=\"flatquestion-popup-block\">\n            <p\n                class=\"flatquestion-popup-block-text\"\n                lj-html-live=\"suggest.blockedReason\"\n                ></p>\n        </div>\n\n    </div><!-- /body -->\n\n</div>\n';
// error: widgets/flatquestion.css is already included
//= require_ml widget.flatquestion.all
//= require_ml widget.flatquestion.answers
//= require_ml widget.flatquestion.head
//= require_ml widget.flatquestion.nav.next
//= require_ml widget.flatquestion.nav.prev
//= require_ml widget.flatquestion.subscribe
//= require_ml widget.flatquestion.suggest
//= require_ml widget.flatquestion.popup.suggest.head
//= require_ml widget.flatquestion.popup.suggest.subject
//= require_ml widget.flatquestion.popup.suggest.question
//= require_ml widget.flatquestion.popup.suggest.name
//= require_ml widget.flatquestion.popup.suggest.success
//= require_ml widget.flatquestion.popup.suggest.success.button
//= require_ml widget.flatquestion.popup.suggest.submit
//= require_ml widget.flatquestion.popup.suggest.submit.name
!function(t){return t}(),function(){"use strict";angular.module("LJ.Widget.QuestionOfTheDay",["LJ.Templates","LJ.Directives","LJ.Api","LJ.User","LJ.Widget.AnswerForTheQuestionOfTheDay"]).factory("Questions",["$q","Api","Users",function(t,e,n){function s(){return u}function i(){var s;return r.allFetched?(s=t.defer(),s.resolve(u),s.promise):e.call("writers_block.get_list",{offset:l,limit:a,user_type:h,country:g}).then(function(t){r.isEndOfList=!t.questions.length,u=u.concat(t.questions),n.Cache.add(u.map(LJ.Function.get("author"))),r.allFetched=u.length<a,l+=u.length})}function o(){return r.isEndOfList}var u=[],r={initialized:!1,allFetched:!1,isEndOfList:!1},c={fetch:i,get:s,state:r,isEndOfList:o},l=0,a=5,g=LJ.get("country"),h=LJ.get("remote")?LJ.get("remote.account_type"):"logged_out";return c}]).factory("Suggest",["Api",function(t){var e={};return e.send=function(e){return t.call("writers_block.suggest",e)},e.check=function(){return t.call("writers_block.check_user")},e.validate=function(t){return t.subject&&0!==t.subject.length?!(!t.body||0===t.body.length):!1},e}]).directive("ljWidgetQuestionOfTheDay",["Questions",function(t){return{restrict:"A",templateUrl:"flatquestion.ng.tmpl",controllerAs:"widget",controller:["$scope",function(e){var n=this,s=angular.element("body");this.siteroot=LJ.get("siteroot"),this.writersBlockCommunity=LJ.get("writers_block_community"),this.state={suggest:!1,reply:!1,error:!1,loading:!1,initialized:!1},this.questions=[],this.currentQuestionIndex=0,this.currentQuestion=null,this.next=function(){this.currentQuestionIndex-=1},this.prev=function(){this.currentQuestionIndex+=1},this.showSuggestion=function(t){t.metaKey||t.ctrlKey||!LJ.get("remote")||(t.preventDefault(),n.state.suggest=!0)},e.$watch(function(){return n.currentQuestionIndex},function(e){0!==n.questions.length&&(0>e&&(e=0),e===n.questions.length&&(e-=1),e!==n.questions.length-1||t.isEndOfList()||(n.state.loading=!0,t.fetch().then(function(){n.state.loading=!1})),n.currentQuestion=n.questions[e],n.currentQuestionIndex=e)}),s.on("keydown",function(t){27===t.which&&(n.state.suggest=!1,n.state.reply=!1)}),e.$watchCollection(t.get,function(t){n.questions=t,n.currentQuestion=t[n.currentQuestionIndex]}),e.$watch(function(){return n.state.suggest+n.state.reply},function(){s.toggleClass("p-flatquestion-reply",n.state.reply),s.toggleClass("p-flatquestion-suggest",n.state.suggest)}),t.fetch().then(function(){n.state.initialized=!0})}]}}]).controller("QuestionPageCtrl",[function(){}]).controller("QuestionSuggestCtrl",["Suggest",function(t){var e=this,n={subject:null,body:null,show_name:!1};this.state={sending:!1,success:!1,blocked:!1},this.send=function(){e.state.sending=!0,t.send(e.question).then(function(){e.state.sending=!1,e.state.success=!0})},this.isDisabled=function(){return!t.validate(e.question)},this.check=function(){e.state.sending=!0,t.check().then(function(t){e.state.blocked="OK"!==t.status,e.blockedReason=t.reason,e.state.sending=!1})},this.reset=function(){this.state.success=!1,this.question=angular.extend({},n),this.check()},this.reset(),this.check()}])}();
/* <<< file end: js/widgets/angular/questionOfTheDay.js */

//# map link was there [questionOfTheDay.js.map]
/* >>> file start: js/discovery/menu.js */
!function(e){return e}(),function(){"use strict";angular.module("Discovery.Menu",[]).directive("ljScrollMenu",["$document","$timeout",function(e,n){return{scope:{positions:"=ljScrollMenu",initialized:"=ljScrollMenuInitialized",isViewable:"=ljScrollMenuViewable",isDisabled:"=ljScrollMenuDisabled"},link:function(i,o,t){function l(){var e=o.find(".l-flatslide-menu-subitems").eq(0);e.children().remove(),h=o.find("ul > li.l-flatslide-menu-movable"),z=o.find("ul > li."+$),c=h.clone(!0).appendTo(e)}function s(){return"fixed"===v.css("position")}function a(e){var n=angular.element("ul.l-flatslide-menu-items-expandable"),o=e.hasClass("l-flatslide-menu-opened");e.parent().hasClass("l-flatslide-menu-subitems")||(o?i.opened=i.opened?i.opened+1:1:i.opened--,n.css("overflow",i.opened?"auto":"visible"),i.opened?(y.hide(),h.show(),c.hide()):f())}function u(){if(!i.isDisabled&&i.positions){var n,o,t,l=m.scrollTop(),a=l+m.height(),u=e.height(),r=g.offset()?g.offset().top:0,d=p.offset()?p.offset().top:u;0>l&&(l=0),a>u&&(a=u),n=Math.max(r-l,s()?b:0),o=Math.max(w,a-d),t=Math.max(m.height()-n-o),n===i.positions.top&&o===i.positions.bottom&&t===i.positions.height||(i.positions.top=n,i.positions.bottom=o,i.positions.height=t,i.$apply())}}function r(){return LJ.Support.isMobile()?(i.isViewable=!1,void f()):(J>m.height()-b-w?(i.isViewable=!1,f()):i.isViewable=!0,void n(u))}function d(e){e.originalEvent.data.slot&&u()}function f(){if(L&&!i.opened&&i.positions){var e=Math.floor((m.height()-i.positions.top-i.positions.bottom-j)/j),n=(h.length+z.length||M.length)-1-e;if(0>=n)return h.show(),void y.hide();if(n+=1,y.show(),n>=h.length)return h.hide(),void c.show();h.show().filter(":gt("+(h.length-n-1)+")").hide(),c.hide().filter(":gt("+(h.length-n-1)+")").show()}}var h,c,m=angular.element(window),p=angular.element(".s-footer"),g=angular.element(".l-flatslide-body"),v=angular.element(".s-header"),b=v.height(),w=LJ.get("ljlive.is_enabled")?50:0,M=o.find("ul > li"),j=M.eq(0).outerHeight(),J=M.length*j,L="undefined"!=typeof t.ljScrollMenuMore,y=angular.element(".l-flatslide-menu-item-more"),S=angular.element("body"),$="l-flatslide-menu-unmovable",z=void 0;LJ.Event.on("movableDataRefreshed",l),L&&l(),i.$watch("isDisabled",function(e,i){e===i||e||n(u)}),L&&(i.$watch("positions",f,!0),LJ.Event.on("menuItemToggle",a)),LJ.Support.isMobile()||i.$watch(function(){return angular.element(document).height()},LJ.Function.debounce(u,100)),angular.element("iframe, img, object, embed").one("load",r),S.on("ljsale-load",d),m.on("scroll orientationchange",function(){n(u,150)}),m.on("resize",r),LJ.Event.on("discovery:menu:resize",r),i.$on("$destroy",function(){m.off("scroll orientationchange",u),m.off("resize",r),LJ.Event.off("discovery:menu:resize",r),LJ.Event.off("menuItemToggle",a),S.off("ljsale-load",d)}),LJ.Event.on("ljlive:close",function(){w=0}),n(function(){r(),u(),i.initialized=!0})}}}])}();
/* <<< file end: js/discovery/menu.js */

//# map link was there [menu.js.map]
/* >>> file start: js/lib/jquery.selectric.min.js */
!function(e){"use strict";var t="selectric",s="Input Items Open Disabled TempShow HideSelect Wrapper Hover Responsive Above Scroll",o=".sl",i={onChange:function(t){e(t).change()},maxHeight:300,keySearchTimeout:500,arrowButtonMarkup:'<b class="button">&#x25be;</b>',disableOnMobile:!0,openOnHover:!1,expandToItemText:!1,responsive:!1,preventWindowScroll:!0,inheritOriginalWidth:!1,customClass:{prefix:t,postfixes:s,camelCase:!0,overwrite:!0},optionsItemBuilder:"{text}"},n={add:function(e,t,s){this[e]||(this[e]={}),this[e][t]=s},remove:function(e,t){delete this[e][t]}},a={replaceDiacritics:function(e){for(var t="40-46 50-53 54-57 62-70 71-74 61 47 77".replace(/\d+/g,"\\3$&").split(" "),s=t.length;s--;)e=e.toLowerCase().replace(RegExp("["+t[s]+"]","g"),"aeiouncy".charAt(s));return e},format:function(e){var t=arguments;return(""+e).replace(/{(\d+|(\w+))}/g,function(e,s,o){return o&&t[1]?t[1][o]:t[s]})},nextEnabledItem:function(e,t){for(;e[t=(t+1)%e.length].disabled;);return t},previousEnabledItem:function(e,t){for(;e[t=(t>0?t:e.length)-1].disabled;);return t},toDash:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},triggerCallback:function(s,o){var i=o.element,l=o.options["on"+s];e.isFunction(l)&&l.call(i,i,o),n[s]&&e.each(n[s],function(){this.call(i,i,o)}),e(i).trigger(t+"-"+a.toDash(s),o)}},l=e(document),r=e(window),c=function(n,c){function d(t){if($.options=e.extend(!0,{},i,$.options,t),$.classes={},$.element=n,a.triggerCallback("BeforeInit",$),$.options.disableOnMobile&&L)return void($.disableOnMobile=!0);C(!0);var o=$.options.customClass,l=o.postfixes.split(" "),r=R.width();e.each(s.split(" "),function(e,t){var s=o.prefix+l[e];$.classes[t.toLowerCase()]=o.camelCase?s:a.toDash(s)}),x=e("<input/>",{"class":$.classes.input,readonly:L}),k=e("<div/>",{"class":$.classes.items,tabindex:-1}),T=e("<div/>",{"class":$.classes.scroll}),D=e("<div/>",{"class":o.prefix,html:$.options.arrowButtonMarkup}),y=e('<p class="label"/>'),I=R.wrap("<div>").parent().append(D.prepend(y),k,x),A={open:v,close:g,destroy:C,refresh:u,init:d},R.on(A).wrap('<div class="'+$.classes.hideselect+'">'),e.extend($,A),$.options.inheritOriginalWidth&&r>0&&I.width(r),p()}function p(){$.items=[];var t=R.children(),s="<ul>",i=t.filter(":selected").index();H=S=~i?i:0,(E=t.length)&&(t.each(function(t){var o=e(this),i=o.html(),n=o.prop("disabled"),l=$.options.optionsItemBuilder;$.items[t]={value:o.val(),text:i,slug:a.replaceDiacritics(i),disabled:n},s+=a.format('<li class="{1}">{2}</li>',e.trim([t==H?"selected":"",t==E-1?"last":"",n?"disabled":""].join(" ")),e.isFunction(l)?l($.items[t],o,t):a.format(l,$.items[t]))}),k.append(T.html(s+"</ul>")),y.html($.items[H].text)),D.add(R).add(I).add(x).off(o),I.prop("class",[$.classes.wrapper,$.options.customClass.overwrite?R.prop("class").replace(/\S+/g,$.options.customClass.prefix+"-$&"):R.prop("class"),$.options.responsive?$.classes.responsive:""].join(" ")),R.prop("disabled")?(I.addClass($.classes.disabled),x.prop("disabled",!0)):(j=!0,I.removeClass($.classes.disabled).on("mouseenter"+o+" mouseleave"+o,function(t){e(this).toggleClass($.classes.hover),$.options.openOnHover&&(clearTimeout($.closeTimer),"mouseleave"==t.type?$.closeTimer=setTimeout(g,500):v())}),D.on("click"+o,function(e){Y?g():v(e)}),x.prop({tabindex:q,disabled:!1}).on("keypress"+o,h).on("keydown"+o,function(e){h(e),clearTimeout($.resetStr),$.resetStr=setTimeout(function(){x.val("")},$.options.keySearchTimeout);var t=e.keyCode||e.which;t>36&&41>t&&b(a[(39>t?"previous":"next")+"EnabledItem"]($.items,S))}).on("focusin"+o,function(e){x.one("blur",function(){x.blur()}),Y||v(e)}).on("oninput"in x[0]?"input":"keyup",function(){x.val().length&&e.each($.items,function(e,t){return RegExp("^"+x.val(),"i").test(t.slug)&&!t.disabled?(b(e),!1):void 0})}),R.prop("tabindex",!1),O=e("li",k.removeAttr("style")).click(function(){return b(e(this).index(),!0),!1})),a.triggerCallback("Init",$)}function u(){a.triggerCallback("Refresh",$),p()}function h(e){var t=e.keyCode||e.which;13==t&&e.preventDefault(),/^(9|13|27)$/.test(t)&&(e.stopPropagation(),b(S,!0))}function f(){var e=k.closest(":visible").children(":hidden"),t=$.options.maxHeight;e.addClass($.classes.tempshow);var s=k.outerWidth(),o=D.outerWidth()-(s-k.width());!$.options.expandToItemText||o>s?W=o:(k.css("overflow","scroll"),I.width(9e4),W=k.width(),k.css("overflow",""),I.width("")),k.width(W).height()>t&&k.height(t),e.removeClass($.classes.tempshow)}function v(s){a.triggerCallback("BeforeOpen",$),s&&(s.preventDefault(),s.stopPropagation()),j&&(f(),e("."+$.classes.hideselect,"."+$.classes.open).children()[t]("close"),Y=!0,B=k.outerHeight(),M=k.height(),x.val("").is(":focus")||x.focus(),l.on("click"+o,g).on("scroll"+o,m),m(),$.options.preventWindowScroll&&l.on("mousewheel"+o+" DOMMouseScroll"+o,"."+$.classes.scroll,function(t){var s=t.originalEvent,o=e(this).scrollTop(),i=0;"detail"in s&&(i=-1*s.detail),"wheelDelta"in s&&(i=s.wheelDelta),"wheelDeltaY"in s&&(i=s.wheelDeltaY),"deltaY"in s&&(i=-1*s.deltaY),(o==this.scrollHeight-M&&0>i||0==o&&i>0)&&t.preventDefault()}),I.addClass($.classes.open),w(S),a.triggerCallback("Open",$))}function m(){f(),I.toggleClass($.classes.above,I.offset().top+I.outerHeight()+B>r.scrollTop()+r.height())}function g(){if(a.triggerCallback("BeforeClose",$),H!=S){a.triggerCallback("BeforeChange",$);var e=$.items[S].text;R.prop("selectedIndex",H=S).data("value",e),y.html(e),a.triggerCallback("Change",$)}l.off(o),I.removeClass($.classes.open),Y=!1,a.triggerCallback("Close",$)}function b(e,t){$.items[e].disabled||(O.removeClass("selected").eq(S=e).addClass("selected"),w(e),t&&g())}function w(e){var t=O.eq(e).outerHeight(),s=O[e].offsetTop,o=T.scrollTop(),i=s+2*t;T.scrollTop(i>o+B?i-B:o>s-t?s-t:o)}function C(e){j&&(k.add(D).add(x).remove(),!e&&R.removeData(t).removeData("value"),R.prop("tabindex",q).off(o).off(A).unwrap().unwrap(),j=!1)}var x,k,T,D,y,I,O,S,H,B,M,W,E,A,$=this,R=e(n),Y=!1,j=!1,L=/android|ip(hone|od|ad)/i.test(navigator.userAgent),q=R.prop("tabindex");d(c)};e.fn[t]=function(s){return this.each(function(){var o=e.data(this,t);o&&!o.disableOnMobile?""+s===s&&o[s]?o[s]():o.init(s):e.data(this,t,new c(this,s))})},e.fn[t].hooks=n}(jQuery);
/* <<< file end: js/lib/jquery.selectric.min.js */

//# map link was there [jquery.selectric.min.js.map]
/* >>> file start: js/core/angular/ljSelectric.js */
//= require js/lib/jquery.selectric.min.js
!function(e){return e}(),function(){"use strict";angular.module("LJ.Selectric",[]).directive("ljSelectric",["$parse","$timeout",function(e,t){return{require:"?ngModel",scope:!0,link:function(c,r,i,l){var n,o,s=e(i.ljSelectric);n=LJ.Function.debounce(function(){t(function(){r.selectric("refresh")})},50),i.ljSelectric&&c.$watchCollection(s,n),l&&c.$watch(function(){return l.$modelValue},n),o={customClass:{prefix:"b-selectus",postfixes:"Input Items Open Disabled TempShow HideSelect Wrapper Hover Responsive Above Scroll",camelCase:!1,overwrite:!1},disableOnMobile:!1};for(var u in i)if(i.hasOwnProperty(u)&&/ljSelectric\w+/.test(u)){var a=u.replace("ljSelectric","");a=a.charAt(0).toLowerCase()+a.slice(1),o[a]=i[u]}r.selectric(o),c.$on("$destroy",function(){r.selectric("destroy")})}}}])}();
/* <<< file end: js/core/angular/ljSelectric.js */

//# map link was there [ljSelectric.js.map]
/* >>> file start: js/core/angular/ljTour.js */
//= require js/core/angular/bubble.js
//= require js/core/angular/api.js
//= require js/core/angular/ref.js
Site.page.template['angular/bubbletour.ng.tmpl'] = '<div class=\"b-helptour\">\n    <header class=\"b-helptour-header\" ng-hide=\"current.length < 2\">\n        <span class=\"b-helptour-stage\">\n            <span class=\"b-helptour-stage-prev\" ng-bind=\"index\"></span>\n            <span class=\"b-helptour-stage-hr\">/</span>\n            <span class=\"b-helptour-stage-next\" ng-bind=\"current.length\"></span>\n        </span>\n    </header>\n    <div class=\"b-helptour-content b-text\">\n        <span lj-ml=\"{{step.tourText}}\" lj-ml-dynamic=\"index\"></span>\n    </div>\n    <footer class=\"b-helptour-footer\">\n        <ul class=\"b-helptour-controls b-helptour-state\">\n            <li class=\"b-helptour-control b-helptour-control-skip\"\n                ng-hide=\"step.tourNoSkip || index === current.length\">\n                <a class=\"b-helptour-skip-link b-helptour-link\" href=\"javascript:void(0)\" lj-ml=\"tour.steps.skip\"\n                   ng-click=\"end()\"></a>\n            </li>\n        </ul>\n        <ul class=\"b-helptour-controls b-helptour-step\">\n            <li class=\"b-helptour-control b-helptour-control-prev\"\n                ng-hide=\"step.tourNoBack || index === 1\">\n                <a class=\"b-helptour-prev-link b-helptour-link\" href=\"javascript:void(0)\" lj-ml=\"tour.steps.prev\"\n                   ng-click=\"prev()\"></a>\n            </li>\n            <li class=\"b-helptour-control b-helptour-control-next\"\n                ng-hide=\"step.tourNoNext || index === current.length\">\n                <a class=\"b-helptour-next-link b-helptour-link\" href=\"javascript:void(0)\" lj-ml=\"tour.steps.next\"\n                   ng-click=\"next()\"></a>\n            </li>\n            <li class=\"b-helptour-control b-helptour-control-done\"\n                ng-hide=\"index !== current.length\">\n                <a class=\"b-helptour-done-link b-helptour-link\" href=\"javascript:void(0)\" lj-ml=\"tour.steps.done\"\n                   ng-click=\"end()\"></a>\n            </li>\n        </ul>\n    </footer>\n</div>\n';
LJ.injectStyle('/* >>> file start: stc/tour/ljtour.css */\n.b-bubble-tour{z-index:5001}.b-bubble-tour .b-popup-inner{padding:0}.b-helptour{width:350px}.b-helptour-header{margin:0 0 .3em;padding:10px 16px 0}.b-helptour-footer:after,.b-helptour-header:after{display:table;width:100%;clear:both;content:\"\"}.b-helptour-stage-title{margin-right:10px}.b-helptour P:first-child{margin:0 0 .3em}.b-helptour-content{margin:10px 0 .6em;padding:0 16px}.b-helptour-content P{margin:.3em 0}.b-helptour-content LI,.b-helptour-content UL{margin:0;padding:0;list-style:none}.b-helptour-footer{padding:6px 15px;border-radius:0 0 5px 5px;background-color:#DAE3E6}.b-helptour-controls{margin:0;padding:0}.b-helptour-state{float:left}.b-helptour-step{float:right}.b-helptour-control{display:inline;margin-right:4px;cursor:pointer}.b-helptour-control-done:after{display:inline-block;content:\"\";width:14px;height:12px;background-image:url(/img/icons/unit_v3.png?v=42878);background-repeat:no-repeat;background-position:0 -223px}.b-helptour-control-done A{padding-left:8px}.b-helptour-control-done A:link,.b-helptour-control-done A:visited,.b-helptour-control-next A:link,.b-helptour-control-prev A:link{color:#00A3D9}.b-helptour-control-skip A:link,.b-helptour-control-skip A:visited{color:#7A9199}.b-helptour-control A{font-size:13px}.b-helptour-control A:active,.b-helptour-control A:focus,.b-helptour-control A:hover{color:#0086b3}.p-ljtour .b-lenta .l-flatslide-container{position:static}.p-ljtour .l-flatslide-menu-controls{position:absolute;top:auto!important}.p-ljtour.p-openpopup .w-cs{overflow:visible}@media all and (max-width:650px){.p-ljtour.p-openpopup .b-fader{display:none!important}.b-bubble-tour{display:none}}\n/* <<< file end: stc/tour/ljtour.css */\n\n/*# map link was there [ljtour.css.map] */\n');
//= require_ml tour.steps.prev
//= require_ml tour.steps.next
//= require_ml tour.steps.skip
//= require_ml tour.steps.done
!function(e){return e}(),function(e){"use strict";angular.module("LJ.Tour",["LJ.Bubble","LJ.Templates","LJ.Directives","LJ.Api"]).factory("Tour",["Api",function(e){var t={};return t.queue={},t.checkAvailable=function(){var n=Object.keys(t.queue);return e.call("tour.is_available",{tours:n},{silent:!0}).then(function(e){n.forEach(function(n){0===e.states[n]&&delete t.queue[n]})})},t.setDone=function(t){return e.call("tour.set_done",{tour:t})},t}]).directive("ljTour",["$timeout","$document","Bubble","Ref","Tour",function(t,n,r,u,o){return{scope:!0,link:function(i){function c(){e("body").find("[data-tour]").each(function(){var t=e(this),n=angular.extend({element:t},t.data());Array.isArray(L[n.tour])||(L[n.tour]=[]),n.tourStepDiscardDuplicates&&L[n.tour].some(function(e){return e.tourStep===n.tourStep})||L[n.tour].push(n)})}function a(){var e=Object.keys(L)[0],t=L[e];i.current=t.filter(function(e){return b(e)&&v(e)}).sort(function(e,t){return e.tourStep>t.tourStep?1:e.tourStep<t.tourStep?-1:0}),i.current.forEach(function(e){u.add(e.tour+e.tourStep,e.element)}),delete L[e],g(i.current[0])?f():l()}function l(){Object.keys(L).length&&a()}function s(){r.close(),O.fadeOut(),angular.element("body").removeClass("p-ljtour").off("ljsale-load",y),o.setDone(i.step.tour),O.off("click",s),i.current=null,i.step=null,l()}function f(){return angular.element("body").addClass("p-ljtour").on("ljsale-load",function(e){e.originalEvent.data.slot&&y()}),O.is(":visible")?void t(f,300):(p(),O.on("click",s).fadeIn(),void(i.current=i.current.filter(function(e){return m(e.element)})))}function p(){var e=i.current.indexOf(i.step);e<i.current.length-1?(i.step=i.current[++e],i.index=++e,h()):s()}function d(){var e=i.current.indexOf(i.step);e>0&&(i.step=i.current[--e],i.index=++e,h())}function b(e){return e.hasOwnProperty("tourOwner")?LJ.get("remote.username")===LJ.get("journal.username"):!0}function v(e){return e.hasOwnProperty("tourSkipIf")?e.tourSkipIf.split(",").every(function(e){return e=e.trim(),"!"===e.charAt(0)?LJ.get(e.slice(1)):!LJ.get(e)}):!0}function m(e){return e.is(":visible")&&0!==e.css("opacity")&&"hidden"!==e.css("visibility")}function g(e){return e?e.hasOwnProperty("tourStartPage")?new RegExp(e.tourStartPage,"i").test(location.pathname):1===e.tourStep:!1}function y(){angular.element(window).trigger("resize"),S()}function h(){if(i.step){if(!i.step.element.is(":visible"))return p();r.current&&r.close(),t(function(){var e=r.options("tour")||{};r.open("tour",angular.extend(e,i.step.tourBubble),i.step.element),S()}),LJ.Event.once("visual_editor_ready",function(){t(y)})}}function S(){u.scrollTo(i.step.tour+i.step.tourStep,{onlyOutOfScreen:!0})}function k(e){if(i.current&&i.current.length){switch(e.which){case 27:s();break;case 37:d();break;case 39:p()}i.$apply()}}var J,L=o.queue,O=angular.element(document.querySelector(".b-fader")),w=!1;J=r.register({name:"tour",template:"bubbletour.ng.tmpl",closeControl:!1},i),!LJ.Flags.isEnabled("friendsfeed_tour")||LJ.Support.isMobile()||w||(w=!0,t(function(){c(),o.checkAvailable().then(l)})),i.next=p,i.prev=d,i.end=s,n.on("keydown",k),i.$on("$destroy",function(){n.off("keydown",k),J()})}}}])}(jQuery);
/* <<< file end: js/core/angular/ljTour.js */

//# map link was there [ljTour.js.map]
/* >>> file start: js/core/crossStorageClient.js */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};!function(){var e=LJ.Util.getWindow(),t={};LJ.define("LJ.Util.CrossStorage"),LJ.Util.CrossStorage=t;var n=void 0,r=[];e.addEventListener("message",function(e){if(e.origin===LJ.get("statprefix")){var t=e.data||{};"ljCrossStorage.storageEvent"===t.messageType&&r.forEach(function(e){e(_extends({},t.eventObj))})}});var o=function(){if(n)return n;var t=e.document.createElement("iframe");return t.style.cssText="display: none; width: 0; height: 0; border: 0;",t.frameBorder=0,t.src=LJ.get("statprefix")+("/??plain/crossStorageServ.html?&v="+LJ.get("v")),e.document.body.appendChild(t),n=new Promise(function(e){var n=setTimeout(function(){t.src=t.src+"0"},5e3);t.onload=function(){clearTimeout(n),e(t)}})},s=function(t){var n=t.requestID;return new Promise(function(t){var r=function o(r){if(r.origin===LJ.get("statprefix")){var s=r.data||{};"object"===("undefined"==typeof s?"undefined":_typeof(s))&&"crossStorageServResponse"in s&&s.requestID===n&&(e.removeEventListener("message",o),t(s.crossStorageServResponse))}};e.addEventListener("message",r)})};t.getItem=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return o().then(function(n){var r=Date.now()+""+Math.floor(1e4*Math.random()),o={fn:"getItem",args:[e],source:"LJ.CrossStorage",requestID:r};return n.contentWindow.postMessage(o,"*"),s({requestID:r}).then(function(e){var n=e;if(t.parseJSON)try{n=JSON.parse(e)}catch(r){}return n})})},t.setItem=function(e,t){return o().then(function(n){var r={fn:"setItem",source:"LJ.CrossStorage",args:[e,t]};n.contentWindow.postMessage(r,"*")})},t.listenStorageEvents=function(e){r.push(e)}}();
/* <<< file end: js/core/crossStorageClient.js */

//# map link was there [crossStorageClient.js.map]
/* >>> file start: js/misc/popups/anonSuggestion.js */
function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

//= require js/core/crossStorageClient.js
Site.page.template['angular/misc/anonSuggestion.ng.tmpl'] = '<div class=\"popup-suggestion js-anon-suggestion-block\" ng-if=\"directive.isBlockVisible\" ng-cloak>\n  <div class=\"basepopup\">\n    <div class=\"basepopup__group\">\n      <div class=\"basepopup__title basepopup__title--size-16\" lj-ml=\"popup.suggestion.title\"></div>\n      <div class=\"basepopup__content\">\n        <p class=\"basepopup__text basepopup__text--light\" lj-ml=\"popup.suggestion.text\" lj-ml-resolve=\"{ link: \'{{directive.url}}/create/follow\' }\"></p>\n\n        <div class=\"suggestion-content\">\n          <div class=\"suggestion-content__col\">\n            <a class=\"lightbutton lightbutton--big lightbutton--bold lightbutton--blue\" href=\"{{directive.url}}/create\" lj-ml=\"popup.suggestion.button.create\"></a>\n            <a class=\"suggestion-content__link js-login-link\" href=\"\" lj-ml=\"popup.suggestion.button.login\" ng-click=\"directive.showLoginForm()\" ></a>\n          </div>\n          <div class=\"suggestion-content__pic\"></div>\n        </div>\n\n      </div>\n    </div>\n    <button class=\"basepopup__close js-closeLoginPopup\" type=\"button\" ng-click=\"directive.closePopup()\">\n      <span class=\"basepopup__close-text\" lj-ml=\"popup.suggestion.button.close\"></span>\n      <svg class=\"basepopup__close-icon svgicon\" width=\"16\" height=\"16\"><use xlink:href=\"#flaticon--cross\"/></svg>\n    </button>\n  </div>\n</div>';

//= require_ml popup.suggestion.button.close
//= require_ml popup.suggestion.button.create
//= require_ml popup.suggestion.button.login
//= require_ml popup.suggestion.text
//= require_ml popup.suggestion.title

(function (a) {
  return a;
})();

(function () {

  angular.module('LJ.AnonSuggestion', []).run([function () {
    var suggestionElement = angular.element('div[suggestion-for-unlogged]');
    if (!suggestionElement[0]) {
      angular.element('[ng-app]').append(angular.element('<div suggestion-for-unlogged></div>'));
    }
  }]).directive('suggestionForUnlogged', suggestionForUnlogged);

  function suggestionForUnlogged() {
    return {
      restrict: 'A',
      templateUrl: 'anonSuggestion.ng.tmpl',
      scope: {},
      controllerAs: 'directive',
      controller: SuggestionController
    };
  }

  SuggestionController.$inject = ['$window', '$timeout'];

  function SuggestionController($window, $timeout) {
    this.url = LJ.get('siteroot');
    var vm = this;
    vm.maxLength = 30;
    vm.uniqCount = 5;

    var _LJ$Util$Link$parseUR = LJ.Util.Link.parseURL(window.location.href),
        queryObject = _LJ$Util$Link$parseUR.queryObject;

    function setValInQueue(id) {
      var arr = arguments.length <= 1 || arguments[1] === undefined ? [] : arguments[1],
          copyArray = [].concat(_toConsumableArray(arr));

      id && copyArray.push(id);
      return copyArray.length <= vm.maxLength ? copyArray.slice(0, vm.maxLength) : copyArray.slice(copyArray.length - vm.maxLength);
    }

    vm.showLoginForm = function () {
      var loginUrl = angular.element('.b-loginform').attr('action'),
          currentUrl = $window.location.href;

      angular.element('.b-loginform').attr('action', loginUrl + '&returnto=' + currentUrl);
      $timeout(LJ.Util.Action.login);

      return;
    };

    var showPopup = function showPopup() {
      if (vm.gotHideRequest) {
        return;
      }
      vm.isBlockVisible = true;
      $timeout(function () {/* */});
    },
        hidePopup = function hidePopup() {
      vm.isBlockVisible = false;
      $timeout(function () {/* */});
    };

    // Method for internal use


    vm.closePopup = function () {
      vm.isBlockVisible = false;
      var curTime = new Date().getTime();
      LJ.Util.CrossStorage.setItem('unlogPopupLastShow', { time: curTime });
    };

    if (!LJ.get('remote')) {
      LJ.Util.CrossStorage.getItem('unlogSuggestions', {
        parseJSON: true
      }).then(function () {
        var res = arguments.length <= 0 || arguments[0] === undefined ? [] : arguments[0],
            userIDs = res || [],
            isJournal = 'userid' in Site.current_journal,
            curentUserID = Site.current_journal.userid || null,
            newIDArr = setValInQueue(curentUserID, userIDs);


        isJournal && LJ.Util.CrossStorage.setItem('unlogSuggestions', newIDArr);

        var uniqID = [].concat(_toConsumableArray(new Set(newIDArr)));
        if (newIDArr.length === vm.maxLength && uniqID.length >= vm.uniqCount && !queryObject.memorable_prompt) {
          (function () {
            var lastShowTime = void 0;

            LJ.Util.CrossStorage.getItem('unlogPopupLastShow', {
              parseJSON: true
            }).then(function () {
              var res = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];

              res = res || {};
              lastShowTime = res && +res.time || new Date().getTime();
              var countOfDays = (new Date().getTime() - lastShowTime) / (1000 * 60 * 60 * 24);

              if (!Object.keys(res).length || countOfDays >= 10) {
                showPopup();
              }
            });
          })();
        }
      });
    }

    LJ.Event.on('popup::anonSuggestion::hideRequest', function () {
      vm.gotHideRequest = true;
      hidePopup();
    });
  }
})();
/* <<< file end: js/misc/popups/anonSuggestion.js */

//# map link was there [anonSuggestion.js.map]
/* >>> file start: js/mainpage/app.js */
//= require js/widgets/angular/topJournals.js
//= require js/widgets/angular/today.js
//= require js/widgets/angular/promo.js
//= require js/widgets/angular/questionOfTheDay.js
//= require js/widgets/likus.js
//= require js/discovery/menu.js
//= require js/core/angular/bubble.js
//= require js/core/angular/ljSelectric.js
//= require js/core/angular/ljTour.js
//= require js/misc/topStrip.js
//= require js/misc/popups/anonSuggestion.js
Site.page.template['angular/homepage/settings.ng.tmpl'] = '<select\n    class=\"b-mainpage-region-item b-mainpage-region-first\"\n    ng-options=\"region.region as region.title for region in homepage.regions()\"\n    ng-model=\"homepage.region\"\n    ng-change=\"homepage.setRegion(homepage.region)\"\n    lj-selectric=\"homepage.regions()\"\n    >\n</select>\n\n<select\n    class=\"b-mainpage-region-item b-mainpage-region-second\"\n    ng-options=\"subregion.region as subregion.title for subregion in homepage.subregions()\"\n    ng-model=\"homepage.subregion\"\n    lj-selectric=\"homepage.subregions()\"\n    ng-if=\"homepage.subregions().length\"\n    ng-change=\"homepage.setRegion(homepage.subregion)\"\n    >\n</select>\n\n<a\n    class=\"b-mainpage-region-ratings\"\n    href=\"javascript:void(0)\"\n    lj-ml=\"main.rating.regional\"\n    ng-if=\"homepage.region === \'cyr\' && homepage.state.russian\"\n    ng-click=\"homepage.setRegion(\'ru\')\"\n    ></a>\n\n<ul class=\"b-mainpage-settings\">\n\n    <!-- with or without different posts from one user -->\n    <li class=\"\n            b-mainpage-settings-item\n            b-mainpage-settings-item-different\n            \">\n        <span\n            class=\"b-mainpage-settings-different\"\n            ng-class=\"{\n              \'b-mainpage-settings-different-shown\':  homepage.settings.show_unique_items,\n              \'b-mainpage-settings-different-hidden\': !homepage.settings.show_unique_items\n            }\"\n            ng-click=\"homepage.toggleSetting(\'show_unique_items\')\"\n            >\n            <a\n                href=\"javascript:void(0)\"\n                lj-ml=\"main.intro.different.hide.title\"\n                lj-ml-attr=\"title\"\n                class=\"\n                    b-pseudo\n                    b-mainpage-settings-different-item\n                    b-mainpage-settings-different-item-hide\n                    \"><!--\n                --><span class=\"b-mainpage-intro-icon\"></span><!--\n                --><span lj-ml=\"main.intro.different.hide\"></span><!--\n            --></a>\n            <a\n                href=\"javascript:void(0)\"\n                lj-ml=\"main.intro.different.show.title\"\n                lj-ml-attr=\"title\"\n                class=\"\n                    b-pseudo\n                    b-mainpage-settings-different-item\n                    b-mainpage-settings-different-item-show\n                    \"><!--\n                --><span class=\"b-mainpage-intro-icon\"></span><!--\n                --><span lj-ml=\"main.intro.different.show\"></span><!--\n            --></a>\n        </span>\n    </li><!-- /different -->\n\n    <!-- with or without friends (for logged only) -->\n    <li class=\"\n            b-mainpage-settings-item\n            b-mainpage-settings-item-friends\n            \">\n        <span\n            class=\"b-mainpage-settings-friends\"\n            ng-class=\"{\n              \'b-mainpage-settings-friends-shown\':  homepage.settings.show_from_friends,\n              \'b-mainpage-settings-friends-hidden\': !homepage.settings.show_from_friends\n            }\"\n            ng-click=\"homepage.toggleSetting(\'show_from_friends\')\"\n            >\n            <a\n                href=\"javascript:void(0);\"\n                lj-ml=\"main.intro.friends.hide.title\"\n                lj-ml-attr=\"title\"\n                class=\"\n                    b-pseudo\n                    b-mainpage-settings-friends-item\n                    b-mainpage-settings-friends-item-hide\n                    \"><!--\n                --><span class=\"b-mainpage-intro-icon\"></span><!--\n                --><span lj-ml=\"main.intro.friends.hide\"></span><!--\n            --></a>\n            <a\n                href=\"javascript:void(0)\"\n                lj-ml=\"main.intro.friends.show.title\"\n                lj-ml-attr=\"title\"\n                class=\"\n                    b-pseudo\n                    b-mainpage-settings-friends-item\n                    b-mainpage-settings-friends-item-show\n                    \"><!--\n                --><span class=\"b-mainpage-intro-icon\"></span><!--\n                --><span lj-ml=\"main.intro.friends.show\"></span><!--\n            --></a>\n        </span>\n    </li><!-- /friends -->\n\n    <!-- [TEMPORARY] with or without hidden entries -->\n    <li class=\"\n            b-mainpage-settings-item\n            b-mainpage-settings-item-hidden\n            \">\n        <span class=\"b-mainpage-settings-hidden\"\n            ng-class=\"{\n              \'b-mainpage-settings-hidden-shown\':  homepage.settings.show_hidden_items,\n              \'b-mainpage-settings-hidden-hidden\': !homepage.settings.show_hidden_items\n            }\"\n            ng-click=\"homepage.toggleSetting(\'show_hidden_items\')\"\n            >\n            <a\n                href=\"javascript:void(0);\"\n                class=\"\n                    b-pseudo\n                    b-mainpage-settings-hidden-item\n                    b-mainpage-settings-hidden-item-hide\n                    \"\n                ><!--\n                --><span\n                        ng-show=\"homepage.isLoggedIn\"\n                        lj-ml=\"main.intro.hidden.hide\"\n                        ></span><!--\n                --><span\n                        ng-hide=\"homepage.isLoggedIn\"\n                        lj-ml=\"main.intro.hidden.hide.anon\"\n                        ></span><!--\n            --></a>\n\n            <a\n                href=\"javascript:void(0);\"\n                class=\"\n                    b-pseudo\n                    b-mainpage-settings-hidden-item\n                    b-mainpage-settings-hidden-item-show\n                    \"><!--\n                --><span ng-show=\"homepage.isLoggedIn\" lj-ml=\"main.intro.hidden.show\"></span><!--\n                --><span ng-hide=\"homepage.isLoggedIn\" lj-ml=\"main.intro.hidden.show.anon\"></span><!--\n            --></a>\n        </span>\n    </li>\n\n    <li class=\"b-mainpage-settings-item\">\n        <a\n            class=\"b-mainpage-settings-hidden-settings\"\n            ng-href=\"{{homepage.siteroot}}/manage/ratings\"\n            target=\"_blank\"\n            ><!--\n            --><span class=\"b-mainpage-settings-hidden-label\" lj-ml=\"main.intro.hidden.settings\"></span><!--\n        --></a>\n    </li>\n\n    <!-- rating location -->\n    <li\n        class=\"\n            b-mainpage-settings-item\n            b-mainpage-settings-item-location\n            \"\n        ng-if=\"homepage.isDisabled(\'regional_ratings\')\"\n        >\n        <div class=\"b-mainpage-settings-location\">\n\n            <!-- head -->\n            <h5 class=\"b-mainpage-settings-location-head\" lj-ml=\"main.intro.location\"></h5>\n\n            <!-- body -->\n            <div class=\"b-mainpage-settings-location-body\">\n\n                <select ng-model=\"homepage.region\" ng-change=\"homepage.setRegion(homepage.region)\">\n                    <option value=\"cyr\" lj-ml=\"main.intro.location.cyr\"></option>\n                    <option value=\"ua\" lj-ml=\"main.intro.location.ukr\"></option>\n                    <option value=\"noncyr\" lj-ml=\"main.intro.location.noncyr\"></option>\n                </select>\n\n            </div><!-- /body -->\n\n        </div>\n    </li><!-- /location -->\n\n</ul><!-- /settings -->\n';
Site.page.template['angular/homepage/subregions.ng.tmpl'] = '<ul class=\"b-mainpage-region-items\">\n    <li\n        class=\"b-mainpage-region-item\"\n        ng-class=\"{\n            \'b-mainpage-region-item-active\': homepage.subregion === \'all\'\n        }\"\n        >\n        <a\n            href=\"javascript:void(0)\"\n            class=\"b-mainpage-region-item-link\"\n            ng-click=\"homepage.setSubregion(\'default\')\"\n            lj-ml=\"main.intro.location.regional.all\"\n            ></a>\n    </li>\n    <li\n        class=\"b-mainpage-region-item\"\n        ng-repeat=\"subregion in homepage.subregions()\"\n        ng-class=\"{\n            \'b-mainpage-region-item-active\': subregion.region === homepage.subregion\n        }\"\n        >\n        <a\n            href=\"javascript:void(0)\"\n            class=\"b-mainpage-region-item-link\"\n            ng-bind=\"subregion.title\"\n            ng-click=\"homepage.setSubregion(subregion)\"\n            ></a>\n    </li>\n</ul>\n';
//= require_ml main.intro.location.regional.all
//= require_ml main.intro.location.regional.rating
//= require_ml main.rating.regional
//= require_ml tour.regionalrating.step1.tip
//= require_ml tour.regionalrating.title
//= require_ml tour.steps.done
//= require_ml tour.steps.skip
//= require_ml tour.steps.prev
//= require_ml tour.steps.next
!function(e){return e}(),function(){"use strict";angular.module("Homepage",["LJ.Widget.TopJournals","LJ.Widget.Discovery","LJ.Widget.Top","LJ.Widget.Promo","LJ.Widget.QuestionOfTheDay","Discovery.Menu","LJ.Bubble","LJ.Selectric","LJ.Sale","LJ.Likus","LJ.AnonSuggestion","LJ.Tour","TopStrip"]).value("$anchorScroll",null).controller("HomepageCtrl",["$scope","$location","Ratings",function(e,n,i){function t(){var e=LiveJournal.parseGetArgs().rating;return e?e:LJ.get("remote")?LJ.get("rating_locale"):LJ.Cookie.get("homepage_rating")||LJ.get("rating_locale")}function o(e){return function(){r.state.isSettingsOpened=e}}var r=this,s=angular.element("body");r.regions=i.regions,r.subregions=i.subregions,r.state={isSettingsOpened:!1,isEnabledWritersBlock:LJ.Flags.isEnabled("writers_block"),russian:"ru"===LJ.get("user_ip_country"),isStatsOpened:LJ.get("prop.show_homepage_stats")},r.toggleStats=function(){r.state.isStatsOpened=r.state.isStatsOpened?0:1,LJ.Prop.set("show_homepage_stats",r.state.isStatsOpened)},r.asideToggle=function(){s.toggleClass("body-state-sidebar-opened")},s.on("click",function(e){angular.element(e.target).parents(".l-flatslide-aside").length||s.toggleClass("body-state-sidebar-opened",!1)}),r.menu={positions:{},isOpened:!1,isInitialize:!1,isViewable:!0,toggle:function(){s.toggleClass("body-state-menu-opened"),r.menu.isOpened=!r.menu.isOpened}},r.sidebar={isOpened:!1,toggle:function(){r.sidebar.isOpened=!r.sidebar.isOpened}},r.settings={show_unique_items:Boolean(LJ.get("show_unique_items")),show_hidden_items:Boolean(LJ.get("show_hidden_items")),show_from_friends:Boolean(LJ.get("show_from_friends_v2"))},r.isDisabled=LJ.Flags.isDisabled,e.$watch(function(){return r.settings},function(e){window.homepage.set({showFriends:e.show_from_friends,returnEntries:e.show_hidden_items,uniqueAuthors:e.show_unique_items})},!0),i.setRegion(t()),r.region=i.region,r.subregion=i.subregion,r.subregionTitle=i.subregionTitle,e.$watch(function(){return i.region+i.subregion},function(e,n){e&&(r.region=i.region,r.subregion=i.subregion,r.menu.isOpened=!1,window.homepage.set("location",r.getSubregionOrRegion()),e!==n&&LJ.Event.trigger("ATI:RegionalRatingChange",r.getSubregionOrRegion()))}),LJ.Event.on("region:changeRequest",function(){n.url("/")}),r.setRegion=function(e){i.setRegion(e)},r.getSubregionOrRegion=function(){return LJ.Flags.isDisabled("regional_ratings")?i.region:i.subregion!==i.DEFAULT_SUBREGION?i.subregion:i.region},r.toggleSetting=function(e){this.settings[e]=!this.settings[e]},this.isLoggedIn=Boolean(LJ.get("remote")),this.siteroot=LJ.get("siteroot"),e.$on("bubble:open:settings",o(!0)),e.$on("bubble:close:settings",o(!1))}]).factory("Ratings",[function(){function e(){return a.parent=l.region,a}function n(e,n){return e.order-n.order}function i(){return g.filter(LJ.Function.not(LJ.Function.get("parent"))).sort(n)}function t(){var n=g.filter(function(e){return e.parent===l.region});return 0!==n.length&&n.unshift(e()),n}function o(e){return g.find(function(n){return n.region===e})}function r(e){if(LJ.Event.trigger("region:changeRequest"),LJ.Flags.isDisabled("regional_ratings"))return void(l.region=e);if(e===u)return void(l.subregion=u);var n=o(e);n.parent?(l.region=n.parent,l.subregion=n.region):(l.region=e,l.subregion=u)}function s(){return l.subregion===u?LJ.ml("main.intro.location.regional.all"):o(l.subregion).title}var g=LJ.get("rating_regions"),u="all",a={parent:null,title:LJ.ml("main.intro.location.regional.all"),region:"all"},l={regions:i,subregions:t,getRegion:o,setRegion:r,subregionTitle:s,region:null,subregion:u,DEFAULT_SUBREGION:u};return l}]).config(["$locationProvider",function(e){e.html5Mode({enabled:!0,requireBase:!1}).hashPrefix("")}])}();
/* <<< file end: js/mainpage/app.js */

//# map link was there [app.js.map]
/* >>> file start: js/common/captcha.js */
!function(e){return e}(),function(e){function t(){return"undefined"!=typeof v}function n(){var t=e.Deferred();return h?t.resolve(h):LJ.Api.call("captcha.get_public_key",{},function(e){h=e.captcha_public,t.resolve(h)}),t.promise()}function r(){return location.protocol+"//www.google.com/recaptcha/api.js?onload=onRecaptchaLoad&render=explicit"}function a(r,a){var o=e.Deferred();return a=e.extend(C,a||{}),LJ.Captcha.current?e.when(n(),L()).then(function(){return t()?(a.sitekey=h,s(),v.render(r,a)):void console.error("Something went wrong. Captcha object is not defined.")}):(o.resolve(),o.promise())}function o(){}function c(){return t()?(s(),v.reset.apply(null,arguments)):void 0}function i(){return null}function l(e){return t()?v.getResponse(e):void 0}function p(){return f(),(v||grecaptcha).execute.apply(null,arguments)}function u(e){var t=e.attributes.title,n=e.attributes.src;if(t){var r=t.value;if(/испытание|challenge/.test(r)&&/recaptcha/.test(r))return!0}if(n){var a=n.value;if(/google\.com.*recaptcha.*bframe/.test(a))return!0}return!1}LJ.define("LJ.Captcha"),LJ.Captcha={create:a,reload:c,destroy:o,getChallenge:i,getResponse:l,isDefined:t,execute:p,current:["recaptcha"].filter(LJ.Flags.isEnabled).shift()},LJ.Captcha.available=!!LJ.Captcha.current;var s,d,f,h,v,C={lang:"ru"},g=e.Deferred();window.onRecaptchaLoad=function(){g.resolve()};var L=LJ.Function.once(function(){var t=e.Deferred();return LJ.injectScript(r()),g.then(function(){v=grecaptcha,t.resolve()}),t.promise()});LJ.Captcha.getCaptchaApiObject=function(){return v||grecaptcha},LJ.Captcha.setOnSimpleForm=function(e,t){s(),window.onCaptchaPass=function(){var t=Object.getPrototypeOf(e).submit;t.call(e)},t.addEventListener("click",function(e){e.preventDefault(),p()})},LJ.Event.on("reCAPTCHA::popup::created",function(e){var t=e.firstChild,n=e.lastChild,r=n.firstChild;e.classList.add("recaptcha-tiles"),t&&t.classList.add("recaptcha-tiles__fader"),n&&n.classList.add("recaptcha-tiles__iframe-wrapper"),r&&r.classList.add("recaptcha-tiles__iframe")}),LJ.Event.on("reCAPTCHA::popup::shown",function(){document.body.classList.add("body--recaptcha-opened")}),LJ.Event.on("reCAPTCHA::popup::hidden",function(){document.body.classList.remove("body--recaptcha-opened")}),function(){var e,t;s=function(){var n=document.body.lastChild;e=setInterval(function(){var r=document.body.lastChild;if(r!==n){n=r;var a=n.querySelector("iframe");a&&u(a)&&(t=n,console.log("reCAPTCHA popup created"),LJ.Event.trigger("reCAPTCHA::popup::created",t),clearInterval(e),e=null)}},100)};var n,r;d=function(){n=new Date,r||(r=setInterval(function(){t&&0===+t.style.opacity&&(console.log("reCAPTCHA popup hidden"),LJ.Event.trigger("reCAPTCHA::popup::hidden"),clearInterval(r),r=null)},100))};var a=1e4;f=function(){n=new Date,r||(r=setInterval(function(){t&&1===+t.style.opacity?(console.log("reCAPTCHA popup shown"),LJ.Event.trigger("reCAPTCHA::popup::shown"),clearInterval(r),r=null,d()):new Date>n+a&&(console.log("reCAPTCHA popup taking too long to appear, aborting wait"),clearInterval(r),r=null)},100))}}()}(jQuery);
/* <<< file end: js/common/captcha.js */

//# map link was there [captcha.js.map]
/* >>> file start: js/front-bundled/dist/tokenModal.js */
/*! For license information please see tokenModal.js.LICENSE.txt */
(()=>{var e,t={1068:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(5042),o=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/;const i=(0,n.Z)((function(e){return o.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}))},5042:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}},8285:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){function t(e,n,l,s,p){for(var d,m,h,b,w,x=0,C=0,O=0,j=0,S=0,F=0,I=h=d=0,$=0,M=0,N=0,z=0,Z=l.length,R=Z-1,H="",U="",B="",J="";$<Z;){if(m=l.charCodeAt($),$===R&&0!==C+j+O+x&&(0!==C&&(m=47===C?10:47),j=O=x=0,Z++,R++),0===C+j+O+x){if($===R&&(0<M&&(H=H.replace(f,"")),0<H.trim().length)){switch(m){case 32:case 9:case 59:case 13:case 10:break;default:H+=l.charAt($)}m=59}switch(m){case 123:for(d=(H=H.trim()).charCodeAt(0),h=1,z=++$;$<Z;){switch(m=l.charCodeAt($)){case 123:h++;break;case 125:h--;break;case 47:switch(m=l.charCodeAt($+1)){case 42:case 47:e:{for(I=$+1;I<R;++I)switch(l.charCodeAt(I)){case 47:if(42===m&&42===l.charCodeAt(I-1)&&$+2!==I){$=I+1;break e}break;case 10:if(47===m){$=I+1;break e}}$=I}}break;case 91:m++;case 40:m++;case 34:case 39:for(;$++<R&&l.charCodeAt($)!==m;);}if(0===h)break;$++}if(h=l.substring(z,$),0===d&&(d=(H=H.replace(u,"").trim()).charCodeAt(0)),64===d){switch(0<M&&(H=H.replace(f,"")),m=H.charCodeAt(1)){case 100:case 109:case 115:case 45:M=n;break;default:M=L}if(z=(h=t(n,M,h,m,p+1)).length,0<_&&(w=c(3,h,M=r(L,H,N),n,A,P,z,m,p,s),H=M.join(""),void 0!==w&&0===(z=(h=w.trim()).length)&&(m=0,h="")),0<z)switch(m){case 115:H=H.replace(k,a);case 100:case 109:case 45:h=H+"{"+h+"}";break;case 107:h=(H=H.replace(g,"$1 $2"))+"{"+h+"}",h=1===T||2===T&&i("@"+h,3)?"@-webkit-"+h+"@"+h:"@"+h;break;default:h=H+h,112===s&&(U+=h,h="")}else h=""}else h=t(n,r(n,H,N),h,s,p+1);B+=h,h=N=M=I=d=0,H="",m=l.charCodeAt(++$);break;case 125:case 59:if(1<(z=(H=(0<M?H.replace(f,""):H).trim()).length))switch(0===I&&(d=H.charCodeAt(0),45===d||96<d&&123>d)&&(z=(H=H.replace(" ",":")).length),0<_&&void 0!==(w=c(1,H,n,e,A,P,U.length,s,p,s))&&0===(z=(H=w.trim()).length)&&(H="\0\0"),d=H.charCodeAt(0),m=H.charCodeAt(1),d){case 0:break;case 64:if(105===m||99===m){J+=H+l.charAt($);break}default:58!==H.charCodeAt(z-1)&&(U+=o(H,d,m,H.charCodeAt(2)))}N=M=I=d=0,H="",m=l.charCodeAt(++$)}}switch(m){case 13:case 10:47===C?C=0:0===1+d&&107!==s&&0<H.length&&(M=1,H+="\0"),0<_*D&&c(0,H,n,e,A,P,U.length,s,p,s),P=1,A++;break;case 59:case 125:if(0===C+j+O+x){P++;break}default:switch(P++,b=l.charAt($),m){case 9:case 32:if(0===j+x+C)switch(S){case 44:case 58:case 9:case 32:b="";break;default:32!==m&&(b=" ")}break;case 0:b="\\0";break;case 12:b="\\f";break;case 11:b="\\v";break;case 38:0===j+C+x&&(M=N=1,b="\f"+b);break;case 108:if(0===j+C+x+E&&0<I)switch($-I){case 2:112===S&&58===l.charCodeAt($-3)&&(E=S);case 8:111===F&&(E=F)}break;case 58:0===j+C+x&&(I=$);break;case 44:0===C+O+j+x&&(M=1,b+="\r");break;case 34:case 39:0===C&&(j=j===m?0:0===j?m:j);break;case 91:0===j+C+O&&x++;break;case 93:0===j+C+O&&x--;break;case 41:0===j+C+x&&O--;break;case 40:0===j+C+x&&(0===d&&(2*S+3*F==533||(d=1)),O++);break;case 64:0===C+O+j+x+I+h&&(h=1);break;case 42:case 47:if(!(0<j+x+O))switch(C){case 0:switch(2*m+3*l.charCodeAt($+1)){case 235:C=47;break;case 220:z=$,C=42}break;case 42:47===m&&42===S&&z+2!==$&&(33===l.charCodeAt(z+2)&&(U+=l.substring(z,$+1)),b="",C=0)}}0===C&&(H+=b)}F=S,S=m,$++}if(0<(z=U.length)){if(M=n,0<_&&void 0!==(w=c(2,U,M,e,A,P,z,s,p,s))&&0===(U=w).length)return J+U+B;if(U=M.join(",")+"{"+U+"}",0!=T*E){switch(2!==T||i(U,2)||(E=0),E){case 111:U=U.replace(v,":-moz-$1")+U;break;case 112:U=U.replace(y,"::-webkit-input-$1")+U.replace(y,"::-moz-$1")+U.replace(y,":-ms-input-$1")+U}E=0}}return J+U+B}function r(e,t,r){var o=t.trim().split(h);t=o;var i=o.length,a=e.length;switch(a){case 0:case 1:var c=0;for(e=0===a?"":e[0]+" ";c<i;++c)t[c]=n(e,t[c],r).trim();break;default:var l=c=0;for(t=[];c<i;++c)for(var s=0;s<a;++s)t[l++]=n(e[s]+" ",o[c],r).trim()}return t}function n(e,t,r){var n=t.charCodeAt(0);switch(33>n&&(n=(t=t.trim()).charCodeAt(0)),n){case 38:return t.replace(b,"$1"+e.trim());case 58:return e.trim()+t.replace(b,"$1"+e.trim());default:if(0<1*r&&0<t.indexOf("\f"))return t.replace(b,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function o(e,t,r,n){var a=e+";",c=2*t+3*r+4*n;if(944===c){e=a.indexOf(":",9)+1;var l=a.substring(e,a.length-1).trim();return l=a.substring(0,e).trim()+l+";",1===T||2===T&&i(l,1)?"-webkit-"+l+l:l}if(0===T||2===T&&!i(a,1))return a;switch(c){case 1015:return 97===a.charCodeAt(10)?"-webkit-"+a+a:a;case 951:return 116===a.charCodeAt(3)?"-webkit-"+a+a:a;case 963:return 110===a.charCodeAt(5)?"-webkit-"+a+a:a;case 1009:if(100!==a.charCodeAt(4))break;case 969:case 942:return"-webkit-"+a+a;case 978:return"-webkit-"+a+"-moz-"+a+a;case 1019:case 983:return"-webkit-"+a+"-moz-"+a+"-ms-"+a+a;case 883:if(45===a.charCodeAt(8))return"-webkit-"+a+a;if(0<a.indexOf("image-set(",11))return a.replace(S,"$1-webkit-$2")+a;break;case 932:if(45===a.charCodeAt(4))switch(a.charCodeAt(5)){case 103:return"-webkit-box-"+a.replace("-grow","")+"-webkit-"+a+"-ms-"+a.replace("grow","positive")+a;case 115:return"-webkit-"+a+"-ms-"+a.replace("shrink","negative")+a;case 98:return"-webkit-"+a+"-ms-"+a.replace("basis","preferred-size")+a}return"-webkit-"+a+"-ms-"+a+a;case 964:return"-webkit-"+a+"-ms-flex-"+a+a;case 1023:if(99!==a.charCodeAt(8))break;return"-webkit-box-pack"+(l=a.substring(a.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+a+"-ms-flex-pack"+l+a;case 1005:return d.test(a)?a.replace(p,":-webkit-")+a.replace(p,":-moz-")+a:a;case 1e3:switch(t=(l=a.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(t)){case 226:l=a.replace(w,"tb");break;case 232:l=a.replace(w,"tb-rl");break;case 220:l=a.replace(w,"lr");break;default:return a}return"-webkit-"+a+"-ms-"+l+a;case 1017:if(-1===a.indexOf("sticky",9))break;case 975:switch(t=(a=e).length-10,c=(l=(33===a.charCodeAt(t)?a.substring(0,t):a).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:a=a.replace(l,"-webkit-"+l)+";"+a;break;case 207:case 102:a=a.replace(l,"-webkit-"+(102<c?"inline-":"")+"box")+";"+a.replace(l,"-webkit-"+l)+";"+a.replace(l,"-ms-"+l+"box")+";"+a}return a+";";case 938:if(45===a.charCodeAt(5))switch(a.charCodeAt(6)){case 105:return l=a.replace("-items",""),"-webkit-"+a+"-webkit-box-"+l+"-ms-flex-"+l+a;case 115:return"-webkit-"+a+"-ms-flex-item-"+a.replace(C,"")+a;default:return"-webkit-"+a+"-ms-flex-line-pack"+a.replace("align-content","").replace(C,"")+a}break;case 973:case 989:if(45!==a.charCodeAt(3)||122===a.charCodeAt(4))break;case 931:case 953:if(!0===j.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?o(e.replace("stretch","fill-available"),t,r,n).replace(":fill-available",":stretch"):a.replace(l,"-webkit-"+l)+a.replace(l,"-moz-"+l.replace("fill-",""))+a;break;case 962:if(a="-webkit-"+a+(102===a.charCodeAt(5)?"-ms-"+a:"")+a,211===r+n&&105===a.charCodeAt(13)&&0<a.indexOf("transform",10))return a.substring(0,a.indexOf(";",27)+1).replace(m,"$1-webkit-$2")+a}return a}function i(e,t){var r=e.indexOf(1===t?":":"{"),n=e.substring(0,3!==t?r:10);return r=e.substring(r+1,e.length-1),I(2!==t?n:n.replace(O,"$1"),r,t)}function a(e,t){var r=o(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return r!==t+";"?r.replace(x," or ($1)").substring(4):"("+t+")"}function c(e,t,r,n,o,i,a,c,l,u){for(var f,p=0,d=t;p<_;++p)switch(f=F[p].call(s,e,d,r,n,o,i,a,c,l,u)){case void 0:case!1:case!0:case null:break;default:d=f}if(d!==t)return d}function l(e){return void 0!==(e=e.prefix)&&(I=null,e?"function"!=typeof e?T=1:(T=2,I=e):T=0),l}function s(e,r){var n=e;if(33>n.charCodeAt(0)&&(n=n.trim()),n=[n],0<_){var o=c(-1,r,n,n,A,P,0,0,0,0);void 0!==o&&"string"==typeof o&&(r=o)}var i=t(L,n,r,0,0);return 0<_&&void 0!==(o=c(-2,i,n,n,A,P,i.length,0,0,0))&&(i=o),E=0,P=A=1,i}var u=/^\0+/g,f=/[\0\r\f]/g,p=/: */g,d=/zoo|gra/,m=/([,: ])(transform)/g,h=/,\r+?/g,b=/([\t\r\n ])*\f?&/g,g=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,v=/:(read-only)/g,w=/[svh]\w+-[tblr]{2}/,k=/\(\s*(.*)\s*\)/g,x=/([\s\S]*?);/g,C=/-self|flex-/g,O=/[^]*?(:[rp][el]a[\w-]+)[^]*/,j=/stretch|:\s*\w+\-(?:conte|avail)/,S=/([^-])(image-set\()/,P=1,A=1,E=0,T=1,L=[],F=[],_=0,I=null,D=0;return s.use=function e(t){switch(t){case void 0:case null:_=F.length=0;break;default:if("function"==typeof t)F[_++]=t;else if("object"==typeof t)for(var r=0,n=t.length;r<n;++r)e(t[r]);else D=0|!!t}return e},s.set=l,void 0!==e&&l(e),s}},7113:(e,t,r)=>{"use strict";var n=r(7294),o=r(745),i=r(3935),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.children,r=e.mountRef,n=(void 0===r?{}:r).current||document.body;return(0,i.createPortal)(t,n)},c=r(8047),l=c.ZP.div.withConfig({componentId:"sc-1jopm0p-0"})(["position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:rgba(0,0,0,.4);opacity:",";z-index:5000;"],(function(e){return e.show?.5:0})),s=c.ZP.div.withConfig({componentId:"sc-1jopm0p-1"})(['position:relative;max-width:650px;width:100%;margin:1.75rem auto;padding:1rem;font:400 16px/1 "ProximaNova",Helvetica,sans-serif;letter-spacing:0;color:#15374C;-webkit-font-smoothing:antialiased;pointer-events:none;z-index:5000;']),u=c.ZP.div.withConfig({componentId:"sc-1jopm0p-2"})(["position:relative;display:flex;flex-direction:column;width:100%;height:",";max-height:580px;border-radius:8px;background-color:#fff;box-shadow:0px 2px 6px rgba(0,0,0,0.16),0px 4px 16px rgba(0,0,0,0.12);pointer-events:auto;"],(function(e){return e.size||"100%"})),f=c.ZP.div.withConfig({componentId:"sc-1jopm0p-3"})(["flex-shrink:0;padding:16px 32px;"]),p=c.ZP.div.withConfig({componentId:"sc-1jopm0p-4"})(["display:flex;flex-direction:column;flex:1 1 auto;padding:0 32px 16px;overflow-y:auto;"," "," .modal--iframe &{padding-right:0;}"],(function(e){return e.isBodyScrollable&&"border-bottom: 1px solid #E5EBEE;"}),(function(e){return e.bodyScrollTop&&"border-top: 1px solid #E5EBEE;"})),d=c.ZP.footer.withConfig({componentId:"sc-1jopm0p-5"})(["flex-shrink:0;padding:10px 32px 16px;"]),m=c.ZP.button.withConfig({componentId:"sc-1jopm0p-6"})(["position:absolute;top:-3px;right:-25px;width:22px;height:22px;margin:0;padding:4px;border:none;background:none;cursor:pointer;&:focus{outline:none;}&:focus svg{box-shadow:0 0 0 2px #00a3d9;border-radius:2px;}svg{width:14px;height:14px;fill:#FFFFFF;}@media (max-width:680px){top:8px;right:6px;svg{fill:#333333 !important;}}"]),h=c.ZP.h2.withConfig({componentId:"sc-1jopm0p-7"})(['margin:0 !important;padding:0 !important;font:bold 24px/1.2 "ProximaNova",Helvetica,sans-serif !important;color:#000 !important;']),b=(c.ZP.div.withConfig({componentId:"sc-1jopm0p-8"})(["display:flex;flex-flow:row wrap;justify-content:flex-end;margin:-5px;"]),c.ZP.div.withConfig({componentId:"sc-1jopm0p-9"})(["padding:5px;"]),c.ZP.p.withConfig({componentId:"sc-1jopm0p-10"})(["margin:0;margin-bottom:0.5rem;"]),c.ZP.p.withConfig({componentId:"sc-1jopm0p-11"})(['margin:8px 0 0 !important;padding:0 !important;font:400 16px/1.2 "ProximaNova",Helvetica,sans-serif !important;color:#333333 !important;'])),g=c.ZP.div.withConfig({componentId:"sc-1jopm0p-12"})(["position:fixed;top:0;left:0;width:100%;height:100%;overflow-x:hidden;overflow-y:auto;z-index:5000;box-sizing:border-box;*{box-sizing:inherit;}&:before{box-sizing:inherit;}&:after{box-sizing:inherit;}.borderTop{border-top:1px solid #E5EBEE;}.borderBottom{border-bottom:1px solid #E5EBEE;}"," ",""],(function(e){return e.hasScrollableContent&&(0,c.iv)(["display:flex;","{display:flex;align-items:center;min-height:calc(100% - 5.5rem);}","{margin-bottom:0;padding:16px 32px;}","{padding:0 32px;}"],s,f,p)}),(function(e){return e.isVerticalCentered&&(0,c.iv)(["","{display:flex;align-items:center;min-height:calc(100% - 5.5rem);}"],s)}));function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var w=n.forwardRef((function(e,t){var r=e.closeModal,o=void 0===r?function(){}:r,i=e.withCloseBtn,c=void 0===i||i,v=e.withOverlay,w=void 0===v||v,k=e.title,x=e.description,C=e.children,O=e.footer,j=void 0!==O&&O,S=e.hasScrollableContent,P=e.isScrollToAudienceSetting,A=e.isVerticalCentered,E=void 0===A||A,T=e.style,L=void 0===T?{}:T,F=e.size,_=e.className,I=e.closeOnEscape,D=void 0===I||I,$=(0,n.useRef)(null),M=(0,n.useRef)(null);(0,n.useEffect)((function(){var e=function(e){"Escape"===e.key&&D&&o()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[o,D]),(0,n.useImperativeHandle)(t,(function(){return{elements:{modal:$.current,body:M.current}}}));var N=(0,n.useMemo)((function(){return{modal:window.scrollY+window.visualViewport.height/2}}),[]),z=y((0,n.useState)(!1),2),Z=z[0],R=z[1],H=y((0,n.useState)(null),2),U=H[0],B=H[1],J=o,V=e.onFaderClick||J;return(0,n.useEffect)((function(){return document.body.style.overflow="hidden",function(){document.querySelectorAll("[data-react-overlay]").length||(document.body.style.overflow="")}}),[]),(0,n.useEffect)((function(){P&&M.current.scrollTo({top:1e3,behavior:"smooth"})}),[P]),(0,n.useLayoutEffect)((function(){var e=new ResizeObserver((function(){M.current&&j&&(M.current.clientHeight<M.current.scrollHeight?R(!0):R(!1))}));return e.observe(M.current),function(){e.unobserve(M.current)}}),[M,j]),n.createElement(a,null,n.createElement(l,{show:w,"data-react-overlay":!0}),n.createElement(g,{hasScrollableContent:S,isVerticalCentered:E,onClick:function(e){e.target.dataset.modalWrapper&&V()},"data-modal-wrapper":!0},n.createElement(s,{className:_,ref:$,top:N.modal,"data-react-modal":!0,style:L.subContainer||{}},n.createElement(u,{size:F},n.createElement(f,null,k&&n.createElement(h,null,k),x&&n.createElement(b,null,x),c&&n.createElement(m,{className:"svgicon flaticon flaticon--cross",onClick:o,"aria-label":"Close","aria-required":"true"},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"svgicon flaticon flaticon--cross",width:"16",height:"16"},n.createElement("use",{xlinkHref:"#flaticon--cross"})))),n.createElement(p,{ref:M,onScroll:function(e){B(e.target.scrollTop)},isBodyScrollable:Z,bodyScrollTop:U,className:"m-scrollbar"},C),j&&n.createElement(d,null,j)))))})),k=c.ZP.button.withConfig({componentId:"sc-i33ylv-0"})(["position:relative;display:inline-block;padding:6px 16px;box-sizing:border-box;border-radius:4px;vertical-align:middle;text-align:center;font:inherit;font-size:14px;line-height:1;cursor:pointer;transition:border-color .2s,background-color .2s,color .2s;"," "," "," "," "," ",""],(function(e){return e.primary?(0,c.iv)(["color:#FFFFFF;background-color:#00A3D9;border:1px solid #00A3D9;&:hover,&:focus{border-color:#00C0FF;background-color:#00C0FF;}&:active{border-color:#0996C5;background-color:#0996C5;}"]):(0,c.iv)(["color:#333333;background-color:#FFFFFF;border:1px solid #D4DCE0;&:hover,&:focus{border-color:#00A3D9;background-color:#FFFFFF;}&:active{border-color:#D4DCE0;background-color:#F9FAFA;}"])}),(function(e){return e.isLoading&&(0,c.iv)(["color:transparent;"])}),(function(e){var t=e.disabled,r=e.primary;return t&&(0,c.iv)(["opacity:.5;cursor:not-allowed;&:hover,&:focus{background-color:",";border-color:",";}"],r?"#00A3D9":"#FFFFFF",r?"#00A3D9":"#D4DCE0")}),(function(e){return e.noBorder&&(0,c.iv)(["border:1px solid transparent;color:#00A3D9;background-color:transparent;&:hover,&:focus{border-color:#00A3D9;}&:active{border-color:#0996C5;color:#0996C5;}"])}),(function(e){return e.hasOutline&&(0,c.iv)(["border:1px solid #D4DCE0;color:#333;background-color:transparent;&:hover{border-color:#BDC8CD;background-color:transparent;}&:focus{border-color:#00A3D9;background-color:transparent;}&:active{border-color:#F9FAFA;background-color:transparent;}"])}),(function(e){return e.sizeL&&(0,c.iv)(["padding:8px 16px;"])})),x=c.ZP.div.withConfig({componentId:"sc-i33ylv-1"})(["position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);color:#FFFFFF;svg{display:block;animation:svgrotate .57s linear infinite;}@keyframes svgrotate{100%{transform:rotate(360deg);}}"]),C=["children","type","onClick","isLoading","disabled","primary","className"];function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O.apply(this,arguments)}const j=function(e){var t=e.children,r=e.type,o=e.onClick,i=e.isLoading,a=e.disabled,c=e.primary,l=e.className,s=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,C);return n.createElement(k,O({type:r,onClick:o,isLoading:i,disabled:a},s,{primary:c,className:l}),i&&n.createElement(x,null,n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"svgicon flaticon flaticon--preloader",width:"14",height:"14"},n.createElement("use",{xlinkHref:"#flaticon--preloader"}))),t)};var S=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter(Boolean).join(" ")},P=c.ZP.a.withConfig({componentId:"sc-7u2ddd-0"})([""]),A=c.ZP.a.withConfig({componentId:"sc-7u2ddd-1"})([""]),E=c.ZP.span.withConfig({componentId:"sc-7u2ddd-2"})(["","{margin-right:4px !important;}"],P);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==T(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===T(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var D=c.ZP.p.withConfig({componentId:"sc-1sdxlvk-0"})(['margin:0 !important;margin-bottom:12px !important;padding:0 !important;font:400 16px/1.4 "ProximaNova",Helvetica,sans-serif !important;color:#000000 !important;-webkit-font-smoothing:antialiased;span{margin-right:5px;}']),$=(0,c.ZP)((function(e){var t,r=e.className,o=e.linksTarget,i=void 0===o?"_self":o,a=e.noCtxPopup,c=void 0===a||a,l=e.userData,s=l.username,u=l.userheadUrl,f=l.displayName,p=l.displayUsername,d=l.profileUrl,m=l.journalUrl,h=l.journalType,b=l.isInvisible,g=_({as:d?"a":"span",className:"i-ljuser-profile"},d?{href:d,target:i}:{}),y=_({as:m?"a":"span",className:"i-ljuser-username"},m?{href:m,target:i,title:p}:{});return n.createElement(E,{className:S(["ljuser","i-ljuser",h&&"i-ljuser-type-".concat(h),b&&"i-ljuser-deleted"].concat((t=c?["i-ljuser-nopopup","noctxpopup"]:[],function(e){if(Array.isArray(e))return L(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[r])),"data-ljuser":s},u&&n.createElement(P,g,n.createElement("img",{className:"i-ljuser-userhead",src:u})),n.createElement(A,y,f||p))})).withConfig({componentId:"sc-1sdxlvk-1"})(['font-weight:inherit !important;text-transform:inherit !important;-webkit-font-smoothing:antialiased;.i-ljuser-profile{display:inline-flex;transform:translateY(2px);text-decoration:none !important;background-color:transparent !importnat;}.i-ljuser-username{font:400 16px/1.4 "ProximaNova",Helvetica,sans-serif !important;color:#00A3D9 !important;text-decoration:none !important;background-color:transparent !importnat;&:visited{color:#00A3D9 !important;}&:hover,&:active,&:focus{color:#0086B3 !important;}}']),M=c.ZP.input.withConfig({componentId:"sc-1sdxlvk-2"})([""]),N=c.ZP.p.withConfig({componentId:"sc-1sdxlvk-3"})(['margin:0 !important;margin-top:8px !important;padding:0 !important;font:400 14px/1.4 "ProximaNova",Helvetica,sans-serif !important;color:#7A9199 !important;-webkit-font-smoothing:antialiased;']),z=c.ZP.div.withConfig({componentId:"sc-1sdxlvk-4"})(["display:flex;flex-flow:row wrap;button{margin-left:auto;}"]),Z=c.ZP.a.withConfig({componentId:"sc-1sdxlvk-5"})(['border:0 !important;font:400 14px/1.4 "ProximaNova",Helvetica,sans-serif !important;color:#00A3D9 !important;text-decoration:none !important;background-color:transparent !importnat;-webkit-font-smoothing:antialiased;&:visited{color:#00A3D9 !important;}&:hover,&:active,&:focus{color:#0086B3 !important;}']);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function H(){H=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),c=new j(o||[]);return n(a,"_invoke",{value:k(e,r,c)}),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var f={};function p(){}function d(){}function m(){}var h={};l(h,i,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(S([])));g&&g!==t&&r.call(g,i)&&(h=g);var y=m.prototype=p.prototype=Object.create(h);function v(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var l=u(e[n],e,i);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==R(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(f).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,c)}))}c(l.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function k(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function x(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function S(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=m,n(y,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:d,configurable:!0}),d.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(w.prototype),l(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},v(y),l(y,c,"Generator"),l(y,i,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=S,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:S(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function U(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){V(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function V(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==R(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===R(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?G(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const Y=function(){var e,t,r,o,i=q((0,n.useState)({}),2),a=i[0],c=i[1],l=q((0,n.useState)(!1),2),s=l[0],u=l[1],f=q((0,n.useState)({currentTokens:null!==(e=null===(t=Site.remote)||void 0===t?void 0:t.balance)&&void 0!==e?e:0,afterTokens:null!==(r=null===(o=Site.remote)||void 0===o?void 0:o.balance)&&void 0!==r?r:0,giftTokens:"",commission:0}),2),p=f[0],d=f[1];if((0,n.useEffect)((function(){LJ.Components.TokenModal.setUserData=function(e){c(e)}}),[]),(0,n.useEffect)((function(){LJ.Components.TokenModal.show=function(){u(!0)}}),[]),!s)return null;var m=function(){u(!1)},h=function(){var e,t=(e=H().mark((function e(){var t,r,n;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,LJ.Api.callP("shop.buy_tokens",{recipient:a.username,amount:p.giftTokens}).catch((function(e){return{error:e}}));case 2:if(!(t=e.sent).error){e.next=7;break}return LJ.Messages.add({type:"error",body:"[Code error: ".concat(t.error.code,"] ").concat(t.error.message)}),m(),e.abrupt("return");case 7:LJ.Messages.add({type:"success",body:LJ.ml("modal.gift_token.message.success")}),(r=LJ.Messages.get()[0])&&setTimeout((function(){LJ.Messages.remove(r)}),5e3),n=p.afterTokens,d((function(e){return J(J({},e),{},{giftTokens:"",commission:0,currentTokens:n})})),m();case 13:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){U(i,n,o,a,c,"next",e)}function c(e){U(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),b=n.createElement(z,null,p.currentTokens<2?n.createElement(Z,{href:"".concat(Site.siteroot,"/shop/tokens.bml"),target:"_self"},LJ.ml("modal.gift_token.buy")):n.createElement(j,{type:"button",onClick:h,primary:!0,sizeL:!0,disabled:p.giftTokens<0},LJ.ml("modal.gift_token.button")));return n.createElement(w,{title:LJ.ml("modal.gift_token.title"),closeModal:function(){m()},footer:b},n.createElement(D,null,n.createElement("span",null,LJ.ml("modal.gift_token.text")),n.createElement($,{userData:{username:Site.journal.display_username,userheadUrl:Site.journal.userhead_url,displayUsername:Site.journal.display_username,profileUrl:Site.journal.profile_url,journalUrl:Site.journal.journal_url}})),n.createElement(M,{type:"number",className:"lightinput lightinput--big",value:p.giftTokens,onChange:function(e){if(!(e.target.value<0)){var t,r=e.target.value>p.currentTokens?+p.currentTokens:+e.target.value,n=p.currentTokens-r;t=0===r?0:r<20?1:Math.ceil(5*r/100),d((function(e){return J(J({},e),{},{giftTokens:r,afterTokens:n,commission:t})}))}},onKeyDown:function(e){"e"===e.key&&e.preventDefault(),"Enter"===e.key&&p.giftTokens>=2&&p.giftTokens<=p.currentTokens&&h()},min:"0",max:p.currentTokens,disabled:p.currentTokens<2}),n.createElement(N,{dangerouslySetInnerHTML:{__html:LJ.ml("modal.gift_token.description",{commission:p.commission,token:p.afterTokens})}}))};LJ.define("LJ.Components.TokenModal"),LJ.Util.DOM.initPromise.then((function(){var e=document.createElement("div");e.dataset.tokenModalComp="",document.body.appendChild(e),(0,o.s)(e).render(n.createElement(Y,null))}))},8679:(e,t,r)=>{"use strict";var n=r(9864),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},c={};function l(e){return n.isMemo(e)?a:c[e.$$typeof]||o}c[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},c[n.Memo]=a;var s=Object.defineProperty,u=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,m=Object.prototype;e.exports=function e(t,r,n){if("string"!=typeof r){if(m){var o=d(r);o&&o!==m&&e(t,o,n)}var a=u(r);f&&(a=a.concat(f(r)));for(var c=l(t),h=l(r),b=0;b<a.length;++b){var g=a[b];if(!(i[g]||n&&n[g]||h&&h[g]||c&&c[g])){var y=p(r,g);try{s(t,g,y)}catch(e){}}}}return t}},9921:(e,t)=>{"use strict";var r="function"==typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,a=r?Symbol.for("react.strict_mode"):60108,c=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,s=r?Symbol.for("react.context"):60110,u=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.suspense_list"):60120,h=r?Symbol.for("react.memo"):60115,b=r?Symbol.for("react.lazy"):60116,g=r?Symbol.for("react.block"):60121,y=r?Symbol.for("react.fundamental"):60117,v=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function k(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case u:case f:case i:case c:case a:case d:return e;default:switch(e=e&&e.$$typeof){case s:case p:case b:case h:case l:return e;default:return t}}case o:return t}}}function x(e){return k(e)===f}t.AsyncMode=u,t.ConcurrentMode=f,t.ContextConsumer=s,t.ContextProvider=l,t.Element=n,t.ForwardRef=p,t.Fragment=i,t.Lazy=b,t.Memo=h,t.Portal=o,t.Profiler=c,t.StrictMode=a,t.Suspense=d,t.isAsyncMode=function(e){return x(e)||k(e)===u},t.isConcurrentMode=x,t.isContextConsumer=function(e){return k(e)===s},t.isContextProvider=function(e){return k(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return k(e)===p},t.isFragment=function(e){return k(e)===i},t.isLazy=function(e){return k(e)===b},t.isMemo=function(e){return k(e)===h},t.isPortal=function(e){return k(e)===o},t.isProfiler=function(e){return k(e)===c},t.isStrictMode=function(e){return k(e)===a},t.isSuspense=function(e){return k(e)===d},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===f||e===c||e===a||e===d||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===b||e.$$typeof===h||e.$$typeof===l||e.$$typeof===s||e.$$typeof===p||e.$$typeof===y||e.$$typeof===v||e.$$typeof===w||e.$$typeof===g)},t.typeOf=k},9864:(e,t,r)=>{"use strict";e.exports=r(9921)},53:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,o=e[n];if(!(0<i(o,t)))break e;e[n]=t,e[r]=o,r=n}}function n(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,o=e.length,a=o>>>1;n<a;){var c=2*(n+1)-1,l=e[c],s=c+1,u=e[s];if(0>i(l,r))s<o&&0>i(u,l)?(e[n]=u,e[s]=r,n=s):(e[n]=l,e[c]=r,n=c);else{if(!(s<o&&0>i(u,r)))break e;e[n]=u,e[s]=r,n=s}}}return t}function i(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,l=c.now();t.unstable_now=function(){return c.now()-l}}var s=[],u=[],f=1,p=null,d=3,m=!1,h=!1,b=!1,g="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function w(e){for(var t=n(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,r(s,t)}t=n(u)}}function k(e){if(b=!1,w(e),!h)if(null!==n(s))h=!0,_(x);else{var t=n(u);null!==t&&I(k,t.startTime-e)}}function x(e,r){h=!1,b&&(b=!1,y(S),S=-1),m=!0;var i=d;try{for(w(r),p=n(s);null!==p&&(!(p.expirationTime>r)||e&&!E());){var a=p.callback;if("function"==typeof a){p.callback=null,d=p.priorityLevel;var c=a(p.expirationTime<=r);r=t.unstable_now(),"function"==typeof c?p.callback=c:p===n(s)&&o(s),w(r)}else o(s);p=n(s)}if(null!==p)var l=!0;else{var f=n(u);null!==f&&I(k,f.startTime-r),l=!1}return l}finally{p=null,d=i,m=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,O=!1,j=null,S=-1,P=5,A=-1;function E(){return!(t.unstable_now()-A<P)}function T(){if(null!==j){var e=t.unstable_now();A=e;var r=!0;try{r=j(!0,e)}finally{r?C():(O=!1,j=null)}}else O=!1}if("function"==typeof v)C=function(){v(T)};else if("undefined"!=typeof MessageChannel){var L=new MessageChannel,F=L.port2;L.port1.onmessage=T,C=function(){F.postMessage(null)}}else C=function(){g(T,0)};function _(e){j=e,O||(O=!0,C())}function I(e,r){S=g((function(){e(t.unstable_now())}),r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){h||m||(h=!0,_(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(s)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var r=d;d=t;try{return e()}finally{d=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=d;d=e;try{return t()}finally{d=r}},t.unstable_scheduleCallback=function(e,o,i){var a=t.unstable_now();switch(i="object"==typeof i&&null!==i&&"number"==typeof(i=i.delay)&&0<i?a+i:a,e){case 1:var c=-1;break;case 2:c=250;break;case 5:c=1073741823;break;case 4:c=1e4;break;default:c=5e3}return e={id:f++,callback:o,priorityLevel:e,startTime:i,expirationTime:c=i+c,sortIndex:-1},i>a?(e.sortIndex=i,r(u,e),null===n(s)&&e===n(u)&&(b?(y(S),S=-1):b=!0,I(k,i-a))):(e.sortIndex=c,r(s,e),h||m||(h=!0,_(x))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=d;return function(){var r=d;d=t;try{return e.apply(this,arguments)}finally{d=r}}}},3840:(e,t,r)=>{"use strict";e.exports=r(53)},6774:e=>{e.exports=function(e,t,r,n){var o=r?r.call(n,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(t),l=0;l<i.length;l++){var s=i[l];if(!c(s))return!1;var u=e[s],f=t[s];if(!1===(o=r?r.call(n,u,f,s):void 0)||void 0===o&&u!==f)return!1}return!0}}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,n),i.exports}n.m=t,e=[],n.O=(t,r,o,i)=>{if(!r){var a=1/0;for(u=0;u<e.length;u++){for(var[r,o,i]=e[u],c=!0,l=0;l<r.length;l++)(!1&i||a>=i)&&Object.keys(n.O).every((e=>n.O[e](r[l])))?r.splice(l--,1):(c=!1,i<a&&(a=i));if(c){e.splice(u--,1);var s=o();void 0!==s&&(t=s)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[r,o,i]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={424:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var o,i,[a,c,l]=r,s=0;if(a.some((t=>0!==e[t]))){for(o in c)n.o(c,o)&&(n.m[o]=c[o]);if(l)var u=l(n)}for(t&&t(r);s<a.length;s++)i=a[s],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},r=self.webpackChunkfrontend_bundled=self.webpackChunkfrontend_bundled||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),n.nc=void 0;var o=n.O(void 0,[116],(()=>n(7113)));o=n.O(o)})();
/* <<< file end: js/front-bundled/dist/tokenModal.js */

//# map link was there [tokenModal.js.map]
/* >>> file start: js/components/controlStrip/index.js */
//= require js/front-bundled/dist/tokenModal.js
!function(e){return e}(),function(){LJ.Event.on("userNoteChange",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.userid,t=e.noteValue;if(n===Site.journal.id){var o=document.querySelector(".js--user_status.js--user-note");if(o){o.innerText=t;var r=document.querySelector(".js--user_status_dash");r.style.display=t?"":"none"}}}),LJ.Util.DOM.initPromise.then(function(){var e=Array.from(document.querySelectorAll(".js--token-button"));e.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),LJ.Components.TokenModal.setUserData({username:LJ.get("journal.username")}),LJ.Components.TokenModal.show({anchorNode:e.target})})})})}();
/* <<< file end: js/components/controlStrip/index.js */

//# map link was there [index.js.map]
/* >>> file start: js/old/ljwidget.js */
window.LJWidget=new Class(Object,{updateContent:function(t){t||(t={}),this._show_frame=t.showFrame,t.method&&(method=t.method),t._widget_update=1,this.doAjaxRequest(t)&&this.hilightFrame()},getWidget:function(){return $(this.widgetId)},doPost:function(t){t||(t={}),this._show_frame=t.showFrame;var e={},i=this.widgetClass;i="Widget["+i.replace(/::/g,"_")+"]_";for(var a in t){var r=a;a.match(/^Widget\[/)||"lj_form_auth"==a||a.match(/^_widget/)||(r=i+a),e[r]=t[a]}e._widget_post=1,this.doAjaxRequest(e)},doPostAndUpdateContent:function(t){t||(t={}),t._widget_update=1,this.doPost(t)},postForm:function(t){if(!t)return!1;for(var e={},i=0;i<t.elements.length;i++){var a=t.elements[i],r=a.name,o=a.value;e[r]=o}this.doPost(e)},init:function(t,e,i){LJWidget.superClass.init.apply(this,arguments),this.widgetId=t,this.widgetClass=e,this.authToken=i},hilightFrame:function(){if(1==this._show_frame&&!this._frame){var t=this.getWidget();if(t){var e=t.parentNode;if(e){var i=document.createElement("fieldset");i.style.borderColor="red";var a=document.createElement("legend");a.innerHTML="Updating...",i.appendChild(a),e.appendChild(i),i.appendChild(t),this._frame=i}}}},removeHilightFrame:function(){if(1==this._show_frame){var t=this.getWidget();if(t&&this._frame){var e=this._frame.parentNode;e&&(e.appendChild(t),e.removeChild(this._frame),this._frame=null)}}},method:"POST",endpoint:"widget",requestParams:{},doAjaxRequest:function(t){if(t||(t={}),this._ajax_updating)return!1;this._ajax_updating=!0,t._widget_id=this.widgetId,t._widget_class=this.widgetClass,t.auth_token=this.authToken,$("_widget_authas")&&(t.authas=$("_widget_authas").value);var e={method:this.method,data:HTTPReq.formEncoded(t),url:LiveJournal.getAjaxUrl(this.endpoint),onData:this.ajaxDone.bind(this),onError:this.ajaxError.bind(this)};for(var i in t)e[i]=t[i];return HTTPReq.getJSON(e),!0},ajaxDone:function(t){if(this._ajax_updating=!1,this.removeHilightFrame(),t._widget_body&&t._widget_body.match(/ajax:.[^"]+/)&&(this.authToken=t._widget_body.match(/ajax:.[^"]+/)[0]),t.auth_token&&(this.authToken=t.auth_token),t.errors&&""!=t.errors)return this.ajaxError(t.errors);if(t.error)return this.ajaxError(t.error);if(this.onData&&this.onData(t),t._widget_body){var e=this.getWidget();if(!e)return;e.innerHTML=t._widget_body,this.onRefresh&&this.onRefresh()}},ajaxError:function(t){this._ajax_updating=!1,this.skipError||(this.onError?this.onError(t):LiveJournal.ajaxError(t))}}),LJWidget.widgets=[];
/* <<< file end: js/old/ljwidget.js */

//# map link was there [ljwidget.js.map]
/* >>> file start: js/deprecated/dom.js */
function _textSpan(){return _textElements("span",arguments)}function _textDiv(){return _textElements("div",arguments)}function _textElements(t,e){for(var n=[],r=0;r<e.length;r++){var u=document.createElement(t);u.innerHTML=e[r],n.push(u)}return 1==n.length?n[0]:n}
/* <<< file end: js/deprecated/dom.js */

//# map link was there [dom.js.map]
/* >>> file start: js/old/ippu.js */
function changeOpac(e,t){var i=$(e);if(i&&i.style){var s=i.style;s&&(IPPU.isSafari()&&t>=100&&(t=99.99),s.filters&&(s.filters.alpha.opacity=100*t),s.opacity=t)}}window.IPPU=new Class(Object,{setFixedPosition:function(e){IPPU.isIE()||(this.fixedPosition=e,this.updateContent())},clickHandler:function(e){if(this.clickToClose&&this.visible()){e=Event.prep(e);var t=e.target;DOM.getAncestorsByClassName(t,"ippu",!0).length>0||this.cancel()}},setCancelledCallback:function(e){this.cancelledCallback=e},cancel:function(){this.cancelledCallback&&this.cancelledCallback(),this.hide()},setHiddenCallback:function(e){this.hiddenCallback=e},setupClickCapture:function(){if(this.visible()&&!this.clickHandlerSetup&&(this.clickToClose||this.modal)){if(this.clickHandlerFunc=this.clickHandler.bindEventListener(this),this.modal){if(this.overlay)return;this.overlay=document.createElement("div"),this.overlay.style.left="0px",this.overlay.style.top="0px",this.overlay.style.margin="0px",this.overlay.style.padding="0px",this.overlay.style.backgroundColor="#000000",this.overlay.style.zIndex="900",IPPU.isIE()?(this.overlay.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity=50)",this.overlay.style.position="absolute",this.overlay.style.width=document.body.scrollWidth,this.overlay.style.height=document.body.scrollHeight):this.overlay.style.position="fixed",this.ele.parentNode.insertBefore(this.overlay,this.ele),this.updateOverlay(),DOM.addEventListener(this.overlay,"click",this.clickHandlerFunc)}else DOM.addEventListener(document,"click",this.clickHandlerFunc);this.clickHandlerSetup=!0}},updateOverlay:function(){if(this.overlay){var e=DOM.getClientDimensions();this.overlay.style.width=e.x-1+"px",IPPU.isIE()||(this.overlay.style.height=e.y-1+"px"),this.visibleOverlay?(this.overlay.backgroundColor="#000000",changeOpac(this.overlay,.5)):(this.overlay.backgroundColor="#FFFFFF",changeOpac(this.overlay,0))}},resizeHandler:function(e){this.updateContent()},removeClickHandlers:function(){if(this.clickHandlerSetup){DOM.removeEventListener(document,"click",this.clickHandlerFunc,!1),this.overlay&&(DOM.removeEventListener(this.overlay,"click",this.clickHandlerFunc,!0),this.overlay.parentNode.removeChild(this.overlay),this.overlay=void 0),this.clickHandlerFunc=void 0,this.clickHandlerSetup=!1}},setClickToClose:function(e){if(this.clickToClose=e,!this.clickHandlerSetup&&e&&this.visible()){var t=this.setupClickCapture.bind(this);window.setTimeout(t,100)}else!e&&this.clickHandlerSetup&&this.removeClickHandlers();this.updateContent()},setModal:function(e){var t=this.modal==e;e&&this.setClickToClose(!1),this.modal=e,t&&(this.removeClickHandlers(),this.updateContent())},setOverlayVisible:function(e){this.visibleOverlay=e,this.updateContent()},updateContent:function(){this.autoCenter(),this.updateTitlebar(),this.updateOverlay(),this.titlebar&&this.setTitlebarClass(this.titlebar.className);var e=this.setupClickCapture.bind(this);window.setTimeout(e,100),this.fixedPosition&&"fixed"!=this.ele.style.position?this.ele.style.position="fixed":this.fixedPosition||"fixed"!=this.ele.style.position||(this.ele.style.position="absolute")},getTitlebarElement:function(){return this.titlebar},setTitlebarClass:function(e){this.titlebar&&(this.titlebar.className=e)},setOverflow:function(e){this.ele&&(this.ele.style.overflow=e)},visible:function(){return this.shown},setTitlebar:function(e){if(this.showTitlebar=e,e){if(!this.titlebar){var t=document.createElement("div");if(!t)return;t.style.width="100%",this.title&&(t.innerHTML=this.title),this.ele.insertBefore(t,this.content),this.titlebar=t}}else this.titlebar&&(this.ele.removeChild(this.titlebar),this.titlebar=!1)},setTitle:function(e){this.title=e,this.updateTitlebar()},updateTitlebar:function(){this.showTitlebar&&this.titlebar&&this.title!=this.titlebar.innerHTML&&(this.titlebar.innerHTML=this.title)},addClass:function(e){DOM.addClassName(this.ele,e)},removeClass:function(e){DOM.removeClassName(this.ele,e)},setAutoCenterCallback:function(e){this.autoCenterCallback=e},autoCenter:function(){if(this.visible&&this.visible()){if(this.autoCenterCallback)return void this.autoCenterCallback(this);this.autoCenterX&&this.centerX(),this.autoCenterY&&this.centerY()}},center:function(){this.centerX(),this.centerY()},centerOnWidget:function(e,t,i){t=t||0,i=i||0,this.setAutoCenter(!1,!1),this.setAutoCenterCallback(null);var s=DOM.getAbsoluteDimensions(e),n=DOM.getAbsoluteDimensions(this.ele),l=s.absoluteRight-s.offsetWidth/2-n.offsetWidth/2+i,o=s.absoluteBottom-s.offsetHeight/2-n.offsetHeight/2+t;l=0>l?0:l,o=0>o?0:o,DOM.setLeft(this.ele,l),DOM.setTop(this.ele,o)},centerX:function(){if(this.visible&&this.visible()){var e=DOM.getClientDimensions(),t=e.x/2-this.ele.offsetWidth/2;if(!this.fixedPosition){var i=DOM.getWindowScroll();t+=i.left}DOM.setLeft(this.ele,t)}},centerY:function(){if(this.visible&&this.visible()){var e=DOM.getClientDimensions(),t=e.y/2-this.ele.offsetHeight/2;if(!this.fixedPosition){var i=DOM.getWindowScroll();t+=i.top}DOM.setTop(this.ele,t)}},setAutoCenter:function(e,t){return this.autoCenterX=e||!1,this.autoCenterY=t||!1,e||t?void this.autoCenter():void this.setAutoCenterCallback(null)},setDimensions:function(e,t){e+="",t+="",e.match(/^\d+$/)&&(e+="px"),t.match(/^\d+$/)&&(t+="px"),this.ele.style.width=e,this.ele.style.height=t},moveForward:function(e){e||(e=1),this.ele&&(this.ele.style.zIndex+=e)},moveBackward:function(e){e||(e=1),this.ele&&(this.ele.style.zIndex-=e)},setLocation:function(e,t){this.setLeft(e),this.setTop(t)},setTop:function(e){"string"!=typeof e&&(e+="px"),this.ele.style.top=e},setLeft:function(e){"string"!=typeof e&&(e+="px"),this.ele.style.left=e},getElement:function(){return this.ele},setContent:function(e){this.content.innerHTML=e},setContentElement:function(e){for(;this.content.firstChild;)this.content.removeChild(this.content.firstChild);!function(e){return e}(),this.content.appendChild(e)},setFadeIn:function(e){this.fadeIn=e},setFadeOut:function(e){this.fadeOut=e},setFadeSpeed:function(e){this.fadeSpeed=e},show:function(){if(this.shown=!0,this.fadeIn){var e=.01;changeOpac(this.ele,e)}document.body.appendChild(this.ele),this.ele.style.position="absolute",(this.autoCenterX||this.autoCenterY)&&this.center(),this.updateContent(),this.resizeHandlerFunc||(this.resizeHandlerFunc=this.resizeHandler.bindEventListener(this),DOM.addEventListener(window,"resize",this.resizeHandlerFunc,!1)),this.fadeIn&&this.fade("in"),this.hideSelects()},fade:function e(t,i){var s,n,l=10;if("in"==t)n=1/l,s=.1;else{if(this.ele.style.opacity){var o=parseFloat(this.ele.style.opacity);s=isFinite(o)?o:0}else s=.99;n=-1/l}var a=this.fadeSpeed;a||(a=1);var h=l/a*5;this.fadeMode=t;var r=this,e=function c(){return s+=n,r.fadeMode&&r.fadeMode!=t?void(i&&i.call(r,[])):.1>=s?(i&&i.call(r,[]),void(r.fadeMode=null)):s>=1?(i&&i.call(r,[]),void(r.fadeMode=null)):(changeOpac(r.ele,s),void window.setTimeout(c,h))};e()},hide:function(){this.visible()&&(this.fadeOut&&this.ele?this.fade("out",this._hide.bind(this)):this._hide())},_hide:function(){this.hiddenCallback&&this.hiddenCallback(),this.shown=!1,this.removeClickHandlers(),this.ele&&document.body.removeChild(this.ele),this.resizeHandlerFunc&&DOM.removeEventListener(window,"resize",this.resizeHandlerFunc),this.showSelects()},setAutoHideSelects:function(e){this.autoHideSelects=e,this.updateContent()},hideSelects:function(){if(this.autoHideSelects&&IPPU.isIE())for(var e,t=document.getElementsByTagName("select"),i=0;i<t.length;i++)e=t[i],e&&(DOM.getAncestorsByClassName(e,"ippu",!0).length>0||"hidden"!=e.style.visibility&&(e.style.visibility="hidden",this.hiddenSelects.push(e)))},showSelects:function(){if(this.autoHideSelects)for(var e;e=this.hiddenSelects.pop();)e.style.visibility=""},init:function(e){var t=document.createElement("div");this.ele=t,this.shown=!1,this.autoCenterX=!1,this.autoCenterY=!1,this.titlebar=null,this.title="",this.showTitlebar=!1,this.clickToClose=!1,this.modal=!1,this.clickHandlerSetup=!1,this.docOverlay=!1,this.visibleOverlay=!1,this.clickHandlerFunc=!1,this.resizeHandlerFunc=!1,this.fixedPosition=!1,this.autoCenterCallback=null,this.cancelledCallback=null,this.autoHideSelects=!1,this.hiddenCallback=null,this.fadeOut=!1,this.fadeIn=!1,this.hiddenSelects=[],this.fadeMode=null,t.style.position="absolute",t.style.top=0,t.style.zIndex="1000",DOM.addClassName(t,"ippu"),this.content=document.createElement("div"),this.content.innerHTML=e,this.ele.appendChild(this.content)}}),IPPU.center=function(e){e.centerX(),e.centerY()},IPPU.centerX=function(e){e.centerX()},IPPU.centerY=function(e){e.centerY()},IPPU.isIE=function(){var e=navigator.userAgent.toLowerCase();return-1!=e.indexOf("msie")},IPPU.isSafari=function(){var e=navigator.userAgent.toLowerCase();return-1!=e.indexOf("safari")};
/* <<< file end: js/old/ippu.js */

//# map link was there [ippu.js.map]
/* >>> file start: js/deprecated/lj_ippu.js */
//= require js/deprecated/dom.js
//= require js/old/ippu.js
window.LJ_IPPU=new Class(IPPU,{init:function(t){t||(t=""),LJ_IPPU.superClass.init.apply(this,[]),this.uniqId=this.generateUniqId(),this.cancelThisFunc=this.cancel.bind(this),this.setTitle(t),this.setTitlebar(!0),this.setTitlebarClass("lj_ippu_titlebar"),this.addClass("lj_ippu"),this.setAutoCenterCallback(IPPU.center),this.setDimensions(514,"auto"),this.setFixedPosition(!0),this.setClickToClose(!0),this.setAutoHideSelects(!0),"Entry Summary"!==t&&"Reporters"!==t||this.addClass("admin-popup")},setTitle:function(t){var e="      <div style='float:right; padding-right: 8px'><img src='"+Site.imgprefix+"/CloseButton.gif?v=7618' width='15' height='15' id='"+this.uniqId+"_cancel' /></div>"+t;LJ_IPPU.superClass.setTitle.apply(this,[e])},generateUniqId:function(){var t=new Date;return"lj_ippu_"+t.getHours()+t.getMinutes()+t.getMilliseconds()},show:function(){LJ_IPPU.superClass.show.apply(this);var t=this.setup_lj_ippu.bind(this);this.timerSetup=window.setTimeout(t,300)},setup_lj_ippu:function(t){var e=this.cancelThisFunc;$(this.uniqId+"_cancel").onclick=function(){e()};var i=document.querySelector(".admin-popup"),s=i.getBoundingClientRect(),n=s.top;0>n&&(i.style.marginTop="".concat(Math.abs(n)+80,"px")),i.style.opacity=1,i.style.visibility="visible"},hide:function(){clearInterval(this.timerSetup),LJ_IPPU.superClass.hide.apply(this)}}),LJ_IPPU.showNote=function(t,e,i,s){var n=document.createElement("div");return n.innerHTML=t,LJ_IPPU.showNoteElement(n,e,i,s)},LJ_IPPU.showErrorNote=function(t,e,i){return LJ_IPPU.showNote(t,e,i,"ErrorNote")},LJ_IPPU.showNoteElement=function(t,e,i,s){var n=new IPPU;n.init();var o=document.createElement("div");DOM.addClassName(o,"Inner"),o.appendChild(t),n.setContentElement(o),n.setTitlebar(!1),n.setFadeIn(!0),n.setFadeOut(!0),n.setFadeSpeed(4),n.setDimensions("auto","auto"),s||(s="Note"),n.addClass(s);var a;if(!e||(a=DOM.getAbsoluteDimensions(e))){var l=DOM.getClientDimensions();if(l){if(a){n.setAutoCenter(!1,!1),n.setLocation(a.absoluteLeft,a.absoluteBottom+4),n.show();var r=DOM.getAbsoluteDimensions(n.getElement());r.absoluteRight>l.x&&n.setLocation(l.x-r.offsetWidth-30,a.absoluteBottom+4)}else n.setAutoCenter(!0,!0),n.show();return n.setClickToClose(!0),n.moveForward(),void 0===i&&(i=5e3),i&&window.setTimeout(function(){n&&n.hide()},i),n}}},LJ_IPPU.textPrompt=function(t,e,i,s){s=s||{},t+="";var n=new LJ_IPPU(t),o=document.createElement("div");DOM.addClassName(o,"ljippu_textprompt"),e&&o.appendChild(_textDiv(e));var a=document.createElement("textarea");DOM.addClassName(a,"htmlfield"),a.cols=40,a.rows=5,o.appendChild(a);var l=document.createElement("div");DOM.addClassName(l,"submitbtncontainer");var r=document.createElement("input");DOM.addClassName(r,"submitbtn"),r.type="button",r.value="Insert",l.appendChild(r),o.appendChild(l),n.setContentElement(o),n.setAutoCenter(!0,!0),n.setDimensions(s.width||"60%","auto"),n.show(),a.focus(),DOM.addEventListener(r,"click",function(t){n.hide(),i&&i.apply(null,[a.value])})};
/* <<< file end: js/deprecated/lj_ippu.js */

//# map link was there [lj_ippu.js.map]
/* >>> file start: js/deprecated/ljwidget_ippu.js */
//= require js/old/ljwidget.js
//= require js/deprecated/lj_ippu.js
window.LJWidgetIPPU=new Class(LJWidget,{init:function(t,e){var i=t.title,n=t.widgetClass,s=t.authToken,a=t.nearElement,l=t.not_view_close,d=t.popupClass;e||(e={}),this.reqParams=e;var o=new LJ_IPPU(i,a);this.ippu=o;var h=document.createElement("div");h.id="LJWidgetIPPU_"+Unique.id(),o.setContentElement(h),d&&this.ippu.ele.classList.add(d),t.width&&t.height&&o.setDimensions(t.width,t.height),t.overlay&&(IPPU.isIE()?(this.ippu.setModal(!0),this.ippu.setOverlayVisible(!0),this.ippu.setClickToClose(!1)):(this.ippu.setModal(!0),this.ippu.setOverlayVisible(!0))),t.center&&o.center(),o.show(),l&&(o.titlebar.getElementsByTagName("img")[0].style.display="none");var u=document.createElement("div");u.style.fontSize="1.5em",u.style.fontWeight="bold",u.style.margin="5px",u.style.textAlign="center",u.innerHTML="Loading...",this.loadingText=u,h.appendChild(u);var r=[h.id,n,s];LJWidgetIPPU.superClass.init.apply(this,r);var g=this;return o.setCancelledCallback(function(){g.cancel&&g.cancel()}),n?(this.widgetClass=n,this.authToken=s,this.title=i,this.nearEle=a,window.setInterval(this.animateLoading.bind(this),20),this.loaded=!1,this.loadContent(),this):null},animateCount:0,animateLoading:function(t){var e=this.loadingText;if(this.loaded||!e)return void window.clearInterval(t);this.animateCount+=.05;var i=(Math.sin(this.animateCount)+1)/2*255,n=Math.round(i).toString(16);1==n.length&&(n="0"+n),n+=n+n,e.style.color="#"+n,this.ippu.center()},doAjaxRequest:function(t){t||(t={}),t._widget_ippu=1,document.getElementById("LJ__Setting__InvisibilityGuests_invisibleguests_self")&&(t["Widget[IPPU_SettingProd]_LJ__Setting__InvisibilityGuests_invisibleguests"]=1==document.getElementById("LJ__Setting__InvisibilityGuests_invisibleguests_self").checked?1:1==document.getElementById("LJ__Setting__InvisibilityGuests_invisibleguests_anon").checked?2:0),LJWidgetIPPU.superClass.doAjaxRequest.apply(this,[t])},close:function(){this.ippu.hide()},loadContent:function(){var t=this.reqParams;this.updateContent(t)},method:"POST",onData:function(t){this.loaded=!0},render:function(t){}});
/* <<< file end: js/deprecated/ljwidget_ippu.js */

//# map link was there [ljwidget_ippu.js.map]
/* >>> file start: js/jquery/jquery.center.js */
!function(t){return t}(),function(t){t.fn.center=function(){var i=t(window),h=({width:i.width(),height:i.height()},this.first()),e={width:h.outerWidth(),height:h.outerHeight()};return h.css({position:"fixed",left:"50%",top:"50%",marginTop:-(e.height/2),marginLeft:-(e.width/2)}),this}}(jQuery);
/* <<< file end: js/jquery/jquery.center.js */

//# map link was there [jquery.center.js.map]
/* >>> file start: js/jquery/dialogs.js */
function _typeof(t){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
//= require js/jquery/jquery.center.js
LJ.UI.registerTemplate('templates-Widgets-dialogs', "<div class=\"b-popup\"> <div class=\"b-popup-outer\"> <div class=\"b-popup-inner\"> <div class=\"b-dialog\"> {{if $data.title}} <div class=\"b-dialog-header\"> {{html $data.title}} </div> {{/if}} {{if ($data.type == \'prompt\' || $data.text)}} <div class=\"b-dialog-body\"> {{if $data.text}} {{html $data.text}} {{/if}} {{if ($data.type == \'prompt\')}} <div class=\"b-dialog-prompt-wrap\"> <input type=\"text\" name=\"dialog-prompt\" class=\"b-dialog-prompt\" value=\"\" {{if $data.placeholder}}placeholder=\"{{html $data.placeholder}}\"{{/if}} /> </div> {{/if}} </div> {{/if}} <div class=\"b-dialog-footer\"> {{if $data.is_mac}} {{if $data.type != \'alert\'}} <button type=\"button\" name=\"dialog-cancel\" class=\" b-dialog-btn b-dialog-cancel b-flatbutton b-flatbutton-neutral \" > {{html $data.no.text}} </button> {{/if}} <button type=\"button\" name=\"dialog-ok\" class=\" b-dialog-btn b-dialog-ok b-flatbutton \" > {{html $data.yes.text}} </button> {{else}} <button type=\"button\" name=\"dialog-ok\" class=\" b-dialog-btn b-dialog-ok b-flatbutton \" > {{html $data.yes.text}} </button> {{if $data.type != \'alert\'}} <button type=\"button\" name=\"dialog-cancel\" class=\" b-dialog-btn b-dialog-cancel b-flatbutton b-flatbutton-neutral \" > {{html $data.no.text}} </button> {{/if}} {{/if}} </div> </div> <i class=\"i-popup-close\"></i> </div> </div> </div> ", 'JQuery.stat');
!function(t){return t}(),function(t){"use strict";LJ.dialogs={defaults:{alert:{title:"",fade:!0,show:t.noop,hide:t.noop,defaultButton:"yes",yes:{text:LJ.ml("dialogs.yes"),action:t.noop}},confirm:{title:"",fade:!0,show:t.noop,hide:t.noop,defaultButton:"yes",yes:{text:LJ.ml("dialogs.yes"),action:t.noop},no:{text:LJ.ml("dialogs.no"),action:t.noop}},prompt:{title:"",fade:!0,show:t.noop,hide:t.noop,defaultButton:"input",value:"",yes:{text:LJ.ml("dialogs.yes"),action:t.noop},no:{text:LJ.ml("dialogs.no"),action:t.noop}}}};var o=function(t){function o(o){var n,e=y.type,i=null;m||(m=[],m.push(s.find(g.yesButton)),"prompt"===e&&m.push(s.find(g.promptInput)),"prompt"!==e&&"confirm"!==e||m.push(s.find(g.noButton)),n=s.find(g.body).find("a,select,input,button").not(g.yesButton).not(g.noButton).not(g.promptInput),n.length&&(m=m.concat(n.toArray().map(t)))),m.some(function(t,o){var n=t.is(":focus");return n&&(i=o),n}),null===i?i=0:(i+=o,i>m.length-1?i=0:0>i&&(i=m.length-1)),m[i].focus()}function n(){d=t("<div />",{"class":"b-fader"}).prependTo(document.body)}function e(o){var e="object"===_typeof(o.text),l=null,u=null;y=o,e&&(l=t('<div class="b-dialog-body" />').append(o.text),o.text=""),s=LJ.UI.template("templates-Widgets-dialogs",o),e&&(u=s.find(g.header),u.length?u.after(l):s.find(g.dialog).prepend(l)),s.prependTo(document.body).center(),o.fade&&(d=t(".b-fader"),d.length||n(),d.show()),s.on("click",g.closeButton,i),"no"===o.defaultButton&&"alert"!==o.type?s.find(g.noButton).focus():"prompt"===o.type&&"yes"!==o.defaultButton?s.find(g.promptInput).focus():s.find(g.yesButton).focus(),o.show.call(s,o)}function i(){d&&d.hide(),m=null,y.hide.call(s,y),s.remove(),s=null}function l(t,o){if(!("string"==typeof t&&0!==t.length||"object"===_typeof(t)&&t.jquery))throw new Error("You should provide text or node as `text` param for the dialog");if(o&&"object"!==_typeof(o))throw new Error("Dialog options should be an object");if(s)throw new Error("You are not able to create multiple dialogs at the time");o&&o.yes&&("function"==typeof o.yes?o.yes={action:o.yes}:"string"==typeof o.yes&&(o.yes={text:o.yes})),o&&o.no&&("function"==typeof o.no?o.no={action:o.no}:"string"==typeof o.no&&(o.no={text:o.no}))}function u(){s.find(g.yesButton).trigger("click")}function c(){s.find(g.noButton).trigger("click")}function r(t){return function(){try{return t.apply(this,arguments),{yes:u,no:c}}catch(o){console.error(o.message)}}}var p,a,f,s=null,d=null,y=null,m=null,g={yesButton:".b-dialog-ok",noButton:".b-dialog-cancel",closeButton:".i-popup-close",promptInput:".b-dialog-prompt",header:".b-dialog-header",dialog:".b-dialog",body:".b-dialog-body"};return LJ.Support.isMobile()||t(document).on("keydown",function(t){if(s)switch(t.which){case 27:s.find(g.closeButton).trigger("click");break;case 9:o(t.shiftKey?-1:1),t.preventDefault()}}),p=function(o,n){l(o,n),n=t.extend(!0,{},LJ.dialogs.defaults.alert,{type:"alert",text:o},n||{}),e(n),s.on("click",g.yesButton,function(){void 0===n.yes.action.call(s,i)&&i()})},a=function(o,n){l(o,n),n=t.extend(!0,{},LJ.dialogs.defaults.confirm,{type:"confirm",text:o},n||{}),e(n),s.on("click",g.yesButton,function(){void 0===n.yes.action.call(s,!0,i)&&i()}),s.on("click",g.noButton,function(){n.no.action.call(s,!1),i()})},f=function(o,n){l(o,n),n=t.extend(!0,{},LJ.dialogs.defaults.prompt,{type:"prompt",text:o},n||{}),e(n),n.value&&s.find(g.promptInput).val(n.value),s.on("click",g.yesButton,function(){void 0===n.yes.action.call(s,s.find(g.promptInput).val())&&i()}),s.find(g.noButton).on("click",function(){n.no.action.call(s),i()}),LJ.Support.isMobile()||s.find(g.promptInput).on("keyup",function(t){13===t.which&&s.find(g.yesButton).trigger("click")})},{alert:r(p),confirm:r(a),prompt:r(f)}}(t);t.extend(!0,LJ.dialogs,o)}(jQuery);
/* <<< file end: js/jquery/dialogs.js */

//# map link was there [dialogs.js.map]
/* >>> file start: js/components/controlStrip/suspendMiniForm.js */
function _typeof(t){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _regeneratorRuntime(){"use strict";function t(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}function e(t,e,r,o){var i=e&&e.prototype instanceof n?e:n,a=Object.create(i.prototype),c=new h(o||[]);return g(a,"_invoke",{value:u(t,r,c)}),a}function r(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function o(){}function i(){}function a(e){["next","throw","return"].forEach(function(r){t(e,r,function(t){return this._invoke(r,t)})})}function c(t,e){function n(o,i,a,c){var u=r(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==_typeof(l)&&m.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,a,c)},function(t){n("throw",t,a,c)}):e.resolve(l).then(function(t){s.value=t,a(s)},function(t){return n("throw",t,a,c)})}c(u.arg)}var o;g(this,"_invoke",{value:function(t,r){function i(){return new e(function(e,o){n(t,r,e,o)})}return o=o?o.then(i,i):i()}})}function u(t,e,n){var o="suspendedStart";return function(i,a){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===i)throw a;return y()}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=s(c,n);if(u){if(u===E)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var l=r(t,e,n);if("normal"===l.type){if(o=n.done?"completed":"suspendedYield",l.arg===E)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o="completed",n.method="throw",n.arg=l.arg)}}}function s(t,e){var n=e.method,o=t.iterator[n];if(void 0===o)return e.delegate=null,"throw"===n&&t.iterator["return"]&&(e.method="return",e.arg=void 0,s(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),E;var i=r(o,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,E;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,E):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,E)}function l(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function h(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(l,this),this.reset(!0)}function p(t){if(t){var e=t[b];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function o(){for(;++r<t.length;)if(m.call(t,r))return o.value=t[r],o.done=!1,o;return o.value=void 0,o.done=!0,o};return n.next=n}}return{next:y}}function y(){return{value:void 0,done:!0}}_regeneratorRuntime=function(){return v};var v={},d=Object.prototype,m=d.hasOwnProperty,g=Object.defineProperty||function(t,e,r){t[e]=r.value},w="function"==typeof Symbol?Symbol:{},b=w.iterator||"@@iterator",_=w.asyncIterator||"@@asyncIterator",L=w.toStringTag||"@@toStringTag";try{t({},"")}catch(x){t=function(t,e,r){return t[e]=r}}v.wrap=e;var E={},P={};t(P,b,function(){return this});var S=Object.getPrototypeOf,j=S&&S(S(p([])));j&&j!==d&&m.call(j,b)&&(P=j);var O=i.prototype=n.prototype=Object.create(P);return o.prototype=i,g(O,"constructor",{value:i,configurable:!0}),g(i,"constructor",{value:o,configurable:!0}),o.displayName=t(i,L,"GeneratorFunction"),v.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},v.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,t(e,L,"GeneratorFunction")),e.prototype=Object.create(O),e},v.awrap=function(t){return{__await:t}},a(c.prototype),t(c.prototype,_,function(){return this}),v.AsyncIterator=c,v.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new c(e(t,r,n,o),i);return v.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},a(O),t(O,L,"Generator"),t(O,b,function(){return this}),t(O,"toString",function(){return"[object Generator]"}),v.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function o(){for(;r.length;){var t=r.pop();if(t in e)return o.value=t,o.done=!1,o}return o.done=!0,o}},v.values=p,h.prototype={constructor:h,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&m.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function e(e,n){return i.type="throw",i.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw t;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=m.call(o,"catchLoc"),c=m.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&m.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,E):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),E},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),f(r),E}},"catch":function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;f(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:p(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),E}},v}function asyncGeneratorStep(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(s){return void r(s)}c.done?e(u):Promise.resolve(u).then(n,o)}function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){function i(t){asyncGeneratorStep(c,n,o,i,a,"next",t)}function a(t){asyncGeneratorStep(c,n,o,i,a,"throw",t)}var c=t.apply(e,r);i(void 0)})}}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classPrivateFieldInitSpec(t,e,r){_checkPrivateRedeclaration(t,e),e.set(t,r)}function _checkPrivateRedeclaration(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}!function(t){return t}(),function(){var t=new WeakMap,e=_createClass(function r(e){"use strict";_classCallCheck(this,r),_classPrivateFieldInitSpec(this,t,{writable:!0,value:void 0});var n=e.querySelector("button"),o=e.querySelector("select");Site.page.suspend_actions.forEach(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.status,r=t.action,n=document.createElement("option");n.value=e,n.innerHTML=r,o.appendChild(n)}),o.addEventListener("change",function(){n.disabled="none"===o.value}),n.addEventListener("click",function(){var t=_asyncToGenerator(_regeneratorRuntime().mark(function e(t){var r,n;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.stopPropagation(),r=new URL(window.location.href),r.search="",r.hash="",e.next=7,LJ.Api.callP("admin.suspend",{status:o.value,urls:[r.href]});case 7:n=e.sent,LJ.Messages.success("Applied suspend action successfully");case 9:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}())});LJ.Util.DOM.initPromise.then(function(){if(Site.page.allow_suspend){var t=document.querySelector(".js--suspend-mini-form");if(t){t.style.display="";new e(t)}}})}();
/* <<< file end: js/components/controlStrip/suspendMiniForm.js */

//# map link was there [suspendMiniForm.js.map]
/* >>> file start: js/scheme/schemius/controlstrip.js */
//= require js/components/controlStrip/index.js
//= require js/deprecated/ljwidget_ippu.js
//= require js/jquery/dialogs.js
//= require js/components/controlStrip/suspendMiniForm.js
!function(e){return e}(),function(){LJ.define("LJ.Schemius.controlstrip"),LJ.Schemius.controlstrip.init=function(e){var o=e.jQuery,n=o(".js--controlstrip");if(n.length){var r=LJ.Support.isMobile(),i=n.find(".js--dropdown"),t=n.find(".js--dropdown"),s=n.find(".s-header-extra-menu-item.w-cs-i-calendar a"),l=o("html"),c={friendingBlocker:null,subscriptionBlocker:null,moreItemsPopoverIsVisible:!1},a=function(){c.moreItemsPopoverIsVisible?(t.addClass("s-header-toggle--open"),l.addClass("menu-controlstrip--open")):(t.removeClass("s-header-toggle--open"),l.removeClass("menu-controlstrip--open"))},u=function(e){var o,n;if(e){var r=e.data,i=e.username;r&&(null!==(o=Site)&&void 0!==o&&null!==(n=o.journal)&&void 0!==n&&n.username&&i&&Site.journal.username!==i||a())}},d=function m(){c.moreItemsPopoverIsVisible=!1,document.removeEventListener("click",m),a()};i.on("click",function(e){e.stopPropagation(),window.scrollTo({top:0,behavior:"smooth"}),c.moreItemsPopoverIsVisible=!c.moreItemsPopoverIsVisible,c.moreItemsPopoverIsVisible?(document.addEventListener("click",d),LJ.Event.trigger("controlstrip::dropdownHideRequest")):document.removeEventListener("click",d),a()}),!r&&s.length&&s.on("click",function(e){e.preventDefault(),LJ.Event.trigger("controlstrip::showCalendar")}),LJ.Event.on("relations.changed",function(e){u(e)})}}}();
/* <<< file end: js/scheme/schemius/controlstrip.js */

//# map link was there [controlstrip.js.map]
/* >>> file start: js/components/loginForm.js */
!function(o){return o}(),function(){LJ.define("LJ.Util"),LJ.Util.showLoginForm=function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=o.preserveScroll,n=void 0===i?!0:i,e=o.aboveFormHint,t=void 0===e?"":e,l=document.scrollingElement.scrollTop;LJ.Util.Action.login(),n&&(document.body.style.position="static",document.body.style.overflowY="hidden",document.scrollingElement.scrollTop=l);var r=document.querySelector(".js--above-form-hint");t?(r.innerHTML=t,r.classList.add("b-loginform__hint--visible")):r.classList.remove("b-loginform__hint--visible")}}();
/* <<< file end: js/components/loginForm.js */

//# map link was there [loginForm.js.map]
/* >>> file start: js/scheme/schemius/index.js */
//= require js/core/angular/api.js
//= require js/lib/jquery.selectric.min.js
//= require js/common/captcha.js
//= require js/scheme/schemius/controlstrip.js
//= require js/components/loginForm.js
!function(e){return e}(),function(e){function o(){function o(e){return!!(e.ctrlKey||e.metaKey&&LJ.Support.isMac)}function t(){var e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}function s(){var e=document.documentElement.scrollHeight>document.documentElement.clientHeight,o=t(),s=o>0;s&&e&&(E[0].style.paddingRight=o+"px")}function n(){E[0].style.paddingRight=""}function i(e){e&&(e.stopPropagation(),e.preventDefault()),n(),E.removeClass(I),E.removeClass(C),p.removeClass(I),p.removeClass(C),document.body.style.position="",document.body.style.overflowY="";var o=document.querySelector(".js--above-form-hint");null===o||void 0===o?void 0:o.classList.remove("b-loginform__hint--visible")}function a(o){o&&(o.preventDefault(),o.stopPropagation()),m(),LJ.Event.trigger("Messages:closeByMenus"),s(),p.addClass(C),E.addClass(I),setTimeout(function(){e("#user").focus()},300)}function l(){p.hasClass(C)?i():a()}function r(e){e&&LJ.Api.call("lang.set",{lang:e},function(){location.reload()})}function c(o){v.toggleClass(S,o),o?e(".b-loginform-click-trap").removeClass("b-loginform-click-trap--show"):(e(".b-loginform-click-trap").addClass("b-loginform-click-trap--show"),e(".b-loginform").removeClass("openid-auth-state"))}var u,d,m,p,h,g,f,v,b,C,j,w,L,k,y,J,S,x=!!Site.page.endlessScrollEnabled,A=LJ.Flags.isEnabled("medius_schemius"),E=e(document.body),_=e(".s-header"),D=e(A?".js-header-search-input":".s-inline-search-input"),T=e(A?".js-header-search-button":".s-do-item-search-btn"),M="p-show-search",P=!1,I="p-loginform",q=e(A?".js-header-nav-lang":".s-nav-item-lang"),H="s-nav-item-lang-open",O=function(e){o(e)||(_.hasClass(M)&&D.val()&&T.prop("type","submit"),_.toggleClass(M),_.hasClass(M)&&(P=!0,setTimeout(function(){D.focus()},500)))},R=e(".s-header-search__form");navigator.userAgent.match(/(iPod|iPhone|iPad)/i)&&R.each(function(){e(this).removeAttr("target")}),R.on("submit",function(){var e=D.val(),o=e.split(" ").filter(function(e){return e}),t=o.every(function(e){return e.length>1&&0===e.indexOf("#")});D.attr("name",t?"tags":"q")}),LJ&&LJ.Util&&LJ.Util.Action&&(LJ.Util.Action.login=a),T.on("click",O),T.on("blur",function(){"submit"===T.prop("type")&&(T.prop("type","button"),D.val(""))}),D.on("click",function(){P=!0}),E.on("click",function(){P||(_.removeClass(M),q.removeClass(H)),P=!1}),E.on("gesturestart",function(o){(e("html").hasClass("p-nav-common-menu-open")||e("html").hasClass("p-nav-user-menu-open"))&&o.preventDefault()}),navigator.userAgent.match(/Trident/)&&navigator.userAgent.match(/rv[ :]11/)&&e("html").addClass("html-ie11"),navigator.appVersion.match(/MSIE\s10/)&&e("html").addClass("html-ie10"),p=e("html"),p.addClass(LJ.Support.isMobile()?"html-mobile":"html-desktop"),~navigator.userAgent.toLowerCase().indexOf("android")?p.addClass("html-android"):~navigator.userAgent.toLowerCase().indexOf("iphone")||~navigator.userAgent.toLowerCase().indexOf("ipad")?p.addClass("html-ios"):~navigator.userAgent.toLowerCase().indexOf("windows phone")&&p.addClass("html-wphone"),e("[data-lang]").on("click",function(){r(e(this).data("lang"))}),q.on("click",function(e){o(e)||(e.preventDefault(),q.toggleClass(H),P=q.hasClass(H))}),e(".s-lang-select").selectric({customClass:{prefix:"b-selectus",postfixes:"Input Items Open Disabled TempShow HideSelect Wrapper Hover Responsive Above Scroll",camelCase:!1,overwrite:!1}}).on("change",function(){r(e(this).val())}),e(".selectricus").selectric({customClass:{prefix:"b-selectus",postfixes:"Input Items Open Disabled TempShow HideSelect Wrapper Hover Responsive Above Scroll",camelCase:!1,overwrite:!1},expandToItemText:!0,disableOnMobile:!1}),e(".b-message-mobile-close").one("click",function(){e(".b-message-mobile").hide()}),L=e(A?".js-header-nav-drop-master":".s-drop-master"),k=A?"s-header-nav-drop--open":"s-drop-open",y=LJ.Support.isMobile(),J=!1,y||(w=e(":lj-bubble"),L.on("mouseenter",function(){var o=e(this),t=300;J&&(clearTimeout(j),t=0),j=setTimeout(function(){L.removeClass(k),o.addClass(k),J=!0,w.bubble("hide"),LJ.Event.trigger("headerUserMenu::open")},t)}).on("mouseleave",function(){var o=e(this);return J?void(j=setTimeout(function(){o.removeClass(k),J=!1},500)):(clearTimeout(j),void o.removeClass(k))})),y&&(L.on("click",function(o){var t=e(this),s=0!==t.find("li").length,n=e(o.target).closest("span").is(".s-header-extra-menu-item-link-icon");"input"!==o.target.tagName.toLowerCase()&&(o.target.closest(".js--plain-link")||o.target.classList.contains("js--plain-link")||(t.hasClass(k)||!s||n||o.preventDefault(),t.hasClass(k)||n||(J=!0,L.removeClass(k),o.stopPropagation(),e(":lj-bubble").bubble("hide")),t.toggleClass(k)))}),E.on("click",function(o){var t,s=0===e(o.target).closest(L).length,n=e(o.target).is(".b-popup"),i=!(null===(t=o.target)||void 0===t||!t.closest(".js--subscribe-btn-dropdown"));i||(n&&(o.stopPropagation(),e(":lj-bubble").bubble("hide")),J&&s&&(J=!1,L.removeClass(k),o.preventDefault()))}),LJ.Support.isMobile&&LJ.Support.browser.safari&&E.addClass("iphone"),e(".l-flatslide-menu-active, .l-flatslide-menu-expander").click(function(o){o.preventDefault(),e(this).closest(".l-flatslide-menu").toggleClass("l-flatslide-menu-expanded")}),e(".s-header-search, .s-header-item-search__form").removeAttr("target")),p=e("html"),h=e(".s-body"),g=e(A?".js-header-menu-button":".s-nav-control-common"),f=e(A?".js-header-login":".s-nav-control-user, .s-nav-control-login"),b="p-nav-common-menu-open",C="p-nav-user-menu-open",g.on("click",function(){LJ.Event.trigger("Messages:closeByMenus"),p.toggleClass(b),i()});var U=l;if(Site.remote?f.on("click",U):Site.isCustomDomain||f.on("click",l),m=function(){p.removeClass(b),p.removeClass(C)},h.on("click",function(){m(),i()}),e(".s-header-menu-head__drop").click(function(){var o=e(this).closest(".s-header-menu-drop"),t=o.find(".s-header-menu-list-sub"),s="s-header-menu-drop--open";if(o.is("."+s))t.css("max-height","");else{var n=t.children().toArray().reduce(function(o,t){return o+e(t).height()},0);t.css("max-height",n)}o.toggleClass(s)}),Site.isCustomDomain||e(A?".js-header-login":".s-nav-item-login").on("click",a),e(".js-loginform-close").on("click",i),e(document).on("keyup",function(e){"Escape"!==e.key&&27!==e.keyCode||i(e)}),e(".b-fader").on("click",i),v=e(".b-loginform-body > .b-loginform-field"),S="active",A?e(".lj-openid-auth-button").on("click",function(o){o.preventDefault(),c(!1),e(".b-loginform").addClass("openid-auth-state")}):e(".lj-openid-auth-button").on("click",function(o){o.preventDefault(),e(".b-loginform").toggleClass("openid-auth-state"),e(".b-loginform").hasClass("openid-auth-state")?e("#openid").focus():e("#user").focus()}),A&&(e(".js-login-close").on("click",function(e){c(!1),i(e)}),e(".b-loginform-click-trap").on("click",function(){return c(!0)}),e(".b-loginform-toggle-link").on("click",function(){return c(!1)}),LJ.Flags.isEnabled("notification_center")&&angular.bootstrap(A?".js-header-notifications":".mds-do",["Notifications"])),LJ.Event.on("userpic.changed",function(o){e(".s-userpic").css("backgroundImage","url("+o+")")}),!LJ.Flags.isEnabled("ljwelcomevideo")||y||LJ.get("remote")||LJ.Cookie.get("welcome_ljvideo")||0!==LJ.get("remote_is_sup")||e(".appwidget-login").length||LJ.injectScript("https://www.youtube.com/player_api").then(function(){function o(e){0!==e.data&&2!==e.data||s.addClass("s-ljvideo-end"),1===e.data&&s.removeClass("s-ljvideo-end")}var t,s=e(".s-ljvideo");E.addClass("p-ljvideo"),window.onYouTubePlayerAPIReady=function(){t=new window.YT.Player("s-ljvideo-player",{width:"640",height:"360",videoId:"wq0YmQ4xIeU",playerVars:{rel:0},events:{onStateChange:o}})},e(".b-fader, .s-ljvideo-close").on("click",function(){E.hasClass("p-ljvideo")&&(E.removeClass("p-ljvideo"),t.destroy(),LJ.Cookie.setGlobal("welcome_ljvideo",1,{expires:14}))})}),d=e(".flatquestion-nojs-friendsgroups"),u=e(".flatquestion-popup-field-showanswer"),e(".flatquestion-popup-select").on("change",function(){"custom"===e(this).val()?d.show():d.hide(),"public"===e(this).val()?u.show():u.hide()}),LJ.Schemius.controlstrip.init({jQuery:e}),x){var Y=60,z=document.querySelector(".s-header-in"),F=0;z.classList.add("js--zero-animate");var W=function(){var e=window.scrollY,o=window.innerHeight;e>Y?z.classList.remove("js--zero-animate"):z.classList.add("js--zero-animate"),e>o?(z.classList.add("js--is-fixed"),e>o+Y?(z.classList.add("js--can-animate"),F>e?z.classList.add("js--scroll-up"):z.classList.remove("js--scroll-up")):z.classList.remove("js--scroll-up")):z.classList.remove("js--is-fixed","js--can-animate"),F=e,LJ.Event.trigger("nc::requestHidePopover")},Q=LJ.Function.throttle(W,100);window.addEventListener("scroll",Q)}}e(function(){0===e(".s-header").length?e("html").on("controlstrip-initialized",o):o()})}(jQuery);
/* <<< file end: js/scheme/schemius/index.js */

//# map link was there [index.js.map]
/* >>> file start: js/front-bundled/dist/qrAuthModal.js */
/*! For license information please see qrAuthModal.js.LICENSE.txt */
(()=>{var e,t={1068:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(5042),o=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/;const a=(0,n.Z)((function(e){return o.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}))},5042:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}},8285:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){function t(e,n,l,s,p){for(var d,h,m,g,w,k=0,C=0,A=0,O=0,E=0,I=0,$=m=d=0,F=0,M=0,z=0,N=0,R=l.length,Z=R-1,D="",H="",J="",U="";F<R;){if(h=l.charCodeAt(F),F===Z&&0!==C+O+A+k&&(0!==C&&(h=47===C?10:47),O=A=k=0,R++,Z++),0===C+O+A+k){if(F===Z&&(0<M&&(D=D.replace(f,"")),0<D.trim().length)){switch(h){case 32:case 9:case 59:case 13:case 10:break;default:D+=l.charAt(F)}h=59}switch(h){case 123:for(d=(D=D.trim()).charCodeAt(0),m=1,N=++F;F<R;){switch(h=l.charCodeAt(F)){case 123:m++;break;case 125:m--;break;case 47:switch(h=l.charCodeAt(F+1)){case 42:case 47:e:{for($=F+1;$<Z;++$)switch(l.charCodeAt($)){case 47:if(42===h&&42===l.charCodeAt($-1)&&F+2!==$){F=$+1;break e}break;case 10:if(47===h){F=$+1;break e}}F=$}}break;case 91:h++;case 40:h++;case 34:case 39:for(;F++<Z&&l.charCodeAt(F)!==h;);}if(0===m)break;F++}if(m=l.substring(N,F),0===d&&(d=(D=D.replace(u,"").trim()).charCodeAt(0)),64===d){switch(0<M&&(D=D.replace(f,"")),h=D.charCodeAt(1)){case 100:case 109:case 115:case 45:M=n;break;default:M=_}if(N=(m=t(n,M,m,h,p+1)).length,0<T&&(w=c(3,m,M=r(_,D,z),n,S,P,N,h,p,s),D=M.join(""),void 0!==w&&0===(N=(m=w.trim()).length)&&(h=0,m="")),0<N)switch(h){case 115:D=D.replace(x,i);case 100:case 109:case 45:m=D+"{"+m+"}";break;case 107:m=(D=D.replace(y,"$1 $2"))+"{"+m+"}",m=1===j||2===j&&a("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=D+m,112===s&&(H+=m,m="")}else m=""}else m=t(n,r(n,D,z),m,s,p+1);J+=m,m=z=M=$=d=0,D="",h=l.charCodeAt(++F);break;case 125:case 59:if(1<(N=(D=(0<M?D.replace(f,""):D).trim()).length))switch(0===$&&(d=D.charCodeAt(0),45===d||96<d&&123>d)&&(N=(D=D.replace(" ",":")).length),0<T&&void 0!==(w=c(1,D,n,e,S,P,H.length,s,p,s))&&0===(N=(D=w.trim()).length)&&(D="\0\0"),d=D.charCodeAt(0),h=D.charCodeAt(1),d){case 0:break;case 64:if(105===h||99===h){U+=D+l.charAt(F);break}default:58!==D.charCodeAt(N-1)&&(H+=o(D,d,h,D.charCodeAt(2)))}z=M=$=d=0,D="",h=l.charCodeAt(++F)}}switch(h){case 13:case 10:47===C?C=0:0===1+d&&107!==s&&0<D.length&&(M=1,D+="\0"),0<T*q&&c(0,D,n,e,S,P,H.length,s,p,s),P=1,S++;break;case 59:case 125:if(0===C+O+A+k){P++;break}default:switch(P++,g=l.charAt(F),h){case 9:case 32:if(0===O+k+C)switch(E){case 44:case 58:case 9:case 32:g="";break;default:32!==h&&(g=" ")}break;case 0:g="\\0";break;case 12:g="\\f";break;case 11:g="\\v";break;case 38:0===O+C+k&&(M=z=1,g="\f"+g);break;case 108:if(0===O+C+k+L&&0<$)switch(F-$){case 2:112===E&&58===l.charCodeAt(F-3)&&(L=E);case 8:111===I&&(L=I)}break;case 58:0===O+C+k&&($=F);break;case 44:0===C+A+O+k&&(M=1,g+="\r");break;case 34:case 39:0===C&&(O=O===h?0:0===O?h:O);break;case 91:0===O+C+A&&k++;break;case 93:0===O+C+A&&k--;break;case 41:0===O+C+k&&A--;break;case 40:0===O+C+k&&(0===d&&(2*E+3*I==533||(d=1)),A++);break;case 64:0===C+A+O+k+$+m&&(m=1);break;case 42:case 47:if(!(0<O+k+A))switch(C){case 0:switch(2*h+3*l.charCodeAt(F+1)){case 235:C=47;break;case 220:N=F,C=42}break;case 42:47===h&&42===E&&N+2!==F&&(33===l.charCodeAt(N+2)&&(H+=l.substring(N,F+1)),g="",C=0)}}0===C&&(D+=g)}I=E,E=h,F++}if(0<(N=H.length)){if(M=n,0<T&&void 0!==(w=c(2,H,M,e,S,P,N,s,p,s))&&0===(H=w).length)return U+H+J;if(H=M.join(",")+"{"+H+"}",0!=j*L){switch(2!==j||a(H,2)||(L=0),L){case 111:H=H.replace(v,":-moz-$1")+H;break;case 112:H=H.replace(b,"::-webkit-input-$1")+H.replace(b,"::-moz-$1")+H.replace(b,":-ms-input-$1")+H}L=0}}return U+H+J}function r(e,t,r){var o=t.trim().split(m);t=o;var a=o.length,i=e.length;switch(i){case 0:case 1:var c=0;for(e=0===i?"":e[0]+" ";c<a;++c)t[c]=n(e,t[c],r).trim();break;default:var l=c=0;for(t=[];c<a;++c)for(var s=0;s<i;++s)t[l++]=n(e[s]+" ",o[c],r).trim()}return t}function n(e,t,r){var n=t.charCodeAt(0);switch(33>n&&(n=(t=t.trim()).charCodeAt(0)),n){case 38:return t.replace(g,"$1"+e.trim());case 58:return e.trim()+t.replace(g,"$1"+e.trim());default:if(0<1*r&&0<t.indexOf("\f"))return t.replace(g,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function o(e,t,r,n){var i=e+";",c=2*t+3*r+4*n;if(944===c){e=i.indexOf(":",9)+1;var l=i.substring(e,i.length-1).trim();return l=i.substring(0,e).trim()+l+";",1===j||2===j&&a(l,1)?"-webkit-"+l+l:l}if(0===j||2===j&&!a(i,1))return i;switch(c){case 1015:return 97===i.charCodeAt(10)?"-webkit-"+i+i:i;case 951:return 116===i.charCodeAt(3)?"-webkit-"+i+i:i;case 963:return 110===i.charCodeAt(5)?"-webkit-"+i+i:i;case 1009:if(100!==i.charCodeAt(4))break;case 969:case 942:return"-webkit-"+i+i;case 978:return"-webkit-"+i+"-moz-"+i+i;case 1019:case 983:return"-webkit-"+i+"-moz-"+i+"-ms-"+i+i;case 883:if(45===i.charCodeAt(8))return"-webkit-"+i+i;if(0<i.indexOf("image-set(",11))return i.replace(E,"$1-webkit-$2")+i;break;case 932:if(45===i.charCodeAt(4))switch(i.charCodeAt(5)){case 103:return"-webkit-box-"+i.replace("-grow","")+"-webkit-"+i+"-ms-"+i.replace("grow","positive")+i;case 115:return"-webkit-"+i+"-ms-"+i.replace("shrink","negative")+i;case 98:return"-webkit-"+i+"-ms-"+i.replace("basis","preferred-size")+i}return"-webkit-"+i+"-ms-"+i+i;case 964:return"-webkit-"+i+"-ms-flex-"+i+i;case 1023:if(99!==i.charCodeAt(8))break;return"-webkit-box-pack"+(l=i.substring(i.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+i+"-ms-flex-pack"+l+i;case 1005:return d.test(i)?i.replace(p,":-webkit-")+i.replace(p,":-moz-")+i:i;case 1e3:switch(t=(l=i.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(t)){case 226:l=i.replace(w,"tb");break;case 232:l=i.replace(w,"tb-rl");break;case 220:l=i.replace(w,"lr");break;default:return i}return"-webkit-"+i+"-ms-"+l+i;case 1017:if(-1===i.indexOf("sticky",9))break;case 975:switch(t=(i=e).length-10,c=(l=(33===i.charCodeAt(t)?i.substring(0,t):i).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:i=i.replace(l,"-webkit-"+l)+";"+i;break;case 207:case 102:i=i.replace(l,"-webkit-"+(102<c?"inline-":"")+"box")+";"+i.replace(l,"-webkit-"+l)+";"+i.replace(l,"-ms-"+l+"box")+";"+i}return i+";";case 938:if(45===i.charCodeAt(5))switch(i.charCodeAt(6)){case 105:return l=i.replace("-items",""),"-webkit-"+i+"-webkit-box-"+l+"-ms-flex-"+l+i;case 115:return"-webkit-"+i+"-ms-flex-item-"+i.replace(C,"")+i;default:return"-webkit-"+i+"-ms-flex-line-pack"+i.replace("align-content","").replace(C,"")+i}break;case 973:case 989:if(45!==i.charCodeAt(3)||122===i.charCodeAt(4))break;case 931:case 953:if(!0===O.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?o(e.replace("stretch","fill-available"),t,r,n).replace(":fill-available",":stretch"):i.replace(l,"-webkit-"+l)+i.replace(l,"-moz-"+l.replace("fill-",""))+i;break;case 962:if(i="-webkit-"+i+(102===i.charCodeAt(5)?"-ms-"+i:"")+i,211===r+n&&105===i.charCodeAt(13)&&0<i.indexOf("transform",10))return i.substring(0,i.indexOf(";",27)+1).replace(h,"$1-webkit-$2")+i}return i}function a(e,t){var r=e.indexOf(1===t?":":"{"),n=e.substring(0,3!==t?r:10);return r=e.substring(r+1,e.length-1),$(2!==t?n:n.replace(A,"$1"),r,t)}function i(e,t){var r=o(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return r!==t+";"?r.replace(k," or ($1)").substring(4):"("+t+")"}function c(e,t,r,n,o,a,i,c,l,u){for(var f,p=0,d=t;p<T;++p)switch(f=I[p].call(s,e,d,r,n,o,a,i,c,l,u)){case void 0:case!1:case!0:case null:break;default:d=f}if(d!==t)return d}function l(e){return void 0!==(e=e.prefix)&&($=null,e?"function"!=typeof e?j=1:(j=2,$=e):j=0),l}function s(e,r){var n=e;if(33>n.charCodeAt(0)&&(n=n.trim()),n=[n],0<T){var o=c(-1,r,n,n,S,P,0,0,0,0);void 0!==o&&"string"==typeof o&&(r=o)}var a=t(_,n,r,0,0);return 0<T&&void 0!==(o=c(-2,a,n,n,S,P,a.length,0,0,0))&&(a=o),L=0,P=S=1,a}var u=/^\0+/g,f=/[\0\r\f]/g,p=/: */g,d=/zoo|gra/,h=/([,: ])(transform)/g,m=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,y=/@(k\w+)\s*(\S*)\s*/,b=/::(place)/g,v=/:(read-only)/g,w=/[svh]\w+-[tblr]{2}/,x=/\(\s*(.*)\s*\)/g,k=/([\s\S]*?);/g,C=/-self|flex-/g,A=/[^]*?(:[rp][el]a[\w-]+)[^]*/,O=/stretch|:\s*\w+\-(?:conte|avail)/,E=/([^-])(image-set\()/,P=1,S=1,L=0,j=1,_=[],I=[],T=0,$=null,q=0;return s.use=function e(t){switch(t){case void 0:case null:T=I.length=0;break;default:if("function"==typeof t)I[T++]=t;else if("object"==typeof t)for(var r=0,n=t.length;r<n;++r)e(t[r]);else q=0|!!t}return e},s.set=l,void 0!==e&&l(e),s}},5318:(e,t,r)=>{"use strict";var n=r(7294),o=r(745),a=r(8047),i=a.ZP.div.withConfig({componentId:"sc-mqw1wu-0"})(['position:absolute;top:0;left:0;width:100%;height:100%;display:flex;font:400 16px/1 "ProximaNova",Helvetica,sans-serif;letter-spacing:0;color:#15374C;-webkit-font-smoothing:antialiased;pointer-events:none;overflow-x:hidden;overflow-y:auto;z-index:5000;box-sizing:border-box;*{box-sizing:inherit;}&:before{box-sizing:inherit;}&:after{box-sizing:inherit;}']),c=a.ZP.div.withConfig({componentId:"sc-mqw1wu-1"})(["position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:5000;"]),l=a.ZP.div.withConfig({componentId:"sc-mqw1wu-2"})(["position:relative;display:flex;flex-direction:column;width:100%;height:100%;border-radius:8px;background-color:#fff;box-shadow:0px 2px 6px rgba(0,0,0,0.16),0px 4px 16px rgba(0,0,0,0.12);pointer-events:auto;z-index:5001;"]),s=a.ZP.div.withConfig({componentId:"sc-mqw1wu-3"})(["margin-bottom:1.5rem;padding:1.25rem 1.25rem 0;"]),u=a.ZP.div.withConfig({componentId:"sc-mqw1wu-4"})(["display:flex;flex-direction:column;flex:1 1 auto;padding:0 1.25rem 1.25rem;overflow-y:auto;"]),f=a.ZP.button.withConfig({componentId:"sc-mqw1wu-5"})(["position:absolute;top:-3px;right:-25px;width:22px;height:22px;margin:0;padding:4px;border:none;background:none;cursor:pointer;&:focus{outline:none;}&:focus svg{box-shadow:0 0 0 2px #00a3d9;border-radius:2px;}svg{width:14px;height:14px;fill:#FFFFFF;}@media (max-width:680px){top:8px;right:6px;svg{fill:#333333 !important;}}"]),p=a.ZP.h2.withConfig({componentId:"sc-mqw1wu-6"})(["margin:0;font-size:1.5em !important;font-weight:bold;color:#000;font-family:inherit;"]),d=a.ZP.div.withConfig({componentId:"sc-mqw1wu-7"})(["display:flex;align-items:center;justify-content:center;svg{width:230px;height:230px;}"]),h=a.ZP.h2.withConfig({componentId:"sc-mqw1wu-8"})(["margin:0;margin-top:16px;font-size:16px !important;color:#333333;font-weight:700;text-align:center;"]),m=a.ZP.p.withConfig({componentId:"sc-mqw1wu-9"})(["margin:0;margin-top:10px;margin-bottom:18px;font-size:14px !important;color:#333333;text-align:center;"]),g=a.ZP.div.withConfig({componentId:"sc-mqw1wu-10"})(["display:flex;flex-flow:row wrap;align-items:center;justify-content:center;margin:-5px;margin-top:auto;"]),y=a.ZP.div.withConfig({componentId:"sc-mqw1wu-11"})(["padding:5px;"]),b=a.ZP.a.withConfig({componentId:"sc-mqw1wu-12"})(["display:flex;align-items:center;justify-content:center;svg{width:108px;height:36px;}"]),v=a.ZP.a.withConfig({componentId:"sc-mqw1wu-13"})(["display:flex;align-items:center;justify-content:center;svg{width:120px;height:36px;}"]),w=a.ZP.a.withConfig({componentId:"sc-mqw1wu-14"})(["display:flex;align-items:center;justify-content:center;svg{width:108px;height:36px;}"]),x=a.ZP.button.withConfig({componentId:"sc-mqw1wu-15"})(["display:flex;align-items:center;justify-content:center;height:56px;margin-top:18px;padding:0 16px;border:0;border-radius:4px;font-size:14px !important;font-weight:600;color:#00A3D9;text-decoration:none;background:transparent;transition:all 0.15s linear;cursor:pointer;&:hover{color:#FFFFFF;background:#00A3D9;}"]);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function C(){C=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,o){var a=t&&t.prototype instanceof p?t:p,i=Object.create(a.prototype),c=new P(o||[]);return n(i,"_invoke",{value:x(e,r,c)}),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var f={};function p(){}function d(){}function h(){}var m={};l(m,a,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(S([])));y&&y!==t&&r.call(y,a)&&(m=y);var b=h.prototype=p.prototype=Object.create(m);function v(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,c){var l=u(e[n],e,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==k(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,i,c)}),(function(e){o("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return o("throw",e,i,c)}))}c(l.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function x(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=A(i,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function A(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,A(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return d.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=l(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},v(w.prototype),l(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(s(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(b),l(b,c,"Generator"),l(b,a,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=S,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:S(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function A(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function O(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){A(a,n,o,i,c,"next",e)}function c(e){A(a,n,o,i,c,"throw",e)}i(void 0)}))}}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==k(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===k(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var j={isShown:!1,qr:null,qrId:null,isExpired:!1},_=LJ.get("remote_is_sup"),I=function(){var e,t,r=(e=(0,n.useState)(j),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],a=r[1],k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a((function(t){return P(P({},t),e)}))},A=o.isShown,E=o.qr,S=o.qrId,I=o.isExpired,T=(0,n.useRef)(),$=function(){clearInterval(T.current),k(j)},q=function(){var e=O(C().mark((function e(){var t;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,LJ.Api.call("user.qrlogin_get_status",{qr_id:S});case 2:"expired"===(t=e.sent).status&&(clearInterval(T.current),k({isExpired:!0})),"OK"===t.status&&(clearInterval(T.current),window.location.reload());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=O(C().mark((function e(){var t,r,n;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,LJ.Api.call("user.qrlogin_get_id",{});case 2:if(t=e.sent,!(r=t.qr_id)){e.next=11;break}return e.next=7,fetch("".concat(Site.siteroot,"/qrauth/code?qr_id=").concat(r),{credentials:"include"});case 7:return e.next=9,e.sent.text();case 9:n=e.sent,k({qr:n,qrId:r,isShown:!0});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,n.useEffect)((function(){LJ.Event.on("QrAuthModal.requestShow",(function(){F()})),LJ.Event.on("QrAuthModal.requestHide",(function(){$()}))}),[]),(0,n.useEffect)((function(){S&&(T.current=setInterval((function(){q()}),1e3),setTimeout((function(){return clearInterval(T.current)}),3e5))}),[S]),A?n.createElement(n.Fragment,null,n.createElement(c,{onClick:$}),n.createElement(i,null,n.createElement(l,null,n.createElement(s,null,n.createElement(p,null,LJ.ml("qr.auth.modal.signin.title")),n.createElement(f,{className:"svgicon flaticon flaticon--cross",onClick:$,"aria-label":"Close","aria-required":"true"},n.createElement("svg",{width:"14",height:"14",viewBox:"0 0 12 12"},n.createElement("path",{d:"M4.574 6L.297 10.277c-.397.397-.395 1.033 0 1.427.396.396 1.032.393 1.426 0L6 7.425l4.277 4.277c.397.397 1.033.395 1.427 0 .396-.396.393-1.032 0-1.426L7.425 6l4.277-4.277c.397-.397.395-1.033 0-1.427-.396-.396-1.032-.393-1.426 0L6 4.575 1.723.297C1.326-.1.69-.098.296.297c-.396.396-.393 1.032 0 1.426L4.575 6z"})))),E&&n.createElement(u,null,n.createElement(d,{style:{opacity:I?.5:1},dangerouslySetInnerHTML:{__html:E}}),!I&&n.createElement(n.Fragment,null,n.createElement(h,null,LJ.ml("qr.auth.modal.title")),n.createElement(m,null,LJ.ml("qr.auth.modal.message"))),I&&n.createElement(n.Fragment,null,n.createElement(h,{style:{color:"#FF4C44"}},LJ.ml("qr.auth.modal.time.is.over.title")),n.createElement(m,null,LJ.ml("qr.auth.modal.time.is.over.message"))),n.createElement(g,null,n.createElement(y,null,n.createElement(b,{href:"https://redirect.appmetrica.yandex.com/serve/892886882029976185",target:"_blank",title:LJ.ml("schemius.footer.apps.ios")},_?n.createElement("svg",{className:"svgicon flaticon flaticon--app-ios-ru",width:"117",height:"36"},n.createElement("use",{xlinkHref:"#flaticon--app-ios-ru"})):n.createElement("svg",{className:"svgicon flaticon flaticon--app-ios-ru",width:"117",height:"36"},n.createElement("use",{xlinkHref:"#flaticon--app-ios"})))),n.createElement(y,null,n.createElement(v,{href:"https://redirect.appmetrica.yandex.com/serve/748771691068488428",target:"_blank",title:LJ.ml("schemius.footer.apps.android")},_?n.createElement("svg",{className:"svgicon flaticon flaticon--app-android-ru",width:"120",height:"36"},n.createElement("use",{xlinkHref:"#flaticon--app-android-ru"})):n.createElement("svg",{className:"svgicon flaticon flaticon--app-android-ru",width:"120",height:"36"},n.createElement("use",{xlinkHref:"#flaticon--app-android"})))),_?n.createElement(y,null,n.createElement(w,{href:"https://redirect.appmetrica.yandex.com/serve/28195773657121097",target:"_blank",title:LJ.ml("schemius.footer.apps.rustore")},n.createElement("svg",{className:"svgicon flaticon flaticon--app-rustore",width:"156",height:"52"},n.createElement("use",{xlinkHref:"#flaticon--app-rustore"})))):null),n.createElement(x,{type:"button",onClick:$},LJ.ml("qr.auth.modal.button.to.default.auth.text")))))):null},T=!1;LJ.define("LJ.Components.QrAuthModal"),LJ.Components.QrAuthModal.init=function(){if(!T){var e=Array.from(document.querySelectorAll(".js--login-wrap")),t=e[e.length-1];if(t){var r=document.createElement("div");t.appendChild(r),(0,o.s)(r).render(n.createElement(I,null)),T=!0}}}},8679:(e,t,r)=>{"use strict";var n=r(9864),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},c={};function l(e){return n.isMemo(e)?i:c[e.$$typeof]||o}c[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},c[n.Memo]=i;var s=Object.defineProperty,u=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,r,n){if("string"!=typeof r){if(h){var o=d(r);o&&o!==h&&e(t,o,n)}var i=u(r);f&&(i=i.concat(f(r)));for(var c=l(t),m=l(r),g=0;g<i.length;++g){var y=i[g];if(!(a[y]||n&&n[y]||m&&m[y]||c&&c[y])){var b=p(r,y);try{s(t,y,b)}catch(e){}}}}return t}},9921:(e,t)=>{"use strict";var r="function"==typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,i=r?Symbol.for("react.strict_mode"):60108,c=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,s=r?Symbol.for("react.context"):60110,u=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,h=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,v=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function x(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case u:case f:case a:case c:case i:case d:return e;default:switch(e=e&&e.$$typeof){case s:case p:case g:case m:case l:return e;default:return t}}case o:return t}}}function k(e){return x(e)===f}t.AsyncMode=u,t.ConcurrentMode=f,t.ContextConsumer=s,t.ContextProvider=l,t.Element=n,t.ForwardRef=p,t.Fragment=a,t.Lazy=g,t.Memo=m,t.Portal=o,t.Profiler=c,t.StrictMode=i,t.Suspense=d,t.isAsyncMode=function(e){return k(e)||x(e)===u},t.isConcurrentMode=k,t.isContextConsumer=function(e){return x(e)===s},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return x(e)===p},t.isFragment=function(e){return x(e)===a},t.isLazy=function(e){return x(e)===g},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===o},t.isProfiler=function(e){return x(e)===c},t.isStrictMode=function(e){return x(e)===i},t.isSuspense=function(e){return x(e)===d},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===f||e===c||e===i||e===d||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===s||e.$$typeof===p||e.$$typeof===b||e.$$typeof===v||e.$$typeof===w||e.$$typeof===y)},t.typeOf=x},9864:(e,t,r)=>{"use strict";e.exports=r(9921)},53:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,o=e[n];if(!(0<a(o,t)))break e;e[n]=t,e[r]=o,r=n}}function n(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,o=e.length,i=o>>>1;n<i;){var c=2*(n+1)-1,l=e[c],s=c+1,u=e[s];if(0>a(l,r))s<o&&0>a(u,l)?(e[n]=u,e[s]=r,n=s):(e[n]=l,e[c]=r,n=c);else{if(!(s<o&&0>a(u,r)))break e;e[n]=u,e[s]=r,n=s}}}return t}function a(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var c=Date,l=c.now();t.unstable_now=function(){return c.now()-l}}var s=[],u=[],f=1,p=null,d=3,h=!1,m=!1,g=!1,y="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function w(e){for(var t=n(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,r(s,t)}t=n(u)}}function x(e){if(g=!1,w(e),!m)if(null!==n(s))m=!0,T(k);else{var t=n(u);null!==t&&$(x,t.startTime-e)}}function k(e,r){m=!1,g&&(g=!1,b(E),E=-1),h=!0;var a=d;try{for(w(r),p=n(s);null!==p&&(!(p.expirationTime>r)||e&&!L());){var i=p.callback;if("function"==typeof i){p.callback=null,d=p.priorityLevel;var c=i(p.expirationTime<=r);r=t.unstable_now(),"function"==typeof c?p.callback=c:p===n(s)&&o(s),w(r)}else o(s);p=n(s)}if(null!==p)var l=!0;else{var f=n(u);null!==f&&$(x,f.startTime-r),l=!1}return l}finally{p=null,d=a,h=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,A=!1,O=null,E=-1,P=5,S=-1;function L(){return!(t.unstable_now()-S<P)}function j(){if(null!==O){var e=t.unstable_now();S=e;var r=!0;try{r=O(!0,e)}finally{r?C():(A=!1,O=null)}}else A=!1}if("function"==typeof v)C=function(){v(j)};else if("undefined"!=typeof MessageChannel){var _=new MessageChannel,I=_.port2;_.port1.onmessage=j,C=function(){I.postMessage(null)}}else C=function(){y(j,0)};function T(e){O=e,A||(A=!0,C())}function $(e,r){E=y((function(){e(t.unstable_now())}),r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,T(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(s)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var r=d;d=t;try{return e()}finally{d=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=d;d=e;try{return t()}finally{d=r}},t.unstable_scheduleCallback=function(e,o,a){var i=t.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?i+a:i,e){case 1:var c=-1;break;case 2:c=250;break;case 5:c=1073741823;break;case 4:c=1e4;break;default:c=5e3}return e={id:f++,callback:o,priorityLevel:e,startTime:a,expirationTime:c=a+c,sortIndex:-1},a>i?(e.sortIndex=a,r(u,e),null===n(s)&&e===n(u)&&(g?(b(E),E=-1):g=!0,$(x,a-i))):(e.sortIndex=c,r(s,e),m||h||(m=!0,T(k))),e},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(e){var t=d;return function(){var r=d;d=t;try{return e.apply(this,arguments)}finally{d=r}}}},3840:(e,t,r)=>{"use strict";e.exports=r(53)},6774:e=>{e.exports=function(e,t,r,n){var o=r?r.call(n,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var a=Object.keys(e),i=Object.keys(t);if(a.length!==i.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(t),l=0;l<a.length;l++){var s=a[l];if(!c(s))return!1;var u=e[s],f=t[s];if(!1===(o=r?r.call(n,u,f,s):void 0)||void 0===o&&u!==f)return!1}return!0}}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,n),a.exports}n.m=t,e=[],n.O=(t,r,o,a)=>{if(!r){var i=1/0;for(u=0;u<e.length;u++){for(var[r,o,a]=e[u],c=!0,l=0;l<r.length;l++)(!1&a||i>=a)&&Object.keys(n.O).every((e=>n.O[e](r[l])))?r.splice(l--,1):(c=!1,a<i&&(i=a));if(c){e.splice(u--,1);var s=o();void 0!==s&&(t=s)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[r,o,a]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={518:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var o,a,[i,c,l]=r,s=0;if(i.some((t=>0!==e[t]))){for(o in c)n.o(c,o)&&(n.m[o]=c[o]);if(l)var u=l(n)}for(t&&t(r);s<i.length;s++)a=i[s],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(u)},r=self.webpackChunkfrontend_bundled=self.webpackChunkfrontend_bundled||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),n.nc=void 0;var o=n.O(void 0,[116],(()=>n(5318)));o=n.O(o)})();
/* <<< file end: js/front-bundled/dist/qrAuthModal.js */

//# map link was there [qrAuthModal.js.map]
/* >>> file start: js/webpackRequires/front-bundled/QrAuthModal.js */
//= require_ml qr.auth.modal.title
//= require_ml qr.auth.modal.signin.title
//= require_ml qr.auth.modal.message
//= require_ml qr.auth.modal.time.is.over.title
//= require_ml qr.auth.modal.time.is.over.message
//= require_ml qr.auth.modal.button.to.default.auth.text
//= require_ml schemius.footer.apps.ios
//= require_ml schemius.footer.apps.android

/* <<< file end: js/webpackRequires/front-bundled/QrAuthModal.js */

//# map link was there [QrAuthModal.js.map]
/* >>> file start: js/core/security.js */
function _slicedToArray(r,e){return _arrayWithHoles(r)||_iterableToArrayLimit(r,e)||_unsupportedIterableToArray(r,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(r,e){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var a,n,o,i,l=[],u=!0,y=!1;try{if(o=(t=t.call(r)).next,0===e){if(Object(t)!==t)return;u=!1}else for(;!(u=(a=o.call(t)).done)&&(l.push(a.value),l.length!==e);u=!0)(function(r){return r})()}catch(c){y=!0,n=c}finally{try{if(!u&&null!=t["return"]&&(i=t["return"](),Object(i)!==i))return}finally{if(y)throw n}}return l}}function _arrayWithHoles(r){return Array.isArray(r)?r:void 0}function _maybeArrayLike(r,e,t){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var a=e.length;return _arrayLikeToArray(e,void 0!==t&&a>t?t:a)}return r(e,t)}function _toConsumableArray(r){return _arrayWithoutHoles(r)||_iterableToArray(r)||_unsupportedIterableToArray(r)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(r,e){if(r){if("string"==typeof r)return _arrayLikeToArray(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,e):void 0}}function _iterableToArray(r){return"undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"]?Array.from(r):void 0}function _arrayWithoutHoles(r){return Array.isArray(r)?_arrayLikeToArray(r):void 0}function _arrayLikeToArray(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,a=new Array(e);e>t;t++)a[t]=r[t];return a}!function(){LJ.define("LJ.Security"),LJ.Security.sanitizeUrlParams=function(){var r=new URL(window.location.href),e=_maybeArrayLike(_toConsumableArray,r.searchParams),t=!1;e.forEach(function(e){var a=_maybeArrayLike(_slicedToArray,e,2),n=a[0],o=a[1];(o.includes("{{")||o.includes("}}")||o.includes("()"))&&(r.searchParams["delete"](n),t=!0)}),t&&window.location.replace(r.href)}}();
/* <<< file end: js/core/security.js */

//# map link was there [security.js.map]
/* >>> file start: js/widgets/angular/login.js */
//= require js/core/angular/api.js
//= require js/core/crossStorageClient.js
//= require js/front-bundled/dist/qrAuthModal.js
//= require js/webpackRequires/front-bundled/QrAuthModal.js
//= require js/core/security.js
//= require_ml loginform.error.enterpassword
//= require_ml loginform.error.purgeduser
//= require_ml loginform.error.enteruser
//= require_ml loginform.error.ipbanned
//= require_ml loginform.error.ipbanned.sysban
//= require_ml loginform.error.ipbanned.distribution
//= require_ml loginform.error.openid
//= require_ml loginform.error.password
//= require_ml loginform.error.usercreate
//= require_ml error.nocommlogin
//= require_ml error.login.limit.exceeded
//= require_ml error.expiredchal
//= require_ml error.account_locked.text
//= require_ml error.user_is_child.text
//= require_ml login.message.no_login_in_browser
//= require_ml loginform.error.corrupted_password
//= require_ml loginform.warning.webview_external_domain_issues
!function(r){return r}(),function(){function r(r){r.html5Mode({enabled:!0,requireBase:!1})}function e(){return{controllerAs:"loginForm",controller:o,link:function(r,e){e.find("a:not([target])").attr("target","_self")}}}function o(r,e,o,s,n){function t(){var r=!!Site.journal&&!/livejournal.com/gi.test(Site.journal.journal_url),e=LJ.Support&&LJ.Support.browser&&LJ.Support.browser.safari;r&&e&&LJ.Util.CrossStorage.getItem("lastLogin",{parseJSON:!0}).then(function(r){if(r){var e=r.time,o=+new Date,s=(o-e)/1e3;30>=s&&!LJ.get("remote")?LJ.Messages.add({type:"error",body:LJ.ml("login.message.no_login_in_browser")}):LJ.Util.CrossStorage.setItem("lastLogin","")}})}var a,i=this,l=angular.element(".b-fader");i.hasError=!1,i.siteroot=LJ.get("siteroot"),i.isMobile=LJ.Support.isMobile()||!!~navigator.userAgent.toLowerCase().indexOf("android"),i.forceRemember=null,i.expire=!0,null===(a=LJ.Components)||void 0===a?void 0:a.QrAuthModal.init(),i.qrAuthModalShow=function(){LJ.Event.trigger("QrAuthModal.requestShow")},i.close=function(r){r.target===r.currentTarget&&(r&&r.preventDefault(),o(function(){l.triggerHandler("click"),LJ.Event.trigger("QrAuthModal.requestHide")}))},t(),i.loginUser=function(r){r.preventDefault(),i.forceRemember&&(i.expire=!0),i.model.username&&i.model.password?n.call("user.login",{user:i.model.username,password:i.model.password,expire:i.expire?"never":"remember_me"},{silent:!0}).then(i.sucsessLogin)["catch"](i.onError):i.model.username?i.model.password||i.onError({message:"invalid_password"}):i.onError({message:"invalid_user"})},i.loginOpenID=function(r){i.model.openid||(r.preventDefault(),i.onError({message:"invalid_id"}))},i.sucsessLogin=function(){LJ.Util.CrossStorage.setItem("lastLogin",{time:+new Date});var r=window.location.pathname;~r.indexOf("logout")?window.location.replace("/login.bml"):window.custom_auth?window.custom_auth({reloadIframe:!0}).then(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.hasAuthMatch&&r.isCookieChanged&&window.location.reload()}):window.location.reload()},i.onError=function(r){switch(i.resetError(),i.hasError=!0,r.message){case"unknown_user":i.errorUsername=!0,i.errorMessage=s.trustAsHtml(LJ.ml("loginform.error.usercreate",{domain:i.siteroot,username:i.model.username}));break;case"purged_user":i.errorUsername=!0,i.errorMessage=s.trustAsHtml(LJ.ml("loginform.error.purgeduser"));break;case"community_disabled_login":i.errorUsername=!0,i.errorMessage=s.trustAsHtml(LJ.ml("error.nocommlogin"));break;case"invalid_user":i.errorUsername=!0,i.errorMessage=s.trustAsHtml(LJ.ml("loginform.error.enteruser"));break;case"bad_password":i.errorPassword=!0,i.errorMessage=s.trustAsHtml(LJ.ml("loginform.error.password"));break;case"invalid_password":i.errorPassword=!0,i.errorMessage=s.trustAsHtml(LJ.ml("loginform.error.enterpassword"));break;case"banned_ip":i.errorUsername=!0,i.errorMessage=s.trustAsHtml(LJ.ml("loginform.error.ipbanned"));break;case"banned_ip_sysban":i.errorUsername=!0,i.errorMessage=s.trustAsHtml(LJ.ml("loginform.error.ipbanned.sysban"));break;case"banned_ip_distrib":i.errorUsername=!0,i.errorMessage=s.trustAsHtml(LJ.ml("loginform.error.ipbanned.distribution"));break;case"invalid_id":i.errorId=!0,i.errorMessage=s.trustAsHtml(LJ.ml("loginform.error.openid"));break;case"ratelimit_exceeded":i.errorUsername=!0,i.errorMessage=s.trustAsHtml(LJ.ml("loginform.error.openid"));break;case"expired_challenge":i.errorUsername=!0,i.errorMessage=s.trustAsHtml(LJ.ml("error.expiredchal"));break;case"account_locked":i.errorUsername=!0,i.errorMessage=s.trustAsHtml(LJ.ml("error.account_locked.text"));break;case"is_child":i.errorUsername=!0,i.errorMessage=s.trustAsHtml(LJ.ml("error.user_is_child.text"));break;case"corrupted_password":i.errorPassword=!0,i.errorMessage=s.trustAsHtml(LJ.ml("loginform.error.corrupted_password"));break;default:i.errorUsername=!0,i.errorMessage=s.trustAsHtml("Unknown error")}},o(function(){LJ.Support.browser.webkit&&(angular.element("input:-webkit-autofill").length&&angular.element(".b-loginform-btn--auth").removeClass("b-loginform-btn--disabled"),function(r){return r}())},100),i.resetError=function(){i.errorError=i.errorUsername=i.errorPassword=i.errorIp=i.errorId=!1},e.$watch(function(){return i.model},function(){i.hasError&&i.resetError()},!0),LJ.Support.isWebView&&Site.isCustomDomain&&(i.presubmitWarning=LJ.ml("loginform.warning.webview_external_domain_issues"))}o.$inject=["$window","$scope","$timeout","$sce","Api"],r.$inject=["$locationProvider"],LJ.Security.sanitizeUrlParams(),angular.module("Login",["LJ.Api","LJ.Directives"]).config(r).controller("LoginCtrl",o).directive("ljLogin",e),function(r){return r}(),angular.element(window.document).ready(function(){if(!angular.element("body[ng-app]").length>0)try{angular.bootstrap(".b-loginform",["Login"])}catch(r){console.info(r.message,r.stack)}})}();
/* <<< file end: js/widgets/angular/login.js */

//# map link was there [login.js.map]
/* >>> file start: js/widgets/angular/mediusSubscribe.js */
//!= require js/core/angular/messages.js
//= require_ml medius.subscribe.banner.title
//= require_ml medius.subscribe.banner.text
//= require_ml medius.subscribe.button.text
//= require_ml medius.subscribe.subscribed
//= require_ml medius.footer.newsletter
//= require_ml medius.main.subscription.text
//= require_ml medius.main.subscription.success
//= require_ml medius.main.subscription
//= require_ml schemius.medius.subscribe
//= require_ml schemius.medius.subscribetonews
//= require_ml schemius.medius.dailynewsletter
//= require_ml schemius.medius.youremail
//= require_ml schemius.medius.subscribed
//= require_ml schemius.medius.unsubscribe
Site.page.template['Widgets/Medius/subscribe.tmpl'] = '<!-- if subscribed -->\n\n<div class=\"subscription\">\n    <h4 class=\"mdsfooter-section__title\" lj-ml=\"medius.footer.newsletter\"></h4>\n    <header class=\"subscription__header\">\n        <h2 lj-ml=\"medius.subscribe.banner.title\" class=\"subscription__title\"></h2>\n        <p lj-ml=\"medius.subscribe.banner.text\" class=\"subscription__title subscription--subtitle\"></p>\n    </header>\n    <form class=\"subscription__aside\">\n        <button ng-click=\"subscribe.do($event)\" lj-ml=\"medius.subscribe.button.text\" class=\"flatbutton flatbutton--small\"></button>\n    </form>\n</div>\n';
Site.page.template['Widgets/Medius/subscribe137.tmpl'] = '<!-- if subscribed -->\n\n<div \n    class=\"stories__subscription-main story story--size-10by05\"\n    ng-class=\"{\n      \'stories__subscription-main--subscribed\': subscribe.subscribed,\n      \'stories__subscription-main--hide\': subscribe.hide\n    }\"\n    >\n    <div class=\"stories__subscription-main-inner\">\n        <span\n            class=\"stories__subscription-main-text\"\n            lj-ml=\"medius.main.subscription.text\"\n            >\n        </span>\n        <span\n            class=\"stories__subscription-main-success\"\n            lj-ml=\"medius.main.subscription.success\"\n            >\n        </span>\n        <button\n            class=\"flatbutton\"\n            lj-ml=\"medius.main.subscription\"\n            ng-click=\"subscribe.do($event)\" \n            >\n        </button>\n    </div>\n</div>\n';
Site.page.template['Widgets/Medius/schemius_header_subscribe.tmpl'] = '<header\n    class=\"\n        s-header-menu-head\n        s-header-menu-subscription__head\n        \"\n    >\n    <span\n        class=\"s-header-menu-head__title\"\n        ><!--\n        --><span\n            class=\"s-header-menu-head__title--long\"\n            lj-ml=\"schemius.medius.subscribetonews\"\n            ></span><!--\n        --><span\n            class=\"s-header-menu-head__title--short\"\n            lj-ml=\"schemius.medius.dailynewsletter\"\n            ></span><!--\n    --></span>\n</header>\n\n<div\n    class=\"s-header-menu-subscription__body\"\n    >\n\n    <div\n        class=\"\n            s-header-menu-subscription__unsubscribed\n            s-header-menu-subscription-unsubscribed\n            \"\n        >\n        <button\n            type=\"submit\"\n            class=\"s-header-menu-subscription-unsubscribed__button\"\n            ng-click=\"subscribe.do($event)\"\n            lj-ml=\"schemius.medius.subscribe\"\n            ></button>\n    </div>\n\n    <div\n        class=\"\n            s-header-menu-subscription__subscribed\n            s-header-menu-subscription-subscribed\n            \"\n        >\n        <span\n            class=\"s-header-menu-subscription-subscribed__icon\"\n            lj-svg-icon=\"flaticon--check\"\n            ></span>\n        <h3\n            class=\"s-header-menu-subscription-subscribed__title\"\n            lj-ml=\"schemius.medius.subscribed\"\n            ></h3>\n    </div>\n</div>\n';
!function(){"use strict";function e(e,i){function s(i){return LJ.get("is_subscribed")?void 0:LJ.get("remote")?e.call("discovery.subscribe",null,{silent:!0}).then(r.hideWidget)["catch"](t):LJ.Util.Action.login(i)}function t(e){var s=e.message;"Access Denied"===s?LJ.Util.Action.login():i.add({type:"error",body:s})}var r=this;r["do"]=s}function i(){function e(e,i,s,t){var r=LJ.get("is_subscribed");return t.widget=i,t.hideWidget=function(e){var i=e.status;"OK"===i&&t.widget.addClass("stories__subscription--hidden")},r||angular.isUndefined(r)?t.hideWidget({status:"OK"}):void 0}return{restrict:"AE",templateUrl:"subscribe.tmpl",controller:"mediusSubscribeCtrl",controllerAs:"subscribe",link:e}}function s(e){function i(i,s,t,r){var u=LJ.get("is_subscribed");return r.widget=s,r.hideWidget=function(i){var s=i.status;"OK"===s&&(r.subscribed=!0,e(function(){r.hide=!0},3e3))},u||angular.isUndefined(u)?r.hideWidget({status:"OK"}):void 0}return{restrict:"AE",templateUrl:"subscribe137.tmpl",controller:"mediusSubscribeCtrl",controllerAs:"subscribe",link:i}}function t(e){function i(e,i,s,t){t.widget=i,t.subscribed=LJ.get("is_subscribed"),t.hideWidget=function(e){var i=e.status;"OK"===i&&(t.subscribed=!0)}}return{restrict:"AE",templateUrl:"schemius_header_subscribe.tmpl",controller:"mediusSubscribeCtrl",controllerAs:"subscribe",link:i}}e.$inject=["Api","Messages"],s.$inject=["$timeout"],t.$inject=["$timeout"],angular.module("Medius.Subscribe",["LJ.Messages","LJ.Api"]),angular.module("Medius.Subscribe").controller("mediusSubscribeCtrl",e).directive("mediusSubscribe",i).directive("mediusSubscribe137",s).directive("mediusSchemiusHeaderSubscribe",t),LJ.Flags.isEnabled("medius_schemius")&&angular.element(window.document).ready(function(){angular.bootstrap(".s-header-menu-subscription",["Medius.Subscribe"])})}();
/* <<< file end: js/widgets/angular/mediusSubscribe.js */

//# map link was there [mediusSubscribe.js.map]
/* >>> file start: js/scheme/medius.js */
//= require js/widgets/angular/mediusSubscribe.js
//= require js/core/angular/api.js
!function(){"use strict";angular.element(document).ready(function(){if(0!==angular.element(".mdsfooter").length){var e=angular.element(".mdsfooter").find("[medius-subscribe]");angular.bootstrap(e,["Medius.Subscribe"])}})}();
/* <<< file end: js/scheme/medius.js */

//# map link was there [medius.js.map]
