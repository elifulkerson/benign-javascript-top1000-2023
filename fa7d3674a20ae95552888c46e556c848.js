!function(){var t={883:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}e.log=function(){var t;return"object"===("undefined"==typeof console?"undefined":o(console))&&console.log&&(t=console).log.apply(t,arguments)},e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var o=0,r=0;e[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(o++,"%c"===t&&(r=o))})),e.splice(r,0,n)}},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){var t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&"env"in{env:{NODE_ENV:"production",COMMIT:"71b60b2bb819114502313b1e18221fcd358955a5",VERSION:"1.14.1",CDN_ORIGIN:"https://id.rambler.ru",CDN_PREFIX:"/rambler-id-helper",API_ORIGIN:"https://id.rambler.ru",API_PREFIX:"/api/v3",DEBUG:void 0}}&&(t=void 0),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=n(44)(e),t.exports.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},44:function(t,e,n){"use strict";t.exports=function(t){function e(t){for(var e=0,n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return o.colors[Math.abs(e)%o.colors.length]}function o(t){var n;function a(){if(a.enabled){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i=a,s=Number(new Date),c=s-(n||s);i.diff=c,i.prev=n,i.curr=s,n=s,e[0]=o.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");var l=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(function(t,n){if("%%"===t)return t;l++;var r=o.formatters[n];if("function"==typeof r){var a=e[l];t=r.call(i,a),e.splice(l,1),l--}return t})),o.formatArgs.call(i,e);var u=i.log||o.log;u.apply(i,e)}}return a.namespace=t,a.enabled=o.enabled(t),a.useColors=o.useColors(),a.color=e(t),a.destroy=r,a.extend=i,"function"==typeof o.init&&o.init(a),o.instances.push(a),a}function r(){var t=o.instances.indexOf(this);return-1!==t&&(o.instances.splice(t,1),!0)}function i(t,e){return o(this.namespace+(void 0===e?":":e)+t)}return o.debug=o,o.default=o,o.coerce=function(t){return t instanceof Error?t.stack||t.message:t},o.disable=function(){o.enable("")},o.enable=function(t){var e;o.save(t),o.names=[],o.skips=[];var n=("string"==typeof t?t:"").split(/[\s,]+/),r=n.length;for(e=0;e<r;e++)n[e]&&("-"===(t=n[e].replace(/\*/g,".*?"))[0]?o.skips.push(new RegExp("^"+t.substr(1)+"$")):o.names.push(new RegExp("^"+t+"$")));for(e=0;e<o.instances.length;e++){var i=o.instances[e];i.enabled=o.enabled(i.namespace)}},o.enabled=function(t){if("*"===t[t.length-1])return!0;var e,n;for(e=0,n=o.skips.length;e<n;e++)if(o.skips[e].test(t))return!1;for(e=0,n=o.names.length;e<n;e++)if(o.names[e].test(t))return!0;return!1},o.humanize=n(824),Object.keys(t).forEach((function(e){o[e]=t[e]})),o.instances=[],o.names=[],o.skips=[],o.formatters={},o.selectColor=e,o.enable(o.load()),o}},305:function(t,e){var n;!function(o){"use strict";var r=function(t,e,n){if(!Array.isArray(t))throw new TypeError("each() expects array as first argument");if("function"!=typeof e)throw new TypeError("each() expects function as second argument");if("function"!=typeof n&&(n=Function.prototype),0===t.length)return n(void 0,t);var o=new Array(t.length),r=0,i=!1;t.forEach((function(a,s){e(a,(function(e,a){if(!i)return e?(i=!0,n(e)):(o[s]=a,(r+=1)===t.length?n(void 0,o):void 0)}))}))};void 0===(n=function(){return r}.apply(e,[]))||(t.exports=n)}()},176:function(t){"use strict";t.exports.get=function(t){if(document.cookie&&document.cookie.length){for(var e,n=document.cookie.split(";"),o={},r=0,i=n.length;r<i;r++)o[(e=n[r].replace(/^(\s|\u00A0)+/g,"").split("="))[0]]=decodeURIComponent(e[1]);return t?o[t]:o}},t.exports.set=function(t,e,n){if(void 0!==t&&void 0!==e){var o=(n=n||{}).expires||{};"number"==typeof n.expires&&(o=new Date).setTime(o.getTime()+24*n.expires*60*60*1e3);var r=t+"="+encodeURIComponent(e);return r+=o.toUTCString?"; expires="+o.toUTCString():"",r+=n.path?"; path="+n.path:"",r+=n.domain?"; domain="+n.domain:"",r+=n.samesite?"; samesite="+n.samesite:"",r+=n.secure?"; secure":"",document.cookie=r,r}},t.exports.remove=function(e,n){return(n=n||{}).expires=-1,t.exports.set(e,"",n)}},824:function(t){var e=1e3,n=60*e,o=60*n,r=24*o;function i(t,e,n,o){var r=e>=1.5*n;return Math.round(t/n)+" "+o+(r?"s":"")}t.exports=function(t,a){a=a||{};var s,c,l=typeof t;if("string"===l&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(i){var a=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*r;case"hours":case"hour":case"hrs":case"hr":case"h":return a*o;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(t);if("number"===l&&isFinite(t))return a.long?(s=t,(c=Math.abs(s))>=r?i(s,c,r,"day"):c>=o?i(s,c,o,"hour"):c>=n?i(s,c,n,"minute"):c>=e?i(s,c,e,"second"):s+" ms"):function(t){var i=Math.abs(t);return i>=r?Math.round(t/r)+"d":i>=o?Math.round(t/o)+"h":i>=n?Math.round(t/n)+"m":i>=e?Math.round(t/e)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){"use strict";var t,e,o,r,i="ramblerIdHelper",a="ramblerIdHelperSentry",s="ramblerIdHelperTest",c=[-11,-4e3,-2e3,-2002,-3e3,"need session","invalid login","rate limit exceed","api does not respond","location does not respond"],l=n(305),u=n.n(l),d=n(176),p=function(t,e){void 0===e&&(e={});var n,o=e.raw;try{var r=d.get(t);n=o?r:JSON.parse(null!=r?r:"")}catch(t){}return null!=n?n:null},f=function(t,e,n){void 0===n&&(n={});var o=n.raw,r=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n}(n,["raw"]);try{var i=o?String(e):JSON.stringify(e);d.set(t,i,r)}catch(t){}},h=(t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}),m=function(t){function e(n){var o,r=t.call(this)||this;return r.name="ApiError",r.message=n.message.toString().toLowerCase(),r.code=null!==(o=n.code)&&void 0!==o?o:"unknown",r.details=n.details,Object.setPrototypeOf(r,e.prototype),r}return h(e,t),e}(Error),v=(r=Error,h((function t(e){var n=r.call(this)||this;return n.name="SubmissionError",n.message="failed: ".concat(Object.keys(e)),n.errors=e,Object.setPrototypeOf(n,t.prototype),n}),r),function(t){h((function e(n){var o=t.call(this)||this;return o.no=n,o.code="error",Object.setPrototypeOf(o,e.prototype),o}),t)}(Error),function(){return v=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},v.apply(this,arguments)}),y="rchainid",g={domain:".".concat(window.location.hostname.split(".").slice(-2).join(".")),path:"/",samesite:"none",secure:!0},b=function(t){if(t){var e=t;t instanceof Error&&(e={message:t.message},"code"in t&&(e.code=t.code,e.details=t.details));var n=t instanceof Error&&"need session"!==t.message?1/24/30:1/24/12;f(y,e,v(v({},g),{expires:n}))}},w=function(t,e){void 0===e&&(e={});var n,o=e.raw;try{var r=window.localStorage.getItem(t);n=o?r:JSON.parse(null!=r?r:"")}catch(t){}return null!=n?n:null},C="undefined"!=typeof window&&window.document&&"requestStorageAccess"in document&&"function"==typeof document.requestStorageAccess,O=["id.rambler.ru","id.championat.com","idrambler.afisha.ru","rid.eda.ru","id.gazeta.ru","id.lenta.ru","id.moslenta.ru","id.secretmag.ru","id.motor.ru","id.passion.ru","id.wmj.ru","id.letidor.ru","id.ferra.ru","id.quto.ru","id.indicator.ru"],E=function(t){return t.split(".").slice(-2).join(".")},L=function(){if("undefined"==typeof window)return"";var t=window.location.hostname,e=(C?O.filter((function(e){return E(e)===E(t)})):[])[0];return e?"https://".concat(e):"https://id.rambler.ru"},S="undefined"!=typeof window?null===(e=window.navigator)||void 0===e?void 0:e.userAgent:"",x=/(iPhone|iPod|iPad|Macintosh).*AppleWebKit(?!.*Safari)/i.test(S),T=/.*(; wv|Version\/\d\.\d|\.0\.0\.0).*/.test(S),I=/.*mail-native-app.*/i.test(S),F=x||T||I,R=/IEMobile|Windows Phone/i.test(S),A=/iPhone|iPad|iPod/i.test(S)&&!R,_=/Android/i.test(S)&&!R,P=A||_,j=(/Firefox/i.test(S),function(){return j=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},j.apply(this,arguments)}),D=function(t){var e={};return Object.keys(t).forEach((function(n){null!=t[n]&&(e[n]=t[n])})),e},k=function(t){var e={};return new URL(t).searchParams.forEach((function(t,n){e[n]=t})),e},N=function(t,e,n){if(!(Object.keys(e).length||n&&Object.keys(n).length))return t;var o=new URL(t),r=o.protocol,i=o.host,a=o.pathname,s=k(t),c=D(j(j({},s),e)),l=new URLSearchParams(c).toString(),u=l?"?".concat(l):"",d=function(t){var e={},n=new URL(t).hash;return new URLSearchParams(n.substring(1)).forEach((function(t,n){e[n]=t})),e}(t),p=D(j(j({},d),n)),f=new URLSearchParams(p).toString(),h=f?"#".concat(f):"";return"".concat(r,"//").concat(i).concat(a).concat(u).concat(h)},M=function(t){var e=new URL(t),n=e.protocol,o=e.host,r=e.pathname,i=e.search;return"".concat(n,"//").concat(o).concat(r).concat(i)},U=function(t,e,n){void 0===n&&(n={});var o=n.withCredentials,r=void 0!==o&&o,i=n.headers,a=new XMLHttpRequest;for(var s in a.withCredentials=r,a.open("get",t,!0),i)a.setRequestHeader(s,i[s]);a.onreadystatechange=function(){4===a.readyState&&0!==a.status&&e(null,a.responseText)},a.onerror=function(){e(new m({message:"location does not respond",code:0,details:{method:t}}))},a.send(null)},B=L(),H=function(t,e,n,o){void 0===o&&(o=B);var r=new XMLHttpRequest,i="".concat(o).concat("/api/v3").concat(t),a="rid".concat((Date.now().toString(36)+Math.random().toString(36).slice(2)).slice(0,17)),s={id:a,params:e};r.open("post",i,!0),r.setRequestHeader("Content-Type","application/json"),r.withCredentials=!0,r.onreadystatechange=function(){var e,o;if(4===r.readyState&&200===r.status){var i=JSON.parse(r.responseText),s=i.success,c=i.error,l=i.result,u=null===(e=null==c?void 0:c.extra)||void 0===e?void 0:e.legacy_error;if(s&&null==u)n(null,l);else if(null!=u){var d=u.errno,p=null===(o=u.strerror)||void 0===o?void 0:o.toLowerCase();n(new m({message:p,code:d,details:{method:t,requestId:a}}))}else n(new m({message:"api failed",code:0,details:{method:t,requestId:a}}))}},r.onerror=function(){n(new m({message:"api does not respond",code:0,details:{method:t,requestId:a}}))},r.send(JSON.stringify(s))},G=H.bind(null,"/profile/getInfo"),W=H.bind(null,"/legacy/Rambler::Id::destroy_session"),z=H.bind(null,"/session/getRsidx"),q=H.bind(null,"/session/getRccid"),Q=H.bind(null,"/legacy/Rambler::Common::get_configuration"),V=H.bind(null,"/legacy/Rambler::Id::set_rsid_local"),J=H.bind(null,"/legacy/Rambler::Id::Session_copy::create_request");!function(t){t.INSTALL="install",t.INSTALLED="installed",t.ERROR="error",t.REGISTER="register",t.LOGIN="login",t.OAUTHLOGIN="oauthlogin",t.LOGOUT="logout",t.CLOSE="close",t.REDIRECT="redirect",t.RESIZE="resize",t.LOADED="loaded",t.DESTROY="destroy",t.NAVIGATE="navigate",t.REQUEST_QR_CODE="request_qr_code",t.RESPONSE_QR_CODE="response_qr_code"}(o||(o={}));for(var Y,Z,X,$=function(t){Math.random()>.005||(Y?t(Y):Z?Z.push(t):(Z=[t],function(t,e){var n=document.createElement("script");n.src=t,n.onload=function(){e(null),document.body&&document.body.removeChild(n)},n.onerror=function(){e(new m({message:"script does not loaded"}))},document.body&&document.body.appendChild(n)}("".concat("https://id.rambler.ru").concat("/rambler-id-helper","/").concat("1.14.1","/sentry.js"),(function(t){Y?null==Z||Z.forEach((function(t){return t(Y)})):t||(Y=window[a],delete window[a],null==Z||Z.forEach((function(t){return t(Y)})))}))))},K=function(){return K=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},K.apply(this,arguments)},tt={width:750,height:450},et={sberbank:{title:"Сбер ID",width:1024,height:750},apple:{title:"Apple ID",width:650,height:750},livejournal:{title:"LiveJournal",width:750,height:650},pgumosru:{title:"mos.ru",width:750,height:650},google:{title:"Google",width:650,height:700},instagram:{title:"Instagram",width:750,height:650},webauthn:K({title:"Электронный ключ"},tt),vkontakte:K({title:"ВКонтакте"},tt),facebook:K({title:"Facebook"},tt),odnoklassniki:K({title:"Одноклассники"},tt),mailru:K({title:"Mail.Ru"},tt),twitter:K({title:"Twitter"},tt),mail:{title:"С помощью почты"},phone:{title:"По номеру телефона"},championat:K({title:"Championat"},tt)},nt=Object.keys(et).filter((function(t){return"mail"!==t&&"phone"!==t})),ot=n(883),rt=n.n(ot),it=rt()("id:helper:emitter"),at=function(){function t(){this.listeners={}}return t.prototype.existsListener=function(t,e){return this.listeners[t]&&-1!==this.listeners[t].indexOf(e)},t.prototype.addListener=function(t,e){it("addListener ".concat(t)),this.listeners[t]=this.listeners[t]||[],"function"!=typeof e||this.existsListener(t,e)||this.listeners[t].push(e)},t.prototype.removeListener=function(t,e){it("removeListener ".concat(t)),this.existsListener(t,e)&&this.listeners[t].splice(this.listeners[t].indexOf(e),1)},t.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];it("emit ".concat(t)),this.listeners[t]&&this.listeners[t].forEach((function(t){t.apply(void 0,e)}))},t}(),st=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ct=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n},lt=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},ut=/^https?:\/\/[^/]+\.rambler\.ru\//,dt=rt()("id:helper:emitter"),pt=function(t){function e(e){var n=t.call(this)||this;return n.AUTH_EVENTS=[o.LOGIN,o.OAUTHLOGIN,o.LOGOUT],n.ID_EVENTS=[o.INSTALLED,o.REGISTER,o.CLOSE,o.REDIRECT,o.RESIZE,o.LOADED,o.NAVIGATE,o.REQUEST_QR_CODE],n.PROPAGATED_EVENTS=lt(lt(lt([],n.AUTH_EVENTS,!0),n.ID_EVENTS,!0),[o.RESPONSE_QR_CODE],!1),n.firstPartyOrigin=L(),n.currentTabId="".concat((+new Date/1e3).toString(),"-").concat(Math.round(2147483647*Math.random()).toString()),n.onMessage=function(t){var e=t.data,o=t.origin,r=t.source;if(e&&"object"==typeof e){var a=e.emitter,s=e.eventType,c=e.redirectUrl,l=e.data,u=e.frameInfo,d=void 0===u?l||{}:u,p=ct(e,["emitter","eventType","redirectUrl","data","frameInfo"]);r&&(p.source=r),a!==i||n.isEventOnlyFromId(s)&&"https://id.rambler.ru"!==o||(!c||"object"!=typeof d||d instanceof Error||(d.redirectUrl=c),n.isAuthEvent(s)?n.emit(s,l,p):n.emit(s,d,null!=c?c:p))}},n.notifyListeners=function(t){for(var e,o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];var i=n.listeners,a=lt([],null!==(e=i[t])&&void 0!==e?e:[],!0);a.forEach((function(t){t.apply(void 0,o)}))},n.settings=e,n.install(),n}return st(e,t),e.prototype.install=function(){var t=this;this.settings.storage&&(this.storage=document.createElement("iframe"),this.storage.src="".concat(this.firstPartyOrigin).concat("/rambler-id-helper","/").concat("1.14.1","/storage.html"),this.storage.style.width="0",this.storage.style.height="0",this.storage.style.border="0",this.storage.style.position="absolute",this.storage.style.left="-9999px",this.storage.setAttribute("aria-hidden","true"),this.storage.setAttribute("loading","eager"),this.storage.onload=function(){var e,n,r={eventType:o.INSTALL,emitter:i,data:{providerOrigin:window.location.href}};try{null===(n=null===(e=t.storage)||void 0===e?void 0:e.contentWindow)||void 0===n||n.postMessage(r,t.firstPartyOrigin),t.emit(o.INSTALLED)}catch(e){t.emit(o.ERROR,new Error("storage is not installed"))}},this.storage.onerror=function(){t.emit(o.INSTALLED),t.emit(o.ERROR,new Error("storage is not loaded"))},document.body&&document.body.appendChild(this.storage)),window.addEventListener("message",this.onMessage,!1)},e.prototype.isAuthEvent=function(t){return this.AUTH_EVENTS.includes(t)},e.prototype.isEventOnlyFromId=function(t){return this.ID_EVENTS.includes(t)},e.prototype.isPropagatedEvent=function(t){return this.PROPAGATED_EVENTS.includes(t)},e.prototype.getBroadcastNodes=function(t){var e=window.opener,n=window.parent,o=this.isAuthEvent(t)?Array.prototype.slice.call(document.getElementsByTagName("iframe")).filter((function(t){return ut.test(t.src)})).map((function(t){return t.contentWindow})):[];return[e,n!==window&&n].concat(o).filter(Boolean)},e.prototype.notifyBroadcastNodes=function(t,e){try{(e?[e]:this.getBroadcastNodes(t.eventType)).forEach((function(e){e.postMessage(t,"*")}))}catch(t){}},e.prototype.emit=function(t,e,n){for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];dt("emit ".concat(t," %o %o"),e,n);var a="";if(this.isPropagatedEvent(t)){var s=this,c=s.currentTabId,l=s.latestEventId,u=n&&"object"==typeof n?n:{},d=u.tabId,p=void 0===d?null:d,f=u.time,h=void 0===f?Date.now():f,m=ct(u,["tabId","time"]),v="".concat(t,":").concat(h);if(v===l)return;var y=!e||"object"!=typeof e||e instanceof Error?{}:e,g=y.silentCurrentTab,b=void 0===g?m.silentCurrentTab:g,w=y.redirectUrl,C=void 0===w?"":w,O=!p||p===c,E={emitter:i,eventType:t,time:h,data:e,tabId:p||c};if(this.notifyBroadcastNodes(E,u.target),this.latestEventId=v,a=C,O&&b)return}var L=lt([t,e,a||n],o,!0);this.storage?window.setTimeout.apply(window,lt([this.notifyListeners,10],L,!1)):this.notifyListeners.apply(this,L)},e.prototype.destroy=function(){this.listeners={},this.storage&&(document.body.removeChild(this.storage),delete this.storage),window.removeEventListener("message",this.onMessage,!1)},e}(at),ft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ht=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n},mt="https://id.rambler.ru",vt=function(t){function e(n){var r=t.call(this,{storage:!1})||this;return r.resize=function(t){var e=t.height;r.container instanceof HTMLElement&&(r.container.style.height="".concat(e,"px"))},r.redirect=function(t,e){window.location.href=e},r.close=function(){var t=r,e=t.frame,n=t.container;if(e){if(!(e instanceof HTMLIFrameElement)&&"function"==typeof e.close)return clearInterval(r.closeInterval),e.close(),void window.focus();n instanceof HTMLElement&&"embed"!==r.type&&(n.style.zIndex="-1",n.style.transform="translateY(-100vh)",n.style.opacity="0",document.documentElement instanceof HTMLElement&&(document.documentElement.style.overflow="")),window.focus()}},r.destroy=function(){r.close();var n=r,i=n.frame,a=n.container;i instanceof HTMLIFrameElement&&a instanceof HTMLElement&&("embed"===r.type?setTimeout((function(){a.removeChild(i),a.removeAttribute("data-id-frame")}),500):document.body&&document.body.removeChild(a)),delete e.frame,setTimeout((function(){r.removeListener(o.RESIZE,r.resize),r.removeListener(o.CLOSE,r.close),r.removeListener(o.REDIRECT,r.redirect)}),0),r.emit(o.DESTROY),t.prototype.destroy.call(r)},r.configure(n),r}return ft(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.options.container instanceof HTMLElement?"embed":C?"popup":"iframe"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return e.frame},set:function(t){e.frame=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frameUrl",{get:function(){var t,e=this.options,n=e.path,o=void 0===n?"/login-20/login":n,r=(e.container,e.startTime),i=ht(e,["path","container","startTime"]),a=window.location,s=a.href,c=a.protocol,l=a.host;return null!==(t=i.back)&&void 0!==t||(i.back=s),i.param=this.type,i.iframeOrigin="".concat(c,"//").concat(l),N("".concat(mt).concat(o),i,{startTime:r})},enumerable:!1,configurable:!0}),e.prototype.showOnLoaded=function(){var t=this,e=this.frame,n=this.container;if(e instanceof HTMLIFrameElement){var r=function(){t.removeListener(o.LOADED,r),e.style.visibility="",e.style.height="100%",n instanceof HTMLElement&&"embed"!==t.type&&(n.style.zIndex="10000",n.style.transform="translateY(0)",n.style.opacity="1",document.documentElement instanceof HTMLElement&&(document.documentElement.style.overflow="hidden"))};this.addListener(o.LOADED,r)}},e.prototype.configure=function(t){var e,n=ht(t,[]);this.options=n,null!==(e=this.container)&&void 0!==e||(this.container=n.container)},e.prototype.attach=function(){var t=this,e=null;try{e=this.frame instanceof HTMLIFrameElement?this.frame.parentElement:null}catch(t){}if("popup"!==this.type&&this.frame instanceof HTMLIFrameElement&&(null==this.container||this.container instanceof HTMLElement&&this.container===e)){if(this.showOnLoaded(),this.frame.src=this.frameUrl,M(this.frame.src)===M(this.frameUrl)){var n=function(){var e,r;null===(e=t.frame)||void 0===e||e.removeEventListener("load",n),t.emit(o.LOADED),null===(r=t.frame)||void 0===r||r.focus()};this.frame.addEventListener("load",n)}}else"popup"===this.type?this.frame=window.open(this.frameUrl,"idFrame","status=1,toolbar=0,menubar=0,resizable=1,scrollbars=1,width=800px,height=700px,top=100px,left=100px"):(this.frame=document.createElement("iframe"),this.frame.src=this.frameUrl,this.frame.frameBorder="0",this.frame.style.visibility="hidden",this.frame.style.width="100%",this.frame.style.display="block",this.frame.setAttribute("loading","eager"),this.container instanceof HTMLElement?(this.frame.style.height="0px",this.container.setAttribute("data-id-frame","embed")):(this.container=document.createElement("div"),this.container.style.position="fixed",this.container.style.top="0px",this.container.style.left="0px",this.container.style.right="0px",this.container.style.bottom="0px",this.container.style.zIndex="-1",this.container.style.transform="translateY(-100vh)",this.container.style.opacity="0",this.container.style.transition="all 250ms",this.container.style.overflowY="auto",this.container.style.webkitOverflowScrolling="touch",this.container.setAttribute("data-id-frame","own")),this.container.appendChild(this.frame),document.body&&null==this.container.parentElement&&document.body.appendChild(this.container),this.showOnLoaded());"embed"===this.type&&this.addListener(o.RESIZE,this.resize),this.addListener(o.CLOSE,this.close),this.addListener(o.REDIRECT,this.redirect);var r=this.frame;r instanceof HTMLIFrameElement||(clearInterval(this.closeInterval),this.closeInterval=window.setInterval((function(){(null==r?void 0:r.closed)&&(clearInterval(t.closeInterval),t.emit(o.CLOSE))}),500))},e}(pt),yt=function(){function t(t){this.providersOptions=nt.reduce((function(t,e){var n;return K(K({},t),((n={})[e]=et[e],n))}),{}),this.options=t}return Object.defineProperty(t.prototype,"windowUrl",{get:function(){var t,e,n,o=this.options,r=(o.targetWindow,o.startTime),i=ht(o,["targetWindow","startTime"]);return null!==(t=i.popup)&&void 0!==t||(i.popup=!0),null!==(e=i.on)&&void 0!==e||(i.on="login"),null!==(n=i.back)&&void 0!==n||(i.back=window.location.href),"popup"===i.param&&F&&delete i.popup,N("".concat(mt,"/oauth-20/"),i,{startTime:r})},enumerable:!1,configurable:!0}),t.prototype.attach=function(){var t,e,n,o,r,i=this,a=i.options,s=i.providersOptions,c=i.windowUrl;if("popup"===a.param&&F)return window.location.href=c,void(null===(t=a.targetWindow)||void 0===t||t.close());var l=null!==(n=null===(e=s[a.provider])||void 0===e?void 0:e.height)&&void 0!==n?n:750,u=null!==(r=null===(o=s[a.provider])||void 0===o?void 0:o.width)&&void 0!==r?r:450;if(a.targetWindow)return a.targetWindow.location.href=c,a.targetWindow.resizeTo(u,l),void a.targetWindow.focus();this.window=window.open(c,"oauthWindow","status=1,toolbar=0,menubar=0,resizable=1,scrollbars=1,width=".concat(u,"px,height=").concat(l,"px,top=100px,left=100px"))},t.prototype.destroy=function(){var t;null===(t=this.window)||void 0===t||t.close()},t}(),gt=256,bt=[];gt--;)bt[gt]=(gt+256).toString(16).substring(1);function wt(){var t,e=0,n="";if(!X||gt+16>256){for(X=Array(e=256);e--;)X[e]=256*Math.random()|0;e=gt=0}for(;e<16;e++)t=X[gt+e],n+=6==e?bt[15&t|64]:8==e?bt[63&t|128]:bt[t],1&e&&e>1&&e<11&&(n+="-");return gt++,n}var Ct=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ot=function(){return Ot=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Ot.apply(this,arguments)},Et="sberIdNotificationBannerClosed",Lt="sberIdNotificationBannerCloseCount",St={path:"/",domain:window.location.hostname.split(".").slice(-2).join(".")},xt=[1/12,1,7,28],Tt=function(t){function e(e){var n,o,r,i=this;(i=t.call(this)||this).onLoginClick=function(){i.emit("click")},i.onCloseClick=function(){var t,e=null!==(t=p(Lt))&&void 0!==t?t:0;f(Et,!0,Ot(Ot({},St),{expires:xt[Math.min(e,3)]})),f(Lt,e+1,Ot(Ot({},St),{expires:365})),i.destroy()},i.options=Ot(Ot({},e),{fontFamily:null!==(n=e.fontFamily)&&void 0!==n?n:"Roboto, sans-serif",position:null!==(o=e.position)&&void 0!==o?o:"bottom-right",autoCloseDuration:null!==(r=e.autoCloseDuration)&&void 0!==r?r:0,offset:Ot({top:30,left:30,right:30,bottom:30},e.offset)});var a=i.options.position.split("-").reverse(),s=a[0],c=a[1],l=void 0===c?"bottom":c;return i.container=document.createElement("div"),i.container.style.position="fixed",i.container.style.opacity="0",i.container.style.background="#fff",i.container.style.border="1px solid #E3E3E3",i.container.style.boxShadow="0px 10px 24px rgba(45, 73, 88, 0.15)",i.container.style.borderRadius=P?"0":"5px",i.container.style.padding="20px",i.container.style.display="flex",i.container.style.width=P?"100%":"auto",i.container.style.boxSizing="border-box",i.container.style.flexDirection="column",i.container.style.fontFamily=i.options.fontFamily,i.container.style.minWidth="320px",i.container.style.transition="opacity 200ms",i.container.style[s]=P?"0":i.options.offset[s]+"px",i.container.style[l]=P?"0":i.options.offset[s]+"px",i.label=document.createElement("div"),i.label.style.fontSize="15px",i.label.style.lineHeight="18px",i.label.style.color="#767676",i.label.style.marginBottom="16px",i.label.style.fontWeight="600",i.label.textContent="Вход по Сбер ID",i.container.appendChild(i.label),i.closeButton=document.createElement("a"),i.closeButton.setAttribute("role","button"),i.closeButton.style.fontSize="0",i.closeButton.style.lineHeight="12px",i.closeButton.style.color="#767676",i.closeButton.style.position="absolute",i.closeButton.style.top="10px",i.closeButton.style.right="10px",i.closeButton.style.cursor="pointer",i.closeButton.style.display="flex",i.closeButton.style.padding="10px",i.closeButton.innerHTML='<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 4.65094L10.3675 0.282877C10.7431 -0.0927631 11.3485 -0.0942703 11.721 0.27826C12.0961 0.653395 12.0914 1.25686 11.7164 1.63195L7.34886 6L11.7164 10.368C12.0914 10.7431 12.0961 11.3466 11.721 11.7217C11.3485 12.0943 10.7431 12.0928 10.3675 11.7171L6 7.34906L1.63247 11.7171C1.25688 12.0928 0.651469 12.0943 0.278986 11.7217C-0.0960822 11.3466 -0.0914182 10.7431 0.283602 10.368L4.65114 6L0.283602 1.63195C-0.0914182 1.25686 -0.0960822 0.653395 0.278986 0.27826C0.651469 -0.0942703 1.25688 -0.0927631 1.63247 0.282877L6 4.65094Z" fill="currentColor"/></svg>',i.container.appendChild(i.closeButton),i.button=document.createElement("a"),i.button.setAttribute("role","button"),i.button.style.display="flex",i.button.style.alignItems="center",i.button.style.justifyContent="center",i.button.style.textDecoration="none",i.button.style.height="48px",i.button.style.fontSize="16px",i.button.style.fontWeight="400",i.button.style.lineHeight="19px",i.button.style.color="#fff",i.button.style.backgroundColor="#21A038",i.button.style.padding="0 23px",i.button.style.borderRadius="4px",i.button.innerHTML='<svg width="22" height="22" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13 0C16.0927 0 18.9337 1.08103 21.1657 2.88421L18.6371 4.74793C17.0315 3.64848 15.0899 3.00354 13 3.00354C7.48924 3.00354 3.00587 7.48999 3.00587 13.0013C3.00587 18.5126 7.48924 22.9965 13 22.9965C18.5134 22.9965 22.9968 18.5126 22.9968 13.0013C22.9968 12.9118 22.9941 12.8223 22.9924 12.7328L25.7912 10.6699C25.9289 11.4245 26 12.2055 26 13.0013C26 20.1807 20.1795 26 13 26C5.82135 26 0 20.1807 0 13.0013C0 5.81931 5.82135 0 13 0ZM23.2856 5.05241C23.9006 5.84651 24.4262 6.71169 24.8456 7.63565L13.0002 16.3673L8.05093 13.2628V9.52921L13.0002 12.6337L23.2856 5.05241Z" fill="currentColor"/></svg>',i.container.appendChild(i.button),i.buttonText=document.createElement("span"),i.buttonText.style.marginLeft="8px",i.buttonText.textContent=e.displayName?"Войти как ".concat(e.displayName):"Войти по Сбер ID",i.button.appendChild(i.buttonText),i}return Ct(e,t),e.prototype.attach=function(){var t=this;this.button.addEventListener("click",this.onLoginClick),this.closeButton.addEventListener("click",this.onCloseClick),document.body.appendChild(this.container),window.setTimeout((function(){t.container.style.opacity="1"}),0),this.options.autoCloseDuration&&(this.autoCloseTimeout=window.setTimeout(this.onCloseClick,this.options.autoCloseDuration))},e.prototype.destroy=function(){var t=this;clearTimeout(this.autoCloseTimeout),this.container.style.opacity="0",this.button.removeEventListener("click",this.onLoginClick),this.closeButton.removeEventListener("click",this.onCloseClick),this.emit("destroy"),window.setTimeout((function(){document.body.removeChild(t.container)}),200)},e}(at),It="unset",Ft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Rt=function(){return Rt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Rt.apply(this,arguments)},At=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n},_t=function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},Pt=function(){},jt=function(t){var e,n=null!==(e=t.debug)&&void 0!==e?e:k(window.location.href).debug;return n?{debug:n}:{}},Dt=1===w("itpRedirectorStageApi")?"/api/itp/v2/test-redirector":"/api/itp/v2/redirector",kt="https://id.rambler.ru",Nt="/rambler-id-helper",Mt="1.14.1",Ut=rt()("id:helper");!function(t){if("undefined"!=typeof window){var e=k(window.location.href).debug,n=w("debug",{raw:!0});e&&"string"==typeof e&&n!==e&&(n||e!==It)&&(e===It?function(t){try{window.localStorage.removeItem("debug")}catch(t){}}():function(t,e,n){void 0===n&&(n={});var o=n.raw;try{var r=o?String(e):JSON.stringify(e);window.localStorage.setItem("debug",r)}catch(t){}}(0,e,{raw:!0}))}}(),Ut(Mt);var Bt=function(t){function e(){var e=t.call(this,{storage:!0})||this;return e.Events=o,e.userSession=!1,e.requestQRCode=function(t,n){var r="function"==typeof t,i=!!(null==n?void 0:n.source);(r||i)&&J({domain:window.location.host.replace("www.","")},(function(r,a){r&&e.emit(o.ERROR,r),i?e.emit(o.RESPONSE_QR_CODE,{response:a,error:r?Rt({},r):null},{target:n.source}):t({response:a,error:r})}))},e.getAuthQRCode=function(t,n){var r=function(n){var i=n.error,a=n.response;i?t(null,new m(i)):t(a),e.removeListener(o.RESPONSE_QR_CODE,r)};n?(e.emit(o.REQUEST_QR_CODE),e.addListener(o.RESPONSE_QR_CODE,r)):e.requestQRCode(r)},e.sendError=function(t){~c.indexOf(t.message)||"code"in t&&t.code&&~c.indexOf(t.code)||$((function(e){e.withScope((function(n){var o=Rt(Rt({},"code"in t&&{code:t.code}),"details"in t&&t.details);for(var r in o)o.hasOwnProperty(r)&&n.setExtra(r,o[r]);e.captureException(t)}))}))},e.removeCache=function(){delete window.PRIME_SSR_STATUS,function(t,e){try{d.remove("rchainid",e)}catch(t){}}(0,g)},e.closeAuth=function(t){var n;void 0===t&&(t=Pt),null===(n=e.authFrame)||void 0===n||n.close(),"function"==typeof t&&t()},e.addListener(o.LOGIN,e.removeCache),e.addListener(o.OAUTHLOGIN,e.removeCache),e.addListener(o.LOGOUT,e.removeCache),e.addListener(o.ERROR,e.sendError),e.addListener(o.REQUEST_QR_CODE,e.requestQRCode),e}return Ft(e,t),Object.defineProperty(e.prototype,"hasTrackingPrevention",{get:function(){return C},enumerable:!1,configurable:!0}),e.prototype.push=function(t){void 0===t&&(t=Pt),t()},e.prototype.logout=function(t,e){var n=this;void 0===e&&(e=Pt),"function"==typeof t&&(e=t,t=void 0),W({},(function(r){r&&n.emit(o.ERROR,r),n.emit(o.LOGOUT,t),e(null,r)}))},e.prototype.getProfileInfo=function(t,e){var n=this;void 0===e&&(e=Pt),"function"==typeof t&&(e=t,t={}),G(t,(function(t,r){n.userSession=!!r,t&&n.emit(o.ERROR,t),e(r?r.profile:null,t)}))},e.prototype.getSessionToken=function(t){var e=this;void 0===t&&(t=Pt),z({},(function(n,r){e.userSession=!!r,n&&e.emit(o.ERROR,n),b(null!=n?n:null==r?void 0:r.result.rccid),t(r?r.result:null,n)}))},e.prototype.getDefaultChainId=function(t){var e=this;void 0===t&&(t=Pt);var n=function(){var t=p(y);if(!t||"string"==typeof t)return t;var e=t.code,n=t.message,o=t.details;return"details"in t?new m({message:n,code:e,details:o}):new Error(n)}();n instanceof Error?t(null,n):n?t({rccid:n}):q({},(function(n,r){n&&e.emit(o.ERROR,n),b(null!=n?n:null==r?void 0:r.rccid),t(r?{rccid:r.rccid}:null,n)}))},e.prototype.createPropagationWindow=function(){return!this.hasTrackingPrevention||x?null:window.open("".concat(kt).concat(Nt,"/").concat(Mt,"/noop.html"),"","status=1,toolbar=0,menubar=0,resizable=1,scrollbars=1,width=250px,height=100px,top=100px,left=100px")},e.prototype.propagateSession=function(t,e,n){var r=this;void 0===e&&(e={eventType:o.LOGIN}),void 0===n&&(n=Pt);var i=e.eventType,a=void 0===i?o.LOGIN:i,s=e.shortSession,c=void 0!==s&&s,l=e.propagationWindow,d=void 0===l?null:l,p=At(e,["eventType","shortSession","propagationWindow"]);p.keepWindow&&(p.data=p.data||{},p.data.keepWindow=p.keepWindow),this.hasTrackingPrevention?u()(O,(function(t,e){U("https://".concat(t,"/api/itp/v2/ping"),(function(n,o){var r;try{r=JSON.parse(o)}catch(t){}e(null,[t,null==r?void 0:r.response,n])}))}),(function(e,i){var s=i.filter((function(t){return t[0]===O[0]})).map((function(t){return t[1]}))[0],l=[],u=[];i.forEach((function(t){var e=t[0],n=t[1],o=t[2];s&&s===n?l.push(e):u.push(o||new m({message:"ping response wrong",code:0,details:{method:"https://".concat(e,"/api/itp/v2/ping")}}))})),u.length>0&&$((function(){u.forEach((function(t){return r.emit(o.ERROR,t)}))}));var f=l[0],h=void 0===f?"https://id.rambler.ru".replace(/^https?:\/\//,""):f,v=l.slice(1),y="".concat(kt).concat(Nt,"/").concat(Mt,"/propagate.html")+"?extra=".concat(encodeURIComponent(JSON.stringify(Rt({eventType:a},p)))),g="https://".concat(h).concat(Dt,"?rsid=").concat(t||"")+"&setShortCookie=".concat(c?1:0)+v.map((function(t){return"&to=".concat(t)})).join("")+"&back=".concat(encodeURIComponent(y));if(!d)return n(),void(window.location.href=g);var b=function(){r.removeListener(a,b),n()};r.addListener(a,b),d.location.replace(g)})):Q({key:"ServerSideDomains"},(function(e,o){var i=e?[]:Object.keys(o.configuration).filter((function(t){return!!o.configuration[t]}));u()(i,(function(e,n){var o=e.split(".").slice(-2).join(".");V({domain:o,id:t},(function(){return n(null)}),"https://".concat(e))}),(function(){if(p.back&&!p.popup){var t=function(){setTimeout((function(){var e;r.removeListener(a,t),n(),window.location.href=null!==(e=p.back)&&void 0!==e?e:""}),500)};r.addListener(a,t)}else n();r.emit(a,p.data)}))}))},e.prototype.activateCookies=function(t){if(void 0===t&&(t=Pt),window.parent!==window)if(f(s,1,{expires:1/24/6,path:"/",domain:".rambler.ru",samesite:"none",secure:!0}),p(s))t();else{var e=window.open("".concat(kt).concat(Nt,"/").concat(Mt,"/cookies.html"),"","status=1,toolbar=0,menubar=0,resizable=1,scrollbars=1,width=500px,height=300px,top=100px,left=100px"),n=function(o){o.data===s&&(window.removeEventListener("message",n),null==e||e.close(),t())};window.addEventListener("message",n)}else t()},e.prototype.getSberIdUserInfo=function(t){void 0===t&&(t=Pt),function(t){U("https://id.sber.ru/CSAFont/api/userdata?client_id=".concat("fbdea60d-1f60-425f-9917-d2fe53b2ac3f"),(function(e,n){t(e,n&&JSON.parse(n))}),{withCredentials:!0,headers:{"Process-ID":wt().replace(/-/g,"")}})}((function(e,n){t(n,e)}))},e.prototype.showSberIdNotificationBanner=function(t){var e=this;(function(){var t;return null!==(t=p(Et))&&void 0!==t&&t})()||this.sberIdBanner||this.userSession||this.getSberIdUserInfo((function(n){if(n&&!e.sberIdBanner&&!e.userSession){var r=t.position,i=t.fontFamily,a=t.offset,s=t.autoCloseDuration,c=At(t,["position","fontFamily","offset","autoCloseDuration"]),l="".concat((null==n?void 0:n.firstname)||""," ").concat((null==n?void 0:n.surname)||"").trim();e.sberIdBanner=new Tt({position:r,fontFamily:i,offset:a,autoCloseDuration:s,displayName:l}),e.sberIdBanner.attach();var u=function(){e.openProviderOAuth(Rt(Rt({},c),{action:"login",provider:"sberbank",provider_sso:Boolean(l)}))},d=function(){var t;null===(t=e.sberIdBanner)||void 0===t||t.destroy()},p=function(){var t,n;null===(t=e.sberIdBanner)||void 0===t||t.removeListener("click",u),null===(n=e.sberIdBanner)||void 0===n||n.removeListener("destroy",p),e.removeListener(o.LOGIN,d),e.removeListener(o.OAUTHLOGIN,d),delete e.sberIdBanner};e.sberIdBanner.addListener("click",u),e.sberIdBanner.addListener("destroy",p),e.addListener(o.LOGIN,d),e.addListener(o.OAUTHLOGIN,d)}}))},e.prototype.redirectToAuth=function(t){void 0===t&&(t={}),Ut("redirectToAuth %o",t);var e=t.path,n=void 0===e?"/login-20/login":e,o=At(t,["path"]),r=Rt(Rt({back:window.location.href},o),jt(t)),i={startTime:Date.now()};this.userSession||(r.session=!1);var a=N("https://id.rambler.ru".concat(n),r,i);window.location.href=a},e.prototype.openAuth=function(t,e){var n=this;void 0===t&&(t={}),void 0===e&&(e=Pt),Ut("openAuth %o",t);var r=Rt(Rt(Rt({},t),jt(t)),{startTime:Date.now()});if(this.userSession||(r.session=!1),this.authFrame)this.authFrame.configure(r);else{this.authFrame=new vt(r);var i=function(t){var e;"object"==typeof t&&((null==t?void 0:t.keepWindow)||"registration"===(null==t?void 0:t.on))||null===(e=n.authFrame)||void 0===e||e.destroy()},a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.emit.apply(n,_t([o.CLOSE],t,!1))},s=function(){setTimeout((function(){var t,e;null===(t=n.authFrame)||void 0===t||t.removeListener(o.CLOSE,a),null===(e=n.authFrame)||void 0===e||e.removeListener(o.DESTROY,s),n.removeListener(o.LOGIN,i),n.removeListener(o.OAUTHLOGIN,i),delete n.authFrame}),0)};this.authFrame.addListener(o.CLOSE,a),this.authFrame.addListener(o.DESTROY,s),this.addListener(o.LOGIN,i),this.addListener(o.OAUTHLOGIN,i)}var c=function(){var t;null===(t=n.authFrame)||void 0===t||t.removeListener(o.LOADED,c),e()},l=function(){var t,e,r;null===(t=n.authFrame)||void 0===t||t.removeListener(o.CLOSE,l),null===(e=n.authFrame)||void 0===e||e.removeListener(o.DESTROY,l),null===(r=n.authFrame)||void 0===r||r.removeListener(o.LOADED,c)};this.authFrame.addListener(o.CLOSE,l),this.authFrame.addListener(o.DESTROY,l),this.authFrame.addListener(o.LOADED,c),this.authFrame.attach()},e.prototype.openProviderOAuth=function(t){Ut("openProviderOAuth %o",t),new yt(Rt(Rt(Rt({},t),jt(t)),{startTime:Date.now()})).attach()},e.prototype.redirectToProviderOAuth=function(t){Ut("redirectToProviderOAuth %o",t);var e=Rt(Rt({on:"login",back:window.location.href},t),jt(t)),n={startTime:Date.now()},o=N("https://id.rambler.ru/oauth-20/",e,n);window.location.href=o},e}(pt),Ht=function(){if(Array.isArray(window[i])||!window[i]){var t=window[i]||[];window[i]=new Bt,t.forEach((function(t){return t()}))}};document.body?Ht():document.addEventListener("DOMContentLoaded",Ht,!1)}()}();
//# sourceMappingURL=auth_events.js.map