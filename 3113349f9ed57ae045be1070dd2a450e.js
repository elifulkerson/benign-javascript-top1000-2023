window.addEventListener("load",function(){let t;function e(t){let e=t+"=",n=decodeURIComponent(document.cookie).split(";");for(let t=0;t<n.length;t++){let i=n[t];for(;" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(e))return i.substring(e.length,i.length)}return""}if(""===(t=e("lgn_w"))&&(t=e("LoginWith")),""!==t){if(""===e("usermail")){const n=e("kmp_uid");if(""!==n){const e=`https://apis.kompas.com/api/sso_new/user/detail?token=${n}&loginwith=${t}`;console.log("initiating..."),fetch(e).then(t=>t.json()).then(t=>{if(!0===t.status){(async function(t){const e=(new TextEncoder).encode(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(t=>t.toString(16).padStart(2,"0")).join("")})(function(t){return`${(t=t.split("@"))[0].replace(/\W/gi,"")}@${t[1]}`}(t.user.email)).then(t=>{!function(t,e,n){let i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);const o="expires="+i.toUTCString();let s=window.location.hostname.split(".").slice(-2).join(".");document.cookie=t+"="+e+"; "+o+"; path=/; domain= ."+s+"; secure; SameSite=None"}("usermail",t,365),console.log("Finish")})}})}}}});