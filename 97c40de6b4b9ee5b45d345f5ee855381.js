"use strict";(self.webpackChunkxhh=self.webpackChunkxhh||[]).push([[95466,10070],{95466:
/*!****************************************************************!*\
  !*** ./webapp-static/js/Modules/ProxyExternalServiceLoader.ts ***!
  \****************************************************************/(e,r,t)=>{t.r(r),t.d(r,{default:()=>N});var n=t(/*! @babel/runtime/helpers/asyncToGenerator */10724),a=t(/*! @babel/runtime/helpers/slicedToArray */70789),o=t(/*! @babel/runtime/helpers/objectWithoutProperties */15279),u=t(/*! @babel/runtime/regenerator */7139),i=t.n(u),c=t(/*! @hh.ru/analytics-js */81546),s=t.n(c),l=t(/*! @hh.ru/stats-sender */56142),d=t(/*! lux/models/userNotifications */17626),p=t(/*! lux/modules/fetcher */9311),v=t(/*! lux/modules/typedStore */11944),f=t(/*! Modules/microFrontendState */10070),m=["remote","onerror","onload"],S=function(e,r){var t=e.remote,n=e.onerror,u=e.onload,i=(0,o.Z)(e,m),c=document.createElement("script");Object.entries(i).forEach((function(e){var r=(0,a.Z)(e,2),t=r[0],n=r[1];c[t]=n})),u&&c.addEventListener("load",u),n&&c.addEventListener("error",(function(){return n(i.src)})),t&&(c.dataset.webpack=t),r.appendChild(c)},b=function(e){return window[e]},h=function(e){return e?document.querySelector('[data-webpack="'.concat(e,'"]')):null},x={},w=function(){var e=(0,n.Z)(i().mark((function e(r,a,o,u){var c,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=new Promise((function(e){var c,d,p,v,f,m,w=h(r),y=function(){var u=(0,n.Z)(i().mark((function n(){var u;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s().sendHHEvent("mf_load_success",{remote:r,src:o}),n.next=3,t.I("default");case 3:if(!(u=b(r)).inited){n.next=7;break}return e(),n.abrupt("return");case 7:return n.next=9,u.init(t.S[a]);case 9:u.inited=!0,e();case 11:case"end":return n.stop()}}),n)})));return function(){return u.apply(this,arguments)}}(),g=function(e){var t,n,a,o,u;null!==(t=PerformanceObserver)&&void 0!==t&&null!==(n=t.supportedEntryTypes)&&void 0!==n&&null!==(a=n.includes)&&void 0!==a&&a.call(n,"resource")&&(u=performance.getEntriesByType("resource").filter((function(r){return!!e&&r.name.includes(e)})));var i=null===(o=u)||void 0===o?void 0:o.reduce((function(e,r){return e+r.duration}),0);s().sendHHEvent("mf_load_error",{remote:r,src:e,remoteScriptResourceDuration:i}),new l.ZP("xhh",window.globalVars,"/stat").sendMetrics({report:"mf-load-error",value:i})};s().sendHHEvent("mf_loadEntry",{remote:r,src:o}),r in window?y():w?x[r].then((function(){y()})):(s().sendHHEvent("mf_load_start",{remote:r,src:o,effectiveType:null!==(c=null===(d=navigator)||void 0===d||null===(p=d.connection)||void 0===p?void 0:p.effectiveType)&&void 0!==c?c:"not supported",downlink:null!==(v=null===(f=navigator)||void 0===f||null===(m=f.connection)||void 0===m?void 0:m.downlink)&&void 0!==v?v:"not supported"}),S({src:o,type:"text/javascript",crossOrigin:"anonymous",onload:y,onerror:g,remote:r},u))})),x[r]=null!==(c=x[r])&&void 0!==c?c:d,e.abrupt("return",d);case 3:case"end":return e.stop()}}),e)})));return function(r,t,n,a){return e.apply(this,arguments)}}(),y={},g=function(){var e=(0,n.Z)(i().mark((function e(r,t,n){var a,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s().sendHHEvent("mf_getRemoteModule",{remote:r,src:t}),!r||!t){e.next=18;break}return e.prev=2,e.next=5,w(r,"default",t,n);case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(2),s().sendHHEvent("mf_get_or_load_error",{remote:r,src:t}),e.abrupt("return",null);case 11:return a=b(r),e.next=14,a.get("./App");case 14:return o=e.sent,u=o(),y[n.classList.value]={hasDefault:!0,moduleValue:u.default.toString().length},e.abrupt("return",u.default);case 18:return e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(r,t,n){return e.apply(this,arguments)}}(),k=function(){var e=(0,n.Z)(i().mark((function e(r,t,n,a,o){var u,c,s,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==g?void 0:g(r,n,a);case 2:if(l=e.sent,(0,f.setInitedState)(o,(0,f.getMountState)(o)),(0,f.getMountState)(o)){e.next=6;break}return e.abrupt("return",null);case 6:return null!==(u=window.globalServiceVars)&&void 0!==u&&null!==(c=u[t])&&void 0!==c&&c.hasSupportToDestroyApp&&l&&(l=l()),null===(s=l)||void 0===s||s({unmountApp:!1,container:a,identifier:o}),e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)})));return function(r,t,n,a,o){return e.apply(this,arguments)}}(),E={userNotifications:function(e,r){e((0,d.zb)(r))}},H=function(){var e=(0,n.Z)(i().mark((function e(r){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.b)();case 2:t=e.sent,Object.keys(E).forEach((function(e){var n=r[e],a=E[e];void 0!==n&&a&&a(t.dispatch,n)}));case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();const N=function(){var e=(0,n.Z)(i().mark((function e(r,t,a,o,u){var c,s,l,d,v,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=2;break}return e.abrupt("return",null);case 2:if(s=function(){var e=(0,n.Z)(i().mark((function e(r){var t,n,u,c,s,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==a){e.next=2;break}return e.abrupt("return",null);case 2:if(a.classList.add("HH-ProxyExternalServiceLoader-".concat(r.globalServiceName)),!r.isSuccessSSR||""===r.renderResult||!r.remoteServiceName){e.next=9;break}return r.inlineScript&&S({type:"text/javascript",innerHTML:r.inlineScript},a),e.next=7,k(r.remoteServiceName,r.globalServiceName,r.remoteEntry,a,o);case 7:return u=e.sent,e.abrupt("return",[u,r.globalServiceName]);case 9:if(a.innerHTML="",(c=document.createElement("div")).innerHTML=r.renderResult,a.appendChild(c),null===(t=r.styles)||void 0===t||t.forEach((function(e){var r,t,n;r={href:e,type:"text/css",rel:"stylesheet"},t=a,n=document.createElement("link"),new Promise((function(e){n.addEventListener("load",(function(){e()}))})),Object.keys(r).forEach((function(e){n[e]=r[e]})),t.appendChild(n)})),r.inlineScript&&S({type:"text/javascript",innerHTML:r.inlineScript},a),null===(n=r.scripts)||void 0===n||n.forEach((function(e){S({src:"".concat(e),type:"text/javascript",crossOrigin:"anonymous"},a)})),!r.remoteEntry){e.next=23;break}return(s=h(r.remoteServiceName))&&(s.dataset.webpack=""),e.next=21,k(r.remoteServiceName,r.globalServiceName,r.remoteEntry,a,o);case 21:return l=e.sent,e.abrupt("return",[l,r.globalServiceName]);case 23:return e.abrupt("return",null);case 24:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),l=null!==(c=null==a?void 0:a.innerHTML)&&void 0!==c?c:"",!(t.isSuccessSSR&&""!==l||t.useSSRResult)){e.next=6;break}return e.abrupt("return",s({scripts:null!==(d=t.scripts)&&void 0!==d?d:[],styles:null!==(v=t.styles)&&void 0!==v?v:[],globalServiceName:t.globalServiceName,remoteServiceName:t.remoteServiceName,inlineScript:t.inlineScript,remoteEntry:t.remoteEntry,renderResult:null!=l?l:"",isSuccessSSR:t.isSuccessSSR}));case 6:return e.prev=6,e.next=9,p.Z.get(t.url,{headers:{"X-Proxied-Type":u?"":"Component","X-Proxied-Place":r,"X-Proxied-Page-Name":window.globalVars.pageName,"X-Proxied-Hhtm-Source":window.globalVars.analyticsParams.hhtmSource,"X-Static-Version":window.globalVars.build},params:{}});case 9:f=e.sent,e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(6),console.error(e.t0),e.abrupt("return",null);case 16:return H(f.proxiedState||{}),e.abrupt("return",s(f));case 18:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(r,t,n,a,o){return e.apply(this,arguments)}}()},10070:
/*!********************************************************!*\
  !*** ./webapp-static/js/Modules/microFrontendState.ts ***!
  \********************************************************/(e,r,t)=>{t.r(r),t.d(r,{getInitedState:()=>i,getMountState:()=>a,setInitedState:()=>c,setMountState:()=>o});var n={},a=function(e){return n[e]},o=function(e,r){n[e]=r},u={},i=function(e){return u[e]},c=function(e,r){u[e]=r}}}]);
//# sourceMappingURL=95466.8db7e638589f9d2cdb84.js.map