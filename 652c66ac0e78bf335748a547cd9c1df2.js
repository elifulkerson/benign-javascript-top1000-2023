window.__etsy_logging.perf.event={"attributes":{"guid":"f702210ae11.cf177b99f5d66368c52c.00","event_name":"perf","event_logger":"perf","event_timestamp":1697428227227,"page_type":"home","device_type":"Desktop","browser_name":"Firefox","browser_version":"21.0"}};!function(){var e=window.__etsy_logging||{},t=e.perf||{},n=e.url,i=e.defaults,r=t.event,a=t.onFirstInputDelay,o=e.sendEvents,s=0===Object.keys(t).length,c=window.webVitals||{},u=e.mergeObject,d=null;if(!s&&n&&i&&r&&a&&o){var _=t.METRIC_NAME_PREFIX||"_etsy_perf_beacon_",m=function(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}},l=function(){return void 0!==window.PerformanceObserver},f=function(){return"onpagehide"in window},g=function(e,t){var n=function(e){var t=document.createElement("a");t.href=e;var n=t.pathname.split(".");return n[n.length-1]||""}(e);return/jpe?g|png|svg|gif/i.test(n)?"image":/eot|woff2?|ttf/i.test(n)?"font":"js"===n?"js":"css"===n?"css":"xmlhttprequest"===t?"xhr":"unknown"},p=function(e){return Math.round(e<Math.pow(2,64)-1?e:0)},v=function(e,t){var n=null,i=null;if(t.transferSize>0)for(var r=0;r<t.serverTiming.length;r++){var a=t.serverTiming[r];e.i_etsystatic_cdn||"cdn"!==a.name?"cache_status"===a.name&&(i=a.description):n=a.description}n&&(e.i_etsystatic_cdn=n);var o=null,s=null;i&&(e.cdn_image_caching||(e.cdn_image_caching={miss:0,hit:0}),o=0===i.indexOf("HIT"),s=0===i.indexOf("MISS"),o&&(e.cdn_image_caching.hit+=1),s&&(e.cdn_image_caching.miss+=1)),function(e,t,n,i){d||(d={},document.querySelectorAll("img[data-perf-group]").forEach((function(e){e.currentSrc&&(d[e.currentSrc]=e)})));var r=d[t.name];if(r){var a=r.dataset.perfGroup;e.categorized_images||(e.categorized_images=[]);var o={category:a,duration:p(t.duration),encodedBodySize:p(t.encodedBodySize),transferSize:p(t.transferSize),width:r.width,height:r.height};if(t.transferSize>0){(n||i)&&(o.cdn_hit=n);for(var s=0;s<t.serverTiming.length;s++){var c=t.serverTiming[s];"clientrtt"===c.name?o.clientrtt=p(c.duration):"clienttt"===c.name?o.clienttt=p(c.duration):"cdntime"===c.name?o.cdntime=p(c.duration):"origin"===c.name&&(o.origin=p(c.duration))}}e.categorized_images.push(o)}}(e,t,o,s)},y=function(e){return{nav_start:p(e.navigationStart||e.startTime),worker_start:e.workerStart?p(e.workerStart):null,fetch_start:p(e.fetchStart),dns_start:p(e.domainLookupStart),dns_end:p(e.domainLookupEnd),connect_start:p(e.connectStart),connect_end:p(e.connectEnd),secure_connect_start:p(e.secureConnectionStart),request_start:p(e.requestStart),response_start:p(e.responseStart),response_end:p(e.responseEnd),dom_completed:p(e.domComplete),dom_interactive:p(e.domInteractive),loaded_start:p(e.loadEventStart),loaded_end:p(e.loadEventEnd),dom_content_loaded_start:p(e.domContentLoadedEventStart),dom_content_loaded_end:p(e.domContentLoadedEventEnd),html_tx_size:p(e.transferSize),html_enc_size:p(e.encodedBodySize),html_dec_size:p(e.decodedBodySize),type:e.type}},h=function(e){return e.reduce((function(e,n){if("entryType"in n){if("resource"===n.entryType)return function(e,t){var n=g(t.name,t.initiatorType);if("unknown"===n)return e;var i=t.name.match(/etsy(static)?(cloud)?\.com/)?"etsy":"third";"image"===n&&"etsy"===i&&(t.name.match(/img0\.etsystatic/)?e.img0_count=(e.img0_count||0)+1:t.name.match(/img1\.etsystatic/)&&(e.img1_count=(e.img1_count||0)+1)),"image"===n&&"etsy"===i&&t.serverTiming&&t.name.match(/i\.etsystatic\.com/)&&v(e,t);var r="sum_"+i+"_"+n+"_bytes",a="sum_"+i+"_"+n+"_enc_bytes",o="sum_"+i+"_"+n+"_tx_bytes",s="sum_"+i+"_"+n+"_dur",c="count_"+i+"_"+n+"_req";return e[r]=(e[r]||0)+p(t.decodedBodySize),e[a]=(e[a]||0)+p(t.encodedBodySize),e[o]=(e[o]||0)+p(t.transferSize),e[s]=(e[s]||0)+p(t.duration),e[c]=(e[c]||0)+1,e}(e,n);if("paint"===n.entryType)return function(e,t){return e[t.name.replace(/-/g,"_")]=p(t.startTime),e}(e,n);if("longtask"===n.entryType)return function(e,t){return e.long_tasks_count=(e.long_tasks_count||0)+1,e.long_tasks_dur=(e.long_tasks_dur||0)+p(t.duration),e}(e,n);if("mark"===n.entryType||"measure"===n.entryType)return function(e,t){return 0===t.name.lastIndexOf(_,0)&&(e[t.name.substring(_.length)]=p("mark"===t.entryType?t.startTime:t.duration)),e}(e,n);if("layout-shift"===n.entryType)return function(e,t){return e.layout_shift_count=(e.layout_shift_count||0)+1,e.layout_shift=(e.layout_shift||0)+t.value,t.value>.05&&(e.layout_shift_elements=e.layout_shift_elements||[],e.layout_shift_elements.push({value:t.value,elements:(t.sources||[]).filter((function(e){return!!e.node})).map((function(e){return{className:e.node.className,tagName:e.node.tagName,id:e.node.id}}))})),e}(e,n);if("largest-contentful-paint"===n.entryType)return function(e,t){return e.largest_contentful_paint=t.renderTime||t.loadTime,e.largest_contentful_paint_type=t.renderTime?"renderTime":"loadTime",t.element?e.largest_contentful_paint_element={className:t.element.className,tagName:t.element.tagName,url:t.url}:delete e.largest_contentful_paint_element,e}(e,n);if("navigation"===n.entryType)return t.t=!0,u(e,y(n));if("element"===n.entryType)return function(e,t){return e.element_timings||(e.element_timings={}),e.element_timings[t.identifier]=t.renderTime,e}(e,n)}else if("name"in n&&"INP"===n.name)return function(e,t){return e.interaction_next_paint=t.value,t.attribution&&(e.interaction_next_paint_element=t.attribution.eventTarget,e.interaction_next_paint_time=p(t.attribution.eventTime),e.interaction_next_paint_type=t.attribution.eventType,e.interaction_next_paint_loadstate=t.attribution.loadState),e}(e,n);return e}),{})},T=function(){var e=!l()&&performance&&performance.getEntries?performance.getEntries():t.e,n=h(e);return t.e=[],t.t||(n.unixTimingNavigation=!0,u(n,y(window.performance.timing))),u(n,t.f?{first_input_delay:p(t.f)}:{}),u(n,t.TTVC&&t.TTVC.duration?{ttvc:p(t.TTVC.duration)}:{}),u(n,function(){if(performance&&performance.getEntriesByName){var e=performance.getEntriesByName("TTP","mark");if(e.length)return{time_to_parsing:e[0].startTime}}return{}}()),function(e){var t=navigator;t&&t.connection&&t.connection.effectiveType&&(e.effective_connection_type=t.connection.effectiveType)}(n),n.has_sendbeacon=navigator&&"function"==typeof navigator.sendBeacon,n.has_observer=l(),n.observer_types=l()?PerformanceObserver.supportedEntryTypes:null,n.has_pagehide=f(),n},S=m((function(e){var t=u(e,r.attributes);t.beacon_send_time=0===t.nav_start?p(performance.now()):(new Date).getTime(),t.page_time=i.page_time,"function"==typeof window.CustomEvent&&document.dispatchEvent(new CustomEvent("perfDataSent",{detail:t})),o([t],"perf")}));!function(){var e=Object.keys(c).length>0;e&&c.onINP((function(e){t.e.length&&(t.e=t.e.concat(e))}),{reportAllChanges:!0});var n=m((function(e){clearTimeout(i);var n=T();l()&&t.o.disconnect(),n[e]=!0,S(n)})),i=setTimeout((function(){n("on_fallbacktimeout")}),6e4);"complete"===document.readyState&&(clearTimeout(i),i=setTimeout((function(){n("on_loadtimeout")}),2e4)),window.addEventListener("load",(function(){clearTimeout(i),i=setTimeout((function(){n("on_loadtimeout")}),2e4),setTimeout((function(){a((function(i){t.f=i.processingStart-i.startTime,e||n("on_fid")}))}),0)}));var r=f()?"pagehide":"unload";window.addEventListener(r,(function(){n("on_unload")})),document.addEventListener("visibilitychange",(function(){(document.hidden||"hidden"===document.visibilityState)&&n("on_vischange")}))}(),t.logger={getMetricsFromQueue:h}}else e.eventpipe&&e.eventpipe.logEvent&&e.eventpipe.logEvent({event_name:"perf_beacon_not_fired",missing_global_perf_data:s,missing_post_url:!n,missing_defaults:!i,missing_perf_event:!r,missing_on_first_input_delay:!a,missing_send_events:!o})}();