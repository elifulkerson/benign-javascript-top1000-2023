(globalThis.__LOADABLE_LOADED_CHUNKS__=globalThis.__LOADABLE_LOADED_CHUNKS__||[]).push([[7141],{903985:()=>{},961881:()=>{},598794:e=>{e.exports={"drag-and-drop-area":"drag-and-drop-area__09f24__jB8nP","drag-and-drop-area--hover":"drag-and-drop-area--hover__09f24__I8AqJ","or-text":"or-text__09f24__UVQHg","illustration-img":"illustration-img__09f24__JMWft"}},417041:e=>{e.exports={"caption-container":"caption-container__09f24__N8I8g","spinner-container":"spinner-container__09f24__Ds0kW","photo-box":"photo-box__09f24__K2cBE"}},713220:e=>{e.exports={"photo-list-wrapper":"photo-list-wrapper__09f24__xP2d_","photo-list-arrange":"photo-list-arrange__09f24__T3_U2","photo-list-arrange-item":"photo-list-arrange-item__09f24__pYt2q","photo-list-wrapper-stacked":"photo-list-wrapper-stacked__09f24__bXLC9"}},91925:e=>{e.exports={beforeLabel:"beforeLabel__09f24__QFdcB",beforeLabelContainer:"beforeLabelContainer__09f24__Lj_7p"}},166573:e=>{e.exports={"hr-with-text":"hr-with-text__09f24__oT_Dr"}},835291:e=>{e.exports={"password-reset-alert-message-container":"password-reset-alert-message-container__09f24__ap63p","password-reset-alert-message-spinner":"password-reset-alert-message-spinner__09f24__loM4e","password-reset-alert-message":"password-reset-alert-message__09f24__sbCoT"}},817509:e=>{e.exports={"recaptcha-container":"recaptcha-container__09f24__vzwH2"}},69335:e=>{e.exports={"photo-box-center":"photo-box-center__09f24__ViQrw"}},64727:e=>{e.exports={"legal-text-checkbox":"legal-text-checkbox__09f24__MFukD"}},104942:e=>{e.exports={"login-overview-container":"login-overview-container__09f24__xtfLI","login-overview--inputfields":"login-overview--inputfields__09f24__DvtbT","one-time-password-container":"one-time-password-container__09f24__gP86O"}},109985:e=>{e.exports={"recaptcha-container":"recaptcha-container__09f24__kRkTA"}},967369:e=>{e.exports={"social-button--use-facebook-photo":"social-button--use-facebook-photo__09f24__kh3Dn"}},827103:function(e,t,o){var n;e.exports=(n=o(87363),function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=4)}([function(e,t,o){e.exports=o(2)()},function(e,t){e.exports=n},function(e,t,o){"use strict";var n=o(3);function r(){}function a(){}a.resetWarningCache=r,e.exports=function(){function e(e,t,o,r,a,i){if(i!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var o={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:r};return o.PropTypes=o,o}},function(e,t,o){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return A})),o.d(t,"Component",(function(){return A})),o.d(t,"makeAspectCrop",(function(){return S})),o.d(t,"containCrop",(function(){return O}));var n=o(1),r=o.n(n),a=o(0),i=o.n(a);function s(e){var t,o,n="";if(e)if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(o=s(e[t]))&&(n&&(n+=" "),n+=o);else for(t in e)e[t]&&(o=s(t))&&(n&&(n+=" "),n+=o);else"boolean"==typeof e||e.call||(n&&(n+=" "),n+=e);return n}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function x(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?f(Object(o),!0).forEach((function(t){y(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function y(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var o=[],n=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(o.push(i.value),!t||o.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(o):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var C=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return C=!0,!0}}))}catch(e){}function k(e){var t,o;if(e.touches){var n=w(e.touches,1)[0];t=n.pageX,o=n.pageY}else t=e.pageX,o=e.pageY;return{x:t,y:o}}function b(e,t,o){return Math.min(Math.max(e,t),o)}function j(e){return e&&!isNaN(e.width)&&!isNaN(e.height)}function T(e){return"n"===e?"s":"ne"===e?"sw":"e"===e?"w":"se"===e?"nw":"s"===e?"n":"sw"===e?"ne":"w"===e?"e":"nw"===e?"se":e}function S(e,t,o){if(isNaN(e.aspect))return console.warn("`crop.aspect` should be a number in order to make an aspect crop",e),e;var n=x({unit:"px",x:0,y:0},e);return e.width&&(n.height=n.width/e.aspect),e.height&&(n.width=n.height*e.aspect),n.y+n.height>o&&(n.height=o-n.y,n.width=n.height*e.aspect),n.x+n.width>t&&(n.width=t-n.x,n.height=n.width/e.aspect),n}function Z(e,t,o){return"%"===e.unit?e:{unit:"%",aspect:e.aspect,x:e.x/t*100,y:e.y/o*100,width:e.width/t*100,height:e.height/o*100}}function _(e,t,o){return e.unit?"px"===e.unit?e:{unit:"px",aspect:e.aspect,x:e.x*t/100,y:e.y*o/100,width:e.width*t/100,height:e.height*o/100}:x({},e,{unit:"px"})}function P(e,t,o){if(!e)return e;var n=e,r=e.x+e.width>t+1,a=e.y+e.height>o+1;return r&&a?n=x({unit:"px",x:0,y:0},e,{width:t>e.width?e.width:t,height:o>e.height?e.height:o}):r?n=x({unit:"px",x:0,y:0},e,{width:t>e.width?e.width:t}):a&&(n=x({unit:"px",x:0,y:0},e,{height:o>e.height?e.height:o})),n.aspect&&function(e,t,o){return!!(!e.width&&e.height||e.width&&!e.height)||e.y+e.height>o+1||e.x+e.width>t+1||e.width/e.aspect<e.height-1||e.width/e.aspect>e.height+1||e.height*e.aspect<e.width-1||e.height*e.aspect>e.width+1}(n,t,o)?S(n,t,o):n}function O(e,t,o,n){var r=_(t,o,n),a=_(e,o,n),i=x({},r);if(!r.aspect)return r.x<0?(i.x=0,i.width+=r.x):r.x+r.width>o&&(i.width=o-r.x),r.y+r.height>n&&(i.height=n-r.y),i;var s=!1;r.x<0?(i.x=0,i.width+=r.x,i.height=i.width/r.aspect,s=!0):r.x+r.width>o&&(i.width=o-r.x,i.height=i.width/r.aspect,s=!0),s&&a.y>i.y&&(i.y=r.y+(r.height-i.height));var l=!1;return i.y+i.height>n&&(i.height=n-r.y,i.width=i.height*r.aspect,l=!0),l&&a.x>i.x&&(i.x=r.x+(r.width-i.width)),i}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(l,e);var t,o,n,a,i=(t=l,function(){var e,o=h(t);if(g()){var n=h(this).constructor;e=Reflect.construct(o,arguments,n)}else e=o.apply(this,arguments);return p(this,e)});function l(){var e;c(this,l);for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];return y(u(e=i.call.apply(i,[this].concat(o))),"window","undefined"!=typeof window?window:{}),y(u(e),"document","undefined"!=typeof document?document:{}),y(u(e),"state",{}),y(u(e),"onCropMouseTouchDown",(function(t){var o=e.props,n=o.crop,r=o.disabled,a=e.mediaDimensions,i=_(n,a.width,a.height);if(!r){t.preventDefault();var s=k(t);e.componentRef.setActive?e.componentRef.setActive({preventScroll:!0}):e.componentRef.focus({preventScroll:!0});var l,c=t.target.dataset.ord,d="nw"===c||"w"===c||"sw"===c,p="nw"===c||"n"===c||"ne"===c;i.aspect&&(l=e.getElementOffset(e.cropSelectRef)),e.evData={clientStartX:s.x,clientStartY:s.y,cropStartWidth:i.width,cropStartHeight:i.height,cropStartX:d?i.x+i.width:i.x,cropStartY:p?i.y+i.height:i.y,xInversed:d,yInversed:p,xCrossOver:d,yCrossOver:p,startXCrossOver:d,startYCrossOver:p,isResize:t.target.dataset.ord,ord:c,cropOffset:l},e.mouseDownOnCrop=!0,e.setState({cropIsActive:!0})}})),y(u(e),"onComponentMouseTouchDown",(function(t){var o=e.props,n=o.crop,r=o.disabled,a=o.locked,i=o.keepSelection,s=o.onChange,l=e.mediaWrapperRef.firstChild;if(t.target===l&&l.contains(t.target)&&!(r||a||i&&j(n))){t.preventDefault();var c=k(t);e.componentRef.setActive?e.componentRef.setActive({preventScroll:!0}):e.componentRef.focus({preventScroll:!0});var d=e.getElementOffset(e.mediaWrapperRef),p=c.x-d.left,u=c.y-d.top,g={unit:"px",aspect:n?n.aspect:void 0,x:p,y:u,width:0,height:0};e.evData={clientStartX:c.x,clientStartY:c.y,cropStartWidth:g.width,cropStartHeight:g.height,cropStartX:g.x,cropStartY:g.y,xInversed:!1,yInversed:!1,xCrossOver:!1,yCrossOver:!1,startXCrossOver:!1,startYCrossOver:!1,isResize:!0,ord:"nw"},e.mouseDownOnCrop=!0;var h=e.mediaDimensions,m=h.width,f=h.height;s(_(g,m,f),Z(g,m,f)),e.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})}})),y(u(e),"onDocMouseTouchMove",(function(t){var o=e.props,n=o.crop,r=o.disabled,a=o.onChange,i=o.onDragStart;if(!r&&e.mouseDownOnCrop){t.preventDefault(),e.dragStarted||(e.dragStarted=!0,i(t));var s,l=u(e).evData,c=k(t);if(l.isResize&&n.aspect&&l.cropOffset&&(c.y=e.straightenYPath(c.x)),l.xDiff=c.x-l.clientStartX,l.yDiff=c.y-l.clientStartY,(s=l.isResize?e.resizeCrop():e.dragCrop())!==n){var d=e.mediaDimensions,p=d.width,g=d.height;a(_(s,p,g),Z(s,p,g))}}})),y(u(e),"onComponentKeyDown",(function(t){var o=e.props,n=o.crop,r=o.disabled,a=o.onChange,i=o.onComplete;if(!r){var s=t.key,c=!1;if(j(n)){var d=e.makeNewCrop(),p=t.shiftKey?l.nudgeStepLarge:l.nudgeStep;if("ArrowLeft"===s?(d.x-=p,c=!0):"ArrowRight"===s?(d.x+=p,c=!0):"ArrowUp"===s?(d.y-=p,c=!0):"ArrowDown"===s&&(d.y+=p,c=!0),c){t.preventDefault();var u=e.mediaDimensions,g=u.width,h=u.height;d.x=b(d.x,0,g-d.width),d.y=b(d.y,0,h-d.height);var m=_(d,g,h),f=Z(d,g,h);a(m,f),i(m,f)}}}})),y(u(e),"onDocMouseTouchEnd",(function(t){var o=e.props,n=o.crop,r=o.disabled,a=o.onComplete,i=o.onDragEnd;if(!r&&e.mouseDownOnCrop){e.mouseDownOnCrop=!1,e.dragStarted=!1;var s=e.mediaDimensions,l=s.width,c=s.height;i(t),a(_(n,l,c),Z(n,l,c)),e.setState({cropIsActive:!1,newCropIsBeingDrawn:!1})}})),y(u(e),"onMediaLoaded",(function(){var t=e.props,o=t.onComplete,n=t.onChange,r=e.createNewCrop(),a=r.pixelCrop,i=r.percentCrop;n(a,i),o(a,i)})),e}return o=l,(n=[{key:"componentDidMount",value:function(){if(this.document.addEventListener){var e=!!C&&{passive:!1};this.document.addEventListener("mousemove",this.onDocMouseTouchMove,e),this.document.addEventListener("touchmove",this.onDocMouseTouchMove,e),this.document.addEventListener("mouseup",this.onDocMouseTouchEnd,e),this.document.addEventListener("touchend",this.onDocMouseTouchEnd,e),this.document.addEventListener("touchcancel",this.onDocMouseTouchEnd,e),this.componentRef.addEventListener("medialoaded",this.onMediaLoaded)}}},{key:"componentWillUnmount",value:function(){this.document.removeEventListener&&(this.document.removeEventListener("mousemove",this.onDocMouseTouchMove),this.document.removeEventListener("touchmove",this.onDocMouseTouchMove),this.document.removeEventListener("mouseup",this.onDocMouseTouchEnd),this.document.removeEventListener("touchend",this.onDocMouseTouchEnd),this.document.removeEventListener("touchcancel",this.onDocMouseTouchEnd),this.componentRef.removeEventListener("medialoaded",this.onMediaLoaded))}},{key:"componentDidUpdate",value:function(e){if(e.crop!==this.props.crop&&this.imageRef){var t=this.imageRef,o=t.width,n=t.height,r=this.makeNewCrop(),a=P(r,o,n);if(r!==a){var i=_(a,o,n),s=Z(a,o,n);this.props.onChange(i,s),this.props.onComplete(i,s)}}}},{key:"createNewCrop",value:function(){var e=this.mediaDimensions,t=e.width,o=e.height,n=P(this.makeNewCrop(),t,o);return{pixelCrop:_(n,t,o),percentCrop:Z(n,t,o)}}},{key:"onImageLoad",value:function(e){var t=this.props,o=t.onComplete,n=t.onChange;if(!1!==(0,t.onImageLoaded)(e)){var r=this.createNewCrop(),a=r.pixelCrop,i=r.percentCrop;n(a,i),o(a,i)}}},{key:"getDocumentOffset",value:function(){var e=this.document.documentElement||{},t=e.clientTop,o=void 0===t?0:t,n=e.clientLeft;return{clientTop:o,clientLeft:void 0===n?0:n}}},{key:"getWindowOffset",value:function(){var e=this.window,t=e.pageYOffset,o=void 0===t?0:t,n=e.pageXOffset;return{pageYOffset:o,pageXOffset:void 0===n?0:n}}},{key:"getElementOffset",value:function(e){var t=e.getBoundingClientRect(),o=this.getDocumentOffset(),n=this.getWindowOffset();return{top:t.top+n.pageYOffset-o.clientTop,left:t.left+n.pageXOffset-o.clientLeft}}},{key:"getCropStyle",value:function(){var e=this.makeNewCrop(this.props.crop?this.props.crop.unit:"px");return{top:"".concat(e.y).concat(e.unit),left:"".concat(e.x).concat(e.unit),width:"".concat(e.width).concat(e.unit),height:"".concat(e.height).concat(e.unit)}}},{key:"getNewSize",value:function(){var e,t=this.props,o=t.crop,n=t.minWidth,r=t.maxWidth,a=t.minHeight,i=t.maxHeight,s=this.evData,l=this.mediaDimensions,c=l.width,d=l.height,p=s.cropStartWidth+s.xDiff;return s.xCrossOver&&(p=Math.abs(p)),p=b(p,n,r||c),e=o.aspect?p/o.aspect:s.cropStartHeight+s.yDiff,s.yCrossOver&&(e=Math.min(Math.abs(e),s.cropStartY)),e=b(e,a,i||d),o.aspect&&(p=b(e*o.aspect,0,c)),{width:p,height:e}}},{key:"dragCrop",value:function(){var e=this.makeNewCrop(),t=this.evData,o=this.mediaDimensions,n=o.width,r=o.height;return e.x=b(t.cropStartX+t.xDiff,0,n-e.width),e.y=b(t.cropStartY+t.yDiff,0,r-e.height),e}},{key:"resizeCrop",value:function(){var e=this.evData,t=this.makeNewCrop(),o=e.ord;e.xInversed&&(e.xDiff-=2*e.cropStartWidth,e.xDiffPc-=2*e.cropStartWidth),e.yInversed&&(e.yDiff-=2*e.cropStartHeight,e.yDiffPc-=2*e.cropStartHeight);var n=this.getNewSize(),r=e.cropStartX,a=e.cropStartY;e.xCrossOver&&(r=t.x+(t.width-n.width)),e.yCrossOver&&(a=!1===e.lastYCrossover?t.y-n.height:t.y+(t.height-n.height));var i=this.mediaDimensions,s=i.width,c=i.height,d=O(this.props.crop,{unit:t.unit,x:r,y:a,width:n.width,height:n.height,aspect:t.aspect},s,c);return t.aspect||l.xyOrds.indexOf(o)>-1?(t.x=d.x,t.y=d.y,t.width=d.width,t.height=d.height):l.xOrds.indexOf(o)>-1?(t.x=d.x,t.width=d.width):l.yOrds.indexOf(o)>-1&&(t.y=d.y,t.height=d.height),e.lastYCrossover=e.yCrossOver,this.crossOverCheck(),t}},{key:"straightenYPath",value:function(e){var t,o,n=this.evData,r=n.ord,a=n.cropOffset,i=n.cropStartWidth,s=n.cropStartHeight;return"nw"===r||"se"===r?(t=s/i,o=a.top-a.left*t):(t=-s/i,o=a.top+(s-a.left*t)),t*e+o}},{key:"createCropSelection",value:function(){var e=this,t=this.props,o=t.disabled,n=t.locked,a=t.renderSelectionAddon,i=t.ruleOfThirds,s=this.getCropStyle();return r.a.createElement("div",{ref:function(t){return e.cropSelectRef=t},style:s,className:"ReactCrop__crop-selection",onMouseDown:this.onCropMouseTouchDown,onTouchStart:this.onCropMouseTouchDown,tabIndex:"0"},!o&&!n&&r.a.createElement("div",{className:"ReactCrop__drag-elements"},r.a.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),r.a.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),r.a.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),r.a.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),r.a.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw"}),r.a.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n"}),r.a.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne"}),r.a.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e"}),r.a.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se"}),r.a.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s"}),r.a.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw"}),r.a.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w"})),a&&r.a.createElement("div",{className:"ReactCrop__selection-addon",onMouseDown:function(e){return e.stopPropagation()}},a(this.state)),i&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),r.a.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}},{key:"makeNewCrop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"px",t=x({},l.defaultCrop,{},this.props.crop),o=this.mediaDimensions,n=o.width,r=o.height;return"px"===e?_(t,n,r):Z(t,n,r)}},{key:"crossOverCheck",value:function(){var e=this.evData,t=this.props,o=t.minWidth,n=t.minHeight;!o&&(!e.xCrossOver&&-Math.abs(e.cropStartWidth)-e.xDiff>=0||e.xCrossOver&&-Math.abs(e.cropStartWidth)-e.xDiff<=0)&&(e.xCrossOver=!e.xCrossOver),!n&&(!e.yCrossOver&&-Math.abs(e.cropStartHeight)-e.yDiff>=0||e.yCrossOver&&-Math.abs(e.cropStartHeight)-e.yDiff<=0)&&(e.yCrossOver=!e.yCrossOver);var r=e.xCrossOver!==e.startXCrossOver,a=e.yCrossOver!==e.startYCrossOver;e.inversedXOrd=!!r&&T(e.ord),e.inversedYOrd=!!a&&T(e.ord)}},{key:"render",value:function(){var e=this,t=this.props,o=t.children,n=t.circularCrop,a=t.className,i=t.crossorigin,l=t.crop,c=t.disabled,d=t.locked,p=t.imageAlt,u=t.onImageError,g=t.renderComponent,h=t.src,m=t.style,f=t.imageStyle,x=t.ruleOfThirds,y=this.state,w=y.cropIsActive,v=y.newCropIsBeingDrawn,C=j(l)&&this.componentRef?this.createCropSelection():null,k=function(){for(var e,t=0,o="";t<arguments.length;)(e=s(arguments[t++]))&&(o&&(o+=" "),o+=e);return o}("ReactCrop",a,{"ReactCrop--active":w,"ReactCrop--disabled":c,"ReactCrop--locked":d,"ReactCrop--new-crop":v,"ReactCrop--fixed-aspect":l&&l.aspect,"ReactCrop--circular-crop":l&&n,"ReactCrop--rule-of-thirds":l&&x,"ReactCrop--invisible-crop":!this.dragStarted&&l&&!l.width&&!l.height});return r.a.createElement("div",{ref:function(t){e.componentRef=t},className:k,style:m,onTouchStart:this.onComponentMouseTouchDown,onMouseDown:this.onComponentMouseTouchDown,tabIndex:"0",onKeyDown:this.onComponentKeyDown},r.a.createElement("div",{ref:function(t){e.mediaWrapperRef=t}},g||r.a.createElement("img",{ref:function(t){return e.imageRef=t},crossOrigin:i,className:"ReactCrop__image",style:f,src:h,onLoad:function(t){return e.onImageLoad(t.target)},onError:u,alt:p})),o,C)}},{key:"mediaDimensions",get:function(){var e=this.mediaWrapperRef;return{width:e.clientWidth,height:e.clientHeight}}}])&&d(o.prototype,n),a&&d(o,a),l}(n.PureComponent);A.xOrds=["e","w"],A.yOrds=["n","s"],A.xyOrds=["nw","ne","se","sw"],A.nudgeStep=.2,A.nudgeStepLarge=2,A.defaultCrop={x:0,y:0,width:0,height:0,unit:"px"},A.propTypes={className:i.a.string,children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node]),circularCrop:i.a.bool,crop:i.a.shape({aspect:i.a.number,x:i.a.number,y:i.a.number,width:i.a.number,height:i.a.number,unit:i.a.oneOf(["px","%"])}),crossorigin:i.a.string,disabled:i.a.bool,locked:i.a.bool,imageAlt:i.a.string,imageStyle:i.a.shape({}),keepSelection:i.a.bool,minWidth:i.a.number,minHeight:i.a.number,maxWidth:i.a.number,maxHeight:i.a.number,onChange:i.a.func.isRequired,onImageError:i.a.func,onComplete:i.a.func,onImageLoaded:i.a.func,onDragStart:i.a.func,onDragEnd:i.a.func,src:i.a.string.isRequired,style:i.a.shape({}),renderComponent:i.a.node,renderSelectionAddon:i.a.func,ruleOfThirds:i.a.bool},A.defaultProps={circularCrop:!1,className:void 0,crop:void 0,crossorigin:void 0,disabled:!1,locked:!1,imageAlt:"",maxWidth:void 0,maxHeight:void 0,minWidth:0,minHeight:0,keepSelection:!1,onComplete:function(){},onImageError:function(){},onImageLoaded:function(){},onDragStart:function(){},onDragEnd:function(){},children:void 0,style:void 0,renderComponent:void 0,imageStyle:void 0,renderSelectionAddon:void 0,ruleOfThirds:!1}}]))},113003:(e,t,o)=>{"use strict";o.d(t,{Z:()=>i});o(87363);var n=o(657633),r=o(894320);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},a.apply(this,arguments)}const i=function(e){return(0,r.jsx)(n.Z,a({svg:'<svg width="16" height="16" class="icon_svg"><path d="M13 13.75H3A1.752 1.752 0 011.25 12V6A1.752 1.752 0 013 4.25h1.724l.496-1.487a.75.75 0 01.711-.513h4.334a.75.75 0 01.711.513l.496 1.487H13A1.752 1.752 0 0114.75 6v6A1.752 1.752 0 0113 13.75zm-10-8a.25.25 0 00-.25.25v6a.25.25 0 00.25.25h10a.25.25 0 00.25-.25V6a.25.25 0 00-.25-.25h-2.069a.75.75 0 01-.711-.513L9.724 3.75H6.472l-.496 1.487a.75.75 0 01-.711.513H3z"/><path d="M10 7.606H8.75v-1.25a.75.75 0 10-1.5 0v1.25H6a.75.75 0 100 1.5h1.25v1.25a.75.75 0 101.5 0v-1.25H10a.75.75 0 100-1.5z"/></svg>',name:"16x16_add_photo_v2",v2:!0},e))}},602934:(e,t,o)=>{"use strict";o.d(t,{Z:()=>i});o(87363);var n=o(657633),r=o(894320);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},a.apply(this,arguments)}const i=function(e){return(0,r.jsx)(n.Z,a({svg:'<svg width="24" height="24" class="icon_svg"><path d="M4.625 9.585A.53.53 0 015 9.74l3 3.43a.51.51 0 010 .54.51.51 0 01-.44.25h-2a6.75 6.75 0 0011.9 2 1 1 0 011.39-.22 1 1 0 01.22 1.4A8.73 8.73 0 013.5 14H1.62a.5.5 0 01-.37-.83l3-3.43a.53.53 0 01.375-.155zM4.93 6.86A8.73 8.73 0 0120.5 10h1.93a.51.51 0 01.45.29.51.51 0 01-.07.54l-3 3.43a.5.5 0 01-.75 0l-3-3.43a.51.51 0 01-.08-.54.51.51 0 01.46-.29h2a6.75 6.75 0 00-11.9-2 1 1 0 11-1.61-1.14z"/></svg>',name:"24x24_refresh_v2",v2:!0},e))}},322946:(e,t,o)=>{"use strict";o.d(t,{Z:()=>i});o(87363);var n=o(657633),r=o(894320);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},a.apply(this,arguments)}const i=function(e){return(0,r.jsx)(n.Z,a({svg:'<svg width="24" height="24" class="icon_svg"><path d="M21 3h-5.5V2a.998.998 0 00-1-1h-5a1 1 0 00-1 1v1H3a1 1 0 000 2h.5v13.75A4.255 4.255 0 007.75 23h8.5a4.254 4.254 0 004.25-4.25V5h.5a1 1 0 100-2zm-2.5 15.75A2.253 2.253 0 0116.25 21h-8.5a2.253 2.253 0 01-2.25-2.25V5h13v13.75z"/><path d="M9.25 17.813a.998.998 0 01-1-1v-8a1 1 0 012 0v8a.998.998 0 01-1 1zm5.5 0a.998.998 0 01-1-1v-8a1 1 0 012 0v8a.998.998 0 01-1 1z"/></svg>',name:"24x24_trash_v2",v2:!0},e))}},487617:(e,t,o)=>{"use strict";o.d(t,{Z:()=>n});const n=class{static asyncLoadFullStoryLibrary(e,t){window.libraryLoading||(window.libraryLoading=new Map);if(!window.libraryLoading.get("fullStory")){const o=e.replace(/(^\w+:|^)\/\//,""),n=new Promise((e=>{const n=document.createElement("script");n.type="text/javascript",n.async=!0,n.innerHTML=`\n                    window['_fs_debug'] = false;\n                    window['_fs_host'] = 'www.fullstory.com';\n                    window['_fs_script'] = '${o}';\n                    window['_fs_org'] = '${t}';\n                    window['_fs_namespace'] = 'FS';\n                    (function(m,n,e,t,l,o,g,y){\n                    if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].');} return;}\n                        g=m[e]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b);};g.q=[];\n                        o=n.createElement(t);o.async=1;o.src='https://'+(m._fs_script||_fs_host+'/s/fs.js');\n                        y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);\n                        g.identify=function(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars=function(v){g(l,v)};g.event=function(i,v,s){g('event',{n:i,p:v,s:s})};\n                        g.shutdown=function(){g("rec",!1)};g.restart=function(){g("rec",!0)};\n                        g.consent=function(a){g("consent",!arguments.length||a)};\n                        g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};\n                        g.clearUserCookie=function(){};\n                    })(window,document,window['_fs_namespace'],'script','user');\n                `;const r=(new Date).getTime();window._fs_ready=()=>{const t=(new Date).getTime();e(t-r)},document.body.appendChild(n)}));return window.libraryLoading.set("fullStory",n),n}return Promise.resolve(0)}static setUserVars(e,t){window.FS.identify(e,t)}}},914843:(e,t,o)=>{"use strict";o.d(t,{w:()=>f,Z:()=>y});o(87363);var n=o(334488),r=o(974743),a=o(993160),i=o(556243),s=o(24192),l=o(416089);const c=o.p+"default_user_avatar_84x84_v2.yji-6850008752ad73ea7e0f.png",d=o.p+"default_user_avatar_84x84_v2@2x.yji-0ee28d74544e5a92ab81.png",p=o.p+"default_user_avatar_120x120_v2.yji-de626b6fb1609a681724.png",u=o.p+"default_user_avatar_120x120_v2@2x.yji-48e1eaa758eb78c47d5c.png";var g=o(270421),h=o(894320);function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},m.apply(this,arguments)}const f={small:{avatarDimension:16,placeholderSrc:n,placeholderSrcset:`${r} 2x`},medium:{avatarDimension:40,placeholderSrc:a,placeholderSrcset:`${i} 2x`},large:{avatarDimension:64,placeholderSrc:s,placeholderSrcset:`${l} 2x`},xlarge:{avatarDimension:84,placeholderSrc:c,placeholderSrcset:`${d} 2x`},xxlarge:{avatarDimension:120,placeholderSrc:p,placeholderSrcset:`${u} 2x`}},x=e=>{let{size:t,src:o,srcSet:n,...r}=e;const{avatarDimension:a,placeholderSrc:i,placeholderSrcset:s}=f[t];return(0,h.jsx)(g.Z,m({},r,{imgShape:"circle",height:a,src:o||i,srcSet:o?n||void 0:s,width:a}))};x.defaultProps={size:"small"};const y=x},866976:(e,t,o)=>{"use strict";o.d(t,{Z:()=>n});const n=o(914843).Z},630806:(e,t,o)=>{"use strict";o.d(t,{PK:()=>c,ZP:()=>d});var n=o(87363),r=o.n(n),a=o(979186),i=o(169338),s=o(894320);const l=r().createContext(void 0),c=()=>{const e=(0,n.useContext)(l);if(!e)throw Error("This Step component is being constructed outside of a PhotoController");return e},d=e=>{let{children:t,initialPhotos:o=[],maxFileSize:r=i.y$,onComplete:c,onStep:d}=e;const[p,u]=(0,n.useState)(0),[g,h]=(0,n.useState)(o),m=t.filter((e=>e)),f=()=>{u(0),h([])};return(0,n.useEffect)((()=>{d&&d(m[p])}),[p]),(0,n.useEffect)((()=>f),[]),(0,s.jsx)(a.Z,null,(0,s.jsx)(l.Provider,{value:{photos:g,onNext:e=>{let{photos:t}=e;p+1===m.length?c(t,f):(h(t),u((e=>e+1)))},onReset:f,maxFileSize:r}},m[p]))}},999230:(e,t,o)=>{"use strict";o.d(t,{Z:()=>n});const n=o(630806).ZP},88677:(e,t,o)=>{"use strict";o.d(t,{Z:()=>S});var n=o(87363),r=o(625198),a=o.n(r),i=o(473550),s=o.n(i),l=o(349279),c=o(280506),d=o(257641),p=o(979186),u=o(365778),g=o(682642),h=o(269703),m=o(522743),f=o(434725),x=o(431325),y=o(865766),w=o(113003),v=o(894320);const C=function(e){return(0,v.jsx)(w.Z,e)};var k=o(630806),b=o(598794),j=o.n(b),T=o(169338);const S=(0,y.Z)((e=>{let{desktopBoxText:t,mobileButtonText:o,mobileBoxText:r,onAction:i=(()=>{}),isMobileAButton:y=!1,showImage:w=!0,multiple:b=!0,ygaTrackEvent:S}=e;const{onNext:Z,maxFileSize:_}=(0,k.PK)(),[P,O]=n.useState(0),A=n.useRef(null),L=e=>{const t=b?Array.from(e):[Array.from(e)[0]];Z({photos:(0,T.pJ)(t,_)})},R=()=>{O((e=>e-1))},M=()=>{i(),a()(A.current,"Missing ref - this should be impossible"),A.current.click()},E=y?"none":"block",D=y?"block":"none",U=t||(0,h.nc)("Drag and drop a photo here","Drag and drop photos here",b?2:1),B=o||(0,h.nc)("Upload a photo","Upload photos",b?2:1),N=r||(0,h.nc)("Select a photo to upload","Select photos to upload",b?2:1);return(0,v.jsx)(c.default.Provider,{value:d.n.v2},(0,v.jsx)(p.Z,{display:"none"},(0,v.jsx)("input",{ref:A,type:"file",onChange:()=>{S({category:"Photo upload v2",action:"browse files button at StepDragNDrop"}),a()(A.current,"Missing ref - this should be impossible"),L(Array.from(A.current.files??[]))},multiple:b,accept:T.bZ.join(",")})),(0,v.jsx)(p.Z,{bordered:!0,displaySm:E,displayMd:E,display:"block",marginTop:4,marginBottom:3,marginTopSm:3,marginBottomSm:3,padding:4,textAlign:"center",onDrop:e=>{(0,T.ii)(e,(e=>{0===e.length?R():L(e)})),i(),S({category:"Photo upload v2",action:"file dragNDrop at StepDragNDrop"})},onDragOver:e=>{e.preventDefault()},onDragEnter:()=>{O((e=>e+1))},onDragLeave:R,className:s()([j()["drag-and-drop-area"]],{[j()["drag-and-drop-area--hover"]]:P>0})},(0,v.jsx)(m.Z,{verticalAlign:"middle",gutter:0},(0,v.jsx)(f.Z,null,w&&(0,v.jsx)(x.Ei,{src:l,className:s()([j()["illustration-img"]]),alt:U}),(0,v.jsx)(p.Z,{displaySm:"none",marginTop:2},(0,v.jsx)(u.X6,{level:3},U),(0,v.jsx)(u.xv,{align:"center",className:s()([j()["or-text"]]),size:"large"},(0,h.ag)("or"))),(0,v.jsx)(p.Z,{displaySm:"block",display:"none",marginTop:3,marginBottom:3},(0,v.jsx)(u.X6,{level:3,alternate:!0},N)),(0,v.jsx)(p.Z,{marginBottom:1},(0,v.jsx)(g.Z,{onClick:M,type:"primary",htmlButtonType:"button",text:(0,h.ag)("Browse Files")}))))),(0,v.jsx)(p.Z,{displaySm:D,displayMd:D,display:"none",marginBottom:1},(0,v.jsx)(g.Z,{className:"upload-photo-responsive",full:!0,onClick:M,type:"primary",htmlButtonType:"button",icon:C,text:B})))}))},105024:(e,t,o)=>{"use strict";o.d(t,{Z:()=>x});var n=o(87363),r=o(625198),a=o.n(r),i=o(280506),s=o(257641),l=o(979186),c=o(269703),d=o(274125),p=o(703756),u=o(358633),g=o(295260),h=o(169338),m=o(630806),f=o(894320);const x=e=>{let{uploadPhoto:t,className:o}=e;const{photos:r,onNext:x}=(0,m.PK)(),[y,w]=(0,n.useState)(r.map((e=>({photo:e,uploading:!0,success:!1,errorMessage:null})))),v=y.filter((e=>{let{uploading:t}=e;return t})).length,C=y.filter((e=>{let{success:t}=e;return t})).length,k=v>0?(0,c.ag)("Uploading %{numOfPhotosTriedUploadPlusOne} of %{totalPhotos}â¦",{numOfPhotosTriedUploadPlusOne:y.length-v+1,totalPhotos:y.length}):(0,c.ag)("Uploaded %{numOfPhotosUploadedSucceed} of %{totalPhotos}",{numOfPhotosUploadedSucceed:C,totalPhotos:y.length}),b=(e,t)=>{let{uploading:o,photoId:n,errorMessage:r}=t;w((t=>[...t.slice(0,e),{photo:{...t[e].photo,photoId:n},success:Boolean(n),uploading:o,errorMessage:r},...t.slice(e+1)]))};(0,h.nw)((()=>{let e=!1;return y.forEach(((o,n)=>{let{photo:r}=o;!async function(o,n){const{photoId:r,errorMessage:a}=await t(o);e||b(n,{uploading:!1,photoId:r,errorMessage:a})}(r,n)})),()=>{e=!0}}));return(0,f.jsx)(i.default.Provider,{value:s.n.v2},(0,f.jsx)(l.Z,{className:o},(0,f.jsx)(d.Z,{title:k}),(0,f.jsx)(u.Z,null,y.map(((e,o)=>{let{success:n,uploading:r,photo:i,errorMessage:s}=e;const{urls:l}=i;a()(l,"Missing url for photo thumbnail."),a()(i.file,"Missing file for photo.");const d=!n&&!r;let p=null;d&&(p=s||(0,c.ag)("Oops, this photo failed to upload. Please retry."));const u="isBeforePhoto"in i&&!d?{value:i.isBeforePhoto??!1}:null;return(0,f.jsx)(g.Z,{key:(0,h.YF)(i.file),photoUrl:l.original,caption:!d&&i.caption?{value:i.caption}:null,loading:r,success:n,error:p,beforePhoto:u,onRetry:d&&0===v?()=>(async(e,o)=>{b(o,{uploading:!0,photoId:null,errorMessage:null});const{photoId:n,errorMessage:r}=await t(e);b(o,{uploading:!1,photoId:n,errorMessage:r})})(i,o):null})}))),(0,f.jsx)(p.Z,{nextButtonText:v>0?(0,c.ag)("Upload"):(0,c.ag)("Done"),onNext:()=>{const e=y.filter((e=>{let{success:t}=e;return t})).map((e=>{let{photo:t}=e;return t}));x({photos:e})},disableNext:v>0})))}},703756:(e,t,o)=>{"use strict";o.d(t,{Z:()=>g});var n=o(563798),r=(o(87363),o(625198)),a=o.n(r),i=o(979186),s=o(269703),l=o(682642),c=o(365778),d=o(522743),p=o(434725),u=o(894320);const g=e=>{let{nextButtonText:t,onNext:o,onCancel:r,disableNext:g=!1,onBrowseFilesButtonClick:h}=e;const m=e=>{e.preventDefault(),a()(h,"onBrowseFilesButtonClick should not be null"),h()},f=()=>{o()};return(0,u.jsx)(i.Z,{className:"responsive"},(0,u.jsx)(i.Z,{display:"block",displaySm:"none"},(0,u.jsx)(i.Z,{paddingTop:4,paddingBottom:4,backgroundColor:"white",borderColor:"default"},(0,u.jsx)(d.Z,{verticalAlign:"middle"},(0,u.jsx)(p.Z,{fill:!0},!!h&&(0,u.jsx)(n.Trans,{id:(0,s.ag)("<0><1><2/></1></0><3>or drag and drop more photos</3>",{}).toString(),components:[(0,u.jsx)(i.Z,{marginRight:1,display:"inline-block"}),(0,u.jsx)(c.xv,{size:"large"}),(0,u.jsx)(l.Z,{type:"link",onClick:m,text:"Browse"}),(0,u.jsx)(c.xv,{inline:!0,size:"large"})]})),(0,u.jsx)(p.Z,null,(0,u.jsx)(d.Z,{verticalAlign:"middle",gutter:1.5},(0,u.jsx)(p.Z,null,!!r&&(0,u.jsx)(i.Z,{display:"inline-block"},(0,u.jsx)(l.Z,{type:"secondary",onClick:()=>{a()(r,"onCancel should not be null"),r()},htmlButtonType:"button",text:(0,s.ag)("Cancel")}))),(0,u.jsx)(p.Z,null,(0,u.jsx)(l.Z,{type:"primary",onClick:f,disabled:g,htmlButtonType:"button",text:t}))))))),(0,u.jsx)(i.Z,{display:"none",displaySm:"block"},(0,u.jsx)(i.Z,{textAlign:"center",paddingTop:3,paddingBottom:3,backgroundColor:"white"},(0,u.jsx)(l.Z,{full:!0,type:"primary",onClick:f,disabled:g,htmlButtonType:"button",text:t}),!!h&&(0,u.jsx)(i.Z,{paddingTop:2},(0,u.jsx)(l.Z,{full:!0,type:"secondary",onClick:m,disabled:g,htmlButtonType:"button",text:(0,s.ag)("Add More")})))))}},274125:(e,t,o)=>{"use strict";o.d(t,{Z:()=>s});o(87363);var n=o(510832),r=o(979186),a=o(365778),i=o(894320);const s=e=>{let{title:t,alertText:o}=e;return(0,i.jsx)(r.Z,{paddingBottom:2,paddingTop:4},(0,i.jsx)(r.Z,null,(0,i.jsx)(r.Z,{marginBottom:1},(0,i.jsx)(a.X6,{level:3},t)),o&&(0,i.jsx)(n.Z,{priority:"high",type:"error"},(0,i.jsx)(a.xv,{inline:!0,size:"inherit",weight:"semibold"},o))))}},295260:(e,t,o)=>{"use strict";o.d(t,{Z:()=>C});o(87363);var n=o(625198),r=o.n(n),a=o(979186),i=o(90553),s=o(808756),l=o(755358),c=o(365778),d=o(322946),p=o(602934),u=o(269703),g=o(865766),h=o(675033),m=o(946985),f=o(921752),x=o(894320);const y=e=>{let{caption:t,onUpdate:o,invalid:n=!1,mandatory:i=!1}=e;const s=!o;let l="";return s||(l=i?(0,u.ag)("Required"):(0,u.ag)("Optional")),(0,x.jsx)(a.Z,null,(0,x.jsx)(m.Z,{htmlFor:"textarea-state-idle",helpTextInline:l,text:(0,u.ag)("Caption")}),(0,x.jsx)(f.Z,{id:"textarea-state-idle",rows:"2",placeholder:s?"":(0,u.ag)("Captions help others identify what's in the photo."),validationStateType:n?"error":null,onChange:e=>{r()(o,"onChange should not fire - caption area is disabled");const t=e.currentTarget.value;o(t)},value:t,validationStateText:n?(0,u.ag)("Your caption is a bit on the short side. Try adding a few more details.").toString():"",disabled:s,maxLength:140,noMargin:!0}))};var w=o(417041),v=o.n(w);const C=(0,g.Z)((e=>{let t,{photoUrl:o,loading:n=!1,success:g,error:m,onDelete:f,onRetry:w,caption:C,beforePhoto:k,ygaTrackEvent:b}=e;g?t="success":m&&(t="error");const j=k&&k.onUpdate?"black-regular":"black-light",T=(0,x.jsx)(a.Z,null,(0,x.jsx)(a.Z,null,(0,x.jsx)(s.Z,{isLoading:n,className:v()["spinner-container"]},(0,x.jsx)(i.ZP,{src:o,status:t,stretchToFill:!0,className:v()["photo-box"],actionLinksRight:[...f?[{label:"Delete",icon:d.Z,onClick:e=>{r()(f,"onDelete should not fire - the button is hidden"),e.preventDefault(),f()}}]:[],...w?[{label:"Retry",icon:p.Z,onClick:e=>{r()(w,"onRetry should not fire - the button is hidden"),e.preventDefault(),w()}}]:[]]}))),m&&(0,x.jsx)(a.Z,{marginTop:2,marginTopSm:1},(0,x.jsx)(c.xv,{color:"red-dark"},m)),C&&(0,x.jsx)(a.Z,{className:v()["caption-container"],marginTop:2,marginTopSm:1},(0,x.jsx)(y,{caption:C.value,onUpdate:C.onUpdate,invalid:C.invalid,mandatory:C.mandatory})),k&&(0,x.jsx)(a.Z,{marginTop:2,marginBottom:3},(0,x.jsx)(l.Z,{type:"checkbox",text:(0,x.jsx)(c.xv,{inline:!0,color:j},(0,u.ag)("Before Photo")),disabled:!k.onUpdate,onChange:()=>{var e;e=k.value,r()(k&&k.onUpdate,"onChange should not fire - before photos are disabled"),k.onUpdate(!e),b({category:"Portfolio",action:"click",eventLabel:`Edit Project Photo - Before Photo ${e?"Unselected":"Selected"} - ADD_PHOTO`})},checked:k.value}),(0,x.jsx)(c.xv,{inline:!0,color:"black-light"}," ",(0,u.ag)("(Optional)"))));return k&&k.value?(0,x.jsx)(h.Z,null,T):T}))},171517:(e,t,o)=>{"use strict";o.d(t,{Z:()=>s});o(87363);var n=o(269703),r=o(295260),a=o(169338),i=o(894320);const s=e=>{let{file:t,onDelete:o,maxFileSize:s}=e;return(0,i.jsx)(r.Z,{success:!1,photoUrl:"",onDelete:o,error:(0,n.ag)("Oops, the photo â%{fileName}â is too large to upload. The file size must be under %{fileSizeFormattedBytes}.",{fileName:t.name,fileSizeFormattedBytes:(0,a.td)(s)})})}},358633:(e,t,o)=>{"use strict";o.d(t,{Z:()=>u});var n=o(87363),r=o(473550),a=o.n(r),i=o(979186),s=o(522743),l=o(434725),c=o(713220),d=o.n(c),p=o(894320);const u=e=>{let{children:t,layoutStack:o=!1}=e;return(0,p.jsx)(i.Z,{overflow:"scrolly",className:a()([d()["photo-list-wrapper"]],{[d()["photo-list-wrapper-stacked"]]:o})},(0,p.jsx)(s.Z,{layoutUnits:4,layoutWrap:"borderless",gutter:2,className:d()["photo-list-arrange"]},n.Children.map(t,(e=>e&&(0,p.jsx)(l.Z,{key:e.key,className:d()["photo-list-arrange-item"]},e)))))}},169338:(e,t,o)=>{"use strict";o.d(t,{WU:()=>l,YF:()=>r,bZ:()=>c,ii:()=>u,nw:()=>i,pJ:()=>g,td:()=>a,xJ:()=>s,y$:()=>p});var n=o(87363);const r=e=>`${e.name}${e.lastModified.toString()}`;function a(e){if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/1024**t).toFixed(0))} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}`}const i=e=>n.useEffect(e,[]),s=(e,t)=>e.filter((e=>e.file&&e.file.size<t));function l(e){return`${e.name}${e.size}`}const c=[".tiff",".bmp",".png",".jpeg",".jpg"],d=["image/tiff","image/bmp","image/png","image/jpeg"],p=20971520;function u(e,t){if(e.preventDefault(),e.dataTransfer.items){const o=[];for(let t=0;t<e.dataTransfer.items.length;t+=1){const n=e.dataTransfer.items[t].getAsFile();n&&d.includes(n.type)&&o.push(n)}t(o),e.dataTransfer.items.clear()}else{t(Array.from(e.dataTransfer.files).filter((e=>e&&d.includes(e.type)))),e.dataTransfer.clearData()}}function g(e,t){return e.map((e=>({file:e,urls:e.size<=t?{original:URL.createObjectURL(e)}:null})))}},675033:(e,t,o)=>{"use strict";o.d(t,{Z:()=>c});o(87363);var n=o(269703),r=o(979186),a=o(36368),i=o(91925),s=o.n(i),l=o(894320);const c=e=>{let{children:t}=e;return(0,l.jsx)(r.Z,{className:s().beforeLabelContainer},t,(0,l.jsx)(r.Z,{className:s().beforeLabel,marginTop:2,marginLeft:2},(0,l.jsx)(a.ZP,{text:(0,n.ag)("BEFORE"),size:"large",color:"black-extra-light"})))}},480551:(e,t,o)=>{"use strict";o.d(t,{Z:()=>l});o(87363);var n=o(979186),r=o(365778),a=o(166573),i=o.n(a),s=o(894320);const l=e=>{let{text:t,padding:o=4}=e;return(0,s.jsx)(n.Z,{className:i()["hr-with-text"],paddingTop:o,paddingBottom:o},(0,s.jsx)(r.xv,{inline:!0,bold:!0},t))}},395203:(e,t,o)=>{"use strict";o.d(t,{Ii:()=>s,dQ:()=>l,f2:()=>c});var n=o(87363),r=o(164925),a=o(894320);const i=(0,n.createContext)({onUserAuthChange:()=>{},isUserLoggedIn:!1}),s=()=>(0,n.useContext)(i),l=e=>{const{isUserLoggedIn:t}=s(),o=(0,r.Z)(t)??t;(0,n.useEffect)((()=>{o!==t&&e()}),[e,t,o])},c=e=>{let{initialIsUserLoggedIn:t,children:o}=e;const[r,s]=(0,n.useState)(t);return(0,a.jsx)(i.Provider,{value:{onUserAuthChange:e=>{s(e)},isUserLoggedIn:r}},o)}},145304:(e,t,o)=>{"use strict";o.d(t,{Z:()=>T});var n=o(563798),r=o(87363),a=o(365778),i=o(269703),s=o(677841),l=o(979186),c=o(996621),d=o(982985),p=o(174797),u=o(988617),g=o(602256),h=o(682642),m=o(894320);const f=e=>{let{reason:t,emailAddress:o,loading:r,onLinkClick:s}=e;const l=()=>{s()};return"login_compromised_password_reset"===t?(0,m.jsx)(n.Trans,{id:(0,i.ag)("The password you entered is blocked and may have been involved in a breach from another website. <0>Click here</0> to have a password reset email sent to <1>%{emailAddress}</1>.",{emailAddress:o}).toString(),components:[(0,m.jsx)(h.Z,{disabled:r,type:"link",htmlButtonType:"button",onClick:l}),(0,m.jsx)(a.xv,{inline:!0,bold:!0,size:"inherit"})]}):"login_two_factor"===t?(0,m.jsx)(n.Trans,{id:(0,i.ag)("<0>We need to confirm itâs really you.</0> Weâve sent an email with a login link to <1>%{emailAddress}</1>. <2>Send another one</2>?",{emailAddress:o}).toString(),components:[(0,m.jsx)(a.xv,{inline:!0,bold:!0,size:"inherit"}),(0,m.jsx)(a.xv,{inline:!0,bold:!0,size:"inherit"}),(0,m.jsx)(h.Z,{disabled:r,type:"link",htmlButtonType:"button",onClick:l})]}):(0,m.jsx)(n.Trans,{id:(0,i.ag)("The email address or password you entered is incorrect. <0>Click here</0> to have a password reset email sent to <1>%{emailAddress}</1>.",{emailAddress:o}).toString(),components:[(0,m.jsx)(h.Z,{disabled:r,type:"link",htmlButtonType:"button",onClick:l}),(0,m.jsx)(a.xv,{inline:!0,bold:!0,size:"inherit"})]})};var x=o(929392),y=o(835291),w=o.n(y);const v="password_reset",C="/forgot/ajax",k="/login/magic",b={login_prompt_password_reset:v,login_compromised_password_reset:v,login_two_factor:"magic_link"},j=e=>{let{reason:t,emailAddress:o,forgotPasswordCsrfToken:h,magicLinkCsrfToken:y,forgotPasswordUrl:j=C,magicLinkUrl:T=k}=e;const{onAlert:S}=(0,p.V)(),Z=(0,c.Dm)(),[_,P]=(0,r.useState)(!1),O=b[t],A=(0,x.as)(j),L=(0,x.as)(T);return(0,m.jsx)(l.Z,{className:w()["password-reset-alert-message-container"]},_&&(0,m.jsx)(l.Z,{className:w()["password-reset-alert-message-spinner"]},(0,m.jsx)(s.Z,{isLoading:!0,color:"black-extra-light"})),(0,m.jsx)(l.Z,{className:w()["password-reset-alert-message"]},(0,m.jsx)(f,{reason:t,emailAddress:o,loading:_,onLinkClick:async()=>{let e;P(!0),Z({category:"New Signup",action:"signup click",eventLabel:"submit reset password assist"});try{const t=O===v?A:L,n=O===v?h:y,r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8","X-Requested-With":"XMLHttpRequest"},credentials:"include",body:(0,d.Z)({email:o,csrftok:n})});if(!r.ok)throw new Error(`Forgot password request error status: ${r.status}: ${r.statusText}`);e=await r.json()}catch(e){(0,u.Z)(e),S({type:"error",message:(0,m.jsx)(g.Z,null)})}finally{P(!1)}e&&(e.success?S({type:"success",message:O===v?(0,m.jsx)(n.Trans,{id:(0,i.ag)("You will receive a message at <0>%{emailAddress}</0> if youâve registered your account with that email address. Please check for an email from Yelp and click on the included link to reset your password.",{emailAddress:o}).toString(),components:[(0,m.jsx)(a.xv,{inline:!0,bold:!0,size:"inherit"})]}):(0,m.jsx)(n.Trans,{id:(0,i.ag)("Weâve sent a login link to <0>%{emailAddress}</0>.",{emailAddress:o}).toString(),components:[(0,m.jsx)(a.xv,{inline:!0,bold:!0,size:"inherit"})]})}):(O===v&&Z({category:"Forgot Password",action:"forgot",eventLabel:"incorrect submission"}),S({type:"error",message:(0,m.jsx)(g.Z,null)})))}})))},T=j},276865:(e,t,o)=>{"use strict";o.d(t,{Z:()=>l});o(87363);var n=o(982985),r=o(503044),a=o(696792),i=o(929392),s=o(894320);const l=e=>{let{provider:t,locale:o,externalFirstName:l,externalLastName:c,externalEmail:d,oneClickBody:p,onAlreadyRegistered:u,onSignup:g,defaultShowCaptcha:h=!1,facebookOneClickUrl:m=a.j2,facebookOneClickCsrfToken:f,googleOneClickUrl:x=a.UT,googleOneClickCsrfToken:y}=e;const w=(0,i.as)(m),v=(0,i.as)(x),C="facebook"===t?w:v,k="facebook"===t?f:y,b=!l||!c;return(0,s.jsx)(r.Z,{onMakeRequest:e=>{let{email:t,password:o,firstName:r,lastName:a,city:i,zipCode:s,country:l,captchaVerifyToken:c}=e;return fetch(C,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8","X-Requested-With":"XMLHttpRequest"},credentials:"include",body:(0,n.Z)({csrftok:k,...p,...b?{first_name:r,last_name:a}:{},email:t,password:o,other_country:l,...s?{zip:s}:{},...i?{city:i}:{},...c?{visible_hcaptcha_response:c}:{}})})},onSignup:()=>{g()},onAlreadyRegistered:u,termsAcknowledged:!0,locale:o,prefilledFields:{firstName:l,lastName:c,email:d},hiddenFields:{name:!b,birthday:!0,marketingEmails:!0},defaultShowCaptcha:h})}},400787:(e,t,o)=>{"use strict";o.d(t,{Z:()=>C});var n=o(563798),r=o(87363),a=o(269703),i=o(979186),s=o(682642),l=o(873734),c=o(755358),d=o(996621),p=o(625198),u=o.n(p),g=o(982985),h=o(929392),m=o(174797),f=o(988617),x=o(602256),y=o(43817),w=o(894320);const v="/forgot/ajax",C=e=>{let{forgotPasswordCsrfToken:t,onPasswordReset:o,forgotPasswordUrl:p=v}=e;const{onAlert:C}=(0,m.V)(),k=(0,d.Dm)(),[b,j]=(0,r.useState)(!1),[T,S]=(0,r.useState)(null),Z=(0,h.as)(p),[_,P]=(0,r.useState)(""),O=(0,r.useRef)(null);(0,r.useEffect)((()=>{u()(O.current,"Form DOM should be populated on mount"),O.current.focus()}),[]);return(0,w.jsx)(l.Z,{onSubmit:async e=>{let n;e.preventDefault(),C(null),j(!0),S(null),k({category:"New Signup",action:"signup click",eventLabel:"submit forgot password"});try{const e=await fetch(Z,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8","X-Requested-With":"XMLHttpRequest"},credentials:"include",body:(0,g.Z)({csrftok:t,email:_})});if(!e.ok)throw new Error(`Login request error status: ${e.status}: ${e.statusText}`);n=await e.json()}catch(e){(0,f.Z)(e),C({type:"error",message:(0,w.jsx)(x.Z,null)})}finally{j(!1)}n&&(n.success?o(_):(S(n.error_field_names),C({type:"error",message:(0,w.jsx)(x.Z,{errors:n.errors})}),k({category:"Forgot Password",action:"forgot",eventLabel:"incorrect submission"})))}},(0,w.jsx)(i.Z,{className:y.J},(0,w.jsx)(c.Z,{type:"email",placeholder:(0,a.ag)("Email"),noMargin:!0,onChange:e=>{P(e.currentTarget.value)},value:_,disabled:b,tagRef:O,validationStateType:T&&T.includes("email")?"error":null,required:!0})),(0,w.jsx)(i.Z,{marginTop:3},(0,w.jsx)(s.Z,{full:!0,type:"primary",htmlButtonType:"submit",disabled:b},(0,w.jsx)(n.Trans,{id:(0,a.ag)("Reset Password",{}).toString()}))))}},898448:(e,t,o)=>{"use strict";o.d(t,{Z:()=>A});var n=o(563798),r=o(87363),a=o(979186),i=o(365778),s=o(269703),l=o(873734),c=o(755358),d=o(682642),p=o(996621),u=o(625198),g=o.n(u),h=o(982985),m=o(174797),f=o(988617),x=o(602256),y=o(626209),w=o(145304),v=o(929392),C=o(43817),k=o(44909),b=o.n(k),j=o(817509),T=o.n(j),S=o(882189),Z=o(460533),_=o(43491),P=o(894320);const O="/login/newajax",A=e=>{let{loginCsrfToken:t,forgotPasswordCsrfToken:o,magicLinkCsrfToken:u,loginUrl:k=O,termsAcknowledged:j=!0,onLogin:A,onForgotPassword:L,initialEmailValue:R="",isRaXLogin:M,setContinueWithEmail:E,isPasswordlessLogin:D=!1,pslRedirectUrl:U=window?.location?.href??"/",inputTexts:B={},onBackClicked:N}=e;const{onAlert:I}=(0,m.V)(),{ready:F,visibleSiteKey:z,getHCaptchaResponse:G}=(0,y.XV)(),H=(0,p.Dm)(),V=(0,v.as)(k),[$,X]=(0,r.useState)(!1),[Y,q]=(0,r.useState)(!1),[W,K]=(0,r.useState)("unsolvedCaptchaToken"),[J,Q]=(0,r.useState)(0),[ee,te]=(0,r.useState)(R),[oe,ne]=(0,r.useState)(""),[re,ae]=(0,r.useState)(!1),[ie,se]=(0,r.useState)({}),le=(0,r.useRef)(null),ce=(0,r.useRef)(null),de=(0,r.useRef)(null),{isModernizedUI:pe,isOtpLoginFlow:ue}=(0,_.P)();(0,r.useEffect)((()=>{R?(g()(ce.current,"Form DOM should be populated on mount"),ce.current.focus()):(g()(le.current,"Form DOM should be populated on mount"),le.current.focus())}),[]);const ge=null!=E?()=>{E(!1)}:null,[he]=(0,S.Db)(Z.MJ),me=e=>(0,P.jsx)(n.Trans,{id:(0,s.ag)("<0>There was a problem sending a login link to <1>%{email}.</1> Please try again.</0>",{email:e}).toString(),components:[(0,P.jsx)(i.xv,null),(0,P.jsx)(i.xv,{bold:!0,inline:!0})]}),fe=async function(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.preventDefault(),!j)return void I({type:"warning",message:(0,P.jsx)(n.Trans,{id:(0,s.ag)("To join Yelp, first agree to our Terms of Service and confirm that youâve read our Privacy Policy by checking the box below.",{}).toString()})});I(null),X(!0),se({}),H({category:"New Signup",action:"signup click",eventLabel:"submit login"});const a=F&&!Y?await G(de):null;let l;try{if(r){if(l=(await he({variables:{email:ee,redirectUrl:U,...Y?{visibleHcaptchaResponse:W}:{}}})).data,l&&l.sendMagicLinkLoginEmail.error)throw new Error(`Magic link request error: ${l.sendMagicLinkLoginEmail.error}`)}else{const e=await fetch(V,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8","cache-control":"no-cache","X-Requested-With":"XMLHttpRequest"},credentials:"include",body:(0,h.Z)({csrftok:t,email:ee,password:oe,...a?{hcaptcha_response:a}:{},...Y?{visible_hcaptcha_response:W}:{}})});if(!e.ok)throw new Error(`Login request error status: ${e.status}: ${e.statusText}`);l=await e.json()}}catch(e){(0,f.Z)(e),I(r?{type:"error",message:me(ee)}:{type:"error",message:(0,P.jsx)(x.Z,null)})}finally{X(!1),r&&ae(!0)}var c;!r&&l&&(l.success?A():(se((l?.error_fields??[]).reduce(((e,t)=>({...e,[t]:void 0})),{})),l.show_captcha?(Q((e=>e+1)),q(!0)):q(!1),l.require_link?I({type:"error",message:(0,P.jsx)(w.Z,{reason:l.frontend_error_type,emailAddress:l.email_address,forgotPasswordCsrfToken:o,magicLinkCsrfToken:u})}):I({type:"error",message:(0,P.jsx)(x.Z,{errors:l.errors})}),H({category:"New Signup",action:"login",eventLabel:"incorrect submission"}))),r&&l&&(q(!1),l.sendMagicLinkLoginEmail.isSuccess?I({type:"success",message:(c=ee,(0,P.jsx)(n.Trans,{id:(0,s.ag)("<0>Link sent to <1>%{email}.</1> Verify your email to continue.</0>",{email:c}).toString(),components:[(0,P.jsx)(i.xv,null),(0,P.jsx)(i.xv,{bold:!0,inline:!0})]}))}):"CAPTCHA_REQUIRED"===l.sendMagicLinkLoginEmail.error?(Q((e=>e+1)),q(!0),I({type:"error",message:(0,P.jsx)(n.Trans,{id:(0,s.ag)("<0>Are you a human? Please complete the bot challenge below.</0>",{}).toString(),components:[(0,P.jsx)(i.xv,null)]})})):I({type:"error",message:me(ee)}))},xe=async e=>{e.preventDefault(),le.current?.value?le.current?.reportValidity()&&fe(e,!0):se({email:(0,s.ag)("Enter your email to continue")})};return(0,P.jsx)(l.Z,{onSubmit:fe},(0,P.jsx)(a.Z,{marginBottom:1.5,className:C.J},(0,P.jsx)(c.Z,{type:"email",label:B?.emailLabel,placeholder:B?.emailPlaceholder,noMargin:!0,onChange:e=>{te(e.currentTarget.value)},value:ee,disabled:$||ue,tagRef:le,validationStateText:ie?.email,validationStateType:"email"in ie&&!ue?"error":null,autoComplete:"username",required:!0})),!re&&(0,P.jsx)(a.Z,{marginBottom:1.5},(0,P.jsx)(c.Z,{type:"password",label:B?.passwordLabel,placeholder:B?.passwordPlaceholder,noMargin:!0,onChange:e=>{ne(e.currentTarget.value)},value:oe,disabled:$,tagRef:ce,validationStateType:"password"in ie?"error":null,required:!0})),!D&&!ue&&(0,P.jsx)(a.Z,{marginBottom:1.5},(0,P.jsx)(i.xv,{size:"small",align:"center"},(0,P.jsx)(d.Z,{type:"link",htmlButtonType:"button",onClick:e=>{e.preventDefault(),L()},text:(0,s.ag)("Forgot password?")}))),(0,P.jsx)(a.Z,{tagRef:de,marginBottom:1,className:T()["hcaptcha-container"],"data-testid":"captcha-container",textAlign:"center"},Y&&F&&z&&(0,P.jsx)(b(),{id:`${J}`,key:J,sitekey:z,onVerify:e=>{K(e)}})),(0,P.jsx)(d.Z,{full:!0,type:"primary",htmlButtonType:"submit",disabled:$&&!(pe||D),isLoading:$&&(pe||D),text:re?(0,s.ag)("Resend link"):(0,s.ag)("Log in"),onClick:re?xe:void 0}),D&&!re&&(0,P.jsx)(a.Z,{marginTop:2,textAlign:"center"},(0,P.jsx)(d.Z,{full:!0,type:"link",text:(0,s.ag)("Login via email link"),disabled:$,isLoading:$,onClick:xe})),re&&(0,P.jsx)(a.Z,{marginTop:2,textAlign:"center"},(0,P.jsx)(d.Z,{full:!0,type:"link",disabled:$,text:(0,s.ag)("Log in with password"),onClick:e=>{e?.preventDefault(),I(null),ae(!1)}})),M&&null!=ge&&!ue&&(0,P.jsx)(a.Z,{marginTop:2},(0,P.jsx)(d.Z,{full:!0,type:"secondary-white",disabled:$,onClick:ge,text:(0,s.ag)("Cancel")})),N&&ue&&(0,P.jsx)(a.Z,{marginTop:1.5,textAlign:"center"},(0,P.jsx)(d.Z,{full:!0,type:"link",disabled:$,onClick:N,text:(0,s.ag)("Back")})))}},661924:(e,t,o)=>{"use strict";o.d(t,{Z:()=>ce,y:()=>le});var n=o(563798),r=o(87363),a=o.n(r),i=o(280506),s=o(979186),l=o(522743),c=o(434725),d=o(365778),p=o(269703),u=o(873734),g=o(946985),h=o(755358),m=o(45541),f=o(988086),x=o(720302),y=o(682642),w=o(625198),v=o.n(w),C=o(866976),k=o(645888),b=o(882189),j=o(182145),T=o(982985),S=o(174797),Z=o(247834),_=o(988617),P=o(602256),O=o(109130),A=o(480551),L=o(88677),R=o(257641),M=o(827103),E=o.n(M),D=(o(903985),o(171517)),U=o(274125),B=o(703756),N=o(358633),I=o(169338);var F=o(630806),z=o(894320);const G=e=>{let{nextStepText:t,onCancel:o,className:n}=e;const{photos:a,maxFileSize:l,onNext:c,onReset:d}=(0,F.PK)(),[u,g]=(0,r.useState)({aspect:1,keepSelection:!0}),[h,m]=(0,r.useState)(null);v()(1===a.length,"StepCrop should operate on a single photo.");const f=0===(0,I.xJ)(a,l).length,x=a[0],y=()=>{d()},w=e=>{e.width&&e.height&&e.width>0&&e.height>0&&g(e)};if(v()(x.file,"The photo's file is null or undefined."),f)return(0,z.jsx)(s.Z,{className:n},(0,z.jsx)(U.Z,{title:(0,p.ag)("Sorry, that photo is too large to upload.")}),(0,z.jsx)(N.Z,null,[(0,z.jsx)(D.Z,{file:x.file,maxFileSize:l})]),(0,z.jsx)(B.Z,{nextButtonText:(0,p.ag)("Back"),onCancel:o,onNext:y}));const C=x.urls;return v()(C,"The photo should have an ObjectURL."),(0,z.jsx)(i.default.Provider,{value:R.n.v2},(0,z.jsx)(s.Z,{className:n},(0,z.jsx)(U.Z,{title:(0,p.ag)("Almost done! Set the crop for your profile photo.")}),(0,z.jsx)(s.Z,{style:{maxHeight:"400px"},textAlign:"center"},(0,z.jsx)(E(),{src:C.original,crop:u,onChange:w,onImageLoaded:e=>{m(e),e.width===e.height?w({aspect:1,width:e.width,height:e.height,x:0,y:0,unit:"px",keepSelection:!0}):w({aspect:1,width:.75*e.width,height:.75*e.height,x:.125*e.width,y:.125*e.height,unit:"px",keepSelection:!0})},minWidth:50,minHeight:50,imageStyle:{maxHeight:"400px"}})),(0,z.jsx)(B.Z,{nextButtonText:t,onCancel:o,onNext:()=>{v()(h,"The image we wanted to crop never loaded!");const e=((e,t)=>{const o=document.createElement("canvas"),n=e.naturalWidth/e.width,r=e.naturalHeight/e.height;o.width=t.width*n,o.height=t.height*r;const a=o.getContext("2d");return v()(a,"Photo context is undefined"),a.drawImage(e,t.x*n,t.y*r,t.width*n,t.height*r,0,0,t.width*n,t.height*r),o.toDataURL("image/png")})(h,u);c({photos:[{...x,urls:{original:e}}]})}})))};var H=o(105024),V=o(999230),$=o(765956);const X=new Map([[L.Z,!0],[G,!1],[H.Z,!1]]),Y=new Map([[L.Z,!0],[G,!1],[H.Z,!1]]),q=e=>{let{oldProfilePhotoId:t,visible:o,onClose:n,onComplete:a,profilePhotoUploadUrl:i,profilePhotoUploadCsrfToken:s,profilePhotoChangeUrl:l,profilePhotoChangeCsrfToken:c}=e;const[d,p]=(0,r.useState)(null),[u,g]=(0,r.useState)(0);return(0,z.jsx)($.ZP,{reserveTitleSpacing:!1,simple:!0,size:"medium",onClose:n,visible:o,overlayDismiss:!!d&&X.get(d.type),hideDismissButton:!!d&&!Y.get(d.type)},(0,z.jsx)(V.Z,{key:u,onStep:e=>{p(e)},onComplete:e=>{g((e=>e+1));const t=0!==e.length?e[0]:null;t&&(v()(t.photoId,"An uploaded photo should have an attached photoId"),a(t.photoId))}},(0,z.jsx)(L.Z,null),(0,z.jsx)(H.Z,{uploadPhoto:async e=>{const o=new URLSearchParams({csrftok:t?c:s,...t?{photoID:t}:{}}),n=t?l:i;let r;try{const t=await fetch(`${n}?${o.toString()}`,{method:"POST",headers:{"Content-Type":"application/octet-stream","cache-control":"no-cache","X-Requested-With":"XMLHttpRequest"},credentials:"include",body:e.file});if(!t.ok)throw new Error(`Profile photo upload error status: ${t.status}: ${t.statusText}`);r=await t.json()}catch(e){(0,_.Z)(e)}if(r){if(r.success)return{photoId:r.photo_id};if(r.errors&&r.errors.length>0)return{photoId:null,errorMessage:r.errors[0]}}return{photoId:null}}})))},W=q;var K=o(611963),J=o(967369),Q=o.n(J);const ee="/signup/fb_photo",te=e=>{let{onUploadPhoto:t,disabled:o=!1,facebookPhotoUploadCsrfToken:a,facebookPhotoUploadUrl:s=ee}=e;const l=(0,r.useContext)(i.default),{getFacebookUserData:c,ready:d}=(0,Z.Po)(),{onAlert:u}=(0,S.V)(),[g,h]=(0,r.useState)(!1);return d?(0,z.jsx)(K.Z,{full:!l.v2_enabled,className:l.v2_enabled?Q()["social-button--use-facebook-photo"]:void 0,network:"facebook",text:(0,p.ag)("Use Facebook Photo"),onClick:()=>{(async()=>{let e,o;u(null),h(!0);try{const t=await c(void 0);if(!t)return void h(!1);if(!t.photoUrl)return h(!1),void u({type:"warning",message:(0,z.jsx)(n.Trans,{id:(0,p.ag)("Your Facebook account doesnât have a profile photo.",{}).toString()})});e=t.photoUrl}catch(e){return(0,_.Z)(e),void u({type:"error",message:(0,z.jsx)(n.Trans,{id:(0,p.ag)("There was a problem retrieving your Facebook profile photo.",{}).toString()})})}finally{h(!1)}h(!0);try{const t=await fetch(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8","X-Requested-With":"XMLHttpRequest"},credentials:"include",body:(0,T.Z)({csrftok:a,photoUrl:e})});if(!t.ok)throw new Error(`Facebook profile photo upload error status: ${t.status}: ${t.statusText}`);o=await t.json()}catch(e){(0,_.Z)(e),u({type:"error",message:(0,z.jsx)(P.Z,null)})}finally{h(!1)}o&&(o.success?t(o.photo_id):u({type:"error",message:(0,z.jsx)(P.Z,{errors:o.errors})}))})()},disabled:o||g}):null};var oe=o(929392),ne=o(43817);const re="/signup/extra",ae="/signup/upload",ie="/signup/change",se="/signup/fb_photo",le=j.ZP`
    query GetPersonalizeAccountData {
        siteConfig {
            cdnDomain
        }
    }
`,ce=e=>{let{onSkip:t,onPersonalizeAccount:o,personalizeAccountCsrfToken:w,personalizeAccountUrl:j=re,profilePhotoUploadCsrfToken:L,profilePhotoUploadUrl:R=ae,profilePhotoChangeCsrfToken:M,profilePhotoChangeUrl:E=ie,facebookPhotoUploadCsrfToken:D,facebookPhotoUploadUrl:U=se}=e;const{loading:B,data:N}=(0,b.aM)(le),I=(0,r.useContext)(i.default),{onAlert:F}=(0,S.V)(),{ready:G}=(0,Z.Po)(),[H,V]=(0,r.useState)(!1),$=(0,oe.as)(j),X=(0,oe.as)(U),Y=(0,oe.as)(E),q=(0,oe.as)(R),[K,J]=(0,r.useState)(""),[Q,ee]=(0,r.useState)("f"),[ce,de]=(0,r.useState)(""),[pe,ue]=(0,r.useState)("u"),[ge,he]=(0,r.useState)(!1),[me,fe]=(0,r.useState)(!1),[xe,ye]=(0,r.useState)(null),[we,ve]=(0,r.useState)(!1),[Ce,ke]=(0,r.useState)(null),be=(0,r.useRef)(null),je=(0,r.useRef)(null);(0,r.useEffect)((()=>{v()(be.current,"Form DOM should be populated on mount"),be.current.focus()}),[]);const Te=e=>{const t=e.currentTarget.value;"o"===t&&(v()(je.current,"Other gender form DOM should be populated on mount"),je.current.focus()),ee(t)},Se=xe&&!B&&N?(0,k.iu)(N.siteConfig.cdnDomain,"photo",xe,"ls"):void 0;return(0,z.jsx)(a().Fragment,null,(0,z.jsx)(u.Z,{onSubmit:async e=>{let t;e.preventDefault(),F(null),V(!0),ke(null);try{const e=await fetch($,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8","X-Requested-With":"XMLHttpRequest"},credentials:"include",body:(0,T.Z)({csrftok:w,phone_number:K,...me?{text_app_link:"on"}:{},gender:Q,..."o"===Q?{gender_identity:ce,gender_pronoun:pe}:{}})});if(!e.ok)throw new Error(`Personalize account error status: ${e.status}: ${e.statusText}`);t=await e.json()}catch(e){(0,_.Z)(e),F({type:"error",message:(0,z.jsx)(P.Z,null)})}finally{V(!1)}t&&(t.success?o():(ke(t.error_fields),F({type:"error",message:(0,z.jsx)(P.Z,{errors:t.errors})})))}},(0,z.jsx)(l.Z,{gutter:2.5,marginBottom:4,verticalAlign:"middle"},(0,z.jsx)(c.Z,null,(0,z.jsx)(C.Z,{src:Se,size:I.v2_enabled?"xlarge":"medium"})),(0,z.jsx)(c.Z,{textAlign:"center",fill:!I.v2_enabled||void 0},G&&(0,z.jsx)(s.Z,null,(0,z.jsx)(te,{onUploadPhoto:e=>{ye(e)},disabled:H,facebookPhotoUploadCsrfToken:D,facebookPhotoUploadUrl:X}),I.v2_enabled?(0,z.jsx)(O.Z,{text:"or",padding:2}):(0,z.jsx)(A.Z,{text:"or",padding:2})),(0,z.jsx)(y.Z,{full:!0,disabled:H,text:xe?(0,p.ag)("Change Photo"):(0,p.ag)("Upload Photo"),htmlButtonType:"button",onClick:()=>{ve(!0)}}))),(0,z.jsx)(s.Z,{marginBottom:2,className:ne.J},(0,z.jsx)(g.Z,{htmlFor:"input-personalize-phone",helpTextInline:(0,p.ag)("Optional"),text:(0,p.ag)("Phone Number")}),(0,z.jsx)(h.Z,{id:"input-personalize-phone",type:"tel",placeholder:"123-456-7890",noMargin:!0,onChange:e=>{he(!0),J(e.currentTarget.value)},value:K,disabled:H,tagRef:be,validationStateType:Ce&&Ce.includes("phone")?"error":null})),ge&&(0,z.jsx)(s.Z,{marginBottom:2},(0,z.jsx)(g.Z,{htmlFor:"input-text-app-link"},(0,z.jsx)(d.xv,null,(0,z.jsx)(h.Z,{id:"input-text-app-link",type:"checkbox",value:me,onChange:e=>{fe(e.currentTarget.checked)},text:(0,z.jsx)(n.Trans,{id:(0,p.ag)("Text me a link for the Yelp app",{}).toString()})})),(0,z.jsx)(d.xv,{size:"small"},(0,z.jsx)(n.Trans,{id:(0,p.ag)("Carrier rates may apply",{}).toString()})))),(0,z.jsx)(s.Z,{marginBottom:1},(0,z.jsx)(m.Z,null,(0,z.jsx)(g.Z,{helpTextInline:(0,p.ag)("Optional"),text:(0,p.ag)("Gender")}),(0,z.jsx)(g.Z,{htmlFor:"input-personalize-gender-female"},(0,z.jsx)(d.xv,null,(0,z.jsx)(h.Z,{type:"radio",name:"gender",text:(0,p.ag)("Female"),id:"input-personalize-gender-female",value:"f",defaultChecked:!0,disabled:H,onChange:Te}))),(0,z.jsx)(g.Z,{htmlFor:"input-personalize-gender-male"},(0,z.jsx)(d.xv,null,(0,z.jsx)(h.Z,{type:"radio",name:"gender",text:(0,p.ag)("Male"),id:"input-personalize-gender-male",value:"m",disabled:H,onChange:Te}))),(0,z.jsx)(g.Z,{htmlFor:"input-personalize-gender-other"},(0,z.jsx)(d.xv,null,(0,z.jsx)(h.Z,{type:"radio",name:"gender",text:(0,p.ag)("Other Options"),id:"input-personalize-gender-other",value:"o",disabled:H,onChange:Te}))),(0,z.jsx)(s.Z,{display:"o"===Q?"block":"none",marginTop:2,className:"other-gender-options"},(0,z.jsx)(s.Z,{marginBottom:2},(0,z.jsx)(h.Z,{type:"text",name:"gender-identity",placeholder:(0,p.ag)("Enter your gender"),noMargin:!0,onChange:e=>{de(e.currentTarget.value)},value:ce,disabled:H,tagRef:je})),(0,z.jsx)(s.Z,null,(0,z.jsx)(g.Z,{htmlFor:"input-personalize-pronoun",text:(0,p.ag)("How would you like to be referred to?"),helpTextBlock:"f"===pe?(0,z.jsx)(n.Trans,{id:(0,p.ag)("e.g. Taylor is awesome, <0>she</0> writes the best reviews",{}).toString(),components:[(0,z.jsx)(d.xv,{inline:!0,bold:!0,size:"inherit"})]}):"m"===pe?(0,z.jsx)(n.Trans,{id:(0,p.ag)("e.g. Taylor is awesome, <0>he</0> writes the best reviews",{}).toString(),components:[(0,z.jsx)(d.xv,{inline:!0,bold:!0,size:"inherit"})]}):(0,z.jsx)(n.Trans,{id:(0,p.ag)("e.g. Taylor is awesome, <0>they</0> write the best reviews",{}).toString(),components:[(0,z.jsx)(d.xv,{inline:!0,bold:!0,size:"inherit"})]})}),(0,z.jsx)(f.Z,{id:"input-personalize-pronoun",noMargin:!0,onChange:e=>{ue(e.currentTarget.value)},value:pe,disabled:H,validationStateType:Ce&&Ce.includes("gender_pronoun")?"error":null},(0,z.jsx)(x.Z,{value:"f"},(0,p.ag)("Female")),(0,z.jsx)(x.Z,{value:"m"},(0,p.ag)("Male")),(0,z.jsx)(x.Z,{value:"u"},(0,p.ag)("Neutral"))))))),(0,z.jsx)(s.Z,{marginTop:4},(0,z.jsx)(y.Z,{full:!0,type:"primary",htmlButtonType:"submit",disabled:H},(0,z.jsx)(n.Trans,{id:(0,p.ag)("Save & continue",{}).toString()}))),(0,z.jsx)(s.Z,{marginTop:4},(0,z.jsx)(d.xv,null,(0,z.jsx)(y.Z,{full:!0,type:"link",htmlButtonType:"button",disabled:H,onClick:e=>{e.preventDefault(),t()}},(0,z.jsx)(n.Trans,{id:(0,p.ag)("Skip",{}).toString()}))))),(0,z.jsx)(W,{oldProfilePhotoId:xe,visible:we,onClose:()=>{ve(!1)},onComplete:e=>{ye(e),ve(!1)},profilePhotoUploadUrl:q,profilePhotoUploadCsrfToken:L,profilePhotoChangeUrl:Y,profilePhotoChangeCsrfToken:M}))}},608930:(e,t,o)=>{"use strict";o.d(t,{Z:()=>n});const n=o(661924).Z},799880:(e,t,o)=>{"use strict";o.d(t,{Z:()=>c});o(87363);var n=o(982985),r=o(503044),a=o(696792),i=o(929392),s=o(894320);const l="/signup",c=e=>{let{signupUrl:t=l,signupCsrfToken:o,onSignup:c,onAlreadyRegistered:d,termsAcknowledged:p=!0,locale:u,isGDPR:g,prefilledFields:h,defaultShowCaptcha:m,showMinVersion:f=!1}=e;const x=(0,a.Ur)(),y=(0,i.as)(t);return(0,s.jsx)(r.Z,{onMakeRequest:async e=>{let{email:t,password:r,firstName:a,lastName:i,birthdayMonth:s,birthdayDay:l,birthdayYear:c,marketingEmailAllowed:d,city:p,zipCode:u,country:g,captchaVerifyToken:h,hCaptchaResponse:m}=e;return fetch(y,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8","cache-control":"no-cache","X-Requested-With":"XMLHttpRequest"},credentials:"include",body:(0,n.Z)({csrftok:o,first_name:a,last_name:i,email:t,password:r,signup_source:x,other_country:g,...u?{zip:u}:{},...p?{city:p}:{},birthdate_m:s??"",birthdate_d:l??"",birthdate_y:c??"",marketing_email_allowed:d?1:0,...m?{hcaptcha_response:m}:{},...h?{visible_hcaptcha_response:h}:{}})})},onSignup:c,onAlreadyRegistered:d,termsAcknowledged:p,locale:u,isGDPR:g,prefilledFields:h,defaultShowCaptcha:m,showMinVersion:f})}},596795:(e,t,o)=>{"use strict";o.d(t,{ZP:()=>He,bu:()=>Ge});var n=o(87363),r=o.n(n),a=o(979186),i=o(269703),s=o(832388),l=o(625198),c=o.n(l),d=o(182145),p=o(882189),u=o(808756),g=o(510832),h=o(277599),m=o.n(h),f=o(395203),x=o(43491),y=o(563798),w=o(139247),v=o(365778),C=o(611963),k=o(682642),b=o(431325),j=o(280506);const T=o.p+"thumbs-up.yji-b91aa10893b6bf4fb436.png",S=o.p+"thumbs-up@2x.yji-0c158a969945413c55cc.png";var Z=o(917683),_=o(117200),P=o(894320);const O=e=>{let{title:t,subtitle:o,alert:s,onDismissAlert:l,children:c,isRaXLogin:d,continueWithEmail:p=!1}=e;const u=(0,n.useContext)(j.default),{isModernizedUI:h,isPasswordlessLogin:m,isOtpLoginFlow:f}=(0,x.P)();let y=(0,P.jsx)(b.Ei,{src:T,height:52,srcSet:`${S} 2.0x`});return d?y=(0,P.jsx)(b.Ei,{height:140,src:_}):u.v2_enabled&&(y=(0,P.jsx)(b.Ei,{height:48,src:Z})),(0,P.jsx)(a.Z,{marginBottom:4,textAlign:"center",paddingTop:f?6:2,paddingTopSm:f?1:void 0},s?(0,P.jsx)(a.Z,{marginBottom:3,marginTop:f?0:3,textAlign:"left"},(0,P.jsx)(g.Z,{type:s.type,dismissCallback:h||m?null:l,priority:"high"},s.message)):!p&&!h&&(0,P.jsx)(a.Z,{marginBottom:2},y),p||f?(0,P.jsx)(v.X6,{level:2,display:h||f?3:4},(0,i.ag)(f?"Log in with password":"Continue with email")):(0,P.jsx)(r().Fragment,null,(0,P.jsx)(v.X6,{level:2,display:3,alternate:!h},t),o&&(0,P.jsx)(a.Z,{marginTop:u.v2_enabled?1:void 0},(0,P.jsx)(v.xv,{align:"center"},o))),c)};var A=o(946985),L=o(755358),R=o(64727),M=o.n(R);const E=e=>`https://terms.yelp.com/tos/${e.toLowerCase()}/`,D=e=>`https://terms.yelp.com/privacy/${e.toLowerCase()}/`,U=e=>{let{locale:t,isRaXLogin:o}=e;return(0,P.jsx)(a.Z,{textAlign:"center"},(0,P.jsx)(v.xv,{size:"small",align:"center"},o?(0,P.jsx)(y.Trans,{id:(0,i.ag)("By continuing, you agree to Yelpâs <0>Terms of Service</0> and acknowledge Yelpâs <1>Privacy Policy</1>.",{}).toString(),components:[(0,P.jsx)(v.rU,{href:E(t),size:"inherit",target:"_blank"}),(0,P.jsx)(v.rU,{href:D(t),size:"inherit",target:"_blank"})]}):(0,P.jsx)(y.Trans,{id:(0,i.ag)("By proceeding, you agree to Yelpâs <0>Terms of Service</0> and acknowledge Yelpâs <1>Privacy Policy</1>.",{}).toString(),components:[(0,P.jsx)(v.rU,{href:E(t),size:"inherit",target:"_blank"}),(0,P.jsx)(v.rU,{href:D(t),size:"inherit",target:"_blank"})]})))},B=e=>{let{locale:t,onCheck:o,checked:n,isRaXLogin:r}=e;return(0,P.jsx)(a.Z,{textAlign:"center"},(0,P.jsx)(A.Z,{htmlFor:"input-acknowledged-legal-text"},(0,P.jsx)(v.xv,{size:"small",align:"center"},(0,P.jsx)(L.Z,{id:"input-acknowledged-legal-text",dangerouslySetClassName:M()["legal-text-checkbox"],type:"checkbox",required:!0,checked:n,onChange:e=>{o(e.currentTarget.checked)},text:r?(0,P.jsx)(y.Trans,{id:(0,i.ag)("By continuing, you agree to Yelpâs <0>Terms of Service</0> and acknowledge Yelpâs <1>Privacy Policy</1>, including Yelpâs cookie policy.",{}).toString(),components:[(0,P.jsx)(v.rU,{href:E(t),size:"inherit",target:"_blank"}),(0,P.jsx)(v.rU,{href:D(t),size:"inherit",target:"_blank"})]}):(0,P.jsx)(y.Trans,{id:(0,i.ag)("By continuing, I agree to Yelpâs <0>Terms of Service</0> and acknowledge Yelpâs <1>Privacy Policy</1>, including Yelpâs cookie policy.",{}).toString(),components:[(0,P.jsx)(v.rU,{href:E(t),size:"inherit",target:"_blank"}),(0,P.jsx)(v.rU,{href:D(t),size:"inherit",target:"_blank"})]})}))))};var N=o(174797),I=o(175327),F=o(437159),z=o(943661);const G=(e,t)=>({onAppleUnverifiedEmail:()=>{e({screen:t?"otpLogin":"login"},{type:"error",message:(0,P.jsx)(y.Trans,{id:(0,i.ag)("Oops! You need to have verified your email to log in with Apple. Please log in using your email and password.",{}).toString()})})},onFacebookUnverifiedEmail:()=>{e({screen:"login"},{type:"error",message:(0,P.jsx)(y.Trans,{id:(0,i.ag)("Oops! You need to have verified your email to log in with Facebook. Please log in using your email and password.",{}).toString()})})},onGoogleUnverifiedEmail:()=>{e({screen:t?"otpLogin":"login"},{type:"error",message:(0,P.jsx)(y.Trans,{id:(0,i.ag)("Oops! You need to have verified your email to log in with Google. Please log in using your email and password.",{}).toString()})})},onAppleMissingInformation:(t,o,n)=>{e({screen:"externalAuth",data:{provider:"apple",firstName:t.firstName,lastName:t.lastName,email:t.email,photoUrl:null,oneClickBody:o,showCaptcha:n}},n?{type:"warning",message:(0,P.jsx)(y.Trans,{id:(0,i.ag)("Are you a human? Please complete the bot challenge below.",{}).toString()})}:null)},onFacebookMissingInformation:(t,o,n)=>{e({screen:"externalAuth",data:{provider:"facebook",firstName:t.firstName,lastName:t.lastName,email:t.email,photoUrl:t.photoUrl,oneClickBody:o,showCaptcha:n}},n?{type:"warning",message:(0,P.jsx)(y.Trans,{id:(0,i.ag)("Are you a human? Please complete the bot challenge below.",{}).toString()})}:null)},onGoogleMissingInformation:(t,o,n)=>{e({screen:"externalAuth",data:{provider:"google",firstName:t.firstName,lastName:t.lastName,email:t.email,photoUrl:null,oneClickBody:o,showCaptcha:n}},n?{type:"warning",message:(0,P.jsx)(y.Trans,{id:(0,i.ag)("Are you a human? Please complete the bot challenge below.",{}).toString()})}:null)}});var H=o(105122),V=o(955621);const $=e=>{let t,o,n;if(e){const{ready:e,usingV2SDK:r,showOneTap:a,hideOneTap:i}=(0,V.ne)();t=Boolean(e&&r),o=a,n=i}else{const{ready:e,show:r,hide:a}=(0,H.jB)();o=r,n=a,t=e}return{oneTapReady:t,showOneTap:o,hideOneTap:n}},X=e=>{let{title:t,subtitle:o,locale:r,isGDPR:s,onSignupComplete:l,facebookOneClickCsrfToken:c,googleOneClickCsrfToken:d,appleOneClickCsrfToken:p,useGoogleApiV2:u,alert:g,onChangeScreen:h,showFacebookContinueAs:m,disableFacebookButton:f,showGoogleOneTap:b}=e;const{onAlert:j}=(0,N.V)(),{oneTapReady:T,showOneTap:S,hideOneTap:Z}=$(u),{isModernizedUI:_,showAppleButton:A,isOtpLoginFlow:L}=(0,x.P)(),{onFacebookUnverifiedEmail:R,onGoogleUnverifiedEmail:M,onAppleUnverifiedEmail:E,onFacebookMissingInformation:D,onGoogleMissingInformation:H,onAppleMissingInformation:V}=G(h,L),[X,Y]=(0,n.useState)(!1),q=!s||X;(0,n.useEffect)((()=>{window.userAuthModalTermsAcknowledged=q}),[q]);(0,n.useEffect)((()=>(T&&b&&S?.(),()=>{T&&b&&Z?.()})),[T,S,Z,b]);const W=_?{maxWidth:"400px",width:"100%",margin:"auto auto"}:{};return(0,P.jsx)(a.Z,{style:W,textAlign:"center"},(0,P.jsx)(O,{title:t,subtitle:o,alert:g,onDismissAlert:()=>{j(null)}},!s&&(0,P.jsx)(a.Z,{paddingTop:4,textAlign:"center"},(0,P.jsx)(U,{locale:r})),s&&(0,P.jsx)(a.Z,{paddingTop:4},(0,P.jsx)(B,{locale:r,checked:X,onCheck:e=>{Y(e)}}))),(0,P.jsx)(a.Z,null,(0,P.jsx)(w.Z,{type:"block",spacing:2},!f&&(0,P.jsx)(I.Z,{text:(0,i.ag)("Continue with Facebook"),termsAcknowledged:q,onUnverifiedEmail:R,onSignupComplete:l,onMissingInformation:D,facebookOneClickCsrfToken:c,continueAs:m}),(0,P.jsx)(F.Z,{text:(0,i.ag)("Continue with Google"),termsAcknowledged:q,onUnverifiedEmail:M,onSignupComplete:l,onMissingInformation:H,googleOneClickCsrfToken:d,useGoogleSignupApiV2:u,locale:r}),A&&!_&&(0,P.jsx)(z.Z,{text:(0,i.ag)("Continue with Apple"),termsAcknowledged:q,onSignupComplete:l,onUnverifiedEmail:E,appleOneClickCsrfToken:p,onMissingInformation:V}),(0,P.jsx)(C.Z,{full:!0,network:"email",onClick:()=>{h({screen:"emailSignup",data:{termsAcknowledged:q}})},text:(0,i.ag)("Continue with email")}))),(0,P.jsx)(a.Z,{paddingTop:4,textAlign:"center"},(0,P.jsx)(v.xv,{bold:!0,align:"center"},(0,P.jsx)(y.Trans,{id:(0,i.ag)("Already on Yelp? <0>Log in</0>",{}).toString(),components:[(0,P.jsx)(k.Z,{type:"link",onClick:e=>{e.preventDefault(),h({screen:"login"})}})]}))))};var Y=o(54198),q=o(752720),W=o(898448),K=o(109130),J=o(473550),Q=o.n(J),ee=o(480551),te=o(104942),oe=o.n(te);const ne=e=>{let{onChangeScreen:t,isMinFlow:o,isGDPR:r}=e;const a=(0,n.useContext)(j.default),{onAlert:i}=(0,N.V)(),{isPasswordlessLogin:s,showAppleButton:l,isOtpLoginFlow:c}=(0,x.P)(),{onFacebookUnverifiedEmail:d,onGoogleUnverifiedEmail:p,onAppleUnverifiedEmail:u,onFacebookMissingInformation:g,onGoogleMissingInformation:h,onAppleMissingInformation:m}=G(t,c),[f,y]=(0,n.useState)(!1);(0,n.useEffect)((()=>{window.userAuthModalTermsAcknowledged=!r||f}),[r,f]);return{theme:a,onFacebookUnverifiedEmail:d,onGoogleUnverifiedEmail:p,onAppleUnverifiedEmail:u,onFacebookMissingInformation:g,onGoogleMissingInformation:h,onAppleMissingInformation:m,termsChecked:f,onDismissAlert:()=>{i(null)},onTermsChecked:e=>{y(e)},onSignUpClicked:e=>{e.preventDefault(),t(o?{screen:"emailSignupMin",data:{termsAcknowledged:!1}}:{screen:"signup"})},onForgotPassword:()=>{t({screen:"forgotPassword",data:{isMinFlow:o}})},isPasswordlessLogin:s,showAppleButton:l,isOtpLoginFlow:c}},re=e=>{let{theme:t,onSignUpClicked:o}=e;return(0,P.jsx)(v.xv,{bold:!0,align:"center",size:t.v2_enabled?"large":void 0},(0,P.jsx)(y.Trans,{id:(0,i.ag)("New to Yelp? <0>Sign up</0>",{}).toString(),components:[(0,P.jsx)(k.Z,{type:"link",onClick:o})]}))},ae=e=>{let{title:t,subtitle:o,locale:r,isGDPR:s,onLogin:l,loginCsrfToken:c,forgotPasswordCsrfToken:d,magicLinkCsrfToken:p,facebookOneClickCsrfToken:u,googleOneClickCsrfToken:g,appleOneClickCsrfToken:h,useGoogleApiV2:m,alert:f,onChangeScreen:x,showFacebookContinueAs:y,disableFacebookButton:C,showGoogleOneTap:b,initialEmailValue:j,isRaXLogin:T,pslRedirectUrl:S}=e;const{theme:Z,onFacebookUnverifiedEmail:_,onGoogleUnverifiedEmail:A,onAppleMissingInformation:L,onFacebookMissingInformation:R,onGoogleMissingInformation:M,onAppleUnverifiedEmail:E,termsChecked:D,onDismissAlert:N,onTermsChecked:G,onSignUpClicked:H,onForgotPassword:V,isPasswordlessLogin:X,showAppleButton:Y,isOtpLoginFlow:q}=ne({onChangeScreen:x,isMinFlow:!1,isGDPR:s}),{oneTapReady:J,showOneTap:te,hideOneTap:ae}=$(m),[ie,se]=(0,n.useState)(q??!1);(0,n.useEffect)((()=>(J&&b&&te?.(),()=>{J&&b&&ae?.()})),[J,te,ae,b]);const le={emailLabel:(0,i.ag)("Email"),passwordLabel:(0,i.ag)("Password")};let ce=null;return T&&!ie||(ce=(0,P.jsx)(a.Z,{className:Q()({[oe()["login-overview--inputfields"]]:T}),paddingBottom:2},(0,P.jsx)(W.Z,{termsAcknowledged:!s||D,onLogin:l,onForgotPassword:V,loginCsrfToken:c,forgotPasswordCsrfToken:d,magicLinkCsrfToken:p,initialEmailValue:j,isRaXLogin:T,setContinueWithEmail:se,isPasswordlessLogin:X,pslRedirectUrl:S,inputTexts:le,onBackClicked:()=>x({screen:"otpLogin"})}))),(0,P.jsx)(a.Z,{className:Q()({[oe()["login-overview-container"]]:T})},(0,P.jsx)(O,{title:t,subtitle:o,alert:f,onDismissAlert:N,isRaXLogin:T,continueWithEmail:ie},!s&&(0,P.jsx)(a.Z,{paddingTop:T?2:4,textAlign:"center",className:Q()({[oe()["one-time-password-container"]]:q})},(0,P.jsx)(U,{locale:r,isRaXLogin:T})),s&&(0,P.jsx)(a.Z,{paddingTop:T?2:4},(0,P.jsx)(B,{locale:r,checked:D,onCheck:G,isRaXLogin:T}))),!ie&&(0,P.jsx)(a.Z,{className:Q()({[oe()["login-overview--inputfields"]]:T})},(0,P.jsx)(w.Z,{type:"block",spacing:2,noFinalBorder:!0},!C&&(0,P.jsx)(I.Z,{text:(0,i.ag)("Login with Facebook"),termsAcknowledged:!s||D,onUnverifiedEmail:_,onSignupComplete:l,onMissingInformation:R,facebookOneClickCsrfToken:u,continueAs:y}),(0,P.jsx)(F.Z,{text:(0,i.ag)("Login with Google"),termsAcknowledged:!s||D,onUnverifiedEmail:A,onSignupComplete:l,onMissingInformation:M,googleOneClickCsrfToken:g,useGoogleSignupApiV2:m,locale:r}),Y&&(0,P.jsx)(z.Z,{text:(0,i.ag)("Continue with Apple"),onSignupComplete:l,onUnverifiedEmail:E,appleOneClickCsrfToken:h,onMissingInformation:L,termsAcknowledged:!s||D})),T&&(0,P.jsx)(a.Z,{marginTop:3,textAlign:"center"},(0,P.jsx)(v.xv,{size:"large",align:"center"},(0,P.jsx)(k.Z,{type:"link",htmlButtonType:"button",onClick:()=>se(!0),text:(0,i.ag)("Continue with Email")})))),!T&&(Z.v2_enabled?(0,P.jsx)(K.Z,{text:(0,i.ag)("or")}):(0,P.jsx)(ee.Z,{text:(0,i.ag)("or")})),ce,!T&&(0,P.jsx)(a.Z,{paddingTop:4,textAlign:"center",borderTop:!0,marginTop:2},(0,P.jsx)(re,{theme:Z,onSignUpClicked:H})))},ie=e=>{let{locale:t,isGDPR:o,onLogin:n,loginCsrfToken:r,forgotPasswordCsrfToken:s,magicLinkCsrfToken:l,googleOneClickCsrfToken:c,appleOneClickCsrfToken:d,alert:p,onChangeScreen:u,initialEmailValue:h,useGoogleApiV2:m=!1}=e;const{theme:f,onGoogleUnverifiedEmail:x,onGoogleMissingInformation:C,onAppleUnverifiedEmail:k,onAppleMissingInformation:b,termsChecked:j,onDismissAlert:T,onTermsChecked:S,onSignUpClicked:Z,onForgotPassword:_,isPasswordlessLogin:O,showAppleButton:A}=ne({onChangeScreen:u,isMinFlow:!0,isGDPR:o}),L={emailLabel:(0,i.ag)("Email Address"),emailPlaceholder:(0,i.ag)("Email Address"),passwordLabel:(0,i.ag)("Password"),passwordPlaceholder:(0,i.ag)("Password")};return(0,P.jsx)(a.Z,{paddingTop:1,marginTop:5},p&&(0,P.jsx)(a.Z,{marginBottom:3,textAlign:"left"},(0,P.jsx)(g.Z,{type:p.type,dismissCallback:T},p.message)),(0,P.jsx)(a.Z,{paddingBottom:2},(0,P.jsx)(v.X6,{level:5},(0,P.jsx)(y.Trans,{id:(0,i.ag)("Enter your email and password to log in",{}).toString()}))),(0,P.jsx)(a.Z,{paddingBottom:2},(0,P.jsx)(W.Z,{termsAcknowledged:!o||j,onLogin:n,onForgotPassword:_,loginCsrfToken:r,forgotPasswordCsrfToken:s,magicLinkCsrfToken:l,initialEmailValue:h,inputTexts:L,isPasswordlessLogin:O})),(0,P.jsx)(a.Z,{borderTop:!0,paddingTop:3,marginTop:1},(0,P.jsx)(w.Z,{useLegacyMargin:!0,type:"block",spacing:2},(0,P.jsx)(F.Z,{termsAcknowledged:!o||j,text:(0,i.ag)("Login with Google"),onUnverifiedEmail:x,onSignupComplete:n,onMissingInformation:C,googleOneClickCsrfToken:c,useGoogleSignupApiV2:m,locale:t}),A&&(0,P.jsx)(z.Z,{text:(0,i.ag)("Continue with Apple"),onSignupComplete:n,onUnverifiedEmail:k,onMissingInformation:b,appleOneClickCsrfToken:d,termsAcknowledged:!o||j}))),(0,P.jsx)(a.Z,{paddingTop:1.5,textAlign:"center"},(0,P.jsx)(re,{theme:f,onSignUpClicked:Z})),!o&&(0,P.jsx)(a.Z,{paddingTop:2,textAlign:"center"},(0,P.jsx)(U,{locale:t})),o&&(0,P.jsx)(a.Z,{paddingTop:2},(0,P.jsx)(B,{locale:t,checked:j,onCheck:S})))};var se=o(618639),le=o(478056),ce=o(533262);function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},de.apply(this,arguments)}const pe=e=>{let{isGDPR:t,isRaXLogin:o,locale:n,onChangeScreen:a}=e;const{termsChecked:i,onTermsChecked:s,isOtpLoginFlow:l}=ne({onChangeScreen:a,isMinFlow:!1,isGDPR:t}),c=o?2:4,d=l?{paddingBottom:c}:{paddingTop:c},p=o?2:3,u=l?{paddingBottom:p}:{paddingTop:p};return(0,P.jsx)(r().Fragment,null,!t&&(0,P.jsx)(se.Z,de({},d,{textAlign:"center"}),(0,P.jsx)(U,{locale:n,isRaXLogin:o})),t&&(0,P.jsx)(se.Z,u,(0,P.jsx)(B,{locale:n,checked:i,onCheck:s,isRaXLogin:o})))},ue=e=>{let{title:t,subtitle:o,locale:a,isGDPR:s,onLogin:l,loginCsrfToken:c,forgotPasswordCsrfToken:d,magicLinkCsrfToken:p,googleOneClickCsrfToken:u,appleOneClickCsrfToken:g,useGoogleApiV2:h,alert:m,onChangeScreen:f,showGoogleOneTap:x,initialEmailValue:C,isRaXLogin:b,pslRedirectUrl:j}=e;const{onGoogleUnverifiedEmail:T,onGoogleMissingInformation:S,onAppleUnverifiedEmail:Z,onAppleMissingInformation:_,termsChecked:A,onDismissAlert:L,onSignUpClicked:R,onForgotPassword:M,isPasswordlessLogin:E,showAppleButton:D,isOtpLoginFlow:U}=ne({onChangeScreen:f,isMinFlow:!1,isGDPR:s}),{oneTapReady:B,showOneTap:N,hideOneTap:I}=$(h);(0,n.useEffect)((()=>(B&&x&&N?.(),()=>{B&&x&&I?.()})),[B,N,I,x]);const G={emailLabel:(0,i.ag)("Email"),passwordLabel:(0,i.ag)("Password")},H=(0,P.jsx)(se.Z,{style:{width:"100%"}},(0,P.jsx)(W.Z,{termsAcknowledged:!s||A,onLogin:l,onForgotPassword:M,loginCsrfToken:c,forgotPasswordCsrfToken:d,magicLinkCsrfToken:p,initialEmailValue:C,isRaXLogin:b,isPasswordlessLogin:E,pslRedirectUrl:j,inputTexts:G,onBackClicked:()=>f({screen:"otpLogin"})}));return(0,P.jsx)(r().Fragment,null,(0,P.jsx)(O,{title:t,subtitle:o,alert:m,onDismissAlert:L,isRaXLogin:b}),(0,P.jsx)(le.Z,{direction:"column",alignItems:"center",css:(0,Y.Z)([ce.iv`
                        max-width: 400px;
                        width: 100%;
                        margin: ${(0,q.r$)(3)}px auto;
                    `],"")},U&&(0,P.jsx)(pe,{isGDPR:s,isRaXLogin:b,locale:a,onChangeScreen:f}),H,!U&&(0,P.jsx)(pe,{isGDPR:s,isRaXLogin:b,locale:a,onChangeScreen:f}),!U&&(0,P.jsx)(r().Fragment,null,(0,P.jsx)(K.Z,{text:(0,i.ag)("or")}),(0,P.jsx)(se.Z,{width:"100%",paddingBottom:2},(0,P.jsx)(w.Z,{type:"block",spacing:2},(0,P.jsx)(F.Z,{text:(0,i.ag)("Continue with Google"),onUnverifiedEmail:T,onSignupComplete:l,onMissingInformation:S,useGoogleSignupApiV2:h,googleOneClickCsrfToken:u,termsAcknowledged:!s||A,locale:a}),D&&(0,P.jsx)(z.Z,{text:(0,i.ag)("Continue with Apple"),onSignupComplete:l,onUnverifiedEmail:Z,appleOneClickCsrfToken:g,onMissingInformation:_,termsAcknowledged:!s||A})))),!b&&!U&&(0,P.jsx)(se.Z,{paddingTop:1,textAlign:"center"},(0,P.jsx)(y.Trans,{id:(0,i.ag)("<0>Donât have a Yelp account? </0><1/>",{}).toString(),components:[(0,P.jsx)(v.xv,{color:"black-light",inline:!0}),(0,P.jsx)(k.Z,{type:"link",size:"standard",onClick:R,text:(0,i.ag)("Sign up")})]}))))};var ge=o(873734),he=o(988617),me=o(43817),fe=o(460533);const xe=e=>{let{title:t,emailValue:o="",isGDPR:r,googleOneClickCsrfToken:s,appleOneClickCsrfToken:l,locale:c,onLogin:d,onChangeScreen:u,alert:h,setAlert:m,sendOtpOnLoad:f}=e;const{onGoogleUnverifiedEmail:x,onGoogleMissingInformation:C,onAppleUnverifiedEmail:b,onAppleMissingInformation:j,termsChecked:T,showAppleButton:S}=ne({onChangeScreen:u,isMinFlow:!1,isGDPR:r}),[Z,_]=(0,n.useState)(!1),[O,A]=(0,n.useState)(!1),[R,M]=(0,n.useState)(""),[E,D]=(0,n.useState)(""),U=(0,n.useRef)(null),[B]=(0,p.Db)(fe.XN),[N]=(0,p.Db)(fe.N$),I=()=>{m({type:"error",message:(0,P.jsx)(y.Trans,{id:(0,i.ag)("<0>There was a problem sending a login code to %{emailValue}.</0>Please try again.",{emailValue:o}).toString(),components:[(0,P.jsx)(v.xv,{bold:!0,size:"inherit"})]})})},G=async function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&_(!0);try{const t=await B({variables:{email:o,flow:"login"}}),{isSuccess:n,error:r}=t?.data?.sendOtpByEmail;"RATE_LIMITED"===r?m({type:"error",message:(0,P.jsx)(y.Trans,{id:(0,i.ag)("<0>Code requested too many times.</0>Please try again in 10 minutes.",{}).toString(),components:[(0,P.jsx)(v.xv,{bold:!0,size:"inherit"})]})}):r?I():e&&n&&m({type:"success",message:(0,P.jsx)(y.Trans,{id:(0,i.ag)("<0>Code sent to %{emailValue}.</0>Verify your email to continue.",{emailValue:o}).toString(),components:[(0,P.jsx)(v.xv,{bold:!0,size:"inherit"})]})})}catch(e){(0,he.Z)(e),I()}finally{_(!1)}};(0,n.useEffect)((()=>{!0===f.current&&(f.current=!1,G(!1))}),[]);return(0,P.jsx)(a.Z,{marginTopSm:1,marginTop:6,textAlign:"center"},h&&(0,P.jsx)(a.Z,{marginBottom:3,textAlign:"left"},(0,P.jsx)(g.Z,{type:h.type,priority:"high"},h.message)),(0,P.jsx)(v.X6,{level:3},t),(0,P.jsx)(a.Z,{marginTop:1.5,marginBottom:2},(0,P.jsx)(v.xv,{align:"center",inline:!0},(0,i.ag)("We sent a 6-digit code to your email ")),(0,P.jsx)(v.xv,{align:"center",bold:!0,inline:!0},o,"."),(0,P.jsx)(v.xv,{align:"center"},(0,i.ag)("Please enter it to log in."))),(0,P.jsx)(ge.Z,{onSubmit:async e=>{if(e.preventDefault(),D(""),6===R.length)try{A(!0);const e=await N({variables:{email:o,code:R}}),{authToken:t,error:n}=e?.data?.loginByOTP;if(t)d();else{if("INVALID_TOKEN"!==n)throw new Error(`Login by OTP failed. Error retunred by loginByOTP: ${n}`);D((0,i.ag)("The code you entered is incorrect"))}}catch(e){(0,he.Z)(e),D((0,i.ag)("Oops, something went wrong. Please try again."))}finally{A(!1)}else D((0,i.ag)("Please enter 6 digits"))},className:oe()["one-time-password-container"]},(0,P.jsx)(a.Z,{marginTop:1.5,className:me.J,textAlign:"left"},(0,P.jsx)(L.Z,{type:"text",label:(0,i.ag)("Six-digit code"),placeholder:"######",noMargin:!0,onChange:e=>{const t=e.currentTarget.value;/(^$|^[0-9]{1,6}$)/.test(t)&&M(t)},value:R,validationStateType:""!==E?"error":null,validationStateText:E,required:!0,tagRef:U,inputMode:"numeric"})),(0,P.jsx)(a.Z,{marginTop:1.5},(0,P.jsx)(k.Z,{full:!0,type:"primary",htmlButtonType:"submit",text:(0,i.ag)("Verify"),isLoading:O,size:"standard"})),(0,P.jsx)(a.Z,{marginTop:1.5},(0,P.jsx)(k.Z,{full:!0,type:"secondary-white",isLoading:Z,text:(0,i.ag)("Resend code"),onClick:e=>{e?.preventDefault(),M(""),m(null),D(""),G()}})),(0,P.jsx)(a.Z,{className:oe()["one-time-password-container"]},(0,P.jsx)(K.Z,{text:"or"})),(0,P.jsx)(w.Z,{type:"block",spacing:2},(0,P.jsx)(F.Z,{text:(0,i.ag)("Continue with Google"),onUnverifiedEmail:x,onSignupComplete:d,onMissingInformation:C,useGoogleSignupApiV2:!0,googleOneClickCsrfToken:s,termsAcknowledged:!r||T,locale:c}),S&&(0,P.jsx)(z.Z,{text:(0,i.ag)("Continue with Apple"),onSignupComplete:d,onUnverifiedEmail:b,appleOneClickCsrfToken:l,onMissingInformation:j,termsAcknowledged:!r||T})),(0,P.jsx)(a.Z,{marginTop:1.5,marginBottom:1.5},(0,P.jsx)(k.Z,{full:!0,type:"link",text:(0,i.ag)("Log in with password"),onClick:e=>{e?.preventDefault(),u({screen:"login"})}}))))};var ye=o(799880);const we=d.ZP`
    query GetUserLocationFromIpAddress {
        remoteRequestLocation {
            zip
        }
    }
`,ve=e=>{let{context:t,onChangeScreen:o,isMinFlow:r,isGDPR:a}=e;const{onAlert:s}=(0,N.V)(),[l,c]=(0,n.useState)(t.termsAcknowledged),[d,u]=(0,n.useState)("");(0,n.useEffect)((()=>{window.userAuthModalTermsAcknowledged=!a||l}),[a,l]);const g=r?"loginMin":"login",{isModernizedUI:h,showAppleButton:f,isOtpLoginFlow:w,prefillZipCode:v}=(0,x.P)();return(0,p.aM)(we,{onCompleted:e=>{const t=e?.remoteRequestLocation;t?.zip&&u(t.zip)},onError:e=>{(0,he.Z)(m()(e))},skip:!v}),{termsChecked:l,onDismissAlert:()=>{s(null)},onLogInClick:e=>{e.preventDefault(),o({screen:g})},onTermsChecked:e=>{c(e)},onAlreadyRegistered:()=>{o({screen:g},{type:"error",message:(0,P.jsx)(y.Trans,{id:(0,i.ag)("The email address you entered has already been registered.",{}).toString()})})},isModernizedUI:h,showAppleButton:f,isOtpLoginFlow:w,inferredZipCode:d}},Ce=e=>{let{context:t={termsAcknowledged:!1},locale:o,isGDPR:n,signupCsrfToken:r,alert:s,onChangeScreen:l,defaultShowCaptcha:c=!1}=e;const{termsChecked:d,onDismissAlert:p,onLogInClick:u,onTermsChecked:h,onAlreadyRegistered:m,isModernizedUI:f,inferredZipCode:x}=ve({context:t,onChangeScreen:l,isMinFlow:!1,isGDPR:n}),w=f?{maxWidth:"400px",width:"100%",margin:"0 auto"}:{};return(0,P.jsx)(a.Z,{style:w},s&&(0,P.jsx)(a.Z,{marginBottom:1},(0,P.jsx)(g.Z,{type:s.type,dismissCallback:p},s.message)),(0,P.jsx)(a.Z,{textAlign:"center",paddingTop:2,paddingBottom:2},(0,P.jsx)(v.X6,{level:2,alternate:!0},(0,P.jsx)(y.Trans,{id:(0,i.ag)("Sign up for Yelp",{}).toString()}))),n?(0,P.jsx)(a.Z,{paddingBottom:2},(0,P.jsx)(B,{locale:o,checked:d,onCheck:h})):(0,P.jsx)(a.Z,{paddingBottom:3,textAlign:"center"},(0,P.jsx)(U,{locale:o})),(0,P.jsx)(a.Z,{paddingBottom:2},(0,P.jsx)(ye.Z,{onSignup:e=>{let{firstName:t}=e;l({screen:"personalizeAccount",data:{firstName:t}})},onAlreadyRegistered:m,signupCsrfToken:r,termsAcknowledged:!n||d,locale:o,isGDPR:n,prefilledFields:{zipCode:x},defaultShowCaptcha:c})),(0,P.jsx)(a.Z,{paddingTop:4,textAlign:"center",borderTop:!0,marginTop:3},(0,P.jsx)(v.xv,{bold:!0,align:"center"},(0,P.jsx)(y.Trans,{id:(0,i.ag)("Already on Yelp? <0>Log in</0>",{}).toString(),components:[(0,P.jsx)(k.Z,{type:"link",onClick:u})]}))))},ke=e=>{let{context:t={termsAcknowledged:!1},locale:o,isGDPR:n,signupCsrfToken:r,googleOneClickCsrfToken:s,appleOneClickCsrfToken:l,alert:c,onChangeScreen:d,onComplete:p,defaultShowCaptcha:u=!1,useGoogleApiV2:h=!1}=e;const{termsChecked:m,onDismissAlert:f,onLogInClick:x,onTermsChecked:C,onAlreadyRegistered:b,isModernizedUI:j,showAppleButton:T,isOtpLoginFlow:S,inferredZipCode:Z}=ve({context:t,onChangeScreen:d,isMinFlow:!0,isGDPR:n}),{onGoogleUnverifiedEmail:_,onGoogleMissingInformation:O,onAppleUnverifiedEmail:A,onAppleMissingInformation:L}=G(d,S);return(0,P.jsx)(a.Z,{marginTop:5},c&&(0,P.jsx)(a.Z,{paddingTop:1,marginBottom:3},(0,P.jsx)(g.Z,{type:c.type,dismissCallback:f},c.message)),(0,P.jsx)(a.Z,{paddingBottom:2.5},(0,P.jsx)(v.X6,{level:5},(0,P.jsx)(y.Trans,{id:(0,i.ag)("Sign up for Yelp",{}).toString()}))),(0,P.jsx)(a.Z,{paddingBottom:2},(0,P.jsx)(ye.Z,{onSignup:p,onAlreadyRegistered:b,signupCsrfToken:r,termsAcknowledged:!n||m,locale:o,isGDPR:n,prefilledFields:{zipCode:Z},defaultShowCaptcha:u,showMinVersion:!0})),(0,P.jsx)(a.Z,{paddingTop:3,textAlign:"center",borderTop:!0,marginTop:1},(0,P.jsx)(w.Z,{useLegacyMargin:!0,type:"block",spacing:2},(0,P.jsx)(F.Z,{text:(0,i.ag)("Continue with Google"),termsAcknowledged:!n||m,onUnverifiedEmail:_,onSignupComplete:p,onMissingInformation:O,googleOneClickCsrfToken:s,useGoogleSignupApiV2:h,locale:o}),T&&!j&&(0,P.jsx)(z.Z,{text:(0,i.ag)("Continue with Apple"),termsAcknowledged:!n||m,appleOneClickCsrfToken:l,onSignupComplete:p,onUnverifiedEmail:A,onMissingInformation:L}))),(0,P.jsx)(a.Z,{paddingTop:1.5,textAlign:"center"},(0,P.jsx)(v.xv,{align:"center"},(0,P.jsx)(y.Trans,{id:(0,i.ag)("Already on Yelp? <0>Log in</0>",{}).toString(),components:[(0,P.jsx)(k.Z,{type:"link",onClick:x})]}))),n?(0,P.jsx)(a.Z,{paddingTop:4},(0,P.jsx)(B,{locale:o,checked:m,onCheck:C})):(0,P.jsx)(a.Z,{paddingTop:4,textAlign:"center"},(0,P.jsx)(U,{locale:o})))};var be=o(400787);const je=e=>{let{forgotPasswordCsrfToken:t,alert:o,onChangeScreen:n,context:r={isMinFlow:!1}}=e;const{onAlert:s}=(0,N.V)();return(0,P.jsx)(a.Z,null,o&&(0,P.jsx)(a.Z,{marginBottom:1},(0,P.jsx)(g.Z,{type:o.type,dismissCallback:()=>{s(null)}},o.message)),(0,P.jsx)(a.Z,{textAlign:"center",paddingTop:2,paddingBottom:2},(0,P.jsx)(v.X6,{level:2,alternate:!0},(0,P.jsx)(y.Trans,{id:(0,i.ag)("Forgot Password",{}).toString()}))),(0,P.jsx)(a.Z,{marginBottom:2},(0,P.jsx)(v.xv,null,(0,P.jsx)(y.Trans,{id:(0,i.ag)("Please enter your email address and we will send you an email about how to reset your password.",{}).toString()}))),(0,P.jsx)(a.Z,{paddingBottom:2},(0,P.jsx)(be.Z,{forgotPasswordCsrfToken:t,onPasswordReset:e=>{n({screen:"login"},{type:"success",message:(0,P.jsx)(y.Trans,{id:(0,i.ag)("You will receive a message at <0>%{emailAddress}</0> if youâve registered your account with that email address. Please check for an email from Yelp and click on the included link to reset your password.",{emailAddress:e}).toString(),components:[(0,P.jsx)(v.xv,{inline:!0,bold:!0,size:"inherit"})]})})}})),(0,P.jsx)(a.Z,{paddingTop:4,textAlign:"center",borderTop:!0,marginTop:3},(0,P.jsx)(v.xv,{bold:!0,align:"center"},(0,P.jsx)(k.Z,{type:"link",onClick:e=>{e.preventDefault(),n({screen:r.isMinFlow?"loginMin":"login"})}},(0,P.jsx)(y.Trans,{id:(0,i.ag)("Back to Login",{}).toString()})))))};var Te=o(608930);const Se=e=>{let{context:t,onComplete:o,alert:r,personalizeAccountCsrfToken:s,profilePhotoUploadCsrfToken:l,profilePhotoChangeCsrfToken:c,facebookPhotoUploadCsrfToken:d}=e;const p=(0,n.useContext)(j.default),{onAlert:u}=(0,N.V)();return(0,P.jsx)(a.Z,null,r&&(0,P.jsx)(a.Z,{marginBottom:1},(0,P.jsx)(g.Z,{type:r.type,dismissCallback:()=>{u(null)}},r.message)),(0,P.jsx)(a.Z,{textAlign:"center",paddingTop:p.v2_enabled?4:2,paddingBottom:4},(0,P.jsx)(v.X6,{level:p.v2_enabled?3:2,alternate:!0},(0,P.jsx)(y.Trans,{id:(0,i.ag)("Welcome to Yelp, %{0}!",{0:t.firstName}).toString()})),(0,P.jsx)(v.xv,{align:"center"},(0,P.jsx)(y.Trans,{id:(0,i.ag)("Personalize your account details below",{}).toString()}))),(0,P.jsx)(a.Z,null,(0,P.jsx)(Te.Z,{onPersonalizeAccount:o,onSkip:o,personalizeAccountCsrfToken:s,profilePhotoUploadCsrfToken:l,profilePhotoChangeCsrfToken:c,facebookPhotoUploadCsrfToken:d})))};var Ze=o(866976),_e=o(276865),Pe=o(69335),Oe=o.n(Pe);const Ae=e=>{let{context:t,locale:o,onComplete:r,onChangeScreen:s,alert:l,facebookOneClickCsrfToken:c,googleOneClickCsrfToken:d}=e;const p=(0,n.useContext)(j.default),{provider:u,firstName:h,lastName:m,email:f,photoUrl:x,oneClickBody:w,showCaptcha:C}=t,{onAlert:k}=(0,N.V)();return(0,P.jsx)(a.Z,null,l&&(0,P.jsx)(a.Z,{marginBottom:1},(0,P.jsx)(g.Z,{type:l.type,dismissCallback:()=>{k(null)}},l.message)),(0,P.jsx)(a.Z,{textAlign:"center",paddingTop:p.v2_enabled?4:2,paddingBottom:4},(0,P.jsx)(v.X6,{level:2,alternate:!0},h?(0,P.jsx)(y.Trans,{id:(0,i.ag)("Welcome to Yelp, %{firstName}!",{firstName:h}).toString()}):(0,P.jsx)(y.Trans,{id:(0,i.ag)("Welcome to Yelp!",{}).toString()})),(0,P.jsx)(v.xv,{align:"center"},(0,P.jsx)(y.Trans,{id:(0,i.ag)("Complete this step to create your account.",{}).toString()}))),(0,P.jsx)(a.Z,{marginBottom:4,textAlign:"center"},(0,P.jsx)(a.Z,{className:Oe()["photo-box-center"]},(0,P.jsx)(Ze.Z,{src:x||void 0,size:p.v2_enabled?"xlarge":"large"}))),(0,P.jsx)(a.Z,null,(0,P.jsx)(_e.Z,{provider:u,locale:o,externalFirstName:h,externalLastName:m,externalEmail:f,oneClickBody:w,onAlreadyRegistered:()=>{s({screen:"login"},{type:"error",message:(0,P.jsx)(y.Trans,{id:(0,i.ag)("The email address you entered has already been registered.",{}).toString()})})},onSignup:r,defaultShowCaptcha:C,facebookOneClickCsrfToken:c,googleOneClickCsrfToken:d})))};var Le=o(84198),Re=o(626209),Me=o(27176),Ee=o(247834),De=o(602256),Ue=o(696792),Be=(o(961881),o(852996)),Ne=o(566745);const Ie=e=>{let{children:t,enabled:o,...n}=e;return o?(0,P.jsx)(Ne.zM,n,t):(0,P.jsx)(r().Fragment,null,t)};function Fe(){return Fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},Fe.apply(this,arguments)}const ze=e=>{let{initialScreen:t,title:o=(0,i.ag)("Youâre almost done!"),subtitle:l,loginTitle:d,loginSubtitle:p,signupTitle:u,signupSubtitle:g,locale:h,visible:m,onClose:f,isGDPR:y,onAuth:w,loginCsrfToken:v,signupCsrfToken:C,forgotPasswordCsrfToken:k,magicLinkCsrfToken:b,personalizeAccountCsrfToken:j,profilePhotoUploadCsrfToken:T,profilePhotoChangeCsrfToken:S,facebookPhotoUploadCsrfToken:Z,facebookOneClickCsrfToken:_,disableFacebookButton:O,appleOneClickCsrfToken:A,googleOneClickUrl:L=Ue.UT,googleOneClickCsrfToken:R,useGoogleApiV2:M=!1,showFacebookContinueAs:E=!1,showGoogleOneTap:D=!1,initialEmailValue:U="",displayModal:B=!0,fullscreenModal:I=!1,isRaXLogin:F,pslRedirectUrl:z}=e;const[$,Y]=(0,n.useState)(null),{isModernizedUI:q,isPasswordlessLogin:W,showAppleButton:K,isOtpLoginFlow:J}=(0,x.P)(),[Q,ee]=(0,n.useState)({screen:t}),te=(0,n.useRef)(!0),oe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;ee(e),Y(t)},ne=e=>{Y(e)},re=()=>{"personalizeAccount"===Q.screen?w():f()},{onGoogleUnverifiedEmail:se,onGoogleMissingInformation:le}=G(oe,J),{onAuth:ce}=(0,Be.Z)({onSignupComplete:w,onMissingInformation:le,onUnverifiedEmail:se,onAlert:ne,googleOneClickCsrfToken:R,googleOneClickUrl:L,termsAcknowledged:()=>window.userAuthModalTermsAcknowledged});let de;if("login"===Q.screen){const e={title:d||o,subtitle:p||l,locale:h,isGDPR:y,onLogin:w,loginCsrfToken:v,forgotPasswordCsrfToken:k,magicLinkCsrfToken:b,facebookOneClickCsrfToken:_,googleOneClickCsrfToken:R,appleOneClickCsrfToken:A,useGoogleApiV2:M,alert:$,onChangeScreen:oe,showFacebookContinueAs:E,disableFacebookButton:O,showGoogleOneTap:D,initialEmailValue:U,isRaXLogin:F,isPasswordlessLogin:W,pslRedirectUrl:z};de=q?(0,P.jsx)(ue,e):(0,P.jsx)(ae,e)}else"otpLogin"===Q.screen?de=(0,P.jsx)(xe,{title:o,emailValue:U,isGDPR:y,googleOneClickCsrfToken:R,appleOneClickCsrfToken:A,locale:h,onLogin:w,onChangeScreen:oe,alert:$,setAlert:ne,sendOtpOnLoad:te}):"loginMin"===Q.screen?de=(0,P.jsx)(ie,{locale:h,isGDPR:y,onLogin:w,loginCsrfToken:v,forgotPasswordCsrfToken:k,magicLinkCsrfToken:b,googleOneClickCsrfToken:R,appleOneClickCsrfToken:A,useGoogleApiV2:M,alert:$,onChangeScreen:oe,initialEmailValue:U}):"signup"===Q.screen?de=(0,P.jsx)(X,{title:u||o,subtitle:g||l,locale:h,isGDPR:y,onSignupComplete:w,facebookOneClickCsrfToken:_,googleOneClickCsrfToken:R,appleOneClickCsrfToken:A,disableFacebookButton:O,useGoogleApiV2:M,alert:$,onChangeScreen:oe,showFacebookContinueAs:E,showGoogleOneTap:D}):"emailSignup"===Q.screen?de=(0,P.jsx)(Ce,{context:Q.data,locale:h,isGDPR:y,signupCsrfToken:C,alert:$,onChangeScreen:oe}):"emailSignupMin"===Q.screen?de=(0,P.jsx)(ke,{context:Q.data,locale:h,isGDPR:y,signupCsrfToken:C,alert:$,onChangeScreen:oe,onComplete:w,googleOneClickCsrfToken:R,useGoogleApiV2:M,appleOneClickCsrfToken:A}):"forgotPassword"===Q.screen?de=(0,P.jsx)(je,{context:Q.data,forgotPasswordCsrfToken:k,alert:$,onChangeScreen:oe}):"personalizeAccount"===Q.screen?de=(0,P.jsx)(Se,{context:Q.data,onComplete:w,personalizeAccountCsrfToken:j,profilePhotoUploadCsrfToken:T,profilePhotoChangeCsrfToken:S,facebookPhotoUploadCsrfToken:Z,alert:$}):"externalAuth"===Q.screen?de=(0,P.jsx)(Ae,{context:Q.data,locale:h,onComplete:w,facebookOneClickCsrfToken:_,googleOneClickCsrfToken:R,onChangeScreen:oe,alert:$}):"oneTap"===Q.screen?de=null:c()(!0,`Invalid UserAuthModal screen: ${Q.screen}`);let pe=null;if(de){const e=(0,P.jsx)(a.Z,null,de);pe=B?(0,P.jsx)(s.w,{reserveTitleSpacing:!1,visible:m,onClose:re,size:q?"large":"small",fullscreen:q||I},m&&e):e}return(0,P.jsx)(N.h,{onAlert:ne},(0,P.jsx)(Ie,{enabled:K,locale:h,guv:"undefined"!=typeof window&&window.yelp?.guv||"user-guv",userAccountType:"consumer",redirectURI:"undefined"!=typeof window?`https://${window.location.hostname}`:void 0,state:A},(0,P.jsx)(Ee.E8,null,(0,P.jsx)(V.AT,{useGoogleSignupApiV2:M,onAuth:ce,isGDPR:y,allowReload:!0,showOneTapOnload:"oneTap"===Q.screen},(0,P.jsx)(Me.Ag,null,(0,P.jsx)(Re.rh,null,M?(0,P.jsx)(r().Fragment,null,pe):(0,P.jsx)(H.Rq,{locale:h,onAuth:ce,showOnLoad:"oneTap"===Q.screen},pe)))))))},Ge=d.ZP`
    query GetUserAuthModalData($countryCode: String) {
        country(code: $countryCode) {
            gdprCompliant
        }

        csrfTokenLogin: csrfToken(scope: "/login")
        csrfTokenSignup: csrfToken(scope: "/signup")
        csrfTokenForgotPassword: csrfToken(scope: "/forgot/ajax")
        csrfTokenMagicLink: csrfToken(scope: "/login/magic")
        csrfTokenPersonalizeAccount: csrfToken(scope: "/signup/extra")
        csrfTokenProfilePhotoUpload: csrfToken(scope: "signup_photo_upload")
        csrfTokenProfilePhotoChange: csrfToken(scope: "signup_photo_change")
        csrfTokenFacebookPhotoUpload: csrfToken(scope: "signup_fb_photo_upload")
        csrfTokenFacebookOneClick: csrfToken(scope: "/signup/one_click_facebook")
        csrfTokenGoogleOneClick: csrfToken(scope: "/signup/one_click_google")
        csrfTokenAppleOneClick: csrfToken(scope: "/signup/one_click_apple")
    }
`,He=e=>{let{locale:t,visible:o,onClose:r,initialScreen:i,displayModal:l=!0,fullscreenModal:c=!1,isModernizedUI:d=!1,isPasswordlessLogin:h=!1,showAppleButton:y=!1,prefillZipCode:w=!1,...v}=e;const{loading:C,error:k,data:b}=(0,p.aM)(Ge,{variables:{countryCode:(0,Le.EB)(t)}}),{onUserAuthChange:j,isUserLoggedIn:T}=(0,f.Ii)(),[S,Z]=(0,n.useState)(!1),{onAuth:_}=v;(0,n.useEffect)((()=>{o&&T&&!S&&(_(),Z(!0))}),[o,T,_,S]);if((k||C||!b)&&"oneTap"===i)return null;if(k){(0,he.Z)(m()(k));const e=(0,P.jsx)(a.Z,{style:{minHeight:"300px"}},(0,P.jsx)(g.Z,{type:"error"},(0,P.jsx)(De.Z,null)));return l?(0,P.jsx)(s.w,{reserveTitleSpacing:!1,visible:o,onClose:r,size:d?"large":"small",fullscreen:d||c},e):e}if(C||!b){const e=(0,P.jsx)(u.Z,{isLoading:!0},(0,P.jsx)(a.Z,{style:{minHeight:"300px"}}));return l?(0,P.jsx)(s.w,{reserveTitleSpacing:!1,visible:o,onClose:r,size:d?"large":"small",fullscreen:d||c},e):e}return(0,P.jsx)(x.$,{isModernizedUI:d,isPasswordlessLogin:h,isOtpLoginFlow:"otpLogin"===i,showAppleButton:y,prefillZipCode:w},(0,P.jsx)(ze,Fe({},v,{onAuth:async()=>{j(!0),Z(!0),v.onAuth()},isGDPR:b.country.gdprCompliant,initialScreen:i,locale:t,visible:o,onClose:r,displayModal:l,fullscreenModal:c,loginCsrfToken:b.csrfTokenLogin,signupCsrfToken:b.csrfTokenSignup,forgotPasswordCsrfToken:b.csrfTokenForgotPassword,magicLinkCsrfToken:b.csrfTokenMagicLink,personalizeAccountCsrfToken:b.csrfTokenPersonalizeAccount,profilePhotoUploadCsrfToken:b.csrfTokenProfilePhotoUpload,profilePhotoChangeCsrfToken:b.csrfTokenProfilePhotoChange,facebookPhotoUploadCsrfToken:b.csrfTokenFacebookPhotoUpload,facebookOneClickCsrfToken:b.csrfTokenFacebookOneClick,googleOneClickCsrfToken:b.csrfTokenGoogleOneClick,appleOneClickCsrfToken:b.csrfTokenAppleOneClick,disableFacebookButton:!0})))}},43491:(e,t,o)=>{"use strict";o.d(t,{$:()=>s,P:()=>l});var n=o(87363),r=o.n(n),a=o(894320);const i=r().createContext({isModernizedUI:!1,isPasswordlessLogin:!1,showAppleButton:!1,isOtpLoginFlow:!1,prefillZipCode:!1}),s=e=>{let{isModernizedUI:t,isPasswordlessLogin:o,showAppleButton:n,isOtpLoginFlow:r,prefillZipCode:s,children:l}=e;const c={isModernizedUI:t,isPasswordlessLogin:o,showAppleButton:n,isOtpLoginFlow:r,prefillZipCode:s};return(0,a.jsx)(i.Provider,{value:c}," ",l," ")};function l(){const e=r().useContext(i);if(!e)throw new Error("useUserAuthContext must be used within a TreeProvider");return e}},654647:(e,t,o)=>{"use strict";o.d(t,{Z:()=>n});const n=o(596795).ZP},847377:(e,t,o)=>{"use strict";o.d(t,{DI:()=>c,E3:()=>l,I0:()=>n,IR:()=>u,Om:()=>d,Qo:()=>i,Uv:()=>s,gO:()=>a,o9:()=>p,to:()=>r,vM:()=>g});const n="topRight",r="topLeft",a="bottomRight",i="bottomLeft",s="google_one_tap_parent",l="fixed",c="auto",d="auto",p="9999",u="20px",g="https://accounts.google.com/gsi/client"},105122:(e,t,o)=>{"use strict";o.d(t,{Rq:()=>h,a7:()=>u,jB:()=>m});var n=o(87363),r=o.n(n),a=o(182145),i=o(882189),s=o(84198),l=o(397077),c=o(894320);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},d.apply(this,arguments)}const p=(0,n.createContext)({ready:!1,show:()=>{throw Error("Missing GoogleOneTap context")},hide:()=>{throw Error("Missing GoogleOneTap context")}}),u=a.ZP`
    query GetGoogleOneTapData($countryCode: String) {
        country(code: $countryCode) {
            gdprCompliant
        }
        siteConfig {
            googleAuth(platform: WWW) {
                clientId
            }
        }
    }
`,g=e=>{let{children:t,showOnLoad:o,clientId:n,isGDPR:r,onAuth:a}=e;const{ready:i,show:s}=(0,l.r)({onAuth:a,showOnLoad:o,clientId:n,isGDPR:r});return(0,c.jsx)(p.Provider,{value:{ready:i,show:s,hide:()=>{window.google.accounts.id.cancel()}}},t)};g.defaultProps={showOnLoad:!1};const h=e=>{let{children:t,locale:o,...n}=e;const{loading:a,error:l,data:p}=(0,i.aM)(u,{variables:{countryCode:(0,s.EB)(o)}});return a||l||!p?(0,c.jsx)(r().Fragment,null,t):(0,c.jsx)(g,d({},n,{clientId:p.siteConfig.googleAuth.clientId,isGDPR:p.country.gdprCompliant}),t)};h.defaultProps=g.defaultProps;const m=()=>(0,n.useContext)(p)},626209:(e,t,o)=>{"use strict";o.d(t,{IZ:()=>p,XV:()=>m,qj:()=>u,rh:()=>h});var n=o(87363),r=o.n(n),a=o(625198),i=o.n(a),s=o(182145),l=o(882189),c=o(894320);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},d.apply(this,arguments)}const p=(0,n.createContext)({ready:!1,visibleSiteKey:null,invisibleSiteKey:null,getHCaptchaResponse:()=>{throw Error("Missing HCaptcha context")}}),u=s.ZP`
    query GetHCaptchaData {
        thirdPartyConfig {
            hcaptcha {
                visibleSiteKey
                invisibleSiteKey
            }
        }
    }
`,g=e=>{let{children:t,visibleSiteKey:o,invisibleSiteKey:r}=e;const[a,s]=(0,n.useState)("undefined"!=typeof window&&window.initHCaptchaHappened||!1);(0,n.useEffect)((()=>{if(window.hCaptchaReady=()=>{window.initHCaptchaHappened=!0,s(!0)},window.initHCaptchaHappened)return()=>{};const e=new URLSearchParams({onload:"hCaptchaReady",render:"explicit",recaptchacompat:"off"}),t=document.createElement("script");return t.src=`https://hcaptcha.com/1/api.js?${e.toString()}`,t.async=!0,t.defer=!0,i()(document.body,"document body should exist when HCaptchaProvider is mounted"),document.body.appendChild(t),()=>{i()(document.body,"document body should exist when HCaptchaProvider is unmounted"),document.body.removeChild(t)}}),[r]);return(0,c.jsx)(p.Provider,{value:{ready:a,visibleSiteKey:o,invisibleSiteKey:r,getHCaptchaResponse:async e=>(e=>{i()(document.body,"document body should exist when HCaptcha is mounted");const t=document.createElement("div");return i()(e,"captchaContainer should exist when HCaptcha is mounted"),e.current.appendChild(t),new Promise(((o,n)=>{const a=window.hcaptcha.render(t,{sitekey:r,size:"invisible",reCaptchaCompat:!1,callback:n=>{e.current.removeChild(t),o(n)},"error-callback":o=>{e.current.removeChild(t),n(o)}});window.hcaptcha.execute(a)}))})(e)}},t)},h=e=>{let{children:t,...o}=e;const{loading:n,error:a,data:i}=(0,l.aM)(u);return n||a||!i?(0,c.jsx)(r().Fragment,null,t):(0,c.jsx)(g,d({},o,{invisibleSiteKey:i.thirdPartyConfig.hcaptcha.invisibleSiteKey,visibleSiteKey:i.thirdPartyConfig.hcaptcha.visibleSiteKey}),t)},m=()=>(0,n.useContext)(p)},27176:(e,t,o)=>{"use strict";o.d(t,{Ag:()=>h,Xx:()=>u,Z1:()=>m,ko:()=>p});var n=o(87363),r=o.n(n),a=o(625198),i=o.n(a),s=o(182145),l=o(882189),c=o(894320);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},d.apply(this,arguments)}const p=(0,n.createContext)({ready:!1,publicKeyV2:null,getV3Token:()=>{throw Error("Missing Recaptcha context")}}),u=s.ZP`
    query GetRecaptchaData {
        siteConfig {
            recaptcha {
                publicKeyV2
                publicKeyV3
            }
        }
    }
`,g=e=>{let{children:t,publicKeyV2:o,publicKeyV3:r}=e;const[a,s]=(0,n.useState)("undefined"!=typeof window&&window.initRecaptchaHappened||!1);(0,n.useEffect)((()=>{if(window.initRecaptchaProvider=()=>{window.grecaptcha.ready((()=>{s(!0)})),window.initRecaptchaHappened=!0},window.initRecaptchaHappened)return()=>{};const e=new URLSearchParams({onload:"initRecaptchaProvider",render:r}),t=document.createElement("script");return t.src=`https://www.google.com/recaptcha/api.js?${e.toString()}`,t.async=!0,t.defer=!0,i()(document.body,"document body should exist when RecaptchaProvider is mounted"),document.body.appendChild(t),()=>{i()(document.body,"document body should exist when RecaptchaProvider is unmounted"),document.body.removeChild(t)}}),[r]);return(0,c.jsx)(p.Provider,{value:{ready:a,publicKeyV2:o,getV3Token:async e=>await window.grecaptcha.execute(r,{action:e})}},t)},h=e=>{let{children:t,...o}=e;const{loading:n,error:a,data:i}=(0,l.aM)(u);return n||a||!i?(0,c.jsx)(r().Fragment,null,t):(0,c.jsx)(g,d({},o,{publicKeyV2:i.siteConfig.recaptcha.publicKeyV2,publicKeyV3:i.siteConfig.recaptcha.publicKeyV3}),t)},m=()=>(0,n.useContext)(p)},503044:(e,t,o)=>{"use strict";o.d(t,{Z:()=>M});var n=o(563798),r=o(87363),a=o(280506),i=o(979186),s=o(365778),l=o(269703),c=o(873734),d=o(755358),p=o(988086),u=o(720302),g=o(45541),h=o(946985),m=o(522743),f=o(434725),x=o(682642),y=o(625198),w=o.n(y),v=o(174797),C=o(988617),k=o(602256),b=o(450166),j=o(933423);var T=o(894320);const S=e=>{let{password:t,forbiddenMatches:o,locale:n}=e;const{level:r,attributes:a}=((e,t)=>{const o={hasUppercase:/[A-Z]/g.test(e),hasLowercase:/[a-z]/g.test(e),hasNumber:/[0-9]/g.test(e),hasSymbol:/[!"#$%&'()*+,\-./:;<=>?@[\]^_`{|}~\s]/.test(e)},n=t.filter((e=>e.length>1)).some((t=>e.toLowerCase().includes(t.toLowerCase())));if(e.length<6)return{level:"tooShort",attributes:o};if(n)return{level:"weak",attributes:o};if(e.length>16)return{level:"great",attributes:o};{const e=Object.values(o).reduce(((e,t)=>t?e+1:e),0),t=new Map([[0,"tooShort"],[1,"weak"],[2,"fair"],[3,"good"],[4,"great"]]).get(e);return w()(t,"Password attributes should map to a strength level 0-4"),{level:t,attributes:o}}})(t,o),c=(0,j.D5)([["tooShort",0],["weak",25],["fair",50],["good",75],["great",100]]),d=(0,j.D5)([["tooShort",null],["weak",(0,l.ag)("Password strength: weak")],["fair",(0,l.ag)("Password strength: fair")],["good",(0,l.ag)("Password strength: good")],["great",(0,l.ag)("Password strength: great")]]),p=(0,j.D5)([[(0,j.l4)(["hasLowercase","hasSymbol"]),"Please try adding a lowercase letter and symbol (ex. !#@)"],[(0,j.l4)(["hasLowercase","hasUppercase"]),"Please try adding uppercase and lowercase letters"],[(0,j.l4)(["hasLowercase","hasNumber"]),"Please try adding a lowercase letter and a number (0-9)"],[(0,j.l4)(["hasSymbol","hasUppercase"]),"Please try adding a symbol (ex. !#@) and an uppercase letter"],[(0,j.l4)(["hasSymbol","hasNumber"]),"Please try adding a symbol (ex. !#@) and a number (0-9)"],[(0,j.l4)(["hasUppercase","hasNumber"]),"Please try adding an uppercase letter and a number (0-9)"]]);let u=null;if("tooShort"===r)u=(0,l.nc)("Password must be at least %{smart_count} character in length","Password must be at least %{smart_count} characters in length",6);else if("fair"===r&&n.includes("en_")){const e=Object.entries(a).filter((e=>{let[,t]=e;return!t})).map((e=>{let[t]=e;return t}));u=p.get((0,j.l4)(e))}else u=d.get(r);const g=c.get(r);return w()("number"==typeof g,`missing progress bar value for level: ${r}`),w()(u,"progress bar should have help text"),(0,T.jsx)(i.Z,null,(0,T.jsx)(i.Z,{marginBottom:1},(0,T.jsx)(b.ZP,{value:g,type:"minimal"})),(0,T.jsx)(s.xv,{size:"small",color:"black-light"},u))};var Z=o(84198),_=o(43817),P=o(109985),O=o.n(P),A=o(626209),L=o(44909),R=o.n(L);const M=e=>{let{onMakeRequest:t,onSignup:o,onAlreadyRegistered:y,termsAcknowledged:b=!0,locale:j,isGDPR:P=!1,prefilledFields:L={},hiddenFields:M={},defaultShowCaptcha:E=!1,showMinVersion:D=!1}=e;const U=(0,r.useContext)(a.default),{onAlert:B}=(0,v.V)(),{ready:N,visibleSiteKey:I,getHCaptchaResponse:F}=(0,A.XV)(),[z,G]=(0,r.useState)(!1),[H,V]=(0,r.useState)(null),[$,X]=(0,r.useState)(E),[Y,q]=(0,r.useState)(null),[W,K]=(0,r.useState)(0),J=(0,r.useRef)(null),[Q,ee]=(0,r.useState)(L.email||""),[te,oe]=(0,r.useState)(""),[ne,re]=(0,r.useState)(!1),[ae,ie]=(0,r.useState)(L.firstName||""),[se,le]=(0,r.useState)(L.lastName||""),[ce,de]=(0,r.useState)(""),[pe,ue]=(0,r.useState)(!P),[ge,he]=(0,r.useState)(L.zipCode||""),[me,fe]=(0,r.useState)(""),[xe,ye]=(0,r.useState)((0,Z.EB)(j)),[we,ve]=(0,r.useState)(!1),{showCity:Ce,showZip:ke}=(0,Z.Op)(xe),be=(0,r.useRef)(null);(0,r.useEffect)((()=>{w()(be.current,"Form DOM should be populated on mount"),be.current.focus()}),[]),(0,r.useEffect)((()=>{L.zipCode&&he(L.zipCode)}),[L]);return(0,T.jsx)(c.Z,{onSubmit:async e=>{if(e.preventDefault(),!b)return void B({type:"warning",message:(0,T.jsx)(n.Trans,{id:(0,l.ag)("To join Yelp, first agree to our Terms of Service and confirm that youâve read our Privacy Policy by checking the box below.",{}).toString()})});B(null),G(!0),V(null);const[r,a,i]=ce?ce.split("-"):[null,null,null];let s;try{const e=N&&!$?await F(J):null,o=await t({email:Q,password:te,firstName:ae,lastName:se,birthdayMonth:a,birthdayDay:i,birthdayYear:r,marketingEmailAllowed:pe,city:Ce?me:null,zipCode:ke?ge:null,country:xe,captchaVerifyToken:Y,hCaptchaResponse:e});if(!o.ok)throw new Error(`Signup request error status: ${o.status}: ${o.statusText}`);s=await o.json()}catch(e){(0,C.Z)(e),B({type:"error",message:(0,T.jsx)(k.Z,null)})}finally{G(!1)}s&&(s.success?o({firstName:ae}):(V(s.error_fields),s.show_captcha?(K((e=>e+1)),X(!0)):X(!1),s.show_country&&ve(!0),s.associated_email?y():B({type:"error",message:(0,T.jsx)(k.Z,{errors:s.errors})})))}},!M.name&&(0,T.jsx)(m.Z,{marginBottom:1,gutter:2,layoutEqual:!U.v2_enabled||void 0,layoutUnits:U.v2_enabled?3:void 0},(0,T.jsx)(f.Z,null,(0,T.jsx)(d.Z,{type:"text",placeholder:(0,l.ag)("First Name"),noMargin:!0,onChange:e=>{ie(e.currentTarget.value)},value:ae,disabled:z,validationStateType:H&&H.includes("first_name")?"error":null,required:!0})),(0,T.jsx)(f.Z,null,(0,T.jsx)(d.Z,{type:"text",placeholder:(0,l.ag)("Last Name"),noMargin:!0,onChange:e=>{le(e.currentTarget.value)},value:se,disabled:z,validationStateType:H&&H.includes("last_name")?"error":null,required:!0}))),(0,T.jsx)(i.Z,{marginBottom:1,className:_.J},(0,T.jsx)(d.Z,{type:"email",placeholder:(0,l.ag)("Email"),noMargin:!0,onChange:e=>{ee(e.currentTarget.value)},value:Q,disabled:z,tagRef:be,validationStateType:H&&H.includes("email")?"error":null,required:!0})),(0,T.jsx)(i.Z,{marginBottom:1},(0,T.jsx)(d.Z,{type:"password",placeholder:(0,l.ag)("Password"),noMargin:!0,minLength:6,onChange:e=>{oe(e.currentTarget.value)},onFocus:()=>{re(!0)},value:te,disabled:z,validationStateType:H&&H.includes("password")?"error":null,required:!0}),ne&&(0,T.jsx)(i.Z,{marginTop:2,marginBottom:2},(0,T.jsx)(S,{locale:j,password:te,forbiddenMatches:[ae,se,Q]}))),ke&&(0,T.jsx)(i.Z,{marginBottom:2},(0,T.jsx)(d.Z,{type:"text",name:"zip",placeholder:(0,l.ag)("ZIP Code"),noMargin:!0,onChange:e=>{he(e.currentTarget.value)},value:ge,disabled:z,validationStateType:H&&H.includes("zip")?"error":null,required:!0})),Ce&&(0,T.jsx)(i.Z,{marginBottom:2},(0,T.jsx)(d.Z,{type:"text",name:"city",placeholder:(0,l.ag)("City"),noMargin:!0,onChange:e=>{fe(e.currentTarget.value)},value:me,disabled:z,validationStateType:H&&H.includes("city")?"error":null,required:!0})),we&&(0,T.jsx)(i.Z,{marginBottom:2},(0,T.jsx)(p.Z,{noMargin:!0,onChange:e=>{ye(e.currentTarget.value)},value:xe,disabled:z,validationStateType:H&&H.includes("other_country")?"error":null,required:!0},(0,Z.aY)().map((e=>{let{code:t,name:o}=e;return(0,T.jsx)(u.Z,{key:t,value:t},o)})))),!M.birthday&&(0,T.jsx)(g.Z,null,!D&&(0,T.jsx)(h.Z,{htmlFor:"input-signup-birthday",helpTextInline:(0,l.ag)("Optional"),text:(0,l.ag)("Birthday")}),(0,T.jsx)(d.Z,{id:"input-signup-birthday",label:D?(0,l.ag)("Birthday (optional)"):void 0,type:"date",placeholder:(0,l.ag)("Birthday"),noMargin:!0,onChange:e=>{de(e.currentTarget.value)},value:ce,disabled:z,max:(new Date).toISOString().split("T")[0],validationStateType:H&&(H.includes("birthdate_y")||H.includes("birthdate_m")||H.includes("birthdate_d"))?"error":null})),!M.marketingEmails&&P&&(0,T.jsx)(h.Z,{htmlFor:"input-acknowledged-marketing-emails"},(0,T.jsx)(s.xv,{size:"small",align:"center"},(0,T.jsx)(d.Z,{id:"input-acknowledged-marketing-emails",type:"checkbox",value:pe,onChange:e=>{ue(e.currentTarget.checked)},text:(0,T.jsx)(n.Trans,{id:(0,l.ag)("Yes, I want Yelp to send me marketing emails about Yelpâs products, services, and local events. I can unsubscribe at any time.",{}).toString()})}))),(0,T.jsx)(i.Z,{tagRef:J,marginTop:2,className:O()["hcaptcha-container"]},$&&N&&I&&(0,T.jsx)(R(),{id:`${W}`,key:W,sitekey:I,onVerify:e=>{q(e)}})),(0,T.jsx)(i.Z,{marginTop:D?2:4},(0,T.jsx)(x.Z,{full:!0,type:"primary",htmlButtonType:"submit",disabled:z},(0,T.jsx)(n.Trans,{id:(0,l.ag)("Sign up",{}).toString()}))))}},84198:(e,t,o)=>{"use strict";o.d(t,{EB:()=>i,Op:()=>s,aY:()=>l});var n=o(947570);const r={AR:!0,AT:!1,AU:!1,BE:!0,BR:!0,CA:!1,CH:!1,CL:!0,CZ:!1,DE:!1,DK:!1,ES:!1,FI:!1,FR:!1,GB:!1,HK:!1,IE:!0,IT:!0,JP:!1,MX:!1,MY:!1,NL:!1,NO:!0,NZ:!0,PH:!0,PL:!1,PT:!0,SE:!0,SG:!1,TR:!0,TW:!0,US:!1},a={AR:!1,AT:!0,AU:!0,BE:!1,BR:!1,CA:!0,CH:!0,CL:!1,CZ:!0,DE:!0,DK:!0,ES:!0,FI:!0,FR:!0,GB:!0,HK:!1,IE:!1,IT:!1,JP:!0,MX:!0,MY:!0,NL:!0,NO:!1,NZ:!1,PH:!1,PL:!0,PT:!1,SE:!1,SG:!0,TR:!1,TW:!1,US:!0},i=e=>e.split("_")[1],s=e=>({showCity:r[e]??!1,showZip:a[e]??!0}),l=()=>n.w8.sort(((e,t)=>{let{name:o}=e,{name:n}=t;return o.toString()<n.toString()?-1:1}))},852996:(e,t,o)=>{"use strict";o.d(t,{Z:()=>h});var n=o(563798),r=(o(87363),o(982985)),a=o(696792),i=o(929392),s=o(994689),l=o(988617),c=o(602256),d=o(290611),p=o(269703),u=o(894320);const g=()=>{},h=e=>{let{googleOneClickCsrfToken:t,googleOneClickUrl:o=a.UT,businessId:h,onSignupComplete:m,onUnverifiedEmail:f=g,onMissingInformation:x=g,onAlert:y=g,termsAcknowledged:w=(()=>!0)}=e;return{onAuth:async(e,g)=>{if(!w())return void y({type:"warning",message:(0,u.jsx)(n.Trans,{id:(0,p.ag)("To log in to Yelp with Google, first agree to our Terms of Service and confirm that youâve read our Privacy Policy by checking the box below.",{}).toString()})});const v={id_token:e,signup_source:(0,a.Ur)(g.startsWith("btn")?"google":"google_one_tap"),can_use_location:(0,s.X)(),business_id:h,is_gis_flow:!0},C=(0,i.xq)(),k=o.startsWith("http")?o:C+o;try{const o=await fetch(k,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8","X-Requested-With":"XMLHttpRequest"},credentials:"include",body:(0,r.Z)({csrftok:t,...v})});if(!o.ok)throw new Error(`(googleAuthHandler) Google one click endpoint '${o.url}' response status: ${o.status}: ${o.statusText}`);const n=await o.json();n?.success?("google 1-click signup"===n.action&&(0,d.Z)({event:"signup"}),m()):n?.user_has_incomplete_name_info||n?.user_has_no_location||n?.show_captcha?x({googleIdToken:e,firstName:n?.first_name,lastName:n?.last_name,email:n?.email},v,n?.show_captcha||!1):n?.user_has_unverified_email?f():((0,l.Z)(new Error(`(googleAuthHandler) Unhandled response from one click endpoint. Errors: ${n.errors}`)),y({type:"error",message:(0,u.jsx)(c.Z,{errors:n.errors})}))}catch(e){(0,l.Z)(e),y({type:"error",message:(0,u.jsx)(c.Z,null)})}}}}},397077:(e,t,o)=>{"use strict";o.d(t,{r:()=>p});var n=o(87363),r=o(798500),a=o(469526),i=o(847377),s=o(180338),l=o(988617),c=o(625198),d=o.n(c);const p=e=>{let{onAuth:t,isGDPR:o,clientId:c,showOnLoad:p,showOneTapForITP:u=!0,googleOneTapUrl:g=i.vM,cancelOnOutsideTap:h=!1,businessId:m}=e;const[f,x]=(0,n.useState)("undefined"!=typeof window&&window.initGoogleOneTapHappened||!1),y=(e=>{const t=(0,a.CH)();return(0,n.useCallback)((()=>{t&&"undefined"!=typeof window&&!window.logGoogleOneTapDisplayed&&(t.logEvent(["growth","google_one_tap_displayed","2.0"],{business_id_encid:e,page_url:window?.location?.href,user_agent:window?.navigator?.userAgent}),window.logGoogleOneTapDisplayed=!0)}),[t,e])})(m),w=(0,n.useCallback)((async()=>{if(o)return!1;if(window.location.host.includes("dev.yelp")&&!window.location.search.includes("yolo=true")&&!window.location.host.includes("yelp-react-component-user-auth.dev.yelp"))return console.warn("GoogleYolo One-Tap Login is disabled on dev. Add ?yolo=true to your URL parameters to test it."),!1;const e=await new Promise((e=>{window.google.accounts.id.prompt((t=>{e(t)}))})),t=e.isDisplayed()&&!e.isSkippedMoment();return t&&y(),t}),[o,y]);return(0,n.useEffect)((()=>{const e=async()=>{window.initGoogleOneTapHappened=!0,window.google.accounts.id.initialize({client_id:c,auto_select:(0,s.H)(),cancel_on_tap_outside:h,callback:e=>{let{credential:o,select_by:n}=e;t(o,n)},prompt_parent_id:i.Uv,itp_support:u}),x(!0),p&&w()};if(!(0,r.ww)(r.vy.FUNCTIONAL))return()=>{};if(window.initGoogleOneTapHappened)return e(),()=>{};const o=document.createElement("script");return o.src=g,o.async=!0,o.defer=!0,o.onload=()=>{e()},o.onerror=()=>{(0,l.Z)(new Error(`Google One Tap - ${g} failed to load`))},d()(document.body,"document body should exist when GoogleOneTapProvider is mounted"),document.body.appendChild(o),()=>{d()(document.body,"document body should exist when GoogleOneTapProvider is unmounted"),document.body.removeChild(o)}}),[h,c,g,t,w,p,u]),{ready:f,show:w}}},460533:(e,t,o)=>{"use strict";o.d(t,{MJ:()=>r,N$:()=>i,XN:()=>a});var n=o(182145);const r=n.ZP`
    mutation CreateMagicLinkLoginEmail($email: String!, $visibleHcaptchaResponse: String, $redirectUrl: String) {
        sendMagicLinkLoginEmail(
            input: { email: $email, visibleHcaptchaResponse: $visibleHcaptchaResponse, redirectUrl: $redirectUrl }
        ) {
            __typename
            ... on ConsumerSendMagicLinkLoginEmailError {
                error
                __typename
            }
            ... on ConsumerSendMagicLinkLoginEmail {
                isSuccess
                __typename
            }
        }
    }
`,a=n.ZP`
    mutation SendOtpByEmail($email: String!, $flow: String!) {
        sendOtpByEmail(input: { email: $email, flow: $flow }) {
            __typename
            ... on ConsumerSendOtpByEmail {
                isSuccess
            }
            ... on ConsumerSendOtpByEmailError {
                error
            }
        }
    }
`,i=n.ZP`
    mutation LoginByOtp($email: String!, $code: String!) {
        loginByOTP(input: { email: $email, code: $code }) {
            __typename
            ... on ConsumerSession {
                authToken
            }
            ... on ConsumerSessionError {
                error
            }
        }
    }
`},43817:(e,t,o)=>{"use strict";o.d(t,{J:()=>r,Z:()=>a});var n=o(487617);const r="fs-block";function a(e){if(e)try{n.Z.asyncLoadFullStoryLibrary(e.fullstoryCDNURL,e.fullstoryId)}catch(e){}}},696792:(e,t,o)=>{"use strict";o.d(t,{UT:()=>s,Ur:()=>a,j2:()=>i});var n=o(345596);const r={google_one_tap:{m:"one_tap_mobile_site",www:"one_tap_www"},google:{m:"google_mobile_site",www:"google_www"}},a=e=>{const t=window.location.host.includes("m.yelp")?"m":"www",o=(0,n.Z)(r,`${e||""}.${t}`,"default"),a=window.location.search;return new URLSearchParams(a).get("signup_source")??o},i="/signup/one_click_facebook",s="/signup/one_click_google"},164925:(e,t,o)=>{"use strict";o.d(t,{Z:()=>r});var n=o(87363);const r=e=>{const t=(0,n.useRef)(null);return(0,n.useEffect)((()=>{t.current=e})),t.current}},334488:(e,t,o)=>{"use strict";e.exports=o.p+"default_user_avatar_16x16_v2.yji-7829c62b9b1f68030b48.png"},974743:(e,t,o)=>{"use strict";e.exports=o.p+"default_user_avatar_16x16_v2@2x.yji-0d39305d644200a26e3b.png"},24192:(e,t,o)=>{"use strict";e.exports=o.p+"default_user_avatar_64x64_v2.yji-19e0a8ff85b15f4bbd79.png"},416089:(e,t,o)=>{"use strict";e.exports=o.p+"default_user_avatar_64x64_v2@2x.yji-cfb49ee371b5b7711e94.png"}}]);
//# sourceMappingURL=https://js-sourcemaps.yelpcorp.com/assets/public/module_yelp-frontend_shared-8d7d56779fb55ecc120a5e4412e24e5a28e873dc.yji-73c01cb23cc499e7fffd.js.map