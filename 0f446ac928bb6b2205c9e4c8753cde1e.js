if((window.location.hash!=''&&/vn_source=/.test(window.location.hash))||(window.location.search!=''&&/vn_source=/.test(window.location.search))){var _itmSource=((window.location.hash!='')?window.location.hash:window.location.search).replace(/^[#,?]+/g,'').split('&');if(_itmSource){window.itmSource={};for(var i=0;i<_itmSource.length;i++){var o=_itmSource[i].split('=');if(o.length>=2)window.itmSource[o[0]]=_itmSource[i].replace(o[0]+'=','');}window.dataLayer=window.dataLayer||[];dataLayer.push({'vn_source':window.itmSource.vn_source?window.itmSource.vn_source:null});dataLayer.push({'vn_medium':window.itmSource.vn_medium?window.itmSource.vn_medium:null});dataLayer.push({'vn_campaign':window.itmSource.vn_campaign?window.itmSource.vn_campaign:null});dataLayer.push({'vn_term':window.itmSource.vn_term?window.itmSource.vn_term:null});dataLayer.push({'vn_thumb':window.itmSource.vn_thumb?window.itmSource.vn_thumb:null});if(window.itmSource.vn_zone){dataLayer.push({'vn_zone':window.itmSource.vn_zone});}if(window.itmSource.vn_segment){dataLayer.push({'vn_segment':window.itmSource.vn_segment});}if(window.itmSource.vn_topic){dataLayer.push({'vn_topic':window.itmSource.vn_topic});}if(window.itmSource.vn_aid){dataLayer.push({'vn_aid':window.itmSource.vn_aid});}if(window.itmSource.vn_test){dataLayer.push({'vn_test':window.itmSource.vn_test});}if(window.itmSource.vn_sign){dataLayer.push({'vn_sign':window.itmSource.vn_sign});}}window.history.replaceState(false,false,window.location.protocol+'//'+window.location.hostname+window.location.pathname+(window.location.search!=''&&/vn_source=/.test(window.location.search)?'':window.location.search));}var appendTracking=function(){var dataItm=document.querySelectorAll('[data-itm-source]:not([data-itm-added="1"])');var dataItmLength=dataItm.length;if(dataItmLength>0){for(var di=0;di<dataItmLength;di++){if(dataItm[di]!==null){dataItm[di].setAttribute('data-itm-added',1);dataItm[di].addEventListener('click',function(e){var is_UTM=!/\/\/(demo.)?vnexpress.net/.test(this.href)&&/utm_source=/.test(this.href);if(this.href&&this.href!=window.location.href&&this.href!=window.location.href+'#'&&!is_UTM){var data_itm_source=this.getAttribute('data-itm-source');var meta_ttaid=document.querySelector('meta[name="tt_article_id"]');if(/vn_source=/.test(this.href)){data_itm_source='';if(meta_ttaid){data_itm_source='&vn_aid='+meta_ttaid.getAttribute('content');}if(typeof dataLayerAB!=='undefined'){data_itm_source+='&vn_test='+dataLayerAB[0]['ABVariant'];}if(location.host==='demo.vnexpress.net'&&this.href.indexOf('demo.')<0){this.href=this.href.replace('vnexpress.net','demo.vnexpress.net');}this.setAttribute('href',this.href+data_itm_source);}else{if(meta_ttaid){data_itm_source=data_itm_source+'&vn_aid='+meta_ttaid.getAttribute('content');}if(typeof dataLayerAB!=='undefined'){data_itm_source+='&vn_test='+dataLayerAB[0]['ABVariant'];}if(location.host==='demo.vnexpress.net'&&this.href.indexOf('demo.')<0){this.href=this.href.replace('vnexpress.net','demo.vnexpress.net');}this.setAttribute('href',this.href+(/^#/.test(data_itm_source)?data_itm_source:'#'+data_itm_source));}}});}}}};window.addEventListener('DOMContentLoaded',function(event){appendTracking();});var trackingLogoHome=function(type,href){if(href==window.location.href||href==window.location.href+'#'){window.dataLayer=window.dataLayer||[];if(type=='logo-header'){return dataLayer.push({"event":"iTMHometoHome","vn_source":"Home","vn_campaign":"Header","vn_medium":"Logo","vn_term":"Desktop","pageType":"Home"});}else if(type=='logo-header-menu'){return dataLayer.push({"event":"iTMHometoHome","vn_source":"Home","vn_campaign":"Header","vn_medium":"Menu-Home","vn_term":"Desktop","pageType":"Home"});}else if(type=='logo-footer-menu'){return dataLayer.push({"event":"iTMHometoHome","vn_source":"Home","vn_campaign":"Footer","vn_medium":"Menu-Home","vn_term":"Desktop","pageType":"Home"});}else if(type=='logo-footer'){return dataLayer.push({"event":"iTMHometoHome","vn_source":"Home","vn_campaign":"Footer","vn_medium":"Logo","vn_term":"Desktop","pageType":"Home"});}}};