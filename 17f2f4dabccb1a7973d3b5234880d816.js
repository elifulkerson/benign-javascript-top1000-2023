jQuery(document).ready(function($){var currPlayer=null,$window=$(window);$('.tabs-box .tabs > li > a').on('click',function(e){e.preventDefault();if(!$(this).hasClass('active')){let _id=$(this).attr('href');$('.tabs-box .tabs > li > a.active').removeClass('active');$(this).addClass('active');$('.tabs-box .tab-content').hide();$(_id).fadeIn();}});$window.scroll(function(){let playing=$(document).find('.player-wrap .video-js.vjs-playing');if(playing.length>0&&!playing.closest('.single-post-video').hasClass('disabled')){const parent=playing.closest('.single-post-video');let windowTop=$(document).scrollTop(),windowBottom=windowTop+$(window).height(),offsetTop=parent.parent().offset().top,offsetMid=parent.parent().offset().top+(parent.parent().width()*0.25);if(windowTop>offsetMid||windowBottom<offsetTop){if(!parent.hasClass('fixed-vid')){parent.addClass('fixed-vid');if(parent.find('.vid-close').length===0){parent.append('<span class="vid-close">x</span>');playing.closest('.pla-wrap').css('z-index','9999');}}}else{if(parent.hasClass('fixed-vid')){parent.removeClass('fixed-vid');if(parent.find('.vid-close').length>0){parent.find('.vid-close').remove();playing.closest('.pla-wrap').css('z-index','');}}}}
playing=$(document).find('.video-frame.is-playing');if(playing.length>0&&!playing.parent().hasClass('disabled')){const parent=playing.parent();let windowTop=$(document).scrollTop(),windowBottom=windowTop+$(window).height(),offsetTop=parent.parent().offset().top,offsetMid=parent.parent().offset().top+(parent.parent().width()*0.25);if(windowTop>offsetMid||windowBottom<offsetTop){if(!parent.hasClass('fixed-vid')){parent.addClass('fixed-vid');if(parent.find('.vid-close').length===0){parent.append('<span class="vid-close">x</span>');playing.closest('.pla-wrap').css('z-index','9999');}}}else{if(parent.hasClass('fixed-vid')){parent.removeClass('fixed-vid');if(parent.find('.vid-close').length>0){parent.find('.vid-close').remove();playing.closest('.pla-wrap').css('z-index','');}}}}});$(document).on('click','.player-wrap.iframeVideo.fixed-vid .vid-close',function(){$('.player-wrap.iframeVideo.fixed-vid iframe.video-frame').removeClass('is-playing').pauseVideo();$('.player-wrap.iframeVideo.fixed-vid').removeClass('fixed-vid').addClass('disabled');$(this).remove();});$(document).on('click','.single-post-video.fixed-vid .vid-close',function(){$('.single-post-video.fixed-vid .player-wrap').trigger('click');$('.single-post-video.fixed-vid').removeClass('fixed-vid').addClass('disabled');$(this).remove();});function pausePlayingVideo(){let playing=$(document).find('.player-wrap .video-js.vjs-playing');if(playing.length>0){if(currPlayer!==null)currPlayer.pause();const parent=playing.parent().parent();parent.removeClass('fixed-vid');if(parent.find('.vid-close').length>0){parent.find('.vid-close').remove();playing.closest('.pla-wrap').css('z-index','');}}
playing=$(document).find('.video-frame.is-playing');if(playing.length>0){playing.removeClass('is-playing').pauseVideo();}}
$(document).on('click','.player-wrap:not(.iframeVideo)',function(){pausePlayingVideo();let plaId=$(this).find('video').attr('id');if(!$(this).hasClass('loaded')){$(this).parent().attr('id','wrp-'+Date.now());let contId=$(this).parent().attr('id');$(this).find('#'+plaId).attr('id','plr-'+Date.now());plaId=$(this).find('video').attr('id');setupVjs(contId,plaId);$(this).find('.video-js.vjs-default-skin').css({'visibility':'visible','z-index':'3'});$(this).addClass('loaded');currPlayer=videojs(plaId);let currElem=$(this);currPlayer.ready(function(){let promise=currPlayer.play();if(promise!==undefined){promise.then(function(){$('.player-wrap.playing').removeClass('playing');currElem.addClass('playing');}).catch(function(error){console.log('error',error);});}});}});$('.pli-wrap .pli-item').click(function(){if(!$(this).hasClass('active')){let vBox=$(this).closest('.vbox').attr('id'),vid=$(this).attr('data-vid'),currTopPos=jQuery(document).scrollTop(),vboxTop=jQuery('#'+vBox).offset().top;if(currTopPos>vboxTop){jQuery('html, body').animate({scrollTop:(vboxTop-80)+'px'},800);}
let prevPlaItem=$('#'+vBox+' .pla-wrap .pla-item.active');let prevVideoFrame=prevPlaItem.find('iframe.video-frame');$('#'+vBox+' .pla-wrap .pla-item.active,#'+vBox+' .pli-wrap .pli-item.active').removeClass('active');$('#'+vBox+' .pla-wrap #pla-'+vid+',#'+vBox+' .pli-wrap #pli-'+vid).addClass('active');let playerWrap=$('#'+vBox+' .pla-wrap #pla-'+vid+' .player-wrap');let isIframeVideo=playerWrap.hasClass('iframeVideo');if(isIframeVideo){if(prevVideoFrame.length>0){const iframeElm=prevVideoFrame.eq(0);const src=iframeElm.attr('data-src')||iframeElm.attr('src');iframeElm.removeAttr('data-src').removeAttr('src').attr('data-src',src+"&r="+Date.now());iframeElm.removeClass("lazyloaded").addClass("lazyload");}
let videoFrame=playerWrap.find('iframe.video-frame');if(videoFrame.attr('data-src')){let _src=videoFrame.attr('data-src');videoFrame.removeAttr('data-src').attr('src',_src);}
videoFrame.addClass('is-playing').video();videoFrame.addVideoEvent('ready',function(e,videoFrame,video_type){videoFrame.addClass('is-playing').playVideo();});videoFrame.addVideoEvent('play',function(e,videoFrame,video_type){videoFrame.addClass('is-playing');});videoFrame.addVideoEvent('pause',function(e,videoFrame,video_type){videoFrame.removeClass('is-playing');});videoFrame.playVideo();}else{playerWrap.trigger('click');}}});});/*!FAKTOR VIER Video Controller v0.1.3 | (c) 2015 FAKTOR VIER GmbH | http://faktorvier.ch*/function tieIsJson(a){a="string"!=typeof a?JSON.stringify(a):a;try{a=JSON.parse(a)}catch(a){return!1}return"object"==typeof a&&null!==a}function onYouTubeIframeAPIReady(){if(void 0!==jQuery.video)for(callback_index in jQuery.video.global.youtube_api_ready_callbacks)jQuery.video.global.youtube_api_ready_callbacks[callback_index]()}var video_postmessage_event_func="attachEvent",video_postmessage_event="onmessage";window.addEventListener&&(video_postmessage_event_func="addEventListener",video_postmessage_event="message"),window[video_postmessage_event_func](video_postmessage_event,function(a){if(tieIsJson(a.data)&&/^https?:\/\/player.vimeo.com/.test(a.origin)&&"object"!=typeof a.data){var b=JSON.parse(a.data);if(void 0!==b.player_id&&-1===b.player_id.indexOf("VideoWorker")){var c=void 0===b.event?null:b.event,e=(void 0===b.method||b.method,jQuery("#"+b.player_id)),f=e.getVideoConfig();switch(null==f&&(e.initVideo(),f=e.getVideoConfig()),c){case"ready":jQuery.video.vimeo_postmessage(e,"addEventListener","play"),jQuery.video.vimeo_postmessage(e,"addEventListener","pause"),jQuery.video.vimeo_postmessage(e,"addEventListener","finish"),e.data("video-player",e),e.attr(f.attr_ready,""),e.trigger("ready"+jQuery.video.global.event_suffix);break;case"play":e.removeAttr(f.attr_paused),e.attr(f.attr_playing,""),e.trigger("play"+jQuery.video.global.event_suffix);break;case"pause":e.removeAttr(f.attr_playing),e.attr(f.attr_paused,""),e.trigger("pause"+jQuery.video.global.event_suffix);break;case"finish":e.removeAttr(f.attr_playing),e.removeAttr(f.attr_paused),e.trigger("finish"+$.video.global.event_suffix)}}}},!1),function(a){a.video={global:{event_suffix:"_video",youtube_api_ready_callbacks:[],youtube_iframe_api:"https://www.youtube.com/iframe_api"},config:{attr_ready:"data-video-ready",attr_playing:"data-video-playing",attr_paused:"data-video-paused"}};var b=function(b,c){var d=b.data("video").config;if(void 0===b.data("video-player")){var e=function(){var e=new YT.Player(b[0],{events:{onReady:function(a){b.attr(d.attr_ready,""),c(a.target)},onStateChange:function(c){switch(c.data){case 0:b.removeAttr(d.attr_paused),b.removeAttr(d.attr_playing),b.trigger("finish"+a.video.global.event_suffix);break;case 1:b.removeAttr(d.attr_paused),b.attr(d.attr_playing,""),b.trigger("play"+a.video.global.event_suffix);break;case 2:b.removeAttr(d.attr_playing),b.attr(d.attr_paused,""),b.trigger("pause"+a.video.global.event_suffix)}}}});b.data("video-player",e)};"undefined"==typeof YT||void 0===YT.Player?(a.video.global.youtube_api_ready_callbacks.push(function(){e()}),0==a('script[src="https://www.youtube.com/iframe_api"]').length&&0==a('script[src="http://www.youtube.com/iframe_api"]').length&&a("<script></script>").attr("src",a.video.global.youtube_iframe_api).insertBefore(a("script").first())):e()}else c(b.data("video-player"))},c=function(a,b){void 0!==a.data("video-player")&&b(a.data("video-player"))};a.video.vimeo_postmessage=function(a,b,c){var d={method:b};c&&(d.value=c),void 0!==a[0]&&a[0].contentWindow.postMessage(JSON.stringify(d),"*")},a.fn.getVideoConfig=function(){var b=a(this).first();return void 0!==b.data("video")?b.data("video").config:null},a.fn.getVideoPlayer=function(){var b=a(this).first();return void 0!==b.data("video-player")?b.data("video-player"):null},a.fn.getVideoType=function(){var b=a(this).first();return"video"==b.prop("tagName").toLowerCase()?video_type="video":-1!==b.attr("src").indexOf("youtube.com/embed")?video_type="youtube":-1!==b.attr("src").indexOf("player.vimeo.com/video")?video_type="vimeo":video_type="undefined",video_type},a.fn.initVideo=function(d){return this.each(function(){var e=a(this),f=e.getVideoType(),g=e.getVideoConfig();if(null!=g)return console.warn("Player already initialized!"),!1;if(g=a.extend(a.extend({},a.video.config),d),e.data("video",{config:g}),"youtube"==f)-1==e.attr("src").indexOf("enablejsapi=true")&&-1==e.attr("src").indexOf("enablejsapi=1")&&(-1==e.attr("src").indexOf("?")?e.attr("src",e.attr("src")+"?enablejsapi=1"):e.attr("src",e.attr("src")+"&enablejsapi=1"));else if("vimeo"==f&&(-1==e.attr("src").indexOf("api=true")&&-1==e.attr("src").indexOf("api=1")&&(-1==e.attr("src").indexOf("?")?e.attr("src",e.attr("src")+"?api=1"):e.attr("src",e.attr("src")+"&api=1")),-1==e.attr("src").indexOf("player_id="))){var h=e.attr("id");void 0===h&&(h="video-"+Math.round((new Date).getTime()+100*Math.random()),e.attr("id",h)),-1==e.attr("src").indexOf("?")?e.attr("src",e.attr("src")+"?player_id="+h):e.attr("src",e.attr("src")+"&player_id="+h)}"video"==f?(4==e.get(0).readyState?(e.attr(g.attr_ready,""),e.trigger("ready"+a.video.global.event_suffix)):e.get(0).addEventListener("canplaythrough",function(){e.attr(g.attr_ready,""),e.trigger("ready"+a.video.global.event_suffix),e.get(0).removeEventListener("canplaythrough",this)},!1),e.bind("play",function(){e.removeAttr(g.attr_paused),e.attr(g.attr_playing,""),e.trigger("play"+a.video.global.event_suffix)}),e.bind("pause",function(){e.removeAttr(g.attr_playing),e.attr(g.attr_paused,""),e.trigger("pause"+a.video.global.event_suffix)}),e.bind("ended",function(){e.removeAttr(g.attr_playing),e.removeAttr(g.attr_paused),e.trigger("finish"+a.video.global.event_suffix)}),e.data("video-player",e[0])):"youtube"==f?b(e,function(b){e.trigger("ready"+a.video.global.event_suffix)}):"vimeo"==f&&c(e,function(b){e.trigger("ready"+a.video.global.event_suffix)})})},a.fn.playVideo=function(){return this.each(function(){var d=a(this),e=d.getVideoType(),f=d.getVideoPlayer();if(null==f)return console.warn("Player not initialized!"),!1;"video"==e?f.play():"youtube"==e?b(d,function(a){a.playVideo()}):"vimeo"==e&&c(d,function(b){a.video.vimeo_postmessage(b,"play")})})},a.fn.pauseVideo=function(){return this.each(function(){var d=a(this),e=d.getVideoType(),f=d.getVideoPlayer();if(null==f)return console.warn("Player not initialized!"),!1;"video"==e?f.pause():"youtube"==e?b(d,function(a){a.pauseVideo()}):"vimeo"==e&&c(d,function(b){a.video.vimeo_postmessage(b,"pause")})})},a.fn.stopVideo=function(){return this.each(function(){var d=a(this),e=d.getVideoType(),f=d.getVideoPlayer();if(null==f)return console.warn("Player not initialized!"),!1;"video"==e?(f.pause(),f.currentTime=0):"youtube"==e?b(d,function(a){a.seekTo(a.getDuration())}):"vimeo"==e&&c(d,function(b){a.video.vimeo_postmessage(b,"unload")})})},a.fn.restartVideo=function(){return this.each(function(){var d=a(this),e=d.getVideoType(),f=d.getVideoPlayer();d.getVideoConfig();if(null==f)return console.warn("Player not initialized!"),!1;"video"==e?(f.currentTime=0,f.play()):"youtube"==e?b(d,function(b){b.seekTo(0),b.playVideo(),d.trigger("restart"+a.video.global.event_suffix)}):"vimeo"==e&&c(d,function(b){a.video.vimeo_postmessage(b,"seekTo","0"),a.video.vimeo_postmessage(b,"play"),d.trigger("restart"+a.video.global.event_suffix)})})},a.fn.muteVideo=function(){return this.each(function(){var d=a(this),e=d.getVideoType(),f=d.getVideoPlayer();if(null==f)return console.warn("Player not initialized!"),!1;"video"==e?f.muted=!0:"youtube"==e?b(d,function(a){a.mute()}):"vimeo"==e&&c(d,function(b){a.video.vimeo_postmessage(b,"setVolume","0")})})},a.fn.unmuteVideo=function(){return this.each(function(){var d=a(this),e=d.getVideoType(),f=d.getVideoPlayer();if(null==f)return console.warn("Player not initialized!"),!1;"video"==e?f.muted=!1:"youtube"==e?b(d,function(a){a.unMute()}):"vimeo"==e&&c(d,function(b){a.video.vimeo_postmessage(b,"setVolume",1)})})},a.fn.seekToVideo=function(d){return this.each(function(){var e=a(this),f=e.getVideoType(),g=e.getVideoPlayer();if(null==g)return console.warn("Player not initialized!"),!1;"video"==f?g.currentTime=d:"youtube"==f?b(e,function(a){a.seekTo(d)}):"vimeo"==f&&c(e,function(b){a.video.vimeo_postmessage(b,"seekTo",d)})})},a.fn.destroyVideo=function(){return this.each(function(){var b=a(this),e=(b.getVideoType(),b.getVideoPlayer(),b.getVideoConfig());null!=e&&(b.removeData("video"),b.removeData("video-player"),b.removeAttr(e.attr_ready),b.removeAttr(e.attr_playing),b.removeAttr(e.attr_paused),b.trigger("destroy"+a.video.global.event_suffix))})},a.fn.addVideoEvent=function(b,c){return this.each(function(){var d=a(this),e=d.getVideoType(),f=d.getVideoPlayer();"play"!=b||"video"!=e||void 0===d.get(0).paused||d.get(0).paused||c(null,d,e,f),d.bind(b+a.video.global.event_suffix,function(a){c(a,d,e,f)})})},a.fn.removeVideoEvent=function(b){return this.each(function(){a(this).unbind(b+a.video.global.event_suffix)})},a.fn.video=function(){var b="init",c={};return"string"==typeof arguments[0]?(b=arguments[0],c=arguments[1]):c=arguments[0],this.each(function(){var d=a(this);switch(b){case"init":d.initVideo(c);break;case"play":d.playVideo();break;case"pause":d.pauseVideo();break;case"stop":d.stopVideo();break;case"restart":d.restartVideo();break;case"mute":d.muteVideo();break;case"unmute":d.unmuteVideo();break;case"seekTo":d.seekToVideo(c);break;case"destroy":d.destroyVideo();break;case"addEvent":d.addVideoEvent(c[0],c[1]);break;case"removeEvent":d.removeVideoEvent(c[0]);break;default:console.warn('Video action "'+b+'" not found')}})}}(jQuery);