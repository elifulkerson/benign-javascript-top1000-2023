window.wafer&&window.wafer.ready((function(){var e="show-drawer",t=null,a=null,r="wafer-fetch-error",n="wafer-fetch-complete",i="stream-related-drawer",o="StreamRelated",s="react-wafer-stream",c="json",d="wafer-fetch",l="stream-uuid-list",u=[],f=document.querySelectorAll(".stream-items"),w=document.querySelector(".stream-ad-fetch"),m=window.innerWidth||document.documentElement.clientWidth,A="js-sponsored-moments-dwell-time",g=window.wafer&&window.wafer.utils,v={INARTICLE:9/16,reservemoments:16/9},p=function e(t){var a,r,n=t.getAttribute("data-da-position");if("reservemoments"===n&&(t=t.querySelector("#defaultRESERVEMOMENTS")),a=t.getAttribute("data-html"),r=t.getAttribute("data-darla-config"),a&&r){(r=JSON.parse(r)).dest;var i=window.DARLA.prefetched();if(!window.DARLA.config()||window.DARLA.inProgress()||i&&0!==i.length)setTimeout((function(){e(t)}),500);else{if(!r.h&&!r.w){var o=Math.floor(m*v[n]),s={flex:{h:{min:o},w:{min:m}},h:o,w:m};Object.assign(r,s)}var c=r.id;window.DARLA.addPos(r);var d=new window.DARLA.Response(c,{});a=unescape(a),d.add(c,a),window.DARLA.render(d),t.classList.remove("unprocessed-display-card")}}};window.wafer.on("fetch:success",(function(e){var t=e.elem;if(t&&t.classList){if(t.classList.contains("collections-view-more")&&(document.documentElement.classList.remove("Reader-closed"),document.documentElement.classList.add("Reader-open"),window.wafer.base.lock(document.getElementById("MainView")),window.scrollTo(0,0)),t.classList.contains("stream-batch-fetch")){var a=document.getElementsByClassName("js-display-card unprocessed-display-card");a.length&&g.convertNodeListToArray(a).forEach((function(e){window.DARLA&&e?p(e):e.style.display="none"}));var r=window.rapidPageConfig&&window.rapidPageConfig.rapidConfig&&window.rapidPageConfig.rapidConfig.spaceid;r&&(window._comscore=window._comscore||[],window._comscore.push({c1:2,c14:window.YAHOO&&window.YAHOO.comscore&&window.YAHOO.comscore.c14||-1,c2:"7241469",c5:r,c7:document.location.href}),window.COMSCORE&&window.COMSCORE.purge())}if(t.classList.contains("wafer-fetch-complete")){var n=t.getAttribute("data-wf-url");if(n&&n.includes("react-wafer-stream"))g.convertNodeListToArray(f).includes(t)||(f=document.querySelectorAll(".stream-items"),L())}}}));var h=function e(t){var a=Math.floor(16*m/9),r=t.querySelector("#defaultRESERVEMOMENTS"),n=r&&r.getAttribute("data-html");if(n){var i=window.DARLA.prefetched();if(window.DARLA.inProgress()||i&&0!==i.length)setTimeout((function(){e(t)}),500);else{var o={dest:"defaultRESERVEMOMENTS",flex:{h:{min:a},w:{min:m}},h:a,id:"RESERVEMOMENTS",supports:{"exp-ovr":1,"exp-push":1,"resize-to":1},w:m};window.DARLA.addPos(o);var s=new window.DARLA.Response("RESERVEMOMENTS",{});n=unescape(n),s.add("RESERVEMOMENTS",n),window.DARLA.render(s)}}};function L(){g.convertNodeListToArray(f).filter((function(e){return!e.classList.contains("init-visited")})).forEach((function(l){if(l.classList.add("init-visited"),l.addEventListener("animationend",(function(e){var t=e&&e.target;e&&t&&"fadeOutAdConfirm"===e.animationName&&(t.classList.contains("ad-feedback-options")||(t.classList.contains("give-feedback-screen")?t=g.findAncestor(t,"stream-item"):t.classList.contains("comm-undo")&&(t=g.findAncestor(t,"stream-item-card")),t.parentNode&&(window.wafer.base.destroy(t),t.parentElement.classList.contains("hide-on-dislike")?t.parentElement.parentElement.removeChild(t.parentNode):t.parentNode.removeChild(t))))})),l.addEventListener("click",(function(l){!function(l){window.location.href.indexOf("functest=1")>-1&&l.preventDefault();var u=l.target;if(!g||!u)return;var f=g.findAncestor(u,"js-content-viewer");if(!f)return;var w=g.findAncestor(f,"stream-cluster-item")||g.findAncestor(f,"js-stream-content");if(!w)return;var m=w.getAttribute("data-uuid");if(m){var A=w&&w.getAttribute("data-parent-uuid");if(t=A&&document.querySelector('li[data-uuid="'+A+'"]')||w,a=t&&t.getElementsByClassName(i)[0]){if(t.classList.contains(e))return;var v=T(),p=window.YAHOO&&window.YAHOO.context||{},h={config:{leadItemUuid:A||m},ctrl:o,lang:p.lang,m_id:s,m_mode:c,region:p.region,site:p.site},L={dedupUuids:v.dedupUuids.join(","),uuid:m},y=a.getAttribute("data-cfg");if(y){var E=w.getAttribute("data-cposy");E=isNaN(E)?null:parseInt(E,10);try{var N=JSON.parse(y);null!==E&&(N.i13n.cposy=E),h.config=Object.assign(h.config,N)}catch(e){}}var b=a.getAttribute("data-bucket");b&&(h.bucket=b),h.config.ncpParams=h.config.ncpParams||{},h.config.ncpParams.query=h.config.ncpParams.query||{},h.config.ncpParams.query=Object.assign(L,h.config.ncpParams.query);var q=window.wafer.base.state.drawer,R=q&&q.adsToken;R&&(h.config.ncpParams.query.geminiDedupeToken=R),a.setAttribute("data-wf-body",JSON.stringify(h)),a.classList.remove(r,n),a.classList.add(d),window.wafer.base.sync(a.parentNode)}}}(l)})),w&&window.wafer.base&&g){var u=w.getAttribute("data-wf-url"),f=w.getAttribute("data-wf-body");g.fetchWithCache(u,{body:f,cache:0}).then((function(e){if(e&&e.html){w.innerHTML=e.html;var t=w.querySelectorAll(".stream-ad"),a=w.getElementsByClassName("wafer-state")[0],r=l.querySelectorAll(".stream-ad-placeholder");if(t&&r)for(var n=t.length,i=r.length,o=0;o<i&&o<n;o++)r[o].replaceWith(t[o]);w.innerHTML="",a&&w.appendChild(a),window.wafer.base.sync(l)}})).catch((function(e){var t=l.querySelectorAll(".wafer-fetch.stream-batch-fetch");t.length&&g.convertNodeListToArray(t).forEach((function(e){var t=e.classList;t&&(t.add("wafer-fetch-error"),t.remove("wafer-fetch"))}))}))}var v=l.querySelectorAll("."+A+", ."+A+"-mon");if(v.length){g.convertNodeListToArray(v).forEach((function(e){e.classList&&e.classList.contains("js-reserve-moments")&&(window.DARLA?h(e):e.style.display="none")}));var L=v[0].querySelector(".js-panorama-scroll-view");L&&0===L.scrollLeft&&(L.scrollLeft=(L.scrollWidth-m)/2)}var y=!!window.DARLA,E=l.querySelectorAll(".js-display-card.unprocessed-display-card");E.length&&g.convertNodeListToArray(E).forEach((function(e){y&&e?p(e):e.style.display="none"}))}))}if(f&&f.length){L();var y,E,N=document.getElementById("scrollable-smad"),b=document.getElementById("scrollable-video"),q=window.innerHeight||document.documentElement.clientHeight,R={},S=function(e){return e&&(e=(e=(e=(e=(e=(e=e.replace(/\$\(V_AUTOPLAYED\)/,!1)).replace(/\$\(V_PLAYER_WIDTH\)/,N.clientHeight)).replace(/\$\(V_PLAYER_HEIGHT\)/,N.clientWidth)).replace(/\$\(V_SKIP_AVAIL\)/,!1)).replace(/\$\(V_EXPANDED\)/,!1)).replace(/\$\(V_AUD_INFO\)/,2)),e};if(N){var O=N.getBoundingClientRect();y=O.top-q,E=O.bottom-y,R.startActionUrl=N.getAttribute("data-video-quartile-start"),R.quartileActionUrl25=N.getAttribute("data-video-quartile-25"),R.quartileActionUrl50=N.getAttribute("data-video-quartile-50"),R.quartileActionUrl75=N.getAttribute("data-video-quartile-75"),R.quartileActionUrl100=N.getAttribute("data-video-quartile-100")}N&&b&&window.addEventListener("scroll",g.throttle((function(){var e=b&&b.duration,t=N.getBoundingClientRect();if(t.top<q&&t.bottom>0){b.currentTime=(window.pageYOffset-y)*e/E;var a=(q-t.top)/q*100;(a=5*Math.ceil(a/5))>=100&&R.quartileActionUrl100?(g.fireBeacon(S(R.quartileActionUrl100),{useNavigator:!1}),R.quartileActionUrl100=null):a>=75&&R.quartileActionUrl75?(g.fireBeacon(S(R.quartileActionUrl75),{useNavigator:!1}),R.quartileActionUrl75=null):a>=50&&R.quartileActionUrl50?(g.fireBeacon(S(R.quartileActionUrl50),{useNavigator:!1}),R.quartileActionUrl50=null):a>=25&&R.quartileActionUrl25?(g.fireBeacon(S(R.quartileActionUrl25),{useNavigator:!1}),R.quartileActionUrl25=null):a>=5&&R.startActionUrl&&(g.fireBeacon(S(R.startActionUrl),{useNavigator:!1}),R.startActionUrl=null)}}),16))}var T=function(){for(var e=Array.prototype.slice.call(document.getElementsByClassName(l)),t=0;t<e.length;t++){var a=e[t],r=a.text;a.classList.remove(l);try{var n=JSON.parse(r);n&&Array.isArray(n.uuidList)&&u.length+n.uuidList.length<=250&&(u=u.concat(n.uuidList))}catch(e){}}return{dedupUuids:u}};window.addEventListener("viewerClosed",(function(){if(t){var r=t,n=a&&!!a.getElementsByClassName("stream-realted-list")[0];!r.classList.contains(e)&&n&&(r.classList.add("drawer-beacon"),setTimeout((function(){r.classList.add(e)}),10)),a=null,t=null}}));window.wafer.on("video:adplaybackstart",(function(e){e&&e.elem&&e.elem.parentNode&&e.elem.parentNode.classList&&e.elem.parentNode.classList.contains("stream-video-ad-v2")&&e.elem.parentNode.classList.remove("video-endcard")})),window.wafer.on("video:playbackcomplete",(function(e){e&&e.elem&&e.elem.parentNode&&e.elem.parentNode.classList&&e.elem.parentNode.classList.contains("stream-video-ad-v2")&&e.elem.parentNode.classList.add("video-endcard")}));window.wafer.on("toggle:change",(function(e){if(e&&e.meta&&e.elem){var t=e.elem.getAttribute("data-wf-toggle-target");"show-drawer"===e.meta.className&&f&&f.length&&g.convertNodeListToArray(f).forEach((function(e){var a=e.querySelector(t),r=a&&a.getElementsByClassName("drawer-fetch-target")[0];setTimeout((function(){r&&(r.innerHTML="")}),300)}))}}))}));